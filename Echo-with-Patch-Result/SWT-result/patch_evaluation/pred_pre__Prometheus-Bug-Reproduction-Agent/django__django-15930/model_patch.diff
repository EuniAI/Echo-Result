diff --git a/tests/test_negated_empty_in_case.py b/tests/test_negated_empty_in_case.py
new file mode 100644
index 0000000000..044549a05d
--- /dev/null
+++ b/tests/test_negated_empty_in_case.py
@@ -0,0 +1,31 @@
+import unittest
+
+from django.db import models
+from django.db.models import BooleanField, Case, Q, Value, When
+from django.test import TestCase
+
+
+class Author(models.Model):
+    name = models.CharField(max_length=50)
+
+
+class NegatedEmptyInCaseTests(TestCase):
+    @classmethod
+    def setUpTestData(cls):
+        Author.objects.create(name="John Smith")
+
+    def test_negated_empty_in_with_case(self):
+        """
+        A When() with a condition that is always true, such as ~Q(pk__in=[]),
+        should not generate an empty WHEN clause.
+        """
+        authors = Author.objects.annotate(
+            test=Case(
+                When(~Q(pk__in=[]), then=Value(True)),
+                default=Value(False),
+                output_field=BooleanField(),
+            )
+        )
+        # The query fails with a ProgrammingError before the fix.
+        # The assertion checks that the annotation has the correct value.
+        self.assertIs(authors.first().test, True)
