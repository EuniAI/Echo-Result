+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z '' ']'
+++ export CONDA_SHLVL=0
+++ CONDA_SHLVL=0
+++ '[' -n '' ']'
+++++ dirname /opt/miniconda3/bin/conda
++++ dirname /opt/miniconda3/bin
+++ PATH=/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export PATH
+++ '[' -z '' ']'
+++ PS1=
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1=
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=1
+++ CONDA_SHLVL=1
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=2
++ CONDA_SHLVL=2
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_1=/opt/miniconda3
++ CONDA_PREFIX_1=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ cd /testbed
+ git diff HEAD f64fd47a7627ed6ffe2df2a32ded6ee528a784eb
+ git config --global --add safe.directory /testbed
+ cd /testbed
+ git status
On branch main
nothing to commit, working tree clean
+ git show
commit f64fd47a7627ed6ffe2df2a32ded6ee528a784eb
Author: Mariusz Felisiak <felisiak.mariusz@gmail.com>
Date:   Fri Jul 7 08:06:01 2023 +0200

    Fixed #9602 -- Added AdminSite.get_model_admin().
    
    This allows retrieving an admin class for the given model class without
    using internal attributes.

diff --git a/django/contrib/admin/checks.py b/django/contrib/admin/checks.py
index 45d895dff0..f5aa9b55d4 100644
--- a/django/contrib/admin/checks.py
+++ b/django/contrib/admin/checks.py
@@ -220,6 +220,8 @@ class BaseModelAdminChecks:
         ManyToManyField and that the item has a related ModelAdmin with
         search_fields defined.
         """
+        from django.contrib.admin.sites import NotRegistered
+
         try:
             field = obj.model._meta.get_field(field_name)
         except FieldDoesNotExist:
@@ -234,8 +236,9 @@ class BaseModelAdminChecks:
                     obj=obj,
                     id="admin.E038",
                 )
-            related_admin = obj.admin_site._registry.get(field.remote_field.model)
-            if related_admin is None:
+            try:
+                related_admin = obj.admin_site.get_model_admin(field.remote_field.model)
+            except NotRegistered:
                 return [
                     checks.Error(
                         'An admin for model "%s" has to be registered '
@@ -248,19 +251,20 @@ class BaseModelAdminChecks:
                         id="admin.E039",
                     )
                 ]
-            elif not related_admin.search_fields:
-                return [
-                    checks.Error(
-                        '%s must define "search_fields", because it\'s '
-                        "referenced by %s.autocomplete_fields."
-                        % (
-                            related_admin.__class__.__name__,
-                            type(obj).__name__,
-                        ),
-                        obj=obj.__class__,
-                        id="admin.E040",
-                    )
-                ]
+            else:
+                if not related_admin.search_fields:
+                    return [
+                        checks.Error(
+                            '%s must define "search_fields", because it\'s '
+                            "referenced by %s.autocomplete_fields."
+                            % (
+                                related_admin.__class__.__name__,
+                                type(obj).__name__,
+                            ),
+                            obj=obj.__class__,
+                            id="admin.E040",
+                        )
+                    ]
             return []
 
     def _check_raw_id_fields(self, obj):
diff --git a/django/contrib/admin/filters.py b/django/contrib/admin/filters.py
index f6f6d0dd6f..197d39bf21 100644
--- a/django/contrib/admin/filters.py
+++ b/django/contrib/admin/filters.py
@@ -257,10 +257,16 @@ class RelatedFieldListFilter(FieldListFilter):
         """
         Return the model admin's ordering for related field, if provided.
         """
-        related_admin = model_admin.admin_site._registry.get(field.remote_field.model)
-        if related_admin is not None:
+        from django.contrib.admin.sites import NotRegistered
+
+        try:
+            related_admin = model_admin.admin_site.get_model_admin(
+                field.remote_field.model
+            )
+        except NotRegistered:
+            return ()
+        else:
             return related_admin.get_ordering(request)
-        return ()
 
     def field_choices(self, field, request, model_admin):
         ordering = self.field_admin_ordering(field, request, model_admin)
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index b0635669e9..f9760664dd 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -160,6 +160,8 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):
 
         If kwargs are given, they're passed to the form Field's constructor.
         """
+        from django.contrib.admin.sites import NotRegistered
+
         # If the field specifies choices, we don't need to look for special
         # admin widgets - we just need to use a select widget of some kind.
         if db_field.choices:
@@ -185,23 +187,27 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):
             # rendered output. formfield can be None if it came from a
             # OneToOneField with parent_link=True or a M2M intermediary.
             if formfield and db_field.name not in self.raw_id_fields:
-                related_modeladmin = self.admin_site._registry.get(
-                    db_field.remote_field.model
-                )
-                wrapper_kwargs = {}
-                if related_modeladmin:
-                    wrapper_kwargs.update(
-                        can_add_related=related_modeladmin.has_add_permission(request),
-                        can_change_related=related_modeladmin.has_change_permission(
+                try:
+                    related_modeladmin = self.admin_site.get_model_admin(
+                        db_field.remote_field.model
+                    )
+                except NotRegistered:
+                    wrapper_kwargs = {}
+                else:
+                    wrapper_kwargs = {
+                        "can_add_related": related_modeladmin.has_add_permission(
                             request
                         ),
-                        can_delete_related=related_modeladmin.has_delete_permission(
+                        "can_change_related": related_modeladmin.has_change_permission(
                             request
                         ),
-                        can_view_related=related_modeladmin.has_view_permission(
+                        "can_delete_related": related_modeladmin.has_delete_permission(
                             request
                         ),
-                    )
+                        "can_view_related": related_modeladmin.has_view_permission(
+                            request
+                        ),
+                    }
                 formfield.widget = widgets.RelatedFieldWidgetWrapper(
                     formfield.widget,
                     db_field.remote_field,
@@ -246,8 +252,13 @@ class BaseModelAdmin(metaclass=forms.MediaDefiningClass):
         ordering.  Otherwise don't specify the queryset, let the field decide
         (return None in that case).
         """
-        related_admin = self.admin_site._registry.get(db_field.remote_field.model)
-        if related_admin is not None:
+        from django.contrib.admin.sites import NotRegistered
+
+        try:
+            related_admin = self.admin_site.get_model_admin(db_field.remote_field.model)
+        except NotRegistered:
+            return None
+        else:
             ordering = related_admin.get_ordering(request)
             if ordering is not None and ordering != ():
                 return db_field.remote_field.model._default_manager.using(db).order_by(
diff --git a/django/contrib/admin/sites.py b/django/contrib/admin/sites.py
index 1e289876f8..41ce85db79 100644
--- a/django/contrib/admin/sites.py
+++ b/django/contrib/admin/sites.py
@@ -121,7 +121,7 @@ class AdminSite:
                 )
 
             if self.is_registered(model):
-                registered_admin = str(self._registry[model])
+                registered_admin = str(self.get_model_admin(model))
                 msg = "The model %s is already registered " % model.__name__
                 if registered_admin.endswith(".ModelAdmin"):
                     # Most likely registered without a ModelAdmin subclass.
@@ -166,6 +166,12 @@ class AdminSite:
         """
         return model in self._registry
 
+    def get_model_admin(self, model):
+        try:
+            return self._registry[model]
+        except KeyError:
+            raise NotRegistered(f"The model {model.__name__} is not registered.")
+
     def add_action(self, action, name=None):
         """
         Register an action to be available globally.
diff --git a/django/contrib/admin/utils.py b/django/contrib/admin/utils.py
index bb5f950122..92ef1639b4 100644
--- a/django/contrib/admin/utils.py
+++ b/django/contrib/admin/utils.py
@@ -144,7 +144,9 @@ def get_deleted_objects(objs, request, admin_site):
         no_edit_link = "%s: %s" % (capfirst(opts.verbose_name), obj)
 
         if admin_site.is_registered(model):
-            if not admin_site._registry[model].has_delete_permission(request, obj):
+            if not admin_site.get_model_admin(model).has_delete_permission(
+                request, obj
+            ):
                 perms_needed.add(opts.verbose_name)
             try:
                 admin_url = reverse(
diff --git a/django/contrib/admin/views/autocomplete.py b/django/contrib/admin/views/autocomplete.py
index 130848b551..051b9a31b9 100644
--- a/django/contrib/admin/views/autocomplete.py
+++ b/django/contrib/admin/views/autocomplete.py
@@ -74,6 +74,8 @@ class AutocompleteJsonView(BaseListView):
         Raise Http404 if the target model admin is not configured properly with
         search_fields.
         """
+        from django.contrib.admin.sites import NotRegistered
+
         term = request.GET.get("term", "")
         try:
             app_label = request.GET["app_label"]
@@ -97,8 +99,8 @@ class AutocompleteJsonView(BaseListView):
         except AttributeError as e:
             raise PermissionDenied from e
         try:
-            model_admin = self.admin_site._registry[remote_model]
-        except KeyError as e:
+            model_admin = self.admin_site.get_model_admin(remote_model)
+        except NotRegistered as e:
             raise PermissionDenied from e
 
         # Validate suitability of objects.
diff --git a/docs/ref/contrib/admin/index.txt b/docs/ref/contrib/admin/index.txt
index 2ae7e3958f..c8965f9b74 100644
--- a/docs/ref/contrib/admin/index.txt
+++ b/docs/ref/contrib/admin/index.txt
@@ -3024,6 +3024,13 @@ Templates can override or extend base admin templates as described in
     Raises ``django.contrib.admin.sites.NotRegistered`` if a model isn't
     already registered.
 
+.. method:: AdminSite.get_model_admin(model)
+
+    .. versionadded:: 5.0
+
+    Returns an admin class for the given model class. Raises
+    ``django.contrib.admin.sites.NotRegistered`` if a model isn't registered.
+
 .. method:: AdminSite.get_log_entries(request)
 
     .. versionadded:: 5.0
diff --git a/docs/releases/5.0.txt b/docs/releases/5.0.txt
index f309721d44..d39703888a 100644
--- a/docs/releases/5.0.txt
+++ b/docs/releases/5.0.txt
@@ -145,6 +145,9 @@ Minor features
 
 * ``XRegExp`` is upgraded from version 3.2.0 to 5.1.1.
 
+* The new :meth:`.AdminSite.get_model_admin` method returns an admin class for
+  the given model class.
+
 :mod:`django.contrib.admindocs`
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
 
diff --git a/tests/admin_changelist/tests.py b/tests/admin_changelist/tests.py
index 176b49c66c..8fdd343b18 100644
--- a/tests/admin_changelist/tests.py
+++ b/tests/admin_changelist/tests.py
@@ -878,7 +878,7 @@ class ChangeListTests(TestCase):
         user_parents = self._create_superuser("parents")
 
         # Test with user 'noparents'
-        m = custom_site._registry[Child]
+        m = custom_site.get_model_admin(Child)
         request = self._mocked_authenticated_request("/child/", user_noparents)
         response = m.changelist_view(request)
         self.assertNotContains(response, "Parent object")
@@ -903,7 +903,7 @@ class ChangeListTests(TestCase):
 
         # Test default implementation
         custom_site.register(Child, ChildAdmin)
-        m = custom_site._registry[Child]
+        m = custom_site.get_model_admin(Child)
         request = self._mocked_authenticated_request("/child/", user_noparents)
         response = m.changelist_view(request)
         self.assertContains(response, "Parent object")
diff --git a/tests/admin_checks/tests.py b/tests/admin_checks/tests.py
index 417c8504ed..d2d1eb219e 100644
--- a/tests/admin_checks/tests.py
+++ b/tests/admin_checks/tests.py
@@ -276,8 +276,7 @@ class SystemChecksTestCase(SimpleTestCase):
         class MyBookAdmin(admin.ModelAdmin):
             def check(self, **kwargs):
                 errors = super().check(**kwargs)
-                author_admin = self.admin_site._registry.get(Author)
-                if author_admin is None:
+                if not self.admin_site.is_registered(Author):
                     errors.append("AuthorAdmin missing!")
                 return errors
 
diff --git a/tests/admin_ordering/tests.py b/tests/admin_ordering/tests.py
index 486e222d01..57f8fc7c6f 100644
--- a/tests/admin_ordering/tests.py
+++ b/tests/admin_ordering/tests.py
@@ -152,10 +152,10 @@ class TestRelatedFieldsAdminOrdering(TestCase):
             site.unregister(Band)
 
     def check_ordering_of_field_choices(self, correct_ordering):
-        fk_field = site._registry[Song].formfield_for_foreignkey(
+        fk_field = site.get_model_admin(Song).formfield_for_foreignkey(
             Song.band.field, request=None
         )
-        m2m_field = site._registry[Song].formfield_for_manytomany(
+        m2m_field = site.get_model_admin(Song).formfield_for_manytomany(
             Song.other_interpreters.field, request=None
         )
         self.assertEqual(list(fk_field.queryset), correct_ordering)
diff --git a/tests/admin_registration/tests.py b/tests/admin_registration/tests.py
index 25f317d322..c8caf3f202 100644
--- a/tests/admin_registration/tests.py
+++ b/tests/admin_registration/tests.py
@@ -22,13 +22,13 @@ class TestRegistration(SimpleTestCase):
 
     def test_bare_registration(self):
         self.site.register(Person)
-        self.assertIsInstance(self.site._registry[Person], admin.ModelAdmin)
+        self.assertIsInstance(self.site.get_model_admin(Person), admin.ModelAdmin)
         self.site.unregister(Person)
         self.assertEqual(self.site._registry, {})
 
     def test_registration_with_model_admin(self):
         self.site.register(Person, NameAdmin)
-        self.assertIsInstance(self.site._registry[Person], NameAdmin)
+        self.assertIsInstance(self.site.get_model_admin(Person), NameAdmin)
         self.site.unregister(Person)
         self.assertEqual(self.site._registry, {})
 
@@ -57,22 +57,28 @@ class TestRegistration(SimpleTestCase):
 
     def test_registration_with_star_star_options(self):
         self.site.register(Person, search_fields=["name"])
-        self.assertEqual(self.site._registry[Person].search_fields, ["name"])
+        self.assertEqual(self.site.get_model_admin(Person).search_fields, ["name"])
+
+    def test_get_model_admin_unregister_model(self):
+        msg = "The model Person is not registered."
+        with self.assertRaisesMessage(admin.sites.NotRegistered, msg):
+            self.site.get_model_admin(Person)
 
     def test_star_star_overrides(self):
         self.site.register(
             Person, NameAdmin, search_fields=["name"], list_display=["__str__"]
         )
-        self.assertEqual(self.site._registry[Person].search_fields, ["name"])
-        self.assertEqual(self.site._registry[Person].list_display, ["__str__"])
-        self.assertTrue(self.site._registry[Person].save_on_top)
+        person_admin = self.site.get_model_admin(Person)
+        self.assertEqual(person_admin.search_fields, ["name"])
+        self.assertEqual(person_admin.list_display, ["__str__"])
+        self.assertIs(person_admin.save_on_top, True)
 
     def test_iterable_registration(self):
         self.site.register([Person, Place], search_fields=["name"])
-        self.assertIsInstance(self.site._registry[Person], admin.ModelAdmin)
-        self.assertEqual(self.site._registry[Person].search_fields, ["name"])
-        self.assertIsInstance(self.site._registry[Place], admin.ModelAdmin)
-        self.assertEqual(self.site._registry[Place].search_fields, ["name"])
+        self.assertIsInstance(self.site.get_model_admin(Person), admin.ModelAdmin)
+        self.assertEqual(self.site.get_model_admin(Person).search_fields, ["name"])
+        self.assertIsInstance(self.site.get_model_admin(Place), admin.ModelAdmin)
+        self.assertEqual(self.site.get_model_admin(Place).search_fields, ["name"])
         self.site.unregister([Person, Place])
         self.assertEqual(self.site._registry, {})
 
@@ -116,18 +122,26 @@ class TestRegistrationDecorator(SimpleTestCase):
 
     def test_basic_registration(self):
         register(Person)(NameAdmin)
-        self.assertIsInstance(self.default_site._registry[Person], admin.ModelAdmin)
+        self.assertIsInstance(
+            self.default_site.get_model_admin(Person), admin.ModelAdmin
+        )
         self.default_site.unregister(Person)
 
     def test_custom_site_registration(self):
         register(Person, site=self.custom_site)(NameAdmin)
-        self.assertIsInstance(self.custom_site._registry[Person], admin.ModelAdmin)
+        self.assertIsInstance(
+            self.custom_site.get_model_admin(Person), admin.ModelAdmin
+        )
 
     def test_multiple_registration(self):
         register(Traveler, Place)(NameAdmin)
-        self.assertIsInstance(self.default_site._registry[Traveler], admin.ModelAdmin)
+        self.assertIsInstance(
+            self.default_site.get_model_admin(Traveler), admin.ModelAdmin
+        )
         self.default_site.unregister(Traveler)
-        self.assertIsInstance(self.default_site._registry[Place], admin.ModelAdmin)
+        self.assertIsInstance(
+            self.default_site.get_model_admin(Place), admin.ModelAdmin
+        )
         self.default_site.unregister(Place)
 
     def test_wrapped_class_not_a_model_admin(self):
diff --git a/tests/admin_views/test_autocomplete_view.py b/tests/admin_views/test_autocomplete_view.py
index 90533ea5b0..f8ab32717a 100644
--- a/tests/admin_views/test_autocomplete_view.py
+++ b/tests/admin_views/test_autocomplete_view.py
@@ -3,6 +3,7 @@ import json
 from contextlib import contextmanager
 
 from django.contrib import admin
+from django.contrib.admin.sites import NotRegistered
 from django.contrib.admin.tests import AdminSeleniumTestCase
 from django.contrib.admin.views.autocomplete import AutocompleteJsonView
 from django.contrib.auth.models import Permission, User
@@ -61,8 +62,11 @@ site.register(Toy, autocomplete_fields=["child"])
 
 @contextmanager
 def model_admin(model, model_admin, admin_site=site):
-    org_admin = admin_site._registry.get(model)
-    if org_admin:
+    try:
+        org_admin = admin_site.get_model_admin(model)
+    except NotRegistered:
+        org_admin = None
+    else:
         admin_site.unregister(model)
     admin_site.register(model, model_admin)
     try:
diff --git a/tests/gis_tests/geoadmin/tests.py b/tests/gis_tests/geoadmin/tests.py
index a7e5700b49..869307328e 100644
--- a/tests/gis_tests/geoadmin/tests.py
+++ b/tests/gis_tests/geoadmin/tests.py
@@ -9,7 +9,7 @@ class GeoAdminTest(SimpleTestCase):
     admin_site = site  # ModelAdmin
 
     def test_widget_empty_string(self):
-        geoadmin = self.admin_site._registry[City]
+        geoadmin = self.admin_site.get_model_admin(City)
         form = geoadmin.get_changelist_form(None)({"point": ""})
         with self.assertRaisesMessage(AssertionError, "no logs"):
             with self.assertLogs("django.contrib.gis", "ERROR"):
@@ -21,7 +21,7 @@ class GeoAdminTest(SimpleTestCase):
         )
 
     def test_widget_invalid_string(self):
-        geoadmin = self.admin_site._registry[City]
+        geoadmin = self.admin_site.get_model_admin(City)
         form = geoadmin.get_changelist_form(None)({"point": "INVALID()"})
         with self.assertLogs("django.contrib.gis", "ERROR") as cm:
             output = str(form["point"])
@@ -38,7 +38,7 @@ class GeoAdminTest(SimpleTestCase):
         )
 
     def test_widget_has_changed(self):
-        geoadmin = self.admin_site._registry[City]
+        geoadmin = self.admin_site.get_model_admin(City)
         form = geoadmin.get_changelist_form(None)()
         has_changed = form.fields["point"].has_changed
 
@@ -59,7 +59,7 @@ class GISAdminTests(GeoAdminTest):
     admin_site = site_gis  # GISModelAdmin
 
     def test_default_gis_widget_kwargs(self):
-        geoadmin = self.admin_site._registry[City]
+        geoadmin = self.admin_site.get_model_admin(City)
         form = geoadmin.get_changelist_form(None)()
         widget = form["point"].field.widget
         self.assertEqual(widget.attrs["default_lat"], 47)
@@ -67,7 +67,7 @@ class GISAdminTests(GeoAdminTest):
         self.assertEqual(widget.attrs["default_zoom"], 12)
 
     def test_custom_gis_widget_kwargs(self):
-        geoadmin = site_gis_custom._registry[City]
+        geoadmin = site_gis_custom.get_model_admin(City)
         form = geoadmin.get_changelist_form(None)()
         widget = form["point"].field.widget
         self.assertEqual(widget.attrs["default_lat"], 55)
diff --git a/tests/modeladmin/tests.py b/tests/modeladmin/tests.py
index 627029c9cf..f2763ecc0f 100644
--- a/tests/modeladmin/tests.py
+++ b/tests/modeladmin/tests.py
@@ -871,7 +871,7 @@ class ModelAdminTests(TestCase):
             username="bob", email="bob@test.com", password="test"
         )
         self.site.register(Band, ModelAdmin)
-        ma = self.site._registry[Band]
+        ma = self.site.get_model_admin(Band)
         (
             deletable_objects,
             model_count,
@@ -898,7 +898,7 @@ class ModelAdminTests(TestCase):
                 return False
 
         self.site.register(Band, TestModelAdmin)
-        ma = self.site._registry[Band]
+        ma = self.site.get_model_admin(Band)
         (
             deletable_objects,
             model_count,
+ git diff f64fd47a7627ed6ffe2df2a32ded6ee528a784eb
+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z x ']'
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1='(testbed) '
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=3
+++ CONDA_SHLVL=3
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=4
++ CONDA_SHLVL=4
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_3=/opt/miniconda3
++ CONDA_PREFIX_3=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ python -m pip install -e .
Obtaining file:///testbed
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: asgiref>=3.7.0 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from Django==5.0.dev20230707060601) (3.11.0)
Requirement already satisfied: sqlparse>=0.3.1 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from Django==5.0.dev20230707060601) (0.5.5)
Building wheels for collected packages: Django
  Building editable for Django (pyproject.toml): started
  Building editable for Django (pyproject.toml): finished with status 'done'
  Created wheel for Django: filename=django-5.0.dev20230707060601-0.editable-py3-none-any.whl size=27611 sha256=1d72a488c3b5472a9fb0435da4371de7ad9cbaced65918ecad6c495e061333db
  Stored in directory: /tmp/pip-ephem-wheel-cache-0tfxrjp0/wheels/49/5f/4f/01b7d31ea6ddac9643da788242d33e5fd3467d95d17b032c6b
Successfully built Django
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 5.0.dev20230707060601
    Uninstalling Django-5.0.dev20230707060601:
      Successfully uninstalled Django-5.0.dev20230707060601
Successfully installed Django-5.0.dev20230707060601
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
+ git apply -v -
Checking patch tests/model_forms/test_inlineformset_uuid_fk.py...
Applied patch tests/model_forms/test_inlineformset_uuid_fk.py cleanly.
+ python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(django/forms/models\.py)' ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 model_forms.test_inlineformset_uuid_fk
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
['--count', '-C', 'coverage.cover', '--include-pattern', '/testbed/(django/forms/models\\.py)']
Testing against Django installed in '/testbed/django'
Importing application model_forms
Found 1 test(s).
Skipping setup of unused database(s): other.
Operations to perform:
  Synchronize unmigrated apps: auth, contenttypes, messages, model_forms, sessions, staticfiles
  Apply all migrations: admin, sites
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_content_type
    Creating table auth_permission
    Creating table auth_group
    Creating table auth_user
    Creating table django_session
    Creating table model_forms_person
    Creating table model_forms_category
    Creating table model_forms_writer
    Creating table model_forms_article
    Creating table model_forms_improvedarticle
    Creating table model_forms_improvedarticlewithparentlink
    Creating table model_forms_betterwriter
    Creating table model_forms_publication
    Creating table model_forms_publicationdefaults
    Creating table model_forms_author
    Creating table model_forms_author1
    Creating table model_forms_writerprofile
    Creating table model_forms_document
    Creating table model_forms_textfile
    Creating table model_forms_customff
    Creating table model_forms_filepathmodel
    Creating table model_forms_imagefile
    Creating table model_forms_optionalimagefile
    Creating table model_forms_noextensionimagefile
    Creating table model_forms_homepage
    Creating table model_forms_product
    Creating table model_forms_price
    Creating table model_forms_triple
    Creating table model_forms_articlestatus
    Creating table model_forms_inventory
    Creating table model_forms_book
    Creating table model_forms_derivedbook
    Creating table model_forms_explicitpk
    Creating table model_forms_post
    Creating table model_forms_datetimepost
    Creating table model_forms_derivedpost
    Creating table model_forms_bigint
    Creating table model_forms_customfieldforexclusionmodel
    Creating table model_forms_flexibledatepost
    Creating table model_forms_colour
    Creating table model_forms_colourfulitem
    Creating table model_forms_customerrormessage
    Creating table model_forms_character
    Creating table model_forms_stumpjoke
    Creating table model_forms_student
    Creating table model_forms_photo
    Creating table model_forms_uuidpk
    Creating table model_forms_strictassignmentfieldspecific
    Creating table model_forms_strictassignmentall
    Creating table model_forms_award
    Creating table model_forms_nullableuniquecharfieldmodel
    Creating table model_forms_number
    Creating table model_forms_numberstodice
    Creating table model_forms_dice
    Creating table model_forms_thing
    Creating table model_forms_subthing
    Running deferred SQL...
Running migrations:
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying sites.0001_initial... OK
  Applying sites.0002_alter_domain_unique... OK
System check identified no issues (0 silenced).
test_create_parent_with_uuid_to_field_and_inline (model_forms.test_inlineformset_uuid_fk.InlineUUIDDefaultTests.test_create_parent_with_uuid_to_field_and_inline)
A parent's UUID field default should be preserved when adding an inline ... ERROR

======================================================================
ERROR: test_create_parent_with_uuid_to_field_and_inline (model_forms.test_inlineformset_uuid_fk.InlineUUIDDefaultTests.test_create_parent_with_uuid_to_field_and_inline)
A parent's UUID field default should be preserved when adding an inline
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/backends/sqlite3/base.py", line 328, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: model_forms_thing.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/testbed/./tests/model_forms/test_inlineformset_uuid_fk.py", line 71, in test_create_parent_with_uuid_to_field_and_inline
    thing.save()
  File "/testbed/django/db/models/base.py", line 814, in save
    self.save_base(
  File "/testbed/django/db/models/base.py", line 901, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/base.py", line 1058, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/base.py", line 1099, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/query.py", line 1816, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/sql/compiler.py", line 1822, in execute_sql
    cursor.execute(sql, params)
  File "/testbed/django/db/backends/utils.py", line 67, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/backends/utils.py", line 80, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/backends/utils.py", line 84, in _execute
    with self.db.wrap_database_errors:
  File "/testbed/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/testbed/django/db/backends/utils.py", line 89, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/backends/sqlite3/base.py", line 328, in execute
    return super().execute(query, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: NOT NULL constraint failed: model_forms_thing.id

----------------------------------------------------------------------
Ran 1 test in 0.012s

FAILED (errors=1)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
+ cat coverage.cover
{"/testbed/django/forms/models.py": {"0": 0, "5": 1, "7": 1, "13": 1, "14": 1, "15": 1, "16": 1, "17": 1, "18": 1, "24": 1, "25": 1, "26": 1, "28": 1, "43": 1, "46": 1, "94": 1, "119": 1, "138": 1, "139": 1, "140": 1, "141": 1, "142": 1, "143": 1, "144": 1, "145": 1, "146": 1, "136": 2, "148": 1, "149": 1, "254": 2, "268": 2, "341": 2, "561": 2, "567": 1, "568": 1, "569": 1, "570": 1, "571": 1, "572": 1, "573": 1, "574": 1, "575": 1, "576": 1, "565": 1, "656": 2, "1010": 1, "1011": 1, "1012": 1, "1013": 1, "1014": 1, "1015": 1, "1016": 1, "1017": 1, "1018": 1, "1019": 1, "1020": 1, "1021": 1, "1022": 1, "1023": 1, "1024": 1, "1025": 1, "1026": 1, "1027": 1, "1028": 1, "1029": 1, "1030": 1, "1031": 1, "1008": 1, "1079": 2, "1190": 1, "1272": 1, "1273": 1, "1274": 1, "1275": 1, "1276": 1, "1277": 1, "1278": 1, "1279": 1, "1280": 1, "1281": 1, "1282": 1, "1283": 1, "1284": 1, "1285": 1, "1286": 1, "1287": 1, "1288": 1, "1289": 1, "1290": 1, "1291": 1, "1292": 1, "1293": 1, "1294": 1, "1269": 1, "1338": 2, "1382": 2, "1399": 2, "1430": 2, "1566": 2, "1665": 1, "51": 2, "53": 2, "55": 2, "56": 2, "57": 8, "59": 6, "58": 10, "60": 4, "61": 3, "63": 3, "64": 3, "65": 0, "66": 3, "67": 0, "71": 3, "70": 3, "72": 0, "73": 0, "75": 0, "77": 0, "80": 3, "81": 0, "83": 3, "85": 2, "86": 0, "88": 2, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "113": 0, "114": 0, "115": 0, "116": 0, "121": 2, "123": 2, "124": 0, "125": 0, "126": 0, "127": 0, "128": 0, "129": 0, "131": 0, "132": 0, "184": 2, "185": 2, "186": 2, "187": 2, "189": 2, "191": 6, "192": 2, "194": 10, "195": 2, "197": 6, "199": 2, "200": 2, "201": 0, "203": 0, "205": 0, "204": 0, "207": 2, "208": 4, "209": 2, "210": 2, "211": 0, "212": 2, "213": 0, "214": 0, "216": 2, "217": 2, "218": 0, "219": 4, "220": 2, "222": 0, "223": 2, "224": 0, "225": 2, "226": 0, "227": 2, "228": 0, "229": 2, "230": 0, "232": 2, "233": 2, "234": 0, "235": 0, "237": 0, "239": 2, "240": 2, "241": 0, "242": 2, "244": 0, "245": 2, "246": 10, "248": 4, "251": 2, "249": 8, "247": 2, "255": 1, "256": 2, "257": 2, "258": 2, "259": 2, "260": 2, "261": 2, "262": 2, "263": 2, "264": 2, "265": 2, "269": 1, "270": 3, "272": 3, "273": 1, "275": 2, "280": 8, "281": 6, "282": 6, "284": 0, "287": 0, "288": 0, "289": 0, "286": 0, "283": 0, "292": 0, "294": 2, "296": 2, "297": 0, "298": 0, "300": 0, "303": 2, "306": 0, "308": 4, "309": 2, "310": 2, "311": 2, "312": 2, "313": 2, "314": 2, "315": 2, "316": 2, "317": 2, "318": 2, "320": 2, "321": 2, "325": 6, "326": 2, "327": 2, "328": 0, "329": 0, "330": 0, "332": 2, "334": 0, "336": 2, "338": 2, "344": 1, "345": 1, "346": 1, "347": 1, "348": 1, "349": 1, "350": 1, "351": 1, "352": 1, "353": 1, "354": 1, "342": 1, "388": 1, "433": 1, "437": 1, "470": 1, "502": 1, "513": 1, "534": 1, "558": 1, "356": 2, "357": 2, "358": 0, "359": 2, "361": 2, "362": 2, "364": 0, "365": 0, "367": 2, "368": 0, "372": 2, "373": 4, "374": 2, "375": 2, "376": 2, "377": 2, "378": 2, "379": 2, "380": 2, "381": 2, "382": 2, "383": 2, "385": 4, "386": 2, "393": 5, "396": 20, "397": 15, "400": 15, "401": 4, "406": 11, "407": 3, "408": 8, "409": 0, "413": 8, "414": 0, "423": 8, "424": 8, "426": 8, "425": 16, "427": 8, "428": 3, "430": 0, "431": 5, "434": 2, "435": 2, "440": 0, "444": 0, "445": 0, "447": 0, "449": 0, "451": 0, "452": 0, "453": 0, "455": 0, "456": 0, "457": 0, "459": 0, "461": 0, "463": 0, "462": 0, "464": 0, "466": 0, "468": 0, "471": 2, "473": 2, "482": 7, "483": 5, "484": 1, "486": 2, "487": 4, "488": 2, "490": 0, "491": 0, "493": 2, "494": 2, "495": 0, "496": 0, "499": 2, "500": 2, "507": 2, "508": 2, "509": 2, "510": 0, "511": 0, "517": 0, "518": 0, "519": 0, "520": 0, "524": 0, "525": 0, "526": 0, "527": 0, "528": 0, "529": 0, "530": 0, "531": 0, "532": 0, "540": 1, "541": 0, "544": 0, "545": 0, "542": 0, "548": 1, "550": 0, "551": 0, "555": 1, "556": 1, "562": 1, "613": 2, "614": 2, "615": 2, "616": 2, "617": 0, "618": 2, "619": 0, "620": 2, "621": 0, "622": 2, "623": 0, "624": 2, "625": 0, "626": 2, "627": 0, "628": 2, "629": 0, "633": 2, "634": 2, "635": 2, "636": 0, "638": 2, "641": 2, "643": 2, "644": 0, "645": 0, "650": 2, "661": 1, "662": 1, "665": 1, "669": 1, "670": 1, "671": 1, "672": 1, "673": 1, "667": 2, "675": 1, "690": 1, "696": 1, "701": 1, "710": 1, "744": 1, "763": 1, "767": 1, "771": 1, "776": 1, "794": 1, "796": 1, "799": 1, "892": 1, "904": 1, "914": 1, "917": 1, "943": 1, "957": 1, "678": 1, "679": 1, "680": 2, "682": 1, "683": 1, "684": 1, "685": 1, "681": 2, "686": 1, "692": 4, "693": 0, "694": 4, "697": 0, "698": 0, "699": 0, "706": 0, "707": 0, "708": 0, "711": 1, "712": 1, "713": 0, "714": 0, "715": 0, "716": 0, "722": 0, "723": 0, "724": 0, "730": 0, "725": 0, "728": 0, "717": 0, "720": 0, "732": 0, "733": 1, "735": 0, "736": 0, "737": 0, "738": 0, "739": 1, "740": 1, "741": 0, "742": 1, "745": 0, "746": 0, "747": 0, "749": 0, "754": 0, "755": 0, "760": 0, "761": 0, "765": 0, "769": 0, "773": 0, "774": 0, "781": 0, "782": 0, "784": 0, "788": 0, "789": 0, "790": 0, "792": 0, "785": 0, "786": 0, "797": 1, "801": 1, "802": 1, "803": 1, "804": 5, "806": 2, "809": 2, "810": 1, "811": 2, "812": 1, "813": 1, "815": 1, "816": 1, "818": 1, "820": 1, "821": 0, "822": 0, "825": 0, "827": 0, "831": 0, "835": 0, "837": 0, "839": 0, "842": 0, "843": 0, "844": 0, "845": 0, "849": 0, "850": 0, "851": 0, "853": 0, "855": 1, "856": 0, "857": 0, "858": 0, "861": 0, "860": 0, "862": 0, "863": 0, "866": 0, "867": 0, "868": 0, "872": 0, "873": 0, "875": 0, "878": 0, "879": 0, "880": 0, "881": 0, "885": 0, "887": 0, "889": 1, "890": 0, "807": 4, "805": 1, "828": 0, "826": 0, "832": 0, "834": 0, "893": 0, "894": 0, "895": 0, "898": 0, "899": 0, "901": 0, "900": 0, "905": 0, "906": 0, "909": 0, "910": 0, "911": 0, "908": 0, "915": 0, "918": 0, "919": 0, "920": 0, "921": 0, "923": 0, "924": 0, "925": 0, "926": 0, "931": 0, "932": 0, "933": 0, "934": 0, "935": 0, "936": 0, "937": 0, "938": 0, "939": 0, "940": 0, "941": 0, "944": 0, "945": 0, "946": 0, "947": 0, "950": 0, "951": 0, "952": 0, "953": 0, "954": 0, "955": 0, "959": 1, "961": 1, "968": 1, "979": 1, "980": 1, "984": 1, "986": 0, "987": 0, "988": 0, "990": 0, "991": 0, "992": 0, "993": 1, "994": 0, "996": 1, "997": 1, "998": 1, "999": 0, "1001": 1, "1002": 2, "1003": 1, "1005": 1, "970": 2, "971": 1, "973": 0, "974": 0, "975": 0, "969": 1, "1034": 1, "1036": 1, "1037": 0, "1039": 0, "1040": 0, "1044": 2, "1045": 1, "1046": 1, "1047": 1, "1048": 1, "1049": 1, "1050": 1, "1051": 1, "1052": 1, "1053": 1, "1054": 1, "1055": 1, "1057": 2, "1058": 1, "1059": 1, "1060": 1, "1061": 1, "1062": 1, "1063": 1, "1064": 1, "1065": 1, "1066": 1, "1067": 1, "1068": 1, "1069": 1, "1071": 1, "1072": 1, "1073": 1, "1084": 1, "1085": 1, "1086": 1, "1087": 1, "1088": 1, "1089": 1, "1082": 1, "1113": 1, "1118": 1, "1141": 2, "1142": 2, "1145": 1, "1152": 1, "1185": 1, "1092": 1, "1093": 0, "1095": 1, "1096": 1, "1097": 1, "1098": 1, "1099": 1, "1100": 0, "1102": 1, "1103": 1, "1104": 1, "1108": 1, "1109": 1, "1110": 1, "1111": 1, "1114": 4, "1115": 0, "1116": 4, "1119": 1, "1120": 1, "1121": 0, "1123": 0, "1124": 0, "1127": 0, "1129": 0, "1130": 0, "1131": 0, "1134": 1, "1135": 1, "1136": 1, "1137": 1, "1138": 1, "1139": 1, "1143": 1, "1149": 0, "1150": 0, "1153": 1, "1154": 1, "1155": 0, "1156": 0, "1160": 1, "1162": 2, "1163": 1, "1161": 1, "1170": 1, "1171": 1, "1175": 1, "1176": 1, "1177": 1, "1179": 0, "1180": 1, "1181": 1, "1183": 1, "1186": 0, "1187": 0, "1199": 1, "1201": 1, "1202": 1, "1203": 0, "1204": 0, "1205": 0, "1206": 0, "1208": 0, "1207": 0, "1211": 0, "1212": 0, "1216": 0, "1217": 0, "1218": 0, "1221": 0, "1223": 0, "1222": 0, "1225": 0, "1226": 0, "1227": 0, "1231": 1, "1232": 9, "1234": 4, "1245": 1, "1246": 1, "1247": 0, "1248": 0, "1249": 0, "1250": 0, "1253": 0, "1254": 0, "1251": 0, "1258": 0, "1262": 0, "1263": 0, "1259": 0, "1266": 1, "1235": 3, "1237": 1, "1238": 0, "1240": 0, "1241": 4, "1233": 1, "1302": 1, "1304": 1, "1305": 0, "1306": 19, "1307": 1, "1308": 1, "1309": 1, "1310": 1, "1311": 1, "1312": 1, "1313": 1, "1314": 1, "1315": 1, "1316": 1, "1317": 1, "1318": 1, "1319": 1, "1320": 1, "1321": 1, "1322": 1, "1323": 1, "1324": 1, "1325": 1, "1326": 1, "1327": 1, "1328": 1, "1330": 1, "1331": 1, "1332": 1, "1344": 1, "1346": 1, "1345": 1, "1349": 1, "1361": 1, "1378": 1, "1350": 1, "1351": 1, "1352": 1, "1353": 1, "1354": 1, "1355": 1, "1357": 0, "1358": 1, "1359": 1, "1362": 1, "1363": 1, "1364": 0, "1366": 1, "1368": 0, "1369": 0, "1371": 0, "1372": 0, "1373": 0, "1374": 0, "1376": 0, "1379": 1, "1383": 1, "1387": 1, "1390": 1, "1393": 1, "1384": 0, "1385": 0, "1388": 0, "1391": 0, "1394": 0, "1395": 0, "1396": 0, "1400": 1, "1404": 1, "1414": 1, "1420": 1, "1423": 1, "1401": 1, "1402": 1, "1405": 0, "1406": 0, "1407": 0, "1409": 0, "1410": 0, "1411": 0, "1412": 0, "1418": 0, "1421": 0, "1425": 0, "1426": 0, "1424": 0, "1436": 2, "1437": 1, "1435": 1, "1440": 1, "1446": 1, "1447": 1, "1448": 1, "1449": 1, "1450": 1, "1451": 1, "1452": 1, "1453": 1, "1454": 1, "1442": 1, "1478": 1, "1488": 1, "1495": 1, "1498": 1, "1502": 1, "1506": 1, "1514": 1, "1529": 1, "1531": 1, "1539": 1, "1555": 1, "1558": 1, "1459": 4, "1460": 1, "1461": 1, "1462": 1, "1463": 1, "1464": 1, "1465": 1, "1466": 1, "1468": 2, "1469": 1, "1471": 0, "1473": 1, "1474": 1, "1475": 1, "1476": 1, "1484": 0, "1485": 0, "1486": 0, "1489": 0, "1491": 0, "1492": 0, "1493": 0, "1496": 1, "1499": 1, "1500": 1, "1512": 0, "1517": 1, "1518": 0, "1527": 1, "1532": 1, "1533": 0, "1534": 0, "1536": 0, "1537": 1, "1540": 1, "1541": 1, "1542": 0, "1543": 0, "1544": 0, "1545": 0, "1546": 0, "1547": 0, "1548": 0, "1549": 0, "1550": 0, "1551": 0, "1553": 0, "1556": 1, "1559": 1, "1560": 0, "1561": 1, "1562": 1, "1563": 1, "1569": 1, "1570": 1, "1572": 1, "1573": 2, "1574": 1, "1576": 1, "1571": 1, "1579": 1, "1582": 1, "1587": 1, "1604": 1, "1641": 1, "1651": 1, "1580": 0, "1583": 0, "1584": 0, "1585": 0, "1588": 0, "1589": 0, "1590": 0, "1591": 0, "1592": 0, "1593": 0, "1594": 0, "1595": 0, "1596": 0, "1598": 0, "1601": 0, "1602": 0, "1610": 0, "1613": 0, "1614": 0, "1615": 0, "1617": 0, "1618": 0, "1619": 0, "1621": 0, "1622": 0, "1623": 0, "1624": 0, "1625": 0, "1626": 0, "1627": 0, "1628": 0, "1630": 0, "1631": 0, "1632": 0, "1633": 0, "1634": 0, "1635": 0, "1636": 0, "1637": 0, "1639": 0, "1643": 0, "1642": 0, "1644": 0, "1645": 0, "1647": 0, "1648": 0, "1649": 0, "1652": 0, "1653": 0, "1654": 0, "1655": 0, "1656": 0, "1657": 0, "1658": 0, "1659": 0, "1660": 0, "1661": 0, "1662": 0, "1666": 0, "1667": 0}}
+ git checkout f64fd47a7627ed6ffe2df2a32ded6ee528a784eb
Note: switching to 'f64fd47a7627ed6ffe2df2a32ded6ee528a784eb'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c <new-branch-name>

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at f64fd47a76 Fixed #9602 -- Added AdminSite.get_model_admin().
+ git apply /root/pre_state.patch
error: unrecognized input
