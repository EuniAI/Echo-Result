{"instance_id": "django__django-13925", "repo": "django/django", "version": "4.0", "environment_setup_commit": "475cffd1d64c690cdad16ede4d5e81985738ceb4", "patch_list": ["diff --git a/tests/check_framework/test_model_default_auto_field.py b/tests/check_framework/test_model_default_auto_field.py\nnew file mode 100644\nindex 0000000000..b73b366318\n--- /dev/null\n+++ b/tests/check_framework/test_model_default_auto_field.py\n@@ -0,0 +1,49 @@\n+from unittest import mock\n+\n+from django.core import checks\n+from django.core.checks import Warning\n+from django.db import models\n+from django.test import SimpleTestCase\n+from django.test.utils import isolate_apps, override_settings, override_system_checks\n+\n+\n+def mocked_is_overridden(self, setting):\n+    # Force treating DEFAULT_AUTO_FIELD = 'django.db.models.AutoField' as a not\n+    # overridden setting.\n+    return (\n+        setting != 'DEFAULT_AUTO_FIELD' or\n+        self.DEFAULT_AUTO_FIELD != 'django.db.models.AutoField'\n+    )\n+\n+\n+@mock.patch('django.conf.UserSettingsHolder.is_overridden', mocked_is_overridden)\n+@override_settings(DEFAULT_AUTO_FIELD='django.db.models.AutoField')\n+@isolate_apps('check_framework.apps.CheckDefaultPKConfig', attr_name='apps')\n+@override_system_checks([checks.model_checks.check_all_models])\n+class ModelDefaultAutoFieldTests(SimpleTestCase):\n+    def test_multi_table_inheritance(self):\n+        \"\"\"\n+        W042 is not raised for a model with a primary key inherited from a\n+        parent model.\n+        \"\"\"\n+        class Parent(models.Model):\n+            pass\n+\n+        class Child(Parent):\n+            pass\n+\n+        # The warning is expected for Parent, but not for Child.\n+        self.assertEqual(checks.run_checks(app_configs=self.apps.get_app_configs()), [\n+            Warning(\n+                \"Auto-created primary key used when not defining a primary \"\n+                \"key type, by default 'django.db.models.AutoField'.\",\n+                hint=(\n+                    \"Configure the DEFAULT_AUTO_FIELD setting or the \"\n+                    \"CheckDefaultPKConfig.default_auto_field attribute to \"\n+                    \"point to a subclass of AutoField, e.g. \"\n+                    \"'django.db.models.BigAutoField'.\"\n+                ),\n+                obj=Parent,\n+                id='models.W042',\n+            ),\n+        ])\n"], "arch": "x86_64", "base_commit": "0c42cdf0d2422f4c080e93594d5d15381d6e955e", "test_directives": ["check_framework.test_model_default_auto_field"], "coverage_files": ["django/db/models/base.py"], "env_name": "testbed", "run_id": "patch_evaluation", "patch_id": "pred_pre__Prometheus-Bug-Reproduction-Agent", "timeout": 1800, "rm_image": false, "force_rebuild": true, "exec_mode": "unit_test", "reproduction_script_name": null, "compute_coverage": true, "install": {"python": "3.8", "packages": "requirements.txt", "install": "python -m pip install -e ."}, "cache_level": "instance", "test_command": "python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(django/db/models/base\\.py)' ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 check_framework.test_model_default_auto_field", "req_install_commands": ["conda create -n testbed python=3.8 -y", "cat <<'EOF_59812759871' > $HOME/requirements.txt\nasgiref >= 3.3.2\nargon2-cffi >= 16.1.0\nbackports.zoneinfo; python_version < '3.9'\nbcrypt\ndocutils\ngeoip2\njinja2 >= 2.9.2\nnumpy\nPillow >= 6.2.0\npylibmc; sys.platform != 'win32'\npymemcache >= 3.4.0\npython-memcached >= 1.59\npytz\npywatchman; sys.platform != 'win32'\nPyYAML\nredis >= 3.0.0\nselenium\nsqlparse >= 0.2.2\ntblib >= 1.5.0\ntzdata\ncolorama; sys.platform == 'win32'\n\nEOF_59812759871", "conda activate testbed && python -m pip install -r $HOME/requirements.txt", "rm $HOME/requirements.txt"]}