+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z '' ']'
+++ export CONDA_SHLVL=0
+++ CONDA_SHLVL=0
+++ '[' -n '' ']'
+++++ dirname /opt/miniconda3/bin/conda
++++ dirname /opt/miniconda3/bin
+++ PATH=/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export PATH
+++ '[' -z '' ']'
+++ PS1=
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1=
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=1
+++ CONDA_SHLVL=1
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=2
++ CONDA_SHLVL=2
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_1=/opt/miniconda3
++ CONDA_PREFIX_1=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ cd /testbed
+ git diff HEAD 1136aa5005f0ae70fea12796b7e37d6f027b9263
+ git config --global --add safe.directory /testbed
+ cd /testbed
+ git status
On branch main
nothing to commit, working tree clean
+ git show
commit 1136aa5005f0ae70fea12796b7e37d6f027b9263
Author: Mariusz Felisiak <felisiak.mariusz@gmail.com>
Date:   Sat Jun 3 11:01:15 2023 +0100

    Refs #23528 -- Made cosmetic edits to swappable_dependency() docs.

diff --git a/docs/topics/migrations.txt b/docs/topics/migrations.txt
index f2d2d915c1..2ee7e53f47 100644
--- a/docs/topics/migrations.txt
+++ b/docs/topics/migrations.txt
@@ -224,14 +224,14 @@ Swappable dependencies
 .. function:: django.db.migrations.swappable_dependency(value)
 
 The ``swappable_dependency()`` function is used in migrations to declare
-"swappable" dependencies on migrations in the app of the swapped-in model.
-Currently, the first migration of this app and as a consequence the swapped-in
+"swappable" dependencies on migrations in the app of the swapped-in model,
+currently, on the first migration of this app. As a consequence, the swapped-in
 model should be created in the initial migration. The argument ``value`` is a
 string ``"<app label>.<model>"`` describing an app label and a model name, e.g.
 ``"myapp.MyModel"``.
 
 By using ``swappable_dependency()``, you inform the migration framework that
-the migration relies on a migration which sets up up a swappable model,
+the migration relies on another migration which sets up a swappable model,
 allowing for the possibility of substituting the model with a different
 implementation in the future. This is typically used for referencing models
 that are subject to customization or replacement, such as the custom user
+ git diff 1136aa5005f0ae70fea12796b7e37d6f027b9263
+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z x ']'
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1='(testbed) '
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=3
+++ CONDA_SHLVL=3
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=4
++ CONDA_SHLVL=4
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_3=/opt/miniconda3
++ CONDA_PREFIX_3=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ python -m pip install -e .
Obtaining file:///testbed
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: asgiref>=3.6.0 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from Django==5.0.dev20230603100115) (3.11.0)
Requirement already satisfied: sqlparse>=0.3.1 in /opt/miniconda3/envs/testbed/lib/python3.11/site-packages (from Django==5.0.dev20230603100115) (0.5.5)
Building wheels for collected packages: Django
  Building editable for Django (pyproject.toml): started
  Building editable for Django (pyproject.toml): finished with status 'done'
  Created wheel for Django: filename=django-5.0.dev20230603100115-0.editable-py3-none-any.whl size=27520 sha256=7d8cfc89a5b2b17cd5f8bcfdd75ea6e36cf40e8da1a139d07744c4cb6b519612
  Stored in directory: /tmp/pip-ephem-wheel-cache-z5l_wskg/wheels/49/5f/4f/01b7d31ea6ddac9643da788242d33e5fd3467d95d17b032c6b
Successfully built Django
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 5.0.dev20230603100115
    Uninstalling Django-5.0.dev20230603100115:
      Successfully uninstalled Django-5.0.dev20230603100115
Successfully installed Django-5.0.dev20230603100115
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
+ git apply -v -
Checking patch tests/serializers/test_custom_managers.py...
Applied patch tests/serializers/test_custom_managers.py cleanly.
+ python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(django/core/serializers/xml_serializer\.py|django/core/serializers/python\.py)' ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 serializers.test_custom_managers
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
['--count', '-C', 'coverage.cover', '--include-pattern', '/testbed/(django/core/serializers/xml_serializer\\.py|django/core/serializers/python\\.py)']
Testing against Django installed in '/testbed/django'
Importing application serializers
Found 1 test(s).
Skipping setup of unused database(s): other.
Operations to perform:
  Synchronize unmigrated apps: auth, contenttypes, messages, serializers, sessions, staticfiles
  Apply all migrations: admin, sites
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_content_type
    Creating table auth_permission
    Creating table auth_group
    Creating table auth_user
    Creating table django_session
    Creating table serializers_categorymetadata
    Creating table serializers_category
    Creating table serializers_author
    Creating table serializers_article
    Creating table serializers_authorprofile
    Creating table serializers_actor
    Creating table serializers_movie
    Creating table serializers_score
    Creating table serializers_player
    Creating table serializers_basemodel
    Creating table serializers_complexmodel
    Creating table serializers_binarydata
    Creating table serializers_booleandata
    Creating table serializers_chardata
    Creating table serializers_datedata
    Creating table serializers_datetimedata
    Creating table serializers_decimaldata
    Creating table serializers_emaildata
    Creating table serializers_filedata
    Creating table serializers_filepathdata
    Creating table serializers_floatdata
    Creating table serializers_integerdata
    Creating table serializers_bigintegerdata
    Creating table serializers_genericipaddressdata
    Creating table serializers_positivebigintegerdata
    Creating table serializers_positiveintegerdata
    Creating table serializers_positivesmallintegerdata
    Creating table serializers_slugdata
    Creating table serializers_smalldata
    Creating table serializers_textdata
    Creating table serializers_timedata
    Creating table serializers_tag
    Creating table serializers_genericdata
    Creating table serializers_anchor
    Creating table serializers_uniqueanchor
    Creating table serializers_fkdata
    Creating table serializers_m2mdata
    Creating table serializers_o2odata
    Creating table serializers_fkselfdata
    Creating table serializers_m2mselfdata
    Creating table serializers_fkdatatofield
    Creating table serializers_fkdatatoo2o
    Creating table serializers_m2mintermediatedata
    Creating table serializers_intermediate
    Creating table serializers_booleanpkdata
    Creating table serializers_charpkdata
    Creating table serializers_datepkdata
    Creating table serializers_datetimepkdata
    Creating table serializers_decimalpkdata
    Creating table serializers_emailpkdata
    Creating table serializers_filepathpkdata
    Creating table serializers_floatpkdata
    Creating table serializers_integerpkdata
    Creating table serializers_genericipaddresspkdata
    Creating table serializers_positiveintegerpkdata
    Creating table serializers_positivesmallintegerpkdata
    Creating table serializers_slugpkdata
    Creating table serializers_smallpkdata
    Creating table serializers_uuiddata
    Creating table serializers_uuiddefaultdata
    Creating table serializers_fktouuid
    Creating table serializers_autonowdatetimedata
    Creating table serializers_modifyingsavedata
    Creating table serializers_inheritabstractmodel
    Creating table serializers_inheritbasemodel
    Creating table serializers_explicitinheritbasemodel
    Creating table serializers_lengthmodel
    Creating table serializers_parent
    Creating table serializers_child
    Creating table serializers_naturalkeyanchor
    Creating table serializers_fkdatanaturalkey
    Creating table serializers_naturalkeything
    Creating table serializers_naturalpkwithdefault
    Creating table serializers_fkaspknonaturalkey
    Creating table serializers_testtagmaster
    Creating table serializers_testtag
    Creating table serializers_test
    Running deferred SQL...
Running migrations:
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying sites.0001_initial... OK
  Applying sites.0002_alter_domain_unique... OK
System check identified no issues (1 silenced).
test_m2m_select_related_custom_manager (serializers.test_custom_managers.CustomManagerTests.test_m2m_select_related_custom_manager)
Test that serializing an m2m relation to a model with a custom ... ERROR

======================================================================
ERROR: test_m2m_select_related_custom_manager (serializers.test_custom_managers.CustomManagerTests.test_m2m_select_related_custom_manager)
Test that serializing an m2m relation to a model with a custom
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/testbed/./tests/serializers/test_custom_managers.py", line 52, in test_m2m_select_related_custom_manager
    data = serializers.serialize("json", [test])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/core/serializers/__init__.py", line 134, in serialize
    s.serialize(queryset, **options)
  File "/testbed/django/core/serializers/base.py", line 143, in serialize
    self.handle_m2m_field(obj, field)
  File "/testbed/django/core/serializers/python.py", line 88, in handle_m2m_field
    self._current[field.name] = [m2m_value(related) for related in m2m_iter]
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/core/serializers/python.py", line 88, in <listcomp>
    self._current[field.name] = [m2m_value(related) for related in m2m_iter]
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/query.py", line 515, in _iterator
    yield from iterable
  File "/testbed/django/db/models/query.py", line 90, in __iter__
    results = compiler.execute_sql(
              ^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/sql/compiler.py", line 1549, in execute_sql
    sql, params = self.as_sql()
                  ^^^^^^^^^^^^^
  File "/testbed/django/db/models/sql/compiler.py", line 736, in as_sql
    extra_select, order_by, group_by = self.pre_sql_setup(
                                       ^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/sql/compiler.py", line 84, in pre_sql_setup
    self.setup_query(with_col_aliases=with_col_aliases)
  File "/testbed/django/db/models/sql/compiler.py", line 73, in setup_query
    self.select, self.klass_info, self.annotation_col_map = self.get_select(
                                                            ^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/sql/compiler.py", line 279, in get_select
    related_klass_infos = self.get_related_selections(select, select_mask)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/sql/compiler.py", line 1211, in get_related_selections
    if not select_related_descend(f, restricted, requested, select_mask):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/testbed/django/db/models/query_utils.py", line 347, in select_related_descend
    raise FieldError(
django.core.exceptions.FieldError: Field TestTag.master cannot be both deferred and traversed using select_related at the same time.

----------------------------------------------------------------------
Ran 1 test in 0.077s

FAILED (errors=1)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
+ cat coverage.cover
{"/testbed/django/core/serializers/python.py": {"0": 0, "7": 1, "8": 1, "9": 1, "10": 1, "13": 2, "95": 1, "94": 1, "183": 1, "18": 1, "20": 1, "24": 1, "27": 1, "30": 1, "34": 1, "41": 1, "48": 1, "51": 1, "64": 1, "90": 1, "21": 0, "22": 0, "25": 0, "28": 1, "31": 0, "32": 0, "35": 0, "36": 0, "37": 0, "38": 0, "39": 0, "42": 1, "46": 1, "49": 1, "52": 0, "53": 0, "55": 0, "56": 0, "57": 0, "59": 0, "61": 0, "62": 0, "65": 1, "66": 1, "67": 0, "70": 0, "73": 0, "78": 1, "81": 1, "84": 2, "85": 1, "86": 1, "88": 2, "71": 0, "74": 0, "79": 0, "82": 1, "91": 0, "103": 0, "104": 0, "106": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "114": 0, "115": 0, "116": 0, "117": 0, "118": 0, "119": 0, "120": 0, "121": 0, "123": 0, "124": 0, "126": 0, "127": 0, "128": 0, "131": 0, "132": 0, "134": 0, "136": 0, "139": 0, "140": 0, "142": 0, "143": 0, "144": 0, "146": 0, "147": 0, "148": 0, "150": 0, "151": 0, "153": 0, "155": 0, "156": 0, "158": 0, "159": 0, "160": 0, "162": 0, "163": 0, "164": 0, "166": 0, "167": 0, "169": 0, "172": 0, "173": 0, "174": 0, "175": 0, "176": 0, "179": 0, "180": 0, "185": 0, "186": 0, "187": 0, "188": 0, "189": 0}}
{"/testbed/django/core/serializers/xml_serializer.py": {"0": 0, "4": 1, "5": 1, "6": 1, "7": 1, "9": 1, "10": 1, "11": 1, "12": 1, "13": 1, "14": 1, "17": 2, "182": 2, "388": 1, "408": 2, "444": 2, "451": 2, "465": 2, "482": 2, "20": 1, "26": 1, "36": 1, "44": 1, "62": 1, "69": 1, "102": 1, "127": 1, "169": 1, "21": 0, "22": 0, "23": 0, "30": 0, "31": 0, "33": 0, "34": 0, "40": 0, "41": 0, "42": 0, "48": 0, "49": 0, "50": 0, "53": 0, "54": 0, "55": 0, "56": 0, "57": 0, "58": 0, "60": 0, "66": 0, "67": 0, "74": 0, "75": 0, "76": 0, "78": 0, "79": 0, "77": 0, "84": 0, "85": 0, "86": 0, "89": 0, "90": 0, "91": 0, "92": 0, "93": 0, "95": 0, "94": 0, "98": 0, "100": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "113": 0, "115": 0, "117": 0, "118": 0, "119": 0, "120": 0, "122": 0, "124": 0, "125": 0, "133": 0, "134": 0, "135": 0, "136": 0, "139": 0, "149": 0, "154": 0, "157": 0, "160": 0, "161": 0, "162": 0, "164": 0, "165": 0, "167": 0, "140": 0, "142": 0, "143": 0, "144": 0, "145": 0, "146": 0, "147": 0, "150": 0, "155": 0, "158": 0, "171": 0, "172": 0, "173": 0, "175": 0, "176": 0, "177": 0, "174": 0, "189": 1, "190": 1, "185": 1, "199": 1, "203": 1, "210": 1, "287": 1, "328": 1, "368": 1, "193": 0, "194": 0, "195": 0, "196": 0, "197": 0, "201": 0, "204": 0, "205": 0, "206": 0, "207": 0, "208": 0, "214": 0, "217": 0, "218": 0, "219": 0, "220": 0, "225": 0, "226": 0, "228": 0, "230": 0, "233": 0, "234": 0, "235": 0, "236": 0, "242": 0, "243": 0, "244": 0, "247": 0, "248": 0, "250": 0, "251": 0, "252": 0, "257": 0, "260": 0, "261": 0, "262": 0, "264": 0, "265": 0, "266": 0, "268": 0, "271": 0, "273": 0, "274": 0, "276": 0, "278": 0, "279": 0, "280": 0, "282": 0, "285": 0, "253": 0, "255": 0, "254": 0, "267": 0, "292": 0, "293": 0, "295": 0, "296": 0, "297": 0, "298": 0, "300": 0, "301": 0, "302": 0, "303": 0, "304": 0, "305": 0, "306": 0, "307": 0, "309": 0, "310": 0, "313": 0, "314": 0, "317": 0, "318": 0, "319": 0, "320": 0, "321": 0, "323": 0, "324": 0, "325": 0, "332": 0, "333": 0, "334": 0, "336": 0, "353": 0, "356": 0, "357": 0, "358": 0, "359": 0, "366": 0, "360": 0, "361": 0, "362": 0, "364": 0, "337": 0, "338": 0, "340": 0, "342": 0, "343": 0, "344": 0, "341": 0, "348": 0, "349": 0, "354": 0, "373": 0, "374": 0, "375": 0, "377": 0, "376": 0, "379": 0, "380": 0, "381": 0, "382": 0, "384": 0, "383": 0, "391": 0, "392": 0, "394": 0, "395": 0, "397": 0, "398": 0, "399": 0, "401": 0, "402": 0, "415": 1, "420": 1, "423": 1, "428": 1, "432": 1, "435": 1, "416": 0, "417": 0, "418": 0, "421": 0, "426": 0, "430": 0, "433": 0, "436": 0, "437": 0, "438": 0, "439": 0, "440": 0, "441": 0, "447": 1, "448": 0, "454": 1, "460": 1, "455": 0, "456": 0, "457": 0, "458": 0, "461": 0, "462": 0, "468": 1, "477": 1, "469": 0, "470": 0, "471": 0, "472": 0, "473": 0, "474": 0, "475": 0, "478": 0, "479": 0, "485": 1, "492": 1, "486": 0, "487": 0, "488": 0, "489": 0, "490": 0, "493": 0, "494": 0}}
+ git checkout 1136aa5005f0ae70fea12796b7e37d6f027b9263
Note: switching to '1136aa5005f0ae70fea12796b7e37d6f027b9263'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c <new-branch-name>

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at 1136aa5005 Refs #23528 -- Made cosmetic edits to swappable_dependency() docs.
+ git apply /root/pre_state.patch
error: unrecognized input
