2025-12-25 21:41:01,498 - WARNING - Starting evaluation at 1766698861.4986181
2025-12-25 21:41:01,544 - INFO - Creating container for django__django-14315...
2025-12-25 21:41:06,214 - INFO - Container for django__django-14315 created: 65688bd028c51b54a6b02fc539ddf2cf28b0be54da994e77520f3e778df22aa5
2025-12-25 21:41:08,214 - INFO - Container for django__django-14315 started: 65688bd028c51b54a6b02fc539ddf2cf28b0be54da994e77520f3e778df22aa5
2025-12-25 21:41:09,664 - INFO - Git diff before:

2025-12-25 21:41:09,664 - INFO - Eval script for django__django-14315 written to eval.sh, now applying to container...
2025-12-25 21:41:37,279 - INFO - Test output for django__django-14315 written to run_instance_swt_logs/patch_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-14315/test_output.txt
2025-12-25 21:41:37,367 - INFO - Git diff after:
diff --git a/django/db/backends/base/client.py b/django/db/backends/base/client.py
index 339f1e863c..8aca821fd2 100644
--- a/django/db/backends/base/client.py
+++ b/django/db/backends/base/client.py
@@ -21,6 +21,5 @@ class BaseDatabaseClient:
 
     def runshell(self, parameters):
         args, env = self.settings_to_cmd_args_env(self.connection.settings_dict, parameters)
-        if env:
-            env = {**os.environ, **env}
+        env = {**os.environ, **env} if env else None
         subprocess.run(args, env=env, check=True)
diff --git a/django/db/backends/postgresql/client.py b/django/db/backends/postgresql/client.py
index 3effab65a8..0effcc44e6 100644
--- a/django/db/backends/postgresql/client.py
+++ b/django/db/backends/postgresql/client.py
@@ -51,7 +51,7 @@ class DatabaseClient(BaseDatabaseClient):
             env['PGSSLKEY'] = str(sslkey)
         if passfile:
             env['PGPASSFILE'] = str(passfile)
-        return args, env
+        return args, (env or None)
 
     def runshell(self, parameters):
         sigint_handler = signal.getsignal(signal.SIGINT)
2025-12-25 21:41:37,367 - INFO - Git diff changed after running eval script
2025-12-25 21:41:37,367 - INFO - Attempting to stop container exec.eval.x86_64.ebed327f02c059ebd6024a.1a1697b8a3cbfbfbd42a9f.129975669656944...
2025-12-25 21:41:56,229 - INFO - Attempting to remove container exec.eval.x86_64.ebed327f02c059ebd6024a.1a1697b8a3cbfbfbd42a9f.129975669656944...
2025-12-25 21:41:56,383 - INFO - Container exec.eval.x86_64.ebed327f02c059ebd6024a.1a1697b8a3cbfbfbd42a9f.129975669656944 removed.
2025-12-25 21:41:56,384 - WARNING - End of eval at 1766698916.3839808
2025-12-26 02:43:30,580 - WARNING - Starting evaluation at 1766717010.5809014
2025-12-26 02:43:30,605 - WARNING - Starting evaluation at 1766717010.6054764
2025-12-26 02:43:30,631 - WARNING - Starting evaluation at 1766717010.6316009
2025-12-26 02:43:30,658 - WARNING - Starting evaluation at 1766717010.6580667
2025-12-26 02:43:30,684 - WARNING - Starting evaluation at 1766717010.6847336
2025-12-26 09:38:11,173 - WARNING - Starting evaluation at 1766741891.17394
2025-12-26 09:38:11,180 - WARNING - Starting evaluation at 1766741891.180442
2025-12-26 09:38:11,187 - WARNING - Starting evaluation at 1766741891.187907
2025-12-26 09:38:11,195 - WARNING - Starting evaluation at 1766741891.1957867
2025-12-26 09:38:11,203 - WARNING - Starting evaluation at 1766741891.203523
2025-12-26 09:53:35,561 - WARNING - Starting evaluation at 1766742815.561378
2025-12-26 09:53:35,568 - WARNING - Starting evaluation at 1766742815.5689418
2025-12-26 09:53:35,576 - WARNING - Starting evaluation at 1766742815.576819
2025-12-26 09:53:35,586 - WARNING - Starting evaluation at 1766742815.5859852
2025-12-26 09:53:35,595 - WARNING - Starting evaluation at 1766742815.5955205
2025-12-26 10:15:28,870 - WARNING - Starting evaluation at 1766744128.8701801
2025-12-26 10:15:28,883 - WARNING - Starting evaluation at 1766744128.8834665
2025-12-26 10:15:28,896 - WARNING - Starting evaluation at 1766744128.8968036
2025-12-26 10:15:28,910 - WARNING - Starting evaluation at 1766744128.9107218
2025-12-26 10:15:28,930 - WARNING - Starting evaluation at 1766744128.9307923
2025-12-26 11:07:38,816 - WARNING - Starting evaluation at 1766747258.8162403
2025-12-26 11:07:38,824 - WARNING - Starting evaluation at 1766747258.8248456
2025-12-26 11:07:38,833 - WARNING - Starting evaluation at 1766747258.833193
2025-12-26 11:07:38,841 - WARNING - Starting evaluation at 1766747258.84197
2025-12-26 11:07:38,849 - WARNING - Starting evaluation at 1766747258.849627
2025-12-26 11:07:52,224 - INFO - Grading answer for django__django-14315...
2025-12-26 11:07:52,231 - INFO - report: {'django__django-14315': {'patch_is_None': False, 'patch_exists': True, 'patch_successfully_applied': True, 'resolved': True, 'coverage_pred': 0.8, 'coverage_gold': 0.8, 'coverage_base': 0.0, 'coverage_delta_pred': 0.8, 'coverage_delta_gold': 0.8, 'added_f2p': 1, 'tests_base': {'FAIL_TO_PASS': [], 'PASS_TO_PASS': [], 'FAIL_TO_FAIL': [], 'PASS_TO_FAIL': [], 'UNMATCHED': ['test_runshell (unittest.loader._FailedTest)']}, 'tests_pred': {'FAIL_TO_PASS': ['test_runshell_inherits_os_environ (backends.postgresql.test_runshell.PostgresClientRunshellTests)'], 'PASS_TO_PASS': [], 'FAIL_TO_FAIL': [], 'PASS_TO_FAIL': [], 'UNMATCHED': []}, 'tests_gold': {'FAIL_TO_PASS': ['test_settings_to_cmd_args_env (backends.base.test_client.SimpleDatabaseClientTests)', 'test_passfile (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_runshell_use_environ (backends.base.test_client.SimpleDatabaseClientTests)', 'test_parameters (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)'], 'PASS_TO_PASS': ['test_basic (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_ssl_certificate (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_service (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_column (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_accent (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)'], 'FAIL_TO_FAIL': ['test_crash_password_does_not_leak (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)'], 'PASS_TO_FAIL': [], 'UNMATCHED': ['test_nopass (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)', 'test_sigint_handler (dbshell.test_postgresql.PostgreSqlDbshellCommandTestCase)']}}}
Result for django__django-14315: resolved: True
