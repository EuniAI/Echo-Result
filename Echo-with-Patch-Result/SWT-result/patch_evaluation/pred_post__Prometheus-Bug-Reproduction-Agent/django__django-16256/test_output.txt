+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z '' ']'
+++ export CONDA_SHLVL=0
+++ CONDA_SHLVL=0
+++ '[' -n '' ']'
+++++ dirname /opt/miniconda3/bin/conda
++++ dirname /opt/miniconda3/bin
+++ PATH=/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export PATH
+++ '[' -z '' ']'
+++ PS1=
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1=
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''1'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=1
+++ CONDA_SHLVL=1
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''2'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_1='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=2
++ CONDA_SHLVL=2
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_1=/opt/miniconda3
++ CONDA_PREFIX_1=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ cd /testbed
+ git diff HEAD 76e37513e22f4d9a01c7f15eee36fe44388e6670
+ git config --global --add safe.directory /testbed
+ cd /testbed
+ git status
On branch main
nothing to commit, working tree clean
+ git show
commit 76e37513e22f4d9a01c7f15eee36fe44388e6670
Author: Simon Charette <charette.s@gmail.com>
Date:   Sun Nov 6 11:19:33 2022 -0500

    Refs #33374 -- Adjusted full match condition handling.
    
    Adjusting WhereNode.as_sql() to raise an exception when encoutering a
    full match just like with empty matches ensures that all case are
    explicitly handled.

diff --git a/django/core/exceptions.py b/django/core/exceptions.py
index 7be4e16bc5..646644f3e0 100644
--- a/django/core/exceptions.py
+++ b/django/core/exceptions.py
@@ -233,6 +233,12 @@ class EmptyResultSet(Exception):
     pass
 
 
+class FullResultSet(Exception):
+    """A database query predicate is matches everything."""
+
+    pass
+
+
 class SynchronousOnlyOperation(Exception):
     """The user tried to call a sync-only function from an async context."""
 
diff --git a/django/db/backends/mysql/compiler.py b/django/db/backends/mysql/compiler.py
index bd2715fb43..2ec6bea2f1 100644
--- a/django/db/backends/mysql/compiler.py
+++ b/django/db/backends/mysql/compiler.py
@@ -1,4 +1,4 @@
-from django.core.exceptions import FieldError
+from django.core.exceptions import FieldError, FullResultSet
 from django.db.models.expressions import Col
 from django.db.models.sql import compiler
 
@@ -40,12 +40,16 @@ class SQLDeleteCompiler(compiler.SQLDeleteCompiler, SQLCompiler):
             "DELETE %s FROM"
             % self.quote_name_unless_alias(self.query.get_initial_alias())
         ]
-        from_sql, from_params = self.get_from_clause()
+        from_sql, params = self.get_from_clause()
         result.extend(from_sql)
-        where_sql, where_params = self.compile(where)
-        if where_sql:
+        try:
+            where_sql, where_params = self.compile(where)
+        except FullResultSet:
+            pass
+        else:
             result.append("WHERE %s" % where_sql)
-        return " ".join(result), tuple(from_params) + tuple(where_params)
+            params.extend(where_params)
+        return " ".join(result), tuple(params)
 
 
 class SQLUpdateCompiler(compiler.SQLUpdateCompiler, SQLCompiler):
diff --git a/django/db/models/aggregates.py b/django/db/models/aggregates.py
index ab38a33bf0..7878fb6fb2 100644
--- a/django/db/models/aggregates.py
+++ b/django/db/models/aggregates.py
@@ -1,7 +1,7 @@
 """
 Classes to represent the definitions of aggregate functions.
 """
-from django.core.exceptions import FieldError
+from django.core.exceptions import FieldError, FullResultSet
 from django.db.models.expressions import Case, Func, Star, When
 from django.db.models.fields import IntegerField
 from django.db.models.functions.comparison import Coalesce
@@ -104,8 +104,11 @@ class Aggregate(Func):
         extra_context["distinct"] = "DISTINCT " if self.distinct else ""
         if self.filter:
             if connection.features.supports_aggregate_filter_clause:
-                filter_sql, filter_params = self.filter.as_sql(compiler, connection)
-                if filter_sql:
+                try:
+                    filter_sql, filter_params = self.filter.as_sql(compiler, connection)
+                except FullResultSet:
+                    pass
+                else:
                     template = self.filter_template % extra_context.get(
                         "template", self.template
                     )
diff --git a/django/db/models/expressions.py b/django/db/models/expressions.py
index 8b04e1f11b..86a3a92f07 100644
--- a/django/db/models/expressions.py
+++ b/django/db/models/expressions.py
@@ -7,7 +7,7 @@ from collections import defaultdict
 from decimal import Decimal
 from uuid import UUID
 
-from django.core.exceptions import EmptyResultSet, FieldError
+from django.core.exceptions import EmptyResultSet, FieldError, FullResultSet
 from django.db import DatabaseError, NotSupportedError, connection
 from django.db.models import fields
 from django.db.models.constants import LOOKUP_SEP
@@ -955,6 +955,8 @@ class Func(SQLiteNumericMixin, Expression):
                 if empty_result_set_value is NotImplemented:
                     raise
                 arg_sql, arg_params = compiler.compile(Value(empty_result_set_value))
+            except FullResultSet:
+                arg_sql, arg_params = compiler.compile(Value(True))
             sql_parts.append(arg_sql)
             params.extend(arg_params)
         data = {**self.extra, **extra_context}
@@ -1367,14 +1369,6 @@ class When(Expression):
         template_params = extra_context
         sql_params = []
         condition_sql, condition_params = compiler.compile(self.condition)
-        # Filters that match everything are handled as empty strings in the
-        # WHERE clause, but in a CASE WHEN expression they must use a predicate
-        # that's always True.
-        if condition_sql == "":
-            if connection.features.supports_boolean_expr_in_select_clause:
-                condition_sql, condition_params = compiler.compile(Value(True))
-            else:
-                condition_sql, condition_params = "1=1", ()
         template_params["condition"] = condition_sql
         result_sql, result_params = compiler.compile(self.result)
         template_params["result"] = result_sql
@@ -1461,14 +1455,17 @@ class Case(SQLiteNumericMixin, Expression):
         template_params = {**self.extra, **extra_context}
         case_parts = []
         sql_params = []
+        default_sql, default_params = compiler.compile(self.default)
         for case in self.cases:
             try:
                 case_sql, case_params = compiler.compile(case)
             except EmptyResultSet:
                 continue
+            except FullResultSet:
+                default_sql, default_params = compiler.compile(case.result)
+                break
             case_parts.append(case_sql)
             sql_params.extend(case_params)
-        default_sql, default_params = compiler.compile(self.default)
         if not case_parts:
             return default_sql, default_params
         case_joiner = case_joiner or self.case_joiner
diff --git a/django/db/models/fields/__init__.py b/django/db/models/fields/__init__.py
index 5069a491e8..2a98396cad 100644
--- a/django/db/models/fields/__init__.py
+++ b/django/db/models/fields/__init__.py
@@ -1103,15 +1103,6 @@ class BooleanField(Field):
             defaults = {"form_class": form_class, "required": False}
         return super().formfield(**{**defaults, **kwargs})
 
-    def select_format(self, compiler, sql, params):
-        sql, params = super().select_format(compiler, sql, params)
-        # Filters that match everything are handled as empty strings in the
-        # WHERE clause, but in SELECT or GROUP BY list they must use a
-        # predicate that's always True.
-        if sql == "":
-            sql = "1"
-        return sql, params
-
 
 class CharField(Field):
     description = _("String (up to %(max_length)s)")
diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py
index 97c7ba2013..170bde1d42 100644
--- a/django/db/models/sql/compiler.py
+++ b/django/db/models/sql/compiler.py
@@ -4,7 +4,7 @@ import re
 from functools import partial
 from itertools import chain
 
-from django.core.exceptions import EmptyResultSet, FieldError
+from django.core.exceptions import EmptyResultSet, FieldError, FullResultSet
 from django.db import DatabaseError, NotSupportedError
 from django.db.models.constants import LOOKUP_SEP
 from django.db.models.expressions import F, OrderBy, RawSQL, Ref, Value
@@ -169,7 +169,7 @@ class SQLCompiler:
                 expr = Ref(alias, expr)
             try:
                 sql, params = self.compile(expr)
-            except EmptyResultSet:
+            except (EmptyResultSet, FullResultSet):
                 continue
             sql, params = expr.select_format(self, sql, params)
             params_hash = make_hashable(params)
@@ -287,6 +287,8 @@ class SQLCompiler:
                     sql, params = "0", ()
                 else:
                     sql, params = self.compile(Value(empty_result_set_value))
+            except FullResultSet:
+                sql, params = self.compile(Value(True))
             else:
                 sql, params = col.select_format(self, sql, params)
             if alias is None and with_col_aliases:
@@ -721,9 +723,16 @@ class SQLCompiler:
                         raise
                     # Use a predicate that's always False.
                     where, w_params = "0 = 1", []
-                having, h_params = (
-                    self.compile(self.having) if self.having is not None else ("", [])
-                )
+                except FullResultSet:
+                    where, w_params = "", []
+                try:
+                    having, h_params = (
+                        self.compile(self.having)
+                        if self.having is not None
+                        else ("", [])
+                    )
+                except FullResultSet:
+                    having, h_params = "", []
                 result = ["SELECT"]
                 params = []
 
@@ -1817,11 +1826,12 @@ class SQLDeleteCompiler(SQLCompiler):
         )
 
     def _as_sql(self, query):
-        result = ["DELETE FROM %s" % self.quote_name_unless_alias(query.base_table)]
-        where, params = self.compile(query.where)
-        if where:
-            result.append("WHERE %s" % where)
-        return " ".join(result), tuple(params)
+        delete = "DELETE FROM %s" % self.quote_name_unless_alias(query.base_table)
+        try:
+            where, params = self.compile(query.where)
+        except FullResultSet:
+            return delete, ()
+        return f"{delete} WHERE {where}", tuple(params)
 
     def as_sql(self):
         """
@@ -1906,8 +1916,11 @@ class SQLUpdateCompiler(SQLCompiler):
             "UPDATE %s SET" % qn(table),
             ", ".join(values),
         ]
-        where, params = self.compile(self.query.where)
-        if where:
+        try:
+            where, params = self.compile(self.query.where)
+        except FullResultSet:
+            params = []
+        else:
             result.append("WHERE %s" % where)
         return " ".join(result), tuple(update_params + params)
 
diff --git a/django/db/models/sql/datastructures.py b/django/db/models/sql/datastructures.py
index 1edf040e82..069eb1a301 100644
--- a/django/db/models/sql/datastructures.py
+++ b/django/db/models/sql/datastructures.py
@@ -2,6 +2,7 @@
 Useful auxiliary data structures for query construction. Not useful outside
 the SQL domain.
 """
+from django.core.exceptions import FullResultSet
 from django.db.models.sql.constants import INNER, LOUTER
 
 
@@ -100,8 +101,11 @@ class Join:
             join_conditions.append("(%s)" % extra_sql)
             params.extend(extra_params)
         if self.filtered_relation:
-            extra_sql, extra_params = compiler.compile(self.filtered_relation)
-            if extra_sql:
+            try:
+                extra_sql, extra_params = compiler.compile(self.filtered_relation)
+            except FullResultSet:
+                pass
+            else:
                 join_conditions.append("(%s)" % extra_sql)
                 params.extend(extra_params)
         if not join_conditions:
diff --git a/django/db/models/sql/where.py b/django/db/models/sql/where.py
index 63fdf58d9d..1928ba91b8 100644
--- a/django/db/models/sql/where.py
+++ b/django/db/models/sql/where.py
@@ -4,7 +4,7 @@ Code to manage the creation and SQL rendering of 'where' constraints.
 import operator
 from functools import reduce
 
-from django.core.exceptions import EmptyResultSet
+from django.core.exceptions import EmptyResultSet, FullResultSet
 from django.db.models.expressions import Case, When
 from django.db.models.lookups import Exact
 from django.utils import tree
@@ -145,6 +145,8 @@ class WhereNode(tree.Node):
                 sql, params = compiler.compile(child)
             except EmptyResultSet:
                 empty_needed -= 1
+            except FullResultSet:
+                full_needed -= 1
             else:
                 if sql:
                     result.append(sql)
@@ -158,24 +160,25 @@ class WhereNode(tree.Node):
             # counts.
             if empty_needed == 0:
                 if self.negated:
-                    return "", []
+                    raise FullResultSet
                 else:
                     raise EmptyResultSet
             if full_needed == 0:
                 if self.negated:
                     raise EmptyResultSet
                 else:
-                    return "", []
+                    raise FullResultSet
         conn = " %s " % self.connector
         sql_string = conn.join(result)
-        if sql_string:
-            if self.negated:
-                # Some backends (Oracle at least) need parentheses
-                # around the inner SQL in the negated case, even if the
-                # inner SQL contains just a single expression.
-                sql_string = "NOT (%s)" % sql_string
-            elif len(result) > 1 or self.resolved:
-                sql_string = "(%s)" % sql_string
+        if not sql_string:
+            raise FullResultSet
+        if self.negated:
+            # Some backends (Oracle at least) need parentheses around the inner
+            # SQL in the negated case, even if the inner SQL contains just a
+            # single expression.
+            sql_string = "NOT (%s)" % sql_string
+        elif len(result) > 1 or self.resolved:
+            sql_string = "(%s)" % sql_string
         return sql_string, result_params
 
     def get_group_by_cols(self):
diff --git a/docs/ref/exceptions.txt b/docs/ref/exceptions.txt
index 2b567414e6..b588d0ee81 100644
--- a/docs/ref/exceptions.txt
+++ b/docs/ref/exceptions.txt
@@ -42,6 +42,17 @@ Django core exception classes are defined in ``django.core.exceptions``.
     return any results. Most Django projects won't encounter this exception,
     but it might be useful for implementing custom lookups and expressions.
 
+``FullResultSet``
+-----------------
+
+.. exception:: FullResultSet
+
+.. versionadded:: 4.2
+
+    ``FullResultSet`` may be raised during query generation if a query will
+    match everything. Most Django projects won't encounter this exception, but
+    it might be useful for implementing custom lookups and expressions.
+
 ``FieldDoesNotExist``
 ---------------------
 
diff --git a/tests/annotations/tests.py b/tests/annotations/tests.py
index 52c15bba87..d05af552b4 100644
--- a/tests/annotations/tests.py
+++ b/tests/annotations/tests.py
@@ -24,7 +24,15 @@ from django.db.models import (
     When,
 )
 from django.db.models.expressions import RawSQL
-from django.db.models.functions import Coalesce, ExtractYear, Floor, Length, Lower, Trim
+from django.db.models.functions import (
+    Cast,
+    Coalesce,
+    ExtractYear,
+    Floor,
+    Length,
+    Lower,
+    Trim,
+)
 from django.test import TestCase, skipUnlessDBFeature
 from django.test.utils import register_lookup
 
@@ -282,6 +290,13 @@ class NonAggregateAnnotationTestCase(TestCase):
         self.assertEqual(len(books), Book.objects.count())
         self.assertTrue(all(book.selected for book in books))
 
+    def test_full_expression_wrapped_annotation(self):
+        books = Book.objects.annotate(
+            selected=Coalesce(~Q(pk__in=[]), True),
+        )
+        self.assertEqual(len(books), Book.objects.count())
+        self.assertTrue(all(book.selected for book in books))
+
     def test_full_expression_annotation_with_aggregation(self):
         qs = Book.objects.filter(isbn="159059725").annotate(
             selected=ExpressionWrapper(~Q(pk__in=[]), output_field=BooleanField()),
@@ -292,7 +307,7 @@ class NonAggregateAnnotationTestCase(TestCase):
     def test_aggregate_over_full_expression_annotation(self):
         qs = Book.objects.annotate(
             selected=ExpressionWrapper(~Q(pk__in=[]), output_field=BooleanField()),
-        ).aggregate(Sum("selected"))
+        ).aggregate(selected__sum=Sum(Cast("selected", IntegerField())))
         self.assertEqual(qs["selected__sum"], Book.objects.count())
 
     def test_empty_queryset_annotation(self):
diff --git a/tests/queries/tests.py b/tests/queries/tests.py
index 63e9ea6687..332a6e5d9a 100644
--- a/tests/queries/tests.py
+++ b/tests/queries/tests.py
@@ -5,7 +5,7 @@ import unittest
 from operator import attrgetter
 from threading import Lock
 
-from django.core.exceptions import EmptyResultSet, FieldError
+from django.core.exceptions import EmptyResultSet, FieldError, FullResultSet
 from django.db import DEFAULT_DB_ALIAS, connection
 from django.db.models import CharField, Count, Exists, F, Max, OuterRef, Q
 from django.db.models.expressions import RawSQL
@@ -3588,7 +3588,8 @@ class WhereNodeTest(SimpleTestCase):
         with self.assertRaises(EmptyResultSet):
             w.as_sql(compiler, connection)
         w.negate()
-        self.assertEqual(w.as_sql(compiler, connection), ("", []))
+        with self.assertRaises(FullResultSet):
+            w.as_sql(compiler, connection)
         w = WhereNode(children=[self.DummyNode(), self.DummyNode()])
         self.assertEqual(w.as_sql(compiler, connection), ("(dummy AND dummy)", []))
         w.negate()
@@ -3597,7 +3598,8 @@ class WhereNodeTest(SimpleTestCase):
         with self.assertRaises(EmptyResultSet):
             w.as_sql(compiler, connection)
         w.negate()
-        self.assertEqual(w.as_sql(compiler, connection), ("", []))
+        with self.assertRaises(FullResultSet):
+            w.as_sql(compiler, connection)
 
     def test_empty_full_handling_disjunction(self):
         compiler = WhereNodeTest.MockCompiler()
@@ -3605,7 +3607,8 @@ class WhereNodeTest(SimpleTestCase):
         with self.assertRaises(EmptyResultSet):
             w.as_sql(compiler, connection)
         w.negate()
-        self.assertEqual(w.as_sql(compiler, connection), ("", []))
+        with self.assertRaises(FullResultSet):
+            w.as_sql(compiler, connection)
         w = WhereNode(children=[self.DummyNode(), self.DummyNode()], connector=OR)
         self.assertEqual(w.as_sql(compiler, connection), ("(dummy OR dummy)", []))
         w.negate()
@@ -3619,7 +3622,8 @@ class WhereNodeTest(SimpleTestCase):
         compiler = WhereNodeTest.MockCompiler()
         empty_w = WhereNode()
         w = WhereNode(children=[empty_w, empty_w])
-        self.assertEqual(w.as_sql(compiler, connection), ("", []))
+        with self.assertRaises(FullResultSet):
+            w.as_sql(compiler, connection)
         w.negate()
         with self.assertRaises(EmptyResultSet):
             w.as_sql(compiler, connection)
@@ -3627,9 +3631,11 @@ class WhereNodeTest(SimpleTestCase):
         with self.assertRaises(EmptyResultSet):
             w.as_sql(compiler, connection)
         w.negate()
-        self.assertEqual(w.as_sql(compiler, connection), ("", []))
+        with self.assertRaises(FullResultSet):
+            w.as_sql(compiler, connection)
         w = WhereNode(children=[empty_w, NothingNode()], connector=OR)
-        self.assertEqual(w.as_sql(compiler, connection), ("", []))
+        with self.assertRaises(FullResultSet):
+            w.as_sql(compiler, connection)
         w = WhereNode(children=[empty_w, NothingNode()], connector=AND)
         with self.assertRaises(EmptyResultSet):
             w.as_sql(compiler, connection)
+ git diff 76e37513e22f4d9a01c7f15eee36fe44388e6670
+ source /opt/miniconda3/bin/activate
++ _CONDA_ROOT=/opt/miniconda3
++ . /opt/miniconda3/etc/profile.d/conda.sh
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ '[' -z x ']'
++ conda activate
++ local cmd=activate
++ case "$cmd" in
++ __conda_activate activate
++ '[' -n '' ']'
++ local ask_conda
+++ PS1='(testbed) '
+++ __conda_exe shell.posix activate
+++ /opt/miniconda3/bin/conda shell.posix activate
++ ask_conda='PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ eval 'PS1='\''(base) '\''
export PATH='\''/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3'\''
export CONDA_SHLVL='\''3'\''
export CONDA_DEFAULT_ENV='\''base'\''
export CONDA_PROMPT_MODIFIER='\''(base) '\''
export CONDA_PREFIX_2='\''/opt/miniconda3/envs/testbed'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+++ PS1='(base) '
+++ export PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ PATH=/opt/miniconda3/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+++ export CONDA_PREFIX=/opt/miniconda3
+++ CONDA_PREFIX=/opt/miniconda3
+++ export CONDA_SHLVL=3
+++ CONDA_SHLVL=3
+++ export CONDA_DEFAULT_ENV=base
+++ CONDA_DEFAULT_ENV=base
+++ export 'CONDA_PROMPT_MODIFIER=(base) '
+++ CONDA_PROMPT_MODIFIER='(base) '
+++ export CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ CONDA_PREFIX_2=/opt/miniconda3/envs/testbed
+++ export CONDA_EXE=/opt/miniconda3/bin/conda
+++ CONDA_EXE=/opt/miniconda3/bin/conda
+++ export _CE_M=
+++ _CE_M=
+++ export _CE_CONDA=
+++ _CE_CONDA=
+++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ __conda_hashr
++ '[' -n '' ']'
++ '[' -n '' ']'
++ hash -r
+ conda activate testbed
+ local cmd=activate
+ case "$cmd" in
+ __conda_activate activate testbed
+ '[' -n '' ']'
+ local ask_conda
++ PS1='(base) '
++ __conda_exe shell.posix activate testbed
++ /opt/miniconda3/bin/conda shell.posix activate testbed
+ ask_conda='PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
+ eval 'PS1='\''(testbed) '\''
export PATH='\''/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'\''
export CONDA_PREFIX='\''/opt/miniconda3/envs/testbed'\''
export CONDA_SHLVL='\''4'\''
export CONDA_DEFAULT_ENV='\''testbed'\''
export CONDA_PROMPT_MODIFIER='\''(testbed) '\''
export CONDA_PREFIX_3='\''/opt/miniconda3'\''
export CONDA_EXE='\''/opt/miniconda3/bin/conda'\''
export _CE_M='\'''\''
export _CE_CONDA='\'''\''
export CONDA_PYTHON_EXE='\''/opt/miniconda3/bin/python'\'''
++ PS1='(testbed) '
++ export PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ PATH=/opt/miniconda3/envs/testbed/bin:/opt/miniconda3/condabin:/opt/miniconda3/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
++ export CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ CONDA_PREFIX=/opt/miniconda3/envs/testbed
++ export CONDA_SHLVL=4
++ CONDA_SHLVL=4
++ export CONDA_DEFAULT_ENV=testbed
++ CONDA_DEFAULT_ENV=testbed
++ export 'CONDA_PROMPT_MODIFIER=(testbed) '
++ CONDA_PROMPT_MODIFIER='(testbed) '
++ export CONDA_PREFIX_3=/opt/miniconda3
++ CONDA_PREFIX_3=/opt/miniconda3
++ export CONDA_EXE=/opt/miniconda3/bin/conda
++ CONDA_EXE=/opt/miniconda3/bin/conda
++ export _CE_M=
++ _CE_M=
++ export _CE_CONDA=
++ _CE_CONDA=
++ export CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
++ CONDA_PYTHON_EXE=/opt/miniconda3/bin/python
+ __conda_hashr
+ '[' -n '' ']'
+ '[' -n '' ']'
+ hash -r
+ python -m pip install -e .
Obtaining file:///testbed
  Installing build dependencies: started
  Installing build dependencies: finished with status 'done'
  Checking if build backend supports build_editable: started
  Checking if build backend supports build_editable: finished with status 'done'
  Getting requirements to build editable: started
  Getting requirements to build editable: finished with status 'done'
  Preparing editable metadata (pyproject.toml): started
  Preparing editable metadata (pyproject.toml): finished with status 'done'
Requirement already satisfied: asgiref>=3.5.2 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Django==4.2.dev20221107192353) (3.11.0)
Requirement already satisfied: sqlparse>=0.2.2 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from Django==4.2.dev20221107192353) (0.5.5)
Requirement already satisfied: typing_extensions>=4 in /opt/miniconda3/envs/testbed/lib/python3.9/site-packages (from asgiref>=3.5.2->Django==4.2.dev20221107192353) (4.15.0)
Building wheels for collected packages: Django
  Building editable for Django (pyproject.toml): started
  Building editable for Django (pyproject.toml): finished with status 'done'
  Created wheel for Django: filename=django-4.2.dev20221107192353-0.editable-py3-none-any.whl size=27297 sha256=44d4ddf08e64bc4a0c2a50dd7161970d2c619b20abd822a06d97fa081e2f1054
  Stored in directory: /tmp/pip-ephem-wheel-cache-jirymi9l/wheels/7d/66/67/70d1ee2124ccf21d601c352e25cdca10f611f7c8b3f9ffb9e4
Successfully built Django
Installing collected packages: Django
  Attempting uninstall: Django
    Found existing installation: Django 4.2.dev20221107192353
    Uninstalling Django-4.2.dev20221107192353:
      Successfully uninstalled Django-4.2.dev20221107192353
Successfully installed Django-4.2.dev20221107192353
WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager, possibly rendering your system unusable. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv. Use the --root-user-action option if you know what you are doing and want to suppress this warning.
+ git apply -v -
Checking patch django/contrib/contenttypes/fields.py...
Checking patch django/db/models/fields/related_descriptors.py...
Applied patch django/contrib/contenttypes/fields.py cleanly.
Applied patch django/db/models/fields/related_descriptors.py cleanly.
+ git apply -v -
Checking patch get_or_create/tests.py...
Applied patch get_or_create/tests.py cleanly.
+ python3 /root/trace.py --count -C coverage.cover --include-pattern '/testbed/(django/contrib/contenttypes/fields\.py|django/db/models/fields/related_descriptors\.py)' ./tests/runtests.py --verbosity 2 --settings=test_sqlite --parallel 1 get_or_create.tests
Creating test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
['--count', '-C', 'coverage.cover', '--include-pattern', '/testbed/(django/contrib/contenttypes/fields\\.py|django/db/models/fields/related_descriptors\\.py)']
Testing against Django installed in '/testbed/django'
Importing application get_or_create
Found 47 test(s).
Skipping setup of unused database(s): other.
Operations to perform:
  Synchronize unmigrated apps: auth, contenttypes, get_or_create, messages, sessions, staticfiles
  Apply all migrations: admin, sites
Synchronizing apps without migrations:
  Creating tables...
    Creating table django_content_type
    Creating table auth_permission
    Creating table auth_group
    Creating table auth_user
    Creating table django_session
    Creating table get_or_create_person
    Creating table get_or_create_defaultperson
    Creating table get_or_create_manualprimarykeytest
    Creating table get_or_create_profile
    Creating table get_or_create_tag
    Creating table get_or_create_thing
    Creating table get_or_create_publisher
    Creating table get_or_create_author
    Creating table get_or_create_journalist
    Creating table get_or_create_book
    Running deferred SQL...
Running migrations:
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying admin.0003_logentry_add_action_flag_choices... OK
  Applying sites.0001_initial... OK
  Applying sites.0002_alter_domain_unique... OK
System check identified no issues (1 silenced).
test_callable_defaults (get_or_create.tests.GetOrCreateTests)
Callables in `defaults` are evaluated if the instance is created. ... ok
test_callable_defaults_not_called (get_or_create.tests.GetOrCreateTests) ... ok
test_defaults_exact (get_or_create.tests.GetOrCreateTests)
If you have a field named defaults and want to use it as an exact ... ok
test_defaults_not_evaluated_unless_needed (get_or_create.tests.GetOrCreateTests)
`defaults` aren't evaluated if the instance isn't created. ... ok
test_get_or_create_invalid_params (get_or_create.tests.GetOrCreateTests)
If you don't specify a value or default value for all required ... ok
test_get_or_create_method_with_create (get_or_create.tests.GetOrCreateTests) ... ok
test_get_or_create_method_with_get (get_or_create.tests.GetOrCreateTests) ... ok
test_get_or_create_on_related_manager (get_or_create.tests.GetOrCreateTests) ... ok
test_get_or_create_redundant_instance (get_or_create.tests.GetOrCreateTests)
If we execute the exact same statement twice, the second time, ... ok
test_get_or_create_with_model_property_defaults (get_or_create.tests.GetOrCreateTests)
Using a property with a setter implemented is allowed. ... ok
test_get_or_create_with_pk_property (get_or_create.tests.GetOrCreateTests)
Using the pk property of a model is allowed. ... ok
test_create_with_duplicate_primary_key (get_or_create.tests.GetOrCreateTestsWithManualPKs)
If you specify an existing primary key, but different other fields, ... ok
test_get_or_create_empty (get_or_create.tests.GetOrCreateTestsWithManualPKs)
If all the attributes on a model have defaults, get_or_create() doesn't ... ok
test_get_or_create_raises_IntegrityError_plus_traceback (get_or_create.tests.GetOrCreateTestsWithManualPKs)
get_or_create should raise IntegrityErrors with the full traceback. ... ok
test_savepoint_rollback (get_or_create.tests.GetOrCreateTestsWithManualPKs)
The database connection is still usable after a DatabaseError in ... ok
test_create_get_or_create (get_or_create.tests.GetOrCreateThroughManyToMany) ... ok
test_get_get_or_create (get_or_create.tests.GetOrCreateThroughManyToMany) ... ok
test_something (get_or_create.tests.GetOrCreateThroughManyToMany) ... ok
test_create (get_or_create.tests.UpdateOrCreateTests) ... ok
test_create_callable_default (get_or_create.tests.UpdateOrCreateTests) ... ok
test_create_twice (get_or_create.tests.UpdateOrCreateTests) ... ok
test_create_with_many (get_or_create.tests.UpdateOrCreateTests)
Should be able to use update_or_create from the m2m related manager to ... ok
test_create_with_related_manager (get_or_create.tests.UpdateOrCreateTests)
Should be able to use update_or_create from the related manager to ... ok
test_defaults_exact (get_or_create.tests.UpdateOrCreateTests)
If you have a field named defaults and want to use it as an exact ... ok
test_defaults_not_evaluated_unless_needed (get_or_create.tests.UpdateOrCreateTests)
`defaults` aren't evaluated if the instance isn't created. ... ok
test_error_contains_full_traceback (get_or_create.tests.UpdateOrCreateTests)
update_or_create should raise IntegrityErrors with the full traceback. ... ok
test_integrity (get_or_create.tests.UpdateOrCreateTests)
If you don't specify a value or default value for all required ... ok
test_manual_primary_key_test (get_or_create.tests.UpdateOrCreateTests)
If you specify an existing primary key, but different other fields, ... ok
test_mti_update_non_local_concrete_fields (get_or_create.tests.UpdateOrCreateTests) ... ok
test_update (get_or_create.tests.UpdateOrCreateTests) ... ok
test_update_callable_default (get_or_create.tests.UpdateOrCreateTests) ... ok
test_update_only_defaults_and_pre_save_fields_when_local_fields (get_or_create.tests.UpdateOrCreateTests) ... ok
test_update_or_create_with_model_property_defaults (get_or_create.tests.UpdateOrCreateTests)
Using a property with a setter implemented is allowed. ... ok
test_update_with_many (get_or_create.tests.UpdateOrCreateTests)
Should be able to use update_or_create from the m2m related manager to ... ok
test_update_with_related_manager (get_or_create.tests.UpdateOrCreateTests)
Should be able to use update_or_create from the related manager to ... ok
test_with_pk_property (get_or_create.tests.UpdateOrCreateTests)
Using the pk property of a model is allowed. ... ok
test_create_with_duplicate_primary_key (get_or_create.tests.UpdateOrCreateTestsWithManualPKs)
If an existing primary key is specified with different values for other ... ok
test_get_or_create_integrityerror (get_or_create.tests.GetOrCreateTransactionTests)
Regression test for #15117. Requires a TransactionTestCase on ... ok
test_get_or_create_with_invalid_defaults (get_or_create.tests.InvalidCreateArgumentsTests) ... ok
test_get_or_create_with_invalid_kwargs (get_or_create.tests.InvalidCreateArgumentsTests) ... ok
test_multiple_invalid_fields (get_or_create.tests.InvalidCreateArgumentsTests) ... ok
test_property_attribute_without_setter_defaults (get_or_create.tests.InvalidCreateArgumentsTests) ... ok
test_property_attribute_without_setter_kwargs (get_or_create.tests.InvalidCreateArgumentsTests) ... ok
test_update_or_create_with_invalid_defaults (get_or_create.tests.InvalidCreateArgumentsTests) ... ok
test_update_or_create_with_invalid_kwargs (get_or_create.tests.InvalidCreateArgumentsTests) ... ok
test_creation_in_transaction (get_or_create.tests.UpdateOrCreateTransactionTests)
Objects are selected and updated in a transaction to avoid race ... skipped "Database doesn't support feature(s): has_select_for_update"
test_updates_in_transaction (get_or_create.tests.UpdateOrCreateTransactionTests)
Objects are selected and updated in a transaction to avoid race ... skipped "Database doesn't support feature(s): has_select_for_update"

----------------------------------------------------------------------
Ran 47 tests in 0.390s

OK (skipped=2)
Destroying test database for alias 'default' ('file:memorydb_default?mode=memory&cache=shared')...
+ cat coverage.cover
{"/testbed/django/db/models/fields/related_descriptors.py": {"66": 1, "68": 1, "69": 1, "76": 1, "77": 1, "78": 1, "79": 1, "80": 1, "81": 1, "82": 1, "85": 2, "94": 1, "115": 2, "337": 2, "388": 2, "575": 2, "632": 1, "911": 2, "958": 1, "86": 1, "87": 209, "88": 102, "90": 0, "91": 107, "95": 0, "96": 0, "97": 0, "98": 0, "99": 0, "100": 0, "103": 0, "104": 0, "105": 0, "107": 0, "108": 0, "109": 0, "110": 0, "111": 0, "112": 0, "128": 1, "131": 1, "132": 1, "149": 1, "152": 1, "155": 1, "196": 1, "201": 1, "252": 1, "328": 1, "129": 44, "136": 0, "137": 0, "138": 0, "140": 0, "141": 0, "143": 0, "144": 0, "142": 0, "139": 0, "150": 0, "153": 0, "156": 0, "157": 0, "158": 0, "160": 0, "161": 0, "162": 0, "163": 0, "164": 0, "172": 0, "174": 0, "175": 0, "173": 0, "178": 0, "179": 0, "183": 0, "184": 0, "185": 0, "186": 0, "188": 0, "189": 0, "190": 0, "191": 0, "192": 0, "193": 0, "187": 0, "197": 0, "199": 0, "211": 78, "212": 0, "217": 78, "218": 78, "219": 0, "220": 0, "223": 0, "222": 0, "224": 0, "221": 0, "226": 0, "229": 0, "232": 0, "234": 0, "235": 0, "236": 0, "237": 0, "241": 0, "242": 0, "243": 0, "245": 78, "246": 0, "247": 0, "250": 78, "263": 158, "264": 79, "266": 0, "267": 0, "269": 0, "270": 0, "271": 0, "272": 0, "268": 0, "275": 79, "276": 79, "277": 152, "278": 76, "280": 79, "281": 2, "282": 1, "284": 79, "285": 0, "286": 0, "287": 0, "290": 79, "295": 79, "302": 0, "307": 0, "308": 0, "310": 0, "311": 0, "315": 158, "316": 79, "320": 79, "325": 79, "326": 0, "334": 0, "349": 1, "368": 1, "350": 0, "351": 0, "354": 0, "355": 0, "360": 0, "361": 0, "362": 0, "363": 0, "364": 0, "365": 0, "366": 0, "369": 0, "372": 0, "373": 0, "375": 0, "377": 0, "380": 0, "381": 0, "383": 0, "382": 0, "385": 0, "378": 0, "376": 0, "401": 1, "406": 1, "407": 1, "423": 1, "426": 1, "429": 1, "454": 1, "499": 1, "570": 1, "404": 4, "410": 0, "411": 0, "412": 0, "414": 0, "415": 0, "417": 0, "418": 0, "416": 0, "413": 0, "424": 0, "427": 0, "430": 0, "431": 0, "432": 0, "434": 0, "435": 0, "436": 0, "437": 0, "438": 0, "442": 0, "443": 0, "444": 0, "446": 0, "447": 0, "448": 0, "449": 0, "450": 0, "451": 0, "445": 0, "466": 0, "467": 0, "472": 0, "473": 0, "474": 0, "475": 0, "476": 0, "477": 0, "479": 0, "480": 0, "481": 0, "482": 0, "483": 0, "488": 0, "489": 0, "491": 0, "492": 0, "493": 0, "494": 0, "497": 0, "515": 0, "519": 0, "520": 0, "523": 0, "526": 0, "527": 0, "529": 0, "530": 0, "532": 0, "533": 0, "534": 0, "535": 0, "531": 0, "539": 0, "540": 0, "541": 0, "543": 0, "544": 0, "545": 0, "547": 0, "548": 0, "549": 0, "550": 0, "553": 0, "555": 0, "559": 0, "560": 0, "564": 0, "568": 0, "554": 0, "572": 0, "591": 1, "595": 1, "596": 1, "604": 1, "619": 1, "625": 1, "592": 40, "593": 40, "597": 1, "599": 2, "600": 1, "601": 1, "614": 33, "615": 0, "617": 33, "621": 0, "622": 0, "620": 0, "626": 0, "627": 0, "628": 0, "640": 2, "908": 1, "641": 1, "650": 1, "655": 1, "657": 1, "665": 1, "705": 1, "713": 1, "730": 1, "751": 1, "788": 1, "790": 1, "796": 1, "798": 1, "801": 1, "803": 1, "809": 1, "811": 1, "814": 1, "816": 1, "822": 1, "824": 1, "827": 1, "831": 1, "833": 0, "857": 0, "859": 0, "863": 0, "865": 0, "878": 0, "880": 1, "906": 1, "642": 10, "644": 10, "645": 10, "646": 10, "648": 10, "651": 0, "652": 0, "653": 0, "658": 8, "659": 4, "660": 0, "661": 0, "662": 0, "669": 10, "670": 20, "671": 10, "673": 10, "674": 10, "675": 4, "676": 10, "677": 10, "678": 20, "679": 10, "680": 10, "681": 0, "682": 10, "687": 10, "688": 10, "689": 0, "692": 0, "693": 0, "695": 0, "699": 10, "701": 10, "700": 10, "703": 10, "694": 0, "706": 0, "707": 0, "708": 0, "710": 0, "711": 0, "717": 10, "718": 0, "719": 0, "722": 10, "723": 10, "724": 0, "726": 10, "727": 10, "728": 10, "731": 0, "732": 0, "734": 0, "735": 0, "737": 0, "738": 0, "739": 0, "740": 0, "744": 0, "745": 0, "746": 0, "747": 0, "748": 0, "749": 0, "752": 0, "753": 0, "754": 0, "756": 0, "767": 0, "768": 0, "769": 0, "770": 0, "771": 0, "772": 0, "773": 0, "774": 0, "776": 0, "777": 0, "779": 0, "778": 0, "783": 0, "784": 0, "785": 0, "786": 0, "757": 0, "758": 0, "759": 0, "761": 0, "762": 0, "760": 0, "765": 0, "791": 0, "792": 0, "793": 0, "794": 0, "799": 0, "804": 2, "805": 2, "806": 2, "807": 2, "812": 0, "817": 2, "818": 2, "819": 2, "820": 2, "825": 0, "834": 0, "835": 0, "836": 0, "837": 0, "838": 0, "839": 0, "840": 0, "841": 0, "842": 0, "844": 0, "845": 0, "843": 0, "849": 0, "850": 0, "852": 0, "853": 0, "855": 0, "860": 0, "861": 0, "866": 0, "867": 0, "868": 0, "869": 0, "871": 0, "873": 0, "874": 0, "875": 0, "876": 0, "881": 0, "884": 0, "886": 0, "887": 0, "888": 0, "889": 0, "890": 0, "891": 0, "893": 0, "894": 0, "895": 0, "896": 0, "897": 0, "899": 0, "901": 0, "902": 0, "904": 0, "928": 1, "933": 1, "934": 1, "940": 1, "941": 1, "950": 1, "929": 24, "931": 24, "938": 0, "942": 3, "944": 6, "945": 3, "946": 3, "947": 3, "952": 0, "953": 0, "954": 0, "951": 0, "966": 6, "1462": 3, "967": 3, "1017": 3, "1024": 3, "1026": 3, "1046": 3, "1056": 3, "1062": 3, "1069": 3, "1113": 3, "1133": 3, "1135": 3, "1139": 3, "1141": 3, "1167": 3, "1169": 3, "1201": 3, "1203": 3, "1209": 3, "1211": 3, "1216": 3, "1218": 3, "1229": 3, "1231": 3, "1236": 3, "1238": 3, "1249": 3, "1251": 3, "1256": 3, "1258": 3, "1290": 3, "1309": 3, "1343": 3, "1342": 3, "1413": 3, "968": 23, "970": 23, "972": 23, "973": 13, "974": 13, "975": 13, "976": 13, "977": 13, "978": 13, "980": 10, "981": 10, "982": 10, "983": 10, "984": 10, "985": 10, "987": 23, "988": 23, "990": 23, "991": 23, "993": 23, "994": 23, "995": 46, "996": 23, "997": 23, "998": 23, "1000": 23, "1001": 23, "1002": 0, "1003": 0, "1005": 0, "1010": 23, "1011": 0, "1012": 0, "1014": 0, "1018": 0, "1019": 0, "1020": 0, "1022": 0, "1027": 0, "1031": 0, "1030": 0, "1033": 0, "1034": 0, "1035": 0, "1036": 0, "1037": 0, "1039": 0, "1040": 0, "1041": 0, "1043": 0, "1044": 0, "1050": 21, "1051": 21, "1052": 11, "1053": 21, "1054": 21, "1057": 8, "1058": 8, "1059": 8, "1060": 8, "1063": 21, "1064": 21, "1065": 21, "1066": 21, "1067": 21, "1070": 0, "1071": 0, "1073": 0, "1074": 0, "1075": 0, "1076": 0, "1086": 0, "1087": 0, "1088": 0, "1089": 0, "1090": 0, "1091": 0, "1095": 0, "1099": 0, "1100": 0, "1104": 0, "1108": 0, "1109": 0, "1110": 0, "1098": 0, "1092": 0, "1093": 0, "1094": 0, "1102": 0, "1101": 0, "1106": 0, "1105": 0, "1114": 8, "1115": 8, "1116": 8, "1117": 32, "1118": 8, "1119": 8, "1120": 8, "1121": 8, "1125": 8, "1126": 0, "1127": 0, "1128": 0, "1129": 0, "1130": 0, "1136": 0, "1137": 0, "1142": 0, "1143": 0, "1144": 0, "1145": 0, "1146": 0, "1147": 0, "1148": 0, "1149": 0, "1150": 0, "1151": 0, "1153": 0, "1154": 0, "1155": 0, "1157": 0, "1158": 0, "1159": 0, "1160": 0, "1161": 0, "1162": 0, "1163": 0, "1164": 0, "1172": 0, "1174": 0, "1175": 0, "1176": 0, "1177": 0, "1178": 0, "1180": 0, "1181": 0, "1182": 0, "1186": 0, "1187": 0, "1190": 0, "1189": 0, "1191": 0, "1188": 0, "1193": 0, "1194": 0, "1196": 0, "1198": 0, "1199": 0, "1204": 0, "1205": 0, "1206": 0, "1207": 0, "1212": 0, "1213": 0, "1219": 9, "1220": 18, "1221": 9, "1225": 8, "1226": 5, "1227": 8, "1232": 0, "1233": 0, "1239": 2, "1240": 6, "1241": 2, "1242": 2, "1245": 2, "1246": 1, "1247": 2, "1252": 0, "1253": 0, "1262": 8, "1264": 8, "1265": 8, "1266": 16, "1267": 8, "1268": 8, "1269": 0, "1270": 0, "1272": 0, "1274": 8, "1275": 8, "1276": 0, "1277": 0, "1278": 0, "1280": 8, "1281": 0, "1282": 0, "1283": 0, "1284": 0, "1287": 0, "1288": 8, "1298": 0, "1299": 0, "1302": 0, "1303": 0, "1301": 0, "1297": 0, "1307": 0, "1324": 8, "1325": 8, "1323": 8, "1330": 8, "1329": 13, "1331": 8, "1337": 8, "1338": 8, "1339": 8, "1336": 8, "1349": 8, "1350": 0, "1352": 8, "1353": 8, "1354": 8, "1355": 16, "1356": 8, "1358": 8, "1359": 16, "1360": 32, "1367": 16, "1369": 8, "1371": 8, "1373": 0, "1374": 0, "1376": 0, "1377": 0, "1378": 0, "1379": 0, "1380": 0, "1381": 0, "1382": 0, "1383": 0, "1384": 0, "1385": 0, "1388": 0, "1389": 0, "1397": 0, "1399": 0, "1402": 0, "1403": 0, "1404": 0, "1405": 0, "1406": 0, "1407": 0, "1408": 0, "1409": 0, "1410": 0, "1361": 16, "1363": 8, "1364": 8, "1362": 8, "1390": 0, "1391": 0, "1393": 0, "1394": 0, "1392": 0, "1418": 0, "1419": 0, "1422": 0, "1423": 0, "1424": 0, "1425": 0, "1426": 0, "1428": 0, "1430": 0, "1431": 0, "1433": 0, "1434": 0, "1435": 0, "1436": 0, "1437": 0, "1438": 0, "1439": 0, "1440": 0, "1442": 0, "1443": 0, "1444": 0, "1445": 0, "1448": 0, "1449": 0, "1450": 0, "1452": 0, "1453": 0, "1454": 0, "1455": 0, "1456": 0, "1457": 0, "1458": 0, "1459": 0}}
{"/testbed/django/contrib/contenttypes/fields.py": {"1": 1, "2": 1, "3": 1, "5": 1, "7": 1, "8": 1, "9": 1, "10": 1, "11": 1, "12": 1, "13": 1, "14": 1, "18": 1, "19": 1, "20": 1, "21": 1, "22": 1, "25": 2, "271": 2, "294": 2, "538": 2, "559": 1, "35": 1, "36": 1, "37": 1, "38": 1, "40": 1, "41": 1, "42": 1, "43": 1, "44": 1, "45": 1, "46": 1, "48": 1, "58": 1, "64": 1, "71": 1, "78": 1, "82": 1, "89": 1, "101": 1, "116": 1, "163": 1, "166": 1, "177": 1, "226": 1, "259": 1, "51": 0, "52": 0, "53": 0, "54": 0, "55": 0, "56": 0, "59": 0, "60": 0, "61": 0, "62": 0, "67": 0, "68": 0, "66": 0, "74": 0, "75": 0, "73": 0, "79": 0, "80": 0, "83": 0, "84": 0, "85": 0, "86": 0, "90": 0, "92": 0, "93": 0, "94": 0, "95": 0, "91": 0, "99": 0, "102": 0, "103": 0, "104": 0, "106": 0, "107": 0, "108": 0, "109": 0, "110": 0, "105": 0, "114": 0, "121": 0, "122": 0, "123": 0, "125": 0, "126": 0, "128": 0, "129": 0, "130": 0, "124": 0, "134": 0, "136": 0, "137": 0, "138": 0, "140": 0, "143": 0, "144": 0, "135": 0, "147": 0, "149": 0, "150": 0, "151": 0, "153": 0, "156": 0, "157": 0, "148": 0, "161": 0, "164": 0, "167": 0, "168": 0, "169": 0, "171": 0, "172": 0, "175": 0, "178": 0, "179": 0, "183": 0, "185": 0, "186": 0, "187": 0, "189": 0, "190": 0, "191": 0, "192": 0, "193": 0, "194": 0, "196": 0, "197": 0, "198": 0, "199": 0, "200": 0, "204": 0, "218": 0, "219": 0, "220": 0, "221": 0, "222": 0, "223": 0, "217": 0, "205": 0, "206": 0, "207": 0, "209": 0, "210": 0, "213": 0, "214": 0, "212": 0, "227": 0, "228": 0, "234": 0, "235": 0, "236": 0, "238": 0, "239": 0, "240": 0, "241": 0, "243": 0, "242": 0, "245": 0, "246": 0, "247": 0, "249": 0, "250": 0, "251": 0, "252": 0, "253": 0, "254": 0, "255": 0, "256": 0, "257": 0, "260": 0, "261": 0, "262": 0, "263": 0, "264": 0, "266": 0, "267": 0, "268": 0, "276": 1, "284": 0, "285": 0, "286": 0, "287": 0, "288": 0, "289": 0, "290": 0, "300": 1, "301": 1, "303": 1, "304": 1, "305": 1, "306": 1, "308": 1, "310": 1, "312": 1, "348": 1, "354": 1, "366": 1, "385": 1, "394": 1, "436": 1, "455": 1, "470": 1, "474": 1, "503": 1, "506": 1, "509": 1, "517": 1, "523": 1, "322": 0, "323": 0, "324": 0, "325": 0, "326": 0, "331": 0, "332": 0, "333": 0, "334": 0, "335": 0, "342": 0, "344": 0, "345": 0, "346": 0, "349": 0, "350": 0, "351": 0, "361": 0, "362": 0, "363": 0, "360": 0, "367": 0, "368": 0, "369": 0, "370": 0, "371": 0, "374": 0, "375": 0, "377": 0, "378": 0, "379": 0, "373": 0, "383": 0, "386": 0, "389": 0, "390": 0, "388": 0, "387": 0, "407": 0, "408": 0, "409": 0, "410": 0, "411": 0, "412": 0, "413": 0, "414": 0, "415": 0, "416": 0, "417": 0, "418": 0, "419": 0, "426": 0, "427": 0, "428": 0, "429": 0, "430": 0, "431": 0, "432": 0, "433": 0, "434": 0, "437": 0, "438": 0, "439": 0, "440": 0, "442": 0, "444": 0, "445": 0, "446": 0, "447": 0, "448": 0, "449": 0, "450": 0, "451": 0, "443": 0, "456": 0, "457": 0, "459": 0, "460": 0, "461": 0, "462": 0, "463": 0, "464": 0, "465": 0, "466": 0, "458": 0, "471": 0, "472": 0, "475": 0, "476": 0, "477": 0, "481": 0, "482": 0, "483": 0, "484": 0, "489": 0, "491": 0, "497": 0, "498": 0, "499": 0, "500": 0, "492": 0, "493": 0, "495": 0, "504": 0, "507": 0, "513": 0, "514": 0, "518": 0, "519": 0, "520": 0, "521": 0, "527": 0, "529": 0, "530": 0, "531": 0, "533": 0, "528": 0, "551": 1, "552": 1, "553": 0, "554": 0, "555": 0, "566": 0, "783": 0, "567": 0, "588": 0, "593": 0, "595": 0, "598": 0, "605": 0, "611": 0, "618": 0, "654": 0, "690": 0, "692": 0, "697": 0, "699": 0, "702": 0, "704": 0, "717": 0, "719": 0, "741": 0, "743": 0, "750": 0, "752": 0, "755": 0, "757": 0, "763": 0, "765": 0, "768": 0, "770": 0, "776": 0, "778": 0, "781": 0, "568": 0, "570": 0, "572": 0, "573": 0, "574": 0, "575": 0, "577": 0, "578": 0, "579": 0, "580": 0, "581": 0, "584": 0, "585": 0, "583": 0, "589": 0, "590": 0, "591": 0, "596": 0, "602": 0, "603": 0, "606": 0, "607": 0, "608": 0, "609": 0, "612": 0, "613": 0, "614": 0, "615": 0, "616": 0, "619": 0, "620": 0, "622": 0, "623": 0, "625": 0, "632": 0, "633": 0, "634": 0, "637": 0, "640": 0, "641": 0, "643": 0, "644": 0, "648": 0, "649": 0, "650": 0, "651": 0, "642": 0, "626": 0, "628": 0, "629": 0, "627": 0, "645": 0, "646": 0, "655": 0, "656": 0, "658": 0, "667": 0, "668": 0, "669": 0, "670": 0, "671": 0, "672": 0, "673": 0, "675": 0, "676": 0, "678": 0, "680": 0, "681": 0, "679": 0, "685": 0, "686": 0, "687": 0, "688": 0, "659": 0, "660": 0, "661": 0, "662": 0, "664": 0, "665": 0, "693": 0, "694": 0, "695": 0, "700": 0, "705": 0, "706": 0, "707": 0, "708": 0, "711": 0, "713": 0, "714": 0, "715": 0, "722": 0, "724": 0, "725": 0, "726": 0, "727": 0, "728": 0, "730": 0, "731": 0, "732": 0, "733": 0, "734": 0, "736": 0, "738": 0, "739": 0, "744": 0, "745": 0, "746": 0, "747": 0, "748": 0, "753": 0, "758": 0, "759": 0, "760": 0, "761": 0, "766": 0, "771": 0, "772": 0, "773": 0, "774": 0, "779": 0}}
+ git checkout 76e37513e22f4d9a01c7f15eee36fe44388e6670
Note: switching to '76e37513e22f4d9a01c7f15eee36fe44388e6670'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by switching back to a branch.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -c with the switch command. Example:

  git switch -c <new-branch-name>

Or undo this operation with:

  git switch -

Turn off this advice by setting config variable advice.detachedHead to false

HEAD is now at 76e37513e2 Refs #33374 -- Adjusted full match condition handling.
M	django/contrib/contenttypes/fields.py
M	django/db/models/fields/related_descriptors.py
+ git apply /root/pre_state.patch
error: unrecognized input
