2025-12-25 22:03:41,319 - WARNING - Starting evaluation at 1766700221.3190236
2025-12-25 22:03:41,365 - INFO - Creating container for django__django-15037...
2025-12-25 22:03:44,187 - INFO - Container for django__django-15037 created: a039ef5c16df642c9ccf81428b9ad9fc1546acbd21c10ca20dfdb56951794fcc
2025-12-25 22:03:45,402 - INFO - Container for django__django-15037 started: a039ef5c16df642c9ccf81428b9ad9fc1546acbd21c10ca20dfdb56951794fcc
2025-12-25 22:03:46,948 - INFO - Git diff before:

2025-12-25 22:03:46,948 - INFO - Eval script for django__django-15037 written to eval.sh, now applying to container...
2025-12-25 22:04:21,854 - INFO - Test output for django__django-15037 written to run_instance_swt_logs/patch_evaluation/pred_post__Prometheus-Bug-Reproduction-Agent/django__django-15037/test_output.txt
2025-12-25 22:04:21,944 - INFO - Git diff after:
diff --git a/django/core/management/commands/inspectdb.py b/django/core/management/commands/inspectdb.py
index f9b4bfb477..d64725ca73 100644
--- a/django/core/management/commands/inspectdb.py
+++ b/django/core/management/commands/inspectdb.py
@@ -116,13 +116,17 @@ class Command(BaseCommand):
                         extra_params['unique'] = True
 
                     if is_relation:
+                        ref_db_column, ref_db_table = relations[column_name]
                         if extra_params.pop('unique', False) or extra_params.get('primary_key'):
                             rel_type = 'OneToOneField'
                         else:
                             rel_type = 'ForeignKey'
+                            ref_pk_column = connection.introspection.get_primary_key_column(cursor, ref_db_table)
+                            if ref_pk_column and ref_pk_column != ref_db_column:
+                                extra_params['to_field'] = ref_db_column
                         rel_to = (
-                            "self" if relations[column_name][1] == table_name
-                            else table2model(relations[column_name][1])
+                            'self' if ref_db_table == table_name
+                            else table2model(ref_db_table)
                         )
                         if rel_to in known_models:
                             field_type = '%s(%s' % (rel_type, rel_to)
2025-12-25 22:04:21,945 - INFO - Git diff changed after running eval script
2025-12-25 22:04:21,945 - INFO - Attempting to stop container exec.eval.x86_64.6b24dca158642bd6288384.af7f3774ae14ab35c942dd.129975669662944...
2025-12-25 22:04:41,857 - INFO - Attempting to remove container exec.eval.x86_64.6b24dca158642bd6288384.af7f3774ae14ab35c942dd.129975669662944...
2025-12-25 22:04:42,397 - INFO - Container exec.eval.x86_64.6b24dca158642bd6288384.af7f3774ae14ab35c942dd.129975669662944 removed.
2025-12-25 22:04:42,399 - WARNING - End of eval at 1766700282.3989735
2025-12-26 02:43:31,087 - WARNING - Starting evaluation at 1766717011.0878508
2025-12-26 02:43:31,118 - WARNING - Starting evaluation at 1766717011.118059
2025-12-26 02:43:31,144 - WARNING - Starting evaluation at 1766717011.144532
2025-12-26 02:43:31,170 - WARNING - Starting evaluation at 1766717011.170374
2025-12-26 02:43:31,199 - WARNING - Starting evaluation at 1766717011.199639
2025-12-26 09:38:11,597 - WARNING - Starting evaluation at 1766741891.5971067
2025-12-26 09:38:11,605 - WARNING - Starting evaluation at 1766741891.6052833
2025-12-26 09:38:11,630 - WARNING - Starting evaluation at 1766741891.6303258
2025-12-26 09:38:11,641 - WARNING - Starting evaluation at 1766741891.6419668
2025-12-26 09:38:11,649 - WARNING - Starting evaluation at 1766741891.6498396
2025-12-26 09:53:36,153 - WARNING - Starting evaluation at 1766742816.1539285
2025-12-26 09:53:36,163 - WARNING - Starting evaluation at 1766742816.1637375
2025-12-26 09:53:36,186 - WARNING - Starting evaluation at 1766742816.1869605
2025-12-26 09:53:36,196 - WARNING - Starting evaluation at 1766742816.1966808
2025-12-26 09:53:36,204 - WARNING - Starting evaluation at 1766742816.204349
2025-12-26 10:15:29,796 - WARNING - Starting evaluation at 1766744129.7967079
2025-12-26 10:15:29,811 - WARNING - Starting evaluation at 1766744129.811627
2025-12-26 10:15:29,826 - WARNING - Starting evaluation at 1766744129.8266485
2025-12-26 10:15:29,837 - WARNING - Starting evaluation at 1766744129.8377607
2025-12-26 10:15:29,851 - WARNING - Starting evaluation at 1766744129.8511214
2025-12-26 11:07:39,088 - WARNING - Starting evaluation at 1766747259.0882635
2025-12-26 11:07:39,099 - WARNING - Starting evaluation at 1766747259.0996902
2025-12-26 11:07:39,110 - WARNING - Starting evaluation at 1766747259.1099894
2025-12-26 11:07:39,118 - WARNING - Starting evaluation at 1766747259.1182857
2025-12-26 11:07:39,142 - WARNING - Starting evaluation at 1766747259.1428216
2025-12-26 11:07:52,419 - INFO - Grading answer for django__django-15037...
2025-12-26 11:07:52,425 - INFO - report: {'django__django-15037': {'patch_is_None': False, 'patch_exists': True, 'patch_successfully_applied': True, 'resolved': True, 'coverage_pred': 1.0, 'coverage_gold': 1.0, 'coverage_base': 0.0, 'coverage_delta_pred': 1.0, 'coverage_delta_gold': 1.0, 'added_f2p': 1, 'tests_base': {'FAIL_TO_PASS': [], 'PASS_TO_PASS': [], 'FAIL_TO_FAIL': [], 'PASS_TO_FAIL': [], 'UNMATCHED': ['test_foreign_key_to_unique_field (unittest.loader._FailedTest)']}, 'tests_pred': {'FAIL_TO_PASS': ['test_foreign_key_to_unique_field (inspectdb.test_foreign_key_to_unique_field.ForeignKeyToUniqueFieldTests)'], 'PASS_TO_PASS': [], 'FAIL_TO_FAIL': [], 'PASS_TO_FAIL': [], 'UNMATCHED': []}, 'tests_gold': {'FAIL_TO_PASS': ['test_introspection_errors (inspectdb.tests.InspectDBTestCase)', 'test_foreign_key_to_field (inspectdb.tests.InspectDBTestCase)'], 'PASS_TO_PASS': ['test_attribute_name_not_python_keyword (inspectdb.tests.InspectDBTestCase)', 'test_text_field_db_collation (inspectdb.tests.InspectDBTestCase)', 'test_special_column_name_introspection (inspectdb.tests.InspectDBTestCase)', 'test_unique_together_meta (inspectdb.tests.InspectDBTestCase)', 'test_managed_models (inspectdb.tests.InspectDBTestCase)', 'test_table_name_introspection (inspectdb.tests.InspectDBTestCase)', 'test_stealth_table_name_filter_option (inspectdb.tests.InspectDBTestCase)', 'test_include_views (inspectdb.tests.InspectDBTransactionalTests)', 'test_table_option (inspectdb.tests.InspectDBTestCase)', 'test_json_field (inspectdb.tests.InspectDBTestCase)', 'test_number_field_types (inspectdb.tests.InspectDBTestCase)', 'test_char_field_db_collation (inspectdb.tests.InspectDBTestCase)', 'test_field_types (inspectdb.tests.InspectDBTestCase)'], 'FAIL_TO_FAIL': ['test_custom_fields (inspectdb.tests.InspectDBTestCase)'], 'PASS_TO_FAIL': [], 'UNMATCHED': ['test_foreign_data_wrapper (inspectdb.tests.InspectDBTransactionalTests)', 'test_include_partitions (inspectdb.tests.InspectDBTransactionalTests)', 'test_unsupported_unique_together (inspectdb.tests.InspectDBTestCase)', 'test_include_materialized_views (inspectdb.tests.InspectDBTransactionalTests)']}}}
Result for django__django-15037: resolved: True
