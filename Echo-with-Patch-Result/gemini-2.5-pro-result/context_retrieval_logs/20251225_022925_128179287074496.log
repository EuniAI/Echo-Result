2025-12-25 02:29:25,099 - thread-128179287074496.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Include number of rows matched in bulk_update() return value

Description: Description
	
Currently, bulk_update() returns None, unlike update(), which returns ​the number of rows matched.
It looks like it would be easy to add the same functionality to bulk_update() since bulk_update() simply calls update() repeatedly:
​https://github.com/django/django/blob/2b4b6c8af0aae8785bc1347cf1be2e8e70fd5ff3/django/db/models/query.py#L568
I.e. the return values could simply be added and returned.

Patch information:
diff --git a/django/db/models/query.py b/django/db/models/query.py
index 387deca527..58a6864a71 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -527,6 +527,8 @@ class QuerySet:
     def bulk_update(self, objs, fields, batch_size=None):
         """
         Update the given fields in each of the given objects in the database.
+
+        Return the total number of rows matched by the underlying update() calls.
         """
         if batch_size is not None and batch_size < 0:
             raise ValueError('Batch size must be a positive integer.')
@@ -541,7 +543,7 @@ class QuerySet:
         if any(f.primary_key for f in fields):
             raise ValueError('bulk_update() cannot be used with primary key fields.')
         if not objs:
-            return
+            return 0
         # PK is used twice in the resulting update query, once in the filter
         # and once in the WHEN. Each field will also have one CAST.
         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
@@ -564,8 +566,10 @@ class QuerySet:
                 update_kwargs[field.attname] = case_statement
             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
         with transaction.atomic(using=self.db, savepoint=False):
+            rows = 0
             for pks, update_kwargs in updates:
-                self.filter(pk__in=pks).update(**update_kwargs)
+                rows += self.filter(pk__in=pks).update(**update_kwargs)
+        return rows
     bulk_update.alters_data = True
 
     def get_or_create(self, defaults=None, **kwargs):
diff --git a/docs/ref/models/querysets.txt b/docs/ref/models/querysets.txt
index 5dc7a6b5bc..e0254b3061 100644
--- a/docs/ref/models/querysets.txt
+++ b/docs/ref/models/querysets.txt
@@ -2221,7 +2221,7 @@ normally supports it).
 .. method:: bulk_update(objs, fields, batch_size=None)
 
 This method efficiently updates the given fields on the provided model
-instances, generally with one query::
+instances, generally with one query and returns the total number of rows matched::
 
     >>> objs = [
     ...    Entry.objects.create(headline='Entry 1'),


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

2025-12-25 02:29:25,197 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Include number of rows matched in bulk_update() return value

Description: Description
	
Currently, bulk_update() returns None, unlike update(), which returns ​the number of rows matched.
It looks like it would be easy to add the same functionality to bulk_update() since bulk_update() simply calls update() repeatedly:
​https://github.com/django/django/blob/2b4b6c8af0aae8785bc1347cf1be2e8e70fd5ff3/django/db/models/query.py#L568
I.e. the return values could simply be added and returned.

Patch information:
diff --git a/django/db/models/query.py b/django/db/models/query.py
index 387deca527..58a6864a71 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -527,6 +527,8 @@ class QuerySet:
     def bulk_update(self, objs, fields, batch_size=None):
         """
         Update the given fields in each of the given objects in the database.
+
+        Return the total number of rows matched by the underlying update() calls.
         """
         if batch_size is not None and batch_size < 0:
             raise ValueError('Batch size must be a positive integer.')
@@ -541,7 +543,7 @@ class QuerySet:
         if any(f.primary_key for f in fields):
             raise ValueError('bulk_update() cannot be used with primary key fields.')
         if not objs:
-            return
+            return 0
         # PK is used twice in the resulting update query, once in the filter
         # and once in the WHEN. Each field will also have one CAST.
         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
@@ -564,8 +566,10 @@ class QuerySet:
                 update_kwargs[field.attname] = case_statement
             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
         with transaction.atomic(using=self.db, savepoint=False):
+            rows = 0
             for pks, update_kwargs in updates:
-                self.filter(pk__in=pks).update(**update_kwargs)
+                rows += self.filter(pk__in=pks).update(**update_kwargs)
+        return rows
     bulk_update.alters_data = True
 
     def get_or_create(self, defaults=None, **kwargs):
diff --git a/docs/ref/models/querysets.txt b/docs/ref/models/querysets.txt
index 5dc7a6b5bc..e0254b3061 100644
--- a/docs/ref/models/querysets.txt
+++ b/docs/ref/models/querysets.txt
@@ -2221,7 +2221,7 @@ normally supports it).
 .. method:: bulk_update(objs, fields, batch_size=None)
 
 This method efficiently updates the given fields on the provided model
-instances, generally with one query::
+instances, generally with one query and returns the total number of rows matched::
 
     >>> objs = [
     ...    Entry.objects.create(headline='Entry 1'),


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-25 02:29:43,682 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to fix an issue where `bulk_update()` returns `None` instead of the number of rows affected. The provided patch modifies the `bulk_update` method in `django/db/models/query.py` to sum the results of the `update()` calls it makes. To understand this change, I need the original source code for the `QuerySet` class, specifically the `bulk_update` and `update` methods, which are both located in `django/db/models/query.py`. This file is the most critical piece of context.' query='Please provide the full content of `django/db/models/query.py`.' extra_requirements='' purpose='I need this file to examine the original implementations of `QuerySet.bulk_update()` and `QuerySet.update()` to verify the logic of the proposed patch.'
2025-12-25 02:29:43,683 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `django/db/models/query.py`.
2025-12-25 02:29:43,683 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-25 02:29:43,684 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-25 02:29:43,684 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-25 02:29:43,684 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `django/db/models/query.py`.
Purpose: I need this file to examine the original implementations of `QuerySet.bulk_update()` and `QuerySet.update()` to verify the logic of the proposed patch.
2025-12-25 02:29:45,952 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `django/db/models/query.py` so you can examine the original implementations of `QuerySet.bulk_update()` and `QuerySet.update()` and verify the logic of the proposed patch.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/query.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2115, 'candidates_token_count': 73, 'total_token_count': 2306, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2115}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 73}], 'thoughts_token_count': 118, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07999013221427186, 'model_name': 'gemini-2.5-pro'} id='run--779894c7-364f-486a-baba-a55c9b0bb3e3-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/query.py'}, 'id': 'affac8a3-9d55-41b4-af0d-3e4fe01e15b6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2115, 'output_tokens': 73, 'total_tokens': 2306, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 118}}
2025-12-25 02:29:47,454 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 1001.0, "relative_path": "django/db/models/query.py"}'}, '__gemini_function_call_thought_signatures__': {'fe766180-8472-452d-8030-8395758b3ccb': 'CnABjz1rXzKcuBp+mFEZuT3Zj/RiSzVyQkpTvjJPysJxyUJunkr8VlhykvP9ygFnCQrps7+wwYChMfTHhh6Yv3oSAYBI+FrA9yOoBO+LJgKx29m9Raewfl1lqNYFfIsUkTLp9e/jfF81fwxsR7kUD20k'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9573, 'candidates_token_count': 29, 'total_token_count': 9621, 'cached_content_token_count': 1843, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9573}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1843}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 19}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16125263016799402, 'model_name': 'gemini-2.5-pro'} id='run--aec3ab93-9cc9-4688-9f91-c48df9978c32-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 1001.0, 'relative_path': 'django/db/models/query.py'}, 'id': 'fe766180-8472-452d-8030-8395758b3ccb', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9573, 'output_tokens': 29, 'total_tokens': 9621, 'input_token_details': {'cache_read': 1843}, 'output_token_details': {'reasoning': 19}}
2025-12-25 02:29:49,050 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1002.0, "relative_path": "django/db/models/query.py", "end_line": 1501.0}'}, '__gemini_function_call_thought_signatures__': {'61569b96-04a4-4fac-87e4-b7e0bfbe0592': 'CoABAY89a1/E1haSkQFnw6HtdF/RQosyt8IC2QU7jPfRUWNTDccmrhglofMX4GY47fpDinadywvI874X8KNLUZpocA8glo9RgZccKzvjtg6rfs8J3MRVXtWvUu/S9O739WuCwvAolBUOoJhzndMI/3ri9SRqR6zA7XYO37c4BUUfkRU='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17452, 'candidates_token_count': 29, 'total_token_count': 17508, 'cached_content_token_count': 9475, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17471}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9475}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 27}, 'finish_reason': 'STOP', 'avg_logprobs': -0.06441801580889471, 'model_name': 'gemini-2.5-pro'} id='run--b80761d8-eb68-4ada-bfbf-058bcb376807-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1002.0, 'relative_path': 'django/db/models/query.py', 'end_line': 1501.0}, 'id': '61569b96-04a4-4fac-87e4-b7e0bfbe0592', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17452, 'output_tokens': 29, 'total_tokens': 17508, 'input_token_details': {'cache_read': 9475}, 'output_token_details': {'reasoning': 27}}
2025-12-25 02:29:50,619 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1502.0, "end_line": 2001.0, "relative_path": "django/db/models/query.py"}'}, '__gemini_function_call_thought_signatures__': {'57a5b617-83b8-40e8-b66a-754a11915902': 'CoABAY89a1+0SC4l3tsB8h9j7bExhvyYvSU4slkGaiL5GNNUjca59PehKyIiWAL5pbhmsKBcuSp4lacI+fFuZitaC+r4KgO3r0/TR3UTQaCSV+j0t69+aetmxlEbMdnknC2Px7u6cfiPZaZZSvpTiMqmtRJY1hoDjkjauWvpKIR6NgM='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 25577, 'candidates_token_count': 29, 'total_token_count': 25633, 'cached_content_token_count': 17276, 'prompt_tokens_details': [{'modality': 1, 'token_count': 25623}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17276}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 27}, 'finish_reason': 'STOP', 'avg_logprobs': -0.011504090037839166, 'model_name': 'gemini-2.5-pro'} id='run--4a472ad9-9bd1-4c58-8ae3-d0705547f16f-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1502.0, 'end_line': 2001.0, 'relative_path': 'django/db/models/query.py'}, 'id': '57a5b617-83b8-40e8-b66a-754a11915902', 'type': 'tool_call'}] usage_metadata={'input_tokens': 25577, 'output_tokens': 29, 'total_tokens': 25633, 'input_token_details': {'cache_read': 17276}, 'output_token_details': {'reasoning': 27}}
2025-12-25 02:29:52,320 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2002.0, "relative_path": "django/db/models/query.py", "end_line": 2501.0}'}, '__gemini_function_call_thought_signatures__': {'50212a1f-a7f2-423e-b4e2-0b576dd5f121': 'CoABAY89a1/Lm346UTP0aC/zSUOj+udT9E/d7GUACAJxsSOJIwoIxvbOUXkndP9PW+ixz+aSqX82Fh3/bKg9lY5/hqJfBlVu6B296chozY9X8Vt147QUoT9udjdq68BGWquvGS2Y2o8vgkKp7BKXBT50f4fsXVXd1RpZ58VM4/pr/f0='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 33973, 'candidates_token_count': 29, 'total_token_count': 34029, 'cached_content_token_count': 25197, 'prompt_tokens_details': [{'modality': 1, 'token_count': 34046}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25197}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 27}, 'finish_reason': 'STOP', 'avg_logprobs': -0.024010584272187333, 'model_name': 'gemini-2.5-pro'} id='run--d97cc8e6-ad85-4d84-9f27-1a9a874fbde5-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2002.0, 'relative_path': 'django/db/models/query.py', 'end_line': 2501.0}, 'id': '50212a1f-a7f2-423e-b4e2-0b576dd5f121', 'type': 'tool_call'}] usage_metadata={'input_tokens': 33973, 'output_tokens': 29, 'total_tokens': 34029, 'input_token_details': {'cache_read': 25197}, 'output_token_details': {'reasoning': 27}}
2025-12-25 02:29:55,765 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `django/db/models/query.py` for you. You can now examine the original implementations of `QuerySet.bulk_update()` (lines 527-569) and `QuerySet.update()` (lines 769-787) to verify the logic of the proposed patch. The complete file content is available for your review.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 34705, 'candidates_token_count': 85, 'total_token_count': 35034, 'cached_content_token_count': 32927, 'prompt_tokens_details': [{'modality': 1, 'token_count': 34805}], 'cache_tokens_details': [{'modality': 1, 'token_count': 32927}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 244}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3151469735538258, 'model_name': 'gemini-2.5-pro'} id='run--cf481ef7-ad8a-4436-be5b-f42d02fdeac3-0' usage_metadata={'input_tokens': 34705, 'output_tokens': 85, 'total_tokens': 35034, 'input_token_details': {'cache_read': 32927}, 'output_token_details': {'reasoning': 244}}
2025-12-25 02:29:55,768 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `django/db/models/query.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need this file to examine the original implementations of `QuerySet.bulk_update()` and `QuerySet.update()` to verify the logic of the proposed patch.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/query.py
Line number range: 1 - 500
Content:
1. """
2. The main QuerySet implementation. This provides the public API for the ORM.
3. """
4. 
5. import copy
6. import operator
7. import warnings
8. from itertools import chain
9. 
10. import django
11. from django.conf import settings
12. from django.core import exceptions
13. from django.db import (
14.     DJANGO_VERSION_PICKLE_KEY, IntegrityError, NotSupportedError, connections,
15.     router, transaction,
16. )
17. from django.db.models import AutoField, DateField, DateTimeField, sql
18. from django.db.models.constants import LOOKUP_SEP
19. from django.db.models.deletion import Collector
20. from django.db.models.expressions import Case, Expression, F, Ref, Value, When
21. from django.db.models.functions import Cast, Trunc
22. from django.db.models.query_utils import FilteredRelation, Q
23. from django.db.models.sql.constants import CURSOR, GET_ITERATOR_CHUNK_SIZE
24. from django.db.models.utils import create_namedtuple_class, resolve_callables
25. from django.utils import timezone
26. from django.utils.functional import cached_property, partition
27. 
28. # The maximum number of results to fetch in a get() query.
29. MAX_GET_RESULTS = 21
30. 
31. # The maximum number of items to display in a QuerySet.__repr__
32. REPR_OUTPUT_SIZE = 20
33. 
34. 
35. class BaseIterable:
36.     def __init__(self, queryset, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
37.         self.queryset = queryset
38.         self.chunked_fetch = chunked_fetch
39.         self.chunk_size = chunk_size
40. 
41. 
42. class ModelIterable(BaseIterable):
43.     """Iterable that yields a model instance for each row."""
44. 
45.     def __iter__(self):
46.         queryset = self.queryset
47.         db = queryset.db
48.         compiler = queryset.query.get_compiler(using=db)
49.         # Execute the query. This will also fill compiler.select, klass_info,
50.         # and annotations.
51.         results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
52.         select, klass_info, annotation_col_map = (compiler.select, compiler.klass_info,
53.                                                   compiler.annotation_col_map)
54.         model_cls = klass_info['model']
55.         select_fields = klass_info['select_fields']
56.         model_fields_start, model_fields_end = select_fields[0], select_fields[-1] + 1
57.         init_list = [f[0].target.attname
58.                      for f in select[model_fields_start:model_fields_end]]
59.         related_populators = get_related_populators(klass_info, select, db)
60.         known_related_objects = [
61.             (field, related_objs, operator.attrgetter(*[
62.                 field.attname
63.                 if from_field == 'self' else
64.                 queryset.model._meta.get_field(from_field).attname
65.                 for from_field in field.from_fields
66.             ])) for field, related_objs in queryset._known_related_objects.items()
67.         ]
68.         for row in compiler.results_iter(results):
69.             obj = model_cls.from_db(db, init_list, row[model_fields_start:model_fields_end])
70.             for rel_populator in related_populators:
71.                 rel_populator.populate(row, obj)
72.             if annotation_col_map:
73.                 for attr_name, col_pos in annotation_col_map.items():
74.                     setattr(obj, attr_name, row[col_pos])
75. 
76.             # Add the known related objects to the model.
77.             for field, rel_objs, rel_getter in known_related_objects:
78.                 # Avoid overwriting objects loaded by, e.g., select_related().
79.                 if field.is_cached(obj):
80.                     continue
81.                 rel_obj_id = rel_getter(obj)
82.                 try:
83.                     rel_obj = rel_objs[rel_obj_id]
84.                 except KeyError:
85.                     pass  # May happen in qs1 | qs2 scenarios.
86.                 else:
87.                     setattr(obj, field.name, rel_obj)
88. 
89.             yield obj
90. 
91. 
92. class ValuesIterable(BaseIterable):
93.     """
94.     Iterable returned by QuerySet.values() that yields a dict for each row.
95.     """
96. 
97.     def __iter__(self):
98.         queryset = self.queryset
99.         query = queryset.query
100.         compiler = query.get_compiler(queryset.db)
101. 
102.         # extra(select=...) cols are always at the start of the row.
103.         names = [
104.             *query.extra_select,
105.             *query.values_select,
106.             *query.annotation_select,
107.         ]
108.         indexes = range(len(names))
109.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
110.             yield {names[i]: row[i] for i in indexes}
111. 
112. 
113. class ValuesListIterable(BaseIterable):
114.     """
115.     Iterable returned by QuerySet.values_list(flat=False) that yields a tuple
116.     for each row.
117.     """
118. 
119.     def __iter__(self):
120.         queryset = self.queryset
121.         query = queryset.query
122.         compiler = query.get_compiler(queryset.db)
123. 
124.         if queryset._fields:
125.             # extra(select=...) cols are always at the start of the row.
126.             names = [
127.                 *query.extra_select,
128.                 *query.values_select,
129.                 *query.annotation_select,
130.             ]
131.             fields = [*queryset._fields, *(f for f in query.annotation_select if f not in queryset._fields)]
132.             if fields != names:
133.                 # Reorder according to fields.
134.                 index_map = {name: idx for idx, name in enumerate(names)}
135.                 rowfactory = operator.itemgetter(*[index_map[f] for f in fields])
136.                 return map(
137.                     rowfactory,
138.                     compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
139.                 )
140.         return compiler.results_iter(tuple_expected=True, chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
141. 
142. 
143. class NamedValuesListIterable(ValuesListIterable):
144.     """
145.     Iterable returned by QuerySet.values_list(named=True) that yields a
146.     namedtuple for each row.
147.     """
148. 
149.     def __iter__(self):
150.         queryset = self.queryset
151.         if queryset._fields:
152.             names = queryset._fields
153.         else:
154.             query = queryset.query
155.             names = [*query.extra_select, *query.values_select, *query.annotation_select]
156.         tuple_class = create_namedtuple_class(*names)
157.         new = tuple.__new__
158.         for row in super().__iter__():
159.             yield new(tuple_class, row)
160. 
161. 
162. class FlatValuesListIterable(BaseIterable):
163.     """
164.     Iterable returned by QuerySet.values_list(flat=True) that yields single
165.     values.
166.     """
167. 
168.     def __iter__(self):
169.         queryset = self.queryset
170.         compiler = queryset.query.get_compiler(queryset.db)
171.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
172.             yield row[0]
173. 
174. 
175. class QuerySet:
176.     """Represent a lazy database lookup for a set of objects."""
177. 
178.     def __init__(self, model=None, query=None, using=None, hints=None):
179.         self.model = model
180.         self._db = using
181.         self._hints = hints or {}
182.         self._query = query or sql.Query(self.model)
183.         self._result_cache = None
184.         self._sticky_filter = False
185.         self._for_write = False
186.         self._prefetch_related_lookups = ()
187.         self._prefetch_done = False
188.         self._known_related_objects = {}  # {rel_field: {pk: rel_obj}}
189.         self._iterable_class = ModelIterable
190.         self._fields = None
191.         self._defer_next_filter = False
192.         self._deferred_filter = None
193. 
194.     @property
195.     def query(self):
196.         if self._deferred_filter:
197.             negate, args, kwargs = self._deferred_filter
198.             self._filter_or_exclude_inplace(negate, args, kwargs)
199.             self._deferred_filter = None
200.         return self._query
201. 
202.     @query.setter
203.     def query(self, value):
204.         if value.values_select:
205.             self._iterable_class = ValuesIterable
206.         self._query = value
207. 
208.     def as_manager(cls):
209.         # Address the circular dependency between `Queryset` and `Manager`.
210.         from django.db.models.manager import Manager
211.         manager = Manager.from_queryset(cls)()
212.         manager._built_with_as_manager = True
213.         return manager
214.     as_manager.queryset_only = True
215.     as_manager = classmethod(as_manager)
216. 
217.     ########################
218.     # PYTHON MAGIC METHODS #
219.     ########################
220. 
221.     def __deepcopy__(self, memo):
222.         """Don't populate the QuerySet's cache."""
223.         obj = self.__class__()
224.         for k, v in self.__dict__.items():
225.             if k == '_result_cache':
226.                 obj.__dict__[k] = None
227.             else:
228.                 obj.__dict__[k] = copy.deepcopy(v, memo)
229.         return obj
230. 
231.     def __getstate__(self):
232.         # Force the cache to be fully populated.
233.         self._fetch_all()
234.         return {**self.__dict__, DJANGO_VERSION_PICKLE_KEY: django.__version__}
235. 
236.     def __setstate__(self, state):
237.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
238.         if pickled_version:
239.             if pickled_version != django.__version__:
240.                 warnings.warn(
241.                     "Pickled queryset instance's Django version %s does not "
242.                     "match the current version %s."
243.                     % (pickled_version, django.__version__),
244.                     RuntimeWarning,
245.                     stacklevel=2,
246.                 )
247.         else:
248.             warnings.warn(
249.                 "Pickled queryset instance's Django version is not specified.",
250.                 RuntimeWarning,
251.                 stacklevel=2,
252.             )
253.         self.__dict__.update(state)
254. 
255.     def __repr__(self):
256.         data = list(self[:REPR_OUTPUT_SIZE + 1])
257.         if len(data) > REPR_OUTPUT_SIZE:
258.             data[-1] = "...(remaining elements truncated)..."
259.         return '<%s %r>' % (self.__class__.__name__, data)
260. 
261.     def __len__(self):
262.         self._fetch_all()
263.         return len(self._result_cache)
264. 
265.     def __iter__(self):
266.         """
267.         The queryset iterator protocol uses three nested iterators in the
268.         default case:
269.             1. sql.compiler.execute_sql()
270.                - Returns 100 rows at time (constants.GET_ITERATOR_CHUNK_SIZE)
271.                  using cursor.fetchmany(). This part is responsible for
272.                  doing some column masking, and returning the rows in chunks.
273.             2. sql.compiler.results_iter()
274.                - Returns one row at time. At this point the rows are still just
275.                  tuples. In some cases the return values are converted to
276.                  Python values at this location.
277.             3. self.iterator()
278.                - Responsible for turning the rows into model objects.
279.         """
280.         self._fetch_all()
281.         return iter(self._result_cache)
282. 
283.     def __bool__(self):
284.         self._fetch_all()
285.         return bool(self._result_cache)
286. 
287.     def __getitem__(self, k):
288.         """Retrieve an item or slice from the set of results."""
289.         if not isinstance(k, (int, slice)):
290.             raise TypeError(
291.                 'QuerySet indices must be integers or slices, not %s.'
292.                 % type(k).__name__
293.             )
294.         assert ((not isinstance(k, slice) and (k >= 0)) or
295.                 (isinstance(k, slice) and (k.start is None or k.start >= 0) and
296.                  (k.stop is None or k.stop >= 0))), \
297.             "Negative indexing is not supported."
298. 
299.         if self._result_cache is not None:
300.             return self._result_cache[k]
301. 
302.         if isinstance(k, slice):
303.             qs = self._chain()
304.             if k.start is not None:
305.                 start = int(k.start)
306.             else:
307.                 start = None
308.             if k.stop is not None:
309.                 stop = int(k.stop)
310.             else:
311.                 stop = None
312.             qs.query.set_limits(start, stop)
313.             return list(qs)[::k.step] if k.step else qs
314. 
315.         qs = self._chain()
316.         qs.query.set_limits(k, k + 1)
317.         qs._fetch_all()
318.         return qs._result_cache[0]
319. 
320.     def __class_getitem__(cls, *args, **kwargs):
321.         return cls
322. 
323.     def __and__(self, other):
324.         self._merge_sanity_check(other)
325.         if isinstance(other, EmptyQuerySet):
326.             return other
327.         if isinstance(self, EmptyQuerySet):
328.             return self
329.         combined = self._chain()
330.         combined._merge_known_related_objects(other)
331.         combined.query.combine(other.query, sql.AND)
332.         return combined
333. 
334.     def __or__(self, other):
335.         self._merge_sanity_check(other)
336.         if isinstance(self, EmptyQuerySet):
337.             return other
338.         if isinstance(other, EmptyQuerySet):
339.             return self
340.         query = self if self.query.can_filter() else self.model._base_manager.filter(pk__in=self.values('pk'))
341.         combined = query._chain()
342.         combined._merge_known_related_objects(other)
343.         if not other.query.can_filter():
344.             other = other.model._base_manager.filter(pk__in=other.values('pk'))
345.         combined.query.combine(other.query, sql.OR)
346.         return combined
347. 
348.     ####################################
349.     # METHODS THAT DO DATABASE QUERIES #
350.     ####################################
351. 
352.     def _iterator(self, use_chunked_fetch, chunk_size):
353.         yield from self._iterable_class(self, chunked_fetch=use_chunked_fetch, chunk_size=chunk_size)
354. 
355.     def iterator(self, chunk_size=2000):
356.         """
357.         An iterator over the results from applying this QuerySet to the
358.         database.
359.         """
360.         if chunk_size <= 0:
361.             raise ValueError('Chunk size must be strictly positive.')
362.         use_chunked_fetch = not connections[self.db].settings_dict.get('DISABLE_SERVER_SIDE_CURSORS')
363.         return self._iterator(use_chunked_fetch, chunk_size)
364. 
365.     def aggregate(self, *args, **kwargs):
366.         """
367.         Return a dictionary containing the calculations (aggregation)
368.         over the current queryset.
369. 
370.         If args is present the expression is passed as a kwarg using
371.         the Aggregate object's default alias.
372.         """
373.         if self.query.distinct_fields:
374.             raise NotImplementedError("aggregate() + distinct(fields) not implemented.")
375.         self._validate_values_are_expressions((*args, *kwargs.values()), method_name='aggregate')
376.         for arg in args:
377.             # The default_alias property raises TypeError if default_alias
378.             # can't be set automatically or AttributeError if it isn't an
379.             # attribute.
380.             try:
381.                 arg.default_alias
382.             except (AttributeError, TypeError):
383.                 raise TypeError("Complex aggregates require an alias")
384.             kwargs[arg.default_alias] = arg
385. 
386.         query = self.query.chain()
387.         for (alias, aggregate_expr) in kwargs.items():
388.             query.add_annotation(aggregate_expr, alias, is_summary=True)
389.             annotation = query.annotations[alias]
390.             if not annotation.contains_aggregate:
391.                 raise TypeError("%s is not an aggregate expression" % alias)
392.             for expr in annotation.get_source_expressions():
393.                 if expr.contains_aggregate and isinstance(expr, Ref) and expr.refs in kwargs:
394.                     name = expr.refs
395.                     raise exceptions.FieldError(
396.                         "Cannot compute %s('%s'): '%s' is an aggregate"
397.                         % (annotation.name, name, name)
398.                     )
399.         return query.get_aggregation(self.db, kwargs)
400. 
401.     def count(self):
402.         """
403.         Perform a SELECT COUNT() and return the number of records as an
404.         integer.
405. 
406.         If the QuerySet is already fully cached, return the length of the
407.         cached results set to avoid multiple SELECT COUNT(*) calls.
408.         """
409.         if self._result_cache is not None:
410.             return len(self._result_cache)
411. 
412.         return self.query.get_count(using=self.db)
413. 
414.     def get(self, *args, **kwargs):
415.         """
416.         Perform the query and return a single object matching the given
417.         keyword arguments.
418.         """
419.         if self.query.combinator and (args or kwargs):
420.             raise NotSupportedError(
421.                 'Calling QuerySet.get(...) with filters after %s() is not '
422.                 'supported.' % self.query.combinator
423.             )
424.         clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
425.         if self.query.can_filter() and not self.query.distinct_fields:
426.             clone = clone.order_by()
427.         limit = None
428.         if not clone.query.select_for_update or connections[clone.db].features.supports_select_for_update_with_limit:
429.             limit = MAX_GET_RESULTS
430.             clone.query.set_limits(high=limit)
431.         num = len(clone)
432.         if num == 1:
433.             return clone._result_cache[0]
434.         if not num:
435.             raise self.model.DoesNotExist(
436.                 "%s matching query does not exist." %
437.                 self.model._meta.object_name
438.             )
439.         raise self.model.MultipleObjectsReturned(
440.             'get() returned more than one %s -- it returned %s!' % (
441.                 self.model._meta.object_name,
442.                 num if not limit or num < limit else 'more than %s' % (limit - 1),
443.             )
444.         )
445. 
446.     def create(self, **kwargs):
447.         """
448.         Create a new object with the given kwargs, saving it to the database
449.         and returning the created object.
450.         """
451.         obj = self.model(**kwargs)
452.         self._for_write = True
453.         obj.save(force_insert=True, using=self.db)
454.         return obj
455. 
456.     def _prepare_for_bulk_create(self, objs):
457.         for obj in objs:
458.             if obj.pk is None:
459.                 # Populate new PK values.
460.                 obj.pk = obj._meta.pk.get_pk_value_on_save(obj)
461.             obj._prepare_related_fields_for_save(operation_name='bulk_create')
462. 
463.     def bulk_create(self, objs, batch_size=None, ignore_conflicts=False):
464.         """
465.         Insert each of the instances into the database. Do *not* call
466.         save() on each of the instances, do not send any pre/post_save
467.         signals, and do not set the primary key attribute if it is an
468.         autoincrement field (except if features.can_return_rows_from_bulk_insert=True).
469.         Multi-table models are not supported.
470.         """
471.         # When you bulk insert you don't get the primary keys back (if it's an
472.         # autoincrement, except if can_return_rows_from_bulk_insert=True), so
473.         # you can't insert into the child tables which references this. There
474.         # are two workarounds:
475.         # 1) This could be implemented if you didn't have an autoincrement pk
476.         # 2) You could do it by doing O(n) normal inserts into the parent
477.         #    tables to get the primary keys back and then doing a single bulk
478.         #    insert into the childmost table.
479.         # We currently set the primary keys on the objects when using
480.         # PostgreSQL via the RETURNING ID clause. It should be possible for
481.         # Oracle as well, but the semantics for extracting the primary keys is
482.         # trickier so it's not done yet.
483.         assert batch_size is None or batch_size > 0
484.         # Check that the parents share the same concrete model with the our
485.         # model to detect the inheritance pattern ConcreteGrandParent ->
486.         # MultiTableParent -> ProxyChild. Simply checking self.model._meta.proxy
487.         # would not identify that case as involving multiple tables.
488.         for parent in self.model._meta.get_parent_list():
489.             if parent._meta.concrete_model is not self.model._meta.concrete_model:
490.                 raise ValueError("Can't bulk create a multi-table inherited model")
491.         if not objs:
492.             return objs
493.         self._for_write = True
494.         connection = connections[self.db]
495.         opts = self.model._meta
496.         fields = opts.concrete_fields
497.         objs = list(objs)
498.         self._prepare_for_bulk_create(objs)
499.         with transaction.atomic(using=self.db, savepoint=False):
500.             objs_with_pk, objs_without_pk = partition(lambda o: o.pk is None, objs)


File: django/db/models/query.py
Line number range: 501 - 1001
Content:
501.             if objs_with_pk:
502.                 returned_columns = self._batched_insert(
503.                     objs_with_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
504.                 )
505.                 for obj_with_pk, results in zip(objs_with_pk, returned_columns):
506.                     for result, field in zip(results, opts.db_returning_fields):
507.                         if field != opts.pk:
508.                             setattr(obj_with_pk, field.attname, result)
509.                 for obj_with_pk in objs_with_pk:
510.                     obj_with_pk._state.adding = False
511.                     obj_with_pk._state.db = self.db
512.             if objs_without_pk:
513.                 fields = [f for f in fields if not isinstance(f, AutoField)]
514.                 returned_columns = self._batched_insert(
515.                     objs_without_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
516.                 )
517.                 if connection.features.can_return_rows_from_bulk_insert and not ignore_conflicts:
518.                     assert len(returned_columns) == len(objs_without_pk)
519.                 for obj_without_pk, results in zip(objs_without_pk, returned_columns):
520.                     for result, field in zip(results, opts.db_returning_fields):
521.                         setattr(obj_without_pk, field.attname, result)
522.                     obj_without_pk._state.adding = False
523.                     obj_without_pk._state.db = self.db
524. 
525.         return objs
526. 
527.     def bulk_update(self, objs, fields, batch_size=None):
528.         """
529.         Update the given fields in each of the given objects in the database.
530.         """
531.         if batch_size is not None and batch_size < 0:
532.             raise ValueError('Batch size must be a positive integer.')
533.         if not fields:
534.             raise ValueError('Field names must be given to bulk_update().')
535.         objs = tuple(objs)
536.         if any(obj.pk is None for obj in objs):
537.             raise ValueError('All bulk_update() objects must have a primary key set.')
538.         fields = [self.model._meta.get_field(name) for name in fields]
539.         if any(not f.concrete or f.many_to_many for f in fields):
540.             raise ValueError('bulk_update() can only be used with concrete fields.')
541.         if any(f.primary_key for f in fields):
542.             raise ValueError('bulk_update() cannot be used with primary key fields.')
543.         if not objs:
544.             return
545.         # PK is used twice in the resulting update query, once in the filter
546.         # and once in the WHEN. Each field will also have one CAST.
547.         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
548.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
549.         requires_casting = connections[self.db].features.requires_casted_case_in_updates
550.         batches = (objs[i:i + batch_size] for i in range(0, len(objs), batch_size))
551.         updates = []
552.         for batch_objs in batches:
553.             update_kwargs = {}
554.             for field in fields:
555.                 when_statements = []
556.                 for obj in batch_objs:
557.                     attr = getattr(obj, field.attname)
558.                     if not isinstance(attr, Expression):
559.                         attr = Value(attr, output_field=field)
560.                     when_statements.append(When(pk=obj.pk, then=attr))
561.                 case_statement = Case(*when_statements, output_field=field)
562.                 if requires_casting:
563.                     case_statement = Cast(case_statement, output_field=field)
564.                 update_kwargs[field.attname] = case_statement
565.             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
566.         with transaction.atomic(using=self.db, savepoint=False):
567.             for pks, update_kwargs in updates:
568.                 self.filter(pk__in=pks).update(**update_kwargs)
569.     bulk_update.alters_data = True
570. 
571.     def get_or_create(self, defaults=None, **kwargs):
572.         """
573.         Look up an object with the given kwargs, creating one if necessary.
574.         Return a tuple of (object, created), where created is a boolean
575.         specifying whether an object was created.
576.         """
577.         # The get() needs to be targeted at the write database in order
578.         # to avoid potential transaction consistency problems.
579.         self._for_write = True
580.         try:
581.             return self.get(**kwargs), False
582.         except self.model.DoesNotExist:
583.             params = self._extract_model_params(defaults, **kwargs)
584.             # Try to create an object using passed params.
585.             try:
586.                 with transaction.atomic(using=self.db):
587.                     params = dict(resolve_callables(params))
588.                     return self.create(**params), True
589.             except IntegrityError:
590.                 try:
591.                     return self.get(**kwargs), False
592.                 except self.model.DoesNotExist:
593.                     pass
594.                 raise
595. 
596.     def update_or_create(self, defaults=None, **kwargs):
597.         """
598.         Look up an object with the given kwargs, updating one with defaults
599.         if it exists, otherwise create a new one.
600.         Return a tuple (object, created), where created is a boolean
601.         specifying whether an object was created.
602.         """
603.         defaults = defaults or {}
604.         self._for_write = True
605.         with transaction.atomic(using=self.db):
606.             # Lock the row so that a concurrent update is blocked until
607.             # update_or_create() has performed its save.
608.             obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
609.             if created:
610.                 return obj, created
611.             for k, v in resolve_callables(defaults):
612.                 setattr(obj, k, v)
613.             obj.save(using=self.db)
614.         return obj, False
615. 
616.     def _extract_model_params(self, defaults, **kwargs):
617.         """
618.         Prepare `params` for creating a model instance based on the given
619.         kwargs; for use by get_or_create().
620.         """
621.         defaults = defaults or {}
622.         params = {k: v for k, v in kwargs.items() if LOOKUP_SEP not in k}
623.         params.update(defaults)
624.         property_names = self.model._meta._property_names
625.         invalid_params = []
626.         for param in params:
627.             try:
628.                 self.model._meta.get_field(param)
629.             except exceptions.FieldDoesNotExist:
630.                 # It's okay to use a model's property if it has a setter.
631.                 if not (param in property_names and getattr(self.model, param).fset):
632.                     invalid_params.append(param)
633.         if invalid_params:
634.             raise exceptions.FieldError(
635.                 "Invalid field name(s) for model %s: '%s'." % (
636.                     self.model._meta.object_name,
637.                     "', '".join(sorted(invalid_params)),
638.                 ))
639.         return params
640. 
641.     def _earliest(self, *fields):
642.         """
643.         Return the earliest object according to fields (if given) or by the
644.         model's Meta.get_latest_by.
645.         """
646.         if fields:
647.             order_by = fields
648.         else:
649.             order_by = getattr(self.model._meta, 'get_latest_by')
650.             if order_by and not isinstance(order_by, (tuple, list)):
651.                 order_by = (order_by,)
652.         if order_by is None:
653.             raise ValueError(
654.                 "earliest() and latest() require either fields as positional "
655.                 "arguments or 'get_latest_by' in the model's Meta."
656.             )
657.         obj = self._chain()
658.         obj.query.set_limits(high=1)
659.         obj.query.clear_ordering(force_empty=True)
660.         obj.query.add_ordering(*order_by)
661.         return obj.get()
662. 
663.     def earliest(self, *fields):
664.         if self.query.is_sliced:
665.             raise TypeError('Cannot change a query once a slice has been taken.')
666.         return self._earliest(*fields)
667. 
668.     def latest(self, *fields):
669.         if self.query.is_sliced:
670.             raise TypeError('Cannot change a query once a slice has been taken.')
671.         return self.reverse()._earliest(*fields)
672. 
673.     def first(self):
674.         """Return the first object of a query or None if no match is found."""
675.         for obj in (self if self.ordered else self.order_by('pk'))[:1]:
676.             return obj
677. 
678.     def last(self):
679.         """Return the last object of a query or None if no match is found."""
680.         for obj in (self.reverse() if self.ordered else self.order_by('-pk'))[:1]:
681.             return obj
682. 
683.     def in_bulk(self, id_list=None, *, field_name='pk'):
684.         """
685.         Return a dictionary mapping each of the given IDs to the object with
686.         that ID. If `id_list` isn't provided, evaluate the entire QuerySet.
687.         """
688.         if self.query.is_sliced:
689.             raise TypeError("Cannot use 'limit' or 'offset' with in_bulk().")
690.         opts = self.model._meta
691.         unique_fields = [
692.             constraint.fields[0]
693.             for constraint in opts.total_unique_constraints
694.             if len(constraint.fields) == 1
695.         ]
696.         if (
697.             field_name != 'pk' and
698.             not opts.get_field(field_name).unique and
699.             field_name not in unique_fields and
700.             self.query.distinct_fields != (field_name,)
701.         ):
702.             raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
703.         if id_list is not None:
704.             if not id_list:
705.                 return {}
706.             filter_key = '{}__in'.format(field_name)
707.             batch_size = connections[self.db].features.max_query_params
708.             id_list = tuple(id_list)
709.             # If the database has a limit on the number of query parameters
710.             # (e.g. SQLite), retrieve objects in batches if necessary.
711.             if batch_size and batch_size < len(id_list):
712.                 qs = ()
713.                 for offset in range(0, len(id_list), batch_size):
714.                     batch = id_list[offset:offset + batch_size]
715.                     qs += tuple(self.filter(**{filter_key: batch}).order_by())
716.             else:
717.                 qs = self.filter(**{filter_key: id_list}).order_by()
718.         else:
719.             qs = self._chain()
720.         return {getattr(obj, field_name): obj for obj in qs}
721. 
722.     def delete(self):
723.         """Delete the records in the current QuerySet."""
724.         self._not_support_combined_queries('delete')
725.         if self.query.is_sliced:
726.             raise TypeError("Cannot use 'limit' or 'offset' with delete().")
727.         if self.query.distinct or self.query.distinct_fields:
728.             raise TypeError('Cannot call delete() after .distinct().')
729.         if self._fields is not None:
730.             raise TypeError("Cannot call delete() after .values() or .values_list()")
731. 
732.         del_query = self._chain()
733. 
734.         # The delete is actually 2 queries - one to find related objects,
735.         # and one to delete. Make sure that the discovery of related
736.         # objects is performed on the same database as the deletion.
737.         del_query._for_write = True
738. 
739.         # Disable non-supported fields.
740.         del_query.query.select_for_update = False
741.         del_query.query.select_related = False
742.         del_query.query.clear_ordering(force_empty=True)
743. 
744.         collector = Collector(using=del_query.db)
745.         collector.collect(del_query)
746.         deleted, _rows_count = collector.delete()
747. 
748.         # Clear the result cache, in case this QuerySet gets reused.
749.         self._result_cache = None
750.         return deleted, _rows_count
751. 
752.     delete.alters_data = True
753.     delete.queryset_only = True
754. 
755.     def _raw_delete(self, using):
756.         """
757.         Delete objects found from the given queryset in single direct SQL
758.         query. No signals are sent and there is no protection for cascades.
759.         """
760.         query = self.query.clone()
761.         query.__class__ = sql.DeleteQuery
762.         cursor = query.get_compiler(using).execute_sql(CURSOR)
763.         if cursor:
764.             with cursor:
765.                 return cursor.rowcount
766.         return 0
767.     _raw_delete.alters_data = True
768. 
769.     def update(self, **kwargs):
770.         """
771.         Update all elements in the current QuerySet, setting all the given
772.         fields to the appropriate values.
773.         """
774.         self._not_support_combined_queries('update')
775.         if self.query.is_sliced:
776.             raise TypeError('Cannot update a query once a slice has been taken.')
777.         self._for_write = True
778.         query = self.query.chain(sql.UpdateQuery)
779.         query.add_update_values(kwargs)
780.         # Clear any annotations so that they won't be present in subqueries.
781.         query.annotations = {}
782.         with transaction.mark_for_rollback_on_error(using=self.db):
783.             rows = query.get_compiler(self.db).execute_sql(CURSOR)
784.         self._result_cache = None
785.         return rows
786.     update.alters_data = True
787. 
788.     def _update(self, values):
789.         """
790.         A version of update() that accepts field objects instead of field names.
791.         Used primarily for model saving and not intended for use by general
792.         code (it requires too much poking around at model internals to be
793.         useful at that level).
794.         """
795.         if self.query.is_sliced:
796.             raise TypeError('Cannot update a query once a slice has been taken.')
797.         query = self.query.chain(sql.UpdateQuery)
798.         query.add_update_fields(values)
799.         # Clear any annotations so that they won't be present in subqueries.
800.         query.annotations = {}
801.         self._result_cache = None
802.         return query.get_compiler(self.db).execute_sql(CURSOR)
803.     _update.alters_data = True
804.     _update.queryset_only = False
805. 
806.     def exists(self):
807.         if self._result_cache is None:
808.             return self.query.has_results(using=self.db)
809.         return bool(self._result_cache)
810. 
811.     def contains(self, obj):
812.         """Return True if the queryset contains an object."""
813.         self._not_support_combined_queries('contains')
814.         if self._fields is not None:
815.             raise TypeError(
816.                 'Cannot call QuerySet.contains() after .values() or '
817.                 '.values_list().'
818.             )
819.         try:
820.             if obj._meta.concrete_model != self.model._meta.concrete_model:
821.                 return False
822.         except AttributeError:
823.             raise TypeError("'obj' must be a model instance.")
824.         if obj.pk is None:
825.             raise ValueError(
826.                 'QuerySet.contains() cannot be used on unsaved objects.'
827.             )
828.         if self._result_cache is not None:
829.             return obj in self._result_cache
830.         return self.filter(pk=obj.pk).exists()
831. 
832.     def _prefetch_related_objects(self):
833.         # This method can only be called once the result cache has been filled.
834.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
835.         self._prefetch_done = True
836. 
837.     def explain(self, *, format=None, **options):
838.         return self.query.explain(using=self.db, format=format, **options)
839. 
840.     ##################################################
841.     # PUBLIC METHODS THAT RETURN A QUERYSET SUBCLASS #
842.     ##################################################
843. 
844.     def raw(self, raw_query, params=(), translations=None, using=None):
845.         if using is None:
846.             using = self.db
847.         qs = RawQuerySet(raw_query, model=self.model, params=params, translations=translations, using=using)
848.         qs._prefetch_related_lookups = self._prefetch_related_lookups[:]
849.         return qs
850. 
851.     def _values(self, *fields, **expressions):
852.         clone = self._chain()
853.         if expressions:
854.             clone = clone.annotate(**expressions)
855.         clone._fields = fields
856.         clone.query.set_values(fields)
857.         return clone
858. 
859.     def values(self, *fields, **expressions):
860.         fields += tuple(expressions)
861.         clone = self._values(*fields, **expressions)
862.         clone._iterable_class = ValuesIterable
863.         return clone
864. 
865.     def values_list(self, *fields, flat=False, named=False):
866.         if flat and named:
867.             raise TypeError("'flat' and 'named' can't be used together.")
868.         if flat and len(fields) > 1:
869.             raise TypeError("'flat' is not valid when values_list is called with more than one field.")
870. 
871.         field_names = {f for f in fields if not hasattr(f, 'resolve_expression')}
872.         _fields = []
873.         expressions = {}
874.         counter = 1
875.         for field in fields:
876.             if hasattr(field, 'resolve_expression'):
877.                 field_id_prefix = getattr(field, 'default_alias', field.__class__.__name__.lower())
878.                 while True:
879.                     field_id = field_id_prefix + str(counter)
880.                     counter += 1
881.                     if field_id not in field_names:
882.                         break
883.                 expressions[field_id] = field
884.                 _fields.append(field_id)
885.             else:
886.                 _fields.append(field)
887. 
888.         clone = self._values(*_fields, **expressions)
889.         clone._iterable_class = (
890.             NamedValuesListIterable if named
891.             else FlatValuesListIterable if flat
892.             else ValuesListIterable
893.         )
894.         return clone
895. 
896.     def dates(self, field_name, kind, order='ASC'):
897.         """
898.         Return a list of date objects representing all available dates for
899.         the given field_name, scoped to 'kind'.
900.         """
901.         assert kind in ('year', 'month', 'week', 'day'), \
902.             "'kind' must be one of 'year', 'month', 'week', or 'day'."
903.         assert order in ('ASC', 'DESC'), \
904.             "'order' must be either 'ASC' or 'DESC'."
905.         return self.annotate(
906.             datefield=Trunc(field_name, kind, output_field=DateField()),
907.             plain_field=F(field_name)
908.         ).values_list(
909.             'datefield', flat=True
910.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datefield')
911. 
912.     def datetimes(self, field_name, kind, order='ASC', tzinfo=None, is_dst=None):
913.         """
914.         Return a list of datetime objects representing all available
915.         datetimes for the given field_name, scoped to 'kind'.
916.         """
917.         assert kind in ('year', 'month', 'week', 'day', 'hour', 'minute', 'second'), \
918.             "'kind' must be one of 'year', 'month', 'week', 'day', 'hour', 'minute', or 'second'."
919.         assert order in ('ASC', 'DESC'), \
920.             "'order' must be either 'ASC' or 'DESC'."
921.         if settings.USE_TZ:
922.             if tzinfo is None:
923.                 tzinfo = timezone.get_current_timezone()
924.         else:
925.             tzinfo = None
926.         return self.annotate(
927.             datetimefield=Trunc(
928.                 field_name,
929.                 kind,
930.                 output_field=DateTimeField(),
931.                 tzinfo=tzinfo,
932.                 is_dst=is_dst,
933.             ),
934.             plain_field=F(field_name)
935.         ).values_list(
936.             'datetimefield', flat=True
937.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datetimefield')
938. 
939.     def none(self):
940.         """Return an empty QuerySet."""
941.         clone = self._chain()
942.         clone.query.set_empty()
943.         return clone
944. 
945.     ##################################################################
946.     # PUBLIC METHODS THAT ALTER ATTRIBUTES AND RETURN A NEW QUERYSET #
947.     ##################################################################
948. 
949.     def all(self):
950.         """
951.         Return a new QuerySet that is a copy of the current one. This allows a
952.         QuerySet to proxy for a model manager in some cases.
953.         """
954.         return self._chain()
955. 
956.     def filter(self, *args, **kwargs):
957.         """
958.         Return a new QuerySet instance with the args ANDed to the existing
959.         set.
960.         """
961.         self._not_support_combined_queries('filter')
962.         return self._filter_or_exclude(False, args, kwargs)
963. 
964.     def exclude(self, *args, **kwargs):
965.         """
966.         Return a new QuerySet instance with NOT (args) ANDed to the existing
967.         set.
968.         """
969.         self._not_support_combined_queries('exclude')
970.         return self._filter_or_exclude(True, args, kwargs)
971. 
972.     def _filter_or_exclude(self, negate, args, kwargs):
973.         if (args or kwargs) and self.query.is_sliced:
974.             raise TypeError('Cannot filter a query once a slice has been taken.')
975.         clone = self._chain()
976.         if self._defer_next_filter:
977.             self._defer_next_filter = False
978.             clone._deferred_filter = negate, args, kwargs
979.         else:
980.             clone._filter_or_exclude_inplace(negate, args, kwargs)
981.         return clone
982. 
983.     def _filter_or_exclude_inplace(self, negate, args, kwargs):
984.         if negate:
985.             self._query.add_q(~Q(*args, **kwargs))
986.         else:
987.             self._query.add_q(Q(*args, **kwargs))
988. 
989.     def complex_filter(self, filter_obj):
990.         """
991.         Return a new QuerySet instance with filter_obj added to the filters.
992. 
993.         filter_obj can be a Q object or a dictionary of keyword lookup
994.         arguments.
995. 
996.         This exists to support framework features such as 'limit_choices_to',
997.         and usually it will be more natural to use other methods.
998.         """
999.         if isinstance(filter_obj, Q):
1000.             clone = self._chain()
1001.             clone.query.add_q(filter_obj)


File: django/db/models/query.py
Line number range: 1002 - 1501
Content:
1002.             return clone
1003.         else:
1004.             return self._filter_or_exclude(False, args=(), kwargs=filter_obj)
1005. 
1006.     def _combinator_query(self, combinator, *other_qs, all=False):
1007.         # Clone the query to inherit the select list and everything
1008.         clone = self._chain()
1009.         # Clear limits and ordering so they can be reapplied
1010.         clone.query.clear_ordering(True)
1011.         clone.query.clear_limits()
1012.         clone.query.combined_queries = (self.query,) + tuple(qs.query for qs in other_qs)
1013.         clone.query.combinator = combinator
1014.         clone.query.combinator_all = all
1015.         return clone
1016. 
1017.     def union(self, *other_qs, all=False):
1018.         # If the query is an EmptyQuerySet, combine all nonempty querysets.
1019.         if isinstance(self, EmptyQuerySet):
1020.             qs = [q for q in other_qs if not isinstance(q, EmptyQuerySet)]
1021.             if not qs:
1022.                 return self
1023.             if len(qs) == 1:
1024.                 return qs[0]
1025.             return qs[0]._combinator_query('union', *qs[1:], all=all)
1026.         return self._combinator_query('union', *other_qs, all=all)
1027. 
1028.     def intersection(self, *other_qs):
1029.         # If any query is an EmptyQuerySet, return it.
1030.         if isinstance(self, EmptyQuerySet):
1031.             return self
1032.         for other in other_qs:
1033.             if isinstance(other, EmptyQuerySet):
1034.                 return other
1035.         return self._combinator_query('intersection', *other_qs)
1036. 
1037.     def difference(self, *other_qs):
1038.         # If the query is an EmptyQuerySet, return it.
1039.         if isinstance(self, EmptyQuerySet):
1040.             return self
1041.         return self._combinator_query('difference', *other_qs)
1042. 
1043.     def select_for_update(self, nowait=False, skip_locked=False, of=(), no_key=False):
1044.         """
1045.         Return a new QuerySet instance that will select objects with a
1046.         FOR UPDATE lock.
1047.         """
1048.         if nowait and skip_locked:
1049.             raise ValueError('The nowait option cannot be used with skip_locked.')
1050.         obj = self._chain()
1051.         obj._for_write = True
1052.         obj.query.select_for_update = True
1053.         obj.query.select_for_update_nowait = nowait
1054.         obj.query.select_for_update_skip_locked = skip_locked
1055.         obj.query.select_for_update_of = of
1056.         obj.query.select_for_no_key_update = no_key
1057.         return obj
1058. 
1059.     def select_related(self, *fields):
1060.         """
1061.         Return a new QuerySet instance that will select related objects.
1062. 
1063.         If fields are specified, they must be ForeignKey fields and only those
1064.         related objects are included in the selection.
1065. 
1066.         If select_related(None) is called, clear the list.
1067.         """
1068.         self._not_support_combined_queries('select_related')
1069.         if self._fields is not None:
1070.             raise TypeError("Cannot call select_related() after .values() or .values_list()")
1071. 
1072.         obj = self._chain()
1073.         if fields == (None,):
1074.             obj.query.select_related = False
1075.         elif fields:
1076.             obj.query.add_select_related(fields)
1077.         else:
1078.             obj.query.select_related = True
1079.         return obj
1080. 
1081.     def prefetch_related(self, *lookups):
1082.         """
1083.         Return a new QuerySet instance that will prefetch the specified
1084.         Many-To-One and Many-To-Many related objects when the QuerySet is
1085.         evaluated.
1086. 
1087.         When prefetch_related() is called more than once, append to the list of
1088.         prefetch lookups. If prefetch_related(None) is called, clear the list.
1089.         """
1090.         self._not_support_combined_queries('prefetch_related')
1091.         clone = self._chain()
1092.         if lookups == (None,):
1093.             clone._prefetch_related_lookups = ()
1094.         else:
1095.             for lookup in lookups:
1096.                 if isinstance(lookup, Prefetch):
1097.                     lookup = lookup.prefetch_to
1098.                 lookup = lookup.split(LOOKUP_SEP, 1)[0]
1099.                 if lookup in self.query._filtered_relations:
1100.                     raise ValueError('prefetch_related() is not supported with FilteredRelation.')
1101.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1102.         return clone
1103. 
1104.     def annotate(self, *args, **kwargs):
1105.         """
1106.         Return a query set in which the returned objects have been annotated
1107.         with extra data or aggregations.
1108.         """
1109.         self._not_support_combined_queries('annotate')
1110.         return self._annotate(args, kwargs, select=True)
1111. 
1112.     def alias(self, *args, **kwargs):
1113.         """
1114.         Return a query set with added aliases for extra data or aggregations.
1115.         """
1116.         self._not_support_combined_queries('alias')
1117.         return self._annotate(args, kwargs, select=False)
1118. 
1119.     def _annotate(self, args, kwargs, select=True):
1120.         self._validate_values_are_expressions(args + tuple(kwargs.values()), method_name='annotate')
1121.         annotations = {}
1122.         for arg in args:
1123.             # The default_alias property may raise a TypeError.
1124.             try:
1125.                 if arg.default_alias in kwargs:
1126.                     raise ValueError("The named annotation '%s' conflicts with the "
1127.                                      "default name for another annotation."
1128.                                      % arg.default_alias)
1129.             except TypeError:
1130.                 raise TypeError("Complex annotations require an alias")
1131.             annotations[arg.default_alias] = arg
1132.         annotations.update(kwargs)
1133. 
1134.         clone = self._chain()
1135.         names = self._fields
1136.         if names is None:
1137.             names = set(chain.from_iterable(
1138.                 (field.name, field.attname) if hasattr(field, 'attname') else (field.name,)
1139.                 for field in self.model._meta.get_fields()
1140.             ))
1141. 
1142.         for alias, annotation in annotations.items():
1143.             if alias in names:
1144.                 raise ValueError("The annotation '%s' conflicts with a field on "
1145.                                  "the model." % alias)
1146.             if isinstance(annotation, FilteredRelation):
1147.                 clone.query.add_filtered_relation(annotation, alias)
1148.             else:
1149.                 clone.query.add_annotation(
1150.                     annotation, alias, is_summary=False, select=select,
1151.                 )
1152.         for alias, annotation in clone.query.annotations.items():
1153.             if alias in annotations and annotation.contains_aggregate:
1154.                 if clone._fields is None:
1155.                     clone.query.group_by = True
1156.                 else:
1157.                     clone.query.set_group_by()
1158.                 break
1159. 
1160.         return clone
1161. 
1162.     def order_by(self, *field_names):
1163.         """Return a new QuerySet instance with the ordering changed."""
1164.         if self.query.is_sliced:
1165.             raise TypeError('Cannot reorder a query once a slice has been taken.')
1166.         obj = self._chain()
1167.         obj.query.clear_ordering(force_empty=False)
1168.         obj.query.add_ordering(*field_names)
1169.         return obj
1170. 
1171.     def distinct(self, *field_names):
1172.         """
1173.         Return a new QuerySet instance that will select only distinct results.
1174.         """
1175.         self._not_support_combined_queries('distinct')
1176.         if self.query.is_sliced:
1177.             raise TypeError('Cannot create distinct fields once a slice has been taken.')
1178.         obj = self._chain()
1179.         obj.query.add_distinct_fields(*field_names)
1180.         return obj
1181. 
1182.     def extra(self, select=None, where=None, params=None, tables=None,
1183.               order_by=None, select_params=None):
1184.         """Add extra SQL fragments to the query."""
1185.         self._not_support_combined_queries('extra')
1186.         if self.query.is_sliced:
1187.             raise TypeError('Cannot change a query once a slice has been taken.')
1188.         clone = self._chain()
1189.         clone.query.add_extra(select, select_params, where, params, tables, order_by)
1190.         return clone
1191. 
1192.     def reverse(self):
1193.         """Reverse the ordering of the QuerySet."""
1194.         if self.query.is_sliced:
1195.             raise TypeError('Cannot reverse a query once a slice has been taken.')
1196.         clone = self._chain()
1197.         clone.query.standard_ordering = not clone.query.standard_ordering
1198.         return clone
1199. 
1200.     def defer(self, *fields):
1201.         """
1202.         Defer the loading of data for certain fields until they are accessed.
1203.         Add the set of deferred fields to any existing set of deferred fields.
1204.         The only exception to this is if None is passed in as the only
1205.         parameter, in which case removal all deferrals.
1206.         """
1207.         self._not_support_combined_queries('defer')
1208.         if self._fields is not None:
1209.             raise TypeError("Cannot call defer() after .values() or .values_list()")
1210.         clone = self._chain()
1211.         if fields == (None,):
1212.             clone.query.clear_deferred_loading()
1213.         else:
1214.             clone.query.add_deferred_loading(fields)
1215.         return clone
1216. 
1217.     def only(self, *fields):
1218.         """
1219.         Essentially, the opposite of defer(). Only the fields passed into this
1220.         method and that are not already specified as deferred are loaded
1221.         immediately when the queryset is evaluated.
1222.         """
1223.         self._not_support_combined_queries('only')
1224.         if self._fields is not None:
1225.             raise TypeError("Cannot call only() after .values() or .values_list()")
1226.         if fields == (None,):
1227.             # Can only pass None to defer(), not only(), as the rest option.
1228.             # That won't stop people trying to do this, so let's be explicit.
1229.             raise TypeError("Cannot pass None as an argument to only().")
1230.         for field in fields:
1231.             field = field.split(LOOKUP_SEP, 1)[0]
1232.             if field in self.query._filtered_relations:
1233.                 raise ValueError('only() is not supported with FilteredRelation.')
1234.         clone = self._chain()
1235.         clone.query.add_immediate_loading(fields)
1236.         return clone
1237. 
1238.     def using(self, alias):
1239.         """Select which database this QuerySet should execute against."""
1240.         clone = self._chain()
1241.         clone._db = alias
1242.         return clone
1243. 
1244.     ###################################
1245.     # PUBLIC INTROSPECTION ATTRIBUTES #
1246.     ###################################
1247. 
1248.     @property
1249.     def ordered(self):
1250.         """
1251.         Return True if the QuerySet is ordered -- i.e. has an order_by()
1252.         clause or a default ordering on the model (or is empty).
1253.         """
1254.         if isinstance(self, EmptyQuerySet):
1255.             return True
1256.         if self.query.extra_order_by or self.query.order_by:
1257.             return True
1258.         elif (
1259.             self.query.default_ordering and
1260.             self.query.get_meta().ordering and
1261.             # A default ordering doesn't affect GROUP BY queries.
1262.             not self.query.group_by
1263.         ):
1264.             return True
1265.         else:
1266.             return False
1267. 
1268.     @property
1269.     def db(self):
1270.         """Return the database used if this query is executed now."""
1271.         if self._for_write:
1272.             return self._db or router.db_for_write(self.model, **self._hints)
1273.         return self._db or router.db_for_read(self.model, **self._hints)
1274. 
1275.     ###################
1276.     # PRIVATE METHODS #
1277.     ###################
1278. 
1279.     def _insert(self, objs, fields, returning_fields=None, raw=False, using=None, ignore_conflicts=False):
1280.         """
1281.         Insert a new record for the given model. This provides an interface to
1282.         the InsertQuery class and is how Model.save() is implemented.
1283.         """
1284.         self._for_write = True
1285.         if using is None:
1286.             using = self.db
1287.         query = sql.InsertQuery(self.model, ignore_conflicts=ignore_conflicts)
1288.         query.insert_values(fields, objs, raw=raw)
1289.         return query.get_compiler(using=using).execute_sql(returning_fields)
1290.     _insert.alters_data = True
1291.     _insert.queryset_only = False
1292. 
1293.     def _batched_insert(self, objs, fields, batch_size, ignore_conflicts=False):
1294.         """
1295.         Helper method for bulk_create() to insert objs one batch at a time.
1296.         """
1297.         if ignore_conflicts and not connections[self.db].features.supports_ignore_conflicts:
1298.             raise NotSupportedError('This database backend does not support ignoring conflicts.')
1299.         ops = connections[self.db].ops
1300.         max_batch_size = max(ops.bulk_batch_size(fields, objs), 1)
1301.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
1302.         inserted_rows = []
1303.         bulk_return = connections[self.db].features.can_return_rows_from_bulk_insert
1304.         for item in [objs[i:i + batch_size] for i in range(0, len(objs), batch_size)]:
1305.             if bulk_return and not ignore_conflicts:
1306.                 inserted_rows.extend(self._insert(
1307.                     item, fields=fields, using=self.db,
1308.                     returning_fields=self.model._meta.db_returning_fields,
1309.                     ignore_conflicts=ignore_conflicts,
1310.                 ))
1311.             else:
1312.                 self._insert(item, fields=fields, using=self.db, ignore_conflicts=ignore_conflicts)
1313.         return inserted_rows
1314. 
1315.     def _chain(self, **kwargs):
1316.         """
1317.         Return a copy of the current QuerySet that's ready for another
1318.         operation.
1319.         """
1320.         obj = self._clone()
1321.         if obj._sticky_filter:
1322.             obj.query.filter_is_sticky = True
1323.             obj._sticky_filter = False
1324.         obj.__dict__.update(kwargs)
1325.         return obj
1326. 
1327.     def _clone(self):
1328.         """
1329.         Return a copy of the current QuerySet. A lightweight alternative
1330.         to deepcopy().
1331.         """
1332.         c = self.__class__(model=self.model, query=self.query.chain(), using=self._db, hints=self._hints)
1333.         c._sticky_filter = self._sticky_filter
1334.         c._for_write = self._for_write
1335.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1336.         c._known_related_objects = self._known_related_objects
1337.         c._iterable_class = self._iterable_class
1338.         c._fields = self._fields
1339.         return c
1340. 
1341.     def _fetch_all(self):
1342.         if self._result_cache is None:
1343.             self._result_cache = list(self._iterable_class(self))
1344.         if self._prefetch_related_lookups and not self._prefetch_done:
1345.             self._prefetch_related_objects()
1346. 
1347.     def _next_is_sticky(self):
1348.         """
1349.         Indicate that the next filter call and the one following that should
1350.         be treated as a single filter. This is only important when it comes to
1351.         determining when to reuse tables for many-to-many filters. Required so
1352.         that we can filter naturally on the results of related managers.
1353. 
1354.         This doesn't return a clone of the current QuerySet (it returns
1355.         "self"). The method is only used internally and should be immediately
1356.         followed by a filter() that does create a clone.
1357.         """
1358.         self._sticky_filter = True
1359.         return self
1360. 
1361.     def _merge_sanity_check(self, other):
1362.         """Check that two QuerySet classes may be merged."""
1363.         if self._fields is not None and (
1364.                 set(self.query.values_select) != set(other.query.values_select) or
1365.                 set(self.query.extra_select) != set(other.query.extra_select) or
1366.                 set(self.query.annotation_select) != set(other.query.annotation_select)):
1367.             raise TypeError(
1368.                 "Merging '%s' classes must involve the same values in each case."
1369.                 % self.__class__.__name__
1370.             )
1371. 
1372.     def _merge_known_related_objects(self, other):
1373.         """
1374.         Keep track of all known related objects from either QuerySet instance.
1375.         """
1376.         for field, objects in other._known_related_objects.items():
1377.             self._known_related_objects.setdefault(field, {}).update(objects)
1378. 
1379.     def resolve_expression(self, *args, **kwargs):
1380.         if self._fields and len(self._fields) > 1:
1381.             # values() queryset can only be used as nested queries
1382.             # if they are set up to select only a single field.
1383.             raise TypeError('Cannot use multi-field values as a filter value.')
1384.         query = self.query.resolve_expression(*args, **kwargs)
1385.         query._db = self._db
1386.         return query
1387.     resolve_expression.queryset_only = True
1388. 
1389.     def _add_hints(self, **hints):
1390.         """
1391.         Update hinting information for use by routers. Add new key/values or
1392.         overwrite existing key/values.
1393.         """
1394.         self._hints.update(hints)
1395. 
1396.     def _has_filters(self):
1397.         """
1398.         Check if this QuerySet has any filtering going on. This isn't
1399.         equivalent with checking if all objects are present in results, for
1400.         example, qs[1:]._has_filters() -> False.
1401.         """
1402.         return self.query.has_filters()
1403. 
1404.     @staticmethod
1405.     def _validate_values_are_expressions(values, method_name):
1406.         invalid_args = sorted(str(arg) for arg in values if not hasattr(arg, 'resolve_expression'))
1407.         if invalid_args:
1408.             raise TypeError(
1409.                 'QuerySet.%s() received non-expression(s): %s.' % (
1410.                     method_name,
1411.                     ', '.join(invalid_args),
1412.                 )
1413.             )
1414. 
1415.     def _not_support_combined_queries(self, operation_name):
1416.         if self.query.combinator:
1417.             raise NotSupportedError(
1418.                 'Calling QuerySet.%s() after %s() is not supported.'
1419.                 % (operation_name, self.query.combinator)
1420.             )
1421. 
1422. 
1423. class InstanceCheckMeta(type):
1424.     def __instancecheck__(self, instance):
1425.         return isinstance(instance, QuerySet) and instance.query.is_empty()
1426. 
1427. 
1428. class EmptyQuerySet(metaclass=InstanceCheckMeta):
1429.     """
1430.     Marker class to checking if a queryset is empty by .none():
1431.         isinstance(qs.none(), EmptyQuerySet) -> True
1432.     """
1433. 
1434.     def __init__(self, *args, **kwargs):
1435.         raise TypeError("EmptyQuerySet can't be instantiated")
1436. 
1437. 
1438. class RawQuerySet:
1439.     """
1440.     Provide an iterator which converts the results of raw SQL queries into
1441.     annotated model instances.
1442.     """
1443.     def __init__(self, raw_query, model=None, query=None, params=(),
1444.                  translations=None, using=None, hints=None):
1445.         self.raw_query = raw_query
1446.         self.model = model
1447.         self._db = using
1448.         self._hints = hints or {}
1449.         self.query = query or sql.RawQuery(sql=raw_query, using=self.db, params=params)
1450.         self.params = params
1451.         self.translations = translations or {}
1452.         self._result_cache = None
1453.         self._prefetch_related_lookups = ()
1454.         self._prefetch_done = False
1455. 
1456.     def resolve_model_init_order(self):
1457.         """Resolve the init field names and value positions."""
1458.         converter = connections[self.db].introspection.identifier_converter
1459.         model_init_fields = [f for f in self.model._meta.fields if converter(f.column) in self.columns]
1460.         annotation_fields = [(column, pos) for pos, column in enumerate(self.columns)
1461.                              if column not in self.model_fields]
1462.         model_init_order = [self.columns.index(converter(f.column)) for f in model_init_fields]
1463.         model_init_names = [f.attname for f in model_init_fields]
1464.         return model_init_names, model_init_order, annotation_fields
1465. 
1466.     def prefetch_related(self, *lookups):
1467.         """Same as QuerySet.prefetch_related()"""
1468.         clone = self._clone()
1469.         if lookups == (None,):
1470.             clone._prefetch_related_lookups = ()
1471.         else:
1472.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1473.         return clone
1474. 
1475.     def _prefetch_related_objects(self):
1476.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
1477.         self._prefetch_done = True
1478. 
1479.     def _clone(self):
1480.         """Same as QuerySet._clone()"""
1481.         c = self.__class__(
1482.             self.raw_query, model=self.model, query=self.query, params=self.params,
1483.             translations=self.translations, using=self._db, hints=self._hints
1484.         )
1485.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1486.         return c
1487. 
1488.     def _fetch_all(self):
1489.         if self._result_cache is None:
1490.             self._result_cache = list(self.iterator())
1491.         if self._prefetch_related_lookups and not self._prefetch_done:
1492.             self._prefetch_related_objects()
1493. 
1494.     def __len__(self):
1495.         self._fetch_all()
1496.         return len(self._result_cache)
1497. 
1498.     def __bool__(self):
1499.         self._fetch_all()
1500.         return bool(self._result_cache)


File: django/db/models/query.py
Line number range: 1502 - 2001
Content:
1502.     def __iter__(self):
1503.         self._fetch_all()
1504.         return iter(self._result_cache)
1505. 
1506.     def iterator(self):
1507.         # Cache some things for performance reasons outside the loop.
1508.         db = self.db
1509.         compiler = connections[db].ops.compiler('SQLCompiler')(
1510.             self.query, connections[db], db
1511.         )
1512. 
1513.         query = iter(self.query)
1514. 
1515.         try:
1516.             model_init_names, model_init_pos, annotation_fields = self.resolve_model_init_order()
1517.             if self.model._meta.pk.attname not in model_init_names:
1518.                 raise exceptions.FieldDoesNotExist(
1519.                     'Raw query must include the primary key'
1520.                 )
1521.             model_cls = self.model
1522.             fields = [self.model_fields.get(c) for c in self.columns]
1523.             converters = compiler.get_converters([
1524.                 f.get_col(f.model._meta.db_table) if f else None for f in fields
1525.             ])
1526.             if converters:
1527.                 query = compiler.apply_converters(query, converters)
1528.             for values in query:
1529.                 # Associate fields to values
1530.                 model_init_values = [values[pos] for pos in model_init_pos]
1531.                 instance = model_cls.from_db(db, model_init_names, model_init_values)
1532.                 if annotation_fields:
1533.                     for column, pos in annotation_fields:
1534.                         setattr(instance, column, values[pos])
1535.                 yield instance
1536.         finally:
1537.             # Done iterating the Query. If it has its own cursor, close it.
1538.             if hasattr(self.query, 'cursor') and self.query.cursor:
1539.                 self.query.cursor.close()
1540. 
1541.     def __repr__(self):
1542.         return "<%s: %s>" % (self.__class__.__name__, self.query)
1543. 
1544.     def __getitem__(self, k):
1545.         return list(self)[k]
1546. 
1547.     @property
1548.     def db(self):
1549.         """Return the database used if this query is executed now."""
1550.         return self._db or router.db_for_read(self.model, **self._hints)
1551. 
1552.     def using(self, alias):
1553.         """Select the database this RawQuerySet should execute against."""
1554.         return RawQuerySet(
1555.             self.raw_query, model=self.model,
1556.             query=self.query.chain(using=alias),
1557.             params=self.params, translations=self.translations,
1558.             using=alias,
1559.         )
1560. 
1561.     @cached_property
1562.     def columns(self):
1563.         """
1564.         A list of model field names in the order they'll appear in the
1565.         query results.
1566.         """
1567.         columns = self.query.get_columns()
1568.         # Adjust any column names which don't match field names
1569.         for (query_name, model_name) in self.translations.items():
1570.             # Ignore translations for nonexistent column names
1571.             try:
1572.                 index = columns.index(query_name)
1573.             except ValueError:
1574.                 pass
1575.             else:
1576.                 columns[index] = model_name
1577.         return columns
1578. 
1579.     @cached_property
1580.     def model_fields(self):
1581.         """A dict mapping column names to model field names."""
1582.         converter = connections[self.db].introspection.identifier_converter
1583.         model_fields = {}
1584.         for field in self.model._meta.fields:
1585.             name, column = field.get_attname_column()
1586.             model_fields[converter(column)] = field
1587.         return model_fields
1588. 
1589. 
1590. class Prefetch:
1591.     def __init__(self, lookup, queryset=None, to_attr=None):
1592.         # `prefetch_through` is the path we traverse to perform the prefetch.
1593.         self.prefetch_through = lookup
1594.         # `prefetch_to` is the path to the attribute that stores the result.
1595.         self.prefetch_to = lookup
1596.         if queryset is not None and (
1597.             isinstance(queryset, RawQuerySet) or (
1598.                 hasattr(queryset, '_iterable_class') and
1599.                 not issubclass(queryset._iterable_class, ModelIterable)
1600.             )
1601.         ):
1602.             raise ValueError(
1603.                 'Prefetch querysets cannot use raw(), values(), and '
1604.                 'values_list().'
1605.             )
1606.         if to_attr:
1607.             self.prefetch_to = LOOKUP_SEP.join(lookup.split(LOOKUP_SEP)[:-1] + [to_attr])
1608. 
1609.         self.queryset = queryset
1610.         self.to_attr = to_attr
1611. 
1612.     def __getstate__(self):
1613.         obj_dict = self.__dict__.copy()
1614.         if self.queryset is not None:
1615.             # Prevent the QuerySet from being evaluated
1616.             obj_dict['queryset'] = self.queryset._chain(
1617.                 _result_cache=[],
1618.                 _prefetch_done=True,
1619.             )
1620.         return obj_dict
1621. 
1622.     def add_prefix(self, prefix):
1623.         self.prefetch_through = prefix + LOOKUP_SEP + self.prefetch_through
1624.         self.prefetch_to = prefix + LOOKUP_SEP + self.prefetch_to
1625. 
1626.     def get_current_prefetch_to(self, level):
1627.         return LOOKUP_SEP.join(self.prefetch_to.split(LOOKUP_SEP)[:level + 1])
1628. 
1629.     def get_current_to_attr(self, level):
1630.         parts = self.prefetch_to.split(LOOKUP_SEP)
1631.         to_attr = parts[level]
1632.         as_attr = self.to_attr and level == len(parts) - 1
1633.         return to_attr, as_attr
1634. 
1635.     def get_current_queryset(self, level):
1636.         if self.get_current_prefetch_to(level) == self.prefetch_to:
1637.             return self.queryset
1638.         return None
1639. 
1640.     def __eq__(self, other):
1641.         if not isinstance(other, Prefetch):
1642.             return NotImplemented
1643.         return self.prefetch_to == other.prefetch_to
1644. 
1645.     def __hash__(self):
1646.         return hash((self.__class__, self.prefetch_to))
1647. 
1648. 
1649. def normalize_prefetch_lookups(lookups, prefix=None):
1650.     """Normalize lookups into Prefetch objects."""
1651.     ret = []
1652.     for lookup in lookups:
1653.         if not isinstance(lookup, Prefetch):
1654.             lookup = Prefetch(lookup)
1655.         if prefix:
1656.             lookup.add_prefix(prefix)
1657.         ret.append(lookup)
1658.     return ret
1659. 
1660. 
1661. def prefetch_related_objects(model_instances, *related_lookups):
1662.     """
1663.     Populate prefetched object caches for a list of model instances based on
1664.     the lookups/Prefetch instances given.
1665.     """
1666.     if not model_instances:
1667.         return  # nothing to do
1668. 
1669.     # We need to be able to dynamically add to the list of prefetch_related
1670.     # lookups that we look up (see below).  So we need some book keeping to
1671.     # ensure we don't do duplicate work.
1672.     done_queries = {}    # dictionary of things like 'foo__bar': [results]
1673. 
1674.     auto_lookups = set()  # we add to this as we go through.
1675.     followed_descriptors = set()  # recursion protection
1676. 
1677.     all_lookups = normalize_prefetch_lookups(reversed(related_lookups))
1678.     while all_lookups:
1679.         lookup = all_lookups.pop()
1680.         if lookup.prefetch_to in done_queries:
1681.             if lookup.queryset is not None:
1682.                 raise ValueError("'%s' lookup was already seen with a different queryset. "
1683.                                  "You may need to adjust the ordering of your lookups." % lookup.prefetch_to)
1684. 
1685.             continue
1686. 
1687.         # Top level, the list of objects to decorate is the result cache
1688.         # from the primary QuerySet. It won't be for deeper levels.
1689.         obj_list = model_instances
1690. 
1691.         through_attrs = lookup.prefetch_through.split(LOOKUP_SEP)
1692.         for level, through_attr in enumerate(through_attrs):
1693.             # Prepare main instances
1694.             if not obj_list:
1695.                 break
1696. 
1697.             prefetch_to = lookup.get_current_prefetch_to(level)
1698.             if prefetch_to in done_queries:
1699.                 # Skip any prefetching, and any object preparation
1700.                 obj_list = done_queries[prefetch_to]
1701.                 continue
1702. 
1703.             # Prepare objects:
1704.             good_objects = True
1705.             for obj in obj_list:
1706.                 # Since prefetching can re-use instances, it is possible to have
1707.                 # the same instance multiple times in obj_list, so obj might
1708.                 # already be prepared.
1709.                 if not hasattr(obj, '_prefetched_objects_cache'):
1710.                     try:
1711.                         obj._prefetched_objects_cache = {}
1712.                     except (AttributeError, TypeError):
1713.                         # Must be an immutable object from
1714.                         # values_list(flat=True), for example (TypeError) or
1715.                         # a QuerySet subclass that isn't returning Model
1716.                         # instances (AttributeError), either in Django or a 3rd
1717.                         # party. prefetch_related() doesn't make sense, so quit.
1718.                         good_objects = False
1719.                         break
1720.             if not good_objects:
1721.                 break
1722. 
1723.             # Descend down tree
1724. 
1725.             # We assume that objects retrieved are homogeneous (which is the premise
1726.             # of prefetch_related), so what applies to first object applies to all.
1727.             first_obj = obj_list[0]
1728.             to_attr = lookup.get_current_to_attr(level)[0]
1729.             prefetcher, descriptor, attr_found, is_fetched = get_prefetcher(first_obj, through_attr, to_attr)
1730. 
1731.             if not attr_found:
1732.                 raise AttributeError("Cannot find '%s' on %s object, '%s' is an invalid "
1733.                                      "parameter to prefetch_related()" %
1734.                                      (through_attr, first_obj.__class__.__name__, lookup.prefetch_through))
1735. 
1736.             if level == len(through_attrs) - 1 and prefetcher is None:
1737.                 # Last one, this *must* resolve to something that supports
1738.                 # prefetching, otherwise there is no point adding it and the
1739.                 # developer asking for it has made a mistake.
1740.                 raise ValueError("'%s' does not resolve to an item that supports "
1741.                                  "prefetching - this is an invalid parameter to "
1742.                                  "prefetch_related()." % lookup.prefetch_through)
1743. 
1744.             obj_to_fetch = None
1745.             if prefetcher is not None:
1746.                 obj_to_fetch = [obj for obj in obj_list if not is_fetched(obj)]
1747. 
1748.             if obj_to_fetch:
1749.                 obj_list, additional_lookups = prefetch_one_level(
1750.                     obj_to_fetch,
1751.                     prefetcher,
1752.                     lookup,
1753.                     level,
1754.                 )
1755.                 # We need to ensure we don't keep adding lookups from the
1756.                 # same relationships to stop infinite recursion. So, if we
1757.                 # are already on an automatically added lookup, don't add
1758.                 # the new lookups from relationships we've seen already.
1759.                 if not (prefetch_to in done_queries and lookup in auto_lookups and descriptor in followed_descriptors):
1760.                     done_queries[prefetch_to] = obj_list
1761.                     new_lookups = normalize_prefetch_lookups(reversed(additional_lookups), prefetch_to)
1762.                     auto_lookups.update(new_lookups)
1763.                     all_lookups.extend(new_lookups)
1764.                 followed_descriptors.add(descriptor)
1765.             else:
1766.                 # Either a singly related object that has already been fetched
1767.                 # (e.g. via select_related), or hopefully some other property
1768.                 # that doesn't support prefetching but needs to be traversed.
1769. 
1770.                 # We replace the current list of parent objects with the list
1771.                 # of related objects, filtering out empty or missing values so
1772.                 # that we can continue with nullable or reverse relations.
1773.                 new_obj_list = []
1774.                 for obj in obj_list:
1775.                     if through_attr in getattr(obj, '_prefetched_objects_cache', ()):
1776.                         # If related objects have been prefetched, use the
1777.                         # cache rather than the object's through_attr.
1778.                         new_obj = list(obj._prefetched_objects_cache.get(through_attr))
1779.                     else:
1780.                         try:
1781.                             new_obj = getattr(obj, through_attr)
1782.                         except exceptions.ObjectDoesNotExist:
1783.                             continue
1784.                     if new_obj is None:
1785.                         continue
1786.                     # We special-case `list` rather than something more generic
1787.                     # like `Iterable` because we don't want to accidentally match
1788.                     # user models that define __iter__.
1789.                     if isinstance(new_obj, list):
1790.                         new_obj_list.extend(new_obj)
1791.                     else:
1792.                         new_obj_list.append(new_obj)
1793.                 obj_list = new_obj_list
1794. 
1795. 
1796. def get_prefetcher(instance, through_attr, to_attr):
1797.     """
1798.     For the attribute 'through_attr' on the given instance, find
1799.     an object that has a get_prefetch_queryset().
1800.     Return a 4 tuple containing:
1801.     (the object with get_prefetch_queryset (or None),
1802.      the descriptor object representing this relationship (or None),
1803.      a boolean that is False if the attribute was not found at all,
1804.      a function that takes an instance and returns a boolean that is True if
1805.      the attribute has already been fetched for that instance)
1806.     """
1807.     def has_to_attr_attribute(instance):
1808.         return hasattr(instance, to_attr)
1809. 
1810.     prefetcher = None
1811.     is_fetched = has_to_attr_attribute
1812. 
1813.     # For singly related objects, we have to avoid getting the attribute
1814.     # from the object, as this will trigger the query. So we first try
1815.     # on the class, in order to get the descriptor object.
1816.     rel_obj_descriptor = getattr(instance.__class__, through_attr, None)
1817.     if rel_obj_descriptor is None:
1818.         attr_found = hasattr(instance, through_attr)
1819.     else:
1820.         attr_found = True
1821.         if rel_obj_descriptor:
1822.             # singly related object, descriptor object has the
1823.             # get_prefetch_queryset() method.
1824.             if hasattr(rel_obj_descriptor, 'get_prefetch_queryset'):
1825.                 prefetcher = rel_obj_descriptor
1826.                 is_fetched = rel_obj_descriptor.is_cached
1827.             else:
1828.                 # descriptor doesn't support prefetching, so we go ahead and get
1829.                 # the attribute on the instance rather than the class to
1830.                 # support many related managers
1831.                 rel_obj = getattr(instance, through_attr)
1832.                 if hasattr(rel_obj, 'get_prefetch_queryset'):
1833.                     prefetcher = rel_obj
1834.                 if through_attr != to_attr:
1835.                     # Special case cached_property instances because hasattr
1836.                     # triggers attribute computation and assignment.
1837.                     if isinstance(getattr(instance.__class__, to_attr, None), cached_property):
1838.                         def has_cached_property(instance):
1839.                             return to_attr in instance.__dict__
1840. 
1841.                         is_fetched = has_cached_property
1842.                 else:
1843.                     def in_prefetched_cache(instance):
1844.                         return through_attr in instance._prefetched_objects_cache
1845. 
1846.                     is_fetched = in_prefetched_cache
1847.     return prefetcher, rel_obj_descriptor, attr_found, is_fetched
1848. 
1849. 
1850. def prefetch_one_level(instances, prefetcher, lookup, level):
1851.     """
1852.     Helper function for prefetch_related_objects().
1853. 
1854.     Run prefetches on all instances using the prefetcher object,
1855.     assigning results to relevant caches in instance.
1856. 
1857.     Return the prefetched objects along with any additional prefetches that
1858.     must be done due to prefetch_related lookups found from default managers.
1859.     """
1860.     # prefetcher must have a method get_prefetch_queryset() which takes a list
1861.     # of instances, and returns a tuple:
1862. 
1863.     # (queryset of instances of self.model that are related to passed in instances,
1864.     #  callable that gets value to be matched for returned instances,
1865.     #  callable that gets value to be matched for passed in instances,
1866.     #  boolean that is True for singly related objects,
1867.     #  cache or field name to assign to,
1868.     #  boolean that is True when the previous argument is a cache name vs a field name).
1869. 
1870.     # The 'values to be matched' must be hashable as they will be used
1871.     # in a dictionary.
1872. 
1873.     rel_qs, rel_obj_attr, instance_attr, single, cache_name, is_descriptor = (
1874.         prefetcher.get_prefetch_queryset(instances, lookup.get_current_queryset(level)))
1875.     # We have to handle the possibility that the QuerySet we just got back
1876.     # contains some prefetch_related lookups. We don't want to trigger the
1877.     # prefetch_related functionality by evaluating the query. Rather, we need
1878.     # to merge in the prefetch_related lookups.
1879.     # Copy the lookups in case it is a Prefetch object which could be reused
1880.     # later (happens in nested prefetch_related).
1881.     additional_lookups = [
1882.         copy.copy(additional_lookup) for additional_lookup
1883.         in getattr(rel_qs, '_prefetch_related_lookups', ())
1884.     ]
1885.     if additional_lookups:
1886.         # Don't need to clone because the manager should have given us a fresh
1887.         # instance, so we access an internal instead of using public interface
1888.         # for performance reasons.
1889.         rel_qs._prefetch_related_lookups = ()
1890. 
1891.     all_related_objects = list(rel_qs)
1892. 
1893.     rel_obj_cache = {}
1894.     for rel_obj in all_related_objects:
1895.         rel_attr_val = rel_obj_attr(rel_obj)
1896.         rel_obj_cache.setdefault(rel_attr_val, []).append(rel_obj)
1897. 
1898.     to_attr, as_attr = lookup.get_current_to_attr(level)
1899.     # Make sure `to_attr` does not conflict with a field.
1900.     if as_attr and instances:
1901.         # We assume that objects retrieved are homogeneous (which is the premise
1902.         # of prefetch_related), so what applies to first object applies to all.
1903.         model = instances[0].__class__
1904.         try:
1905.             model._meta.get_field(to_attr)
1906.         except exceptions.FieldDoesNotExist:
1907.             pass
1908.         else:
1909.             msg = 'to_attr={} conflicts with a field on the {} model.'
1910.             raise ValueError(msg.format(to_attr, model.__name__))
1911. 
1912.     # Whether or not we're prefetching the last part of the lookup.
1913.     leaf = len(lookup.prefetch_through.split(LOOKUP_SEP)) - 1 == level
1914. 
1915.     for obj in instances:
1916.         instance_attr_val = instance_attr(obj)
1917.         vals = rel_obj_cache.get(instance_attr_val, [])
1918. 
1919.         if single:
1920.             val = vals[0] if vals else None
1921.             if as_attr:
1922.                 # A to_attr has been given for the prefetch.
1923.                 setattr(obj, to_attr, val)
1924.             elif is_descriptor:
1925.                 # cache_name points to a field name in obj.
1926.                 # This field is a descriptor for a related object.
1927.                 setattr(obj, cache_name, val)
1928.             else:
1929.                 # No to_attr has been given for this prefetch operation and the
1930.                 # cache_name does not point to a descriptor. Store the value of
1931.                 # the field in the object's field cache.
1932.                 obj._state.fields_cache[cache_name] = val
1933.         else:
1934.             if as_attr:
1935.                 setattr(obj, to_attr, vals)
1936.             else:
1937.                 manager = getattr(obj, to_attr)
1938.                 if leaf and lookup.queryset is not None:
1939.                     qs = manager._apply_rel_filters(lookup.queryset)
1940.                 else:
1941.                     qs = manager.get_queryset()
1942.                 qs._result_cache = vals
1943.                 # We don't want the individual qs doing prefetch_related now,
1944.                 # since we have merged this into the current work.
1945.                 qs._prefetch_done = True
1946.                 obj._prefetched_objects_cache[cache_name] = qs
1947.     return all_related_objects, additional_lookups
1948. 
1949. 
1950. class RelatedPopulator:
1951.     """
1952.     RelatedPopulator is used for select_related() object instantiation.
1953. 
1954.     The idea is that each select_related() model will be populated by a
1955.     different RelatedPopulator instance. The RelatedPopulator instances get
1956.     klass_info and select (computed in SQLCompiler) plus the used db as
1957.     input for initialization. That data is used to compute which columns
1958.     to use, how to instantiate the model, and how to populate the links
1959.     between the objects.
1960. 
1961.     The actual creation of the objects is done in populate() method. This
1962.     method gets row and from_obj as input and populates the select_related()
1963.     model instance.
1964.     """
1965.     def __init__(self, klass_info, select, db):
1966.         self.db = db
1967.         # Pre-compute needed attributes. The attributes are:
1968.         #  - model_cls: the possibly deferred model class to instantiate
1969.         #  - either:
1970.         #    - cols_start, cols_end: usually the columns in the row are
1971.         #      in the same order model_cls.__init__ expects them, so we
1972.         #      can instantiate by model_cls(*row[cols_start:cols_end])
1973.         #    - reorder_for_init: When select_related descends to a child
1974.         #      class, then we want to reuse the already selected parent
1975.         #      data. However, in this case the parent data isn't necessarily
1976.         #      in the same order that Model.__init__ expects it to be, so
1977.         #      we have to reorder the parent data. The reorder_for_init
1978.         #      attribute contains a function used to reorder the field data
1979.         #      in the order __init__ expects it.
1980.         #  - pk_idx: the index of the primary key field in the reordered
1981.         #    model data. Used to check if a related object exists at all.
1982.         #  - init_list: the field attnames fetched from the database. For
1983.         #    deferred models this isn't the same as all attnames of the
1984.         #    model's fields.
1985.         #  - related_populators: a list of RelatedPopulator instances if
1986.         #    select_related() descends to related models from this model.
1987.         #  - local_setter, remote_setter: Methods to set cached values on
1988.         #    the object being populated and on the remote object. Usually
1989.         #    these are Field.set_cached_value() methods.
1990.         select_fields = klass_info['select_fields']
1991.         from_parent = klass_info['from_parent']
1992.         if not from_parent:
1993.             self.cols_start = select_fields[0]
1994.             self.cols_end = select_fields[-1] + 1
1995.             self.init_list = [
1996.                 f[0].target.attname for f in select[self.cols_start:self.cols_end]
1997.             ]
1998.             self.reorder_for_init = None
1999.         else:
2000.             attname_indexes = {select[idx][0].target.attname: idx for idx in select_fields}
2001.             model_init_attnames = (f.attname for f in klass_info['model']._meta.concrete_fields)


File: django/db/models/query.py
Line number range: 2002 - 2501
Content:
2002.             self.init_list = [attname for attname in model_init_attnames if attname in attname_indexes]
2003.             self.reorder_for_init = operator.itemgetter(*[attname_indexes[attname] for attname in self.init_list])
2004. 
2005.         self.model_cls = klass_info['model']
2006.         self.pk_idx = self.init_list.index(self.model_cls._meta.pk.attname)
2007.         self.related_populators = get_related_populators(klass_info, select, self.db)
2008.         self.local_setter = klass_info['local_setter']
2009.         self.remote_setter = klass_info['remote_setter']
2010. 
2011.     def populate(self, row, from_obj):
2012.         if self.reorder_for_init:
2013.             obj_data = self.reorder_for_init(row)
2014.         else:
2015.             obj_data = row[self.cols_start:self.cols_end]
2016.         if obj_data[self.pk_idx] is None:
2017.             obj = None
2018.         else:
2019.             obj = self.model_cls.from_db(self.db, self.init_list, obj_data)
2020.             for rel_iter in self.related_populators:
2021.                 rel_iter.populate(row, obj)
2022.         self.local_setter(from_obj, obj)
2023.         if obj is not None:
2024.             self.remote_setter(obj, from_obj)
2025. 
2026. 
2027. def get_related_populators(klass_info, select, db):
2028.     iterators = []
2029.     related_klass_infos = klass_info.get('related_klass_infos', [])
2030.     for rel_klass_info in related_klass_infos:
2031.         rel_cls = RelatedPopulator(rel_klass_info, select, db)
2032.         iterators.append(rel_cls)
2033.     return iterators

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-25 02:30:02,917 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full content of the file `django/db/models/query.py`.\n\n2. Extended relevance:\n   - The user's purpose is to examine the implementations of `QuerySet.bulk_update()` and `QuerySet.update()`. This file contains the `QuerySet` class and the definitions of these methods, making the entire file relevant for understanding the implementation and its context within the class.", relative_path='django/db/models/query.py', start_line=1, end_line=2033)]
2025-12-25 02:30:02,921 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of `django/db/models/query.py`.
2025-12-25 02:30:02,921 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-25 02:30:02,921 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-25 02:30:02,922 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-25 02:30:02,922 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-25 02:30:02,923 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Include number of rows matched in bulk_update() return value

Description: Description
	
Currently, bulk_update() returns None, unlike update(), which returns ​the number of rows matched.
It looks like it would be easy to add the same functionality to bulk_update() since bulk_update() simply calls update() repeatedly:
​https://github.com/django/django/blob/2b4b6c8af0aae8785bc1347cf1be2e8e70fd5ff3/django/db/models/query.py#L568
I.e. the return values could simply be added and returned.

Patch information:
diff --git a/django/db/models/query.py b/django/db/models/query.py
index 387deca527..58a6864a71 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -527,6 +527,8 @@ class QuerySet:
     def bulk_update(self, objs, fields, batch_size=None):
         """
         Update the given fields in each of the given objects in the database.
+
+        Return the total number of rows matched by the underlying update() calls.
         """
         if batch_size is not None and batch_size < 0:
             raise ValueError('Batch size must be a positive integer.')
@@ -541,7 +543,7 @@ class QuerySet:
         if any(f.primary_key for f in fields):
             raise ValueError('bulk_update() cannot be used with primary key fields.')
         if not objs:
-            return
+            return 0
         # PK is used twice in the resulting update query, once in the filter
         # and once in the WHEN. Each field will also have one CAST.
         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
@@ -564,8 +566,10 @@ class QuerySet:
                 update_kwargs[field.attname] = case_statement
             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
         with transaction.atomic(using=self.db, savepoint=False):
+            rows = 0
             for pks, update_kwargs in updates:
-                self.filter(pk__in=pks).update(**update_kwargs)
+                rows += self.filter(pk__in=pks).update(**update_kwargs)
+        return rows
     bulk_update.alters_data = True
 
     def get_or_create(self, defaults=None, **kwargs):
diff --git a/docs/ref/models/querysets.txt b/docs/ref/models/querysets.txt
index 5dc7a6b5bc..e0254b3061 100644
--- a/docs/ref/models/querysets.txt
+++ b/docs/ref/models/querysets.txt
@@ -2221,7 +2221,7 @@ normally supports it).
 .. method:: bulk_update(objs, fields, batch_size=None)
 
 This method efficiently updates the given fields on the provided model
-instances, generally with one query::
+instances, generally with one query and returns the total number of rows matched::
 
     >>> objs = [
     ...    Entry.objects.create(headline='Entry 1'),


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `django/db/models/query.py`.
Extra Requirements: 
Purpose: I need this file to examine the original implementations of `QuerySet.bulk_update()` and `QuerySet.update()` to verify the logic of the proposed patch.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/query.py
Line number range: 1 - 2033
Content:
1. """
2. The main QuerySet implementation. This provides the public API for the ORM.
3. """
4. 
5. import copy
6. import operator
7. import warnings
8. from itertools import chain
9. 
10. import django
11. from django.conf import settings
12. from django.core import exceptions
13. from django.db import (
14.     DJANGO_VERSION_PICKLE_KEY, IntegrityError, NotSupportedError, connections,
15.     router, transaction,
16. )
17. from django.db.models import AutoField, DateField, DateTimeField, sql
18. from django.db.models.constants import LOOKUP_SEP
19. from django.db.models.deletion import Collector
20. from django.db.models.expressions import Case, Expression, F, Ref, Value, When
21. from django.db.models.functions import Cast, Trunc
22. from django.db.models.query_utils import FilteredRelation, Q
23. from django.db.models.sql.constants import CURSOR, GET_ITERATOR_CHUNK_SIZE
24. from django.db.models.utils import create_namedtuple_class, resolve_callables
25. from django.utils import timezone
26. from django.utils.functional import cached_property, partition
27. 
28. # The maximum number of results to fetch in a get() query.
29. MAX_GET_RESULTS = 21
30. 
31. # The maximum number of items to display in a QuerySet.__repr__
32. REPR_OUTPUT_SIZE = 20
33. 
34. 
35. class BaseIterable:
36.     def __init__(self, queryset, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
37.         self.queryset = queryset
38.         self.chunked_fetch = chunked_fetch
39.         self.chunk_size = chunk_size
40. 
41. 
42. class ModelIterable(BaseIterable):
43.     """Iterable that yields a model instance for each row."""
44. 
45.     def __iter__(self):
46.         queryset = self.queryset
47.         db = queryset.db
48.         compiler = queryset.query.get_compiler(using=db)
49.         # Execute the query. This will also fill compiler.select, klass_info,
50.         # and annotations.
51.         results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
52.         select, klass_info, annotation_col_map = (compiler.select, compiler.klass_info,
53.                                                   compiler.annotation_col_map)
54.         model_cls = klass_info['model']
55.         select_fields = klass_info['select_fields']
56.         model_fields_start, model_fields_end = select_fields[0], select_fields[-1] + 1
57.         init_list = [f[0].target.attname
58.                      for f in select[model_fields_start:model_fields_end]]
59.         related_populators = get_related_populators(klass_info, select, db)
60.         known_related_objects = [
61.             (field, related_objs, operator.attrgetter(*[
62.                 field.attname
63.                 if from_field == 'self' else
64.                 queryset.model._meta.get_field(from_field).attname
65.                 for from_field in field.from_fields
66.             ])) for field, related_objs in queryset._known_related_objects.items()
67.         ]
68.         for row in compiler.results_iter(results):
69.             obj = model_cls.from_db(db, init_list, row[model_fields_start:model_fields_end])
70.             for rel_populator in related_populators:
71.                 rel_populator.populate(row, obj)
72.             if annotation_col_map:
73.                 for attr_name, col_pos in annotation_col_map.items():
74.                     setattr(obj, attr_name, row[col_pos])
75. 
76.             # Add the known related objects to the model.
77.             for field, rel_objs, rel_getter in known_related_objects:
78.                 # Avoid overwriting objects loaded by, e.g., select_related().
79.                 if field.is_cached(obj):
80.                     continue
81.                 rel_obj_id = rel_getter(obj)
82.                 try:
83.                     rel_obj = rel_objs[rel_obj_id]
84.                 except KeyError:
85.                     pass  # May happen in qs1 | qs2 scenarios.
86.                 else:
87.                     setattr(obj, field.name, rel_obj)
88. 
89.             yield obj
90. 
91. 
92. class ValuesIterable(BaseIterable):
93.     """
94.     Iterable returned by QuerySet.values() that yields a dict for each row.
95.     """
96. 
97.     def __iter__(self):
98.         queryset = self.queryset
99.         query = queryset.query
100.         compiler = query.get_compiler(queryset.db)
101. 
102.         # extra(select=...) cols are always at the start of the row.
103.         names = [
104.             *query.extra_select,
105.             *query.values_select,
106.             *query.annotation_select,
107.         ]
108.         indexes = range(len(names))
109.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
110.             yield {names[i]: row[i] for i in indexes}
111. 
112. 
113. class ValuesListIterable(BaseIterable):
114.     """
115.     Iterable returned by QuerySet.values_list(flat=False) that yields a tuple
116.     for each row.
117.     """
118. 
119.     def __iter__(self):
120.         queryset = self.queryset
121.         query = queryset.query
122.         compiler = query.get_compiler(queryset.db)
123. 
124.         if queryset._fields:
125.             # extra(select=...) cols are always at the start of the row.
126.             names = [
127.                 *query.extra_select,
128.                 *query.values_select,
129.                 *query.annotation_select,
130.             ]
131.             fields = [*queryset._fields, *(f for f in query.annotation_select if f not in queryset._fields)]
132.             if fields != names:
133.                 # Reorder according to fields.
134.                 index_map = {name: idx for idx, name in enumerate(names)}
135.                 rowfactory = operator.itemgetter(*[index_map[f] for f in fields])
136.                 return map(
137.                     rowfactory,
138.                     compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
139.                 )
140.         return compiler.results_iter(tuple_expected=True, chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
141. 
142. 
143. class NamedValuesListIterable(ValuesListIterable):
144.     """
145.     Iterable returned by QuerySet.values_list(named=True) that yields a
146.     namedtuple for each row.
147.     """
148. 
149.     def __iter__(self):
150.         queryset = self.queryset
151.         if queryset._fields:
152.             names = queryset._fields
153.         else:
154.             query = queryset.query
155.             names = [*query.extra_select, *query.values_select, *query.annotation_select]
156.         tuple_class = create_namedtuple_class(*names)
157.         new = tuple.__new__
158.         for row in super().__iter__():
159.             yield new(tuple_class, row)
160. 
161. 
162. class FlatValuesListIterable(BaseIterable):
163.     """
164.     Iterable returned by QuerySet.values_list(flat=True) that yields single
165.     values.
166.     """
167. 
168.     def __iter__(self):
169.         queryset = self.queryset
170.         compiler = queryset.query.get_compiler(queryset.db)
171.         for row in compiler.results_iter(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size):
172.             yield row[0]
173. 
174. 
175. class QuerySet:
176.     """Represent a lazy database lookup for a set of objects."""
177. 
178.     def __init__(self, model=None, query=None, using=None, hints=None):
179.         self.model = model
180.         self._db = using
181.         self._hints = hints or {}
182.         self._query = query or sql.Query(self.model)
183.         self._result_cache = None
184.         self._sticky_filter = False
185.         self._for_write = False
186.         self._prefetch_related_lookups = ()
187.         self._prefetch_done = False
188.         self._known_related_objects = {}  # {rel_field: {pk: rel_obj}}
189.         self._iterable_class = ModelIterable
190.         self._fields = None
191.         self._defer_next_filter = False
192.         self._deferred_filter = None
193. 
194.     @property
195.     def query(self):
196.         if self._deferred_filter:
197.             negate, args, kwargs = self._deferred_filter
198.             self._filter_or_exclude_inplace(negate, args, kwargs)
199.             self._deferred_filter = None
200.         return self._query
201. 
202.     @query.setter
203.     def query(self, value):
204.         if value.values_select:
205.             self._iterable_class = ValuesIterable
206.         self._query = value
207. 
208.     def as_manager(cls):
209.         # Address the circular dependency between `Queryset` and `Manager`.
210.         from django.db.models.manager import Manager
211.         manager = Manager.from_queryset(cls)()
212.         manager._built_with_as_manager = True
213.         return manager
214.     as_manager.queryset_only = True
215.     as_manager = classmethod(as_manager)
216. 
217.     ########################
218.     # PYTHON MAGIC METHODS #
219.     ########################
220. 
221.     def __deepcopy__(self, memo):
222.         """Don't populate the QuerySet's cache."""
223.         obj = self.__class__()
224.         for k, v in self.__dict__.items():
225.             if k == '_result_cache':
226.                 obj.__dict__[k] = None
227.             else:
228.                 obj.__dict__[k] = copy.deepcopy(v, memo)
229.         return obj
230. 
231.     def __getstate__(self):
232.         # Force the cache to be fully populated.
233.         self._fetch_all()
234.         return {**self.__dict__, DJANGO_VERSION_PICKLE_KEY: django.__version__}
235. 
236.     def __setstate__(self, state):
237.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
238.         if pickled_version:
239.             if pickled_version != django.__version__:
240.                 warnings.warn(
241.                     "Pickled queryset instance's Django version %s does not "
242.                     "match the current version %s."
243.                     % (pickled_version, django.__version__),
244.                     RuntimeWarning,
245.                     stacklevel=2,
246.                 )
247.         else:
248.             warnings.warn(
249.                 "Pickled queryset instance's Django version is not specified.",
250.                 RuntimeWarning,
251.                 stacklevel=2,
252.             )
253.         self.__dict__.update(state)
254. 
255.     def __repr__(self):
256.         data = list(self[:REPR_OUTPUT_SIZE + 1])
257.         if len(data) > REPR_OUTPUT_SIZE:
258.             data[-1] = "...(remaining elements truncated)..."
259.         return '<%s %r>' % (self.__class__.__name__, data)
260. 
261.     def __len__(self):
262.         self._fetch_all()
263.         return len(self._result_cache)
264. 
265.     def __iter__(self):
266.         """
267.         The queryset iterator protocol uses three nested iterators in the
268.         default case:
269.             1. sql.compiler.execute_sql()
270.                - Returns 100 rows at time (constants.GET_ITERATOR_CHUNK_SIZE)
271.                  using cursor.fetchmany(). This part is responsible for
272.                  doing some column masking, and returning the rows in chunks.
273.             2. sql.compiler.results_iter()
274.                - Returns one row at time. At this point the rows are still just
275.                  tuples. In some cases the return values are converted to
276.                  Python values at this location.
277.             3. self.iterator()
278.                - Responsible for turning the rows into model objects.
279.         """
280.         self._fetch_all()
281.         return iter(self._result_cache)
282. 
283.     def __bool__(self):
284.         self._fetch_all()
285.         return bool(self._result_cache)
286. 
287.     def __getitem__(self, k):
288.         """Retrieve an item or slice from the set of results."""
289.         if not isinstance(k, (int, slice)):
290.             raise TypeError(
291.                 'QuerySet indices must be integers or slices, not %s.'
292.                 % type(k).__name__
293.             )
294.         assert ((not isinstance(k, slice) and (k >= 0)) or
295.                 (isinstance(k, slice) and (k.start is None or k.start >= 0) and
296.                  (k.stop is None or k.stop >= 0))), \
297.             "Negative indexing is not supported."
298. 
299.         if self._result_cache is not None:
300.             return self._result_cache[k]
301. 
302.         if isinstance(k, slice):
303.             qs = self._chain()
304.             if k.start is not None:
305.                 start = int(k.start)
306.             else:
307.                 start = None
308.             if k.stop is not None:
309.                 stop = int(k.stop)
310.             else:
311.                 stop = None
312.             qs.query.set_limits(start, stop)
313.             return list(qs)[::k.step] if k.step else qs
314. 
315.         qs = self._chain()
316.         qs.query.set_limits(k, k + 1)
317.         qs._fetch_all()
318.         return qs._result_cache[0]
319. 
320.     def __class_getitem__(cls, *args, **kwargs):
321.         return cls
322. 
323.     def __and__(self, other):
324.         self._merge_sanity_check(other)
325.         if isinstance(other, EmptyQuerySet):
326.             return other
327.         if isinstance(self, EmptyQuerySet):
328.             return self
329.         combined = self._chain()
330.         combined._merge_known_related_objects(other)
331.         combined.query.combine(other.query, sql.AND)
332.         return combined
333. 
334.     def __or__(self, other):
335.         self._merge_sanity_check(other)
336.         if isinstance(self, EmptyQuerySet):
337.             return other
338.         if isinstance(other, EmptyQuerySet):
339.             return self
340.         query = self if self.query.can_filter() else self.model._base_manager.filter(pk__in=self.values('pk'))
341.         combined = query._chain()
342.         combined._merge_known_related_objects(other)
343.         if not other.query.can_filter():
344.             other = other.model._base_manager.filter(pk__in=other.values('pk'))
345.         combined.query.combine(other.query, sql.OR)
346.         return combined
347. 
348.     ####################################
349.     # METHODS THAT DO DATABASE QUERIES #
350.     ####################################
351. 
352.     def _iterator(self, use_chunked_fetch, chunk_size):
353.         yield from self._iterable_class(self, chunked_fetch=use_chunked_fetch, chunk_size=chunk_size)
354. 
355.     def iterator(self, chunk_size=2000):
356.         """
357.         An iterator over the results from applying this QuerySet to the
358.         database.
359.         """
360.         if chunk_size <= 0:
361.             raise ValueError('Chunk size must be strictly positive.')
362.         use_chunked_fetch = not connections[self.db].settings_dict.get('DISABLE_SERVER_SIDE_CURSORS')
363.         return self._iterator(use_chunked_fetch, chunk_size)
364. 
365.     def aggregate(self, *args, **kwargs):
366.         """
367.         Return a dictionary containing the calculations (aggregation)
368.         over the current queryset.
369. 
370.         If args is present the expression is passed as a kwarg using
371.         the Aggregate object's default alias.
372.         """
373.         if self.query.distinct_fields:
374.             raise NotImplementedError("aggregate() + distinct(fields) not implemented.")
375.         self._validate_values_are_expressions((*args, *kwargs.values()), method_name='aggregate')
376.         for arg in args:
377.             # The default_alias property raises TypeError if default_alias
378.             # can't be set automatically or AttributeError if it isn't an
379.             # attribute.
380.             try:
381.                 arg.default_alias
382.             except (AttributeError, TypeError):
383.                 raise TypeError("Complex aggregates require an alias")
384.             kwargs[arg.default_alias] = arg
385. 
386.         query = self.query.chain()
387.         for (alias, aggregate_expr) in kwargs.items():
388.             query.add_annotation(aggregate_expr, alias, is_summary=True)
389.             annotation = query.annotations[alias]
390.             if not annotation.contains_aggregate:
391.                 raise TypeError("%s is not an aggregate expression" % alias)
392.             for expr in annotation.get_source_expressions():
393.                 if expr.contains_aggregate and isinstance(expr, Ref) and expr.refs in kwargs:
394.                     name = expr.refs
395.                     raise exceptions.FieldError(
396.                         "Cannot compute %s('%s'): '%s' is an aggregate"
397.                         % (annotation.name, name, name)
398.                     )
399.         return query.get_aggregation(self.db, kwargs)
400. 
401.     def count(self):
402.         """
403.         Perform a SELECT COUNT() and return the number of records as an
404.         integer.
405. 
406.         If the QuerySet is already fully cached, return the length of the
407.         cached results set to avoid multiple SELECT COUNT(*) calls.
408.         """
409.         if self._result_cache is not None:
410.             return len(self._result_cache)
411. 
412.         return self.query.get_count(using=self.db)
413. 
414.     def get(self, *args, **kwargs):
415.         """
416.         Perform the query and return a single object matching the given
417.         keyword arguments.
418.         """
419.         if self.query.combinator and (args or kwargs):
420.             raise NotSupportedError(
421.                 'Calling QuerySet.get(...) with filters after %s() is not '
422.                 'supported.' % self.query.combinator
423.             )
424.         clone = self._chain() if self.query.combinator else self.filter(*args, **kwargs)
425.         if self.query.can_filter() and not self.query.distinct_fields:
426.             clone = clone.order_by()
427.         limit = None
428.         if not clone.query.select_for_update or connections[clone.db].features.supports_select_for_update_with_limit:
429.             limit = MAX_GET_RESULTS
430.             clone.query.set_limits(high=limit)
431.         num = len(clone)
432.         if num == 1:
433.             return clone._result_cache[0]
434.         if not num:
435.             raise self.model.DoesNotExist(
436.                 "%s matching query does not exist." %
437.                 self.model._meta.object_name
438.             )
439.         raise self.model.MultipleObjectsReturned(
440.             'get() returned more than one %s -- it returned %s!' % (
441.                 self.model._meta.object_name,
442.                 num if not limit or num < limit else 'more than %s' % (limit - 1),
443.             )
444.         )
445. 
446.     def create(self, **kwargs):
447.         """
448.         Create a new object with the given kwargs, saving it to the database
449.         and returning the created object.
450.         """
451.         obj = self.model(**kwargs)
452.         self._for_write = True
453.         obj.save(force_insert=True, using=self.db)
454.         return obj
455. 
456.     def _prepare_for_bulk_create(self, objs):
457.         for obj in objs:
458.             if obj.pk is None:
459.                 # Populate new PK values.
460.                 obj.pk = obj._meta.pk.get_pk_value_on_save(obj)
461.             obj._prepare_related_fields_for_save(operation_name='bulk_create')
462. 
463.     def bulk_create(self, objs, batch_size=None, ignore_conflicts=False):
464.         """
465.         Insert each of the instances into the database. Do *not* call
466.         save() on each of the instances, do not send any pre/post_save
467.         signals, and do not set the primary key attribute if it is an
468.         autoincrement field (except if features.can_return_rows_from_bulk_insert=True).
469.         Multi-table models are not supported.
470.         """
471.         # When you bulk insert you don't get the primary keys back (if it's an
472.         # autoincrement, except if can_return_rows_from_bulk_insert=True), so
473.         # you can't insert into the child tables which references this. There
474.         # are two workarounds:
475.         # 1) This could be implemented if you didn't have an autoincrement pk
476.         # 2) You could do it by doing O(n) normal inserts into the parent
477.         #    tables to get the primary keys back and then doing a single bulk
478.         #    insert into the childmost table.
479.         # We currently set the primary keys on the objects when using
480.         # PostgreSQL via the RETURNING ID clause. It should be possible for
481.         # Oracle as well, but the semantics for extracting the primary keys is
482.         # trickier so it's not done yet.
483.         assert batch_size is None or batch_size > 0
484.         # Check that the parents share the same concrete model with the our
485.         # model to detect the inheritance pattern ConcreteGrandParent ->
486.         # MultiTableParent -> ProxyChild. Simply checking self.model._meta.proxy
487.         # would not identify that case as involving multiple tables.
488.         for parent in self.model._meta.get_parent_list():
489.             if parent._meta.concrete_model is not self.model._meta.concrete_model:
490.                 raise ValueError("Can't bulk create a multi-table inherited model")
491.         if not objs:
492.             return objs
493.         self._for_write = True
494.         connection = connections[self.db]
495.         opts = self.model._meta
496.         fields = opts.concrete_fields
497.         objs = list(objs)
498.         self._prepare_for_bulk_create(objs)
499.         with transaction.atomic(using=self.db, savepoint=False):
500.             objs_with_pk, objs_without_pk = partition(lambda o: o.pk is None, objs)
501.             if objs_with_pk:
502.                 returned_columns = self._batched_insert(
503.                     objs_with_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
504.                 )
505.                 for obj_with_pk, results in zip(objs_with_pk, returned_columns):
506.                     for result, field in zip(results, opts.db_returning_fields):
507.                         if field != opts.pk:
508.                             setattr(obj_with_pk, field.attname, result)
509.                 for obj_with_pk in objs_with_pk:
510.                     obj_with_pk._state.adding = False
511.                     obj_with_pk._state.db = self.db
512.             if objs_without_pk:
513.                 fields = [f for f in fields if not isinstance(f, AutoField)]
514.                 returned_columns = self._batched_insert(
515.                     objs_without_pk, fields, batch_size, ignore_conflicts=ignore_conflicts,
516.                 )
517.                 if connection.features.can_return_rows_from_bulk_insert and not ignore_conflicts:
518.                     assert len(returned_columns) == len(objs_without_pk)
519.                 for obj_without_pk, results in zip(objs_without_pk, returned_columns):
520.                     for result, field in zip(results, opts.db_returning_fields):
521.                         setattr(obj_without_pk, field.attname, result)
522.                     obj_without_pk._state.adding = False
523.                     obj_without_pk._state.db = self.db
524. 
525.         return objs
526. 
527.     def bulk_update(self, objs, fields, batch_size=None):
528.         """
529.         Update the given fields in each of the given objects in the database.
530.         """
531.         if batch_size is not None and batch_size < 0:
532.             raise ValueError('Batch size must be a positive integer.')
533.         if not fields:
534.             raise ValueError('Field names must be given to bulk_update().')
535.         objs = tuple(objs)
536.         if any(obj.pk is None for obj in objs):
537.             raise ValueError('All bulk_update() objects must have a primary key set.')
538.         fields = [self.model._meta.get_field(name) for name in fields]
539.         if any(not f.concrete or f.many_to_many for f in fields):
540.             raise ValueError('bulk_update() can only be used with concrete fields.')
541.         if any(f.primary_key for f in fields):
542.             raise ValueError('bulk_update() cannot be used with primary key fields.')
543.         if not objs:
544.             return
545.         # PK is used twice in the resulting update query, once in the filter
546.         # and once in the WHEN. Each field will also have one CAST.
547.         max_batch_size = connections[self.db].ops.bulk_batch_size(['pk', 'pk'] + fields, objs)
548.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
549.         requires_casting = connections[self.db].features.requires_casted_case_in_updates
550.         batches = (objs[i:i + batch_size] for i in range(0, len(objs), batch_size))
551.         updates = []
552.         for batch_objs in batches:
553.             update_kwargs = {}
554.             for field in fields:
555.                 when_statements = []
556.                 for obj in batch_objs:
557.                     attr = getattr(obj, field.attname)
558.                     if not isinstance(attr, Expression):
559.                         attr = Value(attr, output_field=field)
560.                     when_statements.append(When(pk=obj.pk, then=attr))
561.                 case_statement = Case(*when_statements, output_field=field)
562.                 if requires_casting:
563.                     case_statement = Cast(case_statement, output_field=field)
564.                 update_kwargs[field.attname] = case_statement
565.             updates.append(([obj.pk for obj in batch_objs], update_kwargs))
566.         with transaction.atomic(using=self.db, savepoint=False):
567.             for pks, update_kwargs in updates:
568.                 self.filter(pk__in=pks).update(**update_kwargs)
569.     bulk_update.alters_data = True
570. 
571.     def get_or_create(self, defaults=None, **kwargs):
572.         """
573.         Look up an object with the given kwargs, creating one if necessary.
574.         Return a tuple of (object, created), where created is a boolean
575.         specifying whether an object was created.
576.         """
577.         # The get() needs to be targeted at the write database in order
578.         # to avoid potential transaction consistency problems.
579.         self._for_write = True
580.         try:
581.             return self.get(**kwargs), False
582.         except self.model.DoesNotExist:
583.             params = self._extract_model_params(defaults, **kwargs)
584.             # Try to create an object using passed params.
585.             try:
586.                 with transaction.atomic(using=self.db):
587.                     params = dict(resolve_callables(params))
588.                     return self.create(**params), True
589.             except IntegrityError:
590.                 try:
591.                     return self.get(**kwargs), False
592.                 except self.model.DoesNotExist:
593.                     pass
594.                 raise
595. 
596.     def update_or_create(self, defaults=None, **kwargs):
597.         """
598.         Look up an object with the given kwargs, updating one with defaults
599.         if it exists, otherwise create a new one.
600.         Return a tuple (object, created), where created is a boolean
601.         specifying whether an object was created.
602.         """
603.         defaults = defaults or {}
604.         self._for_write = True
605.         with transaction.atomic(using=self.db):
606.             # Lock the row so that a concurrent update is blocked until
607.             # update_or_create() has performed its save.
608.             obj, created = self.select_for_update().get_or_create(defaults, **kwargs)
609.             if created:
610.                 return obj, created
611.             for k, v in resolve_callables(defaults):
612.                 setattr(obj, k, v)
613.             obj.save(using=self.db)
614.         return obj, False
615. 
616.     def _extract_model_params(self, defaults, **kwargs):
617.         """
618.         Prepare `params` for creating a model instance based on the given
619.         kwargs; for use by get_or_create().
620.         """
621.         defaults = defaults or {}
622.         params = {k: v for k, v in kwargs.items() if LOOKUP_SEP not in k}
623.         params.update(defaults)
624.         property_names = self.model._meta._property_names
625.         invalid_params = []
626.         for param in params:
627.             try:
628.                 self.model._meta.get_field(param)
629.             except exceptions.FieldDoesNotExist:
630.                 # It's okay to use a model's property if it has a setter.
631.                 if not (param in property_names and getattr(self.model, param).fset):
632.                     invalid_params.append(param)
633.         if invalid_params:
634.             raise exceptions.FieldError(
635.                 "Invalid field name(s) for model %s: '%s'." % (
636.                     self.model._meta.object_name,
637.                     "', '".join(sorted(invalid_params)),
638.                 ))
639.         return params
640. 
641.     def _earliest(self, *fields):
642.         """
643.         Return the earliest object according to fields (if given) or by the
644.         model's Meta.get_latest_by.
645.         """
646.         if fields:
647.             order_by = fields
648.         else:
649.             order_by = getattr(self.model._meta, 'get_latest_by')
650.             if order_by and not isinstance(order_by, (tuple, list)):
651.                 order_by = (order_by,)
652.         if order_by is None:
653.             raise ValueError(
654.                 "earliest() and latest() require either fields as positional "
655.                 "arguments or 'get_latest_by' in the model's Meta."
656.             )
657.         obj = self._chain()
658.         obj.query.set_limits(high=1)
659.         obj.query.clear_ordering(force_empty=True)
660.         obj.query.add_ordering(*order_by)
661.         return obj.get()
662. 
663.     def earliest(self, *fields):
664.         if self.query.is_sliced:
665.             raise TypeError('Cannot change a query once a slice has been taken.')
666.         return self._earliest(*fields)
667. 
668.     def latest(self, *fields):
669.         if self.query.is_sliced:
670.             raise TypeError('Cannot change a query once a slice has been taken.')
671.         return self.reverse()._earliest(*fields)
672. 
673.     def first(self):
674.         """Return the first object of a query or None if no match is found."""
675.         for obj in (self if self.ordered else self.order_by('pk'))[:1]:
676.             return obj
677. 
678.     def last(self):
679.         """Return the last object of a query or None if no match is found."""
680.         for obj in (self.reverse() if self.ordered else self.order_by('-pk'))[:1]:
681.             return obj
682. 
683.     def in_bulk(self, id_list=None, *, field_name='pk'):
684.         """
685.         Return a dictionary mapping each of the given IDs to the object with
686.         that ID. If `id_list` isn't provided, evaluate the entire QuerySet.
687.         """
688.         if self.query.is_sliced:
689.             raise TypeError("Cannot use 'limit' or 'offset' with in_bulk().")
690.         opts = self.model._meta
691.         unique_fields = [
692.             constraint.fields[0]
693.             for constraint in opts.total_unique_constraints
694.             if len(constraint.fields) == 1
695.         ]
696.         if (
697.             field_name != 'pk' and
698.             not opts.get_field(field_name).unique and
699.             field_name not in unique_fields and
700.             self.query.distinct_fields != (field_name,)
701.         ):
702.             raise ValueError("in_bulk()'s field_name must be a unique field but %r isn't." % field_name)
703.         if id_list is not None:
704.             if not id_list:
705.                 return {}
706.             filter_key = '{}__in'.format(field_name)
707.             batch_size = connections[self.db].features.max_query_params
708.             id_list = tuple(id_list)
709.             # If the database has a limit on the number of query parameters
710.             # (e.g. SQLite), retrieve objects in batches if necessary.
711.             if batch_size and batch_size < len(id_list):
712.                 qs = ()
713.                 for offset in range(0, len(id_list), batch_size):
714.                     batch = id_list[offset:offset + batch_size]
715.                     qs += tuple(self.filter(**{filter_key: batch}).order_by())
716.             else:
717.                 qs = self.filter(**{filter_key: id_list}).order_by()
718.         else:
719.             qs = self._chain()
720.         return {getattr(obj, field_name): obj for obj in qs}
721. 
722.     def delete(self):
723.         """Delete the records in the current QuerySet."""
724.         self._not_support_combined_queries('delete')
725.         if self.query.is_sliced:
726.             raise TypeError("Cannot use 'limit' or 'offset' with delete().")
727.         if self.query.distinct or self.query.distinct_fields:
728.             raise TypeError('Cannot call delete() after .distinct().')
729.         if self._fields is not None:
730.             raise TypeError("Cannot call delete() after .values() or .values_list()")
731. 
732.         del_query = self._chain()
733. 
734.         # The delete is actually 2 queries - one to find related objects,
735.         # and one to delete. Make sure that the discovery of related
736.         # objects is performed on the same database as the deletion.
737.         del_query._for_write = True
738. 
739.         # Disable non-supported fields.
740.         del_query.query.select_for_update = False
741.         del_query.query.select_related = False
742.         del_query.query.clear_ordering(force_empty=True)
743. 
744.         collector = Collector(using=del_query.db)
745.         collector.collect(del_query)
746.         deleted, _rows_count = collector.delete()
747. 
748.         # Clear the result cache, in case this QuerySet gets reused.
749.         self._result_cache = None
750.         return deleted, _rows_count
751. 
752.     delete.alters_data = True
753.     delete.queryset_only = True
754. 
755.     def _raw_delete(self, using):
756.         """
757.         Delete objects found from the given queryset in single direct SQL
758.         query. No signals are sent and there is no protection for cascades.
759.         """
760.         query = self.query.clone()
761.         query.__class__ = sql.DeleteQuery
762.         cursor = query.get_compiler(using).execute_sql(CURSOR)
763.         if cursor:
764.             with cursor:
765.                 return cursor.rowcount
766.         return 0
767.     _raw_delete.alters_data = True
768. 
769.     def update(self, **kwargs):
770.         """
771.         Update all elements in the current QuerySet, setting all the given
772.         fields to the appropriate values.
773.         """
774.         self._not_support_combined_queries('update')
775.         if self.query.is_sliced:
776.             raise TypeError('Cannot update a query once a slice has been taken.')
777.         self._for_write = True
778.         query = self.query.chain(sql.UpdateQuery)
779.         query.add_update_values(kwargs)
780.         # Clear any annotations so that they won't be present in subqueries.
781.         query.annotations = {}
782.         with transaction.mark_for_rollback_on_error(using=self.db):
783.             rows = query.get_compiler(self.db).execute_sql(CURSOR)
784.         self._result_cache = None
785.         return rows
786.     update.alters_data = True
787. 
788.     def _update(self, values):
789.         """
790.         A version of update() that accepts field objects instead of field names.
791.         Used primarily for model saving and not intended for use by general
792.         code (it requires too much poking around at model internals to be
793.         useful at that level).
794.         """
795.         if self.query.is_sliced:
796.             raise TypeError('Cannot update a query once a slice has been taken.')
797.         query = self.query.chain(sql.UpdateQuery)
798.         query.add_update_fields(values)
799.         # Clear any annotations so that they won't be present in subqueries.
800.         query.annotations = {}
801.         self._result_cache = None
802.         return query.get_compiler(self.db).execute_sql(CURSOR)
803.     _update.alters_data = True
804.     _update.queryset_only = False
805. 
806.     def exists(self):
807.         if self._result_cache is None:
808.             return self.query.has_results(using=self.db)
809.         return bool(self._result_cache)
810. 
811.     def contains(self, obj):
812.         """Return True if the queryset contains an object."""
813.         self._not_support_combined_queries('contains')
814.         if self._fields is not None:
815.             raise TypeError(
816.                 'Cannot call QuerySet.contains() after .values() or '
817.                 '.values_list().'
818.             )
819.         try:
820.             if obj._meta.concrete_model != self.model._meta.concrete_model:
821.                 return False
822.         except AttributeError:
823.             raise TypeError("'obj' must be a model instance.")
824.         if obj.pk is None:
825.             raise ValueError(
826.                 'QuerySet.contains() cannot be used on unsaved objects.'
827.             )
828.         if self._result_cache is not None:
829.             return obj in self._result_cache
830.         return self.filter(pk=obj.pk).exists()
831. 
832.     def _prefetch_related_objects(self):
833.         # This method can only be called once the result cache has been filled.
834.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
835.         self._prefetch_done = True
836. 
837.     def explain(self, *, format=None, **options):
838.         return self.query.explain(using=self.db, format=format, **options)
839. 
840.     ##################################################
841.     # PUBLIC METHODS THAT RETURN A QUERYSET SUBCLASS #
842.     ##################################################
843. 
844.     def raw(self, raw_query, params=(), translations=None, using=None):
845.         if using is None:
846.             using = self.db
847.         qs = RawQuerySet(raw_query, model=self.model, params=params, translations=translations, using=using)
848.         qs._prefetch_related_lookups = self._prefetch_related_lookups[:]
849.         return qs
850. 
851.     def _values(self, *fields, **expressions):
852.         clone = self._chain()
853.         if expressions:
854.             clone = clone.annotate(**expressions)
855.         clone._fields = fields
856.         clone.query.set_values(fields)
857.         return clone
858. 
859.     def values(self, *fields, **expressions):
860.         fields += tuple(expressions)
861.         clone = self._values(*fields, **expressions)
862.         clone._iterable_class = ValuesIterable
863.         return clone
864. 
865.     def values_list(self, *fields, flat=False, named=False):
866.         if flat and named:
867.             raise TypeError("'flat' and 'named' can't be used together.")
868.         if flat and len(fields) > 1:
869.             raise TypeError("'flat' is not valid when values_list is called with more than one field.")
870. 
871.         field_names = {f for f in fields if not hasattr(f, 'resolve_expression')}
872.         _fields = []
873.         expressions = {}
874.         counter = 1
875.         for field in fields:
876.             if hasattr(field, 'resolve_expression'):
877.                 field_id_prefix = getattr(field, 'default_alias', field.__class__.__name__.lower())
878.                 while True:
879.                     field_id = field_id_prefix + str(counter)
880.                     counter += 1
881.                     if field_id not in field_names:
882.                         break
883.                 expressions[field_id] = field
884.                 _fields.append(field_id)
885.             else:
886.                 _fields.append(field)
887. 
888.         clone = self._values(*_fields, **expressions)
889.         clone._iterable_class = (
890.             NamedValuesListIterable if named
891.             else FlatValuesListIterable if flat
892.             else ValuesListIterable
893.         )
894.         return clone
895. 
896.     def dates(self, field_name, kind, order='ASC'):
897.         """
898.         Return a list of date objects representing all available dates for
899.         the given field_name, scoped to 'kind'.
900.         """
901.         assert kind in ('year', 'month', 'week', 'day'), \
902.             "'kind' must be one of 'year', 'month', 'week', or 'day'."
903.         assert order in ('ASC', 'DESC'), \
904.             "'order' must be either 'ASC' or 'DESC'."
905.         return self.annotate(
906.             datefield=Trunc(field_name, kind, output_field=DateField()),
907.             plain_field=F(field_name)
908.         ).values_list(
909.             'datefield', flat=True
910.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datefield')
911. 
912.     def datetimes(self, field_name, kind, order='ASC', tzinfo=None, is_dst=None):
913.         """
914.         Return a list of datetime objects representing all available
915.         datetimes for the given field_name, scoped to 'kind'.
916.         """
917.         assert kind in ('year', 'month', 'week', 'day', 'hour', 'minute', 'second'), \
918.             "'kind' must be one of 'year', 'month', 'week', 'day', 'hour', 'minute', or 'second'."
919.         assert order in ('ASC', 'DESC'), \
920.             "'order' must be either 'ASC' or 'DESC'."
921.         if settings.USE_TZ:
922.             if tzinfo is None:
923.                 tzinfo = timezone.get_current_timezone()
924.         else:
925.             tzinfo = None
926.         return self.annotate(
927.             datetimefield=Trunc(
928.                 field_name,
929.                 kind,
930.                 output_field=DateTimeField(),
931.                 tzinfo=tzinfo,
932.                 is_dst=is_dst,
933.             ),
934.             plain_field=F(field_name)
935.         ).values_list(
936.             'datetimefield', flat=True
937.         ).distinct().filter(plain_field__isnull=False).order_by(('-' if order == 'DESC' else '') + 'datetimefield')
938. 
939.     def none(self):
940.         """Return an empty QuerySet."""
941.         clone = self._chain()
942.         clone.query.set_empty()
943.         return clone
944. 
945.     ##################################################################
946.     # PUBLIC METHODS THAT ALTER ATTRIBUTES AND RETURN A NEW QUERYSET #
947.     ##################################################################
948. 
949.     def all(self):
950.         """
951.         Return a new QuerySet that is a copy of the current one. This allows a
952.         QuerySet to proxy for a model manager in some cases.
953.         """
954.         return self._chain()
955. 
956.     def filter(self, *args, **kwargs):
957.         """
958.         Return a new QuerySet instance with the args ANDed to the existing
959.         set.
960.         """
961.         self._not_support_combined_queries('filter')
962.         return self._filter_or_exclude(False, args, kwargs)
963. 
964.     def exclude(self, *args, **kwargs):
965.         """
966.         Return a new QuerySet instance with NOT (args) ANDed to the existing
967.         set.
968.         """
969.         self._not_support_combined_queries('exclude')
970.         return self._filter_or_exclude(True, args, kwargs)
971. 
972.     def _filter_or_exclude(self, negate, args, kwargs):
973.         if (args or kwargs) and self.query.is_sliced:
974.             raise TypeError('Cannot filter a query once a slice has been taken.')
975.         clone = self._chain()
976.         if self._defer_next_filter:
977.             self._defer_next_filter = False
978.             clone._deferred_filter = negate, args, kwargs
979.         else:
980.             clone._filter_or_exclude_inplace(negate, args, kwargs)
981.         return clone
982. 
983.     def _filter_or_exclude_inplace(self, negate, args, kwargs):
984.         if negate:
985.             self._query.add_q(~Q(*args, **kwargs))
986.         else:
987.             self._query.add_q(Q(*args, **kwargs))
988. 
989.     def complex_filter(self, filter_obj):
990.         """
991.         Return a new QuerySet instance with filter_obj added to the filters.
992. 
993.         filter_obj can be a Q object or a dictionary of keyword lookup
994.         arguments.
995. 
996.         This exists to support framework features such as 'limit_choices_to',
997.         and usually it will be more natural to use other methods.
998.         """
999.         if isinstance(filter_obj, Q):
1000.             clone = self._chain()
1001.             clone.query.add_q(filter_obj)
1002.             return clone
1003.         else:
1004.             return self._filter_or_exclude(False, args=(), kwargs=filter_obj)
1005. 
1006.     def _combinator_query(self, combinator, *other_qs, all=False):
1007.         # Clone the query to inherit the select list and everything
1008.         clone = self._chain()
1009.         # Clear limits and ordering so they can be reapplied
1010.         clone.query.clear_ordering(True)
1011.         clone.query.clear_limits()
1012.         clone.query.combined_queries = (self.query,) + tuple(qs.query for qs in other_qs)
1013.         clone.query.combinator = combinator
1014.         clone.query.combinator_all = all
1015.         return clone
1016. 
1017.     def union(self, *other_qs, all=False):
1018.         # If the query is an EmptyQuerySet, combine all nonempty querysets.
1019.         if isinstance(self, EmptyQuerySet):
1020.             qs = [q for q in other_qs if not isinstance(q, EmptyQuerySet)]
1021.             if not qs:
1022.                 return self
1023.             if len(qs) == 1:
1024.                 return qs[0]
1025.             return qs[0]._combinator_query('union', *qs[1:], all=all)
1026.         return self._combinator_query('union', *other_qs, all=all)
1027. 
1028.     def intersection(self, *other_qs):
1029.         # If any query is an EmptyQuerySet, return it.
1030.         if isinstance(self, EmptyQuerySet):
1031.             return self
1032.         for other in other_qs:
1033.             if isinstance(other, EmptyQuerySet):
1034.                 return other
1035.         return self._combinator_query('intersection', *other_qs)
1036. 
1037.     def difference(self, *other_qs):
1038.         # If the query is an EmptyQuerySet, return it.
1039.         if isinstance(self, EmptyQuerySet):
1040.             return self
1041.         return self._combinator_query('difference', *other_qs)
1042. 
1043.     def select_for_update(self, nowait=False, skip_locked=False, of=(), no_key=False):
1044.         """
1045.         Return a new QuerySet instance that will select objects with a
1046.         FOR UPDATE lock.
1047.         """
1048.         if nowait and skip_locked:
1049.             raise ValueError('The nowait option cannot be used with skip_locked.')
1050.         obj = self._chain()
1051.         obj._for_write = True
1052.         obj.query.select_for_update = True
1053.         obj.query.select_for_update_nowait = nowait
1054.         obj.query.select_for_update_skip_locked = skip_locked
1055.         obj.query.select_for_update_of = of
1056.         obj.query.select_for_no_key_update = no_key
1057.         return obj
1058. 
1059.     def select_related(self, *fields):
1060.         """
1061.         Return a new QuerySet instance that will select related objects.
1062. 
1063.         If fields are specified, they must be ForeignKey fields and only those
1064.         related objects are included in the selection.
1065. 
1066.         If select_related(None) is called, clear the list.
1067.         """
1068.         self._not_support_combined_queries('select_related')
1069.         if self._fields is not None:
1070.             raise TypeError("Cannot call select_related() after .values() or .values_list()")
1071. 
1072.         obj = self._chain()
1073.         if fields == (None,):
1074.             obj.query.select_related = False
1075.         elif fields:
1076.             obj.query.add_select_related(fields)
1077.         else:
1078.             obj.query.select_related = True
1079.         return obj
1080. 
1081.     def prefetch_related(self, *lookups):
1082.         """
1083.         Return a new QuerySet instance that will prefetch the specified
1084.         Many-To-One and Many-To-Many related objects when the QuerySet is
1085.         evaluated.
1086. 
1087.         When prefetch_related() is called more than once, append to the list of
1088.         prefetch lookups. If prefetch_related(None) is called, clear the list.
1089.         """
1090.         self._not_support_combined_queries('prefetch_related')
1091.         clone = self._chain()
1092.         if lookups == (None,):
1093.             clone._prefetch_related_lookups = ()
1094.         else:
1095.             for lookup in lookups:
1096.                 if isinstance(lookup, Prefetch):
1097.                     lookup = lookup.prefetch_to
1098.                 lookup = lookup.split(LOOKUP_SEP, 1)[0]
1099.                 if lookup in self.query._filtered_relations:
1100.                     raise ValueError('prefetch_related() is not supported with FilteredRelation.')
1101.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1102.         return clone
1103. 
1104.     def annotate(self, *args, **kwargs):
1105.         """
1106.         Return a query set in which the returned objects have been annotated
1107.         with extra data or aggregations.
1108.         """
1109.         self._not_support_combined_queries('annotate')
1110.         return self._annotate(args, kwargs, select=True)
1111. 
1112.     def alias(self, *args, **kwargs):
1113.         """
1114.         Return a query set with added aliases for extra data or aggregations.
1115.         """
1116.         self._not_support_combined_queries('alias')
1117.         return self._annotate(args, kwargs, select=False)
1118. 
1119.     def _annotate(self, args, kwargs, select=True):
1120.         self._validate_values_are_expressions(args + tuple(kwargs.values()), method_name='annotate')
1121.         annotations = {}
1122.         for arg in args:
1123.             # The default_alias property may raise a TypeError.
1124.             try:
1125.                 if arg.default_alias in kwargs:
1126.                     raise ValueError("The named annotation '%s' conflicts with the "
1127.                                      "default name for another annotation."
1128.                                      % arg.default_alias)
1129.             except TypeError:
1130.                 raise TypeError("Complex annotations require an alias")
1131.             annotations[arg.default_alias] = arg
1132.         annotations.update(kwargs)
1133. 
1134.         clone = self._chain()
1135.         names = self._fields
1136.         if names is None:
1137.             names = set(chain.from_iterable(
1138.                 (field.name, field.attname) if hasattr(field, 'attname') else (field.name,)
1139.                 for field in self.model._meta.get_fields()
1140.             ))
1141. 
1142.         for alias, annotation in annotations.items():
1143.             if alias in names:
1144.                 raise ValueError("The annotation '%s' conflicts with a field on "
1145.                                  "the model." % alias)
1146.             if isinstance(annotation, FilteredRelation):
1147.                 clone.query.add_filtered_relation(annotation, alias)
1148.             else:
1149.                 clone.query.add_annotation(
1150.                     annotation, alias, is_summary=False, select=select,
1151.                 )
1152.         for alias, annotation in clone.query.annotations.items():
1153.             if alias in annotations and annotation.contains_aggregate:
1154.                 if clone._fields is None:
1155.                     clone.query.group_by = True
1156.                 else:
1157.                     clone.query.set_group_by()
1158.                 break
1159. 
1160.         return clone
1161. 
1162.     def order_by(self, *field_names):
1163.         """Return a new QuerySet instance with the ordering changed."""
1164.         if self.query.is_sliced:
1165.             raise TypeError('Cannot reorder a query once a slice has been taken.')
1166.         obj = self._chain()
1167.         obj.query.clear_ordering(force_empty=False)
1168.         obj.query.add_ordering(*field_names)
1169.         return obj
1170. 
1171.     def distinct(self, *field_names):
1172.         """
1173.         Return a new QuerySet instance that will select only distinct results.
1174.         """
1175.         self._not_support_combined_queries('distinct')
1176.         if self.query.is_sliced:
1177.             raise TypeError('Cannot create distinct fields once a slice has been taken.')
1178.         obj = self._chain()
1179.         obj.query.add_distinct_fields(*field_names)
1180.         return obj
1181. 
1182.     def extra(self, select=None, where=None, params=None, tables=None,
1183.               order_by=None, select_params=None):
1184.         """Add extra SQL fragments to the query."""
1185.         self._not_support_combined_queries('extra')
1186.         if self.query.is_sliced:
1187.             raise TypeError('Cannot change a query once a slice has been taken.')
1188.         clone = self._chain()
1189.         clone.query.add_extra(select, select_params, where, params, tables, order_by)
1190.         return clone
1191. 
1192.     def reverse(self):
1193.         """Reverse the ordering of the QuerySet."""
1194.         if self.query.is_sliced:
1195.             raise TypeError('Cannot reverse a query once a slice has been taken.')
1196.         clone = self._chain()
1197.         clone.query.standard_ordering = not clone.query.standard_ordering
1198.         return clone
1199. 
1200.     def defer(self, *fields):
1201.         """
1202.         Defer the loading of data for certain fields until they are accessed.
1203.         Add the set of deferred fields to any existing set of deferred fields.
1204.         The only exception to this is if None is passed in as the only
1205.         parameter, in which case removal all deferrals.
1206.         """
1207.         self._not_support_combined_queries('defer')
1208.         if self._fields is not None:
1209.             raise TypeError("Cannot call defer() after .values() or .values_list()")
1210.         clone = self._chain()
1211.         if fields == (None,):
1212.             clone.query.clear_deferred_loading()
1213.         else:
1214.             clone.query.add_deferred_loading(fields)
1215.         return clone
1216. 
1217.     def only(self, *fields):
1218.         """
1219.         Essentially, the opposite of defer(). Only the fields passed into this
1220.         method and that are not already specified as deferred are loaded
1221.         immediately when the queryset is evaluated.
1222.         """
1223.         self._not_support_combined_queries('only')
1224.         if self._fields is not None:
1225.             raise TypeError("Cannot call only() after .values() or .values_list()")
1226.         if fields == (None,):
1227.             # Can only pass None to defer(), not only(), as the rest option.
1228.             # That won't stop people trying to do this, so let's be explicit.
1229.             raise TypeError("Cannot pass None as an argument to only().")
1230.         for field in fields:
1231.             field = field.split(LOOKUP_SEP, 1)[0]
1232.             if field in self.query._filtered_relations:
1233.                 raise ValueError('only() is not supported with FilteredRelation.')
1234.         clone = self._chain()
1235.         clone.query.add_immediate_loading(fields)
1236.         return clone
1237. 
1238.     def using(self, alias):
1239.         """Select which database this QuerySet should execute against."""
1240.         clone = self._chain()
1241.         clone._db = alias
1242.         return clone
1243. 
1244.     ###################################
1245.     # PUBLIC INTROSPECTION ATTRIBUTES #
1246.     ###################################
1247. 
1248.     @property
1249.     def ordered(self):
1250.         """
1251.         Return True if the QuerySet is ordered -- i.e. has an order_by()
1252.         clause or a default ordering on the model (or is empty).
1253.         """
1254.         if isinstance(self, EmptyQuerySet):
1255.             return True
1256.         if self.query.extra_order_by or self.query.order_by:
1257.             return True
1258.         elif (
1259.             self.query.default_ordering and
1260.             self.query.get_meta().ordering and
1261.             # A default ordering doesn't affect GROUP BY queries.
1262.             not self.query.group_by
1263.         ):
1264.             return True
1265.         else:
1266.             return False
1267. 
1268.     @property
1269.     def db(self):
1270.         """Return the database used if this query is executed now."""
1271.         if self._for_write:
1272.             return self._db or router.db_for_write(self.model, **self._hints)
1273.         return self._db or router.db_for_read(self.model, **self._hints)
1274. 
1275.     ###################
1276.     # PRIVATE METHODS #
1277.     ###################
1278. 
1279.     def _insert(self, objs, fields, returning_fields=None, raw=False, using=None, ignore_conflicts=False):
1280.         """
1281.         Insert a new record for the given model. This provides an interface to
1282.         the InsertQuery class and is how Model.save() is implemented.
1283.         """
1284.         self._for_write = True
1285.         if using is None:
1286.             using = self.db
1287.         query = sql.InsertQuery(self.model, ignore_conflicts=ignore_conflicts)
1288.         query.insert_values(fields, objs, raw=raw)
1289.         return query.get_compiler(using=using).execute_sql(returning_fields)
1290.     _insert.alters_data = True
1291.     _insert.queryset_only = False
1292. 
1293.     def _batched_insert(self, objs, fields, batch_size, ignore_conflicts=False):
1294.         """
1295.         Helper method for bulk_create() to insert objs one batch at a time.
1296.         """
1297.         if ignore_conflicts and not connections[self.db].features.supports_ignore_conflicts:
1298.             raise NotSupportedError('This database backend does not support ignoring conflicts.')
1299.         ops = connections[self.db].ops
1300.         max_batch_size = max(ops.bulk_batch_size(fields, objs), 1)
1301.         batch_size = min(batch_size, max_batch_size) if batch_size else max_batch_size
1302.         inserted_rows = []
1303.         bulk_return = connections[self.db].features.can_return_rows_from_bulk_insert
1304.         for item in [objs[i:i + batch_size] for i in range(0, len(objs), batch_size)]:
1305.             if bulk_return and not ignore_conflicts:
1306.                 inserted_rows.extend(self._insert(
1307.                     item, fields=fields, using=self.db,
1308.                     returning_fields=self.model._meta.db_returning_fields,
1309.                     ignore_conflicts=ignore_conflicts,
1310.                 ))
1311.             else:
1312.                 self._insert(item, fields=fields, using=self.db, ignore_conflicts=ignore_conflicts)
1313.         return inserted_rows
1314. 
1315.     def _chain(self, **kwargs):
1316.         """
1317.         Return a copy of the current QuerySet that's ready for another
1318.         operation.
1319.         """
1320.         obj = self._clone()
1321.         if obj._sticky_filter:
1322.             obj.query.filter_is_sticky = True
1323.             obj._sticky_filter = False
1324.         obj.__dict__.update(kwargs)
1325.         return obj
1326. 
1327.     def _clone(self):
1328.         """
1329.         Return a copy of the current QuerySet. A lightweight alternative
1330.         to deepcopy().
1331.         """
1332.         c = self.__class__(model=self.model, query=self.query.chain(), using=self._db, hints=self._hints)
1333.         c._sticky_filter = self._sticky_filter
1334.         c._for_write = self._for_write
1335.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1336.         c._known_related_objects = self._known_related_objects
1337.         c._iterable_class = self._iterable_class
1338.         c._fields = self._fields
1339.         return c
1340. 
1341.     def _fetch_all(self):
1342.         if self._result_cache is None:
1343.             self._result_cache = list(self._iterable_class(self))
1344.         if self._prefetch_related_lookups and not self._prefetch_done:
1345.             self._prefetch_related_objects()
1346. 
1347.     def _next_is_sticky(self):
1348.         """
1349.         Indicate that the next filter call and the one following that should
1350.         be treated as a single filter. This is only important when it comes to
1351.         determining when to reuse tables for many-to-many filters. Required so
1352.         that we can filter naturally on the results of related managers.
1353. 
1354.         This doesn't return a clone of the current QuerySet (it returns
1355.         "self"). The method is only used internally and should be immediately
1356.         followed by a filter() that does create a clone.
1357.         """
1358.         self._sticky_filter = True
1359.         return self
1360. 
1361.     def _merge_sanity_check(self, other):
1362.         """Check that two QuerySet classes may be merged."""
1363.         if self._fields is not None and (
1364.                 set(self.query.values_select) != set(other.query.values_select) or
1365.                 set(self.query.extra_select) != set(other.query.extra_select) or
1366.                 set(self.query.annotation_select) != set(other.query.annotation_select)):
1367.             raise TypeError(
1368.                 "Merging '%s' classes must involve the same values in each case."
1369.                 % self.__class__.__name__
1370.             )
1371. 
1372.     def _merge_known_related_objects(self, other):
1373.         """
1374.         Keep track of all known related objects from either QuerySet instance.
1375.         """
1376.         for field, objects in other._known_related_objects.items():
1377.             self._known_related_objects.setdefault(field, {}).update(objects)
1378. 
1379.     def resolve_expression(self, *args, **kwargs):
1380.         if self._fields and len(self._fields) > 1:
1381.             # values() queryset can only be used as nested queries
1382.             # if they are set up to select only a single field.
1383.             raise TypeError('Cannot use multi-field values as a filter value.')
1384.         query = self.query.resolve_expression(*args, **kwargs)
1385.         query._db = self._db
1386.         return query
1387.     resolve_expression.queryset_only = True
1388. 
1389.     def _add_hints(self, **hints):
1390.         """
1391.         Update hinting information for use by routers. Add new key/values or
1392.         overwrite existing key/values.
1393.         """
1394.         self._hints.update(hints)
1395. 
1396.     def _has_filters(self):
1397.         """
1398.         Check if this QuerySet has any filtering going on. This isn't
1399.         equivalent with checking if all objects are present in results, for
1400.         example, qs[1:]._has_filters() -> False.
1401.         """
1402.         return self.query.has_filters()
1403. 
1404.     @staticmethod
1405.     def _validate_values_are_expressions(values, method_name):
1406.         invalid_args = sorted(str(arg) for arg in values if not hasattr(arg, 'resolve_expression'))
1407.         if invalid_args:
1408.             raise TypeError(
1409.                 'QuerySet.%s() received non-expression(s): %s.' % (
1410.                     method_name,
1411.                     ', '.join(invalid_args),
1412.                 )
1413.             )
1414. 
1415.     def _not_support_combined_queries(self, operation_name):
1416.         if self.query.combinator:
1417.             raise NotSupportedError(
1418.                 'Calling QuerySet.%s() after %s() is not supported.'
1419.                 % (operation_name, self.query.combinator)
1420.             )
1421. 
1422. 
1423. class InstanceCheckMeta(type):
1424.     def __instancecheck__(self, instance):
1425.         return isinstance(instance, QuerySet) and instance.query.is_empty()
1426. 
1427. 
1428. class EmptyQuerySet(metaclass=InstanceCheckMeta):
1429.     """
1430.     Marker class to checking if a queryset is empty by .none():
1431.         isinstance(qs.none(), EmptyQuerySet) -> True
1432.     """
1433. 
1434.     def __init__(self, *args, **kwargs):
1435.         raise TypeError("EmptyQuerySet can't be instantiated")
1436. 
1437. 
1438. class RawQuerySet:
1439.     """
1440.     Provide an iterator which converts the results of raw SQL queries into
1441.     annotated model instances.
1442.     """
1443.     def __init__(self, raw_query, model=None, query=None, params=(),
1444.                  translations=None, using=None, hints=None):
1445.         self.raw_query = raw_query
1446.         self.model = model
1447.         self._db = using
1448.         self._hints = hints or {}
1449.         self.query = query or sql.RawQuery(sql=raw_query, using=self.db, params=params)
1450.         self.params = params
1451.         self.translations = translations or {}
1452.         self._result_cache = None
1453.         self._prefetch_related_lookups = ()
1454.         self._prefetch_done = False
1455. 
1456.     def resolve_model_init_order(self):
1457.         """Resolve the init field names and value positions."""
1458.         converter = connections[self.db].introspection.identifier_converter
1459.         model_init_fields = [f for f in self.model._meta.fields if converter(f.column) in self.columns]
1460.         annotation_fields = [(column, pos) for pos, column in enumerate(self.columns)
1461.                              if column not in self.model_fields]
1462.         model_init_order = [self.columns.index(converter(f.column)) for f in model_init_fields]
1463.         model_init_names = [f.attname for f in model_init_fields]
1464.         return model_init_names, model_init_order, annotation_fields
1465. 
1466.     def prefetch_related(self, *lookups):
1467.         """Same as QuerySet.prefetch_related()"""
1468.         clone = self._clone()
1469.         if lookups == (None,):
1470.             clone._prefetch_related_lookups = ()
1471.         else:
1472.             clone._prefetch_related_lookups = clone._prefetch_related_lookups + lookups
1473.         return clone
1474. 
1475.     def _prefetch_related_objects(self):
1476.         prefetch_related_objects(self._result_cache, *self._prefetch_related_lookups)
1477.         self._prefetch_done = True
1478. 
1479.     def _clone(self):
1480.         """Same as QuerySet._clone()"""
1481.         c = self.__class__(
1482.             self.raw_query, model=self.model, query=self.query, params=self.params,
1483.             translations=self.translations, using=self._db, hints=self._hints
1484.         )
1485.         c._prefetch_related_lookups = self._prefetch_related_lookups[:]
1486.         return c
1487. 
1488.     def _fetch_all(self):
1489.         if self._result_cache is None:
1490.             self._result_cache = list(self.iterator())
1491.         if self._prefetch_related_lookups and not self._prefetch_done:
1492.             self._prefetch_related_objects()
1493. 
1494.     def __len__(self):
1495.         self._fetch_all()
1496.         return len(self._result_cache)
1497. 
1498.     def __bool__(self):
1499.         self._fetch_all()
1500.         return bool(self._result_cache)
1501. 
1502.     def __iter__(self):
1503.         self._fetch_all()
1504.         return iter(self._result_cache)
1505. 
1506.     def iterator(self):
1507.         # Cache some things for performance reasons outside the loop.
1508.         db = self.db
1509.         compiler = connections[db].ops.compiler('SQLCompiler')(
1510.             self.query, connections[db], db
1511.         )
1512. 
1513.         query = iter(self.query)
1514. 
1515.         try:
1516.             model_init_names, model_init_pos, annotation_fields = self.resolve_model_init_order()
1517.             if self.model._meta.pk.attname not in model_init_names:
1518.                 raise exceptions.FieldDoesNotExist(
1519.                     'Raw query must include the primary key'
1520.                 )
1521.             model_cls = self.model
1522.             fields = [self.model_fields.get(c) for c in self.columns]
1523.             converters = compiler.get_converters([
1524.                 f.get_col(f.model._meta.db_table) if f else None for f in fields
1525.             ])
1526.             if converters:
1527.                 query = compiler.apply_converters(query, converters)
1528.             for values in query:
1529.                 # Associate fields to values
1530.                 model_init_values = [values[pos] for pos in model_init_pos]
1531.                 instance = model_cls.from_db(db, model_init_names, model_init_values)
1532.                 if annotation_fields:
1533.                     for column, pos in annotation_fields:
1534.                         setattr(instance, column, values[pos])
1535.                 yield instance
1536.         finally:
1537.             # Done iterating the Query. If it has its own cursor, close it.
1538.             if hasattr(self.query, 'cursor') and self.query.cursor:
1539.                 self.query.cursor.close()
1540. 
1541.     def __repr__(self):
1542.         return "<%s: %s>" % (self.__class__.__name__, self.query)
1543. 
1544.     def __getitem__(self, k):
1545.         return list(self)[k]
1546. 
1547.     @property
1548.     def db(self):
1549.         """Return the database used if this query is executed now."""
1550.         return self._db or router.db_for_read(self.model, **self._hints)
1551. 
1552.     def using(self, alias):
1553.         """Select the database this RawQuerySet should execute against."""
1554.         return RawQuerySet(
1555.             self.raw_query, model=self.model,
1556.             query=self.query.chain(using=alias),
1557.             params=self.params, translations=self.translations,
1558.             using=alias,
1559.         )
1560. 
1561.     @cached_property
1562.     def columns(self):
1563.         """
1564.         A list of model field names in the order they'll appear in the
1565.         query results.
1566.         """
1567.         columns = self.query.get_columns()
1568.         # Adjust any column names which don't match field names
1569.         for (query_name, model_name) in self.translations.items():
1570.             # Ignore translations for nonexistent column names
1571.             try:
1572.                 index = columns.index(query_name)
1573.             except ValueError:
1574.                 pass
1575.             else:
1576.                 columns[index] = model_name
1577.         return columns
1578. 
1579.     @cached_property
1580.     def model_fields(self):
1581.         """A dict mapping column names to model field names."""
1582.         converter = connections[self.db].introspection.identifier_converter
1583.         model_fields = {}
1584.         for field in self.model._meta.fields:
1585.             name, column = field.get_attname_column()
1586.             model_fields[converter(column)] = field
1587.         return model_fields
1588. 
1589. 
1590. class Prefetch:
1591.     def __init__(self, lookup, queryset=None, to_attr=None):
1592.         # `prefetch_through` is the path we traverse to perform the prefetch.
1593.         self.prefetch_through = lookup
1594.         # `prefetch_to` is the path to the attribute that stores the result.
1595.         self.prefetch_to = lookup
1596.         if queryset is not None and (
1597.             isinstance(queryset, RawQuerySet) or (
1598.                 hasattr(queryset, '_iterable_class') and
1599.                 not issubclass(queryset._iterable_class, ModelIterable)
1600.             )
1601.         ):
1602.             raise ValueError(
1603.                 'Prefetch querysets cannot use raw(), values(), and '
1604.                 'values_list().'
1605.             )
1606.         if to_attr:
1607.             self.prefetch_to = LOOKUP_SEP.join(lookup.split(LOOKUP_SEP)[:-1] + [to_attr])
1608. 
1609.         self.queryset = queryset
1610.         self.to_attr = to_attr
1611. 
1612.     def __getstate__(self):
1613.         obj_dict = self.__dict__.copy()
1614.         if self.queryset is not None:
1615.             # Prevent the QuerySet from being evaluated
1616.             obj_dict['queryset'] = self.queryset._chain(
1617.                 _result_cache=[],
1618.                 _prefetch_done=True,
1619.             )
1620.         return obj_dict
1621. 
1622.     def add_prefix(self, prefix):
1623.         self.prefetch_through = prefix + LOOKUP_SEP + self.prefetch_through
1624.         self.prefetch_to = prefix + LOOKUP_SEP + self.prefetch_to
1625. 
1626.     def get_current_prefetch_to(self, level):
1627.         return LOOKUP_SEP.join(self.prefetch_to.split(LOOKUP_SEP)[:level + 1])
1628. 
1629.     def get_current_to_attr(self, level):
1630.         parts = self.prefetch_to.split(LOOKUP_SEP)
1631.         to_attr = parts[level]
1632.         as_attr = self.to_attr and level == len(parts) - 1
1633.         return to_attr, as_attr
1634. 
1635.     def get_current_queryset(self, level):
1636.         if self.get_current_prefetch_to(level) == self.prefetch_to:
1637.             return self.queryset
1638.         return None
1639. 
1640.     def __eq__(self, other):
1641.         if not isinstance(other, Prefetch):
1642.             return NotImplemented
1643.         return self.prefetch_to == other.prefetch_to
1644. 
1645.     def __hash__(self):
1646.         return hash((self.__class__, self.prefetch_to))
1647. 
1648. 
1649. def normalize_prefetch_lookups(lookups, prefix=None):
1650.     """Normalize lookups into Prefetch objects."""
1651.     ret = []
1652.     for lookup in lookups:
1653.         if not isinstance(lookup, Prefetch):
1654.             lookup = Prefetch(lookup)
1655.         if prefix:
1656.             lookup.add_prefix(prefix)
1657.         ret.append(lookup)
1658.     return ret
1659. 
1660. 
1661. def prefetch_related_objects(model_instances, *related_lookups):
1662.     """
1663.     Populate prefetched object caches for a list of model instances based on
1664.     the lookups/Prefetch instances given.
1665.     """
1666.     if not model_instances:
1667.         return  # nothing to do
1668. 
1669.     # We need to be able to dynamically add to the list of prefetch_related
1670.     # lookups that we look up (see below).  So we need some book keeping to
1671.     # ensure we don't do duplicate work.
1672.     done_queries = {}    # dictionary of things like 'foo__bar': [results]
1673. 
1674.     auto_lookups = set()  # we add to this as we go through.
1675.     followed_descriptors = set()  # recursion protection
1676. 
1677.     all_lookups = normalize_prefetch_lookups(reversed(related_lookups))
1678.     while all_lookups:
1679.         lookup = all_lookups.pop()
1680.         if lookup.prefetch_to in done_queries:
1681.             if lookup.queryset is not None:
1682.                 raise ValueError("'%s' lookup was already seen with a different queryset. "
1683.                                  "You may need to adjust the ordering of your lookups." % lookup.prefetch_to)
1684. 
1685.             continue
1686. 
1687.         # Top level, the list of objects to decorate is the result cache
1688.         # from the primary QuerySet. It won't be for deeper levels.
1689.         obj_list = model_instances
1690. 
1691.         through_attrs = lookup.prefetch_through.split(LOOKUP_SEP)
1692.         for level, through_attr in enumerate(through_attrs):
1693.             # Prepare main instances
1694.             if not obj_list:
1695.                 break
1696. 
1697.             prefetch_to = lookup.get_current_prefetch_to(level)
1698.             if prefetch_to in done_queries:
1699.                 # Skip any prefetching, and any object preparation
1700.                 obj_list = done_queries[prefetch_to]
1701.                 continue
1702. 
1703.             # Prepare objects:
1704.             good_objects = True
1705.             for obj in obj_list:
1706.                 # Since prefetching can re-use instances, it is possible to have
1707.                 # the same instance multiple times in obj_list, so obj might
1708.                 # already be prepared.
1709.                 if not hasattr(obj, '_prefetched_objects_cache'):
1710.                     try:
1711.                         obj._prefetched_objects_cache = {}
1712.                     except (AttributeError, TypeError):
1713.                         # Must be an immutable object from
1714.                         # values_list(flat=True), for example (TypeError) or
1715.                         # a QuerySet subclass that isn't returning Model
1716.                         # instances (AttributeError), either in Django or a 3rd
1717.                         # party. prefetch_related() doesn't make sense, so quit.
1718.                         good_objects = False
1719.                         break
1720.             if not good_objects:
1721.                 break
1722. 
1723.             # Descend down tree
1724. 
1725.             # We assume that objects retrieved are homogeneous (which is the premise
1726.             # of prefetch_related), so what applies to first object applies to all.
1727.             first_obj = obj_list[0]
1728.             to_attr = lookup.get_current_to_attr(level)[0]
1729.             prefetcher, descriptor, attr_found, is_fetched = get_prefetcher(first_obj, through_attr, to_attr)
1730. 
1731.             if not attr_found:
1732.                 raise AttributeError("Cannot find '%s' on %s object, '%s' is an invalid "
1733.                                      "parameter to prefetch_related()" %
1734.                                      (through_attr, first_obj.__class__.__name__, lookup.prefetch_through))
1735. 
1736.             if level == len(through_attrs) - 1 and prefetcher is None:
1737.                 # Last one, this *must* resolve to something that supports
1738.                 # prefetching, otherwise there is no point adding it and the
1739.                 # developer asking for it has made a mistake.
1740.                 raise ValueError("'%s' does not resolve to an item that supports "
1741.                                  "prefetching - this is an invalid parameter to "
1742.                                  "prefetch_related()." % lookup.prefetch_through)
1743. 
1744.             obj_to_fetch = None
1745.             if prefetcher is not None:
1746.                 obj_to_fetch = [obj for obj in obj_list if not is_fetched(obj)]
1747. 
1748.             if obj_to_fetch:
1749.                 obj_list, additional_lookups = prefetch_one_level(
1750.                     obj_to_fetch,
1751.                     prefetcher,
1752.                     lookup,
1753.                     level,
1754.                 )
1755.                 # We need to ensure we don't keep adding lookups from the
1756.                 # same relationships to stop infinite recursion. So, if we
1757.                 # are already on an automatically added lookup, don't add
1758.                 # the new lookups from relationships we've seen already.
1759.                 if not (prefetch_to in done_queries and lookup in auto_lookups and descriptor in followed_descriptors):
1760.                     done_queries[prefetch_to] = obj_list
1761.                     new_lookups = normalize_prefetch_lookups(reversed(additional_lookups), prefetch_to)
1762.                     auto_lookups.update(new_lookups)
1763.                     all_lookups.extend(new_lookups)
1764.                 followed_descriptors.add(descriptor)
1765.             else:
1766.                 # Either a singly related object that has already been fetched
1767.                 # (e.g. via select_related), or hopefully some other property
1768.                 # that doesn't support prefetching but needs to be traversed.
1769. 
1770.                 # We replace the current list of parent objects with the list
1771.                 # of related objects, filtering out empty or missing values so
1772.                 # that we can continue with nullable or reverse relations.
1773.                 new_obj_list = []
1774.                 for obj in obj_list:
1775.                     if through_attr in getattr(obj, '_prefetched_objects_cache', ()):
1776.                         # If related objects have been prefetched, use the
1777.                         # cache rather than the object's through_attr.
1778.                         new_obj = list(obj._prefetched_objects_cache.get(through_attr))
1779.                     else:
1780.                         try:
1781.                             new_obj = getattr(obj, through_attr)
1782.                         except exceptions.ObjectDoesNotExist:
1783.                             continue
1784.                     if new_obj is None:
1785.                         continue
1786.                     # We special-case `list` rather than something more generic
1787.                     # like `Iterable` because we don't want to accidentally match
1788.                     # user models that define __iter__.
1789.                     if isinstance(new_obj, list):
1790.                         new_obj_list.extend(new_obj)
1791.                     else:
1792.                         new_obj_list.append(new_obj)
1793.                 obj_list = new_obj_list
1794. 
1795. 
1796. def get_prefetcher(instance, through_attr, to_attr):
1797.     """
1798.     For the attribute 'through_attr' on the given instance, find
1799.     an object that has a get_prefetch_queryset().
1800.     Return a 4 tuple containing:
1801.     (the object with get_prefetch_queryset (or None),
1802.      the descriptor object representing this relationship (or None),
1803.      a boolean that is False if the attribute was not found at all,
1804.      a function that takes an instance and returns a boolean that is True if
1805.      the attribute has already been fetched for that instance)
1806.     """
1807.     def has_to_attr_attribute(instance):
1808.         return hasattr(instance, to_attr)
1809. 
1810.     prefetcher = None
1811.     is_fetched = has_to_attr_attribute
1812. 
1813.     # For singly related objects, we have to avoid getting the attribute
1814.     # from the object, as this will trigger the query. So we first try
1815.     # on the class, in order to get the descriptor object.
1816.     rel_obj_descriptor = getattr(instance.__class__, through_attr, None)
1817.     if rel_obj_descriptor is None:
1818.         attr_found = hasattr(instance, through_attr)
1819.     else:
1820.         attr_found = True
1821.         if rel_obj_descriptor:
1822.             # singly related object, descriptor object has the
1823.             # get_prefetch_queryset() method.
1824.             if hasattr(rel_obj_descriptor, 'get_prefetch_queryset'):
1825.                 prefetcher = rel_obj_descriptor
1826.                 is_fetched = rel_obj_descriptor.is_cached
1827.             else:
1828.                 # descriptor doesn't support prefetching, so we go ahead and get
1829.                 # the attribute on the instance rather than the class to
1830.                 # support many related managers
1831.                 rel_obj = getattr(instance, through_attr)
1832.                 if hasattr(rel_obj, 'get_prefetch_queryset'):
1833.                     prefetcher = rel_obj
1834.                 if through_attr != to_attr:
1835.                     # Special case cached_property instances because hasattr
1836.                     # triggers attribute computation and assignment.
1837.                     if isinstance(getattr(instance.__class__, to_attr, None), cached_property):
1838.                         def has_cached_property(instance):
1839.                             return to_attr in instance.__dict__
1840. 
1841.                         is_fetched = has_cached_property
1842.                 else:
1843.                     def in_prefetched_cache(instance):
1844.                         return through_attr in instance._prefetched_objects_cache
1845. 
1846.                     is_fetched = in_prefetched_cache
1847.     return prefetcher, rel_obj_descriptor, attr_found, is_fetched
1848. 
1849. 
1850. def prefetch_one_level(instances, prefetcher, lookup, level):
1851.     """
1852.     Helper function for prefetch_related_objects().
1853. 
1854.     Run prefetches on all instances using the prefetcher object,
1855.     assigning results to relevant caches in instance.
1856. 
1857.     Return the prefetched objects along with any additional prefetches that
1858.     must be done due to prefetch_related lookups found from default managers.
1859.     """
1860.     # prefetcher must have a method get_prefetch_queryset() which takes a list
1861.     # of instances, and returns a tuple:
1862. 
1863.     # (queryset of instances of self.model that are related to passed in instances,
1864.     #  callable that gets value to be matched for returned instances,
1865.     #  callable that gets value to be matched for passed in instances,
1866.     #  boolean that is True for singly related objects,
1867.     #  cache or field name to assign to,
1868.     #  boolean that is True when the previous argument is a cache name vs a field name).
1869. 
1870.     # The 'values to be matched' must be hashable as they will be used
1871.     # in a dictionary.
1872. 
1873.     rel_qs, rel_obj_attr, instance_attr, single, cache_name, is_descriptor = (
1874.         prefetcher.get_prefetch_queryset(instances, lookup.get_current_queryset(level)))
1875.     # We have to handle the possibility that the QuerySet we just got back
1876.     # contains some prefetch_related lookups. We don't want to trigger the
1877.     # prefetch_related functionality by evaluating the query. Rather, we need
1878.     # to merge in the prefetch_related lookups.
1879.     # Copy the lookups in case it is a Prefetch object which could be reused
1880.     # later (happens in nested prefetch_related).
1881.     additional_lookups = [
1882.         copy.copy(additional_lookup) for additional_lookup
1883.         in getattr(rel_qs, '_prefetch_related_lookups', ())
1884.     ]
1885.     if additional_lookups:
1886.         # Don't need to clone because the manager should have given us a fresh
1887.         # instance, so we access an internal instead of using public interface
1888.         # for performance reasons.
1889.         rel_qs._prefetch_related_lookups = ()
1890. 
1891.     all_related_objects = list(rel_qs)
1892. 
1893.     rel_obj_cache = {}
1894.     for rel_obj in all_related_objects:
1895.         rel_attr_val = rel_obj_attr(rel_obj)
1896.         rel_obj_cache.setdefault(rel_attr_val, []).append(rel_obj)
1897. 
1898.     to_attr, as_attr = lookup.get_current_to_attr(level)
1899.     # Make sure `to_attr` does not conflict with a field.
1900.     if as_attr and instances:
1901.         # We assume that objects retrieved are homogeneous (which is the premise
1902.         # of prefetch_related), so what applies to first object applies to all.
1903.         model = instances[0].__class__
1904.         try:
1905.             model._meta.get_field(to_attr)
1906.         except exceptions.FieldDoesNotExist:
1907.             pass
1908.         else:
1909.             msg = 'to_attr={} conflicts with a field on the {} model.'
1910.             raise ValueError(msg.format(to_attr, model.__name__))
1911. 
1912.     # Whether or not we're prefetching the last part of the lookup.
1913.     leaf = len(lookup.prefetch_through.split(LOOKUP_SEP)) - 1 == level
1914. 
1915.     for obj in instances:
1916.         instance_attr_val = instance_attr(obj)
1917.         vals = rel_obj_cache.get(instance_attr_val, [])
1918. 
1919.         if single:
1920.             val = vals[0] if vals else None
1921.             if as_attr:
1922.                 # A to_attr has been given for the prefetch.
1923.                 setattr(obj, to_attr, val)
1924.             elif is_descriptor:
1925.                 # cache_name points to a field name in obj.
1926.                 # This field is a descriptor for a related object.
1927.                 setattr(obj, cache_name, val)
1928.             else:
1929.                 # No to_attr has been given for this prefetch operation and the
1930.                 # cache_name does not point to a descriptor. Store the value of
1931.                 # the field in the object's field cache.
1932.                 obj._state.fields_cache[cache_name] = val
1933.         else:
1934.             if as_attr:
1935.                 setattr(obj, to_attr, vals)
1936.             else:
1937.                 manager = getattr(obj, to_attr)
1938.                 if leaf and lookup.queryset is not None:
1939.                     qs = manager._apply_rel_filters(lookup.queryset)
1940.                 else:
1941.                     qs = manager.get_queryset()
1942.                 qs._result_cache = vals
1943.                 # We don't want the individual qs doing prefetch_related now,
1944.                 # since we have merged this into the current work.
1945.                 qs._prefetch_done = True
1946.                 obj._prefetched_objects_cache[cache_name] = qs
1947.     return all_related_objects, additional_lookups
1948. 
1949. 
1950. class RelatedPopulator:
1951.     """
1952.     RelatedPopulator is used for select_related() object instantiation.
1953. 
1954.     The idea is that each select_related() model will be populated by a
1955.     different RelatedPopulator instance. The RelatedPopulator instances get
1956.     klass_info and select (computed in SQLCompiler) plus the used db as
1957.     input for initialization. That data is used to compute which columns
1958.     to use, how to instantiate the model, and how to populate the links
1959.     between the objects.
1960. 
1961.     The actual creation of the objects is done in populate() method. This
1962.     method gets row and from_obj as input and populates the select_related()
1963.     model instance.
1964.     """
1965.     def __init__(self, klass_info, select, db):
1966.         self.db = db
1967.         # Pre-compute needed attributes. The attributes are:
1968.         #  - model_cls: the possibly deferred model class to instantiate
1969.         #  - either:
1970.         #    - cols_start, cols_end: usually the columns in the row are
1971.         #      in the same order model_cls.__init__ expects them, so we
1972.         #      can instantiate by model_cls(*row[cols_start:cols_end])
1973.         #    - reorder_for_init: When select_related descends to a child
1974.         #      class, then we want to reuse the already selected parent
1975.         #      data. However, in this case the parent data isn't necessarily
1976.         #      in the same order that Model.__init__ expects it to be, so
1977.         #      we have to reorder the parent data. The reorder_for_init
1978.         #      attribute contains a function used to reorder the field data
1979.         #      in the order __init__ expects it.
1980.         #  - pk_idx: the index of the primary key field in the reordered
1981.         #    model data. Used to check if a related object exists at all.
1982.         #  - init_list: the field attnames fetched from the database. For
1983.         #    deferred models this isn't the same as all attnames of the
1984.         #    model's fields.
1985.         #  - related_populators: a list of RelatedPopulator instances if
1986.         #    select_related() descends to related models from this model.
1987.         #  - local_setter, remote_setter: Methods to set cached values on
1988.         #    the object being populated and on the remote object. Usually
1989.         #    these are Field.set_cached_value() methods.
1990.         select_fields = klass_info['select_fields']
1991.         from_parent = klass_info['from_parent']
1992.         if not from_parent:
1993.             self.cols_start = select_fields[0]
1994.             self.cols_end = select_fields[-1] + 1
1995.             self.init_list = [
1996.                 f[0].target.attname for f in select[self.cols_start:self.cols_end]
1997.             ]
1998.             self.reorder_for_init = None
1999.         else:
2000.             attname_indexes = {select[idx][0].target.attname: idx for idx in select_fields}
2001.             model_init_attnames = (f.attname for f in klass_info['model']._meta.concrete_fields)
2002.             self.init_list = [attname for attname in model_init_attnames if attname in attname_indexes]
2003.             self.reorder_for_init = operator.itemgetter(*[attname_indexes[attname] for attname in self.init_list])
2004. 
2005.         self.model_cls = klass_info['model']
2006.         self.pk_idx = self.init_list.index(self.model_cls._meta.pk.attname)
2007.         self.related_populators = get_related_populators(klass_info, select, self.db)
2008.         self.local_setter = klass_info['local_setter']
2009.         self.remote_setter = klass_info['remote_setter']
2010. 
2011.     def populate(self, row, from_obj):
2012.         if self.reorder_for_init:
2013.             obj_data = self.reorder_for_init(row)
2014.         else:
2015.             obj_data = row[self.cols_start:self.cols_end]
2016.         if obj_data[self.pk_idx] is None:
2017.             obj = None
2018.         else:
2019.             obj = self.model_cls.from_db(self.db, self.init_list, obj_data)
2020.             for rel_iter in self.related_populators:
2021.                 rel_iter.populate(row, obj)
2022.         self.local_setter(from_obj, obj)
2023.         if obj is not None:
2024.             self.remote_setter(obj, from_obj)
2025. 
2026. 
2027. def get_related_populators(klass_info, select, db):
2028.     iterators = []
2029.     related_klass_infos = klass_info.get('related_klass_infos', [])
2030.     for rel_klass_info in related_klass_infos:
2031.         rel_cls = RelatedPopulator(rel_klass_info, select, db)
2032.         iterators.append(rel_cls)
2033.     return iterators

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-25 02:30:24,436 - thread-128179287074496.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to modify the `bulk_update` method to return the number of rows updated. The provided context contains the full source code for `django/db/models/query.py`, which includes the implementations of both `bulk_update` and the `update` method it calls. This is sufficient to understand and validate the proposed patch, as the logic is self-contained within this file. The change simply involves accumulating the return value of the `update` method, whose behavior is clearly defined in the existing context.' query='' extra_requirements='' purpose=''
2025-12-25 02:30:24,437 - thread-128179287074496.prometheus_context_collector - INFO - Successfully retrieved 1 context snippets
