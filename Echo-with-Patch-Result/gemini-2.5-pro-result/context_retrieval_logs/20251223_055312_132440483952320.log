2025-12-23 05:53:12,548 - thread-132440483952320.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Incorrect parenthesizing of Subs

Description: Here is an example.
```python
>>> from sympy import Subs
>>> from sympy.abc import x,y
>>> 3*Subs(-x+y, (x,),(1,))
```
LaTeX printing of this gives:  
```python
'3 \\left. - x + y \\right|_{\\substack{ x=1 }}'
```

![image](https://quicklatex.com/cache3/76/ql_9672fd7e62c909ff3d9ac8543c2e2576_l3.png)


It would be better to be parenthesized to:  
```python
'3 \\left. \\left(- x + y\\right) \\right|_{\\substack{ x=1 }}'
```

![image](https://quicklatex.com/cache3/bf/ql_936ffdb876e784206d4c54bb93d28dbf_l3.png)


Patch information:
diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py
index 8743723ea0..2a31ea8f96 100644
--- a/sympy/printing/latex.py
+++ b/sympy/printing/latex.py
@@ -699,6 +699,8 @@ def _print_Derivative(self, expr):
     def _print_Subs(self, subs):
         expr, old, new = subs.args
         latex_expr = self._print(expr)
+        if expr.is_Add:
+            latex_expr = r"\left(%s\right)" % latex_expr
         latex_old = (self._print(e) for e in old)
         latex_new = (self._print(e) for e in new)
         latex_subs = r'\\ '.join(


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 05:53:12,624 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .github
|   └── FUNDING.yml
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.rst
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── documentation-style-guide.rst
|       ├── gotchas.rst
|       ├── guide.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   └── sparse.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   └── tensor.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   ├── runtests.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   └── release.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── array_utils.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_array_utils.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_pyutils.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── evaluate.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_evaluate.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_class_registry.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── immutable.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_commonmatrix.py
    |       ├── test_densearith.py
    |       ├── test_densesolve.py
    |       ├── test_densetools.py
    |       ├── test_immutable.py
    |       ├── test_interactions.py
    |       ├── test_matrices.py
    |       ├── test_normalforms.py
    |       ├── test_sparse.py
    |       └── test_sparsetools.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── egyptian_fraction.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── __init__.py
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine.py
    |   ├── inequalities.py
    |   ├── ode.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_diophantine.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_ode.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_module_imports.py
    |   |   ├── test_pickling.py
    |   |   ├── test_pytest.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Incorrect parenthesizing of Subs

Description: Here is an example.
```python
>>> from sympy import Subs
>>> from sympy.abc import x,y
>>> 3*Subs(-x+y, (x,),(1,))
```
LaTeX printing of this gives:  
```python
'3 \\left. - x + y \\right|_{\\substack{ x=1 }}'
```

![image](https://quicklatex.com/cache3/76/ql_9672fd7e62c909ff3d9ac8543c2e2576_l3.png)


It would be better to be parenthesized to:  
```python
'3 \\left. \\left(- x + y\\right) \\right|_{\\substack{ x=1 }}'
```

![image](https://quicklatex.com/cache3/bf/ql_936ffdb876e784206d4c54bb93d28dbf_l3.png)


Patch information:
diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py
index 8743723ea0..2a31ea8f96 100644
--- a/sympy/printing/latex.py
+++ b/sympy/printing/latex.py
@@ -699,6 +699,8 @@ def _print_Derivative(self, expr):
     def _print_Subs(self, subs):
         expr, old, new = subs.args
         latex_expr = self._print(expr)
+        if expr.is_Add:
+            latex_expr = r"\left(%s\right)" % latex_expr
         latex_old = (self._print(e) for e in old)
         latex_new = (self._print(e) for e in new)
         latex_subs = r'\\ '.join(


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 05:53:22,087 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find 3 relevant test cases for a bug related to LaTeX printing of `Subs` objects. The bug report and patch indicate the issue is in `sympy/printing/latex.py`. To find relevant tests, I need to examine the corresponding test file, which is `sympy/printing/tests/test_latex.py`. The current context is empty, so I must request this file content.' query='Please provide the full content of sympy/printing/tests/test_latex.py' extra_requirements='' purpose='I need the content of the test file to identify and extract 3 test cases that are relevant to the reported bug in `Subs` LaTeX`Subs` LaTeX printing.'
2025-12-23 05:53:22,089 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of sympy/printing/tests/test_latex.py
2025-12-23 05:53:22,089 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 05:53:22,089 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 05:53:22,090 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 05:53:22,090 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of sympy/printing/tests/test_latex.py
Purpose: I need the content of the test file to identify and extract 3 test cases that are relevant to the reported bug in `Subs` LaTeX`Subs` LaTeX printing.
2025-12-23 05:53:24,688 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have started by reading the entire content of the specified test file to get a comprehensive overview. This will help in pinpointing the most relevant test cases related to the `Subs` LaTeX printing bug as you requested.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/printing/tests/test_latex.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2113, 'candidates_token_count': 68, 'total_token_count': 2300, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2113}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 68}], 'thoughts_token_count': 119, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.18820613973280964, 'model_name': 'gemini-2.5-pro'} id='run--bc5dd024-03e1-4000-9691-7cbb879e84e0-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '566f23f2-e511-4950-982f-5f1832130322', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2113, 'output_tokens': 68, 'total_tokens': 2300, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 119}}
2025-12-23 05:53:38,313 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the content of `sympy/printing/tests/test_latex.py` and located the `test_latex_subs` function within it. This function is dedicated to testing the LaTeX printing of `Subs` expressions. I will now proceed to extract three relevant test cases from this function to help you address the reported bug.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "def test_latex_subs():", "relative_path": "sympy/printing/tests/test_latex.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 13950, 'candidates_token_count': 111, 'total_token_count': 15362, 'cached_content_token_count': 1841, 'prompt_tokens_details': [{'modality': 1, 'token_count': 13950}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1841}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 111}], 'thoughts_token_count': 1301}, 'finish_reason': 'STOP', 'avg_logprobs': -1.4501528353304476, 'model_name': 'gemini-2.5-pro'} id='run--1670019a-3cc6-415b-b110-c3bd443b909c-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'def test_latex_subs():', 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '5b2264f6-1d60-466c-bb6d-d79ab878eb49', 'type': 'tool_call'}] usage_metadata={'input_tokens': 13950, 'output_tokens': 111, 'total_tokens': 15362, 'input_token_details': {'cache_read': 1841}, 'output_token_details': {'reasoning': 1301}}
2025-12-23 05:53:43,456 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have now isolated the `test_latex_subs` function, which is responsible for testing the LaTeX representation of `Subs` objects. To provide you with the most relevant examples for the bug you're addressing, I will now read the code for this specific function. This will allow me to select and present three distinct test cases from it." additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 775.0, "relative_path": "sympy/printing/tests/test_latex.py", "start_line": 675.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 14237, 'candidates_token_count': 101, 'total_token_count': 14672, 'cached_content_token_count': 12877, 'prompt_tokens_details': [{'modality': 1, 'token_count': 14237}], 'cache_tokens_details': [{'modality': 1, 'token_count': 12877}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 101}], 'thoughts_token_count': 334}, 'finish_reason': 'STOP', 'avg_logprobs': -0.36007373167736695, 'model_name': 'gemini-2.5-pro'} id='run--00d521a9-9e66-414c-ae31-df2e4adafbbf-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 775.0, 'relative_path': 'sympy/printing/tests/test_latex.py', 'start_line': 675.0}, 'id': 'efb445eb-48a6-4341-9ebd-51b803e69811', 'type': 'tool_call'}] usage_metadata={'input_tokens': 14237, 'output_tokens': 101, 'total_tokens': 14672, 'input_token_details': {'cache_read': 12877}, 'output_token_details': {'reasoning': 334}}
2025-12-23 05:53:52,465 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have examined the `test_latex.py` file to find test cases relevant to the `Subs` LaTeX printing bug. After locating the `test_latex_subs` function, I found that it contains only a single test case. I am providing this test case as it is the most directly related to the issue you are investigating.\n\nHere is the relevant test case:\n\n```python\ndef test_latex_subs():\n    assert latex(Subs(x*y, (\n        x, y), (1, 2))) == r'\\left. x y \\right|_{\\substack{ x=1\\\\ y=2 }}'\n```" additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 16656, 'candidates_token_count': 135, 'total_token_count': 17556, 'cached_content_token_count': 12960, 'prompt_tokens_details': [{'modality': 1, 'token_count': 16656}], 'cache_tokens_details': [{'modality': 1, 'token_count': 12960}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 135}], 'thoughts_token_count': 765}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6013141773365162, 'model_name': 'gemini-2.5-pro'} id='run--79d536b8-2ec9-432a-a706-1fa2ae9d92cc-0' usage_metadata={'input_tokens': 16656, 'output_tokens': 135, 'total_tokens': 17556, 'input_token_details': {'cache_read': 12960}, 'output_token_details': {'reasoning': 765}}
2025-12-23 05:53:52,467 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of sympy/printing/tests/test_latex.py
--- END QUERY ---



--- BEGIN PURPOSE ---
I need the content of the test file to identify and extract 3 test cases that are relevant to the reported bug in `Subs` LaTeX`Subs` LaTeX printing.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/printing/tests/test_latex.py
Line number range: 1 - 500
Content:
1. from sympy import (
2.     Add, Abs, Chi, Ci, CosineTransform, Dict, Ei, Eq, FallingFactorial,
3.     FiniteSet, Float, FourierTransform, Function, Indexed, IndexedBase, Integral,
4.     Interval, InverseCosineTransform, InverseFourierTransform, Derivative,
5.     InverseLaplaceTransform, InverseMellinTransform, InverseSineTransform,
6.     Lambda, LaplaceTransform, Limit, Matrix, Max, MellinTransform, Min, Mul,
7.     Order, Piecewise, Poly, ring, field, ZZ, Pow, Product, Range, Rational,
8.     RisingFactorial, rootof, RootSum, S, Shi, Si, SineTransform, Subs,
9.     Sum, Symbol, ImageSet, Tuple, Ynm, Znm, arg, asin, acsc, Mod,
10.     assoc_laguerre, assoc_legendre, beta, binomial, catalan, ceiling, Complement,
11.     chebyshevt, chebyshevu, conjugate, cot, coth, diff, dirichlet_eta, euler,
12.     exp, expint, factorial, factorial2, floor, gamma, gegenbauer, hermite,
13.     hyper, im, jacobi, laguerre, legendre, lerchphi, log, frac,
14.     meijerg, oo, polar_lift, polylog, re, root, sin, sqrt, symbols,
15.     uppergamma, zeta, subfactorial, totient, elliptic_k, elliptic_f,
16.     elliptic_e, elliptic_pi, cos, tan, Wild, true, false, Equivalent, Not,
17.     Contains, divisor_sigma, SeqPer, SeqFormula,
18.     SeqAdd, SeqMul, fourier_series, pi, ConditionSet, ComplexRegion, fps,
19.     AccumBounds, reduced_totient, primenu, primeomega, SingularityFunction,
20.     stieltjes, mathieuc, mathieus, mathieucprime, mathieusprime,
21.     UnevaluatedExpr, Quaternion, I, KroneckerProduct, LambertW)
22. 
23. from sympy.ntheory.factor_ import udivisor_sigma
24. 
25. from sympy.abc import mu, tau
26. from sympy.printing.latex import (latex, translate, greek_letters_set,
27.                                   tex_greek_dictionary, multiline_latex)
28. from sympy.tensor.array import (ImmutableDenseNDimArray,
29.                                 ImmutableSparseNDimArray,
30.                                 MutableSparseNDimArray,
31.                                 MutableDenseNDimArray,
32.                                 tensorproduct)
33. from sympy.utilities.pytest import XFAIL, raises
34. from sympy.functions import DiracDelta, Heaviside, KroneckerDelta, LeviCivita
35. from sympy.functions.combinatorial.numbers import bernoulli, bell, lucas, \
36.     fibonacci, tribonacci
37. from sympy.logic import Implies
38. from sympy.logic.boolalg import And, Or, Xor
39. from sympy.physics.quantum import Commutator, Operator
40. from sympy.physics.units import degree, radian, kg, meter, gibibyte, microgram, second
41. from sympy.core.trace import Tr
42. from sympy.core.compatibility import range
43. from sympy.combinatorics.permutations import Cycle, Permutation
44. from sympy import MatrixSymbol, ln
45. from sympy.vector import CoordSys3D, Cross, Curl, Dot, Divergence, Gradient, Laplacian
46. from sympy.sets.setexpr import SetExpr
47. from sympy.sets.sets import \
48.     Union, Intersection, Complement, SymmetricDifference, ProductSet
49. 
50. import sympy as sym
51. 
52. 
53. class lowergamma(sym.lowergamma):
54.     pass   # testing notation inheritance by a subclass with same name
55. 
56. 
57. x, y, z, t, a, b, c = symbols('x y z t a b c')
58. k, m, n = symbols('k m n', integer=True)
59. 
60. 
61. def test_printmethod():
62.     class R(Abs):
63.         def _latex(self, printer):
64.             return "foo(%s)" % printer._print(self.args[0])
65.     assert latex(R(x)) == "foo(x)"
66. 
67.     class R(Abs):
68.         def _latex(self, printer):
69.             return "foo"
70.     assert latex(R(x)) == "foo"
71. 
72. 
73. def test_latex_basic():
74.     assert latex(1 + x) == "x + 1"
75.     assert latex(x**2) == "x^{2}"
76.     assert latex(x**(1 + x)) == "x^{x + 1}"
77.     assert latex(x**3 + x + 1 + x**2) == "x^{3} + x^{2} + x + 1"
78. 
79.     assert latex(2*x*y) == "2 x y"
80.     assert latex(2*x*y, mul_symbol='dot') == r"2 \cdot x \cdot y"
81.     assert latex(3*x**2*y, mul_symbol='\\,') == r"3\,x^{2}\,y"
82.     assert latex(1.5*3**x, mul_symbol='\\,') == r"1.5 \cdot 3^{x}"
83. 
84.     assert latex(1/x) == r"\frac{1}{x}"
85.     assert latex(1/x, fold_short_frac=True) == "1 / x"
86.     assert latex(-S(3)/2) == r"- \frac{3}{2}"
87.     assert latex(-S(3)/2, fold_short_frac=True) == r"- 3 / 2"
88.     assert latex(1/x**2) == r"\frac{1}{x^{2}}"
89.     assert latex(1/(x + y)/2) == r"\frac{1}{2 \left(x + y\right)}"
90.     assert latex(x/2) == r"\frac{x}{2}"
91.     assert latex(x/2, fold_short_frac=True) == "x / 2"
92.     assert latex((x + y)/(2*x)) == r"\frac{x + y}{2 x}"
93.     assert latex((x + y)/(2*x), fold_short_frac=True) == \
94.         r"\left(x + y\right) / 2 x"
95.     assert latex((x + y)/(2*x), long_frac_ratio=0) == \
96.         r"\frac{1}{2 x} \left(x + y\right)"
97.     assert latex((x + y)/x) == r"\frac{x + y}{x}"
98.     assert latex((x + y)/x, long_frac_ratio=3) == r"\frac{x + y}{x}"
99.     assert latex((2*sqrt(2)*x)/3) == r"\frac{2 \sqrt{2} x}{3}"
100.     assert latex((2*sqrt(2)*x)/3, long_frac_ratio=2) == \
101.         r"\frac{2 x}{3} \sqrt{2}"
102. 
103.     assert latex(2*Integral(x, x)/3) == r"\frac{2 \int x\, dx}{3}"
104.     assert latex(2*Integral(x, x)/3, fold_short_frac=True) == \
105.         r"\left(2 \int x\, dx\right) / 3"
106. 
107.     assert latex(sqrt(x)) == r"\sqrt{x}"
108.     assert latex(x**Rational(1, 3)) == r"\sqrt[3]{x}"
109.     assert latex(x**Rational(1, 3), root_notation=False) == r"x^{\frac{1}{3}}"
110.     assert latex(sqrt(x)**3) == r"x^{\frac{3}{2}}"
111.     assert latex(sqrt(x), itex=True) == r"\sqrt{x}"
112.     assert latex(x**Rational(1, 3), itex=True) == r"\root{3}{x}"
113.     assert latex(sqrt(x)**3, itex=True) == r"x^{\frac{3}{2}}"
114.     assert latex(x**Rational(3, 4)) == r"x^{\frac{3}{4}}"
115.     assert latex(x**Rational(3, 4), fold_frac_powers=True) == "x^{3/4}"
116.     assert latex((x + 1)**Rational(3, 4)) == \
117.         r"\left(x + 1\right)^{\frac{3}{4}}"
118.     assert latex((x + 1)**Rational(3, 4), fold_frac_powers=True) == \
119.         r"\left(x + 1\right)^{3/4}"
120. 
121.     assert latex(1.5e20*x) == r"1.5 \cdot 10^{20} x"
122.     assert latex(1.5e20*x, mul_symbol='dot') == r"1.5 \cdot 10^{20} \cdot x"
123.     assert latex(1.5e20*x, mul_symbol='times') == \
124.         r"1.5 \times 10^{20} \times x"
125. 
126.     assert latex(1/sin(x)) == r"\frac{1}{\sin{\left(x \right)}}"
127.     assert latex(sin(x)**-1) == r"\frac{1}{\sin{\left(x \right)}}"
128.     assert latex(sin(x)**Rational(3, 2)) == \
129.         r"\sin^{\frac{3}{2}}{\left(x \right)}"
130.     assert latex(sin(x)**Rational(3, 2), fold_frac_powers=True) == \
131.         r"\sin^{3/2}{\left(x \right)}"
132. 
133.     assert latex(~x) == r"\neg x"
134.     assert latex(x & y) == r"x \wedge y"
135.     assert latex(x & y & z) == r"x \wedge y \wedge z"
136.     assert latex(x | y) == r"x \vee y"
137.     assert latex(x | y | z) == r"x \vee y \vee z"
138.     assert latex((x & y) | z) == r"z \vee \left(x \wedge y\right)"
139.     assert latex(Implies(x, y)) == r"x \Rightarrow y"
140.     assert latex(~(x >> ~y)) == r"x \not\Rightarrow \neg y"
141.     assert latex(Implies(Or(x,y), z)) == r"\left(x \vee y\right) \Rightarrow z"
142.     assert latex(Implies(z, Or(x,y))) == r"z \Rightarrow \left(x \vee y\right)"
143.     assert latex(~(x & y)) == r"\neg \left(x \wedge y\right)"
144. 
145.     assert latex(~x, symbol_names={x: "x_i"}) == r"\neg x_i"
146.     assert latex(x & y, symbol_names={x: "x_i", y: "y_i"}) == \
147.         r"x_i \wedge y_i"
148.     assert latex(x & y & z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
149.         r"x_i \wedge y_i \wedge z_i"
150.     assert latex(x | y, symbol_names={x: "x_i", y: "y_i"}) == r"x_i \vee y_i"
151.     assert latex(x | y | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
152.         r"x_i \vee y_i \vee z_i"
153.     assert latex((x & y) | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
154.         r"z_i \vee \left(x_i \wedge y_i\right)"
155.     assert latex(Implies(x, y), symbol_names={x: "x_i", y: "y_i"}) == \
156.         r"x_i \Rightarrow y_i"
157. 
158.     p = Symbol('p', positive=True)
159.     assert latex(exp(-p)*log(p)) == r"e^{- p} \log{\left(p \right)}"
160. 
161. 
162. def test_latex_builtins():
163.     assert latex(True) == r"\text{True}"
164.     assert latex(False) == r"\text{False}"
165.     assert latex(None) == r"\text{None}"
166.     assert latex(true) == r"\text{True}"
167.     assert latex(false) == r'\text{False}'
168. 
169. 
170. def test_latex_SingularityFunction():
171.     assert latex(SingularityFunction(x, 4, 5)) == \
172.         r"{\left\langle x - 4 \right\rangle}^{5}"
173.     assert latex(SingularityFunction(x, -3, 4)) == \
174.         r"{\left\langle x + 3 \right\rangle}^{4}"
175.     assert latex(SingularityFunction(x, 0, 4)) == \
176.         r"{\left\langle x \right\rangle}^{4}"
177.     assert latex(SingularityFunction(x, a, n)) == \
178.         r"{\left\langle - a + x \right\rangle}^{n}"
179.     assert latex(SingularityFunction(x, 4, -2)) == \
180.         r"{\left\langle x - 4 \right\rangle}^{-2}"
181.     assert latex(SingularityFunction(x, 4, -1)) == \
182.         r"{\left\langle x - 4 \right\rangle}^{-1}"
183. 
184. 
185. def test_latex_cycle():
186.     assert latex(Cycle(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
187.     assert latex(Cycle(1, 2)(4, 5, 6)) == \
188.         r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
189.     assert latex(Cycle()) == r"\left( \right)"
190. 
191. 
192. def test_latex_permutation():
193.     assert latex(Permutation(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
194.     assert latex(Permutation(1, 2)(4, 5, 6)) == \
195.         r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
196.     assert latex(Permutation()) == r"\left( \right)"
197.     assert latex(Permutation(2, 4)*Permutation(5)) == \
198.         r"\left( 2\; 4\right)\left( 5\right)"
199.     assert latex(Permutation(5)) == r"\left( 5\right)"
200. 
201. 
202. def test_latex_Float():
203.     assert latex(Float(1.0e100)) == r"1.0 \cdot 10^{100}"
204.     assert latex(Float(1.0e-100)) == r"1.0 \cdot 10^{-100}"
205.     assert latex(Float(1.0e-100), mul_symbol="times") == \
206.         r"1.0 \times 10^{-100}"
207. 
208. 
209. def test_latex_vector_expressions():
210.     A = CoordSys3D('A')
211. 
212.     assert latex(Cross(A.i, A.j*A.x*3+A.k)) == \
213.         r"\mathbf{\hat{i}_{A}} \times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
214.     assert latex(Cross(A.i, A.j)) == \
215.         r"\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}"
216.     assert latex(x*Cross(A.i, A.j)) == \
217.         r"x \left(\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}\right)"
218.     assert latex(Cross(x*A.i, A.j)) == \
219.         r'- \mathbf{\hat{j}_{A}} \times \left((x)\mathbf{\hat{i}_{A}}\right)'
220. 
221.     assert latex(Curl(3*A.x*A.j)) == \
222.         r"\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
223.     assert latex(Curl(3*A.x*A.j+A.i)) == \
224.         r"\nabla\times \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
225.     assert latex(Curl(3*x*A.x*A.j)) == \
226.         r"\nabla\times \left((3 \mathbf{{x}_{A}} x)\mathbf{\hat{j}_{A}}\right)"
227.     assert latex(x*Curl(3*A.x*A.j)) == \
228.         r"x \left(\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
229. 
230.     assert latex(Divergence(3*A.x*A.j+A.i)) == \
231.         r"\nabla\cdot \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
232.     assert latex(Divergence(3*A.x*A.j)) == \
233.         r"\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
234.     assert latex(x*Divergence(3*A.x*A.j)) == \
235.         r"x \left(\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
236. 
237.     assert latex(Dot(A.i, A.j*A.x*3+A.k)) == \
238.         r"\mathbf{\hat{i}_{A}} \cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
239.     assert latex(Dot(A.i, A.j)) == \
240.         r"\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}"
241.     assert latex(Dot(x*A.i, A.j)) == \
242.         r"\mathbf{\hat{j}_{A}} \cdot \left((x)\mathbf{\hat{i}_{A}}\right)"
243.     assert latex(x*Dot(A.i, A.j)) == \
244.         r"x \left(\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}\right)"
245. 
246.     assert latex(Gradient(A.x)) == r"\nabla \mathbf{{x}_{A}}"
247.     assert latex(Gradient(A.x + 3*A.y)) == \
248.         r"\nabla \left(\mathbf{{x}_{A}} + 3 \mathbf{{y}_{A}}\right)"
249.     assert latex(x*Gradient(A.x)) == r"x \left(\nabla \mathbf{{x}_{A}}\right)"
250.     assert latex(Gradient(x*A.x)) == r"\nabla \left(\mathbf{{x}_{A}} x\right)"
251. 
252.     assert latex(Laplacian(A.x)) == r"\triangle \mathbf{{x}_{A}}"
253.     assert latex(Laplacian(A.x + 3*A.y)) == \
254.         r"\triangle \left(\mathbf{{x}_{A}} + 3 \mathbf{{y}_{A}}\right)"
255.     assert latex(x*Laplacian(A.x)) == r"x \left(\triangle \mathbf{{x}_{A}}\right)"
256.     assert latex(Laplacian(x*A.x)) == r"\triangle \left(\mathbf{{x}_{A}} x\right)"
257. 
258. def test_latex_symbols():
259.     Gamma, lmbda, rho = symbols('Gamma, lambda, rho')
260.     tau, Tau, TAU, taU = symbols('tau, Tau, TAU, taU')
261.     assert latex(tau) == r"\tau"
262.     assert latex(Tau) == "T"
263.     assert latex(TAU) == r"\tau"
264.     assert latex(taU) == r"\tau"
265.     # Check that all capitalized greek letters are handled explicitly
266.     capitalized_letters = set(l.capitalize() for l in greek_letters_set)
267.     assert len(capitalized_letters - set(tex_greek_dictionary.keys())) == 0
268.     assert latex(Gamma + lmbda) == r"\Gamma + \lambda"
269.     assert latex(Gamma * lmbda) == r"\Gamma \lambda"
270.     assert latex(Symbol('q1')) == r"q_{1}"
271.     assert latex(Symbol('q21')) == r"q_{21}"
272.     assert latex(Symbol('epsilon0')) == r"\epsilon_{0}"
273.     assert latex(Symbol('omega1')) == r"\omega_{1}"
274.     assert latex(Symbol('91')) == r"91"
275.     assert latex(Symbol('alpha_new')) == r"\alpha_{new}"
276.     assert latex(Symbol('C^orig')) == r"C^{orig}"
277.     assert latex(Symbol('x^alpha')) == r"x^{\alpha}"
278.     assert latex(Symbol('beta^alpha')) == r"\beta^{\alpha}"
279.     assert latex(Symbol('e^Alpha')) == r"e^{A}"
280.     assert latex(Symbol('omega_alpha^beta')) == r"\omega^{\beta}_{\alpha}"
281.     assert latex(Symbol('omega') ** Symbol('beta')) == r"\omega^{\beta}"
282. 
283. 
284. @XFAIL
285. def test_latex_symbols_failing():
286.     rho, mass, volume = symbols('rho, mass, volume')
287.     assert latex(
288.         volume * rho == mass) == r"\rho \mathrm{volume} = \mathrm{mass}"
289.     assert latex(volume / mass * rho == 1) == \
290.         r"\rho \mathrm{volume} {\mathrm{mass}}^{(-1)} = 1"
291.     assert latex(mass**3 * volume**3) == \
292.         r"{\mathrm{mass}}^{3} \cdot {\mathrm{volume}}^{3}"
293. 
294. 
295. def test_latex_functions():
296.     assert latex(exp(x)) == "e^{x}"
297.     assert latex(exp(1) + exp(2)) == "e + e^{2}"
298. 
299.     f = Function('f')
300.     assert latex(f(x)) == r'f{\left(x \right)}'
301.     assert latex(f) == r'f'
302. 
303.     g = Function('g')
304.     assert latex(g(x, y)) == r'g{\left(x,y \right)}'
305.     assert latex(g) == r'g'
306. 
307.     h = Function('h')
308.     assert latex(h(x, y, z)) == r'h{\left(x,y,z \right)}'
309.     assert latex(h) == r'h'
310. 
311.     Li = Function('Li')
312.     assert latex(Li) == r'\operatorname{Li}'
313.     assert latex(Li(x)) == r'\operatorname{Li}{\left(x \right)}'
314. 
315.     mybeta = Function('beta')
316.     # not to be confused with the beta function
317.     assert latex(mybeta(x, y, z)) == r"\beta{\left(x,y,z \right)}"
318.     assert latex(beta(x, y)) == r'\operatorname{B}\left(x, y\right)'
319.     assert latex(beta(x, y)**2) == r'\operatorname{B}^{2}\left(x, y\right)'
320.     assert latex(mybeta(x)) == r"\beta{\left(x \right)}"
321.     assert latex(mybeta) == r"\beta"
322. 
323.     g = Function('gamma')
324.     # not to be confused with the gamma function
325.     assert latex(g(x, y, z)) == r"\gamma{\left(x,y,z \right)}"
326.     assert latex(g(x)) == r"\gamma{\left(x \right)}"
327.     assert latex(g) == r"\gamma"
328. 
329.     a1 = Function('a_1')
330. 
331.     assert latex(a1) == r"\operatorname{a_{1}}"
332.     assert latex(a1(x)) == r"\operatorname{a_{1}}{\left(x \right)}"
333. 
334.     # issue 5868
335.     omega1 = Function('omega1')
336.     assert latex(omega1) == r"\omega_{1}"
337.     assert latex(omega1(x)) == r"\omega_{1}{\left(x \right)}"
338. 
339.     assert latex(sin(x)) == r"\sin{\left(x \right)}"
340.     assert latex(sin(x), fold_func_brackets=True) == r"\sin {x}"
341.     assert latex(sin(2*x**2), fold_func_brackets=True) == \
342.         r"\sin {2 x^{2}}"
343.     assert latex(sin(x**2), fold_func_brackets=True) == \
344.         r"\sin {x^{2}}"
345. 
346.     assert latex(asin(x)**2) == r"\operatorname{asin}^{2}{\left(x \right)}"
347.     assert latex(asin(x)**2, inv_trig_style="full") == \
348.         r"\arcsin^{2}{\left(x \right)}"
349.     assert latex(asin(x)**2, inv_trig_style="power") == \
350.         r"\sin^{-1}{\left(x \right)}^{2}"
351.     assert latex(asin(x**2), inv_trig_style="power",
352.                  fold_func_brackets=True) == \
353.         r"\sin^{-1} {x^{2}}"
354.     assert latex(acsc(x), inv_trig_style="full") == \
355.         r"\operatorname{arccsc}{\left(x \right)}"
356. 
357.     assert latex(factorial(k)) == r"k!"
358.     assert latex(factorial(-k)) == r"\left(- k\right)!"
359.     assert latex(factorial(k)**2) == r"k!^{2}"
360. 
361.     assert latex(subfactorial(k)) == r"!k"
362.     assert latex(subfactorial(-k)) == r"!\left(- k\right)"
363.     assert latex(subfactorial(k)**2) == r"\left(!k\right)^{2}"
364. 
365.     assert latex(factorial2(k)) == r"k!!"
366.     assert latex(factorial2(-k)) == r"\left(- k\right)!!"
367.     assert latex(factorial2(k)**2) == r"k!!^{2}"
368. 
369.     assert latex(binomial(2, k)) == r"{\binom{2}{k}}"
370.     assert latex(binomial(2, k)**2) == r"{\binom{2}{k}}^{2}"
371. 
372.     assert latex(FallingFactorial(3, k)) == r"{\left(3\right)}_{k}"
373.     assert latex(RisingFactorial(3, k)) == r"{3}^{\left(k\right)}"
374. 
375.     assert latex(floor(x)) == r"\left\lfloor{x}\right\rfloor"
376.     assert latex(ceiling(x)) == r"\left\lceil{x}\right\rceil"
377.     assert latex(frac(x)) == r"\operatorname{frac}{\left(x\right)}"
378.     assert latex(floor(x)**2) == r"\left\lfloor{x}\right\rfloor^{2}"
379.     assert latex(ceiling(x)**2) == r"\left\lceil{x}\right\rceil^{2}"
380.     assert latex(frac(x)**2) == r"\operatorname{frac}{\left(x\right)}^{2}"
381. 
382.     assert latex(Min(x, 2, x**3)) == r"\min\left(2, x, x^{3}\right)"
383.     assert latex(Min(x, y)**2) == r"\min\left(x, y\right)^{2}"
384.     assert latex(Max(x, 2, x**3)) == r"\max\left(2, x, x^{3}\right)"
385.     assert latex(Max(x, y)**2) == r"\max\left(x, y\right)^{2}"
386.     assert latex(Abs(x)) == r"\left|{x}\right|"
387.     assert latex(Abs(x)**2) == r"\left|{x}\right|^{2}"
388.     assert latex(re(x)) == r"\operatorname{re}{\left(x\right)}"
389.     assert latex(re(x + y)) == \
390.         r"\operatorname{re}{\left(x\right)} + \operatorname{re}{\left(y\right)}"
391.     assert latex(im(x)) == r"\operatorname{im}{\left(x\right)}"
392.     assert latex(conjugate(x)) == r"\overline{x}"
393.     assert latex(conjugate(x)**2) == r"\overline{x}^{2}"
394.     assert latex(conjugate(x**2)) == r"\overline{x}^{2}"
395.     assert latex(gamma(x)) == r"\Gamma\left(x\right)"
396.     w = Wild('w')
397.     assert latex(gamma(w)) == r"\Gamma\left(w\right)"
398.     assert latex(Order(x)) == r"O\left(x\right)"
399.     assert latex(Order(x, x)) == r"O\left(x\right)"
400.     assert latex(Order(x, (x, 0))) == r"O\left(x\right)"
401.     assert latex(Order(x, (x, oo))) == r"O\left(x; x\rightarrow \infty\right)"
402.     assert latex(Order(x - y, (x, y))) == \
403.         r"O\left(x - y; x\rightarrow y\right)"
404.     assert latex(Order(x, x, y)) == \
405.         r"O\left(x; \left( x, \  y\right)\rightarrow \left( 0, \  0\right)\right)"
406.     assert latex(Order(x, x, y)) == \
407.         r"O\left(x; \left( x, \  y\right)\rightarrow \left( 0, \  0\right)\right)"
408.     assert latex(Order(x, (x, oo), (y, oo))) == \
409.         r"O\left(x; \left( x, \  y\right)\rightarrow \left( \infty, \  \infty\right)\right)"
410.     assert latex(lowergamma(x, y)) == r'\gamma\left(x, y\right)'
411.     assert latex(lowergamma(x, y)**2) == r'\gamma^{2}\left(x, y\right)'
412.     assert latex(uppergamma(x, y)) == r'\Gamma\left(x, y\right)'
413.     assert latex(uppergamma(x, y)**2) == r'\Gamma^{2}\left(x, y\right)'
414. 
415.     assert latex(cot(x)) == r'\cot{\left(x \right)}'
416.     assert latex(coth(x)) == r'\coth{\left(x \right)}'
417.     assert latex(re(x)) == r'\operatorname{re}{\left(x\right)}'
418.     assert latex(im(x)) == r'\operatorname{im}{\left(x\right)}'
419.     assert latex(root(x, y)) == r'x^{\frac{1}{y}}'
420.     assert latex(arg(x)) == r'\arg{\left(x \right)}'
421. 
422.     assert latex(zeta(x)) == r"\zeta\left(x\right)"
423.     assert latex(zeta(x)**2) == r"\zeta^{2}\left(x\right)"
424.     assert latex(zeta(x, y)) == r"\zeta\left(x, y\right)"
425.     assert latex(zeta(x, y)**2) == r"\zeta^{2}\left(x, y\right)"
426.     assert latex(dirichlet_eta(x)) == r"\eta\left(x\right)"
427.     assert latex(dirichlet_eta(x)**2) == r"\eta^{2}\left(x\right)"
428.     assert latex(polylog(x, y)) == r"\operatorname{Li}_{x}\left(y\right)"
429.     assert latex(
430.         polylog(x, y)**2) == r"\operatorname{Li}_{x}^{2}\left(y\right)"
431.     assert latex(lerchphi(x, y, n)) == r"\Phi\left(x, y, n\right)"
432.     assert latex(lerchphi(x, y, n)**2) == r"\Phi^{2}\left(x, y, n\right)"
433.     assert latex(stieltjes(x)) == r"\gamma_{x}"
434.     assert latex(stieltjes(x)**2) == r"\gamma_{x}^{2}"
435.     assert latex(stieltjes(x, y)) == r"\gamma_{x}\left(y\right)"
436.     assert latex(stieltjes(x, y)**2) == r"\gamma_{x}\left(y\right)^{2}"
437. 
438.     assert latex(elliptic_k(z)) == r"K\left(z\right)"
439.     assert latex(elliptic_k(z)**2) == r"K^{2}\left(z\right)"
440.     assert latex(elliptic_f(x, y)) == r"F\left(x\middle| y\right)"
441.     assert latex(elliptic_f(x, y)**2) == r"F^{2}\left(x\middle| y\right)"
442.     assert latex(elliptic_e(x, y)) == r"E\left(x\middle| y\right)"
443.     assert latex(elliptic_e(x, y)**2) == r"E^{2}\left(x\middle| y\right)"
444.     assert latex(elliptic_e(z)) == r"E\left(z\right)"
445.     assert latex(elliptic_e(z)**2) == r"E^{2}\left(z\right)"
446.     assert latex(elliptic_pi(x, y, z)) == r"\Pi\left(x; y\middle| z\right)"
447.     assert latex(elliptic_pi(x, y, z)**2) == \
448.         r"\Pi^{2}\left(x; y\middle| z\right)"
449.     assert latex(elliptic_pi(x, y)) == r"\Pi\left(x\middle| y\right)"
450.     assert latex(elliptic_pi(x, y)**2) == r"\Pi^{2}\left(x\middle| y\right)"
451. 
452.     assert latex(Ei(x)) == r'\operatorname{Ei}{\left(x \right)}'
453.     assert latex(Ei(x)**2) == r'\operatorname{Ei}^{2}{\left(x \right)}'
454.     assert latex(expint(x, y)) == r'\operatorname{E}_{x}\left(y\right)'
455.     assert latex(expint(x, y)**2) == r'\operatorname{E}_{x}^{2}\left(y\right)'
456.     assert latex(Shi(x)**2) == r'\operatorname{Shi}^{2}{\left(x \right)}'
457.     assert latex(Si(x)**2) == r'\operatorname{Si}^{2}{\left(x \right)}'
458.     assert latex(Ci(x)**2) == r'\operatorname{Ci}^{2}{\left(x \right)}'
459.     assert latex(Chi(x)**2) == r'\operatorname{Chi}^{2}\left(x\right)'
460.     assert latex(Chi(x)) == r'\operatorname{Chi}\left(x\right)'
461.     assert latex(jacobi(n, a, b, x)) == \
462.         r'P_{n}^{\left(a,b\right)}\left(x\right)'
463.     assert latex(jacobi(n, a, b, x)**2) == \
464.         r'\left(P_{n}^{\left(a,b\right)}\left(x\right)\right)^{2}'
465.     assert latex(gegenbauer(n, a, x)) == \
466.         r'C_{n}^{\left(a\right)}\left(x\right)'
467.     assert latex(gegenbauer(n, a, x)**2) == \
468.         r'\left(C_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
469.     assert latex(chebyshevt(n, x)) == r'T_{n}\left(x\right)'
470.     assert latex(chebyshevt(n, x)**2) == \
471.         r'\left(T_{n}\left(x\right)\right)^{2}'
472.     assert latex(chebyshevu(n, x)) == r'U_{n}\left(x\right)'
473.     assert latex(chebyshevu(n, x)**2) == \
474.         r'\left(U_{n}\left(x\right)\right)^{2}'
475.     assert latex(legendre(n, x)) == r'P_{n}\left(x\right)'
476.     assert latex(legendre(n, x)**2) == r'\left(P_{n}\left(x\right)\right)^{2}'
477.     assert latex(assoc_legendre(n, a, x)) == \
478.         r'P_{n}^{\left(a\right)}\left(x\right)'
479.     assert latex(assoc_legendre(n, a, x)**2) == \
480.         r'\left(P_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
481.     assert latex(laguerre(n, x)) == r'L_{n}\left(x\right)'
482.     assert latex(laguerre(n, x)**2) == r'\left(L_{n}\left(x\right)\right)^{2}'
483.     assert latex(assoc_laguerre(n, a, x)) == \
484.         r'L_{n}^{\left(a\right)}\left(x\right)'
485.     assert latex(assoc_laguerre(n, a, x)**2) == \
486.         r'\left(L_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
487.     assert latex(hermite(n, x)) == r'H_{n}\left(x\right)'
488.     assert latex(hermite(n, x)**2) == r'\left(H_{n}\left(x\right)\right)^{2}'
489. 
490.     theta = Symbol("theta", real=True)
491.     phi = Symbol("phi", real=True)
492.     assert latex(Ynm(n, m, theta, phi)) == r'Y_{n}^{m}\left(\theta,\phi\right)'
493.     assert latex(Ynm(n, m, theta, phi)**3) == \
494.         r'\left(Y_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
495.     assert latex(Znm(n, m, theta, phi)) == r'Z_{n}^{m}\left(\theta,\phi\right)'
496.     assert latex(Znm(n, m, theta, phi)**3) == \
497.         r'\left(Z_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
498. 
499.     # Test latex printing of function names with "_"
500.     assert latex(polar_lift(0)) == \


File: sympy/printing/tests/test_latex.py
Line number range: 675 - 775
Content:
675. def test_latex_subs():
676.     assert latex(Subs(x*y, (
677.         x, y), (1, 2))) == r'\left. x y \right|_{\substack{ x=1\\ y=2 }}'
678. 
679. 
680. def test_latex_integrals():
681.     assert latex(Integral(log(x), x)) == r"\int \log{\left(x \right)}\, dx"
682.     assert latex(Integral(x**2, (x, 0, 1))) == \
683.         r"\int\limits_{0}^{1} x^{2}\, dx"
684.     assert latex(Integral(x**2, (x, 10, 20))) == \
685.         r"\int\limits_{10}^{20} x^{2}\, dx"
686.     assert latex(Integral(y*x**2, (x, 0, 1), y)) == \
687.         r"\int\int\limits_{0}^{1} x^{2} y\, dx\, dy"
688.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*') == \
689.         r"\begin{equation*}\int\int\limits_{0}^{1} x^{2} y\, dx\, dy\end{equation*}"
690.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*', itex=True) \
691.         == r"$$\int\int_{0}^{1} x^{2} y\, dx\, dy$$"
692.     assert latex(Integral(x, (x, 0))) == r"\int\limits^{0} x\, dx"
693.     assert latex(Integral(x*y, x, y)) == r"\iint x y\, dx\, dy"
694.     assert latex(Integral(x*y*z, x, y, z)) == r"\iiint x y z\, dx\, dy\, dz"
695.     assert latex(Integral(x*y*z*t, x, y, z, t)) == \
696.         r"\iiiint t x y z\, dx\, dy\, dz\, dt"
697.     assert latex(Integral(x, x, x, x, x, x, x)) == \
698.         r"\int\int\int\int\int\int x\, dx\, dx\, dx\, dx\, dx\, dx"
699.     assert latex(Integral(x, x, y, (z, 0, 1))) == \
700.         r"\int\limits_{0}^{1}\int\int x\, dx\, dy\, dz"
701. 
702.     # fix issue #10806
703.     assert latex(Integral(z, z)**2) == r"\left(\int z\, dz\right)^{2}"
704.     assert latex(Integral(x + z, z)) == r"\int \left(x + z\right)\, dz"
705.     assert latex(Integral(x+z/2, z)) == \
706.         r"\int \left(x + \frac{z}{2}\right)\, dz"
707.     assert latex(Integral(x**y, z)) == r"\int x^{y}\, dz"
708. 
709. 
710. def test_latex_sets():
711.     for s in (frozenset, set):
712.         assert latex(s([x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
713.         assert latex(s(range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
714.         assert latex(s(range(1, 13))) == \
715.             r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
716. 
717.     s = FiniteSet
718.     assert latex(s(*[x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
719.     assert latex(s(*range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
720.     assert latex(s(*range(1, 13))) == \
721.         r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
722. 
723. 
724. def test_latex_SetExpr():
725.     iv = Interval(1, 3)
726.     se = SetExpr(iv)
727.     assert latex(se) == r"SetExpr\left(\left[1, 3\right]\right)"
728. 
729. 
730. def test_latex_Range():
731.     assert latex(Range(1, 51)) == \
732.         r'\left\{1, 2, \ldots, 50\right\}'
733.     assert latex(Range(1, 4)) == r'\left\{1, 2, 3\right\}'
734. 
735.     assert latex(Range(0, 3, 1)) == r'\left\{0, 1, 2\right\}'
736. 
737.     assert latex(Range(0, 30, 1)) == r'\left\{0, 1, \ldots, 29\right\}'
738. 
739.     assert latex(Range(30, 1, -1)) == r'\left\{30, 29, \ldots, 2\right\}'
740. 
741.     assert latex(Range(0, oo, 2)) == r'\left\{0, 2, \ldots\right\}'
742. 
743.     assert latex(Range(oo, -2, -2)) == r'\left\{\ldots, 2, 0\right\}'
744. 
745.     assert latex(Range(-2, -oo, -1)) == \
746.         r'\left\{-2, -3, \ldots\right\}'
747. 
748. 
749. def test_latex_sequences():
750.     s1 = SeqFormula(a**2, (0, oo))
751.     s2 = SeqPer((1, 2))
752. 
753.     latex_str = r'\left[0, 1, 4, 9, \ldots\right]'
754.     assert latex(s1) == latex_str
755. 
756.     latex_str = r'\left[1, 2, 1, 2, \ldots\right]'
757.     assert latex(s2) == latex_str
758. 
759.     s3 = SeqFormula(a**2, (0, 2))
760.     s4 = SeqPer((1, 2), (0, 2))
761. 
762.     latex_str = r'\left[0, 1, 4\right]'
763.     assert latex(s3) == latex_str
764. 
765.     latex_str = r'\left[1, 2, 1\right]'
766.     assert latex(s4) == latex_str
767. 
768.     s5 = SeqFormula(a**2, (-oo, 0))
769.     s6 = SeqPer((1, 2), (-oo, 0))
770. 
771.     latex_str = r'\left[\ldots, 9, 4, 1, 0\right]'
772.     assert latex(s5) == latex_str
773. 
774.     latex_str = r'\left[\ldots, 2, 1, 2, 1\right]'
775.     assert latex(s6) == latex_str

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 05:53:58,765 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of the file `sympy/printing/tests/test_latex.py`. This context block contains the first 500 lines of that file.', relative_path='sympy/printing/tests/test_latex.py', start_line=1, end_line=500), ContextOutput(reasoning="The user requested the full content of the file `sympy/printing/tests/test_latex.py`. This context block contains a later portion of that file. It also includes the `test_latex_subs` function which is directly relevant to the user's stated purpose of investigating a bug in `Subs` LaTeX printing.", relative_path='sympy/printing/tests/test_latex.py', start_line=675, end_line=775)]
2025-12-23 05:53:58,768 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of sympy/printing/tests/test_latex.py
2025-12-23 05:53:58,768 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 05:53:58,768 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 05:53:58,769 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-23 05:53:58,769 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-23 05:53:58,769 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .github
|   └── FUNDING.yml
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.rst
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── documentation-style-guide.rst
|       ├── gotchas.rst
|       ├── guide.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   └── sparse.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   └── tensor.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   ├── runtests.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   └── release.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── array_utils.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_array_utils.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_pyutils.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── evaluate.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_evaluate.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_class_registry.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── immutable.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_commonmatrix.py
    |       ├── test_densearith.py
    |       ├── test_densesolve.py
    |       ├── test_densetools.py
    |       ├── test_immutable.py
    |       ├── test_interactions.py
    |       ├── test_matrices.py
    |       ├── test_normalforms.py
    |       ├── test_sparse.py
    |       └── test_sparsetools.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── egyptian_fraction.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── __init__.py
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine.py
    |   ├── inequalities.py
    |   ├── ode.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_diophantine.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_ode.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_module_imports.py
    |   |   ├── test_pickling.py
    |   |   ├── test_pytest.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Incorrect parenthesizing of Subs

Description: Here is an example.
```python
>>> from sympy import Subs
>>> from sympy.abc import x,y
>>> 3*Subs(-x+y, (x,),(1,))
```
LaTeX printing of this gives:  
```python
'3 \\left. - x + y \\right|_{\\substack{ x=1 }}'
```

![image](https://quicklatex.com/cache3/76/ql_9672fd7e62c909ff3d9ac8543c2e2576_l3.png)


It would be better to be parenthesized to:  
```python
'3 \\left. \\left(- x + y\\right) \\right|_{\\substack{ x=1 }}'
```

![image](https://quicklatex.com/cache3/bf/ql_936ffdb876e784206d4c54bb93d28dbf_l3.png)


Patch information:
diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py
index 8743723ea0..2a31ea8f96 100644
--- a/sympy/printing/latex.py
+++ b/sympy/printing/latex.py
@@ -699,6 +699,8 @@ def _print_Derivative(self, expr):
     def _print_Subs(self, subs):
         expr, old, new = subs.args
         latex_expr = self._print(expr)
+        if expr.is_Add:
+            latex_expr = r"\left(%s\right)" % latex_expr
         latex_old = (self._print(e) for e in old)
         latex_new = (self._print(e) for e in new)
         latex_subs = r'\\ '.join(


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of sympy/printing/tests/test_latex.py
Extra Requirements: 
Purpose: I need the content of the test file to identify and extract 3 test cases that are relevant to the reported bug in `Subs` LaTeX`Subs` LaTeX printing.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/printing/tests/test_latex.py
Line number range: 1 - 500
Content:
1. from sympy import (
2.     Add, Abs, Chi, Ci, CosineTransform, Dict, Ei, Eq, FallingFactorial,
3.     FiniteSet, Float, FourierTransform, Function, Indexed, IndexedBase, Integral,
4.     Interval, InverseCosineTransform, InverseFourierTransform, Derivative,
5.     InverseLaplaceTransform, InverseMellinTransform, InverseSineTransform,
6.     Lambda, LaplaceTransform, Limit, Matrix, Max, MellinTransform, Min, Mul,
7.     Order, Piecewise, Poly, ring, field, ZZ, Pow, Product, Range, Rational,
8.     RisingFactorial, rootof, RootSum, S, Shi, Si, SineTransform, Subs,
9.     Sum, Symbol, ImageSet, Tuple, Ynm, Znm, arg, asin, acsc, Mod,
10.     assoc_laguerre, assoc_legendre, beta, binomial, catalan, ceiling, Complement,
11.     chebyshevt, chebyshevu, conjugate, cot, coth, diff, dirichlet_eta, euler,
12.     exp, expint, factorial, factorial2, floor, gamma, gegenbauer, hermite,
13.     hyper, im, jacobi, laguerre, legendre, lerchphi, log, frac,
14.     meijerg, oo, polar_lift, polylog, re, root, sin, sqrt, symbols,
15.     uppergamma, zeta, subfactorial, totient, elliptic_k, elliptic_f,
16.     elliptic_e, elliptic_pi, cos, tan, Wild, true, false, Equivalent, Not,
17.     Contains, divisor_sigma, SeqPer, SeqFormula,
18.     SeqAdd, SeqMul, fourier_series, pi, ConditionSet, ComplexRegion, fps,
19.     AccumBounds, reduced_totient, primenu, primeomega, SingularityFunction,
20.     stieltjes, mathieuc, mathieus, mathieucprime, mathieusprime,
21.     UnevaluatedExpr, Quaternion, I, KroneckerProduct, LambertW)
22. 
23. from sympy.ntheory.factor_ import udivisor_sigma
24. 
25. from sympy.abc import mu, tau
26. from sympy.printing.latex import (latex, translate, greek_letters_set,
27.                                   tex_greek_dictionary, multiline_latex)
28. from sympy.tensor.array import (ImmutableDenseNDimArray,
29.                                 ImmutableSparseNDimArray,
30.                                 MutableSparseNDimArray,
31.                                 MutableDenseNDimArray,
32.                                 tensorproduct)
33. from sympy.utilities.pytest import XFAIL, raises
34. from sympy.functions import DiracDelta, Heaviside, KroneckerDelta, LeviCivita
35. from sympy.functions.combinatorial.numbers import bernoulli, bell, lucas, \
36.     fibonacci, tribonacci
37. from sympy.logic import Implies
38. from sympy.logic.boolalg import And, Or, Xor
39. from sympy.physics.quantum import Commutator, Operator
40. from sympy.physics.units import degree, radian, kg, meter, gibibyte, microgram, second
41. from sympy.core.trace import Tr
42. from sympy.core.compatibility import range
43. from sympy.combinatorics.permutations import Cycle, Permutation
44. from sympy import MatrixSymbol, ln
45. from sympy.vector import CoordSys3D, Cross, Curl, Dot, Divergence, Gradient, Laplacian
46. from sympy.sets.setexpr import SetExpr
47. from sympy.sets.sets import \
48.     Union, Intersection, Complement, SymmetricDifference, ProductSet
49. 
50. import sympy as sym
51. 
52. 
53. class lowergamma(sym.lowergamma):
54.     pass   # testing notation inheritance by a subclass with same name
55. 
56. 
57. x, y, z, t, a, b, c = symbols('x y z t a b c')
58. k, m, n = symbols('k m n', integer=True)
59. 
60. 
61. def test_printmethod():
62.     class R(Abs):
63.         def _latex(self, printer):
64.             return "foo(%s)" % printer._print(self.args[0])
65.     assert latex(R(x)) == "foo(x)"
66. 
67.     class R(Abs):
68.         def _latex(self, printer):
69.             return "foo"
70.     assert latex(R(x)) == "foo"
71. 
72. 
73. def test_latex_basic():
74.     assert latex(1 + x) == "x + 1"
75.     assert latex(x**2) == "x^{2}"
76.     assert latex(x**(1 + x)) == "x^{x + 1}"
77.     assert latex(x**3 + x + 1 + x**2) == "x^{3} + x^{2} + x + 1"
78. 
79.     assert latex(2*x*y) == "2 x y"
80.     assert latex(2*x*y, mul_symbol='dot') == r"2 \cdot x \cdot y"
81.     assert latex(3*x**2*y, mul_symbol='\\,') == r"3\,x^{2}\,y"
82.     assert latex(1.5*3**x, mul_symbol='\\,') == r"1.5 \cdot 3^{x}"
83. 
84.     assert latex(1/x) == r"\frac{1}{x}"
85.     assert latex(1/x, fold_short_frac=True) == "1 / x"
86.     assert latex(-S(3)/2) == r"- \frac{3}{2}"
87.     assert latex(-S(3)/2, fold_short_frac=True) == r"- 3 / 2"
88.     assert latex(1/x**2) == r"\frac{1}{x^{2}}"
89.     assert latex(1/(x + y)/2) == r"\frac{1}{2 \left(x + y\right)}"
90.     assert latex(x/2) == r"\frac{x}{2}"
91.     assert latex(x/2, fold_short_frac=True) == "x / 2"
92.     assert latex((x + y)/(2*x)) == r"\frac{x + y}{2 x}"
93.     assert latex((x + y)/(2*x), fold_short_frac=True) == \
94.         r"\left(x + y\right) / 2 x"
95.     assert latex((x + y)/(2*x), long_frac_ratio=0) == \
96.         r"\frac{1}{2 x} \left(x + y\right)"
97.     assert latex((x + y)/x) == r"\frac{x + y}{x}"
98.     assert latex((x + y)/x, long_frac_ratio=3) == r"\frac{x + y}{x}"
99.     assert latex((2*sqrt(2)*x)/3) == r"\frac{2 \sqrt{2} x}{3}"
100.     assert latex((2*sqrt(2)*x)/3, long_frac_ratio=2) == \
101.         r"\frac{2 x}{3} \sqrt{2}"
102. 
103.     assert latex(2*Integral(x, x)/3) == r"\frac{2 \int x\, dx}{3}"
104.     assert latex(2*Integral(x, x)/3, fold_short_frac=True) == \
105.         r"\left(2 \int x\, dx\right) / 3"
106. 
107.     assert latex(sqrt(x)) == r"\sqrt{x}"
108.     assert latex(x**Rational(1, 3)) == r"\sqrt[3]{x}"
109.     assert latex(x**Rational(1, 3), root_notation=False) == r"x^{\frac{1}{3}}"
110.     assert latex(sqrt(x)**3) == r"x^{\frac{3}{2}}"
111.     assert latex(sqrt(x), itex=True) == r"\sqrt{x}"
112.     assert latex(x**Rational(1, 3), itex=True) == r"\root{3}{x}"
113.     assert latex(sqrt(x)**3, itex=True) == r"x^{\frac{3}{2}}"
114.     assert latex(x**Rational(3, 4)) == r"x^{\frac{3}{4}}"
115.     assert latex(x**Rational(3, 4), fold_frac_powers=True) == "x^{3/4}"
116.     assert latex((x + 1)**Rational(3, 4)) == \
117.         r"\left(x + 1\right)^{\frac{3}{4}}"
118.     assert latex((x + 1)**Rational(3, 4), fold_frac_powers=True) == \
119.         r"\left(x + 1\right)^{3/4}"
120. 
121.     assert latex(1.5e20*x) == r"1.5 \cdot 10^{20} x"
122.     assert latex(1.5e20*x, mul_symbol='dot') == r"1.5 \cdot 10^{20} \cdot x"
123.     assert latex(1.5e20*x, mul_symbol='times') == \
124.         r"1.5 \times 10^{20} \times x"
125. 
126.     assert latex(1/sin(x)) == r"\frac{1}{\sin{\left(x \right)}}"
127.     assert latex(sin(x)**-1) == r"\frac{1}{\sin{\left(x \right)}}"
128.     assert latex(sin(x)**Rational(3, 2)) == \
129.         r"\sin^{\frac{3}{2}}{\left(x \right)}"
130.     assert latex(sin(x)**Rational(3, 2), fold_frac_powers=True) == \
131.         r"\sin^{3/2}{\left(x \right)}"
132. 
133.     assert latex(~x) == r"\neg x"
134.     assert latex(x & y) == r"x \wedge y"
135.     assert latex(x & y & z) == r"x \wedge y \wedge z"
136.     assert latex(x | y) == r"x \vee y"
137.     assert latex(x | y | z) == r"x \vee y \vee z"
138.     assert latex((x & y) | z) == r"z \vee \left(x \wedge y\right)"
139.     assert latex(Implies(x, y)) == r"x \Rightarrow y"
140.     assert latex(~(x >> ~y)) == r"x \not\Rightarrow \neg y"
141.     assert latex(Implies(Or(x,y), z)) == r"\left(x \vee y\right) \Rightarrow z"
142.     assert latex(Implies(z, Or(x,y))) == r"z \Rightarrow \left(x \vee y\right)"
143.     assert latex(~(x & y)) == r"\neg \left(x \wedge y\right)"
144. 
145.     assert latex(~x, symbol_names={x: "x_i"}) == r"\neg x_i"
146.     assert latex(x & y, symbol_names={x: "x_i", y: "y_i"}) == \
147.         r"x_i \wedge y_i"
148.     assert latex(x & y & z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
149.         r"x_i \wedge y_i \wedge z_i"
150.     assert latex(x | y, symbol_names={x: "x_i", y: "y_i"}) == r"x_i \vee y_i"
151.     assert latex(x | y | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
152.         r"x_i \vee y_i \vee z_i"
153.     assert latex((x & y) | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
154.         r"z_i \vee \left(x_i \wedge y_i\right)"
155.     assert latex(Implies(x, y), symbol_names={x: "x_i", y: "y_i"}) == \
156.         r"x_i \Rightarrow y_i"
157. 
158.     p = Symbol('p', positive=True)
159.     assert latex(exp(-p)*log(p)) == r"e^{- p} \log{\left(p \right)}"
160. 
161. 
162. def test_latex_builtins():
163.     assert latex(True) == r"\text{True}"
164.     assert latex(False) == r"\text{False}"
165.     assert latex(None) == r"\text{None}"
166.     assert latex(true) == r"\text{True}"
167.     assert latex(false) == r'\text{False}'
168. 
169. 
170. def test_latex_SingularityFunction():
171.     assert latex(SingularityFunction(x, 4, 5)) == \
172.         r"{\left\langle x - 4 \right\rangle}^{5}"
173.     assert latex(SingularityFunction(x, -3, 4)) == \
174.         r"{\left\langle x + 3 \right\rangle}^{4}"
175.     assert latex(SingularityFunction(x, 0, 4)) == \
176.         r"{\left\langle x \right\rangle}^{4}"
177.     assert latex(SingularityFunction(x, a, n)) == \
178.         r"{\left\langle - a + x \right\rangle}^{n}"
179.     assert latex(SingularityFunction(x, 4, -2)) == \
180.         r"{\left\langle x - 4 \right\rangle}^{-2}"
181.     assert latex(SingularityFunction(x, 4, -1)) == \
182.         r"{\left\langle x - 4 \right\rangle}^{-1}"
183. 
184. 
185. def test_latex_cycle():
186.     assert latex(Cycle(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
187.     assert latex(Cycle(1, 2)(4, 5, 6)) == \
188.         r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
189.     assert latex(Cycle()) == r"\left( \right)"
190. 
191. 
192. def test_latex_permutation():
193.     assert latex(Permutation(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
194.     assert latex(Permutation(1, 2)(4, 5, 6)) == \
195.         r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
196.     assert latex(Permutation()) == r"\left( \right)"
197.     assert latex(Permutation(2, 4)*Permutation(5)) == \
198.         r"\left( 2\; 4\right)\left( 5\right)"
199.     assert latex(Permutation(5)) == r"\left( 5\right)"
200. 
201. 
202. def test_latex_Float():
203.     assert latex(Float(1.0e100)) == r"1.0 \cdot 10^{100}"
204.     assert latex(Float(1.0e-100)) == r"1.0 \cdot 10^{-100}"
205.     assert latex(Float(1.0e-100), mul_symbol="times") == \
206.         r"1.0 \times 10^{-100}"
207. 
208. 
209. def test_latex_vector_expressions():
210.     A = CoordSys3D('A')
211. 
212.     assert latex(Cross(A.i, A.j*A.x*3+A.k)) == \
213.         r"\mathbf{\hat{i}_{A}} \times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
214.     assert latex(Cross(A.i, A.j)) == \
215.         r"\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}"
216.     assert latex(x*Cross(A.i, A.j)) == \
217.         r"x \left(\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}\right)"
218.     assert latex(Cross(x*A.i, A.j)) == \
219.         r'- \mathbf{\hat{j}_{A}} \times \left((x)\mathbf{\hat{i}_{A}}\right)'
220. 
221.     assert latex(Curl(3*A.x*A.j)) == \
222.         r"\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
223.     assert latex(Curl(3*A.x*A.j+A.i)) == \
224.         r"\nabla\times \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
225.     assert latex(Curl(3*x*A.x*A.j)) == \
226.         r"\nabla\times \left((3 \mathbf{{x}_{A}} x)\mathbf{\hat{j}_{A}}\right)"
227.     assert latex(x*Curl(3*A.x*A.j)) == \
228.         r"x \left(\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
229. 
230.     assert latex(Divergence(3*A.x*A.j+A.i)) == \
231.         r"\nabla\cdot \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
232.     assert latex(Divergence(3*A.x*A.j)) == \
233.         r"\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
234.     assert latex(x*Divergence(3*A.x*A.j)) == \
235.         r"x \left(\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
236. 
237.     assert latex(Dot(A.i, A.j*A.x*3+A.k)) == \
238.         r"\mathbf{\hat{i}_{A}} \cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
239.     assert latex(Dot(A.i, A.j)) == \
240.         r"\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}"
241.     assert latex(Dot(x*A.i, A.j)) == \
242.         r"\mathbf{\hat{j}_{A}} \cdot \left((x)\mathbf{\hat{i}_{A}}\right)"
243.     assert latex(x*Dot(A.i, A.j)) == \
244.         r"x \left(\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}\right)"
245. 
246.     assert latex(Gradient(A.x)) == r"\nabla \mathbf{{x}_{A}}"
247.     assert latex(Gradient(A.x + 3*A.y)) == \
248.         r"\nabla \left(\mathbf{{x}_{A}} + 3 \mathbf{{y}_{A}}\right)"
249.     assert latex(x*Gradient(A.x)) == r"x \left(\nabla \mathbf{{x}_{A}}\right)"
250.     assert latex(Gradient(x*A.x)) == r"\nabla \left(\mathbf{{x}_{A}} x\right)"
251. 
252.     assert latex(Laplacian(A.x)) == r"\triangle \mathbf{{x}_{A}}"
253.     assert latex(Laplacian(A.x + 3*A.y)) == \
254.         r"\triangle \left(\mathbf{{x}_{A}} + 3 \mathbf{{y}_{A}}\right)"
255.     assert latex(x*Laplacian(A.x)) == r"x \left(\triangle \mathbf{{x}_{A}}\right)"
256.     assert latex(Laplacian(x*A.x)) == r"\triangle \left(\mathbf{{x}_{A}} x\right)"
257. 
258. def test_latex_symbols():
259.     Gamma, lmbda, rho = symbols('Gamma, lambda, rho')
260.     tau, Tau, TAU, taU = symbols('tau, Tau, TAU, taU')
261.     assert latex(tau) == r"\tau"
262.     assert latex(Tau) == "T"
263.     assert latex(TAU) == r"\tau"
264.     assert latex(taU) == r"\tau"
265.     # Check that all capitalized greek letters are handled explicitly
266.     capitalized_letters = set(l.capitalize() for l in greek_letters_set)
267.     assert len(capitalized_letters - set(tex_greek_dictionary.keys())) == 0
268.     assert latex(Gamma + lmbda) == r"\Gamma + \lambda"
269.     assert latex(Gamma * lmbda) == r"\Gamma \lambda"
270.     assert latex(Symbol('q1')) == r"q_{1}"
271.     assert latex(Symbol('q21')) == r"q_{21}"
272.     assert latex(Symbol('epsilon0')) == r"\epsilon_{0}"
273.     assert latex(Symbol('omega1')) == r"\omega_{1}"
274.     assert latex(Symbol('91')) == r"91"
275.     assert latex(Symbol('alpha_new')) == r"\alpha_{new}"
276.     assert latex(Symbol('C^orig')) == r"C^{orig}"
277.     assert latex(Symbol('x^alpha')) == r"x^{\alpha}"
278.     assert latex(Symbol('beta^alpha')) == r"\beta^{\alpha}"
279.     assert latex(Symbol('e^Alpha')) == r"e^{A}"
280.     assert latex(Symbol('omega_alpha^beta')) == r"\omega^{\beta}_{\alpha}"
281.     assert latex(Symbol('omega') ** Symbol('beta')) == r"\omega^{\beta}"
282. 
283. 
284. @XFAIL
285. def test_latex_symbols_failing():
286.     rho, mass, volume = symbols('rho, mass, volume')
287.     assert latex(
288.         volume * rho == mass) == r"\rho \mathrm{volume} = \mathrm{mass}"
289.     assert latex(volume / mass * rho == 1) == \
290.         r"\rho \mathrm{volume} {\mathrm{mass}}^{(-1)} = 1"
291.     assert latex(mass**3 * volume**3) == \
292.         r"{\mathrm{mass}}^{3} \cdot {\mathrm{volume}}^{3}"
293. 
294. 
295. def test_latex_functions():
296.     assert latex(exp(x)) == "e^{x}"
297.     assert latex(exp(1) + exp(2)) == "e + e^{2}"
298. 
299.     f = Function('f')
300.     assert latex(f(x)) == r'f{\left(x \right)}'
301.     assert latex(f) == r'f'
302. 
303.     g = Function('g')
304.     assert latex(g(x, y)) == r'g{\left(x,y \right)}'
305.     assert latex(g) == r'g'
306. 
307.     h = Function('h')
308.     assert latex(h(x, y, z)) == r'h{\left(x,y,z \right)}'
309.     assert latex(h) == r'h'
310. 
311.     Li = Function('Li')
312.     assert latex(Li) == r'\operatorname{Li}'
313.     assert latex(Li(x)) == r'\operatorname{Li}{\left(x \right)}'
314. 
315.     mybeta = Function('beta')
316.     # not to be confused with the beta function
317.     assert latex(mybeta(x, y, z)) == r"\beta{\left(x,y,z \right)}"
318.     assert latex(beta(x, y)) == r'\operatorname{B}\left(x, y\right)'
319.     assert latex(beta(x, y)**2) == r'\operatorname{B}^{2}\left(x, y\right)'
320.     assert latex(mybeta(x)) == r"\beta{\left(x \right)}"
321.     assert latex(mybeta) == r"\beta"
322. 
323.     g = Function('gamma')
324.     # not to be confused with the gamma function
325.     assert latex(g(x, y, z)) == r"\gamma{\left(x,y,z \right)}"
326.     assert latex(g(x)) == r"\gamma{\left(x \right)}"
327.     assert latex(g) == r"\gamma"
328. 
329.     a1 = Function('a_1')
330. 
331.     assert latex(a1) == r"\operatorname{a_{1}}"
332.     assert latex(a1(x)) == r"\operatorname{a_{1}}{\left(x \right)}"
333. 
334.     # issue 5868
335.     omega1 = Function('omega1')
336.     assert latex(omega1) == r"\omega_{1}"
337.     assert latex(omega1(x)) == r"\omega_{1}{\left(x \right)}"
338. 
339.     assert latex(sin(x)) == r"\sin{\left(x \right)}"
340.     assert latex(sin(x), fold_func_brackets=True) == r"\sin {x}"
341.     assert latex(sin(2*x**2), fold_func_brackets=True) == \
342.         r"\sin {2 x^{2}}"
343.     assert latex(sin(x**2), fold_func_brackets=True) == \
344.         r"\sin {x^{2}}"
345. 
346.     assert latex(asin(x)**2) == r"\operatorname{asin}^{2}{\left(x \right)}"
347.     assert latex(asin(x)**2, inv_trig_style="full") == \
348.         r"\arcsin^{2}{\left(x \right)}"
349.     assert latex(asin(x)**2, inv_trig_style="power") == \
350.         r"\sin^{-1}{\left(x \right)}^{2}"
351.     assert latex(asin(x**2), inv_trig_style="power",
352.                  fold_func_brackets=True) == \
353.         r"\sin^{-1} {x^{2}}"
354.     assert latex(acsc(x), inv_trig_style="full") == \
355.         r"\operatorname{arccsc}{\left(x \right)}"
356. 
357.     assert latex(factorial(k)) == r"k!"
358.     assert latex(factorial(-k)) == r"\left(- k\right)!"
359.     assert latex(factorial(k)**2) == r"k!^{2}"
360. 
361.     assert latex(subfactorial(k)) == r"!k"
362.     assert latex(subfactorial(-k)) == r"!\left(- k\right)"
363.     assert latex(subfactorial(k)**2) == r"\left(!k\right)^{2}"
364. 
365.     assert latex(factorial2(k)) == r"k!!"
366.     assert latex(factorial2(-k)) == r"\left(- k\right)!!"
367.     assert latex(factorial2(k)**2) == r"k!!^{2}"
368. 
369.     assert latex(binomial(2, k)) == r"{\binom{2}{k}}"
370.     assert latex(binomial(2, k)**2) == r"{\binom{2}{k}}^{2}"
371. 
372.     assert latex(FallingFactorial(3, k)) == r"{\left(3\right)}_{k}"
373.     assert latex(RisingFactorial(3, k)) == r"{3}^{\left(k\right)}"
374. 
375.     assert latex(floor(x)) == r"\left\lfloor{x}\right\rfloor"
376.     assert latex(ceiling(x)) == r"\left\lceil{x}\right\rceil"
377.     assert latex(frac(x)) == r"\operatorname{frac}{\left(x\right)}"
378.     assert latex(floor(x)**2) == r"\left\lfloor{x}\right\rfloor^{2}"
379.     assert latex(ceiling(x)**2) == r"\left\lceil{x}\right\rceil^{2}"
380.     assert latex(frac(x)**2) == r"\operatorname{frac}{\left(x\right)}^{2}"
381. 
382.     assert latex(Min(x, 2, x**3)) == r"\min\left(2, x, x^{3}\right)"
383.     assert latex(Min(x, y)**2) == r"\min\left(x, y\right)^{2}"
384.     assert latex(Max(x, 2, x**3)) == r"\max\left(2, x, x^{3}\right)"
385.     assert latex(Max(x, y)**2) == r"\max\left(x, y\right)^{2}"
386.     assert latex(Abs(x)) == r"\left|{x}\right|"
387.     assert latex(Abs(x)**2) == r"\left|{x}\right|^{2}"
388.     assert latex(re(x)) == r"\operatorname{re}{\left(x\right)}"
389.     assert latex(re(x + y)) == \
390.         r"\operatorname{re}{\left(x\right)} + \operatorname{re}{\left(y\right)}"
391.     assert latex(im(x)) == r"\operatorname{im}{\left(x\right)}"
392.     assert latex(conjugate(x)) == r"\overline{x}"
393.     assert latex(conjugate(x)**2) == r"\overline{x}^{2}"
394.     assert latex(conjugate(x**2)) == r"\overline{x}^{2}"
395.     assert latex(gamma(x)) == r"\Gamma\left(x\right)"
396.     w = Wild('w')
397.     assert latex(gamma(w)) == r"\Gamma\left(w\right)"
398.     assert latex(Order(x)) == r"O\left(x\right)"
399.     assert latex(Order(x, x)) == r"O\left(x\right)"
400.     assert latex(Order(x, (x, 0))) == r"O\left(x\right)"
401.     assert latex(Order(x, (x, oo))) == r"O\left(x; x\rightarrow \infty\right)"
402.     assert latex(Order(x - y, (x, y))) == \
403.         r"O\left(x - y; x\rightarrow y\right)"
404.     assert latex(Order(x, x, y)) == \
405.         r"O\left(x; \left( x, \  y\right)\rightarrow \left( 0, \  0\right)\right)"
406.     assert latex(Order(x, x, y)) == \
407.         r"O\left(x; \left( x, \  y\right)\rightarrow \left( 0, \  0\right)\right)"
408.     assert latex(Order(x, (x, oo), (y, oo))) == \
409.         r"O\left(x; \left( x, \  y\right)\rightarrow \left( \infty, \  \infty\right)\right)"
410.     assert latex(lowergamma(x, y)) == r'\gamma\left(x, y\right)'
411.     assert latex(lowergamma(x, y)**2) == r'\gamma^{2}\left(x, y\right)'
412.     assert latex(uppergamma(x, y)) == r'\Gamma\left(x, y\right)'
413.     assert latex(uppergamma(x, y)**2) == r'\Gamma^{2}\left(x, y\right)'
414. 
415.     assert latex(cot(x)) == r'\cot{\left(x \right)}'
416.     assert latex(coth(x)) == r'\coth{\left(x \right)}'
417.     assert latex(re(x)) == r'\operatorname{re}{\left(x\right)}'
418.     assert latex(im(x)) == r'\operatorname{im}{\left(x\right)}'
419.     assert latex(root(x, y)) == r'x^{\frac{1}{y}}'
420.     assert latex(arg(x)) == r'\arg{\left(x \right)}'
421. 
422.     assert latex(zeta(x)) == r"\zeta\left(x\right)"
423.     assert latex(zeta(x)**2) == r"\zeta^{2}\left(x\right)"
424.     assert latex(zeta(x, y)) == r"\zeta\left(x, y\right)"
425.     assert latex(zeta(x, y)**2) == r"\zeta^{2}\left(x, y\right)"
426.     assert latex(dirichlet_eta(x)) == r"\eta\left(x\right)"
427.     assert latex(dirichlet_eta(x)**2) == r"\eta^{2}\left(x\right)"
428.     assert latex(polylog(x, y)) == r"\operatorname{Li}_{x}\left(y\right)"
429.     assert latex(
430.         polylog(x, y)**2) == r"\operatorname{Li}_{x}^{2}\left(y\right)"
431.     assert latex(lerchphi(x, y, n)) == r"\Phi\left(x, y, n\right)"
432.     assert latex(lerchphi(x, y, n)**2) == r"\Phi^{2}\left(x, y, n\right)"
433.     assert latex(stieltjes(x)) == r"\gamma_{x}"
434.     assert latex(stieltjes(x)**2) == r"\gamma_{x}^{2}"
435.     assert latex(stieltjes(x, y)) == r"\gamma_{x}\left(y\right)"
436.     assert latex(stieltjes(x, y)**2) == r"\gamma_{x}\left(y\right)^{2}"
437. 
438.     assert latex(elliptic_k(z)) == r"K\left(z\right)"
439.     assert latex(elliptic_k(z)**2) == r"K^{2}\left(z\right)"
440.     assert latex(elliptic_f(x, y)) == r"F\left(x\middle| y\right)"
441.     assert latex(elliptic_f(x, y)**2) == r"F^{2}\left(x\middle| y\right)"
442.     assert latex(elliptic_e(x, y)) == r"E\left(x\middle| y\right)"
443.     assert latex(elliptic_e(x, y)**2) == r"E^{2}\left(x\middle| y\right)"
444.     assert latex(elliptic_e(z)) == r"E\left(z\right)"
445.     assert latex(elliptic_e(z)**2) == r"E^{2}\left(z\right)"
446.     assert latex(elliptic_pi(x, y, z)) == r"\Pi\left(x; y\middle| z\right)"
447.     assert latex(elliptic_pi(x, y, z)**2) == \
448.         r"\Pi^{2}\left(x; y\middle| z\right)"
449.     assert latex(elliptic_pi(x, y)) == r"\Pi\left(x\middle| y\right)"
450.     assert latex(elliptic_pi(x, y)**2) == r"\Pi^{2}\left(x\middle| y\right)"
451. 
452.     assert latex(Ei(x)) == r'\operatorname{Ei}{\left(x \right)}'
453.     assert latex(Ei(x)**2) == r'\operatorname{Ei}^{2}{\left(x \right)}'
454.     assert latex(expint(x, y)) == r'\operatorname{E}_{x}\left(y\right)'
455.     assert latex(expint(x, y)**2) == r'\operatorname{E}_{x}^{2}\left(y\right)'
456.     assert latex(Shi(x)**2) == r'\operatorname{Shi}^{2}{\left(x \right)}'
457.     assert latex(Si(x)**2) == r'\operatorname{Si}^{2}{\left(x \right)}'
458.     assert latex(Ci(x)**2) == r'\operatorname{Ci}^{2}{\left(x \right)}'
459.     assert latex(Chi(x)**2) == r'\operatorname{Chi}^{2}\left(x\right)'
460.     assert latex(Chi(x)) == r'\operatorname{Chi}\left(x\right)'
461.     assert latex(jacobi(n, a, b, x)) == \
462.         r'P_{n}^{\left(a,b\right)}\left(x\right)'
463.     assert latex(jacobi(n, a, b, x)**2) == \
464.         r'\left(P_{n}^{\left(a,b\right)}\left(x\right)\right)^{2}'
465.     assert latex(gegenbauer(n, a, x)) == \
466.         r'C_{n}^{\left(a\right)}\left(x\right)'
467.     assert latex(gegenbauer(n, a, x)**2) == \
468.         r'\left(C_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
469.     assert latex(chebyshevt(n, x)) == r'T_{n}\left(x\right)'
470.     assert latex(chebyshevt(n, x)**2) == \
471.         r'\left(T_{n}\left(x\right)\right)^{2}'
472.     assert latex(chebyshevu(n, x)) == r'U_{n}\left(x\right)'
473.     assert latex(chebyshevu(n, x)**2) == \
474.         r'\left(U_{n}\left(x\right)\right)^{2}'
475.     assert latex(legendre(n, x)) == r'P_{n}\left(x\right)'
476.     assert latex(legendre(n, x)**2) == r'\left(P_{n}\left(x\right)\right)^{2}'
477.     assert latex(assoc_legendre(n, a, x)) == \
478.         r'P_{n}^{\left(a\right)}\left(x\right)'
479.     assert latex(assoc_legendre(n, a, x)**2) == \
480.         r'\left(P_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
481.     assert latex(laguerre(n, x)) == r'L_{n}\left(x\right)'
482.     assert latex(laguerre(n, x)**2) == r'\left(L_{n}\left(x\right)\right)^{2}'
483.     assert latex(assoc_laguerre(n, a, x)) == \
484.         r'L_{n}^{\left(a\right)}\left(x\right)'
485.     assert latex(assoc_laguerre(n, a, x)**2) == \
486.         r'\left(L_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
487.     assert latex(hermite(n, x)) == r'H_{n}\left(x\right)'
488.     assert latex(hermite(n, x)**2) == r'\left(H_{n}\left(x\right)\right)^{2}'
489. 
490.     theta = Symbol("theta", real=True)
491.     phi = Symbol("phi", real=True)
492.     assert latex(Ynm(n, m, theta, phi)) == r'Y_{n}^{m}\left(\theta,\phi\right)'
493.     assert latex(Ynm(n, m, theta, phi)**3) == \
494.         r'\left(Y_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
495.     assert latex(Znm(n, m, theta, phi)) == r'Z_{n}^{m}\left(\theta,\phi\right)'
496.     assert latex(Znm(n, m, theta, phi)**3) == \
497.         r'\left(Z_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
498. 
499.     # Test latex printing of function names with "_"
500.     assert latex(polar_lift(0)) == \


File: sympy/printing/tests/test_latex.py
Line number range: 675 - 775
Content:
675. def test_latex_subs():
676.     assert latex(Subs(x*y, (
677.         x, y), (1, 2))) == r'\left. x y \right|_{\substack{ x=1\\ y=2 }}'
678. 
679. 
680. def test_latex_integrals():
681.     assert latex(Integral(log(x), x)) == r"\int \log{\left(x \right)}\, dx"
682.     assert latex(Integral(x**2, (x, 0, 1))) == \
683.         r"\int\limits_{0}^{1} x^{2}\, dx"
684.     assert latex(Integral(x**2, (x, 10, 20))) == \
685.         r"\int\limits_{10}^{20} x^{2}\, dx"
686.     assert latex(Integral(y*x**2, (x, 0, 1), y)) == \
687.         r"\int\int\limits_{0}^{1} x^{2} y\, dx\, dy"
688.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*') == \
689.         r"\begin{equation*}\int\int\limits_{0}^{1} x^{2} y\, dx\, dy\end{equation*}"
690.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*', itex=True) \
691.         == r"$$\int\int_{0}^{1} x^{2} y\, dx\, dy$$"
692.     assert latex(Integral(x, (x, 0))) == r"\int\limits^{0} x\, dx"
693.     assert latex(Integral(x*y, x, y)) == r"\iint x y\, dx\, dy"
694.     assert latex(Integral(x*y*z, x, y, z)) == r"\iiint x y z\, dx\, dy\, dz"
695.     assert latex(Integral(x*y*z*t, x, y, z, t)) == \
696.         r"\iiiint t x y z\, dx\, dy\, dz\, dt"
697.     assert latex(Integral(x, x, x, x, x, x, x)) == \
698.         r"\int\int\int\int\int\int x\, dx\, dx\, dx\, dx\, dx\, dx"
699.     assert latex(Integral(x, x, y, (z, 0, 1))) == \
700.         r"\int\limits_{0}^{1}\int\int x\, dx\, dy\, dz"
701. 
702.     # fix issue #10806
703.     assert latex(Integral(z, z)**2) == r"\left(\int z\, dz\right)^{2}"
704.     assert latex(Integral(x + z, z)) == r"\int \left(x + z\right)\, dz"
705.     assert latex(Integral(x+z/2, z)) == \
706.         r"\int \left(x + \frac{z}{2}\right)\, dz"
707.     assert latex(Integral(x**y, z)) == r"\int x^{y}\, dz"
708. 
709. 
710. def test_latex_sets():
711.     for s in (frozenset, set):
712.         assert latex(s([x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
713.         assert latex(s(range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
714.         assert latex(s(range(1, 13))) == \
715.             r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
716. 
717.     s = FiniteSet
718.     assert latex(s(*[x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
719.     assert latex(s(*range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
720.     assert latex(s(*range(1, 13))) == \
721.         r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
722. 
723. 
724. def test_latex_SetExpr():
725.     iv = Interval(1, 3)
726.     se = SetExpr(iv)
727.     assert latex(se) == r"SetExpr\left(\left[1, 3\right]\right)"
728. 
729. 
730. def test_latex_Range():
731.     assert latex(Range(1, 51)) == \
732.         r'\left\{1, 2, \ldots, 50\right\}'
733.     assert latex(Range(1, 4)) == r'\left\{1, 2, 3\right\}'
734. 
735.     assert latex(Range(0, 3, 1)) == r'\left\{0, 1, 2\right\}'
736. 
737.     assert latex(Range(0, 30, 1)) == r'\left\{0, 1, \ldots, 29\right\}'
738. 
739.     assert latex(Range(30, 1, -1)) == r'\left\{30, 29, \ldots, 2\right\}'
740. 
741.     assert latex(Range(0, oo, 2)) == r'\left\{0, 2, \ldots\right\}'
742. 
743.     assert latex(Range(oo, -2, -2)) == r'\left\{\ldots, 2, 0\right\}'
744. 
745.     assert latex(Range(-2, -oo, -1)) == \
746.         r'\left\{-2, -3, \ldots\right\}'
747. 
748. 
749. def test_latex_sequences():
750.     s1 = SeqFormula(a**2, (0, oo))
751.     s2 = SeqPer((1, 2))
752. 
753.     latex_str = r'\left[0, 1, 4, 9, \ldots\right]'
754.     assert latex(s1) == latex_str
755. 
756.     latex_str = r'\left[1, 2, 1, 2, \ldots\right]'
757.     assert latex(s2) == latex_str
758. 
759.     s3 = SeqFormula(a**2, (0, 2))
760.     s4 = SeqPer((1, 2), (0, 2))
761. 
762.     latex_str = r'\left[0, 1, 4\right]'
763.     assert latex(s3) == latex_str
764. 
765.     latex_str = r'\left[1, 2, 1\right]'
766.     assert latex(s4) == latex_str
767. 
768.     s5 = SeqFormula(a**2, (-oo, 0))
769.     s6 = SeqPer((1, 2), (-oo, 0))
770. 
771.     latex_str = r'\left[\ldots, 9, 4, 1, 0\right]'
772.     assert latex(s5) == latex_str
773. 
774.     latex_str = r'\left[\ldots, 2, 1, 2, 1\right]'
775.     assert latex(s6) == latex_str

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 05:55:27,591 - thread-132440483952320.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find 3 relevant existing test cases for a bug in LaTeX printing of `Subs`. The provided context contains `sympy/printing/tests/test_latex.py`, which is the test file for the modified code. I have analyzed the file and found three suitable test cases: `test_latex_subs`, `test_latex_integrals`, and `test_latex_vector_expressions`. The provided context includes the full implementation of these test methods, along with all necessary imports and symbol definitions. Therefore, the current context is sufficient to extract the 3 requested test cases and fulfill the user's query. No additional context is required." query='' extra_requirements='' purpose=''
2025-12-23 05:55:27,593 - thread-132440483952320.prometheus_context_collector - INFO - Successfully retrieved 2 context snippets
