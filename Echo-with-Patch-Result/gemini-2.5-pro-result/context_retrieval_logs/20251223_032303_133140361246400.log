2025-12-23 03:23:03,254 - thread-133140361246400.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: The default value for positional only argument has vanished

Description: **Describe the bug**
The default value for positional only argument has vanished

**To Reproduce**

Build following document:
```
.. py:function:: foo(a, b=0, /, c=1)
```

Result:
<img width="148" alt="スクリーンショット 2020-05-30 23 43 01" src="https://user-images.githubusercontent.com/748828/83331159-4eab4a80-a2cf-11ea-9559-9b17cc56bc01.png">

**Expected behavior**
The default value is shown.

**Your project**
No.

**Environment info**
- OS: Mac
- Python version: 3.8.2
- Sphinx version: 3.1.0dev
- Sphinx extensions:  No
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py
index 15f0d66e2..7508144d2 100644
--- a/sphinx/util/inspect.py
+++ b/sphinx/util/inspect.py
@@ -520,15 +520,32 @@ def signature_from_str(signature: str) -> inspect.Signature:
     args = definition.args
     params = []
 
+    # compute alignment for defaults across all positional parameters
     if hasattr(args, "posonlyargs"):
-        for arg in args.posonlyargs:  # type: ignore
+        posonly_count = len(args.posonlyargs)  # type: ignore
+    else:
+        posonly_count = 0
+    total_positionals = posonly_count + len(args.args)
+    num_defaults = len(args.defaults)
+
+    if hasattr(args, "posonlyargs"):
+        for i, arg in enumerate(args.posonlyargs):  # type: ignore
+            # defaults correspond to the last num_defaults positional params
+            if total_positionals - i <= num_defaults:
+                index_in_defaults = i - (total_positionals - num_defaults)
+                default = ast_unparse(args.defaults[index_in_defaults])
+            else:
+                default = Parameter.empty
+
             annotation = ast_unparse(arg.annotation) or Parameter.empty
             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,
-                                    annotation=annotation))
+                                    default=default, annotation=annotation))
 
     for i, arg in enumerate(args.args):
-        if len(args.args) - i <= len(args.defaults):
-            default = ast_unparse(args.defaults[-len(args.args) + i])
+        gi = posonly_count + i  # global index among positional params
+        if total_positionals - gi <= num_defaults:
+            index_in_defaults = gi - (total_positionals - num_defaults)
+            default = ast_unparse(args.defaults[index_in_defaults])
         else:
             default = Parameter.empty
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 03:23:03,362 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       └── main.yml
├── .travis.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── authors.rst
|   ├── changes.rst
|   ├── code_of_conduct.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── index.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── devguide.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── theming.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── conftest.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enum.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── methods.py
|   |   |       ├── need_mocks.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   └── typing_test_data.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: The default value for positional only argument has vanished

Description: **Describe the bug**
The default value for positional only argument has vanished

**To Reproduce**

Build following document:
```
.. py:function:: foo(a, b=0, /, c=1)
```

Result:
<img width="148" alt="スクリーンショット 2020-05-30 23 43 01" src="https://user-images.githubusercontent.com/748828/83331159-4eab4a80-a2cf-11ea-9559-9b17cc56bc01.png">

**Expected behavior**
The default value is shown.

**Your project**
No.

**Environment info**
- OS: Mac
- Python version: 3.8.2
- Sphinx version: 3.1.0dev
- Sphinx extensions:  No
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py
index 15f0d66e2..7508144d2 100644
--- a/sphinx/util/inspect.py
+++ b/sphinx/util/inspect.py
@@ -520,15 +520,32 @@ def signature_from_str(signature: str) -> inspect.Signature:
     args = definition.args
     params = []
 
+    # compute alignment for defaults across all positional parameters
     if hasattr(args, "posonlyargs"):
-        for arg in args.posonlyargs:  # type: ignore
+        posonly_count = len(args.posonlyargs)  # type: ignore
+    else:
+        posonly_count = 0
+    total_positionals = posonly_count + len(args.args)
+    num_defaults = len(args.defaults)
+
+    if hasattr(args, "posonlyargs"):
+        for i, arg in enumerate(args.posonlyargs):  # type: ignore
+            # defaults correspond to the last num_defaults positional params
+            if total_positionals - i <= num_defaults:
+                index_in_defaults = i - (total_positionals - num_defaults)
+                default = ast_unparse(args.defaults[index_in_defaults])
+            else:
+                default = Parameter.empty
+
             annotation = ast_unparse(arg.annotation) or Parameter.empty
             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,
-                                    annotation=annotation))
+                                    default=default, annotation=annotation))
 
     for i, arg in enumerate(args.args):
-        if len(args.args) - i <= len(args.defaults):
-            default = ast_unparse(args.defaults[-len(args.args) + i])
+        gi = posonly_count + i  # global index among positional params
+        if total_positionals - gi <= num_defaults:
+            index_in_defaults = gi - (total_positionals - num_defaults)
+            default = ast_unparse(args.defaults[index_in_defaults])
         else:
             default = Parameter.empty
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 03:23:16,722 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find relevant test cases for a bug concerning positional-only arguments. The provided patch modifies `sphinx/util/inspect.py`. Therefore, the most relevant file to start with is its corresponding test file, `tests/test_util_inspect.py`, to see how signatures are tested. I currently have no code context, so I must request this file.' query='Please provide the content of the file `tests/test_util_inspect.py`.' extra_requirements='' purpose='This file is needed to find test cases that validate function signature parsing, which is the core of the reported bug and the provided patch.'
2025-12-23 03:23:16,723 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the content of the file `tests/test_util_inspect.py`.
2025-12-23 03:23:16,723 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 03:23:16,724 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 03:23:16,725 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 03:23:16,725 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the content of the file `tests/test_util_inspect.py`.
Purpose: This file is needed to find test cases that validate function signature parsing, which is the core of the reported bug and the provided patch.
2025-12-23 03:23:18,628 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/test_util_inspect.py"}'}, '__gemini_function_call_thought_signatures__': {'0f1aa621-931c-4a43-8c6a-46f25d1883e4': 'CtMDAY89a18DDm3XUddwtXNvWQg/RIGBlchXRAamOE/7nVwSRk3KT3EBcIF/hYQ+PlOFoynWjez0D46byK7xIT7fyIfmL/OMId8xJ1qn6CfKZjzpaNjed4jRLIzUimAwY1zPE2HPoZh1QSyE5NgYkjN4v1xLbqDLK+5o3qjuhw07f4fVH3LvAENqS5oLwzyGp9ivjbLGqObllLW0v2l75U2pEx41ZojJc3enWmxf0fKJXDVr1vP8oW4BjjFXD4QQ9v8AbjYKtJmz5naLHN1ZURNehEv37nq6GbuJ+6q/eYp/AUZdn7cP4tOxf/Cj0mseGfB2ieniKAqDCXQ5hHf8IjFeTZ+Io+FdCY/JbnmSGZdHKsYdWugJfBHv1rZR4PI6aNGEO2gFe7GaQ5HF41VqaLdO94Pw5xwxgLDbizGFZk5nApNRaYTTHoZBmoMtQZGL5MnKZMsdbbC0Wkn+FnJIUaZxJyjCUj8IyKXjvWnwxinU0v5jn4Inn6PO+yE2p7TbqEC03xrEQIyB+Mz13q3G6oXYXJEMSZr7oZhHa/MyN2bvsi4iN0fRfbieC9Dx992PsS5aljD2FzT5ZH7mlciTcfMtOOkH4/sY+usl7YqYc8twrDNovSc='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2075, 'candidates_token_count': 23, 'total_token_count': 2220, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2075}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 23}], 'thoughts_token_count': 122, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.09662969216056493, 'model_name': 'gemini-2.5-pro'} id='run--7b8347f5-a48a-4ca3-94e9-3b69e9366502-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_util_inspect.py'}, 'id': '0f1aa621-931c-4a43-8c6a-46f25d1883e4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2075, 'output_tokens': 23, 'total_tokens': 2220, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 122}}
2025-12-23 03:23:22,374 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_file_node_with_relative_path', 'arguments': '{"relative_path": "sphinx/util/inspect.py"}'}, '__gemini_function_call_thought_signatures__': {'2153d3be-150b-4ae8-9c91-8ec2788e2793': 'CsIIAY89a18ywbEFx2w2z+fKVgmTrlFzn7FdXYFY4p8iUQcF6ntCx37nd4DTDhoPfTtXUA7AacG3Vu1YnmUuHcRYz0ONsVWk3Am5ckfusk4NwatppjHQbEhSgBNveNXYGJcZwzlBuHjLFKc9lwrs00LqXyS1zyYf9HgIpBGc7ErOi8CLb+4Y8bc0QiWfh3swjvvWkcw+uWaorCcUY8YfdCy3qArL78yNDki+/ed0NP8djJmOvEr/nr/TOCJsyumcDUwHofPBST4Wpb8w0b8SkF6gFqbn4sEyj+/ZqYIs+meLO1xKhJuQ6+L/pI6mWnAB/XT1E67KkjdcWHDfekrMHCPQkAazJ7VKRv7sB1nn+pw7yqqXJU7cQamfvqGP6ocgYDZXsEXxjIJ9JSdE+gbuxE7H53jlFwjst2W5vUy8yBS7liihvHaPX2l9zS6mGQDYSrjcnGROJg+2UeYi7TRkfrjIWbdnhfuAyiIzRWhpAeTH3icet2n+JkGz4guBKaiiHQIKNz5pcLpMQQyRUUNPemM3aEK0s/AADoo7BN9deh498TPXVhaJAY+r0o/R0tSnDf1ZxAlWs/Z+orEWyxLBlZoJcLXxeuMvqFunHgHr54PdUp2ndG1Ad16wg9n1RdRE3A1hMo/LYho6M4hUYq2oi4EDuumCTBDaPmezWRKRcNqNZnaEMUxeLQo/KzWCUzb6wJHgH0RzGRHrB39D337I47WlUy4DC1IvnbfwDd8bTKjvEY8fVRWGw7TfNTqG4RgLY72q72gF9y5AauORgk8fCibTMkUPWxvHOhkwMgPhMrLoRV+D64TFw5U+7E9aroHCfJXR7SPMu5/2TspiypyZcloFQ147gme6V5ICRZMKdT18wckm6+bhcVptX8lgDgaxAAiHclKsUB3z6zkyOtEZmkrvbx0VsUrB+VtPWgvNxTBa5BaxsaOt4qNotl+eucDOE3HGEU7TQVUkXOU3QPg+eCUQL9EQG2V+r4bZKEkZ9w43GgzYKti/HS9jsM8xq8wwWvCbb3Mvq1gI/q0O1M+j1kSSMTD3ClRwuIGbyvzp5DZmGF6f456N10xCNEmHa9Yw1m9NtXZx9RCmNG0qLCbVJrAIixw9Lb8otDLZY1buW0tfv+dbDVxy1ika16prjq3Ws238ymrT5PTtvbPk2119v66G4DZ0sQsPmlI6eBKeLRgd5vBfhhn1uLba1GMEw9NAKc/O9K4FWeOQZmIx/U8KXGY8P6iFw10Uodw0zKM68hIUKAV3/L2LQGZgK9Ku69kU9gP2qPgJnYCIO2ZVTTI7HzZJm/fLIycusOxdDIZG/SkhVe9Mlb2TeeKSQKT3qtNefCwi6SWEXaXAZv/bwcD7edo3HOubeZu6el4KecG6UDkcIoPUocBhexxYo105xXc8h3f3PsWAdxlgc4TWwbgxMmlyd4wSbOuoYhaV/e6K/ycb5vveXQ=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9977, 'candidates_token_count': 21, 'total_token_count': 10258, 'cached_content_token_count': 1830, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10099}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1830}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 260}, 'finish_reason': 'STOP', 'avg_logprobs': -1.1567891438802083, 'model_name': 'gemini-2.5-pro'} id='run--09fa4780-5fe9-4a2f-ba31-a365f6b1767a-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'sphinx/util/inspect.py'}, 'id': '2153d3be-150b-4ae8-9c91-8ec2788e2793', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9977, 'output_tokens': 21, 'total_tokens': 10258, 'input_token_details': {'cache_read': 1830}, 'output_token_details': {'reasoning': 260}}
2025-12-23 03:23:24,726 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sphinx/util/inspect.py"}'}, '__gemini_function_call_thought_signatures__': {'0c4a0821-c4be-406a-ac98-f087505600a0': 'CukCAY89a1+XoLKmgQXIBWKguBMZfhEFJSjpUSQ0gpLvTE8NL3y08uF74rljQf8TZMiHT8Ruh4Ds9DPEEP5PRjSNGNjq+0btZZSYUK1SeQApHnYOXvu/pHt5VDENNBt2HEjZrb4fq8E510z06KITyRJ9xoPhMHAHqPgl30NSfzJ1eFOMef1p8ObOqBgmlrET8Bp8BAAuLGoyT4C789HYQFl8cxCrtURHTZeCJOidVh702J0jnhONVTC5s0eLr+ajlcCyF/YglXKQxHA4fRMz/ONd5XybGFON74BwavnvKIcUviqTXl5g2G9VV8FUcpH7XPSrDOF04Z1Y56Mu9dWxi1nObKooy0n3zER61flb3gCgJxiuu7vxUZwhVr+6CfFwHnmFTCZMucWn3kI9OU+GnlSswv2dRS+5yia9ZUxgh5sH699wtl5DPVYajWdBLTIbQ1TdfKwa1swRoM4uTmlcz8qq17NaYuUcclgjHA=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10053, 'candidates_token_count': 21, 'total_token_count': 10153, 'cached_content_token_count': 9153, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10435}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9153}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 79}, 'finish_reason': 'STOP', 'avg_logprobs': -0.41625072842552546, 'model_name': 'gemini-2.5-pro'} id='run--8820206a-bedd-40f3-9828-b232b8233c10-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sphinx/util/inspect.py'}, 'id': '0c4a0821-c4be-406a-ac98-f087505600a0', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10053, 'output_tokens': 21, 'total_tokens': 10153, 'input_token_details': {'cache_read': 9153}, 'output_token_details': {'reasoning': 79}}
2025-12-23 03:23:30,026 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have gathered the content of `tests/test_util_inspect.py` as requested, which is essential for understanding the test cases related to function signature parsing. To provide a more complete picture, I also retrieved the source code of the module being tested, `sphinx/util/inspect.py`. This allows for a direct comparison between the test implementation and the code it validates, which should be helpful in addressing the reported bug.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 16908, 'candidates_token_count': 88, 'total_token_count': 17307, 'cached_content_token_count': 9431, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17369}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9431}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 88}], 'thoughts_token_count': 311}, 'finish_reason': 'STOP', 'avg_logprobs': -0.379695632240989, 'model_name': 'gemini-2.5-pro'} id='run--5fd7a9b9-659d-4f54-8669-2fe5b6326ca6-0' usage_metadata={'input_tokens': 16908, 'output_tokens': 88, 'total_tokens': 17307, 'input_token_details': {'cache_read': 9431}, 'output_token_details': {'reasoning': 311}}
2025-12-23 03:23:30,028 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the content of the file `tests/test_util_inspect.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This file is needed to find test cases that validate function signature parsing, which is the core of the reported bug and the provided patch.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sphinx/util/inspect.py
Line number range: 1 - 500
Content:
1. """
2.     sphinx.util.inspect
3.     ~~~~~~~~~~~~~~~~~~~
4. 
5.     Helpers for inspecting Python modules.
6. 
7.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import builtins
12. import enum
13. import inspect
14. import re
15. import sys
16. import typing
17. import warnings
18. from functools import partial, partialmethod
19. from inspect import (  # NOQA
20.     Parameter, isclass, ismethod, ismethoddescriptor
21. )
22. from io import StringIO
23. from typing import Any, Callable, Mapping, List, Optional, Tuple
24. from typing import cast
25. 
26. from sphinx.deprecation import RemovedInSphinx40Warning, RemovedInSphinx50Warning
27. from sphinx.pycode.ast import ast  # for py35-37
28. from sphinx.pycode.ast import unparse as ast_unparse
29. from sphinx.util import logging
30. from sphinx.util.typing import stringify as stringify_annotation
31. 
32. if sys.version_info > (3, 7):
33.     from types import (
34.         ClassMethodDescriptorType,
35.         MethodDescriptorType,
36.         WrapperDescriptorType
37.     )
38. else:
39.     ClassMethodDescriptorType = type(object.__init__)
40.     MethodDescriptorType = type(str.join)
41.     WrapperDescriptorType = type(dict.__dict__['fromkeys'])
42. 
43. logger = logging.getLogger(__name__)
44. 
45. memory_address_re = re.compile(r' at 0x[0-9a-f]{8,16}(?=>)', re.IGNORECASE)
46. 
47. 
48. # Copied from the definition of inspect.getfullargspec from Python master,
49. # and modified to remove the use of special flags that break decorated
50. # callables and bound methods in the name of backwards compatibility. Used
51. # under the terms of PSF license v2, which requires the above statement
52. # and the following:
53. #
54. #   Copyright (c) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009,
55. #   2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017 Python Software
56. #   Foundation; All Rights Reserved
57. def getargspec(func: Callable) -> Any:
58.     """Like inspect.getfullargspec but supports bound methods, and wrapped
59.     methods."""
60.     warnings.warn('sphinx.ext.inspect.getargspec() is deprecated',
61.                   RemovedInSphinx50Warning, stacklevel=2)
62.     # On 3.5+, signature(int) or similar raises ValueError. On 3.4, it
63.     # succeeds with a bogus signature. We want a TypeError uniformly, to
64.     # match historical behavior.
65.     if (isinstance(func, type) and
66.             is_builtin_class_method(func, "__new__") and
67.             is_builtin_class_method(func, "__init__")):
68.         raise TypeError(
69.             "can't compute signature for built-in type {}".format(func))
70. 
71.     sig = inspect.signature(func)
72. 
73.     args = []
74.     varargs = None
75.     varkw = None
76.     kwonlyargs = []
77.     defaults = ()
78.     annotations = {}
79.     defaults = ()
80.     kwdefaults = {}
81. 
82.     if sig.return_annotation is not sig.empty:
83.         annotations['return'] = sig.return_annotation
84. 
85.     for param in sig.parameters.values():
86.         kind = param.kind
87.         name = param.name
88. 
89.         if kind is Parameter.POSITIONAL_ONLY:
90.             args.append(name)
91.         elif kind is Parameter.POSITIONAL_OR_KEYWORD:
92.             args.append(name)
93.             if param.default is not param.empty:
94.                 defaults += (param.default,)  # type: ignore
95.         elif kind is Parameter.VAR_POSITIONAL:
96.             varargs = name
97.         elif kind is Parameter.KEYWORD_ONLY:
98.             kwonlyargs.append(name)
99.             if param.default is not param.empty:
100.                 kwdefaults[name] = param.default
101.         elif kind is Parameter.VAR_KEYWORD:
102.             varkw = name
103. 
104.         if param.annotation is not param.empty:
105.             annotations[name] = param.annotation
106. 
107.     if not kwdefaults:
108.         # compatibility with 'func.__kwdefaults__'
109.         kwdefaults = None
110. 
111.     if not defaults:
112.         # compatibility with 'func.__defaults__'
113.         defaults = None
114. 
115.     return inspect.FullArgSpec(args, varargs, varkw, defaults,
116.                                kwonlyargs, kwdefaults, annotations)
117. 
118. 
119. def unwrap(obj: Any) -> Any:
120.     """Get an original object from wrapped object (wrapped functions)."""
121.     try:
122.         return inspect.unwrap(obj)
123.     except ValueError:
124.         # might be a mock object
125.         return obj
126. 
127. 
128. def unwrap_all(obj: Any, *, stop: Callable = None) -> Any:
129.     """
130.     Get an original object from wrapped object (unwrapping partials, wrapped
131.     functions, and other decorators).
132.     """
133.     while True:
134.         if stop and stop(obj):
135.             return obj
136.         elif ispartial(obj):
137.             obj = obj.func
138.         elif inspect.isroutine(obj) and hasattr(obj, '__wrapped__'):
139.             obj = obj.__wrapped__
140.         elif isclassmethod(obj):
141.             obj = obj.__func__
142.         elif isstaticmethod(obj):
143.             obj = obj.__func__
144.         else:
145.             return obj
146. 
147. 
148. def isenumclass(x: Any) -> bool:
149.     """Check if the object is subclass of enum."""
150.     return inspect.isclass(x) and issubclass(x, enum.Enum)
151. 
152. 
153. def isenumattribute(x: Any) -> bool:
154.     """Check if the object is attribute of enum."""
155.     return isinstance(x, enum.Enum)
156. 
157. 
158. def unpartial(obj: Any) -> Any:
159.     """Get an original object from partial object.
160. 
161.     This returns given object itself if not partial.
162.     """
163.     while ispartial(obj):
164.         obj = obj.func
165. 
166.     return obj
167. 
168. 
169. def ispartial(obj: Any) -> bool:
170.     """Check if the object is partial."""
171.     return isinstance(obj, (partial, partialmethod))
172. 
173. 
174. def isclassmethod(obj: Any) -> bool:
175.     """Check if the object is classmethod."""
176.     if isinstance(obj, classmethod):
177.         return True
178.     elif inspect.ismethod(obj) and obj.__self__ is not None and isclass(obj.__self__):
179.         return True
180. 
181.     return False
182. 
183. 
184. def isstaticmethod(obj: Any, cls: Any = None, name: str = None) -> bool:
185.     """Check if the object is staticmethod."""
186.     if isinstance(obj, staticmethod):
187.         return True
188.     elif cls and name:
189.         # trace __mro__ if the method is defined in parent class
190.         #
191.         # .. note:: This only works well with new style classes.
192.         for basecls in getattr(cls, '__mro__', [cls]):
193.             meth = basecls.__dict__.get(name)
194.             if meth:
195.                 if isinstance(meth, staticmethod):
196.                     return True
197.                 else:
198.                     return False
199. 
200.     return False
201. 
202. 
203. def isdescriptor(x: Any) -> bool:
204.     """Check if the object is some kind of descriptor."""
205.     for item in '__get__', '__set__', '__delete__':
206.         if hasattr(safe_getattr(x, item, None), '__call__'):
207.             return True
208.     return False
209. 
210. 
211. def isabstractmethod(obj: Any) -> bool:
212.     """Check if the object is an abstractmethod."""
213.     return safe_getattr(obj, '__isabstractmethod__', False) is True
214. 
215. 
216. def is_cython_function_or_method(obj: Any) -> bool:
217.     """Check if the object is a function or method in cython."""
218.     try:
219.         return obj.__class__.__name__ == 'cython_function_or_method'
220.     except AttributeError:
221.         return False
222. 
223. 
224. def isattributedescriptor(obj: Any) -> bool:
225.     """Check if the object is an attribute like descriptor."""
226.     if inspect.isdatadescriptor(obj):
227.         # data descriptor is kind of attribute
228.         return True
229.     elif isdescriptor(obj):
230.         # non data descriptor
231.         unwrapped = unwrap(obj)
232.         if isfunction(unwrapped) or isbuiltin(unwrapped) or inspect.ismethod(unwrapped):
233.             # attribute must not be either function, builtin and method
234.             return False
235.         elif is_cython_function_or_method(unwrapped):
236.             # attribute must not be either function and method (for cython)
237.             return False
238.         elif inspect.isclass(unwrapped):
239.             # attribute must not be a class
240.             return False
241.         elif isinstance(unwrapped, (ClassMethodDescriptorType,
242.                                     MethodDescriptorType,
243.                                     WrapperDescriptorType)):
244.             # attribute must not be a method descriptor
245.             return False
246.         elif type(unwrapped).__name__ == "instancemethod":
247.             # attribute must not be an instancemethod (C-API)
248.             return False
249.         else:
250.             return True
251.     else:
252.         return False
253. 
254. 
255. def is_singledispatch_function(obj: Any) -> bool:
256.     """Check if the object is singledispatch function."""
257.     if (inspect.isfunction(obj) and
258.             hasattr(obj, 'dispatch') and
259.             hasattr(obj, 'register') and
260.             obj.dispatch.__module__ == 'functools'):
261.         return True
262.     else:
263.         return False
264. 
265. 
266. def is_singledispatch_method(obj: Any) -> bool:
267.     """Check if the object is singledispatch method."""
268.     try:
269.         from functools import singledispatchmethod  # type: ignore
270.         return isinstance(obj, singledispatchmethod)
271.     except ImportError:  # py35-37
272.         return False
273. 
274. 
275. def isfunction(obj: Any) -> bool:
276.     """Check if the object is function."""
277.     return inspect.isfunction(unwrap_all(obj))
278. 
279. 
280. def isbuiltin(obj: Any) -> bool:
281.     """Check if the object is builtin."""
282.     return inspect.isbuiltin(unwrap_all(obj))
283. 
284. 
285. def isroutine(obj: Any) -> bool:
286.     """Check is any kind of function or method."""
287.     return inspect.isroutine(unwrap_all(obj))
288. 
289. 
290. def iscoroutinefunction(obj: Any) -> bool:
291.     """Check if the object is coroutine-function."""
292.     # unwrap staticmethod, classmethod and partial (except wrappers)
293.     obj = unwrap_all(obj, stop=lambda o: hasattr(o, '__wrapped__'))
294.     if hasattr(obj, '__code__') and inspect.iscoroutinefunction(obj):
295.         # check obj.__code__ because iscoroutinefunction() crashes for custom method-like
296.         # objects (see https://github.com/sphinx-doc/sphinx/issues/6605)
297.         return True
298.     else:
299.         return False
300. 
301. 
302. def isproperty(obj: Any) -> bool:
303.     """Check if the object is property."""
304.     return isinstance(obj, property)
305. 
306. 
307. def safe_getattr(obj: Any, name: str, *defargs: Any) -> Any:
308.     """A getattr() that turns all exceptions into AttributeErrors."""
309.     try:
310.         return getattr(obj, name, *defargs)
311.     except Exception:
312.         # sometimes accessing a property raises an exception (e.g.
313.         # NotImplementedError), so let's try to read the attribute directly
314.         try:
315.             # In case the object does weird things with attribute access
316.             # such that accessing `obj.__dict__` may raise an exception
317.             return obj.__dict__[name]
318.         except Exception:
319.             pass
320. 
321.         # this is a catch-all for all the weird things that some modules do
322.         # with attribute access
323.         if defargs:
324.             return defargs[0]
325. 
326.         raise AttributeError(name)
327. 
328. 
329. def safe_getmembers(object: Any, predicate: Callable[[str], bool] = None,
330.                     attr_getter: Callable = safe_getattr) -> List[Tuple[str, Any]]:
331.     """A version of inspect.getmembers() that uses safe_getattr()."""
332.     warnings.warn('safe_getmembers() is deprecated', RemovedInSphinx40Warning, stacklevel=2)
333. 
334.     results = []  # type: List[Tuple[str, Any]]
335.     for key in dir(object):
336.         try:
337.             value = attr_getter(object, key, None)
338.         except AttributeError:
339.             continue
340.         if not predicate or predicate(value):
341.             results.append((key, value))
342.     results.sort()
343.     return results
344. 
345. 
346. def object_description(object: Any) -> str:
347.     """A repr() implementation that returns text safe to use in reST context."""
348.     if isinstance(object, dict):
349.         try:
350.             sorted_keys = sorted(object)
351.         except Exception:
352.             pass  # Cannot sort dict keys, fall back to generic repr
353.         else:
354.             items = ("%s: %s" %
355.                      (object_description(key), object_description(object[key]))
356.                      for key in sorted_keys)
357.             return "{%s}" % ", ".join(items)
358.     if isinstance(object, set):
359.         try:
360.             sorted_values = sorted(object)
361.         except TypeError:
362.             pass  # Cannot sort set values, fall back to generic repr
363.         else:
364.             return "{%s}" % ", ".join(object_description(x) for x in sorted_values)
365.     if isinstance(object, frozenset):
366.         try:
367.             sorted_values = sorted(object)
368.         except TypeError:
369.             pass  # Cannot sort frozenset values, fall back to generic repr
370.         else:
371.             return "frozenset({%s})" % ", ".join(object_description(x)
372.                                                  for x in sorted_values)
373.     try:
374.         s = repr(object)
375.     except Exception:
376.         raise ValueError
377.     # Strip non-deterministic memory addresses such as
378.     # ``<__main__.A at 0x7f68cb685710>``
379.     s = memory_address_re.sub('', s)
380.     return s.replace('\n', ' ')
381. 
382. 
383. def is_builtin_class_method(obj: Any, attr_name: str) -> bool:
384.     """If attr_name is implemented at builtin class, return True.
385. 
386.         >>> is_builtin_class_method(int, '__init__')
387.         True
388. 
389.     Why this function needed? CPython implements int.__init__ by Descriptor
390.     but PyPy implements it by pure Python code.
391.     """
392.     try:
393.         mro = inspect.getmro(obj)
394.     except AttributeError:
395.         # no __mro__, assume the object has no methods as we know them
396.         return False
397. 
398.     try:
399.         cls = next(c for c in mro if attr_name in safe_getattr(c, '__dict__', {}))
400.     except StopIteration:
401.         return False
402. 
403.     try:
404.         name = safe_getattr(cls, '__name__')
405.     except AttributeError:
406.         return False
407. 
408.     return getattr(builtins, name, None) is cls
409. 
410. 
411. def signature(subject: Callable, bound_method: bool = False, follow_wrapped: bool = False
412.               ) -> inspect.Signature:
413.     """Return a Signature object for the given *subject*.
414. 
415.     :param bound_method: Specify *subject* is a bound method or not
416.     :param follow_wrapped: Same as ``inspect.signature()``.
417.                            Defaults to ``False`` (get a signature of *subject*).
418.     """
419.     try:
420.         try:
421.             signature = inspect.signature(subject, follow_wrapped=follow_wrapped)
422.         except ValueError:
423.             # follow built-in wrappers up (ex. functools.lru_cache)
424.             signature = inspect.signature(subject)
425.         parameters = list(signature.parameters.values())
426.         return_annotation = signature.return_annotation
427.     except IndexError:
428.         # Until python 3.6.4, cpython has been crashed on inspection for
429.         # partialmethods not having any arguments.
430.         # https://bugs.python.org/issue33009
431.         if hasattr(subject, '_partialmethod'):
432.             parameters = []
433.             return_annotation = Parameter.empty
434.         else:
435.             raise
436. 
437.     try:
438.         # Update unresolved annotations using ``get_type_hints()``.
439.         annotations = typing.get_type_hints(subject)
440.         for i, param in enumerate(parameters):
441.             if isinstance(param.annotation, str) and param.name in annotations:
442.                 parameters[i] = param.replace(annotation=annotations[param.name])
443.         if 'return' in annotations:
444.             return_annotation = annotations['return']
445.     except Exception:
446.         # ``get_type_hints()`` does not support some kind of objects like partial,
447.         # ForwardRef and so on.
448.         pass
449. 
450.     if bound_method:
451.         if inspect.ismethod(subject):
452.             # ``inspect.signature()`` considers the subject is a bound method and removes
453.             # first argument from signature.  Therefore no skips are needed here.
454.             pass
455.         else:
456.             if len(parameters) > 0:
457.                 parameters.pop(0)
458. 
459.     return inspect.Signature(parameters, return_annotation=return_annotation)
460. 
461. 
462. def stringify_signature(sig: inspect.Signature, show_annotation: bool = True,
463.                         show_return_annotation: bool = True) -> str:
464.     """Stringify a Signature object.
465. 
466.     :param show_annotation: Show annotation in result
467.     """
468.     args = []
469.     last_kind = None
470.     for param in sig.parameters.values():
471.         if param.kind != param.POSITIONAL_ONLY and last_kind == param.POSITIONAL_ONLY:
472.             # PEP-570: Separator for Positional Only Parameter: /
473.             args.append('/')
474.         if param.kind == param.KEYWORD_ONLY and last_kind in (param.POSITIONAL_OR_KEYWORD,
475.                                                               param.POSITIONAL_ONLY,
476.                                                               None):
477.             # PEP-3102: Separator for Keyword Only Parameter: *
478.             args.append('*')
479. 
480.         arg = StringIO()
481.         if param.kind == param.VAR_POSITIONAL:
482.             arg.write('*' + param.name)
483.         elif param.kind == param.VAR_KEYWORD:
484.             arg.write('**' + param.name)
485.         else:
486.             arg.write(param.name)
487. 
488.         if show_annotation and param.annotation is not param.empty:
489.             arg.write(': ')
490.             arg.write(stringify_annotation(param.annotation))
491.         if param.default is not param.empty:
492.             if show_annotation and param.annotation is not param.empty:
493.                 arg.write(' = ')
494.             else:
495.                 arg.write('=')
496.             arg.write(object_description(param.default))
497. 
498.         args.append(arg.getvalue())
499.         last_kind = param.kind
500.


File: tests/test_util_inspect.py
Line number range: 1 - 500
Content:
1. """
2.     test_util_inspect
3.     ~~~~~~~~~~~~~~~
4. 
5.     Tests util.inspect functions.
6. 
7.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import _testcapi
12. import datetime
13. import functools
14. import sys
15. import types
16. from inspect import Parameter
17. 
18. import pytest
19. 
20. from sphinx.util import inspect
21. from sphinx.util.inspect import stringify_signature, is_builtin_class_method
22. 
23. 
24. def test_signature():
25.     # literals
26.     with pytest.raises(TypeError):
27.         inspect.signature(1)
28. 
29.     with pytest.raises(TypeError):
30.         inspect.signature('')
31. 
32.     # builtins are supported on a case-by-case basis, depending on whether
33.     # they define __text_signature__
34.     if getattr(list, '__text_signature__', None):
35.         sig = inspect.stringify_signature(inspect.signature(list))
36.         assert sig == '(iterable=(), /)'
37.     else:
38.         with pytest.raises(ValueError):
39.             inspect.signature(list)
40. 
41.     # normal function
42.     def func(a, b, c=1, d=2, *e, **f):
43.         pass
44. 
45.     sig = inspect.stringify_signature(inspect.signature(func))
46.     assert sig == '(a, b, c=1, d=2, *e, **f)'
47. 
48. 
49. def test_signature_partial():
50.     def fun(a, b, c=1, d=2):
51.         pass
52.     p = functools.partial(fun, 10, c=11)
53. 
54.     sig = inspect.signature(p)
55.     assert stringify_signature(sig) == '(b, *, c=11, d=2)'
56. 
57. 
58. def test_signature_methods():
59.     class Foo:
60.         def meth1(self, arg1, **kwargs):
61.             pass
62. 
63.         @classmethod
64.         def meth2(cls, arg1, *args, **kwargs):
65.             pass
66. 
67.         @staticmethod
68.         def meth3(arg1, *args, **kwargs):
69.             pass
70. 
71.     @functools.wraps(Foo().meth1)
72.     def wrapped_bound_method(*args, **kwargs):
73.         pass
74. 
75.     # unbound method
76.     sig = inspect.signature(Foo.meth1)
77.     assert stringify_signature(sig) == '(self, arg1, **kwargs)'
78. 
79.     sig = inspect.signature(Foo.meth1, bound_method=True)
80.     assert stringify_signature(sig) == '(arg1, **kwargs)'
81. 
82.     # bound method
83.     sig = inspect.signature(Foo().meth1)
84.     assert stringify_signature(sig) == '(arg1, **kwargs)'
85. 
86.     # class method
87.     sig = inspect.signature(Foo.meth2)
88.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
89. 
90.     sig = inspect.signature(Foo().meth2)
91.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
92. 
93.     # static method
94.     sig = inspect.signature(Foo.meth3)
95.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
96. 
97.     sig = inspect.signature(Foo().meth3)
98.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
99. 
100.     # wrapped bound method
101.     sig = inspect.signature(wrapped_bound_method)
102.     assert stringify_signature(sig) == '(*args, **kwargs)'
103. 
104. 
105. def test_signature_partialmethod():
106.     from functools import partialmethod
107. 
108.     class Foo:
109.         def meth1(self, arg1, arg2, arg3=None, arg4=None):
110.             pass
111. 
112.         def meth2(self, arg1, arg2):
113.             pass
114. 
115.         foo = partialmethod(meth1, 1, 2)
116.         bar = partialmethod(meth1, 1, arg3=3)
117.         baz = partialmethod(meth2, 1, 2)
118. 
119.     subject = Foo()
120.     sig = inspect.signature(subject.foo)
121.     assert stringify_signature(sig) == '(arg3=None, arg4=None)'
122. 
123.     sig = inspect.signature(subject.bar)
124.     assert stringify_signature(sig) == '(arg2, *, arg3=3, arg4=None)'
125. 
126.     sig = inspect.signature(subject.baz)
127.     assert stringify_signature(sig) == '()'
128. 
129. 
130. def test_signature_annotations():
131.     from typing_test_data import (f0, f1, f2, f3, f4, f5, f6, f7, f8, f9, f10,
132.                                   f11, f12, f13, f14, f15, f16, f17, f18, f19, f20, Node)
133. 
134.     # Class annotations
135.     sig = inspect.signature(f0)
136.     assert stringify_signature(sig) == '(x: int, y: numbers.Integral) -> None'
137. 
138.     # Generic types with concrete parameters
139.     sig = inspect.signature(f1)
140.     assert stringify_signature(sig) == '(x: List[int]) -> List[int]'
141. 
142.     # TypeVars and generic types with TypeVars
143.     sig = inspect.signature(f2)
144.     assert stringify_signature(sig) == '(x: List[T], y: List[T_co], z: T) -> List[T_contra]'
145. 
146.     # Union types
147.     sig = inspect.signature(f3)
148.     assert stringify_signature(sig) == '(x: Union[str, numbers.Integral]) -> None'
149. 
150.     # Quoted annotations
151.     sig = inspect.signature(f4)
152.     assert stringify_signature(sig) == '(x: str, y: str) -> None'
153. 
154.     # Keyword-only arguments
155.     sig = inspect.signature(f5)
156.     assert stringify_signature(sig) == '(x: int, *, y: str, z: str) -> None'
157. 
158.     # Keyword-only arguments with varargs
159.     sig = inspect.signature(f6)
160.     assert stringify_signature(sig) == '(x: int, *args, y: str, z: str) -> None'
161. 
162.     # Space around '=' for defaults
163.     sig = inspect.signature(f7)
164.     assert stringify_signature(sig) == '(x: int = None, y: dict = {}) -> None'
165. 
166.     # Callable types
167.     sig = inspect.signature(f8)
168.     assert stringify_signature(sig) == '(x: Callable[[int, str], int]) -> None'
169. 
170.     sig = inspect.signature(f9)
171.     assert stringify_signature(sig) == '(x: Callable) -> None'
172. 
173.     # Tuple types
174.     sig = inspect.signature(f10)
175.     assert stringify_signature(sig) == '(x: Tuple[int, str], y: Tuple[int, ...]) -> None'
176. 
177.     # Instance annotations
178.     sig = inspect.signature(f11)
179.     assert stringify_signature(sig) == '(x: CustomAnnotation, y: 123) -> None'
180. 
181.     # tuple with more than two items
182.     sig = inspect.signature(f12)
183.     assert stringify_signature(sig) == '() -> Tuple[int, str, int]'
184. 
185.     # optional
186.     sig = inspect.signature(f13)
187.     assert stringify_signature(sig) == '() -> Optional[str]'
188. 
189.     # optional union
190.     sig = inspect.signature(f20)
191.     assert stringify_signature(sig) == '() -> Optional[Union[int, str]]'
192. 
193.     # Any
194.     sig = inspect.signature(f14)
195.     assert stringify_signature(sig) == '() -> Any'
196. 
197.     # ForwardRef
198.     sig = inspect.signature(f15)
199.     assert stringify_signature(sig) == '(x: Unknown, y: int) -> Any'
200. 
201.     # keyword only arguments (1)
202.     sig = inspect.signature(f16)
203.     assert stringify_signature(sig) == '(arg1, arg2, *, arg3=None, arg4=None)'
204. 
205.     # keyword only arguments (2)
206.     sig = inspect.signature(f17)
207.     assert stringify_signature(sig) == '(*, arg3, arg4)'
208. 
209.     sig = inspect.signature(f18)
210.     assert stringify_signature(sig) == '(self, arg1: Union[int, Tuple] = 10) -> List[Dict]'
211. 
212.     # annotations for variadic and keyword parameters
213.     sig = inspect.signature(f19)
214.     assert stringify_signature(sig) == '(*args: int, **kwargs: str)'
215. 
216.     # type hints by string
217.     sig = inspect.signature(Node.children)
218.     if (3, 5, 0) <= sys.version_info < (3, 5, 3):
219.         assert stringify_signature(sig) == '(self) -> List[Node]'
220.     else:
221.         assert stringify_signature(sig) == '(self) -> List[typing_test_data.Node]'
222. 
223.     sig = inspect.signature(Node.__init__)
224.     assert stringify_signature(sig) == '(self, parent: Optional[Node]) -> None'
225. 
226.     # show_annotation is False
227.     sig = inspect.signature(f7)
228.     assert stringify_signature(sig, show_annotation=False) == '(x=None, y={})'
229. 
230.     # show_return_annotation is False
231.     sig = inspect.signature(f7)
232.     assert stringify_signature(sig, show_return_annotation=False) == '(x: int = None, y: dict = {})'
233. 
234. 
235. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
236. @pytest.mark.sphinx(testroot='ext-autodoc')
237. def test_signature_annotations_py38(app):
238.     from target.pep570 import foo, bar, baz, qux
239. 
240.     # case: separator at head
241.     sig = inspect.signature(foo)
242.     assert stringify_signature(sig) == '(*, a, b)'
243. 
244.     # case: separator in the middle
245.     sig = inspect.signature(bar)
246.     assert stringify_signature(sig) == '(a, b, /, c, d)'
247. 
248.     sig = inspect.signature(baz)
249.     assert stringify_signature(sig) == '(a, /, *, b)'
250. 
251.     # case: separator at tail
252.     sig = inspect.signature(qux)
253.     assert stringify_signature(sig) == '(a, b, /)'
254. 
255. 
256. def test_signature_from_str_basic():
257.     signature = '(a, b, *args, c=0, d="blah", **kwargs)'
258.     sig = inspect.signature_from_str(signature)
259.     assert list(sig.parameters.keys()) == ['a', 'b', 'args', 'c', 'd', 'kwargs']
260.     assert sig.parameters['a'].name == 'a'
261.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_OR_KEYWORD
262.     assert sig.parameters['a'].default == Parameter.empty
263.     assert sig.parameters['a'].annotation == Parameter.empty
264.     assert sig.parameters['b'].name == 'b'
265.     assert sig.parameters['b'].kind == Parameter.POSITIONAL_OR_KEYWORD
266.     assert sig.parameters['b'].default == Parameter.empty
267.     assert sig.parameters['b'].annotation == Parameter.empty
268.     assert sig.parameters['args'].name == 'args'
269.     assert sig.parameters['args'].kind == Parameter.VAR_POSITIONAL
270.     assert sig.parameters['args'].default == Parameter.empty
271.     assert sig.parameters['args'].annotation == Parameter.empty
272.     assert sig.parameters['c'].name == 'c'
273.     assert sig.parameters['c'].kind == Parameter.KEYWORD_ONLY
274.     assert sig.parameters['c'].default == '0'
275.     assert sig.parameters['c'].annotation == Parameter.empty
276.     assert sig.parameters['d'].name == 'd'
277.     assert sig.parameters['d'].kind == Parameter.KEYWORD_ONLY
278.     assert sig.parameters['d'].default == "'blah'"
279.     assert sig.parameters['d'].annotation == Parameter.empty
280.     assert sig.parameters['kwargs'].name == 'kwargs'
281.     assert sig.parameters['kwargs'].kind == Parameter.VAR_KEYWORD
282.     assert sig.parameters['kwargs'].default == Parameter.empty
283.     assert sig.parameters['kwargs'].annotation == Parameter.empty
284.     assert sig.return_annotation == Parameter.empty
285. 
286. 
287. def test_signature_from_str_default_values():
288.     signature = ('(a=0, b=0.0, c="str", d=b"bytes", e=..., f=True, '
289.                  'g=[1, 2, 3], h={"a": 1}, i={1, 2, 3}, '
290.                  'j=lambda x, y: None, k=None, l=object(), m=foo.bar.CONSTANT)')
291.     sig = inspect.signature_from_str(signature)
292.     assert sig.parameters['a'].default == '0'
293.     assert sig.parameters['b'].default == '0.0'
294.     assert sig.parameters['c'].default == "'str'"
295.     assert sig.parameters['d'].default == "b'bytes'"
296.     assert sig.parameters['e'].default == '...'
297.     assert sig.parameters['f'].default == 'True'
298.     assert sig.parameters['g'].default == '[1, 2, 3]'
299.     assert sig.parameters['h'].default == "{'a': 1}"
300.     assert sig.parameters['i'].default == '{1, 2, 3}'
301.     assert sig.parameters['j'].default == 'lambda x, y: ...'
302.     assert sig.parameters['k'].default == 'None'
303.     assert sig.parameters['l'].default == 'object()'
304.     assert sig.parameters['m'].default == 'foo.bar.CONSTANT'
305. 
306. 
307. def test_signature_from_str_annotations():
308.     signature = '(a: int, *args: bytes, b: str = "blah", **kwargs: float) -> None'
309.     sig = inspect.signature_from_str(signature)
310.     assert list(sig.parameters.keys()) == ['a', 'args', 'b', 'kwargs']
311.     assert sig.parameters['a'].annotation == "int"
312.     assert sig.parameters['args'].annotation == "bytes"
313.     assert sig.parameters['b'].annotation == "str"
314.     assert sig.parameters['kwargs'].annotation == "float"
315.     assert sig.return_annotation == 'None'
316. 
317. 
318. def test_signature_from_str_complex_annotations():
319.     sig = inspect.signature_from_str('() -> Tuple[str, int, ...]')
320.     assert sig.return_annotation == 'Tuple[str, int, ...]'
321. 
322.     sig = inspect.signature_from_str('() -> Callable[[int, int], int]')
323.     assert sig.return_annotation == 'Callable[[int, int], int]'
324. 
325. 
326. def test_signature_from_str_kwonly_args():
327.     sig = inspect.signature_from_str('(a, *, b)')
328.     assert list(sig.parameters.keys()) == ['a', 'b']
329.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_OR_KEYWORD
330.     assert sig.parameters['a'].default == Parameter.empty
331.     assert sig.parameters['b'].kind == Parameter.KEYWORD_ONLY
332.     assert sig.parameters['b'].default == Parameter.empty
333. 
334. 
335. @pytest.mark.skipif(sys.version_info < (3, 8),
336.                     reason='python-3.8 or above is required')
337. def test_signature_from_str_positionaly_only_args():
338.     sig = inspect.signature_from_str('(a, /, b)')
339.     assert list(sig.parameters.keys()) == ['a', 'b']
340.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_ONLY
341.     assert sig.parameters['b'].kind == Parameter.POSITIONAL_OR_KEYWORD
342. 
343. 
344. def test_signature_from_str_invalid():
345.     with pytest.raises(SyntaxError):
346.         inspect.signature_from_str('')
347. 
348. 
349. def test_safe_getattr_with_default():
350.     class Foo:
351.         def __getattr__(self, item):
352.             raise Exception
353. 
354.     obj = Foo()
355. 
356.     result = inspect.safe_getattr(obj, 'bar', 'baz')
357. 
358.     assert result == 'baz'
359. 
360. 
361. def test_safe_getattr_with_exception():
362.     class Foo:
363.         def __getattr__(self, item):
364.             raise Exception
365. 
366.     obj = Foo()
367. 
368.     try:
369.         inspect.safe_getattr(obj, 'bar')
370.     except AttributeError as exc:
371.         assert exc.args[0] == 'bar'
372.     else:
373.         pytest.fail('AttributeError not raised')
374. 
375. 
376. def test_safe_getattr_with_property_exception():
377.     class Foo:
378.         @property
379.         def bar(self):
380.             raise Exception
381. 
382.     obj = Foo()
383. 
384.     try:
385.         inspect.safe_getattr(obj, 'bar')
386.     except AttributeError as exc:
387.         assert exc.args[0] == 'bar'
388.     else:
389.         pytest.fail('AttributeError not raised')
390. 
391. 
392. def test_safe_getattr_with___dict___override():
393.     class Foo:
394.         @property
395.         def __dict__(self):
396.             raise Exception
397. 
398.     obj = Foo()
399. 
400.     try:
401.         inspect.safe_getattr(obj, 'bar')
402.     except AttributeError as exc:
403.         assert exc.args[0] == 'bar'
404.     else:
405.         pytest.fail('AttributeError not raised')
406. 
407. 
408. def test_dictionary_sorting():
409.     dictionary = {"c": 3, "a": 1, "d": 2, "b": 4}
410.     description = inspect.object_description(dictionary)
411.     assert description == "{'a': 1, 'b': 4, 'c': 3, 'd': 2}"
412. 
413. 
414. def test_set_sorting():
415.     set_ = set("gfedcba")
416.     description = inspect.object_description(set_)
417.     assert description == "{'a', 'b', 'c', 'd', 'e', 'f', 'g'}"
418. 
419. 
420. def test_set_sorting_fallback():
421.     set_ = {None, 1}
422.     description = inspect.object_description(set_)
423.     assert description in ("{1, None}", "{None, 1}")
424. 
425. 
426. def test_frozenset_sorting():
427.     frozenset_ = frozenset("gfedcba")
428.     description = inspect.object_description(frozenset_)
429.     assert description == "frozenset({'a', 'b', 'c', 'd', 'e', 'f', 'g'})"
430. 
431. 
432. def test_frozenset_sorting_fallback():
433.     frozenset_ = frozenset((None, 1))
434.     description = inspect.object_description(frozenset_)
435.     assert description in ("frozenset({1, None})", "frozenset({None, 1})")
436. 
437. 
438. def test_dict_customtype():
439.     class CustomType:
440.         def __init__(self, value):
441.             self._value = value
442. 
443.         def __repr__(self):
444.             return "<CustomType(%r)>" % self._value
445. 
446.     dictionary = {CustomType(2): 2, CustomType(1): 1}
447.     description = inspect.object_description(dictionary)
448.     # Type is unsortable, just check that it does not crash
449.     assert "<CustomType(2)>: 2" in description
450. 
451. 
452. @pytest.mark.sphinx(testroot='ext-autodoc')
453. def test_isclassmethod(app):
454.     from target.methods import Base, Inherited
455. 
456.     assert inspect.isclassmethod(Base.classmeth) is True
457.     assert inspect.isclassmethod(Base.meth) is False
458.     assert inspect.isclassmethod(Inherited.classmeth) is True
459.     assert inspect.isclassmethod(Inherited.meth) is False
460. 
461. 
462. @pytest.mark.sphinx(testroot='ext-autodoc')
463. def test_isstaticmethod(app):
464.     from target.methods import Base, Inherited
465. 
466.     assert inspect.isstaticmethod(Base.staticmeth, Base, 'staticmeth') is True
467.     assert inspect.isstaticmethod(Base.meth, Base, 'meth') is False
468.     assert inspect.isstaticmethod(Inherited.staticmeth, Inherited, 'staticmeth') is True
469.     assert inspect.isstaticmethod(Inherited.meth, Inherited, 'meth') is False
470. 
471. 
472. @pytest.mark.sphinx(testroot='ext-autodoc')
473. def test_iscoroutinefunction(app):
474.     from target.functions import coroutinefunc, func, partial_coroutinefunc
475.     from target.methods import Base
476. 
477.     assert inspect.iscoroutinefunction(func) is False                   # function
478.     assert inspect.iscoroutinefunction(coroutinefunc) is True           # coroutine
479.     assert inspect.iscoroutinefunction(partial_coroutinefunc) is True   # partial-ed coroutine
480.     assert inspect.iscoroutinefunction(Base.meth) is False              # method
481.     assert inspect.iscoroutinefunction(Base.coroutinemeth) is True      # coroutine-method
482. 
483.     # partial-ed coroutine-method
484.     partial_coroutinemeth = Base.__dict__['partial_coroutinemeth']
485.     assert inspect.iscoroutinefunction(partial_coroutinemeth) is True
486. 
487. 
488. @pytest.mark.sphinx(testroot='ext-autodoc')
489. def test_isfunction(app):
490.     from target.functions import builtin_func, partial_builtin_func
491.     from target.functions import func, partial_func
492.     from target.methods import Base
493. 
494.     assert inspect.isfunction(func) is True                     # function
495.     assert inspect.isfunction(partial_func) is True             # partial-ed function
496.     assert inspect.isfunction(Base.meth) is True                # method of class
497.     assert inspect.isfunction(Base.partialmeth) is True         # partial-ed method of class
498.     assert inspect.isfunction(Base().meth) is False             # method of instance
499.     assert inspect.isfunction(builtin_func) is False            # builtin function
500.     assert inspect.isfunction(partial_builtin_func) is False    # partial-ed builtin function

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 03:23:40,274 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user query asks for the content of the file `tests/test_util_inspect.py`. The context provided contains the full content of this file, which directly answers the user's request.", relative_path='tests/test_util_inspect.py', start_line=1, end_line=500)]
2025-12-23 03:23:40,275 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the content of the file `tests/test_util_inspect.py`.
2025-12-23 03:23:40,275 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 03:23:40,276 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 03:23:40,276 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-23 03:23:40,276 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-23 03:23:40,280 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       └── main.yml
├── .travis.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── authors.rst
|   ├── changes.rst
|   ├── code_of_conduct.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── index.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── devguide.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── theming.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── conftest.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enum.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── methods.py
|   |   |       ├── need_mocks.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   └── typing_test_data.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: The default value for positional only argument has vanished

Description: **Describe the bug**
The default value for positional only argument has vanished

**To Reproduce**

Build following document:
```
.. py:function:: foo(a, b=0, /, c=1)
```

Result:
<img width="148" alt="スクリーンショット 2020-05-30 23 43 01" src="https://user-images.githubusercontent.com/748828/83331159-4eab4a80-a2cf-11ea-9559-9b17cc56bc01.png">

**Expected behavior**
The default value is shown.

**Your project**
No.

**Environment info**
- OS: Mac
- Python version: 3.8.2
- Sphinx version: 3.1.0dev
- Sphinx extensions:  No
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py
index 15f0d66e2..7508144d2 100644
--- a/sphinx/util/inspect.py
+++ b/sphinx/util/inspect.py
@@ -520,15 +520,32 @@ def signature_from_str(signature: str) -> inspect.Signature:
     args = definition.args
     params = []
 
+    # compute alignment for defaults across all positional parameters
     if hasattr(args, "posonlyargs"):
-        for arg in args.posonlyargs:  # type: ignore
+        posonly_count = len(args.posonlyargs)  # type: ignore
+    else:
+        posonly_count = 0
+    total_positionals = posonly_count + len(args.args)
+    num_defaults = len(args.defaults)
+
+    if hasattr(args, "posonlyargs"):
+        for i, arg in enumerate(args.posonlyargs):  # type: ignore
+            # defaults correspond to the last num_defaults positional params
+            if total_positionals - i <= num_defaults:
+                index_in_defaults = i - (total_positionals - num_defaults)
+                default = ast_unparse(args.defaults[index_in_defaults])
+            else:
+                default = Parameter.empty
+
             annotation = ast_unparse(arg.annotation) or Parameter.empty
             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,
-                                    annotation=annotation))
+                                    default=default, annotation=annotation))
 
     for i, arg in enumerate(args.args):
-        if len(args.args) - i <= len(args.defaults):
-            default = ast_unparse(args.defaults[-len(args.args) + i])
+        gi = posonly_count + i  # global index among positional params
+        if total_positionals - gi <= num_defaults:
+            index_in_defaults = gi - (total_positionals - num_defaults)
+            default = ast_unparse(args.defaults[index_in_defaults])
         else:
             default = Parameter.empty
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the content of the file `tests/test_util_inspect.py`.
Extra Requirements: 
Purpose: This file is needed to find test cases that validate function signature parsing, which is the core of the reported bug and the provided patch.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/test_util_inspect.py
Line number range: 1 - 500
Content:
1. """
2.     test_util_inspect
3.     ~~~~~~~~~~~~~~~
4. 
5.     Tests util.inspect functions.
6. 
7.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import _testcapi
12. import datetime
13. import functools
14. import sys
15. import types
16. from inspect import Parameter
17. 
18. import pytest
19. 
20. from sphinx.util import inspect
21. from sphinx.util.inspect import stringify_signature, is_builtin_class_method
22. 
23. 
24. def test_signature():
25.     # literals
26.     with pytest.raises(TypeError):
27.         inspect.signature(1)
28. 
29.     with pytest.raises(TypeError):
30.         inspect.signature('')
31. 
32.     # builtins are supported on a case-by-case basis, depending on whether
33.     # they define __text_signature__
34.     if getattr(list, '__text_signature__', None):
35.         sig = inspect.stringify_signature(inspect.signature(list))
36.         assert sig == '(iterable=(), /)'
37.     else:
38.         with pytest.raises(ValueError):
39.             inspect.signature(list)
40. 
41.     # normal function
42.     def func(a, b, c=1, d=2, *e, **f):
43.         pass
44. 
45.     sig = inspect.stringify_signature(inspect.signature(func))
46.     assert sig == '(a, b, c=1, d=2, *e, **f)'
47. 
48. 
49. def test_signature_partial():
50.     def fun(a, b, c=1, d=2):
51.         pass
52.     p = functools.partial(fun, 10, c=11)
53. 
54.     sig = inspect.signature(p)
55.     assert stringify_signature(sig) == '(b, *, c=11, d=2)'
56. 
57. 
58. def test_signature_methods():
59.     class Foo:
60.         def meth1(self, arg1, **kwargs):
61.             pass
62. 
63.         @classmethod
64.         def meth2(cls, arg1, *args, **kwargs):
65.             pass
66. 
67.         @staticmethod
68.         def meth3(arg1, *args, **kwargs):
69.             pass
70. 
71.     @functools.wraps(Foo().meth1)
72.     def wrapped_bound_method(*args, **kwargs):
73.         pass
74. 
75.     # unbound method
76.     sig = inspect.signature(Foo.meth1)
77.     assert stringify_signature(sig) == '(self, arg1, **kwargs)'
78. 
79.     sig = inspect.signature(Foo.meth1, bound_method=True)
80.     assert stringify_signature(sig) == '(arg1, **kwargs)'
81. 
82.     # bound method
83.     sig = inspect.signature(Foo().meth1)
84.     assert stringify_signature(sig) == '(arg1, **kwargs)'
85. 
86.     # class method
87.     sig = inspect.signature(Foo.meth2)
88.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
89. 
90.     sig = inspect.signature(Foo().meth2)
91.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
92. 
93.     # static method
94.     sig = inspect.signature(Foo.meth3)
95.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
96. 
97.     sig = inspect.signature(Foo().meth3)
98.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
99. 
100.     # wrapped bound method
101.     sig = inspect.signature(wrapped_bound_method)
102.     assert stringify_signature(sig) == '(*args, **kwargs)'
103. 
104. 
105. def test_signature_partialmethod():
106.     from functools import partialmethod
107. 
108.     class Foo:
109.         def meth1(self, arg1, arg2, arg3=None, arg4=None):
110.             pass
111. 
112.         def meth2(self, arg1, arg2):
113.             pass
114. 
115.         foo = partialmethod(meth1, 1, 2)
116.         bar = partialmethod(meth1, 1, arg3=3)
117.         baz = partialmethod(meth2, 1, 2)
118. 
119.     subject = Foo()
120.     sig = inspect.signature(subject.foo)
121.     assert stringify_signature(sig) == '(arg3=None, arg4=None)'
122. 
123.     sig = inspect.signature(subject.bar)
124.     assert stringify_signature(sig) == '(arg2, *, arg3=3, arg4=None)'
125. 
126.     sig = inspect.signature(subject.baz)
127.     assert stringify_signature(sig) == '()'
128. 
129. 
130. def test_signature_annotations():
131.     from typing_test_data import (f0, f1, f2, f3, f4, f5, f6, f7, f8, f9, f10,
132.                                   f11, f12, f13, f14, f15, f16, f17, f18, f19, f20, Node)
133. 
134.     # Class annotations
135.     sig = inspect.signature(f0)
136.     assert stringify_signature(sig) == '(x: int, y: numbers.Integral) -> None'
137. 
138.     # Generic types with concrete parameters
139.     sig = inspect.signature(f1)
140.     assert stringify_signature(sig) == '(x: List[int]) -> List[int]'
141. 
142.     # TypeVars and generic types with TypeVars
143.     sig = inspect.signature(f2)
144.     assert stringify_signature(sig) == '(x: List[T], y: List[T_co], z: T) -> List[T_contra]'
145. 
146.     # Union types
147.     sig = inspect.signature(f3)
148.     assert stringify_signature(sig) == '(x: Union[str, numbers.Integral]) -> None'
149. 
150.     # Quoted annotations
151.     sig = inspect.signature(f4)
152.     assert stringify_signature(sig) == '(x: str, y: str) -> None'
153. 
154.     # Keyword-only arguments
155.     sig = inspect.signature(f5)
156.     assert stringify_signature(sig) == '(x: int, *, y: str, z: str) -> None'
157. 
158.     # Keyword-only arguments with varargs
159.     sig = inspect.signature(f6)
160.     assert stringify_signature(sig) == '(x: int, *args, y: str, z: str) -> None'
161. 
162.     # Space around '=' for defaults
163.     sig = inspect.signature(f7)
164.     assert stringify_signature(sig) == '(x: int = None, y: dict = {}) -> None'
165. 
166.     # Callable types
167.     sig = inspect.signature(f8)
168.     assert stringify_signature(sig) == '(x: Callable[[int, str], int]) -> None'
169. 
170.     sig = inspect.signature(f9)
171.     assert stringify_signature(sig) == '(x: Callable) -> None'
172. 
173.     # Tuple types
174.     sig = inspect.signature(f10)
175.     assert stringify_signature(sig) == '(x: Tuple[int, str], y: Tuple[int, ...]) -> None'
176. 
177.     # Instance annotations
178.     sig = inspect.signature(f11)
179.     assert stringify_signature(sig) == '(x: CustomAnnotation, y: 123) -> None'
180. 
181.     # tuple with more than two items
182.     sig = inspect.signature(f12)
183.     assert stringify_signature(sig) == '() -> Tuple[int, str, int]'
184. 
185.     # optional
186.     sig = inspect.signature(f13)
187.     assert stringify_signature(sig) == '() -> Optional[str]'
188. 
189.     # optional union
190.     sig = inspect.signature(f20)
191.     assert stringify_signature(sig) == '() -> Optional[Union[int, str]]'
192. 
193.     # Any
194.     sig = inspect.signature(f14)
195.     assert stringify_signature(sig) == '() -> Any'
196. 
197.     # ForwardRef
198.     sig = inspect.signature(f15)
199.     assert stringify_signature(sig) == '(x: Unknown, y: int) -> Any'
200. 
201.     # keyword only arguments (1)
202.     sig = inspect.signature(f16)
203.     assert stringify_signature(sig) == '(arg1, arg2, *, arg3=None, arg4=None)'
204. 
205.     # keyword only arguments (2)
206.     sig = inspect.signature(f17)
207.     assert stringify_signature(sig) == '(*, arg3, arg4)'
208. 
209.     sig = inspect.signature(f18)
210.     assert stringify_signature(sig) == '(self, arg1: Union[int, Tuple] = 10) -> List[Dict]'
211. 
212.     # annotations for variadic and keyword parameters
213.     sig = inspect.signature(f19)
214.     assert stringify_signature(sig) == '(*args: int, **kwargs: str)'
215. 
216.     # type hints by string
217.     sig = inspect.signature(Node.children)
218.     if (3, 5, 0) <= sys.version_info < (3, 5, 3):
219.         assert stringify_signature(sig) == '(self) -> List[Node]'
220.     else:
221.         assert stringify_signature(sig) == '(self) -> List[typing_test_data.Node]'
222. 
223.     sig = inspect.signature(Node.__init__)
224.     assert stringify_signature(sig) == '(self, parent: Optional[Node]) -> None'
225. 
226.     # show_annotation is False
227.     sig = inspect.signature(f7)
228.     assert stringify_signature(sig, show_annotation=False) == '(x=None, y={})'
229. 
230.     # show_return_annotation is False
231.     sig = inspect.signature(f7)
232.     assert stringify_signature(sig, show_return_annotation=False) == '(x: int = None, y: dict = {})'
233. 
234. 
235. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
236. @pytest.mark.sphinx(testroot='ext-autodoc')
237. def test_signature_annotations_py38(app):
238.     from target.pep570 import foo, bar, baz, qux
239. 
240.     # case: separator at head
241.     sig = inspect.signature(foo)
242.     assert stringify_signature(sig) == '(*, a, b)'
243. 
244.     # case: separator in the middle
245.     sig = inspect.signature(bar)
246.     assert stringify_signature(sig) == '(a, b, /, c, d)'
247. 
248.     sig = inspect.signature(baz)
249.     assert stringify_signature(sig) == '(a, /, *, b)'
250. 
251.     # case: separator at tail
252.     sig = inspect.signature(qux)
253.     assert stringify_signature(sig) == '(a, b, /)'
254. 
255. 
256. def test_signature_from_str_basic():
257.     signature = '(a, b, *args, c=0, d="blah", **kwargs)'
258.     sig = inspect.signature_from_str(signature)
259.     assert list(sig.parameters.keys()) == ['a', 'b', 'args', 'c', 'd', 'kwargs']
260.     assert sig.parameters['a'].name == 'a'
261.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_OR_KEYWORD
262.     assert sig.parameters['a'].default == Parameter.empty
263.     assert sig.parameters['a'].annotation == Parameter.empty
264.     assert sig.parameters['b'].name == 'b'
265.     assert sig.parameters['b'].kind == Parameter.POSITIONAL_OR_KEYWORD
266.     assert sig.parameters['b'].default == Parameter.empty
267.     assert sig.parameters['b'].annotation == Parameter.empty
268.     assert sig.parameters['args'].name == 'args'
269.     assert sig.parameters['args'].kind == Parameter.VAR_POSITIONAL
270.     assert sig.parameters['args'].default == Parameter.empty
271.     assert sig.parameters['args'].annotation == Parameter.empty
272.     assert sig.parameters['c'].name == 'c'
273.     assert sig.parameters['c'].kind == Parameter.KEYWORD_ONLY
274.     assert sig.parameters['c'].default == '0'
275.     assert sig.parameters['c'].annotation == Parameter.empty
276.     assert sig.parameters['d'].name == 'd'
277.     assert sig.parameters['d'].kind == Parameter.KEYWORD_ONLY
278.     assert sig.parameters['d'].default == "'blah'"
279.     assert sig.parameters['d'].annotation == Parameter.empty
280.     assert sig.parameters['kwargs'].name == 'kwargs'
281.     assert sig.parameters['kwargs'].kind == Parameter.VAR_KEYWORD
282.     assert sig.parameters['kwargs'].default == Parameter.empty
283.     assert sig.parameters['kwargs'].annotation == Parameter.empty
284.     assert sig.return_annotation == Parameter.empty
285. 
286. 
287. def test_signature_from_str_default_values():
288.     signature = ('(a=0, b=0.0, c="str", d=b"bytes", e=..., f=True, '
289.                  'g=[1, 2, 3], h={"a": 1}, i={1, 2, 3}, '
290.                  'j=lambda x, y: None, k=None, l=object(), m=foo.bar.CONSTANT)')
291.     sig = inspect.signature_from_str(signature)
292.     assert sig.parameters['a'].default == '0'
293.     assert sig.parameters['b'].default == '0.0'
294.     assert sig.parameters['c'].default == "'str'"
295.     assert sig.parameters['d'].default == "b'bytes'"
296.     assert sig.parameters['e'].default == '...'
297.     assert sig.parameters['f'].default == 'True'
298.     assert sig.parameters['g'].default == '[1, 2, 3]'
299.     assert sig.parameters['h'].default == "{'a': 1}"
300.     assert sig.parameters['i'].default == '{1, 2, 3}'
301.     assert sig.parameters['j'].default == 'lambda x, y: ...'
302.     assert sig.parameters['k'].default == 'None'
303.     assert sig.parameters['l'].default == 'object()'
304.     assert sig.parameters['m'].default == 'foo.bar.CONSTANT'
305. 
306. 
307. def test_signature_from_str_annotations():
308.     signature = '(a: int, *args: bytes, b: str = "blah", **kwargs: float) -> None'
309.     sig = inspect.signature_from_str(signature)
310.     assert list(sig.parameters.keys()) == ['a', 'args', 'b', 'kwargs']
311.     assert sig.parameters['a'].annotation == "int"
312.     assert sig.parameters['args'].annotation == "bytes"
313.     assert sig.parameters['b'].annotation == "str"
314.     assert sig.parameters['kwargs'].annotation == "float"
315.     assert sig.return_annotation == 'None'
316. 
317. 
318. def test_signature_from_str_complex_annotations():
319.     sig = inspect.signature_from_str('() -> Tuple[str, int, ...]')
320.     assert sig.return_annotation == 'Tuple[str, int, ...]'
321. 
322.     sig = inspect.signature_from_str('() -> Callable[[int, int], int]')
323.     assert sig.return_annotation == 'Callable[[int, int], int]'
324. 
325. 
326. def test_signature_from_str_kwonly_args():
327.     sig = inspect.signature_from_str('(a, *, b)')
328.     assert list(sig.parameters.keys()) == ['a', 'b']
329.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_OR_KEYWORD
330.     assert sig.parameters['a'].default == Parameter.empty
331.     assert sig.parameters['b'].kind == Parameter.KEYWORD_ONLY
332.     assert sig.parameters['b'].default == Parameter.empty
333. 
334. 
335. @pytest.mark.skipif(sys.version_info < (3, 8),
336.                     reason='python-3.8 or above is required')
337. def test_signature_from_str_positionaly_only_args():
338.     sig = inspect.signature_from_str('(a, /, b)')
339.     assert list(sig.parameters.keys()) == ['a', 'b']
340.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_ONLY
341.     assert sig.parameters['b'].kind == Parameter.POSITIONAL_OR_KEYWORD
342. 
343. 
344. def test_signature_from_str_invalid():
345.     with pytest.raises(SyntaxError):
346.         inspect.signature_from_str('')
347. 
348. 
349. def test_safe_getattr_with_default():
350.     class Foo:
351.         def __getattr__(self, item):
352.             raise Exception
353. 
354.     obj = Foo()
355. 
356.     result = inspect.safe_getattr(obj, 'bar', 'baz')
357. 
358.     assert result == 'baz'
359. 
360. 
361. def test_safe_getattr_with_exception():
362.     class Foo:
363.         def __getattr__(self, item):
364.             raise Exception
365. 
366.     obj = Foo()
367. 
368.     try:
369.         inspect.safe_getattr(obj, 'bar')
370.     except AttributeError as exc:
371.         assert exc.args[0] == 'bar'
372.     else:
373.         pytest.fail('AttributeError not raised')
374. 
375. 
376. def test_safe_getattr_with_property_exception():
377.     class Foo:
378.         @property
379.         def bar(self):
380.             raise Exception
381. 
382.     obj = Foo()
383. 
384.     try:
385.         inspect.safe_getattr(obj, 'bar')
386.     except AttributeError as exc:
387.         assert exc.args[0] == 'bar'
388.     else:
389.         pytest.fail('AttributeError not raised')
390. 
391. 
392. def test_safe_getattr_with___dict___override():
393.     class Foo:
394.         @property
395.         def __dict__(self):
396.             raise Exception
397. 
398.     obj = Foo()
399. 
400.     try:
401.         inspect.safe_getattr(obj, 'bar')
402.     except AttributeError as exc:
403.         assert exc.args[0] == 'bar'
404.     else:
405.         pytest.fail('AttributeError not raised')
406. 
407. 
408. def test_dictionary_sorting():
409.     dictionary = {"c": 3, "a": 1, "d": 2, "b": 4}
410.     description = inspect.object_description(dictionary)
411.     assert description == "{'a': 1, 'b': 4, 'c': 3, 'd': 2}"
412. 
413. 
414. def test_set_sorting():
415.     set_ = set("gfedcba")
416.     description = inspect.object_description(set_)
417.     assert description == "{'a', 'b', 'c', 'd', 'e', 'f', 'g'}"
418. 
419. 
420. def test_set_sorting_fallback():
421.     set_ = {None, 1}
422.     description = inspect.object_description(set_)
423.     assert description in ("{1, None}", "{None, 1}")
424. 
425. 
426. def test_frozenset_sorting():
427.     frozenset_ = frozenset("gfedcba")
428.     description = inspect.object_description(frozenset_)
429.     assert description == "frozenset({'a', 'b', 'c', 'd', 'e', 'f', 'g'})"
430. 
431. 
432. def test_frozenset_sorting_fallback():
433.     frozenset_ = frozenset((None, 1))
434.     description = inspect.object_description(frozenset_)
435.     assert description in ("frozenset({1, None})", "frozenset({None, 1})")
436. 
437. 
438. def test_dict_customtype():
439.     class CustomType:
440.         def __init__(self, value):
441.             self._value = value
442. 
443.         def __repr__(self):
444.             return "<CustomType(%r)>" % self._value
445. 
446.     dictionary = {CustomType(2): 2, CustomType(1): 1}
447.     description = inspect.object_description(dictionary)
448.     # Type is unsortable, just check that it does not crash
449.     assert "<CustomType(2)>: 2" in description
450. 
451. 
452. @pytest.mark.sphinx(testroot='ext-autodoc')
453. def test_isclassmethod(app):
454.     from target.methods import Base, Inherited
455. 
456.     assert inspect.isclassmethod(Base.classmeth) is True
457.     assert inspect.isclassmethod(Base.meth) is False
458.     assert inspect.isclassmethod(Inherited.classmeth) is True
459.     assert inspect.isclassmethod(Inherited.meth) is False
460. 
461. 
462. @pytest.mark.sphinx(testroot='ext-autodoc')
463. def test_isstaticmethod(app):
464.     from target.methods import Base, Inherited
465. 
466.     assert inspect.isstaticmethod(Base.staticmeth, Base, 'staticmeth') is True
467.     assert inspect.isstaticmethod(Base.meth, Base, 'meth') is False
468.     assert inspect.isstaticmethod(Inherited.staticmeth, Inherited, 'staticmeth') is True
469.     assert inspect.isstaticmethod(Inherited.meth, Inherited, 'meth') is False
470. 
471. 
472. @pytest.mark.sphinx(testroot='ext-autodoc')
473. def test_iscoroutinefunction(app):
474.     from target.functions import coroutinefunc, func, partial_coroutinefunc
475.     from target.methods import Base
476. 
477.     assert inspect.iscoroutinefunction(func) is False                   # function
478.     assert inspect.iscoroutinefunction(coroutinefunc) is True           # coroutine
479.     assert inspect.iscoroutinefunction(partial_coroutinefunc) is True   # partial-ed coroutine
480.     assert inspect.iscoroutinefunction(Base.meth) is False              # method
481.     assert inspect.iscoroutinefunction(Base.coroutinemeth) is True      # coroutine-method
482. 
483.     # partial-ed coroutine-method
484.     partial_coroutinemeth = Base.__dict__['partial_coroutinemeth']
485.     assert inspect.iscoroutinefunction(partial_coroutinemeth) is True
486. 
487. 
488. @pytest.mark.sphinx(testroot='ext-autodoc')
489. def test_isfunction(app):
490.     from target.functions import builtin_func, partial_builtin_func
491.     from target.functions import func, partial_func
492.     from target.methods import Base
493. 
494.     assert inspect.isfunction(func) is True                     # function
495.     assert inspect.isfunction(partial_func) is True             # partial-ed function
496.     assert inspect.isfunction(Base.meth) is True                # method of class
497.     assert inspect.isfunction(Base.partialmeth) is True         # partial-ed method of class
498.     assert inspect.isfunction(Base().meth) is False             # method of instance
499.     assert inspect.isfunction(builtin_func) is False            # builtin function
500.     assert inspect.isfunction(partial_builtin_func) is False    # partial-ed builtin function

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 03:24:04,548 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find test cases for a bug related to rendering default values of positional-only arguments in `py:function` directives. The provided context, `tests/test_util_inspect.py`, contains unit tests for signature parsing, but lacks integration tests that verify the final output of the `py:function` directive. The file `tests/test_domain_py.py` is expected to contain these higher-level integration tests, which are more relevant to the user's bug report." query='Please provide the content of the file `tests/test_domain_py.py`.' extra_requirements='' purpose='This file is needed to find integration tests for the `py:function` directive, which is where the bug manifests, and will provide more relevant test cases than the unit tests for `inspect.py`.'
2025-12-23 03:24:04,550 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the content of the file `tests/test_domain_py.py`.
2025-12-23 03:24:04,550 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 03:24:04,551 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 03:24:04,551 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 03:24:04,551 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the content of the file `tests/test_domain_py.py`.
Purpose: This file is needed to find integration tests for the `py:function` directive, which is where the bug manifests, and will provide more relevant test cases than the unit tests for `inspect.py`.
2025-12-23 03:24:06,872 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/test_domain_py.py"}'}, '__gemini_function_call_thought_signatures__': {'240f36ff-3082-4231-b4bc-a95ff170ab9b': 'CrUFAY89a19fgD/bk5nvB9uSkboaGEVI3ZuWMNO93p/i9zIZQSmnhx9NhUaGtEVqo6Dij9AuaI/Rds3AFeu9bCkPa0m31pynDkRGIO/b7CpMRASh50LRWLu9FT2XmtdgR7yItpzJu9AZfraV3X4hjQzGLqEeLdXZsUDASOJL0LT+xuvy9VmwMm4TVgQsvJjxKa6v8ba6dFwouNGePZuQSLx76LdnlV8k46M0a18lY4UI8G7Hif0BpD8VrK2T2ur9bVXlIx7ZaAXgExyHztov0uUEDjNJpJJUYIgE0feCvLzZ6+8RUH2KIXCTEAMGN9QD+8qMtt364HiajNnlFHqPYPWGuJuYDwfXtE5Wld/LldiwmNBIeftF/UL6R0qKK06tSvZTF+bhRzrbY70RKb77bmo6hzQdT3mJfz+CPQXzCppIHzJz3gzygxM1DoeNArCtRim8baEpz8Y08PGNpMHU7PW1x/ozGBZeNAjFIpR1dPHyhT9l9rlAe1CPphxo0kduJhV+yj/FtTleJYoLpZO3b/sjMgCxOxhj8qOTrpePpZL1xRPylW52XNiBPuDrT5vZvLCxFX1lyDvuUCPfPwlJH0jpilZTTLO1PgXgyDwrpvd6YPU1SCPd9YafIlFqeBRMwyM597/ocDdfmyxc9uTHa5vejKnMOZAq+oZBiu4VVkxiW33v8trYfIXDFkNp6YrUycgltoxlgXeJOiwf2DDiGp6DyOsRP1eYmSIAOFbwnm/NZxNeFnyBE193V0GcuSZzLZlK47gij1yjin0EvJI/Bmv1Iw8Q+WIf9PZvCL0gLs7w8wwSTK70zokCCBPGLwOIyiCEvsOyn5mtlCaAr/58rF0FrI8Pv+9VMctRbJVKBw5zkVhzkvh4flOvBcxGlVZFDGmprTIsWy05ss2xhT8g3qloj5r9t+m8'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2089, 'candidates_token_count': 23, 'total_token_count': 2290, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2089}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 23}], 'thoughts_token_count': 178, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3114655743474546, 'model_name': 'gemini-2.5-pro'} id='run--e55f6a3f-6d7b-4df2-8eb4-524f1b2374d4-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_domain_py.py'}, 'id': '240f36ff-3082-4231-b4bc-a95ff170ab9b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2089, 'output_tokens': 23, 'total_tokens': 2290, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 178}}
2025-12-23 03:24:11,832 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the contents of `tests/test_domain_py.py`. This file contains a comprehensive suite of tests for Sphinx's Python domain, which will be valuable for understanding the bug. The tests cover a wide range of functionalities, including signature parsing, cross-referencing, and object resolution for various Python directives like `py:function`, `py:class`, and `py:method`. I will now focus on the tests specifically related to the `py:function` directive to gather the most relevant information for debugging." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11334, 'candidates_token_count': 110, 'total_token_count': 11682, 'cached_content_token_count': 1823, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11512}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1823}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 110}], 'thoughts_token_count': 238}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3632267691872337, 'model_name': 'gemini-2.5-pro'} id='run--a2a7a0fa-d858-427e-91ab-4027c4c622cd-0' usage_metadata={'input_tokens': 11334, 'output_tokens': 110, 'total_tokens': 11682, 'input_token_details': {'cache_read': 1823}, 'output_token_details': {'reasoning': 238}}
2025-12-23 03:24:11,834 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the content of the file `tests/test_domain_py.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This file is needed to find integration tests for the `py:function` directive, which is where the bug manifests, and will provide more relevant test cases than the unit tests for `inspect.py`.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/test_domain_py.py
Line number range: 1 - 500
Content:
1. """
2.     test_domain_py
3.     ~~~~~~~~~~~~~~
4. 
5.     Tests the Python Domain
6. 
7.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import sys
12. from unittest.mock import Mock
13. 
14. import pytest
15. from docutils import nodes
16. 
17. from sphinx import addnodes
18. from sphinx.addnodes import (
19.     desc, desc_addname, desc_annotation, desc_content, desc_name, desc_optional,
20.     desc_parameter, desc_parameterlist, desc_returns, desc_signature,
21.     desc_sig_name, desc_sig_operator, desc_sig_punctuation, pending_xref,
22. )
23. from sphinx.domains import IndexEntry
24. from sphinx.domains.python import (
25.     py_sig_re, _parse_annotation, _pseudo_parse_arglist, PythonDomain, PythonModuleIndex
26. )
27. from sphinx.testing import restructuredtext
28. from sphinx.testing.util import assert_node
29. 
30. 
31. def parse(sig):
32.     m = py_sig_re.match(sig)
33.     if m is None:
34.         raise ValueError
35.     name_prefix, name, arglist, retann = m.groups()
36.     signode = addnodes.desc_signature(sig, '')
37.     _pseudo_parse_arglist(signode, arglist)
38.     return signode.astext()
39. 
40. 
41. def test_function_signatures():
42.     rv = parse('func(a=1) -> int object')
43.     assert rv == '(a=1)'
44. 
45.     rv = parse('func(a=1, [b=None])')
46.     assert rv == '(a=1, [b=None])'
47. 
48.     rv = parse('func(a=1[, b=None])')
49.     assert rv == '(a=1, [b=None])'
50. 
51.     rv = parse("compile(source : string, filename, symbol='file')")
52.     assert rv == "(source : string, filename, symbol='file')"
53. 
54.     rv = parse('func(a=[], [b=None])')
55.     assert rv == '(a=[], [b=None])'
56. 
57.     rv = parse('func(a=[][, b=None])')
58.     assert rv == '(a=[], [b=None])'
59. 
60. 
61. @pytest.mark.sphinx('dummy', testroot='domain-py')
62. def test_domain_py_xrefs(app, status, warning):
63.     """Domain objects have correct prefixes when looking up xrefs"""
64.     app.builder.build_all()
65. 
66.     def assert_refnode(node, module_name, class_name, target, reftype=None,
67.                        domain='py'):
68.         attributes = {
69.             'refdomain': domain,
70.             'reftarget': target,
71.         }
72.         if reftype is not None:
73.             attributes['reftype'] = reftype
74.         if module_name is not False:
75.             attributes['py:module'] = module_name
76.         if class_name is not False:
77.             attributes['py:class'] = class_name
78.         assert_node(node, **attributes)
79. 
80.     doctree = app.env.get_doctree('roles')
81.     refnodes = list(doctree.traverse(pending_xref))
82.     assert_refnode(refnodes[0], None, None, 'TopLevel', 'class')
83.     assert_refnode(refnodes[1], None, None, 'top_level', 'meth')
84.     assert_refnode(refnodes[2], None, 'NestedParentA', 'child_1', 'meth')
85.     assert_refnode(refnodes[3], None, 'NestedParentA', 'NestedChildA.subchild_2', 'meth')
86.     assert_refnode(refnodes[4], None, 'NestedParentA', 'child_2', 'meth')
87.     assert_refnode(refnodes[5], False, 'NestedParentA', 'any_child', domain='')
88.     assert_refnode(refnodes[6], None, 'NestedParentA', 'NestedChildA', 'class')
89.     assert_refnode(refnodes[7], None, 'NestedParentA.NestedChildA', 'subchild_2', 'meth')
90.     assert_refnode(refnodes[8], None, 'NestedParentA.NestedChildA',
91.                    'NestedParentA.child_1', 'meth')
92.     assert_refnode(refnodes[9], None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth')
93.     assert_refnode(refnodes[10], None, 'NestedParentB', 'child_1', 'meth')
94.     assert_refnode(refnodes[11], None, 'NestedParentB', 'NestedParentB', 'class')
95.     assert_refnode(refnodes[12], None, None, 'NestedParentA.NestedChildA', 'class')
96.     assert len(refnodes) == 13
97. 
98.     doctree = app.env.get_doctree('module')
99.     refnodes = list(doctree.traverse(pending_xref))
100.     assert_refnode(refnodes[0], 'module_a.submodule', None,
101.                    'ModTopLevel', 'class')
102.     assert_refnode(refnodes[1], 'module_a.submodule', 'ModTopLevel',
103.                    'mod_child_1', 'meth')
104.     assert_refnode(refnodes[2], 'module_a.submodule', 'ModTopLevel',
105.                    'ModTopLevel.mod_child_1', 'meth')
106.     assert_refnode(refnodes[3], 'module_a.submodule', 'ModTopLevel',
107.                    'mod_child_2', 'meth')
108.     assert_refnode(refnodes[4], 'module_a.submodule', 'ModTopLevel',
109.                    'module_a.submodule.ModTopLevel.mod_child_1', 'meth')
110.     assert_refnode(refnodes[5], 'module_a.submodule', 'ModTopLevel',
111.                    'prop', 'attr')
112.     assert_refnode(refnodes[6], 'module_a.submodule', 'ModTopLevel',
113.                    'prop', 'meth')
114.     assert_refnode(refnodes[7], 'module_b.submodule', None,
115.                    'ModTopLevel', 'class')
116.     assert_refnode(refnodes[8], 'module_b.submodule', 'ModTopLevel',
117.                    'ModNoModule', 'class')
118.     assert_refnode(refnodes[9], False, False, 'int', 'class')
119.     assert_refnode(refnodes[10], False, False, 'tuple', 'class')
120.     assert_refnode(refnodes[11], False, False, 'str', 'class')
121.     assert_refnode(refnodes[12], False, False, 'float', 'class')
122.     assert_refnode(refnodes[13], False, False, 'list', 'class')
123.     assert_refnode(refnodes[14], False, False, 'ModTopLevel', 'class')
124.     assert_refnode(refnodes[15], False, False, 'index', 'doc', domain='std')
125.     assert len(refnodes) == 16
126. 
127.     doctree = app.env.get_doctree('module_option')
128.     refnodes = list(doctree.traverse(pending_xref))
129.     print(refnodes)
130.     print(refnodes[0])
131.     print(refnodes[1])
132.     assert_refnode(refnodes[0], 'test.extra', 'B', 'foo', 'meth')
133.     assert_refnode(refnodes[1], 'test.extra', 'B', 'foo', 'meth')
134.     assert len(refnodes) == 2
135. 
136. 
137. @pytest.mark.sphinx('dummy', testroot='domain-py')
138. def test_domain_py_objects(app, status, warning):
139.     app.builder.build_all()
140. 
141.     modules = app.env.domains['py'].data['modules']
142.     objects = app.env.domains['py'].data['objects']
143. 
144.     assert 'module_a.submodule' in modules
145.     assert 'module_a.submodule' in objects
146.     assert 'module_b.submodule' in modules
147.     assert 'module_b.submodule' in objects
148. 
149.     assert objects['module_a.submodule.ModTopLevel'][2] == 'class'
150.     assert objects['module_a.submodule.ModTopLevel.mod_child_1'][2] == 'method'
151.     assert objects['module_a.submodule.ModTopLevel.mod_child_2'][2] == 'method'
152.     assert 'ModTopLevel.ModNoModule' not in objects
153.     assert objects['ModNoModule'][2] == 'class'
154.     assert objects['module_b.submodule.ModTopLevel'][2] == 'class'
155. 
156.     assert objects['TopLevel'][2] == 'class'
157.     assert objects['top_level'][2] == 'method'
158.     assert objects['NestedParentA'][2] == 'class'
159.     assert objects['NestedParentA.child_1'][2] == 'method'
160.     assert objects['NestedParentA.any_child'][2] == 'method'
161.     assert objects['NestedParentA.NestedChildA'][2] == 'class'
162.     assert objects['NestedParentA.NestedChildA.subchild_1'][2] == 'method'
163.     assert objects['NestedParentA.NestedChildA.subchild_2'][2] == 'method'
164.     assert objects['NestedParentA.child_2'][2] == 'method'
165.     assert objects['NestedParentB'][2] == 'class'
166.     assert objects['NestedParentB.child_1'][2] == 'method'
167. 
168. 
169. @pytest.mark.sphinx('html', testroot='domain-py')
170. def test_resolve_xref_for_properties(app, status, warning):
171.     app.builder.build_all()
172. 
173.     content = (app.outdir / 'module.html').read_text()
174.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
175.             ' title="module_a.submodule.ModTopLevel.prop">'
176.             '<code class="xref py py-attr docutils literal notranslate"><span class="pre">'
177.             'prop</span> <span class="pre">attribute</span></code></a>' in content)
178.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
179.             ' title="module_a.submodule.ModTopLevel.prop">'
180.             '<code class="xref py py-meth docutils literal notranslate"><span class="pre">'
181.             'prop</span> <span class="pre">method</span></code></a>' in content)
182. 
183. 
184. @pytest.mark.sphinx('dummy', testroot='domain-py')
185. def test_domain_py_find_obj(app, status, warning):
186. 
187.     def find_obj(modname, prefix, obj_name, obj_type, searchmode=0):
188.         return app.env.domains['py'].find_obj(
189.             app.env, modname, prefix, obj_name, obj_type, searchmode)
190. 
191.     app.builder.build_all()
192. 
193.     assert (find_obj(None, None, 'NONEXISTANT', 'class') == [])
194.     assert (find_obj(None, None, 'NestedParentA', 'class') ==
195.             [('NestedParentA', ('roles', 'NestedParentA', 'class'))])
196.     assert (find_obj(None, None, 'NestedParentA.NestedChildA', 'class') ==
197.             [('NestedParentA.NestedChildA', ('roles', 'NestedParentA.NestedChildA', 'class'))])
198.     assert (find_obj(None, 'NestedParentA', 'NestedChildA', 'class') ==
199.             [('NestedParentA.NestedChildA', ('roles', 'NestedParentA.NestedChildA', 'class'))])
200.     assert (find_obj(None, None, 'NestedParentA.NestedChildA.subchild_1', 'meth') ==
201.             [('NestedParentA.NestedChildA.subchild_1',
202.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method'))])
203.     assert (find_obj(None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth') ==
204.             [('NestedParentA.NestedChildA.subchild_1',
205.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method'))])
206.     assert (find_obj(None, 'NestedParentA.NestedChildA', 'subchild_1', 'meth') ==
207.             [('NestedParentA.NestedChildA.subchild_1',
208.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method'))])
209. 
210. 
211. def test_get_full_qualified_name():
212.     env = Mock(domaindata={})
213.     domain = PythonDomain(env)
214. 
215.     # non-python references
216.     node = nodes.reference()
217.     assert domain.get_full_qualified_name(node) is None
218. 
219.     # simple reference
220.     node = nodes.reference(reftarget='func')
221.     assert domain.get_full_qualified_name(node) == 'func'
222. 
223.     # with py:module context
224.     kwargs = {'py:module': 'module1'}
225.     node = nodes.reference(reftarget='func', **kwargs)
226.     assert domain.get_full_qualified_name(node) == 'module1.func'
227. 
228.     # with py:class context
229.     kwargs = {'py:class': 'Class'}
230.     node = nodes.reference(reftarget='func', **kwargs)
231.     assert domain.get_full_qualified_name(node) == 'Class.func'
232. 
233.     # with both py:module and py:class context
234.     kwargs = {'py:module': 'module1', 'py:class': 'Class'}
235.     node = nodes.reference(reftarget='func', **kwargs)
236.     assert domain.get_full_qualified_name(node) == 'module1.Class.func'
237. 
238. 
239. def test_parse_annotation():
240.     doctree = _parse_annotation("int")
241.     assert_node(doctree, ([pending_xref, "int"],))
242.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="class", reftarget="int")
243. 
244.     doctree = _parse_annotation("List[int]")
245.     assert_node(doctree, ([pending_xref, "List"],
246.                           [desc_sig_punctuation, "["],
247.                           [pending_xref, "int"],
248.                           [desc_sig_punctuation, "]"]))
249. 
250.     doctree = _parse_annotation("Tuple[int, int]")
251.     assert_node(doctree, ([pending_xref, "Tuple"],
252.                           [desc_sig_punctuation, "["],
253.                           [pending_xref, "int"],
254.                           [desc_sig_punctuation, ", "],
255.                           [pending_xref, "int"],
256.                           [desc_sig_punctuation, "]"]))
257. 
258.     doctree = _parse_annotation("Tuple[()]")
259.     assert_node(doctree, ([pending_xref, "Tuple"],
260.                           [desc_sig_punctuation, "["],
261.                           [desc_sig_punctuation, "("],
262.                           [desc_sig_punctuation, ")"],
263.                           [desc_sig_punctuation, "]"]))
264. 
265.     doctree = _parse_annotation("Callable[[int, int], int]")
266.     assert_node(doctree, ([pending_xref, "Callable"],
267.                           [desc_sig_punctuation, "["],
268.                           [desc_sig_punctuation, "["],
269.                           [pending_xref, "int"],
270.                           [desc_sig_punctuation, ", "],
271.                           [pending_xref, "int"],
272.                           [desc_sig_punctuation, "]"],
273.                           [desc_sig_punctuation, ", "],
274.                           [pending_xref, "int"],
275.                           [desc_sig_punctuation, "]"]))
276. 
277.     # None type makes an object-reference (not a class reference)
278.     doctree = _parse_annotation("None")
279.     assert_node(doctree, ([pending_xref, "None"],))
280.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="obj", reftarget="None")
281. 
282. 
283. 
284. def test_pyfunction_signature(app):
285.     text = ".. py:function:: hello(name: str) -> str"
286.     doctree = restructuredtext.parse(app, text)
287.     assert_node(doctree, (addnodes.index,
288.                           [desc, ([desc_signature, ([desc_name, "hello"],
289.                                                     desc_parameterlist,
290.                                                     [desc_returns, pending_xref, "str"])],
291.                                   desc_content)]))
292.     assert_node(doctree[1], addnodes.desc, desctype="function",
293.                 domain="py", objtype="function", noindex=False)
294.     assert_node(doctree[1][0][1],
295.                 [desc_parameterlist, desc_parameter, ([desc_sig_name, "name"],
296.                                                       [desc_sig_punctuation, ":"],
297.                                                       " ",
298.                                                       [nodes.inline, pending_xref, "str"])])
299. 
300. 
301. def test_pyfunction_signature_full(app):
302.     text = (".. py:function:: hello(a: str, b = 1, *args: str, "
303.             "c: bool = True, **kwargs: str) -> str")
304.     doctree = restructuredtext.parse(app, text)
305.     assert_node(doctree, (addnodes.index,
306.                           [desc, ([desc_signature, ([desc_name, "hello"],
307.                                                     desc_parameterlist,
308.                                                     [desc_returns, pending_xref, "str"])],
309.                                   desc_content)]))
310.     assert_node(doctree[1], addnodes.desc, desctype="function",
311.                 domain="py", objtype="function", noindex=False)
312.     assert_node(doctree[1][0][1],
313.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "a"],
314.                                                         [desc_sig_punctuation, ":"],
315.                                                         " ",
316.                                                         [desc_sig_name, pending_xref, "str"])],
317.                                       [desc_parameter, ([desc_sig_name, "b"],
318.                                                         [desc_sig_operator, "="],
319.                                                         [nodes.inline, "1"])],
320.                                       [desc_parameter, ([desc_sig_operator, "*"],
321.                                                         [desc_sig_name, "args"],
322.                                                         [desc_sig_punctuation, ":"],
323.                                                         " ",
324.                                                         [desc_sig_name, pending_xref, "str"])],
325.                                       [desc_parameter, ([desc_sig_name, "c"],
326.                                                         [desc_sig_punctuation, ":"],
327.                                                         " ",
328.                                                         [desc_sig_name, pending_xref, "bool"],
329.                                                         " ",
330.                                                         [desc_sig_operator, "="],
331.                                                         " ",
332.                                                         [nodes.inline, "True"])],
333.                                       [desc_parameter, ([desc_sig_operator, "**"],
334.                                                         [desc_sig_name, "kwargs"],
335.                                                         [desc_sig_punctuation, ":"],
336.                                                         " ",
337.                                                         [desc_sig_name, pending_xref, "str"])])])
338. 
339. 
340. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
341. def test_pyfunction_signature_full_py38(app):
342.     # case: separator at head
343.     text = ".. py:function:: hello(*, a)"
344.     doctree = restructuredtext.parse(app, text)
345.     assert_node(doctree[1][0][1],
346.                 [desc_parameterlist, ([desc_parameter, nodes.inline, "*"],
347.                                       [desc_parameter, desc_sig_name, "a"])])
348. 
349.     # case: separator in the middle
350.     text = ".. py:function:: hello(a, /, b, *, c)"
351.     doctree = restructuredtext.parse(app, text)
352.     assert_node(doctree[1][0][1],
353.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
354.                                       [desc_parameter, desc_sig_operator, "/"],
355.                                       [desc_parameter, desc_sig_name, "b"],
356.                                       [desc_parameter, desc_sig_operator, "*"],
357.                                       [desc_parameter, desc_sig_name, "c"])])
358. 
359.     # case: separator in the middle (2)
360.     text = ".. py:function:: hello(a, /, *, b)"
361.     doctree = restructuredtext.parse(app, text)
362.     assert_node(doctree[1][0][1],
363.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
364.                                       [desc_parameter, desc_sig_operator, "/"],
365.                                       [desc_parameter, desc_sig_operator, "*"],
366.                                       [desc_parameter, desc_sig_name, "b"])])
367. 
368.     # case: separator at tail
369.     text = ".. py:function:: hello(a, /)"
370.     doctree = restructuredtext.parse(app, text)
371.     assert_node(doctree[1][0][1],
372.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
373.                                       [desc_parameter, desc_sig_operator, "/"])])
374. 
375. 
376. def test_optional_pyfunction_signature(app):
377.     text = ".. py:function:: compile(source [, filename [, symbol]]) -> ast object"
378.     doctree = restructuredtext.parse(app, text)
379.     assert_node(doctree, (addnodes.index,
380.                           [desc, ([desc_signature, ([desc_name, "compile"],
381.                                                     desc_parameterlist,
382.                                                     [desc_returns, pending_xref, "ast object"])],
383.                                   desc_content)]))
384.     assert_node(doctree[1], addnodes.desc, desctype="function",
385.                 domain="py", objtype="function", noindex=False)
386.     assert_node(doctree[1][0][1],
387.                 ([desc_parameter, "source"],
388.                  [desc_optional, ([desc_parameter, "filename"],
389.                                   [desc_optional, desc_parameter, "symbol"])]))
390. 
391. 
392. def test_pyexception_signature(app):
393.     text = ".. py:exception:: exceptions.IOError"
394.     doctree = restructuredtext.parse(app, text)
395.     assert_node(doctree, (addnodes.index,
396.                           [desc, ([desc_signature, ([desc_annotation, "exception "],
397.                                                     [desc_addname, "exceptions."],
398.                                                     [desc_name, "IOError"])],
399.                                   desc_content)]))
400.     assert_node(doctree[1], desc, desctype="exception",
401.                 domain="py", objtype="exception", noindex=False)
402. 
403. 
404. def test_exceptions_module_is_ignored(app):
405.     text = (".. py:exception:: IOError\n"
406.             "   :module: exceptions\n")
407.     doctree = restructuredtext.parse(app, text)
408.     assert_node(doctree, (addnodes.index,
409.                           [desc, ([desc_signature, ([desc_annotation, "exception "],
410.                                                     [desc_name, "IOError"])],
411.                                   desc_content)]))
412.     assert_node(doctree[1], desc, desctype="exception",
413.                 domain="py", objtype="exception", noindex=False)
414. 
415. 
416. def test_pydata_signature(app):
417.     text = (".. py:data:: version\n"
418.             "   :type: int\n"
419.             "   :value: 1\n")
420.     doctree = restructuredtext.parse(app, text)
421.     assert_node(doctree, (addnodes.index,
422.                           [desc, ([desc_signature, ([desc_name, "version"],
423.                                                     [desc_annotation, (": ",
424.                                                                        [pending_xref, "int"])],
425.                                                     [desc_annotation, " = 1"])],
426.                                   desc_content)]))
427.     assert_node(doctree[1], addnodes.desc, desctype="data",
428.                 domain="py", objtype="data", noindex=False)
429. 
430. 
431. def test_pydata_signature_old(app):
432.     text = (".. py:data:: version\n"
433.             "   :annotation: = 1\n")
434.     doctree = restructuredtext.parse(app, text)
435.     assert_node(doctree, (addnodes.index,
436.                           [desc, ([desc_signature, ([desc_name, "version"],
437.                                                     [desc_annotation, " = 1"])],
438.                                   desc_content)]))
439.     assert_node(doctree[1], addnodes.desc, desctype="data",
440.                 domain="py", objtype="data", noindex=False)
441. 
442. 
443. def test_pyobject_prefix(app):
444.     text = (".. py:class:: Foo\n"
445.             "\n"
446.             "   .. py:method:: Foo.say\n"
447.             "   .. py:method:: FooBar.say")
448.     doctree = restructuredtext.parse(app, text)
449.     assert_node(doctree, (addnodes.index,
450.                           [desc, ([desc_signature, ([desc_annotation, "class "],
451.                                                     [desc_name, "Foo"])],
452.                                   [desc_content, (addnodes.index,
453.                                                   desc,
454.                                                   addnodes.index,
455.                                                   desc)])]))
456.     assert doctree[1][1][1].astext().strip() == 'say()'           # prefix is stripped
457.     assert doctree[1][1][3].astext().strip() == 'FooBar.say()'    # not stripped
458. 
459. 
460. def test_pydata(app):
461.     text = ".. py:data:: var\n"
462.     domain = app.env.get_domain('py')
463.     doctree = restructuredtext.parse(app, text)
464.     assert_node(doctree, (addnodes.index,
465.                           [desc, ([desc_signature, desc_name, "var"],
466.                                   [desc_content, ()])]))
467.     assert 'var' in domain.objects
468.     assert domain.objects['var'] == ('index', 'var', 'data')
469. 
470. 
471. def test_pyfunction(app):
472.     text = (".. py:function:: func1\n"
473.             ".. py:module:: example\n"
474.             ".. py:function:: func2\n"
475.             "   :async:\n")
476.     domain = app.env.get_domain('py')
477.     doctree = restructuredtext.parse(app, text)
478.     assert_node(doctree, (addnodes.index,
479.                           [desc, ([desc_signature, ([desc_name, "func1"],
480.                                                     [desc_parameterlist, ()])],
481.                                   [desc_content, ()])],
482.                           nodes.target,
483.                           addnodes.index,
484.                           addnodes.index,
485.                           [desc, ([desc_signature, ([desc_annotation, "async "],
486.                                                     [desc_addname, "example."],
487.                                                     [desc_name, "func2"],
488.                                                     [desc_parameterlist, ()])],
489.                                   [desc_content, ()])]))
490.     assert_node(doctree[0], addnodes.index,
491.                 entries=[('pair', 'built-in function; func1()', 'func1', '', None)])
492.     assert_node(doctree[3], addnodes.index,
493.                 entries=[('pair', 'module; example', 'module-example', '', None)])
494.     assert_node(doctree[4], addnodes.index,
495.                 entries=[('single', 'func2() (in module example)', 'example.func2', '', None)])
496. 
497.     assert 'func1' in domain.objects
498.     assert domain.objects['func1'] == ('index', 'func1', 'function')
499.     assert 'example.func2' in domain.objects
500.     assert domain.objects['example.func2'] == ('index', 'example.func2', 'function')

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 03:24:16,080 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly requested the content of the file `tests/test_domain_py.py`. The provided context contains the entire file, so I am returning the whole file as requested.', relative_path='tests/test_domain_py.py', start_line=1, end_line=500)]
2025-12-23 03:24:16,082 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the content of the file `tests/test_domain_py.py`.
2025-12-23 03:24:16,082 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 03:24:16,082 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 03:24:16,082 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 1 existing contexts
2025-12-23 03:24:16,083 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-23 03:24:16,083 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       └── main.yml
├── .travis.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── authors.rst
|   ├── changes.rst
|   ├── code_of_conduct.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── index.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── devguide.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── theming.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── conftest.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enum.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── methods.py
|   |   |       ├── need_mocks.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   └── typing_test_data.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: The default value for positional only argument has vanished

Description: **Describe the bug**
The default value for positional only argument has vanished

**To Reproduce**

Build following document:
```
.. py:function:: foo(a, b=0, /, c=1)
```

Result:
<img width="148" alt="スクリーンショット 2020-05-30 23 43 01" src="https://user-images.githubusercontent.com/748828/83331159-4eab4a80-a2cf-11ea-9559-9b17cc56bc01.png">

**Expected behavior**
The default value is shown.

**Your project**
No.

**Environment info**
- OS: Mac
- Python version: 3.8.2
- Sphinx version: 3.1.0dev
- Sphinx extensions:  No
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/util/inspect.py b/sphinx/util/inspect.py
index 15f0d66e2..7508144d2 100644
--- a/sphinx/util/inspect.py
+++ b/sphinx/util/inspect.py
@@ -520,15 +520,32 @@ def signature_from_str(signature: str) -> inspect.Signature:
     args = definition.args
     params = []
 
+    # compute alignment for defaults across all positional parameters
     if hasattr(args, "posonlyargs"):
-        for arg in args.posonlyargs:  # type: ignore
+        posonly_count = len(args.posonlyargs)  # type: ignore
+    else:
+        posonly_count = 0
+    total_positionals = posonly_count + len(args.args)
+    num_defaults = len(args.defaults)
+
+    if hasattr(args, "posonlyargs"):
+        for i, arg in enumerate(args.posonlyargs):  # type: ignore
+            # defaults correspond to the last num_defaults positional params
+            if total_positionals - i <= num_defaults:
+                index_in_defaults = i - (total_positionals - num_defaults)
+                default = ast_unparse(args.defaults[index_in_defaults])
+            else:
+                default = Parameter.empty
+
             annotation = ast_unparse(arg.annotation) or Parameter.empty
             params.append(Parameter(arg.arg, Parameter.POSITIONAL_ONLY,
-                                    annotation=annotation))
+                                    default=default, annotation=annotation))
 
     for i, arg in enumerate(args.args):
-        if len(args.args) - i <= len(args.defaults):
-            default = ast_unparse(args.defaults[-len(args.args) + i])
+        gi = posonly_count + i  # global index among positional params
+        if total_positionals - gi <= num_defaults:
+            index_in_defaults = gi - (total_positionals - num_defaults)
+            default = ast_unparse(args.defaults[index_in_defaults])
         else:
             default = Parameter.empty
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the content of the file `tests/test_util_inspect.py`.
Extra Requirements: 
Purpose: This file is needed to find test cases that validate function signature parsing, which is the core of the reported bug and the provided patch.

Previous refined query 2:
Essential Query: Please provide the content of the file `tests/test_domain_py.py`.
Extra Requirements: 
Purpose: This file is needed to find integration tests for the `py:function` directive, which is where the bug manifests, and will provide more relevant test cases than the unit tests for `inspect.py`.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/test_domain_py.py
Line number range: 1 - 500
Content:
1. """
2.     test_domain_py
3.     ~~~~~~~~~~~~~~
4. 
5.     Tests the Python Domain
6. 
7.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import sys
12. from unittest.mock import Mock
13. 
14. import pytest
15. from docutils import nodes
16. 
17. from sphinx import addnodes
18. from sphinx.addnodes import (
19.     desc, desc_addname, desc_annotation, desc_content, desc_name, desc_optional,
20.     desc_parameter, desc_parameterlist, desc_returns, desc_signature,
21.     desc_sig_name, desc_sig_operator, desc_sig_punctuation, pending_xref,
22. )
23. from sphinx.domains import IndexEntry
24. from sphinx.domains.python import (
25.     py_sig_re, _parse_annotation, _pseudo_parse_arglist, PythonDomain, PythonModuleIndex
26. )
27. from sphinx.testing import restructuredtext
28. from sphinx.testing.util import assert_node
29. 
30. 
31. def parse(sig):
32.     m = py_sig_re.match(sig)
33.     if m is None:
34.         raise ValueError
35.     name_prefix, name, arglist, retann = m.groups()
36.     signode = addnodes.desc_signature(sig, '')
37.     _pseudo_parse_arglist(signode, arglist)
38.     return signode.astext()
39. 
40. 
41. def test_function_signatures():
42.     rv = parse('func(a=1) -> int object')
43.     assert rv == '(a=1)'
44. 
45.     rv = parse('func(a=1, [b=None])')
46.     assert rv == '(a=1, [b=None])'
47. 
48.     rv = parse('func(a=1[, b=None])')
49.     assert rv == '(a=1, [b=None])'
50. 
51.     rv = parse("compile(source : string, filename, symbol='file')")
52.     assert rv == "(source : string, filename, symbol='file')"
53. 
54.     rv = parse('func(a=[], [b=None])')
55.     assert rv == '(a=[], [b=None])'
56. 
57.     rv = parse('func(a=[][, b=None])')
58.     assert rv == '(a=[], [b=None])'
59. 
60. 
61. @pytest.mark.sphinx('dummy', testroot='domain-py')
62. def test_domain_py_xrefs(app, status, warning):
63.     """Domain objects have correct prefixes when looking up xrefs"""
64.     app.builder.build_all()
65. 
66.     def assert_refnode(node, module_name, class_name, target, reftype=None,
67.                        domain='py'):
68.         attributes = {
69.             'refdomain': domain,
70.             'reftarget': target,
71.         }
72.         if reftype is not None:
73.             attributes['reftype'] = reftype
74.         if module_name is not False:
75.             attributes['py:module'] = module_name
76.         if class_name is not False:
77.             attributes['py:class'] = class_name
78.         assert_node(node, **attributes)
79. 
80.     doctree = app.env.get_doctree('roles')
81.     refnodes = list(doctree.traverse(pending_xref))
82.     assert_refnode(refnodes[0], None, None, 'TopLevel', 'class')
83.     assert_refnode(refnodes[1], None, None, 'top_level', 'meth')
84.     assert_refnode(refnodes[2], None, 'NestedParentA', 'child_1', 'meth')
85.     assert_refnode(refnodes[3], None, 'NestedParentA', 'NestedChildA.subchild_2', 'meth')
86.     assert_refnode(refnodes[4], None, 'NestedParentA', 'child_2', 'meth')
87.     assert_refnode(refnodes[5], False, 'NestedParentA', 'any_child', domain='')
88.     assert_refnode(refnodes[6], None, 'NestedParentA', 'NestedChildA', 'class')
89.     assert_refnode(refnodes[7], None, 'NestedParentA.NestedChildA', 'subchild_2', 'meth')
90.     assert_refnode(refnodes[8], None, 'NestedParentA.NestedChildA',
91.                    'NestedParentA.child_1', 'meth')
92.     assert_refnode(refnodes[9], None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth')
93.     assert_refnode(refnodes[10], None, 'NestedParentB', 'child_1', 'meth')
94.     assert_refnode(refnodes[11], None, 'NestedParentB', 'NestedParentB', 'class')
95.     assert_refnode(refnodes[12], None, None, 'NestedParentA.NestedChildA', 'class')
96.     assert len(refnodes) == 13
97. 
98.     doctree = app.env.get_doctree('module')
99.     refnodes = list(doctree.traverse(pending_xref))
100.     assert_refnode(refnodes[0], 'module_a.submodule', None,
101.                    'ModTopLevel', 'class')
102.     assert_refnode(refnodes[1], 'module_a.submodule', 'ModTopLevel',
103.                    'mod_child_1', 'meth')
104.     assert_refnode(refnodes[2], 'module_a.submodule', 'ModTopLevel',
105.                    'ModTopLevel.mod_child_1', 'meth')
106.     assert_refnode(refnodes[3], 'module_a.submodule', 'ModTopLevel',
107.                    'mod_child_2', 'meth')
108.     assert_refnode(refnodes[4], 'module_a.submodule', 'ModTopLevel',
109.                    'module_a.submodule.ModTopLevel.mod_child_1', 'meth')
110.     assert_refnode(refnodes[5], 'module_a.submodule', 'ModTopLevel',
111.                    'prop', 'attr')
112.     assert_refnode(refnodes[6], 'module_a.submodule', 'ModTopLevel',
113.                    'prop', 'meth')
114.     assert_refnode(refnodes[7], 'module_b.submodule', None,
115.                    'ModTopLevel', 'class')
116.     assert_refnode(refnodes[8], 'module_b.submodule', 'ModTopLevel',
117.                    'ModNoModule', 'class')
118.     assert_refnode(refnodes[9], False, False, 'int', 'class')
119.     assert_refnode(refnodes[10], False, False, 'tuple', 'class')
120.     assert_refnode(refnodes[11], False, False, 'str', 'class')
121.     assert_refnode(refnodes[12], False, False, 'float', 'class')
122.     assert_refnode(refnodes[13], False, False, 'list', 'class')
123.     assert_refnode(refnodes[14], False, False, 'ModTopLevel', 'class')
124.     assert_refnode(refnodes[15], False, False, 'index', 'doc', domain='std')
125.     assert len(refnodes) == 16
126. 
127.     doctree = app.env.get_doctree('module_option')
128.     refnodes = list(doctree.traverse(pending_xref))
129.     print(refnodes)
130.     print(refnodes[0])
131.     print(refnodes[1])
132.     assert_refnode(refnodes[0], 'test.extra', 'B', 'foo', 'meth')
133.     assert_refnode(refnodes[1], 'test.extra', 'B', 'foo', 'meth')
134.     assert len(refnodes) == 2
135. 
136. 
137. @pytest.mark.sphinx('dummy', testroot='domain-py')
138. def test_domain_py_objects(app, status, warning):
139.     app.builder.build_all()
140. 
141.     modules = app.env.domains['py'].data['modules']
142.     objects = app.env.domains['py'].data['objects']
143. 
144.     assert 'module_a.submodule' in modules
145.     assert 'module_a.submodule' in objects
146.     assert 'module_b.submodule' in modules
147.     assert 'module_b.submodule' in objects
148. 
149.     assert objects['module_a.submodule.ModTopLevel'][2] == 'class'
150.     assert objects['module_a.submodule.ModTopLevel.mod_child_1'][2] == 'method'
151.     assert objects['module_a.submodule.ModTopLevel.mod_child_2'][2] == 'method'
152.     assert 'ModTopLevel.ModNoModule' not in objects
153.     assert objects['ModNoModule'][2] == 'class'
154.     assert objects['module_b.submodule.ModTopLevel'][2] == 'class'
155. 
156.     assert objects['TopLevel'][2] == 'class'
157.     assert objects['top_level'][2] == 'method'
158.     assert objects['NestedParentA'][2] == 'class'
159.     assert objects['NestedParentA.child_1'][2] == 'method'
160.     assert objects['NestedParentA.any_child'][2] == 'method'
161.     assert objects['NestedParentA.NestedChildA'][2] == 'class'
162.     assert objects['NestedParentA.NestedChildA.subchild_1'][2] == 'method'
163.     assert objects['NestedParentA.NestedChildA.subchild_2'][2] == 'method'
164.     assert objects['NestedParentA.child_2'][2] == 'method'
165.     assert objects['NestedParentB'][2] == 'class'
166.     assert objects['NestedParentB.child_1'][2] == 'method'
167. 
168. 
169. @pytest.mark.sphinx('html', testroot='domain-py')
170. def test_resolve_xref_for_properties(app, status, warning):
171.     app.builder.build_all()
172. 
173.     content = (app.outdir / 'module.html').read_text()
174.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
175.             ' title="module_a.submodule.ModTopLevel.prop">'
176.             '<code class="xref py py-attr docutils literal notranslate"><span class="pre">'
177.             'prop</span> <span class="pre">attribute</span></code></a>' in content)
178.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
179.             ' title="module_a.submodule.ModTopLevel.prop">'
180.             '<code class="xref py py-meth docutils literal notranslate"><span class="pre">'
181.             'prop</span> <span class="pre">method</span></code></a>' in content)
182. 
183. 
184. @pytest.mark.sphinx('dummy', testroot='domain-py')
185. def test_domain_py_find_obj(app, status, warning):
186. 
187.     def find_obj(modname, prefix, obj_name, obj_type, searchmode=0):
188.         return app.env.domains['py'].find_obj(
189.             app.env, modname, prefix, obj_name, obj_type, searchmode)
190. 
191.     app.builder.build_all()
192. 
193.     assert (find_obj(None, None, 'NONEXISTANT', 'class') == [])
194.     assert (find_obj(None, None, 'NestedParentA', 'class') ==
195.             [('NestedParentA', ('roles', 'NestedParentA', 'class'))])
196.     assert (find_obj(None, None, 'NestedParentA.NestedChildA', 'class') ==
197.             [('NestedParentA.NestedChildA', ('roles', 'NestedParentA.NestedChildA', 'class'))])
198.     assert (find_obj(None, 'NestedParentA', 'NestedChildA', 'class') ==
199.             [('NestedParentA.NestedChildA', ('roles', 'NestedParentA.NestedChildA', 'class'))])
200.     assert (find_obj(None, None, 'NestedParentA.NestedChildA.subchild_1', 'meth') ==
201.             [('NestedParentA.NestedChildA.subchild_1',
202.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method'))])
203.     assert (find_obj(None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth') ==
204.             [('NestedParentA.NestedChildA.subchild_1',
205.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method'))])
206.     assert (find_obj(None, 'NestedParentA.NestedChildA', 'subchild_1', 'meth') ==
207.             [('NestedParentA.NestedChildA.subchild_1',
208.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method'))])
209. 
210. 
211. def test_get_full_qualified_name():
212.     env = Mock(domaindata={})
213.     domain = PythonDomain(env)
214. 
215.     # non-python references
216.     node = nodes.reference()
217.     assert domain.get_full_qualified_name(node) is None
218. 
219.     # simple reference
220.     node = nodes.reference(reftarget='func')
221.     assert domain.get_full_qualified_name(node) == 'func'
222. 
223.     # with py:module context
224.     kwargs = {'py:module': 'module1'}
225.     node = nodes.reference(reftarget='func', **kwargs)
226.     assert domain.get_full_qualified_name(node) == 'module1.func'
227. 
228.     # with py:class context
229.     kwargs = {'py:class': 'Class'}
230.     node = nodes.reference(reftarget='func', **kwargs)
231.     assert domain.get_full_qualified_name(node) == 'Class.func'
232. 
233.     # with both py:module and py:class context
234.     kwargs = {'py:module': 'module1', 'py:class': 'Class'}
235.     node = nodes.reference(reftarget='func', **kwargs)
236.     assert domain.get_full_qualified_name(node) == 'module1.Class.func'
237. 
238. 
239. def test_parse_annotation():
240.     doctree = _parse_annotation("int")
241.     assert_node(doctree, ([pending_xref, "int"],))
242.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="class", reftarget="int")
243. 
244.     doctree = _parse_annotation("List[int]")
245.     assert_node(doctree, ([pending_xref, "List"],
246.                           [desc_sig_punctuation, "["],
247.                           [pending_xref, "int"],
248.                           [desc_sig_punctuation, "]"]))
249. 
250.     doctree = _parse_annotation("Tuple[int, int]")
251.     assert_node(doctree, ([pending_xref, "Tuple"],
252.                           [desc_sig_punctuation, "["],
253.                           [pending_xref, "int"],
254.                           [desc_sig_punctuation, ", "],
255.                           [pending_xref, "int"],
256.                           [desc_sig_punctuation, "]"]))
257. 
258.     doctree = _parse_annotation("Tuple[()]")
259.     assert_node(doctree, ([pending_xref, "Tuple"],
260.                           [desc_sig_punctuation, "["],
261.                           [desc_sig_punctuation, "("],
262.                           [desc_sig_punctuation, ")"],
263.                           [desc_sig_punctuation, "]"]))
264. 
265.     doctree = _parse_annotation("Callable[[int, int], int]")
266.     assert_node(doctree, ([pending_xref, "Callable"],
267.                           [desc_sig_punctuation, "["],
268.                           [desc_sig_punctuation, "["],
269.                           [pending_xref, "int"],
270.                           [desc_sig_punctuation, ", "],
271.                           [pending_xref, "int"],
272.                           [desc_sig_punctuation, "]"],
273.                           [desc_sig_punctuation, ", "],
274.                           [pending_xref, "int"],
275.                           [desc_sig_punctuation, "]"]))
276. 
277.     # None type makes an object-reference (not a class reference)
278.     doctree = _parse_annotation("None")
279.     assert_node(doctree, ([pending_xref, "None"],))
280.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="obj", reftarget="None")
281. 
282. 
283. 
284. def test_pyfunction_signature(app):
285.     text = ".. py:function:: hello(name: str) -> str"
286.     doctree = restructuredtext.parse(app, text)
287.     assert_node(doctree, (addnodes.index,
288.                           [desc, ([desc_signature, ([desc_name, "hello"],
289.                                                     desc_parameterlist,
290.                                                     [desc_returns, pending_xref, "str"])],
291.                                   desc_content)]))
292.     assert_node(doctree[1], addnodes.desc, desctype="function",
293.                 domain="py", objtype="function", noindex=False)
294.     assert_node(doctree[1][0][1],
295.                 [desc_parameterlist, desc_parameter, ([desc_sig_name, "name"],
296.                                                       [desc_sig_punctuation, ":"],
297.                                                       " ",
298.                                                       [nodes.inline, pending_xref, "str"])])
299. 
300. 
301. def test_pyfunction_signature_full(app):
302.     text = (".. py:function:: hello(a: str, b = 1, *args: str, "
303.             "c: bool = True, **kwargs: str) -> str")
304.     doctree = restructuredtext.parse(app, text)
305.     assert_node(doctree, (addnodes.index,
306.                           [desc, ([desc_signature, ([desc_name, "hello"],
307.                                                     desc_parameterlist,
308.                                                     [desc_returns, pending_xref, "str"])],
309.                                   desc_content)]))
310.     assert_node(doctree[1], addnodes.desc, desctype="function",
311.                 domain="py", objtype="function", noindex=False)
312.     assert_node(doctree[1][0][1],
313.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "a"],
314.                                                         [desc_sig_punctuation, ":"],
315.                                                         " ",
316.                                                         [desc_sig_name, pending_xref, "str"])],
317.                                       [desc_parameter, ([desc_sig_name, "b"],
318.                                                         [desc_sig_operator, "="],
319.                                                         [nodes.inline, "1"])],
320.                                       [desc_parameter, ([desc_sig_operator, "*"],
321.                                                         [desc_sig_name, "args"],
322.                                                         [desc_sig_punctuation, ":"],
323.                                                         " ",
324.                                                         [desc_sig_name, pending_xref, "str"])],
325.                                       [desc_parameter, ([desc_sig_name, "c"],
326.                                                         [desc_sig_punctuation, ":"],
327.                                                         " ",
328.                                                         [desc_sig_name, pending_xref, "bool"],
329.                                                         " ",
330.                                                         [desc_sig_operator, "="],
331.                                                         " ",
332.                                                         [nodes.inline, "True"])],
333.                                       [desc_parameter, ([desc_sig_operator, "**"],
334.                                                         [desc_sig_name, "kwargs"],
335.                                                         [desc_sig_punctuation, ":"],
336.                                                         " ",
337.                                                         [desc_sig_name, pending_xref, "str"])])])
338. 
339. 
340. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
341. def test_pyfunction_signature_full_py38(app):
342.     # case: separator at head
343.     text = ".. py:function:: hello(*, a)"
344.     doctree = restructuredtext.parse(app, text)
345.     assert_node(doctree[1][0][1],
346.                 [desc_parameterlist, ([desc_parameter, nodes.inline, "*"],
347.                                       [desc_parameter, desc_sig_name, "a"])])
348. 
349.     # case: separator in the middle
350.     text = ".. py:function:: hello(a, /, b, *, c)"
351.     doctree = restructuredtext.parse(app, text)
352.     assert_node(doctree[1][0][1],
353.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
354.                                       [desc_parameter, desc_sig_operator, "/"],
355.                                       [desc_parameter, desc_sig_name, "b"],
356.                                       [desc_parameter, desc_sig_operator, "*"],
357.                                       [desc_parameter, desc_sig_name, "c"])])
358. 
359.     # case: separator in the middle (2)
360.     text = ".. py:function:: hello(a, /, *, b)"
361.     doctree = restructuredtext.parse(app, text)
362.     assert_node(doctree[1][0][1],
363.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
364.                                       [desc_parameter, desc_sig_operator, "/"],
365.                                       [desc_parameter, desc_sig_operator, "*"],
366.                                       [desc_parameter, desc_sig_name, "b"])])
367. 
368.     # case: separator at tail
369.     text = ".. py:function:: hello(a, /)"
370.     doctree = restructuredtext.parse(app, text)
371.     assert_node(doctree[1][0][1],
372.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
373.                                       [desc_parameter, desc_sig_operator, "/"])])
374. 
375. 
376. def test_optional_pyfunction_signature(app):
377.     text = ".. py:function:: compile(source [, filename [, symbol]]) -> ast object"
378.     doctree = restructuredtext.parse(app, text)
379.     assert_node(doctree, (addnodes.index,
380.                           [desc, ([desc_signature, ([desc_name, "compile"],
381.                                                     desc_parameterlist,
382.                                                     [desc_returns, pending_xref, "ast object"])],
383.                                   desc_content)]))
384.     assert_node(doctree[1], addnodes.desc, desctype="function",
385.                 domain="py", objtype="function", noindex=False)
386.     assert_node(doctree[1][0][1],
387.                 ([desc_parameter, "source"],
388.                  [desc_optional, ([desc_parameter, "filename"],
389.                                   [desc_optional, desc_parameter, "symbol"])]))
390. 
391. 
392. def test_pyexception_signature(app):
393.     text = ".. py:exception:: exceptions.IOError"
394.     doctree = restructuredtext.parse(app, text)
395.     assert_node(doctree, (addnodes.index,
396.                           [desc, ([desc_signature, ([desc_annotation, "exception "],
397.                                                     [desc_addname, "exceptions."],
398.                                                     [desc_name, "IOError"])],
399.                                   desc_content)]))
400.     assert_node(doctree[1], desc, desctype="exception",
401.                 domain="py", objtype="exception", noindex=False)
402. 
403. 
404. def test_exceptions_module_is_ignored(app):
405.     text = (".. py:exception:: IOError\n"
406.             "   :module: exceptions\n")
407.     doctree = restructuredtext.parse(app, text)
408.     assert_node(doctree, (addnodes.index,
409.                           [desc, ([desc_signature, ([desc_annotation, "exception "],
410.                                                     [desc_name, "IOError"])],
411.                                   desc_content)]))
412.     assert_node(doctree[1], desc, desctype="exception",
413.                 domain="py", objtype="exception", noindex=False)
414. 
415. 
416. def test_pydata_signature(app):
417.     text = (".. py:data:: version\n"
418.             "   :type: int\n"
419.             "   :value: 1\n")
420.     doctree = restructuredtext.parse(app, text)
421.     assert_node(doctree, (addnodes.index,
422.                           [desc, ([desc_signature, ([desc_name, "version"],
423.                                                     [desc_annotation, (": ",
424.                                                                        [pending_xref, "int"])],
425.                                                     [desc_annotation, " = 1"])],
426.                                   desc_content)]))
427.     assert_node(doctree[1], addnodes.desc, desctype="data",
428.                 domain="py", objtype="data", noindex=False)
429. 
430. 
431. def test_pydata_signature_old(app):
432.     text = (".. py:data:: version\n"
433.             "   :annotation: = 1\n")
434.     doctree = restructuredtext.parse(app, text)
435.     assert_node(doctree, (addnodes.index,
436.                           [desc, ([desc_signature, ([desc_name, "version"],
437.                                                     [desc_annotation, " = 1"])],
438.                                   desc_content)]))
439.     assert_node(doctree[1], addnodes.desc, desctype="data",
440.                 domain="py", objtype="data", noindex=False)
441. 
442. 
443. def test_pyobject_prefix(app):
444.     text = (".. py:class:: Foo\n"
445.             "\n"
446.             "   .. py:method:: Foo.say\n"
447.             "   .. py:method:: FooBar.say")
448.     doctree = restructuredtext.parse(app, text)
449.     assert_node(doctree, (addnodes.index,
450.                           [desc, ([desc_signature, ([desc_annotation, "class "],
451.                                                     [desc_name, "Foo"])],
452.                                   [desc_content, (addnodes.index,
453.                                                   desc,
454.                                                   addnodes.index,
455.                                                   desc)])]))
456.     assert doctree[1][1][1].astext().strip() == 'say()'           # prefix is stripped
457.     assert doctree[1][1][3].astext().strip() == 'FooBar.say()'    # not stripped
458. 
459. 
460. def test_pydata(app):
461.     text = ".. py:data:: var\n"
462.     domain = app.env.get_domain('py')
463.     doctree = restructuredtext.parse(app, text)
464.     assert_node(doctree, (addnodes.index,
465.                           [desc, ([desc_signature, desc_name, "var"],
466.                                   [desc_content, ()])]))
467.     assert 'var' in domain.objects
468.     assert domain.objects['var'] == ('index', 'var', 'data')
469. 
470. 
471. def test_pyfunction(app):
472.     text = (".. py:function:: func1\n"
473.             ".. py:module:: example\n"
474.             ".. py:function:: func2\n"
475.             "   :async:\n")
476.     domain = app.env.get_domain('py')
477.     doctree = restructuredtext.parse(app, text)
478.     assert_node(doctree, (addnodes.index,
479.                           [desc, ([desc_signature, ([desc_name, "func1"],
480.                                                     [desc_parameterlist, ()])],
481.                                   [desc_content, ()])],
482.                           nodes.target,
483.                           addnodes.index,
484.                           addnodes.index,
485.                           [desc, ([desc_signature, ([desc_annotation, "async "],
486.                                                     [desc_addname, "example."],
487.                                                     [desc_name, "func2"],
488.                                                     [desc_parameterlist, ()])],
489.                                   [desc_content, ()])]))
490.     assert_node(doctree[0], addnodes.index,
491.                 entries=[('pair', 'built-in function; func1()', 'func1', '', None)])
492.     assert_node(doctree[3], addnodes.index,
493.                 entries=[('pair', 'module; example', 'module-example', '', None)])
494.     assert_node(doctree[4], addnodes.index,
495.                 entries=[('single', 'func2() (in module example)', 'example.func2', '', None)])
496. 
497.     assert 'func1' in domain.objects
498.     assert domain.objects['func1'] == ('index', 'func1', 'function')
499.     assert 'example.func2' in domain.objects
500.     assert domain.objects['example.func2'] == ('index', 'example.func2', 'function')


File: tests/test_util_inspect.py
Line number range: 1 - 500
Content:
1. """
2.     test_util_inspect
3.     ~~~~~~~~~~~~~~~
4. 
5.     Tests util.inspect functions.
6. 
7.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import _testcapi
12. import datetime
13. import functools
14. import sys
15. import types
16. from inspect import Parameter
17. 
18. import pytest
19. 
20. from sphinx.util import inspect
21. from sphinx.util.inspect import stringify_signature, is_builtin_class_method
22. 
23. 
24. def test_signature():
25.     # literals
26.     with pytest.raises(TypeError):
27.         inspect.signature(1)
28. 
29.     with pytest.raises(TypeError):
30.         inspect.signature('')
31. 
32.     # builtins are supported on a case-by-case basis, depending on whether
33.     # they define __text_signature__
34.     if getattr(list, '__text_signature__', None):
35.         sig = inspect.stringify_signature(inspect.signature(list))
36.         assert sig == '(iterable=(), /)'
37.     else:
38.         with pytest.raises(ValueError):
39.             inspect.signature(list)
40. 
41.     # normal function
42.     def func(a, b, c=1, d=2, *e, **f):
43.         pass
44. 
45.     sig = inspect.stringify_signature(inspect.signature(func))
46.     assert sig == '(a, b, c=1, d=2, *e, **f)'
47. 
48. 
49. def test_signature_partial():
50.     def fun(a, b, c=1, d=2):
51.         pass
52.     p = functools.partial(fun, 10, c=11)
53. 
54.     sig = inspect.signature(p)
55.     assert stringify_signature(sig) == '(b, *, c=11, d=2)'
56. 
57. 
58. def test_signature_methods():
59.     class Foo:
60.         def meth1(self, arg1, **kwargs):
61.             pass
62. 
63.         @classmethod
64.         def meth2(cls, arg1, *args, **kwargs):
65.             pass
66. 
67.         @staticmethod
68.         def meth3(arg1, *args, **kwargs):
69.             pass
70. 
71.     @functools.wraps(Foo().meth1)
72.     def wrapped_bound_method(*args, **kwargs):
73.         pass
74. 
75.     # unbound method
76.     sig = inspect.signature(Foo.meth1)
77.     assert stringify_signature(sig) == '(self, arg1, **kwargs)'
78. 
79.     sig = inspect.signature(Foo.meth1, bound_method=True)
80.     assert stringify_signature(sig) == '(arg1, **kwargs)'
81. 
82.     # bound method
83.     sig = inspect.signature(Foo().meth1)
84.     assert stringify_signature(sig) == '(arg1, **kwargs)'
85. 
86.     # class method
87.     sig = inspect.signature(Foo.meth2)
88.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
89. 
90.     sig = inspect.signature(Foo().meth2)
91.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
92. 
93.     # static method
94.     sig = inspect.signature(Foo.meth3)
95.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
96. 
97.     sig = inspect.signature(Foo().meth3)
98.     assert stringify_signature(sig) == '(arg1, *args, **kwargs)'
99. 
100.     # wrapped bound method
101.     sig = inspect.signature(wrapped_bound_method)
102.     assert stringify_signature(sig) == '(*args, **kwargs)'
103. 
104. 
105. def test_signature_partialmethod():
106.     from functools import partialmethod
107. 
108.     class Foo:
109.         def meth1(self, arg1, arg2, arg3=None, arg4=None):
110.             pass
111. 
112.         def meth2(self, arg1, arg2):
113.             pass
114. 
115.         foo = partialmethod(meth1, 1, 2)
116.         bar = partialmethod(meth1, 1, arg3=3)
117.         baz = partialmethod(meth2, 1, 2)
118. 
119.     subject = Foo()
120.     sig = inspect.signature(subject.foo)
121.     assert stringify_signature(sig) == '(arg3=None, arg4=None)'
122. 
123.     sig = inspect.signature(subject.bar)
124.     assert stringify_signature(sig) == '(arg2, *, arg3=3, arg4=None)'
125. 
126.     sig = inspect.signature(subject.baz)
127.     assert stringify_signature(sig) == '()'
128. 
129. 
130. def test_signature_annotations():
131.     from typing_test_data import (f0, f1, f2, f3, f4, f5, f6, f7, f8, f9, f10,
132.                                   f11, f12, f13, f14, f15, f16, f17, f18, f19, f20, Node)
133. 
134.     # Class annotations
135.     sig = inspect.signature(f0)
136.     assert stringify_signature(sig) == '(x: int, y: numbers.Integral) -> None'
137. 
138.     # Generic types with concrete parameters
139.     sig = inspect.signature(f1)
140.     assert stringify_signature(sig) == '(x: List[int]) -> List[int]'
141. 
142.     # TypeVars and generic types with TypeVars
143.     sig = inspect.signature(f2)
144.     assert stringify_signature(sig) == '(x: List[T], y: List[T_co], z: T) -> List[T_contra]'
145. 
146.     # Union types
147.     sig = inspect.signature(f3)
148.     assert stringify_signature(sig) == '(x: Union[str, numbers.Integral]) -> None'
149. 
150.     # Quoted annotations
151.     sig = inspect.signature(f4)
152.     assert stringify_signature(sig) == '(x: str, y: str) -> None'
153. 
154.     # Keyword-only arguments
155.     sig = inspect.signature(f5)
156.     assert stringify_signature(sig) == '(x: int, *, y: str, z: str) -> None'
157. 
158.     # Keyword-only arguments with varargs
159.     sig = inspect.signature(f6)
160.     assert stringify_signature(sig) == '(x: int, *args, y: str, z: str) -> None'
161. 
162.     # Space around '=' for defaults
163.     sig = inspect.signature(f7)
164.     assert stringify_signature(sig) == '(x: int = None, y: dict = {}) -> None'
165. 
166.     # Callable types
167.     sig = inspect.signature(f8)
168.     assert stringify_signature(sig) == '(x: Callable[[int, str], int]) -> None'
169. 
170.     sig = inspect.signature(f9)
171.     assert stringify_signature(sig) == '(x: Callable) -> None'
172. 
173.     # Tuple types
174.     sig = inspect.signature(f10)
175.     assert stringify_signature(sig) == '(x: Tuple[int, str], y: Tuple[int, ...]) -> None'
176. 
177.     # Instance annotations
178.     sig = inspect.signature(f11)
179.     assert stringify_signature(sig) == '(x: CustomAnnotation, y: 123) -> None'
180. 
181.     # tuple with more than two items
182.     sig = inspect.signature(f12)
183.     assert stringify_signature(sig) == '() -> Tuple[int, str, int]'
184. 
185.     # optional
186.     sig = inspect.signature(f13)
187.     assert stringify_signature(sig) == '() -> Optional[str]'
188. 
189.     # optional union
190.     sig = inspect.signature(f20)
191.     assert stringify_signature(sig) == '() -> Optional[Union[int, str]]'
192. 
193.     # Any
194.     sig = inspect.signature(f14)
195.     assert stringify_signature(sig) == '() -> Any'
196. 
197.     # ForwardRef
198.     sig = inspect.signature(f15)
199.     assert stringify_signature(sig) == '(x: Unknown, y: int) -> Any'
200. 
201.     # keyword only arguments (1)
202.     sig = inspect.signature(f16)
203.     assert stringify_signature(sig) == '(arg1, arg2, *, arg3=None, arg4=None)'
204. 
205.     # keyword only arguments (2)
206.     sig = inspect.signature(f17)
207.     assert stringify_signature(sig) == '(*, arg3, arg4)'
208. 
209.     sig = inspect.signature(f18)
210.     assert stringify_signature(sig) == '(self, arg1: Union[int, Tuple] = 10) -> List[Dict]'
211. 
212.     # annotations for variadic and keyword parameters
213.     sig = inspect.signature(f19)
214.     assert stringify_signature(sig) == '(*args: int, **kwargs: str)'
215. 
216.     # type hints by string
217.     sig = inspect.signature(Node.children)
218.     if (3, 5, 0) <= sys.version_info < (3, 5, 3):
219.         assert stringify_signature(sig) == '(self) -> List[Node]'
220.     else:
221.         assert stringify_signature(sig) == '(self) -> List[typing_test_data.Node]'
222. 
223.     sig = inspect.signature(Node.__init__)
224.     assert stringify_signature(sig) == '(self, parent: Optional[Node]) -> None'
225. 
226.     # show_annotation is False
227.     sig = inspect.signature(f7)
228.     assert stringify_signature(sig, show_annotation=False) == '(x=None, y={})'
229. 
230.     # show_return_annotation is False
231.     sig = inspect.signature(f7)
232.     assert stringify_signature(sig, show_return_annotation=False) == '(x: int = None, y: dict = {})'
233. 
234. 
235. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
236. @pytest.mark.sphinx(testroot='ext-autodoc')
237. def test_signature_annotations_py38(app):
238.     from target.pep570 import foo, bar, baz, qux
239. 
240.     # case: separator at head
241.     sig = inspect.signature(foo)
242.     assert stringify_signature(sig) == '(*, a, b)'
243. 
244.     # case: separator in the middle
245.     sig = inspect.signature(bar)
246.     assert stringify_signature(sig) == '(a, b, /, c, d)'
247. 
248.     sig = inspect.signature(baz)
249.     assert stringify_signature(sig) == '(a, /, *, b)'
250. 
251.     # case: separator at tail
252.     sig = inspect.signature(qux)
253.     assert stringify_signature(sig) == '(a, b, /)'
254. 
255. 
256. def test_signature_from_str_basic():
257.     signature = '(a, b, *args, c=0, d="blah", **kwargs)'
258.     sig = inspect.signature_from_str(signature)
259.     assert list(sig.parameters.keys()) == ['a', 'b', 'args', 'c', 'd', 'kwargs']
260.     assert sig.parameters['a'].name == 'a'
261.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_OR_KEYWORD
262.     assert sig.parameters['a'].default == Parameter.empty
263.     assert sig.parameters['a'].annotation == Parameter.empty
264.     assert sig.parameters['b'].name == 'b'
265.     assert sig.parameters['b'].kind == Parameter.POSITIONAL_OR_KEYWORD
266.     assert sig.parameters['b'].default == Parameter.empty
267.     assert sig.parameters['b'].annotation == Parameter.empty
268.     assert sig.parameters['args'].name == 'args'
269.     assert sig.parameters['args'].kind == Parameter.VAR_POSITIONAL
270.     assert sig.parameters['args'].default == Parameter.empty
271.     assert sig.parameters['args'].annotation == Parameter.empty
272.     assert sig.parameters['c'].name == 'c'
273.     assert sig.parameters['c'].kind == Parameter.KEYWORD_ONLY
274.     assert sig.parameters['c'].default == '0'
275.     assert sig.parameters['c'].annotation == Parameter.empty
276.     assert sig.parameters['d'].name == 'd'
277.     assert sig.parameters['d'].kind == Parameter.KEYWORD_ONLY
278.     assert sig.parameters['d'].default == "'blah'"
279.     assert sig.parameters['d'].annotation == Parameter.empty
280.     assert sig.parameters['kwargs'].name == 'kwargs'
281.     assert sig.parameters['kwargs'].kind == Parameter.VAR_KEYWORD
282.     assert sig.parameters['kwargs'].default == Parameter.empty
283.     assert sig.parameters['kwargs'].annotation == Parameter.empty
284.     assert sig.return_annotation == Parameter.empty
285. 
286. 
287. def test_signature_from_str_default_values():
288.     signature = ('(a=0, b=0.0, c="str", d=b"bytes", e=..., f=True, '
289.                  'g=[1, 2, 3], h={"a": 1}, i={1, 2, 3}, '
290.                  'j=lambda x, y: None, k=None, l=object(), m=foo.bar.CONSTANT)')
291.     sig = inspect.signature_from_str(signature)
292.     assert sig.parameters['a'].default == '0'
293.     assert sig.parameters['b'].default == '0.0'
294.     assert sig.parameters['c'].default == "'str'"
295.     assert sig.parameters['d'].default == "b'bytes'"
296.     assert sig.parameters['e'].default == '...'
297.     assert sig.parameters['f'].default == 'True'
298.     assert sig.parameters['g'].default == '[1, 2, 3]'
299.     assert sig.parameters['h'].default == "{'a': 1}"
300.     assert sig.parameters['i'].default == '{1, 2, 3}'
301.     assert sig.parameters['j'].default == 'lambda x, y: ...'
302.     assert sig.parameters['k'].default == 'None'
303.     assert sig.parameters['l'].default == 'object()'
304.     assert sig.parameters['m'].default == 'foo.bar.CONSTANT'
305. 
306. 
307. def test_signature_from_str_annotations():
308.     signature = '(a: int, *args: bytes, b: str = "blah", **kwargs: float) -> None'
309.     sig = inspect.signature_from_str(signature)
310.     assert list(sig.parameters.keys()) == ['a', 'args', 'b', 'kwargs']
311.     assert sig.parameters['a'].annotation == "int"
312.     assert sig.parameters['args'].annotation == "bytes"
313.     assert sig.parameters['b'].annotation == "str"
314.     assert sig.parameters['kwargs'].annotation == "float"
315.     assert sig.return_annotation == 'None'
316. 
317. 
318. def test_signature_from_str_complex_annotations():
319.     sig = inspect.signature_from_str('() -> Tuple[str, int, ...]')
320.     assert sig.return_annotation == 'Tuple[str, int, ...]'
321. 
322.     sig = inspect.signature_from_str('() -> Callable[[int, int], int]')
323.     assert sig.return_annotation == 'Callable[[int, int], int]'
324. 
325. 
326. def test_signature_from_str_kwonly_args():
327.     sig = inspect.signature_from_str('(a, *, b)')
328.     assert list(sig.parameters.keys()) == ['a', 'b']
329.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_OR_KEYWORD
330.     assert sig.parameters['a'].default == Parameter.empty
331.     assert sig.parameters['b'].kind == Parameter.KEYWORD_ONLY
332.     assert sig.parameters['b'].default == Parameter.empty
333. 
334. 
335. @pytest.mark.skipif(sys.version_info < (3, 8),
336.                     reason='python-3.8 or above is required')
337. def test_signature_from_str_positionaly_only_args():
338.     sig = inspect.signature_from_str('(a, /, b)')
339.     assert list(sig.parameters.keys()) == ['a', 'b']
340.     assert sig.parameters['a'].kind == Parameter.POSITIONAL_ONLY
341.     assert sig.parameters['b'].kind == Parameter.POSITIONAL_OR_KEYWORD
342. 
343. 
344. def test_signature_from_str_invalid():
345.     with pytest.raises(SyntaxError):
346.         inspect.signature_from_str('')
347. 
348. 
349. def test_safe_getattr_with_default():
350.     class Foo:
351.         def __getattr__(self, item):
352.             raise Exception
353. 
354.     obj = Foo()
355. 
356.     result = inspect.safe_getattr(obj, 'bar', 'baz')
357. 
358.     assert result == 'baz'
359. 
360. 
361. def test_safe_getattr_with_exception():
362.     class Foo:
363.         def __getattr__(self, item):
364.             raise Exception
365. 
366.     obj = Foo()
367. 
368.     try:
369.         inspect.safe_getattr(obj, 'bar')
370.     except AttributeError as exc:
371.         assert exc.args[0] == 'bar'
372.     else:
373.         pytest.fail('AttributeError not raised')
374. 
375. 
376. def test_safe_getattr_with_property_exception():
377.     class Foo:
378.         @property
379.         def bar(self):
380.             raise Exception
381. 
382.     obj = Foo()
383. 
384.     try:
385.         inspect.safe_getattr(obj, 'bar')
386.     except AttributeError as exc:
387.         assert exc.args[0] == 'bar'
388.     else:
389.         pytest.fail('AttributeError not raised')
390. 
391. 
392. def test_safe_getattr_with___dict___override():
393.     class Foo:
394.         @property
395.         def __dict__(self):
396.             raise Exception
397. 
398.     obj = Foo()
399. 
400.     try:
401.         inspect.safe_getattr(obj, 'bar')
402.     except AttributeError as exc:
403.         assert exc.args[0] == 'bar'
404.     else:
405.         pytest.fail('AttributeError not raised')
406. 
407. 
408. def test_dictionary_sorting():
409.     dictionary = {"c": 3, "a": 1, "d": 2, "b": 4}
410.     description = inspect.object_description(dictionary)
411.     assert description == "{'a': 1, 'b': 4, 'c': 3, 'd': 2}"
412. 
413. 
414. def test_set_sorting():
415.     set_ = set("gfedcba")
416.     description = inspect.object_description(set_)
417.     assert description == "{'a', 'b', 'c', 'd', 'e', 'f', 'g'}"
418. 
419. 
420. def test_set_sorting_fallback():
421.     set_ = {None, 1}
422.     description = inspect.object_description(set_)
423.     assert description in ("{1, None}", "{None, 1}")
424. 
425. 
426. def test_frozenset_sorting():
427.     frozenset_ = frozenset("gfedcba")
428.     description = inspect.object_description(frozenset_)
429.     assert description == "frozenset({'a', 'b', 'c', 'd', 'e', 'f', 'g'})"
430. 
431. 
432. def test_frozenset_sorting_fallback():
433.     frozenset_ = frozenset((None, 1))
434.     description = inspect.object_description(frozenset_)
435.     assert description in ("frozenset({1, None})", "frozenset({None, 1})")
436. 
437. 
438. def test_dict_customtype():
439.     class CustomType:
440.         def __init__(self, value):
441.             self._value = value
442. 
443.         def __repr__(self):
444.             return "<CustomType(%r)>" % self._value
445. 
446.     dictionary = {CustomType(2): 2, CustomType(1): 1}
447.     description = inspect.object_description(dictionary)
448.     # Type is unsortable, just check that it does not crash
449.     assert "<CustomType(2)>: 2" in description
450. 
451. 
452. @pytest.mark.sphinx(testroot='ext-autodoc')
453. def test_isclassmethod(app):
454.     from target.methods import Base, Inherited
455. 
456.     assert inspect.isclassmethod(Base.classmeth) is True
457.     assert inspect.isclassmethod(Base.meth) is False
458.     assert inspect.isclassmethod(Inherited.classmeth) is True
459.     assert inspect.isclassmethod(Inherited.meth) is False
460. 
461. 
462. @pytest.mark.sphinx(testroot='ext-autodoc')
463. def test_isstaticmethod(app):
464.     from target.methods import Base, Inherited
465. 
466.     assert inspect.isstaticmethod(Base.staticmeth, Base, 'staticmeth') is True
467.     assert inspect.isstaticmethod(Base.meth, Base, 'meth') is False
468.     assert inspect.isstaticmethod(Inherited.staticmeth, Inherited, 'staticmeth') is True
469.     assert inspect.isstaticmethod(Inherited.meth, Inherited, 'meth') is False
470. 
471. 
472. @pytest.mark.sphinx(testroot='ext-autodoc')
473. def test_iscoroutinefunction(app):
474.     from target.functions import coroutinefunc, func, partial_coroutinefunc
475.     from target.methods import Base
476. 
477.     assert inspect.iscoroutinefunction(func) is False                   # function
478.     assert inspect.iscoroutinefunction(coroutinefunc) is True           # coroutine
479.     assert inspect.iscoroutinefunction(partial_coroutinefunc) is True   # partial-ed coroutine
480.     assert inspect.iscoroutinefunction(Base.meth) is False              # method
481.     assert inspect.iscoroutinefunction(Base.coroutinemeth) is True      # coroutine-method
482. 
483.     # partial-ed coroutine-method
484.     partial_coroutinemeth = Base.__dict__['partial_coroutinemeth']
485.     assert inspect.iscoroutinefunction(partial_coroutinemeth) is True
486. 
487. 
488. @pytest.mark.sphinx(testroot='ext-autodoc')
489. def test_isfunction(app):
490.     from target.functions import builtin_func, partial_builtin_func
491.     from target.functions import func, partial_func
492.     from target.methods import Base
493. 
494.     assert inspect.isfunction(func) is True                     # function
495.     assert inspect.isfunction(partial_func) is True             # partial-ed function
496.     assert inspect.isfunction(Base.meth) is True                # method of class
497.     assert inspect.isfunction(Base.partialmeth) is True         # partial-ed method of class
498.     assert inspect.isfunction(Base().meth) is False             # method of instance
499.     assert inspect.isfunction(builtin_func) is False            # builtin function
500.     assert inspect.isfunction(partial_builtin_func) is False    # partial-ed builtin function

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 03:25:17,754 - thread-133140361246400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find 3 relevant test cases for a bug concerning default values of positional-only arguments in `py:function` directives. The provided context contains the full content of `tests/test_domain_py.py` and `tests/test_util_inspect.py`. `tests/test_domain_py.py` contains tests for the `py:function` directive, including tests for positional-only arguments. `tests/test_util_inspect.py` contains tests for `signature_from_str`, which is the function modified in the provided patch. This context is sufficient to select three test cases that are relevant to the bug, covering both the user-facing feature and the patched code. I can identify tests for positional-only arguments, tests for default values, and tests for the `py:function` directive. The necessary imports and test setup are included in the provided file contents. Therefore, no additional context is required.' query='' extra_requirements='' purpose=''
2025-12-23 03:25:17,755 - thread-133140361246400.prometheus_context_collector - INFO - Successfully retrieved 2 context snippets
