2025-12-21 09:13:38,074 - thread-126046194108096.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Using symbols to create functions doesn't work if there is an extra layer of parentheses

Description: Sympy version == 1.10.1

Using `symbols` to create symbol-like objects like instances of `Function` as shown in the [documentation](https://docs.sympy.org/latest/modules/core.html?highlight=symbols#symbols) creates objects of class `Symbol` instead of `Function` if there is an extra layer of parentheses.

The extra layer of parentheses are necessary to deconstruct the output as separate tuples.

Running the code:
```
q, u = smp.symbols(('q:2', 'u:2'), cls=smp.Function)
print(type(q[0]))
```
#### Expected result:
<class 'sympy.core.function.UndefinedFunction'>

#### Actual result: 
<class 'sympy.core.symbol.Symbol'>

Patch information:
diff --git a/sympy/core/symbol.py b/sympy/core/symbol.py
index f4a555c13f..2aca8bab27 100644
--- a/sympy/core/symbol.py
+++ b/sympy/core/symbol.py
@@ -791,7 +791,7 @@ def literal(s):
         return tuple(result)
     else:
         for name in names:
-            result.append(symbols(name, **args))
+            result.append(symbols(name, cls=cls, **args))
 
         return type(names)(result)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-21 09:13:38,166 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .circleci
|   └── config.yml
├── .github
|   └── workflows
|       ├── ci-sage.yml
|       ├── comment-on-pr.yml
|       ├── docs-preview.yml
|       ├── release.yml
|       └── runtests.yml
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.md
├── bin
|   ├── ask_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_check.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_optional_dependencies.py
|   ├── test_py2_import.py
|   ├── test_setup.py
|   ├── test_sphinx.sh
|   ├── test_submodule_imports.py
|   ├── test_symengine.py
|   ├── test_tensorflow.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── aptinstall.sh
|   ├── cheatsheet
|   ├── convert-svg-to-pdf.sh
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   └── numpydoc.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   ├── requirements.txt
|   └── src
|       ├── _pygments
|       |   └── styles.py
|       ├── _static
|       |   └── custom.css
|       ├── _templates
|       |   └── sidebar
|       |       └── versions.html
|       ├── citing.md
|       ├── conf.py
|       ├── explanation
|       |   ├── active-deprecations.md
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   └── special_topics
|       |       ├── classification.rst
|       |       ├── finite_diff_derivatives.rst
|       |       └── index.rst
|       ├── guides
|       |   ├── assumptions.rst
|       |   ├── booleans.rst
|       |   ├── contributing
|       |   |   ├── build-docs.rst
|       |   |   ├── debug.rst
|       |   |   ├── dependencies.md
|       |   |   ├── deprecations.md
|       |   |   ├── dev-setup.rst
|       |   |   ├── docstring.rst
|       |   |   ├── documentation-style-guide.rst
|       |   |   ├── index.rst
|       |   |   └── make-a-contribution.rst
|       |   ├── getting_started
|       |   |   ├── index.rst
|       |   |   └── install.md
|       |   └── index.rst
|       ├── index.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── index.rst
|       |   |   ├── predicates.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── group_numbers.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   ├── index.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── normalforms.rst
|       |   |   ├── sparse.rst
|       |   |   └── sparsetools.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── control
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── domainmatrix.rst
|       |   |   ├── domainsintro.rst
|       |   |   ├── domainsref.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── numberfields.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   ├── solvers.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── fu.rst
|       |   |   ├── hyperexpand.rst
|       |   |   ├── index.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── index.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── array_expressions.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   ├── tensor.rst
|       |   |   └── toperators.rst
|       |   ├── testing
|       |   |   ├── index.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   └── runtests.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── exceptions.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       ├── intro.rst
|       |       └── vector_integration.rst
|       ├── pics
|       ├── reference
|       |   ├── index.rst
|       |   └── public
|       |       ├── basics
|       |       ├── codegeneration
|       |       ├── logic
|       |       ├── matrices
|       |       ├── numbertheory
|       |       ├── physics
|       |       ├── topics
|       |       └── utilities
|       └── tutorial
|           ├── basic_operations.rst
|           ├── calculus.rst
|           ├── features.rst
|           ├── gotchas.rst
|           ├── index.rst
|           ├── intro.rst
|           ├── manipulation.rst
|           ├── matrices.rst
|           ├── next.rst
|           ├── preliminaries.rst
|           ├── printing.rst
|           ├── simplification.rst
|           └── solvers.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── aptinstall.sh
|   ├── authors.py
|   ├── build_docs.py
|   ├── ci_release_script.sh
|   ├── compare_tar_against_git.py
|   ├── fabfile.py
|   ├── github_release.py
|   ├── helpers.py
|   ├── pull_and_run_rever.sh
|   ├── release.sh
|   ├── releasecheck.py
|   ├── requirements.txt
|   ├── sha256.py
|   ├── test_install.py
|   ├── update_docs.py
|   └── update_requirements.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── facts.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── predicates
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── relation
    |   |   ├── __init__.py
    |   |   ├── binrel.py
    |   |   └── equality.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_assumptions_2.py
    |   |   ├── test_context.py
    |   |   ├── test_matrices.py
    |   |   ├── test_query.py
    |   |   ├── test_refine.py
    |   |   ├── test_satask.py
    |   |   ├── test_sathandlers.py
    |   |   └── test_wrapper.py
    |   └── wrapper.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── accumulationbounds.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_accumulationbounds.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── abstract_nodes.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── numpy_nodes.py
    |   ├── pynodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   ├── scipy_nodes.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_abstract_nodes.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_numpy_nodes.py
    |       ├── test_pynodes.py
    |       ├── test_pyutils.py
    |       ├── test_rewriting.py
    |       └── test_scipy_nodes.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── group_numbers.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── schur_number.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_group_numbers.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_schur_number.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── _print_helpers.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── kind.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── parameters.py
    |   ├── power.py
    |   ├── random.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── sorting.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_kind.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_parameters.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_random.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_sorting.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_traversal.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   ├── trace.py
    |   └── traversal.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── gmpy.py
    |   ├── importtools.py
    |   ├── pythonmpq.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_pythonmpq.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── printing.py
    |   ├── session.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_interactive.py
    |   |   └── test_ipython.py
    |   └── traversal.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   ├── minisat22_wrapper.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── decompositions.py
    |   ├── dense.py
    |   ├── determinant.py
    |   ├── eigen.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── companion.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── permutation.py
    |   |   ├── sets.py
    |   |   ├── slice.py
    |   |   ├── special.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_companion.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_permutation.py
    |   |   |   ├── test_sets.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_special.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── graph.py
    |   ├── immutable.py
    |   ├── inverse.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── reductions.py
    |   ├── repmatrix.py
    |   ├── solvers.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   ├── subspaces.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_commonmatrix.py
    |   |   ├── test_decompositions.py
    |   |   ├── test_determinant.py
    |   |   ├── test_eigen.py
    |   |   ├── test_graph.py
    |   |   ├── test_immutable.py
    |   |   ├── test_interactions.py
    |   |   ├── test_matrices.py
    |   |   ├── test_normalforms.py
    |   |   ├── test_reductions.py
    |   |   ├── test_solvers.py
    |   |   ├── test_sparse.py
    |   |   ├── test_sparsetools.py
    |   |   └── test_subspaces.py
    |   └── utilities.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── digits.py
    |   ├── ecm.py
    |   ├── egyptian_fraction.py
    |   ├── elliptic_curve.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── qs.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_digits.py
    |       ├── test_ecm.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_elliptic_curve.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       ├── test_qs.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── README.txt
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_ast_parser.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── control
    |   |   ├── __init__.py
    |   |   ├── control_plots.py
    |   |   ├── lti.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_control_plots.py
    |   |       └── test_lti.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── joint.py
    |   |   ├── jointsmethod.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── method.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_joint.py
    |   |       ├── test_jointsmethod.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_method.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_anticommutator.py
    |   |   |   ├── test_boson.py
    |   |   |   ├── test_cartesian.py
    |   |   |   ├── test_cg.py
    |   |   |   ├── test_circuitplot.py
    |   |   |   ├── test_circuitutils.py
    |   |   |   ├── test_commutator.py
    |   |   |   ├── test_constants.py
    |   |   |   ├── test_dagger.py
    |   |   |   ├── test_density.py
    |   |   |   ├── test_fermion.py
    |   |   |   ├── test_gate.py
    |   |   |   ├── test_grover.py
    |   |   |   ├── test_hilbert.py
    |   |   |   ├── test_identitysearch.py
    |   |   |   ├── test_innerproduct.py
    |   |   |   ├── test_matrixutils.py
    |   |   |   ├── test_operator.py
    |   |   |   ├── test_operatorordering.py
    |   |   |   ├── test_operatorset.py
    |   |   |   ├── test_pauli.py
    |   |   |   ├── test_piab.py
    |   |   |   ├── test_printing.py
    |   |   |   ├── test_qapply.py
    |   |   |   ├── test_qasm.py
    |   |   |   ├── test_qexpr.py
    |   |   |   ├── test_qft.py
    |   |   |   ├── test_qubit.py
    |   |   |   ├── test_represent.py
    |   |   |   ├── test_sho1d.py
    |   |   |   ├── test_shor.py
    |   |   |   ├── test_spin.py
    |   |   |   ├── test_state.py
    |   |   |   ├── test_tensorproduct.py
    |   |   |   └── test_trace.py
    |   |   └── trace.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domainmatrix.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── expressionrawdomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gaussiandomains.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── matrices
    |   |   ├── __init__.py
    |   |   ├── ddm.py
    |   |   ├── dense.py
    |   |   ├── domainmatrix.py
    |   |   ├── domainscalar.py
    |   |   ├── eigen.py
    |   |   ├── exceptions.py
    |   |   ├── linsolve.py
    |   |   ├── normalforms.py
    |   |   ├── sdm.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_ddm.py
    |   |       ├── test_dense.py
    |   |       ├── test_domainmatrix.py
    |   |       ├── test_domainscalar.py
    |   |       ├── test_eigen.py
    |   |       ├── test_linsolve.py
    |   |       ├── test_normalforms.py
    |   |       └── test_sdm.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields
    |   |   ├── __init__.py
    |   |   ├── basis.py
    |   |   ├── exceptions.py
    |   |   ├── minpoly.py
    |   |   ├── modules.py
    |   |   ├── primes.py
    |   |   ├── subfield.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_basis.py
    |   |   |   ├── test_minpoly.py
    |   |   |   ├── test_modules.py
    |   |   |   ├── test_numbers.py
    |   |   |   ├── test_primes.py
    |   |   |   ├── test_subfield.py
    |   |   |   └── test_utilities.py
    |   |   └── utilities.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── aesaracode.py
    |   ├── c.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxx.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── fortran.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── numpy.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_aesaracode.py
    |   |   ├── test_c.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cupy.py
    |   |   ├── test_cxx.py
    |   |   ├── test_dot.py
    |   |   ├── test_fortran.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── comparison.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── issubset.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine
    |   |   ├── __init__.py
    |   |   ├── diophantine.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_diophantine.py
    |   ├── inequalities.py
    |   ├── ode
    |   |   ├── __init__.py
    |   |   ├── hypergeometric.py
    |   |   ├── lie_group.py
    |   |   ├── nonhomogeneous.py
    |   |   ├── ode.py
    |   |   ├── riccati.py
    |   |   ├── single.py
    |   |   ├── subscheck.py
    |   |   ├── systems.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_lie_group.py
    |   |       ├── test_ode.py
    |   |       ├── test_riccati.py
    |   |       ├── test_single.py
    |   |       ├── test_subscheck.py
    |   |       └── test_systems.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── compound_rv.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── matrix_distributions.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── sampling
    |   |   ├── __init__.py
    |   |   ├── sample_numpy.py
    |   |   ├── sample_pymc3.py
    |   |   ├── sample_scipy.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_sample_continuous_rv.py
    |   |       ├── test_sample_discrete_rv.py
    |   |       └── test_sample_finite_rv.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_multivariate_probability.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_compound_rv.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_matrix_distributions.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       ├── test_symbolic_multivariate.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── array_derivatives.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── expressions
    |   |   |   ├── __init__.py
    |   |   |   ├── array_expressions.py
    |   |   |   ├── arrayexpr_derivatives.py
    |   |   |   ├── conv_array_to_indexed.py
    |   |   |   ├── conv_array_to_matrix.py
    |   |   |   ├── conv_indexed_to_array.py
    |   |   |   ├── conv_matrix_to_array.py
    |   |   |   ├── tests
    |   |   |   └── utils.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_array_derivatives.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── testing
    |   ├── __init__.py
    |   ├── benchmarking.py
    |   ├── matrices.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_module_imports.py
    |   |   └── test_pytest.py
    |   └── tmpfiles.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_matchpy_connector.py
    |   |   ├── test_misc.py
    |   |   ├── test_pickling.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── implicitregion.py
        ├── integrals.py
        ├── operators.py
        ├── orienters.py
        ├── parametricregion.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_implicitregion.py
        |   ├── test_integrals.py
        |   ├── test_operators.py
        |   ├── test_parametricregion.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Using symbols to create functions doesn't work if there is an extra layer of parentheses

Description: Sympy version == 1.10.1

Using `symbols` to create symbol-like objects like instances of `Function` as shown in the [documentation](https://docs.sympy.org/latest/modules/core.html?highlight=symbols#symbols) creates objects of class `Symbol` instead of `Function` if there is an extra layer of parentheses.

The extra layer of parentheses are necessary to deconstruct the output as separate tuples.

Running the code:
```
q, u = smp.symbols(('q:2', 'u:2'), cls=smp.Function)
print(type(q[0]))
```
#### Expected result:
<class 'sympy.core.function.UndefinedFunction'>

#### Actual result: 
<class 'sympy.core.symbol.Symbol'>

Patch information:
diff --git a/sympy/core/symbol.py b/sympy/core/symbol.py
index f4a555c13f..2aca8bab27 100644
--- a/sympy/core/symbol.py
+++ b/sympy/core/symbol.py
@@ -791,7 +791,7 @@ def literal(s):
         return tuple(result)
     else:
         for name in names:
-            result.append(symbols(name, **args))
+            result.append(symbols(name, cls=cls, **args))
 
         return type(names)(result)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 09:13:44,851 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user is reporting a bug in the `symbols` function located in `sympy/core/symbol.py`. To find relevant test cases, I need to examine the tests for this function. The most likely place to find these tests is in the corresponding test file, `sympy/core/tests/test_symbol.py`. This file should contain tests for various arguments and behaviors of the `symbols` function, including the `cls` parameter and the handling of tuple inputs, which are central to the reported bug.' query='Please provide the full content of the file sympy/core/tests/test_symbol.py.' extra_requirements='' purpose='I need to find existing test cases that cover the functionality of creating symbols with a specific class, which will help in identifying tests that are relevant to the bug report.'
2025-12-21 09:13:44,852 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file sympy/core/tests/test_symbol.py.
2025-12-21 09:13:44,852 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 09:13:44,853 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 09:13:44,853 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 09:13:44,854 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file sympy/core/tests/test_symbol.py.
Purpose: I need to find existing test cases that cover the functionality of creating symbols with a specific class, which will help in identifying tests that are relevant to the bug report.
2025-12-21 09:13:46,913 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/core/tests/test_symbol.py"}'}, '__gemini_function_call_thought_signatures__': {'c1e053b4-7725-4062-810d-41e5a6b9a916': 'CtwDAY89a1/+UNtxilEFsIH8b6suC3bIeY7+npA5ioquQCNtq6HNEWfGtbkIzXCaIpK7kDQlA3kE+NkB4tScC8+pf2L8XdgHVlm/FIDANe1fVq6jSkOwucHBHDwcIy+FBszZuk5aHtUtrS5cC0adVpN3vO1dw9kGa1JD7BgpVvkPk9OZtwnKBst68qdt2lmBwVqBSFCR0C2gM5bpGJiCOn2ccLdZ1+rdOoVh7Gwzgj2bPSNkX4gCZ6TdJ3lkUNeIP75oHgxIWMkMaYsIj3CGtZCV8vXLWXD/XDlz0lIk87zumlmkCj6sBy31D2Gt97i5oPm3Bq9cRuxRjWg6vfPfi6AOjGvgZ6pbjD0yGDkTp89kcCjQHitMjzQH3MUKwlyT5ux4A1GmrrmIEWO3j9sZBE6EPtxqqUxF8kMH1q9tGQrTPH/W0ChMY5TqwqfVla0YZZ0nJHkgPnuMd0Z/oxwp8g5B8DaxjFgMPzqampG7y07O9Kg8riiNoQchKC1dPH0ahGiQ/+WAnz+PPEDy9H3B4xojucXDcxGyThWE24nRd7/3ZMTaMh9/Th6GZr70awmQdvjfPi9QFGMbiurvhmFHZ2R8eOI767H40TLKeHem8rIxDYIIjbKYZU6SPZjlI1U='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2125, 'candidates_token_count': 25, 'total_token_count': 2274, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2125}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 25}], 'thoughts_token_count': 124, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.17963754653930664, 'model_name': 'gemini-2.5-pro'} id='run--f58b6533-efe3-4974-a4cf-450203b0dd96-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/core/tests/test_symbol.py'}, 'id': 'c1e053b4-7725-4062-810d-41e5a6b9a916', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2125, 'output_tokens': 25, 'total_tokens': 2274, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 124}}
2025-12-21 09:13:48,717 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the full content of the file `sympy/core/tests/test_symbol.py` as you requested. This will allow you to examine the existing test cases for symbol creation. I am now ready for your next query.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9428, 'candidates_token_count': 50, 'total_token_count': 9523, 'cached_content_token_count': 1851, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9552}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1851}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 50}], 'thoughts_token_count': 45}, 'finish_reason': 'STOP', 'avg_logprobs': -0.14670214653015137, 'model_name': 'gemini-2.5-pro'} id='run--5f34e9d7-e188-4c2f-8c6e-434c3ce2a15b-0' usage_metadata={'input_tokens': 9428, 'output_tokens': 50, 'total_tokens': 9523, 'input_token_details': {'cache_read': 1851}, 'output_token_details': {'reasoning': 45}}
2025-12-21 09:13:48,719 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file sympy/core/tests/test_symbol.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find existing test cases that cover the functionality of creating symbols with a specific class, which will help in identifying tests that are relevant to the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/core/tests/test_symbol.py
Line number range: 1 - 391
Content:
1. from sympy.core.numbers import (I, Rational, pi)
2. from sympy.core.relational import (GreaterThan, LessThan, StrictGreaterThan, StrictLessThan)
3. from sympy.core.symbol import (Dummy, Symbol, Wild, symbols)
4. from sympy.core.sympify import sympify  # can't import as S yet
5. from sympy.core.symbol import uniquely_named_symbol, _symbol, Str
6. 
7. from sympy.testing.pytest import raises
8. from sympy.core.symbol import disambiguate
9. 
10. def test_Str():
11.     a1 = Str('a')
12.     a2 = Str('a')
13.     b = Str('b')
14.     assert a1 == a2 != b
15.     raises(TypeError, lambda: Str())
16. 
17. def test_Symbol():
18.     a = Symbol("a")
19.     x1 = Symbol("x")
20.     x2 = Symbol("x")
21.     xdummy1 = Dummy("x")
22.     xdummy2 = Dummy("x")
23. 
24.     assert a != x1
25.     assert a != x2
26.     assert x1 == x2
27.     assert x1 != xdummy1
28.     assert xdummy1 != xdummy2
29. 
30.     assert Symbol("x") == Symbol("x")
31.     assert Dummy("x") != Dummy("x")
32.     d = symbols('d', cls=Dummy)
33.     assert isinstance(d, Dummy)
34.     c, d = symbols('c,d', cls=Dummy)
35.     assert isinstance(c, Dummy)
36.     assert isinstance(d, Dummy)
37.     raises(TypeError, lambda: Symbol())
38. 
39. 
40. def test_Dummy():
41.     assert Dummy() != Dummy()
42. 
43. 
44. def test_Dummy_force_dummy_index():
45.     raises(AssertionError, lambda: Dummy(dummy_index=1))
46.     assert Dummy('d', dummy_index=2) == Dummy('d', dummy_index=2)
47.     assert Dummy('d1', dummy_index=2) != Dummy('d2', dummy_index=2)
48.     d1 = Dummy('d', dummy_index=3)
49.     d2 = Dummy('d')
50.     # might fail if d1 were created with dummy_index >= 10**6
51.     assert d1 != d2
52.     d3 = Dummy('d', dummy_index=3)
53.     assert d1 == d3
54.     assert Dummy()._count == Dummy('d', dummy_index=3)._count
55. 
56. 
57. def test_lt_gt():
58.     S = sympify
59.     x, y = Symbol('x'), Symbol('y')
60. 
61.     assert (x >= y) == GreaterThan(x, y)
62.     assert (x >= 0) == GreaterThan(x, 0)
63.     assert (x <= y) == LessThan(x, y)
64.     assert (x <= 0) == LessThan(x, 0)
65. 
66.     assert (0 <= x) == GreaterThan(x, 0)
67.     assert (0 >= x) == LessThan(x, 0)
68.     assert (S(0) >= x) == GreaterThan(0, x)
69.     assert (S(0) <= x) == LessThan(0, x)
70. 
71.     assert (x > y) == StrictGreaterThan(x, y)
72.     assert (x > 0) == StrictGreaterThan(x, 0)
73.     assert (x < y) == StrictLessThan(x, y)
74.     assert (x < 0) == StrictLessThan(x, 0)
75. 
76.     assert (0 < x) == StrictGreaterThan(x, 0)
77.     assert (0 > x) == StrictLessThan(x, 0)
78.     assert (S(0) > x) == StrictGreaterThan(0, x)
79.     assert (S(0) < x) == StrictLessThan(0, x)
80. 
81.     e = x**2 + 4*x + 1
82.     assert (e >= 0) == GreaterThan(e, 0)
83.     assert (0 <= e) == GreaterThan(e, 0)
84.     assert (e > 0) == StrictGreaterThan(e, 0)
85.     assert (0 < e) == StrictGreaterThan(e, 0)
86. 
87.     assert (e <= 0) == LessThan(e, 0)
88.     assert (0 >= e) == LessThan(e, 0)
89.     assert (e < 0) == StrictLessThan(e, 0)
90.     assert (0 > e) == StrictLessThan(e, 0)
91. 
92.     assert (S(0) >= e) == GreaterThan(0, e)
93.     assert (S(0) <= e) == LessThan(0, e)
94.     assert (S(0) < e) == StrictLessThan(0, e)
95.     assert (S(0) > e) == StrictGreaterThan(0, e)
96. 
97. 
98. def test_no_len():
99.     # there should be no len for numbers
100.     x = Symbol('x')
101.     raises(TypeError, lambda: len(x))
102. 
103. 
104. def test_ineq_unequal():
105.     S = sympify
106.     x, y, z = symbols('x,y,z')
107. 
108.     e = (
109.         S(-1) >= x, S(-1) >= y, S(-1) >= z,
110.         S(-1) > x, S(-1) > y, S(-1) > z,
111.         S(-1) <= x, S(-1) <= y, S(-1) <= z,
112.         S(-1) < x, S(-1) < y, S(-1) < z,
113.         S(0) >= x, S(0) >= y, S(0) >= z,
114.         S(0) > x, S(0) > y, S(0) > z,
115.         S(0) <= x, S(0) <= y, S(0) <= z,
116.         S(0) < x, S(0) < y, S(0) < z,
117.         S('3/7') >= x, S('3/7') >= y, S('3/7') >= z,
118.         S('3/7') > x, S('3/7') > y, S('3/7') > z,
119.         S('3/7') <= x, S('3/7') <= y, S('3/7') <= z,
120.         S('3/7') < x, S('3/7') < y, S('3/7') < z,
121.         S(1.5) >= x, S(1.5) >= y, S(1.5) >= z,
122.         S(1.5) > x, S(1.5) > y, S(1.5) > z,
123.         S(1.5) <= x, S(1.5) <= y, S(1.5) <= z,
124.         S(1.5) < x, S(1.5) < y, S(1.5) < z,
125.         S(2) >= x, S(2) >= y, S(2) >= z,
126.         S(2) > x, S(2) > y, S(2) > z,
127.         S(2) <= x, S(2) <= y, S(2) <= z,
128.         S(2) < x, S(2) < y, S(2) < z,
129.         x >= -1, y >= -1, z >= -1,
130.         x > -1, y > -1, z > -1,
131.         x <= -1, y <= -1, z <= -1,
132.         x < -1, y < -1, z < -1,
133.         x >= 0, y >= 0, z >= 0,
134.         x > 0, y > 0, z > 0,
135.         x <= 0, y <= 0, z <= 0,
136.         x < 0, y < 0, z < 0,
137.         x >= 1.5, y >= 1.5, z >= 1.5,
138.         x > 1.5, y > 1.5, z > 1.5,
139.         x <= 1.5, y <= 1.5, z <= 1.5,
140.         x < 1.5, y < 1.5, z < 1.5,
141.         x >= 2, y >= 2, z >= 2,
142.         x > 2, y > 2, z > 2,
143.         x <= 2, y <= 2, z <= 2,
144.         x < 2, y < 2, z < 2,
145. 
146.         x >= y, x >= z, y >= x, y >= z, z >= x, z >= y,
147.         x > y, x > z, y > x, y > z, z > x, z > y,
148.         x <= y, x <= z, y <= x, y <= z, z <= x, z <= y,
149.         x < y, x < z, y < x, y < z, z < x, z < y,
150. 
151.         x - pi >= y + z, y - pi >= x + z, z - pi >= x + y,
152.         x - pi > y + z, y - pi > x + z, z - pi > x + y,
153.         x - pi <= y + z, y - pi <= x + z, z - pi <= x + y,
154.         x - pi < y + z, y - pi < x + z, z - pi < x + y,
155.         True, False
156.     )
157. 
158.     left_e = e[:-1]
159.     for i, e1 in enumerate( left_e ):
160.         for e2 in e[i + 1:]:
161.             assert e1 != e2
162. 
163. 
164. def test_Wild_properties():
165.     S = sympify
166.     # these tests only include Atoms
167.     x = Symbol("x")
168.     y = Symbol("y")
169.     p = Symbol("p", positive=True)
170.     k = Symbol("k", integer=True)
171.     n = Symbol("n", integer=True, positive=True)
172. 
173.     given_patterns = [ x, y, p, k, -k, n, -n, S(-3), S(3),
174.                        pi, Rational(3, 2), I ]
175. 
176.     integerp = lambda k: k.is_integer
177.     positivep = lambda k: k.is_positive
178.     symbolp = lambda k: k.is_Symbol
179.     realp = lambda k: k.is_extended_real
180. 
181.     S = Wild("S", properties=[symbolp])
182.     R = Wild("R", properties=[realp])
183.     Y = Wild("Y", exclude=[x, p, k, n])
184.     P = Wild("P", properties=[positivep])
185.     K = Wild("K", properties=[integerp])
186.     N = Wild("N", properties=[positivep, integerp])
187. 
188.     given_wildcards = [ S, R, Y, P, K, N ]
189. 
190.     goodmatch = {
191.         S: (x, y, p, k, n),
192.         R: (p, k, -k, n, -n, -3, 3, pi, Rational(3, 2)),
193.         Y: (y, -3, 3, pi, Rational(3, 2), I ),
194.         P: (p, n, 3, pi, Rational(3, 2)),
195.         K: (k, -k, n, -n, -3, 3),
196.         N: (n, 3)}
197. 
198.     for A in given_wildcards:
199.         for pat in given_patterns:
200.             d = pat.match(A)
201.             if pat in goodmatch[A]:
202.                 assert d[A] in goodmatch[A]
203.             else:
204.                 assert d is None
205. 
206. 
207. def test_symbols():
208.     x = Symbol('x')
209.     y = Symbol('y')
210.     z = Symbol('z')
211. 
212.     assert symbols('x') == x
213.     assert symbols('x ') == x
214.     assert symbols(' x ') == x
215.     assert symbols('x,') == (x,)
216.     assert symbols('x, ') == (x,)
217.     assert symbols('x ,') == (x,)
218. 
219.     assert symbols('x , y') == (x, y)
220. 
221.     assert symbols('x,y,z') == (x, y, z)
222.     assert symbols('x y z') == (x, y, z)
223. 
224.     assert symbols('x,y,z,') == (x, y, z)
225.     assert symbols('x y z ') == (x, y, z)
226. 
227.     xyz = Symbol('xyz')
228.     abc = Symbol('abc')
229. 
230.     assert symbols('xyz') == xyz
231.     assert symbols('xyz,') == (xyz,)
232.     assert symbols('xyz,abc') == (xyz, abc)
233. 
234.     assert symbols(('xyz',)) == (xyz,)
235.     assert symbols(('xyz,',)) == ((xyz,),)
236.     assert symbols(('x,y,z,',)) == ((x, y, z),)
237.     assert symbols(('xyz', 'abc')) == (xyz, abc)
238.     assert symbols(('xyz,abc',)) == ((xyz, abc),)
239.     assert symbols(('xyz,abc', 'x,y,z')) == ((xyz, abc), (x, y, z))
240. 
241.     assert symbols(('x', 'y', 'z')) == (x, y, z)
242.     assert symbols(['x', 'y', 'z']) == [x, y, z]
243.     assert symbols({'x', 'y', 'z'}) == {x, y, z}
244. 
245.     raises(ValueError, lambda: symbols(''))
246.     raises(ValueError, lambda: symbols(','))
247.     raises(ValueError, lambda: symbols('x,,y,,z'))
248.     raises(ValueError, lambda: symbols(('x', '', 'y', '', 'z')))
249. 
250.     a, b = symbols('x,y', real=True)
251.     assert a.is_real and b.is_real
252. 
253.     x0 = Symbol('x0')
254.     x1 = Symbol('x1')
255.     x2 = Symbol('x2')
256. 
257.     y0 = Symbol('y0')
258.     y1 = Symbol('y1')
259. 
260.     assert symbols('x0:0') == ()
261.     assert symbols('x0:1') == (x0,)
262.     assert symbols('x0:2') == (x0, x1)
263.     assert symbols('x0:3') == (x0, x1, x2)
264. 
265.     assert symbols('x:0') == ()
266.     assert symbols('x:1') == (x0,)
267.     assert symbols('x:2') == (x0, x1)
268.     assert symbols('x:3') == (x0, x1, x2)
269. 
270.     assert symbols('x1:1') == ()
271.     assert symbols('x1:2') == (x1,)
272.     assert symbols('x1:3') == (x1, x2)
273. 
274.     assert symbols('x1:3,x,y,z') == (x1, x2, x, y, z)
275. 
276.     assert symbols('x:3,y:2') == (x0, x1, x2, y0, y1)
277.     assert symbols(('x:3', 'y:2')) == ((x0, x1, x2), (y0, y1))
278. 
279.     a = Symbol('a')
280.     b = Symbol('b')
281.     c = Symbol('c')
282.     d = Symbol('d')
283. 
284.     assert symbols('x:z') == (x, y, z)
285.     assert symbols('a:d,x:z') == (a, b, c, d, x, y, z)
286.     assert symbols(('a:d', 'x:z')) == ((a, b, c, d), (x, y, z))
287. 
288.     aa = Symbol('aa')
289.     ab = Symbol('ab')
290.     ac = Symbol('ac')
291.     ad = Symbol('ad')
292. 
293.     assert symbols('aa:d') == (aa, ab, ac, ad)
294.     assert symbols('aa:d,x:z') == (aa, ab, ac, ad, x, y, z)
295.     assert symbols(('aa:d','x:z')) == ((aa, ab, ac, ad), (x, y, z))
296. 
297. 
298.     # issue 6675
299.     def sym(s):
300.         return str(symbols(s))
301.     assert sym('a0:4') == '(a0, a1, a2, a3)'
302.     assert sym('a2:4,b1:3') == '(a2, a3, b1, b2)'
303.     assert sym('a1(2:4)') == '(a12, a13)'
304.     assert sym('a0:2.0:2') == '(a0.0, a0.1, a1.0, a1.1)'
305.     assert sym('aa:cz') == '(aaz, abz, acz)'
306.     assert sym('aa:c0:2') == '(aa0, aa1, ab0, ab1, ac0, ac1)'
307.     assert sym('aa:ba:b') == '(aaa, aab, aba, abb)'
308.     assert sym('a:3b') == '(a0b, a1b, a2b)'
309.     assert sym('a-1:3b') == '(a-1b, a-2b)'
310.     assert sym(r'a:2\,:2' + chr(0)) == '(a0,0%s, a0,1%s, a1,0%s, a1,1%s)' % (
311.         (chr(0),)*4)
312.     assert sym('x(:a:3)') == '(x(a0), x(a1), x(a2))'
313.     assert sym('x(:c):1') == '(xa0, xb0, xc0)'
314.     assert sym('x((:a)):3') == '(x(a)0, x(a)1, x(a)2)'
315.     assert sym('x(:a:3') == '(x(a0, x(a1, x(a2)'
316.     assert sym(':2') == '(0, 1)'
317.     assert sym(':b') == '(a, b)'
318.     assert sym(':b:2') == '(a0, a1, b0, b1)'
319.     assert sym(':2:2') == '(00, 01, 10, 11)'
320.     assert sym(':b:b') == '(aa, ab, ba, bb)'
321. 
322.     raises(ValueError, lambda: symbols(':'))
323.     raises(ValueError, lambda: symbols('a:'))
324.     raises(ValueError, lambda: symbols('::'))
325.     raises(ValueError, lambda: symbols('a::'))
326.     raises(ValueError, lambda: symbols(':a:'))
327.     raises(ValueError, lambda: symbols('::a'))
328. 
329. 
330. def test_symbols_become_functions_issue_3539():
331.     from sympy.abc import alpha, phi, beta, t
332.     raises(TypeError, lambda: beta(2))
333.     raises(TypeError, lambda: beta(2.5))
334.     raises(TypeError, lambda: phi(2.5))
335.     raises(TypeError, lambda: alpha(2.5))
336.     raises(TypeError, lambda: phi(t))
337. 
338. 
339. def test_unicode():
340.     xu = Symbol('x')
341.     x = Symbol('x')
342.     assert x == xu
343. 
344.     raises(TypeError, lambda: Symbol(1))
345. 
346. 
347. def test_uniquely_named_symbol_and_Symbol():
348.     F = uniquely_named_symbol
349.     x = Symbol('x')
350.     assert F(x) == x
351.     assert F('x') == x
352.     assert str(F('x', x)) == 'x0'
353.     assert str(F('x', (x + 1, 1/x))) == 'x0'
354.     _x = Symbol('x', real=True)
355.     assert F(('x', _x)) == _x
356.     assert F((x, _x)) == _x
357.     assert F('x', real=True).is_real
358.     y = Symbol('y')
359.     assert F(('x', y), real=True).is_real
360.     r = Symbol('x', real=True)
361.     assert F(('x', r)).is_real
362.     assert F(('x', r), real=False).is_real
363.     assert F('x1', Symbol('x1'),
364.         compare=lambda i: str(i).rstrip('1')).name == 'x0'
365.     assert F('x1', Symbol('x1'),
366.         modify=lambda i: i + '_').name == 'x1_'
367.     assert _symbol(x, _x) == x
368. 
369. 
370. def test_disambiguate():
371.     x, y, y_1, _x, x_1, x_2 = symbols('x y y_1 _x x_1 x_2')
372.     t1 = Dummy('y'), _x, Dummy('x'), Dummy('x')
373.     t2 = Dummy('x'), Dummy('x')
374.     t3 = Dummy('x'), Dummy('y')
375.     t4 = x, Dummy('x')
376.     t5 = Symbol('x', integer=True), x, Symbol('x_1')
377. 
378.     assert disambiguate(*t1) == (y, x_2, x, x_1)
379.     assert disambiguate(*t2) == (x, x_1)
380.     assert disambiguate(*t3) == (x, y)
381.     assert disambiguate(*t4) == (x_1, x)
382.     assert disambiguate(*t5) == (t5[0], x_2, x_1)
383.     assert disambiguate(*t5)[0] != x  # assumptions are retained
384. 
385.     t6 = _x, Dummy('x')/y
386.     t7 = y*Dummy('y'), y
387. 
388.     assert disambiguate(*t6) == (x_1, x/y)
389.     assert disambiguate(*t7) == (y*y_1, y_1)
390.     assert disambiguate(Dummy('x_1'), Dummy('x_1')
391.         ) == (x_1, Symbol('x_1_1'))

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 09:13:53,465 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user query specifically asks for the full content of the file `sympy/core/tests/test_symbol.py`.\n\n2. Extended relevance:\n   - The provided context is the entire content of the requested file, from line 1 to 391. Therefore, to fulfill the user's request, the entire file content must be returned.", relative_path='sympy/core/tests/test_symbol.py', start_line=1, end_line=391)]
2025-12-21 09:13:53,467 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file sympy/core/tests/test_symbol.py.
2025-12-21 09:13:53,467 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 09:13:53,467 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 09:13:53,468 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-21 09:13:53,468 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-21 09:13:53,468 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .circleci
|   └── config.yml
├── .github
|   └── workflows
|       ├── ci-sage.yml
|       ├── comment-on-pr.yml
|       ├── docs-preview.yml
|       ├── release.yml
|       └── runtests.yml
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.md
├── bin
|   ├── ask_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_check.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_optional_dependencies.py
|   ├── test_py2_import.py
|   ├── test_setup.py
|   ├── test_sphinx.sh
|   ├── test_submodule_imports.py
|   ├── test_symengine.py
|   ├── test_tensorflow.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── aptinstall.sh
|   ├── cheatsheet
|   ├── convert-svg-to-pdf.sh
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   └── numpydoc.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   ├── requirements.txt
|   └── src
|       ├── _pygments
|       |   └── styles.py
|       ├── _static
|       |   └── custom.css
|       ├── _templates
|       |   └── sidebar
|       |       └── versions.html
|       ├── citing.md
|       ├── conf.py
|       ├── explanation
|       |   ├── active-deprecations.md
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   └── special_topics
|       |       ├── classification.rst
|       |       ├── finite_diff_derivatives.rst
|       |       └── index.rst
|       ├── guides
|       |   ├── assumptions.rst
|       |   ├── booleans.rst
|       |   ├── contributing
|       |   |   ├── build-docs.rst
|       |   |   ├── debug.rst
|       |   |   ├── dependencies.md
|       |   |   ├── deprecations.md
|       |   |   ├── dev-setup.rst
|       |   |   ├── docstring.rst
|       |   |   ├── documentation-style-guide.rst
|       |   |   ├── index.rst
|       |   |   └── make-a-contribution.rst
|       |   ├── getting_started
|       |   |   ├── index.rst
|       |   |   └── install.md
|       |   └── index.rst
|       ├── index.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── index.rst
|       |   |   ├── predicates.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── group_numbers.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   ├── index.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── normalforms.rst
|       |   |   ├── sparse.rst
|       |   |   └── sparsetools.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── control
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── domainmatrix.rst
|       |   |   ├── domainsintro.rst
|       |   |   ├── domainsref.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── numberfields.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   ├── solvers.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── fu.rst
|       |   |   ├── hyperexpand.rst
|       |   |   ├── index.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── index.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── array_expressions.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   ├── tensor.rst
|       |   |   └── toperators.rst
|       |   ├── testing
|       |   |   ├── index.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   └── runtests.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── exceptions.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       ├── intro.rst
|       |       └── vector_integration.rst
|       ├── pics
|       ├── reference
|       |   ├── index.rst
|       |   └── public
|       |       ├── basics
|       |       ├── codegeneration
|       |       ├── logic
|       |       ├── matrices
|       |       ├── numbertheory
|       |       ├── physics
|       |       ├── topics
|       |       └── utilities
|       └── tutorial
|           ├── basic_operations.rst
|           ├── calculus.rst
|           ├── features.rst
|           ├── gotchas.rst
|           ├── index.rst
|           ├── intro.rst
|           ├── manipulation.rst
|           ├── matrices.rst
|           ├── next.rst
|           ├── preliminaries.rst
|           ├── printing.rst
|           ├── simplification.rst
|           └── solvers.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── aptinstall.sh
|   ├── authors.py
|   ├── build_docs.py
|   ├── ci_release_script.sh
|   ├── compare_tar_against_git.py
|   ├── fabfile.py
|   ├── github_release.py
|   ├── helpers.py
|   ├── pull_and_run_rever.sh
|   ├── release.sh
|   ├── releasecheck.py
|   ├── requirements.txt
|   ├── sha256.py
|   ├── test_install.py
|   ├── update_docs.py
|   └── update_requirements.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── facts.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── predicates
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── relation
    |   |   ├── __init__.py
    |   |   ├── binrel.py
    |   |   └── equality.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_assumptions_2.py
    |   |   ├── test_context.py
    |   |   ├── test_matrices.py
    |   |   ├── test_query.py
    |   |   ├── test_refine.py
    |   |   ├── test_satask.py
    |   |   ├── test_sathandlers.py
    |   |   └── test_wrapper.py
    |   └── wrapper.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── accumulationbounds.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_accumulationbounds.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── abstract_nodes.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── numpy_nodes.py
    |   ├── pynodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   ├── scipy_nodes.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_abstract_nodes.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_numpy_nodes.py
    |       ├── test_pynodes.py
    |       ├── test_pyutils.py
    |       ├── test_rewriting.py
    |       └── test_scipy_nodes.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── group_numbers.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── schur_number.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_group_numbers.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_schur_number.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── _print_helpers.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── kind.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── parameters.py
    |   ├── power.py
    |   ├── random.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── sorting.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_kind.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_parameters.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_random.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_sorting.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_traversal.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   ├── trace.py
    |   └── traversal.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── gmpy.py
    |   ├── importtools.py
    |   ├── pythonmpq.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_pythonmpq.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── printing.py
    |   ├── session.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_interactive.py
    |   |   └── test_ipython.py
    |   └── traversal.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   ├── minisat22_wrapper.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── decompositions.py
    |   ├── dense.py
    |   ├── determinant.py
    |   ├── eigen.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── companion.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── permutation.py
    |   |   ├── sets.py
    |   |   ├── slice.py
    |   |   ├── special.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_companion.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_permutation.py
    |   |   |   ├── test_sets.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_special.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── graph.py
    |   ├── immutable.py
    |   ├── inverse.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── reductions.py
    |   ├── repmatrix.py
    |   ├── solvers.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   ├── subspaces.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_commonmatrix.py
    |   |   ├── test_decompositions.py
    |   |   ├── test_determinant.py
    |   |   ├── test_eigen.py
    |   |   ├── test_graph.py
    |   |   ├── test_immutable.py
    |   |   ├── test_interactions.py
    |   |   ├── test_matrices.py
    |   |   ├── test_normalforms.py
    |   |   ├── test_reductions.py
    |   |   ├── test_solvers.py
    |   |   ├── test_sparse.py
    |   |   ├── test_sparsetools.py
    |   |   └── test_subspaces.py
    |   └── utilities.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── digits.py
    |   ├── ecm.py
    |   ├── egyptian_fraction.py
    |   ├── elliptic_curve.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── qs.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_digits.py
    |       ├── test_ecm.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_elliptic_curve.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       ├── test_qs.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── README.txt
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_ast_parser.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── control
    |   |   ├── __init__.py
    |   |   ├── control_plots.py
    |   |   ├── lti.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_control_plots.py
    |   |       └── test_lti.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── joint.py
    |   |   ├── jointsmethod.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── method.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_joint.py
    |   |       ├── test_jointsmethod.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_method.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_anticommutator.py
    |   |   |   ├── test_boson.py
    |   |   |   ├── test_cartesian.py
    |   |   |   ├── test_cg.py
    |   |   |   ├── test_circuitplot.py
    |   |   |   ├── test_circuitutils.py
    |   |   |   ├── test_commutator.py
    |   |   |   ├── test_constants.py
    |   |   |   ├── test_dagger.py
    |   |   |   ├── test_density.py
    |   |   |   ├── test_fermion.py
    |   |   |   ├── test_gate.py
    |   |   |   ├── test_grover.py
    |   |   |   ├── test_hilbert.py
    |   |   |   ├── test_identitysearch.py
    |   |   |   ├── test_innerproduct.py
    |   |   |   ├── test_matrixutils.py
    |   |   |   ├── test_operator.py
    |   |   |   ├── test_operatorordering.py
    |   |   |   ├── test_operatorset.py
    |   |   |   ├── test_pauli.py
    |   |   |   ├── test_piab.py
    |   |   |   ├── test_printing.py
    |   |   |   ├── test_qapply.py
    |   |   |   ├── test_qasm.py
    |   |   |   ├── test_qexpr.py
    |   |   |   ├── test_qft.py
    |   |   |   ├── test_qubit.py
    |   |   |   ├── test_represent.py
    |   |   |   ├── test_sho1d.py
    |   |   |   ├── test_shor.py
    |   |   |   ├── test_spin.py
    |   |   |   ├── test_state.py
    |   |   |   ├── test_tensorproduct.py
    |   |   |   └── test_trace.py
    |   |   └── trace.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domainmatrix.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── expressionrawdomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gaussiandomains.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── matrices
    |   |   ├── __init__.py
    |   |   ├── ddm.py
    |   |   ├── dense.py
    |   |   ├── domainmatrix.py
    |   |   ├── domainscalar.py
    |   |   ├── eigen.py
    |   |   ├── exceptions.py
    |   |   ├── linsolve.py
    |   |   ├── normalforms.py
    |   |   ├── sdm.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_ddm.py
    |   |       ├── test_dense.py
    |   |       ├── test_domainmatrix.py
    |   |       ├── test_domainscalar.py
    |   |       ├── test_eigen.py
    |   |       ├── test_linsolve.py
    |   |       ├── test_normalforms.py
    |   |       └── test_sdm.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields
    |   |   ├── __init__.py
    |   |   ├── basis.py
    |   |   ├── exceptions.py
    |   |   ├── minpoly.py
    |   |   ├── modules.py
    |   |   ├── primes.py
    |   |   ├── subfield.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_basis.py
    |   |   |   ├── test_minpoly.py
    |   |   |   ├── test_modules.py
    |   |   |   ├── test_numbers.py
    |   |   |   ├── test_primes.py
    |   |   |   ├── test_subfield.py
    |   |   |   └── test_utilities.py
    |   |   └── utilities.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── aesaracode.py
    |   ├── c.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxx.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── fortran.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── numpy.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_aesaracode.py
    |   |   ├── test_c.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cupy.py
    |   |   ├── test_cxx.py
    |   |   ├── test_dot.py
    |   |   ├── test_fortran.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── comparison.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── issubset.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine
    |   |   ├── __init__.py
    |   |   ├── diophantine.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_diophantine.py
    |   ├── inequalities.py
    |   ├── ode
    |   |   ├── __init__.py
    |   |   ├── hypergeometric.py
    |   |   ├── lie_group.py
    |   |   ├── nonhomogeneous.py
    |   |   ├── ode.py
    |   |   ├── riccati.py
    |   |   ├── single.py
    |   |   ├── subscheck.py
    |   |   ├── systems.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_lie_group.py
    |   |       ├── test_ode.py
    |   |       ├── test_riccati.py
    |   |       ├── test_single.py
    |   |       ├── test_subscheck.py
    |   |       └── test_systems.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── compound_rv.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── matrix_distributions.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── sampling
    |   |   ├── __init__.py
    |   |   ├── sample_numpy.py
    |   |   ├── sample_pymc3.py
    |   |   ├── sample_scipy.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_sample_continuous_rv.py
    |   |       ├── test_sample_discrete_rv.py
    |   |       └── test_sample_finite_rv.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_multivariate_probability.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_compound_rv.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_matrix_distributions.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       ├── test_symbolic_multivariate.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── array_derivatives.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── expressions
    |   |   |   ├── __init__.py
    |   |   |   ├── array_expressions.py
    |   |   |   ├── arrayexpr_derivatives.py
    |   |   |   ├── conv_array_to_indexed.py
    |   |   |   ├── conv_array_to_matrix.py
    |   |   |   ├── conv_indexed_to_array.py
    |   |   |   ├── conv_matrix_to_array.py
    |   |   |   ├── tests
    |   |   |   └── utils.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_array_derivatives.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── testing
    |   ├── __init__.py
    |   ├── benchmarking.py
    |   ├── matrices.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_module_imports.py
    |   |   └── test_pytest.py
    |   └── tmpfiles.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_matchpy_connector.py
    |   |   ├── test_misc.py
    |   |   ├── test_pickling.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── implicitregion.py
        ├── integrals.py
        ├── operators.py
        ├── orienters.py
        ├── parametricregion.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_implicitregion.py
        |   ├── test_integrals.py
        |   ├── test_operators.py
        |   ├── test_parametricregion.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Using symbols to create functions doesn't work if there is an extra layer of parentheses

Description: Sympy version == 1.10.1

Using `symbols` to create symbol-like objects like instances of `Function` as shown in the [documentation](https://docs.sympy.org/latest/modules/core.html?highlight=symbols#symbols) creates objects of class `Symbol` instead of `Function` if there is an extra layer of parentheses.

The extra layer of parentheses are necessary to deconstruct the output as separate tuples.

Running the code:
```
q, u = smp.symbols(('q:2', 'u:2'), cls=smp.Function)
print(type(q[0]))
```
#### Expected result:
<class 'sympy.core.function.UndefinedFunction'>

#### Actual result: 
<class 'sympy.core.symbol.Symbol'>

Patch information:
diff --git a/sympy/core/symbol.py b/sympy/core/symbol.py
index f4a555c13f..2aca8bab27 100644
--- a/sympy/core/symbol.py
+++ b/sympy/core/symbol.py
@@ -791,7 +791,7 @@ def literal(s):
         return tuple(result)
     else:
         for name in names:
-            result.append(symbols(name, **args))
+            result.append(symbols(name, cls=cls, **args))
 
         return type(names)(result)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file sympy/core/tests/test_symbol.py.
Extra Requirements: 
Purpose: I need to find existing test cases that cover the functionality of creating symbols with a specific class, which will help in identifying tests that are relevant to the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/core/tests/test_symbol.py
Line number range: 1 - 391
Content:
1. from sympy.core.numbers import (I, Rational, pi)
2. from sympy.core.relational import (GreaterThan, LessThan, StrictGreaterThan, StrictLessThan)
3. from sympy.core.symbol import (Dummy, Symbol, Wild, symbols)
4. from sympy.core.sympify import sympify  # can't import as S yet
5. from sympy.core.symbol import uniquely_named_symbol, _symbol, Str
6. 
7. from sympy.testing.pytest import raises
8. from sympy.core.symbol import disambiguate
9. 
10. def test_Str():
11.     a1 = Str('a')
12.     a2 = Str('a')
13.     b = Str('b')
14.     assert a1 == a2 != b
15.     raises(TypeError, lambda: Str())
16. 
17. def test_Symbol():
18.     a = Symbol("a")
19.     x1 = Symbol("x")
20.     x2 = Symbol("x")
21.     xdummy1 = Dummy("x")
22.     xdummy2 = Dummy("x")
23. 
24.     assert a != x1
25.     assert a != x2
26.     assert x1 == x2
27.     assert x1 != xdummy1
28.     assert xdummy1 != xdummy2
29. 
30.     assert Symbol("x") == Symbol("x")
31.     assert Dummy("x") != Dummy("x")
32.     d = symbols('d', cls=Dummy)
33.     assert isinstance(d, Dummy)
34.     c, d = symbols('c,d', cls=Dummy)
35.     assert isinstance(c, Dummy)
36.     assert isinstance(d, Dummy)
37.     raises(TypeError, lambda: Symbol())
38. 
39. 
40. def test_Dummy():
41.     assert Dummy() != Dummy()
42. 
43. 
44. def test_Dummy_force_dummy_index():
45.     raises(AssertionError, lambda: Dummy(dummy_index=1))
46.     assert Dummy('d', dummy_index=2) == Dummy('d', dummy_index=2)
47.     assert Dummy('d1', dummy_index=2) != Dummy('d2', dummy_index=2)
48.     d1 = Dummy('d', dummy_index=3)
49.     d2 = Dummy('d')
50.     # might fail if d1 were created with dummy_index >= 10**6
51.     assert d1 != d2
52.     d3 = Dummy('d', dummy_index=3)
53.     assert d1 == d3
54.     assert Dummy()._count == Dummy('d', dummy_index=3)._count
55. 
56. 
57. def test_lt_gt():
58.     S = sympify
59.     x, y = Symbol('x'), Symbol('y')
60. 
61.     assert (x >= y) == GreaterThan(x, y)
62.     assert (x >= 0) == GreaterThan(x, 0)
63.     assert (x <= y) == LessThan(x, y)
64.     assert (x <= 0) == LessThan(x, 0)
65. 
66.     assert (0 <= x) == GreaterThan(x, 0)
67.     assert (0 >= x) == LessThan(x, 0)
68.     assert (S(0) >= x) == GreaterThan(0, x)
69.     assert (S(0) <= x) == LessThan(0, x)
70. 
71.     assert (x > y) == StrictGreaterThan(x, y)
72.     assert (x > 0) == StrictGreaterThan(x, 0)
73.     assert (x < y) == StrictLessThan(x, y)
74.     assert (x < 0) == StrictLessThan(x, 0)
75. 
76.     assert (0 < x) == StrictGreaterThan(x, 0)
77.     assert (0 > x) == StrictLessThan(x, 0)
78.     assert (S(0) > x) == StrictGreaterThan(0, x)
79.     assert (S(0) < x) == StrictLessThan(0, x)
80. 
81.     e = x**2 + 4*x + 1
82.     assert (e >= 0) == GreaterThan(e, 0)
83.     assert (0 <= e) == GreaterThan(e, 0)
84.     assert (e > 0) == StrictGreaterThan(e, 0)
85.     assert (0 < e) == StrictGreaterThan(e, 0)
86. 
87.     assert (e <= 0) == LessThan(e, 0)
88.     assert (0 >= e) == LessThan(e, 0)
89.     assert (e < 0) == StrictLessThan(e, 0)
90.     assert (0 > e) == StrictLessThan(e, 0)
91. 
92.     assert (S(0) >= e) == GreaterThan(0, e)
93.     assert (S(0) <= e) == LessThan(0, e)
94.     assert (S(0) < e) == StrictLessThan(0, e)
95.     assert (S(0) > e) == StrictGreaterThan(0, e)
96. 
97. 
98. def test_no_len():
99.     # there should be no len for numbers
100.     x = Symbol('x')
101.     raises(TypeError, lambda: len(x))
102. 
103. 
104. def test_ineq_unequal():
105.     S = sympify
106.     x, y, z = symbols('x,y,z')
107. 
108.     e = (
109.         S(-1) >= x, S(-1) >= y, S(-1) >= z,
110.         S(-1) > x, S(-1) > y, S(-1) > z,
111.         S(-1) <= x, S(-1) <= y, S(-1) <= z,
112.         S(-1) < x, S(-1) < y, S(-1) < z,
113.         S(0) >= x, S(0) >= y, S(0) >= z,
114.         S(0) > x, S(0) > y, S(0) > z,
115.         S(0) <= x, S(0) <= y, S(0) <= z,
116.         S(0) < x, S(0) < y, S(0) < z,
117.         S('3/7') >= x, S('3/7') >= y, S('3/7') >= z,
118.         S('3/7') > x, S('3/7') > y, S('3/7') > z,
119.         S('3/7') <= x, S('3/7') <= y, S('3/7') <= z,
120.         S('3/7') < x, S('3/7') < y, S('3/7') < z,
121.         S(1.5) >= x, S(1.5) >= y, S(1.5) >= z,
122.         S(1.5) > x, S(1.5) > y, S(1.5) > z,
123.         S(1.5) <= x, S(1.5) <= y, S(1.5) <= z,
124.         S(1.5) < x, S(1.5) < y, S(1.5) < z,
125.         S(2) >= x, S(2) >= y, S(2) >= z,
126.         S(2) > x, S(2) > y, S(2) > z,
127.         S(2) <= x, S(2) <= y, S(2) <= z,
128.         S(2) < x, S(2) < y, S(2) < z,
129.         x >= -1, y >= -1, z >= -1,
130.         x > -1, y > -1, z > -1,
131.         x <= -1, y <= -1, z <= -1,
132.         x < -1, y < -1, z < -1,
133.         x >= 0, y >= 0, z >= 0,
134.         x > 0, y > 0, z > 0,
135.         x <= 0, y <= 0, z <= 0,
136.         x < 0, y < 0, z < 0,
137.         x >= 1.5, y >= 1.5, z >= 1.5,
138.         x > 1.5, y > 1.5, z > 1.5,
139.         x <= 1.5, y <= 1.5, z <= 1.5,
140.         x < 1.5, y < 1.5, z < 1.5,
141.         x >= 2, y >= 2, z >= 2,
142.         x > 2, y > 2, z > 2,
143.         x <= 2, y <= 2, z <= 2,
144.         x < 2, y < 2, z < 2,
145. 
146.         x >= y, x >= z, y >= x, y >= z, z >= x, z >= y,
147.         x > y, x > z, y > x, y > z, z > x, z > y,
148.         x <= y, x <= z, y <= x, y <= z, z <= x, z <= y,
149.         x < y, x < z, y < x, y < z, z < x, z < y,
150. 
151.         x - pi >= y + z, y - pi >= x + z, z - pi >= x + y,
152.         x - pi > y + z, y - pi > x + z, z - pi > x + y,
153.         x - pi <= y + z, y - pi <= x + z, z - pi <= x + y,
154.         x - pi < y + z, y - pi < x + z, z - pi < x + y,
155.         True, False
156.     )
157. 
158.     left_e = e[:-1]
159.     for i, e1 in enumerate( left_e ):
160.         for e2 in e[i + 1:]:
161.             assert e1 != e2
162. 
163. 
164. def test_Wild_properties():
165.     S = sympify
166.     # these tests only include Atoms
167.     x = Symbol("x")
168.     y = Symbol("y")
169.     p = Symbol("p", positive=True)
170.     k = Symbol("k", integer=True)
171.     n = Symbol("n", integer=True, positive=True)
172. 
173.     given_patterns = [ x, y, p, k, -k, n, -n, S(-3), S(3),
174.                        pi, Rational(3, 2), I ]
175. 
176.     integerp = lambda k: k.is_integer
177.     positivep = lambda k: k.is_positive
178.     symbolp = lambda k: k.is_Symbol
179.     realp = lambda k: k.is_extended_real
180. 
181.     S = Wild("S", properties=[symbolp])
182.     R = Wild("R", properties=[realp])
183.     Y = Wild("Y", exclude=[x, p, k, n])
184.     P = Wild("P", properties=[positivep])
185.     K = Wild("K", properties=[integerp])
186.     N = Wild("N", properties=[positivep, integerp])
187. 
188.     given_wildcards = [ S, R, Y, P, K, N ]
189. 
190.     goodmatch = {
191.         S: (x, y, p, k, n),
192.         R: (p, k, -k, n, -n, -3, 3, pi, Rational(3, 2)),
193.         Y: (y, -3, 3, pi, Rational(3, 2), I ),
194.         P: (p, n, 3, pi, Rational(3, 2)),
195.         K: (k, -k, n, -n, -3, 3),
196.         N: (n, 3)}
197. 
198.     for A in given_wildcards:
199.         for pat in given_patterns:
200.             d = pat.match(A)
201.             if pat in goodmatch[A]:
202.                 assert d[A] in goodmatch[A]
203.             else:
204.                 assert d is None
205. 
206. 
207. def test_symbols():
208.     x = Symbol('x')
209.     y = Symbol('y')
210.     z = Symbol('z')
211. 
212.     assert symbols('x') == x
213.     assert symbols('x ') == x
214.     assert symbols(' x ') == x
215.     assert symbols('x,') == (x,)
216.     assert symbols('x, ') == (x,)
217.     assert symbols('x ,') == (x,)
218. 
219.     assert symbols('x , y') == (x, y)
220. 
221.     assert symbols('x,y,z') == (x, y, z)
222.     assert symbols('x y z') == (x, y, z)
223. 
224.     assert symbols('x,y,z,') == (x, y, z)
225.     assert symbols('x y z ') == (x, y, z)
226. 
227.     xyz = Symbol('xyz')
228.     abc = Symbol('abc')
229. 
230.     assert symbols('xyz') == xyz
231.     assert symbols('xyz,') == (xyz,)
232.     assert symbols('xyz,abc') == (xyz, abc)
233. 
234.     assert symbols(('xyz',)) == (xyz,)
235.     assert symbols(('xyz,',)) == ((xyz,),)
236.     assert symbols(('x,y,z,',)) == ((x, y, z),)
237.     assert symbols(('xyz', 'abc')) == (xyz, abc)
238.     assert symbols(('xyz,abc',)) == ((xyz, abc),)
239.     assert symbols(('xyz,abc', 'x,y,z')) == ((xyz, abc), (x, y, z))
240. 
241.     assert symbols(('x', 'y', 'z')) == (x, y, z)
242.     assert symbols(['x', 'y', 'z']) == [x, y, z]
243.     assert symbols({'x', 'y', 'z'}) == {x, y, z}
244. 
245.     raises(ValueError, lambda: symbols(''))
246.     raises(ValueError, lambda: symbols(','))
247.     raises(ValueError, lambda: symbols('x,,y,,z'))
248.     raises(ValueError, lambda: symbols(('x', '', 'y', '', 'z')))
249. 
250.     a, b = symbols('x,y', real=True)
251.     assert a.is_real and b.is_real
252. 
253.     x0 = Symbol('x0')
254.     x1 = Symbol('x1')
255.     x2 = Symbol('x2')
256. 
257.     y0 = Symbol('y0')
258.     y1 = Symbol('y1')
259. 
260.     assert symbols('x0:0') == ()
261.     assert symbols('x0:1') == (x0,)
262.     assert symbols('x0:2') == (x0, x1)
263.     assert symbols('x0:3') == (x0, x1, x2)
264. 
265.     assert symbols('x:0') == ()
266.     assert symbols('x:1') == (x0,)
267.     assert symbols('x:2') == (x0, x1)
268.     assert symbols('x:3') == (x0, x1, x2)
269. 
270.     assert symbols('x1:1') == ()
271.     assert symbols('x1:2') == (x1,)
272.     assert symbols('x1:3') == (x1, x2)
273. 
274.     assert symbols('x1:3,x,y,z') == (x1, x2, x, y, z)
275. 
276.     assert symbols('x:3,y:2') == (x0, x1, x2, y0, y1)
277.     assert symbols(('x:3', 'y:2')) == ((x0, x1, x2), (y0, y1))
278. 
279.     a = Symbol('a')
280.     b = Symbol('b')
281.     c = Symbol('c')
282.     d = Symbol('d')
283. 
284.     assert symbols('x:z') == (x, y, z)
285.     assert symbols('a:d,x:z') == (a, b, c, d, x, y, z)
286.     assert symbols(('a:d', 'x:z')) == ((a, b, c, d), (x, y, z))
287. 
288.     aa = Symbol('aa')
289.     ab = Symbol('ab')
290.     ac = Symbol('ac')
291.     ad = Symbol('ad')
292. 
293.     assert symbols('aa:d') == (aa, ab, ac, ad)
294.     assert symbols('aa:d,x:z') == (aa, ab, ac, ad, x, y, z)
295.     assert symbols(('aa:d','x:z')) == ((aa, ab, ac, ad), (x, y, z))
296. 
297. 
298.     # issue 6675
299.     def sym(s):
300.         return str(symbols(s))
301.     assert sym('a0:4') == '(a0, a1, a2, a3)'
302.     assert sym('a2:4,b1:3') == '(a2, a3, b1, b2)'
303.     assert sym('a1(2:4)') == '(a12, a13)'
304.     assert sym('a0:2.0:2') == '(a0.0, a0.1, a1.0, a1.1)'
305.     assert sym('aa:cz') == '(aaz, abz, acz)'
306.     assert sym('aa:c0:2') == '(aa0, aa1, ab0, ab1, ac0, ac1)'
307.     assert sym('aa:ba:b') == '(aaa, aab, aba, abb)'
308.     assert sym('a:3b') == '(a0b, a1b, a2b)'
309.     assert sym('a-1:3b') == '(a-1b, a-2b)'
310.     assert sym(r'a:2\,:2' + chr(0)) == '(a0,0%s, a0,1%s, a1,0%s, a1,1%s)' % (
311.         (chr(0),)*4)
312.     assert sym('x(:a:3)') == '(x(a0), x(a1), x(a2))'
313.     assert sym('x(:c):1') == '(xa0, xb0, xc0)'
314.     assert sym('x((:a)):3') == '(x(a)0, x(a)1, x(a)2)'
315.     assert sym('x(:a:3') == '(x(a0, x(a1, x(a2)'
316.     assert sym(':2') == '(0, 1)'
317.     assert sym(':b') == '(a, b)'
318.     assert sym(':b:2') == '(a0, a1, b0, b1)'
319.     assert sym(':2:2') == '(00, 01, 10, 11)'
320.     assert sym(':b:b') == '(aa, ab, ba, bb)'
321. 
322.     raises(ValueError, lambda: symbols(':'))
323.     raises(ValueError, lambda: symbols('a:'))
324.     raises(ValueError, lambda: symbols('::'))
325.     raises(ValueError, lambda: symbols('a::'))
326.     raises(ValueError, lambda: symbols(':a:'))
327.     raises(ValueError, lambda: symbols('::a'))
328. 
329. 
330. def test_symbols_become_functions_issue_3539():
331.     from sympy.abc import alpha, phi, beta, t
332.     raises(TypeError, lambda: beta(2))
333.     raises(TypeError, lambda: beta(2.5))
334.     raises(TypeError, lambda: phi(2.5))
335.     raises(TypeError, lambda: alpha(2.5))
336.     raises(TypeError, lambda: phi(t))
337. 
338. 
339. def test_unicode():
340.     xu = Symbol('x')
341.     x = Symbol('x')
342.     assert x == xu
343. 
344.     raises(TypeError, lambda: Symbol(1))
345. 
346. 
347. def test_uniquely_named_symbol_and_Symbol():
348.     F = uniquely_named_symbol
349.     x = Symbol('x')
350.     assert F(x) == x
351.     assert F('x') == x
352.     assert str(F('x', x)) == 'x0'
353.     assert str(F('x', (x + 1, 1/x))) == 'x0'
354.     _x = Symbol('x', real=True)
355.     assert F(('x', _x)) == _x
356.     assert F((x, _x)) == _x
357.     assert F('x', real=True).is_real
358.     y = Symbol('y')
359.     assert F(('x', y), real=True).is_real
360.     r = Symbol('x', real=True)
361.     assert F(('x', r)).is_real
362.     assert F(('x', r), real=False).is_real
363.     assert F('x1', Symbol('x1'),
364.         compare=lambda i: str(i).rstrip('1')).name == 'x0'
365.     assert F('x1', Symbol('x1'),
366.         modify=lambda i: i + '_').name == 'x1_'
367.     assert _symbol(x, _x) == x
368. 
369. 
370. def test_disambiguate():
371.     x, y, y_1, _x, x_1, x_2 = symbols('x y y_1 _x x_1 x_2')
372.     t1 = Dummy('y'), _x, Dummy('x'), Dummy('x')
373.     t2 = Dummy('x'), Dummy('x')
374.     t3 = Dummy('x'), Dummy('y')
375.     t4 = x, Dummy('x')
376.     t5 = Symbol('x', integer=True), x, Symbol('x_1')
377. 
378.     assert disambiguate(*t1) == (y, x_2, x, x_1)
379.     assert disambiguate(*t2) == (x, x_1)
380.     assert disambiguate(*t3) == (x, y)
381.     assert disambiguate(*t4) == (x_1, x)
382.     assert disambiguate(*t5) == (t5[0], x_2, x_1)
383.     assert disambiguate(*t5)[0] != x  # assumptions are retained
384. 
385.     t6 = _x, Dummy('x')/y
386.     t7 = y*Dummy('y'), y
387. 
388.     assert disambiguate(*t6) == (x_1, x/y)
389.     assert disambiguate(*t7) == (y*y_1, y_1)
390.     assert disambiguate(Dummy('x_1'), Dummy('x_1')
391.         ) == (x_1, Symbol('x_1_1'))

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 09:14:31,136 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The provided context from `sympy/core/tests/test_symbol.py` is helpful as it shows how `symbols()` is used with the `cls` argument and with tuple inputs. However, it does not contain any test cases where `cls=Function` is used, which is the core of the reported bug. To find more relevant test cases, I need to investigate the tests for the `Function` class itself, which might include tests for its creation via the `symbols` function.' query='Please provide the full content of the file sympy/core/tests/test_function.py.' extra_requirements='' purpose='I need to find test cases related to the creation of `Function` objects to identify tests relevant to the bug report.'
2025-12-21 09:14:31,137 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file sympy/core/tests/test_function.py.
2025-12-21 09:14:31,138 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 09:14:31,138 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 09:14:31,139 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 09:14:31,139 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file sympy/core/tests/test_function.py.
Purpose: I need to find test cases related to the creation of `Function` objects to identify tests relevant to the bug report.
2025-12-21 09:14:33,673 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the entire content of the file `sympy/core/tests/test_function.py` as requested. This will allow you to examine the test cases related to the creation of `Function` objects and identify those that are relevant to the bug report you are investigating.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/core/tests/test_function.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2116, 'candidates_token_count': 82, 'total_token_count': 2292, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2116}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 82}], 'thoughts_token_count': 94, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.08774098535863364, 'model_name': 'gemini-2.5-pro'} id='run--d7048819-b6a4-4a39-9858-599c550da568-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/core/tests/test_function.py'}, 'id': '7e8249e6-9ec3-4bf7-abc0-37aa61df348a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2116, 'output_tokens': 82, 'total_tokens': 2292, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 94}}
2025-12-21 09:14:36,730 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the content of `sympy/core/tests/test_function.py` as requested. You can now review the test cases in this file to find those relevant to the `Function` object creation bug. This should help you in your investigation.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11616, 'candidates_token_count': 53, 'total_token_count': 11908, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11616}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 53}], 'thoughts_token_count': 239, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.37843495494914503, 'model_name': 'gemini-2.5-pro'} id='run--d88088a2-e802-45e0-931b-06366a9da8f3-0' usage_metadata={'input_tokens': 11616, 'output_tokens': 53, 'total_tokens': 11908, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 239}}
2025-12-21 09:14:36,732 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file sympy/core/tests/test_function.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases related to the creation of `Function` objects to identify tests relevant to the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/core/tests/test_function.py
Line number range: 1 - 500
Content:
1. from sympy.concrete.summations import Sum
2. from sympy.core.basic import Basic, _aresame
3. from sympy.core.cache import clear_cache
4. from sympy.core.containers import Dict, Tuple
5. from sympy.core.expr import Expr, unchanged
6. from sympy.core.function import (Subs, Function, diff, Lambda, expand,
7.     nfloat, Derivative)
8. from sympy.core.numbers import E, Float, zoo, Rational, pi, I, oo, nan
9. from sympy.core.power import Pow
10. from sympy.core.relational import Eq
11. from sympy.core.singleton import S
12. from sympy.core.symbol import symbols, Dummy, Symbol
13. from sympy.functions.elementary.complexes import im, re
14. from sympy.functions.elementary.exponential import log, exp
15. from sympy.functions.elementary.miscellaneous import sqrt
16. from sympy.functions.elementary.piecewise import Piecewise
17. from sympy.functions.elementary.trigonometric import sin, cos, acos
18. from sympy.functions.special.error_functions import expint
19. from sympy.functions.special.gamma_functions import loggamma, polygamma
20. from sympy.matrices.dense import Matrix
21. from sympy.printing.str import sstr
22. from sympy.series.order import O
23. from sympy.tensor.indexed import Indexed
24. from sympy.core.function import (PoleError, _mexpand, arity,
25.         BadSignatureError, BadArgumentsError)
26. from sympy.core.parameters import _exp_is_pow
27. from sympy.core.sympify import sympify, SympifyError
28. from sympy.matrices import MutableMatrix, ImmutableMatrix
29. from sympy.sets.sets import FiniteSet
30. from sympy.solvers.solveset import solveset
31. from sympy.tensor.array import NDimArray
32. from sympy.utilities.iterables import subsets, variations
33. from sympy.testing.pytest import XFAIL, raises, warns_deprecated_sympy, _both_exp_pow
34. 
35. from sympy.abc import t, w, x, y, z
36. f, g, h = symbols('f g h', cls=Function)
37. _xi_1, _xi_2, _xi_3 = [Dummy() for i in range(3)]
38. 
39. def test_f_expand_complex():
40.     x = Symbol('x', real=True)
41. 
42.     assert f(x).expand(complex=True) == I*im(f(x)) + re(f(x))
43.     assert exp(x).expand(complex=True) == exp(x)
44.     assert exp(I*x).expand(complex=True) == cos(x) + I*sin(x)
45.     assert exp(z).expand(complex=True) == cos(im(z))*exp(re(z)) + \
46.         I*sin(im(z))*exp(re(z))
47. 
48. 
49. def test_bug1():
50.     e = sqrt(-log(w))
51.     assert e.subs(log(w), -x) == sqrt(x)
52. 
53.     e = sqrt(-5*log(w))
54.     assert e.subs(log(w), -x) == sqrt(5*x)
55. 
56. 
57. def test_general_function():
58.     nu = Function('nu')
59. 
60.     e = nu(x)
61.     edx = e.diff(x)
62.     edy = e.diff(y)
63.     edxdx = e.diff(x).diff(x)
64.     edxdy = e.diff(x).diff(y)
65.     assert e == nu(x)
66.     assert edx != nu(x)
67.     assert edx == diff(nu(x), x)
68.     assert edy == 0
69.     assert edxdx == diff(diff(nu(x), x), x)
70.     assert edxdy == 0
71. 
72. def test_general_function_nullary():
73.     nu = Function('nu')
74. 
75.     e = nu()
76.     edx = e.diff(x)
77.     edxdx = e.diff(x).diff(x)
78.     assert e == nu()
79.     assert edx != nu()
80.     assert edx == 0
81.     assert edxdx == 0
82. 
83. 
84. def test_derivative_subs_bug():
85.     e = diff(g(x), x)
86.     assert e.subs(g(x), f(x)) != e
87.     assert e.subs(g(x), f(x)) == Derivative(f(x), x)
88.     assert e.subs(g(x), -f(x)) == Derivative(-f(x), x)
89. 
90.     assert e.subs(x, y) == Derivative(g(y), y)
91. 
92. 
93. def test_derivative_subs_self_bug():
94.     d = diff(f(x), x)
95. 
96.     assert d.subs(d, y) == y
97. 
98. 
99. def test_derivative_linearity():
100.     assert diff(-f(x), x) == -diff(f(x), x)
101.     assert diff(8*f(x), x) == 8*diff(f(x), x)
102.     assert diff(8*f(x), x) != 7*diff(f(x), x)
103.     assert diff(8*f(x)*x, x) == 8*f(x) + 8*x*diff(f(x), x)
104.     assert diff(8*f(x)*y*x, x).expand() == 8*y*f(x) + 8*y*x*diff(f(x), x)
105. 
106. 
107. def test_derivative_evaluate():
108.     assert Derivative(sin(x), x) != diff(sin(x), x)
109.     assert Derivative(sin(x), x).doit() == diff(sin(x), x)
110. 
111.     assert Derivative(Derivative(f(x), x), x) == diff(f(x), x, x)
112.     assert Derivative(sin(x), x, 0) == sin(x)
113.     assert Derivative(sin(x), (x, y), (x, -y)) == sin(x)
114. 
115. 
116. def test_diff_symbols():
117.     assert diff(f(x, y, z), x, y, z) == Derivative(f(x, y, z), x, y, z)
118.     assert diff(f(x, y, z), x, x, x) == Derivative(f(x, y, z), x, x, x) == Derivative(f(x, y, z), (x, 3))
119.     assert diff(f(x, y, z), x, 3) == Derivative(f(x, y, z), x, 3)
120. 
121.     # issue 5028
122.     assert [diff(-z + x/y, sym) for sym in (z, x, y)] == [-1, 1/y, -x/y**2]
123.     assert diff(f(x, y, z), x, y, z, 2) == Derivative(f(x, y, z), x, y, z, z)
124.     assert diff(f(x, y, z), x, y, z, 2, evaluate=False) == \
125.         Derivative(f(x, y, z), x, y, z, z)
126.     assert Derivative(f(x, y, z), x, y, z)._eval_derivative(z) == \
127.         Derivative(f(x, y, z), x, y, z, z)
128.     assert Derivative(Derivative(f(x, y, z), x), y)._eval_derivative(z) == \
129.         Derivative(f(x, y, z), x, y, z)
130. 
131.     raises(TypeError, lambda: cos(x).diff((x, y)).variables)
132.     assert cos(x).diff((x, y))._wrt_variables == [x]
133. 
134.     # issue 23222
135.     assert sympify("a*x+b").diff("x") == sympify("a")
136. 
137. def test_Function():
138.     class myfunc(Function):
139.         @classmethod
140.         def eval(cls):  # zero args
141.             return
142. 
143.     assert myfunc.nargs == FiniteSet(0)
144.     assert myfunc().nargs == FiniteSet(0)
145.     raises(TypeError, lambda: myfunc(x).nargs)
146. 
147.     class myfunc(Function):
148.         @classmethod
149.         def eval(cls, x):  # one arg
150.             return
151. 
152.     assert myfunc.nargs == FiniteSet(1)
153.     assert myfunc(x).nargs == FiniteSet(1)
154.     raises(TypeError, lambda: myfunc(x, y).nargs)
155. 
156.     class myfunc(Function):
157.         @classmethod
158.         def eval(cls, *x):  # star args
159.             return
160. 
161.     assert myfunc.nargs == S.Naturals0
162.     assert myfunc(x).nargs == S.Naturals0
163. 
164. 
165. def test_nargs():
166.     f = Function('f')
167.     assert f.nargs == S.Naturals0
168.     assert f(1).nargs == S.Naturals0
169.     assert Function('f', nargs=2)(1, 2).nargs == FiniteSet(2)
170.     assert sin.nargs == FiniteSet(1)
171.     assert sin(2).nargs == FiniteSet(1)
172.     assert log.nargs == FiniteSet(1, 2)
173.     assert log(2).nargs == FiniteSet(1, 2)
174.     assert Function('f', nargs=2).nargs == FiniteSet(2)
175.     assert Function('f', nargs=0).nargs == FiniteSet(0)
176.     assert Function('f', nargs=(0, 1)).nargs == FiniteSet(0, 1)
177.     assert Function('f', nargs=None).nargs == S.Naturals0
178.     raises(ValueError, lambda: Function('f', nargs=()))
179. 
180. def test_nargs_inheritance():
181.     class f1(Function):
182.         nargs = 2
183.     class f2(f1):
184.         pass
185.     class f3(f2):
186.         pass
187.     class f4(f3):
188.         nargs = 1,2
189.     class f5(f4):
190.         pass
191.     class f6(f5):
192.         pass
193.     class f7(f6):
194.         nargs=None
195.     class f8(f7):
196.         pass
197.     class f9(f8):
198.         pass
199.     class f10(f9):
200.         nargs = 1
201.     class f11(f10):
202.         pass
203.     assert f1.nargs == FiniteSet(2)
204.     assert f2.nargs == FiniteSet(2)
205.     assert f3.nargs == FiniteSet(2)
206.     assert f4.nargs == FiniteSet(1, 2)
207.     assert f5.nargs == FiniteSet(1, 2)
208.     assert f6.nargs == FiniteSet(1, 2)
209.     assert f7.nargs == S.Naturals0
210.     assert f8.nargs == S.Naturals0
211.     assert f9.nargs == S.Naturals0
212.     assert f10.nargs == FiniteSet(1)
213.     assert f11.nargs == FiniteSet(1)
214. 
215. def test_arity():
216.     f = lambda x, y: 1
217.     assert arity(f) == 2
218.     def f(x, y, z=None):
219.         pass
220.     assert arity(f) == (2, 3)
221.     assert arity(lambda *x: x) is None
222.     assert arity(log) == (1, 2)
223. 
224. 
225. def test_Lambda():
226.     e = Lambda(x, x**2)
227.     assert e(4) == 16
228.     assert e(x) == x**2
229.     assert e(y) == y**2
230. 
231.     assert Lambda((), 42)() == 42
232.     assert unchanged(Lambda, (), 42)
233.     assert Lambda((), 42) != Lambda((), 43)
234.     assert Lambda((), f(x))() == f(x)
235.     assert Lambda((), 42).nargs == FiniteSet(0)
236. 
237.     assert unchanged(Lambda, (x,), x**2)
238.     assert Lambda(x, x**2) == Lambda((x,), x**2)
239.     assert Lambda(x, x**2) != Lambda(x, x**2 + 1)
240.     assert Lambda((x, y), x**y) != Lambda((y, x), y**x)
241.     assert Lambda((x, y), x**y) != Lambda((x, y), y**x)
242. 
243.     assert Lambda((x, y), x**y)(x, y) == x**y
244.     assert Lambda((x, y), x**y)(3, 3) == 3**3
245.     assert Lambda((x, y), x**y)(x, 3) == x**3
246.     assert Lambda((x, y), x**y)(3, y) == 3**y
247.     assert Lambda(x, f(x))(x) == f(x)
248.     assert Lambda(x, x**2)(e(x)) == x**4
249.     assert e(e(x)) == x**4
250. 
251.     x1, x2 = (Indexed('x', i) for i in (1, 2))
252.     assert Lambda((x1, x2), x1 + x2)(x, y) == x + y
253. 
254.     assert Lambda((x, y), x + y).nargs == FiniteSet(2)
255. 
256.     p = x, y, z, t
257.     assert Lambda(p, t*(x + y + z))(*p) == t * (x + y + z)
258. 
259.     eq = Lambda(x, 2*x) + Lambda(y, 2*y)
260.     assert eq != 2*Lambda(x, 2*x)
261.     assert eq.as_dummy() == 2*Lambda(x, 2*x).as_dummy()
262.     assert Lambda(x, 2*x) not in [ Lambda(x, x) ]
263.     raises(BadSignatureError, lambda: Lambda(1, x))
264.     assert Lambda(x, 1)(1) is S.One
265. 
266.     raises(BadSignatureError, lambda: Lambda((x, x), x + 2))
267.     raises(BadSignatureError, lambda: Lambda(((x, x), y), x))
268.     raises(BadSignatureError, lambda: Lambda(((y, x), x), x))
269.     raises(BadSignatureError, lambda: Lambda(((y, 1), 2), x))
270. 
271.     with warns_deprecated_sympy():
272.         assert Lambda([x, y], x+y) == Lambda((x, y), x+y)
273. 
274.     flam = Lambda(((x, y),), x + y)
275.     assert flam((2, 3)) == 5
276.     flam = Lambda(((x, y), z), x + y + z)
277.     assert flam((2, 3), 1) == 6
278.     flam = Lambda((((x, y), z),), x + y + z)
279.     assert flam(((2, 3), 1)) == 6
280.     raises(BadArgumentsError, lambda: flam(1, 2, 3))
281.     flam = Lambda( (x,), (x, x))
282.     assert flam(1,) == (1, 1)
283.     assert flam((1,)) == ((1,), (1,))
284.     flam = Lambda( ((x,),), (x, x))
285.     raises(BadArgumentsError, lambda: flam(1))
286.     assert flam((1,)) == (1, 1)
287. 
288.     # Previously TypeError was raised so this is potentially needed for
289.     # backwards compatibility.
290.     assert issubclass(BadSignatureError, TypeError)
291.     assert issubclass(BadArgumentsError, TypeError)
292. 
293.     # These are tested to see they don't raise:
294.     hash(Lambda(x, 2*x))
295.     hash(Lambda(x, x))  # IdentityFunction subclass
296. 
297. 
298. def test_IdentityFunction():
299.     assert Lambda(x, x) is Lambda(y, y) is S.IdentityFunction
300.     assert Lambda(x, 2*x) is not S.IdentityFunction
301.     assert Lambda((x, y), x) is not S.IdentityFunction
302. 
303. 
304. def test_Lambda_symbols():
305.     assert Lambda(x, 2*x).free_symbols == set()
306.     assert Lambda(x, x*y).free_symbols == {y}
307.     assert Lambda((), 42).free_symbols == set()
308.     assert Lambda((), x*y).free_symbols == {x,y}
309. 
310. 
311. def test_functionclas_symbols():
312.     assert f.free_symbols == set()
313. 
314. 
315. def test_Lambda_arguments():
316.     raises(TypeError, lambda: Lambda(x, 2*x)(x, y))
317.     raises(TypeError, lambda: Lambda((x, y), x + y)(x))
318.     raises(TypeError, lambda: Lambda((), 42)(x))
319. 
320. 
321. def test_Lambda_equality():
322.     assert Lambda((x, y), 2*x) == Lambda((x, y), 2*x)
323.     # these, of course, should never be equal
324.     assert Lambda(x, 2*x) != Lambda((x, y), 2*x)
325.     assert Lambda(x, 2*x) != 2*x
326.     # But it is tempting to want expressions that differ only
327.     # in bound symbols to compare the same.  But this is not what
328.     # Python's `==` is intended to do; two objects that compare
329.     # as equal means that they are indistibguishable and cache to the
330.     # same value.  We wouldn't want to expression that are
331.     # mathematically the same but written in different variables to be
332.     # interchanged else what is the point of allowing for different
333.     # variable names?
334.     assert Lambda(x, 2*x) != Lambda(y, 2*y)
335. 
336. 
337. def test_Subs():
338.     assert Subs(1, (), ()) is S.One
339.     # check null subs influence on hashing
340.     assert Subs(x, y, z) != Subs(x, y, 1)
341.     # neutral subs works
342.     assert Subs(x, x, 1).subs(x, y).has(y)
343.     # self mapping var/point
344.     assert Subs(Derivative(f(x), (x, 2)), x, x).doit() == f(x).diff(x, x)
345.     assert Subs(x, x, 0).has(x)  # it's a structural answer
346.     assert not Subs(x, x, 0).free_symbols
347.     assert Subs(Subs(x + y, x, 2), y, 1) == Subs(x + y, (x, y), (2, 1))
348.     assert Subs(x, (x,), (0,)) == Subs(x, x, 0)
349.     assert Subs(x, x, 0) == Subs(y, y, 0)
350.     assert Subs(x, x, 0).subs(x, 1) == Subs(x, x, 0)
351.     assert Subs(y, x, 0).subs(y, 1) == Subs(1, x, 0)
352.     assert Subs(f(x), x, 0).doit() == f(0)
353.     assert Subs(f(x**2), x**2, 0).doit() == f(0)
354.     assert Subs(f(x, y, z), (x, y, z), (0, 1, 1)) != \
355.         Subs(f(x, y, z), (x, y, z), (0, 0, 1))
356.     assert Subs(x, y, 2).subs(x, y).doit() == 2
357.     assert Subs(f(x, y), (x, y, z), (0, 1, 1)) != \
358.         Subs(f(x, y) + z, (x, y, z), (0, 1, 0))
359.     assert Subs(f(x, y), (x, y), (0, 1)).doit() == f(0, 1)
360.     assert Subs(Subs(f(x, y), x, 0), y, 1).doit() == f(0, 1)
361.     raises(ValueError, lambda: Subs(f(x, y), (x, y), (0, 0, 1)))
362.     raises(ValueError, lambda: Subs(f(x, y), (x, x, y), (0, 0, 1)))
363. 
364.     assert len(Subs(f(x, y), (x, y), (0, 1)).variables) == 2
365.     assert Subs(f(x, y), (x, y), (0, 1)).point == Tuple(0, 1)
366. 
367.     assert Subs(f(x), x, 0) == Subs(f(y), y, 0)
368.     assert Subs(f(x, y), (x, y), (0, 1)) == Subs(f(x, y), (y, x), (1, 0))
369.     assert Subs(f(x)*y, (x, y), (0, 1)) == Subs(f(y)*x, (y, x), (0, 1))
370.     assert Subs(f(x)*y, (x, y), (1, 1)) == Subs(f(y)*x, (x, y), (1, 1))
371. 
372.     assert Subs(f(x), x, 0).subs(x, 1).doit() == f(0)
373.     assert Subs(f(x), x, y).subs(y, 0) == Subs(f(x), x, 0)
374.     assert Subs(y*f(x), x, y).subs(y, 2) == Subs(2*f(x), x, 2)
375.     assert (2 * Subs(f(x), x, 0)).subs(Subs(f(x), x, 0), y) == 2*y
376. 
377.     assert Subs(f(x), x, 0).free_symbols == set()
378.     assert Subs(f(x, y), x, z).free_symbols == {y, z}
379. 
380.     assert Subs(f(x).diff(x), x, 0).doit(), Subs(f(x).diff(x), x, 0)
381.     assert Subs(1 + f(x).diff(x), x, 0).doit(), 1 + Subs(f(x).diff(x), x, 0)
382.     assert Subs(y*f(x, y).diff(x), (x, y), (0, 2)).doit() == \
383.         2*Subs(Derivative(f(x, 2), x), x, 0)
384.     assert Subs(y**2*f(x), x, 0).diff(y) == 2*y*f(0)
385. 
386.     e = Subs(y**2*f(x), x, y)
387.     assert e.diff(y) == e.doit().diff(y) == y**2*Derivative(f(y), y) + 2*y*f(y)
388. 
389.     assert Subs(f(x), x, 0) + Subs(f(x), x, 0) == 2*Subs(f(x), x, 0)
390.     e1 = Subs(z*f(x), x, 1)
391.     e2 = Subs(z*f(y), y, 1)
392.     assert e1 + e2 == 2*e1
393.     assert e1.__hash__() == e2.__hash__()
394.     assert Subs(z*f(x + 1), x, 1) not in [ e1, e2 ]
395.     assert Derivative(f(x), x).subs(x, g(x)) == Derivative(f(g(x)), g(x))
396.     assert Derivative(f(x), x).subs(x, x + y) == Subs(Derivative(f(x), x),
397.         x, x + y)
398.     assert Subs(f(x)*cos(y) + z, (x, y), (0, pi/3)).n(2) == \
399.         Subs(f(x)*cos(y) + z, (x, y), (0, pi/3)).evalf(2) == \
400.         z + Rational('1/2').n(2)*f(0)
401. 
402.     assert f(x).diff(x).subs(x, 0).subs(x, y) == f(x).diff(x).subs(x, 0)
403.     assert (x*f(x).diff(x).subs(x, 0)).subs(x, y) == y*f(x).diff(x).subs(x, 0)
404.     assert Subs(Derivative(g(x)**2, g(x), x), g(x), exp(x)
405.         ).doit() == 2*exp(x)
406.     assert Subs(Derivative(g(x)**2, g(x), x), g(x), exp(x)
407.         ).doit(deep=False) == 2*Derivative(exp(x), x)
408.     assert Derivative(f(x, g(x)), x).doit() == Derivative(
409.         f(x, g(x)), g(x))*Derivative(g(x), x) + Subs(Derivative(
410.         f(y, g(x)), y), y, x)
411. 
412. def test_doitdoit():
413.     done = Derivative(f(x, g(x)), x, g(x)).doit()
414.     assert done == done.doit()
415. 
416. 
417. @XFAIL
418. def test_Subs2():
419.     # this reflects a limitation of subs(), probably won't fix
420.     assert Subs(f(x), x**2, x).doit() == f(sqrt(x))
421. 
422. 
423. def test_expand_function():
424.     assert expand(x + y) == x + y
425.     assert expand(x + y, complex=True) == I*im(x) + I*im(y) + re(x) + re(y)
426.     assert expand((x + y)**11, modulus=11) == x**11 + y**11
427. 
428. 
429. def test_function_comparable():
430.     assert sin(x).is_comparable is False
431.     assert cos(x).is_comparable is False
432. 
433.     assert sin(Float('0.1')).is_comparable is True
434.     assert cos(Float('0.1')).is_comparable is True
435. 
436.     assert sin(E).is_comparable is True
437.     assert cos(E).is_comparable is True
438. 
439.     assert sin(Rational(1, 3)).is_comparable is True
440.     assert cos(Rational(1, 3)).is_comparable is True
441. 
442. 
443. def test_function_comparable_infinities():
444.     assert sin(oo).is_comparable is False
445.     assert sin(-oo).is_comparable is False
446.     assert sin(zoo).is_comparable is False
447.     assert sin(nan).is_comparable is False
448. 
449. 
450. def test_deriv1():
451.     # These all require derivatives evaluated at a point (issue 4719) to work.
452.     # See issue 4624
453.     assert f(2*x).diff(x) == 2*Subs(Derivative(f(x), x), x, 2*x)
454.     assert (f(x)**3).diff(x) == 3*f(x)**2*f(x).diff(x)
455.     assert (f(2*x)**3).diff(x) == 6*f(2*x)**2*Subs(
456.         Derivative(f(x), x), x, 2*x)
457. 
458.     assert f(2 + x).diff(x) == Subs(Derivative(f(x), x), x, x + 2)
459.     assert f(2 + 3*x).diff(x) == 3*Subs(
460.         Derivative(f(x), x), x, 3*x + 2)
461.     assert f(3*sin(x)).diff(x) == 3*cos(x)*Subs(
462.         Derivative(f(x), x), x, 3*sin(x))
463. 
464.     # See issue 8510
465.     assert f(x, x + z).diff(x) == (
466.         Subs(Derivative(f(y, x + z), y), y, x) +
467.         Subs(Derivative(f(x, y), y), y, x + z))
468.     assert f(x, x**2).diff(x) == (
469.         2*x*Subs(Derivative(f(x, y), y), y, x**2) +
470.         Subs(Derivative(f(y, x**2), y), y, x))
471.     # but Subs is not always necessary
472.     assert f(x, g(y)).diff(g(y)) == Derivative(f(x, g(y)), g(y))
473. 
474. 
475. def test_deriv2():
476.     assert (x**3).diff(x) == 3*x**2
477.     assert (x**3).diff(x, evaluate=False) != 3*x**2
478.     assert (x**3).diff(x, evaluate=False) == Derivative(x**3, x)
479. 
480.     assert diff(x**3, x) == 3*x**2
481.     assert diff(x**3, x, evaluate=False) != 3*x**2
482.     assert diff(x**3, x, evaluate=False) == Derivative(x**3, x)
483. 
484. 
485. def test_func_deriv():
486.     assert f(x).diff(x) == Derivative(f(x), x)
487.     # issue 4534
488.     assert f(x, y).diff(x, y) - f(x, y).diff(y, x) == 0
489.     assert Derivative(f(x, y), x, y).args[1:] == ((x, 1), (y, 1))
490.     assert Derivative(f(x, y), y, x).args[1:] == ((y, 1), (x, 1))
491.     assert (Derivative(f(x, y), x, y) - Derivative(f(x, y), y, x)).doit() == 0
492. 
493. 
494. def test_suppressed_evaluation():
495.     a = sin(0, evaluate=False)
496.     assert a != 0
497.     assert a.func is sin
498.     assert a.args == (0,)
499. 
500.

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 09:14:42,220 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the 'full content of the file sympy/core/tests/test_function.py'.\n2. Extended relevance:\n   - The provided context contains the entire content of the requested file, from line 1 to 500. Therefore, the entire block is relevant and necessary to fulfill the user's request.", relative_path='sympy/core/tests/test_function.py', start_line=1, end_line=500)]
2025-12-21 09:14:42,221 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file sympy/core/tests/test_function.py.
2025-12-21 09:14:42,222 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 09:14:42,222 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 09:14:42,222 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 1 existing contexts
2025-12-21 09:14:42,222 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-21 09:14:42,223 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .circleci
|   └── config.yml
├── .github
|   └── workflows
|       ├── ci-sage.yml
|       ├── comment-on-pr.yml
|       ├── docs-preview.yml
|       ├── release.yml
|       └── runtests.yml
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.md
├── bin
|   ├── ask_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_check.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_optional_dependencies.py
|   ├── test_py2_import.py
|   ├── test_setup.py
|   ├── test_sphinx.sh
|   ├── test_submodule_imports.py
|   ├── test_symengine.py
|   ├── test_tensorflow.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── aptinstall.sh
|   ├── cheatsheet
|   ├── convert-svg-to-pdf.sh
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   └── numpydoc.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   ├── requirements.txt
|   └── src
|       ├── _pygments
|       |   └── styles.py
|       ├── _static
|       |   └── custom.css
|       ├── _templates
|       |   └── sidebar
|       |       └── versions.html
|       ├── citing.md
|       ├── conf.py
|       ├── explanation
|       |   ├── active-deprecations.md
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   └── special_topics
|       |       ├── classification.rst
|       |       ├── finite_diff_derivatives.rst
|       |       └── index.rst
|       ├── guides
|       |   ├── assumptions.rst
|       |   ├── booleans.rst
|       |   ├── contributing
|       |   |   ├── build-docs.rst
|       |   |   ├── debug.rst
|       |   |   ├── dependencies.md
|       |   |   ├── deprecations.md
|       |   |   ├── dev-setup.rst
|       |   |   ├── docstring.rst
|       |   |   ├── documentation-style-guide.rst
|       |   |   ├── index.rst
|       |   |   └── make-a-contribution.rst
|       |   ├── getting_started
|       |   |   ├── index.rst
|       |   |   └── install.md
|       |   └── index.rst
|       ├── index.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── index.rst
|       |   |   ├── predicates.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── group_numbers.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   ├── index.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── normalforms.rst
|       |   |   ├── sparse.rst
|       |   |   └── sparsetools.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── control
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── domainmatrix.rst
|       |   |   ├── domainsintro.rst
|       |   |   ├── domainsref.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── numberfields.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   ├── solvers.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── fu.rst
|       |   |   ├── hyperexpand.rst
|       |   |   ├── index.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── index.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── array_expressions.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   ├── tensor.rst
|       |   |   └── toperators.rst
|       |   ├── testing
|       |   |   ├── index.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   └── runtests.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── exceptions.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       ├── intro.rst
|       |       └── vector_integration.rst
|       ├── pics
|       ├── reference
|       |   ├── index.rst
|       |   └── public
|       |       ├── basics
|       |       ├── codegeneration
|       |       ├── logic
|       |       ├── matrices
|       |       ├── numbertheory
|       |       ├── physics
|       |       ├── topics
|       |       └── utilities
|       └── tutorial
|           ├── basic_operations.rst
|           ├── calculus.rst
|           ├── features.rst
|           ├── gotchas.rst
|           ├── index.rst
|           ├── intro.rst
|           ├── manipulation.rst
|           ├── matrices.rst
|           ├── next.rst
|           ├── preliminaries.rst
|           ├── printing.rst
|           ├── simplification.rst
|           └── solvers.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── aptinstall.sh
|   ├── authors.py
|   ├── build_docs.py
|   ├── ci_release_script.sh
|   ├── compare_tar_against_git.py
|   ├── fabfile.py
|   ├── github_release.py
|   ├── helpers.py
|   ├── pull_and_run_rever.sh
|   ├── release.sh
|   ├── releasecheck.py
|   ├── requirements.txt
|   ├── sha256.py
|   ├── test_install.py
|   ├── update_docs.py
|   └── update_requirements.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── facts.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── predicates
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── relation
    |   |   ├── __init__.py
    |   |   ├── binrel.py
    |   |   └── equality.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_assumptions_2.py
    |   |   ├── test_context.py
    |   |   ├── test_matrices.py
    |   |   ├── test_query.py
    |   |   ├── test_refine.py
    |   |   ├── test_satask.py
    |   |   ├── test_sathandlers.py
    |   |   └── test_wrapper.py
    |   └── wrapper.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── accumulationbounds.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_accumulationbounds.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── abstract_nodes.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── numpy_nodes.py
    |   ├── pynodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   ├── scipy_nodes.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_abstract_nodes.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_numpy_nodes.py
    |       ├── test_pynodes.py
    |       ├── test_pyutils.py
    |       ├── test_rewriting.py
    |       └── test_scipy_nodes.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── group_numbers.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── schur_number.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_group_numbers.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_schur_number.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── _print_helpers.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── kind.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── parameters.py
    |   ├── power.py
    |   ├── random.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── sorting.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_kind.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_parameters.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_random.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_sorting.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_traversal.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   ├── trace.py
    |   └── traversal.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── gmpy.py
    |   ├── importtools.py
    |   ├── pythonmpq.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_pythonmpq.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── printing.py
    |   ├── session.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_interactive.py
    |   |   └── test_ipython.py
    |   └── traversal.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   ├── minisat22_wrapper.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── decompositions.py
    |   ├── dense.py
    |   ├── determinant.py
    |   ├── eigen.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── companion.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── permutation.py
    |   |   ├── sets.py
    |   |   ├── slice.py
    |   |   ├── special.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_companion.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_permutation.py
    |   |   |   ├── test_sets.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_special.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── graph.py
    |   ├── immutable.py
    |   ├── inverse.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── reductions.py
    |   ├── repmatrix.py
    |   ├── solvers.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   ├── subspaces.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_commonmatrix.py
    |   |   ├── test_decompositions.py
    |   |   ├── test_determinant.py
    |   |   ├── test_eigen.py
    |   |   ├── test_graph.py
    |   |   ├── test_immutable.py
    |   |   ├── test_interactions.py
    |   |   ├── test_matrices.py
    |   |   ├── test_normalforms.py
    |   |   ├── test_reductions.py
    |   |   ├── test_solvers.py
    |   |   ├── test_sparse.py
    |   |   ├── test_sparsetools.py
    |   |   └── test_subspaces.py
    |   └── utilities.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── digits.py
    |   ├── ecm.py
    |   ├── egyptian_fraction.py
    |   ├── elliptic_curve.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── qs.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_digits.py
    |       ├── test_ecm.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_elliptic_curve.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       ├── test_qs.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── README.txt
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_ast_parser.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── control
    |   |   ├── __init__.py
    |   |   ├── control_plots.py
    |   |   ├── lti.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_control_plots.py
    |   |       └── test_lti.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── joint.py
    |   |   ├── jointsmethod.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── method.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_joint.py
    |   |       ├── test_jointsmethod.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_method.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_anticommutator.py
    |   |   |   ├── test_boson.py
    |   |   |   ├── test_cartesian.py
    |   |   |   ├── test_cg.py
    |   |   |   ├── test_circuitplot.py
    |   |   |   ├── test_circuitutils.py
    |   |   |   ├── test_commutator.py
    |   |   |   ├── test_constants.py
    |   |   |   ├── test_dagger.py
    |   |   |   ├── test_density.py
    |   |   |   ├── test_fermion.py
    |   |   |   ├── test_gate.py
    |   |   |   ├── test_grover.py
    |   |   |   ├── test_hilbert.py
    |   |   |   ├── test_identitysearch.py
    |   |   |   ├── test_innerproduct.py
    |   |   |   ├── test_matrixutils.py
    |   |   |   ├── test_operator.py
    |   |   |   ├── test_operatorordering.py
    |   |   |   ├── test_operatorset.py
    |   |   |   ├── test_pauli.py
    |   |   |   ├── test_piab.py
    |   |   |   ├── test_printing.py
    |   |   |   ├── test_qapply.py
    |   |   |   ├── test_qasm.py
    |   |   |   ├── test_qexpr.py
    |   |   |   ├── test_qft.py
    |   |   |   ├── test_qubit.py
    |   |   |   ├── test_represent.py
    |   |   |   ├── test_sho1d.py
    |   |   |   ├── test_shor.py
    |   |   |   ├── test_spin.py
    |   |   |   ├── test_state.py
    |   |   |   ├── test_tensorproduct.py
    |   |   |   └── test_trace.py
    |   |   └── trace.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domainmatrix.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── expressionrawdomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gaussiandomains.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── matrices
    |   |   ├── __init__.py
    |   |   ├── ddm.py
    |   |   ├── dense.py
    |   |   ├── domainmatrix.py
    |   |   ├── domainscalar.py
    |   |   ├── eigen.py
    |   |   ├── exceptions.py
    |   |   ├── linsolve.py
    |   |   ├── normalforms.py
    |   |   ├── sdm.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_ddm.py
    |   |       ├── test_dense.py
    |   |       ├── test_domainmatrix.py
    |   |       ├── test_domainscalar.py
    |   |       ├── test_eigen.py
    |   |       ├── test_linsolve.py
    |   |       ├── test_normalforms.py
    |   |       └── test_sdm.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields
    |   |   ├── __init__.py
    |   |   ├── basis.py
    |   |   ├── exceptions.py
    |   |   ├── minpoly.py
    |   |   ├── modules.py
    |   |   ├── primes.py
    |   |   ├── subfield.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_basis.py
    |   |   |   ├── test_minpoly.py
    |   |   |   ├── test_modules.py
    |   |   |   ├── test_numbers.py
    |   |   |   ├── test_primes.py
    |   |   |   ├── test_subfield.py
    |   |   |   └── test_utilities.py
    |   |   └── utilities.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── aesaracode.py
    |   ├── c.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxx.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── fortran.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── numpy.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_aesaracode.py
    |   |   ├── test_c.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cupy.py
    |   |   ├── test_cxx.py
    |   |   ├── test_dot.py
    |   |   ├── test_fortran.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── comparison.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── issubset.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine
    |   |   ├── __init__.py
    |   |   ├── diophantine.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_diophantine.py
    |   ├── inequalities.py
    |   ├── ode
    |   |   ├── __init__.py
    |   |   ├── hypergeometric.py
    |   |   ├── lie_group.py
    |   |   ├── nonhomogeneous.py
    |   |   ├── ode.py
    |   |   ├── riccati.py
    |   |   ├── single.py
    |   |   ├── subscheck.py
    |   |   ├── systems.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_lie_group.py
    |   |       ├── test_ode.py
    |   |       ├── test_riccati.py
    |   |       ├── test_single.py
    |   |       ├── test_subscheck.py
    |   |       └── test_systems.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── compound_rv.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── matrix_distributions.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── sampling
    |   |   ├── __init__.py
    |   |   ├── sample_numpy.py
    |   |   ├── sample_pymc3.py
    |   |   ├── sample_scipy.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_sample_continuous_rv.py
    |   |       ├── test_sample_discrete_rv.py
    |   |       └── test_sample_finite_rv.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_multivariate_probability.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_compound_rv.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_matrix_distributions.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       ├── test_symbolic_multivariate.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── array_derivatives.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── expressions
    |   |   |   ├── __init__.py
    |   |   |   ├── array_expressions.py
    |   |   |   ├── arrayexpr_derivatives.py
    |   |   |   ├── conv_array_to_indexed.py
    |   |   |   ├── conv_array_to_matrix.py
    |   |   |   ├── conv_indexed_to_array.py
    |   |   |   ├── conv_matrix_to_array.py
    |   |   |   ├── tests
    |   |   |   └── utils.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_array_derivatives.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── testing
    |   ├── __init__.py
    |   ├── benchmarking.py
    |   ├── matrices.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_module_imports.py
    |   |   └── test_pytest.py
    |   └── tmpfiles.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_matchpy_connector.py
    |   |   ├── test_misc.py
    |   |   ├── test_pickling.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── implicitregion.py
        ├── integrals.py
        ├── operators.py
        ├── orienters.py
        ├── parametricregion.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_implicitregion.py
        |   ├── test_integrals.py
        |   ├── test_operators.py
        |   ├── test_parametricregion.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Using symbols to create functions doesn't work if there is an extra layer of parentheses

Description: Sympy version == 1.10.1

Using `symbols` to create symbol-like objects like instances of `Function` as shown in the [documentation](https://docs.sympy.org/latest/modules/core.html?highlight=symbols#symbols) creates objects of class `Symbol` instead of `Function` if there is an extra layer of parentheses.

The extra layer of parentheses are necessary to deconstruct the output as separate tuples.

Running the code:
```
q, u = smp.symbols(('q:2', 'u:2'), cls=smp.Function)
print(type(q[0]))
```
#### Expected result:
<class 'sympy.core.function.UndefinedFunction'>

#### Actual result: 
<class 'sympy.core.symbol.Symbol'>

Patch information:
diff --git a/sympy/core/symbol.py b/sympy/core/symbol.py
index f4a555c13f..2aca8bab27 100644
--- a/sympy/core/symbol.py
+++ b/sympy/core/symbol.py
@@ -791,7 +791,7 @@ def literal(s):
         return tuple(result)
     else:
         for name in names:
-            result.append(symbols(name, **args))
+            result.append(symbols(name, cls=cls, **args))
 
         return type(names)(result)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file sympy/core/tests/test_symbol.py.
Extra Requirements: 
Purpose: I need to find existing test cases that cover the functionality of creating symbols with a specific class, which will help in identifying tests that are relevant to the bug report.

Previous refined query 2:
Essential Query: Please provide the full content of the file sympy/core/tests/test_function.py.
Extra Requirements: 
Purpose: I need to find test cases related to the creation of `Function` objects to identify tests relevant to the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/core/tests/test_function.py
Line number range: 1 - 500
Content:
1. from sympy.concrete.summations import Sum
2. from sympy.core.basic import Basic, _aresame
3. from sympy.core.cache import clear_cache
4. from sympy.core.containers import Dict, Tuple
5. from sympy.core.expr import Expr, unchanged
6. from sympy.core.function import (Subs, Function, diff, Lambda, expand,
7.     nfloat, Derivative)
8. from sympy.core.numbers import E, Float, zoo, Rational, pi, I, oo, nan
9. from sympy.core.power import Pow
10. from sympy.core.relational import Eq
11. from sympy.core.singleton import S
12. from sympy.core.symbol import symbols, Dummy, Symbol
13. from sympy.functions.elementary.complexes import im, re
14. from sympy.functions.elementary.exponential import log, exp
15. from sympy.functions.elementary.miscellaneous import sqrt
16. from sympy.functions.elementary.piecewise import Piecewise
17. from sympy.functions.elementary.trigonometric import sin, cos, acos
18. from sympy.functions.special.error_functions import expint
19. from sympy.functions.special.gamma_functions import loggamma, polygamma
20. from sympy.matrices.dense import Matrix
21. from sympy.printing.str import sstr
22. from sympy.series.order import O
23. from sympy.tensor.indexed import Indexed
24. from sympy.core.function import (PoleError, _mexpand, arity,
25.         BadSignatureError, BadArgumentsError)
26. from sympy.core.parameters import _exp_is_pow
27. from sympy.core.sympify import sympify, SympifyError
28. from sympy.matrices import MutableMatrix, ImmutableMatrix
29. from sympy.sets.sets import FiniteSet
30. from sympy.solvers.solveset import solveset
31. from sympy.tensor.array import NDimArray
32. from sympy.utilities.iterables import subsets, variations
33. from sympy.testing.pytest import XFAIL, raises, warns_deprecated_sympy, _both_exp_pow
34. 
35. from sympy.abc import t, w, x, y, z
36. f, g, h = symbols('f g h', cls=Function)
37. _xi_1, _xi_2, _xi_3 = [Dummy() for i in range(3)]
38. 
39. def test_f_expand_complex():
40.     x = Symbol('x', real=True)
41. 
42.     assert f(x).expand(complex=True) == I*im(f(x)) + re(f(x))
43.     assert exp(x).expand(complex=True) == exp(x)
44.     assert exp(I*x).expand(complex=True) == cos(x) + I*sin(x)
45.     assert exp(z).expand(complex=True) == cos(im(z))*exp(re(z)) + \
46.         I*sin(im(z))*exp(re(z))
47. 
48. 
49. def test_bug1():
50.     e = sqrt(-log(w))
51.     assert e.subs(log(w), -x) == sqrt(x)
52. 
53.     e = sqrt(-5*log(w))
54.     assert e.subs(log(w), -x) == sqrt(5*x)
55. 
56. 
57. def test_general_function():
58.     nu = Function('nu')
59. 
60.     e = nu(x)
61.     edx = e.diff(x)
62.     edy = e.diff(y)
63.     edxdx = e.diff(x).diff(x)
64.     edxdy = e.diff(x).diff(y)
65.     assert e == nu(x)
66.     assert edx != nu(x)
67.     assert edx == diff(nu(x), x)
68.     assert edy == 0
69.     assert edxdx == diff(diff(nu(x), x), x)
70.     assert edxdy == 0
71. 
72. def test_general_function_nullary():
73.     nu = Function('nu')
74. 
75.     e = nu()
76.     edx = e.diff(x)
77.     edxdx = e.diff(x).diff(x)
78.     assert e == nu()
79.     assert edx != nu()
80.     assert edx == 0
81.     assert edxdx == 0
82. 
83. 
84. def test_derivative_subs_bug():
85.     e = diff(g(x), x)
86.     assert e.subs(g(x), f(x)) != e
87.     assert e.subs(g(x), f(x)) == Derivative(f(x), x)
88.     assert e.subs(g(x), -f(x)) == Derivative(-f(x), x)
89. 
90.     assert e.subs(x, y) == Derivative(g(y), y)
91. 
92. 
93. def test_derivative_subs_self_bug():
94.     d = diff(f(x), x)
95. 
96.     assert d.subs(d, y) == y
97. 
98. 
99. def test_derivative_linearity():
100.     assert diff(-f(x), x) == -diff(f(x), x)
101.     assert diff(8*f(x), x) == 8*diff(f(x), x)
102.     assert diff(8*f(x), x) != 7*diff(f(x), x)
103.     assert diff(8*f(x)*x, x) == 8*f(x) + 8*x*diff(f(x), x)
104.     assert diff(8*f(x)*y*x, x).expand() == 8*y*f(x) + 8*y*x*diff(f(x), x)
105. 
106. 
107. def test_derivative_evaluate():
108.     assert Derivative(sin(x), x) != diff(sin(x), x)
109.     assert Derivative(sin(x), x).doit() == diff(sin(x), x)
110. 
111.     assert Derivative(Derivative(f(x), x), x) == diff(f(x), x, x)
112.     assert Derivative(sin(x), x, 0) == sin(x)
113.     assert Derivative(sin(x), (x, y), (x, -y)) == sin(x)
114. 
115. 
116. def test_diff_symbols():
117.     assert diff(f(x, y, z), x, y, z) == Derivative(f(x, y, z), x, y, z)
118.     assert diff(f(x, y, z), x, x, x) == Derivative(f(x, y, z), x, x, x) == Derivative(f(x, y, z), (x, 3))
119.     assert diff(f(x, y, z), x, 3) == Derivative(f(x, y, z), x, 3)
120. 
121.     # issue 5028
122.     assert [diff(-z + x/y, sym) for sym in (z, x, y)] == [-1, 1/y, -x/y**2]
123.     assert diff(f(x, y, z), x, y, z, 2) == Derivative(f(x, y, z), x, y, z, z)
124.     assert diff(f(x, y, z), x, y, z, 2, evaluate=False) == \
125.         Derivative(f(x, y, z), x, y, z, z)
126.     assert Derivative(f(x, y, z), x, y, z)._eval_derivative(z) == \
127.         Derivative(f(x, y, z), x, y, z, z)
128.     assert Derivative(Derivative(f(x, y, z), x), y)._eval_derivative(z) == \
129.         Derivative(f(x, y, z), x, y, z)
130. 
131.     raises(TypeError, lambda: cos(x).diff((x, y)).variables)
132.     assert cos(x).diff((x, y))._wrt_variables == [x]
133. 
134.     # issue 23222
135.     assert sympify("a*x+b").diff("x") == sympify("a")
136. 
137. def test_Function():
138.     class myfunc(Function):
139.         @classmethod
140.         def eval(cls):  # zero args
141.             return
142. 
143.     assert myfunc.nargs == FiniteSet(0)
144.     assert myfunc().nargs == FiniteSet(0)
145.     raises(TypeError, lambda: myfunc(x).nargs)
146. 
147.     class myfunc(Function):
148.         @classmethod
149.         def eval(cls, x):  # one arg
150.             return
151. 
152.     assert myfunc.nargs == FiniteSet(1)
153.     assert myfunc(x).nargs == FiniteSet(1)
154.     raises(TypeError, lambda: myfunc(x, y).nargs)
155. 
156.     class myfunc(Function):
157.         @classmethod
158.         def eval(cls, *x):  # star args
159.             return
160. 
161.     assert myfunc.nargs == S.Naturals0
162.     assert myfunc(x).nargs == S.Naturals0
163. 
164. 
165. def test_nargs():
166.     f = Function('f')
167.     assert f.nargs == S.Naturals0
168.     assert f(1).nargs == S.Naturals0
169.     assert Function('f', nargs=2)(1, 2).nargs == FiniteSet(2)
170.     assert sin.nargs == FiniteSet(1)
171.     assert sin(2).nargs == FiniteSet(1)
172.     assert log.nargs == FiniteSet(1, 2)
173.     assert log(2).nargs == FiniteSet(1, 2)
174.     assert Function('f', nargs=2).nargs == FiniteSet(2)
175.     assert Function('f', nargs=0).nargs == FiniteSet(0)
176.     assert Function('f', nargs=(0, 1)).nargs == FiniteSet(0, 1)
177.     assert Function('f', nargs=None).nargs == S.Naturals0
178.     raises(ValueError, lambda: Function('f', nargs=()))
179. 
180. def test_nargs_inheritance():
181.     class f1(Function):
182.         nargs = 2
183.     class f2(f1):
184.         pass
185.     class f3(f2):
186.         pass
187.     class f4(f3):
188.         nargs = 1,2
189.     class f5(f4):
190.         pass
191.     class f6(f5):
192.         pass
193.     class f7(f6):
194.         nargs=None
195.     class f8(f7):
196.         pass
197.     class f9(f8):
198.         pass
199.     class f10(f9):
200.         nargs = 1
201.     class f11(f10):
202.         pass
203.     assert f1.nargs == FiniteSet(2)
204.     assert f2.nargs == FiniteSet(2)
205.     assert f3.nargs == FiniteSet(2)
206.     assert f4.nargs == FiniteSet(1, 2)
207.     assert f5.nargs == FiniteSet(1, 2)
208.     assert f6.nargs == FiniteSet(1, 2)
209.     assert f7.nargs == S.Naturals0
210.     assert f8.nargs == S.Naturals0
211.     assert f9.nargs == S.Naturals0
212.     assert f10.nargs == FiniteSet(1)
213.     assert f11.nargs == FiniteSet(1)
214. 
215. def test_arity():
216.     f = lambda x, y: 1
217.     assert arity(f) == 2
218.     def f(x, y, z=None):
219.         pass
220.     assert arity(f) == (2, 3)
221.     assert arity(lambda *x: x) is None
222.     assert arity(log) == (1, 2)
223. 
224. 
225. def test_Lambda():
226.     e = Lambda(x, x**2)
227.     assert e(4) == 16
228.     assert e(x) == x**2
229.     assert e(y) == y**2
230. 
231.     assert Lambda((), 42)() == 42
232.     assert unchanged(Lambda, (), 42)
233.     assert Lambda((), 42) != Lambda((), 43)
234.     assert Lambda((), f(x))() == f(x)
235.     assert Lambda((), 42).nargs == FiniteSet(0)
236. 
237.     assert unchanged(Lambda, (x,), x**2)
238.     assert Lambda(x, x**2) == Lambda((x,), x**2)
239.     assert Lambda(x, x**2) != Lambda(x, x**2 + 1)
240.     assert Lambda((x, y), x**y) != Lambda((y, x), y**x)
241.     assert Lambda((x, y), x**y) != Lambda((x, y), y**x)
242. 
243.     assert Lambda((x, y), x**y)(x, y) == x**y
244.     assert Lambda((x, y), x**y)(3, 3) == 3**3
245.     assert Lambda((x, y), x**y)(x, 3) == x**3
246.     assert Lambda((x, y), x**y)(3, y) == 3**y
247.     assert Lambda(x, f(x))(x) == f(x)
248.     assert Lambda(x, x**2)(e(x)) == x**4
249.     assert e(e(x)) == x**4
250. 
251.     x1, x2 = (Indexed('x', i) for i in (1, 2))
252.     assert Lambda((x1, x2), x1 + x2)(x, y) == x + y
253. 
254.     assert Lambda((x, y), x + y).nargs == FiniteSet(2)
255. 
256.     p = x, y, z, t
257.     assert Lambda(p, t*(x + y + z))(*p) == t * (x + y + z)
258. 
259.     eq = Lambda(x, 2*x) + Lambda(y, 2*y)
260.     assert eq != 2*Lambda(x, 2*x)
261.     assert eq.as_dummy() == 2*Lambda(x, 2*x).as_dummy()
262.     assert Lambda(x, 2*x) not in [ Lambda(x, x) ]
263.     raises(BadSignatureError, lambda: Lambda(1, x))
264.     assert Lambda(x, 1)(1) is S.One
265. 
266.     raises(BadSignatureError, lambda: Lambda((x, x), x + 2))
267.     raises(BadSignatureError, lambda: Lambda(((x, x), y), x))
268.     raises(BadSignatureError, lambda: Lambda(((y, x), x), x))
269.     raises(BadSignatureError, lambda: Lambda(((y, 1), 2), x))
270. 
271.     with warns_deprecated_sympy():
272.         assert Lambda([x, y], x+y) == Lambda((x, y), x+y)
273. 
274.     flam = Lambda(((x, y),), x + y)
275.     assert flam((2, 3)) == 5
276.     flam = Lambda(((x, y), z), x + y + z)
277.     assert flam((2, 3), 1) == 6
278.     flam = Lambda((((x, y), z),), x + y + z)
279.     assert flam(((2, 3), 1)) == 6
280.     raises(BadArgumentsError, lambda: flam(1, 2, 3))
281.     flam = Lambda( (x,), (x, x))
282.     assert flam(1,) == (1, 1)
283.     assert flam((1,)) == ((1,), (1,))
284.     flam = Lambda( ((x,),), (x, x))
285.     raises(BadArgumentsError, lambda: flam(1))
286.     assert flam((1,)) == (1, 1)
287. 
288.     # Previously TypeError was raised so this is potentially needed for
289.     # backwards compatibility.
290.     assert issubclass(BadSignatureError, TypeError)
291.     assert issubclass(BadArgumentsError, TypeError)
292. 
293.     # These are tested to see they don't raise:
294.     hash(Lambda(x, 2*x))
295.     hash(Lambda(x, x))  # IdentityFunction subclass
296. 
297. 
298. def test_IdentityFunction():
299.     assert Lambda(x, x) is Lambda(y, y) is S.IdentityFunction
300.     assert Lambda(x, 2*x) is not S.IdentityFunction
301.     assert Lambda((x, y), x) is not S.IdentityFunction
302. 
303. 
304. def test_Lambda_symbols():
305.     assert Lambda(x, 2*x).free_symbols == set()
306.     assert Lambda(x, x*y).free_symbols == {y}
307.     assert Lambda((), 42).free_symbols == set()
308.     assert Lambda((), x*y).free_symbols == {x,y}
309. 
310. 
311. def test_functionclas_symbols():
312.     assert f.free_symbols == set()
313. 
314. 
315. def test_Lambda_arguments():
316.     raises(TypeError, lambda: Lambda(x, 2*x)(x, y))
317.     raises(TypeError, lambda: Lambda((x, y), x + y)(x))
318.     raises(TypeError, lambda: Lambda((), 42)(x))
319. 
320. 
321. def test_Lambda_equality():
322.     assert Lambda((x, y), 2*x) == Lambda((x, y), 2*x)
323.     # these, of course, should never be equal
324.     assert Lambda(x, 2*x) != Lambda((x, y), 2*x)
325.     assert Lambda(x, 2*x) != 2*x
326.     # But it is tempting to want expressions that differ only
327.     # in bound symbols to compare the same.  But this is not what
328.     # Python's `==` is intended to do; two objects that compare
329.     # as equal means that they are indistibguishable and cache to the
330.     # same value.  We wouldn't want to expression that are
331.     # mathematically the same but written in different variables to be
332.     # interchanged else what is the point of allowing for different
333.     # variable names?
334.     assert Lambda(x, 2*x) != Lambda(y, 2*y)
335. 
336. 
337. def test_Subs():
338.     assert Subs(1, (), ()) is S.One
339.     # check null subs influence on hashing
340.     assert Subs(x, y, z) != Subs(x, y, 1)
341.     # neutral subs works
342.     assert Subs(x, x, 1).subs(x, y).has(y)
343.     # self mapping var/point
344.     assert Subs(Derivative(f(x), (x, 2)), x, x).doit() == f(x).diff(x, x)
345.     assert Subs(x, x, 0).has(x)  # it's a structural answer
346.     assert not Subs(x, x, 0).free_symbols
347.     assert Subs(Subs(x + y, x, 2), y, 1) == Subs(x + y, (x, y), (2, 1))
348.     assert Subs(x, (x,), (0,)) == Subs(x, x, 0)
349.     assert Subs(x, x, 0) == Subs(y, y, 0)
350.     assert Subs(x, x, 0).subs(x, 1) == Subs(x, x, 0)
351.     assert Subs(y, x, 0).subs(y, 1) == Subs(1, x, 0)
352.     assert Subs(f(x), x, 0).doit() == f(0)
353.     assert Subs(f(x**2), x**2, 0).doit() == f(0)
354.     assert Subs(f(x, y, z), (x, y, z), (0, 1, 1)) != \
355.         Subs(f(x, y, z), (x, y, z), (0, 0, 1))
356.     assert Subs(x, y, 2).subs(x, y).doit() == 2
357.     assert Subs(f(x, y), (x, y, z), (0, 1, 1)) != \
358.         Subs(f(x, y) + z, (x, y, z), (0, 1, 0))
359.     assert Subs(f(x, y), (x, y), (0, 1)).doit() == f(0, 1)
360.     assert Subs(Subs(f(x, y), x, 0), y, 1).doit() == f(0, 1)
361.     raises(ValueError, lambda: Subs(f(x, y), (x, y), (0, 0, 1)))
362.     raises(ValueError, lambda: Subs(f(x, y), (x, x, y), (0, 0, 1)))
363. 
364.     assert len(Subs(f(x, y), (x, y), (0, 1)).variables) == 2
365.     assert Subs(f(x, y), (x, y), (0, 1)).point == Tuple(0, 1)
366. 
367.     assert Subs(f(x), x, 0) == Subs(f(y), y, 0)
368.     assert Subs(f(x, y), (x, y), (0, 1)) == Subs(f(x, y), (y, x), (1, 0))
369.     assert Subs(f(x)*y, (x, y), (0, 1)) == Subs(f(y)*x, (y, x), (0, 1))
370.     assert Subs(f(x)*y, (x, y), (1, 1)) == Subs(f(y)*x, (x, y), (1, 1))
371. 
372.     assert Subs(f(x), x, 0).subs(x, 1).doit() == f(0)
373.     assert Subs(f(x), x, y).subs(y, 0) == Subs(f(x), x, 0)
374.     assert Subs(y*f(x), x, y).subs(y, 2) == Subs(2*f(x), x, 2)
375.     assert (2 * Subs(f(x), x, 0)).subs(Subs(f(x), x, 0), y) == 2*y
376. 
377.     assert Subs(f(x), x, 0).free_symbols == set()
378.     assert Subs(f(x, y), x, z).free_symbols == {y, z}
379. 
380.     assert Subs(f(x).diff(x), x, 0).doit(), Subs(f(x).diff(x), x, 0)
381.     assert Subs(1 + f(x).diff(x), x, 0).doit(), 1 + Subs(f(x).diff(x), x, 0)
382.     assert Subs(y*f(x, y).diff(x), (x, y), (0, 2)).doit() == \
383.         2*Subs(Derivative(f(x, 2), x), x, 0)
384.     assert Subs(y**2*f(x), x, 0).diff(y) == 2*y*f(0)
385. 
386.     e = Subs(y**2*f(x), x, y)
387.     assert e.diff(y) == e.doit().diff(y) == y**2*Derivative(f(y), y) + 2*y*f(y)
388. 
389.     assert Subs(f(x), x, 0) + Subs(f(x), x, 0) == 2*Subs(f(x), x, 0)
390.     e1 = Subs(z*f(x), x, 1)
391.     e2 = Subs(z*f(y), y, 1)
392.     assert e1 + e2 == 2*e1
393.     assert e1.__hash__() == e2.__hash__()
394.     assert Subs(z*f(x + 1), x, 1) not in [ e1, e2 ]
395.     assert Derivative(f(x), x).subs(x, g(x)) == Derivative(f(g(x)), g(x))
396.     assert Derivative(f(x), x).subs(x, x + y) == Subs(Derivative(f(x), x),
397.         x, x + y)
398.     assert Subs(f(x)*cos(y) + z, (x, y), (0, pi/3)).n(2) == \
399.         Subs(f(x)*cos(y) + z, (x, y), (0, pi/3)).evalf(2) == \
400.         z + Rational('1/2').n(2)*f(0)
401. 
402.     assert f(x).diff(x).subs(x, 0).subs(x, y) == f(x).diff(x).subs(x, 0)
403.     assert (x*f(x).diff(x).subs(x, 0)).subs(x, y) == y*f(x).diff(x).subs(x, 0)
404.     assert Subs(Derivative(g(x)**2, g(x), x), g(x), exp(x)
405.         ).doit() == 2*exp(x)
406.     assert Subs(Derivative(g(x)**2, g(x), x), g(x), exp(x)
407.         ).doit(deep=False) == 2*Derivative(exp(x), x)
408.     assert Derivative(f(x, g(x)), x).doit() == Derivative(
409.         f(x, g(x)), g(x))*Derivative(g(x), x) + Subs(Derivative(
410.         f(y, g(x)), y), y, x)
411. 
412. def test_doitdoit():
413.     done = Derivative(f(x, g(x)), x, g(x)).doit()
414.     assert done == done.doit()
415. 
416. 
417. @XFAIL
418. def test_Subs2():
419.     # this reflects a limitation of subs(), probably won't fix
420.     assert Subs(f(x), x**2, x).doit() == f(sqrt(x))
421. 
422. 
423. def test_expand_function():
424.     assert expand(x + y) == x + y
425.     assert expand(x + y, complex=True) == I*im(x) + I*im(y) + re(x) + re(y)
426.     assert expand((x + y)**11, modulus=11) == x**11 + y**11
427. 
428. 
429. def test_function_comparable():
430.     assert sin(x).is_comparable is False
431.     assert cos(x).is_comparable is False
432. 
433.     assert sin(Float('0.1')).is_comparable is True
434.     assert cos(Float('0.1')).is_comparable is True
435. 
436.     assert sin(E).is_comparable is True
437.     assert cos(E).is_comparable is True
438. 
439.     assert sin(Rational(1, 3)).is_comparable is True
440.     assert cos(Rational(1, 3)).is_comparable is True
441. 
442. 
443. def test_function_comparable_infinities():
444.     assert sin(oo).is_comparable is False
445.     assert sin(-oo).is_comparable is False
446.     assert sin(zoo).is_comparable is False
447.     assert sin(nan).is_comparable is False
448. 
449. 
450. def test_deriv1():
451.     # These all require derivatives evaluated at a point (issue 4719) to work.
452.     # See issue 4624
453.     assert f(2*x).diff(x) == 2*Subs(Derivative(f(x), x), x, 2*x)
454.     assert (f(x)**3).diff(x) == 3*f(x)**2*f(x).diff(x)
455.     assert (f(2*x)**3).diff(x) == 6*f(2*x)**2*Subs(
456.         Derivative(f(x), x), x, 2*x)
457. 
458.     assert f(2 + x).diff(x) == Subs(Derivative(f(x), x), x, x + 2)
459.     assert f(2 + 3*x).diff(x) == 3*Subs(
460.         Derivative(f(x), x), x, 3*x + 2)
461.     assert f(3*sin(x)).diff(x) == 3*cos(x)*Subs(
462.         Derivative(f(x), x), x, 3*sin(x))
463. 
464.     # See issue 8510
465.     assert f(x, x + z).diff(x) == (
466.         Subs(Derivative(f(y, x + z), y), y, x) +
467.         Subs(Derivative(f(x, y), y), y, x + z))
468.     assert f(x, x**2).diff(x) == (
469.         2*x*Subs(Derivative(f(x, y), y), y, x**2) +
470.         Subs(Derivative(f(y, x**2), y), y, x))
471.     # but Subs is not always necessary
472.     assert f(x, g(y)).diff(g(y)) == Derivative(f(x, g(y)), g(y))
473. 
474. 
475. def test_deriv2():
476.     assert (x**3).diff(x) == 3*x**2
477.     assert (x**3).diff(x, evaluate=False) != 3*x**2
478.     assert (x**3).diff(x, evaluate=False) == Derivative(x**3, x)
479. 
480.     assert diff(x**3, x) == 3*x**2
481.     assert diff(x**3, x, evaluate=False) != 3*x**2
482.     assert diff(x**3, x, evaluate=False) == Derivative(x**3, x)
483. 
484. 
485. def test_func_deriv():
486.     assert f(x).diff(x) == Derivative(f(x), x)
487.     # issue 4534
488.     assert f(x, y).diff(x, y) - f(x, y).diff(y, x) == 0
489.     assert Derivative(f(x, y), x, y).args[1:] == ((x, 1), (y, 1))
490.     assert Derivative(f(x, y), y, x).args[1:] == ((y, 1), (x, 1))
491.     assert (Derivative(f(x, y), x, y) - Derivative(f(x, y), y, x)).doit() == 0
492. 
493. 
494. def test_suppressed_evaluation():
495.     a = sin(0, evaluate=False)
496.     assert a != 0
497.     assert a.func is sin
498.     assert a.args == (0,)
499. 
500. 


File: sympy/core/tests/test_symbol.py
Line number range: 1 - 391
Content:
1. from sympy.core.numbers import (I, Rational, pi)
2. from sympy.core.relational import (GreaterThan, LessThan, StrictGreaterThan, StrictLessThan)
3. from sympy.core.symbol import (Dummy, Symbol, Wild, symbols)
4. from sympy.core.sympify import sympify  # can't import as S yet
5. from sympy.core.symbol import uniquely_named_symbol, _symbol, Str
6. 
7. from sympy.testing.pytest import raises
8. from sympy.core.symbol import disambiguate
9. 
10. def test_Str():
11.     a1 = Str('a')
12.     a2 = Str('a')
13.     b = Str('b')
14.     assert a1 == a2 != b
15.     raises(TypeError, lambda: Str())
16. 
17. def test_Symbol():
18.     a = Symbol("a")
19.     x1 = Symbol("x")
20.     x2 = Symbol("x")
21.     xdummy1 = Dummy("x")
22.     xdummy2 = Dummy("x")
23. 
24.     assert a != x1
25.     assert a != x2
26.     assert x1 == x2
27.     assert x1 != xdummy1
28.     assert xdummy1 != xdummy2
29. 
30.     assert Symbol("x") == Symbol("x")
31.     assert Dummy("x") != Dummy("x")
32.     d = symbols('d', cls=Dummy)
33.     assert isinstance(d, Dummy)
34.     c, d = symbols('c,d', cls=Dummy)
35.     assert isinstance(c, Dummy)
36.     assert isinstance(d, Dummy)
37.     raises(TypeError, lambda: Symbol())
38. 
39. 
40. def test_Dummy():
41.     assert Dummy() != Dummy()
42. 
43. 
44. def test_Dummy_force_dummy_index():
45.     raises(AssertionError, lambda: Dummy(dummy_index=1))
46.     assert Dummy('d', dummy_index=2) == Dummy('d', dummy_index=2)
47.     assert Dummy('d1', dummy_index=2) != Dummy('d2', dummy_index=2)
48.     d1 = Dummy('d', dummy_index=3)
49.     d2 = Dummy('d')
50.     # might fail if d1 were created with dummy_index >= 10**6
51.     assert d1 != d2
52.     d3 = Dummy('d', dummy_index=3)
53.     assert d1 == d3
54.     assert Dummy()._count == Dummy('d', dummy_index=3)._count
55. 
56. 
57. def test_lt_gt():
58.     S = sympify
59.     x, y = Symbol('x'), Symbol('y')
60. 
61.     assert (x >= y) == GreaterThan(x, y)
62.     assert (x >= 0) == GreaterThan(x, 0)
63.     assert (x <= y) == LessThan(x, y)
64.     assert (x <= 0) == LessThan(x, 0)
65. 
66.     assert (0 <= x) == GreaterThan(x, 0)
67.     assert (0 >= x) == LessThan(x, 0)
68.     assert (S(0) >= x) == GreaterThan(0, x)
69.     assert (S(0) <= x) == LessThan(0, x)
70. 
71.     assert (x > y) == StrictGreaterThan(x, y)
72.     assert (x > 0) == StrictGreaterThan(x, 0)
73.     assert (x < y) == StrictLessThan(x, y)
74.     assert (x < 0) == StrictLessThan(x, 0)
75. 
76.     assert (0 < x) == StrictGreaterThan(x, 0)
77.     assert (0 > x) == StrictLessThan(x, 0)
78.     assert (S(0) > x) == StrictGreaterThan(0, x)
79.     assert (S(0) < x) == StrictLessThan(0, x)
80. 
81.     e = x**2 + 4*x + 1
82.     assert (e >= 0) == GreaterThan(e, 0)
83.     assert (0 <= e) == GreaterThan(e, 0)
84.     assert (e > 0) == StrictGreaterThan(e, 0)
85.     assert (0 < e) == StrictGreaterThan(e, 0)
86. 
87.     assert (e <= 0) == LessThan(e, 0)
88.     assert (0 >= e) == LessThan(e, 0)
89.     assert (e < 0) == StrictLessThan(e, 0)
90.     assert (0 > e) == StrictLessThan(e, 0)
91. 
92.     assert (S(0) >= e) == GreaterThan(0, e)
93.     assert (S(0) <= e) == LessThan(0, e)
94.     assert (S(0) < e) == StrictLessThan(0, e)
95.     assert (S(0) > e) == StrictGreaterThan(0, e)
96. 
97. 
98. def test_no_len():
99.     # there should be no len for numbers
100.     x = Symbol('x')
101.     raises(TypeError, lambda: len(x))
102. 
103. 
104. def test_ineq_unequal():
105.     S = sympify
106.     x, y, z = symbols('x,y,z')
107. 
108.     e = (
109.         S(-1) >= x, S(-1) >= y, S(-1) >= z,
110.         S(-1) > x, S(-1) > y, S(-1) > z,
111.         S(-1) <= x, S(-1) <= y, S(-1) <= z,
112.         S(-1) < x, S(-1) < y, S(-1) < z,
113.         S(0) >= x, S(0) >= y, S(0) >= z,
114.         S(0) > x, S(0) > y, S(0) > z,
115.         S(0) <= x, S(0) <= y, S(0) <= z,
116.         S(0) < x, S(0) < y, S(0) < z,
117.         S('3/7') >= x, S('3/7') >= y, S('3/7') >= z,
118.         S('3/7') > x, S('3/7') > y, S('3/7') > z,
119.         S('3/7') <= x, S('3/7') <= y, S('3/7') <= z,
120.         S('3/7') < x, S('3/7') < y, S('3/7') < z,
121.         S(1.5) >= x, S(1.5) >= y, S(1.5) >= z,
122.         S(1.5) > x, S(1.5) > y, S(1.5) > z,
123.         S(1.5) <= x, S(1.5) <= y, S(1.5) <= z,
124.         S(1.5) < x, S(1.5) < y, S(1.5) < z,
125.         S(2) >= x, S(2) >= y, S(2) >= z,
126.         S(2) > x, S(2) > y, S(2) > z,
127.         S(2) <= x, S(2) <= y, S(2) <= z,
128.         S(2) < x, S(2) < y, S(2) < z,
129.         x >= -1, y >= -1, z >= -1,
130.         x > -1, y > -1, z > -1,
131.         x <= -1, y <= -1, z <= -1,
132.         x < -1, y < -1, z < -1,
133.         x >= 0, y >= 0, z >= 0,
134.         x > 0, y > 0, z > 0,
135.         x <= 0, y <= 0, z <= 0,
136.         x < 0, y < 0, z < 0,
137.         x >= 1.5, y >= 1.5, z >= 1.5,
138.         x > 1.5, y > 1.5, z > 1.5,
139.         x <= 1.5, y <= 1.5, z <= 1.5,
140.         x < 1.5, y < 1.5, z < 1.5,
141.         x >= 2, y >= 2, z >= 2,
142.         x > 2, y > 2, z > 2,
143.         x <= 2, y <= 2, z <= 2,
144.         x < 2, y < 2, z < 2,
145. 
146.         x >= y, x >= z, y >= x, y >= z, z >= x, z >= y,
147.         x > y, x > z, y > x, y > z, z > x, z > y,
148.         x <= y, x <= z, y <= x, y <= z, z <= x, z <= y,
149.         x < y, x < z, y < x, y < z, z < x, z < y,
150. 
151.         x - pi >= y + z, y - pi >= x + z, z - pi >= x + y,
152.         x - pi > y + z, y - pi > x + z, z - pi > x + y,
153.         x - pi <= y + z, y - pi <= x + z, z - pi <= x + y,
154.         x - pi < y + z, y - pi < x + z, z - pi < x + y,
155.         True, False
156.     )
157. 
158.     left_e = e[:-1]
159.     for i, e1 in enumerate( left_e ):
160.         for e2 in e[i + 1:]:
161.             assert e1 != e2
162. 
163. 
164. def test_Wild_properties():
165.     S = sympify
166.     # these tests only include Atoms
167.     x = Symbol("x")
168.     y = Symbol("y")
169.     p = Symbol("p", positive=True)
170.     k = Symbol("k", integer=True)
171.     n = Symbol("n", integer=True, positive=True)
172. 
173.     given_patterns = [ x, y, p, k, -k, n, -n, S(-3), S(3),
174.                        pi, Rational(3, 2), I ]
175. 
176.     integerp = lambda k: k.is_integer
177.     positivep = lambda k: k.is_positive
178.     symbolp = lambda k: k.is_Symbol
179.     realp = lambda k: k.is_extended_real
180. 
181.     S = Wild("S", properties=[symbolp])
182.     R = Wild("R", properties=[realp])
183.     Y = Wild("Y", exclude=[x, p, k, n])
184.     P = Wild("P", properties=[positivep])
185.     K = Wild("K", properties=[integerp])
186.     N = Wild("N", properties=[positivep, integerp])
187. 
188.     given_wildcards = [ S, R, Y, P, K, N ]
189. 
190.     goodmatch = {
191.         S: (x, y, p, k, n),
192.         R: (p, k, -k, n, -n, -3, 3, pi, Rational(3, 2)),
193.         Y: (y, -3, 3, pi, Rational(3, 2), I ),
194.         P: (p, n, 3, pi, Rational(3, 2)),
195.         K: (k, -k, n, -n, -3, 3),
196.         N: (n, 3)}
197. 
198.     for A in given_wildcards:
199.         for pat in given_patterns:
200.             d = pat.match(A)
201.             if pat in goodmatch[A]:
202.                 assert d[A] in goodmatch[A]
203.             else:
204.                 assert d is None
205. 
206. 
207. def test_symbols():
208.     x = Symbol('x')
209.     y = Symbol('y')
210.     z = Symbol('z')
211. 
212.     assert symbols('x') == x
213.     assert symbols('x ') == x
214.     assert symbols(' x ') == x
215.     assert symbols('x,') == (x,)
216.     assert symbols('x, ') == (x,)
217.     assert symbols('x ,') == (x,)
218. 
219.     assert symbols('x , y') == (x, y)
220. 
221.     assert symbols('x,y,z') == (x, y, z)
222.     assert symbols('x y z') == (x, y, z)
223. 
224.     assert symbols('x,y,z,') == (x, y, z)
225.     assert symbols('x y z ') == (x, y, z)
226. 
227.     xyz = Symbol('xyz')
228.     abc = Symbol('abc')
229. 
230.     assert symbols('xyz') == xyz
231.     assert symbols('xyz,') == (xyz,)
232.     assert symbols('xyz,abc') == (xyz, abc)
233. 
234.     assert symbols(('xyz',)) == (xyz,)
235.     assert symbols(('xyz,',)) == ((xyz,),)
236.     assert symbols(('x,y,z,',)) == ((x, y, z),)
237.     assert symbols(('xyz', 'abc')) == (xyz, abc)
238.     assert symbols(('xyz,abc',)) == ((xyz, abc),)
239.     assert symbols(('xyz,abc', 'x,y,z')) == ((xyz, abc), (x, y, z))
240. 
241.     assert symbols(('x', 'y', 'z')) == (x, y, z)
242.     assert symbols(['x', 'y', 'z']) == [x, y, z]
243.     assert symbols({'x', 'y', 'z'}) == {x, y, z}
244. 
245.     raises(ValueError, lambda: symbols(''))
246.     raises(ValueError, lambda: symbols(','))
247.     raises(ValueError, lambda: symbols('x,,y,,z'))
248.     raises(ValueError, lambda: symbols(('x', '', 'y', '', 'z')))
249. 
250.     a, b = symbols('x,y', real=True)
251.     assert a.is_real and b.is_real
252. 
253.     x0 = Symbol('x0')
254.     x1 = Symbol('x1')
255.     x2 = Symbol('x2')
256. 
257.     y0 = Symbol('y0')
258.     y1 = Symbol('y1')
259. 
260.     assert symbols('x0:0') == ()
261.     assert symbols('x0:1') == (x0,)
262.     assert symbols('x0:2') == (x0, x1)
263.     assert symbols('x0:3') == (x0, x1, x2)
264. 
265.     assert symbols('x:0') == ()
266.     assert symbols('x:1') == (x0,)
267.     assert symbols('x:2') == (x0, x1)
268.     assert symbols('x:3') == (x0, x1, x2)
269. 
270.     assert symbols('x1:1') == ()
271.     assert symbols('x1:2') == (x1,)
272.     assert symbols('x1:3') == (x1, x2)
273. 
274.     assert symbols('x1:3,x,y,z') == (x1, x2, x, y, z)
275. 
276.     assert symbols('x:3,y:2') == (x0, x1, x2, y0, y1)
277.     assert symbols(('x:3', 'y:2')) == ((x0, x1, x2), (y0, y1))
278. 
279.     a = Symbol('a')
280.     b = Symbol('b')
281.     c = Symbol('c')
282.     d = Symbol('d')
283. 
284.     assert symbols('x:z') == (x, y, z)
285.     assert symbols('a:d,x:z') == (a, b, c, d, x, y, z)
286.     assert symbols(('a:d', 'x:z')) == ((a, b, c, d), (x, y, z))
287. 
288.     aa = Symbol('aa')
289.     ab = Symbol('ab')
290.     ac = Symbol('ac')
291.     ad = Symbol('ad')
292. 
293.     assert symbols('aa:d') == (aa, ab, ac, ad)
294.     assert symbols('aa:d,x:z') == (aa, ab, ac, ad, x, y, z)
295.     assert symbols(('aa:d','x:z')) == ((aa, ab, ac, ad), (x, y, z))
296. 
297. 
298.     # issue 6675
299.     def sym(s):
300.         return str(symbols(s))
301.     assert sym('a0:4') == '(a0, a1, a2, a3)'
302.     assert sym('a2:4,b1:3') == '(a2, a3, b1, b2)'
303.     assert sym('a1(2:4)') == '(a12, a13)'
304.     assert sym('a0:2.0:2') == '(a0.0, a0.1, a1.0, a1.1)'
305.     assert sym('aa:cz') == '(aaz, abz, acz)'
306.     assert sym('aa:c0:2') == '(aa0, aa1, ab0, ab1, ac0, ac1)'
307.     assert sym('aa:ba:b') == '(aaa, aab, aba, abb)'
308.     assert sym('a:3b') == '(a0b, a1b, a2b)'
309.     assert sym('a-1:3b') == '(a-1b, a-2b)'
310.     assert sym(r'a:2\,:2' + chr(0)) == '(a0,0%s, a0,1%s, a1,0%s, a1,1%s)' % (
311.         (chr(0),)*4)
312.     assert sym('x(:a:3)') == '(x(a0), x(a1), x(a2))'
313.     assert sym('x(:c):1') == '(xa0, xb0, xc0)'
314.     assert sym('x((:a)):3') == '(x(a)0, x(a)1, x(a)2)'
315.     assert sym('x(:a:3') == '(x(a0, x(a1, x(a2)'
316.     assert sym(':2') == '(0, 1)'
317.     assert sym(':b') == '(a, b)'
318.     assert sym(':b:2') == '(a0, a1, b0, b1)'
319.     assert sym(':2:2') == '(00, 01, 10, 11)'
320.     assert sym(':b:b') == '(aa, ab, ba, bb)'
321. 
322.     raises(ValueError, lambda: symbols(':'))
323.     raises(ValueError, lambda: symbols('a:'))
324.     raises(ValueError, lambda: symbols('::'))
325.     raises(ValueError, lambda: symbols('a::'))
326.     raises(ValueError, lambda: symbols(':a:'))
327.     raises(ValueError, lambda: symbols('::a'))
328. 
329. 
330. def test_symbols_become_functions_issue_3539():
331.     from sympy.abc import alpha, phi, beta, t
332.     raises(TypeError, lambda: beta(2))
333.     raises(TypeError, lambda: beta(2.5))
334.     raises(TypeError, lambda: phi(2.5))
335.     raises(TypeError, lambda: alpha(2.5))
336.     raises(TypeError, lambda: phi(t))
337. 
338. 
339. def test_unicode():
340.     xu = Symbol('x')
341.     x = Symbol('x')
342.     assert x == xu
343. 
344.     raises(TypeError, lambda: Symbol(1))
345. 
346. 
347. def test_uniquely_named_symbol_and_Symbol():
348.     F = uniquely_named_symbol
349.     x = Symbol('x')
350.     assert F(x) == x
351.     assert F('x') == x
352.     assert str(F('x', x)) == 'x0'
353.     assert str(F('x', (x + 1, 1/x))) == 'x0'
354.     _x = Symbol('x', real=True)
355.     assert F(('x', _x)) == _x
356.     assert F((x, _x)) == _x
357.     assert F('x', real=True).is_real
358.     y = Symbol('y')
359.     assert F(('x', y), real=True).is_real
360.     r = Symbol('x', real=True)
361.     assert F(('x', r)).is_real
362.     assert F(('x', r), real=False).is_real
363.     assert F('x1', Symbol('x1'),
364.         compare=lambda i: str(i).rstrip('1')).name == 'x0'
365.     assert F('x1', Symbol('x1'),
366.         modify=lambda i: i + '_').name == 'x1_'
367.     assert _symbol(x, _x) == x
368. 
369. 
370. def test_disambiguate():
371.     x, y, y_1, _x, x_1, x_2 = symbols('x y y_1 _x x_1 x_2')
372.     t1 = Dummy('y'), _x, Dummy('x'), Dummy('x')
373.     t2 = Dummy('x'), Dummy('x')
374.     t3 = Dummy('x'), Dummy('y')
375.     t4 = x, Dummy('x')
376.     t5 = Symbol('x', integer=True), x, Symbol('x_1')
377. 
378.     assert disambiguate(*t1) == (y, x_2, x, x_1)
379.     assert disambiguate(*t2) == (x, x_1)
380.     assert disambiguate(*t3) == (x, y)
381.     assert disambiguate(*t4) == (x_1, x)
382.     assert disambiguate(*t5) == (t5[0], x_2, x_1)
383.     assert disambiguate(*t5)[0] != x  # assumptions are retained
384. 
385.     t6 = _x, Dummy('x')/y
386.     t7 = y*Dummy('y'), y
387. 
388.     assert disambiguate(*t6) == (x_1, x/y)
389.     assert disambiguate(*t7) == (y*y_1, y_1)
390.     assert disambiguate(Dummy('x_1'), Dummy('x_1')
391.         ) == (x_1, Symbol('x_1_1'))

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 09:15:36,144 - thread-126046194108096.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="I have analyzed the user's query and the provided context, which includes the full content of `sympy/core/tests/test_symbol.py` and `sympy/core/tests/test_function.py`. The user's issue is with `symbols(..., cls=Function)` when used with a tuple of strings. The provided files contain test cases that cover: 1) the use of `symbols` with the `cls` argument (`test_Symbol` in `test_symbol.py`), 2) the use of `symbols` to create `Function` objects (`test_derivative_subs_bug` in `test_function.py`), and 3) the use of `symbols` with tuple-of-strings input (`test_symbols` in `test_symbol.py`). This information is sufficient to select three relevant existing test cases that demonstrate similar functionality to the reported bug. Therefore, I do not need to request additional context." query='' extra_requirements='' purpose=''
2025-12-21 09:15:36,145 - thread-126046194108096.prometheus_context_collector - INFO - Successfully retrieved 2 context snippets
