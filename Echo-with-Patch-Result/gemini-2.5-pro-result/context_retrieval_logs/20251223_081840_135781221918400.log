2025-12-23 08:18:40,341 - thread-135781221918400.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Possible data loss in admin changeform view when using regex special characters in formset prefix

Description: Description
	 
		(last modified by Baptiste Mispelon)
	 
While browsing the code in admin/options.py [1] (working on an unrelated ticket), I came across that line:
pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
Generating a regex like this using string formatting can cause problems when the arguments contain special regex characters.
self.model._meta.pk.name is probably safe (I'm not 100% sure about this) since it has to follow Python's syntax rules about identifiers.
However prefix has no such restrictions [2] and could contain any number of special regex characters.
The fix is quite straightforward (use re.escape()) but it's hard to tell if there might be other occurrences of a similar pattern in Django's code.
Some quick grepping (using git grep -E '(re_compile|re\.(compile|search|match))' -- 'django/**.py') currently yields about 200 results. I had a superficial glance through the list and didn't spot other instances of the same usage pattern.
EDIT I forgot to mention, but this bug is technically a regression (introduced in b18650a2634890aa758abae2f33875daa13a9ba3).
[1] ​https://github.com/django/django/blob/ef93fd4683645635d3597e17c23f9ed862dd716b/django/contrib/admin/options.py#L1634
[2] ​https://docs.djangoproject.com/en/dev/topics/forms/formsets/#customizing-a-formset-s-prefix

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 137e6faa0f..31bfd90c67 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -1631,7 +1631,7 @@ class ModelAdmin(BaseModelAdmin):
 
     def _get_edited_object_pks(self, request, prefix):
         """Return POST data values of list_editable primary keys."""
-        pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
+        pk_pattern = re.compile(r'^{}-\d+-{}$'.format(re.escape(prefix), re.escape(self.model._meta.pk.name)))
         return [value for key, value in request.POST.items() if pk_pattern.match(key)]
 
     def _get_list_editable_queryset(self, request, prefix):


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 08:18:40,433 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── FUNDING.yml
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   └── test_postgresql.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktrans.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_trans.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Possible data loss in admin changeform view when using regex special characters in formset prefix

Description: Description
	 
		(last modified by Baptiste Mispelon)
	 
While browsing the code in admin/options.py [1] (working on an unrelated ticket), I came across that line:
pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
Generating a regex like this using string formatting can cause problems when the arguments contain special regex characters.
self.model._meta.pk.name is probably safe (I'm not 100% sure about this) since it has to follow Python's syntax rules about identifiers.
However prefix has no such restrictions [2] and could contain any number of special regex characters.
The fix is quite straightforward (use re.escape()) but it's hard to tell if there might be other occurrences of a similar pattern in Django's code.
Some quick grepping (using git grep -E '(re_compile|re\.(compile|search|match))' -- 'django/**.py') currently yields about 200 results. I had a superficial glance through the list and didn't spot other instances of the same usage pattern.
EDIT I forgot to mention, but this bug is technically a regression (introduced in b18650a2634890aa758abae2f33875daa13a9ba3).
[1] ​https://github.com/django/django/blob/ef93fd4683645635d3597e17c23f9ed862dd716b/django/contrib/admin/options.py#L1634
[2] ​https://docs.djangoproject.com/en/dev/topics/forms/formsets/#customizing-a-formset-s-prefix

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 137e6faa0f..31bfd90c67 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -1631,7 +1631,7 @@ class ModelAdmin(BaseModelAdmin):
 
     def _get_edited_object_pks(self, request, prefix):
         """Return POST data values of list_editable primary keys."""
-        pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
+        pk_pattern = re.compile(r'^{}-\d+-{}$'.format(re.escape(prefix), re.escape(self.model._meta.pk.name)))
         return [value for key, value in request.POST.items() if pk_pattern.match(key)]
 
     def _get_list_editable_queryset(self, request, prefix):


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 08:19:41,076 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user is asking for test cases related to a bug in the Django admin's `list_editable` functionality. The bug is triggered by regex special characters in a formset prefix. To find relevant test cases, I need to examine tests that cover `list_editable` and formset usage within the admin. The `tests/admin_changelist/` directory seems most relevant to the changelist view where `list_editable` is used. I will start by requesting the main test file from this directory to identify suitable test cases." query='Please provide the full content of `tests/admin_changelist/tests.py`.' extra_requirements='If the file is too large, please provide all test classes that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` within their test methods.' purpose='This file is expected to contain test cases for the admin changelist, which is the context for the `list_editable` feature. Examining it will allow me to find tests demonstrating how `list_editable` is tested, which is directly related to the bug report.'
2025-12-23 08:19:41,077 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/admin_changelist/tests.py`.
2025-12-23 08:19:41,077 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 08:19:41,078 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 08:19:41,079 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 08:19:41,079 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/admin_changelist/tests.py`.
Extra requirements: If the file is too large, please provide all test classes that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` within their test methods.
Purpose: This file is expected to contain test cases for the admin changelist, which is the context for the `list_editable` feature. Examining it will allow me to find tests demonstrating how `list_editable` is tested, which is directly related to the bug report.
2025-12-23 08:19:44,353 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first attempt to retrieve the entire content of `tests/admin_changelist/tests.py`. If the file proves to be too large for a complete read, I will then specifically look for test classes that set up a `ModelAdmin` with a `list_editable` attribute and utilize `self.client.post()` in their test methods. This will help locate the most relevant test cases for the issue at hand.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/admin_changelist/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2172, 'candidates_token_count': 111, 'total_token_count': 2418, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2172}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 111}], 'thoughts_token_count': 135, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1349424327815975, 'model_name': 'gemini-2.5-pro'} id='run--a83275d8-17d1-4925-8155-5a5115b259fa-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_changelist/tests.py'}, 'id': '39aed35a-7705-4ae4-b2fd-5b4298e1108d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2172, 'output_tokens': 111, 'total_tokens': 2418, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 135}}
2025-12-23 08:19:47,162 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the initial 500 lines of the specified test file. The file is larger than this, so I will now search for test classes that use `list_editable` to narrow down the relevant sections of the code.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "list_editable", "relative_path": "tests/admin_changelist/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10951, 'candidates_token_count': 84, 'total_token_count': 11136, 'cached_content_token_count': 1846, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10951}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1846}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 84}], 'thoughts_token_count': 101}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21088759104410806, 'model_name': 'gemini-2.5-pro'} id='run--5d87bbe9-f97d-4209-9eeb-26962d1d4c9a-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'list_editable', 'relative_path': 'tests/admin_changelist/tests.py'}, 'id': 'b96ab685-01a7-4d71-8e62-00a8bb0e7adc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10951, 'output_tokens': 84, 'total_tokens': 11136, 'input_token_details': {'cache_read': 1846}, 'output_token_details': {'reasoning': 101}}
2025-12-23 08:19:49,549 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have identified the `ChangeListTests` class, which contains several tests related to `list_editable`. I will now read the remainder of this file to get the full context of these tests.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 1107.0, "start_line": 501.0, "relative_path": "tests/admin_changelist/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26034, 'candidates_token_count': 70, 'total_token_count': 26104, 'cached_content_token_count': 9508, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26034}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9508}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 70}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1429821014404297, 'model_name': 'gemini-2.5-pro'} id='run--ed8bfa21-da24-4a8e-96c4-218b4d2d668c-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 1107.0, 'start_line': 501.0, 'relative_path': 'tests/admin_changelist/tests.py'}, 'id': '3fd882e6-ff1e-4da1-855d-e924a575ed26', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26034, 'output_tokens': 70, 'total_tokens': 26104, 'input_token_details': {'cache_read': 9508}}
2025-12-23 08:19:53,104 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the full content of `tests/admin_changelist/tests.py`. The file contains a variety of test cases for the admin changelist functionality. I was able to identify multiple test classes that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` within their test methods, which will be helpful in understanding how the `list_editable` feature is tested.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 37495, 'candidates_token_count': 88, 'total_token_count': 37690, 'cached_content_token_count': 24945, 'prompt_tokens_details': [{'modality': 1, 'token_count': 37495}], 'cache_tokens_details': [{'modality': 1, 'token_count': 24945}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 88}], 'thoughts_token_count': 107}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3339581923051314, 'model_name': 'gemini-2.5-pro'} id='run--a6313eb7-fb3d-48f8-8646-cb7d9e6d3632-0' usage_metadata={'input_tokens': 37495, 'output_tokens': 88, 'total_tokens': 37690, 'input_token_details': {'cache_read': 24945}, 'output_token_details': {'reasoning': 107}}
2025-12-23 08:19:53,107 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/admin_changelist/tests.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the file is too large, please provide all test classes that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` within their test methods.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This file is expected to contain test cases for the admin changelist, which is the context for the `list_editable` feature. Examining it will allow me to find tests demonstrating how `list_editable` is tested, which is directly related to the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_changelist/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. 
3. from django.contrib import admin
4. from django.contrib.admin.models import LogEntry
5. from django.contrib.admin.options import IncorrectLookupParameters
6. from django.contrib.admin.templatetags.admin_list import pagination
7. from django.contrib.admin.tests import AdminSeleniumTestCase
8. from django.contrib.admin.views.main import ALL_VAR, SEARCH_VAR
9. from django.contrib.auth.models import User
10. from django.contrib.contenttypes.models import ContentType
11. from django.contrib.messages.storage.cookie import CookieStorage
12. from django.db import connection, models
13. from django.db.models import F
14. from django.db.models.fields import Field, IntegerField
15. from django.db.models.functions import Upper
16. from django.db.models.lookups import Contains, Exact
17. from django.template import Context, Template, TemplateSyntaxError
18. from django.test import TestCase, override_settings
19. from django.test.client import RequestFactory
20. from django.test.utils import (
21.     CaptureQueriesContext, isolate_apps, register_lookup,
22. )
23. from django.urls import reverse
24. from django.utils import formats
25. 
26. from .admin import (
27.     BandAdmin, ChildAdmin, ChordsBandAdmin, ConcertAdmin,
28.     CustomPaginationAdmin, CustomPaginator, DynamicListDisplayChildAdmin,
29.     DynamicListDisplayLinksChildAdmin, DynamicListFilterChildAdmin,
30.     DynamicSearchFieldsChildAdmin, EmptyValueChildAdmin, EventAdmin,
31.     FilteredChildAdmin, GroupAdmin, InvitationAdmin,
32.     NoListDisplayLinksParentAdmin, ParentAdmin, QuartetAdmin, SwallowAdmin,
33.     site as custom_site,
34. )
35. from .models import (
36.     Band, CharPK, Child, ChordsBand, ChordsMusician, Concert, CustomIdUser,
37.     Event, Genre, Group, Invitation, Membership, Musician, OrderedObject,
38.     Parent, Quartet, Swallow, SwallowOneToOne, UnorderedObject,
39. )
40. 
41. 
42. def build_tbody_html(pk, href, extra_fields):
43.     return (
44.         '<tbody><tr class="row1">'
45.         '<td class="action-checkbox">'
46.         '<input type="checkbox" name="_selected_action" value="{}" '
47.         'class="action-select"></td>'
48.         '<th class="field-name"><a href="{}">name</a></th>'
49.         '{}</tr></tbody>'
50.     ).format(pk, href, extra_fields)
51. 
52. 
53. @override_settings(ROOT_URLCONF="admin_changelist.urls")
54. class ChangeListTests(TestCase):
55.     factory = RequestFactory()
56. 
57.     @classmethod
58.     def setUpTestData(cls):
59.         cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')
60. 
61.     def _create_superuser(self, username):
62.         return User.objects.create_superuser(username=username, email='a@b.com', password='xxx')
63. 
64.     def _mocked_authenticated_request(self, url, user):
65.         request = self.factory.get(url)
66.         request.user = user
67.         return request
68. 
69.     def test_specified_ordering_by_f_expression(self):
70.         class OrderedByFBandAdmin(admin.ModelAdmin):
71.             list_display = ['name', 'genres', 'nr_of_members']
72.             ordering = (
73.                 F('nr_of_members').desc(nulls_last=True),
74.                 Upper(F('name')).asc(),
75.                 F('genres').asc(),
76.             )
77. 
78.         m = OrderedByFBandAdmin(Band, custom_site)
79.         request = self.factory.get('/band/')
80.         request.user = self.superuser
81.         cl = m.get_changelist_instance(request)
82.         self.assertEqual(cl.get_ordering_field_columns(), {3: 'desc', 2: 'asc'})
83. 
84.     def test_specified_ordering_by_f_expression_without_asc_desc(self):
85.         class OrderedByFBandAdmin(admin.ModelAdmin):
86.             list_display = ['name', 'genres', 'nr_of_members']
87.             ordering = (F('nr_of_members'), Upper('name'), F('genres'))
88. 
89.         m = OrderedByFBandAdmin(Band, custom_site)
90.         request = self.factory.get('/band/')
91.         request.user = self.superuser
92.         cl = m.get_changelist_instance(request)
93.         self.assertEqual(cl.get_ordering_field_columns(), {3: 'asc', 2: 'asc'})
94. 
95.     def test_select_related_preserved(self):
96.         """
97.         Regression test for #10348: ChangeList.get_queryset() shouldn't
98.         overwrite a custom select_related provided by ModelAdmin.get_queryset().
99.         """
100.         m = ChildAdmin(Child, custom_site)
101.         request = self.factory.get('/child/')
102.         request.user = self.superuser
103.         cl = m.get_changelist_instance(request)
104.         self.assertEqual(cl.queryset.query.select_related, {'parent': {}})
105. 
106.     def test_select_related_as_tuple(self):
107.         ia = InvitationAdmin(Invitation, custom_site)
108.         request = self.factory.get('/invitation/')
109.         request.user = self.superuser
110.         cl = ia.get_changelist_instance(request)
111.         self.assertEqual(cl.queryset.query.select_related, {'player': {}})
112. 
113.     def test_select_related_as_empty_tuple(self):
114.         ia = InvitationAdmin(Invitation, custom_site)
115.         ia.list_select_related = ()
116.         request = self.factory.get('/invitation/')
117.         request.user = self.superuser
118.         cl = ia.get_changelist_instance(request)
119.         self.assertIs(cl.queryset.query.select_related, False)
120. 
121.     def test_get_select_related_custom_method(self):
122.         class GetListSelectRelatedAdmin(admin.ModelAdmin):
123.             list_display = ('band', 'player')
124. 
125.             def get_list_select_related(self, request):
126.                 return ('band', 'player')
127. 
128.         ia = GetListSelectRelatedAdmin(Invitation, custom_site)
129.         request = self.factory.get('/invitation/')
130.         request.user = self.superuser
131.         cl = ia.get_changelist_instance(request)
132.         self.assertEqual(cl.queryset.query.select_related, {'player': {}, 'band': {}})
133. 
134.     def test_result_list_empty_changelist_value(self):
135.         """
136.         Regression test for #14982: EMPTY_CHANGELIST_VALUE should be honored
137.         for relationship fields
138.         """
139.         new_child = Child.objects.create(name='name', parent=None)
140.         request = self.factory.get('/child/')
141.         request.user = self.superuser
142.         m = ChildAdmin(Child, custom_site)
143.         cl = m.get_changelist_instance(request)
144.         cl.formset = None
145.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
146.         context = Context({'cl': cl, 'opts': Child._meta})
147.         table_output = template.render(context)
148.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
149.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">-</td>')
150.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
151. 
152.     def test_result_list_set_empty_value_display_on_admin_site(self):
153.         """
154.         Empty value display can be set on AdminSite.
155.         """
156.         new_child = Child.objects.create(name='name', parent=None)
157.         request = self.factory.get('/child/')
158.         request.user = self.superuser
159.         # Set a new empty display value on AdminSite.
160.         admin.site.empty_value_display = '???'
161.         m = ChildAdmin(Child, admin.site)
162.         cl = m.get_changelist_instance(request)
163.         cl.formset = None
164.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
165.         context = Context({'cl': cl, 'opts': Child._meta})
166.         table_output = template.render(context)
167.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
168.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">???</td>')
169.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
170. 
171.     def test_result_list_set_empty_value_display_in_model_admin(self):
172.         """
173.         Empty value display can be set in ModelAdmin or individual fields.
174.         """
175.         new_child = Child.objects.create(name='name', parent=None)
176.         request = self.factory.get('/child/')
177.         request.user = self.superuser
178.         m = EmptyValueChildAdmin(Child, admin.site)
179.         cl = m.get_changelist_instance(request)
180.         cl.formset = None
181.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
182.         context = Context({'cl': cl, 'opts': Child._meta})
183.         table_output = template.render(context)
184.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
185.         row_html = build_tbody_html(
186.             new_child.id,
187.             link,
188.             '<td class="field-age_display">&amp;dagger;</td>'
189.             '<td class="field-age">-empty-</td>'
190.         )
191.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
192. 
193.     def test_result_list_html(self):
194.         """
195.         Inclusion tag result_list generates a table when with default
196.         ModelAdmin settings.
197.         """
198.         new_parent = Parent.objects.create(name='parent')
199.         new_child = Child.objects.create(name='name', parent=new_parent)
200.         request = self.factory.get('/child/')
201.         request.user = self.superuser
202.         m = ChildAdmin(Child, custom_site)
203.         cl = m.get_changelist_instance(request)
204.         cl.formset = None
205.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
206.         context = Context({'cl': cl, 'opts': Child._meta})
207.         table_output = template.render(context)
208.         link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
209.         row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">%s</td>' % new_parent)
210.         self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)
211. 
212.     def test_result_list_editable_html(self):
213.         """
214.         Regression tests for #11791: Inclusion tag result_list generates a
215.         table and this checks that the items are nested within the table
216.         element tags.
217.         Also a regression test for #13599, verifies that hidden fields
218.         when list_editable is enabled are rendered in a div outside the
219.         table.
220.         """
221.         new_parent = Parent.objects.create(name='parent')
222.         new_child = Child.objects.create(name='name', parent=new_parent)
223.         request = self.factory.get('/child/')
224.         request.user = self.superuser
225.         m = ChildAdmin(Child, custom_site)
226. 
227.         # Test with list_editable fields
228.         m.list_display = ['id', 'name', 'parent']
229.         m.list_display_links = ['id']
230.         m.list_editable = ['name']
231.         cl = m.get_changelist_instance(request)
232.         FormSet = m.get_changelist_formset(request)
233.         cl.formset = FormSet(queryset=cl.result_list)
234.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
235.         context = Context({'cl': cl, 'opts': Child._meta})
236.         table_output = template.render(context)
237.         # make sure that hidden fields are in the correct place
238.         hiddenfields_div = (
239.             '<div class="hiddenfields">'
240.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
241.             '</div>'
242.         ) % new_child.id
243.         self.assertInHTML(hiddenfields_div, table_output, msg_prefix='Failed to find hidden fields')
244. 
245.         # make sure that list editable fields are rendered in divs correctly
246.         editable_name_field = (
247.             '<input name="form-0-name" value="name" class="vTextField" '
248.             'maxlength="30" type="text" id="id_form-0-name">'
249.         )
250.         self.assertInHTML(
251.             '<td class="field-name">%s</td>' % editable_name_field,
252.             table_output,
253.             msg_prefix='Failed to find "name" list_editable field',
254.         )
255. 
256.     def test_result_list_editable(self):
257.         """
258.         Regression test for #14312: list_editable with pagination
259.         """
260.         new_parent = Parent.objects.create(name='parent')
261.         for i in range(200):
262.             Child.objects.create(name='name %s' % i, parent=new_parent)
263.         request = self.factory.get('/child/', data={'p': -1})  # Anything outside range
264.         request.user = self.superuser
265.         m = ChildAdmin(Child, custom_site)
266. 
267.         # Test with list_editable fields
268.         m.list_display = ['id', 'name', 'parent']
269.         m.list_display_links = ['id']
270.         m.list_editable = ['name']
271.         with self.assertRaises(IncorrectLookupParameters):
272.             m.get_changelist_instance(request)
273. 
274.     def test_custom_paginator(self):
275.         new_parent = Parent.objects.create(name='parent')
276.         for i in range(200):
277.             Child.objects.create(name='name %s' % i, parent=new_parent)
278. 
279.         request = self.factory.get('/child/')
280.         request.user = self.superuser
281.         m = CustomPaginationAdmin(Child, custom_site)
282. 
283.         cl = m.get_changelist_instance(request)
284.         cl.get_results(request)
285.         self.assertIsInstance(cl.paginator, CustomPaginator)
286. 
287.     def test_distinct_for_m2m_in_list_filter(self):
288.         """
289.         Regression test for #13902: When using a ManyToMany in list_filter,
290.         results shouldn't appear more than once. Basic ManyToMany.
291.         """
292.         blues = Genre.objects.create(name='Blues')
293.         band = Band.objects.create(name='B.B. King Review', nr_of_members=11)
294. 
295.         band.genres.add(blues)
296.         band.genres.add(blues)
297. 
298.         m = BandAdmin(Band, custom_site)
299.         request = self.factory.get('/band/', data={'genres': blues.pk})
300.         request.user = self.superuser
301. 
302.         cl = m.get_changelist_instance(request)
303.         cl.get_results(request)
304. 
305.         # There's only one Group instance
306.         self.assertEqual(cl.result_count, 1)
307. 
308.     def test_distinct_for_through_m2m_in_list_filter(self):
309.         """
310.         Regression test for #13902: When using a ManyToMany in list_filter,
311.         results shouldn't appear more than once. With an intermediate model.
312.         """
313.         lead = Musician.objects.create(name='Vox')
314.         band = Group.objects.create(name='The Hype')
315.         Membership.objects.create(group=band, music=lead, role='lead voice')
316.         Membership.objects.create(group=band, music=lead, role='bass player')
317. 
318.         m = GroupAdmin(Group, custom_site)
319.         request = self.factory.get('/group/', data={'members': lead.pk})
320.         request.user = self.superuser
321. 
322.         cl = m.get_changelist_instance(request)
323.         cl.get_results(request)
324. 
325.         # There's only one Group instance
326.         self.assertEqual(cl.result_count, 1)
327. 
328.     def test_distinct_for_through_m2m_at_second_level_in_list_filter(self):
329.         """
330.         When using a ManyToMany in list_filter at the second level behind a
331.         ForeignKey, distinct() must be called and results shouldn't appear more
332.         than once.
333.         """
334.         lead = Musician.objects.create(name='Vox')
335.         band = Group.objects.create(name='The Hype')
336.         Concert.objects.create(name='Woodstock', group=band)
337.         Membership.objects.create(group=band, music=lead, role='lead voice')
338.         Membership.objects.create(group=band, music=lead, role='bass player')
339. 
340.         m = ConcertAdmin(Concert, custom_site)
341.         request = self.factory.get('/concert/', data={'group__members': lead.pk})
342.         request.user = self.superuser
343. 
344.         cl = m.get_changelist_instance(request)
345.         cl.get_results(request)
346. 
347.         # There's only one Concert instance
348.         self.assertEqual(cl.result_count, 1)
349. 
350.     def test_distinct_for_inherited_m2m_in_list_filter(self):
351.         """
352.         Regression test for #13902: When using a ManyToMany in list_filter,
353.         results shouldn't appear more than once. Model managed in the
354.         admin inherits from the one that defines the relationship.
355.         """
356.         lead = Musician.objects.create(name='John')
357.         four = Quartet.objects.create(name='The Beatles')
358.         Membership.objects.create(group=four, music=lead, role='lead voice')
359.         Membership.objects.create(group=four, music=lead, role='guitar player')
360. 
361.         m = QuartetAdmin(Quartet, custom_site)
362.         request = self.factory.get('/quartet/', data={'members': lead.pk})
363.         request.user = self.superuser
364. 
365.         cl = m.get_changelist_instance(request)
366.         cl.get_results(request)
367. 
368.         # There's only one Quartet instance
369.         self.assertEqual(cl.result_count, 1)
370. 
371.     def test_distinct_for_m2m_to_inherited_in_list_filter(self):
372.         """
373.         Regression test for #13902: When using a ManyToMany in list_filter,
374.         results shouldn't appear more than once. Target of the relationship
375.         inherits from another.
376.         """
377.         lead = ChordsMusician.objects.create(name='Player A')
378.         three = ChordsBand.objects.create(name='The Chords Trio')
379.         Invitation.objects.create(band=three, player=lead, instrument='guitar')
380.         Invitation.objects.create(band=three, player=lead, instrument='bass')
381. 
382.         m = ChordsBandAdmin(ChordsBand, custom_site)
383.         request = self.factory.get('/chordsband/', data={'members': lead.pk})
384.         request.user = self.superuser
385. 
386.         cl = m.get_changelist_instance(request)
387.         cl.get_results(request)
388. 
389.         # There's only one ChordsBand instance
390.         self.assertEqual(cl.result_count, 1)
391. 
392.     def test_distinct_for_non_unique_related_object_in_list_filter(self):
393.         """
394.         Regressions tests for #15819: If a field listed in list_filters
395.         is a non-unique related object, distinct() must be called.
396.         """
397.         parent = Parent.objects.create(name='Mary')
398.         # Two children with the same name
399.         Child.objects.create(parent=parent, name='Daniel')
400.         Child.objects.create(parent=parent, name='Daniel')
401. 
402.         m = ParentAdmin(Parent, custom_site)
403.         request = self.factory.get('/parent/', data={'child__name': 'Daniel'})
404.         request.user = self.superuser
405. 
406.         cl = m.get_changelist_instance(request)
407.         # Make sure distinct() was called
408.         self.assertEqual(cl.queryset.count(), 1)
409. 
410.     def test_changelist_search_form_validation(self):
411.         m = ConcertAdmin(Concert, custom_site)
412.         tests = [
413.             ({SEARCH_VAR: '\x00'}, 'Null characters are not allowed.'),
414.             ({SEARCH_VAR: 'some\x00thing'}, 'Null characters are not allowed.'),
415.         ]
416.         for case, error in tests:
417.             with self.subTest(case=case):
418.                 request = self.factory.get('/concert/', case)
419.                 request.user = self.superuser
420.                 request._messages = CookieStorage(request)
421.                 m.get_changelist_instance(request)
422.                 messages = [m.message for m in request._messages]
423.                 self.assertEqual(1, len(messages))
424.                 self.assertEqual(error, messages[0])
425. 
426.     def test_distinct_for_non_unique_related_object_in_search_fields(self):
427.         """
428.         Regressions tests for #15819: If a field listed in search_fields
429.         is a non-unique related object, distinct() must be called.
430.         """
431.         parent = Parent.objects.create(name='Mary')
432.         Child.objects.create(parent=parent, name='Danielle')
433.         Child.objects.create(parent=parent, name='Daniel')
434. 
435.         m = ParentAdmin(Parent, custom_site)
436.         request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
437.         request.user = self.superuser
438. 
439.         cl = m.get_changelist_instance(request)
440.         # Make sure distinct() was called
441.         self.assertEqual(cl.queryset.count(), 1)
442. 
443.     def test_distinct_for_many_to_many_at_second_level_in_search_fields(self):
444.         """
445.         When using a ManyToMany in search_fields at the second level behind a
446.         ForeignKey, distinct() must be called and results shouldn't appear more
447.         than once.
448.         """
449.         lead = Musician.objects.create(name='Vox')
450.         band = Group.objects.create(name='The Hype')
451.         Concert.objects.create(name='Woodstock', group=band)
452.         Membership.objects.create(group=band, music=lead, role='lead voice')
453.         Membership.objects.create(group=band, music=lead, role='bass player')
454. 
455.         m = ConcertAdmin(Concert, custom_site)
456.         request = self.factory.get('/concert/', data={SEARCH_VAR: 'vox'})
457.         request.user = self.superuser
458. 
459.         cl = m.get_changelist_instance(request)
460.         # There's only one Concert instance
461.         self.assertEqual(cl.queryset.count(), 1)
462. 
463.     def test_pk_in_search_fields(self):
464.         band = Group.objects.create(name='The Hype')
465.         Concert.objects.create(name='Woodstock', group=band)
466. 
467.         m = ConcertAdmin(Concert, custom_site)
468.         m.search_fields = ['group__pk']
469. 
470.         request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk})
471.         request.user = self.superuser
472.         cl = m.get_changelist_instance(request)
473.         self.assertEqual(cl.queryset.count(), 1)
474. 
475.         request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk + 5})
476.         request.user = self.superuser
477.         cl = m.get_changelist_instance(request)
478.         self.assertEqual(cl.queryset.count(), 0)
479. 
480.     def test_builtin_lookup_in_search_fields(self):
481.         band = Group.objects.create(name='The Hype')
482.         concert = Concert.objects.create(name='Woodstock', group=band)
483. 
484.         m = ConcertAdmin(Concert, custom_site)
485.         m.search_fields = ['name__iexact']
486. 
487.         request = self.factory.get('/', data={SEARCH_VAR: 'woodstock'})
488.         request.user = self.superuser
489.         cl = m.get_changelist_instance(request)
490.         self.assertCountEqual(cl.queryset, [concert])
491. 
492.         request = self.factory.get('/', data={SEARCH_VAR: 'wood'})
493.         request.user = self.superuser
494.         cl = m.get_changelist_instance(request)
495.         self.assertCountEqual(cl.queryset, [])
496. 
497.     def test_custom_lookup_in_search_fields(self):
498.         band = Group.objects.create(name='The Hype')
499.         concert = Concert.objects.create(name='Woodstock', group=band)
500.


File: tests/admin_changelist/tests.py
Line number range: 53 - 1107
Content:
@override_settings(ROOT_URLCONF="admin_changelist.urls")
class ChangeListTests(TestCase):
    factory = RequestFactory()

    @classmethod
    def setUpTestData(cls):
        cls.superuser = User.objects.create_superuser(username='super', email='a@b.com', password='xxx')

    def _create_superuser(self, username):
        return User.objects.create_superuser(username=username, email='a@b.com', password='xxx')

    def _mocked_authenticated_request(self, url, user):
        request = self.factory.get(url)
        request.user = user
        return request

    def test_specified_ordering_by_f_expression(self):
        class OrderedByFBandAdmin(admin.ModelAdmin):
            list_display = ['name', 'genres', 'nr_of_members']
            ordering = (
                F('nr_of_members').desc(nulls_last=True),
                Upper(F('name')).asc(),
                F('genres').asc(),
            )

        m = OrderedByFBandAdmin(Band, custom_site)
        request = self.factory.get('/band/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.get_ordering_field_columns(), {3: 'desc', 2: 'asc'})

    def test_specified_ordering_by_f_expression_without_asc_desc(self):
        class OrderedByFBandAdmin(admin.ModelAdmin):
            list_display = ['name', 'genres', 'nr_of_members']
            ordering = (F('nr_of_members'), Upper('name'), F('genres'))

        m = OrderedByFBandAdmin(Band, custom_site)
        request = self.factory.get('/band/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.get_ordering_field_columns(), {3: 'asc', 2: 'asc'})

    def test_select_related_preserved(self):
        """
        Regression test for #10348: ChangeList.get_queryset() shouldn't
        overwrite a custom select_related provided by ModelAdmin.get_queryset().
        """
        m = ChildAdmin(Child, custom_site)
        request = self.factory.get('/child/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.query.select_related, {'parent': {}})

    def test_select_related_as_tuple(self):
        ia = InvitationAdmin(Invitation, custom_site)
        request = self.factory.get('/invitation/')
        request.user = self.superuser
        cl = ia.get_changelist_instance(request)
        self.assertEqual(cl.queryset.query.select_related, {'player': {}})

    def test_select_related_as_empty_tuple(self):
        ia = InvitationAdmin(Invitation, custom_site)
        ia.list_select_related = ()
        request = self.factory.get('/invitation/')
        request.user = self.superuser
        cl = ia.get_changelist_instance(request)
        self.assertIs(cl.queryset.query.select_related, False)

    def test_get_select_related_custom_method(self):
        class GetListSelectRelatedAdmin(admin.ModelAdmin):
            list_display = ('band', 'player')

            def get_list_select_related(self, request):
                return ('band', 'player')

        ia = GetListSelectRelatedAdmin(Invitation, custom_site)
        request = self.factory.get('/invitation/')
        request.user = self.superuser
        cl = ia.get_changelist_instance(request)
        self.assertEqual(cl.queryset.query.select_related, {'player': {}, 'band': {}})

    def test_result_list_empty_changelist_value(self):
        """
        Regression test for #14982: EMPTY_CHANGELIST_VALUE should be honored
        for relationship fields
        """
        new_child = Child.objects.create(name='name', parent=None)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">-</td>')
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_set_empty_value_display_on_admin_site(self):
        """
        Empty value display can be set on AdminSite.
        """
        new_child = Child.objects.create(name='name', parent=None)
        request = self.factory.get('/child/')
        request.user = self.superuser
        # Set a new empty display value on AdminSite.
        admin.site.empty_value_display = '???'
        m = ChildAdmin(Child, admin.site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">???</td>')
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_set_empty_value_display_in_model_admin(self):
        """
        Empty value display can be set in ModelAdmin or individual fields.
        """
        new_child = Child.objects.create(name='name', parent=None)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = EmptyValueChildAdmin(Child, admin.site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(
            new_child.id,
            link,
            '<td class="field-age_display">&amp;dagger;</td>'
            '<td class="field-age">-empty-</td>'
        )
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_html(self):
        """
        Inclusion tag result_list generates a table when with default
        ModelAdmin settings.
        """
        new_parent = Parent.objects.create(name='parent')
        new_child = Child.objects.create(name='name', parent=new_parent)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        cl.formset = None
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        link = reverse('admin:admin_changelist_child_change', args=(new_child.id,))
        row_html = build_tbody_html(new_child.id, link, '<td class="field-parent nowrap">%s</td>' % new_parent)
        self.assertNotEqual(table_output.find(row_html), -1, 'Failed to find expected row element: %s' % table_output)

    def test_result_list_editable_html(self):
        """
        Regression tests for #11791: Inclusion tag result_list generates a
        table and this checks that the items are nested within the table
        element tags.
        Also a regression test for #13599, verifies that hidden fields
        when list_editable is enabled are rendered in a div outside the
        table.
        """
        new_parent = Parent.objects.create(name='parent')
        new_child = Child.objects.create(name='name', parent=new_parent)
        request = self.factory.get('/child/')
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)

        # Test with list_editable fields
        m.list_display = ['id', 'name', 'parent']
        m.list_display_links = ['id']
        m.list_editable = ['name']
        cl = m.get_changelist_instance(request)
        FormSet = m.get_changelist_formset(request)
        cl.formset = FormSet(queryset=cl.result_list)
        template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
        context = Context({'cl': cl, 'opts': Child._meta})
        table_output = template.render(context)
        # make sure that hidden fields are in the correct place
        hiddenfields_div = (
            '<div class="hiddenfields">'
            '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
            '</div>'
        ) % new_child.id
        self.assertInHTML(hiddenfields_div, table_output, msg_prefix='Failed to find hidden fields')

        # make sure that list editable fields are rendered in divs correctly
        editable_name_field = (
            '<input name="form-0-name" value="name" class="vTextField" '
            'maxlength="30" type="text" id="id_form-0-name">'
        )
        self.assertInHTML(
            '<td class="field-name">%s</td>' % editable_name_field,
            table_output,
            msg_prefix='Failed to find "name" list_editable field',
        )

    def test_result_list_editable(self):
        """
        Regression test for #14312: list_editable with pagination
        """
        new_parent = Parent.objects.create(name='parent')
        for i in range(200):
            Child.objects.create(name='name %s' % i, parent=new_parent)
        request = self.factory.get('/child/', data={'p': -1})  # Anything outside range
        request.user = self.superuser
        m = ChildAdmin(Child, custom_site)

        # Test with list_editable fields
        m.list_display = ['id', 'name', 'parent']
        m.list_display_links = ['id']
        m.list_editable = ['name']
        with self.assertRaises(IncorrectLookupParameters):
            m.get_changelist_instance(request)

    def test_custom_paginator(self):
        new_parent = Parent.objects.create(name='parent')
        for i in range(200):
            Child.objects.create(name='name %s' % i, parent=new_parent)

        request = self.factory.get('/child/')
        request.user = self.superuser
        m = CustomPaginationAdmin(Child, custom_site)

        cl = m.get_changelist_instance(request)
        cl.get_results(request)
        self.assertIsInstance(cl.paginator, CustomPaginator)

    def test_distinct_for_m2m_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. Basic ManyToMany.
        """
        blues = Genre.objects.create(name='Blues')
        band = Band.objects.create(name='B.B. King Review', nr_of_members=11)

        band.genres.add(blues)
        band.genres.add(blues)

        m = BandAdmin(Band, custom_site)
        request = self.factory.get('/band/', data={'genres': blues.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Group instance
        self.assertEqual(cl.result_count, 1)

    def test_distinct_for_through_m2m_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. With an intermediate model.
        """
        lead = Musician.objects.create(name='Vox')
        band = Group.objects.create(name='The Hype')
        Membership.objects.create(group=band, music=lead, role='lead voice')
        Membership.objects.create(group=band, music=lead, role='bass player')

        m = GroupAdmin(Group, custom_site)
        request = self.factory.get('/group/', data={'members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Group instance
        self.assertEqual(cl.result_count, 1)

    def test_distinct_for_through_m2m_at_second_level_in_list_filter(self):
        """
        When using a ManyToMany in list_filter at the second level behind a
        ForeignKey, distinct() must be called and results shouldn't appear more
        than once.
        """
        lead = Musician.objects.create(name='Vox')
        band = Group.objects.create(name='The Hype')
        Concert.objects.create(name='Woodstock', group=band)
        Membership.objects.create(group=band, music=lead, role='lead voice')
        Membership.objects.create(group=band, music=lead, role='bass player')

        m = ConcertAdmin(Concert, custom_site)
        request = self.factory.get('/concert/', data={'group__members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Concert instance
        self.assertEqual(cl.result_count, 1)

    def test_distinct_for_inherited_m2m_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. Model managed in the
        admin inherits from the one that defines the relationship.
        """
        lead = Musician.objects.create(name='John')
        four = Quartet.objects.create(name='The Beatles')
        Membership.objects.create(group=four, music=lead, role='lead voice')
        Membership.objects.create(group=four, music=lead, role='guitar player')

        m = QuartetAdmin(Quartet, custom_site)
        request = self.factory.get('/quartet/', data={'members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one Quartet instance
        self.assertEqual(cl.result_count, 1)

    def test_distinct_for_m2m_to_inherited_in_list_filter(self):
        """
        Regression test for #13902: When using a ManyToMany in list_filter,
        results shouldn't appear more than once. Target of the relationship
        inherits from another.
        """
        lead = ChordsMusician.objects.create(name='Player A')
        three = ChordsBand.objects.create(name='The Chords Trio')
        Invitation.objects.create(band=three, player=lead, instrument='guitar')
        Invitation.objects.create(band=three, player=lead, instrument='bass')

        m = ChordsBandAdmin(ChordsBand, custom_site)
        request = self.factory.get('/chordsband/', data={'members': lead.pk})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        cl.get_results(request)

        # There's only one ChordsBand instance
        self.assertEqual(cl.result_count, 1)

    def test_distinct_for_non_unique_related_object_in_list_filter(self):
        """
        Regressions tests for #15819: If a field listed in list_filters
        is a non-unique related object, distinct() must be called.
        """
        parent = Parent.objects.create(name='Mary')
        # Two children with the same name
        Child.objects.create(parent=parent, name='Daniel')
        Child.objects.create(parent=parent, name='Daniel')

        m = ParentAdmin(Parent, custom_site)
        request = self.factory.get('/parent/', data={'child__name': 'Daniel'})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        # Make sure distinct() was called
        self.assertEqual(cl.queryset.count(), 1)

    def test_changelist_search_form_validation(self):
        m = ConcertAdmin(Concert, custom_site)
        tests = [
            ({SEARCH_VAR: '\x00'}, 'Null characters are not allowed.'),
            ({SEARCH_VAR: 'some\x00thing'}, 'Null characters are not allowed.'),
        ]
        for case, error in tests:
            with self.subTest(case=case):
                request = self.factory.get('/concert/', case)
                request.user = self.superuser
                request._messages = CookieStorage(request)
                m.get_changelist_instance(request)
                messages = [m.message for m in request._messages]
                self.assertEqual(1, len(messages))
                self.assertEqual(error, messages[0])

    def test_distinct_for_non_unique_related_object_in_search_fields(self):
        """
        Regressions tests for #15819: If a field listed in search_fields
        is a non-unique related object, distinct() must be called.
        """
        parent = Parent.objects.create(name='Mary')
        Child.objects.create(parent=parent, name='Danielle')
        Child.objects.create(parent=parent, name='Daniel')

        m = ParentAdmin(Parent, custom_site)
        request = self.factory.get('/parent/', data={SEARCH_VAR: 'daniel'})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        # Make sure distinct() was called
        self.assertEqual(cl.queryset.count(), 1)

    def test_distinct_for_many_to_many_at_second_level_in_search_fields(self):
        """
        When using a ManyToMany in search_fields at the second level behind a
        ForeignKey, distinct() must be called and results shouldn't appear more
        than once.
        """
        lead = Musician.objects.create(name='Vox')
        band = Group.objects.create(name='The Hype')
        Concert.objects.create(name='Woodstock', group=band)
        Membership.objects.create(group=band, music=lead, role='lead voice')
        Membership.objects.create(group=band, music=lead, role='bass player')

        m = ConcertAdmin(Concert, custom_site)
        request = self.factory.get('/concert/', data={SEARCH_VAR: 'vox'})
        request.user = self.superuser

        cl = m.get_changelist_instance(request)
        # There's only one Concert instance
        self.assertEqual(cl.queryset.count(), 1)

    def test_pk_in_search_fields(self):
        band = Group.objects.create(name='The Hype')
        Concert.objects.create(name='Woodstock', group=band)

        m = ConcertAdmin(Concert, custom_site)
        m.search_fields = ['group__pk']

        request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 1)

        request = self.factory.get('/concert/', data={SEARCH_VAR: band.pk + 5})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 0)

    def test_builtin_lookup_in_search_fields(self):
        band = Group.objects.create(name='The Hype')
        concert = Concert.objects.create(name='Woodstock', group=band)

        m = ConcertAdmin(Concert, custom_site)
        m.search_fields = ['name__iexact']

        request = self.factory.get('/', data={SEARCH_VAR: 'woodstock'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [concert])

        request = self.factory.get('/', data={SEARCH_VAR: 'wood'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [])

    def test_custom_lookup_in_search_fields(self):
        band = Group.objects.create(name='The Hype')
        concert = Concert.objects.create(name='Woodstock', group=band)

        m = ConcertAdmin(Concert, custom_site)
        m.search_fields = ['group__name__cc']
        with register_lookup(Field, Contains, lookup_name='cc'):
            request = self.factory.get('/', data={SEARCH_VAR: 'Hype'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [concert])

            request = self.factory.get('/', data={SEARCH_VAR: 'Woodstock'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [])

    def test_spanning_relations_with_custom_lookup_in_search_fields(self):
        hype = Group.objects.create(name='The Hype')
        concert = Concert.objects.create(name='Woodstock', group=hype)
        vox = Musician.objects.create(name='Vox', age=20)
        Membership.objects.create(music=vox, group=hype)
        # Register a custom lookup on IntegerField to ensure that field
        # traversing logic in ModelAdmin.get_search_results() works.
        with register_lookup(IntegerField, Exact, lookup_name='exactly'):
            m = ConcertAdmin(Concert, custom_site)
            m.search_fields = ['group__members__age__exactly']

            request = self.factory.get('/', data={SEARCH_VAR: '20'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [concert])

            request = self.factory.get('/', data={SEARCH_VAR: '21'})
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertCountEqual(cl.queryset, [])

    def test_custom_lookup_with_pk_shortcut(self):
        self.assertEqual(CharPK._meta.pk.name, 'char_pk')  # Not equal to 'pk'.
        m = admin.ModelAdmin(CustomIdUser, custom_site)

        abc = CharPK.objects.create(char_pk='abc')
        abcd = CharPK.objects.create(char_pk='abcd')
        m = admin.ModelAdmin(CharPK, custom_site)
        m.search_fields = ['pk__exact']

        request = self.factory.get('/', data={SEARCH_VAR: 'abc'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [abc])

        request = self.factory.get('/', data={SEARCH_VAR: 'abcd'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertCountEqual(cl.queryset, [abcd])

    def test_no_distinct_for_m2m_in_list_filter_without_params(self):
        """
        If a ManyToManyField is in list_filter but isn't in any lookup params,
        the changelist's query shouldn't have distinct.
        """
        m = BandAdmin(Band, custom_site)
        for lookup_params in ({}, {'name': 'test'}):
            request = self.factory.get('/band/', lookup_params)
            request.user = self.superuser
            cl = m.get_changelist_instance(request)
            self.assertFalse(cl.queryset.query.distinct)

        # A ManyToManyField in params does have distinct applied.
        request = self.factory.get('/band/', {'genres': '0'})
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        self.assertTrue(cl.queryset.query.distinct)

    def test_pagination(self):
        """
        Regression tests for #12893: Pagination in admins changelist doesn't
        use queryset set by modeladmin.
        """
        parent = Parent.objects.create(name='anything')
        for i in range(30):
            Child.objects.create(name='name %s' % i, parent=parent)
            Child.objects.create(name='filtered %s' % i, parent=parent)

        request = self.factory.get('/child/')
        request.user = self.superuser

        # Test default queryset
        m = ChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 60)
        self.assertEqual(cl.paginator.count, 60)
        self.assertEqual(list(cl.paginator.page_range), [1, 2, 3, 4, 5, 6])

        # Test custom queryset
        m = FilteredChildAdmin(Child, custom_site)
        cl = m.get_changelist_instance(request)
        self.assertEqual(cl.queryset.count(), 30)
        self.assertEqual(cl.paginator.count, 30)
        self.assertEqual(list(cl.paginator.page_range), [1, 2, 3])

    def test_computed_list_display_localization(self):
        """
        Regression test for #13196: output of functions should be  localized
        in the changelist.
        """
        self.client.force_login(self.superuser)
        event = Event.objects.create(date=datetime.date.today())
        response = self.client.get(reverse('admin:admin_changelist_event_changelist'))
        self.assertContains(response, formats.localize(event.date))
        self.assertNotContains(response, str(event.date))

    def test_dynamic_list_display(self):
        """
        Regression tests for #14206: dynamic list_display support.
        """
        parent = Parent.objects.create(name='parent')
        for i in range(10):
            Child.objects.create(name='child %s' % i, parent=parent)

        user_noparents = self._create_superuser('noparents')
        user_parents = self._create_superuser('parents')

        # Test with user 'noparents'
        m = custom_site._registry[Child]
        request = self._mocked_authenticated_request('/child/', user_noparents)
        response = m.changelist_view(request)
        self.assertNotContains(response, 'Parent object')

        list_display = m.get_list_display(request)
        list_display_links = m.get_list_display_links(request, list_display)
        self.assertEqual(list_display, ['name', 'age'])
        self.assertEqual(list_display_links, ['name'])

        # Test with user 'parents'
        m = DynamicListDisplayChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', user_parents)
        response = m.changelist_view(request)
        self.assertContains(response, 'Parent object')

        custom_site.unregister(Child)

        list_display = m.get_list_display(request)
        list_display_links = m.get_list_display_links(request, list_display)
        self.assertEqual(list_display, ('parent', 'name', 'age'))
        self.assertEqual(list_display_links, ['parent'])

        # Test default implementation
        custom_site.register(Child, ChildAdmin)
        m = custom_site._registry[Child]
        request = self._mocked_authenticated_request('/child/', user_noparents)
        response = m.changelist_view(request)
        self.assertContains(response, 'Parent object')

    def test_show_all(self):
        parent = Parent.objects.create(name='anything')
        for i in range(30):
            Child.objects.create(name='name %s' % i, parent=parent)
            Child.objects.create(name='filtered %s' % i, parent=parent)

        # Add "show all" parameter to request
        request = self.factory.get('/child/', data={ALL_VAR: ''})
        request.user = self.superuser

        # Test valid "show all" request (number of total objects is under max)
        m = ChildAdmin(Child, custom_site)
        m.list_max_show_all = 200
        # 200 is the max we'll pass to ChangeList
        cl = m.get_changelist_instance(request)
        cl.get_results(request)
        self.assertEqual(len(cl.result_list), 60)

        # Test invalid "show all" request (number of total objects over max)
        # falls back to paginated pages
        m = ChildAdmin(Child, custom_site)
        m.list_max_show_all = 30
        # 30 is the max we'll pass to ChangeList for this test
        cl = m.get_changelist_instance(request)
        cl.get_results(request)
        self.assertEqual(len(cl.result_list), 10)

    def test_dynamic_list_display_links(self):
        """
        Regression tests for #16257: dynamic list_display_links support.
        """
        parent = Parent.objects.create(name='parent')
        for i in range(1, 10):
            Child.objects.create(id=i, name='child %s' % i, parent=parent, age=i)

        m = DynamicListDisplayLinksChildAdmin(Child, custom_site)
        superuser = self._create_superuser('superuser')
        request = self._mocked_authenticated_request('/child/', superuser)
        response = m.changelist_view(request)
        for i in range(1, 10):
            link = reverse('admin:admin_changelist_child_change', args=(i,))
            self.assertContains(response, '<a href="%s">%s</a>' % (link, i))

        list_display = m.get_list_display(request)
        list_display_links = m.get_list_display_links(request, list_display)
        self.assertEqual(list_display, ('parent', 'name', 'age'))
        self.assertEqual(list_display_links, ['age'])

    def test_no_list_display_links(self):
        """#15185 -- Allow no links from the 'change list' view grid."""
        p = Parent.objects.create(name='parent')
        m = NoListDisplayLinksParentAdmin(Parent, custom_site)
        superuser = self._create_superuser('superuser')
        request = self._mocked_authenticated_request('/parent/', superuser)
        response = m.changelist_view(request)
        link = reverse('admin:admin_changelist_parent_change', args=(p.pk,))
        self.assertNotContains(response, '<a href="%s">' % link)

    def test_tuple_list_display(self):
        swallow = Swallow.objects.create(origin='Africa', load='12.34', speed='22.2')
        swallow2 = Swallow.objects.create(origin='Africa', load='12.34', speed='22.2')
        swallow_o2o = SwallowOneToOne.objects.create(swallow=swallow2)

        model_admin = SwallowAdmin(Swallow, custom_site)
        superuser = self._create_superuser('superuser')
        request = self._mocked_authenticated_request('/swallow/', superuser)
        response = model_admin.changelist_view(request)
        # just want to ensure it doesn't blow up during rendering
        self.assertContains(response, str(swallow.origin))
        self.assertContains(response, str(swallow.load))
        self.assertContains(response, str(swallow.speed))
        # Reverse one-to-one relations should work.
        self.assertContains(response, '<td class="field-swallowonetoone">-</td>')
        self.assertContains(response, '<td class="field-swallowonetoone">%s</td>' % swallow_o2o)

    def test_multiuser_edit(self):
        """
        Simultaneous edits of list_editable fields on the changelist by
        different users must not result in one user's edits creating a new
        object instead of modifying the correct existing object (#11313).
        """
        # To replicate this issue, simulate the following steps:
        # 1. User1 opens an admin changelist with list_editable fields.
        # 2. User2 edits object "Foo" such that it moves to another page in
        #    the pagination order and saves.
        # 3. User1 edits object "Foo" and saves.
        # 4. The edit made by User1 does not get applied to object "Foo" but
        #    instead is used to create a new object (bug).

        # For this test, order the changelist by the 'speed' attribute and
        # display 3 objects per page (SwallowAdmin.list_per_page = 3).

        # Setup the test to reflect the DB state after step 2 where User2 has
        # edited the first swallow object's speed from '4' to '1'.
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        b = Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        c = Swallow.objects.create(origin='Swallow C', load=5, speed=5)
        d = Swallow.objects.create(origin='Swallow D', load=9, speed=9)

        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')

        # Send the POST from User1 for step 3. It's still using the changelist
        # ordering from before User2's edits in step 2.
        data = {
            'form-TOTAL_FORMS': '3',
            'form-INITIAL_FORMS': '3',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(d.pk),
            'form-1-uuid': str(c.pk),
            'form-2-uuid': str(a.pk),
            'form-0-load': '9.0',
            'form-0-speed': '9.0',
            'form-1-load': '5.0',
            'form-1-speed': '5.0',
            'form-2-load': '5.0',
            'form-2-speed': '4.0',
            '_save': 'Save',
        }
        response = self.client.post(changelist_url, data, follow=True, extra={'o': '-2'})

        # The object User1 edited in step 3 is displayed on the changelist and
        # has the correct edits applied.
        self.assertContains(response, '1 swallow was changed successfully.')
        self.assertContains(response, a.origin)
        a.refresh_from_db()
        self.assertEqual(a.load, float(data['form-2-load']))
        self.assertEqual(a.speed, float(data['form-2-speed']))
        b.refresh_from_db()
        self.assertEqual(b.load, 2)
        self.assertEqual(b.speed, 2)
        c.refresh_from_db()
        self.assertEqual(c.load, float(data['form-1-load']))
        self.assertEqual(c.speed, float(data['form-1-speed']))
        d.refresh_from_db()
        self.assertEqual(d.load, float(data['form-0-load']))
        self.assertEqual(d.speed, float(data['form-0-speed']))
        # No new swallows were created.
        self.assertEqual(len(Swallow.objects.all()), 4)

    def test_get_edited_object_ids(self):
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        b = Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        c = Swallow.objects.create(origin='Swallow C', load=5, speed=5)
        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')
        m = SwallowAdmin(Swallow, custom_site)
        data = {
            'form-TOTAL_FORMS': '3',
            'form-INITIAL_FORMS': '3',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(a.pk),
            'form-1-uuid': str(b.pk),
            'form-2-uuid': str(c.pk),
            'form-0-load': '9.0',
            'form-0-speed': '9.0',
            'form-1-load': '5.0',
            'form-1-speed': '5.0',
            'form-2-load': '5.0',
            'form-2-speed': '4.0',
            '_save': 'Save',
        }
        request = self.factory.post(changelist_url, data=data)
        pks = m._get_edited_object_pks(request, prefix='form')
        self.assertEqual(sorted(pks), sorted([str(a.pk), str(b.pk), str(c.pk)]))

    def test_get_list_editable_queryset(self):
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        data = {
            'form-TOTAL_FORMS': '2',
            'form-INITIAL_FORMS': '2',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(a.pk),
            'form-0-load': '10',
            '_save': 'Save',
        }
        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')
        m = SwallowAdmin(Swallow, custom_site)
        request = self.factory.post(changelist_url, data=data)
        queryset = m._get_list_editable_queryset(request, prefix='form')
        self.assertEqual(queryset.count(), 1)
        data['form-0-uuid'] = 'INVALD_PRIMARY_KEY'
        # The unfiltered queryset is returned if there's invalid data.
        request = self.factory.post(changelist_url, data=data)
        queryset = m._get_list_editable_queryset(request, prefix='form')
        self.assertEqual(queryset.count(), 2)

    def test_changelist_view_list_editable_changed_objects_uses_filter(self):
        """list_editable edits use a filtered queryset to limit memory usage."""
        a = Swallow.objects.create(origin='Swallow A', load=4, speed=1)
        Swallow.objects.create(origin='Swallow B', load=2, speed=2)
        data = {
            'form-TOTAL_FORMS': '2',
            'form-INITIAL_FORMS': '2',
            'form-MIN_NUM_FORMS': '0',
            'form-MAX_NUM_FORMS': '1000',
            'form-0-uuid': str(a.pk),
            'form-0-load': '10',
            '_save': 'Save',
        }
        superuser = self._create_superuser('superuser')
        self.client.force_login(superuser)
        changelist_url = reverse('admin:admin_changelist_swallow_changelist')
        with CaptureQueriesContext(connection) as context:
            response = self.client.post(changelist_url, data=data)
            self.assertEqual(response.status_code, 200)
            self.assertIn('WHERE', context.captured_queries[4]['sql'])
            self.assertIn('IN', context.captured_queries[4]['sql'])
            # Check only the first few characters since the UUID may have dashes.
            self.assertIn(str(a.pk)[:8], context.captured_queries[4]['sql'])

    def test_deterministic_order_for_unordered_model(self):
        """
        The primary key is used in the ordering of the changelist's results to
        guarantee a deterministic order, even when the model doesn't have any
        default ordering defined (#17198).
        """
        superuser = self._create_superuser('superuser')

        for counter in range(1, 51):
            UnorderedObject.objects.create(id=counter, bool=True)

        class UnorderedObjectAdmin(admin.ModelAdmin):
            list_per_page = 10

        def check_results_order(ascending=False):
            custom_site.register(UnorderedObject, UnorderedObjectAdmin)
            model_admin = UnorderedObjectAdmin(UnorderedObject, custom_site)
            counter = 0 if ascending else 51
            for page in range(0, 5):
                request = self._mocked_authenticated_request('/unorderedobject/?p=%s' % page, superuser)
                response = model_admin.changelist_view(request)
                for result in response.context_data['cl'].result_list:
                    counter += 1 if ascending else -1
                    self.assertEqual(result.id, counter)
            custom_site.unregister(UnorderedObject)

        # When no order is defined at all, everything is ordered by '-pk'.
        check_results_order()

        # When an order field is defined but multiple records have the same
        # value for that field, make sure everything gets ordered by -pk as well.
        UnorderedObjectAdmin.ordering = ['bool']
        check_results_order()

        # When order fields are defined, including the pk itself, use them.
        UnorderedObjectAdmin.ordering = ['bool', '-pk']
        check_results_order()
        UnorderedObjectAdmin.ordering = ['bool', 'pk']
        check_results_order(ascending=True)
        UnorderedObjectAdmin.ordering = ['-id', 'bool']
        check_results_order()
        UnorderedObjectAdmin.ordering = ['id', 'bool']
        check_results_order(ascending=True)

    def test_deterministic_order_for_model_ordered_by_its_manager(self):
        """
        The primary key is used in the ordering of the changelist's results to
        guarantee a deterministic order, even when the model has a manager that
        defines a default ordering (#17198).
        """
        superuser = self._create_superuser('superuser')

        for counter in range(1, 51):
            OrderedObject.objects.create(id=counter, bool=True, number=counter)

        class OrderedObjectAdmin(admin.ModelAdmin):
            list_per_page = 10

        def check_results_order(ascending=False):
            custom_site.register(OrderedObject, OrderedObjectAdmin)
            model_admin = OrderedObjectAdmin(OrderedObject, custom_site)
            counter = 0 if ascending else 51
            for page in range(0, 5):
                request = self._mocked_authenticated_request('/orderedobject/?p=%s' % page, superuser)
                response = model_admin.changelist_view(request)
                for result in response.context_data['cl'].result_list:
                    counter += 1 if ascending else -1
                    self.assertEqual(result.id, counter)
            custom_site.unregister(OrderedObject)

        # When no order is defined at all, use the model's default ordering (i.e. 'number')
        check_results_order(ascending=True)

        # When an order field is defined but multiple records have the same
        # value for that field, make sure everything gets ordered by -pk as well.
        OrderedObjectAdmin.ordering = ['bool']
        check_results_order()

        # When order fields are defined, including the pk itself, use them.
        OrderedObjectAdmin.ordering = ['bool', '-pk']
        check_results_order()
        OrderedObjectAdmin.ordering = ['bool', 'pk']
        check_results_order(ascending=True)
        OrderedObjectAdmin.ordering = ['-id', 'bool']
        check_results_order()
        OrderedObjectAdmin.ordering = ['id', 'bool']
        check_results_order(ascending=True)

    @isolate_apps('admin_changelist')
    def test_total_ordering_optimization(self):
        class Related(models.Model):
            unique_field = models.BooleanField(unique=True)

            class Meta:
                ordering = ('unique_field',)

        class Model(models.Model):
            unique_field = models.BooleanField(unique=True)
            unique_nullable_field = models.BooleanField(unique=True, null=True)
            related = models.ForeignKey(Related, models.CASCADE)
            other_related = models.ForeignKey(Related, models.CASCADE)
            related_unique = models.OneToOneField(Related, models.CASCADE)
            field = models.BooleanField()
            other_field = models.BooleanField()
            null_field = models.BooleanField(null=True)

            class Meta:
                unique_together = {
                    ('field', 'other_field'),
                    ('field', 'null_field'),
                    ('related', 'other_related_id'),
                }

        class ModelAdmin(admin.ModelAdmin):
            def get_queryset(self, request):
                return Model.objects.none()

        request = self._mocked_authenticated_request('/', self.superuser)
        site = admin.AdminSite(name='admin')
        model_admin = ModelAdmin(Model, site)
        change_list = model_admin.get_changelist_instance(request)
        tests = (
            ([], ['-pk']),
            # Unique non-nullable field.
            (['unique_field'], ['unique_field']),
            (['-unique_field'], ['-unique_field']),
            # Unique nullable field.
            (['unique_nullable_field'], ['unique_nullable_field', '-pk']),
            # Field.
            (['field'], ['field', '-pk']),
            # Related field introspection is not implemented.
            (['related__unique_field'], ['related__unique_field', '-pk']),
            # Related attname unique.
            (['related_unique_id'], ['related_unique_id']),
            # Related ordering introspection is not implemented.
            (['related_unique'], ['related_unique', '-pk']),
            # Composite unique.
            (['field', '-other_field'], ['field', '-other_field']),
            # Composite unique nullable.
            (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
            # Composite unique nullable.
            (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
            # Composite unique nullable.
            (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
            # Composite unique and nullable.
            (['-field', 'null_field', 'other_field'], ['-field', 'null_field', 'other_field']),
            # Composite unique attnames.
            (['related_id', '-other_related_id'], ['related_id', '-other_related_id']),
            # Composite unique names.
            (['related', '-other_related_id'], ['related', '-other_related_id', '-pk']),
        )
        # F() objects composite unique.
        total_ordering = [F('field'), F('other_field').desc(nulls_last=True)]
        # F() objects composite unique nullable.
        non_total_ordering = [F('field'), F('null_field').desc(nulls_last=True)]
        tests += (
            (total_ordering, total_ordering),
            (non_total_ordering, non_total_ordering + ['-pk']),
        )
        for ordering, expected in tests:
            with self.subTest(ordering=ordering):
                self.assertEqual(change_list._get_deterministic_ordering(ordering), expected)

    def test_dynamic_list_filter(self):
        """
        Regression tests for ticket #17646: dynamic list_filter support.
        """
        parent = Parent.objects.create(name='parent')
        for i in range(10):
            Child.objects.create(name='child %s' % i, parent=parent)

        user_noparents = self._create_superuser('noparents')
        user_parents = self._create_superuser('parents')

        # Test with user 'noparents'
        m = DynamicListFilterChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', user_noparents)
        response = m.changelist_view(request)
        self.assertEqual(response.context_data['cl'].list_filter, ['name', 'age'])

        # Test with user 'parents'
        m = DynamicListFilterChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', user_parents)
        response = m.changelist_view(request)
        self.assertEqual(response.context_data['cl'].list_filter, ('parent', 'name', 'age'))

    def test_dynamic_search_fields(self):
        child = self._create_superuser('child')
        m = DynamicSearchFieldsChildAdmin(Child, custom_site)
        request = self._mocked_authenticated_request('/child/', child)
        response = m.changelist_view(request)
        self.assertEqual(response.context_data['cl'].search_fields, ('name', 'age'))

    def test_pagination_page_range(self):
        """
        Regression tests for ticket #15653: ensure the number of pages
        generated for changelist views are correct.
        """
        # instantiating and setting up ChangeList object
        m = GroupAdmin(Group, custom_site)
        request = self.factory.get('/group/')
        request.user = self.superuser
        cl = m.get_changelist_instance(request)
        per_page = cl.list_per_page = 10

        for page_num, objects_count, expected_page_range in [
            (0, per_page, []),
            (0, per_page * 2, list(range(2))),
            (5, per_page * 11, list(range(11))),
            (5, per_page * 12, [0, 1, 2, 3, 4, 5, 6, 7, 8, '.', 10, 11]),
            (6, per_page * 12, [0, 1, '.', 3, 4, 5, 6, 7, 8, 9, 10, 11]),
            (6, per_page * 13, [0, 1, '.', 3, 4, 5, 6, 7, 8, 9, '.', 11, 12]),
        ]:
            # assuming we have exactly `objects_count` objects
            Group.objects.all().delete()
            for i in range(objects_count):
                Group.objects.create(name='test band')

            # setting page number and calculating page range
            cl.page_num = page_num
            cl.get_results(request)
            real_page_range = pagination(cl)['page_range']
            self.assertEqual(expected_page_range, list(real_page_range))

    def test_object_tools_displayed_no_add_permission(self):
        """
        When ModelAdmin.has_add_permission() returns False, the object-tools
        block is still shown.
        """
        superuser = self._create_superuser('superuser')
        m = EventAdmin(Event, custom_site)
        request = self._mocked_authenticated_request('/event/', superuser)
        self.assertFalse(m.has_add_permission(request))
        response = m.changelist_view(request)
        self.assertIn('<ul class="object-tools">', response.rendered_content)
        # The "Add" button inside the object-tools shouldn't appear.
        self.assertNotIn('Add ', response.rendered_content)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 08:21:03,465 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="This test directly matches the user's criteria. It is within a test class, uses a ModelAdmin with `list_editable` enabled (`SwallowAdmin`), and uses `self.client.post()` to submit data. The test's purpose is to check for bugs when multiple users edit list_editable fields at the same time.", relative_path='tests/admin_changelist/tests.py', start_line=880, end_line=945), ContextOutput(reasoning="This test method meets the user's criteria by testing `list_editable` functionality and using `self.client.post()`. It specifically verifies that the queryset used to save edited objects is correctly filtered, which is relevant to the performance and behavior of the `list_editable` feature.", relative_path='tests/admin_changelist/tests.py', start_line=995, end_line=1013), ContextOutput(reasoning='This test configures a `ModelAdmin` with `list_editable` and is essential for understanding how the feature is tested, even though it does not use `self.client.post()`. It verifies the correct HTML rendering of editable fields in the changelist, which is a fundamental aspect of the `list_editable` feature.', relative_path='tests/admin_changelist/tests.py', start_line=212, end_line=255)]
2025-12-23 08:21:03,467 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 3 contexts to memory for query: Please provide the full content of `tests/admin_changelist/tests.py`.
2025-12-23 08:21:03,467 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 08:21:03,467 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 08:21:03,468 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 3 new contexts to 0 existing contexts
2025-12-23 08:21:03,468 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-23 08:21:03,469 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── FUNDING.yml
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   └── test_postgresql.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktrans.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_trans.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Possible data loss in admin changeform view when using regex special characters in formset prefix

Description: Description
	 
		(last modified by Baptiste Mispelon)
	 
While browsing the code in admin/options.py [1] (working on an unrelated ticket), I came across that line:
pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
Generating a regex like this using string formatting can cause problems when the arguments contain special regex characters.
self.model._meta.pk.name is probably safe (I'm not 100% sure about this) since it has to follow Python's syntax rules about identifiers.
However prefix has no such restrictions [2] and could contain any number of special regex characters.
The fix is quite straightforward (use re.escape()) but it's hard to tell if there might be other occurrences of a similar pattern in Django's code.
Some quick grepping (using git grep -E '(re_compile|re\.(compile|search|match))' -- 'django/**.py') currently yields about 200 results. I had a superficial glance through the list and didn't spot other instances of the same usage pattern.
EDIT I forgot to mention, but this bug is technically a regression (introduced in b18650a2634890aa758abae2f33875daa13a9ba3).
[1] ​https://github.com/django/django/blob/ef93fd4683645635d3597e17c23f9ed862dd716b/django/contrib/admin/options.py#L1634
[2] ​https://docs.djangoproject.com/en/dev/topics/forms/formsets/#customizing-a-formset-s-prefix

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 137e6faa0f..31bfd90c67 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -1631,7 +1631,7 @@ class ModelAdmin(BaseModelAdmin):
 
     def _get_edited_object_pks(self, request, prefix):
         """Return POST data values of list_editable primary keys."""
-        pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
+        pk_pattern = re.compile(r'^{}-\d+-{}$'.format(re.escape(prefix), re.escape(self.model._meta.pk.name)))
         return [value for key, value in request.POST.items() if pk_pattern.match(key)]
 
     def _get_list_editable_queryset(self, request, prefix):


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/admin_changelist/tests.py`.
Extra Requirements: If the file is too large, please provide all test classes that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` within their test methods.
Purpose: This file is expected to contain test cases for the admin changelist, which is the context for the `list_editable` feature. Examining it will allow me to find tests demonstrating how `list_editable` is tested, which is directly related to the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/admin_changelist/tests.py
Line number range: 212 - 255
Content:
212.     def test_result_list_editable_html(self):
213.         """
214.         Regression tests for #11791: Inclusion tag result_list generates a
215.         table and this checks that the items are nested within the table
216.         element tags.
217.         Also a regression test for #13599, verifies that hidden fields
218.         when list_editable is enabled are rendered in a div outside the
219.         table.
220.         """
221.         new_parent = Parent.objects.create(name='parent')
222.         new_child = Child.objects.create(name='name', parent=new_parent)
223.         request = self.factory.get('/child/')
224.         request.user = self.superuser
225.         m = ChildAdmin(Child, custom_site)
226. 
227.         # Test with list_editable fields
228.         m.list_display = ['id', 'name', 'parent']
229.         m.list_display_links = ['id']
230.         m.list_editable = ['name']
231.         cl = m.get_changelist_instance(request)
232.         FormSet = m.get_changelist_formset(request)
233.         cl.formset = FormSet(queryset=cl.result_list)
234.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
235.         context = Context({'cl': cl, 'opts': Child._meta})
236.         table_output = template.render(context)
237.         # make sure that hidden fields are in the correct place
238.         hiddenfields_div = (
239.             '<div class="hiddenfields">'
240.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
241.             '</div>'
242.         ) % new_child.id
243.         self.assertInHTML(hiddenfields_div, table_output, msg_prefix='Failed to find hidden fields')
244. 
245.         # make sure that list editable fields are rendered in divs correctly
246.         editable_name_field = (
247.             '<input name="form-0-name" value="name" class="vTextField" '
248.             'maxlength="30" type="text" id="id_form-0-name">'
249.         )
250.         self.assertInHTML(
251.             '<td class="field-name">%s</td>' % editable_name_field,
252.             table_output,
253.             msg_prefix='Failed to find "name" list_editable field',
254.         )
255. 


File: tests/admin_changelist/tests.py
Line number range: 880 - 945
Content:
880.             UnorderedObject.objects.create(id=counter, bool=True)
881. 
882.         class UnorderedObjectAdmin(admin.ModelAdmin):
883.             list_per_page = 10
884. 
885.         def check_results_order(ascending=False):
886.             custom_site.register(UnorderedObject, UnorderedObjectAdmin)
887.             model_admin = UnorderedObjectAdmin(UnorderedObject, custom_site)
888.             counter = 0 if ascending else 51
889.             for page in range(0, 5):
890.                 request = self._mocked_authenticated_request('/unorderedobject/?p=%s' % page, superuser)
891.                 response = model_admin.changelist_view(request)
892.                 for result in response.context_data['cl'].result_list:
893.                     counter += 1 if ascending else -1
894.                     self.assertEqual(result.id, counter)
895.             custom_site.unregister(UnorderedObject)
896. 
897.         # When no order is defined at all, everything is ordered by '-pk'.
898.         check_results_order()
899. 
900.         # When an order field is defined but multiple records have the same
901.         # value for that field, make sure everything gets ordered by -pk as well.
902.         UnorderedObjectAdmin.ordering = ['bool']
903.         check_results_order()
904. 
905.         # When order fields are defined, including the pk itself, use them.
906.         UnorderedObjectAdmin.ordering = ['bool', '-pk']
907.         check_results_order()
908.         UnorderedObjectAdmin.ordering = ['bool', 'pk']
909.         check_results_order(ascending=True)
910.         UnorderedObjectAdmin.ordering = ['-id', 'bool']
911.         check_results_order()
912.         UnorderedObjectAdmin.ordering = ['id', 'bool']
913.         check_results_order(ascending=True)
914. 
915.     def test_deterministic_order_for_model_ordered_by_its_manager(self):
916.         """
917.         The primary key is used in the ordering of the changelist's results to
918.         guarantee a deterministic order, even when the model has a manager that
919.         defines a default ordering (#17198).
920.         """
921.         superuser = self._create_superuser('superuser')
922. 
923.         for counter in range(1, 51):
924.             OrderedObject.objects.create(id=counter, bool=True, number=counter)
925. 
926.         class OrderedObjectAdmin(admin.ModelAdmin):
927.             list_per_page = 10
928. 
929.         def check_results_order(ascending=False):
930.             custom_site.register(OrderedObject, OrderedObjectAdmin)
931.             model_admin = OrderedObjectAdmin(OrderedObject, custom_site)
932.             counter = 0 if ascending else 51
933.             for page in range(0, 5):
934.                 request = self._mocked_authenticated_request('/orderedobject/?p=%s' % page, superuser)
935.                 response = model_admin.changelist_view(request)
936.                 for result in response.context_data['cl'].result_list:
937.                     counter += 1 if ascending else -1
938.                     self.assertEqual(result.id, counter)
939.             custom_site.unregister(OrderedObject)
940. 
941.         # When no order is defined at all, use the model's default ordering (i.e. 'number')
942.         check_results_order(ascending=True)
943. 
944.         # When an order field is defined but multiple records have the same
945.         # value for that field, make sure everything gets ordered by -pk as well.


File: tests/admin_changelist/tests.py
Line number range: 995 - 1013
Content:
995.             (['unique_field'], ['unique_field']),
996.             (['-unique_field'], ['-unique_field']),
997.             # Unique nullable field.
998.             (['unique_nullable_field'], ['unique_nullable_field', '-pk']),
999.             # Field.
1000.             (['field'], ['field', '-pk']),
1001.             # Related field introspection is not implemented.
1002.             (['related__unique_field'], ['related__unique_field', '-pk']),
1003.             # Related attname unique.
1004.             (['related_unique_id'], ['related_unique_id']),
1005.             # Related ordering introspection is not implemented.
1006.             (['related_unique'], ['related_unique', '-pk']),
1007.             # Composite unique.
1008.             (['field', '-other_field'], ['field', '-other_field']),
1009.             # Composite unique nullable.
1010.             (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
1011.             # Composite unique nullable.
1012.             (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
1013.             # Composite unique nullable.

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 08:21:24,997 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find test cases for a bug in the admin's `list_editable` functionality. The bug occurs when handling POST data for `list_editable` fields if the formset prefix contains regex special characters. The previously examined file, `tests/admin_changelist/tests.py`, did not contain tests that POST data using `list_editable`. The file `tests/admin_views/tests.py` is the next logical place to search, as it likely contains integration tests for admin views, including the changelist view's POST handling which is where the bug resides." query='Please provide the full content of `tests/admin_views/tests.py`.' extra_requirements='If the file is too large, please provide all test methods that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` to submit data to the changelist view.' purpose='This file is expected to contain the most relevant test cases for submitting `list_editable` data in the admin, which is the exact scenario described in the bug report.'
2025-12-23 08:21:24,998 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/admin_views/tests.py`.
2025-12-23 08:21:24,998 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 08:21:24,999 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 08:21:24,999 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 08:21:24,999 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/admin_views/tests.py`.
Extra requirements: If the file is too large, please provide all test methods that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` to submit data to the changelist view.
Purpose: This file is expected to contain the most relevant test cases for submitting `list_editable` data in the admin, which is the exact scenario described in the bug report.
2025-12-23 08:21:29,824 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first attempt to retrieve the entire content of `tests/admin_views/tests.py`. If the file is too large, I will then search for specific test methods within that file that are relevant to `list_editable` and form submissions as you requested.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/admin_views/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2155, 'candidates_token_count': 78, 'total_token_count': 2479, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2155}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 78}], 'thoughts_token_count': 246, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.26581928057548326, 'model_name': 'gemini-2.5-pro'} id='run--2ba08737-57d2-40c7-832f-705dc9655387-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_views/tests.py'}, 'id': '8e75e956-c624-4041-8b2c-625e43e9ee21', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2155, 'output_tokens': 78, 'total_tokens': 2479, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 246}}
2025-12-23 08:21:32,278 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the initial part of the file `tests/admin_views/tests.py`. Since the file is larger than the initial 500-line preview, I will now proceed to fetch the remaining content to provide you with the complete file.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/admin_views/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11092, 'candidates_token_count': 79, 'total_token_count': 11235, 'cached_content_token_count': 1846, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11092}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1846}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 64}, 'finish_reason': 'STOP', 'avg_logprobs': -0.13314486153518099, 'model_name': 'gemini-2.5-pro'} id='run--66d554fa-98ec-4342-b292-fe37ad270ccf-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/admin_views/tests.py'}, 'id': 'e0e0fdf8-c5c4-46d4-9ffe-5e41abf9a4af', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11092, 'output_tokens': 79, 'total_tokens': 11235, 'input_token_details': {'cache_read': 1846}, 'output_token_details': {'reasoning': 64}}
2025-12-23 08:21:35,521 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I made an error in my previous attempt to retrieve the remainder of the file. I will now correct this by specifying an end line and fetch the rest of the content for you.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 5000.0, "start_line": 501.0, "relative_path": "tests/admin_views/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11217, 'candidates_token_count': 65, 'total_token_count': 11454, 'cached_content_token_count': 11053, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11217}], 'cache_tokens_details': [{'modality': 1, 'token_count': 11053}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 65}], 'thoughts_token_count': 172}, 'finish_reason': 'STOP', 'avg_logprobs': -0.24171474163348858, 'model_name': 'gemini-2.5-pro'} id='run--7c6480dc-aca8-4a69-9b60-147f4ed7692a-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 5000.0, 'start_line': 501.0, 'relative_path': 'tests/admin_views/tests.py'}, 'id': '30345260-73de-407c-8c7f-8c7ce5e932da', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11217, 'output_tokens': 65, 'total_tokens': 11454, 'input_token_details': {'cache_read': 11053}, 'output_token_details': {'reasoning': 172}}
2025-12-23 08:22:07,818 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the content of `tests/admin_views/tests.py`. The file is quite large, so in accordance with your request, I have identified the most relevant sections. The test methods within the `AdminViewListEditable` class, starting at line 3001, appear to be the most pertinent to your query, as they specifically address scenarios involving `list_editable` attributes and form submissions in the admin changelist view.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 102571, 'candidates_token_count': 93, 'total_token_count': 105024, 'prompt_tokens_details': [{'modality': 1, 'token_count': 102571}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 93}], 'thoughts_token_count': 2360, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -3.733837168703797, 'model_name': 'gemini-2.5-pro'} id='run--a93f1396-2931-4aae-a340-e289087a67a7-0' usage_metadata={'input_tokens': 102571, 'output_tokens': 93, 'total_tokens': 105024, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 2360}}
2025-12-23 08:22:07,821 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/admin_views/tests.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the file is too large, please provide all test methods that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` to submit data to the changelist view.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This file is expected to contain the most relevant test cases for submitting `list_editable` data in the admin, which is the exact scenario described in the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_views/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import os
3. import re
4. import unittest
5. from unittest import mock
6. from urllib.parse import parse_qsl, urljoin, urlparse
7. 
8. import pytz
9. 
10. from django.contrib.admin import AdminSite, ModelAdmin
11. from django.contrib.admin.helpers import ACTION_CHECKBOX_NAME
12. from django.contrib.admin.models import ADDITION, DELETION, LogEntry
13. from django.contrib.admin.options import TO_FIELD_VAR
14. from django.contrib.admin.templatetags.admin_urls import add_preserved_filters
15. from django.contrib.admin.tests import AdminSeleniumTestCase
16. from django.contrib.admin.utils import quote
17. from django.contrib.admin.views.main import IS_POPUP_VAR
18. from django.contrib.auth import REDIRECT_FIELD_NAME, get_permission_codename
19. from django.contrib.auth.models import Group, Permission, User
20. from django.contrib.contenttypes.models import ContentType
21. from django.core import mail
22. from django.core.checks import Error
23. from django.core.files import temp as tempfile
24. from django.forms.utils import ErrorList
25. from django.template.response import TemplateResponse
26. from django.test import (
27.     TestCase, modify_settings, override_settings, skipUnlessDBFeature,
28. )
29. from django.test.utils import override_script_prefix
30. from django.urls import NoReverseMatch, resolve, reverse
31. from django.utils import formats, translation
32. from django.utils.cache import get_max_age
33. from django.utils.encoding import iri_to_uri
34. from django.utils.html import escape
35. from django.utils.http import urlencode
36. 
37. from . import customadmin
38. from .admin import CityAdmin, site, site2
39. from .models import (
40.     Actor, AdminOrderedAdminMethod, AdminOrderedCallable, AdminOrderedField,
41.     AdminOrderedModelMethod, Album, Answer, Answer2, Article, BarAccount, Book,
42.     Bookmark, Category, Chapter, ChapterXtra1, ChapterXtra2, Character, Child,
43.     Choice, City, Collector, Color, ComplexSortedPerson, CoverLetter,
44.     CustomArticle, CyclicOne, CyclicTwo, DooHickey, Employee, EmptyModel,
45.     Fabric, FancyDoodad, FieldOverridePost, FilteredManager, FooAccount,
46.     FoodDelivery, FunkyTag, Gallery, Grommet, Inquisition, Language, Link,
47.     MainPrepopulated, Media, ModelWithStringPrimaryKey, OtherStory, Paper,
48.     Parent, ParentWithDependentChildren, ParentWithUUIDPK, Person, Persona,
49.     Picture, Pizza, Plot, PlotDetails, PluggableSearchPerson, Podcast, Post,
50.     PrePopulatedPost, Promo, Question, ReadablePizza, ReadOnlyPizza,
51.     Recommendation, Recommender, RelatedPrepopulated, RelatedWithUUIDPKModel,
52.     Report, Restaurant, RowLevelChangePermissionModel, SecretHideout, Section,
53.     ShortMessage, Simple, Song, State, Story, SuperSecretHideout, SuperVillain,
54.     Telegram, TitleTranslation, Topping, UnchangeableObject, UndeletableObject,
55.     UnorderedObject, UserProxy, Villain, Vodcast, Whatsit, Widget, Worker,
56.     WorkHour,
57. )
58. 
59. ERROR_MESSAGE = "Please enter the correct username and password \
60. for a staff account. Note that both fields may be case-sensitive."
61. 
62. MULTIPART_ENCTYPE = 'enctype="multipart/form-data"'
63. 
64. 
65. class AdminFieldExtractionMixin:
66.     """
67.     Helper methods for extracting data from AdminForm.
68.     """
69.     def get_admin_form_fields(self, response):
70.         """
71.         Return a list of AdminFields for the AdminForm in the response.
72.         """
73.         fields = []
74.         for fieldset in response.context['adminform']:
75.             for field_line in fieldset:
76.                 fields.extend(field_line)
77.         return fields
78. 
79.     def get_admin_readonly_fields(self, response):
80.         """
81.         Return the readonly fields for the response's AdminForm.
82.         """
83.         return [f for f in self.get_admin_form_fields(response) if f.is_readonly]
84. 
85.     def get_admin_readonly_field(self, response, field_name):
86.         """
87.         Return the readonly field for the given field_name.
88.         """
89.         admin_readonly_fields = self.get_admin_readonly_fields(response)
90.         for field in admin_readonly_fields:
91.             if field.field['name'] == field_name:
92.                 return field
93. 
94. 
95. @override_settings(ROOT_URLCONF='admin_views.urls', USE_I18N=True, USE_L10N=False, LANGUAGE_CODE='en')
96. class AdminViewBasicTestCase(TestCase):
97. 
98.     @classmethod
99.     def setUpTestData(cls):
100.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
101.         cls.s1 = Section.objects.create(name='Test section')
102.         cls.a1 = Article.objects.create(
103.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
104.         )
105.         cls.a2 = Article.objects.create(
106.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
107.         )
108.         cls.a3 = Article.objects.create(
109.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
110.         )
111.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
112.         cls.color1 = Color.objects.create(value='Red', warm=True)
113.         cls.color2 = Color.objects.create(value='Orange', warm=True)
114.         cls.color3 = Color.objects.create(value='Blue', warm=False)
115.         cls.color4 = Color.objects.create(value='Green', warm=False)
116.         cls.fab1 = Fabric.objects.create(surface='x')
117.         cls.fab2 = Fabric.objects.create(surface='y')
118.         cls.fab3 = Fabric.objects.create(surface='plain')
119.         cls.b1 = Book.objects.create(name='Book 1')
120.         cls.b2 = Book.objects.create(name='Book 2')
121.         cls.pro1 = Promo.objects.create(name='Promo 1', book=cls.b1)
122.         cls.pro1 = Promo.objects.create(name='Promo 2', book=cls.b2)
123.         cls.chap1 = Chapter.objects.create(title='Chapter 1', content='[ insert contents here ]', book=cls.b1)
124.         cls.chap2 = Chapter.objects.create(title='Chapter 2', content='[ insert contents here ]', book=cls.b1)
125.         cls.chap3 = Chapter.objects.create(title='Chapter 1', content='[ insert contents here ]', book=cls.b2)
126.         cls.chap4 = Chapter.objects.create(title='Chapter 2', content='[ insert contents here ]', book=cls.b2)
127.         cls.cx1 = ChapterXtra1.objects.create(chap=cls.chap1, xtra='ChapterXtra1 1')
128.         cls.cx2 = ChapterXtra1.objects.create(chap=cls.chap3, xtra='ChapterXtra1 2')
129.         Actor.objects.create(name='Palin', age=27)
130. 
131.         # Post data for edit inline
132.         cls.inline_post_data = {
133.             "name": "Test section",
134.             # inline data
135.             "article_set-TOTAL_FORMS": "6",
136.             "article_set-INITIAL_FORMS": "3",
137.             "article_set-MAX_NUM_FORMS": "0",
138.             "article_set-0-id": cls.a1.pk,
139.             # there is no title in database, give one here or formset will fail.
140.             "article_set-0-title": "Norske bostaver æøå skaper problemer",
141.             "article_set-0-content": "&lt;p&gt;Middle content&lt;/p&gt;",
142.             "article_set-0-date_0": "2008-03-18",
143.             "article_set-0-date_1": "11:54:58",
144.             "article_set-0-section": cls.s1.pk,
145.             "article_set-1-id": cls.a2.pk,
146.             "article_set-1-title": "Need a title.",
147.             "article_set-1-content": "&lt;p&gt;Oldest content&lt;/p&gt;",
148.             "article_set-1-date_0": "2000-03-18",
149.             "article_set-1-date_1": "11:54:58",
150.             "article_set-2-id": cls.a3.pk,
151.             "article_set-2-title": "Need a title.",
152.             "article_set-2-content": "&lt;p&gt;Newest content&lt;/p&gt;",
153.             "article_set-2-date_0": "2009-03-18",
154.             "article_set-2-date_1": "11:54:58",
155.             "article_set-3-id": "",
156.             "article_set-3-title": "",
157.             "article_set-3-content": "",
158.             "article_set-3-date_0": "",
159.             "article_set-3-date_1": "",
160.             "article_set-4-id": "",
161.             "article_set-4-title": "",
162.             "article_set-4-content": "",
163.             "article_set-4-date_0": "",
164.             "article_set-4-date_1": "",
165.             "article_set-5-id": "",
166.             "article_set-5-title": "",
167.             "article_set-5-content": "",
168.             "article_set-5-date_0": "",
169.             "article_set-5-date_1": "",
170.         }
171. 
172.     def setUp(self):
173.         self.client.force_login(self.superuser)
174. 
175.     def assertContentBefore(self, response, text1, text2, failing_msg=None):
176.         """
177.         Testing utility asserting that text1 appears before text2 in response
178.         content.
179.         """
180.         self.assertEqual(response.status_code, 200)
181.         self.assertLess(
182.             response.content.index(text1.encode()),
183.             response.content.index(text2.encode()),
184.             (failing_msg or '') + '\nResponse:\n' + response.content.decode(response.charset)
185.         )
186. 
187. 
188. class AdminViewBasicTest(AdminViewBasicTestCase):
189.     def test_trailing_slash_required(self):
190.         """
191.         If you leave off the trailing slash, app should redirect and add it.
192.         """
193.         add_url = reverse('admin:admin_views_article_add')
194.         response = self.client.get(add_url[:-1])
195.         self.assertRedirects(response, add_url, status_code=301)
196. 
197.     def test_basic_add_GET(self):
198.         """
199.         A smoke test to ensure GET on the add_view works.
200.         """
201.         response = self.client.get(reverse('admin:admin_views_section_add'))
202.         self.assertIsInstance(response, TemplateResponse)
203.         self.assertEqual(response.status_code, 200)
204. 
205.     def test_add_with_GET_args(self):
206.         response = self.client.get(reverse('admin:admin_views_section_add'), {'name': 'My Section'})
207.         self.assertContains(
208.             response, 'value="My Section"',
209.             msg_prefix="Couldn't find an input with the right value in the response"
210.         )
211. 
212.     def test_basic_edit_GET(self):
213.         """
214.         A smoke test to ensure GET on the change_view works.
215.         """
216.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
217.         self.assertIsInstance(response, TemplateResponse)
218.         self.assertEqual(response.status_code, 200)
219. 
220.     def test_basic_edit_GET_string_PK(self):
221.         """
222.         GET on the change_view (when passing a string as the PK argument for a
223.         model with an integer PK field) redirects to the index page with a
224.         message saying the object doesn't exist.
225.         """
226.         response = self.client.get(reverse('admin:admin_views_section_change', args=(quote("abc/<b>"),)), follow=True)
227.         self.assertRedirects(response, reverse('admin:index'))
228.         self.assertEqual(
229.             [m.message for m in response.context['messages']],
230.             ['section with ID “abc/<b>” doesn’t exist. Perhaps it was deleted?']
231.         )
232. 
233.     def test_basic_edit_GET_old_url_redirect(self):
234.         """
235.         The change URL changed in Django 1.9, but the old one still redirects.
236.         """
237.         response = self.client.get(
238.             reverse('admin:admin_views_section_change', args=(self.s1.pk,)).replace('change/', '')
239.         )
240.         self.assertRedirects(response, reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
241. 
242.     def test_basic_inheritance_GET_string_PK(self):
243.         """
244.         GET on the change_view (for inherited models) redirects to the index
245.         page with a message saying the object doesn't exist.
246.         """
247.         response = self.client.get(reverse('admin:admin_views_supervillain_change', args=('abc',)), follow=True)
248.         self.assertRedirects(response, reverse('admin:index'))
249.         self.assertEqual(
250.             [m.message for m in response.context['messages']],
251.             ['super villain with ID “abc” doesn’t exist. Perhaps it was deleted?']
252.         )
253. 
254.     def test_basic_add_POST(self):
255.         """
256.         A smoke test to ensure POST on add_view works.
257.         """
258.         post_data = {
259.             "name": "Another Section",
260.             # inline data
261.             "article_set-TOTAL_FORMS": "3",
262.             "article_set-INITIAL_FORMS": "0",
263.             "article_set-MAX_NUM_FORMS": "0",
264.         }
265.         response = self.client.post(reverse('admin:admin_views_section_add'), post_data)
266.         self.assertEqual(response.status_code, 302)  # redirect somewhere
267. 
268.     def test_popup_add_POST(self):
269.         """
270.         Ensure http response from a popup is properly escaped.
271.         """
272.         post_data = {
273.             '_popup': '1',
274.             'title': 'title with a new\nline',
275.             'content': 'some content',
276.             'date_0': '2010-09-10',
277.             'date_1': '14:55:39',
278.         }
279.         response = self.client.post(reverse('admin:admin_views_article_add'), post_data)
280.         self.assertContains(response, 'title with a new\\nline')
281. 
282.     def test_basic_edit_POST(self):
283.         """
284.         A smoke test to ensure POST on edit_view works.
285.         """
286.         url = reverse('admin:admin_views_section_change', args=(self.s1.pk,))
287.         response = self.client.post(url, self.inline_post_data)
288.         self.assertEqual(response.status_code, 302)  # redirect somewhere
289. 
290.     def test_edit_save_as(self):
291.         """
292.         Test "save as".
293.         """
294.         post_data = self.inline_post_data.copy()
295.         post_data.update({
296.             '_saveasnew': 'Save+as+new',
297.             "article_set-1-section": "1",
298.             "article_set-2-section": "1",
299.             "article_set-3-section": "1",
300.             "article_set-4-section": "1",
301.             "article_set-5-section": "1",
302.         })
303.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), post_data)
304.         self.assertEqual(response.status_code, 302)  # redirect somewhere
305. 
306.     def test_edit_save_as_delete_inline(self):
307.         """
308.         Should be able to "Save as new" while also deleting an inline.
309.         """
310.         post_data = self.inline_post_data.copy()
311.         post_data.update({
312.             '_saveasnew': 'Save+as+new',
313.             "article_set-1-section": "1",
314.             "article_set-2-section": "1",
315.             "article_set-2-DELETE": "1",
316.             "article_set-3-section": "1",
317.         })
318.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), post_data)
319.         self.assertEqual(response.status_code, 302)
320.         # started with 3 articles, one was deleted.
321.         self.assertEqual(Section.objects.latest('id').article_set.count(), 2)
322. 
323.     def test_change_list_column_field_classes(self):
324.         response = self.client.get(reverse('admin:admin_views_article_changelist'))
325.         # callables display the callable name.
326.         self.assertContains(response, 'column-callable_year')
327.         self.assertContains(response, 'field-callable_year')
328.         # lambdas display as "lambda" + index that they appear in list_display.
329.         self.assertContains(response, 'column-lambda8')
330.         self.assertContains(response, 'field-lambda8')
331. 
332.     def test_change_list_sorting_callable(self):
333.         """
334.         Ensure we can sort on a list_display field that is a callable
335.         (column 2 is callable_year in ArticleAdmin)
336.         """
337.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': 2})
338.         self.assertContentBefore(
339.             response, 'Oldest content', 'Middle content',
340.             "Results of sorting on callable are out of order."
341.         )
342.         self.assertContentBefore(
343.             response, 'Middle content', 'Newest content',
344.             "Results of sorting on callable are out of order."
345.         )
346. 
347.     def test_change_list_sorting_property(self):
348.         """
349.         Sort on a list_display field that is a property (column 10 is
350.         a property in Article model).
351.         """
352.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': 10})
353.         self.assertContentBefore(
354.             response,
355.             'Oldest content',
356.             'Middle content',
357.             'Results of sorting on property are out of order.',
358.         )
359.         self.assertContentBefore(
360.             response,
361.             'Middle content',
362.             'Newest content',
363.             'Results of sorting on property are out of order.',
364.         )
365. 
366.     def test_change_list_sorting_callable_query_expression(self):
367.         """Query expressions may be used for admin_order_field."""
368.         tests = [
369.             ('order_by_expression', 9),
370.             ('order_by_f_expression', 12),
371.             ('order_by_orderby_expression', 13),
372.         ]
373.         for admin_order_field, index in tests:
374.             with self.subTest(admin_order_field):
375.                 response = self.client.get(
376.                     reverse('admin:admin_views_article_changelist'),
377.                     {'o': index},
378.                 )
379.                 self.assertContentBefore(
380.                     response, 'Oldest content', 'Middle content',
381.                     'Results of sorting on callable are out of order.'
382.                 )
383.                 self.assertContentBefore(
384.                     response, 'Middle content', 'Newest content',
385.                     'Results of sorting on callable are out of order.'
386.                 )
387. 
388.     def test_change_list_sorting_callable_query_expression_reverse(self):
389.         tests = [
390.             ('order_by_expression', -9),
391.             ('order_by_f_expression', -12),
392.             ('order_by_orderby_expression', -13),
393.         ]
394.         for admin_order_field, index in tests:
395.             with self.subTest(admin_order_field):
396.                 response = self.client.get(
397.                     reverse('admin:admin_views_article_changelist'),
398.                     {'o': index},
399.                 )
400.                 self.assertContentBefore(
401.                     response, 'Middle content', 'Oldest content',
402.                     'Results of sorting on callable are out of order.'
403.                 )
404.                 self.assertContentBefore(
405.                     response, 'Newest content', 'Middle content',
406.                     'Results of sorting on callable are out of order.'
407.                 )
408. 
409.     def test_change_list_sorting_model(self):
410.         """
411.         Ensure we can sort on a list_display field that is a Model method
412.         (column 3 is 'model_year' in ArticleAdmin)
413.         """
414.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '-3'})
415.         self.assertContentBefore(
416.             response, 'Newest content', 'Middle content',
417.             "Results of sorting on Model method are out of order."
418.         )
419.         self.assertContentBefore(
420.             response, 'Middle content', 'Oldest content',
421.             "Results of sorting on Model method are out of order."
422.         )
423. 
424.     def test_change_list_sorting_model_admin(self):
425.         """
426.         Ensure we can sort on a list_display field that is a ModelAdmin method
427.         (column 4 is 'modeladmin_year' in ArticleAdmin)
428.         """
429.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '4'})
430.         self.assertContentBefore(
431.             response, 'Oldest content', 'Middle content',
432.             "Results of sorting on ModelAdmin method are out of order."
433.         )
434.         self.assertContentBefore(
435.             response, 'Middle content', 'Newest content',
436.             "Results of sorting on ModelAdmin method are out of order."
437.         )
438. 
439.     def test_change_list_sorting_model_admin_reverse(self):
440.         """
441.         Ensure we can sort on a list_display field that is a ModelAdmin
442.         method in reverse order (i.e. admin_order_field uses the '-' prefix)
443.         (column 6 is 'model_year_reverse' in ArticleAdmin)
444.         """
445.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '6'})
446.         self.assertContentBefore(
447.             response, '2009', '2008',
448.             "Results of sorting on ModelAdmin method are out of order."
449.         )
450.         self.assertContentBefore(
451.             response, '2008', '2000',
452.             "Results of sorting on ModelAdmin method are out of order."
453.         )
454.         # Let's make sure the ordering is right and that we don't get a
455.         # FieldError when we change to descending order
456.         response = self.client.get(reverse('admin:admin_views_article_changelist'), {'o': '-6'})
457.         self.assertContentBefore(
458.             response, '2000', '2008',
459.             "Results of sorting on ModelAdmin method are out of order."
460.         )
461.         self.assertContentBefore(
462.             response, '2008', '2009',
463.             "Results of sorting on ModelAdmin method are out of order."
464.         )
465. 
466.     def test_change_list_sorting_multiple(self):
467.         p1 = Person.objects.create(name="Chris", gender=1, alive=True)
468.         p2 = Person.objects.create(name="Chris", gender=2, alive=True)
469.         p3 = Person.objects.create(name="Bob", gender=1, alive=True)
470.         link1 = reverse('admin:admin_views_person_change', args=(p1.pk,))
471.         link2 = reverse('admin:admin_views_person_change', args=(p2.pk,))
472.         link3 = reverse('admin:admin_views_person_change', args=(p3.pk,))
473. 
474.         # Sort by name, gender
475.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {'o': '1.2'})
476.         self.assertContentBefore(response, link3, link1)
477.         self.assertContentBefore(response, link1, link2)
478. 
479.         # Sort by gender descending, name
480.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {'o': '-2.1'})
481.         self.assertContentBefore(response, link2, link3)
482.         self.assertContentBefore(response, link3, link1)
483. 
484.     def test_change_list_sorting_preserve_queryset_ordering(self):
485.         """
486.         If no ordering is defined in `ModelAdmin.ordering` or in the query
487.         string, then the underlying order of the queryset should not be
488.         changed, even if it is defined in `Modeladmin.get_queryset()`.
489.         Refs #11868, #7309.
490.         """
491.         p1 = Person.objects.create(name="Amy", gender=1, alive=True, age=80)
492.         p2 = Person.objects.create(name="Bob", gender=1, alive=True, age=70)
493.         p3 = Person.objects.create(name="Chris", gender=2, alive=False, age=60)
494.         link1 = reverse('admin:admin_views_person_change', args=(p1.pk,))
495.         link2 = reverse('admin:admin_views_person_change', args=(p2.pk,))
496.         link3 = reverse('admin:admin_views_person_change', args=(p3.pk,))
497. 
498.         response = self.client.get(reverse('admin:admin_views_person_changelist'), {})
499.         self.assertContentBefore(response, link3, link2)
500.         self.assertContentBefore(response, link2, link1)


File: tests/admin_views/tests.py
Line number range: 501 - 5000
Content:
501. 
502.     def test_change_list_sorting_model_meta(self):
503.         # Test ordering on Model Meta is respected
504. 
505.         l1 = Language.objects.create(iso='ur', name='Urdu')
506.         l2 = Language.objects.create(iso='ar', name='Arabic')
507.         link1 = reverse('admin:admin_views_language_change', args=(quote(l1.pk),))
508.         link2 = reverse('admin:admin_views_language_change', args=(quote(l2.pk),))
509. 
510.         response = self.client.get(reverse('admin:admin_views_language_changelist'), {})
511.         self.assertContentBefore(response, link2, link1)
512. 
513.         # Test we can override with query string
514.         response = self.client.get(reverse('admin:admin_views_language_changelist'), {'o': '-1'})
515.         self.assertContentBefore(response, link1, link2)
516. 
517.     def test_change_list_sorting_override_model_admin(self):
518.         # Test ordering on Model Admin is respected, and overrides Model Meta
519.         dt = datetime.datetime.now()
520.         p1 = Podcast.objects.create(name="A", release_date=dt)
521.         p2 = Podcast.objects.create(name="B", release_date=dt - datetime.timedelta(10))
522.         link1 = reverse('admin:admin_views_podcast_change', args=(p1.pk,))
523.         link2 = reverse('admin:admin_views_podcast_change', args=(p2.pk,))
524. 
525.         response = self.client.get(reverse('admin:admin_views_podcast_changelist'), {})
526.         self.assertContentBefore(response, link1, link2)
527. 
528.     def test_multiple_sort_same_field(self):
529.         # The changelist displays the correct columns if two columns correspond
530.         # to the same ordering field.
531.         dt = datetime.datetime.now()
532.         p1 = Podcast.objects.create(name="A", release_date=dt)
533.         p2 = Podcast.objects.create(name="B", release_date=dt - datetime.timedelta(10))
534.         link1 = reverse('admin:admin_views_podcast_change', args=(quote(p1.pk),))
535.         link2 = reverse('admin:admin_views_podcast_change', args=(quote(p2.pk),))
536. 
537.         response = self.client.get(reverse('admin:admin_views_podcast_changelist'), {})
538.         self.assertContentBefore(response, link1, link2)
539. 
540.         p1 = ComplexSortedPerson.objects.create(name="Bob", age=10)
541.         p2 = ComplexSortedPerson.objects.create(name="Amy", age=20)
542.         link1 = reverse('admin:admin_views_complexsortedperson_change', args=(p1.pk,))
543.         link2 = reverse('admin:admin_views_complexsortedperson_change', args=(p2.pk,))
544. 
545.         response = self.client.get(reverse('admin:admin_views_complexsortedperson_changelist'), {})
546.         # Should have 5 columns (including action checkbox col)
547.         self.assertContains(response, '<th scope="col"', count=5)
548. 
549.         self.assertContains(response, 'Name')
550.         self.assertContains(response, 'Colored name')
551. 
552.         # Check order
553.         self.assertContentBefore(response, 'Name', 'Colored name')
554. 
555.         # Check sorting - should be by name
556.         self.assertContentBefore(response, link2, link1)
557. 
558.     def test_sort_indicators_admin_order(self):
559.         """
560.         The admin shows default sort indicators for all kinds of 'ordering'
561.         fields: field names, method on the model admin and model itself, and
562.         other callables. See #17252.
563.         """
564.         models = [(AdminOrderedField, 'adminorderedfield'),
565.                   (AdminOrderedModelMethod, 'adminorderedmodelmethod'),
566.                   (AdminOrderedAdminMethod, 'adminorderedadminmethod'),
567.                   (AdminOrderedCallable, 'adminorderedcallable')]
568.         for model, url in models:
569.             model.objects.create(stuff='The Last Item', order=3)
570.             model.objects.create(stuff='The First Item', order=1)
571.             model.objects.create(stuff='The Middle Item', order=2)
572.             response = self.client.get(reverse('admin:admin_views_%s_changelist' % url), {})
573.             self.assertEqual(response.status_code, 200)
574.             # Should have 3 columns including action checkbox col.
575.             self.assertContains(response, '<th scope="col"', count=3, msg_prefix=url)
576.             # Check if the correct column was selected. 2 is the index of the
577.             # 'order' column in the model admin's 'list_display' with 0 being
578.             # the implicit 'action_checkbox' and 1 being the column 'stuff'.
579.             self.assertEqual(response.context['cl'].get_ordering_field_columns(), {2: 'asc'})
580.             # Check order of records.
581.             self.assertContentBefore(response, 'The First Item', 'The Middle Item')
582.             self.assertContentBefore(response, 'The Middle Item', 'The Last Item')
583. 
584.     def test_has_related_field_in_list_display_fk(self):
585.         """Joins shouldn't be performed for <FK>_id fields in list display."""
586.         state = State.objects.create(name='Karnataka')
587.         City.objects.create(state=state, name='Bangalore')
588.         response = self.client.get(reverse('admin:admin_views_city_changelist'), {})
589. 
590.         response.context['cl'].list_display = ['id', 'name', 'state']
591.         self.assertIs(response.context['cl'].has_related_field_in_list_display(), True)
592. 
593.         response.context['cl'].list_display = ['id', 'name', 'state_id']
594.         self.assertIs(response.context['cl'].has_related_field_in_list_display(), False)
595. 
596.     def test_has_related_field_in_list_display_o2o(self):
597.         """Joins shouldn't be performed for <O2O>_id fields in list display."""
598.         media = Media.objects.create(name='Foo')
599.         Vodcast.objects.create(media=media)
600.         response = self.client.get(reverse('admin:admin_views_vodcast_changelist'), {})
601. 
602.         response.context['cl'].list_display = ['media']
603.         self.assertIs(response.context['cl'].has_related_field_in_list_display(), True)
604. 
605.         response.context['cl'].list_display = ['media_id']
606.         self.assertIs(response.context['cl'].has_related_field_in_list_display(), False)
607. 
608.     def test_limited_filter(self):
609.         """Ensure admin changelist filters do not contain objects excluded via limit_choices_to.
610.         This also tests relation-spanning filters (e.g. 'color__value').
611.         """
612.         response = self.client.get(reverse('admin:admin_views_thing_changelist'))
613.         self.assertContains(
614.             response, '<div id="changelist-filter">',
615.             msg_prefix="Expected filter not found in changelist view"
616.         )
617.         self.assertNotContains(
618.             response, '<a href="?color__id__exact=3">Blue</a>',
619.             msg_prefix="Changelist filter not correctly limited by limit_choices_to"
620.         )
621. 
622.     def test_relation_spanning_filters(self):
623.         changelist_url = reverse('admin:admin_views_chapterxtra1_changelist')
624.         response = self.client.get(changelist_url)
625.         self.assertContains(response, '<div id="changelist-filter">')
626.         filters = {
627.             'chap__id__exact': {
628.                 'values': [c.id for c in Chapter.objects.all()],
629.                 'test': lambda obj, value: obj.chap.id == value,
630.             },
631.             'chap__title': {
632.                 'values': [c.title for c in Chapter.objects.all()],
633.                 'test': lambda obj, value: obj.chap.title == value,
634.             },
635.             'chap__book__id__exact': {
636.                 'values': [b.id for b in Book.objects.all()],
637.                 'test': lambda obj, value: obj.chap.book.id == value,
638.             },
639.             'chap__book__name': {
640.                 'values': [b.name for b in Book.objects.all()],
641.                 'test': lambda obj, value: obj.chap.book.name == value,
642.             },
643.             'chap__book__promo__id__exact': {
644.                 'values': [p.id for p in Promo.objects.all()],
645.                 'test': lambda obj, value: obj.chap.book.promo_set.filter(id=value).exists(),
646.             },
647.             'chap__book__promo__name': {
648.                 'values': [p.name for p in Promo.objects.all()],
649.                 'test': lambda obj, value: obj.chap.book.promo_set.filter(name=value).exists(),
650.             },
651.             # A forward relation (book) after a reverse relation (promo).
652.             'guest_author__promo__book__id__exact': {
653.                 'values': [p.id for p in Book.objects.all()],
654.                 'test': lambda obj, value: obj.guest_author.promo_set.filter(book=value).exists(),
655.             },
656.         }
657.         for filter_path, params in filters.items():
658.             for value in params['values']:
659.                 query_string = urlencode({filter_path: value})
660.                 # ensure filter link exists
661.                 self.assertContains(response, '<a href="?%s"' % query_string)
662.                 # ensure link works
663.                 filtered_response = self.client.get('%s?%s' % (changelist_url, query_string))
664.                 self.assertEqual(filtered_response.status_code, 200)
665.                 # ensure changelist contains only valid objects
666.                 for obj in filtered_response.context['cl'].queryset.all():
667.                     self.assertTrue(params['test'](obj, value))
668. 
669.     def test_incorrect_lookup_parameters(self):
670.         """Ensure incorrect lookup parameters are handled gracefully."""
671.         changelist_url = reverse('admin:admin_views_thing_changelist')
672.         response = self.client.get(changelist_url, {'notarealfield': '5'})
673.         self.assertRedirects(response, '%s?e=1' % changelist_url)
674. 
675.         # Spanning relationships through a nonexistent related object (Refs #16716)
676.         response = self.client.get(changelist_url, {'notarealfield__whatever': '5'})
677.         self.assertRedirects(response, '%s?e=1' % changelist_url)
678. 
679.         response = self.client.get(changelist_url, {'color__id__exact': 'StringNotInteger!'})
680.         self.assertRedirects(response, '%s?e=1' % changelist_url)
681. 
682.         # Regression test for #18530
683.         response = self.client.get(changelist_url, {'pub_date__gte': 'foo'})
684.         self.assertRedirects(response, '%s?e=1' % changelist_url)
685. 
686.     def test_isnull_lookups(self):
687.         """Ensure is_null is handled correctly."""
688.         Article.objects.create(title="I Could Go Anywhere", content="Versatile", date=datetime.datetime.now())
689.         changelist_url = reverse('admin:admin_views_article_changelist')
690.         response = self.client.get(changelist_url)
691.         self.assertContains(response, '4 articles')
692.         response = self.client.get(changelist_url, {'section__isnull': 'false'})
693.         self.assertContains(response, '3 articles')
694.         response = self.client.get(changelist_url, {'section__isnull': '0'})
695.         self.assertContains(response, '3 articles')
696.         response = self.client.get(changelist_url, {'section__isnull': 'true'})
697.         self.assertContains(response, '1 article')
698.         response = self.client.get(changelist_url, {'section__isnull': '1'})
699.         self.assertContains(response, '1 article')
700. 
701.     def test_logout_and_password_change_URLs(self):
702.         response = self.client.get(reverse('admin:admin_views_article_changelist'))
703.         self.assertContains(response, '<a href="%s">' % reverse('admin:logout'))
704.         self.assertContains(response, '<a href="%s">' % reverse('admin:password_change'))
705. 
706.     def test_named_group_field_choices_change_list(self):
707.         """
708.         Ensures the admin changelist shows correct values in the relevant column
709.         for rows corresponding to instances of a model in which a named group
710.         has been used in the choices option of a field.
711.         """
712.         link1 = reverse('admin:admin_views_fabric_change', args=(self.fab1.pk,))
713.         link2 = reverse('admin:admin_views_fabric_change', args=(self.fab2.pk,))
714.         response = self.client.get(reverse('admin:admin_views_fabric_changelist'))
715.         fail_msg = (
716.             "Changelist table isn't showing the right human-readable values "
717.             "set by a model field 'choices' option named group."
718.         )
719.         self.assertContains(response, '<a href="%s">Horizontal</a>' % link1, msg_prefix=fail_msg, html=True)
720.         self.assertContains(response, '<a href="%s">Vertical</a>' % link2, msg_prefix=fail_msg, html=True)
721. 
722.     def test_named_group_field_choices_filter(self):
723.         """
724.         Ensures the filter UI shows correctly when at least one named group has
725.         been used in the choices option of a model field.
726.         """
727.         response = self.client.get(reverse('admin:admin_views_fabric_changelist'))
728.         fail_msg = (
729.             "Changelist filter isn't showing options contained inside a model "
730.             "field 'choices' option named group."
731.         )
732.         self.assertContains(response, '<div id="changelist-filter">')
733.         self.assertContains(
734.             response, '<a href="?surface__exact=x" title="Horizontal">Horizontal</a>',
735.             msg_prefix=fail_msg, html=True
736.         )
737.         self.assertContains(
738.             response, '<a href="?surface__exact=y" title="Vertical">Vertical</a>',
739.             msg_prefix=fail_msg, html=True
740.         )
741. 
742.     def test_change_list_null_boolean_display(self):
743.         Post.objects.create(public=None)
744.         response = self.client.get(reverse('admin:admin_views_post_changelist'))
745.         self.assertContains(response, 'icon-unknown.svg')
746. 
747.     def test_i18n_language_non_english_default(self):
748.         """
749.         Check if the JavaScript i18n view returns an empty language catalog
750.         if the default language is non-English but the selected language
751.         is English. See #13388 and #3594 for more details.
752.         """
753.         with self.settings(LANGUAGE_CODE='fr'), translation.override('en-us'):
754.             response = self.client.get(reverse('admin:jsi18n'))
755.             self.assertNotContains(response, 'Choisir une heure')
756. 
757.     def test_i18n_language_non_english_fallback(self):
758.         """
759.         Makes sure that the fallback language is still working properly
760.         in cases where the selected language cannot be found.
761.         """
762.         with self.settings(LANGUAGE_CODE='fr'), translation.override('none'):
763.             response = self.client.get(reverse('admin:jsi18n'))
764.             self.assertContains(response, 'Choisir une heure')
765. 
766.     def test_jsi18n_with_context(self):
767.         response = self.client.get(reverse('admin-extra-context:jsi18n'))
768.         self.assertEqual(response.status_code, 200)
769. 
770.     def test_L10N_deactivated(self):
771.         """
772.         Check if L10N is deactivated, the JavaScript i18n view doesn't
773.         return localized date/time formats. Refs #14824.
774.         """
775.         with self.settings(LANGUAGE_CODE='ru', USE_L10N=False), translation.override('none'):
776.             response = self.client.get(reverse('admin:jsi18n'))
777.             self.assertNotContains(response, '%d.%m.%Y %H:%M:%S')
778.             self.assertContains(response, '%Y-%m-%d %H:%M:%S')
779. 
780.     def test_disallowed_filtering(self):
781.         with self.assertLogs('django.security.DisallowedModelAdminLookup', 'ERROR'):
782.             response = self.client.get(
783.                 "%s?owner__email__startswith=fuzzy" % reverse('admin:admin_views_album_changelist')
784.             )
785.         self.assertEqual(response.status_code, 400)
786. 
787.         # Filters are allowed if explicitly included in list_filter
788.         response = self.client.get("%s?color__value__startswith=red" % reverse('admin:admin_views_thing_changelist'))
789.         self.assertEqual(response.status_code, 200)
790.         response = self.client.get("%s?color__value=red" % reverse('admin:admin_views_thing_changelist'))
791.         self.assertEqual(response.status_code, 200)
792. 
793.         # Filters should be allowed if they involve a local field without the
794.         # need to whitelist them in list_filter or date_hierarchy.
795.         response = self.client.get("%s?age__gt=30" % reverse('admin:admin_views_person_changelist'))
796.         self.assertEqual(response.status_code, 200)
797. 
798.         e1 = Employee.objects.create(name='Anonymous', gender=1, age=22, alive=True, code='123')
799.         e2 = Employee.objects.create(name='Visitor', gender=2, age=19, alive=True, code='124')
800.         WorkHour.objects.create(datum=datetime.datetime.now(), employee=e1)
801.         WorkHour.objects.create(datum=datetime.datetime.now(), employee=e2)
802.         response = self.client.get(reverse('admin:admin_views_workhour_changelist'))
803.         self.assertContains(response, 'employee__person_ptr__exact')
804.         response = self.client.get("%s?employee__person_ptr__exact=%d" % (
805.             reverse('admin:admin_views_workhour_changelist'), e1.pk)
806.         )
807.         self.assertEqual(response.status_code, 200)
808. 
809.     def test_disallowed_to_field(self):
810.         url = reverse('admin:admin_views_section_changelist')
811.         with self.assertLogs('django.security.DisallowedModelAdminToField', 'ERROR'):
812.             response = self.client.get(url, {TO_FIELD_VAR: 'missing_field'})
813.         self.assertEqual(response.status_code, 400)
814. 
815.         # Specifying a field that is not referred by any other model registered
816.         # to this admin site should raise an exception.
817.         with self.assertLogs('django.security.DisallowedModelAdminToField', 'ERROR'):
818.             response = self.client.get(reverse('admin:admin_views_section_changelist'), {TO_FIELD_VAR: 'name'})
819.         self.assertEqual(response.status_code, 400)
820. 
821.         # #23839 - Primary key should always be allowed, even if the referenced model isn't registered.
822.         response = self.client.get(reverse('admin:admin_views_notreferenced_changelist'), {TO_FIELD_VAR: 'id'})
823.         self.assertEqual(response.status_code, 200)
824. 
825.         # #23915 - Specifying a field referenced by another model though a m2m should be allowed.
826.         response = self.client.get(reverse('admin:admin_views_recipe_changelist'), {TO_FIELD_VAR: 'rname'})
827.         self.assertEqual(response.status_code, 200)
828. 
829.         # #23604, #23915 - Specifying a field referenced through a reverse m2m relationship should be allowed.
830.         response = self.client.get(reverse('admin:admin_views_ingredient_changelist'), {TO_FIELD_VAR: 'iname'})
831.         self.assertEqual(response.status_code, 200)
832. 
833.         # #23329 - Specifying a field that is not referred by any other model directly registered
834.         # to this admin site but registered through inheritance should be allowed.
835.         response = self.client.get(reverse('admin:admin_views_referencedbyparent_changelist'), {TO_FIELD_VAR: 'name'})
836.         self.assertEqual(response.status_code, 200)
837. 
838.         # #23431 - Specifying a field that is only referred to by a inline of a registered
839.         # model should be allowed.
840.         response = self.client.get(reverse('admin:admin_views_referencedbyinline_changelist'), {TO_FIELD_VAR: 'name'})
841.         self.assertEqual(response.status_code, 200)
842. 
843.         # #25622 - Specifying a field of a model only referred by a generic
844.         # relation should raise DisallowedModelAdminToField.
845.         url = reverse('admin:admin_views_referencedbygenrel_changelist')
846.         with self.assertLogs('django.security.DisallowedModelAdminToField', 'ERROR'):
847.             response = self.client.get(url, {TO_FIELD_VAR: 'object_id'})
848.         self.assertEqual(response.status_code, 400)
849. 
850.         # We also want to prevent the add, change, and delete views from
851.         # leaking a disallowed field value.
852.         with self.assertLogs('django.security.DisallowedModelAdminToField', 'ERROR'):
853.             response = self.client.post(reverse('admin:admin_views_section_add'), {TO_FIELD_VAR: 'name'})
854.         self.assertEqual(response.status_code, 400)
855. 
856.         section = Section.objects.create()
857.         url = reverse('admin:admin_views_section_change', args=(section.pk,))
858.         with self.assertLogs('django.security.DisallowedModelAdminToField', 'ERROR'):
859.             response = self.client.post(url, {TO_FIELD_VAR: 'name'})
860.         self.assertEqual(response.status_code, 400)
861. 
862.         url = reverse('admin:admin_views_section_delete', args=(section.pk,))
863.         with self.assertLogs('django.security.DisallowedModelAdminToField', 'ERROR'):
864.             response = self.client.post(url, {TO_FIELD_VAR: 'name'})
865.         self.assertEqual(response.status_code, 400)
866. 
867.     def test_allowed_filtering_15103(self):
868.         """
869.         Regressions test for ticket 15103 - filtering on fields defined in a
870.         ForeignKey 'limit_choices_to' should be allowed, otherwise raw_id_fields
871.         can break.
872.         """
873.         # Filters should be allowed if they are defined on a ForeignKey pointing to this model
874.         url = "%s?leader__name=Palin&leader__age=27" % reverse('admin:admin_views_inquisition_changelist')
875.         response = self.client.get(url)
876.         self.assertEqual(response.status_code, 200)
877. 
878.     def test_popup_dismiss_related(self):
879.         """
880.         Regression test for ticket 20664 - ensure the pk is properly quoted.
881.         """
882.         actor = Actor.objects.create(name="Palin", age=27)
883.         response = self.client.get("%s?%s" % (reverse('admin:admin_views_actor_changelist'), IS_POPUP_VAR))
884.         self.assertContains(response, 'data-popup-opener="%s"' % actor.pk)
885. 
886.     def test_hide_change_password(self):
887.         """
888.         Tests if the "change password" link in the admin is hidden if the User
889.         does not have a usable password set.
890.         (against 9bea85795705d015cdadc82c68b99196a8554f5c)
891.         """
892.         user = User.objects.get(username='super')
893.         user.set_unusable_password()
894.         user.save()
895.         self.client.force_login(user)
896.         response = self.client.get(reverse('admin:index'))
897.         self.assertNotContains(
898.             response, reverse('admin:password_change'),
899.             msg_prefix='The "change password" link should not be displayed if a user does not have a usable password.'
900.         )
901. 
902.     def test_change_view_with_show_delete_extra_context(self):
903.         """
904.         The 'show_delete' context variable in the admin's change view controls
905.         the display of the delete button.
906.         """
907.         instance = UndeletableObject.objects.create(name='foo')
908.         response = self.client.get(reverse('admin:admin_views_undeletableobject_change', args=(instance.pk,)))
909.         self.assertNotContains(response, 'deletelink')
910. 
911.     def test_change_view_logs_m2m_field_changes(self):
912.         """Changes to ManyToManyFields are included in the object's history."""
913.         pizza = ReadablePizza.objects.create(name='Cheese')
914.         cheese = Topping.objects.create(name='cheese')
915.         post_data = {'name': pizza.name, 'toppings': [cheese.pk]}
916.         response = self.client.post(reverse('admin:admin_views_readablepizza_change', args=(pizza.pk,)), post_data)
917.         self.assertRedirects(response, reverse('admin:admin_views_readablepizza_changelist'))
918.         pizza_ctype = ContentType.objects.get_for_model(ReadablePizza, for_concrete_model=False)
919.         log = LogEntry.objects.filter(content_type=pizza_ctype, object_id=pizza.pk).first()
920.         self.assertEqual(log.get_change_message(), 'Changed Toppings.')
921. 
922.     def test_allows_attributeerror_to_bubble_up(self):
923.         """
924.         AttributeErrors are allowed to bubble when raised inside a change list
925.         view. Requires a model to be created so there's something to display.
926.         Refs: #16655, #18593, and #18747
927.         """
928.         Simple.objects.create()
929.         with self.assertRaises(AttributeError):
930.             self.client.get(reverse('admin:admin_views_simple_changelist'))
931. 
932.     def test_changelist_with_no_change_url(self):
933.         """
934.         ModelAdmin.changelist_view shouldn't result in a NoReverseMatch if url
935.         for change_view is removed from get_urls (#20934).
936.         """
937.         o = UnchangeableObject.objects.create()
938.         response = self.client.get(reverse('admin:admin_views_unchangeableobject_changelist'))
939.         self.assertEqual(response.status_code, 200)
940.         # Check the format of the shown object -- shouldn't contain a change link
941.         self.assertContains(response, '<th class="field-__str__">%s</th>' % o, html=True)
942. 
943.     def test_invalid_appindex_url(self):
944.         """
945.         #21056 -- URL reversing shouldn't work for nonexistent apps.
946.         """
947.         good_url = '/test_admin/admin/admin_views/'
948.         confirm_good_url = reverse('admin:app_list',
949.                                    kwargs={'app_label': 'admin_views'})
950.         self.assertEqual(good_url, confirm_good_url)
951. 
952.         with self.assertRaises(NoReverseMatch):
953.             reverse('admin:app_list', kwargs={'app_label': 'this_should_fail'})
954.         with self.assertRaises(NoReverseMatch):
955.             reverse('admin:app_list', args=('admin_views2',))
956. 
957.     def test_resolve_admin_views(self):
958.         index_match = resolve('/test_admin/admin4/')
959.         list_match = resolve('/test_admin/admin4/auth/user/')
960.         self.assertIs(index_match.func.admin_site, customadmin.simple_site)
961.         self.assertIsInstance(list_match.func.model_admin, customadmin.CustomPwdTemplateUserAdmin)
962. 
963.     def test_adminsite_display_site_url(self):
964.         """
965.         #13749 - Admin should display link to front-end site 'View site'
966.         """
967.         url = reverse('admin:index')
968.         response = self.client.get(url)
969.         self.assertEqual(response.context['site_url'], '/my-site-url/')
970.         self.assertContains(response, '<a href="/my-site-url/">View site</a>')
971. 
972.     @override_settings(TIME_ZONE='America/Sao_Paulo', USE_TZ=True)
973.     def test_date_hierarchy_timezone_dst(self):
974.         # This datetime doesn't exist in this timezone due to DST.
975.         date = pytz.timezone('America/Sao_Paulo').localize(datetime.datetime(2016, 10, 16, 15), is_dst=None)
976.         q = Question.objects.create(question='Why?', expires=date)
977.         Answer2.objects.create(question=q, answer='Because.')
978.         response = self.client.get(reverse('admin:admin_views_answer2_changelist'))
979.         self.assertEqual(response.status_code, 200)
980.         self.assertContains(response, 'question__expires__day=16')
981.         self.assertContains(response, 'question__expires__month=10')
982.         self.assertContains(response, 'question__expires__year=2016')
983. 
984.     def test_sortable_by_columns_subset(self):
985.         expected_sortable_fields = ('date', 'callable_year')
986.         expected_not_sortable_fields = (
987.             'content', 'model_year', 'modeladmin_year', 'model_year_reversed',
988.             'section',
989.         )
990.         response = self.client.get(reverse('admin6:admin_views_article_changelist'))
991.         for field_name in expected_sortable_fields:
992.             self.assertContains(response, '<th scope="col"  class="sortable column-%s">' % field_name)
993.         for field_name in expected_not_sortable_fields:
994.             self.assertContains(response, '<th scope="col"  class="column-%s">' % field_name)
995. 
996.     def test_get_sortable_by_columns_subset(self):
997.         response = self.client.get(reverse('admin6:admin_views_actor_changelist'))
998.         self.assertContains(response, '<th scope="col"  class="sortable column-age">')
999.         self.assertContains(response, '<th scope="col"  class="column-name">')
1000. 
1001.     def test_sortable_by_no_column(self):
1002.         expected_not_sortable_fields = ('title', 'book')
1003.         response = self.client.get(reverse('admin6:admin_views_chapter_changelist'))
1004.         for field_name in expected_not_sortable_fields:
1005.             self.assertContains(response, '<th scope="col"  class="column-%s">' % field_name)
1006.         self.assertNotContains(response, '<th scope="col"  class="sortable column')
1007. 
1008.     def test_get_sortable_by_no_column(self):
1009.         response = self.client.get(reverse('admin6:admin_views_color_changelist'))
1010.         self.assertContains(response, '<th scope="col"  class="column-value">')
1011.         self.assertNotContains(response, '<th scope="col"  class="sortable column')
1012. 
1013. 
1014. @override_settings(TEMPLATES=[{
1015.     'BACKEND': 'django.template.backends.django.DjangoTemplates',
1016.     # Put this app's and the shared tests templates dirs in DIRS to take precedence
1017.     # over the admin's templates dir.
1018.     'DIRS': [
1019.         os.path.join(os.path.dirname(__file__), 'templates'),
1020.         os.path.join(os.path.dirname(os.path.dirname(__file__)), 'templates'),
1021.     ],
1022.     'APP_DIRS': True,
1023.     'OPTIONS': {
1024.         'context_processors': [
1025.             'django.template.context_processors.debug',
1026.             'django.template.context_processors.request',
1027.             'django.contrib.auth.context_processors.auth',
1028.             'django.contrib.messages.context_processors.messages',
1029.         ],
1030.     },
1031. }])
1032. class AdminCustomTemplateTests(AdminViewBasicTestCase):
1033.     def test_custom_model_admin_templates(self):
1034.         # Test custom change list template with custom extra context
1035.         response = self.client.get(reverse('admin:admin_views_customarticle_changelist'))
1036.         self.assertContains(response, "var hello = 'Hello!';")
1037.         self.assertTemplateUsed(response, 'custom_admin/change_list.html')
1038. 
1039.         # Test custom add form template
1040.         response = self.client.get(reverse('admin:admin_views_customarticle_add'))
1041.         self.assertTemplateUsed(response, 'custom_admin/add_form.html')
1042. 
1043.         # Add an article so we can test delete, change, and history views
1044.         post = self.client.post(reverse('admin:admin_views_customarticle_add'), {
1045.             'content': '<p>great article</p>',
1046.             'date_0': '2008-03-18',
1047.             'date_1': '10:54:39'
1048.         })
1049.         self.assertRedirects(post, reverse('admin:admin_views_customarticle_changelist'))
1050.         self.assertEqual(CustomArticle.objects.all().count(), 1)
1051.         article_pk = CustomArticle.objects.all()[0].pk
1052. 
1053.         # Test custom delete, change, and object history templates
1054.         # Test custom change form template
1055.         response = self.client.get(reverse('admin:admin_views_customarticle_change', args=(article_pk,)))
1056.         self.assertTemplateUsed(response, 'custom_admin/change_form.html')
1057.         response = self.client.get(reverse('admin:admin_views_customarticle_delete', args=(article_pk,)))
1058.         self.assertTemplateUsed(response, 'custom_admin/delete_confirmation.html')
1059.         response = self.client.post(reverse('admin:admin_views_customarticle_changelist'), data={
1060.             'index': 0,
1061.             'action': ['delete_selected'],
1062.             '_selected_action': ['1'],
1063.         })
1064.         self.assertTemplateUsed(response, 'custom_admin/delete_selected_confirmation.html')
1065.         response = self.client.get(reverse('admin:admin_views_customarticle_history', args=(article_pk,)))
1066.         self.assertTemplateUsed(response, 'custom_admin/object_history.html')
1067. 
1068.         # A custom popup response template may be specified by
1069.         # ModelAdmin.popup_response_template.
1070.         response = self.client.post(reverse('admin:admin_views_customarticle_add') + '?%s=1' % IS_POPUP_VAR, {
1071.             'content': '<p>great article</p>',
1072.             'date_0': '2008-03-18',
1073.             'date_1': '10:54:39',
1074.             IS_POPUP_VAR: '1'
1075.         })
1076.         self.assertEqual(response.template_name, 'custom_admin/popup_response.html')
1077. 
1078.     def test_extended_bodyclass_template_change_form(self):
1079.         """
1080.         The admin/change_form.html template uses block.super in the
1081.         bodyclass block.
1082.         """
1083.         response = self.client.get(reverse('admin:admin_views_section_add'))
1084.         self.assertContains(response, 'bodyclass_consistency_check ')
1085. 
1086.     def test_change_password_template(self):
1087.         user = User.objects.get(username='super')
1088.         response = self.client.get(reverse('admin:auth_user_password_change', args=(user.id,)))
1089.         # The auth/user/change_password.html template uses super in the
1090.         # bodyclass block.
1091.         self.assertContains(response, 'bodyclass_consistency_check ')
1092. 
1093.         # When a site has multiple passwords in the browser's password manager,
1094.         # a browser pop up asks which user the new password is for. To prevent
1095.         # this, the username is added to the change password form.
1096.         self.assertContains(response, '<input type="text" name="username" value="super" style="display: none">')
1097. 
1098.     def test_extended_bodyclass_template_index(self):
1099.         """
1100.         The admin/index.html template uses block.super in the bodyclass block.
1101.         """
1102.         response = self.client.get(reverse('admin:index'))
1103.         self.assertContains(response, 'bodyclass_consistency_check ')
1104. 
1105.     def test_extended_bodyclass_change_list(self):
1106.         """
1107.         The admin/change_list.html' template uses block.super
1108.         in the bodyclass block.
1109.         """
1110.         response = self.client.get(reverse('admin:admin_views_article_changelist'))
1111.         self.assertContains(response, 'bodyclass_consistency_check ')
1112. 
1113.     def test_extended_bodyclass_template_login(self):
1114.         """
1115.         The admin/login.html template uses block.super in the
1116.         bodyclass block.
1117.         """
1118.         self.client.logout()
1119.         response = self.client.get(reverse('admin:login'))
1120.         self.assertContains(response, 'bodyclass_consistency_check ')
1121. 
1122.     def test_extended_bodyclass_template_delete_confirmation(self):
1123.         """
1124.         The admin/delete_confirmation.html template uses
1125.         block.super in the bodyclass block.
1126.         """
1127.         group = Group.objects.create(name="foogroup")
1128.         response = self.client.get(reverse('admin:auth_group_delete', args=(group.id,)))
1129.         self.assertContains(response, 'bodyclass_consistency_check ')
1130. 
1131.     def test_extended_bodyclass_template_delete_selected_confirmation(self):
1132.         """
1133.         The admin/delete_selected_confirmation.html template uses
1134.         block.super in bodyclass block.
1135.         """
1136.         group = Group.objects.create(name="foogroup")
1137.         post_data = {
1138.             'action': 'delete_selected',
1139.             'selected_across': '0',
1140.             'index': '0',
1141.             '_selected_action': group.id
1142.         }
1143.         response = self.client.post(reverse('admin:auth_group_changelist'), post_data)
1144.         self.assertEqual(response.context['site_header'], 'Django administration')
1145.         self.assertContains(response, 'bodyclass_consistency_check ')
1146. 
1147.     def test_filter_with_custom_template(self):
1148.         """
1149.         A custom template can be used to render an admin filter.
1150.         """
1151.         response = self.client.get(reverse('admin:admin_views_color2_changelist'))
1152.         self.assertTemplateUsed(response, 'custom_filter_template.html')
1153. 
1154. 
1155. @override_settings(ROOT_URLCONF='admin_views.urls')
1156. class AdminViewFormUrlTest(TestCase):
1157.     current_app = "admin3"
1158. 
1159.     @classmethod
1160.     def setUpTestData(cls):
1161.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
1162.         cls.s1 = Section.objects.create(name='Test section')
1163.         cls.a1 = Article.objects.create(
1164.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
1165.         )
1166.         cls.a2 = Article.objects.create(
1167.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
1168.         )
1169.         cls.a3 = Article.objects.create(
1170.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
1171.         )
1172.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
1173. 
1174.     def setUp(self):
1175.         self.client.force_login(self.superuser)
1176. 
1177.     def test_change_form_URL_has_correct_value(self):
1178.         """
1179.         change_view has form_url in response.context
1180.         """
1181.         response = self.client.get(
1182.             reverse('admin:admin_views_section_change', args=(self.s1.pk,), current_app=self.current_app)
1183.         )
1184.         self.assertIn('form_url', response.context, msg='form_url not present in response.context')
1185.         self.assertEqual(response.context['form_url'], 'pony')
1186. 
1187.     def test_initial_data_can_be_overridden(self):
1188.         """
1189.         The behavior for setting initial form data can be overridden in the
1190.         ModelAdmin class. Usually, the initial value is set via the GET params.
1191.         """
1192.         response = self.client.get(
1193.             reverse('admin:admin_views_restaurant_add', current_app=self.current_app),
1194.             {'name': 'test_value'}
1195.         )
1196.         # this would be the usual behaviour
1197.         self.assertNotContains(response, 'value="test_value"')
1198.         # this is the overridden behaviour
1199.         self.assertContains(response, 'value="overridden_value"')
1200. 
1201. 
1202. @override_settings(ROOT_URLCONF='admin_views.urls')
1203. class AdminJavaScriptTest(TestCase):
1204. 
1205.     @classmethod
1206.     def setUpTestData(cls):
1207.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
1208. 
1209.     def setUp(self):
1210.         self.client.force_login(self.superuser)
1211. 
1212.     def test_js_minified_only_if_debug_is_false(self):
1213.         """
1214.         The minified versions of the JS files are only used when DEBUG is False.
1215.         """
1216.         with override_settings(DEBUG=False):
1217.             response = self.client.get(reverse('admin:admin_views_section_add'))
1218.             self.assertNotContains(response, 'vendor/jquery/jquery.js')
1219.             self.assertContains(response, 'vendor/jquery/jquery.min.js')
1220.             self.assertNotContains(response, 'prepopulate.js')
1221.             self.assertContains(response, 'prepopulate.min.js')
1222.             self.assertNotContains(response, 'actions.js')
1223.             self.assertContains(response, 'actions.min.js')
1224.             self.assertNotContains(response, 'collapse.js')
1225.             self.assertContains(response, 'collapse.min.js')
1226.             self.assertNotContains(response, 'inlines.js')
1227.             self.assertContains(response, 'inlines.min.js')
1228.         with override_settings(DEBUG=True):
1229.             response = self.client.get(reverse('admin:admin_views_section_add'))
1230.             self.assertContains(response, 'vendor/jquery/jquery.js')
1231.             self.assertNotContains(response, 'vendor/jquery/jquery.min.js')
1232.             self.assertContains(response, 'prepopulate.js')
1233.             self.assertNotContains(response, 'prepopulate.min.js')
1234.             self.assertContains(response, 'actions.js')
1235.             self.assertNotContains(response, 'actions.min.js')
1236.             self.assertContains(response, 'collapse.js')
1237.             self.assertNotContains(response, 'collapse.min.js')
1238.             self.assertContains(response, 'inlines.js')
1239.             self.assertNotContains(response, 'inlines.min.js')
1240. 
1241. 
1242. @override_settings(ROOT_URLCONF='admin_views.urls')
1243. class SaveAsTests(TestCase):
1244. 
1245.     @classmethod
1246.     def setUpTestData(cls):
1247.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
1248.         cls.per1 = Person.objects.create(name='John Mauchly', gender=1, alive=True)
1249. 
1250.     def setUp(self):
1251.         self.client.force_login(self.superuser)
1252. 
1253.     def test_save_as_duplication(self):
1254.         """'save as' creates a new person"""
1255.         post_data = {'_saveasnew': '', 'name': 'John M', 'gender': 1, 'age': 42}
1256.         response = self.client.post(reverse('admin:admin_views_person_change', args=(self.per1.pk,)), post_data)
1257.         self.assertEqual(len(Person.objects.filter(name='John M')), 1)
1258.         self.assertEqual(len(Person.objects.filter(id=self.per1.pk)), 1)
1259.         new_person = Person.objects.latest('id')
1260.         self.assertRedirects(response, reverse('admin:admin_views_person_change', args=(new_person.pk,)))
1261. 
1262.     def test_save_as_continue_false(self):
1263.         """
1264.         Saving a new object using "Save as new" redirects to the changelist
1265.         instead of the change view when ModelAdmin.save_as_continue=False.
1266.         """
1267.         post_data = {'_saveasnew': '', 'name': 'John M', 'gender': 1, 'age': 42}
1268.         url = reverse('admin:admin_views_person_change', args=(self.per1.pk,), current_app=site2.name)
1269.         response = self.client.post(url, post_data)
1270.         self.assertEqual(len(Person.objects.filter(name='John M')), 1)
1271.         self.assertEqual(len(Person.objects.filter(id=self.per1.pk)), 1)
1272.         self.assertRedirects(response, reverse('admin:admin_views_person_changelist', current_app=site2.name))
1273. 
1274.     def test_save_as_new_with_validation_errors(self):
1275.         """
1276.         When you click "Save as new" and have a validation error,
1277.         you only see the "Save as new" button and not the other save buttons,
1278.         and that only the "Save as" button is visible.
1279.         """
1280.         response = self.client.post(reverse('admin:admin_views_person_change', args=(self.per1.pk,)), {
1281.             '_saveasnew': '',
1282.             'gender': 'invalid',
1283.             '_addanother': 'fail',
1284.         })
1285.         self.assertContains(response, 'Please correct the errors below.')
1286.         self.assertFalse(response.context['show_save_and_add_another'])
1287.         self.assertFalse(response.context['show_save_and_continue'])
1288.         self.assertTrue(response.context['show_save_as_new'])
1289. 
1290.     def test_save_as_new_with_validation_errors_with_inlines(self):
1291.         parent = Parent.objects.create(name='Father')
1292.         child = Child.objects.create(parent=parent, name='Child')
1293.         response = self.client.post(reverse('admin:admin_views_parent_change', args=(parent.pk,)), {
1294.             '_saveasnew': 'Save as new',
1295.             'child_set-0-parent': parent.pk,
1296.             'child_set-0-id': child.pk,
1297.             'child_set-0-name': 'Child',
1298.             'child_set-INITIAL_FORMS': 1,
1299.             'child_set-MAX_NUM_FORMS': 1000,
1300.             'child_set-MIN_NUM_FORMS': 0,
1301.             'child_set-TOTAL_FORMS': 4,
1302.             'name': '_invalid',
1303.         })
1304.         self.assertContains(response, 'Please correct the error below.')
1305.         self.assertFalse(response.context['show_save_and_add_another'])
1306.         self.assertFalse(response.context['show_save_and_continue'])
1307.         self.assertTrue(response.context['show_save_as_new'])
1308. 
1309.     def test_save_as_new_with_inlines_with_validation_errors(self):
1310.         parent = Parent.objects.create(name='Father')
1311.         child = Child.objects.create(parent=parent, name='Child')
1312.         response = self.client.post(reverse('admin:admin_views_parent_change', args=(parent.pk,)), {
1313.             '_saveasnew': 'Save as new',
1314.             'child_set-0-parent': parent.pk,
1315.             'child_set-0-id': child.pk,
1316.             'child_set-0-name': '_invalid',
1317.             'child_set-INITIAL_FORMS': 1,
1318.             'child_set-MAX_NUM_FORMS': 1000,
1319.             'child_set-MIN_NUM_FORMS': 0,
1320.             'child_set-TOTAL_FORMS': 4,
1321.             'name': 'Father',
1322.         })
1323.         self.assertContains(response, 'Please correct the error below.')
1324.         self.assertFalse(response.context['show_save_and_add_another'])
1325.         self.assertFalse(response.context['show_save_and_continue'])
1326.         self.assertTrue(response.context['show_save_as_new'])
1327. 
1328. 
1329. @override_settings(ROOT_URLCONF='admin_views.urls')
1330. class CustomModelAdminTest(AdminViewBasicTestCase):
1331. 
1332.     def test_custom_admin_site_login_form(self):
1333.         self.client.logout()
1334.         response = self.client.get(reverse('admin2:index'), follow=True)
1335.         self.assertIsInstance(response, TemplateResponse)
1336.         self.assertEqual(response.status_code, 200)
1337.         login = self.client.post(reverse('admin2:login'), {
1338.             REDIRECT_FIELD_NAME: reverse('admin2:index'),
1339.             'username': 'customform',
1340.             'password': 'secret',
1341.         }, follow=True)
1342.         self.assertIsInstance(login, TemplateResponse)
1343.         self.assertEqual(login.status_code, 200)
1344.         self.assertContains(login, 'custom form error')
1345.         self.assertContains(login, 'path/to/media.css')
1346. 
1347.     def test_custom_admin_site_login_template(self):
1348.         self.client.logout()
1349.         response = self.client.get(reverse('admin2:index'), follow=True)
1350.         self.assertIsInstance(response, TemplateResponse)
1351.         self.assertTemplateUsed(response, 'custom_admin/login.html')
1352.         self.assertContains(response, 'Hello from a custom login template')
1353. 
1354.     def test_custom_admin_site_logout_template(self):
1355.         response = self.client.get(reverse('admin2:logout'))
1356.         self.assertIsInstance(response, TemplateResponse)
1357.         self.assertTemplateUsed(response, 'custom_admin/logout.html')
1358.         self.assertContains(response, 'Hello from a custom logout template')
1359. 
1360.     def test_custom_admin_site_index_view_and_template(self):
1361.         response = self.client.get(reverse('admin2:index'))
1362.         self.assertIsInstance(response, TemplateResponse)
1363.         self.assertTemplateUsed(response, 'custom_admin/index.html')
1364.         self.assertContains(response, 'Hello from a custom index template *bar*')
1365. 
1366.     def test_custom_admin_site_app_index_view_and_template(self):
1367.         response = self.client.get(reverse('admin2:app_list', args=('admin_views',)))
1368.         self.assertIsInstance(response, TemplateResponse)
1369.         self.assertTemplateUsed(response, 'custom_admin/app_index.html')
1370.         self.assertContains(response, 'Hello from a custom app_index template')
1371. 
1372.     def test_custom_admin_site_password_change_template(self):
1373.         response = self.client.get(reverse('admin2:password_change'))
1374.         self.assertIsInstance(response, TemplateResponse)
1375.         self.assertTemplateUsed(response, 'custom_admin/password_change_form.html')
1376.         self.assertContains(response, 'Hello from a custom password change form template')
1377. 
1378.     def test_custom_admin_site_password_change_with_extra_context(self):
1379.         response = self.client.get(reverse('admin2:password_change'))
1380.         self.assertIsInstance(response, TemplateResponse)
1381.         self.assertTemplateUsed(response, 'custom_admin/password_change_form.html')
1382.         self.assertContains(response, 'eggs')
1383. 
1384.     def test_custom_admin_site_password_change_done_template(self):
1385.         response = self.client.get(reverse('admin2:password_change_done'))
1386.         self.assertIsInstance(response, TemplateResponse)
1387.         self.assertTemplateUsed(response, 'custom_admin/password_change_done.html')
1388.         self.assertContains(response, 'Hello from a custom password change done template')
1389. 
1390.     def test_custom_admin_site_view(self):
1391.         self.client.force_login(self.superuser)
1392.         response = self.client.get(reverse('admin2:my_view'))
1393.         self.assertEqual(response.content, b"Django is a magical pony!")
1394. 
1395.     def test_pwd_change_custom_template(self):
1396.         self.client.force_login(self.superuser)
1397.         su = User.objects.get(username='super')
1398.         response = self.client.get(reverse('admin4:auth_user_password_change', args=(su.pk,)))
1399.         self.assertEqual(response.status_code, 200)
1400. 
1401. 
1402. def get_perm(Model, codename):
1403.     """Return the permission object, for the Model"""
1404.     ct = ContentType.objects.get_for_model(Model, for_concrete_model=False)
1405.     return Permission.objects.get(content_type=ct, codename=codename)
1406. 
1407. 
1408. @override_settings(
1409.     ROOT_URLCONF='admin_views.urls',
1410.     # Test with the admin's documented list of required context processors.
1411.     TEMPLATES=[{
1412.         'BACKEND': 'django.template.backends.django.DjangoTemplates',
1413.         'APP_DIRS': True,
1414.         'OPTIONS': {
1415.             'context_processors': [
1416.                 'django.contrib.auth.context_processors.auth',
1417.                 'django.contrib.messages.context_processors.messages',
1418.             ],
1419.         },
1420.     }],
1421. )
1422. class AdminViewPermissionsTest(TestCase):
1423.     """Tests for Admin Views Permissions."""
1424. 
1425.     @classmethod
1426.     def setUpTestData(cls):
1427.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
1428.         cls.viewuser = User.objects.create_user(username='viewuser', password='secret', is_staff=True)
1429.         cls.adduser = User.objects.create_user(username='adduser', password='secret', is_staff=True)
1430.         cls.changeuser = User.objects.create_user(username='changeuser', password='secret', is_staff=True)
1431.         cls.deleteuser = User.objects.create_user(username='deleteuser', password='secret', is_staff=True)
1432.         cls.joepublicuser = User.objects.create_user(username='joepublic', password='secret')
1433.         cls.nostaffuser = User.objects.create_user(username='nostaff', password='secret')
1434.         cls.s1 = Section.objects.create(name='Test section')
1435.         cls.a1 = Article.objects.create(
1436.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1,
1437.             another_section=cls.s1,
1438.         )
1439.         cls.a2 = Article.objects.create(
1440.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
1441.         )
1442.         cls.a3 = Article.objects.create(
1443.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
1444.         )
1445.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
1446. 
1447.         # Setup permissions, for our users who can add, change, and delete.
1448.         opts = Article._meta
1449. 
1450.         # User who can view Articles
1451.         cls.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('view', opts)))
1452.         # User who can add Articles
1453.         cls.adduser.user_permissions.add(get_perm(Article, get_permission_codename('add', opts)))
1454.         # User who can change Articles
1455.         cls.changeuser.user_permissions.add(get_perm(Article, get_permission_codename('change', opts)))
1456.         cls.nostaffuser.user_permissions.add(get_perm(Article, get_permission_codename('change', opts)))
1457. 
1458.         # User who can delete Articles
1459.         cls.deleteuser.user_permissions.add(get_perm(Article, get_permission_codename('delete', opts)))
1460.         cls.deleteuser.user_permissions.add(get_perm(Section, get_permission_codename('delete', Section._meta)))
1461. 
1462.         # login POST dicts
1463.         cls.index_url = reverse('admin:index')
1464.         cls.super_login = {
1465.             REDIRECT_FIELD_NAME: cls.index_url,
1466.             'username': 'super',
1467.             'password': 'secret',
1468.         }
1469.         cls.super_email_login = {
1470.             REDIRECT_FIELD_NAME: cls.index_url,
1471.             'username': 'super@example.com',
1472.             'password': 'secret',
1473.         }
1474.         cls.super_email_bad_login = {
1475.             REDIRECT_FIELD_NAME: cls.index_url,
1476.             'username': 'super@example.com',
1477.             'password': 'notsecret',
1478.         }
1479.         cls.adduser_login = {
1480.             REDIRECT_FIELD_NAME: cls.index_url,
1481.             'username': 'adduser',
1482.             'password': 'secret',
1483.         }
1484.         cls.changeuser_login = {
1485.             REDIRECT_FIELD_NAME: cls.index_url,
1486.             'username': 'changeuser',
1487.             'password': 'secret',
1488.         }
1489.         cls.deleteuser_login = {
1490.             REDIRECT_FIELD_NAME: cls.index_url,
1491.             'username': 'deleteuser',
1492.             'password': 'secret',
1493.         }
1494.         cls.nostaff_login = {
1495.             REDIRECT_FIELD_NAME: reverse('has_permission_admin:index'),
1496.             'username': 'nostaff',
1497.             'password': 'secret',
1498.         }
1499.         cls.joepublic_login = {
1500.             REDIRECT_FIELD_NAME: cls.index_url,
1501.             'username': 'joepublic',
1502.             'password': 'secret',
1503.         }
1504.         cls.viewuser_login = {
1505.             REDIRECT_FIELD_NAME: cls.index_url,
1506.             'username': 'viewuser',
1507.             'password': 'secret',
1508.         }
1509.         cls.no_username_login = {
1510.             REDIRECT_FIELD_NAME: cls.index_url,
1511.             'password': 'secret',
1512.         }
1513. 
1514.     def test_login(self):
1515.         """
1516.         Make sure only staff members can log in.
1517. 
1518.         Successful posts to the login page will redirect to the original url.
1519.         Unsuccessful attempts will continue to render the login page with
1520.         a 200 status code.
1521.         """
1522.         login_url = '%s?next=%s' % (reverse('admin:login'), reverse('admin:index'))
1523.         # Super User
1524.         response = self.client.get(self.index_url)
1525.         self.assertRedirects(response, login_url)
1526.         login = self.client.post(login_url, self.super_login)
1527.         self.assertRedirects(login, self.index_url)
1528.         self.assertFalse(login.context)
1529.         self.client.get(reverse('admin:logout'))
1530. 
1531.         # Test if user enters email address
1532.         response = self.client.get(self.index_url)
1533.         self.assertEqual(response.status_code, 302)
1534.         login = self.client.post(login_url, self.super_email_login)
1535.         self.assertContains(login, ERROR_MESSAGE)
1536.         # only correct passwords get a username hint
1537.         login = self.client.post(login_url, self.super_email_bad_login)
1538.         self.assertContains(login, ERROR_MESSAGE)
1539.         new_user = User(username='jondoe', password='secret', email='super@example.com')
1540.         new_user.save()
1541.         # check to ensure if there are multiple email addresses a user doesn't get a 500
1542.         login = self.client.post(login_url, self.super_email_login)
1543.         self.assertContains(login, ERROR_MESSAGE)
1544. 
1545.         # View User
1546.         response = self.client.get(self.index_url)
1547.         self.assertEqual(response.status_code, 302)
1548.         login = self.client.post(login_url, self.viewuser_login)
1549.         self.assertRedirects(login, self.index_url)
1550.         self.assertFalse(login.context)
1551.         self.client.get(reverse('admin:logout'))
1552. 
1553.         # Add User
1554.         response = self.client.get(self.index_url)
1555.         self.assertEqual(response.status_code, 302)
1556.         login = self.client.post(login_url, self.adduser_login)
1557.         self.assertRedirects(login, self.index_url)
1558.         self.assertFalse(login.context)
1559.         self.client.get(reverse('admin:logout'))
1560. 
1561.         # Change User
1562.         response = self.client.get(self.index_url)
1563.         self.assertEqual(response.status_code, 302)
1564.         login = self.client.post(login_url, self.changeuser_login)
1565.         self.assertRedirects(login, self.index_url)
1566.         self.assertFalse(login.context)
1567.         self.client.get(reverse('admin:logout'))
1568. 
1569.         # Delete User
1570.         response = self.client.get(self.index_url)
1571.         self.assertEqual(response.status_code, 302)
1572.         login = self.client.post(login_url, self.deleteuser_login)
1573.         self.assertRedirects(login, self.index_url)
1574.         self.assertFalse(login.context)
1575.         self.client.get(reverse('admin:logout'))
1576. 
1577.         # Regular User should not be able to login.
1578.         response = self.client.get(self.index_url)
1579.         self.assertEqual(response.status_code, 302)
1580.         login = self.client.post(login_url, self.joepublic_login)
1581.         self.assertEqual(login.status_code, 200)
1582.         self.assertContains(login, ERROR_MESSAGE)
1583. 
1584.         # Requests without username should not return 500 errors.
1585.         response = self.client.get(self.index_url)
1586.         self.assertEqual(response.status_code, 302)
1587.         login = self.client.post(login_url, self.no_username_login)
1588.         self.assertEqual(login.status_code, 200)
1589.         self.assertFormError(login, 'form', 'username', ['This field is required.'])
1590. 
1591.     def test_login_redirect_for_direct_get(self):
1592.         """
1593.         Login redirect should be to the admin index page when going directly to
1594.         /admin/login/.
1595.         """
1596.         response = self.client.get(reverse('admin:login'))
1597.         self.assertEqual(response.status_code, 200)
1598.         self.assertEqual(response.context[REDIRECT_FIELD_NAME], reverse('admin:index'))
1599. 
1600.     def test_login_has_permission(self):
1601.         # Regular User should not be able to login.
1602.         response = self.client.get(reverse('has_permission_admin:index'))
1603.         self.assertEqual(response.status_code, 302)
1604.         login = self.client.post(reverse('has_permission_admin:login'), self.joepublic_login)
1605.         self.assertEqual(login.status_code, 200)
1606.         self.assertContains(login, 'permission denied')
1607. 
1608.         # User with permissions should be able to login.
1609.         response = self.client.get(reverse('has_permission_admin:index'))
1610.         self.assertEqual(response.status_code, 302)
1611.         login = self.client.post(reverse('has_permission_admin:login'), self.nostaff_login)
1612.         self.assertRedirects(login, reverse('has_permission_admin:index'))
1613.         self.assertFalse(login.context)
1614.         self.client.get(reverse('has_permission_admin:logout'))
1615. 
1616.         # Staff should be able to login.
1617.         response = self.client.get(reverse('has_permission_admin:index'))
1618.         self.assertEqual(response.status_code, 302)
1619.         login = self.client.post(reverse('has_permission_admin:login'), {
1620.             REDIRECT_FIELD_NAME: reverse('has_permission_admin:index'),
1621.             'username': 'deleteuser',
1622.             'password': 'secret',
1623.         })
1624.         self.assertRedirects(login, reverse('has_permission_admin:index'))
1625.         self.assertFalse(login.context)
1626.         self.client.get(reverse('has_permission_admin:logout'))
1627. 
1628.     def test_login_successfully_redirects_to_original_URL(self):
1629.         response = self.client.get(self.index_url)
1630.         self.assertEqual(response.status_code, 302)
1631.         query_string = 'the-answer=42'
1632.         redirect_url = '%s?%s' % (self.index_url, query_string)
1633.         new_next = {REDIRECT_FIELD_NAME: redirect_url}
1634.         post_data = self.super_login.copy()
1635.         post_data.pop(REDIRECT_FIELD_NAME)
1636.         login = self.client.post(
1637.             '%s?%s' % (reverse('admin:login'), urlencode(new_next)),
1638.             post_data)
1639.         self.assertRedirects(login, redirect_url)
1640. 
1641.     def test_double_login_is_not_allowed(self):
1642.         """Regression test for #19327"""
1643.         login_url = '%s?next=%s' % (reverse('admin:login'), reverse('admin:index'))
1644. 
1645.         response = self.client.get(self.index_url)
1646.         self.assertEqual(response.status_code, 302)
1647. 
1648.         # Establish a valid admin session
1649.         login = self.client.post(login_url, self.super_login)
1650.         self.assertRedirects(login, self.index_url)
1651.         self.assertFalse(login.context)
1652. 
1653.         # Logging in with non-admin user fails
1654.         login = self.client.post(login_url, self.joepublic_login)
1655.         self.assertEqual(login.status_code, 200)
1656.         self.assertContains(login, ERROR_MESSAGE)
1657. 
1658.         # Establish a valid admin session
1659.         login = self.client.post(login_url, self.super_login)
1660.         self.assertRedirects(login, self.index_url)
1661.         self.assertFalse(login.context)
1662. 
1663.         # Logging in with admin user while already logged in
1664.         login = self.client.post(login_url, self.super_login)
1665.         self.assertRedirects(login, self.index_url)
1666.         self.assertFalse(login.context)
1667.         self.client.get(reverse('admin:logout'))
1668. 
1669.     def test_login_page_notice_for_non_staff_users(self):
1670.         """
1671.         A logged-in non-staff user trying to access the admin index should be
1672.         presented with the login page and a hint indicating that the current
1673.         user doesn't have access to it.
1674.         """
1675.         hint_template = 'You are authenticated as {}'
1676. 
1677.         # Anonymous user should not be shown the hint
1678.         response = self.client.get(self.index_url, follow=True)
1679.         self.assertContains(response, 'login-form')
1680.         self.assertNotContains(response, hint_template.format(''), status_code=200)
1681. 
1682.         # Non-staff user should be shown the hint
1683.         self.client.force_login(self.nostaffuser)
1684.         response = self.client.get(self.index_url, follow=True)
1685.         self.assertContains(response, 'login-form')
1686.         self.assertContains(response, hint_template.format(self.nostaffuser.username), status_code=200)
1687. 
1688.     def test_add_view(self):
1689.         """Test add view restricts access and actually adds items."""
1690.         add_dict = {
1691.             'title': 'Døm ikke',
1692.             'content': '<p>great article</p>',
1693.             'date_0': '2008-03-18', 'date_1': '10:54:39',
1694.             'section': self.s1.pk,
1695.         }
1696.         # Change User should not have access to add articles
1697.         self.client.force_login(self.changeuser)
1698.         # make sure the view removes test cookie
1699.         self.assertIs(self.client.session.test_cookie_worked(), False)
1700.         response = self.client.get(reverse('admin:admin_views_article_add'))
1701.         self.assertEqual(response.status_code, 403)
1702.         # Try POST just to make sure
1703.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1704.         self.assertEqual(post.status_code, 403)
1705.         self.assertEqual(Article.objects.count(), 3)
1706.         self.client.get(reverse('admin:logout'))
1707. 
1708.         # View User should not have access to add articles
1709.         self.client.force_login(self.viewuser)
1710.         response = self.client.get(reverse('admin:admin_views_article_add'))
1711.         self.assertEqual(response.status_code, 403)
1712.         # Try POST just to make sure
1713.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1714.         self.assertEqual(post.status_code, 403)
1715.         self.assertEqual(Article.objects.count(), 3)
1716.         # Now give the user permission to add but not change.
1717.         self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('add', Article._meta)))
1718.         response = self.client.get(reverse('admin:admin_views_article_add'))
1719.         self.assertContains(response, '<input type="submit" value="Save and view" name="_continue">')
1720.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict, follow=False)
1721.         self.assertEqual(post.status_code, 302)
1722.         self.assertEqual(Article.objects.count(), 4)
1723.         article = Article.objects.latest('pk')
1724.         response = self.client.get(reverse('admin:admin_views_article_change', args=(article.pk,)))
1725.         self.assertContains(response, '<li class="success">The article “Døm ikke” was added successfully.</li>')
1726.         article.delete()
1727.         self.client.get(reverse('admin:logout'))
1728. 
1729.         # Add user may login and POST to add view, then redirect to admin root
1730.         self.client.force_login(self.adduser)
1731.         addpage = self.client.get(reverse('admin:admin_views_article_add'))
1732.         change_list_link = '&rsaquo; <a href="%s">Articles</a>' % reverse('admin:admin_views_article_changelist')
1733.         self.assertNotContains(
1734.             addpage, change_list_link,
1735.             msg_prefix='User restricted to add permission is given link to change list view in breadcrumbs.'
1736.         )
1737.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1738.         self.assertRedirects(post, self.index_url)
1739.         self.assertEqual(Article.objects.count(), 4)
1740.         self.assertEqual(len(mail.outbox), 2)
1741.         self.assertEqual(mail.outbox[0].subject, 'Greetings from a created object')
1742.         self.client.get(reverse('admin:logout'))
1743. 
1744.         # The addition was logged correctly
1745.         addition_log = LogEntry.objects.all()[0]
1746.         new_article = Article.objects.last()
1747.         article_ct = ContentType.objects.get_for_model(Article)
1748.         self.assertEqual(addition_log.user_id, self.adduser.pk)
1749.         self.assertEqual(addition_log.content_type_id, article_ct.pk)
1750.         self.assertEqual(addition_log.object_id, str(new_article.pk))
1751.         self.assertEqual(addition_log.object_repr, "Døm ikke")
1752.         self.assertEqual(addition_log.action_flag, ADDITION)
1753.         self.assertEqual(addition_log.get_change_message(), "Added.")
1754. 
1755.         # Super can add too, but is redirected to the change list view
1756.         self.client.force_login(self.superuser)
1757.         addpage = self.client.get(reverse('admin:admin_views_article_add'))
1758.         self.assertContains(
1759.             addpage, change_list_link,
1760.             msg_prefix='Unrestricted user is not given link to change list view in breadcrumbs.'
1761.         )
1762.         post = self.client.post(reverse('admin:admin_views_article_add'), add_dict)
1763.         self.assertRedirects(post, reverse('admin:admin_views_article_changelist'))
1764.         self.assertEqual(Article.objects.count(), 5)
1765.         self.client.get(reverse('admin:logout'))
1766. 
1767.         # 8509 - if a normal user is already logged in, it is possible
1768.         # to change user into the superuser without error
1769.         self.client.force_login(self.joepublicuser)
1770.         # Check and make sure that if user expires, data still persists
1771.         self.client.force_login(self.superuser)
1772.         # make sure the view removes test cookie
1773.         self.assertIs(self.client.session.test_cookie_worked(), False)
1774. 
1775.     @mock.patch('django.contrib.admin.options.InlineModelAdmin.has_change_permission')
1776.     def test_add_view_with_view_only_inlines(self, has_change_permission):
1777.         """User with add permission to a section but view-only for inlines."""
1778.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('add', Section._meta)))
1779.         self.client.force_login(self.viewuser)
1780.         # Valid POST creates a new section.
1781.         data = {
1782.             'name': 'New obj',
1783.             'article_set-TOTAL_FORMS': 0,
1784.             'article_set-INITIAL_FORMS': 0,
1785.         }
1786.         response = self.client.post(reverse('admin:admin_views_section_add'), data)
1787.         self.assertRedirects(response, reverse('admin:index'))
1788.         self.assertEqual(Section.objects.latest('id').name, data['name'])
1789.         # InlineModelAdmin.has_change_permission()'s obj argument is always
1790.         # None during object add.
1791.         self.assertEqual([obj for (request, obj), _ in has_change_permission.call_args_list], [None, None])
1792. 
1793.     def test_change_view(self):
1794.         """Change view should restrict access and allow users to edit items."""
1795.         change_dict = {
1796.             'title': 'Ikke fordømt',
1797.             'content': '<p>edited article</p>',
1798.             'date_0': '2008-03-18', 'date_1': '10:54:39',
1799.             'section': self.s1.pk,
1800.         }
1801.         article_change_url = reverse('admin:admin_views_article_change', args=(self.a1.pk,))
1802.         article_changelist_url = reverse('admin:admin_views_article_changelist')
1803. 
1804.         # add user should not be able to view the list of article or change any of them
1805.         self.client.force_login(self.adduser)
1806.         response = self.client.get(article_changelist_url)
1807.         self.assertEqual(response.status_code, 403)
1808.         response = self.client.get(article_change_url)
1809.         self.assertEqual(response.status_code, 403)
1810.         post = self.client.post(article_change_url, change_dict)
1811.         self.assertEqual(post.status_code, 403)
1812.         self.client.get(reverse('admin:logout'))
1813. 
1814.         # view user should be able to view the article but not change any of them
1815.         # (the POST can be sent, but no modification occurs)
1816.         self.client.force_login(self.viewuser)
1817.         response = self.client.get(article_changelist_url)
1818.         self.assertEqual(response.status_code, 200)
1819.         self.assertEqual(response.context['title'], 'Select article to view')
1820.         response = self.client.get(article_change_url)
1821.         self.assertEqual(response.status_code, 200)
1822.         self.assertEqual(response.context['title'], 'View article')
1823.         self.assertContains(response, '<label>Extra form field:</label>')
1824.         self.assertContains(response, '<a href="/test_admin/admin/admin_views/article/" class="closelink">Close</a>')
1825.         post = self.client.post(article_change_url, change_dict)
1826.         self.assertEqual(post.status_code, 302)
1827.         self.assertEqual(Article.objects.get(pk=self.a1.pk).content, '<p>Middle content</p>')
1828.         self.client.get(reverse('admin:logout'))
1829. 
1830.         # change user can view all items and edit them
1831.         self.client.force_login(self.changeuser)
1832.         response = self.client.get(article_changelist_url)
1833.         self.assertEqual(response.status_code, 200)
1834.         self.assertEqual(response.context['title'], 'Select article to change')
1835.         response = self.client.get(article_change_url)
1836.         self.assertEqual(response.status_code, 200)
1837.         self.assertEqual(response.context['title'], 'Change article')
1838.         post = self.client.post(article_change_url, change_dict)
1839.         self.assertRedirects(post, article_changelist_url)
1840.         self.assertEqual(Article.objects.get(pk=self.a1.pk).content, '<p>edited article</p>')
1841. 
1842.         # one error in form should produce singular error message, multiple errors plural
1843.         change_dict['title'] = ''
1844.         post = self.client.post(article_change_url, change_dict)
1845.         self.assertContains(
1846.             post, 'Please correct the error below.',
1847.             msg_prefix='Singular error message not found in response to post with one error'
1848.         )
1849. 
1850.         change_dict['content'] = ''
1851.         post = self.client.post(article_change_url, change_dict)
1852.         self.assertContains(
1853.             post, 'Please correct the errors below.',
1854.             msg_prefix='Plural error message not found in response to post with multiple errors'
1855.         )
1856.         self.client.get(reverse('admin:logout'))
1857. 
1858.         # Test redirection when using row-level change permissions. Refs #11513.
1859.         r1 = RowLevelChangePermissionModel.objects.create(id=1, name="odd id")
1860.         r2 = RowLevelChangePermissionModel.objects.create(id=2, name="even id")
1861.         r3 = RowLevelChangePermissionModel.objects.create(id=3, name='odd id mult 3')
1862.         r6 = RowLevelChangePermissionModel.objects.create(id=6, name='even id mult 3')
1863.         change_url_1 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r1.pk,))
1864.         change_url_2 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r2.pk,))
1865.         change_url_3 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r3.pk,))
1866.         change_url_6 = reverse('admin:admin_views_rowlevelchangepermissionmodel_change', args=(r6.pk,))
1867.         logins = [self.superuser, self.viewuser, self.adduser, self.changeuser, self.deleteuser]
1868.         for login_user in logins:
1869.             with self.subTest(login_user.username):
1870.                 self.client.force_login(login_user)
1871.                 response = self.client.get(change_url_1)
1872.                 self.assertEqual(response.status_code, 403)
1873.                 response = self.client.post(change_url_1, {'name': 'changed'})
1874.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=1).name, 'odd id')
1875.                 self.assertEqual(response.status_code, 403)
1876.                 response = self.client.get(change_url_2)
1877.                 self.assertEqual(response.status_code, 200)
1878.                 response = self.client.post(change_url_2, {'name': 'changed'})
1879.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=2).name, 'changed')
1880.                 self.assertRedirects(response, self.index_url)
1881.                 response = self.client.get(change_url_3)
1882.                 self.assertEqual(response.status_code, 200)
1883.                 response = self.client.post(change_url_3, {'name': 'changed'})
1884.                 self.assertRedirects(response, self.index_url)
1885.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=3).name, 'odd id mult 3')
1886.                 response = self.client.get(change_url_6)
1887.                 self.assertEqual(response.status_code, 200)
1888.                 response = self.client.post(change_url_6, {'name': 'changed'})
1889.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=6).name, 'changed')
1890.                 self.assertRedirects(response, self.index_url)
1891. 
1892.                 self.client.get(reverse('admin:logout'))
1893. 
1894.         for login_user in [self.joepublicuser, self.nostaffuser]:
1895.             with self.subTest(login_user.username):
1896.                 self.client.force_login(login_user)
1897.                 response = self.client.get(change_url_1, follow=True)
1898.                 self.assertContains(response, 'login-form')
1899.                 response = self.client.post(change_url_1, {'name': 'changed'}, follow=True)
1900.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=1).name, 'odd id')
1901.                 self.assertContains(response, 'login-form')
1902.                 response = self.client.get(change_url_2, follow=True)
1903.                 self.assertContains(response, 'login-form')
1904.                 response = self.client.post(change_url_2, {'name': 'changed again'}, follow=True)
1905.                 self.assertEqual(RowLevelChangePermissionModel.objects.get(id=2).name, 'changed')
1906.                 self.assertContains(response, 'login-form')
1907.                 self.client.get(reverse('admin:logout'))
1908. 
1909.     def test_change_view_without_object_change_permission(self):
1910.         """
1911.         The object should be read-only if the user has permission to view it
1912.         and change objects of that type but not to change the current object.
1913.         """
1914.         change_url = reverse('admin9:admin_views_article_change', args=(self.a1.pk,))
1915.         self.client.force_login(self.viewuser)
1916.         response = self.client.get(change_url)
1917.         self.assertEqual(response.status_code, 200)
1918.         self.assertEqual(response.context['title'], 'View article')
1919.         self.assertContains(response, '<a href="/test_admin/admin9/admin_views/article/" class="closelink">Close</a>')
1920. 
1921.     def test_change_view_post_without_object_change_permission(self):
1922.         """A POST redirects to changelist without modifications."""
1923.         change_dict = {
1924.             'title': 'Ikke fordømt',
1925.             'content': '<p>edited article</p>',
1926.             'date_0': '2008-03-18', 'date_1': '10:54:39',
1927.             'section': self.s1.pk,
1928.         }
1929.         change_url = reverse('admin10:admin_views_article_change', args=(self.a1.pk,))
1930.         changelist_url = reverse('admin10:admin_views_article_changelist')
1931.         self.client.force_login(self.viewuser)
1932.         response = self.client.post(change_url, change_dict)
1933.         self.assertRedirects(response, changelist_url)
1934.         self.assertEqual(Article.objects.get(pk=self.a1.pk).content, '<p>Middle content</p>')
1935. 
1936.     def test_change_view_save_as_new(self):
1937.         """
1938.         'Save as new' should raise PermissionDenied for users without the 'add'
1939.         permission.
1940.         """
1941.         change_dict_save_as_new = {
1942.             '_saveasnew': 'Save as new',
1943.             'title': 'Ikke fordømt',
1944.             'content': '<p>edited article</p>',
1945.             'date_0': '2008-03-18', 'date_1': '10:54:39',
1946.             'section': self.s1.pk,
1947.         }
1948.         article_change_url = reverse('admin:admin_views_article_change', args=(self.a1.pk,))
1949. 
1950.         # Add user can perform "Save as new".
1951.         article_count = Article.objects.count()
1952.         self.client.force_login(self.adduser)
1953.         post = self.client.post(article_change_url, change_dict_save_as_new)
1954.         self.assertRedirects(post, self.index_url)
1955.         self.assertEqual(Article.objects.count(), article_count + 1)
1956.         self.client.logout()
1957. 
1958.         # Change user cannot perform "Save as new" (no 'add' permission).
1959.         article_count = Article.objects.count()
1960.         self.client.force_login(self.changeuser)
1961.         post = self.client.post(article_change_url, change_dict_save_as_new)
1962.         self.assertEqual(post.status_code, 403)
1963.         self.assertEqual(Article.objects.count(), article_count)
1964. 
1965.         # User with both add and change permissions should be redirected to the
1966.         # change page for the newly created object.
1967.         article_count = Article.objects.count()
1968.         self.client.force_login(self.superuser)
1969.         post = self.client.post(article_change_url, change_dict_save_as_new)
1970.         self.assertEqual(Article.objects.count(), article_count + 1)
1971.         new_article = Article.objects.latest('id')
1972.         self.assertRedirects(post, reverse('admin:admin_views_article_change', args=(new_article.pk,)))
1973. 
1974.     def test_change_view_with_view_only_inlines(self):
1975.         """
1976.         User with change permission to a section but view-only for inlines.
1977.         """
1978.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
1979.         self.client.force_login(self.viewuser)
1980.         # GET shows inlines.
1981.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
1982.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
1983.         formset = response.context['inline_admin_formsets'][0]
1984.         self.assertEqual(len(formset.forms), 3)
1985.         # Valid POST changes the name.
1986.         data = {
1987.             'name': 'Can edit name with view-only inlines',
1988.             'article_set-TOTAL_FORMS': 3,
1989.             'article_set-INITIAL_FORMS': 3
1990.         }
1991.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
1992.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
1993.         self.assertEqual(Section.objects.get(pk=self.s1.pk).name, data['name'])
1994.         # Invalid POST reshows inlines.
1995.         del data['name']
1996.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
1997.         self.assertEqual(response.status_code, 200)
1998.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
1999.         formset = response.context['inline_admin_formsets'][0]
2000.         self.assertEqual(len(formset.forms), 3)
2001. 
2002.     def test_change_view_with_view_and_add_inlines(self):
2003.         """User has view and add permissions on the inline model."""
2004.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
2005.         self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('add', Article._meta)))
2006.         self.client.force_login(self.viewuser)
2007.         # GET shows inlines.
2008.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
2009.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
2010.         formset = response.context['inline_admin_formsets'][0]
2011.         self.assertEqual(len(formset.forms), 6)
2012.         # Valid POST creates a new article.
2013.         data = {
2014.             'name': 'Can edit name with view-only inlines',
2015.             'article_set-TOTAL_FORMS': 6,
2016.             'article_set-INITIAL_FORMS': 3,
2017.             'article_set-3-id': [''],
2018.             'article_set-3-title': ['A title'],
2019.             'article_set-3-content': ['Added content'],
2020.             'article_set-3-date_0': ['2008-3-18'],
2021.             'article_set-3-date_1': ['11:54:58'],
2022.             'article_set-3-section': [str(self.s1.pk)],
2023.         }
2024.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2025.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
2026.         self.assertEqual(Section.objects.get(pk=self.s1.pk).name, data['name'])
2027.         self.assertEqual(Article.objects.count(), 4)
2028.         # Invalid POST reshows inlines.
2029.         del data['name']
2030.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2031.         self.assertEqual(response.status_code, 200)
2032.         self.assertEqual(len(response.context['inline_admin_formsets']), 1)
2033.         formset = response.context['inline_admin_formsets'][0]
2034.         self.assertEqual(len(formset.forms), 6)
2035. 
2036.     def test_change_view_with_view_and_delete_inlines(self):
2037.         """User has view and delete permissions on the inline model."""
2038.         self.viewuser.user_permissions.add(get_perm(Section, get_permission_codename('change', Section._meta)))
2039.         self.client.force_login(self.viewuser)
2040.         data = {
2041.             'name': 'Name is required.',
2042.             'article_set-TOTAL_FORMS': 6,
2043.             'article_set-INITIAL_FORMS': 3,
2044.             'article_set-0-id': [str(self.a1.pk)],
2045.             'article_set-0-DELETE': ['on'],
2046.         }
2047.         # Inline POST details are ignored without delete permission.
2048.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2049.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
2050.         self.assertEqual(Article.objects.count(), 3)
2051.         # Deletion successful when delete permission is added.
2052.         self.viewuser.user_permissions.add(get_perm(Article, get_permission_codename('delete', Article._meta)))
2053.         data = {
2054.             'name': 'Name is required.',
2055.             'article_set-TOTAL_FORMS': 6,
2056.             'article_set-INITIAL_FORMS': 3,
2057.             'article_set-0-id': [str(self.a1.pk)],
2058.             'article_set-0-DELETE': ['on'],
2059.         }
2060.         response = self.client.post(reverse('admin:admin_views_section_change', args=(self.s1.pk,)), data)
2061.         self.assertRedirects(response, reverse('admin:admin_views_section_changelist'))
2062.         self.assertEqual(Article.objects.count(), 2)
2063. 
2064.     def test_delete_view(self):
2065.         """Delete view should restrict access and actually delete items."""
2066.         delete_dict = {'post': 'yes'}
2067.         delete_url = reverse('admin:admin_views_article_delete', args=(self.a1.pk,))
2068. 
2069.         # add user should not be able to delete articles
2070.         self.client.force_login(self.adduser)
2071.         response = self.client.get(delete_url)
2072.         self.assertEqual(response.status_code, 403)
2073.         post = self.client.post(delete_url, delete_dict)
2074.         self.assertEqual(post.status_code, 403)
2075.         self.assertEqual(Article.objects.count(), 3)
2076.         self.client.logout()
2077. 
2078.         # view user should not be able to delete articles
2079.         self.client.force_login(self.viewuser)
2080.         response = self.client.get(delete_url)
2081.         self.assertEqual(response.status_code, 403)
2082.         post = self.client.post(delete_url, delete_dict)
2083.         self.assertEqual(post.status_code, 403)
2084.         self.assertEqual(Article.objects.count(), 3)
2085.         self.client.logout()
2086. 
2087.         # Delete user can delete
2088.         self.client.force_login(self.deleteuser)
2089.         response = self.client.get(reverse('admin:admin_views_section_delete', args=(self.s1.pk,)))
2090.         self.assertContains(response, "<h2>Summary</h2>")
2091.         self.assertContains(response, "<li>Articles: 3</li>")
2092.         # test response contains link to related Article
2093.         self.assertContains(response, "admin_views/article/%s/" % self.a1.pk)
2094. 
2095.         response = self.client.get(delete_url)
2096.         self.assertContains(response, "admin_views/article/%s/" % self.a1.pk)
2097.         self.assertContains(response, "<h2>Summary</h2>")
2098.         self.assertContains(response, "<li>Articles: 1</li>")
2099.         self.assertEqual(response.status_code, 200)
2100.         post = self.client.post(delete_url, delete_dict)
2101.         self.assertRedirects(post, self.index_url)
2102.         self.assertEqual(Article.objects.count(), 2)
2103.         self.assertEqual(len(mail.outbox), 1)
2104.         self.assertEqual(mail.outbox[0].subject, 'Greetings from a deleted object')
2105.         article_ct = ContentType.objects.get_for_model(Article)
2106.         logged = LogEntry.objects.get(content_type=article_ct, action_flag=DELETION)
2107.         self.assertEqual(logged.object_id, str(self.a1.pk))
2108. 
2109.     def test_delete_view_with_no_default_permissions(self):
2110.         """
2111.         The delete view allows users to delete collected objects without a
2112.         'delete' permission (ReadOnlyPizza.Meta.default_permissions is empty).
2113.         """
2114.         pizza = ReadOnlyPizza.objects.create(name='Double Cheese')
2115.         delete_url = reverse('admin:admin_views_readonlypizza_delete', args=(pizza.pk,))
2116.         self.client.force_login(self.adduser)
2117.         response = self.client.get(delete_url)
2118.         self.assertContains(response, 'admin_views/readonlypizza/%s/' % pizza.pk)
2119.         self.assertContains(response, '<h2>Summary</h2>')
2120.         self.assertContains(response, '<li>Read only pizzas: 1</li>')
2121.         self.assertEqual(response.status_code, 200)
2122.         post = self.client.post(delete_url, {'post': 'yes'})
2123.         self.assertRedirects(post, reverse('admin:admin_views_readonlypizza_changelist'))
2124.         self.assertEqual(ReadOnlyPizza.objects.count(), 0)
2125. 
2126.     def test_delete_view_nonexistent_obj(self):
2127.         self.client.force_login(self.deleteuser)
2128.         url = reverse('admin:admin_views_article_delete', args=('nonexistent',))
2129.         response = self.client.get(url, follow=True)
2130.         self.assertRedirects(response, reverse('admin:index'))
2131.         self.assertEqual(
2132.             [m.message for m in response.context['messages']],
2133.             ['article with ID “nonexistent” doesn’t exist. Perhaps it was deleted?']
2134.         )
2135. 
2136.     def test_history_view(self):
2137.         """History view should restrict access."""
2138.         # add user should not be able to view the list of article or change any of them
2139.         self.client.force_login(self.adduser)
2140.         response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
2141.         self.assertEqual(response.status_code, 403)
2142.         self.client.get(reverse('admin:logout'))
2143. 
2144.         # view user can view all items
2145.         self.client.force_login(self.viewuser)
2146.         response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
2147.         self.assertEqual(response.status_code, 200)
2148.         self.client.get(reverse('admin:logout'))
2149. 
2150.         # change user can view all items and edit them
2151.         self.client.force_login(self.changeuser)
2152.         response = self.client.get(reverse('admin:admin_views_article_history', args=(self.a1.pk,)))
2153.         self.assertEqual(response.status_code, 200)
2154. 
2155.         # Test redirection when using row-level change permissions. Refs #11513.
2156.         rl1 = RowLevelChangePermissionModel.objects.create(name="odd id")
2157.         rl2 = RowLevelChangePermissionModel.objects.create(name="even id")
2158.         logins = [self.superuser, self.viewuser, self.adduser, self.changeuser, self.deleteuser]
2159.         for login_user in logins:
2160.             with self.subTest(login_user.username):
2161.                 self.client.force_login(login_user)
2162.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl1.pk,))
2163.                 response = self.client.get(url)
2164.                 self.assertEqual(response.status_code, 403)
2165. 
2166.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl2.pk,))
2167.                 response = self.client.get(url)
2168.                 self.assertEqual(response.status_code, 200)
2169. 
2170.                 self.client.get(reverse('admin:logout'))
2171. 
2172.         for login_user in [self.joepublicuser, self.nostaffuser]:
2173.             with self.subTest(login_user.username):
2174.                 self.client.force_login(login_user)
2175.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl1.pk,))
2176.                 response = self.client.get(url, follow=True)
2177.                 self.assertContains(response, 'login-form')
2178.                 url = reverse('admin:admin_views_rowlevelchangepermissionmodel_history', args=(rl2.pk,))
2179.                 response = self.client.get(url, follow=True)
2180.                 self.assertContains(response, 'login-form')
2181. 
2182.                 self.client.get(reverse('admin:logout'))
2183. 
2184.     def test_history_view_bad_url(self):
2185.         self.client.force_login(self.changeuser)
2186.         response = self.client.get(reverse('admin:admin_views_article_history', args=('foo',)), follow=True)
2187.         self.assertRedirects(response, reverse('admin:index'))
2188.         self.assertEqual(
2189.             [m.message for m in response.context['messages']],
2190.             ['article with ID “foo” doesn’t exist. Perhaps it was deleted?']
2191.         )
2192. 
2193.     def test_conditionally_show_add_section_link(self):
2194.         """
2195.         The foreign key widget should only show the "add related" button if the
2196.         user has permission to add that related item.
2197.         """
2198.         self.client.force_login(self.adduser)
2199.         # The user can't add sections yet, so they shouldn't see the "add section" link.
2200.         url = reverse('admin:admin_views_article_add')
2201.         add_link_text = 'add_id_section'
2202.         response = self.client.get(url)
2203.         self.assertNotContains(response, add_link_text)
2204.         # Allow the user to add sections too. Now they can see the "add section" link.
2205.         user = User.objects.get(username='adduser')
2206.         perm = get_perm(Section, get_permission_codename('add', Section._meta))
2207.         user.user_permissions.add(perm)
2208.         response = self.client.get(url)
2209.         self.assertContains(response, add_link_text)
2210. 
2211.     def test_conditionally_show_change_section_link(self):
2212.         """
2213.         The foreign key widget should only show the "change related" button if
2214.         the user has permission to change that related item.
2215.         """
2216.         def get_change_related(response):
2217.             return response.context['adminform'].form.fields['section'].widget.can_change_related
2218. 
2219.         self.client.force_login(self.adduser)
2220.         # The user can't change sections yet, so they shouldn't see the "change section" link.
2221.         url = reverse('admin:admin_views_article_add')
2222.         change_link_text = 'change_id_section'
2223.         response = self.client.get(url)
2224.         self.assertFalse(get_change_related(response))
2225.         self.assertNotContains(response, change_link_text)
2226.         # Allow the user to change sections too. Now they can see the "change section" link.
2227.         user = User.objects.get(username='adduser')
2228.         perm = get_perm(Section, get_permission_codename('change', Section._meta))
2229.         user.user_permissions.add(perm)
2230.         response = self.client.get(url)
2231.         self.assertTrue(get_change_related(response))
2232.         self.assertContains(response, change_link_text)
2233. 
2234.     def test_conditionally_show_delete_section_link(self):
2235.         """
2236.         The foreign key widget should only show the "delete related" button if
2237.         the user has permission to delete that related item.
2238.         """
2239.         def get_delete_related(response):
2240.             return response.context['adminform'].form.fields['sub_section'].widget.can_delete_related
2241. 
2242.         self.client.force_login(self.adduser)
2243.         # The user can't delete sections yet, so they shouldn't see the "delete section" link.
2244.         url = reverse('admin:admin_views_article_add')
2245.         delete_link_text = 'delete_id_sub_section'
2246.         response = self.client.get(url)
2247.         self.assertFalse(get_delete_related(response))
2248.         self.assertNotContains(response, delete_link_text)
2249.         # Allow the user to delete sections too. Now they can see the "delete section" link.
2250.         user = User.objects.get(username='adduser')
2251.         perm = get_perm(Section, get_permission_codename('delete', Section._meta))
2252.         user.user_permissions.add(perm)
2253.         response = self.client.get(url)
2254.         self.assertTrue(get_delete_related(response))
2255.         self.assertContains(response, delete_link_text)
2256. 
2257.     def test_disabled_permissions_when_logged_in(self):
2258.         self.client.force_login(self.superuser)
2259.         superuser = User.objects.get(username='super')
2260.         superuser.is_active = False
2261.         superuser.save()
2262. 
2263.         response = self.client.get(self.index_url, follow=True)
2264.         self.assertContains(response, 'id="login-form"')
2265.         self.assertNotContains(response, 'Log out')
2266. 
2267.         response = self.client.get(reverse('secure_view'), follow=True)
2268.         self.assertContains(response, 'id="login-form"')
2269. 
2270.     def test_disabled_staff_permissions_when_logged_in(self):
2271.         self.client.force_login(self.superuser)
2272.         superuser = User.objects.get(username='super')
2273.         superuser.is_staff = False
2274.         superuser.save()
2275. 
2276.         response = self.client.get(self.index_url, follow=True)
2277.         self.assertContains(response, 'id="login-form"')
2278.         self.assertNotContains(response, 'Log out')
2279. 
2280.         response = self.client.get(reverse('secure_view'), follow=True)
2281.         self.assertContains(response, 'id="login-form"')
2282. 
2283.     def test_app_list_permissions(self):
2284.         """
2285.         If a user has no module perms, the app list returns a 404.
2286.         """
2287.         opts = Article._meta
2288.         change_user = User.objects.get(username='changeuser')
2289.         permission = get_perm(Article, get_permission_codename('change', opts))
2290. 
2291.         self.client.force_login(self.changeuser)
2292. 
2293.         # the user has no module permissions
2294.         change_user.user_permissions.remove(permission)
2295.         response = self.client.get(reverse('admin:app_list', args=('admin_views',)))
2296.         self.assertEqual(response.status_code, 404)
2297. 
2298.         # the user now has module permissions
2299.         change_user.user_permissions.add(permission)
2300.         response = self.client.get(reverse('admin:app_list', args=('admin_views',)))
2301.         self.assertEqual(response.status_code, 200)
2302. 
2303.     def test_shortcut_view_only_available_to_staff(self):
2304.         """
2305.         Only admin users should be able to use the admin shortcut view.
2306.         """
2307.         model_ctype = ContentType.objects.get_for_model(ModelWithStringPrimaryKey)
2308.         obj = ModelWithStringPrimaryKey.objects.create(string_pk='foo')
2309.         shortcut_url = reverse('admin:view_on_site', args=(model_ctype.pk, obj.pk))
2310. 
2311.         # Not logged in: we should see the login page.
2312.         response = self.client.get(shortcut_url, follow=True)
2313.         self.assertTemplateUsed(response, 'admin/login.html')
2314. 
2315.         # Logged in? Redirect.
2316.         self.client.force_login(self.superuser)
2317.         response = self.client.get(shortcut_url, follow=False)
2318.         # Can't use self.assertRedirects() because User.get_absolute_url() is silly.
2319.         self.assertEqual(response.status_code, 302)
2320.         # Domain may depend on contrib.sites tests also run
2321.         self.assertRegex(response.url, 'http://(testserver|example.com)/dummy/foo/')
2322. 
2323.     def test_has_module_permission(self):
2324.         """
2325.         has_module_permission() returns True for all users who
2326.         have any permission for that module (add, change, or delete), so that
2327.         the module is displayed on the admin index page.
2328.         """
2329.         self.client.force_login(self.superuser)
2330.         response = self.client.get(self.index_url)
2331.         self.assertContains(response, 'admin_views')
2332.         self.assertContains(response, 'Articles')
2333.         self.client.logout()
2334. 
2335.         self.client.force_login(self.viewuser)
2336.         response = self.client.get(self.index_url)
2337.         self.assertContains(response, 'admin_views')
2338.         self.assertContains(response, 'Articles')
2339.         self.client.logout()
2340. 
2341.         self.client.force_login(self.adduser)
2342.         response = self.client.get(self.index_url)
2343.         self.assertContains(response, 'admin_views')
2344.         self.assertContains(response, 'Articles')
2345.         self.client.logout()
2346. 
2347.         self.client.force_login(self.changeuser)
2348.         response = self.client.get(self.index_url)
2349.         self.assertContains(response, 'admin_views')
2350.         self.assertContains(response, 'Articles')
2351.         self.client.logout()
2352. 
2353.         self.client.force_login(self.deleteuser)
2354.         response = self.client.get(self.index_url)
2355.         self.assertContains(response, 'admin_views')
2356.         self.assertContains(response, 'Articles')
2357. 
2358.     def test_overriding_has_module_permission(self):
2359.         """
2360.         If has_module_permission() always returns False, the module shouldn't
2361.         be displayed on the admin index page for any users.
2362.         """
2363.         articles = Article._meta.verbose_name_plural.title()
2364.         sections = Section._meta.verbose_name_plural.title()
2365.         index_url = reverse('admin7:index')
2366. 
2367.         self.client.force_login(self.superuser)
2368.         response = self.client.get(index_url)
2369.         self.assertContains(response, sections)
2370.         self.assertNotContains(response, articles)
2371.         self.client.logout()
2372. 
2373.         self.client.force_login(self.viewuser)
2374.         response = self.client.get(index_url)
2375.         self.assertNotContains(response, 'admin_views')
2376.         self.assertNotContains(response, articles)
2377.         self.client.logout()
2378. 
2379.         self.client.force_login(self.adduser)
2380.         response = self.client.get(index_url)
2381.         self.assertNotContains(response, 'admin_views')
2382.         self.assertNotContains(response, articles)
2383.         self.client.logout()
2384. 
2385.         self.client.force_login(self.changeuser)
2386.         response = self.client.get(index_url)
2387.         self.assertNotContains(response, 'admin_views')
2388.         self.assertNotContains(response, articles)
2389.         self.client.logout()
2390. 
2391.         self.client.force_login(self.deleteuser)
2392.         response = self.client.get(index_url)
2393.         self.assertNotContains(response, articles)
2394. 
2395.         # The app list displays Sections but not Articles as the latter has
2396.         # ModelAdmin.has_module_permission() = False.
2397.         self.client.force_login(self.superuser)
2398.         response = self.client.get(reverse('admin7:app_list', args=('admin_views',)))
2399.         self.assertContains(response, sections)
2400.         self.assertNotContains(response, articles)
2401. 
2402.     def test_post_save_message_no_forbidden_links_visible(self):
2403.         """
2404.         Post-save message shouldn't contain a link to the change form if the
2405.         user doesn't have the change permission.
2406.         """
2407.         self.client.force_login(self.adduser)
2408.         # Emulate Article creation for user with add-only permission.
2409.         post_data = {
2410.             "title": "Fun & games",
2411.             "content": "Some content",
2412.             "date_0": "2015-10-31",
2413.             "date_1": "16:35:00",
2414.             "_save": "Save",
2415.         }
2416.         response = self.client.post(reverse('admin:admin_views_article_add'), post_data, follow=True)
2417.         self.assertContains(
2418.             response,
2419.             '<li class="success">The article “Fun &amp; games” was added successfully.</li>',
2420.             html=True
2421.         )
2422. 
2423. 
2424. @override_settings(
2425.     ROOT_URLCONF='admin_views.urls',
2426.     TEMPLATES=[{
2427.         'BACKEND': 'django.template.backends.django.DjangoTemplates',
2428.         'APP_DIRS': True,
2429.         'OPTIONS': {
2430.             'context_processors': [
2431.                 'django.contrib.auth.context_processors.auth',
2432.                 'django.contrib.messages.context_processors.messages',
2433.             ],
2434.         },
2435.     }],
2436. )
2437. class AdminViewProxyModelPermissionsTests(TestCase):
2438.     """Tests for proxy models permissions in the admin."""
2439. 
2440.     @classmethod
2441.     def setUpTestData(cls):
2442.         cls.viewuser = User.objects.create_user(username='viewuser', password='secret', is_staff=True)
2443.         cls.adduser = User.objects.create_user(username='adduser', password='secret', is_staff=True)
2444.         cls.changeuser = User.objects.create_user(username='changeuser', password='secret', is_staff=True)
2445.         cls.deleteuser = User.objects.create_user(username='deleteuser', password='secret', is_staff=True)
2446.         # Setup permissions.
2447.         opts = UserProxy._meta
2448.         cls.viewuser.user_permissions.add(get_perm(UserProxy, get_permission_codename('view', opts)))
2449.         cls.adduser.user_permissions.add(get_perm(UserProxy, get_permission_codename('add', opts)))
2450.         cls.changeuser.user_permissions.add(get_perm(UserProxy, get_permission_codename('change', opts)))
2451.         cls.deleteuser.user_permissions.add(get_perm(UserProxy, get_permission_codename('delete', opts)))
2452.         # UserProxy instances.
2453.         cls.user_proxy = UserProxy.objects.create(username='user_proxy', password='secret')
2454. 
2455.     def test_add(self):
2456.         self.client.force_login(self.adduser)
2457.         url = reverse('admin:admin_views_userproxy_add')
2458.         data = {
2459.             'username': 'can_add',
2460.             'password': 'secret',
2461.             'date_joined_0': '2019-01-15',
2462.             'date_joined_1': '16:59:10',
2463.         }
2464.         response = self.client.post(url, data, follow=True)
2465.         self.assertEqual(response.status_code, 200)
2466.         self.assertTrue(UserProxy.objects.filter(username='can_add').exists())
2467. 
2468.     def test_view(self):
2469.         self.client.force_login(self.viewuser)
2470.         response = self.client.get(reverse('admin:admin_views_userproxy_changelist'))
2471.         self.assertContains(response, '<h1>Select user proxy to view</h1>')
2472.         self.assertEqual(response.status_code, 200)
2473.         response = self.client.get(reverse('admin:admin_views_userproxy_change', args=(self.user_proxy.pk,)))
2474.         self.assertContains(response, '<h1>View user proxy</h1>')
2475.         self.assertContains(response, '<div class="readonly">user_proxy</div>')
2476. 
2477.     def test_change(self):
2478.         self.client.force_login(self.changeuser)
2479.         data = {
2480.             'password': self.user_proxy.password,
2481.             'username': self.user_proxy.username,
2482.             'date_joined_0': self.user_proxy.date_joined.strftime('%Y-%m-%d'),
2483.             'date_joined_1': self.user_proxy.date_joined.strftime('%H:%M:%S'),
2484.             'first_name': 'first_name',
2485.         }
2486.         url = reverse('admin:admin_views_userproxy_change', args=(self.user_proxy.pk,))
2487.         response = self.client.post(url, data)
2488.         self.assertRedirects(response, reverse('admin:admin_views_userproxy_changelist'))
2489.         self.assertEqual(UserProxy.objects.get(pk=self.user_proxy.pk).first_name, 'first_name')
2490. 
2491.     def test_delete(self):
2492.         self.client.force_login(self.deleteuser)
2493.         url = reverse('admin:admin_views_userproxy_delete', args=(self.user_proxy.pk,))
2494.         response = self.client.post(url, {'post': 'yes'}, follow=True)
2495.         self.assertEqual(response.status_code, 200)
2496.         self.assertFalse(UserProxy.objects.filter(pk=self.user_proxy.pk).exists())
2497. 
2498. 
2499. @override_settings(ROOT_URLCONF='admin_views.urls')
2500. class AdminViewsNoUrlTest(TestCase):
2501.     """Regression test for #17333"""
2502. 
2503.     @classmethod
2504.     def setUpTestData(cls):
2505.         # User who can change Reports
2506.         cls.changeuser = User.objects.create_user(username='changeuser', password='secret', is_staff=True)
2507.         cls.changeuser.user_permissions.add(get_perm(Report, get_permission_codename('change', Report._meta)))
2508. 
2509.     def test_no_standard_modeladmin_urls(self):
2510.         """Admin index views don't break when user's ModelAdmin removes standard urls"""
2511.         self.client.force_login(self.changeuser)
2512.         r = self.client.get(reverse('admin:index'))
2513.         # we shouldn't get a 500 error caused by a NoReverseMatch
2514.         self.assertEqual(r.status_code, 200)
2515.         self.client.get(reverse('admin:logout'))
2516. 
2517. 
2518. @skipUnlessDBFeature('can_defer_constraint_checks')
2519. @override_settings(ROOT_URLCONF='admin_views.urls')
2520. class AdminViewDeletedObjectsTest(TestCase):
2521. 
2522.     @classmethod
2523.     def setUpTestData(cls):
2524.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
2525.         cls.deleteuser = User.objects.create_user(username='deleteuser', password='secret', is_staff=True)
2526.         cls.s1 = Section.objects.create(name='Test section')
2527.         cls.a1 = Article.objects.create(
2528.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
2529.         )
2530.         cls.a2 = Article.objects.create(
2531.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
2532.         )
2533.         cls.a3 = Article.objects.create(
2534.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
2535.         )
2536.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
2537. 
2538.         cls.v1 = Villain.objects.create(name='Adam')
2539.         cls.v2 = Villain.objects.create(name='Sue')
2540.         cls.sv1 = SuperVillain.objects.create(name='Bob')
2541.         cls.pl1 = Plot.objects.create(name='World Domination', team_leader=cls.v1, contact=cls.v2)
2542.         cls.pl2 = Plot.objects.create(name='World Peace', team_leader=cls.v2, contact=cls.v2)
2543.         cls.pl3 = Plot.objects.create(name='Corn Conspiracy', team_leader=cls.v1, contact=cls.v1)
2544.         cls.pd1 = PlotDetails.objects.create(details='almost finished', plot=cls.pl1)
2545.         cls.sh1 = SecretHideout.objects.create(location='underground bunker', villain=cls.v1)
2546.         cls.sh2 = SecretHideout.objects.create(location='floating castle', villain=cls.sv1)
2547.         cls.ssh1 = SuperSecretHideout.objects.create(location='super floating castle!', supervillain=cls.sv1)
2548.         cls.cy1 = CyclicOne.objects.create(name='I am recursive', two_id=1)
2549.         cls.cy2 = CyclicTwo.objects.create(name='I am recursive too', one_id=1)
2550. 
2551.     def setUp(self):
2552.         self.client.force_login(self.superuser)
2553. 
2554.     def test_nesting(self):
2555.         """
2556.         Objects should be nested to display the relationships that
2557.         cause them to be scheduled for deletion.
2558.         """
2559.         pattern = re.compile(
2560.             r'<li>Plot: <a href="%s">World Domination</a>\s*<ul>\s*'
2561.             r'<li>Plot details: <a href="%s">almost finished</a>' % (
2562.                 reverse('admin:admin_views_plot_change', args=(self.pl1.pk,)),
2563.                 reverse('admin:admin_views_plotdetails_change', args=(self.pd1.pk,)),
2564.             )
2565.         )
2566.         response = self.client.get(reverse('admin:admin_views_villain_delete', args=(self.v1.pk,)))
2567.         self.assertRegex(response.content.decode(), pattern)
2568. 
2569.     def test_cyclic(self):
2570.         """
2571.         Cyclic relationships should still cause each object to only be
2572.         listed once.
2573.         """
2574.         one = '<li>Cyclic one: <a href="%s">I am recursive</a>' % (
2575.             reverse('admin:admin_views_cyclicone_change', args=(self.cy1.pk,)),
2576.         )
2577.         two = '<li>Cyclic two: <a href="%s">I am recursive too</a>' % (
2578.             reverse('admin:admin_views_cyclictwo_change', args=(self.cy2.pk,)),
2579.         )
2580.         response = self.client.get(reverse('admin:admin_views_cyclicone_delete', args=(self.cy1.pk,)))
2581. 
2582.         self.assertContains(response, one, 1)
2583.         self.assertContains(response, two, 1)
2584. 
2585.     def test_perms_needed(self):
2586.         self.client.logout()
2587.         delete_user = User.objects.get(username='deleteuser')
2588.         delete_user.user_permissions.add(get_perm(Plot, get_permission_codename('delete', Plot._meta)))
2589. 
2590.         self.client.force_login(self.deleteuser)
2591.         response = self.client.get(reverse('admin:admin_views_plot_delete', args=(self.pl1.pk,)))
2592.         self.assertContains(response, "your account doesn't have permission to delete the following types of objects")
2593.         self.assertContains(response, "<li>plot details</li>")
2594. 
2595.     def test_protected(self):
2596.         q = Question.objects.create(question="Why?")
2597.         a1 = Answer.objects.create(question=q, answer="Because.")
2598.         a2 = Answer.objects.create(question=q, answer="Yes.")
2599. 
2600.         response = self.client.get(reverse('admin:admin_views_question_delete', args=(q.pk,)))
2601.         self.assertContains(response, "would require deleting the following protected related objects")
2602.         self.assertContains(
2603.             response,
2604.             '<li>Answer: <a href="%s">Because.</a></li>' % reverse('admin:admin_views_answer_change', args=(a1.pk,))
2605.         )
2606.         self.assertContains(
2607.             response,
2608.             '<li>Answer: <a href="%s">Yes.</a></li>' % reverse('admin:admin_views_answer_change', args=(a2.pk,))
2609.         )
2610. 
2611.     def test_post_delete_protected(self):
2612.         """
2613.         A POST request to delete protected objects should display the page
2614.         which says the deletion is prohibited.
2615.         """
2616.         q = Question.objects.create(question='Why?')
2617.         Answer.objects.create(question=q, answer='Because.')
2618. 
2619.         response = self.client.post(reverse('admin:admin_views_question_delete', args=(q.pk,)), {'post': 'yes'})
2620.         self.assertEqual(Question.objects.count(), 1)
2621.         self.assertContains(response, "would require deleting the following protected related objects")
2622. 
2623.     def test_restricted(self):
2624.         album = Album.objects.create(title='Amaryllis')
2625.         song = Song.objects.create(album=album, name='Unity')
2626.         response = self.client.get(reverse('admin:admin_views_album_delete', args=(album.pk,)))
2627.         self.assertContains(
2628.             response,
2629.             'would require deleting the following protected related objects',
2630.         )
2631.         self.assertContains(
2632.             response,
2633.             '<li>Song: <a href="%s">Unity</a></li>'
2634.             % reverse('admin:admin_views_song_change', args=(song.pk,))
2635.         )
2636. 
2637.     def test_post_delete_restricted(self):
2638.         album = Album.objects.create(title='Amaryllis')
2639.         Song.objects.create(album=album, name='Unity')
2640.         response = self.client.post(
2641.             reverse('admin:admin_views_album_delete', args=(album.pk,)),
2642.             {'post': 'yes'},
2643.         )
2644.         self.assertEqual(Album.objects.count(), 1)
2645.         self.assertContains(
2646.             response,
2647.             'would require deleting the following protected related objects',
2648.         )
2649. 
2650.     def test_not_registered(self):
2651.         should_contain = """<li>Secret hideout: underground bunker"""
2652.         response = self.client.get(reverse('admin:admin_views_villain_delete', args=(self.v1.pk,)))
2653.         self.assertContains(response, should_contain, 1)
2654. 
2655.     def test_multiple_fkeys_to_same_model(self):
2656.         """
2657.         If a deleted object has two relationships from another model,
2658.         both of those should be followed in looking for related
2659.         objects to delete.
2660.         """
2661.         should_contain = '<li>Plot: <a href="%s">World Domination</a>' % reverse(
2662.             'admin:admin_views_plot_change', args=(self.pl1.pk,)
2663.         )
2664.         response = self.client.get(reverse('admin:admin_views_villain_delete', args=(self.v1.pk,)))
2665.         self.assertContains(response, should_contain)
2666.         response = self.client.get(reverse('admin:admin_views_villain_delete', args=(self.v2.pk,)))
2667.         self.assertContains(response, should_contain)
2668. 
2669.     def test_multiple_fkeys_to_same_instance(self):
2670.         """
2671.         If a deleted object has two relationships pointing to it from
2672.         another object, the other object should still only be listed
2673.         once.
2674.         """
2675.         should_contain = '<li>Plot: <a href="%s">World Peace</a></li>' % reverse(
2676.             'admin:admin_views_plot_change', args=(self.pl2.pk,)
2677.         )
2678.         response = self.client.get(reverse('admin:admin_views_villain_delete', args=(self.v2.pk,)))
2679.         self.assertContains(response, should_contain, 1)
2680. 
2681.     def test_inheritance(self):
2682.         """
2683.         In the case of an inherited model, if either the child or
2684.         parent-model instance is deleted, both instances are listed
2685.         for deletion, as well as any relationships they have.
2686.         """
2687.         should_contain = [
2688.             '<li>Villain: <a href="%s">Bob</a>' % reverse('admin:admin_views_villain_change', args=(self.sv1.pk,)),
2689.             '<li>Super villain: <a href="%s">Bob</a>' % reverse(
2690.                 'admin:admin_views_supervillain_change', args=(self.sv1.pk,)
2691.             ),
2692.             '<li>Secret hideout: floating castle',
2693.             '<li>Super secret hideout: super floating castle!',
2694.         ]
2695.         response = self.client.get(reverse('admin:admin_views_villain_delete', args=(self.sv1.pk,)))
2696.         for should in should_contain:
2697.             self.assertContains(response, should, 1)
2698.         response = self.client.get(reverse('admin:admin_views_supervillain_delete', args=(self.sv1.pk,)))
2699.         for should in should_contain:
2700.             self.assertContains(response, should, 1)
2701. 
2702.     def test_generic_relations(self):
2703.         """
2704.         If a deleted object has GenericForeignKeys pointing to it,
2705.         those objects should be listed for deletion.
2706.         """
2707.         plot = self.pl3
2708.         tag = FunkyTag.objects.create(content_object=plot, name='hott')
2709.         should_contain = '<li>Funky tag: <a href="%s">hott' % reverse(
2710.             'admin:admin_views_funkytag_change', args=(tag.id,))
2711.         response = self.client.get(reverse('admin:admin_views_plot_delete', args=(plot.pk,)))
2712.         self.assertContains(response, should_contain)
2713. 
2714.     def test_generic_relations_with_related_query_name(self):
2715.         """
2716.         If a deleted object has GenericForeignKey with
2717.         GenericRelation(related_query_name='...') pointing to it, those objects
2718.         should be listed for deletion.
2719.         """
2720.         bookmark = Bookmark.objects.create(name='djangoproject')
2721.         tag = FunkyTag.objects.create(content_object=bookmark, name='django')
2722.         tag_url = reverse('admin:admin_views_funkytag_change', args=(tag.id,))
2723.         should_contain = '<li>Funky tag: <a href="%s">django' % tag_url
2724.         response = self.client.get(reverse('admin:admin_views_bookmark_delete', args=(bookmark.pk,)))
2725.         self.assertContains(response, should_contain)
2726. 
2727.     def test_delete_view_uses_get_deleted_objects(self):
2728.         """The delete view uses ModelAdmin.get_deleted_objects()."""
2729.         book = Book.objects.create(name='Test Book')
2730.         response = self.client.get(reverse('admin2:admin_views_book_delete', args=(book.pk,)))
2731.         # BookAdmin.get_deleted_objects() returns custom text.
2732.         self.assertContains(response, 'a deletable object')
2733. 
2734. 
2735. @override_settings(ROOT_URLCONF='admin_views.urls')
2736. class TestGenericRelations(TestCase):
2737. 
2738.     @classmethod
2739.     def setUpTestData(cls):
2740.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
2741.         cls.v1 = Villain.objects.create(name='Adam')
2742.         cls.pl3 = Plot.objects.create(name='Corn Conspiracy', team_leader=cls.v1, contact=cls.v1)
2743. 
2744.     def setUp(self):
2745.         self.client.force_login(self.superuser)
2746. 
2747.     def test_generic_content_object_in_list_display(self):
2748.         FunkyTag.objects.create(content_object=self.pl3, name='hott')
2749.         response = self.client.get(reverse('admin:admin_views_funkytag_changelist'))
2750.         self.assertContains(response, "%s</td>" % self.pl3)
2751. 
2752. 
2753. @override_settings(ROOT_URLCONF='admin_views.urls')
2754. class AdminViewStringPrimaryKeyTest(TestCase):
2755. 
2756.     @classmethod
2757.     def setUpTestData(cls):
2758.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
2759.         cls.s1 = Section.objects.create(name='Test section')
2760.         cls.a1 = Article.objects.create(
2761.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
2762.         )
2763.         cls.a2 = Article.objects.create(
2764.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
2765.         )
2766.         cls.a3 = Article.objects.create(
2767.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
2768.         )
2769.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
2770.         cls.pk = (
2771.             "abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ 1234567890 "
2772.             r"""-_.!~*'() ;/?:@&=+$, <>#%" {}|\^[]`"""
2773.         )
2774.         cls.m1 = ModelWithStringPrimaryKey.objects.create(string_pk=cls.pk)
2775.         content_type_pk = ContentType.objects.get_for_model(ModelWithStringPrimaryKey).pk
2776.         user_pk = cls.superuser.pk
2777.         LogEntry.objects.log_action(user_pk, content_type_pk, cls.pk, cls.pk, 2, change_message='Changed something')
2778. 
2779.     def setUp(self):
2780.         self.client.force_login(self.superuser)
2781. 
2782.     def test_get_history_view(self):
2783.         """
2784.         Retrieving the history for an object using urlencoded form of primary
2785.         key should work.
2786.         Refs #12349, #18550.
2787.         """
2788.         response = self.client.get(reverse('admin:admin_views_modelwithstringprimarykey_history', args=(self.pk,)))
2789.         self.assertContains(response, escape(self.pk))
2790.         self.assertContains(response, 'Changed something')
2791.         self.assertEqual(response.status_code, 200)
2792. 
2793.     def test_get_change_view(self):
2794.         "Retrieving the object using urlencoded form of primary key should work"
2795.         response = self.client.get(reverse('admin:admin_views_modelwithstringprimarykey_change', args=(self.pk,)))
2796.         self.assertContains(response, escape(self.pk))
2797.         self.assertEqual(response.status_code, 200)
2798. 
2799.     def test_changelist_to_changeform_link(self):
2800.         "Link to the changeform of the object in changelist should use reverse() and be quoted -- #18072"
2801.         response = self.client.get(reverse('admin:admin_views_modelwithstringprimarykey_changelist'))
2802.         # this URL now comes through reverse(), thus url quoting and iri_to_uri encoding
2803.         pk_final_url = escape(iri_to_uri(quote(self.pk)))
2804.         change_url = reverse(
2805.             'admin:admin_views_modelwithstringprimarykey_change', args=('__fk__',)
2806.         ).replace('__fk__', pk_final_url)
2807.         should_contain = '<th class="field-__str__"><a href="%s">%s</a></th>' % (change_url, escape(self.pk))
2808.         self.assertContains(response, should_contain)
2809. 
2810.     def test_recentactions_link(self):
2811.         "The link from the recent actions list referring to the changeform of the object should be quoted"
2812.         response = self.client.get(reverse('admin:index'))
2813.         link = reverse('admin:admin_views_modelwithstringprimarykey_change', args=(quote(self.pk),))
2814.         should_contain = """<a href="%s">%s</a>""" % (escape(link), escape(self.pk))
2815.         self.assertContains(response, should_contain)
2816. 
2817.     def test_deleteconfirmation_link(self):
2818.         "The link from the delete confirmation page referring back to the changeform of the object should be quoted"
2819.         url = reverse('admin:admin_views_modelwithstringprimarykey_delete', args=(quote(self.pk),))
2820.         response = self.client.get(url)
2821.         # this URL now comes through reverse(), thus url quoting and iri_to_uri encoding
2822.         change_url = reverse(
2823.             'admin:admin_views_modelwithstringprimarykey_change', args=('__fk__',)
2824.         ).replace('__fk__', escape(iri_to_uri(quote(self.pk))))
2825.         should_contain = '<a href="%s">%s</a>' % (change_url, escape(self.pk))
2826.         self.assertContains(response, should_contain)
2827. 
2828.     def test_url_conflicts_with_add(self):
2829.         "A model with a primary key that ends with add or is `add` should be visible"
2830.         add_model = ModelWithStringPrimaryKey.objects.create(pk="i have something to add")
2831.         add_model.save()
2832.         response = self.client.get(
2833.             reverse('admin:admin_views_modelwithstringprimarykey_change', args=(quote(add_model.pk),))
2834.         )
2835.         should_contain = """<h1>Change model with string primary key</h1>"""
2836.         self.assertContains(response, should_contain)
2837. 
2838.         add_model2 = ModelWithStringPrimaryKey.objects.create(pk="add")
2839.         add_url = reverse('admin:admin_views_modelwithstringprimarykey_add')
2840.         change_url = reverse('admin:admin_views_modelwithstringprimarykey_change', args=(quote(add_model2.pk),))
2841.         self.assertNotEqual(add_url, change_url)
2842. 
2843.     def test_url_conflicts_with_delete(self):
2844.         "A model with a primary key that ends with delete should be visible"
2845.         delete_model = ModelWithStringPrimaryKey(pk="delete")
2846.         delete_model.save()
2847.         response = self.client.get(
2848.             reverse('admin:admin_views_modelwithstringprimarykey_change', args=(quote(delete_model.pk),))
2849.         )
2850.         should_contain = """<h1>Change model with string primary key</h1>"""
2851.         self.assertContains(response, should_contain)
2852. 
2853.     def test_url_conflicts_with_history(self):
2854.         "A model with a primary key that ends with history should be visible"
2855.         history_model = ModelWithStringPrimaryKey(pk="history")
2856.         history_model.save()
2857.         response = self.client.get(
2858.             reverse('admin:admin_views_modelwithstringprimarykey_change', args=(quote(history_model.pk),))
2859.         )
2860.         should_contain = """<h1>Change model with string primary key</h1>"""
2861.         self.assertContains(response, should_contain)
2862. 
2863.     def test_shortcut_view_with_escaping(self):
2864.         "'View on site should' work properly with char fields"
2865.         model = ModelWithStringPrimaryKey(pk='abc_123')
2866.         model.save()
2867.         response = self.client.get(
2868.             reverse('admin:admin_views_modelwithstringprimarykey_change', args=(quote(model.pk),))
2869.         )
2870.         should_contain = '/%s/" class="viewsitelink">' % model.pk
2871.         self.assertContains(response, should_contain)
2872. 
2873.     def test_change_view_history_link(self):
2874.         """Object history button link should work and contain the pk value quoted."""
2875.         url = reverse(
2876.             'admin:%s_modelwithstringprimarykey_change' % ModelWithStringPrimaryKey._meta.app_label,
2877.             args=(quote(self.pk),)
2878.         )
2879.         response = self.client.get(url)
2880.         self.assertEqual(response.status_code, 200)
2881.         expected_link = reverse(
2882.             'admin:%s_modelwithstringprimarykey_history' % ModelWithStringPrimaryKey._meta.app_label,
2883.             args=(quote(self.pk),)
2884.         )
2885.         self.assertContains(response, '<a href="%s" class="historylink"' % escape(expected_link))
2886. 
2887.     def test_redirect_on_add_view_continue_button(self):
2888.         """As soon as an object is added using "Save and continue editing"
2889.         button, the user should be redirected to the object's change_view.
2890. 
2891.         In case primary key is a string containing some special characters
2892.         like slash or underscore, these characters must be escaped (see #22266)
2893.         """
2894.         response = self.client.post(
2895.             reverse('admin:admin_views_modelwithstringprimarykey_add'),
2896.             {
2897.                 'string_pk': '123/history',
2898.                 "_continue": "1",  # Save and continue editing
2899.             }
2900.         )
2901. 
2902.         self.assertEqual(response.status_code, 302)  # temporary redirect
2903.         self.assertIn('/123_2Fhistory/', response['location'])  # PK is quoted
2904. 
2905. 
2906. @override_settings(ROOT_URLCONF='admin_views.urls')
2907. class SecureViewTests(TestCase):
2908.     """
2909.     Test behavior of a view protected by the staff_member_required decorator.
2910.     """
2911. 
2912.     def test_secure_view_shows_login_if_not_logged_in(self):
2913.         secure_url = reverse('secure_view')
2914.         response = self.client.get(secure_url)
2915.         self.assertRedirects(response, '%s?next=%s' % (reverse('admin:login'), secure_url))
2916.         response = self.client.get(secure_url, follow=True)
2917.         self.assertTemplateUsed(response, 'admin/login.html')
2918.         self.assertEqual(response.context[REDIRECT_FIELD_NAME], secure_url)
2919. 
2920.     def test_staff_member_required_decorator_works_with_argument(self):
2921.         """
2922.         Staff_member_required decorator works with an argument
2923.         (redirect_field_name).
2924.         """
2925.         secure_url = '/test_admin/admin/secure-view2/'
2926.         response = self.client.get(secure_url)
2927.         self.assertRedirects(response, '%s?myfield=%s' % (reverse('admin:login'), secure_url))
2928. 
2929. 
2930. @override_settings(ROOT_URLCONF='admin_views.urls')
2931. class AdminViewUnicodeTest(TestCase):
2932. 
2933.     @classmethod
2934.     def setUpTestData(cls):
2935.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
2936.         cls.b1 = Book.objects.create(name='Lærdommer')
2937.         cls.p1 = Promo.objects.create(name='<Promo for Lærdommer>', book=cls.b1)
2938.         cls.chap1 = Chapter.objects.create(
2939.             title='Norske bostaver æøå skaper problemer', content='<p>Svært frustrerende med UnicodeDecodeErro</p>',
2940.             book=cls.b1
2941.         )
2942.         cls.chap2 = Chapter.objects.create(
2943.             title='Kjærlighet', content='<p>La kjærligheten til de lidende seire.</p>', book=cls.b1)
2944.         cls.chap3 = Chapter.objects.create(title='Kjærlighet', content='<p>Noe innhold</p>', book=cls.b1)
2945.         cls.chap4 = ChapterXtra1.objects.create(chap=cls.chap1, xtra='<Xtra(1) Norske bostaver æøå skaper problemer>')
2946.         cls.chap5 = ChapterXtra1.objects.create(chap=cls.chap2, xtra='<Xtra(1) Kjærlighet>')
2947.         cls.chap6 = ChapterXtra1.objects.create(chap=cls.chap3, xtra='<Xtra(1) Kjærlighet>')
2948.         cls.chap7 = ChapterXtra2.objects.create(chap=cls.chap1, xtra='<Xtra(2) Norske bostaver æøå skaper problemer>')
2949.         cls.chap8 = ChapterXtra2.objects.create(chap=cls.chap2, xtra='<Xtra(2) Kjærlighet>')
2950.         cls.chap9 = ChapterXtra2.objects.create(chap=cls.chap3, xtra='<Xtra(2) Kjærlighet>')
2951. 
2952.     def setUp(self):
2953.         self.client.force_login(self.superuser)
2954. 
2955.     def test_unicode_edit(self):
2956.         """
2957.         A test to ensure that POST on edit_view handles non-ASCII characters.
2958.         """
2959.         post_data = {
2960.             "name": "Test lærdommer",
2961.             # inline data
2962.             "chapter_set-TOTAL_FORMS": "6",
2963.             "chapter_set-INITIAL_FORMS": "3",
2964.             "chapter_set-MAX_NUM_FORMS": "0",
2965.             "chapter_set-0-id": self.chap1.pk,
2966.             "chapter_set-0-title": "Norske bostaver æøå skaper problemer",
2967.             "chapter_set-0-content": "&lt;p&gt;Svært frustrerende med UnicodeDecodeError&lt;/p&gt;",
2968.             "chapter_set-1-id": self.chap2.id,
2969.             "chapter_set-1-title": "Kjærlighet.",
2970.             "chapter_set-1-content": "&lt;p&gt;La kjærligheten til de lidende seire.&lt;/p&gt;",
2971.             "chapter_set-2-id": self.chap3.id,
2972.             "chapter_set-2-title": "Need a title.",
2973.             "chapter_set-2-content": "&lt;p&gt;Newest content&lt;/p&gt;",
2974.             "chapter_set-3-id": "",
2975.             "chapter_set-3-title": "",
2976.             "chapter_set-3-content": "",
2977.             "chapter_set-4-id": "",
2978.             "chapter_set-4-title": "",
2979.             "chapter_set-4-content": "",
2980.             "chapter_set-5-id": "",
2981.             "chapter_set-5-title": "",
2982.             "chapter_set-5-content": "",
2983.         }
2984. 
2985.         response = self.client.post(reverse('admin:admin_views_book_change', args=(self.b1.pk,)), post_data)
2986.         self.assertEqual(response.status_code, 302)  # redirect somewhere
2987. 
2988.     def test_unicode_delete(self):
2989.         """
2990.         The delete_view handles non-ASCII characters
2991.         """
2992.         delete_dict = {'post': 'yes'}
2993.         delete_url = reverse('admin:admin_views_book_delete', args=(self.b1.pk,))
2994.         response = self.client.get(delete_url)
2995.         self.assertEqual(response.status_code, 200)
2996.         response = self.client.post(delete_url, delete_dict)
2997.         self.assertRedirects(response, reverse('admin:admin_views_book_changelist'))
2998. 
2999. 
3000. @override_settings(ROOT_URLCONF='admin_views.urls')
3001. class AdminViewListEditable(TestCase):
3002. 
3003.     @classmethod
3004.     def setUpTestData(cls):
3005.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3006.         cls.s1 = Section.objects.create(name='Test section')
3007.         cls.a1 = Article.objects.create(
3008.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
3009.         )
3010.         cls.a2 = Article.objects.create(
3011.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
3012.         )
3013.         cls.a3 = Article.objects.create(
3014.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
3015.         )
3016.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
3017.         cls.per1 = Person.objects.create(name='John Mauchly', gender=1, alive=True)
3018.         cls.per2 = Person.objects.create(name='Grace Hopper', gender=1, alive=False)
3019.         cls.per3 = Person.objects.create(name='Guido van Rossum', gender=1, alive=True)
3020. 
3021.     def setUp(self):
3022.         self.client.force_login(self.superuser)
3023. 
3024.     def test_inheritance(self):
3025.         Podcast.objects.create(name="This Week in Django", release_date=datetime.date.today())
3026.         response = self.client.get(reverse('admin:admin_views_podcast_changelist'))
3027.         self.assertEqual(response.status_code, 200)
3028. 
3029.     def test_inheritance_2(self):
3030.         Vodcast.objects.create(name="This Week in Django", released=True)
3031.         response = self.client.get(reverse('admin:admin_views_vodcast_changelist'))
3032.         self.assertEqual(response.status_code, 200)
3033. 
3034.     def test_custom_pk(self):
3035.         Language.objects.create(iso='en', name='English', english_name='English')
3036.         response = self.client.get(reverse('admin:admin_views_language_changelist'))
3037.         self.assertEqual(response.status_code, 200)
3038. 
3039.     def test_changelist_input_html(self):
3040.         response = self.client.get(reverse('admin:admin_views_person_changelist'))
3041.         # 2 inputs per object(the field and the hidden id field) = 6
3042.         # 4 management hidden fields = 4
3043.         # 4 action inputs (3 regular checkboxes, 1 checkbox to select all)
3044.         # main form submit button = 1
3045.         # search field and search submit button = 2
3046.         # CSRF field = 1
3047.         # field to track 'select all' across paginated views = 1
3048.         # 6 + 4 + 4 + 1 + 2 + 1 + 1 = 19 inputs
3049.         self.assertContains(response, "<input", count=19)
3050.         # 1 select per object = 3 selects
3051.         self.assertContains(response, "<select", count=4)
3052. 
3053.     def test_post_messages(self):
3054.         # Ticket 12707: Saving inline editable should not show admin
3055.         # action warnings
3056.         data = {
3057.             "form-TOTAL_FORMS": "3",
3058.             "form-INITIAL_FORMS": "3",
3059.             "form-MAX_NUM_FORMS": "0",
3060. 
3061.             "form-0-gender": "1",
3062.             "form-0-id": "%s" % self.per1.pk,
3063. 
3064.             "form-1-gender": "2",
3065.             "form-1-id": "%s" % self.per2.pk,
3066. 
3067.             "form-2-alive": "checked",
3068.             "form-2-gender": "1",
3069.             "form-2-id": "%s" % self.per3.pk,
3070. 
3071.             "_save": "Save",
3072.         }
3073.         response = self.client.post(reverse('admin:admin_views_person_changelist'),
3074.                                     data, follow=True)
3075.         self.assertEqual(len(response.context['messages']), 1)
3076. 
3077.     def test_post_submission(self):
3078.         data = {
3079.             "form-TOTAL_FORMS": "3",
3080.             "form-INITIAL_FORMS": "3",
3081.             "form-MAX_NUM_FORMS": "0",
3082. 
3083.             "form-0-gender": "1",
3084.             "form-0-id": "%s" % self.per1.pk,
3085. 
3086.             "form-1-gender": "2",
3087.             "form-1-id": "%s" % self.per2.pk,
3088. 
3089.             "form-2-alive": "checked",
3090.             "form-2-gender": "1",
3091.             "form-2-id": "%s" % self.per3.pk,
3092. 
3093.             "_save": "Save",
3094.         }
3095.         self.client.post(reverse('admin:admin_views_person_changelist'), data)
3096. 
3097.         self.assertIs(Person.objects.get(name="John Mauchly").alive, False)
3098.         self.assertEqual(Person.objects.get(name="Grace Hopper").gender, 2)
3099. 
3100.         # test a filtered page
3101.         data = {
3102.             "form-TOTAL_FORMS": "2",
3103.             "form-INITIAL_FORMS": "2",
3104.             "form-MAX_NUM_FORMS": "0",
3105. 
3106.             "form-0-id": "%s" % self.per1.pk,
3107.             "form-0-gender": "1",
3108.             "form-0-alive": "checked",
3109. 
3110.             "form-1-id": "%s" % self.per3.pk,
3111.             "form-1-gender": "1",
3112.             "form-1-alive": "checked",
3113. 
3114.             "_save": "Save",
3115.         }
3116.         self.client.post(reverse('admin:admin_views_person_changelist') + '?gender__exact=1', data)
3117. 
3118.         self.assertIs(Person.objects.get(name="John Mauchly").alive, True)
3119. 
3120.         # test a searched page
3121.         data = {
3122.             "form-TOTAL_FORMS": "1",
3123.             "form-INITIAL_FORMS": "1",
3124.             "form-MAX_NUM_FORMS": "0",
3125. 
3126.             "form-0-id": "%s" % self.per1.pk,
3127.             "form-0-gender": "1",
3128. 
3129.             "_save": "Save",
3130.         }
3131.         self.client.post(reverse('admin:admin_views_person_changelist') + '?q=john', data)
3132. 
3133.         self.assertIs(Person.objects.get(name="John Mauchly").alive, False)
3134. 
3135.     def test_non_field_errors(self):
3136.         """
3137.         Non-field errors are displayed for each of the forms in the
3138.         changelist's formset.
3139.         """
3140.         fd1 = FoodDelivery.objects.create(reference='123', driver='bill', restaurant='thai')
3141.         fd2 = FoodDelivery.objects.create(reference='456', driver='bill', restaurant='india')
3142.         fd3 = FoodDelivery.objects.create(reference='789', driver='bill', restaurant='pizza')
3143. 
3144.         data = {
3145.             "form-TOTAL_FORMS": "3",
3146.             "form-INITIAL_FORMS": "3",
3147.             "form-MAX_NUM_FORMS": "0",
3148. 
3149.             "form-0-id": str(fd1.id),
3150.             "form-0-reference": "123",
3151.             "form-0-driver": "bill",
3152.             "form-0-restaurant": "thai",
3153. 
3154.             # Same data as above: Forbidden because of unique_together!
3155.             "form-1-id": str(fd2.id),
3156.             "form-1-reference": "456",
3157.             "form-1-driver": "bill",
3158.             "form-1-restaurant": "thai",
3159. 
3160.             "form-2-id": str(fd3.id),
3161.             "form-2-reference": "789",
3162.             "form-2-driver": "bill",
3163.             "form-2-restaurant": "pizza",
3164. 
3165.             "_save": "Save",
3166.         }
3167.         response = self.client.post(reverse('admin:admin_views_fooddelivery_changelist'), data)
3168.         self.assertContains(
3169.             response,
3170.             '<tr><td colspan="4"><ul class="errorlist nonfield"><li>Food delivery '
3171.             'with this Driver and Restaurant already exists.</li></ul></td></tr>',
3172.             1,
3173.             html=True
3174.         )
3175. 
3176.         data = {
3177.             "form-TOTAL_FORMS": "3",
3178.             "form-INITIAL_FORMS": "3",
3179.             "form-MAX_NUM_FORMS": "0",
3180. 
3181.             "form-0-id": str(fd1.id),
3182.             "form-0-reference": "123",
3183.             "form-0-driver": "bill",
3184.             "form-0-restaurant": "thai",
3185. 
3186.             # Same data as above: Forbidden because of unique_together!
3187.             "form-1-id": str(fd2.id),
3188.             "form-1-reference": "456",
3189.             "form-1-driver": "bill",
3190.             "form-1-restaurant": "thai",
3191. 
3192.             # Same data also.
3193.             "form-2-id": str(fd3.id),
3194.             "form-2-reference": "789",
3195.             "form-2-driver": "bill",
3196.             "form-2-restaurant": "thai",
3197. 
3198.             "_save": "Save",
3199.         }
3200.         response = self.client.post(reverse('admin:admin_views_fooddelivery_changelist'), data)
3201.         self.assertContains(
3202.             response,
3203.             '<tr><td colspan="4"><ul class="errorlist nonfield"><li>Food delivery '
3204.             'with this Driver and Restaurant already exists.</li></ul></td></tr>',
3205.             2,
3206.             html=True
3207.         )
3208. 
3209.     def test_non_form_errors(self):
3210.         # test if non-form errors are handled; ticket #12716
3211.         data = {
3212.             "form-TOTAL_FORMS": "1",
3213.             "form-INITIAL_FORMS": "1",
3214.             "form-MAX_NUM_FORMS": "0",
3215. 
3216.             "form-0-id": "%s" % self.per2.pk,
3217.             "form-0-alive": "1",
3218.             "form-0-gender": "2",
3219. 
3220.             # The form processing understands this as a list_editable "Save"
3221.             # and not an action "Go".
3222.             "_save": "Save",
3223.         }
3224.         response = self.client.post(reverse('admin:admin_views_person_changelist'), data)
3225.         self.assertContains(response, "Grace is not a Zombie")
3226. 
3227.     def test_non_form_errors_is_errorlist(self):
3228.         # test if non-form errors are correctly handled; ticket #12878
3229.         data = {
3230.             "form-TOTAL_FORMS": "1",
3231.             "form-INITIAL_FORMS": "1",
3232.             "form-MAX_NUM_FORMS": "0",
3233. 
3234.             "form-0-id": "%s" % self.per2.pk,
3235.             "form-0-alive": "1",
3236.             "form-0-gender": "2",
3237. 
3238.             "_save": "Save",
3239.         }
3240.         response = self.client.post(reverse('admin:admin_views_person_changelist'), data)
3241.         non_form_errors = response.context['cl'].formset.non_form_errors()
3242.         self.assertIsInstance(non_form_errors, ErrorList)
3243.         self.assertEqual(str(non_form_errors), str(ErrorList(["Grace is not a Zombie"])))
3244. 
3245.     def test_list_editable_ordering(self):
3246.         collector = Collector.objects.create(id=1, name="Frederick Clegg")
3247. 
3248.         Category.objects.create(id=1, order=1, collector=collector)
3249.         Category.objects.create(id=2, order=2, collector=collector)
3250.         Category.objects.create(id=3, order=0, collector=collector)
3251.         Category.objects.create(id=4, order=0, collector=collector)
3252. 
3253.         # NB: The order values must be changed so that the items are reordered.
3254.         data = {
3255.             "form-TOTAL_FORMS": "4",
3256.             "form-INITIAL_FORMS": "4",
3257.             "form-MAX_NUM_FORMS": "0",
3258. 
3259.             "form-0-order": "14",
3260.             "form-0-id": "1",
3261.             "form-0-collector": "1",
3262. 
3263.             "form-1-order": "13",
3264.             "form-1-id": "2",
3265.             "form-1-collector": "1",
3266. 
3267.             "form-2-order": "1",
3268.             "form-2-id": "3",
3269.             "form-2-collector": "1",
3270. 
3271.             "form-3-order": "0",
3272.             "form-3-id": "4",
3273.             "form-3-collector": "1",
3274. 
3275.             # The form processing understands this as a list_editable "Save"
3276.             # and not an action "Go".
3277.             "_save": "Save",
3278.         }
3279.         response = self.client.post(reverse('admin:admin_views_category_changelist'), data)
3280.         # Successful post will redirect
3281.         self.assertEqual(response.status_code, 302)
3282. 
3283.         # The order values have been applied to the right objects
3284.         self.assertEqual(Category.objects.get(id=1).order, 14)
3285.         self.assertEqual(Category.objects.get(id=2).order, 13)
3286.         self.assertEqual(Category.objects.get(id=3).order, 1)
3287.         self.assertEqual(Category.objects.get(id=4).order, 0)
3288. 
3289.     def test_list_editable_pagination(self):
3290.         """
3291.         Pagination works for list_editable items.
3292.         """
3293.         UnorderedObject.objects.create(id=1, name='Unordered object #1')
3294.         UnorderedObject.objects.create(id=2, name='Unordered object #2')
3295.         UnorderedObject.objects.create(id=3, name='Unordered object #3')
3296.         response = self.client.get(reverse('admin:admin_views_unorderedobject_changelist'))
3297.         self.assertContains(response, 'Unordered object #3')
3298.         self.assertContains(response, 'Unordered object #2')
3299.         self.assertNotContains(response, 'Unordered object #1')
3300.         response = self.client.get(reverse('admin:admin_views_unorderedobject_changelist') + '?p=1')
3301.         self.assertNotContains(response, 'Unordered object #3')
3302.         self.assertNotContains(response, 'Unordered object #2')
3303.         self.assertContains(response, 'Unordered object #1')
3304. 
3305.     def test_list_editable_action_submit(self):
3306.         # List editable changes should not be executed if the action "Go" button is
3307.         # used to submit the form.
3308.         data = {
3309.             "form-TOTAL_FORMS": "3",
3310.             "form-INITIAL_FORMS": "3",
3311.             "form-MAX_NUM_FORMS": "0",
3312. 
3313.             "form-0-gender": "1",
3314.             "form-0-id": "1",
3315. 
3316.             "form-1-gender": "2",
3317.             "form-1-id": "2",
3318. 
3319.             "form-2-alive": "checked",
3320.             "form-2-gender": "1",
3321.             "form-2-id": "3",
3322. 
3323.             "index": "0",
3324.             "_selected_action": ['3'],
3325.             "action": ['', 'delete_selected'],
3326.         }
3327.         self.client.post(reverse('admin:admin_views_person_changelist'), data)
3328. 
3329.         self.assertIs(Person.objects.get(name="John Mauchly").alive, True)
3330.         self.assertEqual(Person.objects.get(name="Grace Hopper").gender, 1)
3331. 
3332.     def test_list_editable_action_choices(self):
3333.         # List editable changes should be executed if the "Save" button is
3334.         # used to submit the form - any action choices should be ignored.
3335.         data = {
3336.             "form-TOTAL_FORMS": "3",
3337.             "form-INITIAL_FORMS": "3",
3338.             "form-MAX_NUM_FORMS": "0",
3339. 
3340.             "form-0-gender": "1",
3341.             "form-0-id": "%s" % self.per1.pk,
3342. 
3343.             "form-1-gender": "2",
3344.             "form-1-id": "%s" % self.per2.pk,
3345. 
3346.             "form-2-alive": "checked",
3347.             "form-2-gender": "1",
3348.             "form-2-id": "%s" % self.per3.pk,
3349. 
3350.             "_save": "Save",
3351.             "_selected_action": ['1'],
3352.             "action": ['', 'delete_selected'],
3353.         }
3354.         self.client.post(reverse('admin:admin_views_person_changelist'), data)
3355. 
3356.         self.assertIs(Person.objects.get(name="John Mauchly").alive, False)
3357.         self.assertEqual(Person.objects.get(name="Grace Hopper").gender, 2)
3358. 
3359.     def test_list_editable_popup(self):
3360.         """
3361.         Fields should not be list-editable in popups.
3362.         """
3363.         response = self.client.get(reverse('admin:admin_views_person_changelist'))
3364.         self.assertNotEqual(response.context['cl'].list_editable, ())
3365.         response = self.client.get(reverse('admin:admin_views_person_changelist') + '?%s' % IS_POPUP_VAR)
3366.         self.assertEqual(response.context['cl'].list_editable, ())
3367. 
3368.     def test_pk_hidden_fields(self):
3369.         """
3370.         hidden pk fields aren't displayed in the table body and their
3371.         corresponding human-readable value is displayed instead. The hidden pk
3372.         fields are displayed but separately (not in the table) and only once.
3373.         """
3374.         story1 = Story.objects.create(title='The adventures of Guido', content='Once upon a time in Djangoland...')
3375.         story2 = Story.objects.create(
3376.             title='Crouching Tiger, Hidden Python',
3377.             content='The Python was sneaking into...',
3378.         )
3379.         response = self.client.get(reverse('admin:admin_views_story_changelist'))
3380.         # Only one hidden field, in a separate place than the table.
3381.         self.assertContains(response, 'id="id_form-0-id"', 1)
3382.         self.assertContains(response, 'id="id_form-1-id"', 1)
3383.         self.assertContains(
3384.             response,
3385.             '<div class="hiddenfields">\n'
3386.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
3387.             '<input type="hidden" name="form-1-id" value="%d" id="id_form-1-id">\n</div>'
3388.             % (story2.id, story1.id),
3389.             html=True
3390.         )
3391.         self.assertContains(response, '<td class="field-id">%d</td>' % story1.id, 1)
3392.         self.assertContains(response, '<td class="field-id">%d</td>' % story2.id, 1)
3393. 
3394.     def test_pk_hidden_fields_with_list_display_links(self):
3395.         """ Similarly as test_pk_hidden_fields, but when the hidden pk fields are
3396.             referenced in list_display_links.
3397.             Refs #12475.
3398.         """
3399.         story1 = OtherStory.objects.create(
3400.             title='The adventures of Guido',
3401.             content='Once upon a time in Djangoland...',
3402.         )
3403.         story2 = OtherStory.objects.create(
3404.             title='Crouching Tiger, Hidden Python',
3405.             content='The Python was sneaking into...',
3406.         )
3407.         link1 = reverse('admin:admin_views_otherstory_change', args=(story1.pk,))
3408.         link2 = reverse('admin:admin_views_otherstory_change', args=(story2.pk,))
3409.         response = self.client.get(reverse('admin:admin_views_otherstory_changelist'))
3410.         # Only one hidden field, in a separate place than the table.
3411.         self.assertContains(response, 'id="id_form-0-id"', 1)
3412.         self.assertContains(response, 'id="id_form-1-id"', 1)
3413.         self.assertContains(
3414.             response,
3415.             '<div class="hiddenfields">\n'
3416.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
3417.             '<input type="hidden" name="form-1-id" value="%d" id="id_form-1-id">\n</div>'
3418.             % (story2.id, story1.id),
3419.             html=True
3420.         )
3421.         self.assertContains(response, '<th class="field-id"><a href="%s">%d</a></th>' % (link1, story1.id), 1)
3422.         self.assertContains(response, '<th class="field-id"><a href="%s">%d</a></th>' % (link2, story2.id), 1)
3423. 
3424. 
3425. @override_settings(ROOT_URLCONF='admin_views.urls')
3426. class AdminSearchTest(TestCase):
3427. 
3428.     @classmethod
3429.     def setUpTestData(cls):
3430.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3431.         cls.joepublicuser = User.objects.create_user(username='joepublic', password='secret')
3432.         cls.s1 = Section.objects.create(name='Test section')
3433.         cls.a1 = Article.objects.create(
3434.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
3435.         )
3436.         cls.a2 = Article.objects.create(
3437.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
3438.         )
3439.         cls.a3 = Article.objects.create(
3440.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
3441.         )
3442.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
3443. 
3444.         cls.per1 = Person.objects.create(name='John Mauchly', gender=1, alive=True)
3445.         cls.per2 = Person.objects.create(name='Grace Hopper', gender=1, alive=False)
3446.         cls.per3 = Person.objects.create(name='Guido van Rossum', gender=1, alive=True)
3447. 
3448.         cls.t1 = Recommender.objects.create()
3449.         cls.t2 = Recommendation.objects.create(the_recommender=cls.t1)
3450.         cls.t3 = Recommender.objects.create()
3451.         cls.t4 = Recommendation.objects.create(the_recommender=cls.t3)
3452. 
3453.         cls.tt1 = TitleTranslation.objects.create(title=cls.t1, text='Bar')
3454.         cls.tt2 = TitleTranslation.objects.create(title=cls.t2, text='Foo')
3455.         cls.tt3 = TitleTranslation.objects.create(title=cls.t3, text='Few')
3456.         cls.tt4 = TitleTranslation.objects.create(title=cls.t4, text='Bas')
3457. 
3458.     def setUp(self):
3459.         self.client.force_login(self.superuser)
3460. 
3461.     def test_search_on_sibling_models(self):
3462.         "A search that mentions sibling models"
3463.         response = self.client.get(reverse('admin:admin_views_recommendation_changelist') + '?q=bar')
3464.         # confirm the search returned 1 object
3465.         self.assertContains(response, "\n1 recommendation\n")
3466. 
3467.     def test_with_fk_to_field(self):
3468.         """
3469.         The to_field GET parameter is preserved when a search is performed.
3470.         Refs #10918.
3471.         """
3472.         response = self.client.get(reverse('admin:auth_user_changelist') + '?q=joe&%s=id' % TO_FIELD_VAR)
3473.         self.assertContains(response, "\n1 user\n")
3474.         self.assertContains(response, '<input type="hidden" name="%s" value="id">' % TO_FIELD_VAR, html=True)
3475. 
3476.     def test_exact_matches(self):
3477.         response = self.client.get(reverse('admin:admin_views_recommendation_changelist') + '?q=bar')
3478.         # confirm the search returned one object
3479.         self.assertContains(response, "\n1 recommendation\n")
3480. 
3481.         response = self.client.get(reverse('admin:admin_views_recommendation_changelist') + '?q=ba')
3482.         # confirm the search returned zero objects
3483.         self.assertContains(response, "\n0 recommendations\n")
3484. 
3485.     def test_beginning_matches(self):
3486.         response = self.client.get(reverse('admin:admin_views_person_changelist') + '?q=Gui')
3487.         # confirm the search returned one object
3488.         self.assertContains(response, "\n1 person\n")
3489.         self.assertContains(response, "Guido")
3490. 
3491.         response = self.client.get(reverse('admin:admin_views_person_changelist') + '?q=uido')
3492.         # confirm the search returned zero objects
3493.         self.assertContains(response, "\n0 persons\n")
3494.         self.assertNotContains(response, "Guido")
3495. 
3496.     def test_pluggable_search(self):
3497.         PluggableSearchPerson.objects.create(name="Bob", age=10)
3498.         PluggableSearchPerson.objects.create(name="Amy", age=20)
3499. 
3500.         response = self.client.get(reverse('admin:admin_views_pluggablesearchperson_changelist') + '?q=Bob')
3501.         # confirm the search returned one object
3502.         self.assertContains(response, "\n1 pluggable search person\n")
3503.         self.assertContains(response, "Bob")
3504. 
3505.         response = self.client.get(reverse('admin:admin_views_pluggablesearchperson_changelist') + '?q=20')
3506.         # confirm the search returned one object
3507.         self.assertContains(response, "\n1 pluggable search person\n")
3508.         self.assertContains(response, "Amy")
3509. 
3510.     def test_reset_link(self):
3511.         """
3512.         Test presence of reset link in search bar ("1 result (_x total_)").
3513.         """
3514.         #   1 query for session + 1 for fetching user
3515.         # + 1 for filtered result + 1 for filtered count
3516.         # + 1 for total count
3517.         with self.assertNumQueries(5):
3518.             response = self.client.get(reverse('admin:admin_views_person_changelist') + '?q=Gui')
3519.         self.assertContains(
3520.             response,
3521.             """<span class="small quiet">1 result (<a href="?">3 total</a>)</span>""",
3522.             html=True
3523.         )
3524. 
3525.     def test_no_total_count(self):
3526.         """
3527.         #8408 -- "Show all" should be displayed instead of the total count if
3528.         ModelAdmin.show_full_result_count is False.
3529.         """
3530.         #   1 query for session + 1 for fetching user
3531.         # + 1 for filtered result + 1 for filtered count
3532.         with self.assertNumQueries(4):
3533.             response = self.client.get(reverse('admin:admin_views_recommendation_changelist') + '?q=bar')
3534.         self.assertContains(
3535.             response,
3536.             """<span class="small quiet">1 result (<a href="?">Show all</a>)</span>""",
3537.             html=True
3538.         )
3539.         self.assertTrue(response.context['cl'].show_admin_actions)
3540. 
3541. 
3542. @override_settings(ROOT_URLCONF='admin_views.urls')
3543. class AdminInheritedInlinesTest(TestCase):
3544. 
3545.     @classmethod
3546.     def setUpTestData(cls):
3547.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3548. 
3549.     def setUp(self):
3550.         self.client.force_login(self.superuser)
3551. 
3552.     def test_inline(self):
3553.         """
3554.         Inline models which inherit from a common parent are correctly handled.
3555.         """
3556.         foo_user = "foo username"
3557.         bar_user = "bar username"
3558. 
3559.         name_re = re.compile(b'name="(.*?)"')
3560. 
3561.         # test the add case
3562.         response = self.client.get(reverse('admin:admin_views_persona_add'))
3563.         names = name_re.findall(response.content)
3564.         # make sure we have no duplicate HTML names
3565.         self.assertEqual(len(names), len(set(names)))
3566. 
3567.         # test the add case
3568.         post_data = {
3569.             "name": "Test Name",
3570.             # inline data
3571.             "accounts-TOTAL_FORMS": "1",
3572.             "accounts-INITIAL_FORMS": "0",
3573.             "accounts-MAX_NUM_FORMS": "0",
3574.             "accounts-0-username": foo_user,
3575.             "accounts-2-TOTAL_FORMS": "1",
3576.             "accounts-2-INITIAL_FORMS": "0",
3577.             "accounts-2-MAX_NUM_FORMS": "0",
3578.             "accounts-2-0-username": bar_user,
3579.         }
3580. 
3581.         response = self.client.post(reverse('admin:admin_views_persona_add'), post_data)
3582.         self.assertEqual(response.status_code, 302)  # redirect somewhere
3583.         self.assertEqual(Persona.objects.count(), 1)
3584.         self.assertEqual(FooAccount.objects.count(), 1)
3585.         self.assertEqual(BarAccount.objects.count(), 1)
3586.         self.assertEqual(FooAccount.objects.all()[0].username, foo_user)
3587.         self.assertEqual(BarAccount.objects.all()[0].username, bar_user)
3588.         self.assertEqual(Persona.objects.all()[0].accounts.count(), 2)
3589. 
3590.         persona_id = Persona.objects.all()[0].id
3591.         foo_id = FooAccount.objects.all()[0].id
3592.         bar_id = BarAccount.objects.all()[0].id
3593. 
3594.         # test the edit case
3595. 
3596.         response = self.client.get(reverse('admin:admin_views_persona_change', args=(persona_id,)))
3597.         names = name_re.findall(response.content)
3598.         # make sure we have no duplicate HTML names
3599.         self.assertEqual(len(names), len(set(names)))
3600. 
3601.         post_data = {
3602.             "name": "Test Name",
3603. 
3604.             "accounts-TOTAL_FORMS": "2",
3605.             "accounts-INITIAL_FORMS": "1",
3606.             "accounts-MAX_NUM_FORMS": "0",
3607. 
3608.             "accounts-0-username": "%s-1" % foo_user,
3609.             "accounts-0-account_ptr": str(foo_id),
3610.             "accounts-0-persona": str(persona_id),
3611. 
3612.             "accounts-2-TOTAL_FORMS": "2",
3613.             "accounts-2-INITIAL_FORMS": "1",
3614.             "accounts-2-MAX_NUM_FORMS": "0",
3615. 
3616.             "accounts-2-0-username": "%s-1" % bar_user,
3617.             "accounts-2-0-account_ptr": str(bar_id),
3618.             "accounts-2-0-persona": str(persona_id),
3619.         }
3620.         response = self.client.post(reverse('admin:admin_views_persona_change', args=(persona_id,)), post_data)
3621.         self.assertEqual(response.status_code, 302)
3622.         self.assertEqual(Persona.objects.count(), 1)
3623.         self.assertEqual(FooAccount.objects.count(), 1)
3624.         self.assertEqual(BarAccount.objects.count(), 1)
3625.         self.assertEqual(FooAccount.objects.all()[0].username, "%s-1" % foo_user)
3626.         self.assertEqual(BarAccount.objects.all()[0].username, "%s-1" % bar_user)
3627.         self.assertEqual(Persona.objects.all()[0].accounts.count(), 2)
3628. 
3629. 
3630. @override_settings(ROOT_URLCONF='admin_views.urls')
3631. class TestCustomChangeList(TestCase):
3632. 
3633.     @classmethod
3634.     def setUpTestData(cls):
3635.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3636. 
3637.     def setUp(self):
3638.         self.client.force_login(self.superuser)
3639. 
3640.     def test_custom_changelist(self):
3641.         """
3642.         Validate that a custom ChangeList class can be used (#9749)
3643.         """
3644.         # Insert some data
3645.         post_data = {"name": "First Gadget"}
3646.         response = self.client.post(reverse('admin:admin_views_gadget_add'), post_data)
3647.         self.assertEqual(response.status_code, 302)  # redirect somewhere
3648.         # Hit the page once to get messages out of the queue message list
3649.         response = self.client.get(reverse('admin:admin_views_gadget_changelist'))
3650.         # Data is still not visible on the page
3651.         response = self.client.get(reverse('admin:admin_views_gadget_changelist'))
3652.         self.assertEqual(response.status_code, 200)
3653.         self.assertNotContains(response, 'First Gadget')
3654. 
3655. 
3656. @override_settings(ROOT_URLCONF='admin_views.urls')
3657. class TestInlineNotEditable(TestCase):
3658. 
3659.     @classmethod
3660.     def setUpTestData(cls):
3661.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3662. 
3663.     def setUp(self):
3664.         self.client.force_login(self.superuser)
3665. 
3666.     def test_GET_parent_add(self):
3667.         """
3668.         InlineModelAdmin broken?
3669.         """
3670.         response = self.client.get(reverse('admin:admin_views_parent_add'))
3671.         self.assertEqual(response.status_code, 200)
3672. 
3673. 
3674. @override_settings(ROOT_URLCONF='admin_views.urls')
3675. class AdminCustomQuerysetTest(TestCase):
3676. 
3677.     @classmethod
3678.     def setUpTestData(cls):
3679.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3680.         cls.pks = [EmptyModel.objects.create().id for i in range(3)]
3681. 
3682.     def setUp(self):
3683.         self.client.force_login(self.superuser)
3684.         self.super_login = {
3685.             REDIRECT_FIELD_NAME: reverse('admin:index'),
3686.             'username': 'super',
3687.             'password': 'secret',
3688.         }
3689. 
3690.     def test_changelist_view(self):
3691.         response = self.client.get(reverse('admin:admin_views_emptymodel_changelist'))
3692.         for i in self.pks:
3693.             if i > 1:
3694.                 self.assertContains(response, 'Primary key = %s' % i)
3695.             else:
3696.                 self.assertNotContains(response, 'Primary key = %s' % i)
3697. 
3698.     def test_changelist_view_count_queries(self):
3699.         # create 2 Person objects
3700.         Person.objects.create(name='person1', gender=1)
3701.         Person.objects.create(name='person2', gender=2)
3702.         changelist_url = reverse('admin:admin_views_person_changelist')
3703. 
3704.         # 5 queries are expected: 1 for the session, 1 for the user,
3705.         # 2 for the counts and 1 for the objects on the page
3706.         with self.assertNumQueries(5):
3707.             resp = self.client.get(changelist_url)
3708.             self.assertEqual(resp.context['selection_note'], '0 of 2 selected')
3709.             self.assertEqual(resp.context['selection_note_all'], 'All 2 selected')
3710.         with self.assertNumQueries(5):
3711.             extra = {'q': 'not_in_name'}
3712.             resp = self.client.get(changelist_url, extra)
3713.             self.assertEqual(resp.context['selection_note'], '0 of 0 selected')
3714.             self.assertEqual(resp.context['selection_note_all'], 'All 0 selected')
3715.         with self.assertNumQueries(5):
3716.             extra = {'q': 'person'}
3717.             resp = self.client.get(changelist_url, extra)
3718.             self.assertEqual(resp.context['selection_note'], '0 of 2 selected')
3719.             self.assertEqual(resp.context['selection_note_all'], 'All 2 selected')
3720.         with self.assertNumQueries(5):
3721.             extra = {'gender__exact': '1'}
3722.             resp = self.client.get(changelist_url, extra)
3723.             self.assertEqual(resp.context['selection_note'], '0 of 1 selected')
3724.             self.assertEqual(resp.context['selection_note_all'], '1 selected')
3725. 
3726.     def test_change_view(self):
3727.         for i in self.pks:
3728.             url = reverse('admin:admin_views_emptymodel_change', args=(i,))
3729.             response = self.client.get(url, follow=True)
3730.             if i > 1:
3731.                 self.assertEqual(response.status_code, 200)
3732.             else:
3733.                 self.assertRedirects(response, reverse('admin:index'))
3734.                 self.assertEqual(
3735.                     [m.message for m in response.context['messages']],
3736.                     ['empty model with ID “1” doesn’t exist. Perhaps it was deleted?']
3737.                 )
3738. 
3739.     def test_add_model_modeladmin_defer_qs(self):
3740.         # Test for #14529. defer() is used in ModelAdmin.get_queryset()
3741. 
3742.         # model has __str__ method
3743.         self.assertEqual(CoverLetter.objects.count(), 0)
3744.         # Emulate model instance creation via the admin
3745.         post_data = {
3746.             "author": "Candidate, Best",
3747.             "_save": "Save",
3748.         }
3749.         response = self.client.post(reverse('admin:admin_views_coverletter_add'), post_data, follow=True)
3750.         self.assertEqual(response.status_code, 200)
3751.         self.assertEqual(CoverLetter.objects.count(), 1)
3752.         # Message should contain non-ugly model verbose name
3753.         pk = CoverLetter.objects.all()[0].pk
3754.         self.assertContains(
3755.             response,
3756.             '<li class="success">The cover letter “<a href="%s">'
3757.             'Candidate, Best</a>” was added successfully.</li>' %
3758.             reverse('admin:admin_views_coverletter_change', args=(pk,)), html=True
3759.         )
3760. 
3761.         # model has no __str__ method
3762.         self.assertEqual(ShortMessage.objects.count(), 0)
3763.         # Emulate model instance creation via the admin
3764.         post_data = {
3765.             "content": "What's this SMS thing?",
3766.             "_save": "Save",
3767.         }
3768.         response = self.client.post(reverse('admin:admin_views_shortmessage_add'), post_data, follow=True)
3769.         self.assertEqual(response.status_code, 200)
3770.         self.assertEqual(ShortMessage.objects.count(), 1)
3771.         # Message should contain non-ugly model verbose name
3772.         sm = ShortMessage.objects.all()[0]
3773.         self.assertContains(
3774.             response,
3775.             '<li class="success">The short message “<a href="%s">'
3776.             '%s</a>” was added successfully.</li>' %
3777.             (reverse('admin:admin_views_shortmessage_change', args=(sm.pk,)), sm), html=True
3778.         )
3779. 
3780.     def test_add_model_modeladmin_only_qs(self):
3781.         # Test for #14529. only() is used in ModelAdmin.get_queryset()
3782. 
3783.         # model has __str__ method
3784.         self.assertEqual(Telegram.objects.count(), 0)
3785.         # Emulate model instance creation via the admin
3786.         post_data = {
3787.             "title": "Urgent telegram",
3788.             "_save": "Save",
3789.         }
3790.         response = self.client.post(reverse('admin:admin_views_telegram_add'), post_data, follow=True)
3791.         self.assertEqual(response.status_code, 200)
3792.         self.assertEqual(Telegram.objects.count(), 1)
3793.         # Message should contain non-ugly model verbose name
3794.         pk = Telegram.objects.all()[0].pk
3795.         self.assertContains(
3796.             response,
3797.             '<li class="success">The telegram “<a href="%s">'
3798.             'Urgent telegram</a>” was added successfully.</li>' %
3799.             reverse('admin:admin_views_telegram_change', args=(pk,)), html=True
3800.         )
3801. 
3802.         # model has no __str__ method
3803.         self.assertEqual(Paper.objects.count(), 0)
3804.         # Emulate model instance creation via the admin
3805.         post_data = {
3806.             "title": "My Modified Paper Title",
3807.             "_save": "Save",
3808.         }
3809.         response = self.client.post(reverse('admin:admin_views_paper_add'), post_data, follow=True)
3810.         self.assertEqual(response.status_code, 200)
3811.         self.assertEqual(Paper.objects.count(), 1)
3812.         # Message should contain non-ugly model verbose name
3813.         p = Paper.objects.all()[0]
3814.         self.assertContains(
3815.             response,
3816.             '<li class="success">The paper “<a href="%s">'
3817.             '%s</a>” was added successfully.</li>' %
3818.             (reverse('admin:admin_views_paper_change', args=(p.pk,)), p), html=True
3819.         )
3820. 
3821.     def test_edit_model_modeladmin_defer_qs(self):
3822.         # Test for #14529. defer() is used in ModelAdmin.get_queryset()
3823. 
3824.         # model has __str__ method
3825.         cl = CoverLetter.objects.create(author="John Doe")
3826.         self.assertEqual(CoverLetter.objects.count(), 1)
3827.         response = self.client.get(reverse('admin:admin_views_coverletter_change', args=(cl.pk,)))
3828.         self.assertEqual(response.status_code, 200)
3829.         # Emulate model instance edit via the admin
3830.         post_data = {
3831.             "author": "John Doe II",
3832.             "_save": "Save",
3833.         }
3834.         url = reverse('admin:admin_views_coverletter_change', args=(cl.pk,))
3835.         response = self.client.post(url, post_data, follow=True)
3836.         self.assertEqual(response.status_code, 200)
3837.         self.assertEqual(CoverLetter.objects.count(), 1)
3838.         # Message should contain non-ugly model verbose name. Instance
3839.         # representation is set by model's __str__()
3840.         self.assertContains(
3841.             response,
3842.             '<li class="success">The cover letter “<a href="%s">'
3843.             'John Doe II</a>” was changed successfully.</li>' %
3844.             reverse('admin:admin_views_coverletter_change', args=(cl.pk,)), html=True
3845.         )
3846. 
3847.         # model has no __str__ method
3848.         sm = ShortMessage.objects.create(content="This is expensive")
3849.         self.assertEqual(ShortMessage.objects.count(), 1)
3850.         response = self.client.get(reverse('admin:admin_views_shortmessage_change', args=(sm.pk,)))
3851.         self.assertEqual(response.status_code, 200)
3852.         # Emulate model instance edit via the admin
3853.         post_data = {
3854.             "content": "Too expensive",
3855.             "_save": "Save",
3856.         }
3857.         url = reverse('admin:admin_views_shortmessage_change', args=(sm.pk,))
3858.         response = self.client.post(url, post_data, follow=True)
3859.         self.assertEqual(response.status_code, 200)
3860.         self.assertEqual(ShortMessage.objects.count(), 1)
3861.         # Message should contain non-ugly model verbose name. The ugly(!)
3862.         # instance representation is set by __str__().
3863.         self.assertContains(
3864.             response,
3865.             '<li class="success">The short message “<a href="%s">'
3866.             '%s</a>” was changed successfully.</li>' %
3867.             (reverse('admin:admin_views_shortmessage_change', args=(sm.pk,)), sm), html=True
3868.         )
3869. 
3870.     def test_edit_model_modeladmin_only_qs(self):
3871.         # Test for #14529. only() is used in ModelAdmin.get_queryset()
3872. 
3873.         # model has __str__ method
3874.         t = Telegram.objects.create(title="First Telegram")
3875.         self.assertEqual(Telegram.objects.count(), 1)
3876.         response = self.client.get(reverse('admin:admin_views_telegram_change', args=(t.pk,)))
3877.         self.assertEqual(response.status_code, 200)
3878.         # Emulate model instance edit via the admin
3879.         post_data = {
3880.             "title": "Telegram without typo",
3881.             "_save": "Save",
3882.         }
3883.         response = self.client.post(reverse('admin:admin_views_telegram_change', args=(t.pk,)), post_data, follow=True)
3884.         self.assertEqual(response.status_code, 200)
3885.         self.assertEqual(Telegram.objects.count(), 1)
3886.         # Message should contain non-ugly model verbose name. The instance
3887.         # representation is set by model's __str__()
3888.         self.assertContains(
3889.             response,
3890.             '<li class="success">The telegram “<a href="%s">'
3891.             'Telegram without typo</a>” was changed successfully.</li>' %
3892.             reverse('admin:admin_views_telegram_change', args=(t.pk,)), html=True
3893.         )
3894. 
3895.         # model has no __str__ method
3896.         p = Paper.objects.create(title="My Paper Title")
3897.         self.assertEqual(Paper.objects.count(), 1)
3898.         response = self.client.get(reverse('admin:admin_views_paper_change', args=(p.pk,)))
3899.         self.assertEqual(response.status_code, 200)
3900.         # Emulate model instance edit via the admin
3901.         post_data = {
3902.             "title": "My Modified Paper Title",
3903.             "_save": "Save",
3904.         }
3905.         response = self.client.post(reverse('admin:admin_views_paper_change', args=(p.pk,)), post_data, follow=True)
3906.         self.assertEqual(response.status_code, 200)
3907.         self.assertEqual(Paper.objects.count(), 1)
3908.         # Message should contain non-ugly model verbose name. The ugly(!)
3909.         # instance representation is set by __str__().
3910.         self.assertContains(
3911.             response,
3912.             '<li class="success">The paper “<a href="%s">'
3913.             '%s</a>” was changed successfully.</li>' %
3914.             (reverse('admin:admin_views_paper_change', args=(p.pk,)), p), html=True
3915.         )
3916. 
3917.     def test_history_view_custom_qs(self):
3918.         """
3919.         Custom querysets are considered for the admin history view.
3920.         """
3921.         self.client.post(reverse('admin:login'), self.super_login)
3922.         FilteredManager.objects.create(pk=1)
3923.         FilteredManager.objects.create(pk=2)
3924.         response = self.client.get(reverse('admin:admin_views_filteredmanager_changelist'))
3925.         self.assertContains(response, "PK=1")
3926.         self.assertContains(response, "PK=2")
3927.         self.assertEqual(
3928.             self.client.get(reverse('admin:admin_views_filteredmanager_history', args=(1,))).status_code, 200
3929.         )
3930.         self.assertEqual(
3931.             self.client.get(reverse('admin:admin_views_filteredmanager_history', args=(2,))).status_code, 200
3932.         )
3933. 
3934. 
3935. @override_settings(ROOT_URLCONF='admin_views.urls')
3936. class AdminInlineFileUploadTest(TestCase):
3937. 
3938.     @classmethod
3939.     def setUpTestData(cls):
3940.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3941.         file1 = tempfile.NamedTemporaryFile(suffix=".file1")
3942.         file1.write(b'a' * (2 ** 21))
3943.         filename = file1.name
3944.         file1.close()
3945.         cls.gallery = Gallery.objects.create(name='Test Gallery')
3946.         cls.picture = Picture.objects.create(
3947.             name='Test Picture',
3948.             image=filename,
3949.             gallery=cls.gallery,
3950.         )
3951. 
3952.     def setUp(self):
3953.         self.client.force_login(self.superuser)
3954. 
3955.     def test_form_has_multipart_enctype(self):
3956.         response = self.client.get(
3957.             reverse('admin:admin_views_gallery_change', args=(self.gallery.id,))
3958.         )
3959.         self.assertIs(response.context['has_file_field'], True)
3960.         self.assertContains(response, MULTIPART_ENCTYPE)
3961. 
3962.     def test_inline_file_upload_edit_validation_error_post(self):
3963.         """
3964.         Inline file uploads correctly display prior data (#10002).
3965.         """
3966.         post_data = {
3967.             "name": "Test Gallery",
3968.             "pictures-TOTAL_FORMS": "2",
3969.             "pictures-INITIAL_FORMS": "1",
3970.             "pictures-MAX_NUM_FORMS": "0",
3971.             "pictures-0-id": str(self.picture.id),
3972.             "pictures-0-gallery": str(self.gallery.id),
3973.             "pictures-0-name": "Test Picture",
3974.             "pictures-0-image": "",
3975.             "pictures-1-id": "",
3976.             "pictures-1-gallery": str(self.gallery.id),
3977.             "pictures-1-name": "Test Picture 2",
3978.             "pictures-1-image": "",
3979.         }
3980.         response = self.client.post(
3981.             reverse('admin:admin_views_gallery_change', args=(self.gallery.id,)), post_data
3982.         )
3983.         self.assertContains(response, b"Currently")
3984. 
3985. 
3986. @override_settings(ROOT_URLCONF='admin_views.urls')
3987. class AdminInlineTests(TestCase):
3988. 
3989.     @classmethod
3990.     def setUpTestData(cls):
3991.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3992.         cls.collector = Collector.objects.create(pk=1, name='John Fowles')
3993. 
3994.     def setUp(self):
3995.         self.post_data = {
3996.             "name": "Test Name",
3997. 
3998.             "widget_set-TOTAL_FORMS": "3",
3999.             "widget_set-INITIAL_FORMS": "0",
4000.             "widget_set-MAX_NUM_FORMS": "0",
4001.             "widget_set-0-id": "",
4002.             "widget_set-0-owner": "1",
4003.             "widget_set-0-name": "",
4004.             "widget_set-1-id": "",
4005.             "widget_set-1-owner": "1",
4006.             "widget_set-1-name": "",
4007.             "widget_set-2-id": "",
4008.             "widget_set-2-owner": "1",
4009.             "widget_set-2-name": "",
4010. 
4011.             "doohickey_set-TOTAL_FORMS": "3",
4012.             "doohickey_set-INITIAL_FORMS": "0",
4013.             "doohickey_set-MAX_NUM_FORMS": "0",
4014.             "doohickey_set-0-owner": "1",
4015.             "doohickey_set-0-code": "",
4016.             "doohickey_set-0-name": "",
4017.             "doohickey_set-1-owner": "1",
4018.             "doohickey_set-1-code": "",
4019.             "doohickey_set-1-name": "",
4020.             "doohickey_set-2-owner": "1",
4021.             "doohickey_set-2-code": "",
4022.             "doohickey_set-2-name": "",
4023. 
4024.             "grommet_set-TOTAL_FORMS": "3",
4025.             "grommet_set-INITIAL_FORMS": "0",
4026.             "grommet_set-MAX_NUM_FORMS": "0",
4027.             "grommet_set-0-code": "",
4028.             "grommet_set-0-owner": "1",
4029.             "grommet_set-0-name": "",
4030.             "grommet_set-1-code": "",
4031.             "grommet_set-1-owner": "1",
4032.             "grommet_set-1-name": "",
4033.             "grommet_set-2-code": "",
4034.             "grommet_set-2-owner": "1",
4035.             "grommet_set-2-name": "",
4036. 
4037.             "whatsit_set-TOTAL_FORMS": "3",
4038.             "whatsit_set-INITIAL_FORMS": "0",
4039.             "whatsit_set-MAX_NUM_FORMS": "0",
4040.             "whatsit_set-0-owner": "1",
4041.             "whatsit_set-0-index": "",
4042.             "whatsit_set-0-name": "",
4043.             "whatsit_set-1-owner": "1",
4044.             "whatsit_set-1-index": "",
4045.             "whatsit_set-1-name": "",
4046.             "whatsit_set-2-owner": "1",
4047.             "whatsit_set-2-index": "",
4048.             "whatsit_set-2-name": "",
4049. 
4050.             "fancydoodad_set-TOTAL_FORMS": "3",
4051.             "fancydoodad_set-INITIAL_FORMS": "0",
4052.             "fancydoodad_set-MAX_NUM_FORMS": "0",
4053.             "fancydoodad_set-0-doodad_ptr": "",
4054.             "fancydoodad_set-0-owner": "1",
4055.             "fancydoodad_set-0-name": "",
4056.             "fancydoodad_set-0-expensive": "on",
4057.             "fancydoodad_set-1-doodad_ptr": "",
4058.             "fancydoodad_set-1-owner": "1",
4059.             "fancydoodad_set-1-name": "",
4060.             "fancydoodad_set-1-expensive": "on",
4061.             "fancydoodad_set-2-doodad_ptr": "",
4062.             "fancydoodad_set-2-owner": "1",
4063.             "fancydoodad_set-2-name": "",
4064.             "fancydoodad_set-2-expensive": "on",
4065. 
4066.             "category_set-TOTAL_FORMS": "3",
4067.             "category_set-INITIAL_FORMS": "0",
4068.             "category_set-MAX_NUM_FORMS": "0",
4069.             "category_set-0-order": "",
4070.             "category_set-0-id": "",
4071.             "category_set-0-collector": "1",
4072.             "category_set-1-order": "",
4073.             "category_set-1-id": "",
4074.             "category_set-1-collector": "1",
4075.             "category_set-2-order": "",
4076.             "category_set-2-id": "",
4077.             "category_set-2-collector": "1",
4078.         }
4079. 
4080.         self.client.force_login(self.superuser)
4081. 
4082.     def test_simple_inline(self):
4083.         "A simple model can be saved as inlines"
4084.         # First add a new inline
4085.         self.post_data['widget_set-0-name'] = "Widget 1"
4086.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4087.         response = self.client.post(collector_url, self.post_data)
4088.         self.assertEqual(response.status_code, 302)
4089.         self.assertEqual(Widget.objects.count(), 1)
4090.         self.assertEqual(Widget.objects.all()[0].name, "Widget 1")
4091.         widget_id = Widget.objects.all()[0].id
4092. 
4093.         # The PK link exists on the rendered form
4094.         response = self.client.get(collector_url)
4095.         self.assertContains(response, 'name="widget_set-0-id"')
4096. 
4097.         # No file or image fields, no enctype on the forms
4098.         self.assertIs(response.context['has_file_field'], False)
4099.         self.assertNotContains(response, MULTIPART_ENCTYPE)
4100. 
4101.         # Now resave that inline
4102.         self.post_data['widget_set-INITIAL_FORMS'] = "1"
4103.         self.post_data['widget_set-0-id'] = str(widget_id)
4104.         self.post_data['widget_set-0-name'] = "Widget 1"
4105.         response = self.client.post(collector_url, self.post_data)
4106.         self.assertEqual(response.status_code, 302)
4107.         self.assertEqual(Widget.objects.count(), 1)
4108.         self.assertEqual(Widget.objects.all()[0].name, "Widget 1")
4109. 
4110.         # Now modify that inline
4111.         self.post_data['widget_set-INITIAL_FORMS'] = "1"
4112.         self.post_data['widget_set-0-id'] = str(widget_id)
4113.         self.post_data['widget_set-0-name'] = "Widget 1 Updated"
4114.         response = self.client.post(collector_url, self.post_data)
4115.         self.assertEqual(response.status_code, 302)
4116.         self.assertEqual(Widget.objects.count(), 1)
4117.         self.assertEqual(Widget.objects.all()[0].name, "Widget 1 Updated")
4118. 
4119.     def test_simple_inline_permissions(self):
4120.         """
4121.         Changes aren't allowed without change permissions for the inline object.
4122.         """
4123.         # User who can view Articles
4124.         permissionuser = User.objects.create_user(
4125.             username='permissionuser', password='secret',
4126.             email='vuser@example.com', is_staff=True,
4127.         )
4128.         permissionuser.user_permissions.add(get_perm(Collector, get_permission_codename('view', Collector._meta)))
4129.         permissionuser.user_permissions.add(get_perm(Widget, get_permission_codename('view', Widget._meta)))
4130.         self.client.force_login(permissionuser)
4131.         # Without add permission, a new inline can't be added.
4132.         self.post_data['widget_set-0-name'] = 'Widget 1'
4133.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4134.         response = self.client.post(collector_url, self.post_data)
4135.         self.assertEqual(response.status_code, 302)
4136.         self.assertEqual(Widget.objects.count(), 0)
4137.         # But after adding the permission it can.
4138.         permissionuser.user_permissions.add(get_perm(Widget, get_permission_codename('add', Widget._meta)))
4139.         self.post_data['widget_set-0-name'] = "Widget 1"
4140.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4141.         response = self.client.post(collector_url, self.post_data)
4142.         self.assertEqual(response.status_code, 302)
4143.         self.assertEqual(Widget.objects.count(), 1)
4144.         self.assertEqual(Widget.objects.first().name, 'Widget 1')
4145.         widget_id = Widget.objects.first().id
4146.         # Without the change permission, a POST doesn't change the object.
4147.         self.post_data['widget_set-INITIAL_FORMS'] = '1'
4148.         self.post_data['widget_set-0-id'] = str(widget_id)
4149.         self.post_data['widget_set-0-name'] = 'Widget 1 Updated'
4150.         response = self.client.post(collector_url, self.post_data)
4151.         self.assertEqual(response.status_code, 302)
4152.         self.assertEqual(Widget.objects.count(), 1)
4153.         self.assertEqual(Widget.objects.first().name, 'Widget 1')
4154.         # Now adding the change permission and editing works.
4155.         permissionuser.user_permissions.remove(get_perm(Widget, get_permission_codename('add', Widget._meta)))
4156.         permissionuser.user_permissions.add(get_perm(Widget, get_permission_codename('change', Widget._meta)))
4157.         self.post_data['widget_set-INITIAL_FORMS'] = '1'
4158.         self.post_data['widget_set-0-id'] = str(widget_id)
4159.         self.post_data['widget_set-0-name'] = 'Widget 1 Updated'
4160.         response = self.client.post(collector_url, self.post_data)
4161.         self.assertEqual(response.status_code, 302)
4162.         self.assertEqual(Widget.objects.count(), 1)
4163.         self.assertEqual(Widget.objects.first().name, 'Widget 1 Updated')
4164. 
4165.     def test_explicit_autofield_inline(self):
4166.         "A model with an explicit autofield primary key can be saved as inlines. Regression for #8093"
4167.         # First add a new inline
4168.         self.post_data['grommet_set-0-name'] = "Grommet 1"
4169.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4170.         response = self.client.post(collector_url, self.post_data)
4171.         self.assertEqual(response.status_code, 302)
4172.         self.assertEqual(Grommet.objects.count(), 1)
4173.         self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1")
4174. 
4175.         # The PK link exists on the rendered form
4176.         response = self.client.get(collector_url)
4177.         self.assertContains(response, 'name="grommet_set-0-code"')
4178. 
4179.         # Now resave that inline
4180.         self.post_data['grommet_set-INITIAL_FORMS'] = "1"
4181.         self.post_data['grommet_set-0-code'] = str(Grommet.objects.all()[0].code)
4182.         self.post_data['grommet_set-0-name'] = "Grommet 1"
4183.         response = self.client.post(collector_url, self.post_data)
4184.         self.assertEqual(response.status_code, 302)
4185.         self.assertEqual(Grommet.objects.count(), 1)
4186.         self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1")
4187. 
4188.         # Now modify that inline
4189.         self.post_data['grommet_set-INITIAL_FORMS'] = "1"
4190.         self.post_data['grommet_set-0-code'] = str(Grommet.objects.all()[0].code)
4191.         self.post_data['grommet_set-0-name'] = "Grommet 1 Updated"
4192.         response = self.client.post(collector_url, self.post_data)
4193.         self.assertEqual(response.status_code, 302)
4194.         self.assertEqual(Grommet.objects.count(), 1)
4195.         self.assertEqual(Grommet.objects.all()[0].name, "Grommet 1 Updated")
4196. 
4197.     def test_char_pk_inline(self):
4198.         "A model with a character PK can be saved as inlines. Regression for #10992"
4199.         # First add a new inline
4200.         self.post_data['doohickey_set-0-code'] = "DH1"
4201.         self.post_data['doohickey_set-0-name'] = "Doohickey 1"
4202.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4203.         response = self.client.post(collector_url, self.post_data)
4204.         self.assertEqual(response.status_code, 302)
4205.         self.assertEqual(DooHickey.objects.count(), 1)
4206.         self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1")
4207. 
4208.         # The PK link exists on the rendered form
4209.         response = self.client.get(collector_url)
4210.         self.assertContains(response, 'name="doohickey_set-0-code"')
4211. 
4212.         # Now resave that inline
4213.         self.post_data['doohickey_set-INITIAL_FORMS'] = "1"
4214.         self.post_data['doohickey_set-0-code'] = "DH1"
4215.         self.post_data['doohickey_set-0-name'] = "Doohickey 1"
4216.         response = self.client.post(collector_url, self.post_data)
4217.         self.assertEqual(response.status_code, 302)
4218.         self.assertEqual(DooHickey.objects.count(), 1)
4219.         self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1")
4220. 
4221.         # Now modify that inline
4222.         self.post_data['doohickey_set-INITIAL_FORMS'] = "1"
4223.         self.post_data['doohickey_set-0-code'] = "DH1"
4224.         self.post_data['doohickey_set-0-name'] = "Doohickey 1 Updated"
4225.         response = self.client.post(collector_url, self.post_data)
4226.         self.assertEqual(response.status_code, 302)
4227.         self.assertEqual(DooHickey.objects.count(), 1)
4228.         self.assertEqual(DooHickey.objects.all()[0].name, "Doohickey 1 Updated")
4229. 
4230.     def test_integer_pk_inline(self):
4231.         "A model with an integer PK can be saved as inlines. Regression for #10992"
4232.         # First add a new inline
4233.         self.post_data['whatsit_set-0-index'] = "42"
4234.         self.post_data['whatsit_set-0-name'] = "Whatsit 1"
4235.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4236.         response = self.client.post(collector_url, self.post_data)
4237.         self.assertEqual(response.status_code, 302)
4238.         self.assertEqual(Whatsit.objects.count(), 1)
4239.         self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1")
4240. 
4241.         # The PK link exists on the rendered form
4242.         response = self.client.get(collector_url)
4243.         self.assertContains(response, 'name="whatsit_set-0-index"')
4244. 
4245.         # Now resave that inline
4246.         self.post_data['whatsit_set-INITIAL_FORMS'] = "1"
4247.         self.post_data['whatsit_set-0-index'] = "42"
4248.         self.post_data['whatsit_set-0-name'] = "Whatsit 1"
4249.         response = self.client.post(collector_url, self.post_data)
4250.         self.assertEqual(response.status_code, 302)
4251.         self.assertEqual(Whatsit.objects.count(), 1)
4252.         self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1")
4253. 
4254.         # Now modify that inline
4255.         self.post_data['whatsit_set-INITIAL_FORMS'] = "1"
4256.         self.post_data['whatsit_set-0-index'] = "42"
4257.         self.post_data['whatsit_set-0-name'] = "Whatsit 1 Updated"
4258.         response = self.client.post(collector_url, self.post_data)
4259.         self.assertEqual(response.status_code, 302)
4260.         self.assertEqual(Whatsit.objects.count(), 1)
4261.         self.assertEqual(Whatsit.objects.all()[0].name, "Whatsit 1 Updated")
4262. 
4263.     def test_inherited_inline(self):
4264.         "An inherited model can be saved as inlines. Regression for #11042"
4265.         # First add a new inline
4266.         self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1"
4267.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4268.         response = self.client.post(collector_url, self.post_data)
4269.         self.assertEqual(response.status_code, 302)
4270.         self.assertEqual(FancyDoodad.objects.count(), 1)
4271.         self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1")
4272.         doodad_pk = FancyDoodad.objects.all()[0].pk
4273. 
4274.         # The PK link exists on the rendered form
4275.         response = self.client.get(collector_url)
4276.         self.assertContains(response, 'name="fancydoodad_set-0-doodad_ptr"')
4277. 
4278.         # Now resave that inline
4279.         self.post_data['fancydoodad_set-INITIAL_FORMS'] = "1"
4280.         self.post_data['fancydoodad_set-0-doodad_ptr'] = str(doodad_pk)
4281.         self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1"
4282.         response = self.client.post(collector_url, self.post_data)
4283.         self.assertEqual(response.status_code, 302)
4284.         self.assertEqual(FancyDoodad.objects.count(), 1)
4285.         self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1")
4286. 
4287.         # Now modify that inline
4288.         self.post_data['fancydoodad_set-INITIAL_FORMS'] = "1"
4289.         self.post_data['fancydoodad_set-0-doodad_ptr'] = str(doodad_pk)
4290.         self.post_data['fancydoodad_set-0-name'] = "Fancy Doodad 1 Updated"
4291.         response = self.client.post(collector_url, self.post_data)
4292.         self.assertEqual(response.status_code, 302)
4293.         self.assertEqual(FancyDoodad.objects.count(), 1)
4294.         self.assertEqual(FancyDoodad.objects.all()[0].name, "Fancy Doodad 1 Updated")
4295. 
4296.     def test_ordered_inline(self):
4297.         """
4298.         An inline with an editable ordering fields is updated correctly.
4299.         """
4300.         # Create some objects with an initial ordering
4301.         Category.objects.create(id=1, order=1, collector=self.collector)
4302.         Category.objects.create(id=2, order=2, collector=self.collector)
4303.         Category.objects.create(id=3, order=0, collector=self.collector)
4304.         Category.objects.create(id=4, order=0, collector=self.collector)
4305. 
4306.         # NB: The order values must be changed so that the items are reordered.
4307.         self.post_data.update({
4308.             "name": "Frederick Clegg",
4309. 
4310.             "category_set-TOTAL_FORMS": "7",
4311.             "category_set-INITIAL_FORMS": "4",
4312.             "category_set-MAX_NUM_FORMS": "0",
4313. 
4314.             "category_set-0-order": "14",
4315.             "category_set-0-id": "1",
4316.             "category_set-0-collector": "1",
4317. 
4318.             "category_set-1-order": "13",
4319.             "category_set-1-id": "2",
4320.             "category_set-1-collector": "1",
4321. 
4322.             "category_set-2-order": "1",
4323.             "category_set-2-id": "3",
4324.             "category_set-2-collector": "1",
4325. 
4326.             "category_set-3-order": "0",
4327.             "category_set-3-id": "4",
4328.             "category_set-3-collector": "1",
4329. 
4330.             "category_set-4-order": "",
4331.             "category_set-4-id": "",
4332.             "category_set-4-collector": "1",
4333. 
4334.             "category_set-5-order": "",
4335.             "category_set-5-id": "",
4336.             "category_set-5-collector": "1",
4337. 
4338.             "category_set-6-order": "",
4339.             "category_set-6-id": "",
4340.             "category_set-6-collector": "1",
4341.         })
4342.         collector_url = reverse('admin:admin_views_collector_change', args=(self.collector.pk,))
4343.         response = self.client.post(collector_url, self.post_data)
4344.         # Successful post will redirect
4345.         self.assertEqual(response.status_code, 302)
4346. 
4347.         # The order values have been applied to the right objects
4348.         self.assertEqual(self.collector.category_set.count(), 4)
4349.         self.assertEqual(Category.objects.get(id=1).order, 14)
4350.         self.assertEqual(Category.objects.get(id=2).order, 13)
4351.         self.assertEqual(Category.objects.get(id=3).order, 1)
4352.         self.assertEqual(Category.objects.get(id=4).order, 0)
4353. 
4354. 
4355. @override_settings(ROOT_URLCONF='admin_views.urls')
4356. class NeverCacheTests(TestCase):
4357. 
4358.     @classmethod
4359.     def setUpTestData(cls):
4360.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
4361.         cls.s1 = Section.objects.create(name='Test section')
4362. 
4363.     def setUp(self):
4364.         self.client.force_login(self.superuser)
4365. 
4366.     def test_admin_index(self):
4367.         "Check the never-cache status of the main index"
4368.         response = self.client.get(reverse('admin:index'))
4369.         self.assertEqual(get_max_age(response), 0)
4370. 
4371.     def test_app_index(self):
4372.         "Check the never-cache status of an application index"
4373.         response = self.client.get(reverse('admin:app_list', args=('admin_views',)))
4374.         self.assertEqual(get_max_age(response), 0)
4375. 
4376.     def test_model_index(self):
4377.         "Check the never-cache status of a model index"
4378.         response = self.client.get(reverse('admin:admin_views_fabric_changelist'))
4379.         self.assertEqual(get_max_age(response), 0)
4380. 
4381.     def test_model_add(self):
4382.         "Check the never-cache status of a model add page"
4383.         response = self.client.get(reverse('admin:admin_views_fabric_add'))
4384.         self.assertEqual(get_max_age(response), 0)
4385. 
4386.     def test_model_view(self):
4387.         "Check the never-cache status of a model edit page"
4388.         response = self.client.get(reverse('admin:admin_views_section_change', args=(self.s1.pk,)))
4389.         self.assertEqual(get_max_age(response), 0)
4390. 
4391.     def test_model_history(self):
4392.         "Check the never-cache status of a model history page"
4393.         response = self.client.get(reverse('admin:admin_views_section_history', args=(self.s1.pk,)))
4394.         self.assertEqual(get_max_age(response), 0)
4395. 
4396.     def test_model_delete(self):
4397.         "Check the never-cache status of a model delete page"
4398.         response = self.client.get(reverse('admin:admin_views_section_delete', args=(self.s1.pk,)))
4399.         self.assertEqual(get_max_age(response), 0)
4400. 
4401.     def test_login(self):
4402.         "Check the never-cache status of login views"
4403.         self.client.logout()
4404.         response = self.client.get(reverse('admin:index'))
4405.         self.assertEqual(get_max_age(response), 0)
4406. 
4407.     def test_logout(self):
4408.         "Check the never-cache status of logout view"
4409.         response = self.client.get(reverse('admin:logout'))
4410.         self.assertEqual(get_max_age(response), 0)
4411. 
4412.     def test_password_change(self):
4413.         "Check the never-cache status of the password change view"
4414.         self.client.logout()
4415.         response = self.client.get(reverse('admin:password_change'))
4416.         self.assertIsNone(get_max_age(response))
4417. 
4418.     def test_password_change_done(self):
4419.         "Check the never-cache status of the password change done view"
4420.         response = self.client.get(reverse('admin:password_change_done'))
4421.         self.assertIsNone(get_max_age(response))
4422. 
4423.     def test_JS_i18n(self):
4424.         "Check the never-cache status of the JavaScript i18n view"
4425.         response = self.client.get(reverse('admin:jsi18n'))
4426.         self.assertIsNone(get_max_age(response))
4427. 
4428. 
4429. @override_settings(ROOT_URLCONF='admin_views.urls')
4430. class PrePopulatedTest(TestCase):
4431. 
4432.     @classmethod
4433.     def setUpTestData(cls):
4434.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
4435.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
4436. 
4437.     def setUp(self):
4438.         self.client.force_login(self.superuser)
4439. 
4440.     def test_prepopulated_on(self):
4441.         response = self.client.get(reverse('admin:admin_views_prepopulatedpost_add'))
4442.         self.assertContains(response, "&quot;id&quot;: &quot;#id_slug&quot;")
4443.         self.assertContains(response, "&quot;dependency_ids&quot;: [&quot;#id_title&quot;]")
4444.         self.assertContains(response, "&quot;id&quot;: &quot;#id_prepopulatedsubpost_set-0-subslug&quot;")
4445. 
4446.     def test_prepopulated_off(self):
4447.         response = self.client.get(reverse('admin:admin_views_prepopulatedpost_change', args=(self.p1.pk,)))
4448.         self.assertContains(response, "A Long Title")
4449.         self.assertNotContains(response, "&quot;id&quot;: &quot;#id_slug&quot;")
4450.         self.assertNotContains(response, "&quot;dependency_ids&quot;: [&quot;#id_title&quot;]")
4451.         self.assertNotContains(
4452.             response,
4453.             "&quot;id&quot;: &quot;#id_prepopulatedsubpost_set-0-subslug&quot;"
4454.         )
4455. 
4456.     @override_settings(USE_THOUSAND_SEPARATOR=True, USE_L10N=True)
4457.     def test_prepopulated_maxlength_localized(self):
4458.         """
4459.         Regression test for #15938: if USE_THOUSAND_SEPARATOR is set, make sure
4460.         that maxLength (in the JavaScript) is rendered without separators.
4461.         """
4462.         response = self.client.get(reverse('admin:admin_views_prepopulatedpostlargeslug_add'))
4463.         self.assertContains(response, "&quot;maxLength&quot;: 1000")  # instead of 1,000
4464. 
4465.     def test_view_only_add_form(self):
4466.         """
4467.         PrePopulatedPostReadOnlyAdmin.prepopulated_fields includes 'slug'
4468.         which is present in the add view, even if the
4469.         ModelAdmin.has_change_permission() returns False.
4470.         """
4471.         response = self.client.get(reverse('admin7:admin_views_prepopulatedpost_add'))
4472.         self.assertContains(response, 'data-prepopulated-fields=')
4473.         self.assertContains(response, '&quot;id&quot;: &quot;#id_slug&quot;')
4474. 
4475.     def test_view_only_change_form(self):
4476.         """
4477.         PrePopulatedPostReadOnlyAdmin.prepopulated_fields includes 'slug'. That
4478.         doesn't break a view-only change view.
4479.         """
4480.         response = self.client.get(reverse('admin7:admin_views_prepopulatedpost_change', args=(self.p1.pk,)))
4481.         self.assertContains(response, 'data-prepopulated-fields="[]"')
4482.         self.assertContains(response, '<div class="readonly">%s</div>' % self.p1.slug)
4483. 
4484. 
4485. @override_settings(ROOT_URLCONF='admin_views.urls')
4486. class SeleniumTests(AdminSeleniumTestCase):
4487. 
4488.     available_apps = ['admin_views'] + AdminSeleniumTestCase.available_apps
4489. 
4490.     def setUp(self):
4491.         self.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
4492.         self.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
4493. 
4494.     def test_prepopulated_fields(self):
4495.         """
4496.         The JavaScript-automated prepopulated fields work with the main form
4497.         and with stacked and tabular inlines.
4498.         Refs #13068, #9264, #9983, #9784.
4499.         """
4500.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4501.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_mainprepopulated_add'))
4502.         self.wait_for('.select2')
4503. 
4504.         # Main form ----------------------------------------------------------
4505.         self.selenium.find_element_by_id('id_pubdate').send_keys('2012-02-18')
4506.         self.get_select_option('#id_status', 'option two').click()
4507.         self.selenium.find_element_by_id('id_name').send_keys(' this is the mAin nÀMë and it\'s awεšomeııı')
4508.         slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
4509.         slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
4510.         slug3 = self.selenium.find_element_by_id('id_slug3').get_attribute('value')
4511.         self.assertEqual(slug1, 'main-name-and-its-awesomeiii-2012-02-18')
4512.         self.assertEqual(slug2, 'option-two-main-name-and-its-awesomeiii')
4513.         self.assertEqual(slug3, 'this-is-the-main-n\xe0m\xeb-and-its-aw\u03b5\u0161ome\u0131\u0131\u0131')
4514. 
4515.         # Stacked inlines ----------------------------------------------------
4516.         # Initial inline
4517.         self.selenium.find_element_by_id('id_relatedprepopulated_set-0-pubdate').send_keys('2011-12-17')
4518.         self.get_select_option('#id_relatedprepopulated_set-0-status', 'option one').click()
4519.         self.selenium.find_element_by_id('id_relatedprepopulated_set-0-name').send_keys(
4520.             ' here is a sŤāÇkeð   inline !  '
4521.         )
4522.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-0-slug1').get_attribute('value')
4523.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-0-slug2').get_attribute('value')
4524.         self.assertEqual(slug1, 'here-stacked-inline-2011-12-17')
4525.         self.assertEqual(slug2, 'option-one-here-stacked-inline')
4526.         initial_select2_inputs = self.selenium.find_elements_by_class_name('select2-selection')
4527.         # Inline formsets have empty/invisible forms.
4528.         # Only the 4 visible select2 inputs are initialized.
4529.         num_initial_select2_inputs = len(initial_select2_inputs)
4530.         self.assertEqual(num_initial_select2_inputs, 4)
4531. 
4532.         # Add an inline
4533.         self.selenium.find_elements_by_link_text('Add another Related prepopulated')[0].click()
4534.         self.assertEqual(
4535.             len(self.selenium.find_elements_by_class_name('select2-selection')),
4536.             num_initial_select2_inputs + 2
4537.         )
4538.         self.selenium.find_element_by_id('id_relatedprepopulated_set-1-pubdate').send_keys('1999-01-25')
4539.         self.get_select_option('#id_relatedprepopulated_set-1-status', 'option two').click()
4540.         self.selenium.find_element_by_id('id_relatedprepopulated_set-1-name').send_keys(
4541.             ' now you haVe anöther   sŤāÇkeð  inline with a very ... '
4542.             'loooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooog text... '
4543.         )
4544.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-1-slug1').get_attribute('value')
4545.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-1-slug2').get_attribute('value')
4546.         # 50 characters maximum for slug1 field
4547.         self.assertEqual(slug1, 'now-you-have-another-stacked-inline-very-loooooooo')
4548.         # 60 characters maximum for slug2 field
4549.         self.assertEqual(slug2, 'option-two-now-you-have-another-stacked-inline-very-looooooo')
4550. 
4551.         # Tabular inlines ----------------------------------------------------
4552.         # Initial inline
4553.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-pubdate').send_keys('1234-12-07')
4554.         self.get_select_option('#id_relatedprepopulated_set-2-0-status', 'option two').click()
4555.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-name').send_keys(
4556.             'And now, with a tÃbűlaŘ inline !!!'
4557.         )
4558.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-slug1').get_attribute('value')
4559.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-0-slug2').get_attribute('value')
4560.         self.assertEqual(slug1, 'and-now-tabular-inline-1234-12-07')
4561.         self.assertEqual(slug2, 'option-two-and-now-tabular-inline')
4562. 
4563.         # Add an inline
4564.         self.selenium.find_elements_by_link_text('Add another Related prepopulated')[1].click()
4565.         self.assertEqual(
4566.             len(self.selenium.find_elements_by_class_name('select2-selection')),
4567.             num_initial_select2_inputs + 4
4568.         )
4569.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-pubdate').send_keys('1981-08-22')
4570.         self.get_select_option('#id_relatedprepopulated_set-2-1-status', 'option one').click()
4571.         self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-name').send_keys(
4572.             r'a tÃbűlaŘ inline with ignored ;"&*^\%$#@-/`~ characters'
4573.         )
4574.         slug1 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-slug1').get_attribute('value')
4575.         slug2 = self.selenium.find_element_by_id('id_relatedprepopulated_set-2-1-slug2').get_attribute('value')
4576.         self.assertEqual(slug1, 'tabular-inline-ignored-characters-1981-08-22')
4577.         self.assertEqual(slug2, 'option-one-tabular-inline-ignored-characters')
4578.         # Add an inline without an initial inline.
4579.         # The button is outside of the browser frame.
4580.         self.selenium.execute_script("window.scrollTo(0, document.body.scrollHeight);")
4581.         self.selenium.find_elements_by_link_text('Add another Related prepopulated')[2].click()
4582.         self.assertEqual(
4583.             len(self.selenium.find_elements_by_class_name('select2-selection')),
4584.             num_initial_select2_inputs + 6
4585.         )
4586.         # Save and check that everything is properly stored in the database
4587.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4588.         self.wait_page_loaded()
4589.         self.assertEqual(MainPrepopulated.objects.all().count(), 1)
4590.         MainPrepopulated.objects.get(
4591.             name=' this is the mAin nÀMë and it\'s awεšomeııı',
4592.             pubdate='2012-02-18',
4593.             status='option two',
4594.             slug1='main-name-and-its-awesomeiii-2012-02-18',
4595.             slug2='option-two-main-name-and-its-awesomeiii',
4596.         )
4597.         self.assertEqual(RelatedPrepopulated.objects.all().count(), 4)
4598.         RelatedPrepopulated.objects.get(
4599.             name=' here is a sŤāÇkeð   inline !  ',
4600.             pubdate='2011-12-17',
4601.             status='option one',
4602.             slug1='here-stacked-inline-2011-12-17',
4603.             slug2='option-one-here-stacked-inline',
4604.         )
4605.         RelatedPrepopulated.objects.get(
4606.             # 75 characters in name field
4607.             name=' now you haVe anöther   sŤāÇkeð  inline with a very ... loooooooooooooooooo',
4608.             pubdate='1999-01-25',
4609.             status='option two',
4610.             slug1='now-you-have-another-stacked-inline-very-loooooooo',
4611.             slug2='option-two-now-you-have-another-stacked-inline-very-looooooo',
4612.         )
4613.         RelatedPrepopulated.objects.get(
4614.             name='And now, with a tÃbűlaŘ inline !!!',
4615.             pubdate='1234-12-07',
4616.             status='option two',
4617.             slug1='and-now-tabular-inline-1234-12-07',
4618.             slug2='option-two-and-now-tabular-inline',
4619.         )
4620.         RelatedPrepopulated.objects.get(
4621.             name=r'a tÃbűlaŘ inline with ignored ;"&*^\%$#@-/`~ characters',
4622.             pubdate='1981-08-22',
4623.             status='option one',
4624.             slug1='tabular-inline-ignored-characters-1981-08-22',
4625.             slug2='option-one-tabular-inline-ignored-characters',
4626.         )
4627. 
4628.     def test_populate_existing_object(self):
4629.         """
4630.         The prepopulation works for existing objects too, as long as
4631.         the original field is empty (#19082).
4632.         """
4633.         # Slugs are empty to start with.
4634.         item = MainPrepopulated.objects.create(
4635.             name=' this is the mAin nÀMë',
4636.             pubdate='2012-02-18',
4637.             status='option two',
4638.             slug1='',
4639.             slug2='',
4640.         )
4641.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4642. 
4643.         object_url = self.live_server_url + reverse('admin:admin_views_mainprepopulated_change', args=(item.id,))
4644. 
4645.         self.selenium.get(object_url)
4646.         self.selenium.find_element_by_id('id_name').send_keys(' the best')
4647. 
4648.         # The slugs got prepopulated since they were originally empty
4649.         slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
4650.         slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
4651.         self.assertEqual(slug1, 'main-name-best-2012-02-18')
4652.         self.assertEqual(slug2, 'option-two-main-name-best')
4653. 
4654.         # Save the object
4655.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4656.         self.wait_page_loaded()
4657. 
4658.         self.selenium.get(object_url)
4659.         self.selenium.find_element_by_id('id_name').send_keys(' hello')
4660. 
4661.         # The slugs got prepopulated didn't change since they were originally not empty
4662.         slug1 = self.selenium.find_element_by_id('id_slug1').get_attribute('value')
4663.         slug2 = self.selenium.find_element_by_id('id_slug2').get_attribute('value')
4664.         self.assertEqual(slug1, 'main-name-best-2012-02-18')
4665.         self.assertEqual(slug2, 'option-two-main-name-best')
4666. 
4667.     def test_collapsible_fieldset(self):
4668.         """
4669.         The 'collapse' class in fieldsets definition allows to
4670.         show/hide the appropriate field section.
4671.         """
4672.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4673.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_article_add'))
4674.         self.assertFalse(self.selenium.find_element_by_id('id_title').is_displayed())
4675.         self.selenium.find_elements_by_link_text('Show')[0].click()
4676.         self.assertTrue(self.selenium.find_element_by_id('id_title').is_displayed())
4677.         self.assertEqual(self.selenium.find_element_by_id('fieldsetcollapser0').text, "Hide")
4678. 
4679.     def test_first_field_focus(self):
4680.         """JavaScript-assisted auto-focus on first usable form field."""
4681.         # First form field has a single widget
4682.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4683.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_picture_add'))
4684.         self.assertEqual(
4685.             self.selenium.switch_to.active_element,
4686.             self.selenium.find_element_by_id('id_name')
4687.         )
4688. 
4689.         # First form field has a MultiWidget
4690.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_reservation_add'))
4691.         self.assertEqual(
4692.             self.selenium.switch_to.active_element,
4693.             self.selenium.find_element_by_id('id_start_date_0')
4694.         )
4695. 
4696.     def test_cancel_delete_confirmation(self):
4697.         "Cancelling the deletion of an object takes the user back one page."
4698.         pizza = Pizza.objects.create(name="Double Cheese")
4699.         url = reverse('admin:admin_views_pizza_change', args=(pizza.id,))
4700.         full_url = self.live_server_url + url
4701.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4702.         self.selenium.get(full_url)
4703.         self.selenium.find_element_by_class_name('deletelink').click()
4704.         # Click 'cancel' on the delete page.
4705.         self.selenium.find_element_by_class_name('cancel-link').click()
4706.         # Wait until we're back on the change page.
4707.         self.wait_for_text('#content h1', 'Change pizza')
4708.         self.assertEqual(self.selenium.current_url, full_url)
4709.         self.assertEqual(Pizza.objects.count(), 1)
4710. 
4711.     def test_cancel_delete_related_confirmation(self):
4712.         """
4713.         Cancelling the deletion of an object with relations takes the user back
4714.         one page.
4715.         """
4716.         pizza = Pizza.objects.create(name="Double Cheese")
4717.         topping1 = Topping.objects.create(name="Cheddar")
4718.         topping2 = Topping.objects.create(name="Mozzarella")
4719.         pizza.toppings.add(topping1, topping2)
4720.         url = reverse('admin:admin_views_pizza_change', args=(pizza.id,))
4721.         full_url = self.live_server_url + url
4722.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4723.         self.selenium.get(full_url)
4724.         self.selenium.find_element_by_class_name('deletelink').click()
4725.         # Click 'cancel' on the delete page.
4726.         self.selenium.find_element_by_class_name('cancel-link').click()
4727.         # Wait until we're back on the change page.
4728.         self.wait_for_text('#content h1', 'Change pizza')
4729.         self.assertEqual(self.selenium.current_url, full_url)
4730.         self.assertEqual(Pizza.objects.count(), 1)
4731.         self.assertEqual(Topping.objects.count(), 2)
4732. 
4733.     def test_list_editable_popups(self):
4734.         """
4735.         list_editable foreign keys have add/change popups.
4736.         """
4737.         from selenium.webdriver.support.ui import Select
4738.         s1 = Section.objects.create(name='Test section')
4739.         Article.objects.create(
4740.             title='foo',
4741.             content='<p>Middle content</p>',
4742.             date=datetime.datetime(2008, 3, 18, 11, 54, 58),
4743.             section=s1,
4744.         )
4745.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4746.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_article_changelist'))
4747.         # Change popup
4748.         self.selenium.find_element_by_id('change_id_form-0-section').click()
4749.         self.wait_for_popup()
4750.         self.selenium.switch_to.window(self.selenium.window_handles[-1])
4751.         self.wait_for_text('#content h1', 'Change section')
4752.         name_input = self.selenium.find_element_by_id('id_name')
4753.         name_input.clear()
4754.         name_input.send_keys('<i>edited section</i>')
4755.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4756.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4757.         select = Select(self.selenium.find_element_by_id('id_form-0-section'))
4758.         self.assertEqual(select.first_selected_option.text, '<i>edited section</i>')
4759.         # Rendered select2 input.
4760.         select2_display = self.selenium.find_element_by_class_name('select2-selection__rendered')
4761.         # Clear button (×\n) is included in text.
4762.         self.assertEqual(select2_display.text, '×\n<i>edited section</i>')
4763. 
4764.         # Add popup
4765.         self.selenium.find_element_by_id('add_id_form-0-section').click()
4766.         self.wait_for_popup()
4767.         self.selenium.switch_to.window(self.selenium.window_handles[-1])
4768.         self.wait_for_text('#content h1', 'Add section')
4769.         self.selenium.find_element_by_id('id_name').send_keys('new section')
4770.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4771.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4772.         select = Select(self.selenium.find_element_by_id('id_form-0-section'))
4773.         self.assertEqual(select.first_selected_option.text, 'new section')
4774.         select2_display = self.selenium.find_element_by_class_name('select2-selection__rendered')
4775.         # Clear button (×\n) is included in text.
4776.         self.assertEqual(select2_display.text, '×\nnew section')
4777. 
4778.     def test_inline_uuid_pk_edit_with_popup(self):
4779.         from selenium.webdriver.support.ui import Select
4780.         parent = ParentWithUUIDPK.objects.create(title='test')
4781.         related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
4782.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4783.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
4784.         self.selenium.get(self.live_server_url + change_url)
4785.         self.selenium.find_element_by_id('change_id_parent').click()
4786.         self.wait_for_popup()
4787.         self.selenium.switch_to.window(self.selenium.window_handles[-1])
4788.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4789.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4790.         select = Select(self.selenium.find_element_by_id('id_parent'))
4791.         self.assertEqual(select.first_selected_option.text, str(parent.id))
4792.         self.assertEqual(select.first_selected_option.get_attribute('value'), str(parent.id))
4793. 
4794.     def test_inline_uuid_pk_add_with_popup(self):
4795.         from selenium.webdriver.support.ui import Select
4796.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4797.         self.selenium.get(self.live_server_url + reverse('admin:admin_views_relatedwithuuidpkmodel_add'))
4798.         self.selenium.find_element_by_id('add_id_parent').click()
4799.         self.wait_for_popup()
4800.         self.selenium.switch_to.window(self.selenium.window_handles[-1])
4801.         self.selenium.find_element_by_id('id_title').send_keys('test')
4802.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
4803.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4804.         select = Select(self.selenium.find_element_by_id('id_parent'))
4805.         uuid_id = str(ParentWithUUIDPK.objects.first().id)
4806.         self.assertEqual(select.first_selected_option.text, uuid_id)
4807.         self.assertEqual(select.first_selected_option.get_attribute('value'), uuid_id)
4808. 
4809.     def test_inline_uuid_pk_delete_with_popup(self):
4810.         from selenium.webdriver.support.ui import Select
4811.         parent = ParentWithUUIDPK.objects.create(title='test')
4812.         related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
4813.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4814.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
4815.         self.selenium.get(self.live_server_url + change_url)
4816.         self.selenium.find_element_by_id('delete_id_parent').click()
4817.         self.wait_for_popup()
4818.         self.selenium.switch_to.window(self.selenium.window_handles[-1])
4819.         self.selenium.find_element_by_xpath('//input[@value="Yes, I’m sure"]').click()
4820.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4821.         select = Select(self.selenium.find_element_by_id('id_parent'))
4822.         self.assertEqual(ParentWithUUIDPK.objects.count(), 0)
4823.         self.assertEqual(select.first_selected_option.text, '---------')
4824.         self.assertEqual(select.first_selected_option.get_attribute('value'), '')
4825. 
4826.     def test_inline_with_popup_cancel_delete(self):
4827.         """Clicking ""No, take me back" on a delete popup closes the window."""
4828.         parent = ParentWithUUIDPK.objects.create(title='test')
4829.         related_with_parent = RelatedWithUUIDPKModel.objects.create(parent=parent)
4830.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4831.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_change', args=(related_with_parent.id,))
4832.         self.selenium.get(self.live_server_url + change_url)
4833.         self.selenium.find_element_by_id('delete_id_parent').click()
4834.         self.wait_for_popup()
4835.         self.selenium.switch_to.window(self.selenium.window_handles[-1])
4836.         self.selenium.find_element_by_xpath('//a[text()="No, take me back"]').click()
4837.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4838.         self.assertEqual(len(self.selenium.window_handles), 1)
4839. 
4840.     def test_list_editable_raw_id_fields(self):
4841.         parent = ParentWithUUIDPK.objects.create(title='test')
4842.         parent2 = ParentWithUUIDPK.objects.create(title='test2')
4843.         RelatedWithUUIDPKModel.objects.create(parent=parent)
4844.         self.admin_login(username='super', password='secret', login_url=reverse('admin:index'))
4845.         change_url = reverse('admin:admin_views_relatedwithuuidpkmodel_changelist', current_app=site2.name)
4846.         self.selenium.get(self.live_server_url + change_url)
4847.         self.selenium.find_element_by_id('lookup_id_form-0-parent').click()
4848.         self.wait_for_popup()
4849.         self.selenium.switch_to.window(self.selenium.window_handles[-1])
4850.         # Select "parent2" in the popup.
4851.         self.selenium.find_element_by_link_text(str(parent2.pk)).click()
4852.         self.selenium.switch_to.window(self.selenium.window_handles[0])
4853.         # The newly selected pk should appear in the raw id input.
4854.         value = self.selenium.find_element_by_id('id_form-0-parent').get_attribute('value')
4855.         self.assertEqual(value, str(parent2.pk))
4856. 
4857. 
4858. @override_settings(ROOT_URLCONF='admin_views.urls')
4859. class ReadonlyTest(AdminFieldExtractionMixin, TestCase):
4860. 
4861.     @classmethod
4862.     def setUpTestData(cls):
4863.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
4864. 
4865.     def setUp(self):
4866.         self.client.force_login(self.superuser)
4867. 
4868.     def test_readonly_get(self):
4869.         response = self.client.get(reverse('admin:admin_views_post_add'))
4870.         self.assertEqual(response.status_code, 200)
4871.         self.assertNotContains(response, 'name="posted"')
4872.         # 3 fields + 2 submit buttons + 5 inline management form fields, + 2
4873.         # hidden fields for inlines + 1 field for the inline + 2 empty form
4874.         self.assertContains(response, "<input", count=15)
4875.         self.assertContains(response, formats.localize(datetime.date.today()))
4876.         self.assertContains(response, "<label>Awesomeness level:</label>")
4877.         self.assertContains(response, "Very awesome.")
4878.         self.assertContains(response, "Unknown coolness.")
4879.         self.assertContains(response, "foo")
4880. 
4881.         # Multiline text in a readonly field gets <br> tags
4882.         self.assertContains(response, 'Multiline<br>test<br>string')
4883.         self.assertContains(response, '<div class="readonly">Multiline<br>html<br>content</div>', html=True)
4884.         self.assertContains(response, 'InlineMultiline<br>test<br>string')
4885. 
4886.         self.assertContains(response, formats.localize(datetime.date.today() - datetime.timedelta(days=7)))
4887. 
4888.         self.assertContains(response, '<div class="form-row field-coolness">')
4889.         self.assertContains(response, '<div class="form-row field-awesomeness_level">')
4890.         self.assertContains(response, '<div class="form-row field-posted">')
4891.         self.assertContains(response, '<div class="form-row field-value">')
4892.         self.assertContains(response, '<div class="form-row">')
4893.         self.assertContains(response, '<div class="help">', 3)
4894.         self.assertContains(
4895.             response,
4896.             '<div class="help">Some help text for the title (with unicode ŠĐĆŽćžšđ)</div>',
4897.             html=True
4898.         )
4899.         self.assertContains(
4900.             response,
4901.             '<div class="help">Some help text for the content (with unicode ŠĐĆŽćžšđ)</div>',
4902.             html=True
4903.         )
4904.         self.assertContains(
4905.             response,
4906.             '<div class="help">Some help text for the date (with unicode ŠĐĆŽćžšđ)</div>',
4907.             html=True
4908.         )
4909. 
4910.         p = Post.objects.create(title="I worked on readonly_fields", content="Its good stuff")
4911.         response = self.client.get(reverse('admin:admin_views_post_change', args=(p.pk,)))
4912.         self.assertContains(response, "%d amount of cool" % p.pk)
4913. 
4914.     def test_readonly_text_field(self):
4915.         p = Post.objects.create(
4916.             title="Readonly test", content="test",
4917.             readonly_content='test\r\n\r\ntest\r\n\r\ntest\r\n\r\ntest',
4918.         )
4919.         Link.objects.create(
4920.             url="http://www.djangoproject.com", post=p,
4921.             readonly_link_content="test\r\nlink",
4922.         )
4923.         response = self.client.get(reverse('admin:admin_views_post_change', args=(p.pk,)))
4924.         # Checking readonly field.
4925.         self.assertContains(response, 'test<br><br>test<br><br>test<br><br>test')
4926.         # Checking readonly field in inline.
4927.         self.assertContains(response, 'test<br>link')
4928. 
4929.     def test_readonly_post(self):
4930.         data = {
4931.             "title": "Django Got Readonly Fields",
4932.             "content": "This is an incredible development.",
4933.             "link_set-TOTAL_FORMS": "1",
4934.             "link_set-INITIAL_FORMS": "0",
4935.             "link_set-MAX_NUM_FORMS": "0",
4936.         }
4937.         response = self.client.post(reverse('admin:admin_views_post_add'), data)
4938.         self.assertEqual(response.status_code, 302)
4939.         self.assertEqual(Post.objects.count(), 1)
4940.         p = Post.objects.get()
4941.         self.assertEqual(p.posted, datetime.date.today())
4942. 
4943.         data["posted"] = "10-8-1990"  # some date that's not today
4944.         response = self.client.post(reverse('admin:admin_views_post_add'), data)
4945.         self.assertEqual(response.status_code, 302)
4946.         self.assertEqual(Post.objects.count(), 2)
4947.         p = Post.objects.order_by('-id')[0]
4948.         self.assertEqual(p.posted, datetime.date.today())
4949. 
4950.     def test_readonly_manytomany(self):
4951.         "Regression test for #13004"
4952.         response = self.client.get(reverse('admin:admin_views_pizza_add'))
4953.         self.assertEqual(response.status_code, 200)
4954. 
4955.     def test_user_password_change_limited_queryset(self):
4956.         su = User.objects.filter(is_superuser=True)[0]
4957.         response = self.client.get(reverse('admin2:auth_user_password_change', args=(su.pk,)))
4958.         self.assertEqual(response.status_code, 404)
4959. 
4960.     def test_change_form_renders_correct_null_choice_value(self):
4961.         """
4962.         Regression test for #17911.
4963.         """
4964.         choice = Choice.objects.create(choice=None)
4965.         response = self.client.get(reverse('admin:admin_views_choice_change', args=(choice.pk,)))
4966.         self.assertContains(response, '<div class="readonly">No opinion</div>', html=True)
4967. 
4968.     def test_readonly_manytomany_backwards_ref(self):
4969.         """
4970.         Regression test for #16433 - backwards references for related objects
4971.         broke if the related field is read-only due to the help_text attribute
4972.         """
4973.         topping = Topping.objects.create(name='Salami')
4974.         pizza = Pizza.objects.create(name='Americano')
4975.         pizza.toppings.add(topping)
4976.         response = self.client.get(reverse('admin:admin_views_topping_add'))
4977.         self.assertEqual(response.status_code, 200)
4978. 
4979.     def test_readonly_manytomany_forwards_ref(self):
4980.         topping = Topping.objects.create(name='Salami')
4981.         pizza = Pizza.objects.create(name='Americano')
4982.         pizza.toppings.add(topping)
4983.         response = self.client.get(reverse('admin:admin_views_pizza_change', args=(pizza.pk,)))
4984.         self.assertContains(response, '<label>Toppings:</label>', html=True)
4985.         self.assertContains(response, '<div class="readonly">Salami</div>', html=True)
4986. 
4987.     def test_readonly_onetoone_backwards_ref(self):
4988.         """
4989.         Can reference a reverse OneToOneField in ModelAdmin.readonly_fields.
4990.         """
4991.         v1 = Villain.objects.create(name='Adam')
4992.         pl = Plot.objects.create(name='Test Plot', team_leader=v1, contact=v1)
4993.         pd = PlotDetails.objects.create(details='Brand New Plot', plot=pl)
4994. 
4995.         response = self.client.get(reverse('admin:admin_views_plotproxy_change', args=(pl.pk,)))
4996.         field = self.get_admin_readonly_field(response, 'plotdetails')
4997.         self.assertEqual(field.contents(), 'Brand New Plot')
4998. 
4999.         # The reverse relation also works if the OneToOneField is null.
5000.         pd.plot = None

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 08:23:34,169 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user requested the content of `tests/admin_views/tests.py`. Since the file is large, I am following the extra requirement to provide test methods related to `list_editable`. The `AdminViewListEditable` class is the most relevant context as it's a test suite specifically for `list_editable` functionality. The methods within this class, such as `test_post_submission`, `test_non_field_errors`, and `test_list_editable_ordering`, use `self.client.post()` to submit data to a changelist view, which directly aligns with the user's request. The included `setUpTestData` and `setUp` methods provide essential context for these tests.", relative_path='tests/admin_views/tests.py', start_line=3001, end_line=3424)]
2025-12-23 08:23:34,173 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of `tests/admin_views/tests.py`.
2025-12-23 08:23:34,173 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 08:23:34,173 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 08:23:34,174 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 3 existing contexts
2025-12-23 08:23:34,174 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-23 08:23:34,174 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── FUNDING.yml
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   └── test_postgresql.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktrans.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_trans.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Possible data loss in admin changeform view when using regex special characters in formset prefix

Description: Description
	 
		(last modified by Baptiste Mispelon)
	 
While browsing the code in admin/options.py [1] (working on an unrelated ticket), I came across that line:
pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
Generating a regex like this using string formatting can cause problems when the arguments contain special regex characters.
self.model._meta.pk.name is probably safe (I'm not 100% sure about this) since it has to follow Python's syntax rules about identifiers.
However prefix has no such restrictions [2] and could contain any number of special regex characters.
The fix is quite straightforward (use re.escape()) but it's hard to tell if there might be other occurrences of a similar pattern in Django's code.
Some quick grepping (using git grep -E '(re_compile|re\.(compile|search|match))' -- 'django/**.py') currently yields about 200 results. I had a superficial glance through the list and didn't spot other instances of the same usage pattern.
EDIT I forgot to mention, but this bug is technically a regression (introduced in b18650a2634890aa758abae2f33875daa13a9ba3).
[1] ​https://github.com/django/django/blob/ef93fd4683645635d3597e17c23f9ed862dd716b/django/contrib/admin/options.py#L1634
[2] ​https://docs.djangoproject.com/en/dev/topics/forms/formsets/#customizing-a-formset-s-prefix

Patch information:
diff --git a/django/contrib/admin/options.py b/django/contrib/admin/options.py
index 137e6faa0f..31bfd90c67 100644
--- a/django/contrib/admin/options.py
+++ b/django/contrib/admin/options.py
@@ -1631,7 +1631,7 @@ class ModelAdmin(BaseModelAdmin):
 
     def _get_edited_object_pks(self, request, prefix):
         """Return POST data values of list_editable primary keys."""
-        pk_pattern = re.compile(r'{}-\d+-{}$'.format(prefix, self.model._meta.pk.name))
+        pk_pattern = re.compile(r'^{}-\d+-{}$'.format(re.escape(prefix), re.escape(self.model._meta.pk.name)))
         return [value for key, value in request.POST.items() if pk_pattern.match(key)]
 
     def _get_list_editable_queryset(self, request, prefix):


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/admin_changelist/tests.py`.
Extra Requirements: If the file is too large, please provide all test classes that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` within their test methods.
Purpose: This file is expected to contain test cases for the admin changelist, which is the context for the `list_editable` feature. Examining it will allow me to find tests demonstrating how `list_editable` is tested, which is directly related to the bug report.

Previous refined query 2:
Essential Query: Please provide the full content of `tests/admin_views/tests.py`.
Extra Requirements: If the file is too large, please provide all test methods that configure a `ModelAdmin` with a `list_editable` attribute and use `self.client.post()` to submit data to the changelist view.
Purpose: This file is expected to contain the most relevant test cases for submitting `list_editable` data in the admin, which is the exact scenario described in the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/admin_changelist/tests.py
Line number range: 212 - 255
Content:
212.     def test_result_list_editable_html(self):
213.         """
214.         Regression tests for #11791: Inclusion tag result_list generates a
215.         table and this checks that the items are nested within the table
216.         element tags.
217.         Also a regression test for #13599, verifies that hidden fields
218.         when list_editable is enabled are rendered in a div outside the
219.         table.
220.         """
221.         new_parent = Parent.objects.create(name='parent')
222.         new_child = Child.objects.create(name='name', parent=new_parent)
223.         request = self.factory.get('/child/')
224.         request.user = self.superuser
225.         m = ChildAdmin(Child, custom_site)
226. 
227.         # Test with list_editable fields
228.         m.list_display = ['id', 'name', 'parent']
229.         m.list_display_links = ['id']
230.         m.list_editable = ['name']
231.         cl = m.get_changelist_instance(request)
232.         FormSet = m.get_changelist_formset(request)
233.         cl.formset = FormSet(queryset=cl.result_list)
234.         template = Template('{% load admin_list %}{% spaceless %}{% result_list cl %}{% endspaceless %}')
235.         context = Context({'cl': cl, 'opts': Child._meta})
236.         table_output = template.render(context)
237.         # make sure that hidden fields are in the correct place
238.         hiddenfields_div = (
239.             '<div class="hiddenfields">'
240.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
241.             '</div>'
242.         ) % new_child.id
243.         self.assertInHTML(hiddenfields_div, table_output, msg_prefix='Failed to find hidden fields')
244. 
245.         # make sure that list editable fields are rendered in divs correctly
246.         editable_name_field = (
247.             '<input name="form-0-name" value="name" class="vTextField" '
248.             'maxlength="30" type="text" id="id_form-0-name">'
249.         )
250.         self.assertInHTML(
251.             '<td class="field-name">%s</td>' % editable_name_field,
252.             table_output,
253.             msg_prefix='Failed to find "name" list_editable field',
254.         )
255. 


File: tests/admin_changelist/tests.py
Line number range: 880 - 945
Content:
880.             UnorderedObject.objects.create(id=counter, bool=True)
881. 
882.         class UnorderedObjectAdmin(admin.ModelAdmin):
883.             list_per_page = 10
884. 
885.         def check_results_order(ascending=False):
886.             custom_site.register(UnorderedObject, UnorderedObjectAdmin)
887.             model_admin = UnorderedObjectAdmin(UnorderedObject, custom_site)
888.             counter = 0 if ascending else 51
889.             for page in range(0, 5):
890.                 request = self._mocked_authenticated_request('/unorderedobject/?p=%s' % page, superuser)
891.                 response = model_admin.changelist_view(request)
892.                 for result in response.context_data['cl'].result_list:
893.                     counter += 1 if ascending else -1
894.                     self.assertEqual(result.id, counter)
895.             custom_site.unregister(UnorderedObject)
896. 
897.         # When no order is defined at all, everything is ordered by '-pk'.
898.         check_results_order()
899. 
900.         # When an order field is defined but multiple records have the same
901.         # value for that field, make sure everything gets ordered by -pk as well.
902.         UnorderedObjectAdmin.ordering = ['bool']
903.         check_results_order()
904. 
905.         # When order fields are defined, including the pk itself, use them.
906.         UnorderedObjectAdmin.ordering = ['bool', '-pk']
907.         check_results_order()
908.         UnorderedObjectAdmin.ordering = ['bool', 'pk']
909.         check_results_order(ascending=True)
910.         UnorderedObjectAdmin.ordering = ['-id', 'bool']
911.         check_results_order()
912.         UnorderedObjectAdmin.ordering = ['id', 'bool']
913.         check_results_order(ascending=True)
914. 
915.     def test_deterministic_order_for_model_ordered_by_its_manager(self):
916.         """
917.         The primary key is used in the ordering of the changelist's results to
918.         guarantee a deterministic order, even when the model has a manager that
919.         defines a default ordering (#17198).
920.         """
921.         superuser = self._create_superuser('superuser')
922. 
923.         for counter in range(1, 51):
924.             OrderedObject.objects.create(id=counter, bool=True, number=counter)
925. 
926.         class OrderedObjectAdmin(admin.ModelAdmin):
927.             list_per_page = 10
928. 
929.         def check_results_order(ascending=False):
930.             custom_site.register(OrderedObject, OrderedObjectAdmin)
931.             model_admin = OrderedObjectAdmin(OrderedObject, custom_site)
932.             counter = 0 if ascending else 51
933.             for page in range(0, 5):
934.                 request = self._mocked_authenticated_request('/orderedobject/?p=%s' % page, superuser)
935.                 response = model_admin.changelist_view(request)
936.                 for result in response.context_data['cl'].result_list:
937.                     counter += 1 if ascending else -1
938.                     self.assertEqual(result.id, counter)
939.             custom_site.unregister(OrderedObject)
940. 
941.         # When no order is defined at all, use the model's default ordering (i.e. 'number')
942.         check_results_order(ascending=True)
943. 
944.         # When an order field is defined but multiple records have the same
945.         # value for that field, make sure everything gets ordered by -pk as well.


File: tests/admin_changelist/tests.py
Line number range: 995 - 1013
Content:
995.             (['unique_field'], ['unique_field']),
996.             (['-unique_field'], ['-unique_field']),
997.             # Unique nullable field.
998.             (['unique_nullable_field'], ['unique_nullable_field', '-pk']),
999.             # Field.
1000.             (['field'], ['field', '-pk']),
1001.             # Related field introspection is not implemented.
1002.             (['related__unique_field'], ['related__unique_field', '-pk']),
1003.             # Related attname unique.
1004.             (['related_unique_id'], ['related_unique_id']),
1005.             # Related ordering introspection is not implemented.
1006.             (['related_unique'], ['related_unique', '-pk']),
1007.             # Composite unique.
1008.             (['field', '-other_field'], ['field', '-other_field']),
1009.             # Composite unique nullable.
1010.             (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
1011.             # Composite unique nullable.
1012.             (['-field', 'null_field'], ['-field', 'null_field', '-pk']),
1013.             # Composite unique nullable.


File: tests/admin_views/tests.py
Line number range: 3001 - 3424
Content:
3001. class AdminViewListEditable(TestCase):
3002. 
3003.     @classmethod
3004.     def setUpTestData(cls):
3005.         cls.superuser = User.objects.create_superuser(username='super', password='secret', email='super@example.com')
3006.         cls.s1 = Section.objects.create(name='Test section')
3007.         cls.a1 = Article.objects.create(
3008.             content='<p>Middle content</p>', date=datetime.datetime(2008, 3, 18, 11, 54, 58), section=cls.s1
3009.         )
3010.         cls.a2 = Article.objects.create(
3011.             content='<p>Oldest content</p>', date=datetime.datetime(2000, 3, 18, 11, 54, 58), section=cls.s1
3012.         )
3013.         cls.a3 = Article.objects.create(
3014.             content='<p>Newest content</p>', date=datetime.datetime(2009, 3, 18, 11, 54, 58), section=cls.s1
3015.         )
3016.         cls.p1 = PrePopulatedPost.objects.create(title='A Long Title', published=True, slug='a-long-title')
3017.         cls.per1 = Person.objects.create(name='John Mauchly', gender=1, alive=True)
3018.         cls.per2 = Person.objects.create(name='Grace Hopper', gender=1, alive=False)
3019.         cls.per3 = Person.objects.create(name='Guido van Rossum', gender=1, alive=True)
3020. 
3021.     def setUp(self):
3022.         self.client.force_login(self.superuser)
3023. 
3024.     def test_inheritance(self):
3025.         Podcast.objects.create(name="This Week in Django", release_date=datetime.date.today())
3026.         response = self.client.get(reverse('admin:admin_views_podcast_changelist'))
3027.         self.assertEqual(response.status_code, 200)
3028. 
3029.     def test_inheritance_2(self):
3030.         Vodcast.objects.create(name="This Week in Django", released=True)
3031.         response = self.client.get(reverse('admin:admin_views_vodcast_changelist'))
3032.         self.assertEqual(response.status_code, 200)
3033. 
3034.     def test_custom_pk(self):
3035.         Language.objects.create(iso='en', name='English', english_name='English')
3036.         response = self.client.get(reverse('admin:admin_views_language_changelist'))
3037.         self.assertEqual(response.status_code, 200)
3038. 
3039.     def test_changelist_input_html(self):
3040.         response = self.client.get(reverse('admin:admin_views_person_changelist'))
3041.         # 2 inputs per object(the field and the hidden id field) = 6
3042.         # 4 management hidden fields = 4
3043.         # 4 action inputs (3 regular checkboxes, 1 checkbox to select all)
3044.         # main form submit button = 1
3045.         # search field and search submit button = 2
3046.         # CSRF field = 1
3047.         # field to track 'select all' across paginated views = 1
3048.         # 6 + 4 + 4 + 1 + 2 + 1 + 1 = 19 inputs
3049.         self.assertContains(response, "<input", count=19)
3050.         # 1 select per object = 3 selects
3051.         self.assertContains(response, "<select", count=4)
3052. 
3053.     def test_post_messages(self):
3054.         # Ticket 12707: Saving inline editable should not show admin
3055.         # action warnings
3056.         data = {
3057.             "form-TOTAL_FORMS": "3",
3058.             "form-INITIAL_FORMS": "3",
3059.             "form-MAX_NUM_FORMS": "0",
3060. 
3061.             "form-0-gender": "1",
3062.             "form-0-id": "%s" % self.per1.pk,
3063. 
3064.             "form-1-gender": "2",
3065.             "form-1-id": "%s" % self.per2.pk,
3066. 
3067.             "form-2-alive": "checked",
3068.             "form-2-gender": "1",
3069.             "form-2-id": "%s" % self.per3.pk,
3070. 
3071.             "_save": "Save",
3072.         }
3073.         response = self.client.post(reverse('admin:admin_views_person_changelist'),
3074.                                     data, follow=True)
3075.         self.assertEqual(len(response.context['messages']), 1)
3076. 
3077.     def test_post_submission(self):
3078.         data = {
3079.             "form-TOTAL_FORMS": "3",
3080.             "form-INITIAL_FORMS": "3",
3081.             "form-MAX_NUM_FORMS": "0",
3082. 
3083.             "form-0-gender": "1",
3084.             "form-0-id": "%s" % self.per1.pk,
3085. 
3086.             "form-1-gender": "2",
3087.             "form-1-id": "%s" % self.per2.pk,
3088. 
3089.             "form-2-alive": "checked",
3090.             "form-2-gender": "1",
3091.             "form-2-id": "%s" % self.per3.pk,
3092. 
3093.             "_save": "Save",
3094.         }
3095.         self.client.post(reverse('admin:admin_views_person_changelist'), data)
3096. 
3097.         self.assertIs(Person.objects.get(name="John Mauchly").alive, False)
3098.         self.assertEqual(Person.objects.get(name="Grace Hopper").gender, 2)
3099. 
3100.         # test a filtered page
3101.         data = {
3102.             "form-TOTAL_FORMS": "2",
3103.             "form-INITIAL_FORMS": "2",
3104.             "form-MAX_NUM_FORMS": "0",
3105. 
3106.             "form-0-id": "%s" % self.per1.pk,
3107.             "form-0-gender": "1",
3108.             "form-0-alive": "checked",
3109. 
3110.             "form-1-id": "%s" % self.per3.pk,
3111.             "form-1-gender": "1",
3112.             "form-1-alive": "checked",
3113. 
3114.             "_save": "Save",
3115.         }
3116.         self.client.post(reverse('admin:admin_views_person_changelist') + '?gender__exact=1', data)
3117. 
3118.         self.assertIs(Person.objects.get(name="John Mauchly").alive, True)
3119. 
3120.         # test a searched page
3121.         data = {
3122.             "form-TOTAL_FORMS": "1",
3123.             "form-INITIAL_FORMS": "1",
3124.             "form-MAX_NUM_FORMS": "0",
3125. 
3126.             "form-0-id": "%s" % self.per1.pk,
3127.             "form-0-gender": "1",
3128. 
3129.             "_save": "Save",
3130.         }
3131.         self.client.post(reverse('admin:admin_views_person_changelist') + '?q=john', data)
3132. 
3133.         self.assertIs(Person.objects.get(name="John Mauchly").alive, False)
3134. 
3135.     def test_non_field_errors(self):
3136.         """
3137.         Non-field errors are displayed for each of the forms in the
3138.         changelist's formset.
3139.         """
3140.         fd1 = FoodDelivery.objects.create(reference='123', driver='bill', restaurant='thai')
3141.         fd2 = FoodDelivery.objects.create(reference='456', driver='bill', restaurant='india')
3142.         fd3 = FoodDelivery.objects.create(reference='789', driver='bill', restaurant='pizza')
3143. 
3144.         data = {
3145.             "form-TOTAL_FORMS": "3",
3146.             "form-INITIAL_FORMS": "3",
3147.             "form-MAX_NUM_FORMS": "0",
3148. 
3149.             "form-0-id": str(fd1.id),
3150.             "form-0-reference": "123",
3151.             "form-0-driver": "bill",
3152.             "form-0-restaurant": "thai",
3153. 
3154.             # Same data as above: Forbidden because of unique_together!
3155.             "form-1-id": str(fd2.id),
3156.             "form-1-reference": "456",
3157.             "form-1-driver": "bill",
3158.             "form-1-restaurant": "thai",
3159. 
3160.             "form-2-id": str(fd3.id),
3161.             "form-2-reference": "789",
3162.             "form-2-driver": "bill",
3163.             "form-2-restaurant": "pizza",
3164. 
3165.             "_save": "Save",
3166.         }
3167.         response = self.client.post(reverse('admin:admin_views_fooddelivery_changelist'), data)
3168.         self.assertContains(
3169.             response,
3170.             '<tr><td colspan="4"><ul class="errorlist nonfield"><li>Food delivery '
3171.             'with this Driver and Restaurant already exists.</li></ul></td></tr>',
3172.             1,
3173.             html=True
3174.         )
3175. 
3176.         data = {
3177.             "form-TOTAL_FORMS": "3",
3178.             "form-INITIAL_FORMS": "3",
3179.             "form-MAX_NUM_FORMS": "0",
3180. 
3181.             "form-0-id": str(fd1.id),
3182.             "form-0-reference": "123",
3183.             "form-0-driver": "bill",
3184.             "form-0-restaurant": "thai",
3185. 
3186.             # Same data as above: Forbidden because of unique_together!
3187.             "form-1-id": str(fd2.id),
3188.             "form-1-reference": "456",
3189.             "form-1-driver": "bill",
3190.             "form-1-restaurant": "thai",
3191. 
3192.             # Same data also.
3193.             "form-2-id": str(fd3.id),
3194.             "form-2-reference": "789",
3195.             "form-2-driver": "bill",
3196.             "form-2-restaurant": "thai",
3197. 
3198.             "_save": "Save",
3199.         }
3200.         response = self.client.post(reverse('admin:admin_views_fooddelivery_changelist'), data)
3201.         self.assertContains(
3202.             response,
3203.             '<tr><td colspan="4"><ul class="errorlist nonfield"><li>Food delivery '
3204.             'with this Driver and Restaurant already exists.</li></ul></td></tr>',
3205.             2,
3206.             html=True
3207.         )
3208. 
3209.     def test_non_form_errors(self):
3210.         # test if non-form errors are handled; ticket #12716
3211.         data = {
3212.             "form-TOTAL_FORMS": "1",
3213.             "form-INITIAL_FORMS": "1",
3214.             "form-MAX_NUM_FORMS": "0",
3215. 
3216.             "form-0-id": "%s" % self.per2.pk,
3217.             "form-0-alive": "1",
3218.             "form-0-gender": "2",
3219. 
3220.             # The form processing understands this as a list_editable "Save"
3221.             # and not an action "Go".
3222.             "_save": "Save",
3223.         }
3224.         response = self.client.post(reverse('admin:admin_views_person_changelist'), data)
3225.         self.assertContains(response, "Grace is not a Zombie")
3226. 
3227.     def test_non_form_errors_is_errorlist(self):
3228.         # test if non-form errors are correctly handled; ticket #12878
3229.         data = {
3230.             "form-TOTAL_FORMS": "1",
3231.             "form-INITIAL_FORMS": "1",
3232.             "form-MAX_NUM_FORMS": "0",
3233. 
3234.             "form-0-id": "%s" % self.per2.pk,
3235.             "form-0-alive": "1",
3236.             "form-0-gender": "2",
3237. 
3238.             "_save": "Save",
3239.         }
3240.         response = self.client.post(reverse('admin:admin_views_person_changelist'), data)
3241.         non_form_errors = response.context['cl'].formset.non_form_errors()
3242.         self.assertIsInstance(non_form_errors, ErrorList)
3243.         self.assertEqual(str(non_form_errors), str(ErrorList(["Grace is not a Zombie"])))
3244. 
3245.     def test_list_editable_ordering(self):
3246.         collector = Collector.objects.create(id=1, name="Frederick Clegg")
3247. 
3248.         Category.objects.create(id=1, order=1, collector=collector)
3249.         Category.objects.create(id=2, order=2, collector=collector)
3250.         Category.objects.create(id=3, order=0, collector=collector)
3251.         Category.objects.create(id=4, order=0, collector=collector)
3252. 
3253.         # NB: The order values must be changed so that the items are reordered.
3254.         data = {
3255.             "form-TOTAL_FORMS": "4",
3256.             "form-INITIAL_FORMS": "4",
3257.             "form-MAX_NUM_FORMS": "0",
3258. 
3259.             "form-0-order": "14",
3260.             "form-0-id": "1",
3261.             "form-0-collector": "1",
3262. 
3263.             "form-1-order": "13",
3264.             "form-1-id": "2",
3265.             "form-1-collector": "1",
3266. 
3267.             "form-2-order": "1",
3268.             "form-2-id": "3",
3269.             "form-2-collector": "1",
3270. 
3271.             "form-3-order": "0",
3272.             "form-3-id": "4",
3273.             "form-3-collector": "1",
3274. 
3275.             # The form processing understands this as a list_editable "Save"
3276.             # and not an action "Go".
3277.             "_save": "Save",
3278.         }
3279.         response = self.client.post(reverse('admin:admin_views_category_changelist'), data)
3280.         # Successful post will redirect
3281.         self.assertEqual(response.status_code, 302)
3282. 
3283.         # The order values have been applied to the right objects
3284.         self.assertEqual(Category.objects.get(id=1).order, 14)
3285.         self.assertEqual(Category.objects.get(id=2).order, 13)
3286.         self.assertEqual(Category.objects.get(id=3).order, 1)
3287.         self.assertEqual(Category.objects.get(id=4).order, 0)
3288. 
3289.     def test_list_editable_pagination(self):
3290.         """
3291.         Pagination works for list_editable items.
3292.         """
3293.         UnorderedObject.objects.create(id=1, name='Unordered object #1')
3294.         UnorderedObject.objects.create(id=2, name='Unordered object #2')
3295.         UnorderedObject.objects.create(id=3, name='Unordered object #3')
3296.         response = self.client.get(reverse('admin:admin_views_unorderedobject_changelist'))
3297.         self.assertContains(response, 'Unordered object #3')
3298.         self.assertContains(response, 'Unordered object #2')
3299.         self.assertNotContains(response, 'Unordered object #1')
3300.         response = self.client.get(reverse('admin:admin_views_unorderedobject_changelist') + '?p=1')
3301.         self.assertNotContains(response, 'Unordered object #3')
3302.         self.assertNotContains(response, 'Unordered object #2')
3303.         self.assertContains(response, 'Unordered object #1')
3304. 
3305.     def test_list_editable_action_submit(self):
3306.         # List editable changes should not be executed if the action "Go" button is
3307.         # used to submit the form.
3308.         data = {
3309.             "form-TOTAL_FORMS": "3",
3310.             "form-INITIAL_FORMS": "3",
3311.             "form-MAX_NUM_FORMS": "0",
3312. 
3313.             "form-0-gender": "1",
3314.             "form-0-id": "1",
3315. 
3316.             "form-1-gender": "2",
3317.             "form-1-id": "2",
3318. 
3319.             "form-2-alive": "checked",
3320.             "form-2-gender": "1",
3321.             "form-2-id": "3",
3322. 
3323.             "index": "0",
3324.             "_selected_action": ['3'],
3325.             "action": ['', 'delete_selected'],
3326.         }
3327.         self.client.post(reverse('admin:admin_views_person_changelist'), data)
3328. 
3329.         self.assertIs(Person.objects.get(name="John Mauchly").alive, True)
3330.         self.assertEqual(Person.objects.get(name="Grace Hopper").gender, 1)
3331. 
3332.     def test_list_editable_action_choices(self):
3333.         # List editable changes should be executed if the "Save" button is
3334.         # used to submit the form - any action choices should be ignored.
3335.         data = {
3336.             "form-TOTAL_FORMS": "3",
3337.             "form-INITIAL_FORMS": "3",
3338.             "form-MAX_NUM_FORMS": "0",
3339. 
3340.             "form-0-gender": "1",
3341.             "form-0-id": "%s" % self.per1.pk,
3342. 
3343.             "form-1-gender": "2",
3344.             "form-1-id": "%s" % self.per2.pk,
3345. 
3346.             "form-2-alive": "checked",
3347.             "form-2-gender": "1",
3348.             "form-2-id": "%s" % self.per3.pk,
3349. 
3350.             "_save": "Save",
3351.             "_selected_action": ['1'],
3352.             "action": ['', 'delete_selected'],
3353.         }
3354.         self.client.post(reverse('admin:admin_views_person_changelist'), data)
3355. 
3356.         self.assertIs(Person.objects.get(name="John Mauchly").alive, False)
3357.         self.assertEqual(Person.objects.get(name="Grace Hopper").gender, 2)
3358. 
3359.     def test_list_editable_popup(self):
3360.         """
3361.         Fields should not be list-editable in popups.
3362.         """
3363.         response = self.client.get(reverse('admin:admin_views_person_changelist'))
3364.         self.assertNotEqual(response.context['cl'].list_editable, ())
3365.         response = self.client.get(reverse('admin:admin_views_person_changelist') + '?%s' % IS_POPUP_VAR)
3366.         self.assertEqual(response.context['cl'].list_editable, ())
3367. 
3368.     def test_pk_hidden_fields(self):
3369.         """
3370.         hidden pk fields aren't displayed in the table body and their
3371.         corresponding human-readable value is displayed instead. The hidden pk
3372.         fields are displayed but separately (not in the table) and only once.
3373.         """
3374.         story1 = Story.objects.create(title='The adventures of Guido', content='Once upon a time in Djangoland...')
3375.         story2 = Story.objects.create(
3376.             title='Crouching Tiger, Hidden Python',
3377.             content='The Python was sneaking into...',
3378.         )
3379.         response = self.client.get(reverse('admin:admin_views_story_changelist'))
3380.         # Only one hidden field, in a separate place than the table.
3381.         self.assertContains(response, 'id="id_form-0-id"', 1)
3382.         self.assertContains(response, 'id="id_form-1-id"', 1)
3383.         self.assertContains(
3384.             response,
3385.             '<div class="hiddenfields">\n'
3386.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
3387.             '<input type="hidden" name="form-1-id" value="%d" id="id_form-1-id">\n</div>'
3388.             % (story2.id, story1.id),
3389.             html=True
3390.         )
3391.         self.assertContains(response, '<td class="field-id">%d</td>' % story1.id, 1)
3392.         self.assertContains(response, '<td class="field-id">%d</td>' % story2.id, 1)
3393. 
3394.     def test_pk_hidden_fields_with_list_display_links(self):
3395.         """ Similarly as test_pk_hidden_fields, but when the hidden pk fields are
3396.             referenced in list_display_links.
3397.             Refs #12475.
3398.         """
3399.         story1 = OtherStory.objects.create(
3400.             title='The adventures of Guido',
3401.             content='Once upon a time in Djangoland...',
3402.         )
3403.         story2 = OtherStory.objects.create(
3404.             title='Crouching Tiger, Hidden Python',
3405.             content='The Python was sneaking into...',
3406.         )
3407.         link1 = reverse('admin:admin_views_otherstory_change', args=(story1.pk,))
3408.         link2 = reverse('admin:admin_views_otherstory_change', args=(story2.pk,))
3409.         response = self.client.get(reverse('admin:admin_views_otherstory_changelist'))
3410.         # Only one hidden field, in a separate place than the table.
3411.         self.assertContains(response, 'id="id_form-0-id"', 1)
3412.         self.assertContains(response, 'id="id_form-1-id"', 1)
3413.         self.assertContains(
3414.             response,
3415.             '<div class="hiddenfields">\n'
3416.             '<input type="hidden" name="form-0-id" value="%d" id="id_form-0-id">'
3417.             '<input type="hidden" name="form-1-id" value="%d" id="id_form-1-id">\n</div>'
3418.             % (story2.id, story1.id),
3419.             html=True
3420.         )
3421.         self.assertContains(response, '<th class="field-id"><a href="%s">%d</a></th>' % (link1, story1.id), 1)
3422.         self.assertContains(response, '<th class="field-id"><a href="%s">%d</a></th>' % (link2, story2.id), 1)
3423. 
3424. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 08:25:02,683 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a bug caused by special characters in a formset prefix in the admin. The current context provides tests for the `list_editable` feature, which is where the bug occurs, but all these tests use the default formset prefix. To find more relevant test cases that address the root cause of the bug, I need to find tests that use custom formset prefixes, potentially with special characters. The `tests/admin_inlines/tests.py` file is a logical place to look for such tests, as inlines often require custom prefixes when multiple formsets are used on the same page.' query='Please provide the full content of `tests/admin_inlines/tests.py`.' extra_requirements='If the file is too large, please at least provide test methods that customize the formset prefix.' purpose='I am looking for examples of tests that use custom formset prefixes within the Django admin, which is directly related to the bug report about special characters in prefixes.'
2025-12-23 08:25:02,685 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/admin_inlines/tests.py`.
2025-12-23 08:25:02,685 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 08:25:02,686 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 08:25:02,686 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 08:25:02,686 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/admin_inlines/tests.py`.
Extra requirements: If the file is too large, please at least provide test methods that customize the formset prefix.
Purpose: I am looking for examples of tests that use custom formset prefixes within the Django admin, which is directly related to the bug report about special characters in prefixes.
2025-12-23 08:25:08,449 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first attempt to retrieve the entire content of `tests/admin_inlines/tests.py`. If the file proves to be too large for a single read, I will then specifically search for test methods within that file that are related to "formset prefix" to narrow down the results.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/admin_inlines/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2130, 'candidates_token_count': 85, 'total_token_count': 2634, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2130}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 419, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.32095262864056756, 'model_name': 'gemini-2.5-pro'} id='run--bb3e3f88-3c3c-4c0c-91ca-611b250e7e7b-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/admin_inlines/tests.py'}, 'id': 'af1c3d56-50fc-43a8-a813-42a4980a19b5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2130, 'output_tokens': 85, 'total_tokens': 2634, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 419}}
2025-12-23 08:25:11,242 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the initial 500 lines of `tests/admin_inlines/tests.py`, and will now fetch the remainder of the file. After ensuring I have the complete content, I will proceed to identify specific test methods that involve the customization of formset prefixes.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 1000.0, "start_line": 501.0, "relative_path": "tests/admin_inlines/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11259, 'candidates_token_count': 88, 'total_token_count': 11414, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11259}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 88}], 'thoughts_token_count': 67, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.23065354607322, 'model_name': 'gemini-2.5-pro'} id='run--c173f3c8-8ace-4702-b8cc-a33a12277cc2-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 1000.0, 'start_line': 501.0, 'relative_path': 'tests/admin_inlines/tests.py'}, 'id': '6e2858ed-7c9a-4fde-94c4-904e11c0b13d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11259, 'output_tokens': 88, 'total_tokens': 11414, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 67}}
2025-12-23 08:27:09,960 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the complete content of `tests/admin_inlines/tests.py`. The file contains a comprehensive suite of tests for inline functionality within the Django admin. Among these, the `test_non_related_name_inline` test is particularly relevant as it examines the behavior of form prefixes when the `related_name` is set to \'+\', a special case that influences prefix generation. Here is the full content of the file:\n```python\nfrom django.contrib.admin import ModelAdmin, TabularInline\nfrom django.contrib.admin.helpers import InlineAdminForm\nfrom django.contrib.admin.tests import AdminSeleniumTestCase\nfrom django.contrib.auth.models import Permission, User\nfrom django.contrib.contenttypes.models import ContentType\nfrom django.test import RequestFactory, TestCase, override_settings\nfrom django.urls import reverse\n\nfrom .admin import InnerInline, site as admin_site\nfrom .models import (\n    Author, BinaryTree, Book, Chapter, Child, ChildModel1, ChildModel2,\n    Fashionista, FootNote, Holder, Holder2, Holder3, Holder4, Inner, Inner2,\n    Inner3, Inner4Stacked, Inner4Tabular, Novel, OutfitItem, Parent,\n    ParentModelWithCustomPk, Person, Poll, Profile, ProfileCollection,\n    Question, Sighting, SomeChildModel, SomeParentModel, Teacher,\n)\n\nINLINE_CHANGELINK_HTML = \'class="inlinechangelink">Change</a>\'\n\n\nclass TestDataMixin:\n\n    @classmethod\n    def setUpTestData(cls):\n        cls.superuser = User.objects.create_superuser(username=\'super\', email=\'super@example.com\', password=\'secret\')\n\n\n@override_settings(ROOT_URLCONF=\'admin_inlines.urls\')\nclass TestInline(TestDataMixin, TestCase):\n    factory = RequestFactory()\n\n    @classmethod\n    def setUpTestData(cls):\n        super().setUpTestData()\n        cls.holder = Holder.objects.create(dummy=13)\n        Inner.objects.create(dummy=42, holder=cls.holder)\n\n    def setUp(self):\n        self.client.force_login(self.superuser)\n\n    def test_can_delete(self):\n        """\n        can_delete should be passed to inlineformset factory.\n        """\n        response = self.client.get(\n            reverse(\'admin:admin_inlines_holder_change\', args=(self.holder.id,))\n        )\n        inner_formset = response.context[\'inline_admin_formsets\'][0].formset\n        expected = InnerInline.can_delete\n        actual = inner_formset.can_delete\n        self.assertEqual(expected, actual, \'can_delete must be equal\')\n\n    def test_readonly_stacked_inline_label(self):\n        """Bug #13174."""\n        holder = Holder.objects.create(dummy=42)\n        Inner.objects.create(holder=holder, dummy=42, readonly=\'\')\n        response = self.client.get(\n            reverse(\'admin:admin_inlines_holder_change\', args=(holder.id,))\n        )\n        self.assertContains(response, \'<label>Inner readonly label:</label>\')\n\n    def test_many_to_many_inlines(self):\n        "Autogenerated many-to-many inlines are displayed correctly (#13407)"\n        response = self.client.get(reverse(\'admin:admin_inlines_author_add\'))\n        # The heading for the m2m inline block uses the right text\n        self.assertContains(response, \'<h2>Author-book relationships</h2>\')\n        # The "add another" label is correct\n        self.assertContains(response, \'Add another Author-book relationship\')\n        # The \'+\' is dropped from the autogenerated form prefix (Author_books+)\n        self.assertContains(response, \'id="id_Author_books-TOTAL_FORMS"\')\n\n    def test_inline_primary(self):\n        person = Person.objects.create(firstname=\'Imelda\')\n        item = OutfitItem.objects.create(name=\'Shoes\')\n        # Imelda likes shoes, but can\'t carry her own bags.\n        data = {\n            \'shoppingweakness_set-TOTAL_FORMS\': 1,\n            \'shoppingweakness_set-INITIAL_FORMS\': 0,\n            \'shoppingweakness_set-MAX_NUM_FORMS\': 0,\n            \'_save\': \'Save\',\n            \'person\': person.id,\n            \'max_weight\': 0,\n            \'shoppingweakness_set-0-item\': item.id,\n        }\n        response = self.client.post(reverse(\'admin:admin_inlines_fashionista_add\'), data)\n        self.assertEqual(response.status_code, 302)\n        self.assertEqual(len(Fashionista.objects.filter(person__firstname=\'Imelda\')), 1)\n\n    def test_tabular_inline_column_css_class(self):\n        """\n        Field names are included in the context to output a field-specific\n        CSS class name in the column headers.\n        """\n        response = self.client.get(reverse(\'admin:admin_inlines_poll_add\'))\n        text_field, call_me_field = list(response.context[\'inline_admin_formset\'].fields())\n        # Editable field.\n        self.assertEqual(text_field[\'name\'], \'text\')\n        self.assertContains(response, \'<th class="column-text required">\')\n        # Read-only field.\n        self.assertEqual(call_me_field[\'name\'], \'call_me\')\n        self.assertContains(response, \'<th class="column-call_me">\')\n\n    def test_custom_form_tabular_inline_label(self):\n        """\n        A model form with a form field specified (TitleForm.title1) should have\n        its label rendered in the tabular inline.\n        """\n        response = self.client.get(reverse(\'admin:admin_inlines_titlecollection_add\'))\n        self.assertContains(response, \'<th class="column-title1 required">Title1</th>\', html=True)\n\n    def test_custom_form_tabular_inline_extra_field_label(self):\n        response = self.client.get(reverse(\'admin:admin_inlines_outfititem_add\'))\n        _, extra_field = list(response.context[\'inline_admin_formset\'].fields())\n        self.assertEqual(extra_field[\'label\'], \'Extra field\')\n\n    def test_non_editable_custom_form_tabular_inline_extra_field_label(self):\n        response = self.client.get(reverse(\'admin:admin_inlines_chapter_add\'))\n        _, extra_field = list(response.context[\'inline_admin_formset\'].fields())\n        self.assertEqual(extra_field[\'label\'], \'Extra field\')\n\n    def test_custom_form_tabular_inline_overridden_label(self):\n        """\n        SomeChildModelForm.__init__() overrides the label of a form field.\n        That label is displayed in the TabularInline.\n        """\n        response = self.client.get(reverse(\'admin:admin_inlines_someparentmodel_add\'))\n        field = list(response.context[\'inline_admin_formset\'].fields())[0]\n        self.assertEqual(field[\'label\'], \'new label\')\n        self.assertContains(response, \'<th class="column-name required">New label</th>\', html=True)\n\n    def test_tabular_non_field_errors(self):\n        """\n        non_field_errors are displayed correctly, including the correct value\n        for colspan.\n        """\n        data = {\n            \'title_set-TOTAL_FORMS\': 1,\n            \'title_set-INITIAL_FORMS\': 0,\n            \'title_set-MAX_NUM_FORMS\': 0,\n            \'_save\': \'Save\',\n            \'title_set-0-title1\': \'a title\',\n            \'title_set-0-title2\': \'a different title\',\n        }\n        response = self.client.post(reverse(\'admin:admin_inlines_titlecollection_add\'), data)\n        # Here colspan is "4": two fields (title1 and title2), one hidden field and the delete checkbox.\n        self.assertContains(\n            response,\n            \'<tr class="row-form-errors"><td colspan="4"><ul class="errorlist nonfield">\'\n            \'<li>The two titles must be the same</li></ul></td></tr>\'\n        )\n\n    def test_no_parent_callable_lookup(self):\n        """Admin inline `readonly_field` shouldn\'t invoke parent ModelAdmin callable"""\n        # Identically named callable isn\'t present in the parent ModelAdmin,\n        # rendering of the add view shouldn\'t explode\n        response = self.client.get(reverse(\'admin:admin_inlines_novel_add\'))\n        self.assertEqual(response.status_code, 200)\n        # View should have the child inlines section\n        self.assertContains(\n            response,\n            \'<div class="js-inline-admin-formset inline-group" id="chapter_set-group"\'\n        )\n\n    def test_callable_lookup(self):\n        """Admin inline should invoke local callable when its name is listed in readonly_fields"""\n        response = self.client.get(reverse(\'admin:admin_inlines_poll_add\'))\n        self.assertEqual(response.status_code, 200)\n        # Add parent object view should have the child inlines section\n        self.assertContains(\n            response,\n            \'<div class="js-inline-admin-formset inline-group" id="question_set-group"\'\n        )\n        # The right callable should be used for the inline readonly_fields\n        # column cells\n        self.assertContains(response, \'<p>Callable in QuestionInline</p>\')\n\n    def test_help_text(self):\n        """\n        The inlines\' model field help texts are displayed when using both the\n        stacked and tabular layouts.\n        """\n        response = self.client.get(reverse(\'admin:admin_inlines_holder4_add\'))\n        self.assertContains(response, \'<div class="help">Awesome stacked help text is awesome.</div>\', 4)\n        self.assertContains(\n            response,\n            \'<img src="/static/admin/img/icon-unknown.svg" \'\n            \'class="help help-tooltip" width="10" height="10" \'\n            \'alt="(Awesome tabular help text is awesome.)" \'\n            \'title="Awesome tabular help text is awesome.">\',\n            1\n        )\n        # ReadOnly fields\n        response = self.client.get(reverse(\'admin:admin_inlines_capofamiglia_add\'))\n        self.assertContains(\n            response,\n            \'<img src="/static/admin/img/icon-unknown.svg" \'\n            \'class="help help-tooltip" width="10" height="10" \'\n            \'alt="(Help text for ReadOnlyInline)" \'\n            \'title="Help text for ReadOnlyInline">\',\n            1\n        )\n\n    def test_tabular_model_form_meta_readonly_field(self):\n        """\n        Tabular inlines use ModelForm.Meta.help_texts and labels for read-only\n        fields.\n        """\n        response = self.client.get(reverse(\'admin:admin_inlines_someparentmodel_add\'))\n        self.assertContains(\n            response,\n            \'<img src="/static/admin/img/icon-unknown.svg" \'\n            \'class="help help-tooltip" width="10" height="10" \'\n            \'alt="(Help text from ModelForm.Meta)" \'\n            \'title="Help text from ModelForm.Meta">\'\n        )\n        self.assertContains(response, \'Label from ModelForm.Meta\')\n\n    def test_inline_hidden_field_no_column(self):\n        """#18263 -- Make sure hidden fields don\'t get a column in tabular inlines"""\n        parent = SomeParentModel.objects.create(name=\'a\')\n        SomeChildModel.objects.create(name=\'b\', position=\'0\', parent=parent)\n        SomeChildModel.objects.create(name=\'c\', position=\'1\', parent=parent)\n        response = self.client.get(reverse(\'admin:admin_inlines_someparentmodel_change\', args=(parent.pk,)))\n        self.assertNotContains(response, \'<td class="field-position">\')\n        self.assertInHTML(\n            \'<input id="id_somechildmodel_set-1-position" \'\n            \'name="somechildmodel_set-1-position" type="hidden" value="1">\',\n            response.rendered_content,\n        )\n\n    def test_non_related_name_inline(self):\n        """\n        Multiple inlines with related_name=\'+\' have correct form prefixes.\n        """\n        response = self.client.get(reverse(\'admin:admin_inlines_capofamiglia_add\'))\n        self.assertContains(response, \'<input type="hidden" name="-1-0-id" id="id_-1-0-id">\', html=True)\n        self.assertContains(\n            response,\n            \'<input type="hidden" name="-1-0-capo_famiglia" id="id_-1-0-capo_famiglia">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input id="id_-1-0-name" type="text" class="vTextField" name="-1-0-name" maxlength="100">\',\n            html=True\n        )\n        self.assertContains(response, \'<input type="hidden" name="-2-0-id" id="id_-2-0-id">\', html=True)\n        self.assertContains(\n            response,\n            \'<input type="hidden" name="-2-0-capo_famiglia" id="id_-2-0-capo_famiglia">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input id="id_-2-0-name" type="text" class="vTextField" name="-2-0-name" maxlength="100">\',\n            html=True\n        )\n\n    @override_settings(USE_L10N=True, USE_THOUSAND_SEPARATOR=True)\n    def test_localize_pk_shortcut(self):\n        """\n        The "View on Site" link is correct for locales that use thousand\n        separators.\n        """\n        holder = Holder.objects.create(pk=123456789, dummy=42)\n        inner = Inner.objects.create(pk=987654321, holder=holder, dummy=42, readonly=\'\')\n        response = self.client.get(reverse(\'admin:admin_inlines_holder_change\', args=(holder.id,)))\n        inner_shortcut = \'r/%s/%s/\' % (ContentType.objects.get_for_model(inner).pk, inner.pk)\n        self.assertContains(response, inner_shortcut)\n\n    def test_custom_pk_shortcut(self):\n        """\n        The "View on Site" link is correct for models with a custom primary key\n        field.\n        """\n        parent = ParentModelWithCustomPk.objects.create(my_own_pk="foo", name="Foo")\n        child1 = ChildModel1.objects.create(my_own_pk="bar", name="Bar", parent=parent)\n        child2 = ChildModel2.objects.create(my_own_pk="baz", name="Baz", parent=parent)\n        response = self.client.get(reverse(\'admin:admin_inlines_parentmodelwithcustompk_change\', args=(\'foo\',)))\n        child1_shortcut = \'r/%s/%s/\' % (ContentType.objects.get_for_model(child1).pk, child1.pk)\n        child2_shortcut = \'r/%s/%s/\' % (ContentType.objects.get_for_model(child2).pk, child2.pk)\n        self.assertContains(response, child1_shortcut)\n        self.assertContains(response, child2_shortcut)\n\n    def test_create_inlines_on_inherited_model(self):\n        """\n        An object can be created with inlines when it inherits another class.\n        """\n        data = {\n            \'name\': \'Martian\',\n            \'sighting_set-TOTAL_FORMS\': 1,\n            \'sighting_set-INITIAL_FORMS\': 0,\n            \'sighting_set-MAX_NUM_FORMS\': 0,\n            \'sighting_set-0-place\': \'Zone 51\',\n            \'_save\': \'Save\',\n        }\n        response = self.client.post(reverse(\'admin:admin_inlines_extraterrestrial_add\'), data)\n        self.assertEqual(response.status_code, 302)\n        self.assertEqual(Sighting.objects.filter(et__name=\'Martian\').count(), 1)\n\n    def test_custom_get_extra_form(self):\n        bt_head = BinaryTree.objects.create(name="Tree Head")\n        BinaryTree.objects.create(name="First Child", parent=bt_head)\n        # The maximum number of forms should respect \'get_max_num\' on the\n        # ModelAdmin\n        max_forms_input = (\n            \'<input id="id_binarytree_set-MAX_NUM_FORMS" \'\n            \'name="binarytree_set-MAX_NUM_FORMS" type="hidden" value="%d">\'\n        )\n        # The total number of forms will remain the same in either case\n        total_forms_hidden = (\n            \'<input id="id_binarytree_set-TOTAL_FORMS" \'\n            \'name="binarytree_set-TOTAL_FORMS" type="hidden" value="2">\'\n        )\n        response = self.client.get(reverse(\'admin:admin_inlines_binarytree_add\'))\n        self.assertInHTML(max_forms_input % 3, response.rendered_content)\n        self.assertInHTML(total_forms_hidden, response.rendered_content)\n\n        response = self.client.get(reverse(\'admin:admin_inlines_binarytree_change\', args=(bt_head.id,)))\n        self.assertInHTML(max_forms_input % 2, response.rendered_content)\n        self.assertInHTML(total_forms_hidden, response.rendered_content)\n\n    def test_min_num(self):\n        """\n        min_num and extra determine number of forms.\n        """\n        class MinNumInline(TabularInline):\n            model = BinaryTree\n            min_num = 2\n            extra = 3\n\n        modeladmin = ModelAdmin(BinaryTree, admin_site)\n        modeladmin.inlines = [MinNumInline]\n        min_forms = (\n            \'<input id="id_binarytree_set-MIN_NUM_FORMS" \'\n            \'name="binarytree_set-MIN_NUM_FORMS" type="hidden" value="2">\'\n        )\n        total_forms = (\n            \'<input id="id_binarytree_set-TOTAL_FORMS" \'\n            \'name="binarytree_set-TOTAL_FORMS" type="hidden" value="5">\'\n        )\n        request = self.factory.get(reverse(\'admin:admin_inlines_binarytree_add\'))\n        request.user = User(username=\'super\', is_superuser=True)\n        response = modeladmin.changeform_view(request)\n        self.assertInHTML(min_forms, response.rendered_content)\n        self.assertInHTML(total_forms, response.rendered_content)\n\n    def test_custom_min_num(self):\n        bt_head = BinaryTree.objects.create(name="Tree Head")\n        BinaryTree.objects.create(name="First Child", parent=bt_head)\n\n        class MinNumInline(TabularInline):\n            model = BinaryTree\n            extra = 3\n\n            def get_min_num(self, request, obj=None, **kwargs):\n                if obj:\n                    return 5\n                return 2\n\n        modeladmin = ModelAdmin(BinaryTree, admin_site)\n        modeladmin.inlines = [MinNumInline]\n        min_forms = (\n            \'<input id="id_binarytree_set-MIN_NUM_FORMS" \'\n            \'name="binarytree_set-MIN_NUM_FORMS" type="hidden" value="%d">\'\n        )\n        total_forms = (\n            \'<input id="id_binarytree_set-TOTAL_FORMS" \'\n            \'name="binarytree_set-TOTAL_FORMS" type="hidden" value="%d">\'\n        )\n        request = self.factory.get(reverse(\'admin:admin_inlines_binarytree_add\'))\n        request.user = User(username=\'super\', is_superuser=True)\n        response = modeladmin.changeform_view(request)\n        self.assertInHTML(min_forms % 2, response.rendered_content)\n        self.assertInHTML(total_forms % 5, response.rendered_content)\n\n        request = self.factory.get(reverse(\'admin:admin_inlines_binarytree_change\', args=(bt_head.id,)))\n        request.user = User(username=\'super\', is_superuser=True)\n        response = modeladmin.changeform_view(request, object_id=str(bt_head.id))\n        self.assertInHTML(min_forms % 5, response.rendered_content)\n        self.assertInHTML(total_forms % 8, response.rendered_content)\n\n    def test_inline_nonauto_noneditable_pk(self):\n        response = self.client.get(reverse(\'admin:admin_inlines_author_add\'))\n        self.assertContains(\n            response,\n            \'<input id="id_nonautopkbook_set-0-rand_pk" \'\n            \'name="nonautopkbook_set-0-rand_pk" type="hidden">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input id="id_nonautopkbook_set-2-0-rand_pk" \'\n            \'name="nonautopkbook_set-2-0-rand_pk" type="hidden">\',\n            html=True\n        )\n\n    def test_inline_nonauto_noneditable_inherited_pk(self):\n        response = self.client.get(reverse(\'admin:admin_inlines_author_add\'))\n        self.assertContains(\n            response,\n            \'<input id="id_nonautopkbookchild_set-0-nonautopkbook_ptr" \'\n            \'name="nonautopkbookchild_set-0-nonautopkbook_ptr" type="hidden">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input id="id_nonautopkbookchild_set-2-nonautopkbook_ptr" \'\n            \'name="nonautopkbookchild_set-2-nonautopkbook_ptr" type="hidden">\',\n            html=True\n        )\n\n    def test_inline_editable_pk(self):\n        response = self.client.get(reverse(\'admin:admin_inlines_author_add\'))\n        self.assertContains(\n            response,\n            \'<input class="vIntegerField" id="id_editablepkbook_set-0-manual_pk" \'\n            \'name="editablepkbook_set-0-manual_pk" type="number">\',\n            html=True, count=1\n        )\n        self.assertContains(\n            response,\n            \'<input class="vIntegerField" id="id_editablepkbook_set-2-0-manual_pk" \'\n            \'name="editablepkbook_set-2-0-manual_pk" type="number">\',\n            html=True, count=1\n        )\n\n    def test_stacked_inline_edit_form_contains_has_original_class(self):\n        holder = Holder.objects.create(dummy=1)\n        holder.inner_set.create(dummy=1)\n        response = self.client.get(reverse(\'admin:admin_inlines_holder_change\', args=(holder.pk,)))\n        self.assertContains(\n            response,\n            \'<div class="inline-related has_original" id="inner_set-0">\',\n            count=1\n        )\n        self.assertContains(\n            response,\n            \'<div class="inline-related" id="inner_set-1">\',\n            count=1\n        )\n\n    def test_inlines_show_change_link_registered(self):\n        "Inlines `show_change_link` for registered models when enabled."\n        holder = Holder4.objects.create(dummy=1)\n        item1 = Inner4Stacked.objects.create(dummy=1, holder=holder)\n        item2 = Inner4Tabular.objects.create(dummy=1, holder=holder)\n        items = (\n            (\'inner4stacked\', item1.pk),\n            (\'inner4tabular\', item2.pk),\n        )\n        response = self.client.get(reverse(\'admin:admin_inlines_holder4_change\', args=(holder.pk,)))\n        self.assertTrue(response.context[\'inline_admin_formset\'].opts.has_registered_model)\n        for model, pk in items:\n            url = reverse(\'admin:admin_inlines_%s_change\' % model, args=(pk,))\n            self.assertContains(response, \'<a href="%s" %s\' % (url, INLINE_CHANGELINK_HTML))\n\n    def test_inlines_show_change_link_unregistered(self):\n        "Inlines `show_change_link` disabled for unregistered models."\n        parent = ParentModelWithCustomPk.objects.create(my_own_pk="foo", name="Foo")\n        ChildModel1.objects.create(my_own_pk="bar", name="Bar", parent=parent)\n        ChildModel2.objects.create(my_own_pk="baz", name="Baz", parent=parent)\n        response = self.client.get(reverse(\'admin:admin_inlines_parentmodelwithcustompk_change\', args=(\'foo\',)))\n        self.assertFalse(response.context[\'inline_admin_formset\'].opts.has_registered_model)\n        self.assertNotContains(response, INLINE_CHANGELINK_HTML)\n\n    def test_tabular_inline_show_change_link_false_registered(self):\n        "Inlines `show_change_link` disabled by default."\n        poll = Poll.objects.create(name="New poll")\n        Question.objects.create(poll=poll)\n        response = self.client.get(reverse(\'admin:admin_inlines_poll_change\', args=(poll.pk,)))\n        self.assertTrue(response.context[\'inline_admin_formset\'].opts.has_registered_model)\n        self.assertNotContains(response, INLINE_CHANGELINK_HTML)\n\n    def test_noneditable_inline_has_field_inputs(self):\n        """Inlines without change permission shows field inputs on add form."""\n        response = self.client.get(reverse(\'admin:admin_inlines_novelreadonlychapter_add\'))\n        self.assertContains(\n            response,\n            \'<input type="text" name="chapter_set-0-name" \'\n            \'class="vTextField" maxlength="40" id="id_chapter_set-0-name">\',\n            html=True\n        )\n\n\n@override_settings(ROOT_URLCONF=\'admin_inlines.urls\')\nclass TestInlineMedia(TestDataMixin, TestCase):\n\n    def setUp(self):\n        self.client.force_login(self.superuser)\n\n    def test_inline_media_only_base(self):\n        holder = Holder(dummy=13)\n        holder.save()\n        Inner(dummy=42, holder=holder).save()\n        change_url = reverse(\'admin:admin_inlines_holder_change\', args=(holder.id,))\n        response = self.client.get(change_url)\n        self.assertContains(response, \'my_awesome_admin_scripts.js\')\n\n    def test_inline_media_only_inline(self):\n        holder = Holder3(dummy=13)\n        holder.save()\n        Inner3(dummy=42, holder=holder).save()\n        change_url = reverse(\'admin:admin_inlines_holder3_change\', args=(holder.id,))\n        response = self.client.get(change_url)\n        self.assertEqual(\n            response.context[\'inline_admin_formsets\'][0].media._js,\n            [\n                \'admin/js/vendor/jquery/jquery.min.js\',\n                \'my_awesome_inline_scripts.js\',\n                \'custom_number.js\',\n                \'admin/js/jquery.init.js\',\n                \'admin/js/inlines.min.js\',\n            ]\n        )\n        self.assertContains(response, \'my_awesome_inline_scripts.js\')\n\n    def test_all_inline_media(self):\n        holder = Holder2(dummy=13)\n        holder.save()\n        Inner2(dummy=42, holder=holder).save()\n        change_url = reverse(\'admin:admin_inlines_holder2_change\', args=(holder.id,))\n        response = self.client.get(change_url)\n        self.assertContains(response, \'my_awesome_admin_scripts.js\')\n        self.assertContains(response, \'my_awesome_inline_scripts.js\')\n\n\n@override_settings(ROOT_URLCONF=\'admin_inlines.urls\')\nclass TestInlineAdminForm(TestCase):\n\n    def test_immutable_content_type(self):\n        """Regression for #9362\n        The problem depends only on InlineAdminForm and its "original"\n        argument, so we can safely set the other arguments to None/{}. We just\n        need to check that the content_type argument of Child isn\'t altered by\n        the internals of the inline form."""\n\n        sally = Teacher.objects.create(name=\'Sally\')\n        john = Parent.objects.create(name=\'John\')\n        joe = Child.objects.create(name=\'Joe\', teacher=sally, parent=john)\n\n        iaf = InlineAdminForm(None, None, {}, {}, joe)\n        parent_ct = ContentType.objects.get_for_model(Parent)\n        self.assertEqual(iaf.original.content_type, parent_ct)\n\n\n@override_settings(ROOT_URLCONF=\'admin_inlines.urls\')\nclass TestInlineProtectedOnDelete(TestDataMixin, TestCase):\n\n    def setUp(self):\n        self.client.force_login(self.superuser)\n\n    def test_deleting_inline_with_protected_delete_does_not_validate(self):\n        lotr = Novel.objects.create(name=\'Lord of the rings\')\n        chapter = Chapter.objects.create(novel=lotr, name=\'Many Meetings\')\n        foot_note = FootNote.objects.create(chapter=chapter, note=\'yadda yadda\')\n\n        change_url = reverse(\'admin:admin_inlines_novel_change\', args=(lotr.id,))\n        response = self.client.get(change_url)\n        data = {\n            \'name\': lotr.name,\n            \'chapter_set-TOTAL_FORMS\': 1,\n            \'chapter_set-INITIAL_FORMS\': 1,\n            \'chapter_set-MAX_NUM_FORMS\': 1000,\n            \'_save\': \'Save\',\n            \'chapter_set-0-id\': chapter.id,\n            \'chapter_set-0-name\': chapter.name,\n            \'chapter_set-0-novel\': lotr.id,\n            \'chapter_set-0-DELETE\': \'on\'\n        }\n        response = self.client.post(change_url, data)\n        self.assertContains(response, "Deleting chapter %s would require deleting "\n                            "the following protected related objects: foot note %s"\n                            % (chapter, foot_note))\n\n\n@override_settings(ROOT_URLCONF=\'admin_inlines.urls\')\nclass TestInlinePermissions(TestCase):\n    """\n    Make sure the admin respects permissions for objects that are edited\n    inline. Refs #8060.\n    """\n\n    @classmethod\n    def setUpTestData(cls):\n        cls.user = User(username=\'admin\', is_staff=True, is_active=True)\n        cls.user.set_password(\'secret\')\n        cls.user.save()\n\n        cls.author_ct = ContentType.objects.get_for_model(Author)\n        cls.holder_ct = ContentType.objects.get_for_model(Holder2)\n        cls.book_ct = ContentType.objects.get_for_model(Book)\n        cls.inner_ct = ContentType.objects.get_for_model(Inner2)\n\n        # User always has permissions to add and change Authors, and Holders,\n        # the main (parent) models of the inlines. Permissions on the inlines\n        # vary per test.\n        permission = Permission.objects.get(codename=\'add_author\', content_type=cls.author_ct)\n        cls.user.user_permissions.add(permission)\n        permission = Permission.objects.get(codename=\'change_author\', content_type=cls.author_ct)\n        cls.user.user_permissions.add(permission)\n        permission = Permission.objects.get(codename=\'add_holder2\', content_type=cls.holder_ct)\n        cls.user.user_permissions.add(permission)\n        permission = Permission.objects.get(codename=\'change_holder2\', content_type=cls.holder_ct)\n        cls.user.user_permissions.add(permission)\n\n        author = Author.objects.create(pk=1, name=\'The Author\')\n        cls.book = author.books.create(name=\'The inline Book\')\n        cls.author_change_url = reverse(\'admin:admin_inlines_author_change\', args=(author.id,))\n        # Get the ID of the automatically created intermediate model for the Author-Book m2m\n        author_book_auto_m2m_intermediate = Author.books.through.objects.get(author=author, book=cls.book)\n        cls.author_book_auto_m2m_intermediate_id = author_book_auto_m2m_intermediate.pk\n\n        cls.holder = Holder2.objects.create(dummy=13)\n        cls.inner2 = Inner2.objects.create(dummy=42, holder=cls.holder)\n\n    def setUp(self):\n        self.holder_change_url = reverse(\'admin:admin_inlines_holder2_change\', args=(self.holder.id,))\n        self.client.force_login(self.user)\n\n    def test_inline_add_m2m_noperm(self):\n        response = self.client.get(reverse(\'admin:admin_inlines_author_add\'))\n        # No change permission on books, so no inline\n        self.assertNotContains(response, \'<h2>Author-book relationships</h2>\')\n        self.assertNotContains(response, \'Add another Author-Book Relationship\')\n        self.assertNotContains(response, \'id="id_Author_books-TOTAL_FORMS"\')\n\n    def test_inline_add_fk_noperm(self):\n        response = self.client.get(reverse(\'admin:admin_inlines_holder2_add\'))\n        # No permissions on Inner2s, so no inline\n        self.assertNotContains(response, \'<h2>Inner2s</h2>\')\n        self.assertNotContains(response, \'Add another Inner2\')\n        self.assertNotContains(response, \'id="id_inner2_set-TOTAL_FORMS"\')\n\n    def test_inline_change_m2m_noperm(self):\n        response = self.client.get(self.author_change_url)\n        # No change permission on books, so no inline\n        self.assertNotContains(response, \'<h2>Author-book relationships</h2>\')\n        self.assertNotContains(response, \'Add another Author-Book Relationship\')\n        self.assertNotContains(response, \'id="id_Author_books-TOTAL_FORMS"\')\n\n    def test_inline_change_fk_noperm(self):\n        response = self.client.get(self.holder_change_url)\n        # No permissions on Inner2s, so no inline\n        self.assertNotContains(response, \'<h2>Inner2s</h2>\')\n        self.assertNotContains(response, \'Add another Inner2\')\n        self.assertNotContains(response, \'id="id_inner2_set-TOTAL_FORMS"\')\n\n    def test_inline_add_m2m_view_only_perm(self):\n        permission = Permission.objects.get(codename=\'view_book\', content_type=self.book_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(reverse(\'admin:admin_inlines_author_add\'))\n        # View-only inlines. (It could be nicer to hide the empty, non-editable\n        # inlines on the add page.)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_view_permission, True)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_add_permission, False)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_change_permission, False)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_delete_permission, False)\n        self.assertContains(response, \'<h2>Author-book relationships</h2>\')\n        self.assertContains(\n            response,\n            \'<input type="hidden" name="Author_books-TOTAL_FORMS" value="0" \'\n            \'id="id_Author_books-TOTAL_FORMS">\',\n            html=True,\n        )\n        self.assertNotContains(response, \'Add another Author-Book Relationship\')\n\n    def test_inline_add_m2m_add_perm(self):\n        permission = Permission.objects.get(codename=\'add_book\', content_type=self.book_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(reverse(\'admin:admin_inlines_author_add\'))\n        # No change permission on Books, so no inline\n        self.assertNotContains(response, \'<h2>Author-book relationships</h2>\')\n        self.assertNotContains(response, \'Add another Author-Book Relationship\')\n        self.assertNotContains(response, \'id="id_Author_books-TOTAL_FORMS"\')\n\n    def test_inline_add_fk_add_perm(self):\n        permission = Permission.objects.get(codename=\'add_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(reverse(\'admin:admin_inlines_holder2_add\'))\n        # Add permission on inner2s, so we get the inline\n        self.assertContains(response, \'<h2>Inner2s</h2>\')\n        self.assertContains(response, \'Add another Inner2\')\n        self.assertContains(response, \'<input type="hidden" id="id_inner2_set-TOTAL_FORMS" \'\n                            \'value="3" name="inner2_set-TOTAL_FORMS">\', html=True)\n\n    def test_inline_change_m2m_add_perm(self):\n        permission = Permission.objects.get(codename=\'add_book\', content_type=self.book_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.author_change_url)\n        # No change permission on books, so no inline\n        self.assertNotContains(response, \'<h2>Author-book relationships</h2>\')\n        self.assertNotContains(response, \'Add another Author-Book Relationship\')\n        self.assertNotContains(response, \'id="id_Author_books-TOTAL_FORMS"\')\n        self.assertNotContains(response, \'id="id_Author_books-0-DELETE"\')\n\n    def test_inline_change_m2m_view_only_perm(self):\n        permission = Permission.objects.get(codename=\'view_book\', content_type=self.book_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.author_change_url)\n        # View-only inlines.\n        self.assertIs(response.context[\'inline_admin_formset\'].has_view_permission, True)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_add_permission, False)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_change_permission, False)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_delete_permission, False)\n        self.assertContains(response, \'<h2>Author-book relationships</h2>\')\n        self.assertContains(\n            response,\n            \'<input type="hidden" name="Author_books-TOTAL_FORMS" value="1" \'\n            \'id="id_Author_books-TOTAL_FORMS">\',\n            html=True,\n        )\n        # The field in the inline is read-only.\n        self.assertContains(response, \'<p>%s</p>\' % self.book)\n        self.assertNotContains(\n            response,\n            \'<input type="checkbox" name="Author_books-0-DELETE" id="id_Author_books-0-DELETE">\',\n            html=True,\n        )\n\n    def test_inline_change_m2m_change_perm(self):\n        permission = Permission.objects.get(codename=\'change_book\', content_type=self.book_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.author_change_url)\n        # We have change perm on books, so we can add/change/delete inlines\n        self.assertIs(response.context[\'inline_admin_formset\'].has_view_permission, True)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_add_permission, True)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_change_permission, True)\n        self.assertIs(response.context[\'inline_admin_formset\'].has_delete_permission, True)\n        self.assertContains(response, \'<h2>Author-book relationships</h2>\')\n        self.assertContains(response, \'Add another Author-book relationship\')\n        self.assertContains(response, \'<input type="hidden" id="id_Author_books-TOTAL_FORMS" \'\n                            \'value="4" name="Author_books-TOTAL_FORMS">\', html=True)\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_Author_books-0-id" value="%i" \'\n            \'name="Author_books-0-id">\' % self.author_book_auto_m2m_intermediate_id,\n            html=True\n        )\n        self.assertContains(response, \'id="id_Author_books-0-DELETE"\')\n\n    def test_inline_change_fk_add_perm(self):\n        permission = Permission.objects.get(codename=\'add_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.holder_change_url)\n        # Add permission on inner2s, so we can add but not modify existing\n        self.assertContains(response, \'<h2>Inner2s</h2>\')\n        self.assertContains(response, \'Add another Inner2\')\n        # 3 extra forms only, not the existing instance form\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="3" \'\n            \'name="inner2_set-TOTAL_FORMS">\',\n            html=True\n        )\n        self.assertNotContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">\' % self.inner2.id,\n            html=True\n        )\n\n    def test_inline_change_fk_change_perm(self):\n        permission = Permission.objects.get(codename=\'change_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.holder_change_url)\n        # Change permission on inner2s, so we can change existing but not add new\n        self.assertContains(response, \'<h2>Inner2s</h2>\', count=2)\n        # Just the one form for existing instances\n        self.assertContains(\n            response, \'<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="1" name="inner2_set-TOTAL_FORMS">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">\' % self.inner2.id,\n            html=True\n        )\n        # max-num 0 means we can\'t add new ones\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-MAX_NUM_FORMS" value="0" name="inner2_set-MAX_NUM_FORMS">\',\n            html=True\n        )\n        # TabularInline\n        self.assertContains(response, \'<th class="column-dummy required">Dummy</th>\', html=True)\n        self.assertContains(\n            response,\n            \'<input type="number" name="inner2_set-2-0-dummy" value="%s" \'\n            \'class="vIntegerField" id="id_inner2_set-2-0-dummy">\' % self.inner2.dummy,\n            html=True,\n        )\n\n    def test_inline_change_fk_add_change_perm(self):\n        permission = Permission.objects.get(codename=\'add_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        permission = Permission.objects.get(codename=\'change_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.holder_change_url)\n        # Add/change perm, so we can add new and change existing\n        self.assertContains(response, \'<h2>Inner2s</h2>\')\n        # One form for existing instance and three extra for new\n        self.assertContains(\n            response, \'<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="4" name="inner2_set-TOTAL_FORMS">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">\' % self.inner2.id,\n            html=True\n        )\n\n    def test_inline_change_fk_change_del_perm(self):\n        permission = Permission.objects.get(codename=\'change_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        permission = Permission.objects.get(codename=\'delete_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.holder_change_url)\n        # Change/delete perm on inner2s, so we can change/delete existing\n        self.assertContains(response, \'<h2>Inner2s</h2>\')\n        # One form for existing instance only, no new\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="1" name="inner2_set-TOTAL_FORMS">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">\' % self.inner2.id,\n            html=True\n        )\n        self.assertContains(response, \'id="id_inner2_set-0-DELETE"\')\n\n    def test_inline_change_fk_all_perms(self):\n        permission = Permission.objects.get(codename=\'add_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        permission = Permission.objects.get(codename=\'change_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        permission = Permission.objects.get(codename=\'delete_inner2\', content_type=self.inner_ct)\n        self.user.user_permissions.add(permission)\n        response = self.client.get(self.holder_change_url)\n        # All perms on inner2s, so we can add/change/delete\n        self.assertContains(response, \'<h2>Inner2s</h2>\', count=2)\n        # One form for existing instance only, three for new\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="4" name="inner2_set-TOTAL_FORMS">\',\n            html=True\n        )\n        self.assertContains(\n            response,\n            \'<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">\' % self.inner2.id,\n            html=True\n        )\n        self.assertContains(response, \'id="id_inner2_set-0-DELETE"\')\n        # TabularInline\n        self.assertContains(response, \'<th class="column-dummy required">Dummy</th>\', html=True)\n        self.assertContains(\n            response,\n            \'<input type="number" name="inner2_set-2-0-dummy" value="%s" \'\n            \'class="vIntegerField" id="id_inner2_set-2-0-dummy">\' % self.inner2.dummy,\n            html=True,\n        )\n\n\n@override_settings(ROOT_URLCONF=\'admin_inlines.urls\')\nclass SeleniumTests(AdminSeleniumTestCase):\n\n    available_apps = [\'admin_inlines\'] + AdminSeleniumTestCase.available_apps\n\n    def setUp(self):\n        User.objects.create_superuser(username=\'super\', password=\'secret\', email=\'super@example.com\')\n\n    def test_add_stackeds(self):\n        """\n        The "Add another XXX" link correctly adds items to the stacked formset.\n        """\n        self.admin_login(username=\'super\', password=\'secret\')\n        self.selenium.get(self.live_server_url + reverse(\'admin:admin_inlines_holder4_add\'))\n\n        inline_id = \'#inner4stacked_set-group\'\n\n        def rows_length():\n            return len(self.selenium.find_elements_by_css_selector(\'%s .dynamic-inner4stacked_set\' % inline_id))\n        self.assertEqual(rows_length(), 3)\n\n        add_button = self.selenium.find_element_by_link_text(\n            \'Add another Inner4 stacked\')\n        add_button.click()\n\n        self.assertEqual(rows_length(), 4)\n\n    def test_delete_stackeds(self):\n        self.admin_login(username=\'super\', password=\'secret\')\n        self.selenium.get(self.live_server_url + reverse(\'admin:admin_inlines_holder4_add\'))\n\n        inline_id = \'#inner4stacked_set-group\'\n\n        def rows_length():\n            return len(self.selenium.find_elements_by_css_selector(\'%s .dynamic-inner4stacked_set\' % inline_id))\n        self.assertEqual(rows_length(), 3)\n\n        add_button = self.selenium.find_element_by_link_text(\n            \'Add another Inner4 stacked\')\n        add_button.click()\n        add_button.click()\n\n        self.assertEqual(rows_length(), 5, msg="sanity check")\n        for delete_link in self.selenium.find_elements_by_css_selector(\'%s .inline-deletelink\' % inline_id):\n            delete_link.click()\n        with self.disable_implicit_wait():\n            self.assertEqual(rows_length(), 0)\n\n    def test_delete_invalid_stacked_inlines(self):\n        from selenium.common.exceptions import NoSuchElementException\n        self.admin_login(username=\'super\', password=\'secret\')\n        self.selenium.get(self.live_server_url + reverse(\'admin:admin_inlines_holder4_add\'))\n\n        inline_id = \'#inner4stacked_set-group\'\n\n        def rows_length():\n            return len(self.selenium.find_elements_by_css_selector(\'%s .dynamic-inner4stacked_set\' % inline_id))\n        self.assertEqual(rows_length(), 3)\n\n        add_button = self.selenium.find_element_by_link_text(\n            \'Add another Inner4 stacked\')\n        add_button.click()\n        add_button.click()\n        self.assertEqual(len(self.selenium.find_elements_by_css_selector(\'#id_inner4stacked_set-4-dummy\')), 1)\n\n        # Enter some data and click \'Save\'.\n        self.selenium.find_element_by_name(\'dummy\').send_keys(\'1\')\n        self.selenium.find_element_by_name(\'inner4stacked_set-0-dummy\').send_keys(\'100\')\n        self.selenium.find_element_by_name(\'inner4stacked_set-1-dummy\').send_keys(\'101\')\n        self.selenium.find_element_by_name(\'inner4stacked_set-2-dummy\').send_keys(\'222\')\n        self.selenium.find_element_by_name(\'inner4stacked_set-3-dummy\').send_keys(\'103\')\n        self.selenium.find_element_by_name(\'inner4stacked_set-4-dummy\').send_keys(\'222\')\n        self.selenium.find_element_by_xpath(\'//input[@value="Save"]\').click()\n        self.wait_page_loaded()\n\n        self.assertEqual(rows_length(), 5, msg="sanity check")\n        errorlist = self.selenium.find_element_by_css_selector(\n            \'%s .dynamic-inner4stacked_set .errorlist li\' % inline_id\n        )\n        self.assertEqual(\'Please correct the duplicate values below.\', errorlist.text)\n        delete_link = self.selenium.find_element_by_css_selector(\'#inner4stacked_set-4 .inline-deletelink\')\n        delete_link.click()\n        self.assertEqual(rows_length(), 4)\n        with self.disable_implicit_wait(), self.assertRaises(NoSuchElementException):\n            self.selenium.find_element_by_css_selector(\'%s .dynamic-inner4stacked_set .errorlist li\' % inline_id)\n\n        self.selenium.find_element_by_xpath(\'//input[@value="Save"]\').click()\n        self.wait_page_loaded()\n\n        # The objects have been created in the database.\n        self.assertEqual(Inner4Stacked.objects.all().count(), 4)\n\n    def test_delete_invalid_tabular_inlines(self):\n        from selenium.common.exceptions import NoSuchElementException\n        self.admin_login(username=\'super\', password=\'secret\')\n        self.selenium.get(self.live_server_url + reverse(\'admin:admin_inlines_holder4_add\'))\n\n        inline_id = \'#inner4tabular_set-group\'\n\n        def rows_length():\n            return len(self.selenium.find_elements_by_css_selector(\'%s .dynamic-inner4tabular_set\' % inline_id))\n        self.assertEqual(rows_length(), 3)\n\n        add_button = self.selenium.find_element_by_link_text(\n            \'Add another Inner4 tabular\')\n        add_button.click()\n        add_button.click()\n        self.assertEqual(len(self.selenium.find_elements_by_css_selector(\'#id_inner4tabular_set-4-dummy\')), 1)\n\n        # Enter some data and click \'Save\'.\n        self.selenium.find_element_by_name(\'dummy\').send_keys(\'1\')\n        self.selenium.find_element_by_name(\'inner4tabular_set-0-dummy\').send_keys(\'100\')\n        self.selenium.find_element_by_name(\'inner4tabular_set-1-dummy\').send_keys(\'101\')\n        self.selenium.find_element_by_name(\'inner4tabular_set-2-dummy\').send_keys(\'222\')\n        self.selenium.find_element_by_name(\'inner4tabular_set-3-dummy\').send_keys(\'103\')\n        self.selenium.find_element_by_name(\'inner4tabular_set-4-dummy\').send_keys(\'222\')\n        self.selenium.find_element_by_xpath(\'//input[@value="Save"]\').click()\n        self.wait_page_loaded()\n\n        self.assertEqual(rows_length(), 5, msg="sanity check")\n\n        # Non-field errorlist is in its own <tr> just before\n        # tr#inner4tabular_set-3:\n        errorlist = self.selenium.find_element_by_css_selector(\n            \'%s #inner4tabular_set-3 + .row-form-errors .errorlist li\' % inline_id\n        )\n        self.assertEqual(\'Please correct the duplicate values below.\', errorlist.text)\n        delete_link = self.selenium.find_element_by_css_selector(\'#inner4tabular_set-4 .inline-deletelink\')\n        delete_link.click()\n        self.assertEqual(rows_length(), 4)\n        with self.disable_implicit_wait(), self.assertRaises(NoSuchElementException):\n            self.selenium.find_element_by_css_selector(\'%s .dynamic-inner4tabular_set .errorlist li\' % inline_id)\n\n        self.selenium.find_element_by_xpath(\'//input[@value="Save"]\').click()\n        self.wait_page_loaded()\n```' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 4849, 'end_index': 5151, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 7144, 'end_index': 7481, 'uri': 'https://www.mail-archive.com/django-updates@googlegroups.com/msg53553.html', 'title': '', 'license_': ''}, {'start_index': 28378, 'end_index': 28653, 'uri': 'https://groups.google.com/d/topic/django-updates/sqLi54GlRtI', 'title': '', 'license_': ''}, {'start_index': 31781, 'end_index': 32112, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 32033, 'end_index': 32273, 'uri': 'https://github.com/carlosejimenez/experiments', 'title': '', 'license_': ''}, {'start_index': 33916, 'end_index': 35365, 'title': 'Your prompt', 'uri': '', 'license_': ''}, {'start_index': 36819, 'end_index': 39134, 'title': 'Your prompt', 'uri': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 21298, 'candidates_token_count': 13899, 'total_token_count': 36246, 'cached_content_token_count': 11445, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21298}], 'cache_tokens_details': [{'modality': 1, 'token_count': 11445}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 13899}], 'thoughts_token_count': 1049}, 'finish_reason': 'STOP', 'avg_logprobs': -0.008619655798781612, 'model_name': 'gemini-2.5-pro'} id='run--7697c9bc-a09d-4955-a938-fecdbfe612c8-0' usage_metadata={'input_tokens': 21298, 'output_tokens': 13899, 'total_tokens': 36246, 'input_token_details': {'cache_read': 11445}, 'output_token_details': {'reasoning': 1049}}
2025-12-23 08:27:09,962 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/admin_inlines/tests.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the file is too large, please at least provide test methods that customize the formset prefix.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
I am looking for examples of tests that use custom formset prefixes within the Django admin, which is directly related to the bug report about special characters in prefixes.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/admin_inlines/tests.py
Line number range: 1 - 500
Content:
1. from django.contrib.admin import ModelAdmin, TabularInline
2. from django.contrib.admin.helpers import InlineAdminForm
3. from django.contrib.admin.tests import AdminSeleniumTestCase
4. from django.contrib.auth.models import Permission, User
5. from django.contrib.contenttypes.models import ContentType
6. from django.test import RequestFactory, TestCase, override_settings
7. from django.urls import reverse
8. 
9. from .admin import InnerInline, site as admin_site
10. from .models import (
11.     Author, BinaryTree, Book, Chapter, Child, ChildModel1, ChildModel2,
12.     Fashionista, FootNote, Holder, Holder2, Holder3, Holder4, Inner, Inner2,
13.     Inner3, Inner4Stacked, Inner4Tabular, Novel, OutfitItem, Parent,
14.     ParentModelWithCustomPk, Person, Poll, Profile, ProfileCollection,
15.     Question, Sighting, SomeChildModel, SomeParentModel, Teacher,
16. )
17. 
18. INLINE_CHANGELINK_HTML = 'class="inlinechangelink">Change</a>'
19. 
20. 
21. class TestDataMixin:
22. 
23.     @classmethod
24.     def setUpTestData(cls):
25.         cls.superuser = User.objects.create_superuser(username='super', email='super@example.com', password='secret')
26. 
27. 
28. @override_settings(ROOT_URLCONF='admin_inlines.urls')
29. class TestInline(TestDataMixin, TestCase):
30.     factory = RequestFactory()
31. 
32.     @classmethod
33.     def setUpTestData(cls):
34.         super().setUpTestData()
35.         cls.holder = Holder.objects.create(dummy=13)
36.         Inner.objects.create(dummy=42, holder=cls.holder)
37. 
38.     def setUp(self):
39.         self.client.force_login(self.superuser)
40. 
41.     def test_can_delete(self):
42.         """
43.         can_delete should be passed to inlineformset factory.
44.         """
45.         response = self.client.get(
46.             reverse('admin:admin_inlines_holder_change', args=(self.holder.id,))
47.         )
48.         inner_formset = response.context['inline_admin_formsets'][0].formset
49.         expected = InnerInline.can_delete
50.         actual = inner_formset.can_delete
51.         self.assertEqual(expected, actual, 'can_delete must be equal')
52. 
53.     def test_readonly_stacked_inline_label(self):
54.         """Bug #13174."""
55.         holder = Holder.objects.create(dummy=42)
56.         Inner.objects.create(holder=holder, dummy=42, readonly='')
57.         response = self.client.get(
58.             reverse('admin:admin_inlines_holder_change', args=(holder.id,))
59.         )
60.         self.assertContains(response, '<label>Inner readonly label:</label>')
61. 
62.     def test_many_to_many_inlines(self):
63.         "Autogenerated many-to-many inlines are displayed correctly (#13407)"
64.         response = self.client.get(reverse('admin:admin_inlines_author_add'))
65.         # The heading for the m2m inline block uses the right text
66.         self.assertContains(response, '<h2>Author-book relationships</h2>')
67.         # The "add another" label is correct
68.         self.assertContains(response, 'Add another Author-book relationship')
69.         # The '+' is dropped from the autogenerated form prefix (Author_books+)
70.         self.assertContains(response, 'id="id_Author_books-TOTAL_FORMS"')
71. 
72.     def test_inline_primary(self):
73.         person = Person.objects.create(firstname='Imelda')
74.         item = OutfitItem.objects.create(name='Shoes')
75.         # Imelda likes shoes, but can't carry her own bags.
76.         data = {
77.             'shoppingweakness_set-TOTAL_FORMS': 1,
78.             'shoppingweakness_set-INITIAL_FORMS': 0,
79.             'shoppingweakness_set-MAX_NUM_FORMS': 0,
80.             '_save': 'Save',
81.             'person': person.id,
82.             'max_weight': 0,
83.             'shoppingweakness_set-0-item': item.id,
84.         }
85.         response = self.client.post(reverse('admin:admin_inlines_fashionista_add'), data)
86.         self.assertEqual(response.status_code, 302)
87.         self.assertEqual(len(Fashionista.objects.filter(person__firstname='Imelda')), 1)
88. 
89.     def test_tabular_inline_column_css_class(self):
90.         """
91.         Field names are included in the context to output a field-specific
92.         CSS class name in the column headers.
93.         """
94.         response = self.client.get(reverse('admin:admin_inlines_poll_add'))
95.         text_field, call_me_field = list(response.context['inline_admin_formset'].fields())
96.         # Editable field.
97.         self.assertEqual(text_field['name'], 'text')
98.         self.assertContains(response, '<th class="column-text required">')
99.         # Read-only field.
100.         self.assertEqual(call_me_field['name'], 'call_me')
101.         self.assertContains(response, '<th class="column-call_me">')
102. 
103.     def test_custom_form_tabular_inline_label(self):
104.         """
105.         A model form with a form field specified (TitleForm.title1) should have
106.         its label rendered in the tabular inline.
107.         """
108.         response = self.client.get(reverse('admin:admin_inlines_titlecollection_add'))
109.         self.assertContains(response, '<th class="column-title1 required">Title1</th>', html=True)
110. 
111.     def test_custom_form_tabular_inline_extra_field_label(self):
112.         response = self.client.get(reverse('admin:admin_inlines_outfititem_add'))
113.         _, extra_field = list(response.context['inline_admin_formset'].fields())
114.         self.assertEqual(extra_field['label'], 'Extra field')
115. 
116.     def test_non_editable_custom_form_tabular_inline_extra_field_label(self):
117.         response = self.client.get(reverse('admin:admin_inlines_chapter_add'))
118.         _, extra_field = list(response.context['inline_admin_formset'].fields())
119.         self.assertEqual(extra_field['label'], 'Extra field')
120. 
121.     def test_custom_form_tabular_inline_overridden_label(self):
122.         """
123.         SomeChildModelForm.__init__() overrides the label of a form field.
124.         That label is displayed in the TabularInline.
125.         """
126.         response = self.client.get(reverse('admin:admin_inlines_someparentmodel_add'))
127.         field = list(response.context['inline_admin_formset'].fields())[0]
128.         self.assertEqual(field['label'], 'new label')
129.         self.assertContains(response, '<th class="column-name required">New label</th>', html=True)
130. 
131.     def test_tabular_non_field_errors(self):
132.         """
133.         non_field_errors are displayed correctly, including the correct value
134.         for colspan.
135.         """
136.         data = {
137.             'title_set-TOTAL_FORMS': 1,
138.             'title_set-INITIAL_FORMS': 0,
139.             'title_set-MAX_NUM_FORMS': 0,
140.             '_save': 'Save',
141.             'title_set-0-title1': 'a title',
142.             'title_set-0-title2': 'a different title',
143.         }
144.         response = self.client.post(reverse('admin:admin_inlines_titlecollection_add'), data)
145.         # Here colspan is "4": two fields (title1 and title2), one hidden field and the delete checkbox.
146.         self.assertContains(
147.             response,
148.             '<tr class="row-form-errors"><td colspan="4"><ul class="errorlist nonfield">'
149.             '<li>The two titles must be the same</li></ul></td></tr>'
150.         )
151. 
152.     def test_no_parent_callable_lookup(self):
153.         """Admin inline `readonly_field` shouldn't invoke parent ModelAdmin callable"""
154.         # Identically named callable isn't present in the parent ModelAdmin,
155.         # rendering of the add view shouldn't explode
156.         response = self.client.get(reverse('admin:admin_inlines_novel_add'))
157.         self.assertEqual(response.status_code, 200)
158.         # View should have the child inlines section
159.         self.assertContains(
160.             response,
161.             '<div class="js-inline-admin-formset inline-group" id="chapter_set-group"'
162.         )
163. 
164.     def test_callable_lookup(self):
165.         """Admin inline should invoke local callable when its name is listed in readonly_fields"""
166.         response = self.client.get(reverse('admin:admin_inlines_poll_add'))
167.         self.assertEqual(response.status_code, 200)
168.         # Add parent object view should have the child inlines section
169.         self.assertContains(
170.             response,
171.             '<div class="js-inline-admin-formset inline-group" id="question_set-group"'
172.         )
173.         # The right callable should be used for the inline readonly_fields
174.         # column cells
175.         self.assertContains(response, '<p>Callable in QuestionInline</p>')
176. 
177.     def test_help_text(self):
178.         """
179.         The inlines' model field help texts are displayed when using both the
180.         stacked and tabular layouts.
181.         """
182.         response = self.client.get(reverse('admin:admin_inlines_holder4_add'))
183.         self.assertContains(response, '<div class="help">Awesome stacked help text is awesome.</div>', 4)
184.         self.assertContains(
185.             response,
186.             '<img src="/static/admin/img/icon-unknown.svg" '
187.             'class="help help-tooltip" width="10" height="10" '
188.             'alt="(Awesome tabular help text is awesome.)" '
189.             'title="Awesome tabular help text is awesome.">',
190.             1
191.         )
192.         # ReadOnly fields
193.         response = self.client.get(reverse('admin:admin_inlines_capofamiglia_add'))
194.         self.assertContains(
195.             response,
196.             '<img src="/static/admin/img/icon-unknown.svg" '
197.             'class="help help-tooltip" width="10" height="10" '
198.             'alt="(Help text for ReadOnlyInline)" '
199.             'title="Help text for ReadOnlyInline">',
200.             1
201.         )
202. 
203.     def test_tabular_model_form_meta_readonly_field(self):
204.         """
205.         Tabular inlines use ModelForm.Meta.help_texts and labels for read-only
206.         fields.
207.         """
208.         response = self.client.get(reverse('admin:admin_inlines_someparentmodel_add'))
209.         self.assertContains(
210.             response,
211.             '<img src="/static/admin/img/icon-unknown.svg" '
212.             'class="help help-tooltip" width="10" height="10" '
213.             'alt="(Help text from ModelForm.Meta)" '
214.             'title="Help text from ModelForm.Meta">'
215.         )
216.         self.assertContains(response, 'Label from ModelForm.Meta')
217. 
218.     def test_inline_hidden_field_no_column(self):
219.         """#18263 -- Make sure hidden fields don't get a column in tabular inlines"""
220.         parent = SomeParentModel.objects.create(name='a')
221.         SomeChildModel.objects.create(name='b', position='0', parent=parent)
222.         SomeChildModel.objects.create(name='c', position='1', parent=parent)
223.         response = self.client.get(reverse('admin:admin_inlines_someparentmodel_change', args=(parent.pk,)))
224.         self.assertNotContains(response, '<td class="field-position">')
225.         self.assertInHTML(
226.             '<input id="id_somechildmodel_set-1-position" '
227.             'name="somechildmodel_set-1-position" type="hidden" value="1">',
228.             response.rendered_content,
229.         )
230. 
231.     def test_non_related_name_inline(self):
232.         """
233.         Multiple inlines with related_name='+' have correct form prefixes.
234.         """
235.         response = self.client.get(reverse('admin:admin_inlines_capofamiglia_add'))
236.         self.assertContains(response, '<input type="hidden" name="-1-0-id" id="id_-1-0-id">', html=True)
237.         self.assertContains(
238.             response,
239.             '<input type="hidden" name="-1-0-capo_famiglia" id="id_-1-0-capo_famiglia">',
240.             html=True
241.         )
242.         self.assertContains(
243.             response,
244.             '<input id="id_-1-0-name" type="text" class="vTextField" name="-1-0-name" maxlength="100">',
245.             html=True
246.         )
247.         self.assertContains(response, '<input type="hidden" name="-2-0-id" id="id_-2-0-id">', html=True)
248.         self.assertContains(
249.             response,
250.             '<input type="hidden" name="-2-0-capo_famiglia" id="id_-2-0-capo_famiglia">',
251.             html=True
252.         )
253.         self.assertContains(
254.             response,
255.             '<input id="id_-2-0-name" type="text" class="vTextField" name="-2-0-name" maxlength="100">',
256.             html=True
257.         )
258. 
259.     @override_settings(USE_L10N=True, USE_THOUSAND_SEPARATOR=True)
260.     def test_localize_pk_shortcut(self):
261.         """
262.         The "View on Site" link is correct for locales that use thousand
263.         separators.
264.         """
265.         holder = Holder.objects.create(pk=123456789, dummy=42)
266.         inner = Inner.objects.create(pk=987654321, holder=holder, dummy=42, readonly='')
267.         response = self.client.get(reverse('admin:admin_inlines_holder_change', args=(holder.id,)))
268.         inner_shortcut = 'r/%s/%s/' % (ContentType.objects.get_for_model(inner).pk, inner.pk)
269.         self.assertContains(response, inner_shortcut)
270. 
271.     def test_custom_pk_shortcut(self):
272.         """
273.         The "View on Site" link is correct for models with a custom primary key
274.         field.
275.         """
276.         parent = ParentModelWithCustomPk.objects.create(my_own_pk="foo", name="Foo")
277.         child1 = ChildModel1.objects.create(my_own_pk="bar", name="Bar", parent=parent)
278.         child2 = ChildModel2.objects.create(my_own_pk="baz", name="Baz", parent=parent)
279.         response = self.client.get(reverse('admin:admin_inlines_parentmodelwithcustompk_change', args=('foo',)))
280.         child1_shortcut = 'r/%s/%s/' % (ContentType.objects.get_for_model(child1).pk, child1.pk)
281.         child2_shortcut = 'r/%s/%s/' % (ContentType.objects.get_for_model(child2).pk, child2.pk)
282.         self.assertContains(response, child1_shortcut)
283.         self.assertContains(response, child2_shortcut)
284. 
285.     def test_create_inlines_on_inherited_model(self):
286.         """
287.         An object can be created with inlines when it inherits another class.
288.         """
289.         data = {
290.             'name': 'Martian',
291.             'sighting_set-TOTAL_FORMS': 1,
292.             'sighting_set-INITIAL_FORMS': 0,
293.             'sighting_set-MAX_NUM_FORMS': 0,
294.             'sighting_set-0-place': 'Zone 51',
295.             '_save': 'Save',
296.         }
297.         response = self.client.post(reverse('admin:admin_inlines_extraterrestrial_add'), data)
298.         self.assertEqual(response.status_code, 302)
299.         self.assertEqual(Sighting.objects.filter(et__name='Martian').count(), 1)
300. 
301.     def test_custom_get_extra_form(self):
302.         bt_head = BinaryTree.objects.create(name="Tree Head")
303.         BinaryTree.objects.create(name="First Child", parent=bt_head)
304.         # The maximum number of forms should respect 'get_max_num' on the
305.         # ModelAdmin
306.         max_forms_input = (
307.             '<input id="id_binarytree_set-MAX_NUM_FORMS" '
308.             'name="binarytree_set-MAX_NUM_FORMS" type="hidden" value="%d">'
309.         )
310.         # The total number of forms will remain the same in either case
311.         total_forms_hidden = (
312.             '<input id="id_binarytree_set-TOTAL_FORMS" '
313.             'name="binarytree_set-TOTAL_FORMS" type="hidden" value="2">'
314.         )
315.         response = self.client.get(reverse('admin:admin_inlines_binarytree_add'))
316.         self.assertInHTML(max_forms_input % 3, response.rendered_content)
317.         self.assertInHTML(total_forms_hidden, response.rendered_content)
318. 
319.         response = self.client.get(reverse('admin:admin_inlines_binarytree_change', args=(bt_head.id,)))
320.         self.assertInHTML(max_forms_input % 2, response.rendered_content)
321.         self.assertInHTML(total_forms_hidden, response.rendered_content)
322. 
323.     def test_min_num(self):
324.         """
325.         min_num and extra determine number of forms.
326.         """
327.         class MinNumInline(TabularInline):
328.             model = BinaryTree
329.             min_num = 2
330.             extra = 3
331. 
332.         modeladmin = ModelAdmin(BinaryTree, admin_site)
333.         modeladmin.inlines = [MinNumInline]
334.         min_forms = (
335.             '<input id="id_binarytree_set-MIN_NUM_FORMS" '
336.             'name="binarytree_set-MIN_NUM_FORMS" type="hidden" value="2">'
337.         )
338.         total_forms = (
339.             '<input id="id_binarytree_set-TOTAL_FORMS" '
340.             'name="binarytree_set-TOTAL_FORMS" type="hidden" value="5">'
341.         )
342.         request = self.factory.get(reverse('admin:admin_inlines_binarytree_add'))
343.         request.user = User(username='super', is_superuser=True)
344.         response = modeladmin.changeform_view(request)
345.         self.assertInHTML(min_forms, response.rendered_content)
346.         self.assertInHTML(total_forms, response.rendered_content)
347. 
348.     def test_custom_min_num(self):
349.         bt_head = BinaryTree.objects.create(name="Tree Head")
350.         BinaryTree.objects.create(name="First Child", parent=bt_head)
351. 
352.         class MinNumInline(TabularInline):
353.             model = BinaryTree
354.             extra = 3
355. 
356.             def get_min_num(self, request, obj=None, **kwargs):
357.                 if obj:
358.                     return 5
359.                 return 2
360. 
361.         modeladmin = ModelAdmin(BinaryTree, admin_site)
362.         modeladmin.inlines = [MinNumInline]
363.         min_forms = (
364.             '<input id="id_binarytree_set-MIN_NUM_FORMS" '
365.             'name="binarytree_set-MIN_NUM_FORMS" type="hidden" value="%d">'
366.         )
367.         total_forms = (
368.             '<input id="id_binarytree_set-TOTAL_FORMS" '
369.             'name="binarytree_set-TOTAL_FORMS" type="hidden" value="%d">'
370.         )
371.         request = self.factory.get(reverse('admin:admin_inlines_binarytree_add'))
372.         request.user = User(username='super', is_superuser=True)
373.         response = modeladmin.changeform_view(request)
374.         self.assertInHTML(min_forms % 2, response.rendered_content)
375.         self.assertInHTML(total_forms % 5, response.rendered_content)
376. 
377.         request = self.factory.get(reverse('admin:admin_inlines_binarytree_change', args=(bt_head.id,)))
378.         request.user = User(username='super', is_superuser=True)
379.         response = modeladmin.changeform_view(request, object_id=str(bt_head.id))
380.         self.assertInHTML(min_forms % 5, response.rendered_content)
381.         self.assertInHTML(total_forms % 8, response.rendered_content)
382. 
383.     def test_inline_nonauto_noneditable_pk(self):
384.         response = self.client.get(reverse('admin:admin_inlines_author_add'))
385.         self.assertContains(
386.             response,
387.             '<input id="id_nonautopkbook_set-0-rand_pk" '
388.             'name="nonautopkbook_set-0-rand_pk" type="hidden">',
389.             html=True
390.         )
391.         self.assertContains(
392.             response,
393.             '<input id="id_nonautopkbook_set-2-0-rand_pk" '
394.             'name="nonautopkbook_set-2-0-rand_pk" type="hidden">',
395.             html=True
396.         )
397. 
398.     def test_inline_nonauto_noneditable_inherited_pk(self):
399.         response = self.client.get(reverse('admin:admin_inlines_author_add'))
400.         self.assertContains(
401.             response,
402.             '<input id="id_nonautopkbookchild_set-0-nonautopkbook_ptr" '
403.             'name="nonautopkbookchild_set-0-nonautopkbook_ptr" type="hidden">',
404.             html=True
405.         )
406.         self.assertContains(
407.             response,
408.             '<input id="id_nonautopkbookchild_set-2-nonautopkbook_ptr" '
409.             'name="nonautopkbookchild_set-2-nonautopkbook_ptr" type="hidden">',
410.             html=True
411.         )
412. 
413.     def test_inline_editable_pk(self):
414.         response = self.client.get(reverse('admin:admin_inlines_author_add'))
415.         self.assertContains(
416.             response,
417.             '<input class="vIntegerField" id="id_editablepkbook_set-0-manual_pk" '
418.             'name="editablepkbook_set-0-manual_pk" type="number">',
419.             html=True, count=1
420.         )
421.         self.assertContains(
422.             response,
423.             '<input class="vIntegerField" id="id_editablepkbook_set-2-0-manual_pk" '
424.             'name="editablepkbook_set-2-0-manual_pk" type="number">',
425.             html=True, count=1
426.         )
427. 
428.     def test_stacked_inline_edit_form_contains_has_original_class(self):
429.         holder = Holder.objects.create(dummy=1)
430.         holder.inner_set.create(dummy=1)
431.         response = self.client.get(reverse('admin:admin_inlines_holder_change', args=(holder.pk,)))
432.         self.assertContains(
433.             response,
434.             '<div class="inline-related has_original" id="inner_set-0">',
435.             count=1
436.         )
437.         self.assertContains(
438.             response,
439.             '<div class="inline-related" id="inner_set-1">',
440.             count=1
441.         )
442. 
443.     def test_inlines_show_change_link_registered(self):
444.         "Inlines `show_change_link` for registered models when enabled."
445.         holder = Holder4.objects.create(dummy=1)
446.         item1 = Inner4Stacked.objects.create(dummy=1, holder=holder)
447.         item2 = Inner4Tabular.objects.create(dummy=1, holder=holder)
448.         items = (
449.             ('inner4stacked', item1.pk),
450.             ('inner4tabular', item2.pk),
451.         )
452.         response = self.client.get(reverse('admin:admin_inlines_holder4_change', args=(holder.pk,)))
453.         self.assertTrue(response.context['inline_admin_formset'].opts.has_registered_model)
454.         for model, pk in items:
455.             url = reverse('admin:admin_inlines_%s_change' % model, args=(pk,))
456.             self.assertContains(response, '<a href="%s" %s' % (url, INLINE_CHANGELINK_HTML))
457. 
458.     def test_inlines_show_change_link_unregistered(self):
459.         "Inlines `show_change_link` disabled for unregistered models."
460.         parent = ParentModelWithCustomPk.objects.create(my_own_pk="foo", name="Foo")
461.         ChildModel1.objects.create(my_own_pk="bar", name="Bar", parent=parent)
462.         ChildModel2.objects.create(my_own_pk="baz", name="Baz", parent=parent)
463.         response = self.client.get(reverse('admin:admin_inlines_parentmodelwithcustompk_change', args=('foo',)))
464.         self.assertFalse(response.context['inline_admin_formset'].opts.has_registered_model)
465.         self.assertNotContains(response, INLINE_CHANGELINK_HTML)
466. 
467.     def test_tabular_inline_show_change_link_false_registered(self):
468.         "Inlines `show_change_link` disabled by default."
469.         poll = Poll.objects.create(name="New poll")
470.         Question.objects.create(poll=poll)
471.         response = self.client.get(reverse('admin:admin_inlines_poll_change', args=(poll.pk,)))
472.         self.assertTrue(response.context['inline_admin_formset'].opts.has_registered_model)
473.         self.assertNotContains(response, INLINE_CHANGELINK_HTML)
474. 
475.     def test_noneditable_inline_has_field_inputs(self):
476.         """Inlines without change permission shows field inputs on add form."""
477.         response = self.client.get(reverse('admin:admin_inlines_novelreadonlychapter_add'))
478.         self.assertContains(
479.             response,
480.             '<input type="text" name="chapter_set-0-name" '
481.             'class="vTextField" maxlength="40" id="id_chapter_set-0-name">',
482.             html=True
483.         )
484. 
485. 
486. @override_settings(ROOT_URLCONF='admin_inlines.urls')
487. class TestInlineMedia(TestDataMixin, TestCase):
488. 
489.     def setUp(self):
490.         self.client.force_login(self.superuser)
491. 
492.     def test_inline_media_only_base(self):
493.         holder = Holder(dummy=13)
494.         holder.save()
495.         Inner(dummy=42, holder=holder).save()
496.         change_url = reverse('admin:admin_inlines_holder_change', args=(holder.id,))
497.         response = self.client.get(change_url)
498.         self.assertContains(response, 'my_awesome_admin_scripts.js')
499. 
500.     def test_inline_media_only_inline(self):


File: tests/admin_inlines/tests.py
Line number range: 501 - 1000
Content:
501.         holder = Holder3(dummy=13)
502.         holder.save()
503.         Inner3(dummy=42, holder=holder).save()
504.         change_url = reverse('admin:admin_inlines_holder3_change', args=(holder.id,))
505.         response = self.client.get(change_url)
506.         self.assertEqual(
507.             response.context['inline_admin_formsets'][0].media._js,
508.             [
509.                 'admin/js/vendor/jquery/jquery.min.js',
510.                 'my_awesome_inline_scripts.js',
511.                 'custom_number.js',
512.                 'admin/js/jquery.init.js',
513.                 'admin/js/inlines.min.js',
514.             ]
515.         )
516.         self.assertContains(response, 'my_awesome_inline_scripts.js')
517. 
518.     def test_all_inline_media(self):
519.         holder = Holder2(dummy=13)
520.         holder.save()
521.         Inner2(dummy=42, holder=holder).save()
522.         change_url = reverse('admin:admin_inlines_holder2_change', args=(holder.id,))
523.         response = self.client.get(change_url)
524.         self.assertContains(response, 'my_awesome_admin_scripts.js')
525.         self.assertContains(response, 'my_awesome_inline_scripts.js')
526. 
527. 
528. @override_settings(ROOT_URLCONF='admin_inlines.urls')
529. class TestInlineAdminForm(TestCase):
530. 
531.     def test_immutable_content_type(self):
532.         """Regression for #9362
533.         The problem depends only on InlineAdminForm and its "original"
534.         argument, so we can safely set the other arguments to None/{}. We just
535.         need to check that the content_type argument of Child isn't altered by
536.         the internals of the inline form."""
537. 
538.         sally = Teacher.objects.create(name='Sally')
539.         john = Parent.objects.create(name='John')
540.         joe = Child.objects.create(name='Joe', teacher=sally, parent=john)
541. 
542.         iaf = InlineAdminForm(None, None, {}, {}, joe)
543.         parent_ct = ContentType.objects.get_for_model(Parent)
544.         self.assertEqual(iaf.original.content_type, parent_ct)
545. 
546. 
547. @override_settings(ROOT_URLCONF='admin_inlines.urls')
548. class TestInlineProtectedOnDelete(TestDataMixin, TestCase):
549. 
550.     def setUp(self):
551.         self.client.force_login(self.superuser)
552. 
553.     def test_deleting_inline_with_protected_delete_does_not_validate(self):
554.         lotr = Novel.objects.create(name='Lord of the rings')
555.         chapter = Chapter.objects.create(novel=lotr, name='Many Meetings')
556.         foot_note = FootNote.objects.create(chapter=chapter, note='yadda yadda')
557. 
558.         change_url = reverse('admin:admin_inlines_novel_change', args=(lotr.id,))
559.         response = self.client.get(change_url)
560.         data = {
561.             'name': lotr.name,
562.             'chapter_set-TOTAL_FORMS': 1,
563.             'chapter_set-INITIAL_FORMS': 1,
564.             'chapter_set-MAX_NUM_FORMS': 1000,
565.             '_save': 'Save',
566.             'chapter_set-0-id': chapter.id,
567.             'chapter_set-0-name': chapter.name,
568.             'chapter_set-0-novel': lotr.id,
569.             'chapter_set-0-DELETE': 'on'
570.         }
571.         response = self.client.post(change_url, data)
572.         self.assertContains(response, "Deleting chapter %s would require deleting "
573.                             "the following protected related objects: foot note %s"
574.                             % (chapter, foot_note))
575. 
576. 
577. @override_settings(ROOT_URLCONF='admin_inlines.urls')
578. class TestInlinePermissions(TestCase):
579.     """
580.     Make sure the admin respects permissions for objects that are edited
581.     inline. Refs #8060.
582.     """
583. 
584.     @classmethod
585.     def setUpTestData(cls):
586.         cls.user = User(username='admin', is_staff=True, is_active=True)
587.         cls.user.set_password('secret')
588.         cls.user.save()
589. 
590.         cls.author_ct = ContentType.objects.get_for_model(Author)
591.         cls.holder_ct = ContentType.objects.get_for_model(Holder2)
592.         cls.book_ct = ContentType.objects.get_for_model(Book)
593.         cls.inner_ct = ContentType.objects.get_for_model(Inner2)
594. 
595.         # User always has permissions to add and change Authors, and Holders,
596.         # the main (parent) models of the inlines. Permissions on the inlines
597.         # vary per test.
598.         permission = Permission.objects.get(codename='add_author', content_type=cls.author_ct)
599.         cls.user.user_permissions.add(permission)
600.         permission = Permission.objects.get(codename='change_author', content_type=cls.author_ct)
601.         cls.user.user_permissions.add(permission)
602.         permission = Permission.objects.get(codename='add_holder2', content_type=cls.holder_ct)
603.         cls.user.user_permissions.add(permission)
604.         permission = Permission.objects.get(codename='change_holder2', content_type=cls.holder_ct)
605.         cls.user.user_permissions.add(permission)
606. 
607.         author = Author.objects.create(pk=1, name='The Author')
608.         cls.book = author.books.create(name='The inline Book')
609.         cls.author_change_url = reverse('admin:admin_inlines_author_change', args=(author.id,))
610.         # Get the ID of the automatically created intermediate model for the Author-Book m2m
611.         author_book_auto_m2m_intermediate = Author.books.through.objects.get(author=author, book=cls.book)
612.         cls.author_book_auto_m2m_intermediate_id = author_book_auto_m2m_intermediate.pk
613. 
614.         cls.holder = Holder2.objects.create(dummy=13)
615.         cls.inner2 = Inner2.objects.create(dummy=42, holder=cls.holder)
616. 
617.     def setUp(self):
618.         self.holder_change_url = reverse('admin:admin_inlines_holder2_change', args=(self.holder.id,))
619.         self.client.force_login(self.user)
620. 
621.     def test_inline_add_m2m_noperm(self):
622.         response = self.client.get(reverse('admin:admin_inlines_author_add'))
623.         # No change permission on books, so no inline
624.         self.assertNotContains(response, '<h2>Author-book relationships</h2>')
625.         self.assertNotContains(response, 'Add another Author-Book Relationship')
626.         self.assertNotContains(response, 'id="id_Author_books-TOTAL_FORMS"')
627. 
628.     def test_inline_add_fk_noperm(self):
629.         response = self.client.get(reverse('admin:admin_inlines_holder2_add'))
630.         # No permissions on Inner2s, so no inline
631.         self.assertNotContains(response, '<h2>Inner2s</h2>')
632.         self.assertNotContains(response, 'Add another Inner2')
633.         self.assertNotContains(response, 'id="id_inner2_set-TOTAL_FORMS"')
634. 
635.     def test_inline_change_m2m_noperm(self):
636.         response = self.client.get(self.author_change_url)
637.         # No change permission on books, so no inline
638.         self.assertNotContains(response, '<h2>Author-book relationships</h2>')
639.         self.assertNotContains(response, 'Add another Author-Book Relationship')
640.         self.assertNotContains(response, 'id="id_Author_books-TOTAL_FORMS"')
641. 
642.     def test_inline_change_fk_noperm(self):
643.         response = self.client.get(self.holder_change_url)
644.         # No permissions on Inner2s, so no inline
645.         self.assertNotContains(response, '<h2>Inner2s</h2>')
646.         self.assertNotContains(response, 'Add another Inner2')
647.         self.assertNotContains(response, 'id="id_inner2_set-TOTAL_FORMS"')
648. 
649.     def test_inline_add_m2m_view_only_perm(self):
650.         permission = Permission.objects.get(codename='view_book', content_type=self.book_ct)
651.         self.user.user_permissions.add(permission)
652.         response = self.client.get(reverse('admin:admin_inlines_author_add'))
653.         # View-only inlines. (It could be nicer to hide the empty, non-editable
654.         # inlines on the add page.)
655.         self.assertIs(response.context['inline_admin_formset'].has_view_permission, True)
656.         self.assertIs(response.context['inline_admin_formset'].has_add_permission, False)
657.         self.assertIs(response.context['inline_admin_formset'].has_change_permission, False)
658.         self.assertIs(response.context['inline_admin_formset'].has_delete_permission, False)
659.         self.assertContains(response, '<h2>Author-book relationships</h2>')
660.         self.assertContains(
661.             response,
662.             '<input type="hidden" name="Author_books-TOTAL_FORMS" value="0" '
663.             'id="id_Author_books-TOTAL_FORMS">',
664.             html=True,
665.         )
666.         self.assertNotContains(response, 'Add another Author-Book Relationship')
667. 
668.     def test_inline_add_m2m_add_perm(self):
669.         permission = Permission.objects.get(codename='add_book', content_type=self.book_ct)
670.         self.user.user_permissions.add(permission)
671.         response = self.client.get(reverse('admin:admin_inlines_author_add'))
672.         # No change permission on Books, so no inline
673.         self.assertNotContains(response, '<h2>Author-book relationships</h2>')
674.         self.assertNotContains(response, 'Add another Author-Book Relationship')
675.         self.assertNotContains(response, 'id="id_Author_books-TOTAL_FORMS"')
676. 
677.     def test_inline_add_fk_add_perm(self):
678.         permission = Permission.objects.get(codename='add_inner2', content_type=self.inner_ct)
679.         self.user.user_permissions.add(permission)
680.         response = self.client.get(reverse('admin:admin_inlines_holder2_add'))
681.         # Add permission on inner2s, so we get the inline
682.         self.assertContains(response, '<h2>Inner2s</h2>')
683.         self.assertContains(response, 'Add another Inner2')
684.         self.assertContains(response, '<input type="hidden" id="id_inner2_set-TOTAL_FORMS" '
685.                             'value="3" name="inner2_set-TOTAL_FORMS">', html=True)
686. 
687.     def test_inline_change_m2m_add_perm(self):
688.         permission = Permission.objects.get(codename='add_book', content_type=self.book_ct)
689.         self.user.user_permissions.add(permission)
690.         response = self.client.get(self.author_change_url)
691.         # No change permission on books, so no inline
692.         self.assertNotContains(response, '<h2>Author-book relationships</h2>')
693.         self.assertNotContains(response, 'Add another Author-Book Relationship')
694.         self.assertNotContains(response, 'id="id_Author_books-TOTAL_FORMS"')
695.         self.assertNotContains(response, 'id="id_Author_books-0-DELETE"')
696. 
697.     def test_inline_change_m2m_view_only_perm(self):
698.         permission = Permission.objects.get(codename='view_book', content_type=self.book_ct)
699.         self.user.user_permissions.add(permission)
700.         response = self.client.get(self.author_change_url)
701.         # View-only inlines.
702.         self.assertIs(response.context['inline_admin_formset'].has_view_permission, True)
703.         self.assertIs(response.context['inline_admin_formset'].has_add_permission, False)
704.         self.assertIs(response.context['inline_admin_formset'].has_change_permission, False)
705.         self.assertIs(response.context['inline_admin_formset'].has_delete_permission, False)
706.         self.assertContains(response, '<h2>Author-book relationships</h2>')
707.         self.assertContains(
708.             response,
709.             '<input type="hidden" name="Author_books-TOTAL_FORMS" value="1" '
710.             'id="id_Author_books-TOTAL_FORMS">',
711.             html=True,
712.         )
713.         # The field in the inline is read-only.
714.         self.assertContains(response, '<p>%s</p>' % self.book)
715.         self.assertNotContains(
716.             response,
717.             '<input type="checkbox" name="Author_books-0-DELETE" id="id_Author_books-0-DELETE">',
718.             html=True,
719.         )
720. 
721.     def test_inline_change_m2m_change_perm(self):
722.         permission = Permission.objects.get(codename='change_book', content_type=self.book_ct)
723.         self.user.user_permissions.add(permission)
724.         response = self.client.get(self.author_change_url)
725.         # We have change perm on books, so we can add/change/delete inlines
726.         self.assertIs(response.context['inline_admin_formset'].has_view_permission, True)
727.         self.assertIs(response.context['inline_admin_formset'].has_add_permission, True)
728.         self.assertIs(response.context['inline_admin_formset'].has_change_permission, True)
729.         self.assertIs(response.context['inline_admin_formset'].has_delete_permission, True)
730.         self.assertContains(response, '<h2>Author-book relationships</h2>')
731.         self.assertContains(response, 'Add another Author-book relationship')
732.         self.assertContains(response, '<input type="hidden" id="id_Author_books-TOTAL_FORMS" '
733.                             'value="4" name="Author_books-TOTAL_FORMS">', html=True)
734.         self.assertContains(
735.             response,
736.             '<input type="hidden" id="id_Author_books-0-id" value="%i" '
737.             'name="Author_books-0-id">' % self.author_book_auto_m2m_intermediate_id,
738.             html=True
739.         )
740.         self.assertContains(response, 'id="id_Author_books-0-DELETE"')
741. 
742.     def test_inline_change_fk_add_perm(self):
743.         permission = Permission.objects.get(codename='add_inner2', content_type=self.inner_ct)
744.         self.user.user_permissions.add(permission)
745.         response = self.client.get(self.holder_change_url)
746.         # Add permission on inner2s, so we can add but not modify existing
747.         self.assertContains(response, '<h2>Inner2s</h2>')
748.         self.assertContains(response, 'Add another Inner2')
749.         # 3 extra forms only, not the existing instance form
750.         self.assertContains(
751.             response,
752.             '<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="3" '
753.             'name="inner2_set-TOTAL_FORMS">',
754.             html=True
755.         )
756.         self.assertNotContains(
757.             response,
758.             '<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">' % self.inner2.id,
759.             html=True
760.         )
761. 
762.     def test_inline_change_fk_change_perm(self):
763.         permission = Permission.objects.get(codename='change_inner2', content_type=self.inner_ct)
764.         self.user.user_permissions.add(permission)
765.         response = self.client.get(self.holder_change_url)
766.         # Change permission on inner2s, so we can change existing but not add new
767.         self.assertContains(response, '<h2>Inner2s</h2>', count=2)
768.         # Just the one form for existing instances
769.         self.assertContains(
770.             response, '<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="1" name="inner2_set-TOTAL_FORMS">',
771.             html=True
772.         )
773.         self.assertContains(
774.             response,
775.             '<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">' % self.inner2.id,
776.             html=True
777.         )
778.         # max-num 0 means we can't add new ones
779.         self.assertContains(
780.             response,
781.             '<input type="hidden" id="id_inner2_set-MAX_NUM_FORMS" value="0" name="inner2_set-MAX_NUM_FORMS">',
782.             html=True
783.         )
784.         # TabularInline
785.         self.assertContains(response, '<th class="column-dummy required">Dummy</th>', html=True)
786.         self.assertContains(
787.             response,
788.             '<input type="number" name="inner2_set-2-0-dummy" value="%s" '
789.             'class="vIntegerField" id="id_inner2_set-2-0-dummy">' % self.inner2.dummy,
790.             html=True,
791.         )
792. 
793.     def test_inline_change_fk_add_change_perm(self):
794.         permission = Permission.objects.get(codename='add_inner2', content_type=self.inner_ct)
795.         self.user.user_permissions.add(permission)
796.         permission = Permission.objects.get(codename='change_inner2', content_type=self.inner_ct)
797.         self.user.user_permissions.add(permission)
798.         response = self.client.get(self.holder_change_url)
799.         # Add/change perm, so we can add new and change existing
800.         self.assertContains(response, '<h2>Inner2s</h2>')
801.         # One form for existing instance and three extra for new
802.         self.assertContains(
803.             response, '<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="4" name="inner2_set-TOTAL_FORMS">',
804.             html=True
805.         )
806.         self.assertContains(
807.             response,
808.             '<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">' % self.inner2.id,
809.             html=True
810.         )
811. 
812.     def test_inline_change_fk_change_del_perm(self):
813.         permission = Permission.objects.get(codename='change_inner2', content_type=self.inner_ct)
814.         self.user.user_permissions.add(permission)
815.         permission = Permission.objects.get(codename='delete_inner2', content_type=self.inner_ct)
816.         self.user.user_permissions.add(permission)
817.         response = self.client.get(self.holder_change_url)
818.         # Change/delete perm on inner2s, so we can change/delete existing
819.         self.assertContains(response, '<h2>Inner2s</h2>')
820.         # One form for existing instance only, no new
821.         self.assertContains(
822.             response,
823.             '<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="1" name="inner2_set-TOTAL_FORMS">',
824.             html=True
825.         )
826.         self.assertContains(
827.             response,
828.             '<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">' % self.inner2.id,
829.             html=True
830.         )
831.         self.assertContains(response, 'id="id_inner2_set-0-DELETE"')
832. 
833.     def test_inline_change_fk_all_perms(self):
834.         permission = Permission.objects.get(codename='add_inner2', content_type=self.inner_ct)
835.         self.user.user_permissions.add(permission)
836.         permission = Permission.objects.get(codename='change_inner2', content_type=self.inner_ct)
837.         self.user.user_permissions.add(permission)
838.         permission = Permission.objects.get(codename='delete_inner2', content_type=self.inner_ct)
839.         self.user.user_permissions.add(permission)
840.         response = self.client.get(self.holder_change_url)
841.         # All perms on inner2s, so we can add/change/delete
842.         self.assertContains(response, '<h2>Inner2s</h2>', count=2)
843.         # One form for existing instance only, three for new
844.         self.assertContains(
845.             response,
846.             '<input type="hidden" id="id_inner2_set-TOTAL_FORMS" value="4" name="inner2_set-TOTAL_FORMS">',
847.             html=True
848.         )
849.         self.assertContains(
850.             response,
851.             '<input type="hidden" id="id_inner2_set-0-id" value="%i" name="inner2_set-0-id">' % self.inner2.id,
852.             html=True
853.         )
854.         self.assertContains(response, 'id="id_inner2_set-0-DELETE"')
855.         # TabularInline
856.         self.assertContains(response, '<th class="column-dummy required">Dummy</th>', html=True)
857.         self.assertContains(
858.             response,
859.             '<input type="number" name="inner2_set-2-0-dummy" value="%s" '
860.             'class="vIntegerField" id="id_inner2_set-2-0-dummy">' % self.inner2.dummy,
861.             html=True,
862.         )
863. 
864. 
865. @override_settings(ROOT_URLCONF='admin_inlines.urls')
866. class SeleniumTests(AdminSeleniumTestCase):
867. 
868.     available_apps = ['admin_inlines'] + AdminSeleniumTestCase.available_apps
869. 
870.     def setUp(self):
871.         User.objects.create_superuser(username='super', password='secret', email='super@example.com')
872. 
873.     def test_add_stackeds(self):
874.         """
875.         The "Add another XXX" link correctly adds items to the stacked formset.
876.         """
877.         self.admin_login(username='super', password='secret')
878.         self.selenium.get(self.live_server_url + reverse('admin:admin_inlines_holder4_add'))
879. 
880.         inline_id = '#inner4stacked_set-group'
881. 
882.         def rows_length():
883.             return len(self.selenium.find_elements_by_css_selector('%s .dynamic-inner4stacked_set' % inline_id))
884.         self.assertEqual(rows_length(), 3)
885. 
886.         add_button = self.selenium.find_element_by_link_text(
887.             'Add another Inner4 stacked')
888.         add_button.click()
889. 
890.         self.assertEqual(rows_length(), 4)
891. 
892.     def test_delete_stackeds(self):
893.         self.admin_login(username='super', password='secret')
894.         self.selenium.get(self.live_server_url + reverse('admin:admin_inlines_holder4_add'))
895. 
896.         inline_id = '#inner4stacked_set-group'
897. 
898.         def rows_length():
899.             return len(self.selenium.find_elements_by_css_selector('%s .dynamic-inner4stacked_set' % inline_id))
900.         self.assertEqual(rows_length(), 3)
901. 
902.         add_button = self.selenium.find_element_by_link_text(
903.             'Add another Inner4 stacked')
904.         add_button.click()
905.         add_button.click()
906. 
907.         self.assertEqual(rows_length(), 5, msg="sanity check")
908.         for delete_link in self.selenium.find_elements_by_css_selector('%s .inline-deletelink' % inline_id):
909.             delete_link.click()
910.         with self.disable_implicit_wait():
911.             self.assertEqual(rows_length(), 0)
912. 
913.     def test_delete_invalid_stacked_inlines(self):
914.         from selenium.common.exceptions import NoSuchElementException
915.         self.admin_login(username='super', password='secret')
916.         self.selenium.get(self.live_server_url + reverse('admin:admin_inlines_holder4_add'))
917. 
918.         inline_id = '#inner4stacked_set-group'
919. 
920.         def rows_length():
921.             return len(self.selenium.find_elements_by_css_selector('%s .dynamic-inner4stacked_set' % inline_id))
922.         self.assertEqual(rows_length(), 3)
923. 
924.         add_button = self.selenium.find_element_by_link_text(
925.             'Add another Inner4 stacked')
926.         add_button.click()
927.         add_button.click()
928.         self.assertEqual(len(self.selenium.find_elements_by_css_selector('#id_inner4stacked_set-4-dummy')), 1)
929. 
930.         # Enter some data and click 'Save'.
931.         self.selenium.find_element_by_name('dummy').send_keys('1')
932.         self.selenium.find_element_by_name('inner4stacked_set-0-dummy').send_keys('100')
933.         self.selenium.find_element_by_name('inner4stacked_set-1-dummy').send_keys('101')
934.         self.selenium.find_element_by_name('inner4stacked_set-2-dummy').send_keys('222')
935.         self.selenium.find_element_by_name('inner4stacked_set-3-dummy').send_keys('103')
936.         self.selenium.find_element_by_name('inner4stacked_set-4-dummy').send_keys('222')
937.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
938.         self.wait_page_loaded()
939. 
940.         self.assertEqual(rows_length(), 5, msg="sanity check")
941.         errorlist = self.selenium.find_element_by_css_selector(
942.             '%s .dynamic-inner4stacked_set .errorlist li' % inline_id
943.         )
944.         self.assertEqual('Please correct the duplicate values below.', errorlist.text)
945.         delete_link = self.selenium.find_element_by_css_selector('#inner4stacked_set-4 .inline-deletelink')
946.         delete_link.click()
947.         self.assertEqual(rows_length(), 4)
948.         with self.disable_implicit_wait(), self.assertRaises(NoSuchElementException):
949.             self.selenium.find_element_by_css_selector('%s .dynamic-inner4stacked_set .errorlist li' % inline_id)
950. 
951.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
952.         self.wait_page_loaded()
953. 
954.         # The objects have been created in the database.
955.         self.assertEqual(Inner4Stacked.objects.all().count(), 4)
956. 
957.     def test_delete_invalid_tabular_inlines(self):
958.         from selenium.common.exceptions import NoSuchElementException
959.         self.admin_login(username='super', password='secret')
960.         self.selenium.get(self.live_server_url + reverse('admin:admin_inlines_holder4_add'))
961. 
962.         inline_id = '#inner4tabular_set-group'
963. 
964.         def rows_length():
965.             return len(self.selenium.find_elements_by_css_selector('%s .dynamic-inner4tabular_set' % inline_id))
966.         self.assertEqual(rows_length(), 3)
967. 
968.         add_button = self.selenium.find_element_by_link_text(
969.             'Add another Inner4 tabular')
970.         add_button.click()
971.         add_button.click()
972.         self.assertEqual(len(self.selenium.find_elements_by_css_selector('#id_inner4tabular_set-4-dummy')), 1)
973. 
974.         # Enter some data and click 'Save'.
975.         self.selenium.find_element_by_name('dummy').send_keys('1')
976.         self.selenium.find_element_by_name('inner4tabular_set-0-dummy').send_keys('100')
977.         self.selenium.find_element_by_name('inner4tabular_set-1-dummy').send_keys('101')
978.         self.selenium.find_element_by_name('inner4tabular_set-2-dummy').send_keys('222')
979.         self.selenium.find_element_by_name('inner4tabular_set-3-dummy').send_keys('103')
980.         self.selenium.find_element_by_name('inner4tabular_set-4-dummy').send_keys('222')
981.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
982.         self.wait_page_loaded()
983. 
984.         self.assertEqual(rows_length(), 5, msg="sanity check")
985. 
986.         # Non-field errorlist is in its own <tr> just before
987.         # tr#inner4tabular_set-3:
988.         errorlist = self.selenium.find_element_by_css_selector(
989.             '%s #inner4tabular_set-3 + .row-form-errors .errorlist li' % inline_id
990.         )
991.         self.assertEqual('Please correct the duplicate values below.', errorlist.text)
992.         delete_link = self.selenium.find_element_by_css_selector('#inner4tabular_set-4 .inline-deletelink')
993.         delete_link.click()
994.         self.assertEqual(rows_length(), 4)
995.         with self.disable_implicit_wait(), self.assertRaises(NoSuchElementException):
996.             self.selenium.find_element_by_css_selector('%s .dynamic-inner4tabular_set .errorlist li' % inline_id)
997. 
998.         self.selenium.find_element_by_xpath('//input[@value="Save"]').click()
999.         self.wait_page_loaded()

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 08:27:26,065 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the 'full content' of the file `tests/admin_inlines/tests.py`.\n\n2. Extended relevance:\n   - The provided context contains what appears to be the entire content of the file from line 1 to 999, directly fulfilling the user's primary request.\n   - This file also contains test methods that customize formset prefixes, such as `test_non_related_name_inline` (lines 231-258), which addresses the user's secondary requirement and stated purpose of finding examples related to special characters in prefixes.", relative_path='tests/admin_inlines/tests.py', start_line=1, end_line=999)]
2025-12-23 08:27:26,067 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of `tests/admin_inlines/tests.py`.
2025-12-23 08:27:26,067 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 08:27:26,067 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 08:27:26,068 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 4 existing contexts
2025-12-23 08:27:26,068 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 5 total contexts (removed 0 duplicates)
2025-12-23 08:27:26,069 - thread-135781221918400.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-23 08:27:26,069 - thread-135781221918400.prometheus_context_collector - INFO - Successfully retrieved 5 context snippets
