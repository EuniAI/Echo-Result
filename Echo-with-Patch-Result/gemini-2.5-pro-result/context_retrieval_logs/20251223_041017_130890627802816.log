2025-12-23 04:10:17,179 - thread-130890627802816.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: makemigrations router.allow_migrate() calls for consistency checks use incorrect (app_label, model) pairs

Description: Description
	
As reported in ticket:27200#comment:14, I makemigrations incorrectly calls allow_migrate() for each app with all the models in the project rather than for each app with the app's models. It broke the router I use because it was passing invalid combinations for shards since not all shards have the same models.
[​​https://github.com/django/django/pull/7530 PR]

Patch information:
diff --git a/django/core/management/commands/makemigrations.py b/django/core/management/commands/makemigrations.py
index 0b39536f5b..e648880ef0 100644
--- a/django/core/management/commands/makemigrations.py
+++ b/django/core/management/commands/makemigrations.py
@@ -105,7 +105,7 @@ class Command(BaseCommand):
                     # At least one model must be migrated to the database.
                     router.allow_migrate(connection.alias, app_label, model_name=model._meta.object_name)
                     for app_label in consistency_check_labels
-                    for model in apps.get_models(app_label)
+                    for model in apps.get_app_config(app_label).get_models()
             )):
                 loader.check_consistent_history(connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 04:10:17,284 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_static.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── registration
|   |   |   ├── tests
|   |   |   |   ├── __init__.py
|   |   |   |   └── utils.py
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── libgeoip.py
|   |   |   |   └── prototypes.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backend
|   |   |   |   └── regex.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   ├── srs.py
|   |   |   |   └── wkt.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── locale
|   |   |   |   ├── ar
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── he
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── id
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── signals.py
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── staticfiles.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   ├── django_1_10.py
|   |   |   |   └── django_1_8_0.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── urls.py
|   |   |   └── utils.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── urlresolvers.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── version.py
|   |   |   ├── postgresql_psycopg2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── version.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── topological_sort.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── deletion.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── datetime.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   ├── license.txt
|   |   └── weakref_backports.py
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── extras
|   |   |   ├── __init__.py
|   |   |   └── widgets.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── models.py
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── eggs.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── glob.py
|   |   ├── html.py
|   |   ├── html_parser.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── lru_cache.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── six.py
|   |   ├── synch.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       └── static.py
├── docs
|   ├── _ext
|   |   ├── cve_role.py
|   |   ├── djangodocs.py
|   |   └── ticket_role.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   ├── roles.txt
|   |   ├── security.txt
|   |   └── team.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   ├── language.txt
|   |   |   └── upgrading.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── python3.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── timeparse.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── blanket.js
|   |   ├── grunt-reporter.js
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_adminsite.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   └── with_integer_username.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_auth_backends_deprecation.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_deprecated_views.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   ├── urls_custom_user_admin.py
    |   └── urls_deprecated.py
    ├── backends
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_creation.py
    |   ├── test_features.py
    |   ├── test_mysql.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   ├── tests_1_10_compatibility.py
    |   ├── tests_1_8_compatibility.py
    |   └── urls
    |       ├── __init__.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       └── warning_in_include.py
    ├── choices
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_models.py
    |   ├── test_order_with_respect_to.py
    |   ├── tests.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── test_context_processor.py
    |   └── tests.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_cast.py
    |   ├── test_datetime.py
    |   └── tests.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   └── test_postgresql_psycopg2.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       └── article_form.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_geoforms.py
    |   ├── test_geoip.py
    |   ├── test_geoip2.py
    |   ├── test_measure.py
    |   ├── test_spatialrefsys.py
    |   ├── test_wkt.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── test_legacy.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_permalink
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_array.py
    |   ├── test_citext.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_json.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── base.txt
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   ├── py2.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   └── urls
    |       ├── __init__.py
    |       ├── http.py
    |       └── https.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_i18n.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   └── testtags.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── test_unicode.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   └── password_change_form.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_discovery_sample
    |   ├── __init__.py
    |   ├── doctests.py
    |   ├── empty.py
    |   ├── pattern_tests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tests_sample.py
    ├── test_discovery_sample2
    |   ├── __init__.py
    |   └── tests.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── tests.py
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_full_import.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── leave_locale_alone_false.py
    |   |       ├── leave_locale_alone_true.py
    |   |       ├── reverse_url.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── locale
    |   |   └── nl
    |   |       └── LC_MESSAGES
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_deprecation.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_glob.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_itercompat.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   └── test_tree.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
    |   ├── __init__.py
    |   ├── invalid_urls.txt
    |   ├── tests.py
    |   └── valid_urls.txt
    ├── version
    |   ├── __init__.py
    |   └── tests.py
    ├── view_tests
    |   ├── __init__.py
    |   ├── app0
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── en
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app3
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app4
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app5
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── default_urls.py
    |   ├── generic_urls.py
    |   ├── locale
    |   |   ├── de
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_GB
    |   |   |   └── LC_MESSAGES
    |   |   ├── es
    |   |   |   └── LC_MESSAGES
    |   |   ├── fr
    |   |   |   └── LC_MESSAGES
    |   |   ├── nl
    |   |   |   └── LC_MESSAGES
    |   |   └── ru
    |   |       └── LC_MESSAGES
    |   ├── media
    |   |   ├── file.txt
    |   |   └── long-line.txt
    |   ├── models.py
    |   ├── regression_21530_urls.py
    |   ├── templates
    |   |   ├── debug
    |   |   |   └── template_exception.html
    |   |   ├── jsi18n-multi-catalogs.html
    |   |   ├── jsi18n.html
    |   |   ├── old_jsi18n-multi-catalogs.html
    |   |   └── old_jsi18n.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── debugtags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── py3_test_debug.py
    |   |   ├── test_csrf.py
    |   |   ├── test_debug.py
    |   |   ├── test_defaults.py
    |   |   ├── test_i18n.py
    |   |   ├── test_i18n_deprecated.py
    |   |   ├── test_json.py
    |   |   ├── test_specials.py
    |   |   └── test_static.py
    |   ├── urls.py
    |   └── views.py
    └── wsgi
        ├── __init__.py
        ├── tests.py
        ├── urls.py
        └── wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: makemigrations router.allow_migrate() calls for consistency checks use incorrect (app_label, model) pairs

Description: Description
	
As reported in ticket:27200#comment:14, I makemigrations incorrectly calls allow_migrate() for each app with all the models in the project rather than for each app with the app's models. It broke the router I use because it was passing invalid combinations for shards since not all shards have the same models.
[​​https://github.com/django/django/pull/7530 PR]

Patch information:
diff --git a/django/core/management/commands/makemigrations.py b/django/core/management/commands/makemigrations.py
index 0b39536f5b..e648880ef0 100644
--- a/django/core/management/commands/makemigrations.py
+++ b/django/core/management/commands/makemigrations.py
@@ -105,7 +105,7 @@ class Command(BaseCommand):
                     # At least one model must be migrated to the database.
                     router.allow_migrate(connection.alias, app_label, model_name=model._meta.object_name)
                     for app_label in consistency_check_labels
-                    for model in apps.get_models(app_label)
+                    for model in apps.get_app_config(app_label).get_models()
             )):
                 loader.check_consistent_history(connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 04:10:45,800 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a `makemigrations` bug involving database routers. The bug is about `router.allow_migrate()` being called with incorrect arguments. To find relevant tests, I need to look for tests that involve both migrations and multiple databases, as this is where routers are used.\n\nThe file `tests/migrations/test_multidb.py` seems most relevant because its name suggests it contains tests for migrations in a multi-database setup. These tests are likely to use and configure database routers, which is central to the bug report. I will start by examining this file to find tests that define a router and check its interaction with migration commands.' query='Please provide the full content of tests/migrations/test_multidb.py' extra_requirements='' purpose='I need to find test cases that involve migrations and database routers to identify tests relevant to the bug in `makemigrations`.'
2025-12-23 04:10:45,801 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of tests/migrations/test_multidb.py
2025-12-23 04:10:45,801 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 04:10:45,802 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 04:10:45,802 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 04:10:45,802 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of tests/migrations/test_multidb.py
Purpose: I need to find test cases that involve migrations and database routers to identify tests relevant to the bug in `makemigrations`.
2025-12-23 04:10:48,213 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the entire content of the specified test file. This file contains test cases related to migrations and database routers, which will help in identifying the tests relevant to the `makemigrations` bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/migrations/test_multidb.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2095, 'candidates_token_count': 67, 'total_token_count': 2257, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2095}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 67}], 'thoughts_token_count': 95, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16525829372121326, 'model_name': 'gemini-2.5-pro'} id='run--f93e2825-0eb2-4ed9-ac9e-219022ff79e4-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/migrations/test_multidb.py'}, 'id': '7d293588-64d1-4a8c-9f8f-63d64ec4a65c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2095, 'output_tokens': 67, 'total_tokens': 2257, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 95}}
2025-12-23 04:10:50,816 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the entire content of the specified test file. This file contains test cases related to migrations and database routers, which will help in identifying the tests relevant to the `makemigrations` bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/migrations/test_multidb.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 4951, 'candidates_token_count': 67, 'total_token_count': 5182, 'prompt_tokens_details': [{'modality': 1, 'token_count': 4951}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 67}], 'thoughts_token_count': 164, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.26274994238099053, 'model_name': 'gemini-2.5-pro'} id='run--123b1a5f-5840-48e1-984b-7c7b61ffd8fc-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/migrations/test_multidb.py'}, 'id': 'b314574b-a2cb-44b0-ba4a-b5bc3dad6aa8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4951, 'output_tokens': 67, 'total_tokens': 5182, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 164}}
2025-12-23 04:10:59,071 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the entire content of the specified test file. This file contains test cases related to migrations and database routers, which will help in identifying the tests relevant to the `makemigrations` bug.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 7807, 'candidates_token_count': 42, 'total_token_count': 8683, 'cached_content_token_count': 3588, 'prompt_tokens_details': [{'modality': 1, 'token_count': 7807}], 'cache_tokens_details': [{'modality': 1, 'token_count': 3588}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 42}], 'thoughts_token_count': 834}, 'finish_reason': 'STOP', 'avg_logprobs': -1.9539956592378163, 'model_name': 'gemini-2.5-pro'} id='run--1b551c47-c834-44bd-8a45-b4d2a1fa130c-0' usage_metadata={'input_tokens': 7807, 'output_tokens': 42, 'total_tokens': 8683, 'input_token_details': {'cache_read': 3588}, 'output_token_details': {'reasoning': 834}}
2025-12-23 04:10:59,073 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of tests/migrations/test_multidb.py
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases that involve migrations and database routers to identify tests relevant to the bug in `makemigrations`.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/migrations/test_multidb.py
Line number range: 1 - 174
Content:
1. import unittest
2. 
3. from django.db import connection, migrations, models
4. from django.db.migrations.state import ProjectState
5. from django.test import override_settings
6. 
7. from .test_operations import OperationTestBase
8. 
9. try:
10.     import sqlparse
11. except ImportError:
12.     sqlparse = None
13. 
14. 
15. class AgnosticRouter(object):
16.     """
17.     A router that doesn't have an opinion regarding migrating.
18.     """
19.     def allow_migrate(self, db, app_label, **hints):
20.         return None
21. 
22. 
23. class MigrateNothingRouter(object):
24.     """
25.     A router that doesn't allow migrating.
26.     """
27.     def allow_migrate(self, db, app_label, **hints):
28.         return False
29. 
30. 
31. class MigrateEverythingRouter(object):
32.     """
33.     A router that always allows migrating.
34.     """
35.     def allow_migrate(self, db, app_label, **hints):
36.         return True
37. 
38. 
39. class MigrateWhenFooRouter(object):
40.     """
41.     A router that allows migrating depending on a hint.
42.     """
43.     def allow_migrate(self, db, app_label, **hints):
44.         return hints.get('foo', False)
45. 
46. 
47. class MultiDBOperationTests(OperationTestBase):
48.     multi_db = True
49. 
50.     def _test_create_model(self, app_label, should_run):
51.         """
52.         Tests that CreateModel honours multi-db settings.
53.         """
54.         operation = migrations.CreateModel(
55.             "Pony",
56.             [("id", models.AutoField(primary_key=True))],
57.         )
58.         # Test the state alteration
59.         project_state = ProjectState()
60.         new_state = project_state.clone()
61.         operation.state_forwards(app_label, new_state)
62.         # Test the database alteration
63.         self.assertTableNotExists("%s_pony" % app_label)
64.         with connection.schema_editor() as editor:
65.             operation.database_forwards(app_label, editor, project_state, new_state)
66.         if should_run:
67.             self.assertTableExists("%s_pony" % app_label)
68.         else:
69.             self.assertTableNotExists("%s_pony" % app_label)
70.         # And test reversal
71.         with connection.schema_editor() as editor:
72.             operation.database_backwards(app_label, editor, new_state, project_state)
73.         self.assertTableNotExists("%s_pony" % app_label)
74. 
75.     @override_settings(DATABASE_ROUTERS=[AgnosticRouter()])
76.     def test_create_model(self):
77.         """
78.         Test when router doesn't have an opinion (i.e. CreateModel should run).
79.         """
80.         self._test_create_model("test_mltdb_crmo", should_run=True)
81. 
82.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
83.     def test_create_model2(self):
84.         """
85.         Test when router returns False (i.e. CreateModel shouldn't run).
86.         """
87.         self._test_create_model("test_mltdb_crmo2", should_run=False)
88. 
89.     @override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()])
90.     def test_create_model3(self):
91.         """
92.         Test when router returns True (i.e. CreateModel should run).
93.         """
94.         self._test_create_model("test_mltdb_crmo3", should_run=True)
95. 
96.     def test_create_model4(self):
97.         """
98.         Test multiple routers.
99.         """
100.         with override_settings(DATABASE_ROUTERS=[AgnosticRouter(), AgnosticRouter()]):
101.             self._test_create_model("test_mltdb_crmo4", should_run=True)
102.         with override_settings(DATABASE_ROUTERS=[MigrateNothingRouter(), MigrateEverythingRouter()]):
103.             self._test_create_model("test_mltdb_crmo4", should_run=False)
104.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter(), MigrateNothingRouter()]):
105.             self._test_create_model("test_mltdb_crmo4", should_run=True)
106. 
107.     def _test_run_sql(self, app_label, should_run, hints=None):
108.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()]):
109.             project_state = self.set_up_test_model(app_label)
110. 
111.         sql = """
112.         INSERT INTO {0}_pony (pink, weight) VALUES (1, 3.55);
113.         INSERT INTO {0}_pony (pink, weight) VALUES (3, 5.0);
114.         """.format(app_label)
115. 
116.         operation = migrations.RunSQL(sql, hints=hints or {})
117.         # Test the state alteration does nothing
118.         new_state = project_state.clone()
119.         operation.state_forwards(app_label, new_state)
120.         self.assertEqual(new_state, project_state)
121.         # Test the database alteration
122.         self.assertEqual(project_state.apps.get_model(app_label, "Pony").objects.count(), 0)
123.         with connection.schema_editor() as editor:
124.             operation.database_forwards(app_label, editor, project_state, new_state)
125.         Pony = project_state.apps.get_model(app_label, "Pony")
126.         if should_run:
127.             self.assertEqual(Pony.objects.count(), 2)
128.         else:
129.             self.assertEqual(Pony.objects.count(), 0)
130. 
131.     @unittest.skipIf(sqlparse is None and connection.features.requires_sqlparse_for_splitting, "Missing sqlparse")
132.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
133.     def test_run_sql(self):
134.         self._test_run_sql("test_mltdb_runsql", should_run=False)
135. 
136.     @unittest.skipIf(sqlparse is None and connection.features.requires_sqlparse_for_splitting, "Missing sqlparse")
137.     @override_settings(DATABASE_ROUTERS=[MigrateWhenFooRouter()])
138.     def test_run_sql2(self):
139.         self._test_run_sql("test_mltdb_runsql2", should_run=False)
140.         self._test_run_sql("test_mltdb_runsql2", should_run=True, hints={'foo': True})
141. 
142.     def _test_run_python(self, app_label, should_run, hints=None):
143.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()]):
144.             project_state = self.set_up_test_model(app_label)
145. 
146.         # Create the operation
147.         def inner_method(models, schema_editor):
148.             Pony = models.get_model(app_label, "Pony")
149.             Pony.objects.create(pink=1, weight=3.55)
150.             Pony.objects.create(weight=5)
151. 
152.         operation = migrations.RunPython(inner_method, hints=hints or {})
153.         # Test the state alteration does nothing
154.         new_state = project_state.clone()
155.         operation.state_forwards(app_label, new_state)
156.         self.assertEqual(new_state, project_state)
157.         # Test the database alteration
158.         self.assertEqual(project_state.apps.get_model(app_label, "Pony").objects.count(), 0)
159.         with connection.schema_editor() as editor:
160.             operation.database_forwards(app_label, editor, project_state, new_state)
161.         Pony = project_state.apps.get_model(app_label, "Pony")
162.         if should_run:
163.             self.assertEqual(Pony.objects.count(), 2)
164.         else:
165.             self.assertEqual(Pony.objects.count(), 0)
166. 
167.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
168.     def test_run_python(self):
169.         self._test_run_python("test_mltdb_runpython", should_run=False)
170. 
171.     @override_settings(DATABASE_ROUTERS=[MigrateWhenFooRouter()])
172.     def test_run_python2(self):
173.         self._test_run_python("test_mltdb_runpython2", should_run=False)
174.         self._test_run_python("test_mltdb_runpython2", should_run=True, hints={'foo': True})

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 04:11:05,192 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user explicitly asked for the full content of the file `tests/migrations/test_multidb.py`. The provided context contains the content of this file, and selecting the entire range from line 1 to 174 fulfills this request directly. This file contains test cases related to database migrations and routers, which aligns with the user's stated purpose of investigating a bug in `makemigrations`.", relative_path='tests/migrations/test_multidb.py', start_line=1, end_line=174)]
2025-12-23 04:11:05,193 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of tests/migrations/test_multidb.py
2025-12-23 04:11:05,193 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 04:11:05,194 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 04:11:05,194 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-23 04:11:05,194 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-23 04:11:05,195 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_static.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── registration
|   |   |   ├── tests
|   |   |   |   ├── __init__.py
|   |   |   |   └── utils.py
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── libgeoip.py
|   |   |   |   └── prototypes.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backend
|   |   |   |   └── regex.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   ├── srs.py
|   |   |   |   └── wkt.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── locale
|   |   |   |   ├── ar
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── he
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── id
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── signals.py
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── staticfiles.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   ├── django_1_10.py
|   |   |   |   └── django_1_8_0.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── urls.py
|   |   |   └── utils.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── urlresolvers.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── version.py
|   |   |   ├── postgresql_psycopg2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── version.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── topological_sort.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── deletion.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── datetime.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   ├── license.txt
|   |   └── weakref_backports.py
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── extras
|   |   |   ├── __init__.py
|   |   |   └── widgets.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── models.py
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── eggs.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── glob.py
|   |   ├── html.py
|   |   ├── html_parser.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── lru_cache.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── six.py
|   |   ├── synch.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       └── static.py
├── docs
|   ├── _ext
|   |   ├── cve_role.py
|   |   ├── djangodocs.py
|   |   └── ticket_role.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   ├── roles.txt
|   |   ├── security.txt
|   |   └── team.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   ├── language.txt
|   |   |   └── upgrading.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── python3.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── timeparse.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── blanket.js
|   |   ├── grunt-reporter.js
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_adminsite.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   └── with_integer_username.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_auth_backends_deprecation.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_deprecated_views.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   ├── urls_custom_user_admin.py
    |   └── urls_deprecated.py
    ├── backends
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_creation.py
    |   ├── test_features.py
    |   ├── test_mysql.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   ├── tests_1_10_compatibility.py
    |   ├── tests_1_8_compatibility.py
    |   └── urls
    |       ├── __init__.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       └── warning_in_include.py
    ├── choices
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_models.py
    |   ├── test_order_with_respect_to.py
    |   ├── tests.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── test_context_processor.py
    |   └── tests.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_cast.py
    |   ├── test_datetime.py
    |   └── tests.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   └── test_postgresql_psycopg2.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       └── article_form.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_geoforms.py
    |   ├── test_geoip.py
    |   ├── test_geoip2.py
    |   ├── test_measure.py
    |   ├── test_spatialrefsys.py
    |   ├── test_wkt.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── test_legacy.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_permalink
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_array.py
    |   ├── test_citext.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_json.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── base.txt
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   ├── py2.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   └── urls
    |       ├── __init__.py
    |       ├── http.py
    |       └── https.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_i18n.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   └── testtags.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── test_unicode.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   └── password_change_form.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_discovery_sample
    |   ├── __init__.py
    |   ├── doctests.py
    |   ├── empty.py
    |   ├── pattern_tests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tests_sample.py
    ├── test_discovery_sample2
    |   ├── __init__.py
    |   └── tests.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── tests.py
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_full_import.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── leave_locale_alone_false.py
    |   |       ├── leave_locale_alone_true.py
    |   |       ├── reverse_url.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── locale
    |   |   └── nl
    |   |       └── LC_MESSAGES
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_deprecation.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_glob.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_itercompat.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   └── test_tree.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
    |   ├── __init__.py
    |   ├── invalid_urls.txt
    |   ├── tests.py
    |   └── valid_urls.txt
    ├── version
    |   ├── __init__.py
    |   └── tests.py
    ├── view_tests
    |   ├── __init__.py
    |   ├── app0
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── en
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app3
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app4
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app5
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── default_urls.py
    |   ├── generic_urls.py
    |   ├── locale
    |   |   ├── de
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_GB
    |   |   |   └── LC_MESSAGES
    |   |   ├── es
    |   |   |   └── LC_MESSAGES
    |   |   ├── fr
    |   |   |   └── LC_MESSAGES
    |   |   ├── nl
    |   |   |   └── LC_MESSAGES
    |   |   └── ru
    |   |       └── LC_MESSAGES
    |   ├── media
    |   |   ├── file.txt
    |   |   └── long-line.txt
    |   ├── models.py
    |   ├── regression_21530_urls.py
    |   ├── templates
    |   |   ├── debug
    |   |   |   └── template_exception.html
    |   |   ├── jsi18n-multi-catalogs.html
    |   |   ├── jsi18n.html
    |   |   ├── old_jsi18n-multi-catalogs.html
    |   |   └── old_jsi18n.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── debugtags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── py3_test_debug.py
    |   |   ├── test_csrf.py
    |   |   ├── test_debug.py
    |   |   ├── test_defaults.py
    |   |   ├── test_i18n.py
    |   |   ├── test_i18n_deprecated.py
    |   |   ├── test_json.py
    |   |   ├── test_specials.py
    |   |   └── test_static.py
    |   ├── urls.py
    |   └── views.py
    └── wsgi
        ├── __init__.py
        ├── tests.py
        ├── urls.py
        └── wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: makemigrations router.allow_migrate() calls for consistency checks use incorrect (app_label, model) pairs

Description: Description
	
As reported in ticket:27200#comment:14, I makemigrations incorrectly calls allow_migrate() for each app with all the models in the project rather than for each app with the app's models. It broke the router I use because it was passing invalid combinations for shards since not all shards have the same models.
[​​https://github.com/django/django/pull/7530 PR]

Patch information:
diff --git a/django/core/management/commands/makemigrations.py b/django/core/management/commands/makemigrations.py
index 0b39536f5b..e648880ef0 100644
--- a/django/core/management/commands/makemigrations.py
+++ b/django/core/management/commands/makemigrations.py
@@ -105,7 +105,7 @@ class Command(BaseCommand):
                     # At least one model must be migrated to the database.
                     router.allow_migrate(connection.alias, app_label, model_name=model._meta.object_name)
                     for app_label in consistency_check_labels
-                    for model in apps.get_models(app_label)
+                    for model in apps.get_app_config(app_label).get_models()
             )):
                 loader.check_consistent_history(connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of tests/migrations/test_multidb.py
Extra Requirements: 
Purpose: I need to find test cases that involve migrations and database routers to identify tests relevant to the bug in `makemigrations`.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/migrations/test_multidb.py
Line number range: 1 - 174
Content:
1. import unittest
2. 
3. from django.db import connection, migrations, models
4. from django.db.migrations.state import ProjectState
5. from django.test import override_settings
6. 
7. from .test_operations import OperationTestBase
8. 
9. try:
10.     import sqlparse
11. except ImportError:
12.     sqlparse = None
13. 
14. 
15. class AgnosticRouter(object):
16.     """
17.     A router that doesn't have an opinion regarding migrating.
18.     """
19.     def allow_migrate(self, db, app_label, **hints):
20.         return None
21. 
22. 
23. class MigrateNothingRouter(object):
24.     """
25.     A router that doesn't allow migrating.
26.     """
27.     def allow_migrate(self, db, app_label, **hints):
28.         return False
29. 
30. 
31. class MigrateEverythingRouter(object):
32.     """
33.     A router that always allows migrating.
34.     """
35.     def allow_migrate(self, db, app_label, **hints):
36.         return True
37. 
38. 
39. class MigrateWhenFooRouter(object):
40.     """
41.     A router that allows migrating depending on a hint.
42.     """
43.     def allow_migrate(self, db, app_label, **hints):
44.         return hints.get('foo', False)
45. 
46. 
47. class MultiDBOperationTests(OperationTestBase):
48.     multi_db = True
49. 
50.     def _test_create_model(self, app_label, should_run):
51.         """
52.         Tests that CreateModel honours multi-db settings.
53.         """
54.         operation = migrations.CreateModel(
55.             "Pony",
56.             [("id", models.AutoField(primary_key=True))],
57.         )
58.         # Test the state alteration
59.         project_state = ProjectState()
60.         new_state = project_state.clone()
61.         operation.state_forwards(app_label, new_state)
62.         # Test the database alteration
63.         self.assertTableNotExists("%s_pony" % app_label)
64.         with connection.schema_editor() as editor:
65.             operation.database_forwards(app_label, editor, project_state, new_state)
66.         if should_run:
67.             self.assertTableExists("%s_pony" % app_label)
68.         else:
69.             self.assertTableNotExists("%s_pony" % app_label)
70.         # And test reversal
71.         with connection.schema_editor() as editor:
72.             operation.database_backwards(app_label, editor, new_state, project_state)
73.         self.assertTableNotExists("%s_pony" % app_label)
74. 
75.     @override_settings(DATABASE_ROUTERS=[AgnosticRouter()])
76.     def test_create_model(self):
77.         """
78.         Test when router doesn't have an opinion (i.e. CreateModel should run).
79.         """
80.         self._test_create_model("test_mltdb_crmo", should_run=True)
81. 
82.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
83.     def test_create_model2(self):
84.         """
85.         Test when router returns False (i.e. CreateModel shouldn't run).
86.         """
87.         self._test_create_model("test_mltdb_crmo2", should_run=False)
88. 
89.     @override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()])
90.     def test_create_model3(self):
91.         """
92.         Test when router returns True (i.e. CreateModel should run).
93.         """
94.         self._test_create_model("test_mltdb_crmo3", should_run=True)
95. 
96.     def test_create_model4(self):
97.         """
98.         Test multiple routers.
99.         """
100.         with override_settings(DATABASE_ROUTERS=[AgnosticRouter(), AgnosticRouter()]):
101.             self._test_create_model("test_mltdb_crmo4", should_run=True)
102.         with override_settings(DATABASE_ROUTERS=[MigrateNothingRouter(), MigrateEverythingRouter()]):
103.             self._test_create_model("test_mltdb_crmo4", should_run=False)
104.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter(), MigrateNothingRouter()]):
105.             self._test_create_model("test_mltdb_crmo4", should_run=True)
106. 
107.     def _test_run_sql(self, app_label, should_run, hints=None):
108.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()]):
109.             project_state = self.set_up_test_model(app_label)
110. 
111.         sql = """
112.         INSERT INTO {0}_pony (pink, weight) VALUES (1, 3.55);
113.         INSERT INTO {0}_pony (pink, weight) VALUES (3, 5.0);
114.         """.format(app_label)
115. 
116.         operation = migrations.RunSQL(sql, hints=hints or {})
117.         # Test the state alteration does nothing
118.         new_state = project_state.clone()
119.         operation.state_forwards(app_label, new_state)
120.         self.assertEqual(new_state, project_state)
121.         # Test the database alteration
122.         self.assertEqual(project_state.apps.get_model(app_label, "Pony").objects.count(), 0)
123.         with connection.schema_editor() as editor:
124.             operation.database_forwards(app_label, editor, project_state, new_state)
125.         Pony = project_state.apps.get_model(app_label, "Pony")
126.         if should_run:
127.             self.assertEqual(Pony.objects.count(), 2)
128.         else:
129.             self.assertEqual(Pony.objects.count(), 0)
130. 
131.     @unittest.skipIf(sqlparse is None and connection.features.requires_sqlparse_for_splitting, "Missing sqlparse")
132.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
133.     def test_run_sql(self):
134.         self._test_run_sql("test_mltdb_runsql", should_run=False)
135. 
136.     @unittest.skipIf(sqlparse is None and connection.features.requires_sqlparse_for_splitting, "Missing sqlparse")
137.     @override_settings(DATABASE_ROUTERS=[MigrateWhenFooRouter()])
138.     def test_run_sql2(self):
139.         self._test_run_sql("test_mltdb_runsql2", should_run=False)
140.         self._test_run_sql("test_mltdb_runsql2", should_run=True, hints={'foo': True})
141. 
142.     def _test_run_python(self, app_label, should_run, hints=None):
143.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()]):
144.             project_state = self.set_up_test_model(app_label)
145. 
146.         # Create the operation
147.         def inner_method(models, schema_editor):
148.             Pony = models.get_model(app_label, "Pony")
149.             Pony.objects.create(pink=1, weight=3.55)
150.             Pony.objects.create(weight=5)
151. 
152.         operation = migrations.RunPython(inner_method, hints=hints or {})
153.         # Test the state alteration does nothing
154.         new_state = project_state.clone()
155.         operation.state_forwards(app_label, new_state)
156.         self.assertEqual(new_state, project_state)
157.         # Test the database alteration
158.         self.assertEqual(project_state.apps.get_model(app_label, "Pony").objects.count(), 0)
159.         with connection.schema_editor() as editor:
160.             operation.database_forwards(app_label, editor, project_state, new_state)
161.         Pony = project_state.apps.get_model(app_label, "Pony")
162.         if should_run:
163.             self.assertEqual(Pony.objects.count(), 2)
164.         else:
165.             self.assertEqual(Pony.objects.count(), 0)
166. 
167.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
168.     def test_run_python(self):
169.         self._test_run_python("test_mltdb_runpython", should_run=False)
170. 
171.     @override_settings(DATABASE_ROUTERS=[MigrateWhenFooRouter()])
172.     def test_run_python2(self):
173.         self._test_run_python("test_mltdb_runpython2", should_run=False)
174.         self._test_run_python("test_mltdb_runpython2", should_run=True, hints={'foo': True})

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 04:11:17,771 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user is looking for test cases related to a bug in the `makemigrations` command where `router.allow_migrate()` is called with incorrect arguments. The current context from `tests/migrations/test_multidb.py` provides tests for migration operations with routers, but not for the `makemigrations` command itself. To find relevant test cases that demonstrate the faulty behavior or similar functionality, I need to examine the test file that specifically covers migration commands.' query='Please provide the full content of tests/migrations/test_commands.py.' extra_requirements='' purpose='I need to find test cases for the `makemigrations` command that use database routers to identify tests relevant to the bug.'
2025-12-23 04:11:17,772 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of tests/migrations/test_commands.py.
2025-12-23 04:11:17,773 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 04:11:17,773 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 04:11:17,774 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 04:11:17,774 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of tests/migrations/test_commands.py.
Purpose: I need to find test cases for the `makemigrations` command that use database routers to identify tests relevant to the bug.
2025-12-23 04:11:20,700 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/migrations/test_commands.py"}'}, '__gemini_function_call_thought_signatures__': {'5431d53e-cf4d-4185-896f-797a53ca082d': 'CvsFAY89a1+20ORFYxq9HrS504KIftRiAC5aqyEblRVfhC/5eIpztHDQC8zOwzaC1uFVH09CX/njv5zQVXS7N2qbyO9tvtlTmasenHNZfevhpw+QEJuTsGrPdQCcBf20QIgTm9fSwrjjYuYUP4nlFNFjd1MhIm1bKheNAIkBxD6sVa7oQZbUSuHdFXF81/d9j6hVd8DVDOvPv9I8zWUjINBramkTwfiPFe6vM3oaMzKVnJ3Ia7eZ4uiugAY6UpRUwm/AR5XlyfDFRc6CM4y+oulAzUwcHpS8pvi03CyTf5GMxh0/7AdxkEI/k3RdoQEUZOKvpFKMqxVc+B7oSjR6l4cCiNz9WgMEtA8ZJ3dUA2UK5/7Pv0mzqHXrLlRRtMoR44toQWAUVN+JgHVHJAMPNsfLp78a/kuM3GLU5NRBPh0hCqig5StBp4VzXpK8DRSjSXJX8oL3un8IT989VXPSNEMLcn23eSrTSmRUqUppx+jLEd6TrFmKs2tRfgQKNbPah93J6eGlSpBxhEyEFtz/m+iJRsaRdvU4yL67pEBRQj40fH0jvG1QnE1XmaKtbjcL284adnVzI7Uf/xefcuQH4yuk38g2I0xj2V/GGG0FzJ+hmemeCQE6kwwQG+sUr4VWtXVxsa8vleNdskNjvdScytkMJGnRqFivRUgI7jjHBewzpr6u0bnpJMuHxZtQp/3Ayi4rUw2in9DpX0JUcpOW05fgYbgFmoMqsMhw6F6KvjETg97Wb/Ke7ve7+jlxzUswHWPyWe/iNRABdFJKtE58vNElwIoQgWl6Lhlke3FTNtPrcGZBbjoTBgvnqeQsyjyxnATdCmIsbTzYahSl+RXbxoiovT9D4wBuH3Wwgo3FRTLRnIIhPEU0CTE6Q1oHnmFnlokCN1GCcWqBNlQLn3h8XIOcYchnGqMP2zJYN5vsJg5Y9UF0nedNXyAp1Q41rgkvVufcScWwxSZ/JDpDynUgyO2cPv3T2gEAU2N3kJtIANAcGPOJ9rF7iMbCsesvIg=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2095, 'candidates_token_count': 23, 'total_token_count': 2318, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2095}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 23}], 'thoughts_token_count': 200, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2648859646009362, 'model_name': 'gemini-2.5-pro'} id='run--8d11f5ad-bef1-4205-822b-ebf3340a03e4-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/migrations/test_commands.py'}, 'id': '5431d53e-cf4d-4185-896f-797a53ca082d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2095, 'output_tokens': 23, 'total_tokens': 2318, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 200}}
2025-12-23 04:11:24,801 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 1000.0, "relative_path": "tests/migrations/test_commands.py", "start_line": 501.0}'}, '__gemini_function_call_thought_signatures__': {'a5b3f6ca-1efa-43f9-a024-704b28323886': 'CqAIAY89a1+sOTxU9mkPF/LRn4JwXSTIH3cxlcdkKxlhOHCNVox0VLMiIR8IurDuXLBT2LIzGLk8R0SWN4X06zumy6+778vptTjJ/9D9kmUp2aQuO2mNq2MXsXJahow1rk6uQk+IBgY14h075HkcUayrdzkQfLyG1eDzXWNhbD2mSLYNgBDJSTsu6n9DK+cMRKYlQ8GuJZ3YCeh3Dnj9vQqx9Bv/lplzBNSjPc2KykVFw/TahSXC5bxNcMaECp4TfrYm5jW5eVoj2K16Bi1jemGxnO41nESOFlOcsRR/e17XurGGaNSX/9m6GrSZld3FIwveT6orXTbUVhr5LmVZVHb+29ACSyrh+ubb1otUuyNYkX0G89On/vO2Ch4XnFr/qYPzJs4CEz5SY1AAUsXOyqqlmnyD7O3AOk3oqqjo3BZ/0Hkzp9CKUPE+eAh44Lh5yztj1KFQpAHpjyuwWgOBmUPYd64WDkIhOcwQxutkR//MsjNeLsBOzYoDfbnt/8rZXVOSgskgBodyn3gJ8FnZh5pop6YC6vybJFFxpSZU1o7+r+n2nYvtxHOVb4jOFua62w1nJwC4LbWUG2T9uuQVZ4OjnrfUHFhMJ/UIUvCYRF6hgdJxcvebrhMqQhafUlKFE3EXoKXMqqQRrMQsXXfHSB7jro43FNVO6DjIPK9r5H8mYTV1ad9FjrtLr5FEfkzIs6pocg7bHkVllpBifDU+nG++rmGKK7ljtbR0Jy4d9fxTSM/GXKHcCVXgFZ8w4T6Bq0BFsaNfjURUmugQ5IZhAZGRMzDq8ugoZGxkVdpnUNlRtyBVQV2clcHTjoXOjbBb//AOe09Mr9O4KQduYBwfMKyP9grfbRw+pjGtTTF2qJ2K8m49ijhWu6Y8XO5gFOa/eStTVb7Gt0i4nKarpOKetNltlzvgIH97h6mSrXhAwnTl6f1mcNB5OdYdF5u3wN4UT4P1YhlLrbHHrNmnxX6YfGDKke1FJtsBwVJ4Zq3N2VQOGcIyCJgRDy26qLdQI05iNcFByZPak9peL8g4N1mhVFiF/0OuAvAzKuNEg6F6C8J3XkCw8OSOpbXYPD2ijKm3DASRid1B6vP41dwGS/JSny07OFLCwUFhP7zARLpxSHo714P9VGYaylOYwtKCX87L48bTUZi1T0ByT/I2lSmfXJcv8E15Bp5yCbPk+ZQN4daTjA1EK0p3+MHSIbigOq0b/EjgacLQBGDNKM2S34YB2DYMsTk+4e4dIuBS1NqtI3GUuwnMBCSokx4LplqIYTaeoB/NBINmYFSUa4SxzHQNHOhmu0YAu3JNc5EZiedGMIJkPqX3o22FI9UXc6eDYZvYpnnZ7edfdHFeucwCs2ZVFrRLb94oa1/0+h/KdVyuNR/nH4qPKu6qAqZH/rRBN+xyzmHR'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10492, 'candidates_token_count': 29, 'total_token_count': 10790, 'cached_content_token_count': 1831, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10692}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1831}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 269}, 'finish_reason': 'STOP', 'avg_logprobs': -1.1171050236142914, 'model_name': 'gemini-2.5-pro'} id='run--a302a7a2-56a0-4c96-8678-6223b053271e-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 1000.0, 'relative_path': 'tests/migrations/test_commands.py', 'start_line': 501.0}, 'id': 'a5b3f6ca-1efa-43f9-a024-704b28323886', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10492, 'output_tokens': 29, 'total_tokens': 10790, 'input_token_details': {'cache_read': 1831}, 'output_token_details': {'reasoning': 269}}
2025-12-23 04:11:28,273 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 2000.0, "relative_path": "tests/migrations/test_commands.py", "start_line": 1001.0}'}, '__gemini_function_call_thought_signatures__': {'67dc7cd7-9018-4633-97b0-969cf6d122e8': 'CqEGAY89a1+nh3783RxG1shCSWeQsvq0VKqsrkli46+gmpwAQcafYwFuktW1q3q6n8MuGWSATY6R+pevvI2O6Ah5AFaJ9nNQipEQp6o3GJbdy0Qz2bRL5zRNBl6D8Z+u5UGxQwPhV5tPxaHAHxXjHmVff2pRSOSxGHxSXVylbhPVpXk7CAlH1wq68khodDrXVOnFs/75PVhtTP/KKUdl113hvd6mhz/xXzKNnE8QlG0CQjw2U91TXy40HXlo8yTzZCkjOX/R32DX9x2Ix2bt2uA6W1MxKYJ4Yy0BEL0bV552Kf3EbCGJYX63Vd3vbl2D/79fPR884GUv8/SUp9saoyF0nJEoXb0YsRF1ZgweT5/J52ddCHwVGlif5TAZGpVCxeXmFWEZRgzkY9tl82Eg3tDXZzYrl4eV0auKOqJdm287epyhB+b3GfvRLPRSfBYc4nWdrUAAEB5MD16XnCED3t14lrdAY9qjmMbHMRwakrwxIjp6ucmZsnd299ahTqrVV0E2FRqoAFqwTRky8bf7DZOLa7/OCNjWcQmYYx1YpKCdqafWU73bmEChaa+6IkNsWZh86GxWatZq96JVhAN4UwMCLVcz2TWkfE9E2z5Nw1FdBSkqhc+h3jGAhGo/JWk4Lhx8wco8O2zefJ011eLT2h8Ha0QceDZZDlP4I0qs4kTOBqdS8nmmsVpRGopzNfA/idPq3nZwjQz3qq09qaYx9M5LP9WbSbgKk8NU/QYlfIBoMmZJrbCOBV3UKcXrQXIpaJavw+EmoCrYFBk9NWVhHKz0y6SC47kuwwdE2Sx75ktqkGhltiIy5ua6WVEEr+V9470pbM75Kk3Rq9KqU02aq66xIgZwvTePzgxTNNXqcrWG2i5OO+rFI9VLc2/Dw8P/cydhSsOCaR9TD3LnUOUk7rExr17zDhoiyovzB3Fn0iEj5ZZq29X5KqoqHSBlYI2yzGpe8VsRDWHI0BhDlgzEqC28J3dCCDF423jMva7sJv3/7Kim1UUxERkKtgTrSSu79difSXkavNLJun2TVUk25wWXR4+6aquw9ykfph+aH4uSTTml'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19421, 'candidates_token_count': 29, 'total_token_count': 19664, 'cached_content_token_count': 9411, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19890}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9411}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 29}], 'thoughts_token_count': 214}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6974324193494074, 'model_name': 'gemini-2.5-pro'} id='run--12c91b3b-3d3c-4f0d-bd97-ddef2d2fcac2-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 2000.0, 'relative_path': 'tests/migrations/test_commands.py', 'start_line': 1001.0}, 'id': '67dc7cd7-9018-4633-97b0-969cf6d122e8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 19421, 'output_tokens': 29, 'total_tokens': 19664, 'input_token_details': {'cache_read': 9411}, 'output_token_details': {'reasoning': 214}}
2025-12-23 04:11:33,228 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of `tests/migrations/test_commands.py`. After analyzing the file, I located a particularly relevant test case for your query: `test_makemigrations_consistency_checks_respect_routers`. This test, found within the `MakeMigrationsTests` class, specifically verifies that the `makemigrations` command correctly respects `DATABASE_ROUTERS` during its history consistency checks. I also found a test named `test_migrate_fake_initial` that, while testing the `migrate` command, also makes use of database routers and might be of interest to you.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 24719, 'candidates_token_count': 129, 'total_token_count': 25169, 'cached_content_token_count': 18963, 'prompt_tokens_details': [{'modality': 1, 'token_count': 25402}], 'cache_tokens_details': [{'modality': 1, 'token_count': 18963}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 129}], 'thoughts_token_count': 321}, 'finish_reason': 'STOP', 'avg_logprobs': -0.43307033804960027, 'model_name': 'gemini-2.5-pro'} id='run--6a39637b-9122-4c98-9b92-dca56fb5e2b0-0' usage_metadata={'input_tokens': 24719, 'output_tokens': 129, 'total_tokens': 25169, 'input_token_details': {'cache_read': 18963}, 'output_token_details': {'reasoning': 321}}
2025-12-23 04:11:33,231 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of tests/migrations/test_commands.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find test cases for the `makemigrations` command that use database routers to identify tests relevant to the bug.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/migrations/test_commands.py
Line number range: 1 - 500
Content:
1. # -*- coding: utf-8 -*-
2. from __future__ import unicode_literals
3. 
4. import datetime
5. import importlib
6. import io
7. import os
8. import sys
9. 
10. from django.apps import apps
11. from django.core.management import CommandError, call_command
12. from django.db import (
13.     ConnectionHandler, DatabaseError, connection, connections, models,
14. )
15. from django.db.migrations.exceptions import (
16.     InconsistentMigrationHistory, MigrationSchemaMissing,
17. )
18. from django.db.migrations.recorder import MigrationRecorder
19. from django.test import ignore_warnings, mock, override_settings
20. from django.utils import six
21. from django.utils.deprecation import RemovedInDjango20Warning
22. from django.utils.encoding import force_text
23. 
24. from .models import UnicodeModel, UnserializableModel
25. from .routers import TestRouter
26. from .test_base import MigrationTestBase
27. 
28. 
29. class MigrateTests(MigrationTestBase):
30.     """
31.     Tests running the migrate command.
32.     """
33.     multi_db = True
34. 
35.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
36.     def test_migrate(self):
37.         """
38.         Tests basic usage of the migrate command.
39.         """
40.         # Make sure no tables are created
41.         self.assertTableNotExists("migrations_author")
42.         self.assertTableNotExists("migrations_tribble")
43.         self.assertTableNotExists("migrations_book")
44.         # Run the migrations to 0001 only
45.         call_command("migrate", "migrations", "0001", verbosity=0)
46.         # Make sure the right tables exist
47.         self.assertTableExists("migrations_author")
48.         self.assertTableExists("migrations_tribble")
49.         self.assertTableNotExists("migrations_book")
50.         # Run migrations all the way
51.         call_command("migrate", verbosity=0)
52.         # Make sure the right tables exist
53.         self.assertTableExists("migrations_author")
54.         self.assertTableNotExists("migrations_tribble")
55.         self.assertTableExists("migrations_book")
56.         # Unmigrate everything
57.         call_command("migrate", "migrations", "zero", verbosity=0)
58.         # Make sure it's all gone
59.         self.assertTableNotExists("migrations_author")
60.         self.assertTableNotExists("migrations_tribble")
61.         self.assertTableNotExists("migrations_book")
62. 
63.     @override_settings(INSTALLED_APPS=[
64.         'django.contrib.auth',
65.         'django.contrib.contenttypes',
66.         'migrations.migrations_test_apps.migrated_app',
67.     ])
68.     def test_migrate_with_system_checks(self):
69.         out = six.StringIO()
70.         call_command('migrate', skip_checks=False, no_color=True, stdout=out)
71.         self.assertIn('Apply all migrations: migrated_app', out.getvalue())
72. 
73.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_initial_false"})
74.     def test_migrate_initial_false(self):
75.         """
76.         `Migration.initial = False` skips fake-initial detection.
77.         """
78.         # Make sure no tables are created
79.         self.assertTableNotExists("migrations_author")
80.         self.assertTableNotExists("migrations_tribble")
81.         # Run the migrations to 0001 only
82.         call_command("migrate", "migrations", "0001", verbosity=0)
83.         # Fake rollback
84.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
85.         # Make sure fake-initial detection does not run
86.         with self.assertRaises(DatabaseError):
87.             call_command("migrate", "migrations", "0001", fake_initial=True, verbosity=0)
88. 
89.         call_command("migrate", "migrations", "0001", fake=True, verbosity=0)
90.         # Real rollback
91.         call_command("migrate", "migrations", "zero", verbosity=0)
92.         # Make sure it's all gone
93.         self.assertTableNotExists("migrations_author")
94.         self.assertTableNotExists("migrations_tribble")
95.         self.assertTableNotExists("migrations_book")
96. 
97.     @override_settings(
98.         MIGRATION_MODULES={"migrations": "migrations.test_migrations"},
99.         DATABASE_ROUTERS=['migrations.routers.TestRouter'],
100.     )
101.     def test_migrate_fake_initial(self):
102.         """
103.         --fake-initial only works if all tables created in the initial
104.         migration of an app exists. Database routers must be obeyed when doing
105.         that check.
106.         """
107.         # Make sure no tables are created
108.         for db in connections:
109.             self.assertTableNotExists("migrations_author", using=db)
110.             self.assertTableNotExists("migrations_tribble", using=db)
111.         # Run the migrations to 0001 only
112.         call_command("migrate", "migrations", "0001", verbosity=0)
113.         call_command("migrate", "migrations", "0001", verbosity=0, database="other")
114.         # Make sure the right tables exist
115.         self.assertTableExists("migrations_author")
116.         self.assertTableNotExists("migrations_tribble")
117.         # Also check the "other" database
118.         self.assertTableNotExists("migrations_author", using="other")
119.         self.assertTableExists("migrations_tribble", using="other")
120. 
121.         # Fake a roll-back
122.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
123.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0, database="other")
124.         # Make sure the tables still exist
125.         self.assertTableExists("migrations_author")
126.         self.assertTableExists("migrations_tribble", using="other")
127.         # Try to run initial migration
128.         with self.assertRaises(DatabaseError):
129.             call_command("migrate", "migrations", "0001", verbosity=0)
130.         # Run initial migration with an explicit --fake-initial
131.         out = six.StringIO()
132.         with mock.patch('django.core.management.color.supports_color', lambda *args: False):
133.             call_command("migrate", "migrations", "0001", fake_initial=True, stdout=out, verbosity=1)
134.             call_command("migrate", "migrations", "0001", fake_initial=True, verbosity=0, database="other")
135.         self.assertIn(
136.             "migrations.0001_initial... faked",
137.             out.getvalue().lower()
138.         )
139.         # Run migrations all the way
140.         call_command("migrate", verbosity=0)
141.         call_command("migrate", verbosity=0, database="other")
142.         # Make sure the right tables exist
143.         self.assertTableExists("migrations_author")
144.         self.assertTableNotExists("migrations_tribble")
145.         self.assertTableExists("migrations_book")
146.         self.assertTableNotExists("migrations_author", using="other")
147.         self.assertTableNotExists("migrations_tribble", using="other")
148.         self.assertTableNotExists("migrations_book", using="other")
149.         # Fake a roll-back
150.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
151.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0, database="other")
152.         # Make sure the tables still exist
153.         self.assertTableExists("migrations_author")
154.         self.assertTableNotExists("migrations_tribble")
155.         self.assertTableExists("migrations_book")
156.         # Try to run initial migration
157.         with self.assertRaises(DatabaseError):
158.             call_command("migrate", "migrations", verbosity=0)
159.         # Run initial migration with an explicit --fake-initial
160.         with self.assertRaises(DatabaseError):
161.             # Fails because "migrations_tribble" does not exist but needs to in
162.             # order to make --fake-initial work.
163.             call_command("migrate", "migrations", fake_initial=True, verbosity=0)
164.         # Fake a apply
165.         call_command("migrate", "migrations", fake=True, verbosity=0)
166.         call_command("migrate", "migrations", fake=True, verbosity=0, database="other")
167.         # Unmigrate everything
168.         call_command("migrate", "migrations", "zero", verbosity=0)
169.         call_command("migrate", "migrations", "zero", verbosity=0, database="other")
170.         # Make sure it's all gone
171.         for db in connections:
172.             self.assertTableNotExists("migrations_author", using=db)
173.             self.assertTableNotExists("migrations_tribble", using=db)
174.             self.assertTableNotExists("migrations_book", using=db)
175. 
176.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_fake_split_initial"})
177.     def test_migrate_fake_split_initial(self):
178.         """
179.         Split initial migrations can be faked with --fake-initial.
180.         """
181.         call_command("migrate", "migrations", "0002", verbosity=0)
182.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
183.         out = six.StringIO()
184.         with mock.patch('django.core.management.color.supports_color', lambda *args: False):
185.             call_command("migrate", "migrations", "0002", fake_initial=True, stdout=out, verbosity=1)
186.         value = out.getvalue().lower()
187.         self.assertIn("migrations.0001_initial... faked", value)
188.         self.assertIn("migrations.0002_second... faked", value)
189.         # Fake an apply
190.         call_command("migrate", "migrations", fake=True, verbosity=0)
191.         # Unmigrate everything
192.         call_command("migrate", "migrations", "zero", verbosity=0)
193. 
194.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_conflict"})
195.     def test_migrate_conflict_exit(self):
196.         """
197.         Makes sure that migrate exits if it detects a conflict.
198.         """
199.         with self.assertRaisesMessage(CommandError, "Conflicting migrations detected"):
200.             call_command("migrate", "migrations")
201. 
202.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
203.     def test_showmigrations_list(self):
204.         """
205.         Tests --list output of showmigrations command
206.         """
207.         out = six.StringIO()
208.         with mock.patch('django.core.management.color.supports_color', lambda *args: True):
209.             call_command("showmigrations", format='list', stdout=out, verbosity=0, no_color=False)
210.         self.assertEqual(
211.             '\x1b[1mmigrations\n\x1b[0m'
212.             ' [ ] 0001_initial\n'
213.             ' [ ] 0002_second\n',
214.             out.getvalue().lower()
215.         )
216. 
217.         call_command("migrate", "migrations", "0001", verbosity=0)
218. 
219.         out = six.StringIO()
220.         # Giving the explicit app_label tests for selective `show_list` in the command
221.         call_command("showmigrations", "migrations", format='list', stdout=out, verbosity=0, no_color=True)
222.         self.assertEqual(
223.             'migrations\n'
224.             ' [x] 0001_initial\n'
225.             ' [ ] 0002_second\n',
226.             out.getvalue().lower()
227.         )
228.         # Cleanup by unmigrating everything
229.         call_command("migrate", "migrations", "zero", verbosity=0)
230. 
231.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_run_before"})
232.     def test_showmigrations_plan(self):
233.         """
234.         Tests --plan output of showmigrations command
235.         """
236.         out = six.StringIO()
237.         call_command("showmigrations", format='plan', stdout=out)
238.         self.assertEqual(
239.             "[ ]  migrations.0001_initial\n"
240.             "[ ]  migrations.0003_third\n"
241.             "[ ]  migrations.0002_second\n",
242.             out.getvalue().lower()
243.         )
244. 
245.         out = six.StringIO()
246.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
247.         self.assertEqual(
248.             "[ ]  migrations.0001_initial\n"
249.             "[ ]  migrations.0003_third ... (migrations.0001_initial)\n"
250.             "[ ]  migrations.0002_second ... (migrations.0001_initial, migrations.0003_third)\n",
251.             out.getvalue().lower()
252.         )
253.         call_command("migrate", "migrations", "0003", verbosity=0)
254. 
255.         out = six.StringIO()
256.         call_command("showmigrations", format='plan', stdout=out)
257.         self.assertEqual(
258.             "[x]  migrations.0001_initial\n"
259.             "[x]  migrations.0003_third\n"
260.             "[ ]  migrations.0002_second\n",
261.             out.getvalue().lower()
262.         )
263. 
264.         out = six.StringIO()
265.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
266.         self.assertEqual(
267.             "[x]  migrations.0001_initial\n"
268.             "[x]  migrations.0003_third ... (migrations.0001_initial)\n"
269.             "[ ]  migrations.0002_second ... (migrations.0001_initial, migrations.0003_third)\n",
270.             out.getvalue().lower()
271.         )
272. 
273.         # Cleanup by unmigrating everything
274.         call_command("migrate", "migrations", "zero", verbosity=0)
275. 
276.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_empty"})
277.     def test_showmigrations_plan_no_migrations(self):
278.         """
279.         Tests --plan output of showmigrations command without migrations
280.         """
281.         out = six.StringIO()
282.         call_command("showmigrations", format='plan', stdout=out)
283.         self.assertEqual("", out.getvalue().lower())
284. 
285.         out = six.StringIO()
286.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
287.         self.assertEqual("", out.getvalue().lower())
288. 
289.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_squashed_complex"})
290.     def test_showmigrations_plan_squashed(self):
291.         """
292.         Tests --plan output of showmigrations command with squashed migrations.
293.         """
294.         out = six.StringIO()
295.         call_command("showmigrations", format='plan', stdout=out)
296.         self.assertEqual(
297.             "[ ]  migrations.1_auto\n"
298.             "[ ]  migrations.2_auto\n"
299.             "[ ]  migrations.3_squashed_5\n"
300.             "[ ]  migrations.6_auto\n"
301.             "[ ]  migrations.7_auto\n",
302.             out.getvalue().lower()
303.         )
304. 
305.         out = six.StringIO()
306.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
307.         self.assertEqual(
308.             "[ ]  migrations.1_auto\n"
309.             "[ ]  migrations.2_auto ... (migrations.1_auto)\n"
310.             "[ ]  migrations.3_squashed_5 ... (migrations.2_auto)\n"
311.             "[ ]  migrations.6_auto ... (migrations.3_squashed_5)\n"
312.             "[ ]  migrations.7_auto ... (migrations.6_auto)\n",
313.             out.getvalue().lower()
314.         )
315. 
316.         call_command("migrate", "migrations", "3_squashed_5", verbosity=0)
317. 
318.         out = six.StringIO()
319.         call_command("showmigrations", format='plan', stdout=out)
320.         self.assertEqual(
321.             "[x]  migrations.1_auto\n"
322.             "[x]  migrations.2_auto\n"
323.             "[x]  migrations.3_squashed_5\n"
324.             "[ ]  migrations.6_auto\n"
325.             "[ ]  migrations.7_auto\n",
326.             out.getvalue().lower()
327.         )
328. 
329.         out = six.StringIO()
330.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
331.         self.assertEqual(
332.             "[x]  migrations.1_auto\n"
333.             "[x]  migrations.2_auto ... (migrations.1_auto)\n"
334.             "[x]  migrations.3_squashed_5 ... (migrations.2_auto)\n"
335.             "[ ]  migrations.6_auto ... (migrations.3_squashed_5)\n"
336.             "[ ]  migrations.7_auto ... (migrations.6_auto)\n",
337.             out.getvalue().lower()
338.         )
339. 
340.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
341.     def test_sqlmigrate_forwards(self):
342.         """
343.         Makes sure that sqlmigrate does something.
344.         """
345.         out = six.StringIO()
346.         call_command("sqlmigrate", "migrations", "0001", stdout=out)
347.         output = out.getvalue().lower()
348. 
349.         index_tx_start = output.find(connection.ops.start_transaction_sql().lower())
350.         index_op_desc_author = output.find('-- create model author')
351.         index_create_table = output.find('create table')
352.         index_op_desc_tribble = output.find('-- create model tribble')
353.         index_op_desc_unique_together = output.find('-- alter unique_together')
354.         index_tx_end = output.find(connection.ops.end_transaction_sql().lower())
355. 
356.         self.assertGreater(index_tx_start, -1, "Transaction start not found")
357.         self.assertGreater(
358.             index_op_desc_author, index_tx_start,
359.             "Operation description (author) not found or found before transaction start"
360.         )
361.         self.assertGreater(
362.             index_create_table, index_op_desc_author,
363.             "CREATE TABLE not found or found before operation description (author)"
364.         )
365.         self.assertGreater(
366.             index_op_desc_tribble, index_create_table,
367.             "Operation description (tribble) not found or found before CREATE TABLE (author)"
368.         )
369.         self.assertGreater(
370.             index_op_desc_unique_together, index_op_desc_tribble,
371.             "Operation description (unique_together) not found or found before operation description (tribble)"
372.         )
373.         self.assertGreater(
374.             index_tx_end, index_op_desc_unique_together,
375.             "Transaction end not found or found before operation description (unique_together)"
376.         )
377. 
378.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
379.     def test_sqlmigrate_backwards(self):
380.         """
381.         Makes sure that sqlmigrate does something.
382.         """
383.         # Cannot generate the reverse SQL unless we've applied the migration.
384.         call_command("migrate", "migrations", verbosity=0)
385. 
386.         out = six.StringIO()
387.         call_command("sqlmigrate", "migrations", "0001", stdout=out, backwards=True)
388.         output = out.getvalue().lower()
389. 
390.         index_tx_start = output.find(connection.ops.start_transaction_sql().lower())
391.         index_op_desc_unique_together = output.find('-- alter unique_together')
392.         index_op_desc_tribble = output.find('-- create model tribble')
393.         index_op_desc_author = output.find('-- create model author')
394.         index_drop_table = output.rfind('drop table')
395.         index_tx_end = output.find(connection.ops.end_transaction_sql().lower())
396. 
397.         self.assertGreater(index_tx_start, -1, "Transaction start not found")
398.         self.assertGreater(
399.             index_op_desc_unique_together, index_tx_start,
400.             "Operation description (unique_together) not found or found before transaction start"
401.         )
402.         self.assertGreater(
403.             index_op_desc_tribble, index_op_desc_unique_together,
404.             "Operation description (tribble) not found or found before operation description (unique_together)"
405.         )
406.         self.assertGreater(
407.             index_op_desc_author, index_op_desc_tribble,
408.             "Operation description (author) not found or found before operation description (tribble)"
409.         )
410. 
411.         self.assertGreater(
412.             index_drop_table, index_op_desc_author,
413.             "DROP TABLE not found or found before operation description (author)"
414.         )
415.         self.assertGreater(
416.             index_tx_end, index_op_desc_unique_together,
417.             "Transaction end not found or found before DROP TABLE"
418.         )
419. 
420.         # Cleanup by unmigrating everything
421.         call_command("migrate", "migrations", "zero", verbosity=0)
422. 
423.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_non_atomic"})
424.     def test_sqlmigrate_for_non_atomic_migration(self):
425.         """
426.         Transaction wrappers aren't shown for non-atomic migrations.
427.         """
428.         out = six.StringIO()
429.         call_command("sqlmigrate", "migrations", "0001", stdout=out)
430.         output = out.getvalue().lower()
431.         queries = [q.strip() for q in output.splitlines()]
432.         if connection.ops.start_transaction_sql():
433.             self.assertNotIn(connection.ops.start_transaction_sql().lower(), queries)
434.         self.assertNotIn(connection.ops.end_transaction_sql().lower(), queries)
435. 
436.     @override_settings(
437.         INSTALLED_APPS=[
438.             "migrations.migrations_test_apps.migrated_app",
439.             "migrations.migrations_test_apps.migrated_unapplied_app",
440.             "migrations.migrations_test_apps.unmigrated_app"])
441.     def test_regression_22823_unmigrated_fk_to_migrated_model(self):
442.         """
443.         https://code.djangoproject.com/ticket/22823
444. 
445.         Assuming you have 3 apps, `A`, `B`, and `C`, such that:
446. 
447.         * `A` has migrations
448.         * `B` has a migration we want to apply
449.         * `C` has no migrations, but has an FK to `A`
450. 
451.         When we try to migrate "B", an exception occurs because the
452.         "B" was not included in the ProjectState that is used to detect
453.         soft-applied migrations.
454.         """
455.         call_command("migrate", "migrated_unapplied_app", stdout=six.StringIO())
456. 
457.         # unmigrated_app.SillyModel has a foreign key to 'migrations.Tribble',
458.         # but that model is only defined in a migration, so the global app
459.         # registry never sees it and the reference is left dangling. Remove it
460.         # to avoid problems in subsequent tests.
461.         del apps._pending_operations[('migrations', 'tribble')]
462. 
463.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_squashed"})
464.     def test_migrate_record_replaced(self):
465.         """
466.         Running a single squashed migration should record all of the original
467.         replaced migrations as run.
468.         """
469.         recorder = MigrationRecorder(connection)
470.         out = six.StringIO()
471.         call_command("migrate", "migrations", verbosity=0)
472.         call_command("showmigrations", "migrations", stdout=out, no_color=True)
473.         self.assertEqual(
474.             'migrations\n'
475.             ' [x] 0001_squashed_0002 (2 squashed migrations)\n',
476.             out.getvalue().lower()
477.         )
478.         applied_migrations = recorder.applied_migrations()
479.         self.assertIn(("migrations", "0001_initial"), applied_migrations)
480.         self.assertIn(("migrations", "0002_second"), applied_migrations)
481.         self.assertIn(("migrations", "0001_squashed_0002"), applied_migrations)
482.         # Rollback changes
483.         call_command("migrate", "migrations", "zero", verbosity=0)
484. 
485.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_squashed"})
486.     def test_migrate_record_squashed(self):
487.         """
488.         Running migrate for a squashed migration should record as run
489.         if all of the replaced migrations have been run (#25231).
490.         """
491.         recorder = MigrationRecorder(connection)
492.         recorder.record_applied("migrations", "0001_initial")
493.         recorder.record_applied("migrations", "0002_second")
494.         out = six.StringIO()
495.         call_command("migrate", "migrations", verbosity=0)
496.         call_command("showmigrations", "migrations", stdout=out, no_color=True)
497.         self.assertEqual(
498.             'migrations\n'
499.             ' [x] 0001_squashed_0002 (2 squashed migrations)\n',
500.             out.getvalue().lower()


File: tests/migrations/test_commands.py
Line number range: 501 - 1000
Content:
501.         )
502.         self.assertIn(
503.             ("migrations", "0001_squashed_0002"),
504.             recorder.applied_migrations()
505.         )
506.         # No changes were actually applied so there is nothing to rollback
507. 
508.     @override_settings(MIGRATION_MODULES={'migrations': 'migrations.test_migrations'})
509.     def test_migrate_inconsistent_history(self):
510.         """
511.         Running migrate with some migrations applied before their dependencies
512.         should not be allowed.
513.         """
514.         recorder = MigrationRecorder(connection)
515.         recorder.record_applied("migrations", "0002_second")
516.         msg = "Migration migrations.0002_second is applied before its dependency migrations.0001_initial"
517.         with self.assertRaisesMessage(InconsistentMigrationHistory, msg):
518.             call_command("migrate")
519.         applied_migrations = recorder.applied_migrations()
520.         self.assertNotIn(("migrations", "0001_initial"), applied_migrations)
521. 
522. 
523. class MakeMigrationsTests(MigrationTestBase):
524.     """
525.     Tests running the makemigrations command.
526.     """
527. 
528.     def setUp(self):
529.         super(MakeMigrationsTests, self).setUp()
530.         self._old_models = apps.app_configs['migrations'].models.copy()
531. 
532.     def tearDown(self):
533.         apps.app_configs['migrations'].models = self._old_models
534.         apps.all_models['migrations'] = self._old_models
535.         apps.clear_cache()
536.         super(MakeMigrationsTests, self).tearDown()
537. 
538.     def test_files_content(self):
539.         self.assertTableNotExists("migrations_unicodemodel")
540.         apps.register_model('migrations', UnicodeModel)
541.         with self.temporary_migration_module() as migration_dir:
542.             call_command("makemigrations", "migrations", verbosity=0)
543. 
544.             # Check for empty __init__.py file in migrations folder
545.             init_file = os.path.join(migration_dir, "__init__.py")
546.             self.assertTrue(os.path.exists(init_file))
547. 
548.             with open(init_file, 'r') as fp:
549.                 content = force_text(fp.read())
550.             self.assertEqual(content, '')
551. 
552.             # Check for existing 0001_initial.py file in migration folder
553.             initial_file = os.path.join(migration_dir, "0001_initial.py")
554.             self.assertTrue(os.path.exists(initial_file))
555. 
556.             with io.open(initial_file, 'r', encoding='utf-8') as fp:
557.                 content = fp.read()
558.                 self.assertIn('# -*- coding: utf-8 -*-', content)
559.                 self.assertIn('migrations.CreateModel', content)
560.                 self.assertIn('initial = True', content)
561. 
562.                 if six.PY3:
563.                     self.assertIn('úñí©óðé µóðéø', content)  # Meta.verbose_name
564.                     self.assertIn('úñí©óðé µóðéøß', content)  # Meta.verbose_name_plural
565.                     self.assertIn('ÚÑÍ¢ÓÐÉ', content)  # title.verbose_name
566.                     self.assertIn('“Ðjáñgó”', content)  # title.default
567.                 else:
568.                     # Meta.verbose_name
569.                     self.assertIn('\\xfa\\xf1\\xed\\xa9\\xf3\\xf0\\xe9 \\xb5\\xf3\\xf0\\xe9\\xf8', content)
570.                     # Meta.verbose_name_plural
571.                     self.assertIn('\\xfa\\xf1\\xed\\xa9\\xf3\\xf0\\xe9 \\xb5\\xf3\\xf0\\xe9\\xf8\\xdf', content)
572.                     self.assertIn('\\xda\\xd1\\xcd\\xa2\\xd3\\xd0\\xc9', content)  # title.verbose_name
573.                     self.assertIn('\\u201c\\xd0j\\xe1\\xf1g\\xf3\\u201d', content)  # title.default
574. 
575.     def test_makemigrations_order(self):
576.         """
577.         makemigrations should recognize number-only migrations (0001.py).
578.         """
579.         module = 'migrations.test_migrations_order'
580.         with self.temporary_migration_module(module=module) as migration_dir:
581.             if hasattr(importlib, 'invalidate_caches'):
582.                 # Python 3 importlib caches os.listdir() on some platforms like
583.                 # Mac OS X (#23850).
584.                 importlib.invalidate_caches()
585.             call_command('makemigrations', 'migrations', '--empty', '-n', 'a', '-v', '0')
586.             self.assertTrue(os.path.exists(os.path.join(migration_dir, '0002_a.py')))
587. 
588.     def test_makemigrations_empty_connections(self):
589.         empty_connections = ConnectionHandler({'default': {}})
590.         with mock.patch('django.core.management.commands.makemigrations.connections', new=empty_connections):
591.             # with no apps
592.             out = six.StringIO()
593.             call_command('makemigrations', stdout=out)
594.             self.assertIn('No changes detected', out.getvalue())
595.             # with an app
596.             with self.temporary_migration_module() as migration_dir:
597.                 call_command('makemigrations', 'migrations', verbosity=0)
598.                 init_file = os.path.join(migration_dir, '__init__.py')
599.                 self.assertTrue(os.path.exists(init_file))
600. 
601.     def test_makemigrations_consistency_checks_respect_routers(self):
602.         """
603.         The history consistency checks in makemigrations respect
604.         settings.DATABASE_ROUTERS.
605.         """
606.         def patched_ensure_schema(migration_recorder):
607.             if migration_recorder.connection is connections['other']:
608.                 raise MigrationSchemaMissing('Patched')
609.             else:
610.                 return mock.DEFAULT
611. 
612.         self.assertTableNotExists('migrations_unicodemodel')
613.         apps.register_model('migrations', UnicodeModel)
614.         with mock.patch.object(
615.                 MigrationRecorder, 'ensure_schema',
616.                 autospec=True, side_effect=patched_ensure_schema) as ensure_schema:
617.             with self.temporary_migration_module() as migration_dir:
618.                 call_command("makemigrations", "migrations", verbosity=0)
619.                 initial_file = os.path.join(migration_dir, "0001_initial.py")
620.                 self.assertTrue(os.path.exists(initial_file))
621.                 self.assertEqual(ensure_schema.call_count, 1)  # 'default' is checked
622. 
623.                 # Router says not to migrate 'other' so consistency shouldn't
624.                 # be checked.
625.                 with self.settings(DATABASE_ROUTERS=['migrations.routers.TestRouter']):
626.                     call_command('makemigrations', 'migrations', verbosity=0)
627.                 self.assertEqual(ensure_schema.call_count, 2)  # 'default' again
628. 
629.                 # With a router that doesn't prohibit migrating 'other',
630.                 # consistency is checked.
631.                 with self.settings(DATABASE_ROUTERS=['migrations.routers.EmptyRouter']):
632.                     with self.assertRaisesMessage(MigrationSchemaMissing, 'Patched'):
633.                         call_command('makemigrations', 'migrations', verbosity=0)
634.                 self.assertEqual(ensure_schema.call_count, 4)  # 'default' and 'other'
635. 
636.                 # With a router that doesn't allow migrating on any database,
637.                 # no consistency checks are made.
638.                 with self.settings(DATABASE_ROUTERS=['migrations.routers.TestRouter']):
639.                     with mock.patch.object(TestRouter, 'allow_migrate', return_value=False) as allow_migrate:
640.                         call_command('makemigrations', 'migrations', verbosity=0)
641.                 allow_migrate.assert_called_with('other', 'migrations', model_name='UnicodeModel')
642.                 self.assertEqual(ensure_schema.call_count, 4)
643. 
644.     def test_failing_migration(self):
645.         # If a migration fails to serialize, it shouldn't generate an empty file. #21280
646.         apps.register_model('migrations', UnserializableModel)
647. 
648.         with self.temporary_migration_module() as migration_dir:
649.             with self.assertRaisesMessage(ValueError, 'Cannot serialize'):
650.                 call_command("makemigrations", "migrations", verbosity=0)
651. 
652.             initial_file = os.path.join(migration_dir, "0001_initial.py")
653.             self.assertFalse(os.path.exists(initial_file))
654. 
655.     def test_makemigrations_conflict_exit(self):
656.         """
657.         Makes sure that makemigrations exits if it detects a conflict.
658.         """
659.         with self.temporary_migration_module(module="migrations.test_migrations_conflict"):
660.             with self.assertRaises(CommandError):
661.                 call_command("makemigrations")
662. 
663.     def test_makemigrations_merge_no_conflict(self):
664.         """
665.         Makes sure that makemigrations exits if in merge mode with no conflicts.
666.         """
667.         out = six.StringIO()
668.         with self.temporary_migration_module(module="migrations.test_migrations"):
669.             call_command("makemigrations", merge=True, stdout=out)
670.         self.assertIn("No conflicts detected to merge.", out.getvalue())
671. 
672.     def test_makemigrations_no_app_sys_exit(self):
673.         """
674.         Makes sure that makemigrations exits if a non-existent app is specified.
675.         """
676.         err = six.StringIO()
677.         with self.assertRaises(SystemExit):
678.             call_command("makemigrations", "this_app_does_not_exist", stderr=err)
679.         self.assertIn("'this_app_does_not_exist' could not be found.", err.getvalue())
680. 
681.     def test_makemigrations_empty_no_app_specified(self):
682.         """
683.         Makes sure that makemigrations exits if no app is specified with 'empty' mode.
684.         """
685.         with self.assertRaises(CommandError):
686.             call_command("makemigrations", empty=True)
687. 
688.     def test_makemigrations_empty_migration(self):
689.         """
690.         Makes sure that makemigrations properly constructs an empty migration.
691.         """
692.         with self.temporary_migration_module() as migration_dir:
693.             call_command("makemigrations", "migrations", empty=True, verbosity=0)
694. 
695.             # Check for existing 0001_initial.py file in migration folder
696.             initial_file = os.path.join(migration_dir, "0001_initial.py")
697.             self.assertTrue(os.path.exists(initial_file))
698. 
699.             with io.open(initial_file, 'r', encoding='utf-8') as fp:
700.                 content = fp.read()
701.                 self.assertIn('# -*- coding: utf-8 -*-', content)
702. 
703.                 # Remove all whitespace to check for empty dependencies and operations
704.                 content = content.replace(' ', '')
705.                 self.assertIn('dependencies=[\n]', content)
706.                 self.assertIn('operations=[\n]', content)
707. 
708.     @override_settings(MIGRATION_MODULES={"migrations": None})
709.     def test_makemigrations_disabled_migrations_for_app(self):
710.         """
711.         makemigrations raises a nice error when migrations are disabled for an
712.         app.
713.         """
714.         msg = (
715.             "Django can't create migrations for app 'migrations' because migrations "
716.             "have been disabled via the MIGRATION_MODULES setting."
717.         )
718.         with self.assertRaisesMessage(ValueError, msg):
719.             call_command("makemigrations", "migrations", empty=True, verbosity=0)
720. 
721.     def test_makemigrations_no_changes_no_apps(self):
722.         """
723.         Makes sure that makemigrations exits when there are no changes and no apps are specified.
724.         """
725.         out = six.StringIO()
726.         call_command("makemigrations", stdout=out)
727.         self.assertIn("No changes detected", out.getvalue())
728. 
729.     def test_makemigrations_no_changes(self):
730.         """
731.         Makes sure that makemigrations exits when there are no changes to an app.
732.         """
733.         out = six.StringIO()
734.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
735.             call_command("makemigrations", "migrations", stdout=out)
736.         self.assertIn("No changes detected in app 'migrations'", out.getvalue())
737. 
738.     def test_makemigrations_no_apps_initial(self):
739.         """
740.         makemigrations should detect initial is needed on empty migration
741.         modules if no app provided.
742.         """
743.         out = six.StringIO()
744.         with self.temporary_migration_module(module="migrations.test_migrations_empty"):
745.             call_command("makemigrations", stdout=out)
746.         self.assertIn("0001_initial.py", out.getvalue())
747. 
748.     def test_makemigrations_migrations_announce(self):
749.         """
750.         Makes sure that makemigrations announces the migration at the default verbosity level.
751.         """
752.         out = six.StringIO()
753.         with self.temporary_migration_module():
754.             call_command("makemigrations", "migrations", stdout=out)
755.         self.assertIn("Migrations for 'migrations'", out.getvalue())
756. 
757.     def test_makemigrations_no_common_ancestor(self):
758.         """
759.         Makes sure that makemigrations fails to merge migrations with no common ancestor.
760.         """
761.         with self.assertRaises(ValueError) as context:
762.             with self.temporary_migration_module(module="migrations.test_migrations_no_ancestor"):
763.                 call_command("makemigrations", "migrations", merge=True)
764.         exception_message = str(context.exception)
765.         self.assertIn("Could not find common ancestor of", exception_message)
766.         self.assertIn("0002_second", exception_message)
767.         self.assertIn("0002_conflicting_second", exception_message)
768. 
769.     def test_makemigrations_interactive_reject(self):
770.         """
771.         Makes sure that makemigrations enters and exits interactive mode properly.
772.         """
773.         # Monkeypatch interactive questioner to auto reject
774.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='N')):
775.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
776.                 call_command("makemigrations", "migrations", name="merge", merge=True, interactive=True, verbosity=0)
777.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
778.                 self.assertFalse(os.path.exists(merge_file))
779. 
780.     def test_makemigrations_interactive_accept(self):
781.         """
782.         Makes sure that makemigrations enters interactive mode and merges properly.
783.         """
784.         # Monkeypatch interactive questioner to auto accept
785.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='y')):
786.             out = six.StringIO()
787.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
788.                 call_command("makemigrations", "migrations", name="merge", merge=True, interactive=True, stdout=out)
789.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
790.                 self.assertTrue(os.path.exists(merge_file))
791.             self.assertIn("Created new merge migration", out.getvalue())
792. 
793.     @mock.patch('django.db.migrations.utils.datetime')
794.     def test_makemigrations_default_merge_name(self, mock_datetime):
795.         mock_datetime.datetime.now.return_value = datetime.datetime(2016, 1, 2, 3, 4)
796.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='y')):
797.             out = six.StringIO()
798.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
799.                 call_command("makemigrations", "migrations", merge=True, interactive=True, stdout=out)
800.                 merge_file = os.path.join(migration_dir, '0003_merge_20160102_0304.py')
801.                 self.assertTrue(os.path.exists(merge_file))
802.             self.assertIn("Created new merge migration", out.getvalue())
803. 
804.     def test_makemigrations_non_interactive_not_null_addition(self):
805.         """
806.         Tests that non-interactive makemigrations fails when a default is missing on a new not-null field.
807.         """
808.         class SillyModel(models.Model):
809.             silly_field = models.BooleanField(default=False)
810.             silly_int = models.IntegerField()
811. 
812.             class Meta:
813.                 app_label = "migrations"
814. 
815.         out = six.StringIO()
816.         with self.assertRaises(SystemExit):
817.             with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
818.                 call_command("makemigrations", "migrations", interactive=False, stdout=out)
819. 
820.     def test_makemigrations_non_interactive_not_null_alteration(self):
821.         """
822.         Tests that non-interactive makemigrations fails when a default is missing on a field changed to not-null.
823.         """
824.         class Author(models.Model):
825.             name = models.CharField(max_length=255)
826.             slug = models.SlugField()
827.             age = models.IntegerField(default=0)
828. 
829.             class Meta:
830.                 app_label = "migrations"
831. 
832.         out = six.StringIO()
833.         with self.temporary_migration_module(module="migrations.test_migrations"):
834.             call_command("makemigrations", "migrations", interactive=False, stdout=out)
835.         self.assertIn("Alter field slug on author", out.getvalue())
836. 
837.     def test_makemigrations_non_interactive_no_model_rename(self):
838.         """
839.         Makes sure that makemigrations adds and removes a possible model rename in non-interactive mode.
840.         """
841.         class RenamedModel(models.Model):
842.             silly_field = models.BooleanField(default=False)
843. 
844.             class Meta:
845.                 app_label = "migrations"
846. 
847.         out = six.StringIO()
848.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
849.             call_command("makemigrations", "migrations", interactive=False, stdout=out)
850.         self.assertIn("Delete model SillyModel", out.getvalue())
851.         self.assertIn("Create model RenamedModel", out.getvalue())
852. 
853.     def test_makemigrations_non_interactive_no_field_rename(self):
854.         """
855.         Makes sure that makemigrations adds and removes a possible field rename in non-interactive mode.
856.         """
857.         class SillyModel(models.Model):
858.             silly_rename = models.BooleanField(default=False)
859. 
860.             class Meta:
861.                 app_label = "migrations"
862. 
863.         out = six.StringIO()
864.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
865.             call_command("makemigrations", "migrations", interactive=False, stdout=out)
866.         self.assertIn("Remove field silly_field from sillymodel", out.getvalue())
867.         self.assertIn("Add field silly_rename to sillymodel", out.getvalue())
868. 
869.     def test_makemigrations_handle_merge(self):
870.         """
871.         Makes sure that makemigrations properly merges the conflicting migrations with --noinput.
872.         """
873.         out = six.StringIO()
874.         with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
875.             call_command("makemigrations", "migrations", name="merge", merge=True, interactive=False, stdout=out)
876.             merge_file = os.path.join(migration_dir, '0003_merge.py')
877.             self.assertTrue(os.path.exists(merge_file))
878.         output = out.getvalue()
879.         self.assertIn("Merging migrations", output)
880.         self.assertIn("Branch 0002_second", output)
881.         self.assertIn("Branch 0002_conflicting_second", output)
882.         self.assertIn("Created new merge migration", output)
883. 
884.     def test_makemigration_merge_dry_run(self):
885.         """
886.         Makes sure that makemigrations respects --dry-run option when fixing
887.         migration conflicts (#24427).
888.         """
889.         out = six.StringIO()
890.         with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
891.             call_command(
892.                 "makemigrations", "migrations", name="merge", dry_run=True,
893.                 merge=True, interactive=False, stdout=out,
894.             )
895.             merge_file = os.path.join(migration_dir, '0003_merge.py')
896.             self.assertFalse(os.path.exists(merge_file))
897.         output = out.getvalue()
898.         self.assertIn("Merging migrations", output)
899.         self.assertIn("Branch 0002_second", output)
900.         self.assertIn("Branch 0002_conflicting_second", output)
901.         self.assertNotIn("Created new merge migration", output)
902. 
903.     def test_makemigration_merge_dry_run_verbosity_3(self):
904.         """
905.         Makes sure that `makemigrations --merge --dry-run` writes the merge
906.         migration file to stdout with `verbosity == 3` (#24427).
907.         """
908.         out = six.StringIO()
909.         with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
910.             call_command(
911.                 "makemigrations", "migrations", name="merge", dry_run=True,
912.                 merge=True, interactive=False, stdout=out, verbosity=3,
913.             )
914.             merge_file = os.path.join(migration_dir, '0003_merge.py')
915.             self.assertFalse(os.path.exists(merge_file))
916.         output = out.getvalue()
917.         self.assertIn("Merging migrations", output)
918.         self.assertIn("Branch 0002_second", output)
919.         self.assertIn("Branch 0002_conflicting_second", output)
920.         self.assertNotIn("Created new merge migration", output)
921. 
922.         # Additional output caused by verbosity 3
923.         # The complete merge migration file that would be written
924.         # '\n#' is to verify no bytestring prefix before #
925.         self.assertIn("\n# -*- coding: utf-8 -*-", output)
926.         self.assertIn("class Migration(migrations.Migration):", output)
927.         self.assertIn("dependencies = [", output)
928.         self.assertIn("('migrations', '0002_second')", output)
929.         self.assertIn("('migrations', '0002_conflicting_second')", output)
930.         self.assertIn("operations = [", output)
931.         self.assertIn("]", output)
932. 
933.     def test_makemigrations_dry_run(self):
934.         """
935.         Ticket #22676 -- `makemigrations --dry-run` should not ask for defaults.
936.         """
937. 
938.         class SillyModel(models.Model):
939.             silly_field = models.BooleanField(default=False)
940.             silly_date = models.DateField()  # Added field without a default
941. 
942.             class Meta:
943.                 app_label = "migrations"
944. 
945.         out = six.StringIO()
946.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
947.             call_command("makemigrations", "migrations", dry_run=True, stdout=out)
948.         # Output the expected changes directly, without asking for defaults
949.         self.assertIn("Add field silly_date to sillymodel", out.getvalue())
950. 
951.     def test_makemigrations_dry_run_verbosity_3(self):
952.         """
953.         Ticket #22675 -- Allow `makemigrations --dry-run` to output the
954.         migrations file to stdout (with verbosity == 3).
955.         """
956. 
957.         class SillyModel(models.Model):
958.             silly_field = models.BooleanField(default=False)
959.             silly_char = models.CharField(default="")
960. 
961.             class Meta:
962.                 app_label = "migrations"
963. 
964.         out = six.StringIO()
965.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
966.             call_command("makemigrations", "migrations", dry_run=True, stdout=out, verbosity=3)
967. 
968.         # Normal --dry-run output
969.         self.assertIn("- Add field silly_char to sillymodel", out.getvalue())
970. 
971.         # Additional output caused by verbosity 3
972.         # The complete migrations file that would be written
973.         self.assertIn("# -*- coding: utf-8 -*-", out.getvalue())
974.         self.assertIn("class Migration(migrations.Migration):", out.getvalue())
975.         self.assertIn("dependencies = [", out.getvalue())
976.         self.assertIn("('migrations', '0001_initial'),", out.getvalue())
977.         self.assertIn("migrations.AddField(", out.getvalue())
978.         self.assertIn("model_name='sillymodel',", out.getvalue())
979.         self.assertIn("name='silly_char',", out.getvalue())
980. 
981.     def test_makemigrations_migrations_modules_path_not_exist(self):
982.         """
983.         Ticket #22682 -- Makemigrations fails when specifying custom location
984.         for migration files (using MIGRATION_MODULES) if the custom path
985.         doesn't already exist.
986.         """
987. 
988.         class SillyModel(models.Model):
989.             silly_field = models.BooleanField(default=False)
990. 
991.             class Meta:
992.                 app_label = "migrations"
993. 
994.         out = six.StringIO()
995.         migration_module = "migrations.test_migrations_path_doesnt_exist.foo.bar"
996.         with self.temporary_migration_module(module=migration_module) as migration_dir:
997.             call_command("makemigrations", "migrations", stdout=out)
998. 
999.             # Migrations file is actually created in the expected path.
1000.             initial_file = os.path.join(migration_dir, "0001_initial.py")


File: tests/migrations/test_commands.py
Line number range: 1001 - 2000
Content:
1001.             self.assertTrue(os.path.exists(initial_file))
1002. 
1003.         # Command output indicates the migration is created.
1004.         self.assertIn(" - Create model SillyModel", out.getvalue())
1005. 
1006.     def test_makemigrations_interactive_by_default(self):
1007.         """
1008.         Makes sure that the user is prompted to merge by default if there are
1009.         conflicts and merge is True. Answer negative to differentiate it from
1010.         behavior when --noinput is specified.
1011.         """
1012.         # Monkeypatch interactive questioner to auto reject
1013.         out = six.StringIO()
1014.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='N')):
1015.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
1016.                 call_command("makemigrations", "migrations", name="merge", merge=True, stdout=out)
1017.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
1018.                 # This will fail if interactive is False by default
1019.                 self.assertFalse(os.path.exists(merge_file))
1020.             self.assertNotIn("Created new merge migration", out.getvalue())
1021. 
1022.     @override_settings(
1023.         INSTALLED_APPS=[
1024.             "migrations",
1025.             "migrations.migrations_test_apps.unspecified_app_with_conflict"])
1026.     def test_makemigrations_unspecified_app_with_conflict_no_merge(self):
1027.         """
1028.         Makes sure that makemigrations does not raise a CommandError when an
1029.         unspecified app has conflicting migrations.
1030.         """
1031.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1032.             call_command("makemigrations", "migrations", merge=False, verbosity=0)
1033. 
1034.     @override_settings(
1035.         INSTALLED_APPS=[
1036.             "migrations.migrations_test_apps.migrated_app",
1037.             "migrations.migrations_test_apps.unspecified_app_with_conflict"])
1038.     def test_makemigrations_unspecified_app_with_conflict_merge(self):
1039.         """
1040.         Makes sure that makemigrations does not create a merge for an
1041.         unspecified app even if it has conflicting migrations.
1042.         """
1043.         # Monkeypatch interactive questioner to auto accept
1044.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='y')):
1045.             out = six.StringIO()
1046.             with self.temporary_migration_module(app_label="migrated_app") as migration_dir:
1047.                 call_command("makemigrations", "migrated_app", name="merge", merge=True, interactive=True, stdout=out)
1048.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
1049.                 self.assertFalse(os.path.exists(merge_file))
1050.             self.assertIn("No conflicts detected to merge.", out.getvalue())
1051. 
1052.     @override_settings(
1053.         INSTALLED_APPS=[
1054.             "migrations.migrations_test_apps.migrated_app",
1055.             "migrations.migrations_test_apps.conflicting_app_with_dependencies"])
1056.     def test_makemigrations_merge_dont_output_dependency_operations(self):
1057.         """
1058.         Makes sure that makemigrations --merge does not output any operations
1059.         from apps that don't belong to a given app.
1060.         """
1061.         # Monkeypatch interactive questioner to auto accept
1062.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='N')):
1063.             out = six.StringIO()
1064.             with mock.patch('django.core.management.color.supports_color', lambda *args: False):
1065.                 call_command(
1066.                     "makemigrations", "conflicting_app_with_dependencies",
1067.                     merge=True, interactive=True, stdout=out
1068.                 )
1069.             val = out.getvalue().lower()
1070.             self.assertIn('merging conflicting_app_with_dependencies\n', val)
1071.             self.assertIn(
1072.                 '  branch 0002_conflicting_second\n'
1073.                 '    - create model something\n',
1074.                 val
1075.             )
1076.             self.assertIn(
1077.                 '  branch 0002_second\n'
1078.                 '    - delete model tribble\n'
1079.                 '    - remove field silly_field from author\n'
1080.                 '    - add field rating to author\n'
1081.                 '    - create model book\n',
1082.                 val
1083.             )
1084. 
1085.     def test_makemigrations_with_custom_name(self):
1086.         """
1087.         Makes sure that makemigrations generate a custom migration.
1088.         """
1089.         with self.temporary_migration_module() as migration_dir:
1090. 
1091.             def cmd(migration_count, migration_name, *args):
1092.                 call_command("makemigrations", "migrations", "--verbosity", "0", "--name", migration_name, *args)
1093.                 migration_file = os.path.join(migration_dir, "%s_%s.py" % (migration_count, migration_name))
1094.                 # Check for existing migration file in migration folder
1095.                 self.assertTrue(os.path.exists(migration_file))
1096.                 with io.open(migration_file, "r", encoding="utf-8") as fp:
1097.                     content = fp.read()
1098.                     self.assertIn("# -*- coding: utf-8 -*-", content)
1099.                     content = content.replace(" ", "")
1100.                 return content
1101. 
1102.             # generate an initial migration
1103.             migration_name_0001 = "my_initial_migration"
1104.             content = cmd("0001", migration_name_0001)
1105.             self.assertIn("dependencies=[\n]", content)
1106. 
1107.             # Python 3 importlib caches os.listdir() on some platforms like
1108.             # Mac OS X (#23850).
1109.             if hasattr(importlib, 'invalidate_caches'):
1110.                 importlib.invalidate_caches()
1111. 
1112.             # generate an empty migration
1113.             migration_name_0002 = "my_custom_migration"
1114.             content = cmd("0002", migration_name_0002, "--empty")
1115.             self.assertIn("dependencies=[\n('migrations','0001_%s'),\n]" % migration_name_0001, content)
1116.             self.assertIn("operations=[\n]", content)
1117. 
1118.     @ignore_warnings(category=RemovedInDjango20Warning)
1119.     def test_makemigrations_exit(self):
1120.         """
1121.         makemigrations --exit should exit with sys.exit(1) when there are no
1122.         changes to an app.
1123.         """
1124.         with self.temporary_migration_module():
1125.             call_command("makemigrations", "--exit", "migrations", verbosity=0)
1126. 
1127.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1128.             with self.assertRaises(SystemExit):
1129.                 call_command("makemigrations", "--exit", "migrations", verbosity=0)
1130. 
1131.     def test_makemigrations_check(self):
1132.         """
1133.         makemigrations --check should exit with a non-zero status when
1134.         there are changes to an app requiring migrations.
1135.         """
1136.         with self.temporary_migration_module():
1137.             with self.assertRaises(SystemExit):
1138.                 call_command("makemigrations", "--check", "migrations", verbosity=0)
1139. 
1140.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1141.             call_command("makemigrations", "--check", "migrations", verbosity=0)
1142. 
1143.     def test_makemigrations_migration_path_output(self):
1144.         """
1145.         makemigrations should print the relative paths to the migrations unless
1146.         they are outside of the current tree, in which case the absolute path
1147.         should be shown.
1148.         """
1149.         out = six.StringIO()
1150.         apps.register_model('migrations', UnicodeModel)
1151.         with self.temporary_migration_module() as migration_dir:
1152.             call_command("makemigrations", "migrations", stdout=out)
1153.             self.assertIn(os.path.join(migration_dir, '0001_initial.py'), out.getvalue())
1154. 
1155.     def test_makemigrations_migration_path_output_valueerror(self):
1156.         """
1157.         makemigrations prints the absolute path if os.path.relpath() raises a
1158.         ValueError when it's impossible to obtain a relative path, e.g. on
1159.         Windows if Django is installed on a different drive than where the
1160.         migration files are created.
1161.         """
1162.         out = six.StringIO()
1163.         with self.temporary_migration_module() as migration_dir:
1164.             with mock.patch('os.path.relpath', side_effect=ValueError):
1165.                 call_command('makemigrations', 'migrations', stdout=out)
1166.         self.assertIn(os.path.join(migration_dir, '0001_initial.py'), out.getvalue())
1167. 
1168.     def test_makemigrations_inconsistent_history(self):
1169.         """
1170.         makemigrations should raise InconsistentMigrationHistory exception if
1171.         there are some migrations applied before their dependencies.
1172.         """
1173.         recorder = MigrationRecorder(connection)
1174.         recorder.record_applied('migrations', '0002_second')
1175.         msg = "Migration migrations.0002_second is applied before its dependency migrations.0001_initial"
1176.         with self.temporary_migration_module(module="migrations.test_migrations"):
1177.             with self.assertRaisesMessage(InconsistentMigrationHistory, msg):
1178.                 call_command("makemigrations")
1179. 
1180.     @mock.patch('django.db.migrations.questioner.input', return_value='1')
1181.     @mock.patch('django.db.migrations.questioner.sys.stdin', mock.MagicMock(encoding=sys.getdefaultencoding()))
1182.     def test_makemigrations_auto_now_add_interactive(self, *args):
1183.         """
1184.         makemigrations prompts the user when adding auto_now_add to an existing
1185.         model.
1186.         """
1187.         class Entry(models.Model):
1188.             title = models.CharField(max_length=255)
1189.             creation_date = models.DateTimeField(auto_now_add=True)
1190. 
1191.             class Meta:
1192.                 app_label = 'migrations'
1193. 
1194.         # Monkeypatch interactive questioner to auto accept
1195.         with mock.patch('django.db.migrations.questioner.sys.stdout', new_callable=six.StringIO) as prompt_stdout:
1196.             out = six.StringIO()
1197.             with self.temporary_migration_module(module='migrations.test_auto_now_add'):
1198.                 call_command('makemigrations', 'migrations', interactive=True, stdout=out)
1199.             output = out.getvalue()
1200.             prompt_output = prompt_stdout.getvalue()
1201.             self.assertIn("You can accept the default 'timezone.now' by pressing 'Enter'", prompt_output)
1202.             self.assertIn("Add field creation_date to entry", output)
1203. 
1204. 
1205. class SquashMigrationsTests(MigrationTestBase):
1206.     """
1207.     Tests running the squashmigrations command.
1208.     """
1209. 
1210.     def test_squashmigrations_squashes(self):
1211.         """
1212.         Tests that squashmigrations squashes migrations.
1213.         """
1214.         with self.temporary_migration_module(module="migrations.test_migrations") as migration_dir:
1215.             call_command("squashmigrations", "migrations", "0002", interactive=False, verbosity=0)
1216. 
1217.             squashed_migration_file = os.path.join(migration_dir, "0001_squashed_0002_second.py")
1218.             self.assertTrue(os.path.exists(squashed_migration_file))
1219. 
1220.     def test_squashmigrations_initial_attribute(self):
1221.         with self.temporary_migration_module(module="migrations.test_migrations") as migration_dir:
1222.             call_command("squashmigrations", "migrations", "0002", interactive=False, verbosity=0)
1223. 
1224.             squashed_migration_file = os.path.join(migration_dir, "0001_squashed_0002_second.py")
1225.             with io.open(squashed_migration_file, "r", encoding="utf-8") as fp:
1226.                 content = fp.read()
1227.                 self.assertIn("initial = True", content)
1228. 
1229.     def test_squashmigrations_optimizes(self):
1230.         """
1231.         Tests that squashmigrations optimizes operations.
1232.         """
1233.         out = six.StringIO()
1234.         with self.temporary_migration_module(module="migrations.test_migrations"):
1235.             call_command("squashmigrations", "migrations", "0002", interactive=False, verbosity=1, stdout=out)
1236.         self.assertIn("Optimized from 8 operations to 3 operations.", out.getvalue())
1237. 
1238.     def test_ticket_23799_squashmigrations_no_optimize(self):
1239.         """
1240.         Makes sure that squashmigrations --no-optimize really doesn't optimize operations.
1241.         """
1242.         out = six.StringIO()
1243.         with self.temporary_migration_module(module="migrations.test_migrations"):
1244.             call_command("squashmigrations", "migrations", "0002",
1245.                          interactive=False, verbosity=1, no_optimize=True, stdout=out)
1246.         self.assertIn("Skipping optimization", out.getvalue())
1247. 
1248.     def test_squashmigrations_valid_start(self):
1249.         """
1250.         squashmigrations accepts a starting migration.
1251.         """
1252.         out = six.StringIO()
1253.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes") as migration_dir:
1254.             call_command("squashmigrations", "migrations", "0002", "0003",
1255.                          interactive=False, verbosity=1, stdout=out)
1256. 
1257.             squashed_migration_file = os.path.join(migration_dir, "0002_second_squashed_0003_third.py")
1258.             with io.open(squashed_migration_file, "r", encoding="utf-8") as fp:
1259.                 content = fp.read()
1260.                 self.assertIn("        ('migrations', '0001_initial')", content)
1261.                 self.assertNotIn("initial = True", content)
1262.         out = out.getvalue()
1263.         self.assertNotIn(" - 0001_initial", out)
1264.         self.assertIn(" - 0002_second", out)
1265.         self.assertIn(" - 0003_third", out)
1266. 
1267.     def test_squashmigrations_invalid_start(self):
1268.         """
1269.         squashmigrations doesn't accept a starting migration after the ending migration.
1270.         """
1271.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1272.             msg = (
1273.                 "The migration 'migrations.0003_third' cannot be found. Maybe "
1274.                 "it comes after the migration 'migrations.0002_second'"
1275.             )
1276.             with self.assertRaisesMessage(CommandError, msg):
1277.                 call_command("squashmigrations", "migrations", "0003", "0002", interactive=False, verbosity=0)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 04:12:24,220 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user requested the full content of the file `tests/migrations/test_commands.py`. This file is provided in its entirety. For the user's purpose of finding test cases for the `makemigrations` command using database routers, the `MakeMigrationsTests` class (starting on line 523) is most relevant, especially the `test_makemigrations_consistency_checks_respect_routers` method (lines 601-643), which directly tests the interaction between `makemigrations` and `DATABASE_ROUTERS`.", relative_path='tests/migrations/test_commands.py', start_line=1, end_line=1277)]
2025-12-23 04:12:24,223 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of tests/migrations/test_commands.py.
2025-12-23 04:12:24,223 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 04:12:24,223 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 04:12:24,224 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 1 existing contexts
2025-12-23 04:12:24,224 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-23 04:12:24,225 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_static.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── registration
|   |   |   ├── tests
|   |   |   |   ├── __init__.py
|   |   |   |   └── utils.py
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── libgeoip.py
|   |   |   |   └── prototypes.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backend
|   |   |   |   └── regex.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   ├── srs.py
|   |   |   |   └── wkt.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── locale
|   |   |   |   ├── ar
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── he
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── id
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── signals.py
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── staticfiles.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   ├── django_1_10.py
|   |   |   |   └── django_1_8_0.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── urls.py
|   |   |   └── utils.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── urlresolvers.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── version.py
|   |   |   ├── postgresql_psycopg2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── version.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── topological_sort.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── deletion.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── datetime.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   ├── license.txt
|   |   └── weakref_backports.py
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── extras
|   |   |   ├── __init__.py
|   |   |   └── widgets.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── models.py
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── eggs.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── glob.py
|   |   ├── html.py
|   |   ├── html_parser.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── lru_cache.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── six.py
|   |   ├── synch.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       └── static.py
├── docs
|   ├── _ext
|   |   ├── cve_role.py
|   |   ├── djangodocs.py
|   |   └── ticket_role.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   ├── roles.txt
|   |   ├── security.txt
|   |   └── team.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   ├── language.txt
|   |   |   └── upgrading.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── python3.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── timeparse.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── blanket.js
|   |   ├── grunt-reporter.js
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_adminsite.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   └── with_integer_username.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_auth_backends_deprecation.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_deprecated_views.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   ├── urls_custom_user_admin.py
    |   └── urls_deprecated.py
    ├── backends
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_creation.py
    |   ├── test_features.py
    |   ├── test_mysql.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   ├── tests_1_10_compatibility.py
    |   ├── tests_1_8_compatibility.py
    |   └── urls
    |       ├── __init__.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       └── warning_in_include.py
    ├── choices
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_models.py
    |   ├── test_order_with_respect_to.py
    |   ├── tests.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── test_context_processor.py
    |   └── tests.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_cast.py
    |   ├── test_datetime.py
    |   └── tests.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   └── test_postgresql_psycopg2.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       └── article_form.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_geoforms.py
    |   ├── test_geoip.py
    |   ├── test_geoip2.py
    |   ├── test_measure.py
    |   ├── test_spatialrefsys.py
    |   ├── test_wkt.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── test_legacy.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_permalink
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_array.py
    |   ├── test_citext.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_json.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── base.txt
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   ├── py2.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   └── urls
    |       ├── __init__.py
    |       ├── http.py
    |       └── https.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_i18n.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   └── testtags.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── test_unicode.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   └── password_change_form.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_discovery_sample
    |   ├── __init__.py
    |   ├── doctests.py
    |   ├── empty.py
    |   ├── pattern_tests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tests_sample.py
    ├── test_discovery_sample2
    |   ├── __init__.py
    |   └── tests.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── tests.py
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_full_import.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── leave_locale_alone_false.py
    |   |       ├── leave_locale_alone_true.py
    |   |       ├── reverse_url.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── locale
    |   |   └── nl
    |   |       └── LC_MESSAGES
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_deprecation.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_glob.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_itercompat.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   └── test_tree.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
    |   ├── __init__.py
    |   ├── invalid_urls.txt
    |   ├── tests.py
    |   └── valid_urls.txt
    ├── version
    |   ├── __init__.py
    |   └── tests.py
    ├── view_tests
    |   ├── __init__.py
    |   ├── app0
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── en
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── app3
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app4
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── es_AR
    |   ├── app5
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── fr
    |   ├── default_urls.py
    |   ├── generic_urls.py
    |   ├── locale
    |   |   ├── de
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_GB
    |   |   |   └── LC_MESSAGES
    |   |   ├── es
    |   |   |   └── LC_MESSAGES
    |   |   ├── fr
    |   |   |   └── LC_MESSAGES
    |   |   ├── nl
    |   |   |   └── LC_MESSAGES
    |   |   └── ru
    |   |       └── LC_MESSAGES
    |   ├── media
    |   |   ├── file.txt
    |   |   └── long-line.txt
    |   ├── models.py
    |   ├── regression_21530_urls.py
    |   ├── templates
    |   |   ├── debug
    |   |   |   └── template_exception.html
    |   |   ├── jsi18n-multi-catalogs.html
    |   |   ├── jsi18n.html
    |   |   ├── old_jsi18n-multi-catalogs.html
    |   |   └── old_jsi18n.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── debugtags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── py3_test_debug.py
    |   |   ├── test_csrf.py
    |   |   ├── test_debug.py
    |   |   ├── test_defaults.py
    |   |   ├── test_i18n.py
    |   |   ├── test_i18n_deprecated.py
    |   |   ├── test_json.py
    |   |   ├── test_specials.py
    |   |   └── test_static.py
    |   ├── urls.py
    |   └── views.py
    └── wsgi
        ├── __init__.py
        ├── tests.py
        ├── urls.py
        └── wsgi.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: makemigrations router.allow_migrate() calls for consistency checks use incorrect (app_label, model) pairs

Description: Description
	
As reported in ticket:27200#comment:14, I makemigrations incorrectly calls allow_migrate() for each app with all the models in the project rather than for each app with the app's models. It broke the router I use because it was passing invalid combinations for shards since not all shards have the same models.
[​​https://github.com/django/django/pull/7530 PR]

Patch information:
diff --git a/django/core/management/commands/makemigrations.py b/django/core/management/commands/makemigrations.py
index 0b39536f5b..e648880ef0 100644
--- a/django/core/management/commands/makemigrations.py
+++ b/django/core/management/commands/makemigrations.py
@@ -105,7 +105,7 @@ class Command(BaseCommand):
                     # At least one model must be migrated to the database.
                     router.allow_migrate(connection.alias, app_label, model_name=model._meta.object_name)
                     for app_label in consistency_check_labels
-                    for model in apps.get_models(app_label)
+                    for model in apps.get_app_config(app_label).get_models()
             )):
                 loader.check_consistent_history(connection)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of tests/migrations/test_multidb.py
Extra Requirements: 
Purpose: I need to find test cases that involve migrations and database routers to identify tests relevant to the bug in `makemigrations`.

Previous refined query 2:
Essential Query: Please provide the full content of tests/migrations/test_commands.py.
Extra Requirements: 
Purpose: I need to find test cases for the `makemigrations` command that use database routers to identify tests relevant to the bug.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/migrations/test_commands.py
Line number range: 1 - 1277
Content:
1. # -*- coding: utf-8 -*-
2. from __future__ import unicode_literals
3. 
4. import datetime
5. import importlib
6. import io
7. import os
8. import sys
9. 
10. from django.apps import apps
11. from django.core.management import CommandError, call_command
12. from django.db import (
13.     ConnectionHandler, DatabaseError, connection, connections, models,
14. )
15. from django.db.migrations.exceptions import (
16.     InconsistentMigrationHistory, MigrationSchemaMissing,
17. )
18. from django.db.migrations.recorder import MigrationRecorder
19. from django.test import ignore_warnings, mock, override_settings
20. from django.utils import six
21. from django.utils.deprecation import RemovedInDjango20Warning
22. from django.utils.encoding import force_text
23. 
24. from .models import UnicodeModel, UnserializableModel
25. from .routers import TestRouter
26. from .test_base import MigrationTestBase
27. 
28. 
29. class MigrateTests(MigrationTestBase):
30.     """
31.     Tests running the migrate command.
32.     """
33.     multi_db = True
34. 
35.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
36.     def test_migrate(self):
37.         """
38.         Tests basic usage of the migrate command.
39.         """
40.         # Make sure no tables are created
41.         self.assertTableNotExists("migrations_author")
42.         self.assertTableNotExists("migrations_tribble")
43.         self.assertTableNotExists("migrations_book")
44.         # Run the migrations to 0001 only
45.         call_command("migrate", "migrations", "0001", verbosity=0)
46.         # Make sure the right tables exist
47.         self.assertTableExists("migrations_author")
48.         self.assertTableExists("migrations_tribble")
49.         self.assertTableNotExists("migrations_book")
50.         # Run migrations all the way
51.         call_command("migrate", verbosity=0)
52.         # Make sure the right tables exist
53.         self.assertTableExists("migrations_author")
54.         self.assertTableNotExists("migrations_tribble")
55.         self.assertTableExists("migrations_book")
56.         # Unmigrate everything
57.         call_command("migrate", "migrations", "zero", verbosity=0)
58.         # Make sure it's all gone
59.         self.assertTableNotExists("migrations_author")
60.         self.assertTableNotExists("migrations_tribble")
61.         self.assertTableNotExists("migrations_book")
62. 
63.     @override_settings(INSTALLED_APPS=[
64.         'django.contrib.auth',
65.         'django.contrib.contenttypes',
66.         'migrations.migrations_test_apps.migrated_app',
67.     ])
68.     def test_migrate_with_system_checks(self):
69.         out = six.StringIO()
70.         call_command('migrate', skip_checks=False, no_color=True, stdout=out)
71.         self.assertIn('Apply all migrations: migrated_app', out.getvalue())
72. 
73.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_initial_false"})
74.     def test_migrate_initial_false(self):
75.         """
76.         `Migration.initial = False` skips fake-initial detection.
77.         """
78.         # Make sure no tables are created
79.         self.assertTableNotExists("migrations_author")
80.         self.assertTableNotExists("migrations_tribble")
81.         # Run the migrations to 0001 only
82.         call_command("migrate", "migrations", "0001", verbosity=0)
83.         # Fake rollback
84.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
85.         # Make sure fake-initial detection does not run
86.         with self.assertRaises(DatabaseError):
87.             call_command("migrate", "migrations", "0001", fake_initial=True, verbosity=0)
88. 
89.         call_command("migrate", "migrations", "0001", fake=True, verbosity=0)
90.         # Real rollback
91.         call_command("migrate", "migrations", "zero", verbosity=0)
92.         # Make sure it's all gone
93.         self.assertTableNotExists("migrations_author")
94.         self.assertTableNotExists("migrations_tribble")
95.         self.assertTableNotExists("migrations_book")
96. 
97.     @override_settings(
98.         MIGRATION_MODULES={"migrations": "migrations.test_migrations"},
99.         DATABASE_ROUTERS=['migrations.routers.TestRouter'],
100.     )
101.     def test_migrate_fake_initial(self):
102.         """
103.         --fake-initial only works if all tables created in the initial
104.         migration of an app exists. Database routers must be obeyed when doing
105.         that check.
106.         """
107.         # Make sure no tables are created
108.         for db in connections:
109.             self.assertTableNotExists("migrations_author", using=db)
110.             self.assertTableNotExists("migrations_tribble", using=db)
111.         # Run the migrations to 0001 only
112.         call_command("migrate", "migrations", "0001", verbosity=0)
113.         call_command("migrate", "migrations", "0001", verbosity=0, database="other")
114.         # Make sure the right tables exist
115.         self.assertTableExists("migrations_author")
116.         self.assertTableNotExists("migrations_tribble")
117.         # Also check the "other" database
118.         self.assertTableNotExists("migrations_author", using="other")
119.         self.assertTableExists("migrations_tribble", using="other")
120. 
121.         # Fake a roll-back
122.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
123.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0, database="other")
124.         # Make sure the tables still exist
125.         self.assertTableExists("migrations_author")
126.         self.assertTableExists("migrations_tribble", using="other")
127.         # Try to run initial migration
128.         with self.assertRaises(DatabaseError):
129.             call_command("migrate", "migrations", "0001", verbosity=0)
130.         # Run initial migration with an explicit --fake-initial
131.         out = six.StringIO()
132.         with mock.patch('django.core.management.color.supports_color', lambda *args: False):
133.             call_command("migrate", "migrations", "0001", fake_initial=True, stdout=out, verbosity=1)
134.             call_command("migrate", "migrations", "0001", fake_initial=True, verbosity=0, database="other")
135.         self.assertIn(
136.             "migrations.0001_initial... faked",
137.             out.getvalue().lower()
138.         )
139.         # Run migrations all the way
140.         call_command("migrate", verbosity=0)
141.         call_command("migrate", verbosity=0, database="other")
142.         # Make sure the right tables exist
143.         self.assertTableExists("migrations_author")
144.         self.assertTableNotExists("migrations_tribble")
145.         self.assertTableExists("migrations_book")
146.         self.assertTableNotExists("migrations_author", using="other")
147.         self.assertTableNotExists("migrations_tribble", using="other")
148.         self.assertTableNotExists("migrations_book", using="other")
149.         # Fake a roll-back
150.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
151.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0, database="other")
152.         # Make sure the tables still exist
153.         self.assertTableExists("migrations_author")
154.         self.assertTableNotExists("migrations_tribble")
155.         self.assertTableExists("migrations_book")
156.         # Try to run initial migration
157.         with self.assertRaises(DatabaseError):
158.             call_command("migrate", "migrations", verbosity=0)
159.         # Run initial migration with an explicit --fake-initial
160.         with self.assertRaises(DatabaseError):
161.             # Fails because "migrations_tribble" does not exist but needs to in
162.             # order to make --fake-initial work.
163.             call_command("migrate", "migrations", fake_initial=True, verbosity=0)
164.         # Fake a apply
165.         call_command("migrate", "migrations", fake=True, verbosity=0)
166.         call_command("migrate", "migrations", fake=True, verbosity=0, database="other")
167.         # Unmigrate everything
168.         call_command("migrate", "migrations", "zero", verbosity=0)
169.         call_command("migrate", "migrations", "zero", verbosity=0, database="other")
170.         # Make sure it's all gone
171.         for db in connections:
172.             self.assertTableNotExists("migrations_author", using=db)
173.             self.assertTableNotExists("migrations_tribble", using=db)
174.             self.assertTableNotExists("migrations_book", using=db)
175. 
176.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_fake_split_initial"})
177.     def test_migrate_fake_split_initial(self):
178.         """
179.         Split initial migrations can be faked with --fake-initial.
180.         """
181.         call_command("migrate", "migrations", "0002", verbosity=0)
182.         call_command("migrate", "migrations", "zero", fake=True, verbosity=0)
183.         out = six.StringIO()
184.         with mock.patch('django.core.management.color.supports_color', lambda *args: False):
185.             call_command("migrate", "migrations", "0002", fake_initial=True, stdout=out, verbosity=1)
186.         value = out.getvalue().lower()
187.         self.assertIn("migrations.0001_initial... faked", value)
188.         self.assertIn("migrations.0002_second... faked", value)
189.         # Fake an apply
190.         call_command("migrate", "migrations", fake=True, verbosity=0)
191.         # Unmigrate everything
192.         call_command("migrate", "migrations", "zero", verbosity=0)
193. 
194.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_conflict"})
195.     def test_migrate_conflict_exit(self):
196.         """
197.         Makes sure that migrate exits if it detects a conflict.
198.         """
199.         with self.assertRaisesMessage(CommandError, "Conflicting migrations detected"):
200.             call_command("migrate", "migrations")
201. 
202.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
203.     def test_showmigrations_list(self):
204.         """
205.         Tests --list output of showmigrations command
206.         """
207.         out = six.StringIO()
208.         with mock.patch('django.core.management.color.supports_color', lambda *args: True):
209.             call_command("showmigrations", format='list', stdout=out, verbosity=0, no_color=False)
210.         self.assertEqual(
211.             '\x1b[1mmigrations\n\x1b[0m'
212.             ' [ ] 0001_initial\n'
213.             ' [ ] 0002_second\n',
214.             out.getvalue().lower()
215.         )
216. 
217.         call_command("migrate", "migrations", "0001", verbosity=0)
218. 
219.         out = six.StringIO()
220.         # Giving the explicit app_label tests for selective `show_list` in the command
221.         call_command("showmigrations", "migrations", format='list', stdout=out, verbosity=0, no_color=True)
222.         self.assertEqual(
223.             'migrations\n'
224.             ' [x] 0001_initial\n'
225.             ' [ ] 0002_second\n',
226.             out.getvalue().lower()
227.         )
228.         # Cleanup by unmigrating everything
229.         call_command("migrate", "migrations", "zero", verbosity=0)
230. 
231.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_run_before"})
232.     def test_showmigrations_plan(self):
233.         """
234.         Tests --plan output of showmigrations command
235.         """
236.         out = six.StringIO()
237.         call_command("showmigrations", format='plan', stdout=out)
238.         self.assertEqual(
239.             "[ ]  migrations.0001_initial\n"
240.             "[ ]  migrations.0003_third\n"
241.             "[ ]  migrations.0002_second\n",
242.             out.getvalue().lower()
243.         )
244. 
245.         out = six.StringIO()
246.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
247.         self.assertEqual(
248.             "[ ]  migrations.0001_initial\n"
249.             "[ ]  migrations.0003_third ... (migrations.0001_initial)\n"
250.             "[ ]  migrations.0002_second ... (migrations.0001_initial, migrations.0003_third)\n",
251.             out.getvalue().lower()
252.         )
253.         call_command("migrate", "migrations", "0003", verbosity=0)
254. 
255.         out = six.StringIO()
256.         call_command("showmigrations", format='plan', stdout=out)
257.         self.assertEqual(
258.             "[x]  migrations.0001_initial\n"
259.             "[x]  migrations.0003_third\n"
260.             "[ ]  migrations.0002_second\n",
261.             out.getvalue().lower()
262.         )
263. 
264.         out = six.StringIO()
265.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
266.         self.assertEqual(
267.             "[x]  migrations.0001_initial\n"
268.             "[x]  migrations.0003_third ... (migrations.0001_initial)\n"
269.             "[ ]  migrations.0002_second ... (migrations.0001_initial, migrations.0003_third)\n",
270.             out.getvalue().lower()
271.         )
272. 
273.         # Cleanup by unmigrating everything
274.         call_command("migrate", "migrations", "zero", verbosity=0)
275. 
276.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_empty"})
277.     def test_showmigrations_plan_no_migrations(self):
278.         """
279.         Tests --plan output of showmigrations command without migrations
280.         """
281.         out = six.StringIO()
282.         call_command("showmigrations", format='plan', stdout=out)
283.         self.assertEqual("", out.getvalue().lower())
284. 
285.         out = six.StringIO()
286.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
287.         self.assertEqual("", out.getvalue().lower())
288. 
289.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_squashed_complex"})
290.     def test_showmigrations_plan_squashed(self):
291.         """
292.         Tests --plan output of showmigrations command with squashed migrations.
293.         """
294.         out = six.StringIO()
295.         call_command("showmigrations", format='plan', stdout=out)
296.         self.assertEqual(
297.             "[ ]  migrations.1_auto\n"
298.             "[ ]  migrations.2_auto\n"
299.             "[ ]  migrations.3_squashed_5\n"
300.             "[ ]  migrations.6_auto\n"
301.             "[ ]  migrations.7_auto\n",
302.             out.getvalue().lower()
303.         )
304. 
305.         out = six.StringIO()
306.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
307.         self.assertEqual(
308.             "[ ]  migrations.1_auto\n"
309.             "[ ]  migrations.2_auto ... (migrations.1_auto)\n"
310.             "[ ]  migrations.3_squashed_5 ... (migrations.2_auto)\n"
311.             "[ ]  migrations.6_auto ... (migrations.3_squashed_5)\n"
312.             "[ ]  migrations.7_auto ... (migrations.6_auto)\n",
313.             out.getvalue().lower()
314.         )
315. 
316.         call_command("migrate", "migrations", "3_squashed_5", verbosity=0)
317. 
318.         out = six.StringIO()
319.         call_command("showmigrations", format='plan', stdout=out)
320.         self.assertEqual(
321.             "[x]  migrations.1_auto\n"
322.             "[x]  migrations.2_auto\n"
323.             "[x]  migrations.3_squashed_5\n"
324.             "[ ]  migrations.6_auto\n"
325.             "[ ]  migrations.7_auto\n",
326.             out.getvalue().lower()
327.         )
328. 
329.         out = six.StringIO()
330.         call_command("showmigrations", format='plan', stdout=out, verbosity=2)
331.         self.assertEqual(
332.             "[x]  migrations.1_auto\n"
333.             "[x]  migrations.2_auto ... (migrations.1_auto)\n"
334.             "[x]  migrations.3_squashed_5 ... (migrations.2_auto)\n"
335.             "[ ]  migrations.6_auto ... (migrations.3_squashed_5)\n"
336.             "[ ]  migrations.7_auto ... (migrations.6_auto)\n",
337.             out.getvalue().lower()
338.         )
339. 
340.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
341.     def test_sqlmigrate_forwards(self):
342.         """
343.         Makes sure that sqlmigrate does something.
344.         """
345.         out = six.StringIO()
346.         call_command("sqlmigrate", "migrations", "0001", stdout=out)
347.         output = out.getvalue().lower()
348. 
349.         index_tx_start = output.find(connection.ops.start_transaction_sql().lower())
350.         index_op_desc_author = output.find('-- create model author')
351.         index_create_table = output.find('create table')
352.         index_op_desc_tribble = output.find('-- create model tribble')
353.         index_op_desc_unique_together = output.find('-- alter unique_together')
354.         index_tx_end = output.find(connection.ops.end_transaction_sql().lower())
355. 
356.         self.assertGreater(index_tx_start, -1, "Transaction start not found")
357.         self.assertGreater(
358.             index_op_desc_author, index_tx_start,
359.             "Operation description (author) not found or found before transaction start"
360.         )
361.         self.assertGreater(
362.             index_create_table, index_op_desc_author,
363.             "CREATE TABLE not found or found before operation description (author)"
364.         )
365.         self.assertGreater(
366.             index_op_desc_tribble, index_create_table,
367.             "Operation description (tribble) not found or found before CREATE TABLE (author)"
368.         )
369.         self.assertGreater(
370.             index_op_desc_unique_together, index_op_desc_tribble,
371.             "Operation description (unique_together) not found or found before operation description (tribble)"
372.         )
373.         self.assertGreater(
374.             index_tx_end, index_op_desc_unique_together,
375.             "Transaction end not found or found before operation description (unique_together)"
376.         )
377. 
378.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations"})
379.     def test_sqlmigrate_backwards(self):
380.         """
381.         Makes sure that sqlmigrate does something.
382.         """
383.         # Cannot generate the reverse SQL unless we've applied the migration.
384.         call_command("migrate", "migrations", verbosity=0)
385. 
386.         out = six.StringIO()
387.         call_command("sqlmigrate", "migrations", "0001", stdout=out, backwards=True)
388.         output = out.getvalue().lower()
389. 
390.         index_tx_start = output.find(connection.ops.start_transaction_sql().lower())
391.         index_op_desc_unique_together = output.find('-- alter unique_together')
392.         index_op_desc_tribble = output.find('-- create model tribble')
393.         index_op_desc_author = output.find('-- create model author')
394.         index_drop_table = output.rfind('drop table')
395.         index_tx_end = output.find(connection.ops.end_transaction_sql().lower())
396. 
397.         self.assertGreater(index_tx_start, -1, "Transaction start not found")
398.         self.assertGreater(
399.             index_op_desc_unique_together, index_tx_start,
400.             "Operation description (unique_together) not found or found before transaction start"
401.         )
402.         self.assertGreater(
403.             index_op_desc_tribble, index_op_desc_unique_together,
404.             "Operation description (tribble) not found or found before operation description (unique_together)"
405.         )
406.         self.assertGreater(
407.             index_op_desc_author, index_op_desc_tribble,
408.             "Operation description (author) not found or found before operation description (tribble)"
409.         )
410. 
411.         self.assertGreater(
412.             index_drop_table, index_op_desc_author,
413.             "DROP TABLE not found or found before operation description (author)"
414.         )
415.         self.assertGreater(
416.             index_tx_end, index_op_desc_unique_together,
417.             "Transaction end not found or found before DROP TABLE"
418.         )
419. 
420.         # Cleanup by unmigrating everything
421.         call_command("migrate", "migrations", "zero", verbosity=0)
422. 
423.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_non_atomic"})
424.     def test_sqlmigrate_for_non_atomic_migration(self):
425.         """
426.         Transaction wrappers aren't shown for non-atomic migrations.
427.         """
428.         out = six.StringIO()
429.         call_command("sqlmigrate", "migrations", "0001", stdout=out)
430.         output = out.getvalue().lower()
431.         queries = [q.strip() for q in output.splitlines()]
432.         if connection.ops.start_transaction_sql():
433.             self.assertNotIn(connection.ops.start_transaction_sql().lower(), queries)
434.         self.assertNotIn(connection.ops.end_transaction_sql().lower(), queries)
435. 
436.     @override_settings(
437.         INSTALLED_APPS=[
438.             "migrations.migrations_test_apps.migrated_app",
439.             "migrations.migrations_test_apps.migrated_unapplied_app",
440.             "migrations.migrations_test_apps.unmigrated_app"])
441.     def test_regression_22823_unmigrated_fk_to_migrated_model(self):
442.         """
443.         https://code.djangoproject.com/ticket/22823
444. 
445.         Assuming you have 3 apps, `A`, `B`, and `C`, such that:
446. 
447.         * `A` has migrations
448.         * `B` has a migration we want to apply
449.         * `C` has no migrations, but has an FK to `A`
450. 
451.         When we try to migrate "B", an exception occurs because the
452.         "B" was not included in the ProjectState that is used to detect
453.         soft-applied migrations.
454.         """
455.         call_command("migrate", "migrated_unapplied_app", stdout=six.StringIO())
456. 
457.         # unmigrated_app.SillyModel has a foreign key to 'migrations.Tribble',
458.         # but that model is only defined in a migration, so the global app
459.         # registry never sees it and the reference is left dangling. Remove it
460.         # to avoid problems in subsequent tests.
461.         del apps._pending_operations[('migrations', 'tribble')]
462. 
463.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_squashed"})
464.     def test_migrate_record_replaced(self):
465.         """
466.         Running a single squashed migration should record all of the original
467.         replaced migrations as run.
468.         """
469.         recorder = MigrationRecorder(connection)
470.         out = six.StringIO()
471.         call_command("migrate", "migrations", verbosity=0)
472.         call_command("showmigrations", "migrations", stdout=out, no_color=True)
473.         self.assertEqual(
474.             'migrations\n'
475.             ' [x] 0001_squashed_0002 (2 squashed migrations)\n',
476.             out.getvalue().lower()
477.         )
478.         applied_migrations = recorder.applied_migrations()
479.         self.assertIn(("migrations", "0001_initial"), applied_migrations)
480.         self.assertIn(("migrations", "0002_second"), applied_migrations)
481.         self.assertIn(("migrations", "0001_squashed_0002"), applied_migrations)
482.         # Rollback changes
483.         call_command("migrate", "migrations", "zero", verbosity=0)
484. 
485.     @override_settings(MIGRATION_MODULES={"migrations": "migrations.test_migrations_squashed"})
486.     def test_migrate_record_squashed(self):
487.         """
488.         Running migrate for a squashed migration should record as run
489.         if all of the replaced migrations have been run (#25231).
490.         """
491.         recorder = MigrationRecorder(connection)
492.         recorder.record_applied("migrations", "0001_initial")
493.         recorder.record_applied("migrations", "0002_second")
494.         out = six.StringIO()
495.         call_command("migrate", "migrations", verbosity=0)
496.         call_command("showmigrations", "migrations", stdout=out, no_color=True)
497.         self.assertEqual(
498.             'migrations\n'
499.             ' [x] 0001_squashed_0002 (2 squashed migrations)\n',
500.             out.getvalue().lower()
501.         )
502.         self.assertIn(
503.             ("migrations", "0001_squashed_0002"),
504.             recorder.applied_migrations()
505.         )
506.         # No changes were actually applied so there is nothing to rollback
507. 
508.     @override_settings(MIGRATION_MODULES={'migrations': 'migrations.test_migrations'})
509.     def test_migrate_inconsistent_history(self):
510.         """
511.         Running migrate with some migrations applied before their dependencies
512.         should not be allowed.
513.         """
514.         recorder = MigrationRecorder(connection)
515.         recorder.record_applied("migrations", "0002_second")
516.         msg = "Migration migrations.0002_second is applied before its dependency migrations.0001_initial"
517.         with self.assertRaisesMessage(InconsistentMigrationHistory, msg):
518.             call_command("migrate")
519.         applied_migrations = recorder.applied_migrations()
520.         self.assertNotIn(("migrations", "0001_initial"), applied_migrations)
521. 
522. 
523. class MakeMigrationsTests(MigrationTestBase):
524.     """
525.     Tests running the makemigrations command.
526.     """
527. 
528.     def setUp(self):
529.         super(MakeMigrationsTests, self).setUp()
530.         self._old_models = apps.app_configs['migrations'].models.copy()
531. 
532.     def tearDown(self):
533.         apps.app_configs['migrations'].models = self._old_models
534.         apps.all_models['migrations'] = self._old_models
535.         apps.clear_cache()
536.         super(MakeMigrationsTests, self).tearDown()
537. 
538.     def test_files_content(self):
539.         self.assertTableNotExists("migrations_unicodemodel")
540.         apps.register_model('migrations', UnicodeModel)
541.         with self.temporary_migration_module() as migration_dir:
542.             call_command("makemigrations", "migrations", verbosity=0)
543. 
544.             # Check for empty __init__.py file in migrations folder
545.             init_file = os.path.join(migration_dir, "__init__.py")
546.             self.assertTrue(os.path.exists(init_file))
547. 
548.             with open(init_file, 'r') as fp:
549.                 content = force_text(fp.read())
550.             self.assertEqual(content, '')
551. 
552.             # Check for existing 0001_initial.py file in migration folder
553.             initial_file = os.path.join(migration_dir, "0001_initial.py")
554.             self.assertTrue(os.path.exists(initial_file))
555. 
556.             with io.open(initial_file, 'r', encoding='utf-8') as fp:
557.                 content = fp.read()
558.                 self.assertIn('# -*- coding: utf-8 -*-', content)
559.                 self.assertIn('migrations.CreateModel', content)
560.                 self.assertIn('initial = True', content)
561. 
562.                 if six.PY3:
563.                     self.assertIn('úñí©óðé µóðéø', content)  # Meta.verbose_name
564.                     self.assertIn('úñí©óðé µóðéøß', content)  # Meta.verbose_name_plural
565.                     self.assertIn('ÚÑÍ¢ÓÐÉ', content)  # title.verbose_name
566.                     self.assertIn('“Ðjáñgó”', content)  # title.default
567.                 else:
568.                     # Meta.verbose_name
569.                     self.assertIn('\\xfa\\xf1\\xed\\xa9\\xf3\\xf0\\xe9 \\xb5\\xf3\\xf0\\xe9\\xf8', content)
570.                     # Meta.verbose_name_plural
571.                     self.assertIn('\\xfa\\xf1\\xed\\xa9\\xf3\\xf0\\xe9 \\xb5\\xf3\\xf0\\xe9\\xf8\\xdf', content)
572.                     self.assertIn('\\xda\\xd1\\xcd\\xa2\\xd3\\xd0\\xc9', content)  # title.verbose_name
573.                     self.assertIn('\\u201c\\xd0j\\xe1\\xf1g\\xf3\\u201d', content)  # title.default
574. 
575.     def test_makemigrations_order(self):
576.         """
577.         makemigrations should recognize number-only migrations (0001.py).
578.         """
579.         module = 'migrations.test_migrations_order'
580.         with self.temporary_migration_module(module=module) as migration_dir:
581.             if hasattr(importlib, 'invalidate_caches'):
582.                 # Python 3 importlib caches os.listdir() on some platforms like
583.                 # Mac OS X (#23850).
584.                 importlib.invalidate_caches()
585.             call_command('makemigrations', 'migrations', '--empty', '-n', 'a', '-v', '0')
586.             self.assertTrue(os.path.exists(os.path.join(migration_dir, '0002_a.py')))
587. 
588.     def test_makemigrations_empty_connections(self):
589.         empty_connections = ConnectionHandler({'default': {}})
590.         with mock.patch('django.core.management.commands.makemigrations.connections', new=empty_connections):
591.             # with no apps
592.             out = six.StringIO()
593.             call_command('makemigrations', stdout=out)
594.             self.assertIn('No changes detected', out.getvalue())
595.             # with an app
596.             with self.temporary_migration_module() as migration_dir:
597.                 call_command('makemigrations', 'migrations', verbosity=0)
598.                 init_file = os.path.join(migration_dir, '__init__.py')
599.                 self.assertTrue(os.path.exists(init_file))
600. 
601.     def test_makemigrations_consistency_checks_respect_routers(self):
602.         """
603.         The history consistency checks in makemigrations respect
604.         settings.DATABASE_ROUTERS.
605.         """
606.         def patched_ensure_schema(migration_recorder):
607.             if migration_recorder.connection is connections['other']:
608.                 raise MigrationSchemaMissing('Patched')
609.             else:
610.                 return mock.DEFAULT
611. 
612.         self.assertTableNotExists('migrations_unicodemodel')
613.         apps.register_model('migrations', UnicodeModel)
614.         with mock.patch.object(
615.                 MigrationRecorder, 'ensure_schema',
616.                 autospec=True, side_effect=patched_ensure_schema) as ensure_schema:
617.             with self.temporary_migration_module() as migration_dir:
618.                 call_command("makemigrations", "migrations", verbosity=0)
619.                 initial_file = os.path.join(migration_dir, "0001_initial.py")
620.                 self.assertTrue(os.path.exists(initial_file))
621.                 self.assertEqual(ensure_schema.call_count, 1)  # 'default' is checked
622. 
623.                 # Router says not to migrate 'other' so consistency shouldn't
624.                 # be checked.
625.                 with self.settings(DATABASE_ROUTERS=['migrations.routers.TestRouter']):
626.                     call_command('makemigrations', 'migrations', verbosity=0)
627.                 self.assertEqual(ensure_schema.call_count, 2)  # 'default' again
628. 
629.                 # With a router that doesn't prohibit migrating 'other',
630.                 # consistency is checked.
631.                 with self.settings(DATABASE_ROUTERS=['migrations.routers.EmptyRouter']):
632.                     with self.assertRaisesMessage(MigrationSchemaMissing, 'Patched'):
633.                         call_command('makemigrations', 'migrations', verbosity=0)
634.                 self.assertEqual(ensure_schema.call_count, 4)  # 'default' and 'other'
635. 
636.                 # With a router that doesn't allow migrating on any database,
637.                 # no consistency checks are made.
638.                 with self.settings(DATABASE_ROUTERS=['migrations.routers.TestRouter']):
639.                     with mock.patch.object(TestRouter, 'allow_migrate', return_value=False) as allow_migrate:
640.                         call_command('makemigrations', 'migrations', verbosity=0)
641.                 allow_migrate.assert_called_with('other', 'migrations', model_name='UnicodeModel')
642.                 self.assertEqual(ensure_schema.call_count, 4)
643. 
644.     def test_failing_migration(self):
645.         # If a migration fails to serialize, it shouldn't generate an empty file. #21280
646.         apps.register_model('migrations', UnserializableModel)
647. 
648.         with self.temporary_migration_module() as migration_dir:
649.             with self.assertRaisesMessage(ValueError, 'Cannot serialize'):
650.                 call_command("makemigrations", "migrations", verbosity=0)
651. 
652.             initial_file = os.path.join(migration_dir, "0001_initial.py")
653.             self.assertFalse(os.path.exists(initial_file))
654. 
655.     def test_makemigrations_conflict_exit(self):
656.         """
657.         Makes sure that makemigrations exits if it detects a conflict.
658.         """
659.         with self.temporary_migration_module(module="migrations.test_migrations_conflict"):
660.             with self.assertRaises(CommandError):
661.                 call_command("makemigrations")
662. 
663.     def test_makemigrations_merge_no_conflict(self):
664.         """
665.         Makes sure that makemigrations exits if in merge mode with no conflicts.
666.         """
667.         out = six.StringIO()
668.         with self.temporary_migration_module(module="migrations.test_migrations"):
669.             call_command("makemigrations", merge=True, stdout=out)
670.         self.assertIn("No conflicts detected to merge.", out.getvalue())
671. 
672.     def test_makemigrations_no_app_sys_exit(self):
673.         """
674.         Makes sure that makemigrations exits if a non-existent app is specified.
675.         """
676.         err = six.StringIO()
677.         with self.assertRaises(SystemExit):
678.             call_command("makemigrations", "this_app_does_not_exist", stderr=err)
679.         self.assertIn("'this_app_does_not_exist' could not be found.", err.getvalue())
680. 
681.     def test_makemigrations_empty_no_app_specified(self):
682.         """
683.         Makes sure that makemigrations exits if no app is specified with 'empty' mode.
684.         """
685.         with self.assertRaises(CommandError):
686.             call_command("makemigrations", empty=True)
687. 
688.     def test_makemigrations_empty_migration(self):
689.         """
690.         Makes sure that makemigrations properly constructs an empty migration.
691.         """
692.         with self.temporary_migration_module() as migration_dir:
693.             call_command("makemigrations", "migrations", empty=True, verbosity=0)
694. 
695.             # Check for existing 0001_initial.py file in migration folder
696.             initial_file = os.path.join(migration_dir, "0001_initial.py")
697.             self.assertTrue(os.path.exists(initial_file))
698. 
699.             with io.open(initial_file, 'r', encoding='utf-8') as fp:
700.                 content = fp.read()
701.                 self.assertIn('# -*- coding: utf-8 -*-', content)
702. 
703.                 # Remove all whitespace to check for empty dependencies and operations
704.                 content = content.replace(' ', '')
705.                 self.assertIn('dependencies=[\n]', content)
706.                 self.assertIn('operations=[\n]', content)
707. 
708.     @override_settings(MIGRATION_MODULES={"migrations": None})
709.     def test_makemigrations_disabled_migrations_for_app(self):
710.         """
711.         makemigrations raises a nice error when migrations are disabled for an
712.         app.
713.         """
714.         msg = (
715.             "Django can't create migrations for app 'migrations' because migrations "
716.             "have been disabled via the MIGRATION_MODULES setting."
717.         )
718.         with self.assertRaisesMessage(ValueError, msg):
719.             call_command("makemigrations", "migrations", empty=True, verbosity=0)
720. 
721.     def test_makemigrations_no_changes_no_apps(self):
722.         """
723.         Makes sure that makemigrations exits when there are no changes and no apps are specified.
724.         """
725.         out = six.StringIO()
726.         call_command("makemigrations", stdout=out)
727.         self.assertIn("No changes detected", out.getvalue())
728. 
729.     def test_makemigrations_no_changes(self):
730.         """
731.         Makes sure that makemigrations exits when there are no changes to an app.
732.         """
733.         out = six.StringIO()
734.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
735.             call_command("makemigrations", "migrations", stdout=out)
736.         self.assertIn("No changes detected in app 'migrations'", out.getvalue())
737. 
738.     def test_makemigrations_no_apps_initial(self):
739.         """
740.         makemigrations should detect initial is needed on empty migration
741.         modules if no app provided.
742.         """
743.         out = six.StringIO()
744.         with self.temporary_migration_module(module="migrations.test_migrations_empty"):
745.             call_command("makemigrations", stdout=out)
746.         self.assertIn("0001_initial.py", out.getvalue())
747. 
748.     def test_makemigrations_migrations_announce(self):
749.         """
750.         Makes sure that makemigrations announces the migration at the default verbosity level.
751.         """
752.         out = six.StringIO()
753.         with self.temporary_migration_module():
754.             call_command("makemigrations", "migrations", stdout=out)
755.         self.assertIn("Migrations for 'migrations'", out.getvalue())
756. 
757.     def test_makemigrations_no_common_ancestor(self):
758.         """
759.         Makes sure that makemigrations fails to merge migrations with no common ancestor.
760.         """
761.         with self.assertRaises(ValueError) as context:
762.             with self.temporary_migration_module(module="migrations.test_migrations_no_ancestor"):
763.                 call_command("makemigrations", "migrations", merge=True)
764.         exception_message = str(context.exception)
765.         self.assertIn("Could not find common ancestor of", exception_message)
766.         self.assertIn("0002_second", exception_message)
767.         self.assertIn("0002_conflicting_second", exception_message)
768. 
769.     def test_makemigrations_interactive_reject(self):
770.         """
771.         Makes sure that makemigrations enters and exits interactive mode properly.
772.         """
773.         # Monkeypatch interactive questioner to auto reject
774.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='N')):
775.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
776.                 call_command("makemigrations", "migrations", name="merge", merge=True, interactive=True, verbosity=0)
777.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
778.                 self.assertFalse(os.path.exists(merge_file))
779. 
780.     def test_makemigrations_interactive_accept(self):
781.         """
782.         Makes sure that makemigrations enters interactive mode and merges properly.
783.         """
784.         # Monkeypatch interactive questioner to auto accept
785.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='y')):
786.             out = six.StringIO()
787.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
788.                 call_command("makemigrations", "migrations", name="merge", merge=True, interactive=True, stdout=out)
789.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
790.                 self.assertTrue(os.path.exists(merge_file))
791.             self.assertIn("Created new merge migration", out.getvalue())
792. 
793.     @mock.patch('django.db.migrations.utils.datetime')
794.     def test_makemigrations_default_merge_name(self, mock_datetime):
795.         mock_datetime.datetime.now.return_value = datetime.datetime(2016, 1, 2, 3, 4)
796.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='y')):
797.             out = six.StringIO()
798.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
799.                 call_command("makemigrations", "migrations", merge=True, interactive=True, stdout=out)
800.                 merge_file = os.path.join(migration_dir, '0003_merge_20160102_0304.py')
801.                 self.assertTrue(os.path.exists(merge_file))
802.             self.assertIn("Created new merge migration", out.getvalue())
803. 
804.     def test_makemigrations_non_interactive_not_null_addition(self):
805.         """
806.         Tests that non-interactive makemigrations fails when a default is missing on a new not-null field.
807.         """
808.         class SillyModel(models.Model):
809.             silly_field = models.BooleanField(default=False)
810.             silly_int = models.IntegerField()
811. 
812.             class Meta:
813.                 app_label = "migrations"
814. 
815.         out = six.StringIO()
816.         with self.assertRaises(SystemExit):
817.             with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
818.                 call_command("makemigrations", "migrations", interactive=False, stdout=out)
819. 
820.     def test_makemigrations_non_interactive_not_null_alteration(self):
821.         """
822.         Tests that non-interactive makemigrations fails when a default is missing on a field changed to not-null.
823.         """
824.         class Author(models.Model):
825.             name = models.CharField(max_length=255)
826.             slug = models.SlugField()
827.             age = models.IntegerField(default=0)
828. 
829.             class Meta:
830.                 app_label = "migrations"
831. 
832.         out = six.StringIO()
833.         with self.temporary_migration_module(module="migrations.test_migrations"):
834.             call_command("makemigrations", "migrations", interactive=False, stdout=out)
835.         self.assertIn("Alter field slug on author", out.getvalue())
836. 
837.     def test_makemigrations_non_interactive_no_model_rename(self):
838.         """
839.         Makes sure that makemigrations adds and removes a possible model rename in non-interactive mode.
840.         """
841.         class RenamedModel(models.Model):
842.             silly_field = models.BooleanField(default=False)
843. 
844.             class Meta:
845.                 app_label = "migrations"
846. 
847.         out = six.StringIO()
848.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
849.             call_command("makemigrations", "migrations", interactive=False, stdout=out)
850.         self.assertIn("Delete model SillyModel", out.getvalue())
851.         self.assertIn("Create model RenamedModel", out.getvalue())
852. 
853.     def test_makemigrations_non_interactive_no_field_rename(self):
854.         """
855.         Makes sure that makemigrations adds and removes a possible field rename in non-interactive mode.
856.         """
857.         class SillyModel(models.Model):
858.             silly_rename = models.BooleanField(default=False)
859. 
860.             class Meta:
861.                 app_label = "migrations"
862. 
863.         out = six.StringIO()
864.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
865.             call_command("makemigrations", "migrations", interactive=False, stdout=out)
866.         self.assertIn("Remove field silly_field from sillymodel", out.getvalue())
867.         self.assertIn("Add field silly_rename to sillymodel", out.getvalue())
868. 
869.     def test_makemigrations_handle_merge(self):
870.         """
871.         Makes sure that makemigrations properly merges the conflicting migrations with --noinput.
872.         """
873.         out = six.StringIO()
874.         with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
875.             call_command("makemigrations", "migrations", name="merge", merge=True, interactive=False, stdout=out)
876.             merge_file = os.path.join(migration_dir, '0003_merge.py')
877.             self.assertTrue(os.path.exists(merge_file))
878.         output = out.getvalue()
879.         self.assertIn("Merging migrations", output)
880.         self.assertIn("Branch 0002_second", output)
881.         self.assertIn("Branch 0002_conflicting_second", output)
882.         self.assertIn("Created new merge migration", output)
883. 
884.     def test_makemigration_merge_dry_run(self):
885.         """
886.         Makes sure that makemigrations respects --dry-run option when fixing
887.         migration conflicts (#24427).
888.         """
889.         out = six.StringIO()
890.         with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
891.             call_command(
892.                 "makemigrations", "migrations", name="merge", dry_run=True,
893.                 merge=True, interactive=False, stdout=out,
894.             )
895.             merge_file = os.path.join(migration_dir, '0003_merge.py')
896.             self.assertFalse(os.path.exists(merge_file))
897.         output = out.getvalue()
898.         self.assertIn("Merging migrations", output)
899.         self.assertIn("Branch 0002_second", output)
900.         self.assertIn("Branch 0002_conflicting_second", output)
901.         self.assertNotIn("Created new merge migration", output)
902. 
903.     def test_makemigration_merge_dry_run_verbosity_3(self):
904.         """
905.         Makes sure that `makemigrations --merge --dry-run` writes the merge
906.         migration file to stdout with `verbosity == 3` (#24427).
907.         """
908.         out = six.StringIO()
909.         with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
910.             call_command(
911.                 "makemigrations", "migrations", name="merge", dry_run=True,
912.                 merge=True, interactive=False, stdout=out, verbosity=3,
913.             )
914.             merge_file = os.path.join(migration_dir, '0003_merge.py')
915.             self.assertFalse(os.path.exists(merge_file))
916.         output = out.getvalue()
917.         self.assertIn("Merging migrations", output)
918.         self.assertIn("Branch 0002_second", output)
919.         self.assertIn("Branch 0002_conflicting_second", output)
920.         self.assertNotIn("Created new merge migration", output)
921. 
922.         # Additional output caused by verbosity 3
923.         # The complete merge migration file that would be written
924.         # '\n#' is to verify no bytestring prefix before #
925.         self.assertIn("\n# -*- coding: utf-8 -*-", output)
926.         self.assertIn("class Migration(migrations.Migration):", output)
927.         self.assertIn("dependencies = [", output)
928.         self.assertIn("('migrations', '0002_second')", output)
929.         self.assertIn("('migrations', '0002_conflicting_second')", output)
930.         self.assertIn("operations = [", output)
931.         self.assertIn("]", output)
932. 
933.     def test_makemigrations_dry_run(self):
934.         """
935.         Ticket #22676 -- `makemigrations --dry-run` should not ask for defaults.
936.         """
937. 
938.         class SillyModel(models.Model):
939.             silly_field = models.BooleanField(default=False)
940.             silly_date = models.DateField()  # Added field without a default
941. 
942.             class Meta:
943.                 app_label = "migrations"
944. 
945.         out = six.StringIO()
946.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
947.             call_command("makemigrations", "migrations", dry_run=True, stdout=out)
948.         # Output the expected changes directly, without asking for defaults
949.         self.assertIn("Add field silly_date to sillymodel", out.getvalue())
950. 
951.     def test_makemigrations_dry_run_verbosity_3(self):
952.         """
953.         Ticket #22675 -- Allow `makemigrations --dry-run` to output the
954.         migrations file to stdout (with verbosity == 3).
955.         """
956. 
957.         class SillyModel(models.Model):
958.             silly_field = models.BooleanField(default=False)
959.             silly_char = models.CharField(default="")
960. 
961.             class Meta:
962.                 app_label = "migrations"
963. 
964.         out = six.StringIO()
965.         with self.temporary_migration_module(module="migrations.test_migrations_no_default"):
966.             call_command("makemigrations", "migrations", dry_run=True, stdout=out, verbosity=3)
967. 
968.         # Normal --dry-run output
969.         self.assertIn("- Add field silly_char to sillymodel", out.getvalue())
970. 
971.         # Additional output caused by verbosity 3
972.         # The complete migrations file that would be written
973.         self.assertIn("# -*- coding: utf-8 -*-", out.getvalue())
974.         self.assertIn("class Migration(migrations.Migration):", out.getvalue())
975.         self.assertIn("dependencies = [", out.getvalue())
976.         self.assertIn("('migrations', '0001_initial'),", out.getvalue())
977.         self.assertIn("migrations.AddField(", out.getvalue())
978.         self.assertIn("model_name='sillymodel',", out.getvalue())
979.         self.assertIn("name='silly_char',", out.getvalue())
980. 
981.     def test_makemigrations_migrations_modules_path_not_exist(self):
982.         """
983.         Ticket #22682 -- Makemigrations fails when specifying custom location
984.         for migration files (using MIGRATION_MODULES) if the custom path
985.         doesn't already exist.
986.         """
987. 
988.         class SillyModel(models.Model):
989.             silly_field = models.BooleanField(default=False)
990. 
991.             class Meta:
992.                 app_label = "migrations"
993. 
994.         out = six.StringIO()
995.         migration_module = "migrations.test_migrations_path_doesnt_exist.foo.bar"
996.         with self.temporary_migration_module(module=migration_module) as migration_dir:
997.             call_command("makemigrations", "migrations", stdout=out)
998. 
999.             # Migrations file is actually created in the expected path.
1000.             initial_file = os.path.join(migration_dir, "0001_initial.py")
1001.             self.assertTrue(os.path.exists(initial_file))
1002. 
1003.         # Command output indicates the migration is created.
1004.         self.assertIn(" - Create model SillyModel", out.getvalue())
1005. 
1006.     def test_makemigrations_interactive_by_default(self):
1007.         """
1008.         Makes sure that the user is prompted to merge by default if there are
1009.         conflicts and merge is True. Answer negative to differentiate it from
1010.         behavior when --noinput is specified.
1011.         """
1012.         # Monkeypatch interactive questioner to auto reject
1013.         out = six.StringIO()
1014.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='N')):
1015.             with self.temporary_migration_module(module="migrations.test_migrations_conflict") as migration_dir:
1016.                 call_command("makemigrations", "migrations", name="merge", merge=True, stdout=out)
1017.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
1018.                 # This will fail if interactive is False by default
1019.                 self.assertFalse(os.path.exists(merge_file))
1020.             self.assertNotIn("Created new merge migration", out.getvalue())
1021. 
1022.     @override_settings(
1023.         INSTALLED_APPS=[
1024.             "migrations",
1025.             "migrations.migrations_test_apps.unspecified_app_with_conflict"])
1026.     def test_makemigrations_unspecified_app_with_conflict_no_merge(self):
1027.         """
1028.         Makes sure that makemigrations does not raise a CommandError when an
1029.         unspecified app has conflicting migrations.
1030.         """
1031.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1032.             call_command("makemigrations", "migrations", merge=False, verbosity=0)
1033. 
1034.     @override_settings(
1035.         INSTALLED_APPS=[
1036.             "migrations.migrations_test_apps.migrated_app",
1037.             "migrations.migrations_test_apps.unspecified_app_with_conflict"])
1038.     def test_makemigrations_unspecified_app_with_conflict_merge(self):
1039.         """
1040.         Makes sure that makemigrations does not create a merge for an
1041.         unspecified app even if it has conflicting migrations.
1042.         """
1043.         # Monkeypatch interactive questioner to auto accept
1044.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='y')):
1045.             out = six.StringIO()
1046.             with self.temporary_migration_module(app_label="migrated_app") as migration_dir:
1047.                 call_command("makemigrations", "migrated_app", name="merge", merge=True, interactive=True, stdout=out)
1048.                 merge_file = os.path.join(migration_dir, '0003_merge.py')
1049.                 self.assertFalse(os.path.exists(merge_file))
1050.             self.assertIn("No conflicts detected to merge.", out.getvalue())
1051. 
1052.     @override_settings(
1053.         INSTALLED_APPS=[
1054.             "migrations.migrations_test_apps.migrated_app",
1055.             "migrations.migrations_test_apps.conflicting_app_with_dependencies"])
1056.     def test_makemigrations_merge_dont_output_dependency_operations(self):
1057.         """
1058.         Makes sure that makemigrations --merge does not output any operations
1059.         from apps that don't belong to a given app.
1060.         """
1061.         # Monkeypatch interactive questioner to auto accept
1062.         with mock.patch('django.db.migrations.questioner.input', mock.Mock(return_value='N')):
1063.             out = six.StringIO()
1064.             with mock.patch('django.core.management.color.supports_color', lambda *args: False):
1065.                 call_command(
1066.                     "makemigrations", "conflicting_app_with_dependencies",
1067.                     merge=True, interactive=True, stdout=out
1068.                 )
1069.             val = out.getvalue().lower()
1070.             self.assertIn('merging conflicting_app_with_dependencies\n', val)
1071.             self.assertIn(
1072.                 '  branch 0002_conflicting_second\n'
1073.                 '    - create model something\n',
1074.                 val
1075.             )
1076.             self.assertIn(
1077.                 '  branch 0002_second\n'
1078.                 '    - delete model tribble\n'
1079.                 '    - remove field silly_field from author\n'
1080.                 '    - add field rating to author\n'
1081.                 '    - create model book\n',
1082.                 val
1083.             )
1084. 
1085.     def test_makemigrations_with_custom_name(self):
1086.         """
1087.         Makes sure that makemigrations generate a custom migration.
1088.         """
1089.         with self.temporary_migration_module() as migration_dir:
1090. 
1091.             def cmd(migration_count, migration_name, *args):
1092.                 call_command("makemigrations", "migrations", "--verbosity", "0", "--name", migration_name, *args)
1093.                 migration_file = os.path.join(migration_dir, "%s_%s.py" % (migration_count, migration_name))
1094.                 # Check for existing migration file in migration folder
1095.                 self.assertTrue(os.path.exists(migration_file))
1096.                 with io.open(migration_file, "r", encoding="utf-8") as fp:
1097.                     content = fp.read()
1098.                     self.assertIn("# -*- coding: utf-8 -*-", content)
1099.                     content = content.replace(" ", "")
1100.                 return content
1101. 
1102.             # generate an initial migration
1103.             migration_name_0001 = "my_initial_migration"
1104.             content = cmd("0001", migration_name_0001)
1105.             self.assertIn("dependencies=[\n]", content)
1106. 
1107.             # Python 3 importlib caches os.listdir() on some platforms like
1108.             # Mac OS X (#23850).
1109.             if hasattr(importlib, 'invalidate_caches'):
1110.                 importlib.invalidate_caches()
1111. 
1112.             # generate an empty migration
1113.             migration_name_0002 = "my_custom_migration"
1114.             content = cmd("0002", migration_name_0002, "--empty")
1115.             self.assertIn("dependencies=[\n('migrations','0001_%s'),\n]" % migration_name_0001, content)
1116.             self.assertIn("operations=[\n]", content)
1117. 
1118.     @ignore_warnings(category=RemovedInDjango20Warning)
1119.     def test_makemigrations_exit(self):
1120.         """
1121.         makemigrations --exit should exit with sys.exit(1) when there are no
1122.         changes to an app.
1123.         """
1124.         with self.temporary_migration_module():
1125.             call_command("makemigrations", "--exit", "migrations", verbosity=0)
1126. 
1127.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1128.             with self.assertRaises(SystemExit):
1129.                 call_command("makemigrations", "--exit", "migrations", verbosity=0)
1130. 
1131.     def test_makemigrations_check(self):
1132.         """
1133.         makemigrations --check should exit with a non-zero status when
1134.         there are changes to an app requiring migrations.
1135.         """
1136.         with self.temporary_migration_module():
1137.             with self.assertRaises(SystemExit):
1138.                 call_command("makemigrations", "--check", "migrations", verbosity=0)
1139. 
1140.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1141.             call_command("makemigrations", "--check", "migrations", verbosity=0)
1142. 
1143.     def test_makemigrations_migration_path_output(self):
1144.         """
1145.         makemigrations should print the relative paths to the migrations unless
1146.         they are outside of the current tree, in which case the absolute path
1147.         should be shown.
1148.         """
1149.         out = six.StringIO()
1150.         apps.register_model('migrations', UnicodeModel)
1151.         with self.temporary_migration_module() as migration_dir:
1152.             call_command("makemigrations", "migrations", stdout=out)
1153.             self.assertIn(os.path.join(migration_dir, '0001_initial.py'), out.getvalue())
1154. 
1155.     def test_makemigrations_migration_path_output_valueerror(self):
1156.         """
1157.         makemigrations prints the absolute path if os.path.relpath() raises a
1158.         ValueError when it's impossible to obtain a relative path, e.g. on
1159.         Windows if Django is installed on a different drive than where the
1160.         migration files are created.
1161.         """
1162.         out = six.StringIO()
1163.         with self.temporary_migration_module() as migration_dir:
1164.             with mock.patch('os.path.relpath', side_effect=ValueError):
1165.                 call_command('makemigrations', 'migrations', stdout=out)
1166.         self.assertIn(os.path.join(migration_dir, '0001_initial.py'), out.getvalue())
1167. 
1168.     def test_makemigrations_inconsistent_history(self):
1169.         """
1170.         makemigrations should raise InconsistentMigrationHistory exception if
1171.         there are some migrations applied before their dependencies.
1172.         """
1173.         recorder = MigrationRecorder(connection)
1174.         recorder.record_applied('migrations', '0002_second')
1175.         msg = "Migration migrations.0002_second is applied before its dependency migrations.0001_initial"
1176.         with self.temporary_migration_module(module="migrations.test_migrations"):
1177.             with self.assertRaisesMessage(InconsistentMigrationHistory, msg):
1178.                 call_command("makemigrations")
1179. 
1180.     @mock.patch('django.db.migrations.questioner.input', return_value='1')
1181.     @mock.patch('django.db.migrations.questioner.sys.stdin', mock.MagicMock(encoding=sys.getdefaultencoding()))
1182.     def test_makemigrations_auto_now_add_interactive(self, *args):
1183.         """
1184.         makemigrations prompts the user when adding auto_now_add to an existing
1185.         model.
1186.         """
1187.         class Entry(models.Model):
1188.             title = models.CharField(max_length=255)
1189.             creation_date = models.DateTimeField(auto_now_add=True)
1190. 
1191.             class Meta:
1192.                 app_label = 'migrations'
1193. 
1194.         # Monkeypatch interactive questioner to auto accept
1195.         with mock.patch('django.db.migrations.questioner.sys.stdout', new_callable=six.StringIO) as prompt_stdout:
1196.             out = six.StringIO()
1197.             with self.temporary_migration_module(module='migrations.test_auto_now_add'):
1198.                 call_command('makemigrations', 'migrations', interactive=True, stdout=out)
1199.             output = out.getvalue()
1200.             prompt_output = prompt_stdout.getvalue()
1201.             self.assertIn("You can accept the default 'timezone.now' by pressing 'Enter'", prompt_output)
1202.             self.assertIn("Add field creation_date to entry", output)
1203. 
1204. 
1205. class SquashMigrationsTests(MigrationTestBase):
1206.     """
1207.     Tests running the squashmigrations command.
1208.     """
1209. 
1210.     def test_squashmigrations_squashes(self):
1211.         """
1212.         Tests that squashmigrations squashes migrations.
1213.         """
1214.         with self.temporary_migration_module(module="migrations.test_migrations") as migration_dir:
1215.             call_command("squashmigrations", "migrations", "0002", interactive=False, verbosity=0)
1216. 
1217.             squashed_migration_file = os.path.join(migration_dir, "0001_squashed_0002_second.py")
1218.             self.assertTrue(os.path.exists(squashed_migration_file))
1219. 
1220.     def test_squashmigrations_initial_attribute(self):
1221.         with self.temporary_migration_module(module="migrations.test_migrations") as migration_dir:
1222.             call_command("squashmigrations", "migrations", "0002", interactive=False, verbosity=0)
1223. 
1224.             squashed_migration_file = os.path.join(migration_dir, "0001_squashed_0002_second.py")
1225.             with io.open(squashed_migration_file, "r", encoding="utf-8") as fp:
1226.                 content = fp.read()
1227.                 self.assertIn("initial = True", content)
1228. 
1229.     def test_squashmigrations_optimizes(self):
1230.         """
1231.         Tests that squashmigrations optimizes operations.
1232.         """
1233.         out = six.StringIO()
1234.         with self.temporary_migration_module(module="migrations.test_migrations"):
1235.             call_command("squashmigrations", "migrations", "0002", interactive=False, verbosity=1, stdout=out)
1236.         self.assertIn("Optimized from 8 operations to 3 operations.", out.getvalue())
1237. 
1238.     def test_ticket_23799_squashmigrations_no_optimize(self):
1239.         """
1240.         Makes sure that squashmigrations --no-optimize really doesn't optimize operations.
1241.         """
1242.         out = six.StringIO()
1243.         with self.temporary_migration_module(module="migrations.test_migrations"):
1244.             call_command("squashmigrations", "migrations", "0002",
1245.                          interactive=False, verbosity=1, no_optimize=True, stdout=out)
1246.         self.assertIn("Skipping optimization", out.getvalue())
1247. 
1248.     def test_squashmigrations_valid_start(self):
1249.         """
1250.         squashmigrations accepts a starting migration.
1251.         """
1252.         out = six.StringIO()
1253.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes") as migration_dir:
1254.             call_command("squashmigrations", "migrations", "0002", "0003",
1255.                          interactive=False, verbosity=1, stdout=out)
1256. 
1257.             squashed_migration_file = os.path.join(migration_dir, "0002_second_squashed_0003_third.py")
1258.             with io.open(squashed_migration_file, "r", encoding="utf-8") as fp:
1259.                 content = fp.read()
1260.                 self.assertIn("        ('migrations', '0001_initial')", content)
1261.                 self.assertNotIn("initial = True", content)
1262.         out = out.getvalue()
1263.         self.assertNotIn(" - 0001_initial", out)
1264.         self.assertIn(" - 0002_second", out)
1265.         self.assertIn(" - 0003_third", out)
1266. 
1267.     def test_squashmigrations_invalid_start(self):
1268.         """
1269.         squashmigrations doesn't accept a starting migration after the ending migration.
1270.         """
1271.         with self.temporary_migration_module(module="migrations.test_migrations_no_changes"):
1272.             msg = (
1273.                 "The migration 'migrations.0003_third' cannot be found. Maybe "
1274.                 "it comes after the migration 'migrations.0002_second'"
1275.             )
1276.             with self.assertRaisesMessage(CommandError, msg):
1277.                 call_command("squashmigrations", "migrations", "0003", "0002", interactive=False, verbosity=0)


File: tests/migrations/test_multidb.py
Line number range: 1 - 174
Content:
1. import unittest
2. 
3. from django.db import connection, migrations, models
4. from django.db.migrations.state import ProjectState
5. from django.test import override_settings
6. 
7. from .test_operations import OperationTestBase
8. 
9. try:
10.     import sqlparse
11. except ImportError:
12.     sqlparse = None
13. 
14. 
15. class AgnosticRouter(object):
16.     """
17.     A router that doesn't have an opinion regarding migrating.
18.     """
19.     def allow_migrate(self, db, app_label, **hints):
20.         return None
21. 
22. 
23. class MigrateNothingRouter(object):
24.     """
25.     A router that doesn't allow migrating.
26.     """
27.     def allow_migrate(self, db, app_label, **hints):
28.         return False
29. 
30. 
31. class MigrateEverythingRouter(object):
32.     """
33.     A router that always allows migrating.
34.     """
35.     def allow_migrate(self, db, app_label, **hints):
36.         return True
37. 
38. 
39. class MigrateWhenFooRouter(object):
40.     """
41.     A router that allows migrating depending on a hint.
42.     """
43.     def allow_migrate(self, db, app_label, **hints):
44.         return hints.get('foo', False)
45. 
46. 
47. class MultiDBOperationTests(OperationTestBase):
48.     multi_db = True
49. 
50.     def _test_create_model(self, app_label, should_run):
51.         """
52.         Tests that CreateModel honours multi-db settings.
53.         """
54.         operation = migrations.CreateModel(
55.             "Pony",
56.             [("id", models.AutoField(primary_key=True))],
57.         )
58.         # Test the state alteration
59.         project_state = ProjectState()
60.         new_state = project_state.clone()
61.         operation.state_forwards(app_label, new_state)
62.         # Test the database alteration
63.         self.assertTableNotExists("%s_pony" % app_label)
64.         with connection.schema_editor() as editor:
65.             operation.database_forwards(app_label, editor, project_state, new_state)
66.         if should_run:
67.             self.assertTableExists("%s_pony" % app_label)
68.         else:
69.             self.assertTableNotExists("%s_pony" % app_label)
70.         # And test reversal
71.         with connection.schema_editor() as editor:
72.             operation.database_backwards(app_label, editor, new_state, project_state)
73.         self.assertTableNotExists("%s_pony" % app_label)
74. 
75.     @override_settings(DATABASE_ROUTERS=[AgnosticRouter()])
76.     def test_create_model(self):
77.         """
78.         Test when router doesn't have an opinion (i.e. CreateModel should run).
79.         """
80.         self._test_create_model("test_mltdb_crmo", should_run=True)
81. 
82.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
83.     def test_create_model2(self):
84.         """
85.         Test when router returns False (i.e. CreateModel shouldn't run).
86.         """
87.         self._test_create_model("test_mltdb_crmo2", should_run=False)
88. 
89.     @override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()])
90.     def test_create_model3(self):
91.         """
92.         Test when router returns True (i.e. CreateModel should run).
93.         """
94.         self._test_create_model("test_mltdb_crmo3", should_run=True)
95. 
96.     def test_create_model4(self):
97.         """
98.         Test multiple routers.
99.         """
100.         with override_settings(DATABASE_ROUTERS=[AgnosticRouter(), AgnosticRouter()]):
101.             self._test_create_model("test_mltdb_crmo4", should_run=True)
102.         with override_settings(DATABASE_ROUTERS=[MigrateNothingRouter(), MigrateEverythingRouter()]):
103.             self._test_create_model("test_mltdb_crmo4", should_run=False)
104.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter(), MigrateNothingRouter()]):
105.             self._test_create_model("test_mltdb_crmo4", should_run=True)
106. 
107.     def _test_run_sql(self, app_label, should_run, hints=None):
108.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()]):
109.             project_state = self.set_up_test_model(app_label)
110. 
111.         sql = """
112.         INSERT INTO {0}_pony (pink, weight) VALUES (1, 3.55);
113.         INSERT INTO {0}_pony (pink, weight) VALUES (3, 5.0);
114.         """.format(app_label)
115. 
116.         operation = migrations.RunSQL(sql, hints=hints or {})
117.         # Test the state alteration does nothing
118.         new_state = project_state.clone()
119.         operation.state_forwards(app_label, new_state)
120.         self.assertEqual(new_state, project_state)
121.         # Test the database alteration
122.         self.assertEqual(project_state.apps.get_model(app_label, "Pony").objects.count(), 0)
123.         with connection.schema_editor() as editor:
124.             operation.database_forwards(app_label, editor, project_state, new_state)
125.         Pony = project_state.apps.get_model(app_label, "Pony")
126.         if should_run:
127.             self.assertEqual(Pony.objects.count(), 2)
128.         else:
129.             self.assertEqual(Pony.objects.count(), 0)
130. 
131.     @unittest.skipIf(sqlparse is None and connection.features.requires_sqlparse_for_splitting, "Missing sqlparse")
132.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
133.     def test_run_sql(self):
134.         self._test_run_sql("test_mltdb_runsql", should_run=False)
135. 
136.     @unittest.skipIf(sqlparse is None and connection.features.requires_sqlparse_for_splitting, "Missing sqlparse")
137.     @override_settings(DATABASE_ROUTERS=[MigrateWhenFooRouter()])
138.     def test_run_sql2(self):
139.         self._test_run_sql("test_mltdb_runsql2", should_run=False)
140.         self._test_run_sql("test_mltdb_runsql2", should_run=True, hints={'foo': True})
141. 
142.     def _test_run_python(self, app_label, should_run, hints=None):
143.         with override_settings(DATABASE_ROUTERS=[MigrateEverythingRouter()]):
144.             project_state = self.set_up_test_model(app_label)
145. 
146.         # Create the operation
147.         def inner_method(models, schema_editor):
148.             Pony = models.get_model(app_label, "Pony")
149.             Pony.objects.create(pink=1, weight=3.55)
150.             Pony.objects.create(weight=5)
151. 
152.         operation = migrations.RunPython(inner_method, hints=hints or {})
153.         # Test the state alteration does nothing
154.         new_state = project_state.clone()
155.         operation.state_forwards(app_label, new_state)
156.         self.assertEqual(new_state, project_state)
157.         # Test the database alteration
158.         self.assertEqual(project_state.apps.get_model(app_label, "Pony").objects.count(), 0)
159.         with connection.schema_editor() as editor:
160.             operation.database_forwards(app_label, editor, project_state, new_state)
161.         Pony = project_state.apps.get_model(app_label, "Pony")
162.         if should_run:
163.             self.assertEqual(Pony.objects.count(), 2)
164.         else:
165.             self.assertEqual(Pony.objects.count(), 0)
166. 
167.     @override_settings(DATABASE_ROUTERS=[MigrateNothingRouter()])
168.     def test_run_python(self):
169.         self._test_run_python("test_mltdb_runpython", should_run=False)
170. 
171.     @override_settings(DATABASE_ROUTERS=[MigrateWhenFooRouter()])
172.     def test_run_python2(self):
173.         self._test_run_python("test_mltdb_runpython2", should_run=False)
174.         self._test_run_python("test_mltdb_runpython2", should_run=True, hints={'foo': True})

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 04:13:41,517 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases that demonstrate a bug in `makemigrations` related to how `router.allow_migrate()` is called. The bug involves incorrect `(app_label, model)` pairs being passed to the router during consistency checks, which typically occurs in a multi-app, multi-database setup. The provided context from `tests/migrations/test_commands.py` has a relevant test (`test_makemigrations_consistency_checks_respect_routers`), but it only uses a single app and cannot expose the cross-app issue. The context from `tests/migrations/test_multidb.py` tests migration operations, not the `makemigrations` command. To find a more suitable test case, I need to look for tests that involve more complex interactions between the migration framework and database routers, likely in a multi-database testing suite.' query='Please provide the full content of tests/multiple_database/tests.py.' extra_requirements='' purpose='I need to find more complex test cases involving multiple databases and routers to identify a test that is more analogous to the bug scenario, which involves cross-app model routing during `makemigrations`.'
2025-12-23 04:13:41,518 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of tests/multiple_database/tests.py.
2025-12-23 04:13:41,518 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 04:13:41,519 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 04:13:41,520 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 04:13:41,520 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of tests/multiple_database/tests.py.
Purpose: I need to find more complex test cases involving multiple databases and routers to identify a test that is more analogous to the bug scenario, which involves cross-app model routing during `makemigrations`.
2025-12-23 04:13:43,979 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the entire content of `tests/multiple_database/tests.py` to help you find complex test cases related to multiple databases and routers. This will allow you to identify a test that is more analogous to the bug scenario you are investigating.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/multiple_database/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2108, 'candidates_token_count': 75, 'total_token_count': 2272, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2108}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 75}], 'thoughts_token_count': 89, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.05949061711629232, 'model_name': 'gemini-2.5-pro'} id='run--101e83d6-a2af-4208-b348-ba4f17300d02-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/multiple_database/tests.py'}, 'id': '8e324af3-1fb8-4885-9404-fb73c023f33f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2108, 'output_tokens': 75, 'total_tokens': 2272, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 89}}
2025-12-23 04:13:47,059 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have read the remaining content of the file `tests/multiple_database/tests.py` starting from line 501. This should provide you with the complete set of tests in this file, which will hopefully help you find the specific test case you are looking for.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/multiple_database/tests.py", "end_line": 1500.0, "start_line": 501.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10617, 'candidates_token_count': 86, 'total_token_count': 10820, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10617}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 86}], 'thoughts_token_count': 117, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1851233770680982, 'model_name': 'gemini-2.5-pro'} id='run--a7d56b5f-e038-4793-8ddc-8a2f5c6c2d01-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/multiple_database/tests.py', 'end_line': 1500.0, 'start_line': 501.0}, 'id': 'f7712a66-760f-4474-994c-b555e0fe3553', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10617, 'output_tokens': 86, 'total_tokens': 10820, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 117}}
2025-12-23 04:13:54,581 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of `tests/multiple_database/tests.py` for you. I noticed that this file contains several test classes that could be relevant to your problem, especially `RouterTestCase`, `AuthTestCase`, and `AllowMigrateTestCase`, as they deal with database routers and the `makemigrations` command. I will now examine the router definitions in `tests/multiple_database/routers.py` to better understand the test logic and help you pinpoint the most analogous test case.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/multiple_database/routers.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 29206, 'candidates_token_count': 129, 'total_token_count': 29787, 'cached_content_token_count': 1952, 'prompt_tokens_details': [{'modality': 1, 'token_count': 29206}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1952}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 129}], 'thoughts_token_count': 452}, 'finish_reason': 'STOP', 'avg_logprobs': -0.47652408688567405, 'model_name': 'gemini-2.5-pro'} id='run--17a9fe96-6532-4fe3-8bb6-93ab80110d9c-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/multiple_database/routers.py'}, 'id': '5c7459a7-ca48-4a0c-b5d2-c1b04392728e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 29206, 'output_tokens': 129, 'total_tokens': 29787, 'input_token_details': {'cache_read': 1952}, 'output_token_details': {'reasoning': 452}}
2025-12-23 04:14:14,233 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `tests/multiple_database/tests.py` and the associated router definitions in `tests/multiple_database/routers.py`. After reviewing the files, the `AllowMigrateTestCase` in `tests.py` appears to be the most relevant to your problem, as it specifically tests the `allow_migrate` and `allow_migrate_model` methods of a database router. This test case, along with the `AuthRouter` and `TestRouter` implementations, should provide a solid foundation for understanding how to control cross-app model routing during migrations and help you create a test case that mirrors your bug scenario.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30187, 'candidates_token_count': 135, 'total_token_count': 32113, 'cached_content_token_count': 9745, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30187}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9745}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 135}], 'thoughts_token_count': 1791}, 'finish_reason': 'STOP', 'avg_logprobs': -1.5540023238570602, 'model_name': 'gemini-2.5-pro'} id='run--f584f6f5-8c2e-471a-8d5e-89a61faa3c8d-0' usage_metadata={'input_tokens': 30187, 'output_tokens': 135, 'total_tokens': 32113, 'input_token_details': {'cache_read': 9745}, 'output_token_details': {'reasoning': 1791}}
2025-12-23 04:14:14,236 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of tests/multiple_database/tests.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find more complex test cases involving multiple databases and routers to identify a test that is more analogous to the bug scenario, which involves cross-app model routing during `makemigrations`.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/multiple_database/routers.py
Line number range: 1 - 62
Content:
1. from __future__ import unicode_literals
2. 
3. from django.db import DEFAULT_DB_ALIAS
4. 
5. 
6. class TestRouter(object):
7.     """
8.     Vaguely behave like primary/replica, but the databases aren't assumed to
9.     propagate changes.
10.     """
11. 
12.     def db_for_read(self, model, instance=None, **hints):
13.         if instance:
14.             return instance._state.db or 'other'
15.         return 'other'
16. 
17.     def db_for_write(self, model, **hints):
18.         return DEFAULT_DB_ALIAS
19. 
20.     def allow_relation(self, obj1, obj2, **hints):
21.         return obj1._state.db in ('default', 'other') and obj2._state.db in ('default', 'other')
22. 
23.     def allow_migrate(self, db, app_label, **hints):
24.         return True
25. 
26. 
27. class AuthRouter(object):
28.     """
29.     Control all database operations on models in the contrib.auth application.
30.     """
31. 
32.     def db_for_read(self, model, **hints):
33.         "Point all read operations on auth models to 'default'"
34.         if model._meta.app_label == 'auth':
35.             # We use default here to ensure we can tell the difference
36.             # between a read request and a write request for Auth objects
37.             return 'default'
38.         return None
39. 
40.     def db_for_write(self, model, **hints):
41.         "Point all operations on auth models to 'other'"
42.         if model._meta.app_label == 'auth':
43.             return 'other'
44.         return None
45. 
46.     def allow_relation(self, obj1, obj2, **hints):
47.         "Allow any relation if a model in Auth is involved"
48.         if obj1._meta.app_label == 'auth' or obj2._meta.app_label == 'auth':
49.             return True
50.         return None
51. 
52.     def allow_migrate(self, db, app_label, **hints):
53.         "Make sure the auth app only appears on the 'other' db"
54.         if app_label == 'auth':
55.             return db == 'other'
56.         return None
57. 
58. 
59. class WriteRouter(object):
60.     # A router that only expresses an opinion on writes
61.     def db_for_write(self, model, **hints):
62.         return 'writer'


File: tests/multiple_database/tests.py
Line number range: 1 - 500
Content:
1. from __future__ import unicode_literals
2. 
3. import datetime
4. import pickle
5. from operator import attrgetter
6. 
7. from django.contrib.auth.models import User
8. from django.contrib.contenttypes.models import ContentType
9. from django.core import management
10. from django.db import DEFAULT_DB_ALIAS, connections, router, transaction
11. from django.db.models import signals
12. from django.db.utils import ConnectionRouter
13. from django.test import SimpleTestCase, TestCase, override_settings
14. from django.utils.six import StringIO
15. 
16. from .models import Book, Person, Pet, Review, UserProfile
17. from .routers import AuthRouter, TestRouter, WriteRouter
18. 
19. 
20. class QueryTestCase(TestCase):
21.     multi_db = True
22. 
23.     def test_db_selection(self):
24.         "Check that querysets will use the default database by default"
25.         self.assertEqual(Book.objects.db, DEFAULT_DB_ALIAS)
26.         self.assertEqual(Book.objects.all().db, DEFAULT_DB_ALIAS)
27. 
28.         self.assertEqual(Book.objects.using('other').db, 'other')
29. 
30.         self.assertEqual(Book.objects.db_manager('other').db, 'other')
31.         self.assertEqual(Book.objects.db_manager('other').all().db, 'other')
32. 
33.     def test_default_creation(self):
34.         "Objects created on the default database don't leak onto other databases"
35.         # Create a book on the default database using create()
36.         Book.objects.create(title="Pro Django", published=datetime.date(2008, 12, 16))
37. 
38.         # Create a book on the default database using a save
39.         dive = Book()
40.         dive.title = "Dive into Python"
41.         dive.published = datetime.date(2009, 5, 4)
42.         dive.save()
43. 
44.         # Check that book exists on the default database, but not on other database
45.         try:
46.             Book.objects.get(title="Pro Django")
47.             Book.objects.using('default').get(title="Pro Django")
48.         except Book.DoesNotExist:
49.             self.fail('"Pro Django" should exist on default database')
50. 
51.         with self.assertRaises(Book.DoesNotExist):
52.             Book.objects.using('other').get(title="Pro Django")
53. 
54.         try:
55.             Book.objects.get(title="Dive into Python")
56.             Book.objects.using('default').get(title="Dive into Python")
57.         except Book.DoesNotExist:
58.             self.fail('"Dive into Python" should exist on default database')
59. 
60.         with self.assertRaises(Book.DoesNotExist):
61.             Book.objects.using('other').get(title="Dive into Python")
62. 
63.     def test_other_creation(self):
64.         "Objects created on another database don't leak onto the default database"
65.         # Create a book on the second database
66.         Book.objects.using('other').create(title="Pro Django",
67.                                            published=datetime.date(2008, 12, 16))
68. 
69.         # Create a book on the default database using a save
70.         dive = Book()
71.         dive.title = "Dive into Python"
72.         dive.published = datetime.date(2009, 5, 4)
73.         dive.save(using='other')
74. 
75.         # Check that book exists on the default database, but not on other database
76.         try:
77.             Book.objects.using('other').get(title="Pro Django")
78.         except Book.DoesNotExist:
79.             self.fail('"Pro Django" should exist on other database')
80. 
81.         with self.assertRaises(Book.DoesNotExist):
82.             Book.objects.get(title="Pro Django")
83.         with self.assertRaises(Book.DoesNotExist):
84.             Book.objects.using('default').get(title="Pro Django")
85. 
86.         try:
87.             Book.objects.using('other').get(title="Dive into Python")
88.         except Book.DoesNotExist:
89.             self.fail('"Dive into Python" should exist on other database')
90. 
91.         with self.assertRaises(Book.DoesNotExist):
92.             Book.objects.get(title="Dive into Python")
93.         with self.assertRaises(Book.DoesNotExist):
94.             Book.objects.using('default').get(title="Dive into Python")
95. 
96.     def test_refresh(self):
97.         dive = Book(title="Dive into Python", published=datetime.date(2009, 5, 4))
98.         dive.save(using='other')
99.         dive2 = Book.objects.using('other').get()
100.         dive2.title = "Dive into Python (on default)"
101.         dive2.save(using='default')
102.         dive.refresh_from_db()
103.         self.assertEqual(dive.title, "Dive into Python")
104.         dive.refresh_from_db(using='default')
105.         self.assertEqual(dive.title, "Dive into Python (on default)")
106.         self.assertEqual(dive._state.db, "default")
107. 
108.     def test_basic_queries(self):
109.         "Queries are constrained to a single database"
110.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
111. 
112.         dive = Book.objects.using('other').get(published=datetime.date(2009, 5, 4))
113.         self.assertEqual(dive.title, "Dive into Python")
114.         with self.assertRaises(Book.DoesNotExist):
115.             Book.objects.using('default').get(published=datetime.date(2009, 5, 4))
116. 
117.         dive = Book.objects.using('other').get(title__icontains="dive")
118.         self.assertEqual(dive.title, "Dive into Python")
119.         with self.assertRaises(Book.DoesNotExist):
120.             Book.objects.using('default').get(title__icontains="dive")
121. 
122.         dive = Book.objects.using('other').get(title__iexact="dive INTO python")
123.         self.assertEqual(dive.title, "Dive into Python")
124.         with self.assertRaises(Book.DoesNotExist):
125.             Book.objects.using('default').get(title__iexact="dive INTO python")
126. 
127.         dive = Book.objects.using('other').get(published__year=2009)
128.         self.assertEqual(dive.title, "Dive into Python")
129.         self.assertEqual(dive.published, datetime.date(2009, 5, 4))
130.         with self.assertRaises(Book.DoesNotExist):
131.             Book.objects.using('default').get(published__year=2009)
132. 
133.         years = Book.objects.using('other').dates('published', 'year')
134.         self.assertEqual([o.year for o in years], [2009])
135.         years = Book.objects.using('default').dates('published', 'year')
136.         self.assertEqual([o.year for o in years], [])
137. 
138.         months = Book.objects.using('other').dates('published', 'month')
139.         self.assertEqual([o.month for o in months], [5])
140.         months = Book.objects.using('default').dates('published', 'month')
141.         self.assertEqual([o.month for o in months], [])
142. 
143.     def test_m2m_separation(self):
144.         "M2M fields are constrained to a single database"
145.         # Create a book and author on the default database
146.         pro = Book.objects.create(title="Pro Django",
147.                                   published=datetime.date(2008, 12, 16))
148. 
149.         marty = Person.objects.create(name="Marty Alchin")
150. 
151.         # Create a book and author on the other database
152.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
153. 
154.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
155. 
156.         # Save the author relations
157.         pro.authors.set([marty])
158.         dive.authors.set([mark])
159. 
160.         # Inspect the m2m tables directly.
161.         # There should be 1 entry in each database
162.         self.assertEqual(Book.authors.through.objects.using('default').count(), 1)
163.         self.assertEqual(Book.authors.through.objects.using('other').count(), 1)
164. 
165.         # Check that queries work across m2m joins
166.         self.assertEqual(
167.             list(Book.objects.using('default').filter(authors__name='Marty Alchin').values_list('title', flat=True)),
168.             ['Pro Django']
169.         )
170.         self.assertEqual(
171.             list(Book.objects.using('other').filter(authors__name='Marty Alchin').values_list('title', flat=True)),
172.             []
173.         )
174. 
175.         self.assertEqual(
176.             list(Book.objects.using('default').filter(authors__name='Mark Pilgrim').values_list('title', flat=True)),
177.             []
178.         )
179.         self.assertEqual(
180.             list(Book.objects.using('other').filter(authors__name='Mark Pilgrim').values_list('title', flat=True)),
181.             ['Dive into Python']
182.         )
183. 
184.         # Reget the objects to clear caches
185.         dive = Book.objects.using('other').get(title="Dive into Python")
186.         mark = Person.objects.using('other').get(name="Mark Pilgrim")
187. 
188.         # Retrieve related object by descriptor. Related objects should be database-bound
189.         self.assertEqual(list(dive.authors.all().values_list('name', flat=True)), ['Mark Pilgrim'])
190. 
191.         self.assertEqual(list(mark.book_set.all().values_list('title', flat=True)), ['Dive into Python'])
192. 
193.     def test_m2m_forward_operations(self):
194.         "M2M forward manipulations are all constrained to a single DB"
195.         # Create a book and author on the other database
196.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
197.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
198. 
199.         # Save the author relations
200.         dive.authors.set([mark])
201. 
202.         # Add a second author
203.         john = Person.objects.using('other').create(name="John Smith")
204.         self.assertEqual(
205.             list(Book.objects.using('other').filter(authors__name='John Smith').values_list('title', flat=True)),
206.             []
207.         )
208. 
209.         dive.authors.add(john)
210.         self.assertEqual(
211.             list(Book.objects.using('other').filter(authors__name='Mark Pilgrim').values_list('title', flat=True)),
212.             ['Dive into Python']
213.         )
214.         self.assertEqual(
215.             list(Book.objects.using('other').filter(authors__name='John Smith').values_list('title', flat=True)),
216.             ['Dive into Python']
217.         )
218. 
219.         # Remove the second author
220.         dive.authors.remove(john)
221.         self.assertEqual(
222.             list(Book.objects.using('other').filter(authors__name='Mark Pilgrim').values_list('title', flat=True)),
223.             ['Dive into Python']
224.         )
225.         self.assertEqual(
226.             list(Book.objects.using('other').filter(authors__name='John Smith').values_list('title', flat=True)),
227.             []
228.         )
229. 
230.         # Clear all authors
231.         dive.authors.clear()
232.         self.assertEqual(
233.             list(Book.objects.using('other').filter(authors__name='Mark Pilgrim').values_list('title', flat=True)),
234.             []
235.         )
236.         self.assertEqual(
237.             list(Book.objects.using('other').filter(authors__name='John Smith').values_list('title', flat=True)),
238.             []
239.         )
240. 
241.         # Create an author through the m2m interface
242.         dive.authors.create(name='Jane Brown')
243.         self.assertEqual(
244.             list(Book.objects.using('other').filter(authors__name='Mark Pilgrim').values_list('title', flat=True)),
245.             []
246.         )
247.         self.assertEqual(
248.             list(Book.objects.using('other').filter(authors__name='Jane Brown').values_list('title', flat=True)),
249.             ['Dive into Python']
250.         )
251. 
252.     def test_m2m_reverse_operations(self):
253.         "M2M reverse manipulations are all constrained to a single DB"
254.         # Create a book and author on the other database
255.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
256.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
257. 
258.         # Save the author relations
259.         dive.authors.set([mark])
260. 
261.         # Create a second book on the other database
262.         grease = Book.objects.using('other').create(title="Greasemonkey Hacks", published=datetime.date(2005, 11, 1))
263. 
264.         # Add a books to the m2m
265.         mark.book_set.add(grease)
266.         self.assertEqual(
267.             list(Person.objects.using('other').filter(book__title='Dive into Python').values_list('name', flat=True)),
268.             ['Mark Pilgrim']
269.         )
270.         self.assertEqual(
271.             list(
272.                 Person.objects.using('other').filter(book__title='Greasemonkey Hacks').values_list('name', flat=True)
273.             ),
274.             ['Mark Pilgrim']
275.         )
276. 
277.         # Remove a book from the m2m
278.         mark.book_set.remove(grease)
279.         self.assertEqual(
280.             list(Person.objects.using('other').filter(book__title='Dive into Python').values_list('name', flat=True)),
281.             ['Mark Pilgrim']
282.         )
283.         self.assertEqual(
284.             list(
285.                 Person.objects.using('other').filter(book__title='Greasemonkey Hacks').values_list('name', flat=True)
286.             ),
287.             []
288.         )
289. 
290.         # Clear the books associated with mark
291.         mark.book_set.clear()
292.         self.assertEqual(
293.             list(Person.objects.using('other').filter(book__title='Dive into Python').values_list('name', flat=True)),
294.             []
295.         )
296.         self.assertEqual(
297.             list(
298.                 Person.objects.using('other').filter(book__title='Greasemonkey Hacks').values_list('name', flat=True)
299.             ),
300.             []
301.         )
302. 
303.         # Create a book through the m2m interface
304.         mark.book_set.create(title="Dive into HTML5", published=datetime.date(2020, 1, 1))
305.         self.assertEqual(
306.             list(Person.objects.using('other').filter(book__title='Dive into Python').values_list('name', flat=True)),
307.             []
308.         )
309.         self.assertEqual(
310.             list(Person.objects.using('other').filter(book__title='Dive into HTML5').values_list('name', flat=True)),
311.             ['Mark Pilgrim']
312.         )
313. 
314.     def test_m2m_cross_database_protection(self):
315.         "Operations that involve sharing M2M objects across databases raise an error"
316.         # Create a book and author on the default database
317.         pro = Book.objects.create(title="Pro Django", published=datetime.date(2008, 12, 16))
318. 
319.         marty = Person.objects.create(name="Marty Alchin")
320. 
321.         # Create a book and author on the other database
322.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
323. 
324.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
325.         # Set a foreign key set with an object from a different database
326.         with self.assertRaises(ValueError):
327.             with transaction.atomic(using='default'):
328.                 marty.edited.set([pro, dive])
329. 
330.         # Add to an m2m with an object from a different database
331.         with self.assertRaises(ValueError):
332.             with transaction.atomic(using='default'):
333.                 marty.book_set.add(dive)
334. 
335.         # Set a m2m with an object from a different database
336.         with self.assertRaises(ValueError):
337.             with transaction.atomic(using='default'):
338.                 marty.book_set.set([pro, dive])
339. 
340.         # Add to a reverse m2m with an object from a different database
341.         with self.assertRaises(ValueError):
342.             with transaction.atomic(using='other'):
343.                 dive.authors.add(marty)
344. 
345.         # Set a reverse m2m with an object from a different database
346.         with self.assertRaises(ValueError):
347.             with transaction.atomic(using='other'):
348.                 dive.authors.set([mark, marty])
349. 
350.     def test_m2m_deletion(self):
351.         "Cascaded deletions of m2m relations issue queries on the right database"
352.         # Create a book and author on the other database
353.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
354.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
355.         dive.authors.set([mark])
356. 
357.         # Check the initial state
358.         self.assertEqual(Person.objects.using('default').count(), 0)
359.         self.assertEqual(Book.objects.using('default').count(), 0)
360.         self.assertEqual(Book.authors.through.objects.using('default').count(), 0)
361. 
362.         self.assertEqual(Person.objects.using('other').count(), 1)
363.         self.assertEqual(Book.objects.using('other').count(), 1)
364.         self.assertEqual(Book.authors.through.objects.using('other').count(), 1)
365. 
366.         # Delete the object on the other database
367.         dive.delete(using='other')
368. 
369.         self.assertEqual(Person.objects.using('default').count(), 0)
370.         self.assertEqual(Book.objects.using('default').count(), 0)
371.         self.assertEqual(Book.authors.through.objects.using('default').count(), 0)
372. 
373.         # The person still exists ...
374.         self.assertEqual(Person.objects.using('other').count(), 1)
375.         # ... but the book has been deleted
376.         self.assertEqual(Book.objects.using('other').count(), 0)
377.         # ... and the relationship object has also been deleted.
378.         self.assertEqual(Book.authors.through.objects.using('other').count(), 0)
379. 
380.         # Now try deletion in the reverse direction. Set up the relation again
381.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
382.         dive.authors.set([mark])
383. 
384.         # Check the initial state
385.         self.assertEqual(Person.objects.using('default').count(), 0)
386.         self.assertEqual(Book.objects.using('default').count(), 0)
387.         self.assertEqual(Book.authors.through.objects.using('default').count(), 0)
388. 
389.         self.assertEqual(Person.objects.using('other').count(), 1)
390.         self.assertEqual(Book.objects.using('other').count(), 1)
391.         self.assertEqual(Book.authors.through.objects.using('other').count(), 1)
392. 
393.         # Delete the object on the other database
394.         mark.delete(using='other')
395. 
396.         self.assertEqual(Person.objects.using('default').count(), 0)
397.         self.assertEqual(Book.objects.using('default').count(), 0)
398.         self.assertEqual(Book.authors.through.objects.using('default').count(), 0)
399. 
400.         # The person has been deleted ...
401.         self.assertEqual(Person.objects.using('other').count(), 0)
402.         # ... but the book still exists
403.         self.assertEqual(Book.objects.using('other').count(), 1)
404.         # ... and the relationship object has been deleted.
405.         self.assertEqual(Book.authors.through.objects.using('other').count(), 0)
406. 
407.     def test_foreign_key_separation(self):
408.         "FK fields are constrained to a single database"
409.         # Create a book and author on the default database
410.         pro = Book.objects.create(title="Pro Django", published=datetime.date(2008, 12, 16))
411. 
412.         george = Person.objects.create(name="George Vilches")
413. 
414.         # Create a book and author on the other database
415.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
416.         chris = Person.objects.using('other').create(name="Chris Mills")
417. 
418.         # Save the author's favorite books
419.         pro.editor = george
420.         pro.save()
421. 
422.         dive.editor = chris
423.         dive.save()
424. 
425.         pro = Book.objects.using('default').get(title="Pro Django")
426.         self.assertEqual(pro.editor.name, "George Vilches")
427. 
428.         dive = Book.objects.using('other').get(title="Dive into Python")
429.         self.assertEqual(dive.editor.name, "Chris Mills")
430. 
431.         # Check that queries work across foreign key joins
432.         self.assertEqual(
433.             list(Person.objects.using('default').filter(edited__title='Pro Django').values_list('name', flat=True)),
434.             ['George Vilches']
435.         )
436.         self.assertEqual(
437.             list(Person.objects.using('other').filter(edited__title='Pro Django').values_list('name', flat=True)),
438.             []
439.         )
440. 
441.         self.assertEqual(
442.             list(
443.                 Person.objects.using('default').filter(edited__title='Dive into Python').values_list('name', flat=True)
444.             ),
445.             []
446.         )
447.         self.assertEqual(
448.             list(
449.                 Person.objects.using('other').filter(edited__title='Dive into Python').values_list('name', flat=True)
450.             ),
451.             ['Chris Mills']
452.         )
453. 
454.         # Reget the objects to clear caches
455.         chris = Person.objects.using('other').get(name="Chris Mills")
456.         dive = Book.objects.using('other').get(title="Dive into Python")
457. 
458.         # Retrieve related object by descriptor. Related objects should be database-bound
459.         self.assertEqual(list(chris.edited.values_list('title', flat=True)), ['Dive into Python'])
460. 
461.     def test_foreign_key_reverse_operations(self):
462.         "FK reverse manipulations are all constrained to a single DB"
463.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
464.         chris = Person.objects.using('other').create(name="Chris Mills")
465. 
466.         # Save the author relations
467.         dive.editor = chris
468.         dive.save()
469. 
470.         # Add a second book edited by chris
471.         html5 = Book.objects.using('other').create(title="Dive into HTML5", published=datetime.date(2010, 3, 15))
472.         self.assertEqual(
473.             list(Person.objects.using('other').filter(edited__title='Dive into HTML5').values_list('name', flat=True)),
474.             []
475.         )
476. 
477.         chris.edited.add(html5)
478.         self.assertEqual(
479.             list(Person.objects.using('other').filter(edited__title='Dive into HTML5').values_list('name', flat=True)),
480.             ['Chris Mills']
481.         )
482.         self.assertEqual(
483.             list(
484.                 Person.objects.using('other').filter(edited__title='Dive into Python').values_list('name', flat=True)
485.             ),
486.             ['Chris Mills']
487.         )
488. 
489.         # Remove the second editor
490.         chris.edited.remove(html5)
491.         self.assertEqual(
492.             list(Person.objects.using('other').filter(edited__title='Dive into HTML5').values_list('name', flat=True)),
493.             []
494.         )
495.         self.assertEqual(
496.             list(
497.                 Person.objects.using('other').filter(edited__title='Dive into Python').values_list('name', flat=True)
498.             ),
499.             ['Chris Mills']
500.         )


File: tests/multiple_database/tests.py
Line number range: 501 - 1500
Content:
501. 
502.         # Clear all edited books
503.         chris.edited.clear()
504.         self.assertEqual(
505.             list(Person.objects.using('other').filter(edited__title='Dive into HTML5').values_list('name', flat=True)),
506.             []
507.         )
508.         self.assertEqual(
509.             list(
510.                 Person.objects.using('other').filter(edited__title='Dive into Python').values_list('name', flat=True)
511.             ),
512.             []
513.         )
514. 
515.         # Create an author through the m2m interface
516.         chris.edited.create(title='Dive into Water', published=datetime.date(2010, 3, 15))
517.         self.assertEqual(
518.             list(Person.objects.using('other').filter(edited__title='Dive into HTML5').values_list('name', flat=True)),
519.             []
520.         )
521.         self.assertEqual(
522.             list(Person.objects.using('other').filter(edited__title='Dive into Water').values_list('name', flat=True)),
523.             ['Chris Mills']
524.         )
525.         self.assertEqual(
526.             list(
527.                 Person.objects.using('other').filter(edited__title='Dive into Python').values_list('name', flat=True)
528.             ),
529.             []
530.         )
531. 
532.     def test_foreign_key_cross_database_protection(self):
533.         "Operations that involve sharing FK objects across databases raise an error"
534.         # Create a book and author on the default database
535.         pro = Book.objects.create(title="Pro Django", published=datetime.date(2008, 12, 16))
536.         marty = Person.objects.create(name="Marty Alchin")
537. 
538.         # Create a book and author on the other database
539.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
540. 
541.         # Set a foreign key with an object from a different database
542.         with self.assertRaises(ValueError):
543.             dive.editor = marty
544. 
545.         # Set a foreign key set with an object from a different database
546.         with self.assertRaises(ValueError):
547.             with transaction.atomic(using='default'):
548.                 marty.edited.set([pro, dive])
549. 
550.         # Add to a foreign key set with an object from a different database
551.         with self.assertRaises(ValueError):
552.             with transaction.atomic(using='default'):
553.                 marty.edited.add(dive)
554. 
555.     def test_foreign_key_deletion(self):
556.         "Cascaded deletions of Foreign Key relations issue queries on the right database"
557.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
558.         Pet.objects.using('other').create(name="Fido", owner=mark)
559. 
560.         # Check the initial state
561.         self.assertEqual(Person.objects.using('default').count(), 0)
562.         self.assertEqual(Pet.objects.using('default').count(), 0)
563. 
564.         self.assertEqual(Person.objects.using('other').count(), 1)
565.         self.assertEqual(Pet.objects.using('other').count(), 1)
566. 
567.         # Delete the person object, which will cascade onto the pet
568.         mark.delete(using='other')
569. 
570.         self.assertEqual(Person.objects.using('default').count(), 0)
571.         self.assertEqual(Pet.objects.using('default').count(), 0)
572. 
573.         # Both the pet and the person have been deleted from the right database
574.         self.assertEqual(Person.objects.using('other').count(), 0)
575.         self.assertEqual(Pet.objects.using('other').count(), 0)
576. 
577.     def test_foreign_key_validation(self):
578.         "ForeignKey.validate() uses the correct database"
579.         mickey = Person.objects.using('other').create(name="Mickey")
580.         pluto = Pet.objects.using('other').create(name="Pluto", owner=mickey)
581.         self.assertIsNone(pluto.full_clean())
582. 
583.     # Any router that accesses `model` in db_for_read() works here.
584.     @override_settings(DATABASE_ROUTERS=[AuthRouter()])
585.     def test_foreign_key_validation_with_router(self):
586.         """
587.         ForeignKey.validate() passes `model` to db_for_read() even if
588.         model_instance=None.
589.         """
590.         mickey = Person.objects.create(name="Mickey")
591.         owner_field = Pet._meta.get_field('owner')
592.         self.assertEqual(owner_field.clean(mickey.pk, None), mickey.pk)
593. 
594.     def test_o2o_separation(self):
595.         "OneToOne fields are constrained to a single database"
596.         # Create a user and profile on the default database
597.         alice = User.objects.db_manager('default').create_user('alice', 'alice@example.com')
598.         alice_profile = UserProfile.objects.using('default').create(user=alice, flavor='chocolate')
599. 
600.         # Create a user and profile on the other database
601.         bob = User.objects.db_manager('other').create_user('bob', 'bob@example.com')
602.         bob_profile = UserProfile.objects.using('other').create(user=bob, flavor='crunchy frog')
603. 
604.         # Retrieve related objects; queries should be database constrained
605.         alice = User.objects.using('default').get(username="alice")
606.         self.assertEqual(alice.userprofile.flavor, "chocolate")
607. 
608.         bob = User.objects.using('other').get(username="bob")
609.         self.assertEqual(bob.userprofile.flavor, "crunchy frog")
610. 
611.         # Check that queries work across joins
612.         self.assertEqual(
613.             list(
614.                 User.objects.using('default')
615.                 .filter(userprofile__flavor='chocolate').values_list('username', flat=True)
616.             ),
617.             ['alice']
618.         )
619.         self.assertEqual(
620.             list(
621.                 User.objects.using('other')
622.                 .filter(userprofile__flavor='chocolate').values_list('username', flat=True)
623.             ),
624.             []
625.         )
626. 
627.         self.assertEqual(
628.             list(
629.                 User.objects.using('default')
630.                 .filter(userprofile__flavor='crunchy frog').values_list('username', flat=True)
631.             ),
632.             []
633.         )
634.         self.assertEqual(
635.             list(
636.                 User.objects.using('other')
637.                 .filter(userprofile__flavor='crunchy frog').values_list('username', flat=True)
638.             ),
639.             ['bob']
640.         )
641. 
642.         # Reget the objects to clear caches
643.         alice_profile = UserProfile.objects.using('default').get(flavor='chocolate')
644.         bob_profile = UserProfile.objects.using('other').get(flavor='crunchy frog')
645. 
646.         # Retrieve related object by descriptor. Related objects should be database-bound
647.         self.assertEqual(alice_profile.user.username, 'alice')
648.         self.assertEqual(bob_profile.user.username, 'bob')
649. 
650.     def test_o2o_cross_database_protection(self):
651.         "Operations that involve sharing FK objects across databases raise an error"
652.         # Create a user and profile on the default database
653.         alice = User.objects.db_manager('default').create_user('alice', 'alice@example.com')
654. 
655.         # Create a user and profile on the other database
656.         bob = User.objects.db_manager('other').create_user('bob', 'bob@example.com')
657. 
658.         # Set a one-to-one relation with an object from a different database
659.         alice_profile = UserProfile.objects.using('default').create(user=alice, flavor='chocolate')
660.         with self.assertRaises(ValueError):
661.             bob.userprofile = alice_profile
662. 
663.         # BUT! if you assign a FK object when the base object hasn't
664.         # been saved yet, you implicitly assign the database for the
665.         # base object.
666.         bob_profile = UserProfile.objects.using('other').create(user=bob, flavor='crunchy frog')
667. 
668.         new_bob_profile = UserProfile(flavor="spring surprise")
669. 
670.         # assigning a profile requires an explicit pk as the object isn't saved
671.         charlie = User(pk=51, username='charlie', email='charlie@example.com')
672.         charlie.set_unusable_password()
673. 
674.         # initially, no db assigned
675.         self.assertIsNone(new_bob_profile._state.db)
676.         self.assertIsNone(charlie._state.db)
677. 
678.         # old object comes from 'other', so the new object is set to use 'other'...
679.         new_bob_profile.user = bob
680.         charlie.userprofile = bob_profile
681.         self.assertEqual(new_bob_profile._state.db, 'other')
682.         self.assertEqual(charlie._state.db, 'other')
683. 
684.         # ... but it isn't saved yet
685.         self.assertEqual(list(User.objects.using('other').values_list('username', flat=True)), ['bob'])
686.         self.assertEqual(list(UserProfile.objects.using('other').values_list('flavor', flat=True)), ['crunchy frog'])
687. 
688.         # When saved (no using required), new objects goes to 'other'
689.         charlie.save()
690.         bob_profile.save()
691.         new_bob_profile.save()
692.         self.assertEqual(list(User.objects.using('default').values_list('username', flat=True)), ['alice'])
693.         self.assertEqual(list(User.objects.using('other').values_list('username', flat=True)), ['bob', 'charlie'])
694.         self.assertEqual(list(UserProfile.objects.using('default').values_list('flavor', flat=True)), ['chocolate'])
695.         self.assertEqual(
696.             list(UserProfile.objects.using('other').values_list('flavor', flat=True)),
697.             ['crunchy frog', 'spring surprise']
698.         )
699. 
700.         # This also works if you assign the O2O relation in the constructor
701.         denise = User.objects.db_manager('other').create_user('denise', 'denise@example.com')
702.         denise_profile = UserProfile(flavor="tofu", user=denise)
703. 
704.         self.assertEqual(denise_profile._state.db, 'other')
705.         # ... but it isn't saved yet
706.         self.assertEqual(list(UserProfile.objects.using('default').values_list('flavor', flat=True)), ['chocolate'])
707.         self.assertEqual(
708.             list(UserProfile.objects.using('other').values_list('flavor', flat=True)),
709.             ['crunchy frog', 'spring surprise']
710.         )
711. 
712.         # When saved, the new profile goes to 'other'
713.         denise_profile.save()
714.         self.assertEqual(list(UserProfile.objects.using('default').values_list('flavor', flat=True)), ['chocolate'])
715.         self.assertEqual(
716.             list(UserProfile.objects.using('other').values_list('flavor', flat=True)),
717.             ['crunchy frog', 'spring surprise', 'tofu']
718.         )
719. 
720.     def test_generic_key_separation(self):
721.         "Generic fields are constrained to a single database"
722.         # Create a book and author on the default database
723.         pro = Book.objects.create(title="Pro Django", published=datetime.date(2008, 12, 16))
724.         review1 = Review.objects.create(source="Python Monthly", content_object=pro)
725. 
726.         # Create a book and author on the other database
727.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
728. 
729.         review2 = Review.objects.using('other').create(source="Python Weekly", content_object=dive)
730. 
731.         review1 = Review.objects.using('default').get(source="Python Monthly")
732.         self.assertEqual(review1.content_object.title, "Pro Django")
733. 
734.         review2 = Review.objects.using('other').get(source="Python Weekly")
735.         self.assertEqual(review2.content_object.title, "Dive into Python")
736. 
737.         # Reget the objects to clear caches
738.         dive = Book.objects.using('other').get(title="Dive into Python")
739. 
740.         # Retrieve related object by descriptor. Related objects should be database-bound
741.         self.assertEqual(list(dive.reviews.all().values_list('source', flat=True)), ['Python Weekly'])
742. 
743.     def test_generic_key_reverse_operations(self):
744.         "Generic reverse manipulations are all constrained to a single DB"
745.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
746.         temp = Book.objects.using('other').create(title="Temp", published=datetime.date(2009, 5, 4))
747.         review1 = Review.objects.using('other').create(source="Python Weekly", content_object=dive)
748.         review2 = Review.objects.using('other').create(source="Python Monthly", content_object=temp)
749. 
750.         self.assertEqual(
751.             list(Review.objects.using('default').filter(object_id=dive.pk).values_list('source', flat=True)),
752.             []
753.         )
754.         self.assertEqual(
755.             list(Review.objects.using('other').filter(object_id=dive.pk).values_list('source', flat=True)),
756.             ['Python Weekly']
757.         )
758. 
759.         # Add a second review
760.         dive.reviews.add(review2)
761.         self.assertEqual(
762.             list(Review.objects.using('default').filter(object_id=dive.pk).values_list('source', flat=True)),
763.             []
764.         )
765.         self.assertEqual(
766.             list(Review.objects.using('other').filter(object_id=dive.pk).values_list('source', flat=True)),
767.             ['Python Monthly', 'Python Weekly']
768.         )
769. 
770.         # Remove the second author
771.         dive.reviews.remove(review1)
772.         self.assertEqual(
773.             list(Review.objects.using('default').filter(object_id=dive.pk).values_list('source', flat=True)),
774.             []
775.         )
776.         self.assertEqual(
777.             list(Review.objects.using('other').filter(object_id=dive.pk).values_list('source', flat=True)),
778.             ['Python Monthly']
779.         )
780. 
781.         # Clear all reviews
782.         dive.reviews.clear()
783.         self.assertEqual(
784.             list(Review.objects.using('default').filter(object_id=dive.pk).values_list('source', flat=True)),
785.             []
786.         )
787.         self.assertEqual(
788.             list(Review.objects.using('other').filter(object_id=dive.pk).values_list('source', flat=True)),
789.             []
790.         )
791. 
792.         # Create an author through the generic interface
793.         dive.reviews.create(source='Python Daily')
794.         self.assertEqual(
795.             list(Review.objects.using('default').filter(object_id=dive.pk).values_list('source', flat=True)),
796.             []
797.         )
798.         self.assertEqual(
799.             list(Review.objects.using('other').filter(object_id=dive.pk).values_list('source', flat=True)),
800.             ['Python Daily']
801.         )
802. 
803.     def test_generic_key_cross_database_protection(self):
804.         "Operations that involve sharing generic key objects across databases raise an error"
805.         # Create a book and author on the default database
806.         pro = Book.objects.create(title="Pro Django", published=datetime.date(2008, 12, 16))
807.         review1 = Review.objects.create(source="Python Monthly", content_object=pro)
808. 
809.         # Create a book and author on the other database
810.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
811. 
812.         Review.objects.using('other').create(source="Python Weekly", content_object=dive)
813. 
814.         # Set a foreign key with an object from a different database
815.         with self.assertRaises(ValueError):
816.             review1.content_object = dive
817. 
818.         # Add to a foreign key set with an object from a different database
819.         with self.assertRaises(ValueError):
820.             with transaction.atomic(using='other'):
821.                 dive.reviews.add(review1)
822. 
823.         # BUT! if you assign a FK object when the base object hasn't
824.         # been saved yet, you implicitly assign the database for the
825.         # base object.
826.         review3 = Review(source="Python Daily")
827.         # initially, no db assigned
828.         self.assertIsNone(review3._state.db)
829. 
830.         # Dive comes from 'other', so review3 is set to use 'other'...
831.         review3.content_object = dive
832.         self.assertEqual(review3._state.db, 'other')
833.         # ... but it isn't saved yet
834.         self.assertEqual(
835.             list(Review.objects.using('default').filter(object_id=pro.pk).values_list('source', flat=True)),
836.             ['Python Monthly']
837.         )
838.         self.assertEqual(
839.             list(Review.objects.using('other').filter(object_id=dive.pk).values_list('source', flat=True)),
840.             ['Python Weekly']
841.         )
842. 
843.         # When saved, John goes to 'other'
844.         review3.save()
845.         self.assertEqual(
846.             list(Review.objects.using('default').filter(object_id=pro.pk).values_list('source', flat=True)),
847.             ['Python Monthly']
848.         )
849.         self.assertEqual(
850.             list(Review.objects.using('other').filter(object_id=dive.pk).values_list('source', flat=True)),
851.             ['Python Daily', 'Python Weekly']
852.         )
853. 
854.     def test_generic_key_deletion(self):
855.         "Cascaded deletions of Generic Key relations issue queries on the right database"
856.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
857.         Review.objects.using('other').create(source="Python Weekly", content_object=dive)
858. 
859.         # Check the initial state
860.         self.assertEqual(Book.objects.using('default').count(), 0)
861.         self.assertEqual(Review.objects.using('default').count(), 0)
862. 
863.         self.assertEqual(Book.objects.using('other').count(), 1)
864.         self.assertEqual(Review.objects.using('other').count(), 1)
865. 
866.         # Delete the Book object, which will cascade onto the pet
867.         dive.delete(using='other')
868. 
869.         self.assertEqual(Book.objects.using('default').count(), 0)
870.         self.assertEqual(Review.objects.using('default').count(), 0)
871. 
872.         # Both the pet and the person have been deleted from the right database
873.         self.assertEqual(Book.objects.using('other').count(), 0)
874.         self.assertEqual(Review.objects.using('other').count(), 0)
875. 
876.     def test_ordering(self):
877.         "get_next_by_XXX commands stick to a single database"
878.         Book.objects.create(title="Pro Django", published=datetime.date(2008, 12, 16))
879.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
880.         learn = Book.objects.using('other').create(title="Learning Python", published=datetime.date(2008, 7, 16))
881. 
882.         self.assertEqual(learn.get_next_by_published().title, "Dive into Python")
883.         self.assertEqual(dive.get_previous_by_published().title, "Learning Python")
884. 
885.     def test_raw(self):
886.         "test the raw() method across databases"
887.         dive = Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
888.         val = Book.objects.db_manager("other").raw('SELECT id FROM multiple_database_book')
889.         self.assertQuerysetEqual(val, [dive.pk], attrgetter("pk"))
890. 
891.         val = Book.objects.raw('SELECT id FROM multiple_database_book').using('other')
892.         self.assertQuerysetEqual(val, [dive.pk], attrgetter("pk"))
893. 
894.     def test_select_related(self):
895.         "Database assignment is retained if an object is retrieved with select_related()"
896.         # Create a book and author on the other database
897.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
898.         Book.objects.using('other').create(
899.             title="Dive into Python",
900.             published=datetime.date(2009, 5, 4),
901.             editor=mark,
902.         )
903. 
904.         # Retrieve the Person using select_related()
905.         book = Book.objects.using('other').select_related('editor').get(title="Dive into Python")
906. 
907.         # The editor instance should have a db state
908.         self.assertEqual(book.editor._state.db, 'other')
909. 
910.     def test_subquery(self):
911.         """Make sure as_sql works with subqueries and primary/replica."""
912.         sub = Person.objects.using('other').filter(name='fff')
913.         qs = Book.objects.filter(editor__in=sub)
914. 
915.         # When you call __str__ on the query object, it doesn't know about using
916.         # so it falls back to the default. If the subquery explicitly uses a
917.         # different database, an error should be raised.
918.         with self.assertRaises(ValueError):
919.             str(qs.query)
920. 
921.         # Evaluating the query shouldn't work, either
922.         with self.assertRaises(ValueError):
923.             for obj in qs:
924.                 pass
925. 
926.     def test_related_manager(self):
927.         "Related managers return managers, not querysets"
928.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
929. 
930.         # extra_arg is removed by the BookManager's implementation of
931.         # create(); but the BookManager's implementation won't get called
932.         # unless edited returns a Manager, not a queryset
933.         mark.book_set.create(title="Dive into Python", published=datetime.date(2009, 5, 4), extra_arg=True)
934.         mark.book_set.get_or_create(title="Dive into Python", published=datetime.date(2009, 5, 4), extra_arg=True)
935.         mark.edited.create(title="Dive into Water", published=datetime.date(2009, 5, 4), extra_arg=True)
936.         mark.edited.get_or_create(title="Dive into Water", published=datetime.date(2009, 5, 4), extra_arg=True)
937. 
938. 
939. class ConnectionRouterTestCase(SimpleTestCase):
940.     @override_settings(DATABASE_ROUTERS=[
941.         'multiple_database.tests.TestRouter',
942.         'multiple_database.tests.WriteRouter'])
943.     def test_router_init_default(self):
944.         connection_router = ConnectionRouter()
945.         self.assertListEqual([r.__class__.__name__ for r in connection_router.routers], ['TestRouter', 'WriteRouter'])
946. 
947.     def test_router_init_arg(self):
948.         connection_router = ConnectionRouter([
949.             'multiple_database.tests.TestRouter',
950.             'multiple_database.tests.WriteRouter'
951.         ])
952.         self.assertListEqual([r.__class__.__name__ for r in connection_router.routers], ['TestRouter', 'WriteRouter'])
953. 
954.         # Init with instances instead of strings
955.         connection_router = ConnectionRouter([TestRouter(), WriteRouter()])
956.         self.assertListEqual([r.__class__.__name__ for r in connection_router.routers], ['TestRouter', 'WriteRouter'])
957. 
958. 
959. # Make the 'other' database appear to be a replica of the 'default'
960. @override_settings(DATABASE_ROUTERS=[TestRouter()])
961. class RouterTestCase(TestCase):
962.     multi_db = True
963. 
964.     def test_db_selection(self):
965.         "Check that querysets obey the router for db suggestions"
966.         self.assertEqual(Book.objects.db, 'other')
967.         self.assertEqual(Book.objects.all().db, 'other')
968. 
969.         self.assertEqual(Book.objects.using('default').db, 'default')
970. 
971.         self.assertEqual(Book.objects.db_manager('default').db, 'default')
972.         self.assertEqual(Book.objects.db_manager('default').all().db, 'default')
973. 
974.     def test_migrate_selection(self):
975.         "Synchronization behavior is predictable"
976. 
977.         self.assertTrue(router.allow_migrate_model('default', User))
978.         self.assertTrue(router.allow_migrate_model('default', Book))
979. 
980.         self.assertTrue(router.allow_migrate_model('other', User))
981.         self.assertTrue(router.allow_migrate_model('other', Book))
982. 
983.         with override_settings(DATABASE_ROUTERS=[TestRouter(), AuthRouter()]):
984.             # Add the auth router to the chain. TestRouter is a universal
985.             # synchronizer, so it should have no effect.
986.             self.assertTrue(router.allow_migrate_model('default', User))
987.             self.assertTrue(router.allow_migrate_model('default', Book))
988. 
989.             self.assertTrue(router.allow_migrate_model('other', User))
990.             self.assertTrue(router.allow_migrate_model('other', Book))
991. 
992.         with override_settings(DATABASE_ROUTERS=[AuthRouter(), TestRouter()]):
993.             # Now check what happens if the router order is reversed.
994.             self.assertFalse(router.allow_migrate_model('default', User))
995.             self.assertTrue(router.allow_migrate_model('default', Book))
996. 
997.             self.assertTrue(router.allow_migrate_model('other', User))
998.             self.assertTrue(router.allow_migrate_model('other', Book))
999. 
1000.     def test_partial_router(self):
1001.         "A router can choose to implement a subset of methods"
1002.         dive = Book.objects.using('other').create(title="Dive into Python",
1003.                                                   published=datetime.date(2009, 5, 4))
1004. 
1005.         # First check the baseline behavior.
1006. 
1007.         self.assertEqual(router.db_for_read(User), 'other')
1008.         self.assertEqual(router.db_for_read(Book), 'other')
1009. 
1010.         self.assertEqual(router.db_for_write(User), 'default')
1011.         self.assertEqual(router.db_for_write(Book), 'default')
1012. 
1013.         self.assertTrue(router.allow_relation(dive, dive))
1014. 
1015.         self.assertTrue(router.allow_migrate_model('default', User))
1016.         self.assertTrue(router.allow_migrate_model('default', Book))
1017. 
1018.         with override_settings(DATABASE_ROUTERS=[WriteRouter(), AuthRouter(), TestRouter()]):
1019.             self.assertEqual(router.db_for_read(User), 'default')
1020.             self.assertEqual(router.db_for_read(Book), 'other')
1021. 
1022.             self.assertEqual(router.db_for_write(User), 'writer')
1023.             self.assertEqual(router.db_for_write(Book), 'writer')
1024. 
1025.             self.assertTrue(router.allow_relation(dive, dive))
1026. 
1027.             self.assertFalse(router.allow_migrate_model('default', User))
1028.             self.assertTrue(router.allow_migrate_model('default', Book))
1029. 
1030.     def test_database_routing(self):
1031.         marty = Person.objects.using('default').create(name="Marty Alchin")
1032.         pro = Book.objects.using('default').create(title="Pro Django",
1033.                                                    published=datetime.date(2008, 12, 16),
1034.                                                    editor=marty)
1035.         pro.authors.set([marty])
1036. 
1037.         # Create a book and author on the other database
1038.         Book.objects.using('other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
1039. 
1040.         # An update query will be routed to the default database
1041.         Book.objects.filter(title='Pro Django').update(pages=200)
1042. 
1043.         with self.assertRaises(Book.DoesNotExist):
1044.             # By default, the get query will be directed to 'other'
1045.             Book.objects.get(title='Pro Django')
1046. 
1047.         # But the same query issued explicitly at a database will work.
1048.         pro = Book.objects.using('default').get(title='Pro Django')
1049. 
1050.         # Check that the update worked.
1051.         self.assertEqual(pro.pages, 200)
1052. 
1053.         # An update query with an explicit using clause will be routed
1054.         # to the requested database.
1055.         Book.objects.using('other').filter(title='Dive into Python').update(pages=300)
1056.         self.assertEqual(Book.objects.get(title='Dive into Python').pages, 300)
1057. 
1058.         # Related object queries stick to the same database
1059.         # as the original object, regardless of the router
1060.         self.assertEqual(list(pro.authors.values_list('name', flat=True)), ['Marty Alchin'])
1061.         self.assertEqual(pro.editor.name, 'Marty Alchin')
1062. 
1063.         # get_or_create is a special case. The get needs to be targeted at
1064.         # the write database in order to avoid potential transaction
1065.         # consistency problems
1066.         book, created = Book.objects.get_or_create(title="Pro Django")
1067.         self.assertFalse(created)
1068. 
1069.         book, created = Book.objects.get_or_create(title="Dive Into Python",
1070.                                                    defaults={'published': datetime.date(2009, 5, 4)})
1071.         self.assertTrue(created)
1072. 
1073.         # Check the head count of objects
1074.         self.assertEqual(Book.objects.using('default').count(), 2)
1075.         self.assertEqual(Book.objects.using('other').count(), 1)
1076.         # If a database isn't specified, the read database is used
1077.         self.assertEqual(Book.objects.count(), 1)
1078. 
1079.         # A delete query will also be routed to the default database
1080.         Book.objects.filter(pages__gt=150).delete()
1081. 
1082.         # The default database has lost the book.
1083.         self.assertEqual(Book.objects.using('default').count(), 1)
1084.         self.assertEqual(Book.objects.using('other').count(), 1)
1085. 
1086.     def test_invalid_set_foreign_key_assignment(self):
1087.         marty = Person.objects.using('default').create(name="Marty Alchin")
1088.         dive = Book.objects.using('other').create(
1089.             title="Dive into Python",
1090.             published=datetime.date(2009, 5, 4),
1091.         )
1092.         # Set a foreign key set with an object from a different database
1093.         msg = "<Book: Dive into Python> instance isn't saved. Use bulk=False or save the object first."
1094.         with self.assertRaisesMessage(ValueError, msg):
1095.             marty.edited.set([dive])
1096. 
1097.     def test_foreign_key_cross_database_protection(self):
1098.         "Foreign keys can cross databases if they two databases have a common source"
1099.         # Create a book and author on the default database
1100.         pro = Book.objects.using('default').create(title="Pro Django",
1101.                                                    published=datetime.date(2008, 12, 16))
1102. 
1103.         marty = Person.objects.using('default').create(name="Marty Alchin")
1104. 
1105.         # Create a book and author on the other database
1106.         dive = Book.objects.using('other').create(title="Dive into Python",
1107.                                                   published=datetime.date(2009, 5, 4))
1108. 
1109.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
1110. 
1111.         # Set a foreign key with an object from a different database
1112.         dive.editor = marty
1113. 
1114.         # Database assignments of original objects haven't changed...
1115.         self.assertEqual(marty._state.db, 'default')
1116.         self.assertEqual(pro._state.db, 'default')
1117.         self.assertEqual(dive._state.db, 'other')
1118.         self.assertEqual(mark._state.db, 'other')
1119. 
1120.         # ... but they will when the affected object is saved.
1121.         dive.save()
1122.         self.assertEqual(dive._state.db, 'default')
1123. 
1124.         # ...and the source database now has a copy of any object saved
1125.         Book.objects.using('default').get(title='Dive into Python').delete()
1126. 
1127.         # This isn't a real primary/replica database, so restore the original from other
1128.         dive = Book.objects.using('other').get(title='Dive into Python')
1129.         self.assertEqual(dive._state.db, 'other')
1130. 
1131.         # Set a foreign key set with an object from a different database
1132.         marty.edited.set([pro, dive], bulk=False)
1133. 
1134.         # Assignment implies a save, so database assignments of original objects have changed...
1135.         self.assertEqual(marty._state.db, 'default')
1136.         self.assertEqual(pro._state.db, 'default')
1137.         self.assertEqual(dive._state.db, 'default')
1138.         self.assertEqual(mark._state.db, 'other')
1139. 
1140.         # ...and the source database now has a copy of any object saved
1141.         Book.objects.using('default').get(title='Dive into Python').delete()
1142. 
1143.         # This isn't a real primary/replica database, so restore the original from other
1144.         dive = Book.objects.using('other').get(title='Dive into Python')
1145.         self.assertEqual(dive._state.db, 'other')
1146. 
1147.         # Add to a foreign key set with an object from a different database
1148.         marty.edited.add(dive, bulk=False)
1149. 
1150.         # Add implies a save, so database assignments of original objects have changed...
1151.         self.assertEqual(marty._state.db, 'default')
1152.         self.assertEqual(pro._state.db, 'default')
1153.         self.assertEqual(dive._state.db, 'default')
1154.         self.assertEqual(mark._state.db, 'other')
1155. 
1156.         # ...and the source database now has a copy of any object saved
1157.         Book.objects.using('default').get(title='Dive into Python').delete()
1158. 
1159.         # This isn't a real primary/replica database, so restore the original from other
1160.         dive = Book.objects.using('other').get(title='Dive into Python')
1161. 
1162.         # If you assign a FK object when the base object hasn't
1163.         # been saved yet, you implicitly assign the database for the
1164.         # base object.
1165.         chris = Person(name="Chris Mills")
1166.         html5 = Book(title="Dive into HTML5", published=datetime.date(2010, 3, 15))
1167.         # initially, no db assigned
1168.         self.assertIsNone(chris._state.db)
1169.         self.assertIsNone(html5._state.db)
1170. 
1171.         # old object comes from 'other', so the new object is set to use the
1172.         # source of 'other'...
1173.         self.assertEqual(dive._state.db, 'other')
1174.         chris.save()
1175.         dive.editor = chris
1176.         html5.editor = mark
1177. 
1178.         self.assertEqual(dive._state.db, 'other')
1179.         self.assertEqual(mark._state.db, 'other')
1180.         self.assertEqual(chris._state.db, 'default')
1181.         self.assertEqual(html5._state.db, 'default')
1182. 
1183.         # This also works if you assign the FK in the constructor
1184.         water = Book(title="Dive into Water", published=datetime.date(2001, 1, 1), editor=mark)
1185.         self.assertEqual(water._state.db, 'default')
1186. 
1187.         # For the remainder of this test, create a copy of 'mark' in the
1188.         # 'default' database to prevent integrity errors on backends that
1189.         # don't defer constraints checks until the end of the transaction
1190.         mark.save(using='default')
1191. 
1192.         # This moved 'mark' in the 'default' database, move it back in 'other'
1193.         mark.save(using='other')
1194.         self.assertEqual(mark._state.db, 'other')
1195. 
1196.         # If you create an object through a FK relation, it will be
1197.         # written to the write database, even if the original object
1198.         # was on the read database
1199.         cheesecake = mark.edited.create(title='Dive into Cheesecake', published=datetime.date(2010, 3, 15))
1200.         self.assertEqual(cheesecake._state.db, 'default')
1201. 
1202.         # Same goes for get_or_create, regardless of whether getting or creating
1203.         cheesecake, created = mark.edited.get_or_create(
1204.             title='Dive into Cheesecake',
1205.             published=datetime.date(2010, 3, 15),
1206.         )
1207.         self.assertEqual(cheesecake._state.db, 'default')
1208. 
1209.         puddles, created = mark.edited.get_or_create(title='Dive into Puddles', published=datetime.date(2010, 3, 15))
1210.         self.assertEqual(puddles._state.db, 'default')
1211. 
1212.     def test_m2m_cross_database_protection(self):
1213.         "M2M relations can cross databases if the database share a source"
1214.         # Create books and authors on the inverse to the usual database
1215.         pro = Book.objects.using('other').create(pk=1, title="Pro Django",
1216.                                                  published=datetime.date(2008, 12, 16))
1217. 
1218.         marty = Person.objects.using('other').create(pk=1, name="Marty Alchin")
1219. 
1220.         dive = Book.objects.using('default').create(pk=2, title="Dive into Python",
1221.                                                     published=datetime.date(2009, 5, 4))
1222. 
1223.         mark = Person.objects.using('default').create(pk=2, name="Mark Pilgrim")
1224. 
1225.         # Now save back onto the usual database.
1226.         # This simulates primary/replica - the objects exist on both database,
1227.         # but the _state.db is as it is for all other tests.
1228.         pro.save(using='default')
1229.         marty.save(using='default')
1230.         dive.save(using='other')
1231.         mark.save(using='other')
1232. 
1233.         # Check that we have 2 of both types of object on both databases
1234.         self.assertEqual(Book.objects.using('default').count(), 2)
1235.         self.assertEqual(Book.objects.using('other').count(), 2)
1236.         self.assertEqual(Person.objects.using('default').count(), 2)
1237.         self.assertEqual(Person.objects.using('other').count(), 2)
1238. 
1239.         # Set a m2m set with an object from a different database
1240.         marty.book_set.set([pro, dive])
1241. 
1242.         # Database assignments don't change
1243.         self.assertEqual(marty._state.db, 'default')
1244.         self.assertEqual(pro._state.db, 'default')
1245.         self.assertEqual(dive._state.db, 'other')
1246.         self.assertEqual(mark._state.db, 'other')
1247. 
1248.         # All m2m relations should be saved on the default database
1249.         self.assertEqual(Book.authors.through.objects.using('default').count(), 2)
1250.         self.assertEqual(Book.authors.through.objects.using('other').count(), 0)
1251. 
1252.         # Reset relations
1253.         Book.authors.through.objects.using('default').delete()
1254. 
1255.         # Add to an m2m with an object from a different database
1256.         marty.book_set.add(dive)
1257. 
1258.         # Database assignments don't change
1259.         self.assertEqual(marty._state.db, 'default')
1260.         self.assertEqual(pro._state.db, 'default')
1261.         self.assertEqual(dive._state.db, 'other')
1262.         self.assertEqual(mark._state.db, 'other')
1263. 
1264.         # All m2m relations should be saved on the default database
1265.         self.assertEqual(Book.authors.through.objects.using('default').count(), 1)
1266.         self.assertEqual(Book.authors.through.objects.using('other').count(), 0)
1267. 
1268.         # Reset relations
1269.         Book.authors.through.objects.using('default').delete()
1270. 
1271.         # Set a reverse m2m with an object from a different database
1272.         dive.authors.set([mark, marty])
1273. 
1274.         # Database assignments don't change
1275.         self.assertEqual(marty._state.db, 'default')
1276.         self.assertEqual(pro._state.db, 'default')
1277.         self.assertEqual(dive._state.db, 'other')
1278.         self.assertEqual(mark._state.db, 'other')
1279. 
1280.         # All m2m relations should be saved on the default database
1281.         self.assertEqual(Book.authors.through.objects.using('default').count(), 2)
1282.         self.assertEqual(Book.authors.through.objects.using('other').count(), 0)
1283. 
1284.         # Reset relations
1285.         Book.authors.through.objects.using('default').delete()
1286. 
1287.         self.assertEqual(Book.authors.through.objects.using('default').count(), 0)
1288.         self.assertEqual(Book.authors.through.objects.using('other').count(), 0)
1289. 
1290.         # Add to a reverse m2m with an object from a different database
1291.         dive.authors.add(marty)
1292. 
1293.         # Database assignments don't change
1294.         self.assertEqual(marty._state.db, 'default')
1295.         self.assertEqual(pro._state.db, 'default')
1296.         self.assertEqual(dive._state.db, 'other')
1297.         self.assertEqual(mark._state.db, 'other')
1298. 
1299.         # All m2m relations should be saved on the default database
1300.         self.assertEqual(Book.authors.through.objects.using('default').count(), 1)
1301.         self.assertEqual(Book.authors.through.objects.using('other').count(), 0)
1302. 
1303.         # If you create an object through a M2M relation, it will be
1304.         # written to the write database, even if the original object
1305.         # was on the read database
1306.         alice = dive.authors.create(name='Alice')
1307.         self.assertEqual(alice._state.db, 'default')
1308. 
1309.         # Same goes for get_or_create, regardless of whether getting or creating
1310.         alice, created = dive.authors.get_or_create(name='Alice')
1311.         self.assertEqual(alice._state.db, 'default')
1312. 
1313.         bob, created = dive.authors.get_or_create(name='Bob')
1314.         self.assertEqual(bob._state.db, 'default')
1315. 
1316.     def test_o2o_cross_database_protection(self):
1317.         "Operations that involve sharing FK objects across databases raise an error"
1318.         # Create a user and profile on the default database
1319.         alice = User.objects.db_manager('default').create_user('alice', 'alice@example.com')
1320. 
1321.         # Create a user and profile on the other database
1322.         bob = User.objects.db_manager('other').create_user('bob', 'bob@example.com')
1323. 
1324.         # Set a one-to-one relation with an object from a different database
1325.         alice_profile = UserProfile.objects.create(user=alice, flavor='chocolate')
1326.         bob.userprofile = alice_profile
1327. 
1328.         # Database assignments of original objects haven't changed...
1329.         self.assertEqual(alice._state.db, 'default')
1330.         self.assertEqual(alice_profile._state.db, 'default')
1331.         self.assertEqual(bob._state.db, 'other')
1332. 
1333.         # ... but they will when the affected object is saved.
1334.         bob.save()
1335.         self.assertEqual(bob._state.db, 'default')
1336. 
1337.     def test_generic_key_cross_database_protection(self):
1338.         "Generic Key operations can span databases if they share a source"
1339.         # Create a book and author on the default database
1340.         pro = Book.objects.using(
1341.             'default').create(title="Pro Django", published=datetime.date(2008, 12, 16))
1342. 
1343.         review1 = Review.objects.using(
1344.             'default').create(source="Python Monthly", content_object=pro)
1345. 
1346.         # Create a book and author on the other database
1347.         dive = Book.objects.using(
1348.             'other').create(title="Dive into Python", published=datetime.date(2009, 5, 4))
1349. 
1350.         review2 = Review.objects.using(
1351.             'other').create(source="Python Weekly", content_object=dive)
1352. 
1353.         # Set a generic foreign key with an object from a different database
1354.         review1.content_object = dive
1355. 
1356.         # Database assignments of original objects haven't changed...
1357.         self.assertEqual(pro._state.db, 'default')
1358.         self.assertEqual(review1._state.db, 'default')
1359.         self.assertEqual(dive._state.db, 'other')
1360.         self.assertEqual(review2._state.db, 'other')
1361. 
1362.         # ... but they will when the affected object is saved.
1363.         dive.save()
1364.         self.assertEqual(review1._state.db, 'default')
1365.         self.assertEqual(dive._state.db, 'default')
1366. 
1367.         # ...and the source database now has a copy of any object saved
1368.         Book.objects.using('default').get(title='Dive into Python').delete()
1369. 
1370.         # This isn't a real primary/replica database, so restore the original from other
1371.         dive = Book.objects.using('other').get(title='Dive into Python')
1372.         self.assertEqual(dive._state.db, 'other')
1373. 
1374.         # Add to a generic foreign key set with an object from a different database
1375.         dive.reviews.add(review1)
1376. 
1377.         # Database assignments of original objects haven't changed...
1378.         self.assertEqual(pro._state.db, 'default')
1379.         self.assertEqual(review1._state.db, 'default')
1380.         self.assertEqual(dive._state.db, 'other')
1381.         self.assertEqual(review2._state.db, 'other')
1382. 
1383.         # ... but they will when the affected object is saved.
1384.         dive.save()
1385.         self.assertEqual(dive._state.db, 'default')
1386. 
1387.         # ...and the source database now has a copy of any object saved
1388.         Book.objects.using('default').get(title='Dive into Python').delete()
1389. 
1390.         # BUT! if you assign a FK object when the base object hasn't
1391.         # been saved yet, you implicitly assign the database for the
1392.         # base object.
1393.         review3 = Review(source="Python Daily")
1394.         # initially, no db assigned
1395.         self.assertIsNone(review3._state.db)
1396. 
1397.         # Dive comes from 'other', so review3 is set to use the source of 'other'...
1398.         review3.content_object = dive
1399.         self.assertEqual(review3._state.db, 'default')
1400. 
1401.         # If you create an object through a M2M relation, it will be
1402.         # written to the write database, even if the original object
1403.         # was on the read database
1404.         dive = Book.objects.using('other').get(title='Dive into Python')
1405.         nyt = dive.reviews.create(source="New York Times", content_object=dive)
1406.         self.assertEqual(nyt._state.db, 'default')
1407. 
1408.     def test_m2m_managers(self):
1409.         "M2M relations are represented by managers, and can be controlled like managers"
1410.         pro = Book.objects.using('other').create(pk=1, title="Pro Django",
1411.                                                  published=datetime.date(2008, 12, 16))
1412. 
1413.         marty = Person.objects.using('other').create(pk=1, name="Marty Alchin")
1414. 
1415.         self.assertEqual(pro.authors.db, 'other')
1416.         self.assertEqual(pro.authors.db_manager('default').db, 'default')
1417.         self.assertEqual(pro.authors.db_manager('default').all().db, 'default')
1418. 
1419.         self.assertEqual(marty.book_set.db, 'other')
1420.         self.assertEqual(marty.book_set.db_manager('default').db, 'default')
1421.         self.assertEqual(marty.book_set.db_manager('default').all().db, 'default')
1422. 
1423.     def test_foreign_key_managers(self):
1424.         "FK reverse relations are represented by managers, and can be controlled like managers"
1425.         marty = Person.objects.using('other').create(pk=1, name="Marty Alchin")
1426.         Book.objects.using('other').create(pk=1, title="Pro Django",
1427.                                            published=datetime.date(2008, 12, 16),
1428.                                            editor=marty)
1429. 
1430.         self.assertEqual(marty.edited.db, 'other')
1431.         self.assertEqual(marty.edited.db_manager('default').db, 'default')
1432.         self.assertEqual(marty.edited.db_manager('default').all().db, 'default')
1433. 
1434.     def test_generic_key_managers(self):
1435.         "Generic key relations are represented by managers, and can be controlled like managers"
1436.         pro = Book.objects.using('other').create(title="Pro Django",
1437.                                                  published=datetime.date(2008, 12, 16))
1438. 
1439.         Review.objects.using('other').create(source="Python Monthly",
1440.                                              content_object=pro)
1441. 
1442.         self.assertEqual(pro.reviews.db, 'other')
1443.         self.assertEqual(pro.reviews.db_manager('default').db, 'default')
1444.         self.assertEqual(pro.reviews.db_manager('default').all().db, 'default')
1445. 
1446.     def test_subquery(self):
1447.         """Make sure as_sql works with subqueries and primary/replica."""
1448.         # Create a book and author on the other database
1449. 
1450.         mark = Person.objects.using('other').create(name="Mark Pilgrim")
1451.         Book.objects.using('other').create(title="Dive into Python",
1452.                                            published=datetime.date(2009, 5, 4),
1453.                                            editor=mark)
1454. 
1455.         sub = Person.objects.filter(name='Mark Pilgrim')
1456.         qs = Book.objects.filter(editor__in=sub)
1457. 
1458.         # When you call __str__ on the query object, it doesn't know about using
1459.         # so it falls back to the default. Don't let routing instructions
1460.         # force the subquery to an incompatible database.
1461.         str(qs.query)
1462. 
1463.         # If you evaluate the query, it should work, running on 'other'
1464.         self.assertEqual(list(qs.values_list('title', flat=True)), ['Dive into Python'])
1465. 
1466.     def test_deferred_models(self):
1467.         mark_def = Person.objects.using('default').create(name="Mark Pilgrim")
1468.         mark_other = Person.objects.using('other').create(name="Mark Pilgrim")
1469.         orig_b = Book.objects.using('other').create(title="Dive into Python",
1470.                                                     published=datetime.date(2009, 5, 4),
1471.                                                     editor=mark_other)
1472.         b = Book.objects.using('other').only('title').get(pk=orig_b.pk)
1473.         self.assertEqual(b.published, datetime.date(2009, 5, 4))
1474.         b = Book.objects.using('other').only('title').get(pk=orig_b.pk)
1475.         b.editor = mark_def
1476.         b.save(using='default')
1477.         self.assertEqual(Book.objects.using('default').get(pk=b.pk).published,
1478.                          datetime.date(2009, 5, 4))
1479. 
1480. 
1481. @override_settings(DATABASE_ROUTERS=[AuthRouter()])
1482. class AuthTestCase(TestCase):
1483.     multi_db = True
1484. 
1485.     def test_auth_manager(self):
1486.         "The methods on the auth manager obey database hints"
1487.         # Create one user using default allocation policy
1488.         User.objects.create_user('alice', 'alice@example.com')
1489. 
1490.         # Create another user, explicitly specifying the database
1491.         User.objects.db_manager('default').create_user('bob', 'bob@example.com')
1492. 
1493.         # The second user only exists on the other database
1494.         alice = User.objects.using('other').get(username='alice')
1495. 
1496.         self.assertEqual(alice.username, 'alice')
1497.         self.assertEqual(alice._state.db, 'other')
1498. 
1499.         with self.assertRaises(User.DoesNotExist):
1500.             User.objects.using('default').get(username='alice')

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 04:14:43,319 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user has requested the full content of the file 'tests/multiple_database/tests.py'. The provided context includes the content of this file from line 1 to 1500. Therefore, to fulfill the user's request, I am extracting the entire available content of this file.", relative_path='tests/multiple_database/tests.py', start_line=1, end_line=1500)]
2025-12-23 04:14:43,322 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of tests/multiple_database/tests.py.
2025-12-23 04:14:43,322 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 04:14:43,322 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 04:14:43,322 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 2 existing contexts
2025-12-23 04:14:43,322 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-23 04:14:43,323 - thread-130890627802816.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-23 04:14:43,324 - thread-130890627802816.prometheus_context_collector - INFO - Successfully retrieved 3 context snippets
