2025-12-23 10:53:46,729 - thread-139573954868928.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: kernS: 'kern' referenced before assignment

Description: from sympy.core.sympify import kernS

text = "(2*x)/(x-1)"
expr = kernS(text)  
//  hit = kern in s
// UnboundLocalError: local variable 'kern' referenced before assignment

Patch information:
diff --git a/sympy/core/sympify.py b/sympy/core/sympify.py
index a3f1ce2851..e0b4266bd4 100644
--- a/sympy/core/sympify.py
+++ b/sympy/core/sympify.py
@@ -470,6 +470,7 @@ def kernS(s):
     from sympy.core.symbol import Symbol
     hit = False
     quoted = '"' in s or "'" in s
+    kern = ''  # Initialize kern with a default value
     if '(' in s and not quoted:
         if s.count('(') != s.count(")"):
             raise SympifyError('unmatched left parenthesis')


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 10:53:46,805 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.md
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_py2_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── documentation-style-guide.rst
|       ├── gotchas.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── sparse.rst
|       |   |   └── sparsetools.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   ├── tensor.rst
|       |   |   └── toperators.rst
|       |   ├── testing
|       |   |   ├── index.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   └── runtests.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── compare_tar_against_git.py
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   ├── release.sh
|   └── update_docs.py
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── array_utils.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_array_utils.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_pyutils.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── schur_number.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_schur_number.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── _print_helpers.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── parameters.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_parameters.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_registry.py
    |       └── test_deprecated_imports.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── decompositions.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── determinant.py
    |   ├── eigen.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── companion.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── permutation.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_companion.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_permutation.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── graph.py
    |   ├── immutable.py
    |   ├── inverse.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── reductions.py
    |   ├── solvers.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   ├── subspaces.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_commonmatrix.py
    |   |   ├── test_decompositions.py
    |   |   ├── test_densearith.py
    |   |   ├── test_densesolve.py
    |   |   ├── test_densetools.py
    |   |   ├── test_determinant.py
    |   |   ├── test_eigen.py
    |   |   ├── test_graph.py
    |   |   ├── test_immutable.py
    |   |   ├── test_interactions.py
    |   |   ├── test_matrices.py
    |   |   ├── test_normalforms.py
    |   |   ├── test_reductions.py
    |   |   ├── test_solvers.py
    |   |   ├── test_sparse.py
    |   |   ├── test_sparsetools.py
    |   |   └── test_subspaces.py
    |   └── utilities.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── digits.py
    |   ├── ecm.py
    |   ├── egyptian_fraction.py
    |   ├── elliptic_curve.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_digits.py
    |       ├── test_ecm.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_elliptic_curve.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── README.txt
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_ast_parser.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gaussiandomains.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── issubset.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine
    |   |   ├── __init__.py
    |   |   ├── diophantine.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_diophantine.py
    |   ├── inequalities.py
    |   ├── ode
    |   |   ├── __init__.py
    |   |   ├── ode.py
    |   |   ├── single.py
    |   |   ├── subscheck.py
    |   |   ├── systems.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_ode.py
    |   |       ├── test_single.py
    |   |       ├── test_subscheck.py
    |   |       └── test_systems.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_multivariate_probability.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       ├── test_symbolic_multivariate.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── testing
    |   ├── __init__.py
    |   ├── benchmarking.py
    |   ├── matrices.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_module_imports.py
    |   |   └── test_pytest.py
    |   └── tmpfiles.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_pickling.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── parametricregion.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_parametricregion.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: kernS: 'kern' referenced before assignment

Description: from sympy.core.sympify import kernS

text = "(2*x)/(x-1)"
expr = kernS(text)  
//  hit = kern in s
// UnboundLocalError: local variable 'kern' referenced before assignment

Patch information:
diff --git a/sympy/core/sympify.py b/sympy/core/sympify.py
index a3f1ce2851..e0b4266bd4 100644
--- a/sympy/core/sympify.py
+++ b/sympy/core/sympify.py
@@ -470,6 +470,7 @@ def kernS(s):
     from sympy.core.symbol import Symbol
     hit = False
     quoted = '"' in s or "'" in s
+    kern = ''  # Initialize kern with a default value
     if '(' in s and not quoted:
         if s.count('(') != s.count(")"):
             raise SympifyError('unmatched left parenthesis')


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 10:54:09,752 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a bug in `sympy.core.sympify.kernS`. The bug occurs when parsing a string containing parentheses. The most relevant test cases are likely in the test file for the `sympify` module, which is `sympy/core/tests/test_sympify.py`. I need to inspect this file to find tests that exercise string parsing with parentheses, which is the context of the bug.' query='Please provide the full content of `sympy/core/tests/test_sympify.py`.' extra_requirements='' purpose='I need to analyze the tests in this file to find 3 test cases that are most relevant to the reported bug in `kernS` function.'
2025-12-23 10:54:09,753 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `sympy/core/tests/test_sympify.py`.
2025-12-23 10:54:09,753 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 10:54:09,754 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 10:54:09,755 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 10:54:09,755 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `sympy/core/tests/test_sympify.py`.
Purpose: I need to analyze the tests in this file to find 3 test cases that are most relevant to the reported bug in `kernS` function.
2025-12-23 10:54:12,068 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the specified test file. You can now analyze these tests to identify the ones most relevant to the bug in the `kernS` function.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/core/tests/test_sympify.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2113, 'candidates_token_count': 62, 'total_token_count': 2239, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2113}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 62}], 'thoughts_token_count': 64, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.06523921412806358, 'model_name': 'gemini-2.5-pro'} id='run--670263ca-29b6-4b98-b1f6-e03f07a05378-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/core/tests/test_sympify.py'}, 'id': 'd1baacab-20a9-42cd-9b60-cba93e5a6949', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2113, 'output_tokens': 62, 'total_tokens': 2239, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 64}}
2025-12-23 10:54:15,501 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the specified test file, `sympy/core/tests/test_sympify.py`. You can now analyze these tests to identify the ones most relevant to the bug in the `kernS` function.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10775, 'candidates_token_count': 50, 'total_token_count': 11064, 'cached_content_token_count': 1863, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10775}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1863}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 50}], 'thoughts_token_count': 239}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2364310073852539, 'model_name': 'gemini-2.5-pro'} id='run--47bd111a-f942-4545-96a0-b4b75ff27247-0' usage_metadata={'input_tokens': 10775, 'output_tokens': 50, 'total_tokens': 11064, 'input_token_details': {'cache_read': 1863}, 'output_token_details': {'reasoning': 239}}
2025-12-23 10:54:15,503 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `sympy/core/tests/test_sympify.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to analyze the tests in this file to find 3 test cases that are most relevant to the reported bug in `kernS` function.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/core/tests/test_sympify.py
Line number range: 1 - 500
Content:
1. from sympy import (Symbol, exp, Integer, Float, sin, cos, log, Poly, Lambda,
2.     Function, I, S, sqrt, srepr, Rational, Tuple, Matrix, Interval, Add, Mul,
3.     Pow, Or, true, false, Abs, pi, Range, Xor)
4. from sympy.abc import x, y
5. from sympy.core.sympify import (sympify, _sympify, SympifyError, kernS,
6.     CantSympify)
7. from sympy.core.decorators import _sympifyit
8. from sympy.external import import_module
9. from sympy.testing.pytest import raises, XFAIL, skip, warns_deprecated_sympy
10. from sympy.utilities.decorator import conserve_mpmath_dps
11. from sympy.geometry import Point, Line
12. from sympy.functions.combinatorial.factorials import factorial, factorial2
13. from sympy.abc import _clash, _clash1, _clash2
14. from sympy.core.compatibility import exec_, HAS_GMPY
15. from sympy.sets import FiniteSet, EmptySet
16. from sympy.tensor.array.dense_ndim_array import ImmutableDenseNDimArray
17. 
18. import mpmath
19. from collections import defaultdict, OrderedDict
20. from mpmath.rational import mpq
21. 
22. 
23. numpy = import_module('numpy')
24. 
25. 
26. def test_issue_3538():
27.     v = sympify("exp(x)")
28.     assert v == exp(x)
29.     assert type(v) == type(exp(x))
30.     assert str(type(v)) == str(type(exp(x)))
31. 
32. 
33. def test_sympify1():
34.     assert sympify("x") == Symbol("x")
35.     assert sympify("   x") == Symbol("x")
36.     assert sympify("   x   ") == Symbol("x")
37.     # issue 4877
38.     n1 = S.Half
39.     assert sympify('--.5') == n1
40.     assert sympify('-1/2') == -n1
41.     assert sympify('-+--.5') == -n1
42.     assert sympify('-.[3]') == Rational(-1, 3)
43.     assert sympify('.[3]') == Rational(1, 3)
44.     assert sympify('+.[3]') == Rational(1, 3)
45.     assert sympify('+0.[3]*10**-2') == Rational(1, 300)
46.     assert sympify('.[052631578947368421]') == Rational(1, 19)
47.     assert sympify('.0[526315789473684210]') == Rational(1, 19)
48.     assert sympify('.034[56]') == Rational(1711, 49500)
49.     # options to make reals into rationals
50.     assert sympify('1.22[345]', rational=True) == \
51.         1 + Rational(22, 100) + Rational(345, 99900)
52.     assert sympify('2/2.6', rational=True) == Rational(10, 13)
53.     assert sympify('2.6/2', rational=True) == Rational(13, 10)
54.     assert sympify('2.6e2/17', rational=True) == Rational(260, 17)
55.     assert sympify('2.6e+2/17', rational=True) == Rational(260, 17)
56.     assert sympify('2.6e-2/17', rational=True) == Rational(26, 17000)
57.     assert sympify('2.1+3/4', rational=True) == \
58.         Rational(21, 10) + Rational(3, 4)
59.     assert sympify('2.234456', rational=True) == Rational(279307, 125000)
60.     assert sympify('2.234456e23', rational=True) == 223445600000000000000000
61.     assert sympify('2.234456e-23', rational=True) == \
62.         Rational(279307, 12500000000000000000000000000)
63.     assert sympify('-2.234456e-23', rational=True) == \
64.         Rational(-279307, 12500000000000000000000000000)
65.     assert sympify('12345678901/17', rational=True) == \
66.         Rational(12345678901, 17)
67.     assert sympify('1/.3 + x', rational=True) == Rational(10, 3) + x
68.     # make sure longs in fractions work
69.     assert sympify('222222222222/11111111111') == \
70.         Rational(222222222222, 11111111111)
71.     # ... even if they come from repetend notation
72.     assert sympify('1/.2[123456789012]') == Rational(333333333333, 70781892967)
73.     # ... or from high precision reals
74.     assert sympify('.1234567890123456', rational=True) == \
75.         Rational(19290123283179, 156250000000000)
76. 
77. 
78. def test_sympify_Fraction():
79.     try:
80.         import fractions
81.     except ImportError:
82.         pass
83.     else:
84.         value = sympify(fractions.Fraction(101, 127))
85.         assert value == Rational(101, 127) and type(value) is Rational
86. 
87. 
88. def test_sympify_gmpy():
89.     if HAS_GMPY:
90.         if HAS_GMPY == 2:
91.             import gmpy2 as gmpy
92.         elif HAS_GMPY == 1:
93.             import gmpy
94. 
95.         value = sympify(gmpy.mpz(1000001))
96.         assert value == Integer(1000001) and type(value) is Integer
97. 
98.         value = sympify(gmpy.mpq(101, 127))
99.         assert value == Rational(101, 127) and type(value) is Rational
100. 
101. 
102. @conserve_mpmath_dps
103. def test_sympify_mpmath():
104.     value = sympify(mpmath.mpf(1.0))
105.     assert value == Float(1.0) and type(value) is Float
106. 
107.     mpmath.mp.dps = 12
108.     assert sympify(
109.         mpmath.pi).epsilon_eq(Float("3.14159265359"), Float("1e-12")) == True
110.     assert sympify(
111.         mpmath.pi).epsilon_eq(Float("3.14159265359"), Float("1e-13")) == False
112. 
113.     mpmath.mp.dps = 6
114.     assert sympify(
115.         mpmath.pi).epsilon_eq(Float("3.14159"), Float("1e-5")) == True
116.     assert sympify(
117.         mpmath.pi).epsilon_eq(Float("3.14159"), Float("1e-6")) == False
118. 
119.     assert sympify(mpmath.mpc(1.0 + 2.0j)) == Float(1.0) + Float(2.0)*I
120. 
121.     assert sympify(mpq(1, 2)) == S.Half
122. 
123. 
124. def test_sympify2():
125.     class A:
126.         def _sympy_(self):
127.             return Symbol("x")**3
128. 
129.     a = A()
130. 
131.     assert _sympify(a) == x**3
132.     assert sympify(a) == x**3
133.     assert a == x**3
134. 
135. 
136. def test_sympify3():
137.     assert sympify("x**3") == x**3
138.     assert sympify("x^3") == x**3
139.     assert sympify("1/2") == Integer(1)/2
140. 
141.     raises(SympifyError, lambda: _sympify('x**3'))
142.     raises(SympifyError, lambda: _sympify('1/2'))
143. 
144. 
145. def test_sympify_keywords():
146.     raises(SympifyError, lambda: sympify('if'))
147.     raises(SympifyError, lambda: sympify('for'))
148.     raises(SympifyError, lambda: sympify('while'))
149.     raises(SympifyError, lambda: sympify('lambda'))
150. 
151. 
152. def test_sympify_float():
153.     assert sympify("1e-64") != 0
154.     assert sympify("1e-20000") != 0
155. 
156. 
157. def test_sympify_bool():
158.     assert sympify(True) is true
159.     assert sympify(False) is false
160. 
161. 
162. def test_sympyify_iterables():
163.     ans = [Rational(3, 10), Rational(1, 5)]
164.     assert sympify(['.3', '.2'], rational=True) == ans
165.     assert sympify(dict(x=0, y=1)) == {x: 0, y: 1}
166.     assert sympify(['1', '2', ['3', '4']]) == [S(1), S(2), [S(3), S(4)]]
167. 
168. 
169. @XFAIL
170. def test_issue_16772():
171.     # because there is a converter for tuple, the
172.     # args are only sympified without the flags being passed
173.     # along; list, on the other hand, is not converted
174.     # with a converter so its args are traversed later
175.     ans = [Rational(3, 10), Rational(1, 5)]
176.     assert sympify(tuple(['.3', '.2']), rational=True) == Tuple(*ans)
177. 
178. 
179. def test_issue_16859():
180.     class no(float, CantSympify):
181.         pass
182.     raises(SympifyError, lambda: sympify(no(1.2)))
183. 
184. 
185. def test_sympify4():
186.     class A:
187.         def _sympy_(self):
188.             return Symbol("x")
189. 
190.     a = A()
191. 
192.     assert _sympify(a)**3 == x**3
193.     assert sympify(a)**3 == x**3
194.     assert a == x
195. 
196. 
197. def test_sympify_text():
198.     assert sympify('some') == Symbol('some')
199.     assert sympify('core') == Symbol('core')
200. 
201.     assert sympify('True') is True
202.     assert sympify('False') is False
203. 
204.     assert sympify('Poly') == Poly
205.     assert sympify('sin') == sin
206. 
207. 
208. def test_sympify_function():
209.     assert sympify('factor(x**2-1, x)') == -(1 - x)*(x + 1)
210.     assert sympify('sin(pi/2)*cos(pi)') == -Integer(1)
211. 
212. 
213. def test_sympify_poly():
214.     p = Poly(x**2 + x + 1, x)
215. 
216.     assert _sympify(p) is p
217.     assert sympify(p) is p
218. 
219. 
220. def test_sympify_factorial():
221.     assert sympify('x!') == factorial(x)
222.     assert sympify('(x+1)!') == factorial(x + 1)
223.     assert sympify('(1 + y*(x + 1))!') == factorial(1 + y*(x + 1))
224.     assert sympify('(1 + y*(x + 1)!)^2') == (1 + y*factorial(x + 1))**2
225.     assert sympify('y*x!') == y*factorial(x)
226.     assert sympify('x!!') == factorial2(x)
227.     assert sympify('(x+1)!!') == factorial2(x + 1)
228.     assert sympify('(1 + y*(x + 1))!!') == factorial2(1 + y*(x + 1))
229.     assert sympify('(1 + y*(x + 1)!!)^2') == (1 + y*factorial2(x + 1))**2
230.     assert sympify('y*x!!') == y*factorial2(x)
231.     assert sympify('factorial2(x)!') == factorial(factorial2(x))
232. 
233.     raises(SympifyError, lambda: sympify("+!!"))
234.     raises(SympifyError, lambda: sympify(")!!"))
235.     raises(SympifyError, lambda: sympify("!"))
236.     raises(SympifyError, lambda: sympify("(!)"))
237.     raises(SympifyError, lambda: sympify("x!!!"))
238. 
239. 
240. def test_sage():
241.     # how to effectivelly test for the _sage_() method without having SAGE
242.     # installed?
243.     assert hasattr(x, "_sage_")
244.     assert hasattr(Integer(3), "_sage_")
245.     assert hasattr(sin(x), "_sage_")
246.     assert hasattr(cos(x), "_sage_")
247.     assert hasattr(x**2, "_sage_")
248.     assert hasattr(x + y, "_sage_")
249.     assert hasattr(exp(x), "_sage_")
250.     assert hasattr(log(x), "_sage_")
251. 
252. 
253. def test_issue_3595():
254.     assert sympify("a_") == Symbol("a_")
255.     assert sympify("_a") == Symbol("_a")
256. 
257. 
258. def test_lambda():
259.     x = Symbol('x')
260.     assert sympify('lambda: 1') == Lambda((), 1)
261.     assert sympify('lambda x: x') == Lambda(x, x)
262.     assert sympify('lambda x: 2*x') == Lambda(x, 2*x)
263.     assert sympify('lambda x, y: 2*x+y') == Lambda((x, y), 2*x + y)
264. 
265. 
266. def test_lambda_raises():
267.     raises(SympifyError, lambda: sympify("lambda *args: args")) # args argument error
268.     raises(SympifyError, lambda: sympify("lambda **kwargs: kwargs[0]")) # kwargs argument error
269.     raises(SympifyError, lambda: sympify("lambda x = 1: x"))    # Keyword argument error
270.     with raises(SympifyError):
271.         _sympify('lambda: 1')
272. 
273. 
274. def test_sympify_raises():
275.     raises(SympifyError, lambda: sympify("fx)"))
276. 
277.     class A:
278.         def __str__(self):
279.             return 'x'
280. 
281.     with warns_deprecated_sympy():
282.         assert sympify(A()) == Symbol('x')
283. 
284. 
285. def test__sympify():
286.     x = Symbol('x')
287.     f = Function('f')
288. 
289.     # positive _sympify
290.     assert _sympify(x) is x
291.     assert _sympify(f) is f
292.     assert _sympify(1) == Integer(1)
293.     assert _sympify(0.5) == Float("0.5")
294.     assert _sympify(1 + 1j) == 1.0 + I*1.0
295. 
296.     class A:
297.         def _sympy_(self):
298.             return Integer(5)
299. 
300.     a = A()
301.     assert _sympify(a) == Integer(5)
302. 
303.     # negative _sympify
304.     raises(SympifyError, lambda: _sympify('1'))
305.     raises(SympifyError, lambda: _sympify([1, 2, 3]))
306. 
307. 
308. def test_sympifyit():
309.     x = Symbol('x')
310.     y = Symbol('y')
311. 
312.     @_sympifyit('b', NotImplemented)
313.     def add(a, b):
314.         return a + b
315. 
316.     assert add(x, 1) == x + 1
317.     assert add(x, 0.5) == x + Float('0.5')
318.     assert add(x, y) == x + y
319. 
320.     assert add(x, '1') == NotImplemented
321. 
322.     @_sympifyit('b')
323.     def add_raises(a, b):
324.         return a + b
325. 
326.     assert add_raises(x, 1) == x + 1
327.     assert add_raises(x, 0.5) == x + Float('0.5')
328.     assert add_raises(x, y) == x + y
329. 
330.     raises(SympifyError, lambda: add_raises(x, '1'))
331. 
332. 
333. def test_int_float():
334.     class F1_1:
335.         def __float__(self):
336.             return 1.1
337. 
338.     class F1_1b:
339.         """
340.         This class is still a float, even though it also implements __int__().
341.         """
342.         def __float__(self):
343.             return 1.1
344. 
345.         def __int__(self):
346.             return 1
347. 
348.     class F1_1c:
349.         """
350.         This class is still a float, because it implements _sympy_()
351.         """
352.         def __float__(self):
353.             return 1.1
354. 
355.         def __int__(self):
356.             return 1
357. 
358.         def _sympy_(self):
359.             return Float(1.1)
360. 
361.     class I5:
362.         def __int__(self):
363.             return 5
364. 
365.     class I5b:
366.         """
367.         This class implements both __int__() and __float__(), so it will be
368.         treated as Float in SymPy. One could change this behavior, by using
369.         float(a) == int(a), but deciding that integer-valued floats represent
370.         exact numbers is arbitrary and often not correct, so we do not do it.
371.         If, in the future, we decide to do it anyway, the tests for I5b need to
372.         be changed.
373.         """
374.         def __float__(self):
375.             return 5.0
376. 
377.         def __int__(self):
378.             return 5
379. 
380.     class I5c:
381.         """
382.         This class implements both __int__() and __float__(), but also
383.         a _sympy_() method, so it will be Integer.
384.         """
385.         def __float__(self):
386.             return 5.0
387. 
388.         def __int__(self):
389.             return 5
390. 
391.         def _sympy_(self):
392.             return Integer(5)
393. 
394.     i5 = I5()
395.     i5b = I5b()
396.     i5c = I5c()
397.     f1_1 = F1_1()
398.     f1_1b = F1_1b()
399.     f1_1c = F1_1c()
400.     assert sympify(i5) == 5
401.     assert isinstance(sympify(i5), Integer)
402.     assert sympify(i5b) == 5
403.     assert isinstance(sympify(i5b), Float)
404.     assert sympify(i5c) == 5
405.     assert isinstance(sympify(i5c), Integer)
406.     assert abs(sympify(f1_1) - 1.1) < 1e-5
407.     assert abs(sympify(f1_1b) - 1.1) < 1e-5
408.     assert abs(sympify(f1_1c) - 1.1) < 1e-5
409. 
410.     assert _sympify(i5) == 5
411.     assert isinstance(_sympify(i5), Integer)
412.     assert _sympify(i5b) == 5
413.     assert isinstance(_sympify(i5b), Float)
414.     assert _sympify(i5c) == 5
415.     assert isinstance(_sympify(i5c), Integer)
416.     assert abs(_sympify(f1_1) - 1.1) < 1e-5
417.     assert abs(_sympify(f1_1b) - 1.1) < 1e-5
418.     assert abs(_sympify(f1_1c) - 1.1) < 1e-5
419. 
420. 
421. def test_evaluate_false():
422.     cases = {
423.         '2 + 3': Add(2, 3, evaluate=False),
424.         '2**2 / 3': Mul(Pow(2, 2, evaluate=False), Pow(3, -1, evaluate=False), evaluate=False),
425.         '2 + 3 * 5': Add(2, Mul(3, 5, evaluate=False), evaluate=False),
426.         '2 - 3 * 5': Add(2, Mul(-1, Mul(3, 5,evaluate=False), evaluate=False), evaluate=False),
427.         '1 / 3': Mul(1, Pow(3, -1, evaluate=False), evaluate=False),
428.         'True | False': Or(True, False, evaluate=False),
429.         '1 + 2 + 3 + 5*3 + integrate(x)': Add(1, 2, 3, Mul(5, 3, evaluate=False), x**2/2, evaluate=False),
430.         '2 * 4 * 6 + 8': Add(Mul(2, 4, 6, evaluate=False), 8, evaluate=False),
431.         '2 - 8 / 4': Add(2, Mul(-1, Mul(8, Pow(4, -1, evaluate=False), evaluate=False), evaluate=False), evaluate=False),
432.         '2 - 2**2': Add(2, Mul(-1, Pow(2, 2, evaluate=False), evaluate=False), evaluate=False),
433.     }
434.     for case, result in cases.items():
435.         assert sympify(case, evaluate=False) == result
436. 
437. 
438. def test_issue_4133():
439.     a = sympify('Integer(4)')
440. 
441.     assert a == Integer(4)
442.     assert a.is_Integer
443. 
444. 
445. def test_issue_3982():
446.     a = [3, 2.0]
447.     assert sympify(a) == [Integer(3), Float(2.0)]
448.     assert sympify(tuple(a)) == Tuple(Integer(3), Float(2.0))
449.     assert sympify(set(a)) == FiniteSet(Integer(3), Float(2.0))
450. 
451. 
452. def test_S_sympify():
453.     assert S(1)/2 == sympify(1)/2
454.     assert (-2)**(S(1)/2) == sqrt(2)*I
455. 
456. 
457. def test_issue_4788():
458.     assert srepr(S(1.0 + 0J)) == srepr(S(1.0)) == srepr(Float(1.0))
459. 
460. 
461. def test_issue_4798_None():
462.     assert S(None) is None
463. 
464. 
465. def test_issue_3218():
466.     assert sympify("x+\ny") == x + y
467. 
468. 
469. def test_issue_4988_builtins():
470.     C = Symbol('C')
471.     vars = {'C': C}
472.     exp1 = sympify('C')
473.     assert exp1 == C  # Make sure it did not get mixed up with sympy.C
474. 
475.     exp2 = sympify('C', vars)
476.     assert exp2 == C  # Make sure it did not get mixed up with sympy.C
477. 
478. 
479. def test_geometry():
480.     p = sympify(Point(0, 1))
481.     assert p == Point(0, 1) and isinstance(p, Point)
482.     L = sympify(Line(p, (1, 0)))
483.     assert L == Line((0, 1), (1, 0)) and isinstance(L, Line)
484. 
485. 
486. def test_kernS():
487.     s =   '-1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x)))'
488.     # when 1497 is fixed, this no longer should pass: the expression
489.     # should be unchanged
490.     assert -1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x))) == -1
491.     # sympification should not allow the constant to enter a Mul
492.     # or else the structure can change dramatically
493.     ss = kernS(s)
494.     assert ss != -1 and ss.simplify() == -1
495.     s = '-1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x)))'.replace(
496.         'x', '_kern')
497.     ss = kernS(s)
498.     assert ss != -1 and ss.simplify() == -1
499.     # issue 6687
500.     assert (kernS('Interval(-1,-2 - 4*(-3))')

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 10:54:24,108 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly asks for the full content of the file `sympy/core/tests/test_sympify.py`.\n\n2. Extended relevance:\n   - To provide the full content of the file, the entire file needs to be selected. The context provided contains lines 1 to 500 of the requested file, which I assume is the full file.', relative_path='sympy/core/tests/test_sympify.py', start_line=1, end_line=500)]
2025-12-23 10:54:24,109 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of `sympy/core/tests/test_sympify.py`.
2025-12-23 10:54:24,109 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 10:54:24,110 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 10:54:24,110 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-23 10:54:24,110 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-23 10:54:24,111 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.md
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_py2_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── documentation-style-guide.rst
|       ├── gotchas.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── sparse.rst
|       |   |   └── sparsetools.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   ├── tensor.rst
|       |   |   └── toperators.rst
|       |   ├── testing
|       |   |   ├── index.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   └── runtests.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── compare_tar_against_git.py
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   ├── release.sh
|   └── update_docs.py
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── array_utils.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_array_utils.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_pyutils.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── schur_number.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_schur_number.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── _print_helpers.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── parameters.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_parameters.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_registry.py
    |       └── test_deprecated_imports.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── decompositions.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── determinant.py
    |   ├── eigen.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── companion.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── permutation.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_companion.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_permutation.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── graph.py
    |   ├── immutable.py
    |   ├── inverse.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── reductions.py
    |   ├── solvers.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   ├── subspaces.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_commonmatrix.py
    |   |   ├── test_decompositions.py
    |   |   ├── test_densearith.py
    |   |   ├── test_densesolve.py
    |   |   ├── test_densetools.py
    |   |   ├── test_determinant.py
    |   |   ├── test_eigen.py
    |   |   ├── test_graph.py
    |   |   ├── test_immutable.py
    |   |   ├── test_interactions.py
    |   |   ├── test_matrices.py
    |   |   ├── test_normalforms.py
    |   |   ├── test_reductions.py
    |   |   ├── test_solvers.py
    |   |   ├── test_sparse.py
    |   |   ├── test_sparsetools.py
    |   |   └── test_subspaces.py
    |   └── utilities.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── digits.py
    |   ├── ecm.py
    |   ├── egyptian_fraction.py
    |   ├── elliptic_curve.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_digits.py
    |       ├── test_ecm.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_elliptic_curve.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── README.txt
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_ast_parser.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gaussiandomains.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── issubset.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine
    |   |   ├── __init__.py
    |   |   ├── diophantine.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_diophantine.py
    |   ├── inequalities.py
    |   ├── ode
    |   |   ├── __init__.py
    |   |   ├── ode.py
    |   |   ├── single.py
    |   |   ├── subscheck.py
    |   |   ├── systems.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_ode.py
    |   |       ├── test_single.py
    |   |       ├── test_subscheck.py
    |   |       └── test_systems.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_multivariate_probability.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       ├── test_symbolic_multivariate.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── testing
    |   ├── __init__.py
    |   ├── benchmarking.py
    |   ├── matrices.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_module_imports.py
    |   |   └── test_pytest.py
    |   └── tmpfiles.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_pickling.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── parametricregion.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_parametricregion.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: kernS: 'kern' referenced before assignment

Description: from sympy.core.sympify import kernS

text = "(2*x)/(x-1)"
expr = kernS(text)  
//  hit = kern in s
// UnboundLocalError: local variable 'kern' referenced before assignment

Patch information:
diff --git a/sympy/core/sympify.py b/sympy/core/sympify.py
index a3f1ce2851..e0b4266bd4 100644
--- a/sympy/core/sympify.py
+++ b/sympy/core/sympify.py
@@ -470,6 +470,7 @@ def kernS(s):
     from sympy.core.symbol import Symbol
     hit = False
     quoted = '"' in s or "'" in s
+    kern = ''  # Initialize kern with a default value
     if '(' in s and not quoted:
         if s.count('(') != s.count(")"):
             raise SympifyError('unmatched left parenthesis')


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `sympy/core/tests/test_sympify.py`.
Extra Requirements: 
Purpose: I need to analyze the tests in this file to find 3 test cases that are most relevant to the reported bug in `kernS` function.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/core/tests/test_sympify.py
Line number range: 1 - 500
Content:
1. from sympy import (Symbol, exp, Integer, Float, sin, cos, log, Poly, Lambda,
2.     Function, I, S, sqrt, srepr, Rational, Tuple, Matrix, Interval, Add, Mul,
3.     Pow, Or, true, false, Abs, pi, Range, Xor)
4. from sympy.abc import x, y
5. from sympy.core.sympify import (sympify, _sympify, SympifyError, kernS,
6.     CantSympify)
7. from sympy.core.decorators import _sympifyit
8. from sympy.external import import_module
9. from sympy.testing.pytest import raises, XFAIL, skip, warns_deprecated_sympy
10. from sympy.utilities.decorator import conserve_mpmath_dps
11. from sympy.geometry import Point, Line
12. from sympy.functions.combinatorial.factorials import factorial, factorial2
13. from sympy.abc import _clash, _clash1, _clash2
14. from sympy.core.compatibility import exec_, HAS_GMPY
15. from sympy.sets import FiniteSet, EmptySet
16. from sympy.tensor.array.dense_ndim_array import ImmutableDenseNDimArray
17. 
18. import mpmath
19. from collections import defaultdict, OrderedDict
20. from mpmath.rational import mpq
21. 
22. 
23. numpy = import_module('numpy')
24. 
25. 
26. def test_issue_3538():
27.     v = sympify("exp(x)")
28.     assert v == exp(x)
29.     assert type(v) == type(exp(x))
30.     assert str(type(v)) == str(type(exp(x)))
31. 
32. 
33. def test_sympify1():
34.     assert sympify("x") == Symbol("x")
35.     assert sympify("   x") == Symbol("x")
36.     assert sympify("   x   ") == Symbol("x")
37.     # issue 4877
38.     n1 = S.Half
39.     assert sympify('--.5') == n1
40.     assert sympify('-1/2') == -n1
41.     assert sympify('-+--.5') == -n1
42.     assert sympify('-.[3]') == Rational(-1, 3)
43.     assert sympify('.[3]') == Rational(1, 3)
44.     assert sympify('+.[3]') == Rational(1, 3)
45.     assert sympify('+0.[3]*10**-2') == Rational(1, 300)
46.     assert sympify('.[052631578947368421]') == Rational(1, 19)
47.     assert sympify('.0[526315789473684210]') == Rational(1, 19)
48.     assert sympify('.034[56]') == Rational(1711, 49500)
49.     # options to make reals into rationals
50.     assert sympify('1.22[345]', rational=True) == \
51.         1 + Rational(22, 100) + Rational(345, 99900)
52.     assert sympify('2/2.6', rational=True) == Rational(10, 13)
53.     assert sympify('2.6/2', rational=True) == Rational(13, 10)
54.     assert sympify('2.6e2/17', rational=True) == Rational(260, 17)
55.     assert sympify('2.6e+2/17', rational=True) == Rational(260, 17)
56.     assert sympify('2.6e-2/17', rational=True) == Rational(26, 17000)
57.     assert sympify('2.1+3/4', rational=True) == \
58.         Rational(21, 10) + Rational(3, 4)
59.     assert sympify('2.234456', rational=True) == Rational(279307, 125000)
60.     assert sympify('2.234456e23', rational=True) == 223445600000000000000000
61.     assert sympify('2.234456e-23', rational=True) == \
62.         Rational(279307, 12500000000000000000000000000)
63.     assert sympify('-2.234456e-23', rational=True) == \
64.         Rational(-279307, 12500000000000000000000000000)
65.     assert sympify('12345678901/17', rational=True) == \
66.         Rational(12345678901, 17)
67.     assert sympify('1/.3 + x', rational=True) == Rational(10, 3) + x
68.     # make sure longs in fractions work
69.     assert sympify('222222222222/11111111111') == \
70.         Rational(222222222222, 11111111111)
71.     # ... even if they come from repetend notation
72.     assert sympify('1/.2[123456789012]') == Rational(333333333333, 70781892967)
73.     # ... or from high precision reals
74.     assert sympify('.1234567890123456', rational=True) == \
75.         Rational(19290123283179, 156250000000000)
76. 
77. 
78. def test_sympify_Fraction():
79.     try:
80.         import fractions
81.     except ImportError:
82.         pass
83.     else:
84.         value = sympify(fractions.Fraction(101, 127))
85.         assert value == Rational(101, 127) and type(value) is Rational
86. 
87. 
88. def test_sympify_gmpy():
89.     if HAS_GMPY:
90.         if HAS_GMPY == 2:
91.             import gmpy2 as gmpy
92.         elif HAS_GMPY == 1:
93.             import gmpy
94. 
95.         value = sympify(gmpy.mpz(1000001))
96.         assert value == Integer(1000001) and type(value) is Integer
97. 
98.         value = sympify(gmpy.mpq(101, 127))
99.         assert value == Rational(101, 127) and type(value) is Rational
100. 
101. 
102. @conserve_mpmath_dps
103. def test_sympify_mpmath():
104.     value = sympify(mpmath.mpf(1.0))
105.     assert value == Float(1.0) and type(value) is Float
106. 
107.     mpmath.mp.dps = 12
108.     assert sympify(
109.         mpmath.pi).epsilon_eq(Float("3.14159265359"), Float("1e-12")) == True
110.     assert sympify(
111.         mpmath.pi).epsilon_eq(Float("3.14159265359"), Float("1e-13")) == False
112. 
113.     mpmath.mp.dps = 6
114.     assert sympify(
115.         mpmath.pi).epsilon_eq(Float("3.14159"), Float("1e-5")) == True
116.     assert sympify(
117.         mpmath.pi).epsilon_eq(Float("3.14159"), Float("1e-6")) == False
118. 
119.     assert sympify(mpmath.mpc(1.0 + 2.0j)) == Float(1.0) + Float(2.0)*I
120. 
121.     assert sympify(mpq(1, 2)) == S.Half
122. 
123. 
124. def test_sympify2():
125.     class A:
126.         def _sympy_(self):
127.             return Symbol("x")**3
128. 
129.     a = A()
130. 
131.     assert _sympify(a) == x**3
132.     assert sympify(a) == x**3
133.     assert a == x**3
134. 
135. 
136. def test_sympify3():
137.     assert sympify("x**3") == x**3
138.     assert sympify("x^3") == x**3
139.     assert sympify("1/2") == Integer(1)/2
140. 
141.     raises(SympifyError, lambda: _sympify('x**3'))
142.     raises(SympifyError, lambda: _sympify('1/2'))
143. 
144. 
145. def test_sympify_keywords():
146.     raises(SympifyError, lambda: sympify('if'))
147.     raises(SympifyError, lambda: sympify('for'))
148.     raises(SympifyError, lambda: sympify('while'))
149.     raises(SympifyError, lambda: sympify('lambda'))
150. 
151. 
152. def test_sympify_float():
153.     assert sympify("1e-64") != 0
154.     assert sympify("1e-20000") != 0
155. 
156. 
157. def test_sympify_bool():
158.     assert sympify(True) is true
159.     assert sympify(False) is false
160. 
161. 
162. def test_sympyify_iterables():
163.     ans = [Rational(3, 10), Rational(1, 5)]
164.     assert sympify(['.3', '.2'], rational=True) == ans
165.     assert sympify(dict(x=0, y=1)) == {x: 0, y: 1}
166.     assert sympify(['1', '2', ['3', '4']]) == [S(1), S(2), [S(3), S(4)]]
167. 
168. 
169. @XFAIL
170. def test_issue_16772():
171.     # because there is a converter for tuple, the
172.     # args are only sympified without the flags being passed
173.     # along; list, on the other hand, is not converted
174.     # with a converter so its args are traversed later
175.     ans = [Rational(3, 10), Rational(1, 5)]
176.     assert sympify(tuple(['.3', '.2']), rational=True) == Tuple(*ans)
177. 
178. 
179. def test_issue_16859():
180.     class no(float, CantSympify):
181.         pass
182.     raises(SympifyError, lambda: sympify(no(1.2)))
183. 
184. 
185. def test_sympify4():
186.     class A:
187.         def _sympy_(self):
188.             return Symbol("x")
189. 
190.     a = A()
191. 
192.     assert _sympify(a)**3 == x**3
193.     assert sympify(a)**3 == x**3
194.     assert a == x
195. 
196. 
197. def test_sympify_text():
198.     assert sympify('some') == Symbol('some')
199.     assert sympify('core') == Symbol('core')
200. 
201.     assert sympify('True') is True
202.     assert sympify('False') is False
203. 
204.     assert sympify('Poly') == Poly
205.     assert sympify('sin') == sin
206. 
207. 
208. def test_sympify_function():
209.     assert sympify('factor(x**2-1, x)') == -(1 - x)*(x + 1)
210.     assert sympify('sin(pi/2)*cos(pi)') == -Integer(1)
211. 
212. 
213. def test_sympify_poly():
214.     p = Poly(x**2 + x + 1, x)
215. 
216.     assert _sympify(p) is p
217.     assert sympify(p) is p
218. 
219. 
220. def test_sympify_factorial():
221.     assert sympify('x!') == factorial(x)
222.     assert sympify('(x+1)!') == factorial(x + 1)
223.     assert sympify('(1 + y*(x + 1))!') == factorial(1 + y*(x + 1))
224.     assert sympify('(1 + y*(x + 1)!)^2') == (1 + y*factorial(x + 1))**2
225.     assert sympify('y*x!') == y*factorial(x)
226.     assert sympify('x!!') == factorial2(x)
227.     assert sympify('(x+1)!!') == factorial2(x + 1)
228.     assert sympify('(1 + y*(x + 1))!!') == factorial2(1 + y*(x + 1))
229.     assert sympify('(1 + y*(x + 1)!!)^2') == (1 + y*factorial2(x + 1))**2
230.     assert sympify('y*x!!') == y*factorial2(x)
231.     assert sympify('factorial2(x)!') == factorial(factorial2(x))
232. 
233.     raises(SympifyError, lambda: sympify("+!!"))
234.     raises(SympifyError, lambda: sympify(")!!"))
235.     raises(SympifyError, lambda: sympify("!"))
236.     raises(SympifyError, lambda: sympify("(!)"))
237.     raises(SympifyError, lambda: sympify("x!!!"))
238. 
239. 
240. def test_sage():
241.     # how to effectivelly test for the _sage_() method without having SAGE
242.     # installed?
243.     assert hasattr(x, "_sage_")
244.     assert hasattr(Integer(3), "_sage_")
245.     assert hasattr(sin(x), "_sage_")
246.     assert hasattr(cos(x), "_sage_")
247.     assert hasattr(x**2, "_sage_")
248.     assert hasattr(x + y, "_sage_")
249.     assert hasattr(exp(x), "_sage_")
250.     assert hasattr(log(x), "_sage_")
251. 
252. 
253. def test_issue_3595():
254.     assert sympify("a_") == Symbol("a_")
255.     assert sympify("_a") == Symbol("_a")
256. 
257. 
258. def test_lambda():
259.     x = Symbol('x')
260.     assert sympify('lambda: 1') == Lambda((), 1)
261.     assert sympify('lambda x: x') == Lambda(x, x)
262.     assert sympify('lambda x: 2*x') == Lambda(x, 2*x)
263.     assert sympify('lambda x, y: 2*x+y') == Lambda((x, y), 2*x + y)
264. 
265. 
266. def test_lambda_raises():
267.     raises(SympifyError, lambda: sympify("lambda *args: args")) # args argument error
268.     raises(SympifyError, lambda: sympify("lambda **kwargs: kwargs[0]")) # kwargs argument error
269.     raises(SympifyError, lambda: sympify("lambda x = 1: x"))    # Keyword argument error
270.     with raises(SympifyError):
271.         _sympify('lambda: 1')
272. 
273. 
274. def test_sympify_raises():
275.     raises(SympifyError, lambda: sympify("fx)"))
276. 
277.     class A:
278.         def __str__(self):
279.             return 'x'
280. 
281.     with warns_deprecated_sympy():
282.         assert sympify(A()) == Symbol('x')
283. 
284. 
285. def test__sympify():
286.     x = Symbol('x')
287.     f = Function('f')
288. 
289.     # positive _sympify
290.     assert _sympify(x) is x
291.     assert _sympify(f) is f
292.     assert _sympify(1) == Integer(1)
293.     assert _sympify(0.5) == Float("0.5")
294.     assert _sympify(1 + 1j) == 1.0 + I*1.0
295. 
296.     class A:
297.         def _sympy_(self):
298.             return Integer(5)
299. 
300.     a = A()
301.     assert _sympify(a) == Integer(5)
302. 
303.     # negative _sympify
304.     raises(SympifyError, lambda: _sympify('1'))
305.     raises(SympifyError, lambda: _sympify([1, 2, 3]))
306. 
307. 
308. def test_sympifyit():
309.     x = Symbol('x')
310.     y = Symbol('y')
311. 
312.     @_sympifyit('b', NotImplemented)
313.     def add(a, b):
314.         return a + b
315. 
316.     assert add(x, 1) == x + 1
317.     assert add(x, 0.5) == x + Float('0.5')
318.     assert add(x, y) == x + y
319. 
320.     assert add(x, '1') == NotImplemented
321. 
322.     @_sympifyit('b')
323.     def add_raises(a, b):
324.         return a + b
325. 
326.     assert add_raises(x, 1) == x + 1
327.     assert add_raises(x, 0.5) == x + Float('0.5')
328.     assert add_raises(x, y) == x + y
329. 
330.     raises(SympifyError, lambda: add_raises(x, '1'))
331. 
332. 
333. def test_int_float():
334.     class F1_1:
335.         def __float__(self):
336.             return 1.1
337. 
338.     class F1_1b:
339.         """
340.         This class is still a float, even though it also implements __int__().
341.         """
342.         def __float__(self):
343.             return 1.1
344. 
345.         def __int__(self):
346.             return 1
347. 
348.     class F1_1c:
349.         """
350.         This class is still a float, because it implements _sympy_()
351.         """
352.         def __float__(self):
353.             return 1.1
354. 
355.         def __int__(self):
356.             return 1
357. 
358.         def _sympy_(self):
359.             return Float(1.1)
360. 
361.     class I5:
362.         def __int__(self):
363.             return 5
364. 
365.     class I5b:
366.         """
367.         This class implements both __int__() and __float__(), so it will be
368.         treated as Float in SymPy. One could change this behavior, by using
369.         float(a) == int(a), but deciding that integer-valued floats represent
370.         exact numbers is arbitrary and often not correct, so we do not do it.
371.         If, in the future, we decide to do it anyway, the tests for I5b need to
372.         be changed.
373.         """
374.         def __float__(self):
375.             return 5.0
376. 
377.         def __int__(self):
378.             return 5
379. 
380.     class I5c:
381.         """
382.         This class implements both __int__() and __float__(), but also
383.         a _sympy_() method, so it will be Integer.
384.         """
385.         def __float__(self):
386.             return 5.0
387. 
388.         def __int__(self):
389.             return 5
390. 
391.         def _sympy_(self):
392.             return Integer(5)
393. 
394.     i5 = I5()
395.     i5b = I5b()
396.     i5c = I5c()
397.     f1_1 = F1_1()
398.     f1_1b = F1_1b()
399.     f1_1c = F1_1c()
400.     assert sympify(i5) == 5
401.     assert isinstance(sympify(i5), Integer)
402.     assert sympify(i5b) == 5
403.     assert isinstance(sympify(i5b), Float)
404.     assert sympify(i5c) == 5
405.     assert isinstance(sympify(i5c), Integer)
406.     assert abs(sympify(f1_1) - 1.1) < 1e-5
407.     assert abs(sympify(f1_1b) - 1.1) < 1e-5
408.     assert abs(sympify(f1_1c) - 1.1) < 1e-5
409. 
410.     assert _sympify(i5) == 5
411.     assert isinstance(_sympify(i5), Integer)
412.     assert _sympify(i5b) == 5
413.     assert isinstance(_sympify(i5b), Float)
414.     assert _sympify(i5c) == 5
415.     assert isinstance(_sympify(i5c), Integer)
416.     assert abs(_sympify(f1_1) - 1.1) < 1e-5
417.     assert abs(_sympify(f1_1b) - 1.1) < 1e-5
418.     assert abs(_sympify(f1_1c) - 1.1) < 1e-5
419. 
420. 
421. def test_evaluate_false():
422.     cases = {
423.         '2 + 3': Add(2, 3, evaluate=False),
424.         '2**2 / 3': Mul(Pow(2, 2, evaluate=False), Pow(3, -1, evaluate=False), evaluate=False),
425.         '2 + 3 * 5': Add(2, Mul(3, 5, evaluate=False), evaluate=False),
426.         '2 - 3 * 5': Add(2, Mul(-1, Mul(3, 5,evaluate=False), evaluate=False), evaluate=False),
427.         '1 / 3': Mul(1, Pow(3, -1, evaluate=False), evaluate=False),
428.         'True | False': Or(True, False, evaluate=False),
429.         '1 + 2 + 3 + 5*3 + integrate(x)': Add(1, 2, 3, Mul(5, 3, evaluate=False), x**2/2, evaluate=False),
430.         '2 * 4 * 6 + 8': Add(Mul(2, 4, 6, evaluate=False), 8, evaluate=False),
431.         '2 - 8 / 4': Add(2, Mul(-1, Mul(8, Pow(4, -1, evaluate=False), evaluate=False), evaluate=False), evaluate=False),
432.         '2 - 2**2': Add(2, Mul(-1, Pow(2, 2, evaluate=False), evaluate=False), evaluate=False),
433.     }
434.     for case, result in cases.items():
435.         assert sympify(case, evaluate=False) == result
436. 
437. 
438. def test_issue_4133():
439.     a = sympify('Integer(4)')
440. 
441.     assert a == Integer(4)
442.     assert a.is_Integer
443. 
444. 
445. def test_issue_3982():
446.     a = [3, 2.0]
447.     assert sympify(a) == [Integer(3), Float(2.0)]
448.     assert sympify(tuple(a)) == Tuple(Integer(3), Float(2.0))
449.     assert sympify(set(a)) == FiniteSet(Integer(3), Float(2.0))
450. 
451. 
452. def test_S_sympify():
453.     assert S(1)/2 == sympify(1)/2
454.     assert (-2)**(S(1)/2) == sqrt(2)*I
455. 
456. 
457. def test_issue_4788():
458.     assert srepr(S(1.0 + 0J)) == srepr(S(1.0)) == srepr(Float(1.0))
459. 
460. 
461. def test_issue_4798_None():
462.     assert S(None) is None
463. 
464. 
465. def test_issue_3218():
466.     assert sympify("x+\ny") == x + y
467. 
468. 
469. def test_issue_4988_builtins():
470.     C = Symbol('C')
471.     vars = {'C': C}
472.     exp1 = sympify('C')
473.     assert exp1 == C  # Make sure it did not get mixed up with sympy.C
474. 
475.     exp2 = sympify('C', vars)
476.     assert exp2 == C  # Make sure it did not get mixed up with sympy.C
477. 
478. 
479. def test_geometry():
480.     p = sympify(Point(0, 1))
481.     assert p == Point(0, 1) and isinstance(p, Point)
482.     L = sympify(Line(p, (1, 0)))
483.     assert L == Line((0, 1), (1, 0)) and isinstance(L, Line)
484. 
485. 
486. def test_kernS():
487.     s =   '-1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x)))'
488.     # when 1497 is fixed, this no longer should pass: the expression
489.     # should be unchanged
490.     assert -1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x))) == -1
491.     # sympification should not allow the constant to enter a Mul
492.     # or else the structure can change dramatically
493.     ss = kernS(s)
494.     assert ss != -1 and ss.simplify() == -1
495.     s = '-1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x)))'.replace(
496.         'x', '_kern')
497.     ss = kernS(s)
498.     assert ss != -1 and ss.simplify() == -1
499.     # issue 6687
500.     assert (kernS('Interval(-1,-2 - 4*(-3))')

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 10:54:55,085 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find relevant test cases for a bug in the `kernS` function. The provided context contains `sympy/core/tests/test_sympify.py`, which is the correct test file. However, the context is truncated at line 500, in the middle of the `test_kernS` function. This function is the most relevant piece of code for the user's request. To provide a complete and accurate answer, I need the full definition of `test_kernS` and any subsequent tests in that file." query='Please provide the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file.' extra_requirements='If the full content is too large, please at least provide the complete definition of the `test_kernS` function.' purpose='I need the rest of the file to see the complete implementation of `test_kernS` and any other relevant tests for the `kernS` function.'
2025-12-23 10:54:55,086 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file.
2025-12-23 10:54:55,086 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 10:54:55,087 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 10:54:55,088 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 10:54:55,088 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file.
Extra requirements: If the full content is too large, please at least provide the complete definition of the `test_kernS` function.
Purpose: I need the rest of the file to see the complete implementation of `test_kernS` and any other relevant tests for the `kernS` function.
2025-12-23 10:55:00,017 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file. This should contain the complete implementation of the `test_kernS` function and other relevant tests as you requested.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 500.0, "relative_path": "sympy/core/tests/test_sympify.py", "end_line": 10000.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2156, 'candidates_token_count': 90, 'total_token_count': 2546, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2156}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 90}], 'thoughts_token_count': 300, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.23878792656792536, 'model_name': 'gemini-2.5-pro'} id='run--77e58978-d4b5-4759-ba08-ecdb483d0165-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 500.0, 'relative_path': 'sympy/core/tests/test_sympify.py', 'end_line': 10000.0}, 'id': 'c4f74364-be54-44be-a847-19e3f027cfad', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2156, 'output_tokens': 90, 'total_tokens': 2546, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 300}}
2025-12-23 10:55:03,690 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file. This includes the `test_kernS` function you were interested in, as well as several other test functions that follow it, which you can now review.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 7399, 'candidates_token_count': 66, 'total_token_count': 7709, 'cached_content_token_count': 1807, 'prompt_tokens_details': [{'modality': 1, 'token_count': 7399}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1807}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 66}], 'thoughts_token_count': 244}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3208400841915246, 'model_name': 'gemini-2.5-pro'} id='run--97b32eab-63df-4843-a4fe-ab85616d584b-0' usage_metadata={'input_tokens': 7399, 'output_tokens': 66, 'total_tokens': 7709, 'input_token_details': {'cache_read': 1807}, 'output_token_details': {'reasoning': 244}}
2025-12-23 10:55:03,691 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the full content is too large, please at least provide the complete definition of the `test_kernS` function.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
I need the rest of the file to see the complete implementation of `test_kernS` and any other relevant tests for the `kernS` function.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/core/tests/test_sympify.py
Line number range: 500 - 10000
Content:
500.     assert (kernS('Interval(-1,-2 - 4*(-3))')
501.         == Interval(-1, Add(-2, Mul(12, 1, evaluate=False), evaluate=False)))
502.     assert kernS('_kern') == Symbol('_kern')
503.     assert kernS('E**-(x)') == exp(-x)
504.     e = 2*(x + y)*y
505.     assert kernS(['2*(x + y)*y', ('2*(x + y)*y',)]) == [e, (e,)]
506.     assert kernS('-(2*sin(x)**2 + 2*sin(x)*cos(x))*y/2') == \
507.         -y*(2*sin(x)**2 + 2*sin(x)*cos(x))/2
508.     # issue 15132
509.     assert kernS('(1 - x)/(1 - x*(1-y))') == kernS('(1-x)/(1-(1-y)*x)')
510.     assert kernS('(1-2**-(4+1)*(1-y)*x)') == (1 - x*(1 - y)/32)
511.     assert kernS('(1-2**(4+1)*(1-y)*x)') == (1 - 32*x*(1 - y))
512.     assert kernS('(1-2.*(1-y)*x)') == 1 - 2.*x*(1 - y)
513.     one = kernS('x - (x - 1)')
514.     assert one != 1 and one.expand() == 1
515. 
516. 
517. def test_issue_6540_6552():
518.     assert S('[[1/3,2], (2/5,)]') == [[Rational(1, 3), 2], (Rational(2, 5),)]
519.     assert S('[[2/6,2], (2/4,)]') == [[Rational(1, 3), 2], (S.Half,)]
520.     assert S('[[[2*(1)]]]') == [[[2]]]
521.     assert S('Matrix([2*(1)])') == Matrix([2])
522. 
523. 
524. def test_issue_6046():
525.     assert str(S("Q & C", locals=_clash1)) == 'C & Q'
526.     assert str(S('pi(x)', locals=_clash2)) == 'pi(x)'
527.     assert str(S('pi(C, Q)', locals=_clash)) == 'pi(C, Q)'
528.     locals = {}
529.     exec_("from sympy.abc import Q, C", locals)
530.     assert str(S('C&Q', locals)) == 'C & Q'
531. 
532. 
533. def test_issue_8821_highprec_from_str():
534.     s = str(pi.evalf(128))
535.     p = sympify(s)
536.     assert Abs(sin(p)) < 1e-127
537. 
538. 
539. def test_issue_10295():
540.     if not numpy:
541.         skip("numpy not installed.")
542. 
543.     A = numpy.array([[1, 3, -1],
544.                      [0, 1, 7]])
545.     sA = S(A)
546.     assert sA.shape == (2, 3)
547.     for (ri, ci), val in numpy.ndenumerate(A):
548.         assert sA[ri, ci] == val
549. 
550.     B = numpy.array([-7, x, 3*y**2])
551.     sB = S(B)
552.     assert sB.shape == (3,)
553.     assert B[0] == sB[0] == -7
554.     assert B[1] == sB[1] == x
555.     assert B[2] == sB[2] == 3*y**2
556. 
557.     C = numpy.arange(0, 24)
558.     C.resize(2,3,4)
559.     sC = S(C)
560.     assert sC[0, 0, 0].is_integer
561.     assert sC[0, 0, 0] == 0
562. 
563.     a1 = numpy.array([1, 2, 3])
564.     a2 = numpy.array([i for i in range(24)])
565.     a2.resize(2, 4, 3)
566.     assert sympify(a1) == ImmutableDenseNDimArray([1, 2, 3])
567.     assert sympify(a2) == ImmutableDenseNDimArray([i for i in range(24)], (2, 4, 3))
568. 
569. 
570. def test_Range():
571.     # Only works in Python 3 where range returns a range type
572.     assert sympify(range(10)) == Range(10)
573.     assert _sympify(range(10)) == Range(10)
574. 
575. 
576. def test_sympify_set():
577.     n = Symbol('n')
578.     assert sympify({n}) == FiniteSet(n)
579.     assert sympify(set()) == EmptySet
580. 
581. 
582. def test_sympify_numpy():
583.     if not numpy:
584.         skip('numpy not installed. Abort numpy tests.')
585.     np = numpy
586. 
587.     def equal(x, y):
588.         return x == y and type(x) == type(y)
589. 
590.     assert sympify(np.bool_(1)) is S(True)
591.     try:
592.         assert equal(
593.             sympify(np.int_(1234567891234567891)), S(1234567891234567891))
594.         assert equal(
595.             sympify(np.intp(1234567891234567891)), S(1234567891234567891))
596.     except OverflowError:
597.         # May fail on 32-bit systems: Python int too large to convert to C long
598.         pass
599.     assert equal(sympify(np.intc(1234567891)), S(1234567891))
600.     assert equal(sympify(np.int8(-123)), S(-123))
601.     assert equal(sympify(np.int16(-12345)), S(-12345))
602.     assert equal(sympify(np.int32(-1234567891)), S(-1234567891))
603.     assert equal(
604.         sympify(np.int64(-1234567891234567891)), S(-1234567891234567891))
605.     assert equal(sympify(np.uint8(123)), S(123))
606.     assert equal(sympify(np.uint16(12345)), S(12345))
607.     assert equal(sympify(np.uint32(1234567891)), S(1234567891))
608.     assert equal(
609.         sympify(np.uint64(1234567891234567891)), S(1234567891234567891))
610.     assert equal(sympify(np.float32(1.123456)), Float(1.123456, precision=24))
611.     assert equal(sympify(np.float64(1.1234567891234)),
612.                 Float(1.1234567891234, precision=53))
613.     assert equal(sympify(np.longdouble(1.123456789)),
614.                  Float(1.123456789, precision=80))
615.     assert equal(sympify(np.complex64(1 + 2j)), S(1.0 + 2.0*I))
616.     assert equal(sympify(np.complex128(1 + 2j)), S(1.0 + 2.0*I))
617.     assert equal(sympify(np.longcomplex(1 + 2j)), S(1.0 + 2.0*I))
618. 
619.     #float96 does not exist on all platforms
620.     if hasattr(np, 'float96'):
621.         assert equal(sympify(np.float96(1.123456789)),
622.                     Float(1.123456789, precision=80))
623.     #float128 does not exist on all platforms
624.     if hasattr(np, 'float128'):
625.         assert equal(sympify(np.float128(1.123456789123)),
626.                     Float(1.123456789123, precision=80))
627. 
628. 
629. @XFAIL
630. def test_sympify_rational_numbers_set():
631.     ans = [Rational(3, 10), Rational(1, 5)]
632.     assert sympify({'.3', '.2'}, rational=True) == FiniteSet(*ans)
633. 
634. 
635. def test_issue_13924():
636.     if not numpy:
637.         skip("numpy not installed.")
638. 
639.     a = sympify(numpy.array([1]))
640.     assert isinstance(a, ImmutableDenseNDimArray)
641.     assert a[0] == 1
642. 
643. 
644. def test_numpy_sympify_args():
645.     # Issue 15098. Make sure sympify args work with numpy types (like numpy.str_)
646.     if not numpy:
647.         skip("numpy not installed.")
648. 
649.     a = sympify(numpy.str_('a'))
650.     assert type(a) is Symbol
651.     assert a == Symbol('a')
652. 
653.     class CustomSymbol(Symbol):
654.         pass
655. 
656.     a = sympify(numpy.str_('a'), {"Symbol": CustomSymbol})
657.     assert isinstance(a, CustomSymbol)
658. 
659.     a = sympify(numpy.str_('x^y'))
660.     assert a == x**y
661.     a = sympify(numpy.str_('x^y'), convert_xor=False)
662.     assert a == Xor(x, y)
663. 
664.     raises(SympifyError, lambda: sympify(numpy.str_('x'), strict=True))
665. 
666.     a = sympify(numpy.str_('1.1'))
667.     assert isinstance(a, Float)
668.     assert a == 1.1
669. 
670.     a = sympify(numpy.str_('1.1'), rational=True)
671.     assert isinstance(a, Rational)
672.     assert a == Rational(11, 10)
673. 
674.     a = sympify(numpy.str_('x + x'))
675.     assert isinstance(a, Mul)
676.     assert a == 2*x
677. 
678.     a = sympify(numpy.str_('x + x'), evaluate=False)
679.     assert isinstance(a, Add)
680.     assert a == Add(x, x, evaluate=False)
681. 
682. 
683. def test_issue_5939():
684.      a = Symbol('a')
685.      b = Symbol('b')
686.      assert sympify('''a+\nb''') == a + b
687. 
688. 
689. def test_issue_16759():
690.     d = sympify({.5: 1})
691.     assert S.Half not in d
692.     assert Float(.5) in d
693.     assert d[.5] is S.One
694.     d = sympify(OrderedDict({.5: 1}))
695.     assert S.Half not in d
696.     assert Float(.5) in d
697.     assert d[.5] is S.One
698.     d = sympify(defaultdict(int, {.5: 1}))
699.     assert S.Half not in d
700.     assert Float(.5) in d
701.     assert d[.5] is S.One
702. 
703. 
704. def test_issue_17811():
705.     a = Function('a')
706.     assert sympify('a(x)*5', evaluate=False) == Mul(a(x), 5, evaluate=False)
707. 
708. 
709. def test_issue_14706():
710.     if not numpy:
711.         skip("numpy not installed.")
712. 
713.     z1 = numpy.zeros((1, 1), dtype=numpy.float)
714.     z2 = numpy.zeros((2, 2), dtype=numpy.float)
715.     z3 = numpy.zeros((), dtype=numpy.float)
716. 
717.     y1 = numpy.ones((1, 1), dtype=numpy.float)
718.     y2 = numpy.ones((2, 2), dtype=numpy.float)
719.     y3 = numpy.ones((), dtype=numpy.float)
720. 
721.     assert numpy.all(x + z1 == numpy.full((1, 1), x))
722.     assert numpy.all(x + z2 == numpy.full((2, 2), x))
723.     assert numpy.all(z1 + x == numpy.full((1, 1), x))
724.     assert numpy.all(z2 + x == numpy.full((2, 2), x))
725.     for z in [z3,
726.               numpy.int(0),
727.               numpy.float(0),
728.               numpy.complex(0)]:
729.         assert x + z == x
730.         assert z + x == x
731.         assert isinstance(x + z, Symbol)
732.         assert isinstance(z + x, Symbol)
733. 
734.     # If these tests fail, then it means that numpy has finally
735.     # fixed the issue of scalar conversion for rank>0 arrays
736.     # which is mentioned in numpy/numpy#10404. In that case,
737.     # some changes have to be made in sympify.py.
738.     # Note: For future reference, for anyone who takes up this
739.     # issue when numpy has finally fixed their side of the problem,
740.     # the changes for this temporary fix were introduced in PR 18651
741.     assert numpy.all(x + y1 == numpy.full((1, 1), x + 1.0))
742.     assert numpy.all(x + y2 == numpy.full((2, 2), x + 1.0))
743.     assert numpy.all(y1 + x == numpy.full((1, 1), x + 1.0))
744.     assert numpy.all(y2 + x == numpy.full((2, 2), x + 1.0))
745.     for y_ in [y3,
746.               numpy.int(1),
747.               numpy.float(1),
748.               numpy.complex(1)]:
749.         assert x + y_ == y_ + x
750.         assert isinstance(x + y_, Add)
751.         assert isinstance(y_ + x, Add)
752. 
753.     assert x + numpy.array(x) == 2 * x
754.     assert x + numpy.array([x]) == numpy.array([2*x], dtype=object)
755. 
756.     assert sympify(numpy.array([1])) == ImmutableDenseNDimArray([1], 1)
757.     assert sympify(numpy.array([[[1]]])) == ImmutableDenseNDimArray([1], (1, 1, 1))
758.     assert sympify(z1) == ImmutableDenseNDimArray([0], (1, 1))
759.     assert sympify(z2) == ImmutableDenseNDimArray([0, 0, 0, 0], (2, 2))
760.     assert sympify(z3) == ImmutableDenseNDimArray([0], ())
761.     assert sympify(z3, strict=True) == 0.0
762. 
763.     raises(SympifyError, lambda: sympify(numpy.array([1]), strict=True))
764.     raises(SympifyError, lambda: sympify(z1, strict=True))
765.     raises(SympifyError, lambda: sympify(z2, strict=True))

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 10:55:11,049 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user specifically asks for the content of the file `sympy/core/tests/test_sympify.py` from line 500 to the end.\n   - The user also has a special interest in the `test_kernS` function.\n2. Extended relevance:\n   - The provided context starts at line 500 and continues to line 765.\n   - This directly fulfills the user's primary request for the file content starting from line 500.\n   - It includes the concluding part of the `test_kernS` function and several other subsequent test functions, which is relevant to the user's stated purpose of understanding the tests in this file.", relative_path='sympy/core/tests/test_sympify.py', start_line=500, end_line=765)]
2025-12-23 10:55:11,050 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file.
2025-12-23 10:55:11,050 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 10:55:11,050 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 10:55:11,051 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 1 existing contexts
2025-12-23 10:55:11,051 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-23 10:55:11,052 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── README.rst
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.md
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_executable.py
|   ├── test_external_imports.py
|   ├── test_import.py
|   ├── test_py2_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── codecov.yml
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── documentation-style-guide.rst
|       ├── gotchas.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── abc.rst
|       |   ├── algebras.rst
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── pc_groups.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── discrete.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── internal.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── interactive.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── common.rst
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── sparse.rst
|       |   |   └── sparsetools.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   ├── tensor.rst
|       |   |   └── toperators.rst
|       |   ├── testing
|       |   |   ├── index.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   └── runtests.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── compare_tar_against_git.py
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   ├── release.sh
|   └── update_docs.py
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── cnf.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── algorithms.py
    |   ├── approximations.py
    |   ├── array_utils.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── cnodes.py
    |   ├── cutils.py
    |   ├── cxxnodes.py
    |   ├── fnodes.py
    |   ├── futils.py
    |   ├── matrix_nodes.py
    |   ├── pyutils.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_algorithms.py
    |       ├── test_applications.py
    |       ├── test_approximations.py
    |       ├── test_array_utils.py
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_cnodes.py
    |       ├── test_cxxnodes.py
    |       ├── test_fnodes.py
    |       ├── test_pyutils.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── pc_groups.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── rewritingsystem_fsm.py
    |   ├── schur_number.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_pc_groups.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_schur_number.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── _print_helpers.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── parameters.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_evalf.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_multidimensional.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_parameters.py
    |   |   ├── test_power.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_singleton.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_registry.py
    |       └── test_deprecated_imports.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── discrete
    |   ├── __init__.py
    |   ├── convolutions.py
    |   ├── recurrences.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_convolutions.py
    |   |   ├── test_recurrences.py
    |   |   └── test_transforms.py
    |   └── transforms.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── constraints.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── generate_rules.py
    |   |   |   ├── generate_tests.py
    |   |   |   ├── header.py.txt
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi_tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests
    |   |   ├── rubimain.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── special_functions.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   ├── dpll2.py
    |   |   └── pycosat_wrapper.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── decompositions.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── determinant.py
    |   ├── eigen.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── applyfunc.py
    |   |   ├── blockmatrix.py
    |   |   ├── companion.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── kronecker.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── permutation.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_applyfunc.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_companion.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_kronecker.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_permutation.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── graph.py
    |   ├── immutable.py
    |   ├── inverse.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── reductions.py
    |   ├── solvers.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   ├── subspaces.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_commonmatrix.py
    |   |   ├── test_decompositions.py
    |   |   ├── test_densearith.py
    |   |   ├── test_densesolve.py
    |   |   ├── test_densetools.py
    |   |   ├── test_determinant.py
    |   |   ├── test_eigen.py
    |   |   ├── test_graph.py
    |   |   ├── test_immutable.py
    |   |   ├── test_interactions.py
    |   |   ├── test_matrices.py
    |   |   ├── test_normalforms.py
    |   |   ├── test_reductions.py
    |   |   ├── test_solvers.py
    |   |   ├── test_sparse.py
    |   |   ├── test_sparsetools.py
    |   |   └── test_subspaces.py
    |   └── utilities.py
    ├── multipledispatch
    |   ├── __init__.py
    |   ├── conflict.py
    |   ├── core.py
    |   ├── dispatcher.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_conflict.py
    |   |   ├── test_core.py
    |   |   └── test_dispatcher.py
    |   └── utils.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── digits.py
    |   ├── ecm.py
    |   ├── egyptian_fraction.py
    |   ├── elliptic_curve.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_digits.py
    |       ├── test_ecm.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_elliptic_curve.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── autolev
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── autolevlexer.py
    |   |   |   ├── autolevlistener.py
    |   |   |   └── autolevparser.py
    |   |   ├── _listener_autolev_antlr.py
    |   |   ├── _parse_autolev_antlr.py
    |   |   └── test-examples
    |   |       ├── README.txt
    |   |       ├── pydy-example-repo
    |   |       ├── ruletest1.py
    |   |       ├── ruletest10.py
    |   |       ├── ruletest11.py
    |   |       ├── ruletest12.py
    |   |       ├── ruletest2.py
    |   |       ├── ruletest3.py
    |   |       ├── ruletest4.py
    |   |       ├── ruletest5.py
    |   |       ├── ruletest6.py
    |   |       ├── ruletest7.py
    |   |       ├── ruletest8.py
    |   |       └── ruletest9.py
    |   ├── c
    |   |   ├── __init__.py
    |   |   └── c_parser.py
    |   ├── fortran
    |   |   ├── __init__.py
    |   |   └── fortran_parser.py
    |   ├── latex
    |   |   ├── LICENSE.txt
    |   |   ├── __init__.py
    |   |   ├── _antlr
    |   |   |   ├── __init__.py
    |   |   |   ├── latexlexer.py
    |   |   |   └── latexparser.py
    |   |   ├── _build_latex_antlr.py
    |   |   ├── _parse_latex_antlr.py
    |   |   └── errors.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sym_expr.py
    |   ├── sympy_parser.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_ast_parser.py
    |       ├── test_autolev.py
    |       ├── test_c_parser.py
    |       ├── test_fortran_parser.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_latex.py
    |       ├── test_latex_deps.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       ├── test_sym_expr.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_kane4.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── polarization.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_polarization.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions
    |   |   |   ├── __init__.py
    |   |   |   ├── dimension_definitions.py
    |   |   |   └── unit_definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── cgs.py
    |   |   |   ├── length_weight_time.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unit_system_cgs_gauss.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── interval_membership.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       ├── test_interval_membership.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_experimental_lambdify.py
    |   |   ├── test_plot.py
    |   |   ├── test_plot_implicit.py
    |   |   └── test_textplot.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gaussiandomains.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── multivariate_resultants.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_multivariate_resultants.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── maple.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tensorflow.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_maple.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   ├── test_tensorflow.py
    |   |   ├── test_theanocode.py
    |   |   └── test_tree.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── aseries.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_aseries.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── add.py
    |   |   ├── functions.py
    |   |   ├── intersection.py
    |   |   ├── issubset.py
    |   |   ├── mul.py
    |   |   ├── power.py
    |   |   └── union.py
    |   ├── ordinals.py
    |   ├── powerset.py
    |   ├── setexpr.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       ├── test_ordinals.py
    |       ├── test_powerset.py
    |       ├── test_setexpr.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine
    |   |   ├── __init__.py
    |   |   ├── diophantine.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_diophantine.py
    |   ├── inequalities.py
    |   ├── ode
    |   |   ├── __init__.py
    |   |   ├── ode.py
    |   |   ├── single.py
    |   |   ├── subscheck.py
    |   |   ├── systems.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_ode.py
    |   |       ├── test_single.py
    |   |       ├── test_subscheck.py
    |   |       └── test_systems.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── joint_rv.py
    |   ├── joint_rv_types.py
    |   ├── random_matrix.py
    |   ├── random_matrix_models.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── stochastic_process.py
    |   ├── stochastic_process_types.py
    |   ├── symbolic_multivariate_probability.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_joint_rv.py
    |       ├── test_mix.py
    |       ├── test_random_matrix.py
    |       ├── test_rv.py
    |       ├── test_stochastic_process.py
    |       ├── test_symbolic_multivariate.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── array_comprehension.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_array_comprehension.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       ├── test_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_functions.py
    |   |   ├── test_index_methods.py
    |   |   ├── test_indexed.py
    |   |   ├── test_tensor.py
    |   |   ├── test_tensor_element.py
    |   |   └── test_tensor_operators.py
    |   └── toperators.py
    ├── testing
    |   ├── __init__.py
    |   ├── benchmarking.py
    |   ├── matrices.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_module_imports.py
    |   |   └── test_pytest.py
    |   └── tmpfiles.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── _compilation
    |   |   ├── __init__.py
    |   |   ├── availability.py
    |   |   ├── compilation.py
    |   |   ├── runners.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_compilation.py
    |   |   └── util.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── matchpy_connector.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── quality_unicode.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_deprecated.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_pickling.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   ├── timeutils.py
    |   └── tmpfiles.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── parametricregion.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_parametricregion.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: kernS: 'kern' referenced before assignment

Description: from sympy.core.sympify import kernS

text = "(2*x)/(x-1)"
expr = kernS(text)  
//  hit = kern in s
// UnboundLocalError: local variable 'kern' referenced before assignment

Patch information:
diff --git a/sympy/core/sympify.py b/sympy/core/sympify.py
index a3f1ce2851..e0b4266bd4 100644
--- a/sympy/core/sympify.py
+++ b/sympy/core/sympify.py
@@ -470,6 +470,7 @@ def kernS(s):
     from sympy.core.symbol import Symbol
     hit = False
     quoted = '"' in s or "'" in s
+    kern = ''  # Initialize kern with a default value
     if '(' in s and not quoted:
         if s.count('(') != s.count(")"):
             raise SympifyError('unmatched left parenthesis')


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `sympy/core/tests/test_sympify.py`.
Extra Requirements: 
Purpose: I need to analyze the tests in this file to find 3 test cases that are most relevant to the reported bug in `kernS` function.

Previous refined query 2:
Essential Query: Please provide the content of `sympy/core/tests/test_sympify.py` from line 500 to the end of the file.
Extra Requirements: If the full content is too large, please at least provide the complete definition of the `test_kernS` function.
Purpose: I need the rest of the file to see the complete implementation of `test_kernS` and any other relevant tests for the `kernS` function.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/core/tests/test_sympify.py
Line number range: 1 - 500
Content:
1. from sympy import (Symbol, exp, Integer, Float, sin, cos, log, Poly, Lambda,
2.     Function, I, S, sqrt, srepr, Rational, Tuple, Matrix, Interval, Add, Mul,
3.     Pow, Or, true, false, Abs, pi, Range, Xor)
4. from sympy.abc import x, y
5. from sympy.core.sympify import (sympify, _sympify, SympifyError, kernS,
6.     CantSympify)
7. from sympy.core.decorators import _sympifyit
8. from sympy.external import import_module
9. from sympy.testing.pytest import raises, XFAIL, skip, warns_deprecated_sympy
10. from sympy.utilities.decorator import conserve_mpmath_dps
11. from sympy.geometry import Point, Line
12. from sympy.functions.combinatorial.factorials import factorial, factorial2
13. from sympy.abc import _clash, _clash1, _clash2
14. from sympy.core.compatibility import exec_, HAS_GMPY
15. from sympy.sets import FiniteSet, EmptySet
16. from sympy.tensor.array.dense_ndim_array import ImmutableDenseNDimArray
17. 
18. import mpmath
19. from collections import defaultdict, OrderedDict
20. from mpmath.rational import mpq
21. 
22. 
23. numpy = import_module('numpy')
24. 
25. 
26. def test_issue_3538():
27.     v = sympify("exp(x)")
28.     assert v == exp(x)
29.     assert type(v) == type(exp(x))
30.     assert str(type(v)) == str(type(exp(x)))
31. 
32. 
33. def test_sympify1():
34.     assert sympify("x") == Symbol("x")
35.     assert sympify("   x") == Symbol("x")
36.     assert sympify("   x   ") == Symbol("x")
37.     # issue 4877
38.     n1 = S.Half
39.     assert sympify('--.5') == n1
40.     assert sympify('-1/2') == -n1
41.     assert sympify('-+--.5') == -n1
42.     assert sympify('-.[3]') == Rational(-1, 3)
43.     assert sympify('.[3]') == Rational(1, 3)
44.     assert sympify('+.[3]') == Rational(1, 3)
45.     assert sympify('+0.[3]*10**-2') == Rational(1, 300)
46.     assert sympify('.[052631578947368421]') == Rational(1, 19)
47.     assert sympify('.0[526315789473684210]') == Rational(1, 19)
48.     assert sympify('.034[56]') == Rational(1711, 49500)
49.     # options to make reals into rationals
50.     assert sympify('1.22[345]', rational=True) == \
51.         1 + Rational(22, 100) + Rational(345, 99900)
52.     assert sympify('2/2.6', rational=True) == Rational(10, 13)
53.     assert sympify('2.6/2', rational=True) == Rational(13, 10)
54.     assert sympify('2.6e2/17', rational=True) == Rational(260, 17)
55.     assert sympify('2.6e+2/17', rational=True) == Rational(260, 17)
56.     assert sympify('2.6e-2/17', rational=True) == Rational(26, 17000)
57.     assert sympify('2.1+3/4', rational=True) == \
58.         Rational(21, 10) + Rational(3, 4)
59.     assert sympify('2.234456', rational=True) == Rational(279307, 125000)
60.     assert sympify('2.234456e23', rational=True) == 223445600000000000000000
61.     assert sympify('2.234456e-23', rational=True) == \
62.         Rational(279307, 12500000000000000000000000000)
63.     assert sympify('-2.234456e-23', rational=True) == \
64.         Rational(-279307, 12500000000000000000000000000)
65.     assert sympify('12345678901/17', rational=True) == \
66.         Rational(12345678901, 17)
67.     assert sympify('1/.3 + x', rational=True) == Rational(10, 3) + x
68.     # make sure longs in fractions work
69.     assert sympify('222222222222/11111111111') == \
70.         Rational(222222222222, 11111111111)
71.     # ... even if they come from repetend notation
72.     assert sympify('1/.2[123456789012]') == Rational(333333333333, 70781892967)
73.     # ... or from high precision reals
74.     assert sympify('.1234567890123456', rational=True) == \
75.         Rational(19290123283179, 156250000000000)
76. 
77. 
78. def test_sympify_Fraction():
79.     try:
80.         import fractions
81.     except ImportError:
82.         pass
83.     else:
84.         value = sympify(fractions.Fraction(101, 127))
85.         assert value == Rational(101, 127) and type(value) is Rational
86. 
87. 
88. def test_sympify_gmpy():
89.     if HAS_GMPY:
90.         if HAS_GMPY == 2:
91.             import gmpy2 as gmpy
92.         elif HAS_GMPY == 1:
93.             import gmpy
94. 
95.         value = sympify(gmpy.mpz(1000001))
96.         assert value == Integer(1000001) and type(value) is Integer
97. 
98.         value = sympify(gmpy.mpq(101, 127))
99.         assert value == Rational(101, 127) and type(value) is Rational
100. 
101. 
102. @conserve_mpmath_dps
103. def test_sympify_mpmath():
104.     value = sympify(mpmath.mpf(1.0))
105.     assert value == Float(1.0) and type(value) is Float
106. 
107.     mpmath.mp.dps = 12
108.     assert sympify(
109.         mpmath.pi).epsilon_eq(Float("3.14159265359"), Float("1e-12")) == True
110.     assert sympify(
111.         mpmath.pi).epsilon_eq(Float("3.14159265359"), Float("1e-13")) == False
112. 
113.     mpmath.mp.dps = 6
114.     assert sympify(
115.         mpmath.pi).epsilon_eq(Float("3.14159"), Float("1e-5")) == True
116.     assert sympify(
117.         mpmath.pi).epsilon_eq(Float("3.14159"), Float("1e-6")) == False
118. 
119.     assert sympify(mpmath.mpc(1.0 + 2.0j)) == Float(1.0) + Float(2.0)*I
120. 
121.     assert sympify(mpq(1, 2)) == S.Half
122. 
123. 
124. def test_sympify2():
125.     class A:
126.         def _sympy_(self):
127.             return Symbol("x")**3
128. 
129.     a = A()
130. 
131.     assert _sympify(a) == x**3
132.     assert sympify(a) == x**3
133.     assert a == x**3
134. 
135. 
136. def test_sympify3():
137.     assert sympify("x**3") == x**3
138.     assert sympify("x^3") == x**3
139.     assert sympify("1/2") == Integer(1)/2
140. 
141.     raises(SympifyError, lambda: _sympify('x**3'))
142.     raises(SympifyError, lambda: _sympify('1/2'))
143. 
144. 
145. def test_sympify_keywords():
146.     raises(SympifyError, lambda: sympify('if'))
147.     raises(SympifyError, lambda: sympify('for'))
148.     raises(SympifyError, lambda: sympify('while'))
149.     raises(SympifyError, lambda: sympify('lambda'))
150. 
151. 
152. def test_sympify_float():
153.     assert sympify("1e-64") != 0
154.     assert sympify("1e-20000") != 0
155. 
156. 
157. def test_sympify_bool():
158.     assert sympify(True) is true
159.     assert sympify(False) is false
160. 
161. 
162. def test_sympyify_iterables():
163.     ans = [Rational(3, 10), Rational(1, 5)]
164.     assert sympify(['.3', '.2'], rational=True) == ans
165.     assert sympify(dict(x=0, y=1)) == {x: 0, y: 1}
166.     assert sympify(['1', '2', ['3', '4']]) == [S(1), S(2), [S(3), S(4)]]
167. 
168. 
169. @XFAIL
170. def test_issue_16772():
171.     # because there is a converter for tuple, the
172.     # args are only sympified without the flags being passed
173.     # along; list, on the other hand, is not converted
174.     # with a converter so its args are traversed later
175.     ans = [Rational(3, 10), Rational(1, 5)]
176.     assert sympify(tuple(['.3', '.2']), rational=True) == Tuple(*ans)
177. 
178. 
179. def test_issue_16859():
180.     class no(float, CantSympify):
181.         pass
182.     raises(SympifyError, lambda: sympify(no(1.2)))
183. 
184. 
185. def test_sympify4():
186.     class A:
187.         def _sympy_(self):
188.             return Symbol("x")
189. 
190.     a = A()
191. 
192.     assert _sympify(a)**3 == x**3
193.     assert sympify(a)**3 == x**3
194.     assert a == x
195. 
196. 
197. def test_sympify_text():
198.     assert sympify('some') == Symbol('some')
199.     assert sympify('core') == Symbol('core')
200. 
201.     assert sympify('True') is True
202.     assert sympify('False') is False
203. 
204.     assert sympify('Poly') == Poly
205.     assert sympify('sin') == sin
206. 
207. 
208. def test_sympify_function():
209.     assert sympify('factor(x**2-1, x)') == -(1 - x)*(x + 1)
210.     assert sympify('sin(pi/2)*cos(pi)') == -Integer(1)
211. 
212. 
213. def test_sympify_poly():
214.     p = Poly(x**2 + x + 1, x)
215. 
216.     assert _sympify(p) is p
217.     assert sympify(p) is p
218. 
219. 
220. def test_sympify_factorial():
221.     assert sympify('x!') == factorial(x)
222.     assert sympify('(x+1)!') == factorial(x + 1)
223.     assert sympify('(1 + y*(x + 1))!') == factorial(1 + y*(x + 1))
224.     assert sympify('(1 + y*(x + 1)!)^2') == (1 + y*factorial(x + 1))**2
225.     assert sympify('y*x!') == y*factorial(x)
226.     assert sympify('x!!') == factorial2(x)
227.     assert sympify('(x+1)!!') == factorial2(x + 1)
228.     assert sympify('(1 + y*(x + 1))!!') == factorial2(1 + y*(x + 1))
229.     assert sympify('(1 + y*(x + 1)!!)^2') == (1 + y*factorial2(x + 1))**2
230.     assert sympify('y*x!!') == y*factorial2(x)
231.     assert sympify('factorial2(x)!') == factorial(factorial2(x))
232. 
233.     raises(SympifyError, lambda: sympify("+!!"))
234.     raises(SympifyError, lambda: sympify(")!!"))
235.     raises(SympifyError, lambda: sympify("!"))
236.     raises(SympifyError, lambda: sympify("(!)"))
237.     raises(SympifyError, lambda: sympify("x!!!"))
238. 
239. 
240. def test_sage():
241.     # how to effectivelly test for the _sage_() method without having SAGE
242.     # installed?
243.     assert hasattr(x, "_sage_")
244.     assert hasattr(Integer(3), "_sage_")
245.     assert hasattr(sin(x), "_sage_")
246.     assert hasattr(cos(x), "_sage_")
247.     assert hasattr(x**2, "_sage_")
248.     assert hasattr(x + y, "_sage_")
249.     assert hasattr(exp(x), "_sage_")
250.     assert hasattr(log(x), "_sage_")
251. 
252. 
253. def test_issue_3595():
254.     assert sympify("a_") == Symbol("a_")
255.     assert sympify("_a") == Symbol("_a")
256. 
257. 
258. def test_lambda():
259.     x = Symbol('x')
260.     assert sympify('lambda: 1') == Lambda((), 1)
261.     assert sympify('lambda x: x') == Lambda(x, x)
262.     assert sympify('lambda x: 2*x') == Lambda(x, 2*x)
263.     assert sympify('lambda x, y: 2*x+y') == Lambda((x, y), 2*x + y)
264. 
265. 
266. def test_lambda_raises():
267.     raises(SympifyError, lambda: sympify("lambda *args: args")) # args argument error
268.     raises(SympifyError, lambda: sympify("lambda **kwargs: kwargs[0]")) # kwargs argument error
269.     raises(SympifyError, lambda: sympify("lambda x = 1: x"))    # Keyword argument error
270.     with raises(SympifyError):
271.         _sympify('lambda: 1')
272. 
273. 
274. def test_sympify_raises():
275.     raises(SympifyError, lambda: sympify("fx)"))
276. 
277.     class A:
278.         def __str__(self):
279.             return 'x'
280. 
281.     with warns_deprecated_sympy():
282.         assert sympify(A()) == Symbol('x')
283. 
284. 
285. def test__sympify():
286.     x = Symbol('x')
287.     f = Function('f')
288. 
289.     # positive _sympify
290.     assert _sympify(x) is x
291.     assert _sympify(f) is f
292.     assert _sympify(1) == Integer(1)
293.     assert _sympify(0.5) == Float("0.5")
294.     assert _sympify(1 + 1j) == 1.0 + I*1.0
295. 
296.     class A:
297.         def _sympy_(self):
298.             return Integer(5)
299. 
300.     a = A()
301.     assert _sympify(a) == Integer(5)
302. 
303.     # negative _sympify
304.     raises(SympifyError, lambda: _sympify('1'))
305.     raises(SympifyError, lambda: _sympify([1, 2, 3]))
306. 
307. 
308. def test_sympifyit():
309.     x = Symbol('x')
310.     y = Symbol('y')
311. 
312.     @_sympifyit('b', NotImplemented)
313.     def add(a, b):
314.         return a + b
315. 
316.     assert add(x, 1) == x + 1
317.     assert add(x, 0.5) == x + Float('0.5')
318.     assert add(x, y) == x + y
319. 
320.     assert add(x, '1') == NotImplemented
321. 
322.     @_sympifyit('b')
323.     def add_raises(a, b):
324.         return a + b
325. 
326.     assert add_raises(x, 1) == x + 1
327.     assert add_raises(x, 0.5) == x + Float('0.5')
328.     assert add_raises(x, y) == x + y
329. 
330.     raises(SympifyError, lambda: add_raises(x, '1'))
331. 
332. 
333. def test_int_float():
334.     class F1_1:
335.         def __float__(self):
336.             return 1.1
337. 
338.     class F1_1b:
339.         """
340.         This class is still a float, even though it also implements __int__().
341.         """
342.         def __float__(self):
343.             return 1.1
344. 
345.         def __int__(self):
346.             return 1
347. 
348.     class F1_1c:
349.         """
350.         This class is still a float, because it implements _sympy_()
351.         """
352.         def __float__(self):
353.             return 1.1
354. 
355.         def __int__(self):
356.             return 1
357. 
358.         def _sympy_(self):
359.             return Float(1.1)
360. 
361.     class I5:
362.         def __int__(self):
363.             return 5
364. 
365.     class I5b:
366.         """
367.         This class implements both __int__() and __float__(), so it will be
368.         treated as Float in SymPy. One could change this behavior, by using
369.         float(a) == int(a), but deciding that integer-valued floats represent
370.         exact numbers is arbitrary and often not correct, so we do not do it.
371.         If, in the future, we decide to do it anyway, the tests for I5b need to
372.         be changed.
373.         """
374.         def __float__(self):
375.             return 5.0
376. 
377.         def __int__(self):
378.             return 5
379. 
380.     class I5c:
381.         """
382.         This class implements both __int__() and __float__(), but also
383.         a _sympy_() method, so it will be Integer.
384.         """
385.         def __float__(self):
386.             return 5.0
387. 
388.         def __int__(self):
389.             return 5
390. 
391.         def _sympy_(self):
392.             return Integer(5)
393. 
394.     i5 = I5()
395.     i5b = I5b()
396.     i5c = I5c()
397.     f1_1 = F1_1()
398.     f1_1b = F1_1b()
399.     f1_1c = F1_1c()
400.     assert sympify(i5) == 5
401.     assert isinstance(sympify(i5), Integer)
402.     assert sympify(i5b) == 5
403.     assert isinstance(sympify(i5b), Float)
404.     assert sympify(i5c) == 5
405.     assert isinstance(sympify(i5c), Integer)
406.     assert abs(sympify(f1_1) - 1.1) < 1e-5
407.     assert abs(sympify(f1_1b) - 1.1) < 1e-5
408.     assert abs(sympify(f1_1c) - 1.1) < 1e-5
409. 
410.     assert _sympify(i5) == 5
411.     assert isinstance(_sympify(i5), Integer)
412.     assert _sympify(i5b) == 5
413.     assert isinstance(_sympify(i5b), Float)
414.     assert _sympify(i5c) == 5
415.     assert isinstance(_sympify(i5c), Integer)
416.     assert abs(_sympify(f1_1) - 1.1) < 1e-5
417.     assert abs(_sympify(f1_1b) - 1.1) < 1e-5
418.     assert abs(_sympify(f1_1c) - 1.1) < 1e-5
419. 
420. 
421. def test_evaluate_false():
422.     cases = {
423.         '2 + 3': Add(2, 3, evaluate=False),
424.         '2**2 / 3': Mul(Pow(2, 2, evaluate=False), Pow(3, -1, evaluate=False), evaluate=False),
425.         '2 + 3 * 5': Add(2, Mul(3, 5, evaluate=False), evaluate=False),
426.         '2 - 3 * 5': Add(2, Mul(-1, Mul(3, 5,evaluate=False), evaluate=False), evaluate=False),
427.         '1 / 3': Mul(1, Pow(3, -1, evaluate=False), evaluate=False),
428.         'True | False': Or(True, False, evaluate=False),
429.         '1 + 2 + 3 + 5*3 + integrate(x)': Add(1, 2, 3, Mul(5, 3, evaluate=False), x**2/2, evaluate=False),
430.         '2 * 4 * 6 + 8': Add(Mul(2, 4, 6, evaluate=False), 8, evaluate=False),
431.         '2 - 8 / 4': Add(2, Mul(-1, Mul(8, Pow(4, -1, evaluate=False), evaluate=False), evaluate=False), evaluate=False),
432.         '2 - 2**2': Add(2, Mul(-1, Pow(2, 2, evaluate=False), evaluate=False), evaluate=False),
433.     }
434.     for case, result in cases.items():
435.         assert sympify(case, evaluate=False) == result
436. 
437. 
438. def test_issue_4133():
439.     a = sympify('Integer(4)')
440. 
441.     assert a == Integer(4)
442.     assert a.is_Integer
443. 
444. 
445. def test_issue_3982():
446.     a = [3, 2.0]
447.     assert sympify(a) == [Integer(3), Float(2.0)]
448.     assert sympify(tuple(a)) == Tuple(Integer(3), Float(2.0))
449.     assert sympify(set(a)) == FiniteSet(Integer(3), Float(2.0))
450. 
451. 
452. def test_S_sympify():
453.     assert S(1)/2 == sympify(1)/2
454.     assert (-2)**(S(1)/2) == sqrt(2)*I
455. 
456. 
457. def test_issue_4788():
458.     assert srepr(S(1.0 + 0J)) == srepr(S(1.0)) == srepr(Float(1.0))
459. 
460. 
461. def test_issue_4798_None():
462.     assert S(None) is None
463. 
464. 
465. def test_issue_3218():
466.     assert sympify("x+\ny") == x + y
467. 
468. 
469. def test_issue_4988_builtins():
470.     C = Symbol('C')
471.     vars = {'C': C}
472.     exp1 = sympify('C')
473.     assert exp1 == C  # Make sure it did not get mixed up with sympy.C
474. 
475.     exp2 = sympify('C', vars)
476.     assert exp2 == C  # Make sure it did not get mixed up with sympy.C
477. 
478. 
479. def test_geometry():
480.     p = sympify(Point(0, 1))
481.     assert p == Point(0, 1) and isinstance(p, Point)
482.     L = sympify(Line(p, (1, 0)))
483.     assert L == Line((0, 1), (1, 0)) and isinstance(L, Line)
484. 
485. 
486. def test_kernS():
487.     s =   '-1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x)))'
488.     # when 1497 is fixed, this no longer should pass: the expression
489.     # should be unchanged
490.     assert -1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x))) == -1
491.     # sympification should not allow the constant to enter a Mul
492.     # or else the structure can change dramatically
493.     ss = kernS(s)
494.     assert ss != -1 and ss.simplify() == -1
495.     s = '-1 - 2*(-(-x + 1/x)/(x*(x - 1/x)**2) - 1/(x*(x - 1/x)))'.replace(
496.         'x', '_kern')
497.     ss = kernS(s)
498.     assert ss != -1 and ss.simplify() == -1
499.     # issue 6687
500.     assert (kernS('Interval(-1,-2 - 4*(-3))')


File: sympy/core/tests/test_sympify.py
Line number range: 500 - 765
Content:
500.     assert (kernS('Interval(-1,-2 - 4*(-3))')
501.         == Interval(-1, Add(-2, Mul(12, 1, evaluate=False), evaluate=False)))
502.     assert kernS('_kern') == Symbol('_kern')
503.     assert kernS('E**-(x)') == exp(-x)
504.     e = 2*(x + y)*y
505.     assert kernS(['2*(x + y)*y', ('2*(x + y)*y',)]) == [e, (e,)]
506.     assert kernS('-(2*sin(x)**2 + 2*sin(x)*cos(x))*y/2') == \
507.         -y*(2*sin(x)**2 + 2*sin(x)*cos(x))/2
508.     # issue 15132
509.     assert kernS('(1 - x)/(1 - x*(1-y))') == kernS('(1-x)/(1-(1-y)*x)')
510.     assert kernS('(1-2**-(4+1)*(1-y)*x)') == (1 - x*(1 - y)/32)
511.     assert kernS('(1-2**(4+1)*(1-y)*x)') == (1 - 32*x*(1 - y))
512.     assert kernS('(1-2.*(1-y)*x)') == 1 - 2.*x*(1 - y)
513.     one = kernS('x - (x - 1)')
514.     assert one != 1 and one.expand() == 1
515. 
516. 
517. def test_issue_6540_6552():
518.     assert S('[[1/3,2], (2/5,)]') == [[Rational(1, 3), 2], (Rational(2, 5),)]
519.     assert S('[[2/6,2], (2/4,)]') == [[Rational(1, 3), 2], (S.Half,)]
520.     assert S('[[[2*(1)]]]') == [[[2]]]
521.     assert S('Matrix([2*(1)])') == Matrix([2])
522. 
523. 
524. def test_issue_6046():
525.     assert str(S("Q & C", locals=_clash1)) == 'C & Q'
526.     assert str(S('pi(x)', locals=_clash2)) == 'pi(x)'
527.     assert str(S('pi(C, Q)', locals=_clash)) == 'pi(C, Q)'
528.     locals = {}
529.     exec_("from sympy.abc import Q, C", locals)
530.     assert str(S('C&Q', locals)) == 'C & Q'
531. 
532. 
533. def test_issue_8821_highprec_from_str():
534.     s = str(pi.evalf(128))
535.     p = sympify(s)
536.     assert Abs(sin(p)) < 1e-127
537. 
538. 
539. def test_issue_10295():
540.     if not numpy:
541.         skip("numpy not installed.")
542. 
543.     A = numpy.array([[1, 3, -1],
544.                      [0, 1, 7]])
545.     sA = S(A)
546.     assert sA.shape == (2, 3)
547.     for (ri, ci), val in numpy.ndenumerate(A):
548.         assert sA[ri, ci] == val
549. 
550.     B = numpy.array([-7, x, 3*y**2])
551.     sB = S(B)
552.     assert sB.shape == (3,)
553.     assert B[0] == sB[0] == -7
554.     assert B[1] == sB[1] == x
555.     assert B[2] == sB[2] == 3*y**2
556. 
557.     C = numpy.arange(0, 24)
558.     C.resize(2,3,4)
559.     sC = S(C)
560.     assert sC[0, 0, 0].is_integer
561.     assert sC[0, 0, 0] == 0
562. 
563.     a1 = numpy.array([1, 2, 3])
564.     a2 = numpy.array([i for i in range(24)])
565.     a2.resize(2, 4, 3)
566.     assert sympify(a1) == ImmutableDenseNDimArray([1, 2, 3])
567.     assert sympify(a2) == ImmutableDenseNDimArray([i for i in range(24)], (2, 4, 3))
568. 
569. 
570. def test_Range():
571.     # Only works in Python 3 where range returns a range type
572.     assert sympify(range(10)) == Range(10)
573.     assert _sympify(range(10)) == Range(10)
574. 
575. 
576. def test_sympify_set():
577.     n = Symbol('n')
578.     assert sympify({n}) == FiniteSet(n)
579.     assert sympify(set()) == EmptySet
580. 
581. 
582. def test_sympify_numpy():
583.     if not numpy:
584.         skip('numpy not installed. Abort numpy tests.')
585.     np = numpy
586. 
587.     def equal(x, y):
588.         return x == y and type(x) == type(y)
589. 
590.     assert sympify(np.bool_(1)) is S(True)
591.     try:
592.         assert equal(
593.             sympify(np.int_(1234567891234567891)), S(1234567891234567891))
594.         assert equal(
595.             sympify(np.intp(1234567891234567891)), S(1234567891234567891))
596.     except OverflowError:
597.         # May fail on 32-bit systems: Python int too large to convert to C long
598.         pass
599.     assert equal(sympify(np.intc(1234567891)), S(1234567891))
600.     assert equal(sympify(np.int8(-123)), S(-123))
601.     assert equal(sympify(np.int16(-12345)), S(-12345))
602.     assert equal(sympify(np.int32(-1234567891)), S(-1234567891))
603.     assert equal(
604.         sympify(np.int64(-1234567891234567891)), S(-1234567891234567891))
605.     assert equal(sympify(np.uint8(123)), S(123))
606.     assert equal(sympify(np.uint16(12345)), S(12345))
607.     assert equal(sympify(np.uint32(1234567891)), S(1234567891))
608.     assert equal(
609.         sympify(np.uint64(1234567891234567891)), S(1234567891234567891))
610.     assert equal(sympify(np.float32(1.123456)), Float(1.123456, precision=24))
611.     assert equal(sympify(np.float64(1.1234567891234)),
612.                 Float(1.1234567891234, precision=53))
613.     assert equal(sympify(np.longdouble(1.123456789)),
614.                  Float(1.123456789, precision=80))
615.     assert equal(sympify(np.complex64(1 + 2j)), S(1.0 + 2.0*I))
616.     assert equal(sympify(np.complex128(1 + 2j)), S(1.0 + 2.0*I))
617.     assert equal(sympify(np.longcomplex(1 + 2j)), S(1.0 + 2.0*I))
618. 
619.     #float96 does not exist on all platforms
620.     if hasattr(np, 'float96'):
621.         assert equal(sympify(np.float96(1.123456789)),
622.                     Float(1.123456789, precision=80))
623.     #float128 does not exist on all platforms
624.     if hasattr(np, 'float128'):
625.         assert equal(sympify(np.float128(1.123456789123)),
626.                     Float(1.123456789123, precision=80))
627. 
628. 
629. @XFAIL
630. def test_sympify_rational_numbers_set():
631.     ans = [Rational(3, 10), Rational(1, 5)]
632.     assert sympify({'.3', '.2'}, rational=True) == FiniteSet(*ans)
633. 
634. 
635. def test_issue_13924():
636.     if not numpy:
637.         skip("numpy not installed.")
638. 
639.     a = sympify(numpy.array([1]))
640.     assert isinstance(a, ImmutableDenseNDimArray)
641.     assert a[0] == 1
642. 
643. 
644. def test_numpy_sympify_args():
645.     # Issue 15098. Make sure sympify args work with numpy types (like numpy.str_)
646.     if not numpy:
647.         skip("numpy not installed.")
648. 
649.     a = sympify(numpy.str_('a'))
650.     assert type(a) is Symbol
651.     assert a == Symbol('a')
652. 
653.     class CustomSymbol(Symbol):
654.         pass
655. 
656.     a = sympify(numpy.str_('a'), {"Symbol": CustomSymbol})
657.     assert isinstance(a, CustomSymbol)
658. 
659.     a = sympify(numpy.str_('x^y'))
660.     assert a == x**y
661.     a = sympify(numpy.str_('x^y'), convert_xor=False)
662.     assert a == Xor(x, y)
663. 
664.     raises(SympifyError, lambda: sympify(numpy.str_('x'), strict=True))
665. 
666.     a = sympify(numpy.str_('1.1'))
667.     assert isinstance(a, Float)
668.     assert a == 1.1
669. 
670.     a = sympify(numpy.str_('1.1'), rational=True)
671.     assert isinstance(a, Rational)
672.     assert a == Rational(11, 10)
673. 
674.     a = sympify(numpy.str_('x + x'))
675.     assert isinstance(a, Mul)
676.     assert a == 2*x
677. 
678.     a = sympify(numpy.str_('x + x'), evaluate=False)
679.     assert isinstance(a, Add)
680.     assert a == Add(x, x, evaluate=False)
681. 
682. 
683. def test_issue_5939():
684.      a = Symbol('a')
685.      b = Symbol('b')
686.      assert sympify('''a+\nb''') == a + b
687. 
688. 
689. def test_issue_16759():
690.     d = sympify({.5: 1})
691.     assert S.Half not in d
692.     assert Float(.5) in d
693.     assert d[.5] is S.One
694.     d = sympify(OrderedDict({.5: 1}))
695.     assert S.Half not in d
696.     assert Float(.5) in d
697.     assert d[.5] is S.One
698.     d = sympify(defaultdict(int, {.5: 1}))
699.     assert S.Half not in d
700.     assert Float(.5) in d
701.     assert d[.5] is S.One
702. 
703. 
704. def test_issue_17811():
705.     a = Function('a')
706.     assert sympify('a(x)*5', evaluate=False) == Mul(a(x), 5, evaluate=False)
707. 
708. 
709. def test_issue_14706():
710.     if not numpy:
711.         skip("numpy not installed.")
712. 
713.     z1 = numpy.zeros((1, 1), dtype=numpy.float)
714.     z2 = numpy.zeros((2, 2), dtype=numpy.float)
715.     z3 = numpy.zeros((), dtype=numpy.float)
716. 
717.     y1 = numpy.ones((1, 1), dtype=numpy.float)
718.     y2 = numpy.ones((2, 2), dtype=numpy.float)
719.     y3 = numpy.ones((), dtype=numpy.float)
720. 
721.     assert numpy.all(x + z1 == numpy.full((1, 1), x))
722.     assert numpy.all(x + z2 == numpy.full((2, 2), x))
723.     assert numpy.all(z1 + x == numpy.full((1, 1), x))
724.     assert numpy.all(z2 + x == numpy.full((2, 2), x))
725.     for z in [z3,
726.               numpy.int(0),
727.               numpy.float(0),
728.               numpy.complex(0)]:
729.         assert x + z == x
730.         assert z + x == x
731.         assert isinstance(x + z, Symbol)
732.         assert isinstance(z + x, Symbol)
733. 
734.     # If these tests fail, then it means that numpy has finally
735.     # fixed the issue of scalar conversion for rank>0 arrays
736.     # which is mentioned in numpy/numpy#10404. In that case,
737.     # some changes have to be made in sympify.py.
738.     # Note: For future reference, for anyone who takes up this
739.     # issue when numpy has finally fixed their side of the problem,
740.     # the changes for this temporary fix were introduced in PR 18651
741.     assert numpy.all(x + y1 == numpy.full((1, 1), x + 1.0))
742.     assert numpy.all(x + y2 == numpy.full((2, 2), x + 1.0))
743.     assert numpy.all(y1 + x == numpy.full((1, 1), x + 1.0))
744.     assert numpy.all(y2 + x == numpy.full((2, 2), x + 1.0))
745.     for y_ in [y3,
746.               numpy.int(1),
747.               numpy.float(1),
748.               numpy.complex(1)]:
749.         assert x + y_ == y_ + x
750.         assert isinstance(x + y_, Add)
751.         assert isinstance(y_ + x, Add)
752. 
753.     assert x + numpy.array(x) == 2 * x
754.     assert x + numpy.array([x]) == numpy.array([2*x], dtype=object)
755. 
756.     assert sympify(numpy.array([1])) == ImmutableDenseNDimArray([1], 1)
757.     assert sympify(numpy.array([[[1]]])) == ImmutableDenseNDimArray([1], (1, 1, 1))
758.     assert sympify(z1) == ImmutableDenseNDimArray([0], (1, 1))
759.     assert sympify(z2) == ImmutableDenseNDimArray([0, 0, 0, 0], (2, 2))
760.     assert sympify(z3) == ImmutableDenseNDimArray([0], ())
761.     assert sympify(z3, strict=True) == 0.0
762. 
763.     raises(SympifyError, lambda: sympify(numpy.array([1]), strict=True))
764.     raises(SympifyError, lambda: sympify(z1, strict=True))
765.     raises(SympifyError, lambda: sympify(z2, strict=True))

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 10:56:15,205 - thread-139573954868928.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='I have the complete content of `sympy/core/tests/test_sympify.py`, which contains `test_kernS`, the primary test function for the buggy `kernS` function. This file provides sufficient context to extract multiple relevant test cases that cover both the buggy scenario (input without parentheses) and normal operational scenarios. I can synthesize the required three distinct test cases from the assertions within `test_kernS`. Therefore, no additional context is needed.' query='' extra_requirements='' purpose=''
2025-12-23 10:56:15,206 - thread-139573954868928.prometheus_context_collector - INFO - Successfully retrieved 2 context snippets
