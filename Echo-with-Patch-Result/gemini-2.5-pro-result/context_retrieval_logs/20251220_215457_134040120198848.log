2025-12-20 21:54:57,215 - thread-134040120198848.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: squashmigrations does not unset model options when optimizing CreateModel and AlterModelOptions

Description: Description
	
When an operation resembling AlterModelOptions(name="test_model", options={}) is squashed into the corresponding CreateModel operation, model options are not cleared on the resulting new CreateModel operation object.
CreateModel.reduce() sets the new options as options={**self.options, **operation.options} in this case (django/db/migrations/operations/models.py line 144 on commit 991dce4f), with no logic to remove options not found in operation.options as is found in AlterModelOptions.state_forwards().
I believe this issue still exists on the master branch based on my reading of the code, but I've only tested against 2.2.

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index dddf7c679c..7c9ea38526 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -137,11 +137,15 @@ class CreateModel(ModelOperation):
                 ),
             ]
         elif isinstance(operation, AlterModelOptions) and self.name_lower == operation.name_lower:
+            options = {**self.options, **operation.options}
+            for key in AlterModelOptions.ALTER_OPTION_KEYS:
+                if key not in operation.options:
+                    options.pop(key, False)
             return [
                 CreateModel(
                     self.name,
                     fields=self.fields,
-                    options={**self.options, **operation.options},
+                    options=options,
                     bases=self.bases,
                     managers=self.managers,
                 ),


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-20 21:54:57,310 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: squashmigrations does not unset model options when optimizing CreateModel and AlterModelOptions

Description: Description
	
When an operation resembling AlterModelOptions(name="test_model", options={}) is squashed into the corresponding CreateModel operation, model options are not cleared on the resulting new CreateModel operation object.
CreateModel.reduce() sets the new options as options={**self.options, **operation.options} in this case (django/db/migrations/operations/models.py line 144 on commit 991dce4f), with no logic to remove options not found in operation.options as is found in AlterModelOptions.state_forwards().
I believe this issue still exists on the master branch based on my reading of the code, but I've only tested against 2.2.

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index dddf7c679c..7c9ea38526 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -137,11 +137,15 @@ class CreateModel(ModelOperation):
                 ),
             ]
         elif isinstance(operation, AlterModelOptions) and self.name_lower == operation.name_lower:
+            options = {**self.options, **operation.options}
+            for key in AlterModelOptions.ALTER_OPTION_KEYS:
+                if key not in operation.options:
+                    options.pop(key, False)
             return [
                 CreateModel(
                     self.name,
                     fields=self.fields,
-                    options={**self.options, **operation.options},
+                    options=options,
                     bases=self.bases,
                     managers=self.managers,
                 ),


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-20 21:55:29,641 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases for a bug in migration squashing involving `CreateModel` and `AlterModelOptions`. The bug is in the `CreateModel.reduce()` method, which is used by the migration optimizer. Therefore, tests in `tests/migrations/test_operations.py` (for the operation itself) and `tests/migrations/test_optimizer.py` (for the squashing process) are the most relevant ones to examine.' query='Please provide the full content of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py`.' extra_requirements='' purpose='I need to analyze these files to find existing test cases that cover the interaction between `CreateModel` and `AlterModelOptions` during migration squashing.'
2025-12-20 21:55:29,642 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py`.
2025-12-20 21:55:29,642 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-20 21:55:29,642 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-20 21:55:29,643 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-20 21:55:29,643 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py`.
Purpose: I need to analyze these files to find existing test cases that cover the interaction between `CreateModel` and `AlterModelOptions` during migration squashing.
2025-12-20 21:55:33,093 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py` for you to analyze. These files should contain the test cases you need to understand the interaction between `CreateModel` and `AlterModelOptions` during migration squashing.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/tests/migrations/test_optimizer.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2123, 'candidates_token_count': 116, 'total_token_count': 2484, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2123}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 116}], 'thoughts_token_count': 245, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10031358126936288, 'model_name': 'gemini-2.5-pro'} id='run--bd571333-8d26-414e-9860-e975329fd7ef-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/tests/migrations/test_operations.py'}, 'id': 'f8e8048a-bec4-400d-84d7-b704d10fb17d', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/tests/migrations/test_optimizer.py'}, 'id': 'fd88849d-d499-497f-a483-87ad06d67e9c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2123, 'output_tokens': 116, 'total_tokens': 2484, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 245}}
2025-12-20 21:55:36,650 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I was unable to find the requested files at the specified paths. I will now search for the files by their names to determine if they exist elsewhere in the codebase.' additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_optimizer.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2297, 'candidates_token_count': 63, 'total_token_count': 2609, 'cached_content_token_count': 1475, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2297}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1475}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 63}], 'thoughts_token_count': 249}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3504769764249287, 'model_name': 'gemini-2.5-pro'} id='run--1eda2c4d-ddc6-4254-84e1-17dd88e69c96-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_operations.py'}, 'id': '070bb5de-fcfd-4b1a-96a4-b865e70a1ba1', 'type': 'tool_call'}, {'name': 'find_file_node_with_basename', 'args': {'basename': 'test_optimizer.py'}, 'id': '5883c910-8d61-42d5-a71c-75522ff03988', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2297, 'output_tokens': 63, 'total_tokens': 2609, 'input_token_details': {'cache_read': 1475}, 'output_token_details': {'reasoning': 249}}
2025-12-20 21:55:38,976 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have located the files at `tests/migrations/test_operations.py` and `tests/migrations/test_optimizer.py`. I will now retrieve their full contents for your analysis.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/migrations/test_optimizer.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2685, 'candidates_token_count': 86, 'total_token_count': 2869, 'cached_content_token_count': 1494, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2685}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1494}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 86}], 'thoughts_token_count': 98}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07445934206940406, 'model_name': 'gemini-2.5-pro'} id='run--2facb719-6995-41ab-a14c-ab77e276fa1a-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/migrations/test_operations.py'}, 'id': '9c6752b6-5d9f-4a8e-9ccc-76f3d7d654cc', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/migrations/test_optimizer.py'}, 'id': 'f8397d6a-474a-46b5-bd5f-4cf13a1d424e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2685, 'output_tokens': 86, 'total_tokens': 2869, 'input_token_details': {'cache_read': 1494}, 'output_token_details': {'reasoning': 98}}
2025-12-20 21:55:43,822 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the full contents of `tests/migrations/test_operations.py` and `tests/migrations/test_optimizer.py`. Upon initial review, I found a promising test case named `test_create_alter_model_options` within `test_optimizer.py` that appears to directly address the interaction between `CreateModel` and `AlterModelOptions`. I will now proceed to investigate this specific test case more closely.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "tests/migrations/test_optimizer.py", "text": "test_create_alter_model_options"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17900, 'candidates_token_count': 132, 'total_token_count': 18322, 'cached_content_token_count': 1871, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17900}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1871}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 132}], 'thoughts_token_count': 290}, 'finish_reason': 'STOP', 'avg_logprobs': -0.30474408467610675, 'model_name': 'gemini-2.5-pro'} id='run--eba09fe7-cce3-4fa3-8c75-f018889b67d6-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'tests/migrations/test_optimizer.py', 'text': 'test_create_alter_model_options'}, 'id': 'e81c43df-f6d4-448e-ac73-c36fe084de8d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17900, 'output_tokens': 132, 'total_tokens': 18322, 'input_token_details': {'cache_read': 1871}, 'output_token_details': {'reasoning': 290}}
2025-12-20 21:55:48,189 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have analyzed the `test_optimizer.py` file and found the `test_create_alter_model_options` test case. This test confirms that the migration optimizer will squash a `CreateModel` and a subsequent `AlterModelOptions` operation into a single `CreateModel` operation. This is achieved by incorporating the options from the `AlterModelOptions` into the `CreateModel` operation.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 165, 'end_index': 497, 'uri': 'https://github.com/django/django', 'license_': 'BeOpen', 'title': ''}]}, 'usage_metadata': {'prompt_token_count': 26002, 'candidates_token_count': 80, 'total_token_count': 26423, 'cached_content_token_count': 16888, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26002}], 'cache_tokens_details': [{'modality': 1, 'token_count': 16888}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 80}], 'thoughts_token_count': 341}, 'finish_reason': 'STOP', 'avg_logprobs': -0.30468335151672366, 'model_name': 'gemini-2.5-pro'} id='run--2ce4f175-0baf-44d2-a234-b0f2fd8a136d-0' usage_metadata={'input_tokens': 26002, 'output_tokens': 80, 'total_tokens': 26423, 'input_token_details': {'cache_read': 16888}, 'output_token_details': {'reasoning': 341}}
2025-12-20 21:55:48,191 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to analyze these files to find existing test cases that cover the interaction between `CreateModel` and `AlterModelOptions` during migration squashing.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/migrations/test_operations.py
Line number range: 1 - 500
Content:
1. from django.core.exceptions import FieldDoesNotExist
2. from django.db import (
3.     IntegrityError, connection, migrations, models, transaction,
4. )
5. from django.db.migrations.migration import Migration
6. from django.db.migrations.operations.fields import FieldOperation
7. from django.db.migrations.state import ModelState, ProjectState
8. from django.db.transaction import atomic
9. from django.test import SimpleTestCase, override_settings, skipUnlessDBFeature
10. 
11. from .models import FoodManager, FoodQuerySet, UnicodeModel
12. from .test_base import OperationTestBase
13. 
14. 
15. class Mixin:
16.     pass
17. 
18. 
19. class OperationTests(OperationTestBase):
20.     """
21.     Tests running the operations and making sure they do what they say they do.
22.     Each test looks at their state changing, and then their database operation -
23.     both forwards and backwards.
24.     """
25. 
26.     def test_create_model(self):
27.         """
28.         Tests the CreateModel operation.
29.         Most other tests use this operation as part of setup, so check failures here first.
30.         """
31.         operation = migrations.CreateModel(
32.             "Pony",
33.             [
34.                 ("id", models.AutoField(primary_key=True)),
35.                 ("pink", models.IntegerField(default=1)),
36.             ],
37.         )
38.         self.assertEqual(operation.describe(), "Create model Pony")
39.         self.assertEqual(operation.migration_name_fragment, 'pony')
40.         # Test the state alteration
41.         project_state = ProjectState()
42.         new_state = project_state.clone()
43.         operation.state_forwards("test_crmo", new_state)
44.         self.assertEqual(new_state.models["test_crmo", "pony"].name, "Pony")
45.         self.assertEqual(len(new_state.models["test_crmo", "pony"].fields), 2)
46.         # Test the database alteration
47.         self.assertTableNotExists("test_crmo_pony")
48.         with connection.schema_editor() as editor:
49.             operation.database_forwards("test_crmo", editor, project_state, new_state)
50.         self.assertTableExists("test_crmo_pony")
51.         # And test reversal
52.         with connection.schema_editor() as editor:
53.             operation.database_backwards("test_crmo", editor, new_state, project_state)
54.         self.assertTableNotExists("test_crmo_pony")
55.         # And deconstruction
56.         definition = operation.deconstruct()
57.         self.assertEqual(definition[0], "CreateModel")
58.         self.assertEqual(definition[1], [])
59.         self.assertEqual(sorted(definition[2]), ["fields", "name"])
60.         # And default manager not in set
61.         operation = migrations.CreateModel("Foo", fields=[], managers=[("objects", models.Manager())])
62.         definition = operation.deconstruct()
63.         self.assertNotIn('managers', definition[2])
64. 
65.     def test_create_model_with_duplicate_field_name(self):
66.         with self.assertRaisesMessage(ValueError, 'Found duplicate value pink in CreateModel fields argument.'):
67.             migrations.CreateModel(
68.                 "Pony",
69.                 [
70.                     ("id", models.AutoField(primary_key=True)),
71.                     ("pink", models.TextField()),
72.                     ("pink", models.IntegerField(default=1)),
73.                 ],
74.             )
75. 
76.     def test_create_model_with_duplicate_base(self):
77.         message = 'Found duplicate value test_crmo.pony in CreateModel bases argument.'
78.         with self.assertRaisesMessage(ValueError, message):
79.             migrations.CreateModel(
80.                 "Pony",
81.                 fields=[],
82.                 bases=("test_crmo.Pony", "test_crmo.Pony",),
83.             )
84.         with self.assertRaisesMessage(ValueError, message):
85.             migrations.CreateModel(
86.                 "Pony",
87.                 fields=[],
88.                 bases=("test_crmo.Pony", "test_crmo.pony",),
89.             )
90.         message = 'Found duplicate value migrations.unicodemodel in CreateModel bases argument.'
91.         with self.assertRaisesMessage(ValueError, message):
92.             migrations.CreateModel(
93.                 "Pony",
94.                 fields=[],
95.                 bases=(UnicodeModel, UnicodeModel,),
96.             )
97.         with self.assertRaisesMessage(ValueError, message):
98.             migrations.CreateModel(
99.                 "Pony",
100.                 fields=[],
101.                 bases=(UnicodeModel, 'migrations.unicodemodel',),
102.             )
103.         with self.assertRaisesMessage(ValueError, message):
104.             migrations.CreateModel(
105.                 "Pony",
106.                 fields=[],
107.                 bases=(UnicodeModel, 'migrations.UnicodeModel',),
108.             )
109.         message = "Found duplicate value <class 'django.db.models.base.Model'> in CreateModel bases argument."
110.         with self.assertRaisesMessage(ValueError, message):
111.             migrations.CreateModel(
112.                 "Pony",
113.                 fields=[],
114.                 bases=(models.Model, models.Model,),
115.             )
116.         message = "Found duplicate value <class 'migrations.test_operations.Mixin'> in CreateModel bases argument."
117.         with self.assertRaisesMessage(ValueError, message):
118.             migrations.CreateModel(
119.                 "Pony",
120.                 fields=[],
121.                 bases=(Mixin, Mixin,),
122.             )
123. 
124.     def test_create_model_with_duplicate_manager_name(self):
125.         with self.assertRaisesMessage(ValueError, 'Found duplicate value objects in CreateModel managers argument.'):
126.             migrations.CreateModel(
127.                 "Pony",
128.                 fields=[],
129.                 managers=[
130.                     ("objects", models.Manager()),
131.                     ("objects", models.Manager()),
132.                 ],
133.             )
134. 
135.     def test_create_model_with_unique_after(self):
136.         """
137.         Tests the CreateModel operation directly followed by an
138.         AlterUniqueTogether (bug #22844 - sqlite remake issues)
139.         """
140.         operation1 = migrations.CreateModel(
141.             "Pony",
142.             [
143.                 ("id", models.AutoField(primary_key=True)),
144.                 ("pink", models.IntegerField(default=1)),
145.             ],
146.         )
147.         operation2 = migrations.CreateModel(
148.             "Rider",
149.             [
150.                 ("id", models.AutoField(primary_key=True)),
151.                 ("number", models.IntegerField(default=1)),
152.                 ("pony", models.ForeignKey("test_crmoua.Pony", models.CASCADE)),
153.             ],
154.         )
155.         operation3 = migrations.AlterUniqueTogether(
156.             "Rider",
157.             [
158.                 ("number", "pony"),
159.             ],
160.         )
161.         # Test the database alteration
162.         project_state = ProjectState()
163.         self.assertTableNotExists("test_crmoua_pony")
164.         self.assertTableNotExists("test_crmoua_rider")
165.         with connection.schema_editor() as editor:
166.             new_state = project_state.clone()
167.             operation1.state_forwards("test_crmoua", new_state)
168.             operation1.database_forwards("test_crmoua", editor, project_state, new_state)
169.             project_state, new_state = new_state, new_state.clone()
170.             operation2.state_forwards("test_crmoua", new_state)
171.             operation2.database_forwards("test_crmoua", editor, project_state, new_state)
172.             project_state, new_state = new_state, new_state.clone()
173.             operation3.state_forwards("test_crmoua", new_state)
174.             operation3.database_forwards("test_crmoua", editor, project_state, new_state)
175.         self.assertTableExists("test_crmoua_pony")
176.         self.assertTableExists("test_crmoua_rider")
177. 
178.     def test_create_model_m2m(self):
179.         """
180.         Test the creation of a model with a ManyToMany field and the
181.         auto-created "through" model.
182.         """
183.         project_state = self.set_up_test_model("test_crmomm")
184.         operation = migrations.CreateModel(
185.             "Stable",
186.             [
187.                 ("id", models.AutoField(primary_key=True)),
188.                 ("ponies", models.ManyToManyField("Pony", related_name="stables"))
189.             ]
190.         )
191.         # Test the state alteration
192.         new_state = project_state.clone()
193.         operation.state_forwards("test_crmomm", new_state)
194.         # Test the database alteration
195.         self.assertTableNotExists("test_crmomm_stable_ponies")
196.         with connection.schema_editor() as editor:
197.             operation.database_forwards("test_crmomm", editor, project_state, new_state)
198.         self.assertTableExists("test_crmomm_stable")
199.         self.assertTableExists("test_crmomm_stable_ponies")
200.         self.assertColumnNotExists("test_crmomm_stable", "ponies")
201.         # Make sure the M2M field actually works
202.         with atomic():
203.             Pony = new_state.apps.get_model("test_crmomm", "Pony")
204.             Stable = new_state.apps.get_model("test_crmomm", "Stable")
205.             stable = Stable.objects.create()
206.             p1 = Pony.objects.create(pink=False, weight=4.55)
207.             p2 = Pony.objects.create(pink=True, weight=5.43)
208.             stable.ponies.add(p1, p2)
209.             self.assertEqual(stable.ponies.count(), 2)
210.             stable.ponies.all().delete()
211.         # And test reversal
212.         with connection.schema_editor() as editor:
213.             operation.database_backwards("test_crmomm", editor, new_state, project_state)
214.         self.assertTableNotExists("test_crmomm_stable")
215.         self.assertTableNotExists("test_crmomm_stable_ponies")
216. 
217.     def test_create_model_inheritance(self):
218.         """
219.         Tests the CreateModel operation on a multi-table inheritance setup.
220.         """
221.         project_state = self.set_up_test_model("test_crmoih")
222.         # Test the state alteration
223.         operation = migrations.CreateModel(
224.             "ShetlandPony",
225.             [
226.                 ('pony_ptr', models.OneToOneField(
227.                     'test_crmoih.Pony',
228.                     models.CASCADE,
229.                     auto_created=True,
230.                     primary_key=True,
231.                     to_field='id',
232.                     serialize=False,
233.                 )),
234.                 ("cuteness", models.IntegerField(default=1)),
235.             ],
236.         )
237.         new_state = project_state.clone()
238.         operation.state_forwards("test_crmoih", new_state)
239.         self.assertIn(("test_crmoih", "shetlandpony"), new_state.models)
240.         # Test the database alteration
241.         self.assertTableNotExists("test_crmoih_shetlandpony")
242.         with connection.schema_editor() as editor:
243.             operation.database_forwards("test_crmoih", editor, project_state, new_state)
244.         self.assertTableExists("test_crmoih_shetlandpony")
245.         # And test reversal
246.         with connection.schema_editor() as editor:
247.             operation.database_backwards("test_crmoih", editor, new_state, project_state)
248.         self.assertTableNotExists("test_crmoih_shetlandpony")
249. 
250.     def test_create_proxy_model(self):
251.         """
252.         CreateModel ignores proxy models.
253.         """
254.         project_state = self.set_up_test_model("test_crprmo")
255.         # Test the state alteration
256.         operation = migrations.CreateModel(
257.             "ProxyPony",
258.             [],
259.             options={"proxy": True},
260.             bases=("test_crprmo.Pony",),
261.         )
262.         self.assertEqual(operation.describe(), "Create proxy model ProxyPony")
263.         new_state = project_state.clone()
264.         operation.state_forwards("test_crprmo", new_state)
265.         self.assertIn(("test_crprmo", "proxypony"), new_state.models)
266.         # Test the database alteration
267.         self.assertTableNotExists("test_crprmo_proxypony")
268.         self.assertTableExists("test_crprmo_pony")
269.         with connection.schema_editor() as editor:
270.             operation.database_forwards("test_crprmo", editor, project_state, new_state)
271.         self.assertTableNotExists("test_crprmo_proxypony")
272.         self.assertTableExists("test_crprmo_pony")
273.         # And test reversal
274.         with connection.schema_editor() as editor:
275.             operation.database_backwards("test_crprmo", editor, new_state, project_state)
276.         self.assertTableNotExists("test_crprmo_proxypony")
277.         self.assertTableExists("test_crprmo_pony")
278.         # And deconstruction
279.         definition = operation.deconstruct()
280.         self.assertEqual(definition[0], "CreateModel")
281.         self.assertEqual(definition[1], [])
282.         self.assertEqual(sorted(definition[2]), ["bases", "fields", "name", "options"])
283. 
284.     def test_create_unmanaged_model(self):
285.         """
286.         CreateModel ignores unmanaged models.
287.         """
288.         project_state = self.set_up_test_model("test_crummo")
289.         # Test the state alteration
290.         operation = migrations.CreateModel(
291.             "UnmanagedPony",
292.             [],
293.             options={"proxy": True},
294.             bases=("test_crummo.Pony",),
295.         )
296.         self.assertEqual(operation.describe(), "Create proxy model UnmanagedPony")
297.         new_state = project_state.clone()
298.         operation.state_forwards("test_crummo", new_state)
299.         self.assertIn(("test_crummo", "unmanagedpony"), new_state.models)
300.         # Test the database alteration
301.         self.assertTableNotExists("test_crummo_unmanagedpony")
302.         self.assertTableExists("test_crummo_pony")
303.         with connection.schema_editor() as editor:
304.             operation.database_forwards("test_crummo", editor, project_state, new_state)
305.         self.assertTableNotExists("test_crummo_unmanagedpony")
306.         self.assertTableExists("test_crummo_pony")
307.         # And test reversal
308.         with connection.schema_editor() as editor:
309.             operation.database_backwards("test_crummo", editor, new_state, project_state)
310.         self.assertTableNotExists("test_crummo_unmanagedpony")
311.         self.assertTableExists("test_crummo_pony")
312. 
313.     @skipUnlessDBFeature('supports_table_check_constraints')
314.     def test_create_model_with_constraint(self):
315.         where = models.Q(pink__gt=2)
316.         check_constraint = models.CheckConstraint(check=where, name='test_constraint_pony_pink_gt_2')
317.         operation = migrations.CreateModel(
318.             "Pony",
319.             [
320.                 ("id", models.AutoField(primary_key=True)),
321.                 ("pink", models.IntegerField(default=3)),
322.             ],
323.             options={'constraints': [check_constraint]},
324.         )
325. 
326.         # Test the state alteration
327.         project_state = ProjectState()
328.         new_state = project_state.clone()
329.         operation.state_forwards("test_crmo", new_state)
330.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
331. 
332.         # Test database alteration
333.         self.assertTableNotExists("test_crmo_pony")
334.         with connection.schema_editor() as editor:
335.             operation.database_forwards("test_crmo", editor, project_state, new_state)
336.         self.assertTableExists("test_crmo_pony")
337.         with connection.cursor() as cursor:
338.             with self.assertRaises(IntegrityError):
339.                 cursor.execute("INSERT INTO test_crmo_pony (id, pink) VALUES (1, 1)")
340. 
341.         # Test reversal
342.         with connection.schema_editor() as editor:
343.             operation.database_backwards("test_crmo", editor, new_state, project_state)
344.         self.assertTableNotExists("test_crmo_pony")
345. 
346.         # Test deconstruction
347.         definition = operation.deconstruct()
348.         self.assertEqual(definition[0], "CreateModel")
349.         self.assertEqual(definition[1], [])
350.         self.assertEqual(definition[2]['options']['constraints'], [check_constraint])
351. 
352.     def test_create_model_with_partial_unique_constraint(self):
353.         partial_unique_constraint = models.UniqueConstraint(
354.             fields=['pink'],
355.             condition=models.Q(weight__gt=5),
356.             name='test_constraint_pony_pink_for_weight_gt_5_uniq',
357.         )
358.         operation = migrations.CreateModel(
359.             'Pony',
360.             [
361.                 ('id', models.AutoField(primary_key=True)),
362.                 ('pink', models.IntegerField(default=3)),
363.                 ('weight', models.FloatField()),
364.             ],
365.             options={'constraints': [partial_unique_constraint]},
366.         )
367.         # Test the state alteration
368.         project_state = ProjectState()
369.         new_state = project_state.clone()
370.         operation.state_forwards('test_crmo', new_state)
371.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
372.         # Test database alteration
373.         self.assertTableNotExists('test_crmo_pony')
374.         with connection.schema_editor() as editor:
375.             operation.database_forwards('test_crmo', editor, project_state, new_state)
376.         self.assertTableExists('test_crmo_pony')
377.         # Test constraint works
378.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
379.         Pony.objects.create(pink=1, weight=4.0)
380.         Pony.objects.create(pink=1, weight=4.0)
381.         Pony.objects.create(pink=1, weight=6.0)
382.         if connection.features.supports_partial_indexes:
383.             with self.assertRaises(IntegrityError):
384.                 Pony.objects.create(pink=1, weight=7.0)
385.         else:
386.             Pony.objects.create(pink=1, weight=7.0)
387.         # Test reversal
388.         with connection.schema_editor() as editor:
389.             operation.database_backwards('test_crmo', editor, new_state, project_state)
390.         self.assertTableNotExists('test_crmo_pony')
391.         # Test deconstruction
392.         definition = operation.deconstruct()
393.         self.assertEqual(definition[0], 'CreateModel')
394.         self.assertEqual(definition[1], [])
395.         self.assertEqual(definition[2]['options']['constraints'], [partial_unique_constraint])
396. 
397.     def test_create_model_with_deferred_unique_constraint(self):
398.         deferred_unique_constraint = models.UniqueConstraint(
399.             fields=['pink'],
400.             name='deferrable_pink_constraint',
401.             deferrable=models.Deferrable.DEFERRED,
402.         )
403.         operation = migrations.CreateModel(
404.             'Pony',
405.             [
406.                 ('id', models.AutoField(primary_key=True)),
407.                 ('pink', models.IntegerField(default=3)),
408.             ],
409.             options={'constraints': [deferred_unique_constraint]},
410.         )
411.         project_state = ProjectState()
412.         new_state = project_state.clone()
413.         operation.state_forwards('test_crmo', new_state)
414.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
415.         self.assertTableNotExists('test_crmo_pony')
416.         # Create table.
417.         with connection.schema_editor() as editor:
418.             operation.database_forwards('test_crmo', editor, project_state, new_state)
419.         self.assertTableExists('test_crmo_pony')
420.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
421.         Pony.objects.create(pink=1)
422.         if connection.features.supports_deferrable_unique_constraints:
423.             # Unique constraint is deferred.
424.             with transaction.atomic():
425.                 obj = Pony.objects.create(pink=1)
426.                 obj.pink = 2
427.                 obj.save()
428.             # Constraint behavior can be changed with SET CONSTRAINTS.
429.             with self.assertRaises(IntegrityError):
430.                 with transaction.atomic(), connection.cursor() as cursor:
431.                     quoted_name = connection.ops.quote_name(deferred_unique_constraint.name)
432.                     cursor.execute('SET CONSTRAINTS %s IMMEDIATE' % quoted_name)
433.                     obj = Pony.objects.create(pink=1)
434.                     obj.pink = 3
435.                     obj.save()
436.         else:
437.             Pony.objects.create(pink=1)
438.         # Reversal.
439.         with connection.schema_editor() as editor:
440.             operation.database_backwards('test_crmo', editor, new_state, project_state)
441.         self.assertTableNotExists('test_crmo_pony')
442.         # Deconstruction.
443.         definition = operation.deconstruct()
444.         self.assertEqual(definition[0], 'CreateModel')
445.         self.assertEqual(definition[1], [])
446.         self.assertEqual(
447.             definition[2]['options']['constraints'],
448.             [deferred_unique_constraint],
449.         )
450. 
451.     @skipUnlessDBFeature('supports_covering_indexes')
452.     def test_create_model_with_covering_unique_constraint(self):
453.         covering_unique_constraint = models.UniqueConstraint(
454.             fields=['pink'],
455.             include=['weight'],
456.             name='test_constraint_pony_pink_covering_weight',
457.         )
458.         operation = migrations.CreateModel(
459.             'Pony',
460.             [
461.                 ('id', models.AutoField(primary_key=True)),
462.                 ('pink', models.IntegerField(default=3)),
463.                 ('weight', models.FloatField()),
464.             ],
465.             options={'constraints': [covering_unique_constraint]},
466.         )
467.         project_state = ProjectState()
468.         new_state = project_state.clone()
469.         operation.state_forwards('test_crmo', new_state)
470.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
471.         self.assertTableNotExists('test_crmo_pony')
472.         # Create table.
473.         with connection.schema_editor() as editor:
474.             operation.database_forwards('test_crmo', editor, project_state, new_state)
475.         self.assertTableExists('test_crmo_pony')
476.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
477.         Pony.objects.create(pink=1, weight=4.0)
478.         with self.assertRaises(IntegrityError):
479.             Pony.objects.create(pink=1, weight=7.0)
480.         # Reversal.
481.         with connection.schema_editor() as editor:
482.             operation.database_backwards('test_crmo', editor, new_state, project_state)
483.         self.assertTableNotExists('test_crmo_pony')
484.         # Deconstruction.
485.         definition = operation.deconstruct()
486.         self.assertEqual(definition[0], 'CreateModel')
487.         self.assertEqual(definition[1], [])
488.         self.assertEqual(
489.             definition[2]['options']['constraints'],
490.             [covering_unique_constraint],
491.         )
492. 
493.     def test_create_model_managers(self):
494.         """
495.         The managers on a model are set.
496.         """
497.         project_state = self.set_up_test_model("test_cmoma")
498.         # Test the state alteration
499.         operation = migrations.CreateModel(
500.             "Food",


File: tests/migrations/test_optimizer.py
Line number range: 1 - 500
Content:
1. from django.db import migrations, models
2. from django.db.migrations import operations
3. from django.db.migrations.optimizer import MigrationOptimizer
4. from django.db.migrations.serializer import serializer_factory
5. from django.test import SimpleTestCase
6. 
7. from .models import EmptyManager, UnicodeModel
8. 
9. 
10. class OptimizerTests(SimpleTestCase):
11.     """
12.     Tests the migration autodetector.
13.     """
14. 
15.     def optimize(self, operations, app_label):
16.         """
17.         Handy shortcut for getting results + number of loops
18.         """
19.         optimizer = MigrationOptimizer()
20.         return optimizer.optimize(operations, app_label), optimizer._iterations
21. 
22.     def serialize(self, value):
23.         return serializer_factory(value).serialize()[0]
24. 
25.     def assertOptimizesTo(self, operations, expected, exact=None, less_than=None, app_label=None):
26.         result, iterations = self.optimize(operations, app_label or 'migrations')
27.         result = [self.serialize(f) for f in result]
28.         expected = [self.serialize(f) for f in expected]
29.         self.assertEqual(expected, result)
30.         if exact is not None and iterations != exact:
31.             raise self.failureException(
32.                 "Optimization did not take exactly %s iterations (it took %s)" % (exact, iterations)
33.             )
34.         if less_than is not None and iterations >= less_than:
35.             raise self.failureException(
36.                 "Optimization did not take less than %s iterations (it took %s)" % (less_than, iterations)
37.             )
38. 
39.     def assertDoesNotOptimize(self, operations, **kwargs):
40.         self.assertOptimizesTo(operations, operations, **kwargs)
41. 
42.     def test_none_app_label(self):
43.         optimizer = MigrationOptimizer()
44.         with self.assertRaisesMessage(TypeError, 'app_label must be a str'):
45.             optimizer.optimize([], None)
46. 
47.     def test_single(self):
48.         """
49.         The optimizer does nothing on a single operation,
50.         and that it does it in just one pass.
51.         """
52.         self.assertOptimizesTo(
53.             [migrations.DeleteModel("Foo")],
54.             [migrations.DeleteModel("Foo")],
55.             exact=1,
56.         )
57. 
58.     def test_create_delete_model(self):
59.         """
60.         CreateModel and DeleteModel should collapse into nothing.
61.         """
62.         self.assertOptimizesTo(
63.             [
64.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
65.                 migrations.DeleteModel("Foo"),
66.             ],
67.             [],
68.         )
69. 
70.     def test_create_rename_model(self):
71.         """
72.         CreateModel should absorb RenameModels.
73.         """
74.         managers = [('objects', EmptyManager())]
75.         self.assertOptimizesTo(
76.             [
77.                 migrations.CreateModel(
78.                     name="Foo",
79.                     fields=[("name", models.CharField(max_length=255))],
80.                     options={'verbose_name': 'Foo'},
81.                     bases=(UnicodeModel,),
82.                     managers=managers,
83.                 ),
84.                 migrations.RenameModel("Foo", "Bar"),
85.             ],
86.             [
87.                 migrations.CreateModel(
88.                     "Bar",
89.                     [("name", models.CharField(max_length=255))],
90.                     options={'verbose_name': 'Foo'},
91.                     bases=(UnicodeModel,),
92.                     managers=managers,
93.                 )
94.             ],
95.         )
96. 
97.     def test_rename_model_self(self):
98.         """
99.         RenameModels should absorb themselves.
100.         """
101.         self.assertOptimizesTo(
102.             [
103.                 migrations.RenameModel("Foo", "Baa"),
104.                 migrations.RenameModel("Baa", "Bar"),
105.             ],
106.             [
107.                 migrations.RenameModel("Foo", "Bar"),
108.             ],
109.         )
110. 
111.     def test_create_alter_model_options(self):
112.         self.assertOptimizesTo(
113.             [
114.                 migrations.CreateModel('Foo', fields=[]),
115.                 migrations.AlterModelOptions(name='Foo', options={'verbose_name_plural': 'Foozes'}),
116.             ],
117.             [
118.                 migrations.CreateModel('Foo', fields=[], options={'verbose_name_plural': 'Foozes'}),
119.             ]
120.         )
121. 
122.     def _test_create_alter_foo_delete_model(self, alter_foo):
123.         """
124.         CreateModel, AlterModelTable, AlterUniqueTogether/AlterIndexTogether/
125.         AlterOrderWithRespectTo, and DeleteModel should collapse into nothing.
126.         """
127.         self.assertOptimizesTo(
128.             [
129.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
130.                 migrations.AlterModelTable("Foo", "woohoo"),
131.                 alter_foo,
132.                 migrations.DeleteModel("Foo"),
133.             ],
134.             [],
135.         )
136. 
137.     def test_create_alter_unique_delete_model(self):
138.         self._test_create_alter_foo_delete_model(migrations.AlterUniqueTogether("Foo", [["a", "b"]]))
139. 
140.     def test_create_alter_index_delete_model(self):
141.         self._test_create_alter_foo_delete_model(migrations.AlterIndexTogether("Foo", [["a", "b"]]))
142. 
143.     def test_create_alter_owrt_delete_model(self):
144.         self._test_create_alter_foo_delete_model(migrations.AlterOrderWithRespectTo("Foo", "a"))
145. 
146.     def _test_alter_alter_model(self, alter_foo, alter_bar):
147.         """
148.         Two AlterUniqueTogether/AlterIndexTogether/AlterOrderWithRespectTo
149.         should collapse into the second.
150.         """
151.         self.assertOptimizesTo(
152.             [
153.                 alter_foo,
154.                 alter_bar,
155.             ],
156.             [
157.                 alter_bar,
158.             ],
159.         )
160. 
161.     def test_alter_alter_table_model(self):
162.         self._test_alter_alter_model(
163.             migrations.AlterModelTable("Foo", "a"),
164.             migrations.AlterModelTable("Foo", "b"),
165.         )
166. 
167.     def test_alter_alter_unique_model(self):
168.         self._test_alter_alter_model(
169.             migrations.AlterUniqueTogether("Foo", [["a", "b"]]),
170.             migrations.AlterUniqueTogether("Foo", [["a", "c"]]),
171.         )
172. 
173.     def test_alter_alter_index_model(self):
174.         self._test_alter_alter_model(
175.             migrations.AlterIndexTogether("Foo", [["a", "b"]]),
176.             migrations.AlterIndexTogether("Foo", [["a", "c"]]),
177.         )
178. 
179.     def test_alter_alter_owrt_model(self):
180.         self._test_alter_alter_model(
181.             migrations.AlterOrderWithRespectTo("Foo", "a"),
182.             migrations.AlterOrderWithRespectTo("Foo", "b"),
183.         )
184. 
185.     def test_optimize_through_create(self):
186.         """
187.         We should be able to optimize away create/delete through a create or delete
188.         of a different model, but only if the create operation does not mention the model
189.         at all.
190.         """
191.         # These should work
192.         self.assertOptimizesTo(
193.             [
194.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
195.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
196.                 migrations.DeleteModel("Foo"),
197.             ],
198.             [
199.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
200.             ],
201.         )
202.         self.assertOptimizesTo(
203.             [
204.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
205.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
206.                 migrations.DeleteModel("Bar"),
207.                 migrations.DeleteModel("Foo"),
208.             ],
209.             [],
210.         )
211.         self.assertOptimizesTo(
212.             [
213.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
214.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
215.                 migrations.DeleteModel("Foo"),
216.                 migrations.DeleteModel("Bar"),
217.             ],
218.             [],
219.         )
220.         # Operations should be optimized if the FK references a model from the
221.         # other app.
222.         self.assertOptimizesTo(
223.             [
224.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
225.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
226.                 migrations.DeleteModel("Foo"),
227.             ],
228.             [
229.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
230.             ],
231.             app_label="otherapp",
232.         )
233.         # But it shouldn't work if a FK references a model with the same
234.         # app_label.
235.         self.assertDoesNotOptimize(
236.             [
237.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
238.                 migrations.CreateModel('Bar', [('other', models.ForeignKey('Foo', models.CASCADE))]),
239.                 migrations.DeleteModel('Foo'),
240.             ],
241.         )
242.         self.assertDoesNotOptimize(
243.             [
244.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
245.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
246.                 migrations.DeleteModel("Foo"),
247.             ],
248.             app_label="testapp",
249.         )
250.         # This should not work - bases should block it
251.         self.assertDoesNotOptimize(
252.             [
253.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
254.                 migrations.CreateModel('Bar', [('size', models.IntegerField())], bases=('Foo',)),
255.                 migrations.DeleteModel('Foo'),
256.             ],
257.         )
258.         self.assertDoesNotOptimize(
259.             [
260.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
261.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
262.                 migrations.DeleteModel("Foo"),
263.             ],
264.             app_label='testapp',
265.         )
266.         # The same operations should be optimized if app_label and none of
267.         # bases belong to that app.
268.         self.assertOptimizesTo(
269.             [
270.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
271.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
272.                 migrations.DeleteModel("Foo"),
273.             ],
274.             [
275.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
276.             ],
277.             app_label="otherapp",
278.         )
279.         # But it shouldn't work if some of bases belongs to the specified app.
280.         self.assertDoesNotOptimize(
281.             [
282.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
283.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
284.                 migrations.DeleteModel("Foo"),
285.             ],
286.             app_label="testapp",
287.         )
288. 
289.         self.assertOptimizesTo(
290.             [
291.                 migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
292.                 migrations.CreateModel('Person', [('name', models.CharField(max_length=255))]),
293.                 migrations.AddField('book', 'author', models.ForeignKey('test_app.Person', models.CASCADE)),
294.                 migrations.CreateModel('Review', [('book', models.ForeignKey('test_app.Book', models.CASCADE))]),
295.                 migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
296.                 migrations.AddField('review', 'reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
297.                 migrations.RemoveField('book', 'author'),
298.                 migrations.DeleteModel('Person'),
299.             ],
300.             [
301.                 migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
302.                 migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
303.                 migrations.CreateModel('Review', [
304.                     ('book', models.ForeignKey('test_app.Book', models.CASCADE)),
305.                     ('reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
306.                 ]),
307.             ],
308.             app_label='test_app',
309.         )
310. 
311.     def test_create_model_add_field(self):
312.         """
313.         AddField should optimize into CreateModel.
314.         """
315.         managers = [('objects', EmptyManager())]
316.         self.assertOptimizesTo(
317.             [
318.                 migrations.CreateModel(
319.                     name="Foo",
320.                     fields=[("name", models.CharField(max_length=255))],
321.                     options={'verbose_name': 'Foo'},
322.                     bases=(UnicodeModel,),
323.                     managers=managers,
324.                 ),
325.                 migrations.AddField("Foo", "age", models.IntegerField()),
326.             ],
327.             [
328.                 migrations.CreateModel(
329.                     name="Foo",
330.                     fields=[
331.                         ("name", models.CharField(max_length=255)),
332.                         ("age", models.IntegerField()),
333.                     ],
334.                     options={'verbose_name': 'Foo'},
335.                     bases=(UnicodeModel,),
336.                     managers=managers,
337.                 ),
338.             ],
339.         )
340. 
341.     def test_create_model_reordering(self):
342.         """
343.         AddField optimizes into CreateModel if it's a FK to a model that's
344.         between them (and there's no FK in the other direction), by changing
345.         the order of the CreateModel operations.
346.         """
347.         self.assertOptimizesTo(
348.             [
349.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
350.                 migrations.CreateModel('Link', [('url', models.TextField())]),
351.                 migrations.AddField('Foo', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
352.             ],
353.             [
354.                 migrations.CreateModel('Link', [('url', models.TextField())]),
355.                 migrations.CreateModel('Foo', [
356.                     ('name', models.CharField(max_length=255)),
357.                     ('link', models.ForeignKey('migrations.Link', models.CASCADE))
358.                 ]),
359.             ],
360.         )
361. 
362.     def test_create_model_reordering_circular_fk(self):
363.         """
364.         CreateModel reordering behavior doesn't result in an infinite loop if
365.         there are FKs in both directions.
366.         """
367.         self.assertOptimizesTo(
368.             [
369.                 migrations.CreateModel('Bar', [('url', models.TextField())]),
370.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
371.                 migrations.AddField('Bar', 'foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
372.                 migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
373.             ],
374.             [
375.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
376.                 migrations.CreateModel('Bar', [
377.                     ('url', models.TextField()),
378.                     ('foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
379.                 ]),
380.                 migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
381.             ],
382.         )
383. 
384.     def test_create_model_no_reordering_for_unrelated_fk(self):
385.         """
386.         CreateModel order remains unchanged if the later AddField operation
387.         isn't a FK between them.
388.         """
389.         self.assertDoesNotOptimize(
390.             [
391.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
392.                 migrations.CreateModel('Link', [('url', models.TextField())]),
393.                 migrations.AddField('Other', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
394.             ],
395.         )
396. 
397.     def test_create_model_no_reordering_of_inherited_model(self):
398.         """
399.         A CreateModel that inherits from another isn't reordered to avoid
400.         moving it earlier than its parent CreateModel operation.
401.         """
402.         self.assertOptimizesTo(
403.             [
404.                 migrations.CreateModel('Other', [('foo', models.CharField(max_length=255))]),
405.                 migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
406.                 migrations.CreateModel(
407.                     'ChildModel',
408.                     [('baz', models.CharField(max_length=255))],
409.                     bases=('migrations.parentmodel',),
410.                 ),
411.                 migrations.AddField('Other', 'fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
412.             ],
413.             [
414.                 migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
415.                 migrations.CreateModel(
416.                     'ChildModel',
417.                     [('baz', models.CharField(max_length=255))],
418.                     bases=('migrations.parentmodel',),
419.                 ),
420.                 migrations.CreateModel(
421.                     'Other', [
422.                         ('foo', models.CharField(max_length=255)),
423.                         ('fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
424.                     ]
425.                 ),
426.             ],
427.         )
428. 
429.     def test_create_model_add_field_not_through_m2m_through(self):
430.         """
431.         AddField should NOT optimize into CreateModel if it's an M2M using a
432.         through that's created between them.
433.         """
434.         self.assertDoesNotOptimize(
435.             [
436.                 migrations.CreateModel('Employee', []),
437.                 migrations.CreateModel('Employer', []),
438.                 migrations.CreateModel('Employment', [
439.                     ('employee', models.ForeignKey('migrations.Employee', models.CASCADE)),
440.                     ('employment', models.ForeignKey('migrations.Employer', models.CASCADE)),
441.                 ]),
442.                 migrations.AddField(
443.                     'Employer', 'employees', models.ManyToManyField(
444.                         'migrations.Employee', through='migrations.Employment',
445.                     )
446.                 ),
447.             ],
448.         )
449. 
450.     def test_create_model_alter_field(self):
451.         """
452.         AlterField should optimize into CreateModel.
453.         """
454.         managers = [('objects', EmptyManager())]
455.         self.assertOptimizesTo(
456.             [
457.                 migrations.CreateModel(
458.                     name="Foo",
459.                     fields=[("name", models.CharField(max_length=255))],
460.                     options={'verbose_name': 'Foo'},
461.                     bases=(UnicodeModel,),
462.                     managers=managers,
463.                 ),
464.                 migrations.AlterField("Foo", "name", models.IntegerField()),
465.             ],
466.             [
467.                 migrations.CreateModel(
468.                     name="Foo",
469.                     fields=[
470.                         ("name", models.IntegerField()),
471.                     ],
472.                     options={'verbose_name': 'Foo'},
473.                     bases=(UnicodeModel,),
474.                     managers=managers,
475.                 ),
476.             ],
477.         )
478. 
479.     def test_create_model_rename_field(self):
480.         """
481.         RenameField should optimize into CreateModel.
482.         """
483.         managers = [('objects', EmptyManager())]
484.         self.assertOptimizesTo(
485.             [
486.                 migrations.CreateModel(
487.                     name="Foo",
488.                     fields=[("name", models.CharField(max_length=255))],
489.                     options={'verbose_name': 'Foo'},
490.                     bases=(UnicodeModel,),
491.                     managers=managers,
492.                 ),
493.                 migrations.RenameField("Foo", "name", "title"),
494.             ],
495.             [
496.                 migrations.CreateModel(
497.                     name="Foo",
498.                     fields=[
499.                         ("title", models.CharField(max_length=255)),
500.                     ],


File: tests/migrations/test_optimizer.py
Line number range: 10 - 832
Content:
class OptimizerTests(SimpleTestCase):
    """
    Tests the migration autodetector.
    """

    def optimize(self, operations, app_label):
        """
        Handy shortcut for getting results + number of loops
        """
        optimizer = MigrationOptimizer()
        return optimizer.optimize(operations, app_label), optimizer._iterations

    def serialize(self, value):
        return serializer_factory(value).serialize()[0]

    def assertOptimizesTo(self, operations, expected, exact=None, less_than=None, app_label=None):
        result, iterations = self.optimize(operations, app_label or 'migrations')
        result = [self.serialize(f) for f in result]
        expected = [self.serialize(f) for f in expected]
        self.assertEqual(expected, result)
        if exact is not None and iterations != exact:
            raise self.failureException(
                "Optimization did not take exactly %s iterations (it took %s)" % (exact, iterations)
            )
        if less_than is not None and iterations >= less_than:
            raise self.failureException(
                "Optimization did not take less than %s iterations (it took %s)" % (less_than, iterations)
            )

    def assertDoesNotOptimize(self, operations, **kwargs):
        self.assertOptimizesTo(operations, operations, **kwargs)

    def test_none_app_label(self):
        optimizer = MigrationOptimizer()
        with self.assertRaisesMessage(TypeError, 'app_label must be a str'):
            optimizer.optimize([], None)

    def test_single(self):
        """
        The optimizer does nothing on a single operation,
        and that it does it in just one pass.
        """
        self.assertOptimizesTo(
            [migrations.DeleteModel("Foo")],
            [migrations.DeleteModel("Foo")],
            exact=1,
        )

    def test_create_delete_model(self):
        """
        CreateModel and DeleteModel should collapse into nothing.
        """
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.DeleteModel("Foo"),
            ],
            [],
        )

    def test_create_rename_model(self):
        """
        CreateModel should absorb RenameModels.
        """
        managers = [('objects', EmptyManager())]
        self.assertOptimizesTo(
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[("name", models.CharField(max_length=255))],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
                migrations.RenameModel("Foo", "Bar"),
            ],
            [
                migrations.CreateModel(
                    "Bar",
                    [("name", models.CharField(max_length=255))],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                )
            ],
        )

    def test_rename_model_self(self):
        """
        RenameModels should absorb themselves.
        """
        self.assertOptimizesTo(
            [
                migrations.RenameModel("Foo", "Baa"),
                migrations.RenameModel("Baa", "Bar"),
            ],
            [
                migrations.RenameModel("Foo", "Bar"),
            ],
        )

    def test_create_alter_model_options(self):
        self.assertOptimizesTo(
            [
                migrations.CreateModel('Foo', fields=[]),
                migrations.AlterModelOptions(name='Foo', options={'verbose_name_plural': 'Foozes'}),
            ],
            [
                migrations.CreateModel('Foo', fields=[], options={'verbose_name_plural': 'Foozes'}),
            ]
        )

    def _test_create_alter_foo_delete_model(self, alter_foo):
        """
        CreateModel, AlterModelTable, AlterUniqueTogether/AlterIndexTogether/
        AlterOrderWithRespectTo, and DeleteModel should collapse into nothing.
        """
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.AlterModelTable("Foo", "woohoo"),
                alter_foo,
                migrations.DeleteModel("Foo"),
            ],
            [],
        )

    def test_create_alter_unique_delete_model(self):
        self._test_create_alter_foo_delete_model(migrations.AlterUniqueTogether("Foo", [["a", "b"]]))

    def test_create_alter_index_delete_model(self):
        self._test_create_alter_foo_delete_model(migrations.AlterIndexTogether("Foo", [["a", "b"]]))

    def test_create_alter_owrt_delete_model(self):
        self._test_create_alter_foo_delete_model(migrations.AlterOrderWithRespectTo("Foo", "a"))

    def _test_alter_alter_model(self, alter_foo, alter_bar):
        """
        Two AlterUniqueTogether/AlterIndexTogether/AlterOrderWithRespectTo
        should collapse into the second.
        """
        self.assertOptimizesTo(
            [
                alter_foo,
                alter_bar,
            ],
            [
                alter_bar,
            ],
        )

    def test_alter_alter_table_model(self):
        self._test_alter_alter_model(
            migrations.AlterModelTable("Foo", "a"),
            migrations.AlterModelTable("Foo", "b"),
        )

    def test_alter_alter_unique_model(self):
        self._test_alter_alter_model(
            migrations.AlterUniqueTogether("Foo", [["a", "b"]]),
            migrations.AlterUniqueTogether("Foo", [["a", "c"]]),
        )

    def test_alter_alter_index_model(self):
        self._test_alter_alter_model(
            migrations.AlterIndexTogether("Foo", [["a", "b"]]),
            migrations.AlterIndexTogether("Foo", [["a", "c"]]),
        )

    def test_alter_alter_owrt_model(self):
        self._test_alter_alter_model(
            migrations.AlterOrderWithRespectTo("Foo", "a"),
            migrations.AlterOrderWithRespectTo("Foo", "b"),
        )

    def test_optimize_through_create(self):
        """
        We should be able to optimize away create/delete through a create or delete
        of a different model, but only if the create operation does not mention the model
        at all.
        """
        # These should work
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("size", models.IntegerField())]),
                migrations.DeleteModel("Foo"),
            ],
            [
                migrations.CreateModel("Bar", [("size", models.IntegerField())]),
            ],
        )
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("size", models.IntegerField())]),
                migrations.DeleteModel("Bar"),
                migrations.DeleteModel("Foo"),
            ],
            [],
        )
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("size", models.IntegerField())]),
                migrations.DeleteModel("Foo"),
                migrations.DeleteModel("Bar"),
            ],
            [],
        )
        # Operations should be optimized if the FK references a model from the
        # other app.
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
                migrations.DeleteModel("Foo"),
            ],
            [
                migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
            ],
            app_label="otherapp",
        )
        # But it shouldn't work if a FK references a model with the same
        # app_label.
        self.assertDoesNotOptimize(
            [
                migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Bar', [('other', models.ForeignKey('Foo', models.CASCADE))]),
                migrations.DeleteModel('Foo'),
            ],
        )
        self.assertDoesNotOptimize(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
                migrations.DeleteModel("Foo"),
            ],
            app_label="testapp",
        )
        # This should not work - bases should block it
        self.assertDoesNotOptimize(
            [
                migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Bar', [('size', models.IntegerField())], bases=('Foo',)),
                migrations.DeleteModel('Foo'),
            ],
        )
        self.assertDoesNotOptimize(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
                migrations.DeleteModel("Foo"),
            ],
            app_label='testapp',
        )
        # The same operations should be optimized if app_label and none of
        # bases belong to that app.
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
                migrations.DeleteModel("Foo"),
            ],
            [
                migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
            ],
            app_label="otherapp",
        )
        # But it shouldn't work if some of bases belongs to the specified app.
        self.assertDoesNotOptimize(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
                migrations.DeleteModel("Foo"),
            ],
            app_label="testapp",
        )

        self.assertOptimizesTo(
            [
                migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Person', [('name', models.CharField(max_length=255))]),
                migrations.AddField('book', 'author', models.ForeignKey('test_app.Person', models.CASCADE)),
                migrations.CreateModel('Review', [('book', models.ForeignKey('test_app.Book', models.CASCADE))]),
                migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
                migrations.AddField('review', 'reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
                migrations.RemoveField('book', 'author'),
                migrations.DeleteModel('Person'),
            ],
            [
                migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Review', [
                    ('book', models.ForeignKey('test_app.Book', models.CASCADE)),
                    ('reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
                ]),
            ],
            app_label='test_app',
        )

    def test_create_model_add_field(self):
        """
        AddField should optimize into CreateModel.
        """
        managers = [('objects', EmptyManager())]
        self.assertOptimizesTo(
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[("name", models.CharField(max_length=255))],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
                migrations.AddField("Foo", "age", models.IntegerField()),
            ],
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[
                        ("name", models.CharField(max_length=255)),
                        ("age", models.IntegerField()),
                    ],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
            ],
        )

    def test_create_model_reordering(self):
        """
        AddField optimizes into CreateModel if it's a FK to a model that's
        between them (and there's no FK in the other direction), by changing
        the order of the CreateModel operations.
        """
        self.assertOptimizesTo(
            [
                migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Link', [('url', models.TextField())]),
                migrations.AddField('Foo', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
            ],
            [
                migrations.CreateModel('Link', [('url', models.TextField())]),
                migrations.CreateModel('Foo', [
                    ('name', models.CharField(max_length=255)),
                    ('link', models.ForeignKey('migrations.Link', models.CASCADE))
                ]),
            ],
        )

    def test_create_model_reordering_circular_fk(self):
        """
        CreateModel reordering behavior doesn't result in an infinite loop if
        there are FKs in both directions.
        """
        self.assertOptimizesTo(
            [
                migrations.CreateModel('Bar', [('url', models.TextField())]),
                migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
                migrations.AddField('Bar', 'foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
                migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
            ],
            [
                migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Bar', [
                    ('url', models.TextField()),
                    ('foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
                ]),
                migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
            ],
        )

    def test_create_model_no_reordering_for_unrelated_fk(self):
        """
        CreateModel order remains unchanged if the later AddField operation
        isn't a FK between them.
        """
        self.assertDoesNotOptimize(
            [
                migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
                migrations.CreateModel('Link', [('url', models.TextField())]),
                migrations.AddField('Other', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
            ],
        )

    def test_create_model_no_reordering_of_inherited_model(self):
        """
        A CreateModel that inherits from another isn't reordered to avoid
        moving it earlier than its parent CreateModel operation.
        """
        self.assertOptimizesTo(
            [
                migrations.CreateModel('Other', [('foo', models.CharField(max_length=255))]),
                migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
                migrations.CreateModel(
                    'ChildModel',
                    [('baz', models.CharField(max_length=255))],
                    bases=('migrations.parentmodel',),
                ),
                migrations.AddField('Other', 'fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
            ],
            [
                migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
                migrations.CreateModel(
                    'ChildModel',
                    [('baz', models.CharField(max_length=255))],
                    bases=('migrations.parentmodel',),
                ),
                migrations.CreateModel(
                    'Other', [
                        ('foo', models.CharField(max_length=255)),
                        ('fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
                    ]
                ),
            ],
        )

    def test_create_model_add_field_not_through_m2m_through(self):
        """
        AddField should NOT optimize into CreateModel if it's an M2M using a
        through that's created between them.
        """
        self.assertDoesNotOptimize(
            [
                migrations.CreateModel('Employee', []),
                migrations.CreateModel('Employer', []),
                migrations.CreateModel('Employment', [
                    ('employee', models.ForeignKey('migrations.Employee', models.CASCADE)),
                    ('employment', models.ForeignKey('migrations.Employer', models.CASCADE)),
                ]),
                migrations.AddField(
                    'Employer', 'employees', models.ManyToManyField(
                        'migrations.Employee', through='migrations.Employment',
                    )
                ),
            ],
        )

    def test_create_model_alter_field(self):
        """
        AlterField should optimize into CreateModel.
        """
        managers = [('objects', EmptyManager())]
        self.assertOptimizesTo(
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[("name", models.CharField(max_length=255))],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
                migrations.AlterField("Foo", "name", models.IntegerField()),
            ],
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[
                        ("name", models.IntegerField()),
                    ],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
            ],
        )

    def test_create_model_rename_field(self):
        """
        RenameField should optimize into CreateModel.
        """
        managers = [('objects', EmptyManager())]
        self.assertOptimizesTo(
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[("name", models.CharField(max_length=255))],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
                migrations.RenameField("Foo", "name", "title"),
            ],
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[
                        ("title", models.CharField(max_length=255)),
                    ],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
            ],
        )

    def test_add_field_rename_field(self):
        """
        RenameField should optimize into AddField
        """
        self.assertOptimizesTo(
            [
                migrations.AddField("Foo", "name", models.CharField(max_length=255)),
                migrations.RenameField("Foo", "name", "title"),
            ],
            [
                migrations.AddField("Foo", "title", models.CharField(max_length=255)),
            ],
        )

    def test_alter_field_rename_field(self):
        """
        RenameField should optimize to the other side of AlterField,
        and into itself.
        """
        self.assertOptimizesTo(
            [
                migrations.AlterField("Foo", "name", models.CharField(max_length=255)),
                migrations.RenameField("Foo", "name", "title"),
                migrations.RenameField("Foo", "title", "nom"),
            ],
            [
                migrations.RenameField("Foo", "name", "nom"),
                migrations.AlterField("Foo", "nom", models.CharField(max_length=255)),
            ],
        )

    def test_create_model_remove_field(self):
        """
        RemoveField should optimize into CreateModel.
        """
        managers = [('objects', EmptyManager())]
        self.assertOptimizesTo(
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[
                        ("name", models.CharField(max_length=255)),
                        ("age", models.IntegerField()),
                    ],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
                migrations.RemoveField("Foo", "age"),
            ],
            [
                migrations.CreateModel(
                    name="Foo",
                    fields=[
                        ("name", models.CharField(max_length=255)),
                    ],
                    options={'verbose_name': 'Foo'},
                    bases=(UnicodeModel,),
                    managers=managers,
                ),
            ],
        )

    def test_add_field_alter_field(self):
        """
        AlterField should optimize into AddField.
        """
        self.assertOptimizesTo(
            [
                migrations.AddField("Foo", "age", models.IntegerField()),
                migrations.AlterField("Foo", "age", models.FloatField(default=2.4)),
            ],
            [
                migrations.AddField("Foo", name="age", field=models.FloatField(default=2.4)),
            ],
        )

    def test_add_field_delete_field(self):
        """
        RemoveField should cancel AddField
        """
        self.assertOptimizesTo(
            [
                migrations.AddField("Foo", "age", models.IntegerField()),
                migrations.RemoveField("Foo", "age"),
            ],
            [],
        )

    def test_alter_field_delete_field(self):
        """
        RemoveField should absorb AlterField
        """
        self.assertOptimizesTo(
            [
                migrations.AlterField("Foo", "age", models.IntegerField()),
                migrations.RemoveField("Foo", "age"),
            ],
            [
                migrations.RemoveField("Foo", "age"),
            ],
        )

    def _test_create_alter_foo_field(self, alter):
        """
        CreateModel, AlterFooTogether/AlterOrderWithRespectTo followed by an
        add/alter/rename field should optimize to CreateModel with options.
        """
        option_value = getattr(alter, alter.option_name)
        options = {alter.option_name: option_value}

        # AddField
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                ]),
                alter,
                migrations.AddField("Foo", "c", models.IntegerField()),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                    ("c", models.IntegerField()),
                ], options=options),
            ],
        )

        # AlterField
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                ]),
                alter,
                migrations.AlterField("Foo", "b", models.CharField(max_length=255)),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.CharField(max_length=255)),
                ], options=options),
            ],
        )

        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                    ("c", models.IntegerField()),
                ]),
                alter,
                migrations.AlterField("Foo", "c", models.CharField(max_length=255)),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                    ("c", models.CharField(max_length=255)),
                ], options=options),
            ],
        )

        # RenameField
        if isinstance(option_value, str):
            renamed_options = {alter.option_name: 'c'}
        else:
            renamed_options = {
                alter.option_name: {
                    tuple('c' if value == 'b' else value for value in item) for item in option_value
                }
            }
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                ]),
                alter,
                migrations.RenameField("Foo", "b", "c"),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("c", models.IntegerField()),
                ], options=renamed_options),
            ],
        )

        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                ]),
                alter,
                migrations.RenameField("Foo", "b", "x"),
                migrations.RenameField("Foo", "x", "c"),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("c", models.IntegerField()),
                ], options=renamed_options),
            ],
        )

        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                    ("c", models.IntegerField()),
                ]),
                alter,
                migrations.RenameField("Foo", "c", "d"),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                    ("d", models.IntegerField()),
                ], options=options),
            ],
        )

        # RemoveField
        if isinstance(option_value, str):
            removed_options = None
        else:
            removed_options = {
                alter.option_name: {
                    tuple(value for value in item if value != 'b') for item in option_value
                }
            }
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                ]),
                alter,
                migrations.RemoveField("Foo", "b"),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                ], options=removed_options),
            ]
        )

        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                    ("c", models.IntegerField()),
                ]),
                alter,
                migrations.RemoveField("Foo", "c"),
            ],
            [
                migrations.CreateModel("Foo", [
                    ("a", models.IntegerField()),
                    ("b", models.IntegerField()),
                ], options=options),
            ],
        )

    def test_create_alter_unique_field(self):
        self._test_create_alter_foo_field(migrations.AlterUniqueTogether("Foo", [["a", "b"]]))

    def test_create_alter_index_field(self):
        self._test_create_alter_foo_field(migrations.AlterIndexTogether("Foo", [["a", "b"]]))

    def test_create_alter_owrt_field(self):
        self._test_create_alter_foo_field(migrations.AlterOrderWithRespectTo("Foo", "b"))

    def test_optimize_through_fields(self):
        """
        field-level through checking is working. This should manage to collapse
        model Foo to nonexistence, and model Bar to a single IntegerField
        called "width".
        """
        self.assertOptimizesTo(
            [
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                migrations.CreateModel("Bar", [("size", models.IntegerField())]),
                migrations.AddField("Foo", "age", models.IntegerField()),
                migrations.AddField("Bar", "width", models.IntegerField()),
                migrations.AlterField("Foo", "age", models.IntegerField()),
                migrations.RenameField("Bar", "size", "dimensions"),
                migrations.RemoveField("Foo", "age"),
                migrations.RenameModel("Foo", "Phou"),
                migrations.RemoveField("Bar", "dimensions"),
                migrations.RenameModel("Phou", "Fou"),
                migrations.DeleteModel("Fou"),
            ],
            [
                migrations.CreateModel("Bar", [("width", models.IntegerField())]),
            ],
        )

    def test_optimize_elidable_operation(self):
        elidable_operation = operations.base.Operation()
        elidable_operation.elidable = True
        self.assertOptimizesTo(
            [
                elidable_operation,
                migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
                elidable_operation,
                migrations.CreateModel("Bar", [("size", models.IntegerField())]),
                elidable_operation,
                migrations.RenameModel("Foo", "Phou"),
                migrations.DeleteModel("Bar"),
                elidable_operation,
            ],
            [
                migrations.CreateModel("Phou", [("name", models.CharField(max_length=255))]),
            ],
        )

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-20 21:55:55,342 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly asked for the full content of this file. This context block contains the entire available content for `django/tests/migrations/test_operations.py`.', relative_path='tests/migrations/test_operations.py', start_line=1, end_line=500), ContextOutput(reasoning='The user explicitly asked for the full content of this file. This context block contains the entire available content for `django/tests/migrations/test_optimizer.py`.', relative_path='tests/migrations/test_optimizer.py', start_line=1, end_line=832)]
2025-12-20 21:55:55,353 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py`.
2025-12-20 21:55:55,354 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-20 21:55:55,354 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-20 21:55:55,355 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-20 21:55:55,355 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-20 21:55:55,356 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: squashmigrations does not unset model options when optimizing CreateModel and AlterModelOptions

Description: Description
	
When an operation resembling AlterModelOptions(name="test_model", options={}) is squashed into the corresponding CreateModel operation, model options are not cleared on the resulting new CreateModel operation object.
CreateModel.reduce() sets the new options as options={**self.options, **operation.options} in this case (django/db/migrations/operations/models.py line 144 on commit 991dce4f), with no logic to remove options not found in operation.options as is found in AlterModelOptions.state_forwards().
I believe this issue still exists on the master branch based on my reading of the code, but I've only tested against 2.2.

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index dddf7c679c..7c9ea38526 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -137,11 +137,15 @@ class CreateModel(ModelOperation):
                 ),
             ]
         elif isinstance(operation, AlterModelOptions) and self.name_lower == operation.name_lower:
+            options = {**self.options, **operation.options}
+            for key in AlterModelOptions.ALTER_OPTION_KEYS:
+                if key not in operation.options:
+                    options.pop(key, False)
             return [
                 CreateModel(
                     self.name,
                     fields=self.fields,
-                    options={**self.options, **operation.options},
+                    options=options,
                     bases=self.bases,
                     managers=self.managers,
                 ),


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py`.
Extra Requirements: 
Purpose: I need to analyze these files to find existing test cases that cover the interaction between `CreateModel` and `AlterModelOptions` during migration squashing.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/migrations/test_operations.py
Line number range: 1 - 500
Content:
1. from django.core.exceptions import FieldDoesNotExist
2. from django.db import (
3.     IntegrityError, connection, migrations, models, transaction,
4. )
5. from django.db.migrations.migration import Migration
6. from django.db.migrations.operations.fields import FieldOperation
7. from django.db.migrations.state import ModelState, ProjectState
8. from django.db.transaction import atomic
9. from django.test import SimpleTestCase, override_settings, skipUnlessDBFeature
10. 
11. from .models import FoodManager, FoodQuerySet, UnicodeModel
12. from .test_base import OperationTestBase
13. 
14. 
15. class Mixin:
16.     pass
17. 
18. 
19. class OperationTests(OperationTestBase):
20.     """
21.     Tests running the operations and making sure they do what they say they do.
22.     Each test looks at their state changing, and then their database operation -
23.     both forwards and backwards.
24.     """
25. 
26.     def test_create_model(self):
27.         """
28.         Tests the CreateModel operation.
29.         Most other tests use this operation as part of setup, so check failures here first.
30.         """
31.         operation = migrations.CreateModel(
32.             "Pony",
33.             [
34.                 ("id", models.AutoField(primary_key=True)),
35.                 ("pink", models.IntegerField(default=1)),
36.             ],
37.         )
38.         self.assertEqual(operation.describe(), "Create model Pony")
39.         self.assertEqual(operation.migration_name_fragment, 'pony')
40.         # Test the state alteration
41.         project_state = ProjectState()
42.         new_state = project_state.clone()
43.         operation.state_forwards("test_crmo", new_state)
44.         self.assertEqual(new_state.models["test_crmo", "pony"].name, "Pony")
45.         self.assertEqual(len(new_state.models["test_crmo", "pony"].fields), 2)
46.         # Test the database alteration
47.         self.assertTableNotExists("test_crmo_pony")
48.         with connection.schema_editor() as editor:
49.             operation.database_forwards("test_crmo", editor, project_state, new_state)
50.         self.assertTableExists("test_crmo_pony")
51.         # And test reversal
52.         with connection.schema_editor() as editor:
53.             operation.database_backwards("test_crmo", editor, new_state, project_state)
54.         self.assertTableNotExists("test_crmo_pony")
55.         # And deconstruction
56.         definition = operation.deconstruct()
57.         self.assertEqual(definition[0], "CreateModel")
58.         self.assertEqual(definition[1], [])
59.         self.assertEqual(sorted(definition[2]), ["fields", "name"])
60.         # And default manager not in set
61.         operation = migrations.CreateModel("Foo", fields=[], managers=[("objects", models.Manager())])
62.         definition = operation.deconstruct()
63.         self.assertNotIn('managers', definition[2])
64. 
65.     def test_create_model_with_duplicate_field_name(self):
66.         with self.assertRaisesMessage(ValueError, 'Found duplicate value pink in CreateModel fields argument.'):
67.             migrations.CreateModel(
68.                 "Pony",
69.                 [
70.                     ("id", models.AutoField(primary_key=True)),
71.                     ("pink", models.TextField()),
72.                     ("pink", models.IntegerField(default=1)),
73.                 ],
74.             )
75. 
76.     def test_create_model_with_duplicate_base(self):
77.         message = 'Found duplicate value test_crmo.pony in CreateModel bases argument.'
78.         with self.assertRaisesMessage(ValueError, message):
79.             migrations.CreateModel(
80.                 "Pony",
81.                 fields=[],
82.                 bases=("test_crmo.Pony", "test_crmo.Pony",),
83.             )
84.         with self.assertRaisesMessage(ValueError, message):
85.             migrations.CreateModel(
86.                 "Pony",
87.                 fields=[],
88.                 bases=("test_crmo.Pony", "test_crmo.pony",),
89.             )
90.         message = 'Found duplicate value migrations.unicodemodel in CreateModel bases argument.'
91.         with self.assertRaisesMessage(ValueError, message):
92.             migrations.CreateModel(
93.                 "Pony",
94.                 fields=[],
95.                 bases=(UnicodeModel, UnicodeModel,),
96.             )
97.         with self.assertRaisesMessage(ValueError, message):
98.             migrations.CreateModel(
99.                 "Pony",
100.                 fields=[],
101.                 bases=(UnicodeModel, 'migrations.unicodemodel',),
102.             )
103.         with self.assertRaisesMessage(ValueError, message):
104.             migrations.CreateModel(
105.                 "Pony",
106.                 fields=[],
107.                 bases=(UnicodeModel, 'migrations.UnicodeModel',),
108.             )
109.         message = "Found duplicate value <class 'django.db.models.base.Model'> in CreateModel bases argument."
110.         with self.assertRaisesMessage(ValueError, message):
111.             migrations.CreateModel(
112.                 "Pony",
113.                 fields=[],
114.                 bases=(models.Model, models.Model,),
115.             )
116.         message = "Found duplicate value <class 'migrations.test_operations.Mixin'> in CreateModel bases argument."
117.         with self.assertRaisesMessage(ValueError, message):
118.             migrations.CreateModel(
119.                 "Pony",
120.                 fields=[],
121.                 bases=(Mixin, Mixin,),
122.             )
123. 
124.     def test_create_model_with_duplicate_manager_name(self):
125.         with self.assertRaisesMessage(ValueError, 'Found duplicate value objects in CreateModel managers argument.'):
126.             migrations.CreateModel(
127.                 "Pony",
128.                 fields=[],
129.                 managers=[
130.                     ("objects", models.Manager()),
131.                     ("objects", models.Manager()),
132.                 ],
133.             )
134. 
135.     def test_create_model_with_unique_after(self):
136.         """
137.         Tests the CreateModel operation directly followed by an
138.         AlterUniqueTogether (bug #22844 - sqlite remake issues)
139.         """
140.         operation1 = migrations.CreateModel(
141.             "Pony",
142.             [
143.                 ("id", models.AutoField(primary_key=True)),
144.                 ("pink", models.IntegerField(default=1)),
145.             ],
146.         )
147.         operation2 = migrations.CreateModel(
148.             "Rider",
149.             [
150.                 ("id", models.AutoField(primary_key=True)),
151.                 ("number", models.IntegerField(default=1)),
152.                 ("pony", models.ForeignKey("test_crmoua.Pony", models.CASCADE)),
153.             ],
154.         )
155.         operation3 = migrations.AlterUniqueTogether(
156.             "Rider",
157.             [
158.                 ("number", "pony"),
159.             ],
160.         )
161.         # Test the database alteration
162.         project_state = ProjectState()
163.         self.assertTableNotExists("test_crmoua_pony")
164.         self.assertTableNotExists("test_crmoua_rider")
165.         with connection.schema_editor() as editor:
166.             new_state = project_state.clone()
167.             operation1.state_forwards("test_crmoua", new_state)
168.             operation1.database_forwards("test_crmoua", editor, project_state, new_state)
169.             project_state, new_state = new_state, new_state.clone()
170.             operation2.state_forwards("test_crmoua", new_state)
171.             operation2.database_forwards("test_crmoua", editor, project_state, new_state)
172.             project_state, new_state = new_state, new_state.clone()
173.             operation3.state_forwards("test_crmoua", new_state)
174.             operation3.database_forwards("test_crmoua", editor, project_state, new_state)
175.         self.assertTableExists("test_crmoua_pony")
176.         self.assertTableExists("test_crmoua_rider")
177. 
178.     def test_create_model_m2m(self):
179.         """
180.         Test the creation of a model with a ManyToMany field and the
181.         auto-created "through" model.
182.         """
183.         project_state = self.set_up_test_model("test_crmomm")
184.         operation = migrations.CreateModel(
185.             "Stable",
186.             [
187.                 ("id", models.AutoField(primary_key=True)),
188.                 ("ponies", models.ManyToManyField("Pony", related_name="stables"))
189.             ]
190.         )
191.         # Test the state alteration
192.         new_state = project_state.clone()
193.         operation.state_forwards("test_crmomm", new_state)
194.         # Test the database alteration
195.         self.assertTableNotExists("test_crmomm_stable_ponies")
196.         with connection.schema_editor() as editor:
197.             operation.database_forwards("test_crmomm", editor, project_state, new_state)
198.         self.assertTableExists("test_crmomm_stable")
199.         self.assertTableExists("test_crmomm_stable_ponies")
200.         self.assertColumnNotExists("test_crmomm_stable", "ponies")
201.         # Make sure the M2M field actually works
202.         with atomic():
203.             Pony = new_state.apps.get_model("test_crmomm", "Pony")
204.             Stable = new_state.apps.get_model("test_crmomm", "Stable")
205.             stable = Stable.objects.create()
206.             p1 = Pony.objects.create(pink=False, weight=4.55)
207.             p2 = Pony.objects.create(pink=True, weight=5.43)
208.             stable.ponies.add(p1, p2)
209.             self.assertEqual(stable.ponies.count(), 2)
210.             stable.ponies.all().delete()
211.         # And test reversal
212.         with connection.schema_editor() as editor:
213.             operation.database_backwards("test_crmomm", editor, new_state, project_state)
214.         self.assertTableNotExists("test_crmomm_stable")
215.         self.assertTableNotExists("test_crmomm_stable_ponies")
216. 
217.     def test_create_model_inheritance(self):
218.         """
219.         Tests the CreateModel operation on a multi-table inheritance setup.
220.         """
221.         project_state = self.set_up_test_model("test_crmoih")
222.         # Test the state alteration
223.         operation = migrations.CreateModel(
224.             "ShetlandPony",
225.             [
226.                 ('pony_ptr', models.OneToOneField(
227.                     'test_crmoih.Pony',
228.                     models.CASCADE,
229.                     auto_created=True,
230.                     primary_key=True,
231.                     to_field='id',
232.                     serialize=False,
233.                 )),
234.                 ("cuteness", models.IntegerField(default=1)),
235.             ],
236.         )
237.         new_state = project_state.clone()
238.         operation.state_forwards("test_crmoih", new_state)
239.         self.assertIn(("test_crmoih", "shetlandpony"), new_state.models)
240.         # Test the database alteration
241.         self.assertTableNotExists("test_crmoih_shetlandpony")
242.         with connection.schema_editor() as editor:
243.             operation.database_forwards("test_crmoih", editor, project_state, new_state)
244.         self.assertTableExists("test_crmoih_shetlandpony")
245.         # And test reversal
246.         with connection.schema_editor() as editor:
247.             operation.database_backwards("test_crmoih", editor, new_state, project_state)
248.         self.assertTableNotExists("test_crmoih_shetlandpony")
249. 
250.     def test_create_proxy_model(self):
251.         """
252.         CreateModel ignores proxy models.
253.         """
254.         project_state = self.set_up_test_model("test_crprmo")
255.         # Test the state alteration
256.         operation = migrations.CreateModel(
257.             "ProxyPony",
258.             [],
259.             options={"proxy": True},
260.             bases=("test_crprmo.Pony",),
261.         )
262.         self.assertEqual(operation.describe(), "Create proxy model ProxyPony")
263.         new_state = project_state.clone()
264.         operation.state_forwards("test_crprmo", new_state)
265.         self.assertIn(("test_crprmo", "proxypony"), new_state.models)
266.         # Test the database alteration
267.         self.assertTableNotExists("test_crprmo_proxypony")
268.         self.assertTableExists("test_crprmo_pony")
269.         with connection.schema_editor() as editor:
270.             operation.database_forwards("test_crprmo", editor, project_state, new_state)
271.         self.assertTableNotExists("test_crprmo_proxypony")
272.         self.assertTableExists("test_crprmo_pony")
273.         # And test reversal
274.         with connection.schema_editor() as editor:
275.             operation.database_backwards("test_crprmo", editor, new_state, project_state)
276.         self.assertTableNotExists("test_crprmo_proxypony")
277.         self.assertTableExists("test_crprmo_pony")
278.         # And deconstruction
279.         definition = operation.deconstruct()
280.         self.assertEqual(definition[0], "CreateModel")
281.         self.assertEqual(definition[1], [])
282.         self.assertEqual(sorted(definition[2]), ["bases", "fields", "name", "options"])
283. 
284.     def test_create_unmanaged_model(self):
285.         """
286.         CreateModel ignores unmanaged models.
287.         """
288.         project_state = self.set_up_test_model("test_crummo")
289.         # Test the state alteration
290.         operation = migrations.CreateModel(
291.             "UnmanagedPony",
292.             [],
293.             options={"proxy": True},
294.             bases=("test_crummo.Pony",),
295.         )
296.         self.assertEqual(operation.describe(), "Create proxy model UnmanagedPony")
297.         new_state = project_state.clone()
298.         operation.state_forwards("test_crummo", new_state)
299.         self.assertIn(("test_crummo", "unmanagedpony"), new_state.models)
300.         # Test the database alteration
301.         self.assertTableNotExists("test_crummo_unmanagedpony")
302.         self.assertTableExists("test_crummo_pony")
303.         with connection.schema_editor() as editor:
304.             operation.database_forwards("test_crummo", editor, project_state, new_state)
305.         self.assertTableNotExists("test_crummo_unmanagedpony")
306.         self.assertTableExists("test_crummo_pony")
307.         # And test reversal
308.         with connection.schema_editor() as editor:
309.             operation.database_backwards("test_crummo", editor, new_state, project_state)
310.         self.assertTableNotExists("test_crummo_unmanagedpony")
311.         self.assertTableExists("test_crummo_pony")
312. 
313.     @skipUnlessDBFeature('supports_table_check_constraints')
314.     def test_create_model_with_constraint(self):
315.         where = models.Q(pink__gt=2)
316.         check_constraint = models.CheckConstraint(check=where, name='test_constraint_pony_pink_gt_2')
317.         operation = migrations.CreateModel(
318.             "Pony",
319.             [
320.                 ("id", models.AutoField(primary_key=True)),
321.                 ("pink", models.IntegerField(default=3)),
322.             ],
323.             options={'constraints': [check_constraint]},
324.         )
325. 
326.         # Test the state alteration
327.         project_state = ProjectState()
328.         new_state = project_state.clone()
329.         operation.state_forwards("test_crmo", new_state)
330.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
331. 
332.         # Test database alteration
333.         self.assertTableNotExists("test_crmo_pony")
334.         with connection.schema_editor() as editor:
335.             operation.database_forwards("test_crmo", editor, project_state, new_state)
336.         self.assertTableExists("test_crmo_pony")
337.         with connection.cursor() as cursor:
338.             with self.assertRaises(IntegrityError):
339.                 cursor.execute("INSERT INTO test_crmo_pony (id, pink) VALUES (1, 1)")
340. 
341.         # Test reversal
342.         with connection.schema_editor() as editor:
343.             operation.database_backwards("test_crmo", editor, new_state, project_state)
344.         self.assertTableNotExists("test_crmo_pony")
345. 
346.         # Test deconstruction
347.         definition = operation.deconstruct()
348.         self.assertEqual(definition[0], "CreateModel")
349.         self.assertEqual(definition[1], [])
350.         self.assertEqual(definition[2]['options']['constraints'], [check_constraint])
351. 
352.     def test_create_model_with_partial_unique_constraint(self):
353.         partial_unique_constraint = models.UniqueConstraint(
354.             fields=['pink'],
355.             condition=models.Q(weight__gt=5),
356.             name='test_constraint_pony_pink_for_weight_gt_5_uniq',
357.         )
358.         operation = migrations.CreateModel(
359.             'Pony',
360.             [
361.                 ('id', models.AutoField(primary_key=True)),
362.                 ('pink', models.IntegerField(default=3)),
363.                 ('weight', models.FloatField()),
364.             ],
365.             options={'constraints': [partial_unique_constraint]},
366.         )
367.         # Test the state alteration
368.         project_state = ProjectState()
369.         new_state = project_state.clone()
370.         operation.state_forwards('test_crmo', new_state)
371.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
372.         # Test database alteration
373.         self.assertTableNotExists('test_crmo_pony')
374.         with connection.schema_editor() as editor:
375.             operation.database_forwards('test_crmo', editor, project_state, new_state)
376.         self.assertTableExists('test_crmo_pony')
377.         # Test constraint works
378.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
379.         Pony.objects.create(pink=1, weight=4.0)
380.         Pony.objects.create(pink=1, weight=4.0)
381.         Pony.objects.create(pink=1, weight=6.0)
382.         if connection.features.supports_partial_indexes:
383.             with self.assertRaises(IntegrityError):
384.                 Pony.objects.create(pink=1, weight=7.0)
385.         else:
386.             Pony.objects.create(pink=1, weight=7.0)
387.         # Test reversal
388.         with connection.schema_editor() as editor:
389.             operation.database_backwards('test_crmo', editor, new_state, project_state)
390.         self.assertTableNotExists('test_crmo_pony')
391.         # Test deconstruction
392.         definition = operation.deconstruct()
393.         self.assertEqual(definition[0], 'CreateModel')
394.         self.assertEqual(definition[1], [])
395.         self.assertEqual(definition[2]['options']['constraints'], [partial_unique_constraint])
396. 
397.     def test_create_model_with_deferred_unique_constraint(self):
398.         deferred_unique_constraint = models.UniqueConstraint(
399.             fields=['pink'],
400.             name='deferrable_pink_constraint',
401.             deferrable=models.Deferrable.DEFERRED,
402.         )
403.         operation = migrations.CreateModel(
404.             'Pony',
405.             [
406.                 ('id', models.AutoField(primary_key=True)),
407.                 ('pink', models.IntegerField(default=3)),
408.             ],
409.             options={'constraints': [deferred_unique_constraint]},
410.         )
411.         project_state = ProjectState()
412.         new_state = project_state.clone()
413.         operation.state_forwards('test_crmo', new_state)
414.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
415.         self.assertTableNotExists('test_crmo_pony')
416.         # Create table.
417.         with connection.schema_editor() as editor:
418.             operation.database_forwards('test_crmo', editor, project_state, new_state)
419.         self.assertTableExists('test_crmo_pony')
420.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
421.         Pony.objects.create(pink=1)
422.         if connection.features.supports_deferrable_unique_constraints:
423.             # Unique constraint is deferred.
424.             with transaction.atomic():
425.                 obj = Pony.objects.create(pink=1)
426.                 obj.pink = 2
427.                 obj.save()
428.             # Constraint behavior can be changed with SET CONSTRAINTS.
429.             with self.assertRaises(IntegrityError):
430.                 with transaction.atomic(), connection.cursor() as cursor:
431.                     quoted_name = connection.ops.quote_name(deferred_unique_constraint.name)
432.                     cursor.execute('SET CONSTRAINTS %s IMMEDIATE' % quoted_name)
433.                     obj = Pony.objects.create(pink=1)
434.                     obj.pink = 3
435.                     obj.save()
436.         else:
437.             Pony.objects.create(pink=1)
438.         # Reversal.
439.         with connection.schema_editor() as editor:
440.             operation.database_backwards('test_crmo', editor, new_state, project_state)
441.         self.assertTableNotExists('test_crmo_pony')
442.         # Deconstruction.
443.         definition = operation.deconstruct()
444.         self.assertEqual(definition[0], 'CreateModel')
445.         self.assertEqual(definition[1], [])
446.         self.assertEqual(
447.             definition[2]['options']['constraints'],
448.             [deferred_unique_constraint],
449.         )
450. 
451.     @skipUnlessDBFeature('supports_covering_indexes')
452.     def test_create_model_with_covering_unique_constraint(self):
453.         covering_unique_constraint = models.UniqueConstraint(
454.             fields=['pink'],
455.             include=['weight'],
456.             name='test_constraint_pony_pink_covering_weight',
457.         )
458.         operation = migrations.CreateModel(
459.             'Pony',
460.             [
461.                 ('id', models.AutoField(primary_key=True)),
462.                 ('pink', models.IntegerField(default=3)),
463.                 ('weight', models.FloatField()),
464.             ],
465.             options={'constraints': [covering_unique_constraint]},
466.         )
467.         project_state = ProjectState()
468.         new_state = project_state.clone()
469.         operation.state_forwards('test_crmo', new_state)
470.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
471.         self.assertTableNotExists('test_crmo_pony')
472.         # Create table.
473.         with connection.schema_editor() as editor:
474.             operation.database_forwards('test_crmo', editor, project_state, new_state)
475.         self.assertTableExists('test_crmo_pony')
476.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
477.         Pony.objects.create(pink=1, weight=4.0)
478.         with self.assertRaises(IntegrityError):
479.             Pony.objects.create(pink=1, weight=7.0)
480.         # Reversal.
481.         with connection.schema_editor() as editor:
482.             operation.database_backwards('test_crmo', editor, new_state, project_state)
483.         self.assertTableNotExists('test_crmo_pony')
484.         # Deconstruction.
485.         definition = operation.deconstruct()
486.         self.assertEqual(definition[0], 'CreateModel')
487.         self.assertEqual(definition[1], [])
488.         self.assertEqual(
489.             definition[2]['options']['constraints'],
490.             [covering_unique_constraint],
491.         )
492. 
493.     def test_create_model_managers(self):
494.         """
495.         The managers on a model are set.
496.         """
497.         project_state = self.set_up_test_model("test_cmoma")
498.         # Test the state alteration
499.         operation = migrations.CreateModel(
500.             "Food",


File: tests/migrations/test_optimizer.py
Line number range: 1 - 832
Content:
1. from django.db import migrations, models
2. from django.db.migrations import operations
3. from django.db.migrations.optimizer import MigrationOptimizer
4. from django.db.migrations.serializer import serializer_factory
5. from django.test import SimpleTestCase
6. 
7. from .models import EmptyManager, UnicodeModel
8. 
9. 
10. class OptimizerTests(SimpleTestCase):
11.     """
12.     Tests the migration autodetector.
13.     """
14. 
15.     def optimize(self, operations, app_label):
16.         """
17.         Handy shortcut for getting results + number of loops
18.         """
19.         optimizer = MigrationOptimizer()
20.         return optimizer.optimize(operations, app_label), optimizer._iterations
21. 
22.     def serialize(self, value):
23.         return serializer_factory(value).serialize()[0]
24. 
25.     def assertOptimizesTo(self, operations, expected, exact=None, less_than=None, app_label=None):
26.         result, iterations = self.optimize(operations, app_label or 'migrations')
27.         result = [self.serialize(f) for f in result]
28.         expected = [self.serialize(f) for f in expected]
29.         self.assertEqual(expected, result)
30.         if exact is not None and iterations != exact:
31.             raise self.failureException(
32.                 "Optimization did not take exactly %s iterations (it took %s)" % (exact, iterations)
33.             )
34.         if less_than is not None and iterations >= less_than:
35.             raise self.failureException(
36.                 "Optimization did not take less than %s iterations (it took %s)" % (less_than, iterations)
37.             )
38. 
39.     def assertDoesNotOptimize(self, operations, **kwargs):
40.         self.assertOptimizesTo(operations, operations, **kwargs)
41. 
42.     def test_none_app_label(self):
43.         optimizer = MigrationOptimizer()
44.         with self.assertRaisesMessage(TypeError, 'app_label must be a str'):
45.             optimizer.optimize([], None)
46. 
47.     def test_single(self):
48.         """
49.         The optimizer does nothing on a single operation,
50.         and that it does it in just one pass.
51.         """
52.         self.assertOptimizesTo(
53.             [migrations.DeleteModel("Foo")],
54.             [migrations.DeleteModel("Foo")],
55.             exact=1,
56.         )
57. 
58.     def test_create_delete_model(self):
59.         """
60.         CreateModel and DeleteModel should collapse into nothing.
61.         """
62.         self.assertOptimizesTo(
63.             [
64.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
65.                 migrations.DeleteModel("Foo"),
66.             ],
67.             [],
68.         )
69. 
70.     def test_create_rename_model(self):
71.         """
72.         CreateModel should absorb RenameModels.
73.         """
74.         managers = [('objects', EmptyManager())]
75.         self.assertOptimizesTo(
76.             [
77.                 migrations.CreateModel(
78.                     name="Foo",
79.                     fields=[("name", models.CharField(max_length=255))],
80.                     options={'verbose_name': 'Foo'},
81.                     bases=(UnicodeModel,),
82.                     managers=managers,
83.                 ),
84.                 migrations.RenameModel("Foo", "Bar"),
85.             ],
86.             [
87.                 migrations.CreateModel(
88.                     "Bar",
89.                     [("name", models.CharField(max_length=255))],
90.                     options={'verbose_name': 'Foo'},
91.                     bases=(UnicodeModel,),
92.                     managers=managers,
93.                 )
94.             ],
95.         )
96. 
97.     def test_rename_model_self(self):
98.         """
99.         RenameModels should absorb themselves.
100.         """
101.         self.assertOptimizesTo(
102.             [
103.                 migrations.RenameModel("Foo", "Baa"),
104.                 migrations.RenameModel("Baa", "Bar"),
105.             ],
106.             [
107.                 migrations.RenameModel("Foo", "Bar"),
108.             ],
109.         )
110. 
111.     def test_create_alter_model_options(self):
112.         self.assertOptimizesTo(
113.             [
114.                 migrations.CreateModel('Foo', fields=[]),
115.                 migrations.AlterModelOptions(name='Foo', options={'verbose_name_plural': 'Foozes'}),
116.             ],
117.             [
118.                 migrations.CreateModel('Foo', fields=[], options={'verbose_name_plural': 'Foozes'}),
119.             ]
120.         )
121. 
122.     def _test_create_alter_foo_delete_model(self, alter_foo):
123.         """
124.         CreateModel, AlterModelTable, AlterUniqueTogether/AlterIndexTogether/
125.         AlterOrderWithRespectTo, and DeleteModel should collapse into nothing.
126.         """
127.         self.assertOptimizesTo(
128.             [
129.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
130.                 migrations.AlterModelTable("Foo", "woohoo"),
131.                 alter_foo,
132.                 migrations.DeleteModel("Foo"),
133.             ],
134.             [],
135.         )
136. 
137.     def test_create_alter_unique_delete_model(self):
138.         self._test_create_alter_foo_delete_model(migrations.AlterUniqueTogether("Foo", [["a", "b"]]))
139. 
140.     def test_create_alter_index_delete_model(self):
141.         self._test_create_alter_foo_delete_model(migrations.AlterIndexTogether("Foo", [["a", "b"]]))
142. 
143.     def test_create_alter_owrt_delete_model(self):
144.         self._test_create_alter_foo_delete_model(migrations.AlterOrderWithRespectTo("Foo", "a"))
145. 
146.     def _test_alter_alter_model(self, alter_foo, alter_bar):
147.         """
148.         Two AlterUniqueTogether/AlterIndexTogether/AlterOrderWithRespectTo
149.         should collapse into the second.
150.         """
151.         self.assertOptimizesTo(
152.             [
153.                 alter_foo,
154.                 alter_bar,
155.             ],
156.             [
157.                 alter_bar,
158.             ],
159.         )
160. 
161.     def test_alter_alter_table_model(self):
162.         self._test_alter_alter_model(
163.             migrations.AlterModelTable("Foo", "a"),
164.             migrations.AlterModelTable("Foo", "b"),
165.         )
166. 
167.     def test_alter_alter_unique_model(self):
168.         self._test_alter_alter_model(
169.             migrations.AlterUniqueTogether("Foo", [["a", "b"]]),
170.             migrations.AlterUniqueTogether("Foo", [["a", "c"]]),
171.         )
172. 
173.     def test_alter_alter_index_model(self):
174.         self._test_alter_alter_model(
175.             migrations.AlterIndexTogether("Foo", [["a", "b"]]),
176.             migrations.AlterIndexTogether("Foo", [["a", "c"]]),
177.         )
178. 
179.     def test_alter_alter_owrt_model(self):
180.         self._test_alter_alter_model(
181.             migrations.AlterOrderWithRespectTo("Foo", "a"),
182.             migrations.AlterOrderWithRespectTo("Foo", "b"),
183.         )
184. 
185.     def test_optimize_through_create(self):
186.         """
187.         We should be able to optimize away create/delete through a create or delete
188.         of a different model, but only if the create operation does not mention the model
189.         at all.
190.         """
191.         # These should work
192.         self.assertOptimizesTo(
193.             [
194.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
195.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
196.                 migrations.DeleteModel("Foo"),
197.             ],
198.             [
199.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
200.             ],
201.         )
202.         self.assertOptimizesTo(
203.             [
204.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
205.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
206.                 migrations.DeleteModel("Bar"),
207.                 migrations.DeleteModel("Foo"),
208.             ],
209.             [],
210.         )
211.         self.assertOptimizesTo(
212.             [
213.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
214.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
215.                 migrations.DeleteModel("Foo"),
216.                 migrations.DeleteModel("Bar"),
217.             ],
218.             [],
219.         )
220.         # Operations should be optimized if the FK references a model from the
221.         # other app.
222.         self.assertOptimizesTo(
223.             [
224.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
225.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
226.                 migrations.DeleteModel("Foo"),
227.             ],
228.             [
229.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
230.             ],
231.             app_label="otherapp",
232.         )
233.         # But it shouldn't work if a FK references a model with the same
234.         # app_label.
235.         self.assertDoesNotOptimize(
236.             [
237.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
238.                 migrations.CreateModel('Bar', [('other', models.ForeignKey('Foo', models.CASCADE))]),
239.                 migrations.DeleteModel('Foo'),
240.             ],
241.         )
242.         self.assertDoesNotOptimize(
243.             [
244.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
245.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
246.                 migrations.DeleteModel("Foo"),
247.             ],
248.             app_label="testapp",
249.         )
250.         # This should not work - bases should block it
251.         self.assertDoesNotOptimize(
252.             [
253.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
254.                 migrations.CreateModel('Bar', [('size', models.IntegerField())], bases=('Foo',)),
255.                 migrations.DeleteModel('Foo'),
256.             ],
257.         )
258.         self.assertDoesNotOptimize(
259.             [
260.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
261.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
262.                 migrations.DeleteModel("Foo"),
263.             ],
264.             app_label='testapp',
265.         )
266.         # The same operations should be optimized if app_label and none of
267.         # bases belong to that app.
268.         self.assertOptimizesTo(
269.             [
270.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
271.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
272.                 migrations.DeleteModel("Foo"),
273.             ],
274.             [
275.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
276.             ],
277.             app_label="otherapp",
278.         )
279.         # But it shouldn't work if some of bases belongs to the specified app.
280.         self.assertDoesNotOptimize(
281.             [
282.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
283.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
284.                 migrations.DeleteModel("Foo"),
285.             ],
286.             app_label="testapp",
287.         )
288. 
289.         self.assertOptimizesTo(
290.             [
291.                 migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
292.                 migrations.CreateModel('Person', [('name', models.CharField(max_length=255))]),
293.                 migrations.AddField('book', 'author', models.ForeignKey('test_app.Person', models.CASCADE)),
294.                 migrations.CreateModel('Review', [('book', models.ForeignKey('test_app.Book', models.CASCADE))]),
295.                 migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
296.                 migrations.AddField('review', 'reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
297.                 migrations.RemoveField('book', 'author'),
298.                 migrations.DeleteModel('Person'),
299.             ],
300.             [
301.                 migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
302.                 migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
303.                 migrations.CreateModel('Review', [
304.                     ('book', models.ForeignKey('test_app.Book', models.CASCADE)),
305.                     ('reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
306.                 ]),
307.             ],
308.             app_label='test_app',
309.         )
310. 
311.     def test_create_model_add_field(self):
312.         """
313.         AddField should optimize into CreateModel.
314.         """
315.         managers = [('objects', EmptyManager())]
316.         self.assertOptimizesTo(
317.             [
318.                 migrations.CreateModel(
319.                     name="Foo",
320.                     fields=[("name", models.CharField(max_length=255))],
321.                     options={'verbose_name': 'Foo'},
322.                     bases=(UnicodeModel,),
323.                     managers=managers,
324.                 ),
325.                 migrations.AddField("Foo", "age", models.IntegerField()),
326.             ],
327.             [
328.                 migrations.CreateModel(
329.                     name="Foo",
330.                     fields=[
331.                         ("name", models.CharField(max_length=255)),
332.                         ("age", models.IntegerField()),
333.                     ],
334.                     options={'verbose_name': 'Foo'},
335.                     bases=(UnicodeModel,),
336.                     managers=managers,
337.                 ),
338.             ],
339.         )
340. 
341.     def test_create_model_reordering(self):
342.         """
343.         AddField optimizes into CreateModel if it's a FK to a model that's
344.         between them (and there's no FK in the other direction), by changing
345.         the order of the CreateModel operations.
346.         """
347.         self.assertOptimizesTo(
348.             [
349.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
350.                 migrations.CreateModel('Link', [('url', models.TextField())]),
351.                 migrations.AddField('Foo', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
352.             ],
353.             [
354.                 migrations.CreateModel('Link', [('url', models.TextField())]),
355.                 migrations.CreateModel('Foo', [
356.                     ('name', models.CharField(max_length=255)),
357.                     ('link', models.ForeignKey('migrations.Link', models.CASCADE))
358.                 ]),
359.             ],
360.         )
361. 
362.     def test_create_model_reordering_circular_fk(self):
363.         """
364.         CreateModel reordering behavior doesn't result in an infinite loop if
365.         there are FKs in both directions.
366.         """
367.         self.assertOptimizesTo(
368.             [
369.                 migrations.CreateModel('Bar', [('url', models.TextField())]),
370.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
371.                 migrations.AddField('Bar', 'foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
372.                 migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
373.             ],
374.             [
375.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
376.                 migrations.CreateModel('Bar', [
377.                     ('url', models.TextField()),
378.                     ('foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
379.                 ]),
380.                 migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
381.             ],
382.         )
383. 
384.     def test_create_model_no_reordering_for_unrelated_fk(self):
385.         """
386.         CreateModel order remains unchanged if the later AddField operation
387.         isn't a FK between them.
388.         """
389.         self.assertDoesNotOptimize(
390.             [
391.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
392.                 migrations.CreateModel('Link', [('url', models.TextField())]),
393.                 migrations.AddField('Other', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
394.             ],
395.         )
396. 
397.     def test_create_model_no_reordering_of_inherited_model(self):
398.         """
399.         A CreateModel that inherits from another isn't reordered to avoid
400.         moving it earlier than its parent CreateModel operation.
401.         """
402.         self.assertOptimizesTo(
403.             [
404.                 migrations.CreateModel('Other', [('foo', models.CharField(max_length=255))]),
405.                 migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
406.                 migrations.CreateModel(
407.                     'ChildModel',
408.                     [('baz', models.CharField(max_length=255))],
409.                     bases=('migrations.parentmodel',),
410.                 ),
411.                 migrations.AddField('Other', 'fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
412.             ],
413.             [
414.                 migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
415.                 migrations.CreateModel(
416.                     'ChildModel',
417.                     [('baz', models.CharField(max_length=255))],
418.                     bases=('migrations.parentmodel',),
419.                 ),
420.                 migrations.CreateModel(
421.                     'Other', [
422.                         ('foo', models.CharField(max_length=255)),
423.                         ('fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
424.                     ]
425.                 ),
426.             ],
427.         )
428. 
429.     def test_create_model_add_field_not_through_m2m_through(self):
430.         """
431.         AddField should NOT optimize into CreateModel if it's an M2M using a
432.         through that's created between them.
433.         """
434.         self.assertDoesNotOptimize(
435.             [
436.                 migrations.CreateModel('Employee', []),
437.                 migrations.CreateModel('Employer', []),
438.                 migrations.CreateModel('Employment', [
439.                     ('employee', models.ForeignKey('migrations.Employee', models.CASCADE)),
440.                     ('employment', models.ForeignKey('migrations.Employer', models.CASCADE)),
441.                 ]),
442.                 migrations.AddField(
443.                     'Employer', 'employees', models.ManyToManyField(
444.                         'migrations.Employee', through='migrations.Employment',
445.                     )
446.                 ),
447.             ],
448.         )
449. 
450.     def test_create_model_alter_field(self):
451.         """
452.         AlterField should optimize into CreateModel.
453.         """
454.         managers = [('objects', EmptyManager())]
455.         self.assertOptimizesTo(
456.             [
457.                 migrations.CreateModel(
458.                     name="Foo",
459.                     fields=[("name", models.CharField(max_length=255))],
460.                     options={'verbose_name': 'Foo'},
461.                     bases=(UnicodeModel,),
462.                     managers=managers,
463.                 ),
464.                 migrations.AlterField("Foo", "name", models.IntegerField()),
465.             ],
466.             [
467.                 migrations.CreateModel(
468.                     name="Foo",
469.                     fields=[
470.                         ("name", models.IntegerField()),
471.                     ],
472.                     options={'verbose_name': 'Foo'},
473.                     bases=(UnicodeModel,),
474.                     managers=managers,
475.                 ),
476.             ],
477.         )
478. 
479.     def test_create_model_rename_field(self):
480.         """
481.         RenameField should optimize into CreateModel.
482.         """
483.         managers = [('objects', EmptyManager())]
484.         self.assertOptimizesTo(
485.             [
486.                 migrations.CreateModel(
487.                     name="Foo",
488.                     fields=[("name", models.CharField(max_length=255))],
489.                     options={'verbose_name': 'Foo'},
490.                     bases=(UnicodeModel,),
491.                     managers=managers,
492.                 ),
493.                 migrations.RenameField("Foo", "name", "title"),
494.             ],
495.             [
496.                 migrations.CreateModel(
497.                     name="Foo",
498.                     fields=[
499.                         ("title", models.CharField(max_length=255)),
500.                     ],
501.                     options={'verbose_name': 'Foo'},
502.                     bases=(UnicodeModel,),
503.                     managers=managers,
504.                 ),
505.             ],
506.         )
507. 
508.     def test_add_field_rename_field(self):
509.         """
510.         RenameField should optimize into AddField
511.         """
512.         self.assertOptimizesTo(
513.             [
514.                 migrations.AddField("Foo", "name", models.CharField(max_length=255)),
515.                 migrations.RenameField("Foo", "name", "title"),
516.             ],
517.             [
518.                 migrations.AddField("Foo", "title", models.CharField(max_length=255)),
519.             ],
520.         )
521. 
522.     def test_alter_field_rename_field(self):
523.         """
524.         RenameField should optimize to the other side of AlterField,
525.         and into itself.
526.         """
527.         self.assertOptimizesTo(
528.             [
529.                 migrations.AlterField("Foo", "name", models.CharField(max_length=255)),
530.                 migrations.RenameField("Foo", "name", "title"),
531.                 migrations.RenameField("Foo", "title", "nom"),
532.             ],
533.             [
534.                 migrations.RenameField("Foo", "name", "nom"),
535.                 migrations.AlterField("Foo", "nom", models.CharField(max_length=255)),
536.             ],
537.         )
538. 
539.     def test_create_model_remove_field(self):
540.         """
541.         RemoveField should optimize into CreateModel.
542.         """
543.         managers = [('objects', EmptyManager())]
544.         self.assertOptimizesTo(
545.             [
546.                 migrations.CreateModel(
547.                     name="Foo",
548.                     fields=[
549.                         ("name", models.CharField(max_length=255)),
550.                         ("age", models.IntegerField()),
551.                     ],
552.                     options={'verbose_name': 'Foo'},
553.                     bases=(UnicodeModel,),
554.                     managers=managers,
555.                 ),
556.                 migrations.RemoveField("Foo", "age"),
557.             ],
558.             [
559.                 migrations.CreateModel(
560.                     name="Foo",
561.                     fields=[
562.                         ("name", models.CharField(max_length=255)),
563.                     ],
564.                     options={'verbose_name': 'Foo'},
565.                     bases=(UnicodeModel,),
566.                     managers=managers,
567.                 ),
568.             ],
569.         )
570. 
571.     def test_add_field_alter_field(self):
572.         """
573.         AlterField should optimize into AddField.
574.         """
575.         self.assertOptimizesTo(
576.             [
577.                 migrations.AddField("Foo", "age", models.IntegerField()),
578.                 migrations.AlterField("Foo", "age", models.FloatField(default=2.4)),
579.             ],
580.             [
581.                 migrations.AddField("Foo", name="age", field=models.FloatField(default=2.4)),
582.             ],
583.         )
584. 
585.     def test_add_field_delete_field(self):
586.         """
587.         RemoveField should cancel AddField
588.         """
589.         self.assertOptimizesTo(
590.             [
591.                 migrations.AddField("Foo", "age", models.IntegerField()),
592.                 migrations.RemoveField("Foo", "age"),
593.             ],
594.             [],
595.         )
596. 
597.     def test_alter_field_delete_field(self):
598.         """
599.         RemoveField should absorb AlterField
600.         """
601.         self.assertOptimizesTo(
602.             [
603.                 migrations.AlterField("Foo", "age", models.IntegerField()),
604.                 migrations.RemoveField("Foo", "age"),
605.             ],
606.             [
607.                 migrations.RemoveField("Foo", "age"),
608.             ],
609.         )
610. 
611.     def _test_create_alter_foo_field(self, alter):
612.         """
613.         CreateModel, AlterFooTogether/AlterOrderWithRespectTo followed by an
614.         add/alter/rename field should optimize to CreateModel with options.
615.         """
616.         option_value = getattr(alter, alter.option_name)
617.         options = {alter.option_name: option_value}
618. 
619.         # AddField
620.         self.assertOptimizesTo(
621.             [
622.                 migrations.CreateModel("Foo", [
623.                     ("a", models.IntegerField()),
624.                     ("b", models.IntegerField()),
625.                 ]),
626.                 alter,
627.                 migrations.AddField("Foo", "c", models.IntegerField()),
628.             ],
629.             [
630.                 migrations.CreateModel("Foo", [
631.                     ("a", models.IntegerField()),
632.                     ("b", models.IntegerField()),
633.                     ("c", models.IntegerField()),
634.                 ], options=options),
635.             ],
636.         )
637. 
638.         # AlterField
639.         self.assertOptimizesTo(
640.             [
641.                 migrations.CreateModel("Foo", [
642.                     ("a", models.IntegerField()),
643.                     ("b", models.IntegerField()),
644.                 ]),
645.                 alter,
646.                 migrations.AlterField("Foo", "b", models.CharField(max_length=255)),
647.             ],
648.             [
649.                 migrations.CreateModel("Foo", [
650.                     ("a", models.IntegerField()),
651.                     ("b", models.CharField(max_length=255)),
652.                 ], options=options),
653.             ],
654.         )
655. 
656.         self.assertOptimizesTo(
657.             [
658.                 migrations.CreateModel("Foo", [
659.                     ("a", models.IntegerField()),
660.                     ("b", models.IntegerField()),
661.                     ("c", models.IntegerField()),
662.                 ]),
663.                 alter,
664.                 migrations.AlterField("Foo", "c", models.CharField(max_length=255)),
665.             ],
666.             [
667.                 migrations.CreateModel("Foo", [
668.                     ("a", models.IntegerField()),
669.                     ("b", models.IntegerField()),
670.                     ("c", models.CharField(max_length=255)),
671.                 ], options=options),
672.             ],
673.         )
674. 
675.         # RenameField
676.         if isinstance(option_value, str):
677.             renamed_options = {alter.option_name: 'c'}
678.         else:
679.             renamed_options = {
680.                 alter.option_name: {
681.                     tuple('c' if value == 'b' else value for value in item) for item in option_value
682.                 }
683.             }
684.         self.assertOptimizesTo(
685.             [
686.                 migrations.CreateModel("Foo", [
687.                     ("a", models.IntegerField()),
688.                     ("b", models.IntegerField()),
689.                 ]),
690.                 alter,
691.                 migrations.RenameField("Foo", "b", "c"),
692.             ],
693.             [
694.                 migrations.CreateModel("Foo", [
695.                     ("a", models.IntegerField()),
696.                     ("c", models.IntegerField()),
697.                 ], options=renamed_options),
698.             ],
699.         )
700. 
701.         self.assertOptimizesTo(
702.             [
703.                 migrations.CreateModel("Foo", [
704.                     ("a", models.IntegerField()),
705.                     ("b", models.IntegerField()),
706.                 ]),
707.                 alter,
708.                 migrations.RenameField("Foo", "b", "x"),
709.                 migrations.RenameField("Foo", "x", "c"),
710.             ],
711.             [
712.                 migrations.CreateModel("Foo", [
713.                     ("a", models.IntegerField()),
714.                     ("c", models.IntegerField()),
715.                 ], options=renamed_options),
716.             ],
717.         )
718. 
719.         self.assertOptimizesTo(
720.             [
721.                 migrations.CreateModel("Foo", [
722.                     ("a", models.IntegerField()),
723.                     ("b", models.IntegerField()),
724.                     ("c", models.IntegerField()),
725.                 ]),
726.                 alter,
727.                 migrations.RenameField("Foo", "c", "d"),
728.             ],
729.             [
730.                 migrations.CreateModel("Foo", [
731.                     ("a", models.IntegerField()),
732.                     ("b", models.IntegerField()),
733.                     ("d", models.IntegerField()),
734.                 ], options=options),
735.             ],
736.         )
737. 
738.         # RemoveField
739.         if isinstance(option_value, str):
740.             removed_options = None
741.         else:
742.             removed_options = {
743.                 alter.option_name: {
744.                     tuple(value for value in item if value != 'b') for item in option_value
745.                 }
746.             }
747.         self.assertOptimizesTo(
748.             [
749.                 migrations.CreateModel("Foo", [
750.                     ("a", models.IntegerField()),
751.                     ("b", models.IntegerField()),
752.                 ]),
753.                 alter,
754.                 migrations.RemoveField("Foo", "b"),
755.             ],
756.             [
757.                 migrations.CreateModel("Foo", [
758.                     ("a", models.IntegerField()),
759.                 ], options=removed_options),
760.             ]
761.         )
762. 
763.         self.assertOptimizesTo(
764.             [
765.                 migrations.CreateModel("Foo", [
766.                     ("a", models.IntegerField()),
767.                     ("b", models.IntegerField()),
768.                     ("c", models.IntegerField()),
769.                 ]),
770.                 alter,
771.                 migrations.RemoveField("Foo", "c"),
772.             ],
773.             [
774.                 migrations.CreateModel("Foo", [
775.                     ("a", models.IntegerField()),
776.                     ("b", models.IntegerField()),
777.                 ], options=options),
778.             ],
779.         )
780. 
781.     def test_create_alter_unique_field(self):
782.         self._test_create_alter_foo_field(migrations.AlterUniqueTogether("Foo", [["a", "b"]]))
783. 
784.     def test_create_alter_index_field(self):
785.         self._test_create_alter_foo_field(migrations.AlterIndexTogether("Foo", [["a", "b"]]))
786. 
787.     def test_create_alter_owrt_field(self):
788.         self._test_create_alter_foo_field(migrations.AlterOrderWithRespectTo("Foo", "b"))
789. 
790.     def test_optimize_through_fields(self):
791.         """
792.         field-level through checking is working. This should manage to collapse
793.         model Foo to nonexistence, and model Bar to a single IntegerField
794.         called "width".
795.         """
796.         self.assertOptimizesTo(
797.             [
798.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
799.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
800.                 migrations.AddField("Foo", "age", models.IntegerField()),
801.                 migrations.AddField("Bar", "width", models.IntegerField()),
802.                 migrations.AlterField("Foo", "age", models.IntegerField()),
803.                 migrations.RenameField("Bar", "size", "dimensions"),
804.                 migrations.RemoveField("Foo", "age"),
805.                 migrations.RenameModel("Foo", "Phou"),
806.                 migrations.RemoveField("Bar", "dimensions"),
807.                 migrations.RenameModel("Phou", "Fou"),
808.                 migrations.DeleteModel("Fou"),
809.             ],
810.             [
811.                 migrations.CreateModel("Bar", [("width", models.IntegerField())]),
812.             ],
813.         )
814. 
815.     def test_optimize_elidable_operation(self):
816.         elidable_operation = operations.base.Operation()
817.         elidable_operation.elidable = True
818.         self.assertOptimizesTo(
819.             [
820.                 elidable_operation,
821.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
822.                 elidable_operation,
823.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
824.                 elidable_operation,
825.                 migrations.RenameModel("Foo", "Phou"),
826.                 migrations.DeleteModel("Bar"),
827.                 elidable_operation,
828.             ],
829.             [
830.                 migrations.CreateModel("Phou", [("name", models.CharField(max_length=255))]),
831.             ],
832.         )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-20 21:57:26,412 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a bug in `squashmigrations` where `AlterModelOptions` fails to unset options when squashed into `CreateModel`. The provided `test_optimizer.py` file contains `test_create_alter_model_options`, which is relevant as it tests the squashing of these exact two operations. However, this test only covers the scenario of *adding* a model option, not *unsetting* one, which is the core of the bug. The bug report mentions that the correct unsetting logic exists in `AlterModelOptions.state_forwards()`, and tests for this method would be in `test_operations.py`. The context for `tests/migrations/test_operations.py` is incomplete and does not contain these tests. To find the most relevant examples that demonstrate the correct behavior, I need to examine the tests for `AlterModelOptions`.' query='Please provide the content of all test methods from `django/tests/migrations/test_operations.py` that test the `AlterModelOptions` operation.' extra_requirements='' purpose="This additional context will allow me to find test cases that demonstrate the correct behavior for unsetting model options, which is crucial for addressing the user's query about the bug."
2025-12-20 21:57:26,413 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the content of all test methods from `django/tests/migrations/test_operations.py` that test the `AlterModelOptions` operation.
2025-12-20 21:57:26,413 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-20 21:57:26,414 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-20 21:57:26,414 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-20 21:57:26,415 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the content of all test methods from `django/tests/migrations/test_operations.py` that test the `AlterModelOptions` operation.
Purpose: This additional context will allow me to find test cases that demonstrate the correct behavior for unsetting model options, which is crucial for addressing the user's query about the bug.
2025-12-20 21:57:28,786 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will begin by searching for the specified file to locate the relevant test methods. Then, I will look for tests that specifically mention `AlterModelOptions` to identify the ones related to that operation. Finally, I will retrieve the content of those test methods to provide the requested context.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "AlterModelOptions", "relative_path": "django/tests/migrations/test_operations.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2127, 'candidates_token_count': 94, 'total_token_count': 2327, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2127}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 94}], 'thoughts_token_count': 106, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.11366880700943317, 'model_name': 'gemini-2.5-pro'} id='run--2769071d-4916-47a1-bf38-09666b92aa50-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'AlterModelOptions', 'relative_path': 'django/tests/migrations/test_operations.py'}, 'id': '0c5b64ff-7bb0-436b-bea9-3c1d2de24a23', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2127, 'output_tokens': 94, 'total_tokens': 2327, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 106}}
2025-12-20 21:57:31,748 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I was unable to find any test methods containing "AlterModelOptions" in the specified file. I will now broaden my search to find all function definitions within that file. This will allow me to identify the relevant tests and retrieve their content for you.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_type_in_file_with_relative_path', 'arguments': '{"type": "function_definition", "relative_path": "django/tests/migrations/test_operations.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2253, 'candidates_token_count': 87, 'total_token_count': 2507, 'cached_content_token_count': 1475, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2253}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1475}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 87}], 'thoughts_token_count': 167}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2606004956124843, 'model_name': 'gemini-2.5-pro'} id='run--2f48a7f4-6790-4b79-acbb-cc4ae34a3e7d-0' tool_calls=[{'name': 'find_ast_node_with_type_in_file_with_relative_path', 'args': {'type': 'function_definition', 'relative_path': 'django/tests/migrations/test_operations.py'}, 'id': 'dd4db21d-6a0a-4596-ad5f-c24d63145c8d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2253, 'output_tokens': 87, 'total_tokens': 2507, 'input_token_details': {'cache_read': 1475}, 'output_token_details': {'reasoning': 167}}
2025-12-20 21:57:40,072 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='The previous attempts to locate the test methods in `django/tests/migrations/test_operations.py` were unsuccessful. I will now try to read the entire file to identify the relevant test methods and provide you with their content.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/tests/migrations/test_operations.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2372, 'candidates_token_count': 72, 'total_token_count': 3257, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2372}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 72}], 'thoughts_token_count': 813, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4398336145612929, 'model_name': 'gemini-2.5-pro'} id='run--166ffa42-87ec-41a0-8852-0026425012b1-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/tests/migrations/test_operations.py'}, 'id': '61296e00-d31b-4cf2-a8ef-db778749b159', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2372, 'output_tokens': 72, 'total_tokens': 3257, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 813}}
2025-12-20 21:57:46,767 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I apologize, but I was unable to locate the file `django/tests/migrations/test_operations.py`. My attempts to find test methods containing "AlterModelOptions," and even to list all functions within that file, were unsuccessful. A final attempt to read the file directly confirmed that it does not exist in the codebase. Please verify the file path and I will try again.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2473, 'candidates_token_count': 78, 'total_token_count': 3227, 'cached_content_token_count': 1483, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2473}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1483}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 78}], 'thoughts_token_count': 676}, 'finish_reason': 'STOP', 'avg_logprobs': -0.9504473759577825, 'model_name': 'gemini-2.5-pro'} id='run--635f533d-0b03-4ee6-86e6-029b6c3285c0-0' usage_metadata={'input_tokens': 2473, 'output_tokens': 78, 'total_tokens': 3227, 'input_token_details': {'cache_read': 1483}, 'output_token_details': {'reasoning': 676}}
2025-12-20 21:57:46,768 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.transform_tool_messages_to_context_node - INFO - No contexts extracted from tool messages
2025-12-20 21:57:46,769 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_extraction_node - INFO - No explored_context available, skipping context extraction
2025-12-20 21:57:46,769 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 0 contexts to memory for query: Please provide the content of all test methods from `django/tests/migrations/test_operations.py` that test the `AlterModelOptions` operation.
2025-12-20 21:57:46,769 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - No new contexts to store
2025-12-20 21:57:46,770 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - No new contexts to add
2025-12-20 21:57:46,771 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   └── SECURITY.md
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_default_hashing_algorithm.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json_deprecation.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: squashmigrations does not unset model options when optimizing CreateModel and AlterModelOptions

Description: Description
	
When an operation resembling AlterModelOptions(name="test_model", options={}) is squashed into the corresponding CreateModel operation, model options are not cleared on the resulting new CreateModel operation object.
CreateModel.reduce() sets the new options as options={**self.options, **operation.options} in this case (django/db/migrations/operations/models.py line 144 on commit 991dce4f), with no logic to remove options not found in operation.options as is found in AlterModelOptions.state_forwards().
I believe this issue still exists on the master branch based on my reading of the code, but I've only tested against 2.2.

Patch information:
diff --git a/django/db/migrations/operations/models.py b/django/db/migrations/operations/models.py
index dddf7c679c..7c9ea38526 100644
--- a/django/db/migrations/operations/models.py
+++ b/django/db/migrations/operations/models.py
@@ -137,11 +137,15 @@ class CreateModel(ModelOperation):
                 ),
             ]
         elif isinstance(operation, AlterModelOptions) and self.name_lower == operation.name_lower:
+            options = {**self.options, **operation.options}
+            for key in AlterModelOptions.ALTER_OPTION_KEYS:
+                if key not in operation.options:
+                    options.pop(key, False)
             return [
                 CreateModel(
                     self.name,
                     fields=self.fields,
-                    options={**self.options, **operation.options},
+                    options=options,
                     bases=self.bases,
                     managers=self.managers,
                 ),


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `django/tests/migrations/test_operations.py` and `django/tests/migrations/test_optimizer.py`.
Extra Requirements: 
Purpose: I need to analyze these files to find existing test cases that cover the interaction between `CreateModel` and `AlterModelOptions` during migration squashing.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/migrations/test_operations.py
Line number range: 1 - 500
Content:
1. from django.core.exceptions import FieldDoesNotExist
2. from django.db import (
3.     IntegrityError, connection, migrations, models, transaction,
4. )
5. from django.db.migrations.migration import Migration
6. from django.db.migrations.operations.fields import FieldOperation
7. from django.db.migrations.state import ModelState, ProjectState
8. from django.db.transaction import atomic
9. from django.test import SimpleTestCase, override_settings, skipUnlessDBFeature
10. 
11. from .models import FoodManager, FoodQuerySet, UnicodeModel
12. from .test_base import OperationTestBase
13. 
14. 
15. class Mixin:
16.     pass
17. 
18. 
19. class OperationTests(OperationTestBase):
20.     """
21.     Tests running the operations and making sure they do what they say they do.
22.     Each test looks at their state changing, and then their database operation -
23.     both forwards and backwards.
24.     """
25. 
26.     def test_create_model(self):
27.         """
28.         Tests the CreateModel operation.
29.         Most other tests use this operation as part of setup, so check failures here first.
30.         """
31.         operation = migrations.CreateModel(
32.             "Pony",
33.             [
34.                 ("id", models.AutoField(primary_key=True)),
35.                 ("pink", models.IntegerField(default=1)),
36.             ],
37.         )
38.         self.assertEqual(operation.describe(), "Create model Pony")
39.         self.assertEqual(operation.migration_name_fragment, 'pony')
40.         # Test the state alteration
41.         project_state = ProjectState()
42.         new_state = project_state.clone()
43.         operation.state_forwards("test_crmo", new_state)
44.         self.assertEqual(new_state.models["test_crmo", "pony"].name, "Pony")
45.         self.assertEqual(len(new_state.models["test_crmo", "pony"].fields), 2)
46.         # Test the database alteration
47.         self.assertTableNotExists("test_crmo_pony")
48.         with connection.schema_editor() as editor:
49.             operation.database_forwards("test_crmo", editor, project_state, new_state)
50.         self.assertTableExists("test_crmo_pony")
51.         # And test reversal
52.         with connection.schema_editor() as editor:
53.             operation.database_backwards("test_crmo", editor, new_state, project_state)
54.         self.assertTableNotExists("test_crmo_pony")
55.         # And deconstruction
56.         definition = operation.deconstruct()
57.         self.assertEqual(definition[0], "CreateModel")
58.         self.assertEqual(definition[1], [])
59.         self.assertEqual(sorted(definition[2]), ["fields", "name"])
60.         # And default manager not in set
61.         operation = migrations.CreateModel("Foo", fields=[], managers=[("objects", models.Manager())])
62.         definition = operation.deconstruct()
63.         self.assertNotIn('managers', definition[2])
64. 
65.     def test_create_model_with_duplicate_field_name(self):
66.         with self.assertRaisesMessage(ValueError, 'Found duplicate value pink in CreateModel fields argument.'):
67.             migrations.CreateModel(
68.                 "Pony",
69.                 [
70.                     ("id", models.AutoField(primary_key=True)),
71.                     ("pink", models.TextField()),
72.                     ("pink", models.IntegerField(default=1)),
73.                 ],
74.             )
75. 
76.     def test_create_model_with_duplicate_base(self):
77.         message = 'Found duplicate value test_crmo.pony in CreateModel bases argument.'
78.         with self.assertRaisesMessage(ValueError, message):
79.             migrations.CreateModel(
80.                 "Pony",
81.                 fields=[],
82.                 bases=("test_crmo.Pony", "test_crmo.Pony",),
83.             )
84.         with self.assertRaisesMessage(ValueError, message):
85.             migrations.CreateModel(
86.                 "Pony",
87.                 fields=[],
88.                 bases=("test_crmo.Pony", "test_crmo.pony",),
89.             )
90.         message = 'Found duplicate value migrations.unicodemodel in CreateModel bases argument.'
91.         with self.assertRaisesMessage(ValueError, message):
92.             migrations.CreateModel(
93.                 "Pony",
94.                 fields=[],
95.                 bases=(UnicodeModel, UnicodeModel,),
96.             )
97.         with self.assertRaisesMessage(ValueError, message):
98.             migrations.CreateModel(
99.                 "Pony",
100.                 fields=[],
101.                 bases=(UnicodeModel, 'migrations.unicodemodel',),
102.             )
103.         with self.assertRaisesMessage(ValueError, message):
104.             migrations.CreateModel(
105.                 "Pony",
106.                 fields=[],
107.                 bases=(UnicodeModel, 'migrations.UnicodeModel',),
108.             )
109.         message = "Found duplicate value <class 'django.db.models.base.Model'> in CreateModel bases argument."
110.         with self.assertRaisesMessage(ValueError, message):
111.             migrations.CreateModel(
112.                 "Pony",
113.                 fields=[],
114.                 bases=(models.Model, models.Model,),
115.             )
116.         message = "Found duplicate value <class 'migrations.test_operations.Mixin'> in CreateModel bases argument."
117.         with self.assertRaisesMessage(ValueError, message):
118.             migrations.CreateModel(
119.                 "Pony",
120.                 fields=[],
121.                 bases=(Mixin, Mixin,),
122.             )
123. 
124.     def test_create_model_with_duplicate_manager_name(self):
125.         with self.assertRaisesMessage(ValueError, 'Found duplicate value objects in CreateModel managers argument.'):
126.             migrations.CreateModel(
127.                 "Pony",
128.                 fields=[],
129.                 managers=[
130.                     ("objects", models.Manager()),
131.                     ("objects", models.Manager()),
132.                 ],
133.             )
134. 
135.     def test_create_model_with_unique_after(self):
136.         """
137.         Tests the CreateModel operation directly followed by an
138.         AlterUniqueTogether (bug #22844 - sqlite remake issues)
139.         """
140.         operation1 = migrations.CreateModel(
141.             "Pony",
142.             [
143.                 ("id", models.AutoField(primary_key=True)),
144.                 ("pink", models.IntegerField(default=1)),
145.             ],
146.         )
147.         operation2 = migrations.CreateModel(
148.             "Rider",
149.             [
150.                 ("id", models.AutoField(primary_key=True)),
151.                 ("number", models.IntegerField(default=1)),
152.                 ("pony", models.ForeignKey("test_crmoua.Pony", models.CASCADE)),
153.             ],
154.         )
155.         operation3 = migrations.AlterUniqueTogether(
156.             "Rider",
157.             [
158.                 ("number", "pony"),
159.             ],
160.         )
161.         # Test the database alteration
162.         project_state = ProjectState()
163.         self.assertTableNotExists("test_crmoua_pony")
164.         self.assertTableNotExists("test_crmoua_rider")
165.         with connection.schema_editor() as editor:
166.             new_state = project_state.clone()
167.             operation1.state_forwards("test_crmoua", new_state)
168.             operation1.database_forwards("test_crmoua", editor, project_state, new_state)
169.             project_state, new_state = new_state, new_state.clone()
170.             operation2.state_forwards("test_crmoua", new_state)
171.             operation2.database_forwards("test_crmoua", editor, project_state, new_state)
172.             project_state, new_state = new_state, new_state.clone()
173.             operation3.state_forwards("test_crmoua", new_state)
174.             operation3.database_forwards("test_crmoua", editor, project_state, new_state)
175.         self.assertTableExists("test_crmoua_pony")
176.         self.assertTableExists("test_crmoua_rider")
177. 
178.     def test_create_model_m2m(self):
179.         """
180.         Test the creation of a model with a ManyToMany field and the
181.         auto-created "through" model.
182.         """
183.         project_state = self.set_up_test_model("test_crmomm")
184.         operation = migrations.CreateModel(
185.             "Stable",
186.             [
187.                 ("id", models.AutoField(primary_key=True)),
188.                 ("ponies", models.ManyToManyField("Pony", related_name="stables"))
189.             ]
190.         )
191.         # Test the state alteration
192.         new_state = project_state.clone()
193.         operation.state_forwards("test_crmomm", new_state)
194.         # Test the database alteration
195.         self.assertTableNotExists("test_crmomm_stable_ponies")
196.         with connection.schema_editor() as editor:
197.             operation.database_forwards("test_crmomm", editor, project_state, new_state)
198.         self.assertTableExists("test_crmomm_stable")
199.         self.assertTableExists("test_crmomm_stable_ponies")
200.         self.assertColumnNotExists("test_crmomm_stable", "ponies")
201.         # Make sure the M2M field actually works
202.         with atomic():
203.             Pony = new_state.apps.get_model("test_crmomm", "Pony")
204.             Stable = new_state.apps.get_model("test_crmomm", "Stable")
205.             stable = Stable.objects.create()
206.             p1 = Pony.objects.create(pink=False, weight=4.55)
207.             p2 = Pony.objects.create(pink=True, weight=5.43)
208.             stable.ponies.add(p1, p2)
209.             self.assertEqual(stable.ponies.count(), 2)
210.             stable.ponies.all().delete()
211.         # And test reversal
212.         with connection.schema_editor() as editor:
213.             operation.database_backwards("test_crmomm", editor, new_state, project_state)
214.         self.assertTableNotExists("test_crmomm_stable")
215.         self.assertTableNotExists("test_crmomm_stable_ponies")
216. 
217.     def test_create_model_inheritance(self):
218.         """
219.         Tests the CreateModel operation on a multi-table inheritance setup.
220.         """
221.         project_state = self.set_up_test_model("test_crmoih")
222.         # Test the state alteration
223.         operation = migrations.CreateModel(
224.             "ShetlandPony",
225.             [
226.                 ('pony_ptr', models.OneToOneField(
227.                     'test_crmoih.Pony',
228.                     models.CASCADE,
229.                     auto_created=True,
230.                     primary_key=True,
231.                     to_field='id',
232.                     serialize=False,
233.                 )),
234.                 ("cuteness", models.IntegerField(default=1)),
235.             ],
236.         )
237.         new_state = project_state.clone()
238.         operation.state_forwards("test_crmoih", new_state)
239.         self.assertIn(("test_crmoih", "shetlandpony"), new_state.models)
240.         # Test the database alteration
241.         self.assertTableNotExists("test_crmoih_shetlandpony")
242.         with connection.schema_editor() as editor:
243.             operation.database_forwards("test_crmoih", editor, project_state, new_state)
244.         self.assertTableExists("test_crmoih_shetlandpony")
245.         # And test reversal
246.         with connection.schema_editor() as editor:
247.             operation.database_backwards("test_crmoih", editor, new_state, project_state)
248.         self.assertTableNotExists("test_crmoih_shetlandpony")
249. 
250.     def test_create_proxy_model(self):
251.         """
252.         CreateModel ignores proxy models.
253.         """
254.         project_state = self.set_up_test_model("test_crprmo")
255.         # Test the state alteration
256.         operation = migrations.CreateModel(
257.             "ProxyPony",
258.             [],
259.             options={"proxy": True},
260.             bases=("test_crprmo.Pony",),
261.         )
262.         self.assertEqual(operation.describe(), "Create proxy model ProxyPony")
263.         new_state = project_state.clone()
264.         operation.state_forwards("test_crprmo", new_state)
265.         self.assertIn(("test_crprmo", "proxypony"), new_state.models)
266.         # Test the database alteration
267.         self.assertTableNotExists("test_crprmo_proxypony")
268.         self.assertTableExists("test_crprmo_pony")
269.         with connection.schema_editor() as editor:
270.             operation.database_forwards("test_crprmo", editor, project_state, new_state)
271.         self.assertTableNotExists("test_crprmo_proxypony")
272.         self.assertTableExists("test_crprmo_pony")
273.         # And test reversal
274.         with connection.schema_editor() as editor:
275.             operation.database_backwards("test_crprmo", editor, new_state, project_state)
276.         self.assertTableNotExists("test_crprmo_proxypony")
277.         self.assertTableExists("test_crprmo_pony")
278.         # And deconstruction
279.         definition = operation.deconstruct()
280.         self.assertEqual(definition[0], "CreateModel")
281.         self.assertEqual(definition[1], [])
282.         self.assertEqual(sorted(definition[2]), ["bases", "fields", "name", "options"])
283. 
284.     def test_create_unmanaged_model(self):
285.         """
286.         CreateModel ignores unmanaged models.
287.         """
288.         project_state = self.set_up_test_model("test_crummo")
289.         # Test the state alteration
290.         operation = migrations.CreateModel(
291.             "UnmanagedPony",
292.             [],
293.             options={"proxy": True},
294.             bases=("test_crummo.Pony",),
295.         )
296.         self.assertEqual(operation.describe(), "Create proxy model UnmanagedPony")
297.         new_state = project_state.clone()
298.         operation.state_forwards("test_crummo", new_state)
299.         self.assertIn(("test_crummo", "unmanagedpony"), new_state.models)
300.         # Test the database alteration
301.         self.assertTableNotExists("test_crummo_unmanagedpony")
302.         self.assertTableExists("test_crummo_pony")
303.         with connection.schema_editor() as editor:
304.             operation.database_forwards("test_crummo", editor, project_state, new_state)
305.         self.assertTableNotExists("test_crummo_unmanagedpony")
306.         self.assertTableExists("test_crummo_pony")
307.         # And test reversal
308.         with connection.schema_editor() as editor:
309.             operation.database_backwards("test_crummo", editor, new_state, project_state)
310.         self.assertTableNotExists("test_crummo_unmanagedpony")
311.         self.assertTableExists("test_crummo_pony")
312. 
313.     @skipUnlessDBFeature('supports_table_check_constraints')
314.     def test_create_model_with_constraint(self):
315.         where = models.Q(pink__gt=2)
316.         check_constraint = models.CheckConstraint(check=where, name='test_constraint_pony_pink_gt_2')
317.         operation = migrations.CreateModel(
318.             "Pony",
319.             [
320.                 ("id", models.AutoField(primary_key=True)),
321.                 ("pink", models.IntegerField(default=3)),
322.             ],
323.             options={'constraints': [check_constraint]},
324.         )
325. 
326.         # Test the state alteration
327.         project_state = ProjectState()
328.         new_state = project_state.clone()
329.         operation.state_forwards("test_crmo", new_state)
330.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
331. 
332.         # Test database alteration
333.         self.assertTableNotExists("test_crmo_pony")
334.         with connection.schema_editor() as editor:
335.             operation.database_forwards("test_crmo", editor, project_state, new_state)
336.         self.assertTableExists("test_crmo_pony")
337.         with connection.cursor() as cursor:
338.             with self.assertRaises(IntegrityError):
339.                 cursor.execute("INSERT INTO test_crmo_pony (id, pink) VALUES (1, 1)")
340. 
341.         # Test reversal
342.         with connection.schema_editor() as editor:
343.             operation.database_backwards("test_crmo", editor, new_state, project_state)
344.         self.assertTableNotExists("test_crmo_pony")
345. 
346.         # Test deconstruction
347.         definition = operation.deconstruct()
348.         self.assertEqual(definition[0], "CreateModel")
349.         self.assertEqual(definition[1], [])
350.         self.assertEqual(definition[2]['options']['constraints'], [check_constraint])
351. 
352.     def test_create_model_with_partial_unique_constraint(self):
353.         partial_unique_constraint = models.UniqueConstraint(
354.             fields=['pink'],
355.             condition=models.Q(weight__gt=5),
356.             name='test_constraint_pony_pink_for_weight_gt_5_uniq',
357.         )
358.         operation = migrations.CreateModel(
359.             'Pony',
360.             [
361.                 ('id', models.AutoField(primary_key=True)),
362.                 ('pink', models.IntegerField(default=3)),
363.                 ('weight', models.FloatField()),
364.             ],
365.             options={'constraints': [partial_unique_constraint]},
366.         )
367.         # Test the state alteration
368.         project_state = ProjectState()
369.         new_state = project_state.clone()
370.         operation.state_forwards('test_crmo', new_state)
371.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
372.         # Test database alteration
373.         self.assertTableNotExists('test_crmo_pony')
374.         with connection.schema_editor() as editor:
375.             operation.database_forwards('test_crmo', editor, project_state, new_state)
376.         self.assertTableExists('test_crmo_pony')
377.         # Test constraint works
378.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
379.         Pony.objects.create(pink=1, weight=4.0)
380.         Pony.objects.create(pink=1, weight=4.0)
381.         Pony.objects.create(pink=1, weight=6.0)
382.         if connection.features.supports_partial_indexes:
383.             with self.assertRaises(IntegrityError):
384.                 Pony.objects.create(pink=1, weight=7.0)
385.         else:
386.             Pony.objects.create(pink=1, weight=7.0)
387.         # Test reversal
388.         with connection.schema_editor() as editor:
389.             operation.database_backwards('test_crmo', editor, new_state, project_state)
390.         self.assertTableNotExists('test_crmo_pony')
391.         # Test deconstruction
392.         definition = operation.deconstruct()
393.         self.assertEqual(definition[0], 'CreateModel')
394.         self.assertEqual(definition[1], [])
395.         self.assertEqual(definition[2]['options']['constraints'], [partial_unique_constraint])
396. 
397.     def test_create_model_with_deferred_unique_constraint(self):
398.         deferred_unique_constraint = models.UniqueConstraint(
399.             fields=['pink'],
400.             name='deferrable_pink_constraint',
401.             deferrable=models.Deferrable.DEFERRED,
402.         )
403.         operation = migrations.CreateModel(
404.             'Pony',
405.             [
406.                 ('id', models.AutoField(primary_key=True)),
407.                 ('pink', models.IntegerField(default=3)),
408.             ],
409.             options={'constraints': [deferred_unique_constraint]},
410.         )
411.         project_state = ProjectState()
412.         new_state = project_state.clone()
413.         operation.state_forwards('test_crmo', new_state)
414.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
415.         self.assertTableNotExists('test_crmo_pony')
416.         # Create table.
417.         with connection.schema_editor() as editor:
418.             operation.database_forwards('test_crmo', editor, project_state, new_state)
419.         self.assertTableExists('test_crmo_pony')
420.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
421.         Pony.objects.create(pink=1)
422.         if connection.features.supports_deferrable_unique_constraints:
423.             # Unique constraint is deferred.
424.             with transaction.atomic():
425.                 obj = Pony.objects.create(pink=1)
426.                 obj.pink = 2
427.                 obj.save()
428.             # Constraint behavior can be changed with SET CONSTRAINTS.
429.             with self.assertRaises(IntegrityError):
430.                 with transaction.atomic(), connection.cursor() as cursor:
431.                     quoted_name = connection.ops.quote_name(deferred_unique_constraint.name)
432.                     cursor.execute('SET CONSTRAINTS %s IMMEDIATE' % quoted_name)
433.                     obj = Pony.objects.create(pink=1)
434.                     obj.pink = 3
435.                     obj.save()
436.         else:
437.             Pony.objects.create(pink=1)
438.         # Reversal.
439.         with connection.schema_editor() as editor:
440.             operation.database_backwards('test_crmo', editor, new_state, project_state)
441.         self.assertTableNotExists('test_crmo_pony')
442.         # Deconstruction.
443.         definition = operation.deconstruct()
444.         self.assertEqual(definition[0], 'CreateModel')
445.         self.assertEqual(definition[1], [])
446.         self.assertEqual(
447.             definition[2]['options']['constraints'],
448.             [deferred_unique_constraint],
449.         )
450. 
451.     @skipUnlessDBFeature('supports_covering_indexes')
452.     def test_create_model_with_covering_unique_constraint(self):
453.         covering_unique_constraint = models.UniqueConstraint(
454.             fields=['pink'],
455.             include=['weight'],
456.             name='test_constraint_pony_pink_covering_weight',
457.         )
458.         operation = migrations.CreateModel(
459.             'Pony',
460.             [
461.                 ('id', models.AutoField(primary_key=True)),
462.                 ('pink', models.IntegerField(default=3)),
463.                 ('weight', models.FloatField()),
464.             ],
465.             options={'constraints': [covering_unique_constraint]},
466.         )
467.         project_state = ProjectState()
468.         new_state = project_state.clone()
469.         operation.state_forwards('test_crmo', new_state)
470.         self.assertEqual(len(new_state.models['test_crmo', 'pony'].options['constraints']), 1)
471.         self.assertTableNotExists('test_crmo_pony')
472.         # Create table.
473.         with connection.schema_editor() as editor:
474.             operation.database_forwards('test_crmo', editor, project_state, new_state)
475.         self.assertTableExists('test_crmo_pony')
476.         Pony = new_state.apps.get_model('test_crmo', 'Pony')
477.         Pony.objects.create(pink=1, weight=4.0)
478.         with self.assertRaises(IntegrityError):
479.             Pony.objects.create(pink=1, weight=7.0)
480.         # Reversal.
481.         with connection.schema_editor() as editor:
482.             operation.database_backwards('test_crmo', editor, new_state, project_state)
483.         self.assertTableNotExists('test_crmo_pony')
484.         # Deconstruction.
485.         definition = operation.deconstruct()
486.         self.assertEqual(definition[0], 'CreateModel')
487.         self.assertEqual(definition[1], [])
488.         self.assertEqual(
489.             definition[2]['options']['constraints'],
490.             [covering_unique_constraint],
491.         )
492. 
493.     def test_create_model_managers(self):
494.         """
495.         The managers on a model are set.
496.         """
497.         project_state = self.set_up_test_model("test_cmoma")
498.         # Test the state alteration
499.         operation = migrations.CreateModel(
500.             "Food",


File: tests/migrations/test_optimizer.py
Line number range: 1 - 832
Content:
1. from django.db import migrations, models
2. from django.db.migrations import operations
3. from django.db.migrations.optimizer import MigrationOptimizer
4. from django.db.migrations.serializer import serializer_factory
5. from django.test import SimpleTestCase
6. 
7. from .models import EmptyManager, UnicodeModel
8. 
9. 
10. class OptimizerTests(SimpleTestCase):
11.     """
12.     Tests the migration autodetector.
13.     """
14. 
15.     def optimize(self, operations, app_label):
16.         """
17.         Handy shortcut for getting results + number of loops
18.         """
19.         optimizer = MigrationOptimizer()
20.         return optimizer.optimize(operations, app_label), optimizer._iterations
21. 
22.     def serialize(self, value):
23.         return serializer_factory(value).serialize()[0]
24. 
25.     def assertOptimizesTo(self, operations, expected, exact=None, less_than=None, app_label=None):
26.         result, iterations = self.optimize(operations, app_label or 'migrations')
27.         result = [self.serialize(f) for f in result]
28.         expected = [self.serialize(f) for f in expected]
29.         self.assertEqual(expected, result)
30.         if exact is not None and iterations != exact:
31.             raise self.failureException(
32.                 "Optimization did not take exactly %s iterations (it took %s)" % (exact, iterations)
33.             )
34.         if less_than is not None and iterations >= less_than:
35.             raise self.failureException(
36.                 "Optimization did not take less than %s iterations (it took %s)" % (less_than, iterations)
37.             )
38. 
39.     def assertDoesNotOptimize(self, operations, **kwargs):
40.         self.assertOptimizesTo(operations, operations, **kwargs)
41. 
42.     def test_none_app_label(self):
43.         optimizer = MigrationOptimizer()
44.         with self.assertRaisesMessage(TypeError, 'app_label must be a str'):
45.             optimizer.optimize([], None)
46. 
47.     def test_single(self):
48.         """
49.         The optimizer does nothing on a single operation,
50.         and that it does it in just one pass.
51.         """
52.         self.assertOptimizesTo(
53.             [migrations.DeleteModel("Foo")],
54.             [migrations.DeleteModel("Foo")],
55.             exact=1,
56.         )
57. 
58.     def test_create_delete_model(self):
59.         """
60.         CreateModel and DeleteModel should collapse into nothing.
61.         """
62.         self.assertOptimizesTo(
63.             [
64.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
65.                 migrations.DeleteModel("Foo"),
66.             ],
67.             [],
68.         )
69. 
70.     def test_create_rename_model(self):
71.         """
72.         CreateModel should absorb RenameModels.
73.         """
74.         managers = [('objects', EmptyManager())]
75.         self.assertOptimizesTo(
76.             [
77.                 migrations.CreateModel(
78.                     name="Foo",
79.                     fields=[("name", models.CharField(max_length=255))],
80.                     options={'verbose_name': 'Foo'},
81.                     bases=(UnicodeModel,),
82.                     managers=managers,
83.                 ),
84.                 migrations.RenameModel("Foo", "Bar"),
85.             ],
86.             [
87.                 migrations.CreateModel(
88.                     "Bar",
89.                     [("name", models.CharField(max_length=255))],
90.                     options={'verbose_name': 'Foo'},
91.                     bases=(UnicodeModel,),
92.                     managers=managers,
93.                 )
94.             ],
95.         )
96. 
97.     def test_rename_model_self(self):
98.         """
99.         RenameModels should absorb themselves.
100.         """
101.         self.assertOptimizesTo(
102.             [
103.                 migrations.RenameModel("Foo", "Baa"),
104.                 migrations.RenameModel("Baa", "Bar"),
105.             ],
106.             [
107.                 migrations.RenameModel("Foo", "Bar"),
108.             ],
109.         )
110. 
111.     def test_create_alter_model_options(self):
112.         self.assertOptimizesTo(
113.             [
114.                 migrations.CreateModel('Foo', fields=[]),
115.                 migrations.AlterModelOptions(name='Foo', options={'verbose_name_plural': 'Foozes'}),
116.             ],
117.             [
118.                 migrations.CreateModel('Foo', fields=[], options={'verbose_name_plural': 'Foozes'}),
119.             ]
120.         )
121. 
122.     def _test_create_alter_foo_delete_model(self, alter_foo):
123.         """
124.         CreateModel, AlterModelTable, AlterUniqueTogether/AlterIndexTogether/
125.         AlterOrderWithRespectTo, and DeleteModel should collapse into nothing.
126.         """
127.         self.assertOptimizesTo(
128.             [
129.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
130.                 migrations.AlterModelTable("Foo", "woohoo"),
131.                 alter_foo,
132.                 migrations.DeleteModel("Foo"),
133.             ],
134.             [],
135.         )
136. 
137.     def test_create_alter_unique_delete_model(self):
138.         self._test_create_alter_foo_delete_model(migrations.AlterUniqueTogether("Foo", [["a", "b"]]))
139. 
140.     def test_create_alter_index_delete_model(self):
141.         self._test_create_alter_foo_delete_model(migrations.AlterIndexTogether("Foo", [["a", "b"]]))
142. 
143.     def test_create_alter_owrt_delete_model(self):
144.         self._test_create_alter_foo_delete_model(migrations.AlterOrderWithRespectTo("Foo", "a"))
145. 
146.     def _test_alter_alter_model(self, alter_foo, alter_bar):
147.         """
148.         Two AlterUniqueTogether/AlterIndexTogether/AlterOrderWithRespectTo
149.         should collapse into the second.
150.         """
151.         self.assertOptimizesTo(
152.             [
153.                 alter_foo,
154.                 alter_bar,
155.             ],
156.             [
157.                 alter_bar,
158.             ],
159.         )
160. 
161.     def test_alter_alter_table_model(self):
162.         self._test_alter_alter_model(
163.             migrations.AlterModelTable("Foo", "a"),
164.             migrations.AlterModelTable("Foo", "b"),
165.         )
166. 
167.     def test_alter_alter_unique_model(self):
168.         self._test_alter_alter_model(
169.             migrations.AlterUniqueTogether("Foo", [["a", "b"]]),
170.             migrations.AlterUniqueTogether("Foo", [["a", "c"]]),
171.         )
172. 
173.     def test_alter_alter_index_model(self):
174.         self._test_alter_alter_model(
175.             migrations.AlterIndexTogether("Foo", [["a", "b"]]),
176.             migrations.AlterIndexTogether("Foo", [["a", "c"]]),
177.         )
178. 
179.     def test_alter_alter_owrt_model(self):
180.         self._test_alter_alter_model(
181.             migrations.AlterOrderWithRespectTo("Foo", "a"),
182.             migrations.AlterOrderWithRespectTo("Foo", "b"),
183.         )
184. 
185.     def test_optimize_through_create(self):
186.         """
187.         We should be able to optimize away create/delete through a create or delete
188.         of a different model, but only if the create operation does not mention the model
189.         at all.
190.         """
191.         # These should work
192.         self.assertOptimizesTo(
193.             [
194.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
195.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
196.                 migrations.DeleteModel("Foo"),
197.             ],
198.             [
199.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
200.             ],
201.         )
202.         self.assertOptimizesTo(
203.             [
204.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
205.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
206.                 migrations.DeleteModel("Bar"),
207.                 migrations.DeleteModel("Foo"),
208.             ],
209.             [],
210.         )
211.         self.assertOptimizesTo(
212.             [
213.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
214.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
215.                 migrations.DeleteModel("Foo"),
216.                 migrations.DeleteModel("Bar"),
217.             ],
218.             [],
219.         )
220.         # Operations should be optimized if the FK references a model from the
221.         # other app.
222.         self.assertOptimizesTo(
223.             [
224.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
225.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
226.                 migrations.DeleteModel("Foo"),
227.             ],
228.             [
229.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
230.             ],
231.             app_label="otherapp",
232.         )
233.         # But it shouldn't work if a FK references a model with the same
234.         # app_label.
235.         self.assertDoesNotOptimize(
236.             [
237.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
238.                 migrations.CreateModel('Bar', [('other', models.ForeignKey('Foo', models.CASCADE))]),
239.                 migrations.DeleteModel('Foo'),
240.             ],
241.         )
242.         self.assertDoesNotOptimize(
243.             [
244.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
245.                 migrations.CreateModel("Bar", [("other", models.ForeignKey("testapp.Foo", models.CASCADE))]),
246.                 migrations.DeleteModel("Foo"),
247.             ],
248.             app_label="testapp",
249.         )
250.         # This should not work - bases should block it
251.         self.assertDoesNotOptimize(
252.             [
253.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
254.                 migrations.CreateModel('Bar', [('size', models.IntegerField())], bases=('Foo',)),
255.                 migrations.DeleteModel('Foo'),
256.             ],
257.         )
258.         self.assertDoesNotOptimize(
259.             [
260.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
261.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
262.                 migrations.DeleteModel("Foo"),
263.             ],
264.             app_label='testapp',
265.         )
266.         # The same operations should be optimized if app_label and none of
267.         # bases belong to that app.
268.         self.assertOptimizesTo(
269.             [
270.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
271.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
272.                 migrations.DeleteModel("Foo"),
273.             ],
274.             [
275.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
276.             ],
277.             app_label="otherapp",
278.         )
279.         # But it shouldn't work if some of bases belongs to the specified app.
280.         self.assertDoesNotOptimize(
281.             [
282.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
283.                 migrations.CreateModel("Bar", [("size", models.IntegerField())], bases=("testapp.Foo",)),
284.                 migrations.DeleteModel("Foo"),
285.             ],
286.             app_label="testapp",
287.         )
288. 
289.         self.assertOptimizesTo(
290.             [
291.                 migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
292.                 migrations.CreateModel('Person', [('name', models.CharField(max_length=255))]),
293.                 migrations.AddField('book', 'author', models.ForeignKey('test_app.Person', models.CASCADE)),
294.                 migrations.CreateModel('Review', [('book', models.ForeignKey('test_app.Book', models.CASCADE))]),
295.                 migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
296.                 migrations.AddField('review', 'reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
297.                 migrations.RemoveField('book', 'author'),
298.                 migrations.DeleteModel('Person'),
299.             ],
300.             [
301.                 migrations.CreateModel('Book', [('name', models.CharField(max_length=255))]),
302.                 migrations.CreateModel('Reviewer', [('name', models.CharField(max_length=255))]),
303.                 migrations.CreateModel('Review', [
304.                     ('book', models.ForeignKey('test_app.Book', models.CASCADE)),
305.                     ('reviewer', models.ForeignKey('test_app.Reviewer', models.CASCADE)),
306.                 ]),
307.             ],
308.             app_label='test_app',
309.         )
310. 
311.     def test_create_model_add_field(self):
312.         """
313.         AddField should optimize into CreateModel.
314.         """
315.         managers = [('objects', EmptyManager())]
316.         self.assertOptimizesTo(
317.             [
318.                 migrations.CreateModel(
319.                     name="Foo",
320.                     fields=[("name", models.CharField(max_length=255))],
321.                     options={'verbose_name': 'Foo'},
322.                     bases=(UnicodeModel,),
323.                     managers=managers,
324.                 ),
325.                 migrations.AddField("Foo", "age", models.IntegerField()),
326.             ],
327.             [
328.                 migrations.CreateModel(
329.                     name="Foo",
330.                     fields=[
331.                         ("name", models.CharField(max_length=255)),
332.                         ("age", models.IntegerField()),
333.                     ],
334.                     options={'verbose_name': 'Foo'},
335.                     bases=(UnicodeModel,),
336.                     managers=managers,
337.                 ),
338.             ],
339.         )
340. 
341.     def test_create_model_reordering(self):
342.         """
343.         AddField optimizes into CreateModel if it's a FK to a model that's
344.         between them (and there's no FK in the other direction), by changing
345.         the order of the CreateModel operations.
346.         """
347.         self.assertOptimizesTo(
348.             [
349.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
350.                 migrations.CreateModel('Link', [('url', models.TextField())]),
351.                 migrations.AddField('Foo', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
352.             ],
353.             [
354.                 migrations.CreateModel('Link', [('url', models.TextField())]),
355.                 migrations.CreateModel('Foo', [
356.                     ('name', models.CharField(max_length=255)),
357.                     ('link', models.ForeignKey('migrations.Link', models.CASCADE))
358.                 ]),
359.             ],
360.         )
361. 
362.     def test_create_model_reordering_circular_fk(self):
363.         """
364.         CreateModel reordering behavior doesn't result in an infinite loop if
365.         there are FKs in both directions.
366.         """
367.         self.assertOptimizesTo(
368.             [
369.                 migrations.CreateModel('Bar', [('url', models.TextField())]),
370.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
371.                 migrations.AddField('Bar', 'foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
372.                 migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
373.             ],
374.             [
375.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
376.                 migrations.CreateModel('Bar', [
377.                     ('url', models.TextField()),
378.                     ('foo_fk', models.ForeignKey('migrations.Foo', models.CASCADE)),
379.                 ]),
380.                 migrations.AddField('Foo', 'bar_fk', models.ForeignKey('migrations.Bar', models.CASCADE)),
381.             ],
382.         )
383. 
384.     def test_create_model_no_reordering_for_unrelated_fk(self):
385.         """
386.         CreateModel order remains unchanged if the later AddField operation
387.         isn't a FK between them.
388.         """
389.         self.assertDoesNotOptimize(
390.             [
391.                 migrations.CreateModel('Foo', [('name', models.CharField(max_length=255))]),
392.                 migrations.CreateModel('Link', [('url', models.TextField())]),
393.                 migrations.AddField('Other', 'link', models.ForeignKey('migrations.Link', models.CASCADE)),
394.             ],
395.         )
396. 
397.     def test_create_model_no_reordering_of_inherited_model(self):
398.         """
399.         A CreateModel that inherits from another isn't reordered to avoid
400.         moving it earlier than its parent CreateModel operation.
401.         """
402.         self.assertOptimizesTo(
403.             [
404.                 migrations.CreateModel('Other', [('foo', models.CharField(max_length=255))]),
405.                 migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
406.                 migrations.CreateModel(
407.                     'ChildModel',
408.                     [('baz', models.CharField(max_length=255))],
409.                     bases=('migrations.parentmodel',),
410.                 ),
411.                 migrations.AddField('Other', 'fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
412.             ],
413.             [
414.                 migrations.CreateModel('ParentModel', [('bar', models.CharField(max_length=255))]),
415.                 migrations.CreateModel(
416.                     'ChildModel',
417.                     [('baz', models.CharField(max_length=255))],
418.                     bases=('migrations.parentmodel',),
419.                 ),
420.                 migrations.CreateModel(
421.                     'Other', [
422.                         ('foo', models.CharField(max_length=255)),
423.                         ('fk', models.ForeignKey('migrations.ChildModel', models.CASCADE)),
424.                     ]
425.                 ),
426.             ],
427.         )
428. 
429.     def test_create_model_add_field_not_through_m2m_through(self):
430.         """
431.         AddField should NOT optimize into CreateModel if it's an M2M using a
432.         through that's created between them.
433.         """
434.         self.assertDoesNotOptimize(
435.             [
436.                 migrations.CreateModel('Employee', []),
437.                 migrations.CreateModel('Employer', []),
438.                 migrations.CreateModel('Employment', [
439.                     ('employee', models.ForeignKey('migrations.Employee', models.CASCADE)),
440.                     ('employment', models.ForeignKey('migrations.Employer', models.CASCADE)),
441.                 ]),
442.                 migrations.AddField(
443.                     'Employer', 'employees', models.ManyToManyField(
444.                         'migrations.Employee', through='migrations.Employment',
445.                     )
446.                 ),
447.             ],
448.         )
449. 
450.     def test_create_model_alter_field(self):
451.         """
452.         AlterField should optimize into CreateModel.
453.         """
454.         managers = [('objects', EmptyManager())]
455.         self.assertOptimizesTo(
456.             [
457.                 migrations.CreateModel(
458.                     name="Foo",
459.                     fields=[("name", models.CharField(max_length=255))],
460.                     options={'verbose_name': 'Foo'},
461.                     bases=(UnicodeModel,),
462.                     managers=managers,
463.                 ),
464.                 migrations.AlterField("Foo", "name", models.IntegerField()),
465.             ],
466.             [
467.                 migrations.CreateModel(
468.                     name="Foo",
469.                     fields=[
470.                         ("name", models.IntegerField()),
471.                     ],
472.                     options={'verbose_name': 'Foo'},
473.                     bases=(UnicodeModel,),
474.                     managers=managers,
475.                 ),
476.             ],
477.         )
478. 
479.     def test_create_model_rename_field(self):
480.         """
481.         RenameField should optimize into CreateModel.
482.         """
483.         managers = [('objects', EmptyManager())]
484.         self.assertOptimizesTo(
485.             [
486.                 migrations.CreateModel(
487.                     name="Foo",
488.                     fields=[("name", models.CharField(max_length=255))],
489.                     options={'verbose_name': 'Foo'},
490.                     bases=(UnicodeModel,),
491.                     managers=managers,
492.                 ),
493.                 migrations.RenameField("Foo", "name", "title"),
494.             ],
495.             [
496.                 migrations.CreateModel(
497.                     name="Foo",
498.                     fields=[
499.                         ("title", models.CharField(max_length=255)),
500.                     ],
501.                     options={'verbose_name': 'Foo'},
502.                     bases=(UnicodeModel,),
503.                     managers=managers,
504.                 ),
505.             ],
506.         )
507. 
508.     def test_add_field_rename_field(self):
509.         """
510.         RenameField should optimize into AddField
511.         """
512.         self.assertOptimizesTo(
513.             [
514.                 migrations.AddField("Foo", "name", models.CharField(max_length=255)),
515.                 migrations.RenameField("Foo", "name", "title"),
516.             ],
517.             [
518.                 migrations.AddField("Foo", "title", models.CharField(max_length=255)),
519.             ],
520.         )
521. 
522.     def test_alter_field_rename_field(self):
523.         """
524.         RenameField should optimize to the other side of AlterField,
525.         and into itself.
526.         """
527.         self.assertOptimizesTo(
528.             [
529.                 migrations.AlterField("Foo", "name", models.CharField(max_length=255)),
530.                 migrations.RenameField("Foo", "name", "title"),
531.                 migrations.RenameField("Foo", "title", "nom"),
532.             ],
533.             [
534.                 migrations.RenameField("Foo", "name", "nom"),
535.                 migrations.AlterField("Foo", "nom", models.CharField(max_length=255)),
536.             ],
537.         )
538. 
539.     def test_create_model_remove_field(self):
540.         """
541.         RemoveField should optimize into CreateModel.
542.         """
543.         managers = [('objects', EmptyManager())]
544.         self.assertOptimizesTo(
545.             [
546.                 migrations.CreateModel(
547.                     name="Foo",
548.                     fields=[
549.                         ("name", models.CharField(max_length=255)),
550.                         ("age", models.IntegerField()),
551.                     ],
552.                     options={'verbose_name': 'Foo'},
553.                     bases=(UnicodeModel,),
554.                     managers=managers,
555.                 ),
556.                 migrations.RemoveField("Foo", "age"),
557.             ],
558.             [
559.                 migrations.CreateModel(
560.                     name="Foo",
561.                     fields=[
562.                         ("name", models.CharField(max_length=255)),
563.                     ],
564.                     options={'verbose_name': 'Foo'},
565.                     bases=(UnicodeModel,),
566.                     managers=managers,
567.                 ),
568.             ],
569.         )
570. 
571.     def test_add_field_alter_field(self):
572.         """
573.         AlterField should optimize into AddField.
574.         """
575.         self.assertOptimizesTo(
576.             [
577.                 migrations.AddField("Foo", "age", models.IntegerField()),
578.                 migrations.AlterField("Foo", "age", models.FloatField(default=2.4)),
579.             ],
580.             [
581.                 migrations.AddField("Foo", name="age", field=models.FloatField(default=2.4)),
582.             ],
583.         )
584. 
585.     def test_add_field_delete_field(self):
586.         """
587.         RemoveField should cancel AddField
588.         """
589.         self.assertOptimizesTo(
590.             [
591.                 migrations.AddField("Foo", "age", models.IntegerField()),
592.                 migrations.RemoveField("Foo", "age"),
593.             ],
594.             [],
595.         )
596. 
597.     def test_alter_field_delete_field(self):
598.         """
599.         RemoveField should absorb AlterField
600.         """
601.         self.assertOptimizesTo(
602.             [
603.                 migrations.AlterField("Foo", "age", models.IntegerField()),
604.                 migrations.RemoveField("Foo", "age"),
605.             ],
606.             [
607.                 migrations.RemoveField("Foo", "age"),
608.             ],
609.         )
610. 
611.     def _test_create_alter_foo_field(self, alter):
612.         """
613.         CreateModel, AlterFooTogether/AlterOrderWithRespectTo followed by an
614.         add/alter/rename field should optimize to CreateModel with options.
615.         """
616.         option_value = getattr(alter, alter.option_name)
617.         options = {alter.option_name: option_value}
618. 
619.         # AddField
620.         self.assertOptimizesTo(
621.             [
622.                 migrations.CreateModel("Foo", [
623.                     ("a", models.IntegerField()),
624.                     ("b", models.IntegerField()),
625.                 ]),
626.                 alter,
627.                 migrations.AddField("Foo", "c", models.IntegerField()),
628.             ],
629.             [
630.                 migrations.CreateModel("Foo", [
631.                     ("a", models.IntegerField()),
632.                     ("b", models.IntegerField()),
633.                     ("c", models.IntegerField()),
634.                 ], options=options),
635.             ],
636.         )
637. 
638.         # AlterField
639.         self.assertOptimizesTo(
640.             [
641.                 migrations.CreateModel("Foo", [
642.                     ("a", models.IntegerField()),
643.                     ("b", models.IntegerField()),
644.                 ]),
645.                 alter,
646.                 migrations.AlterField("Foo", "b", models.CharField(max_length=255)),
647.             ],
648.             [
649.                 migrations.CreateModel("Foo", [
650.                     ("a", models.IntegerField()),
651.                     ("b", models.CharField(max_length=255)),
652.                 ], options=options),
653.             ],
654.         )
655. 
656.         self.assertOptimizesTo(
657.             [
658.                 migrations.CreateModel("Foo", [
659.                     ("a", models.IntegerField()),
660.                     ("b", models.IntegerField()),
661.                     ("c", models.IntegerField()),
662.                 ]),
663.                 alter,
664.                 migrations.AlterField("Foo", "c", models.CharField(max_length=255)),
665.             ],
666.             [
667.                 migrations.CreateModel("Foo", [
668.                     ("a", models.IntegerField()),
669.                     ("b", models.IntegerField()),
670.                     ("c", models.CharField(max_length=255)),
671.                 ], options=options),
672.             ],
673.         )
674. 
675.         # RenameField
676.         if isinstance(option_value, str):
677.             renamed_options = {alter.option_name: 'c'}
678.         else:
679.             renamed_options = {
680.                 alter.option_name: {
681.                     tuple('c' if value == 'b' else value for value in item) for item in option_value
682.                 }
683.             }
684.         self.assertOptimizesTo(
685.             [
686.                 migrations.CreateModel("Foo", [
687.                     ("a", models.IntegerField()),
688.                     ("b", models.IntegerField()),
689.                 ]),
690.                 alter,
691.                 migrations.RenameField("Foo", "b", "c"),
692.             ],
693.             [
694.                 migrations.CreateModel("Foo", [
695.                     ("a", models.IntegerField()),
696.                     ("c", models.IntegerField()),
697.                 ], options=renamed_options),
698.             ],
699.         )
700. 
701.         self.assertOptimizesTo(
702.             [
703.                 migrations.CreateModel("Foo", [
704.                     ("a", models.IntegerField()),
705.                     ("b", models.IntegerField()),
706.                 ]),
707.                 alter,
708.                 migrations.RenameField("Foo", "b", "x"),
709.                 migrations.RenameField("Foo", "x", "c"),
710.             ],
711.             [
712.                 migrations.CreateModel("Foo", [
713.                     ("a", models.IntegerField()),
714.                     ("c", models.IntegerField()),
715.                 ], options=renamed_options),
716.             ],
717.         )
718. 
719.         self.assertOptimizesTo(
720.             [
721.                 migrations.CreateModel("Foo", [
722.                     ("a", models.IntegerField()),
723.                     ("b", models.IntegerField()),
724.                     ("c", models.IntegerField()),
725.                 ]),
726.                 alter,
727.                 migrations.RenameField("Foo", "c", "d"),
728.             ],
729.             [
730.                 migrations.CreateModel("Foo", [
731.                     ("a", models.IntegerField()),
732.                     ("b", models.IntegerField()),
733.                     ("d", models.IntegerField()),
734.                 ], options=options),
735.             ],
736.         )
737. 
738.         # RemoveField
739.         if isinstance(option_value, str):
740.             removed_options = None
741.         else:
742.             removed_options = {
743.                 alter.option_name: {
744.                     tuple(value for value in item if value != 'b') for item in option_value
745.                 }
746.             }
747.         self.assertOptimizesTo(
748.             [
749.                 migrations.CreateModel("Foo", [
750.                     ("a", models.IntegerField()),
751.                     ("b", models.IntegerField()),
752.                 ]),
753.                 alter,
754.                 migrations.RemoveField("Foo", "b"),
755.             ],
756.             [
757.                 migrations.CreateModel("Foo", [
758.                     ("a", models.IntegerField()),
759.                 ], options=removed_options),
760.             ]
761.         )
762. 
763.         self.assertOptimizesTo(
764.             [
765.                 migrations.CreateModel("Foo", [
766.                     ("a", models.IntegerField()),
767.                     ("b", models.IntegerField()),
768.                     ("c", models.IntegerField()),
769.                 ]),
770.                 alter,
771.                 migrations.RemoveField("Foo", "c"),
772.             ],
773.             [
774.                 migrations.CreateModel("Foo", [
775.                     ("a", models.IntegerField()),
776.                     ("b", models.IntegerField()),
777.                 ], options=options),
778.             ],
779.         )
780. 
781.     def test_create_alter_unique_field(self):
782.         self._test_create_alter_foo_field(migrations.AlterUniqueTogether("Foo", [["a", "b"]]))
783. 
784.     def test_create_alter_index_field(self):
785.         self._test_create_alter_foo_field(migrations.AlterIndexTogether("Foo", [["a", "b"]]))
786. 
787.     def test_create_alter_owrt_field(self):
788.         self._test_create_alter_foo_field(migrations.AlterOrderWithRespectTo("Foo", "b"))
789. 
790.     def test_optimize_through_fields(self):
791.         """
792.         field-level through checking is working. This should manage to collapse
793.         model Foo to nonexistence, and model Bar to a single IntegerField
794.         called "width".
795.         """
796.         self.assertOptimizesTo(
797.             [
798.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
799.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
800.                 migrations.AddField("Foo", "age", models.IntegerField()),
801.                 migrations.AddField("Bar", "width", models.IntegerField()),
802.                 migrations.AlterField("Foo", "age", models.IntegerField()),
803.                 migrations.RenameField("Bar", "size", "dimensions"),
804.                 migrations.RemoveField("Foo", "age"),
805.                 migrations.RenameModel("Foo", "Phou"),
806.                 migrations.RemoveField("Bar", "dimensions"),
807.                 migrations.RenameModel("Phou", "Fou"),
808.                 migrations.DeleteModel("Fou"),
809.             ],
810.             [
811.                 migrations.CreateModel("Bar", [("width", models.IntegerField())]),
812.             ],
813.         )
814. 
815.     def test_optimize_elidable_operation(self):
816.         elidable_operation = operations.base.Operation()
817.         elidable_operation.elidable = True
818.         self.assertOptimizesTo(
819.             [
820.                 elidable_operation,
821.                 migrations.CreateModel("Foo", [("name", models.CharField(max_length=255))]),
822.                 elidable_operation,
823.                 migrations.CreateModel("Bar", [("size", models.IntegerField())]),
824.                 elidable_operation,
825.                 migrations.RenameModel("Foo", "Phou"),
826.                 migrations.DeleteModel("Bar"),
827.                 elidable_operation,
828.             ],
829.             [
830.                 migrations.CreateModel("Phou", [("name", models.CharField(max_length=255))]),
831.             ],
832.         )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-20 21:58:55,974 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases for a bug where `AlterModelOptions` fails to clear options from a `CreateModel` operation during migration squashing. The provided context for `tests/migrations/test_operations.py` is incomplete and misses the tests for `AlterModelOptions`, which are crucial to understand its intended behavior. Additionally, the implementation of `CreateModel` and `AlterModelOptions` in `django/db/migrations/operations/models.py` is needed to fully understand the bug and the provided patch, especially the `ALTER_OPTION_KEYS` attribute.' query='Please provide the full content of `django/db/migrations/operations/models.py` and the rest of `tests/migrations/test_operations.py` from line 501 onwards.' extra_requirements='If sending the full files is not possible, please at least provide the class definitions for `CreateModel` and `AlterModelOptions` from `django/db/migrations/operations/models.py`, and all tests for `AlterModelOptions` from `tests/migrations/test_operations.py`.' purpose='This context is necessary to analyze the implementation of the involved migration operations and their tests, to find existing test cases that demonstrate the buggy behavior of model option handling during optimization.'
2025-12-20 21:58:55,975 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `django/db/migrations/operations/models.py` and the rest of `tests/migrations/test_operations.py` from line 501 onwards.
2025-12-20 21:58:55,975 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-20 21:58:55,976 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-20 21:58:55,977 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-20 21:58:55,977 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `django/db/migrations/operations/models.py` and the rest of `tests/migrations/test_operations.py` from line 501 onwards.
Extra requirements: If sending the full files is not possible, please at least provide the class definitions for `CreateModel` and `AlterModelOptions` from `django/db/migrations/operations/models.py`, and all tests for `AlterModelOptions` from `tests/migrations/test_operations.py`.
Purpose: This context is necessary to analyze the implementation of the involved migration operations and their tests, to find existing test cases that demonstrate the buggy behavior of model option handling during optimization.
2025-12-20 21:58:59,643 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first retrieve the entire content of `django/db/migrations/operations/models.py` to provide the complete implementation context. Then, I will read the latter part of `tests/migrations/test_operations.py`, specifically from line 501 to the end, to get the relevant test cases. This will give you the necessary information to analyze the migration operations and their tests.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 10000.0, "relative_path": "tests/migrations/test_operations.py", "start_line": 501.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2201, 'candidates_token_count': 136, 'total_token_count': 2572, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2201}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 136}], 'thoughts_token_count': 235, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.17699745122124166, 'model_name': 'gemini-2.5-pro'} id='run--7b0816b2-2b34-44c0-8027-6fa6cf7d84fd-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/migrations/operations/models.py'}, 'id': 'c078efd2-cea1-4a15-8324-1b76ec2df5bb', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'end_line': 10000.0, 'relative_path': 'tests/migrations/test_operations.py', 'start_line': 501.0}, 'id': '9cee11e5-4e72-4664-8b0c-b1b59c272fb7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2201, 'output_tokens': 136, 'total_tokens': 2572, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 235}}
2025-12-20 21:59:04,803 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the requested file contents. I have fetched the entire `django/db/migrations/operations/models.py` file, which contains the implementations for `CreateModel` and `AlterModelOptions`. Additionally, I have obtained the content of `tests/migrations/test_operations.py` starting from line 501, which includes all the tests for `AlterModelOptions`, as you requested.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 68027, 'candidates_token_count': 85, 'total_token_count': 68408, 'prompt_tokens_details': [{'modality': 1, 'token_count': 68027}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 296, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.32912169063792507, 'model_name': 'gemini-2.5-pro'} id='run--4d189c5b-0c03-4a91-90ab-aeea79d2dbf4-0' usage_metadata={'input_tokens': 68027, 'output_tokens': 85, 'total_tokens': 68408, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 296}}
2025-12-20 21:59:04,805 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `django/db/migrations/operations/models.py` and the rest of `tests/migrations/test_operations.py` from line 501 onwards.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If sending the full files is not possible, please at least provide the class definitions for `CreateModel` and `AlterModelOptions` from `django/db/migrations/operations/models.py`, and all tests for `AlterModelOptions` from `tests/migrations/test_operations.py`.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This context is necessary to analyze the implementation of the involved migration operations and their tests, to find existing test cases that demonstrate the buggy behavior of model option handling during optimization.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/migrations/operations/models.py
Line number range: 1 - 500
Content:
1. from django.db import models
2. from django.db.migrations.operations.base import Operation
3. from django.db.migrations.state import ModelState
4. from django.db.models.options import normalize_together
5. from django.utils.functional import cached_property
6. 
7. from .fields import (
8.     AddField, AlterField, FieldOperation, RemoveField, RenameField,
9. )
10. from .utils import field_references, get_references, resolve_relation
11. 
12. 
13. def _check_for_duplicates(arg_name, objs):
14.     used_vals = set()
15.     for val in objs:
16.         if val in used_vals:
17.             raise ValueError(
18.                 "Found duplicate value %s in CreateModel %s argument." % (val, arg_name)
19.             )
20.         used_vals.add(val)
21. 
22. 
23. class ModelOperation(Operation):
24.     def __init__(self, name):
25.         self.name = name
26. 
27.     @cached_property
28.     def name_lower(self):
29.         return self.name.lower()
30. 
31.     def references_model(self, name, app_label):
32.         return name.lower() == self.name_lower
33. 
34.     def reduce(self, operation, app_label):
35.         return (
36.             super().reduce(operation, app_label) or
37.             not operation.references_model(self.name, app_label)
38.         )
39. 
40. 
41. class CreateModel(ModelOperation):
42.     """Create a model's table."""
43. 
44.     serialization_expand_args = ['fields', 'options', 'managers']
45. 
46.     def __init__(self, name, fields, options=None, bases=None, managers=None):
47.         self.fields = fields
48.         self.options = options or {}
49.         self.bases = bases or (models.Model,)
50.         self.managers = managers or []
51.         super().__init__(name)
52.         # Sanity-check that there are no duplicated field names, bases, or
53.         # manager names
54.         _check_for_duplicates('fields', (name for name, _ in self.fields))
55.         _check_for_duplicates('bases', (
56.             base._meta.label_lower if hasattr(base, '_meta') else
57.             base.lower() if isinstance(base, str) else base
58.             for base in self.bases
59.         ))
60.         _check_for_duplicates('managers', (name for name, _ in self.managers))
61. 
62.     def deconstruct(self):
63.         kwargs = {
64.             'name': self.name,
65.             'fields': self.fields,
66.         }
67.         if self.options:
68.             kwargs['options'] = self.options
69.         if self.bases and self.bases != (models.Model,):
70.             kwargs['bases'] = self.bases
71.         if self.managers and self.managers != [('objects', models.Manager())]:
72.             kwargs['managers'] = self.managers
73.         return (
74.             self.__class__.__qualname__,
75.             [],
76.             kwargs
77.         )
78. 
79.     def state_forwards(self, app_label, state):
80.         state.add_model(ModelState(
81.             app_label,
82.             self.name,
83.             list(self.fields),
84.             dict(self.options),
85.             tuple(self.bases),
86.             list(self.managers),
87.         ))
88. 
89.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
90.         model = to_state.apps.get_model(app_label, self.name)
91.         if self.allow_migrate_model(schema_editor.connection.alias, model):
92.             schema_editor.create_model(model)
93. 
94.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
95.         model = from_state.apps.get_model(app_label, self.name)
96.         if self.allow_migrate_model(schema_editor.connection.alias, model):
97.             schema_editor.delete_model(model)
98. 
99.     def describe(self):
100.         return "Create %smodel %s" % ("proxy " if self.options.get("proxy", False) else "", self.name)
101. 
102.     @property
103.     def migration_name_fragment(self):
104.         return self.name_lower
105. 
106.     def references_model(self, name, app_label):
107.         name_lower = name.lower()
108.         if name_lower == self.name_lower:
109.             return True
110. 
111.         # Check we didn't inherit from the model
112.         reference_model_tuple = (app_label, name_lower)
113.         for base in self.bases:
114.             if (base is not models.Model and isinstance(base, (models.base.ModelBase, str)) and
115.                     resolve_relation(base, app_label) == reference_model_tuple):
116.                 return True
117. 
118.         # Check we have no FKs/M2Ms with it
119.         for _name, field in self.fields:
120.             if field_references((app_label, self.name_lower), field, reference_model_tuple):
121.                 return True
122.         return False
123. 
124.     def reduce(self, operation, app_label):
125.         if (isinstance(operation, DeleteModel) and
126.                 self.name_lower == operation.name_lower and
127.                 not self.options.get("proxy", False)):
128.             return []
129.         elif isinstance(operation, RenameModel) and self.name_lower == operation.old_name_lower:
130.             return [
131.                 CreateModel(
132.                     operation.new_name,
133.                     fields=self.fields,
134.                     options=self.options,
135.                     bases=self.bases,
136.                     managers=self.managers,
137.                 ),
138.             ]
139.         elif isinstance(operation, AlterModelOptions) and self.name_lower == operation.name_lower:
140.             return [
141.                 CreateModel(
142.                     self.name,
143.                     fields=self.fields,
144.                     options={**self.options, **operation.options},
145.                     bases=self.bases,
146.                     managers=self.managers,
147.                 ),
148.             ]
149.         elif isinstance(operation, AlterTogetherOptionOperation) and self.name_lower == operation.name_lower:
150.             return [
151.                 CreateModel(
152.                     self.name,
153.                     fields=self.fields,
154.                     options={**self.options, **{operation.option_name: operation.option_value}},
155.                     bases=self.bases,
156.                     managers=self.managers,
157.                 ),
158.             ]
159.         elif isinstance(operation, AlterOrderWithRespectTo) and self.name_lower == operation.name_lower:
160.             return [
161.                 CreateModel(
162.                     self.name,
163.                     fields=self.fields,
164.                     options={**self.options, 'order_with_respect_to': operation.order_with_respect_to},
165.                     bases=self.bases,
166.                     managers=self.managers,
167.                 ),
168.             ]
169.         elif isinstance(operation, FieldOperation) and self.name_lower == operation.model_name_lower:
170.             if isinstance(operation, AddField):
171.                 return [
172.                     CreateModel(
173.                         self.name,
174.                         fields=self.fields + [(operation.name, operation.field)],
175.                         options=self.options,
176.                         bases=self.bases,
177.                         managers=self.managers,
178.                     ),
179.                 ]
180.             elif isinstance(operation, AlterField):
181.                 return [
182.                     CreateModel(
183.                         self.name,
184.                         fields=[
185.                             (n, operation.field if n == operation.name else v)
186.                             for n, v in self.fields
187.                         ],
188.                         options=self.options,
189.                         bases=self.bases,
190.                         managers=self.managers,
191.                     ),
192.                 ]
193.             elif isinstance(operation, RemoveField):
194.                 options = self.options.copy()
195.                 for option_name in ('unique_together', 'index_together'):
196.                     option = options.pop(option_name, None)
197.                     if option:
198.                         option = set(filter(bool, (
199.                             tuple(f for f in fields if f != operation.name_lower) for fields in option
200.                         )))
201.                         if option:
202.                             options[option_name] = option
203.                 order_with_respect_to = options.get('order_with_respect_to')
204.                 if order_with_respect_to == operation.name_lower:
205.                     del options['order_with_respect_to']
206.                 return [
207.                     CreateModel(
208.                         self.name,
209.                         fields=[
210.                             (n, v)
211.                             for n, v in self.fields
212.                             if n.lower() != operation.name_lower
213.                         ],
214.                         options=options,
215.                         bases=self.bases,
216.                         managers=self.managers,
217.                     ),
218.                 ]
219.             elif isinstance(operation, RenameField):
220.                 options = self.options.copy()
221.                 for option_name in ('unique_together', 'index_together'):
222.                     option = options.get(option_name)
223.                     if option:
224.                         options[option_name] = {
225.                             tuple(operation.new_name if f == operation.old_name else f for f in fields)
226.                             for fields in option
227.                         }
228.                 order_with_respect_to = options.get('order_with_respect_to')
229.                 if order_with_respect_to == operation.old_name:
230.                     options['order_with_respect_to'] = operation.new_name
231.                 return [
232.                     CreateModel(
233.                         self.name,
234.                         fields=[
235.                             (operation.new_name if n == operation.old_name else n, v)
236.                             for n, v in self.fields
237.                         ],
238.                         options=options,
239.                         bases=self.bases,
240.                         managers=self.managers,
241.                     ),
242.                 ]
243.         return super().reduce(operation, app_label)
244. 
245. 
246. class DeleteModel(ModelOperation):
247.     """Drop a model's table."""
248. 
249.     def deconstruct(self):
250.         kwargs = {
251.             'name': self.name,
252.         }
253.         return (
254.             self.__class__.__qualname__,
255.             [],
256.             kwargs
257.         )
258. 
259.     def state_forwards(self, app_label, state):
260.         state.remove_model(app_label, self.name_lower)
261. 
262.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
263.         model = from_state.apps.get_model(app_label, self.name)
264.         if self.allow_migrate_model(schema_editor.connection.alias, model):
265.             schema_editor.delete_model(model)
266. 
267.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
268.         model = to_state.apps.get_model(app_label, self.name)
269.         if self.allow_migrate_model(schema_editor.connection.alias, model):
270.             schema_editor.create_model(model)
271. 
272.     def references_model(self, name, app_label):
273.         # The deleted model could be referencing the specified model through
274.         # related fields.
275.         return True
276. 
277.     def describe(self):
278.         return "Delete model %s" % self.name
279. 
280.     @property
281.     def migration_name_fragment(self):
282.         return 'delete_%s' % self.name_lower
283. 
284. 
285. class RenameModel(ModelOperation):
286.     """Rename a model."""
287. 
288.     def __init__(self, old_name, new_name):
289.         self.old_name = old_name
290.         self.new_name = new_name
291.         super().__init__(old_name)
292. 
293.     @cached_property
294.     def old_name_lower(self):
295.         return self.old_name.lower()
296. 
297.     @cached_property
298.     def new_name_lower(self):
299.         return self.new_name.lower()
300. 
301.     def deconstruct(self):
302.         kwargs = {
303.             'old_name': self.old_name,
304.             'new_name': self.new_name,
305.         }
306.         return (
307.             self.__class__.__qualname__,
308.             [],
309.             kwargs
310.         )
311. 
312.     def state_forwards(self, app_label, state):
313.         # Add a new model.
314.         renamed_model = state.models[app_label, self.old_name_lower].clone()
315.         renamed_model.name = self.new_name
316.         state.models[app_label, self.new_name_lower] = renamed_model
317.         # Repoint all fields pointing to the old model to the new one.
318.         old_model_tuple = (app_label, self.old_name_lower)
319.         new_remote_model = '%s.%s' % (app_label, self.new_name)
320.         to_reload = set()
321.         for model_state, name, field, reference in get_references(state, old_model_tuple):
322.             changed_field = None
323.             if reference.to:
324.                 changed_field = field.clone()
325.                 changed_field.remote_field.model = new_remote_model
326.             if reference.through:
327.                 if changed_field is None:
328.                     changed_field = field.clone()
329.                 changed_field.remote_field.through = new_remote_model
330.             if changed_field:
331.                 model_state.fields[name] = changed_field
332.                 to_reload.add((model_state.app_label, model_state.name_lower))
333.         # Reload models related to old model before removing the old model.
334.         state.reload_models(to_reload, delay=True)
335.         # Remove the old model.
336.         state.remove_model(app_label, self.old_name_lower)
337.         state.reload_model(app_label, self.new_name_lower, delay=True)
338. 
339.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
340.         new_model = to_state.apps.get_model(app_label, self.new_name)
341.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
342.             old_model = from_state.apps.get_model(app_label, self.old_name)
343.             # Move the main table
344.             schema_editor.alter_db_table(
345.                 new_model,
346.                 old_model._meta.db_table,
347.                 new_model._meta.db_table,
348.             )
349.             # Alter the fields pointing to us
350.             for related_object in old_model._meta.related_objects:
351.                 if related_object.related_model == old_model:
352.                     model = new_model
353.                     related_key = (app_label, self.new_name_lower)
354.                 else:
355.                     model = related_object.related_model
356.                     related_key = (
357.                         related_object.related_model._meta.app_label,
358.                         related_object.related_model._meta.model_name,
359.                     )
360.                 to_field = to_state.apps.get_model(
361.                     *related_key
362.                 )._meta.get_field(related_object.field.name)
363.                 schema_editor.alter_field(
364.                     model,
365.                     related_object.field,
366.                     to_field,
367.                 )
368.             # Rename M2M fields whose name is based on this model's name.
369.             fields = zip(old_model._meta.local_many_to_many, new_model._meta.local_many_to_many)
370.             for (old_field, new_field) in fields:
371.                 # Skip self-referential fields as these are renamed above.
372.                 if new_field.model == new_field.related_model or not new_field.remote_field.through._meta.auto_created:
373.                     continue
374.                 # Rename the M2M table that's based on this model's name.
375.                 old_m2m_model = old_field.remote_field.through
376.                 new_m2m_model = new_field.remote_field.through
377.                 schema_editor.alter_db_table(
378.                     new_m2m_model,
379.                     old_m2m_model._meta.db_table,
380.                     new_m2m_model._meta.db_table,
381.                 )
382.                 # Rename the column in the M2M table that's based on this
383.                 # model's name.
384.                 schema_editor.alter_field(
385.                     new_m2m_model,
386.                     old_m2m_model._meta.get_field(old_model._meta.model_name),
387.                     new_m2m_model._meta.get_field(new_model._meta.model_name),
388.                 )
389. 
390.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
391.         self.new_name_lower, self.old_name_lower = self.old_name_lower, self.new_name_lower
392.         self.new_name, self.old_name = self.old_name, self.new_name
393. 
394.         self.database_forwards(app_label, schema_editor, from_state, to_state)
395. 
396.         self.new_name_lower, self.old_name_lower = self.old_name_lower, self.new_name_lower
397.         self.new_name, self.old_name = self.old_name, self.new_name
398. 
399.     def references_model(self, name, app_label):
400.         return (
401.             name.lower() == self.old_name_lower or
402.             name.lower() == self.new_name_lower
403.         )
404. 
405.     def describe(self):
406.         return "Rename model %s to %s" % (self.old_name, self.new_name)
407. 
408.     @property
409.     def migration_name_fragment(self):
410.         return 'rename_%s_%s' % (self.old_name_lower, self.new_name_lower)
411. 
412.     def reduce(self, operation, app_label):
413.         if (isinstance(operation, RenameModel) and
414.                 self.new_name_lower == operation.old_name_lower):
415.             return [
416.                 RenameModel(
417.                     self.old_name,
418.                     operation.new_name,
419.                 ),
420.             ]
421.         # Skip `ModelOperation.reduce` as we want to run `references_model`
422.         # against self.new_name.
423.         return (
424.             super(ModelOperation, self).reduce(operation, app_label) or
425.             not operation.references_model(self.new_name, app_label)
426.         )
427. 
428. 
429. class ModelOptionOperation(ModelOperation):
430.     def reduce(self, operation, app_label):
431.         if isinstance(operation, (self.__class__, DeleteModel)) and self.name_lower == operation.name_lower:
432.             return [operation]
433.         return super().reduce(operation, app_label)
434. 
435. 
436. class AlterModelTable(ModelOptionOperation):
437.     """Rename a model's table."""
438. 
439.     def __init__(self, name, table):
440.         self.table = table
441.         super().__init__(name)
442. 
443.     def deconstruct(self):
444.         kwargs = {
445.             'name': self.name,
446.             'table': self.table,
447.         }
448.         return (
449.             self.__class__.__qualname__,
450.             [],
451.             kwargs
452.         )
453. 
454.     def state_forwards(self, app_label, state):
455.         state.models[app_label, self.name_lower].options["db_table"] = self.table
456.         state.reload_model(app_label, self.name_lower, delay=True)
457. 
458.     def database_forwards(self, app_label, schema_editor, from_state, to_state):
459.         new_model = to_state.apps.get_model(app_label, self.name)
460.         if self.allow_migrate_model(schema_editor.connection.alias, new_model):
461.             old_model = from_state.apps.get_model(app_label, self.name)
462.             schema_editor.alter_db_table(
463.                 new_model,
464.                 old_model._meta.db_table,
465.                 new_model._meta.db_table,
466.             )
467.             # Rename M2M fields whose name is based on this model's db_table
468.             for (old_field, new_field) in zip(old_model._meta.local_many_to_many, new_model._meta.local_many_to_many):
469.                 if new_field.remote_field.through._meta.auto_created:
470.                     schema_editor.alter_db_table(
471.                         new_field.remote_field.through,
472.                         old_field.remote_field.through._meta.db_table,
473.                         new_field.remote_field.through._meta.db_table,
474.                     )
475. 
476.     def database_backwards(self, app_label, schema_editor, from_state, to_state):
477.         return self.database_forwards(app_label, schema_editor, from_state, to_state)
478. 
479.     def describe(self):
480.         return "Rename table for %s to %s" % (
481.             self.name,
482.             self.table if self.table is not None else "(default)"
483.         )
484. 
485.     @property
486.     def migration_name_fragment(self):
487.         return 'alter_%s_table' % self.name_lower
488. 
489. 
490. class AlterTogetherOptionOperation(ModelOptionOperation):
491.     option_name = None
492. 
493.     def __init__(self, name, option_value):
494.         if option_value:
495.             option_value = set(normalize_together(option_value))
496.         setattr(self, self.option_name, option_value)
497.         super().__init__(name)
498. 
499.     @cached_property
500.     def option_value(self):


File: tests/migrations/test_operations.py
Line number range: 501 - 10000
Content:
501.             fields=[
502.                 ("id", models.AutoField(primary_key=True)),
503.             ],
504.             managers=[
505.                 ("food_qs", FoodQuerySet.as_manager()),
506.                 ("food_mgr", FoodManager("a", "b")),
507.                 ("food_mgr_kwargs", FoodManager("x", "y", 3, 4)),
508.             ]
509.         )
510.         self.assertEqual(operation.describe(), "Create model Food")
511.         new_state = project_state.clone()
512.         operation.state_forwards("test_cmoma", new_state)
513.         self.assertIn(("test_cmoma", "food"), new_state.models)
514.         managers = new_state.models["test_cmoma", "food"].managers
515.         self.assertEqual(managers[0][0], "food_qs")
516.         self.assertIsInstance(managers[0][1], models.Manager)
517.         self.assertEqual(managers[1][0], "food_mgr")
518.         self.assertIsInstance(managers[1][1], FoodManager)
519.         self.assertEqual(managers[1][1].args, ("a", "b", 1, 2))
520.         self.assertEqual(managers[2][0], "food_mgr_kwargs")
521.         self.assertIsInstance(managers[2][1], FoodManager)
522.         self.assertEqual(managers[2][1].args, ("x", "y", 3, 4))
523. 
524.     def test_delete_model(self):
525.         """
526.         Tests the DeleteModel operation.
527.         """
528.         project_state = self.set_up_test_model("test_dlmo")
529.         # Test the state alteration
530.         operation = migrations.DeleteModel("Pony")
531.         self.assertEqual(operation.describe(), "Delete model Pony")
532.         self.assertEqual(operation.migration_name_fragment, 'delete_pony')
533.         new_state = project_state.clone()
534.         operation.state_forwards("test_dlmo", new_state)
535.         self.assertNotIn(("test_dlmo", "pony"), new_state.models)
536.         # Test the database alteration
537.         self.assertTableExists("test_dlmo_pony")
538.         with connection.schema_editor() as editor:
539.             operation.database_forwards("test_dlmo", editor, project_state, new_state)
540.         self.assertTableNotExists("test_dlmo_pony")
541.         # And test reversal
542.         with connection.schema_editor() as editor:
543.             operation.database_backwards("test_dlmo", editor, new_state, project_state)
544.         self.assertTableExists("test_dlmo_pony")
545.         # And deconstruction
546.         definition = operation.deconstruct()
547.         self.assertEqual(definition[0], "DeleteModel")
548.         self.assertEqual(definition[1], [])
549.         self.assertEqual(list(definition[2]), ["name"])
550. 
551.     def test_delete_proxy_model(self):
552.         """
553.         Tests the DeleteModel operation ignores proxy models.
554.         """
555.         project_state = self.set_up_test_model("test_dlprmo", proxy_model=True)
556.         # Test the state alteration
557.         operation = migrations.DeleteModel("ProxyPony")
558.         new_state = project_state.clone()
559.         operation.state_forwards("test_dlprmo", new_state)
560.         self.assertIn(("test_dlprmo", "proxypony"), project_state.models)
561.         self.assertNotIn(("test_dlprmo", "proxypony"), new_state.models)
562.         # Test the database alteration
563.         self.assertTableExists("test_dlprmo_pony")
564.         self.assertTableNotExists("test_dlprmo_proxypony")
565.         with connection.schema_editor() as editor:
566.             operation.database_forwards("test_dlprmo", editor, project_state, new_state)
567.         self.assertTableExists("test_dlprmo_pony")
568.         self.assertTableNotExists("test_dlprmo_proxypony")
569.         # And test reversal
570.         with connection.schema_editor() as editor:
571.             operation.database_backwards("test_dlprmo", editor, new_state, project_state)
572.         self.assertTableExists("test_dlprmo_pony")
573.         self.assertTableNotExists("test_dlprmo_proxypony")
574. 
575.     def test_delete_mti_model(self):
576.         project_state = self.set_up_test_model('test_dlmtimo', mti_model=True)
577.         # Test the state alteration
578.         operation = migrations.DeleteModel('ShetlandPony')
579.         new_state = project_state.clone()
580.         operation.state_forwards('test_dlmtimo', new_state)
581.         self.assertIn(('test_dlmtimo', 'shetlandpony'), project_state.models)
582.         self.assertNotIn(('test_dlmtimo', 'shetlandpony'), new_state.models)
583.         # Test the database alteration
584.         self.assertTableExists('test_dlmtimo_pony')
585.         self.assertTableExists('test_dlmtimo_shetlandpony')
586.         self.assertColumnExists('test_dlmtimo_shetlandpony', 'pony_ptr_id')
587.         with connection.schema_editor() as editor:
588.             operation.database_forwards('test_dlmtimo', editor, project_state, new_state)
589.         self.assertTableExists('test_dlmtimo_pony')
590.         self.assertTableNotExists('test_dlmtimo_shetlandpony')
591.         # And test reversal
592.         with connection.schema_editor() as editor:
593.             operation.database_backwards('test_dlmtimo', editor, new_state, project_state)
594.         self.assertTableExists('test_dlmtimo_pony')
595.         self.assertTableExists('test_dlmtimo_shetlandpony')
596.         self.assertColumnExists('test_dlmtimo_shetlandpony', 'pony_ptr_id')
597. 
598.     def test_rename_model(self):
599.         """
600.         Tests the RenameModel operation.
601.         """
602.         project_state = self.set_up_test_model("test_rnmo", related_model=True)
603.         # Test the state alteration
604.         operation = migrations.RenameModel("Pony", "Horse")
605.         self.assertEqual(operation.describe(), "Rename model Pony to Horse")
606.         self.assertEqual(operation.migration_name_fragment, 'rename_pony_horse')
607.         # Test initial state and database
608.         self.assertIn(("test_rnmo", "pony"), project_state.models)
609.         self.assertNotIn(("test_rnmo", "horse"), project_state.models)
610.         self.assertTableExists("test_rnmo_pony")
611.         self.assertTableNotExists("test_rnmo_horse")
612.         if connection.features.supports_foreign_keys:
613.             self.assertFKExists("test_rnmo_rider", ["pony_id"], ("test_rnmo_pony", "id"))
614.             self.assertFKNotExists("test_rnmo_rider", ["pony_id"], ("test_rnmo_horse", "id"))
615.         # Migrate forwards
616.         new_state = project_state.clone()
617.         atomic_rename = connection.features.supports_atomic_references_rename
618.         new_state = self.apply_operations("test_rnmo", new_state, [operation], atomic=atomic_rename)
619.         # Test new state and database
620.         self.assertNotIn(("test_rnmo", "pony"), new_state.models)
621.         self.assertIn(("test_rnmo", "horse"), new_state.models)
622.         # RenameModel also repoints all incoming FKs and M2Ms
623.         self.assertEqual(
624.             new_state.models['test_rnmo', 'rider'].fields['pony'].remote_field.model,
625.             'test_rnmo.Horse',
626.         )
627.         self.assertTableNotExists("test_rnmo_pony")
628.         self.assertTableExists("test_rnmo_horse")
629.         if connection.features.supports_foreign_keys:
630.             self.assertFKNotExists("test_rnmo_rider", ["pony_id"], ("test_rnmo_pony", "id"))
631.             self.assertFKExists("test_rnmo_rider", ["pony_id"], ("test_rnmo_horse", "id"))
632.         # Migrate backwards
633.         original_state = self.unapply_operations("test_rnmo", project_state, [operation], atomic=atomic_rename)
634.         # Test original state and database
635.         self.assertIn(("test_rnmo", "pony"), original_state.models)
636.         self.assertNotIn(("test_rnmo", "horse"), original_state.models)
637.         self.assertEqual(
638.             original_state.models['test_rnmo', 'rider'].fields['pony'].remote_field.model,
639.             'Pony',
640.         )
641.         self.assertTableExists("test_rnmo_pony")
642.         self.assertTableNotExists("test_rnmo_horse")
643.         if connection.features.supports_foreign_keys:
644.             self.assertFKExists("test_rnmo_rider", ["pony_id"], ("test_rnmo_pony", "id"))
645.             self.assertFKNotExists("test_rnmo_rider", ["pony_id"], ("test_rnmo_horse", "id"))
646.         # And deconstruction
647.         definition = operation.deconstruct()
648.         self.assertEqual(definition[0], "RenameModel")
649.         self.assertEqual(definition[1], [])
650.         self.assertEqual(definition[2], {'old_name': "Pony", 'new_name': "Horse"})
651. 
652.     def test_rename_model_state_forwards(self):
653.         """
654.         RenameModel operations shouldn't trigger the caching of rendered apps
655.         on state without prior apps.
656.         """
657.         state = ProjectState()
658.         state.add_model(ModelState('migrations', 'Foo', []))
659.         operation = migrations.RenameModel('Foo', 'Bar')
660.         operation.state_forwards('migrations', state)
661.         self.assertNotIn('apps', state.__dict__)
662.         self.assertNotIn(('migrations', 'foo'), state.models)
663.         self.assertIn(('migrations', 'bar'), state.models)
664.         # Now with apps cached.
665.         apps = state.apps
666.         operation = migrations.RenameModel('Bar', 'Foo')
667.         operation.state_forwards('migrations', state)
668.         self.assertIs(state.apps, apps)
669.         self.assertNotIn(('migrations', 'bar'), state.models)
670.         self.assertIn(('migrations', 'foo'), state.models)
671. 
672.     def test_rename_model_with_self_referential_fk(self):
673.         """
674.         Tests the RenameModel operation on model with self referential FK.
675.         """
676.         project_state = self.set_up_test_model("test_rmwsrf", related_model=True)
677.         # Test the state alteration
678.         operation = migrations.RenameModel("Rider", "HorseRider")
679.         self.assertEqual(operation.describe(), "Rename model Rider to HorseRider")
680.         new_state = project_state.clone()
681.         operation.state_forwards("test_rmwsrf", new_state)
682.         self.assertNotIn(("test_rmwsrf", "rider"), new_state.models)
683.         self.assertIn(("test_rmwsrf", "horserider"), new_state.models)
684.         # Remember, RenameModel also repoints all incoming FKs and M2Ms
685.         self.assertEqual(
686.             'self',
687.             new_state.models["test_rmwsrf", "horserider"].fields['friend'].remote_field.model
688.         )
689.         HorseRider = new_state.apps.get_model('test_rmwsrf', 'horserider')
690.         self.assertIs(HorseRider._meta.get_field('horserider').remote_field.model, HorseRider)
691.         # Test the database alteration
692.         self.assertTableExists("test_rmwsrf_rider")
693.         self.assertTableNotExists("test_rmwsrf_horserider")
694.         if connection.features.supports_foreign_keys:
695.             self.assertFKExists("test_rmwsrf_rider", ["friend_id"], ("test_rmwsrf_rider", "id"))
696.             self.assertFKNotExists("test_rmwsrf_rider", ["friend_id"], ("test_rmwsrf_horserider", "id"))
697.         atomic_rename = connection.features.supports_atomic_references_rename
698.         with connection.schema_editor(atomic=atomic_rename) as editor:
699.             operation.database_forwards("test_rmwsrf", editor, project_state, new_state)
700.         self.assertTableNotExists("test_rmwsrf_rider")
701.         self.assertTableExists("test_rmwsrf_horserider")
702.         if connection.features.supports_foreign_keys:
703.             self.assertFKNotExists("test_rmwsrf_horserider", ["friend_id"], ("test_rmwsrf_rider", "id"))
704.             self.assertFKExists("test_rmwsrf_horserider", ["friend_id"], ("test_rmwsrf_horserider", "id"))
705.         # And test reversal
706.         with connection.schema_editor(atomic=atomic_rename) as editor:
707.             operation.database_backwards("test_rmwsrf", editor, new_state, project_state)
708.         self.assertTableExists("test_rmwsrf_rider")
709.         self.assertTableNotExists("test_rmwsrf_horserider")
710.         if connection.features.supports_foreign_keys:
711.             self.assertFKExists("test_rmwsrf_rider", ["friend_id"], ("test_rmwsrf_rider", "id"))
712.             self.assertFKNotExists("test_rmwsrf_rider", ["friend_id"], ("test_rmwsrf_horserider", "id"))
713. 
714.     def test_rename_model_with_superclass_fk(self):
715.         """
716.         Tests the RenameModel operation on a model which has a superclass that
717.         has a foreign key.
718.         """
719.         project_state = self.set_up_test_model("test_rmwsc", related_model=True, mti_model=True)
720.         # Test the state alteration
721.         operation = migrations.RenameModel("ShetlandPony", "LittleHorse")
722.         self.assertEqual(operation.describe(), "Rename model ShetlandPony to LittleHorse")
723.         new_state = project_state.clone()
724.         operation.state_forwards("test_rmwsc", new_state)
725.         self.assertNotIn(("test_rmwsc", "shetlandpony"), new_state.models)
726.         self.assertIn(("test_rmwsc", "littlehorse"), new_state.models)
727.         # RenameModel shouldn't repoint the superclass's relations, only local ones
728.         self.assertEqual(
729.             project_state.models['test_rmwsc', 'rider'].fields['pony'].remote_field.model,
730.             new_state.models['test_rmwsc', 'rider'].fields['pony'].remote_field.model,
731.         )
732.         # Before running the migration we have a table for Shetland Pony, not Little Horse
733.         self.assertTableExists("test_rmwsc_shetlandpony")
734.         self.assertTableNotExists("test_rmwsc_littlehorse")
735.         if connection.features.supports_foreign_keys:
736.             # and the foreign key on rider points to pony, not shetland pony
737.             self.assertFKExists("test_rmwsc_rider", ["pony_id"], ("test_rmwsc_pony", "id"))
738.             self.assertFKNotExists("test_rmwsc_rider", ["pony_id"], ("test_rmwsc_shetlandpony", "id"))
739.         with connection.schema_editor(atomic=connection.features.supports_atomic_references_rename) as editor:
740.             operation.database_forwards("test_rmwsc", editor, project_state, new_state)
741.         # Now we have a little horse table, not shetland pony
742.         self.assertTableNotExists("test_rmwsc_shetlandpony")
743.         self.assertTableExists("test_rmwsc_littlehorse")
744.         if connection.features.supports_foreign_keys:
745.             # but the Foreign keys still point at pony, not little horse
746.             self.assertFKExists("test_rmwsc_rider", ["pony_id"], ("test_rmwsc_pony", "id"))
747.             self.assertFKNotExists("test_rmwsc_rider", ["pony_id"], ("test_rmwsc_littlehorse", "id"))
748. 
749.     def test_rename_model_with_self_referential_m2m(self):
750.         app_label = "test_rename_model_with_self_referential_m2m"
751. 
752.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
753.             migrations.CreateModel("ReflexivePony", fields=[
754.                 ("id", models.AutoField(primary_key=True)),
755.                 ("ponies", models.ManyToManyField("self")),
756.             ]),
757.         ])
758.         project_state = self.apply_operations(app_label, project_state, operations=[
759.             migrations.RenameModel("ReflexivePony", "ReflexivePony2"),
760.         ], atomic=connection.features.supports_atomic_references_rename)
761.         Pony = project_state.apps.get_model(app_label, "ReflexivePony2")
762.         pony = Pony.objects.create()
763.         pony.ponies.add(pony)
764. 
765.     def test_rename_model_with_m2m(self):
766.         app_label = "test_rename_model_with_m2m"
767.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
768.             migrations.CreateModel("Rider", fields=[
769.                 ("id", models.AutoField(primary_key=True)),
770.             ]),
771.             migrations.CreateModel("Pony", fields=[
772.                 ("id", models.AutoField(primary_key=True)),
773.                 ("riders", models.ManyToManyField("Rider")),
774.             ]),
775.         ])
776.         Pony = project_state.apps.get_model(app_label, "Pony")
777.         Rider = project_state.apps.get_model(app_label, "Rider")
778.         pony = Pony.objects.create()
779.         rider = Rider.objects.create()
780.         pony.riders.add(rider)
781. 
782.         project_state = self.apply_operations(app_label, project_state, operations=[
783.             migrations.RenameModel("Pony", "Pony2"),
784.         ], atomic=connection.features.supports_atomic_references_rename)
785.         Pony = project_state.apps.get_model(app_label, "Pony2")
786.         Rider = project_state.apps.get_model(app_label, "Rider")
787.         pony = Pony.objects.create()
788.         rider = Rider.objects.create()
789.         pony.riders.add(rider)
790.         self.assertEqual(Pony.objects.count(), 2)
791.         self.assertEqual(Rider.objects.count(), 2)
792.         self.assertEqual(Pony._meta.get_field('riders').remote_field.through.objects.count(), 2)
793. 
794.     def test_rename_m2m_target_model(self):
795.         app_label = "test_rename_m2m_target_model"
796.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
797.             migrations.CreateModel("Rider", fields=[
798.                 ("id", models.AutoField(primary_key=True)),
799.             ]),
800.             migrations.CreateModel("Pony", fields=[
801.                 ("id", models.AutoField(primary_key=True)),
802.                 ("riders", models.ManyToManyField("Rider")),
803.             ]),
804.         ])
805.         Pony = project_state.apps.get_model(app_label, "Pony")
806.         Rider = project_state.apps.get_model(app_label, "Rider")
807.         pony = Pony.objects.create()
808.         rider = Rider.objects.create()
809.         pony.riders.add(rider)
810. 
811.         project_state = self.apply_operations(app_label, project_state, operations=[
812.             migrations.RenameModel("Rider", "Rider2"),
813.         ], atomic=connection.features.supports_atomic_references_rename)
814.         Pony = project_state.apps.get_model(app_label, "Pony")
815.         Rider = project_state.apps.get_model(app_label, "Rider2")
816.         pony = Pony.objects.create()
817.         rider = Rider.objects.create()
818.         pony.riders.add(rider)
819.         self.assertEqual(Pony.objects.count(), 2)
820.         self.assertEqual(Rider.objects.count(), 2)
821.         self.assertEqual(Pony._meta.get_field('riders').remote_field.through.objects.count(), 2)
822. 
823.     def test_rename_m2m_through_model(self):
824.         app_label = "test_rename_through"
825.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
826.             migrations.CreateModel("Rider", fields=[
827.                 ("id", models.AutoField(primary_key=True)),
828.             ]),
829.             migrations.CreateModel("Pony", fields=[
830.                 ("id", models.AutoField(primary_key=True)),
831.             ]),
832.             migrations.CreateModel("PonyRider", fields=[
833.                 ("id", models.AutoField(primary_key=True)),
834.                 ("rider", models.ForeignKey("test_rename_through.Rider", models.CASCADE)),
835.                 ("pony", models.ForeignKey("test_rename_through.Pony", models.CASCADE)),
836.             ]),
837.             migrations.AddField(
838.                 "Pony",
839.                 "riders",
840.                 models.ManyToManyField("test_rename_through.Rider", through="test_rename_through.PonyRider"),
841.             ),
842.         ])
843.         Pony = project_state.apps.get_model(app_label, "Pony")
844.         Rider = project_state.apps.get_model(app_label, "Rider")
845.         PonyRider = project_state.apps.get_model(app_label, "PonyRider")
846.         pony = Pony.objects.create()
847.         rider = Rider.objects.create()
848.         PonyRider.objects.create(pony=pony, rider=rider)
849. 
850.         project_state = self.apply_operations(app_label, project_state, operations=[
851.             migrations.RenameModel("PonyRider", "PonyRider2"),
852.         ])
853.         Pony = project_state.apps.get_model(app_label, "Pony")
854.         Rider = project_state.apps.get_model(app_label, "Rider")
855.         PonyRider = project_state.apps.get_model(app_label, "PonyRider2")
856.         pony = Pony.objects.first()
857.         rider = Rider.objects.create()
858.         PonyRider.objects.create(pony=pony, rider=rider)
859.         self.assertEqual(Pony.objects.count(), 1)
860.         self.assertEqual(Rider.objects.count(), 2)
861.         self.assertEqual(PonyRider.objects.count(), 2)
862.         self.assertEqual(pony.riders.count(), 2)
863. 
864.     def test_rename_m2m_model_after_rename_field(self):
865.         """RenameModel renames a many-to-many column after a RenameField."""
866.         app_label = 'test_rename_multiple'
867.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
868.             migrations.CreateModel('Pony', fields=[
869.                 ('id', models.AutoField(primary_key=True)),
870.                 ('name', models.CharField(max_length=20)),
871.             ]),
872.             migrations.CreateModel('Rider', fields=[
873.                 ('id', models.AutoField(primary_key=True)),
874.                 ('pony', models.ForeignKey('test_rename_multiple.Pony', models.CASCADE)),
875.             ]),
876.             migrations.CreateModel('PonyRider', fields=[
877.                 ('id', models.AutoField(primary_key=True)),
878.                 ('riders', models.ManyToManyField('Rider')),
879.             ]),
880.             migrations.RenameField(model_name='pony', old_name='name', new_name='fancy_name'),
881.             migrations.RenameModel(old_name='Rider', new_name='Jockey'),
882.         ], atomic=connection.features.supports_atomic_references_rename)
883.         Pony = project_state.apps.get_model(app_label, 'Pony')
884.         Jockey = project_state.apps.get_model(app_label, 'Jockey')
885.         PonyRider = project_state.apps.get_model(app_label, 'PonyRider')
886.         # No "no such column" error means the column was renamed correctly.
887.         pony = Pony.objects.create(fancy_name='a good name')
888.         jockey = Jockey.objects.create(pony=pony)
889.         ponyrider = PonyRider.objects.create()
890.         ponyrider.riders.add(jockey)
891. 
892.     def test_add_field(self):
893.         """
894.         Tests the AddField operation.
895.         """
896.         # Test the state alteration
897.         operation = migrations.AddField(
898.             "Pony",
899.             "height",
900.             models.FloatField(null=True, default=5),
901.         )
902.         self.assertEqual(operation.describe(), "Add field height to Pony")
903.         self.assertEqual(operation.migration_name_fragment, 'pony_height')
904.         project_state, new_state = self.make_test_state("test_adfl", operation)
905.         self.assertEqual(len(new_state.models["test_adfl", "pony"].fields), 4)
906.         field = new_state.models['test_adfl', 'pony'].fields['height']
907.         self.assertEqual(field.default, 5)
908.         # Test the database alteration
909.         self.assertColumnNotExists("test_adfl_pony", "height")
910.         with connection.schema_editor() as editor:
911.             operation.database_forwards("test_adfl", editor, project_state, new_state)
912.         self.assertColumnExists("test_adfl_pony", "height")
913.         # And test reversal
914.         with connection.schema_editor() as editor:
915.             operation.database_backwards("test_adfl", editor, new_state, project_state)
916.         self.assertColumnNotExists("test_adfl_pony", "height")
917.         # And deconstruction
918.         definition = operation.deconstruct()
919.         self.assertEqual(definition[0], "AddField")
920.         self.assertEqual(definition[1], [])
921.         self.assertEqual(sorted(definition[2]), ["field", "model_name", "name"])
922. 
923.     def test_add_charfield(self):
924.         """
925.         Tests the AddField operation on TextField.
926.         """
927.         project_state = self.set_up_test_model("test_adchfl")
928. 
929.         Pony = project_state.apps.get_model("test_adchfl", "Pony")
930.         pony = Pony.objects.create(weight=42)
931. 
932.         new_state = self.apply_operations("test_adchfl", project_state, [
933.             migrations.AddField(
934.                 "Pony",
935.                 "text",
936.                 models.CharField(max_length=10, default="some text"),
937.             ),
938.             migrations.AddField(
939.                 "Pony",
940.                 "empty",
941.                 models.CharField(max_length=10, default=""),
942.             ),
943.             # If not properly quoted digits would be interpreted as an int.
944.             migrations.AddField(
945.                 "Pony",
946.                 "digits",
947.                 models.CharField(max_length=10, default="42"),
948.             ),
949.             # Manual quoting is fragile and could trip on quotes. Refs #xyz.
950.             migrations.AddField(
951.                 "Pony",
952.                 "quotes",
953.                 models.CharField(max_length=10, default='"\'"'),
954.             ),
955.         ])
956. 
957.         Pony = new_state.apps.get_model("test_adchfl", "Pony")
958.         pony = Pony.objects.get(pk=pony.pk)
959.         self.assertEqual(pony.text, "some text")
960.         self.assertEqual(pony.empty, "")
961.         self.assertEqual(pony.digits, "42")
962.         self.assertEqual(pony.quotes, '"\'"')
963. 
964.     def test_add_textfield(self):
965.         """
966.         Tests the AddField operation on TextField.
967.         """
968.         project_state = self.set_up_test_model("test_adtxtfl")
969. 
970.         Pony = project_state.apps.get_model("test_adtxtfl", "Pony")
971.         pony = Pony.objects.create(weight=42)
972. 
973.         new_state = self.apply_operations("test_adtxtfl", project_state, [
974.             migrations.AddField(
975.                 "Pony",
976.                 "text",
977.                 models.TextField(default="some text"),
978.             ),
979.             migrations.AddField(
980.                 "Pony",
981.                 "empty",
982.                 models.TextField(default=""),
983.             ),
984.             # If not properly quoted digits would be interpreted as an int.
985.             migrations.AddField(
986.                 "Pony",
987.                 "digits",
988.                 models.TextField(default="42"),
989.             ),
990.             # Manual quoting is fragile and could trip on quotes. Refs #xyz.
991.             migrations.AddField(
992.                 "Pony",
993.                 "quotes",
994.                 models.TextField(default='"\'"'),
995.             ),
996.         ])
997. 
998.         Pony = new_state.apps.get_model("test_adtxtfl", "Pony")
999.         pony = Pony.objects.get(pk=pony.pk)
1000.         self.assertEqual(pony.text, "some text")
1001.         self.assertEqual(pony.empty, "")
1002.         self.assertEqual(pony.digits, "42")
1003.         self.assertEqual(pony.quotes, '"\'"')
1004. 
1005.     def test_add_binaryfield(self):
1006.         """
1007.         Tests the AddField operation on TextField/BinaryField.
1008.         """
1009.         project_state = self.set_up_test_model("test_adbinfl")
1010. 
1011.         Pony = project_state.apps.get_model("test_adbinfl", "Pony")
1012.         pony = Pony.objects.create(weight=42)
1013. 
1014.         new_state = self.apply_operations("test_adbinfl", project_state, [
1015.             migrations.AddField(
1016.                 "Pony",
1017.                 "blob",
1018.                 models.BinaryField(default=b"some text"),
1019.             ),
1020.             migrations.AddField(
1021.                 "Pony",
1022.                 "empty",
1023.                 models.BinaryField(default=b""),
1024.             ),
1025.             # If not properly quoted digits would be interpreted as an int.
1026.             migrations.AddField(
1027.                 "Pony",
1028.                 "digits",
1029.                 models.BinaryField(default=b"42"),
1030.             ),
1031.             # Manual quoting is fragile and could trip on quotes. Refs #xyz.
1032.             migrations.AddField(
1033.                 "Pony",
1034.                 "quotes",
1035.                 models.BinaryField(default=b'"\'"'),
1036.             ),
1037.         ])
1038. 
1039.         Pony = new_state.apps.get_model("test_adbinfl", "Pony")
1040.         pony = Pony.objects.get(pk=pony.pk)
1041.         # SQLite returns buffer/memoryview, cast to bytes for checking.
1042.         self.assertEqual(bytes(pony.blob), b"some text")
1043.         self.assertEqual(bytes(pony.empty), b"")
1044.         self.assertEqual(bytes(pony.digits), b"42")
1045.         self.assertEqual(bytes(pony.quotes), b'"\'"')
1046. 
1047.     def test_column_name_quoting(self):
1048.         """
1049.         Column names that are SQL keywords shouldn't cause problems when used
1050.         in migrations (#22168).
1051.         """
1052.         project_state = self.set_up_test_model("test_regr22168")
1053.         operation = migrations.AddField(
1054.             "Pony",
1055.             "order",
1056.             models.IntegerField(default=0),
1057.         )
1058.         new_state = project_state.clone()
1059.         operation.state_forwards("test_regr22168", new_state)
1060.         with connection.schema_editor() as editor:
1061.             operation.database_forwards("test_regr22168", editor, project_state, new_state)
1062.         self.assertColumnExists("test_regr22168_pony", "order")
1063. 
1064.     def test_add_field_preserve_default(self):
1065.         """
1066.         Tests the AddField operation's state alteration
1067.         when preserve_default = False.
1068.         """
1069.         project_state = self.set_up_test_model("test_adflpd")
1070.         # Test the state alteration
1071.         operation = migrations.AddField(
1072.             "Pony",
1073.             "height",
1074.             models.FloatField(null=True, default=4),
1075.             preserve_default=False,
1076.         )
1077.         new_state = project_state.clone()
1078.         operation.state_forwards("test_adflpd", new_state)
1079.         self.assertEqual(len(new_state.models["test_adflpd", "pony"].fields), 4)
1080.         field = new_state.models['test_adflpd', 'pony'].fields['height']
1081.         self.assertEqual(field.default, models.NOT_PROVIDED)
1082.         # Test the database alteration
1083.         project_state.apps.get_model("test_adflpd", "pony").objects.create(
1084.             weight=4,
1085.         )
1086.         self.assertColumnNotExists("test_adflpd_pony", "height")
1087.         with connection.schema_editor() as editor:
1088.             operation.database_forwards("test_adflpd", editor, project_state, new_state)
1089.         self.assertColumnExists("test_adflpd_pony", "height")
1090.         # And deconstruction
1091.         definition = operation.deconstruct()
1092.         self.assertEqual(definition[0], "AddField")
1093.         self.assertEqual(definition[1], [])
1094.         self.assertEqual(sorted(definition[2]), ["field", "model_name", "name", "preserve_default"])
1095. 
1096.     def test_add_field_m2m(self):
1097.         """
1098.         Tests the AddField operation with a ManyToManyField.
1099.         """
1100.         project_state = self.set_up_test_model("test_adflmm", second_model=True)
1101.         # Test the state alteration
1102.         operation = migrations.AddField("Pony", "stables", models.ManyToManyField("Stable", related_name="ponies"))
1103.         new_state = project_state.clone()
1104.         operation.state_forwards("test_adflmm", new_state)
1105.         self.assertEqual(len(new_state.models["test_adflmm", "pony"].fields), 4)
1106.         # Test the database alteration
1107.         self.assertTableNotExists("test_adflmm_pony_stables")
1108.         with connection.schema_editor() as editor:
1109.             operation.database_forwards("test_adflmm", editor, project_state, new_state)
1110.         self.assertTableExists("test_adflmm_pony_stables")
1111.         self.assertColumnNotExists("test_adflmm_pony", "stables")
1112.         # Make sure the M2M field actually works
1113.         with atomic():
1114.             Pony = new_state.apps.get_model("test_adflmm", "Pony")
1115.             p = Pony.objects.create(pink=False, weight=4.55)
1116.             p.stables.create()
1117.             self.assertEqual(p.stables.count(), 1)
1118.             p.stables.all().delete()
1119.         # And test reversal
1120.         with connection.schema_editor() as editor:
1121.             operation.database_backwards("test_adflmm", editor, new_state, project_state)
1122.         self.assertTableNotExists("test_adflmm_pony_stables")
1123. 
1124.     def test_alter_field_m2m(self):
1125.         project_state = self.set_up_test_model("test_alflmm", second_model=True)
1126. 
1127.         project_state = self.apply_operations("test_alflmm", project_state, operations=[
1128.             migrations.AddField("Pony", "stables", models.ManyToManyField("Stable", related_name="ponies"))
1129.         ])
1130.         Pony = project_state.apps.get_model("test_alflmm", "Pony")
1131.         self.assertFalse(Pony._meta.get_field('stables').blank)
1132. 
1133.         project_state = self.apply_operations("test_alflmm", project_state, operations=[
1134.             migrations.AlterField(
1135.                 "Pony", "stables", models.ManyToManyField(to="Stable", related_name="ponies", blank=True)
1136.             )
1137.         ])
1138.         Pony = project_state.apps.get_model("test_alflmm", "Pony")
1139.         self.assertTrue(Pony._meta.get_field('stables').blank)
1140. 
1141.     def test_repoint_field_m2m(self):
1142.         project_state = self.set_up_test_model("test_alflmm", second_model=True, third_model=True)
1143. 
1144.         project_state = self.apply_operations("test_alflmm", project_state, operations=[
1145.             migrations.AddField("Pony", "places", models.ManyToManyField("Stable", related_name="ponies"))
1146.         ])
1147.         Pony = project_state.apps.get_model("test_alflmm", "Pony")
1148. 
1149.         project_state = self.apply_operations("test_alflmm", project_state, operations=[
1150.             migrations.AlterField("Pony", "places", models.ManyToManyField(to="Van", related_name="ponies"))
1151.         ])
1152. 
1153.         # Ensure the new field actually works
1154.         Pony = project_state.apps.get_model("test_alflmm", "Pony")
1155.         p = Pony.objects.create(pink=False, weight=4.55)
1156.         p.places.create()
1157.         self.assertEqual(p.places.count(), 1)
1158.         p.places.all().delete()
1159. 
1160.     def test_remove_field_m2m(self):
1161.         project_state = self.set_up_test_model("test_rmflmm", second_model=True)
1162. 
1163.         project_state = self.apply_operations("test_rmflmm", project_state, operations=[
1164.             migrations.AddField("Pony", "stables", models.ManyToManyField("Stable", related_name="ponies"))
1165.         ])
1166.         self.assertTableExists("test_rmflmm_pony_stables")
1167. 
1168.         with_field_state = project_state.clone()
1169.         operations = [migrations.RemoveField("Pony", "stables")]
1170.         project_state = self.apply_operations("test_rmflmm", project_state, operations=operations)
1171.         self.assertTableNotExists("test_rmflmm_pony_stables")
1172. 
1173.         # And test reversal
1174.         self.unapply_operations("test_rmflmm", with_field_state, operations=operations)
1175.         self.assertTableExists("test_rmflmm_pony_stables")
1176. 
1177.     def test_remove_field_m2m_with_through(self):
1178.         project_state = self.set_up_test_model("test_rmflmmwt", second_model=True)
1179. 
1180.         self.assertTableNotExists("test_rmflmmwt_ponystables")
1181.         project_state = self.apply_operations("test_rmflmmwt", project_state, operations=[
1182.             migrations.CreateModel("PonyStables", fields=[
1183.                 ("pony", models.ForeignKey('test_rmflmmwt.Pony', models.CASCADE)),
1184.                 ("stable", models.ForeignKey('test_rmflmmwt.Stable', models.CASCADE)),
1185.             ]),
1186.             migrations.AddField(
1187.                 "Pony", "stables",
1188.                 models.ManyToManyField("Stable", related_name="ponies", through='test_rmflmmwt.PonyStables')
1189.             )
1190.         ])
1191.         self.assertTableExists("test_rmflmmwt_ponystables")
1192. 
1193.         operations = [migrations.RemoveField("Pony", "stables"), migrations.DeleteModel("PonyStables")]
1194.         self.apply_operations("test_rmflmmwt", project_state, operations=operations)
1195. 
1196.     def test_remove_field(self):
1197.         """
1198.         Tests the RemoveField operation.
1199.         """
1200.         project_state = self.set_up_test_model("test_rmfl")
1201.         # Test the state alteration
1202.         operation = migrations.RemoveField("Pony", "pink")
1203.         self.assertEqual(operation.describe(), "Remove field pink from Pony")
1204.         self.assertEqual(operation.migration_name_fragment, 'remove_pony_pink')
1205.         new_state = project_state.clone()
1206.         operation.state_forwards("test_rmfl", new_state)
1207.         self.assertEqual(len(new_state.models["test_rmfl", "pony"].fields), 2)
1208.         # Test the database alteration
1209.         self.assertColumnExists("test_rmfl_pony", "pink")
1210.         with connection.schema_editor() as editor:
1211.             operation.database_forwards("test_rmfl", editor, project_state, new_state)
1212.         self.assertColumnNotExists("test_rmfl_pony", "pink")
1213.         # And test reversal
1214.         with connection.schema_editor() as editor:
1215.             operation.database_backwards("test_rmfl", editor, new_state, project_state)
1216.         self.assertColumnExists("test_rmfl_pony", "pink")
1217.         # And deconstruction
1218.         definition = operation.deconstruct()
1219.         self.assertEqual(definition[0], "RemoveField")
1220.         self.assertEqual(definition[1], [])
1221.         self.assertEqual(definition[2], {'model_name': "Pony", 'name': 'pink'})
1222. 
1223.     def test_remove_fk(self):
1224.         """
1225.         Tests the RemoveField operation on a foreign key.
1226.         """
1227.         project_state = self.set_up_test_model("test_rfk", related_model=True)
1228.         self.assertColumnExists("test_rfk_rider", "pony_id")
1229.         operation = migrations.RemoveField("Rider", "pony")
1230. 
1231.         new_state = project_state.clone()
1232.         operation.state_forwards("test_rfk", new_state)
1233.         with connection.schema_editor() as editor:
1234.             operation.database_forwards("test_rfk", editor, project_state, new_state)
1235.         self.assertColumnNotExists("test_rfk_rider", "pony_id")
1236.         with connection.schema_editor() as editor:
1237.             operation.database_backwards("test_rfk", editor, new_state, project_state)
1238.         self.assertColumnExists("test_rfk_rider", "pony_id")
1239. 
1240.     def test_alter_model_table(self):
1241.         """
1242.         Tests the AlterModelTable operation.
1243.         """
1244.         project_state = self.set_up_test_model("test_almota")
1245.         # Test the state alteration
1246.         operation = migrations.AlterModelTable("Pony", "test_almota_pony_2")
1247.         self.assertEqual(operation.describe(), "Rename table for Pony to test_almota_pony_2")
1248.         self.assertEqual(operation.migration_name_fragment, 'alter_pony_table')
1249.         new_state = project_state.clone()
1250.         operation.state_forwards("test_almota", new_state)
1251.         self.assertEqual(new_state.models["test_almota", "pony"].options["db_table"], "test_almota_pony_2")
1252.         # Test the database alteration
1253.         self.assertTableExists("test_almota_pony")
1254.         self.assertTableNotExists("test_almota_pony_2")
1255.         with connection.schema_editor() as editor:
1256.             operation.database_forwards("test_almota", editor, project_state, new_state)
1257.         self.assertTableNotExists("test_almota_pony")
1258.         self.assertTableExists("test_almota_pony_2")
1259.         # And test reversal
1260.         with connection.schema_editor() as editor:
1261.             operation.database_backwards("test_almota", editor, new_state, project_state)
1262.         self.assertTableExists("test_almota_pony")
1263.         self.assertTableNotExists("test_almota_pony_2")
1264.         # And deconstruction
1265.         definition = operation.deconstruct()
1266.         self.assertEqual(definition[0], "AlterModelTable")
1267.         self.assertEqual(definition[1], [])
1268.         self.assertEqual(definition[2], {'name': "Pony", 'table': "test_almota_pony_2"})
1269. 
1270.     def test_alter_model_table_none(self):
1271.         """
1272.         Tests the AlterModelTable operation if the table name is set to None.
1273.         """
1274.         operation = migrations.AlterModelTable("Pony", None)
1275.         self.assertEqual(operation.describe(), "Rename table for Pony to (default)")
1276. 
1277.     def test_alter_model_table_noop(self):
1278.         """
1279.         Tests the AlterModelTable operation if the table name is not changed.
1280.         """
1281.         project_state = self.set_up_test_model("test_almota")
1282.         # Test the state alteration
1283.         operation = migrations.AlterModelTable("Pony", "test_almota_pony")
1284.         new_state = project_state.clone()
1285.         operation.state_forwards("test_almota", new_state)
1286.         self.assertEqual(new_state.models["test_almota", "pony"].options["db_table"], "test_almota_pony")
1287.         # Test the database alteration
1288.         self.assertTableExists("test_almota_pony")
1289.         with connection.schema_editor() as editor:
1290.             operation.database_forwards("test_almota", editor, project_state, new_state)
1291.         self.assertTableExists("test_almota_pony")
1292.         # And test reversal
1293.         with connection.schema_editor() as editor:
1294.             operation.database_backwards("test_almota", editor, new_state, project_state)
1295.         self.assertTableExists("test_almota_pony")
1296. 
1297.     def test_alter_model_table_m2m(self):
1298.         """
1299.         AlterModelTable should rename auto-generated M2M tables.
1300.         """
1301.         app_label = "test_talflmltlm2m"
1302.         pony_db_table = 'pony_foo'
1303.         project_state = self.set_up_test_model(app_label, second_model=True, db_table=pony_db_table)
1304.         # Add the M2M field
1305.         first_state = project_state.clone()
1306.         operation = migrations.AddField("Pony", "stables", models.ManyToManyField("Stable"))
1307.         operation.state_forwards(app_label, first_state)
1308.         with connection.schema_editor() as editor:
1309.             operation.database_forwards(app_label, editor, project_state, first_state)
1310.         original_m2m_table = "%s_%s" % (pony_db_table, "stables")
1311.         new_m2m_table = "%s_%s" % (app_label, "pony_stables")
1312.         self.assertTableExists(original_m2m_table)
1313.         self.assertTableNotExists(new_m2m_table)
1314.         # Rename the Pony db_table which should also rename the m2m table.
1315.         second_state = first_state.clone()
1316.         operation = migrations.AlterModelTable(name='pony', table=None)
1317.         operation.state_forwards(app_label, second_state)
1318.         atomic_rename = connection.features.supports_atomic_references_rename
1319.         with connection.schema_editor(atomic=atomic_rename) as editor:
1320.             operation.database_forwards(app_label, editor, first_state, second_state)
1321.         self.assertTableExists(new_m2m_table)
1322.         self.assertTableNotExists(original_m2m_table)
1323.         # And test reversal
1324.         with connection.schema_editor(atomic=atomic_rename) as editor:
1325.             operation.database_backwards(app_label, editor, second_state, first_state)
1326.         self.assertTableExists(original_m2m_table)
1327.         self.assertTableNotExists(new_m2m_table)
1328. 
1329.     def test_alter_field(self):
1330.         """
1331.         Tests the AlterField operation.
1332.         """
1333.         project_state = self.set_up_test_model("test_alfl")
1334.         # Test the state alteration
1335.         operation = migrations.AlterField("Pony", "pink", models.IntegerField(null=True))
1336.         self.assertEqual(operation.describe(), "Alter field pink on Pony")
1337.         self.assertEqual(operation.migration_name_fragment, 'alter_pony_pink')
1338.         new_state = project_state.clone()
1339.         operation.state_forwards("test_alfl", new_state)
1340.         self.assertIs(project_state.models['test_alfl', 'pony'].fields['pink'].null, False)
1341.         self.assertIs(new_state.models['test_alfl', 'pony'].fields['pink'].null, True)
1342.         # Test the database alteration
1343.         self.assertColumnNotNull("test_alfl_pony", "pink")
1344.         with connection.schema_editor() as editor:
1345.             operation.database_forwards("test_alfl", editor, project_state, new_state)
1346.         self.assertColumnNull("test_alfl_pony", "pink")
1347.         # And test reversal
1348.         with connection.schema_editor() as editor:
1349.             operation.database_backwards("test_alfl", editor, new_state, project_state)
1350.         self.assertColumnNotNull("test_alfl_pony", "pink")
1351.         # And deconstruction
1352.         definition = operation.deconstruct()
1353.         self.assertEqual(definition[0], "AlterField")
1354.         self.assertEqual(definition[1], [])
1355.         self.assertEqual(sorted(definition[2]), ["field", "model_name", "name"])
1356. 
1357.     def test_alter_field_add_db_column_noop(self):
1358.         """
1359.         AlterField operation is a noop when adding only a db_column and the
1360.         column name is not changed.
1361.         """
1362.         app_label = 'test_afadbn'
1363.         project_state = self.set_up_test_model(app_label, related_model=True)
1364.         pony_table = '%s_pony' % app_label
1365.         new_state = project_state.clone()
1366.         operation = migrations.AlterField('Pony', 'weight', models.FloatField(db_column='weight'))
1367.         operation.state_forwards(app_label, new_state)
1368.         self.assertIsNone(
1369.             project_state.models[app_label, 'pony'].fields['weight'].db_column,
1370.         )
1371.         self.assertEqual(
1372.             new_state.models[app_label, 'pony'].fields['weight'].db_column,
1373.             'weight',
1374.         )
1375.         self.assertColumnExists(pony_table, 'weight')
1376.         with connection.schema_editor() as editor:
1377.             with self.assertNumQueries(0):
1378.                 operation.database_forwards(app_label, editor, project_state, new_state)
1379.         self.assertColumnExists(pony_table, 'weight')
1380.         with connection.schema_editor() as editor:
1381.             with self.assertNumQueries(0):
1382.                 operation.database_backwards(app_label, editor, new_state, project_state)
1383.         self.assertColumnExists(pony_table, 'weight')
1384. 
1385.         rider_table = '%s_rider' % app_label
1386.         new_state = project_state.clone()
1387.         operation = migrations.AlterField(
1388.             'Rider',
1389.             'pony',
1390.             models.ForeignKey('Pony', models.CASCADE, db_column='pony_id'),
1391.         )
1392.         operation.state_forwards(app_label, new_state)
1393.         self.assertIsNone(
1394.             project_state.models[app_label, 'rider'].fields['pony'].db_column,
1395.         )
1396.         self.assertIs(
1397.             new_state.models[app_label, 'rider'].fields['pony'].db_column,
1398.             'pony_id',
1399.         )
1400.         self.assertColumnExists(rider_table, 'pony_id')
1401.         with connection.schema_editor() as editor:
1402.             with self.assertNumQueries(0):
1403.                 operation.database_forwards(app_label, editor, project_state, new_state)
1404.         self.assertColumnExists(rider_table, 'pony_id')
1405.         with connection.schema_editor() as editor:
1406.             with self.assertNumQueries(0):
1407.                 operation.database_forwards(app_label, editor, new_state, project_state)
1408.         self.assertColumnExists(rider_table, 'pony_id')
1409. 
1410.     def test_alter_field_pk(self):
1411.         """
1412.         Tests the AlterField operation on primary keys (for things like PostgreSQL's SERIAL weirdness)
1413.         """
1414.         project_state = self.set_up_test_model("test_alflpk")
1415.         # Test the state alteration
1416.         operation = migrations.AlterField("Pony", "id", models.IntegerField(primary_key=True))
1417.         new_state = project_state.clone()
1418.         operation.state_forwards("test_alflpk", new_state)
1419.         self.assertIsInstance(
1420.             project_state.models['test_alflpk', 'pony'].fields['id'],
1421.             models.AutoField,
1422.         )
1423.         self.assertIsInstance(
1424.             new_state.models['test_alflpk', 'pony'].fields['id'],
1425.             models.IntegerField,
1426.         )
1427.         # Test the database alteration
1428.         with connection.schema_editor() as editor:
1429.             operation.database_forwards("test_alflpk", editor, project_state, new_state)
1430.         # And test reversal
1431.         with connection.schema_editor() as editor:
1432.             operation.database_backwards("test_alflpk", editor, new_state, project_state)
1433. 
1434.     @skipUnlessDBFeature('supports_foreign_keys')
1435.     def test_alter_field_pk_fk(self):
1436.         """
1437.         Tests the AlterField operation on primary keys changes any FKs pointing to it.
1438.         """
1439.         project_state = self.set_up_test_model("test_alflpkfk", related_model=True)
1440.         project_state = self.apply_operations('test_alflpkfk', project_state, [
1441.             migrations.CreateModel('Stable', fields=[
1442.                 ('ponies', models.ManyToManyField('Pony')),
1443.             ]),
1444.             migrations.AddField(
1445.                 'Pony',
1446.                 'stables',
1447.                 models.ManyToManyField('Stable'),
1448.             ),
1449.         ])
1450.         # Test the state alteration
1451.         operation = migrations.AlterField("Pony", "id", models.FloatField(primary_key=True))
1452.         new_state = project_state.clone()
1453.         operation.state_forwards("test_alflpkfk", new_state)
1454.         self.assertIsInstance(
1455.             project_state.models['test_alflpkfk', 'pony'].fields['id'],
1456.             models.AutoField,
1457.         )
1458.         self.assertIsInstance(
1459.             new_state.models['test_alflpkfk', 'pony'].fields['id'],
1460.             models.FloatField,
1461.         )
1462. 
1463.         def assertIdTypeEqualsFkType():
1464.             with connection.cursor() as cursor:
1465.                 id_type, id_null = [
1466.                     (c.type_code, c.null_ok)
1467.                     for c in connection.introspection.get_table_description(cursor, "test_alflpkfk_pony")
1468.                     if c.name == "id"
1469.                 ][0]
1470.                 fk_type, fk_null = [
1471.                     (c.type_code, c.null_ok)
1472.                     for c in connection.introspection.get_table_description(cursor, "test_alflpkfk_rider")
1473.                     if c.name == "pony_id"
1474.                 ][0]
1475.                 m2m_fk_type, m2m_fk_null = [
1476.                     (c.type_code, c.null_ok)
1477.                     for c in connection.introspection.get_table_description(
1478.                         cursor,
1479.                         'test_alflpkfk_pony_stables',
1480.                     ) if c.name == 'pony_id'
1481.                 ][0]
1482.                 remote_m2m_fk_type, remote_m2m_fk_null = [
1483.                     (c.type_code, c.null_ok)
1484.                     for c in connection.introspection.get_table_description(
1485.                         cursor,
1486.                         'test_alflpkfk_stable_ponies',
1487.                     ) if c.name == 'pony_id'
1488.                 ][0]
1489.             self.assertEqual(id_type, fk_type)
1490.             self.assertEqual(id_type, m2m_fk_type)
1491.             self.assertEqual(id_type, remote_m2m_fk_type)
1492.             self.assertEqual(id_null, fk_null)
1493.             self.assertEqual(id_null, m2m_fk_null)
1494.             self.assertEqual(id_null, remote_m2m_fk_null)
1495. 
1496.         assertIdTypeEqualsFkType()
1497.         # Test the database alteration
1498.         with connection.schema_editor() as editor:
1499.             operation.database_forwards("test_alflpkfk", editor, project_state, new_state)
1500.         assertIdTypeEqualsFkType()
1501.         # And test reversal
1502.         with connection.schema_editor() as editor:
1503.             operation.database_backwards("test_alflpkfk", editor, new_state, project_state)
1504.         assertIdTypeEqualsFkType()
1505. 
1506.     @skipUnlessDBFeature('supports_foreign_keys')
1507.     def test_alter_field_reloads_state_on_fk_with_to_field_target_type_change(self):
1508.         app_label = 'test_alflrsfkwtflttc'
1509.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
1510.             migrations.CreateModel('Rider', fields=[
1511.                 ('id', models.AutoField(primary_key=True)),
1512.                 ('code', models.IntegerField(unique=True)),
1513.             ]),
1514.             migrations.CreateModel('Pony', fields=[
1515.                 ('id', models.AutoField(primary_key=True)),
1516.                 ('rider', models.ForeignKey('%s.Rider' % app_label, models.CASCADE, to_field='code')),
1517.             ]),
1518.         ])
1519.         operation = migrations.AlterField(
1520.             'Rider',
1521.             'code',
1522.             models.CharField(max_length=100, unique=True),
1523.         )
1524.         self.apply_operations(app_label, project_state, operations=[operation])
1525.         id_type, id_null = [
1526.             (c.type_code, c.null_ok)
1527.             for c in self.get_table_description('%s_rider' % app_label)
1528.             if c.name == 'code'
1529.         ][0]
1530.         fk_type, fk_null = [
1531.             (c.type_code, c.null_ok)
1532.             for c in self.get_table_description('%s_pony' % app_label)
1533.             if c.name == 'rider_id'
1534.         ][0]
1535.         self.assertEqual(id_type, fk_type)
1536.         self.assertEqual(id_null, fk_null)
1537. 
1538.     @skipUnlessDBFeature('supports_foreign_keys')
1539.     def test_alter_field_reloads_state_on_fk_with_to_field_related_name_target_type_change(self):
1540.         app_label = 'test_alflrsfkwtflrnttc'
1541.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
1542.             migrations.CreateModel('Rider', fields=[
1543.                 ('id', models.AutoField(primary_key=True)),
1544.                 ('code', models.PositiveIntegerField(unique=True)),
1545.             ]),
1546.             migrations.CreateModel('Pony', fields=[
1547.                 ('id', models.AutoField(primary_key=True)),
1548.                 ('rider', models.ForeignKey(
1549.                     '%s.Rider' % app_label,
1550.                     models.CASCADE,
1551.                     to_field='code',
1552.                     related_name='+',
1553.                 )),
1554.             ]),
1555.         ])
1556.         operation = migrations.AlterField(
1557.             'Rider',
1558.             'code',
1559.             models.CharField(max_length=100, unique=True),
1560.         )
1561.         self.apply_operations(app_label, project_state, operations=[operation])
1562. 
1563.     def test_alter_field_reloads_state_on_fk_target_changes(self):
1564.         """
1565.         If AlterField doesn't reload state appropriately, the second AlterField
1566.         crashes on MySQL due to not dropping the PonyRider.pony foreign key
1567.         constraint before modifying the column.
1568.         """
1569.         app_label = 'alter_alter_field_reloads_state_on_fk_target_changes'
1570.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
1571.             migrations.CreateModel('Rider', fields=[
1572.                 ('id', models.CharField(primary_key=True, max_length=100)),
1573.             ]),
1574.             migrations.CreateModel('Pony', fields=[
1575.                 ('id', models.CharField(primary_key=True, max_length=100)),
1576.                 ('rider', models.ForeignKey('%s.Rider' % app_label, models.CASCADE)),
1577.             ]),
1578.             migrations.CreateModel('PonyRider', fields=[
1579.                 ('id', models.AutoField(primary_key=True)),
1580.                 ('pony', models.ForeignKey('%s.Pony' % app_label, models.CASCADE)),
1581.             ]),
1582.         ])
1583.         project_state = self.apply_operations(app_label, project_state, operations=[
1584.             migrations.AlterField('Rider', 'id', models.CharField(primary_key=True, max_length=99)),
1585.             migrations.AlterField('Pony', 'id', models.CharField(primary_key=True, max_length=99)),
1586.         ])
1587. 
1588.     def test_alter_field_reloads_state_on_fk_with_to_field_target_changes(self):
1589.         """
1590.         If AlterField doesn't reload state appropriately, the second AlterField
1591.         crashes on MySQL due to not dropping the PonyRider.pony foreign key
1592.         constraint before modifying the column.
1593.         """
1594.         app_label = 'alter_alter_field_reloads_state_on_fk_with_to_field_target_changes'
1595.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
1596.             migrations.CreateModel('Rider', fields=[
1597.                 ('id', models.CharField(primary_key=True, max_length=100)),
1598.                 ('slug', models.CharField(unique=True, max_length=100)),
1599.             ]),
1600.             migrations.CreateModel('Pony', fields=[
1601.                 ('id', models.CharField(primary_key=True, max_length=100)),
1602.                 ('rider', models.ForeignKey('%s.Rider' % app_label, models.CASCADE, to_field='slug')),
1603.                 ('slug', models.CharField(unique=True, max_length=100)),
1604.             ]),
1605.             migrations.CreateModel('PonyRider', fields=[
1606.                 ('id', models.AutoField(primary_key=True)),
1607.                 ('pony', models.ForeignKey('%s.Pony' % app_label, models.CASCADE, to_field='slug')),
1608.             ]),
1609.         ])
1610.         project_state = self.apply_operations(app_label, project_state, operations=[
1611.             migrations.AlterField('Rider', 'slug', models.CharField(unique=True, max_length=99)),
1612.             migrations.AlterField('Pony', 'slug', models.CharField(unique=True, max_length=99)),
1613.         ])
1614. 
1615.     def test_rename_field_reloads_state_on_fk_target_changes(self):
1616.         """
1617.         If RenameField doesn't reload state appropriately, the AlterField
1618.         crashes on MySQL due to not dropping the PonyRider.pony foreign key
1619.         constraint before modifying the column.
1620.         """
1621.         app_label = 'alter_rename_field_reloads_state_on_fk_target_changes'
1622.         project_state = self.apply_operations(app_label, ProjectState(), operations=[
1623.             migrations.CreateModel('Rider', fields=[
1624.                 ('id', models.CharField(primary_key=True, max_length=100)),
1625.             ]),
1626.             migrations.CreateModel('Pony', fields=[
1627.                 ('id', models.CharField(primary_key=True, max_length=100)),
1628.                 ('rider', models.ForeignKey('%s.Rider' % app_label, models.CASCADE)),
1629.             ]),
1630.             migrations.CreateModel('PonyRider', fields=[
1631.                 ('id', models.AutoField(primary_key=True)),
1632.                 ('pony', models.ForeignKey('%s.Pony' % app_label, models.CASCADE)),
1633.             ]),
1634.         ])
1635.         project_state = self.apply_operations(app_label, project_state, operations=[
1636.             migrations.RenameField('Rider', 'id', 'id2'),
1637.             migrations.AlterField('Pony', 'id', models.CharField(primary_key=True, max_length=99)),
1638.         ], atomic=connection.features.supports_atomic_references_rename)
1639. 
1640.     def test_rename_field(self):
1641.         """
1642.         Tests the RenameField operation.
1643.         """
1644.         project_state = self.set_up_test_model("test_rnfl", unique_together=True, index_together=True)
1645.         # Test the state alteration
1646.         operation = migrations.RenameField("Pony", "pink", "blue")
1647.         self.assertEqual(operation.describe(), "Rename field pink on Pony to blue")
1648.         self.assertEqual(operation.migration_name_fragment, 'rename_pink_pony_blue')
1649.         new_state = project_state.clone()
1650.         operation.state_forwards("test_rnfl", new_state)
1651.         self.assertIn("blue", new_state.models["test_rnfl", "pony"].fields)
1652.         self.assertNotIn("pink", new_state.models["test_rnfl", "pony"].fields)
1653.         # Make sure the unique_together has the renamed column too
1654.         self.assertIn("blue", new_state.models["test_rnfl", "pony"].options['unique_together'][0])
1655.         self.assertNotIn("pink", new_state.models["test_rnfl", "pony"].options['unique_together'][0])
1656.         # Make sure the index_together has the renamed column too
1657.         self.assertIn("blue", new_state.models["test_rnfl", "pony"].options['index_together'][0])
1658.         self.assertNotIn("pink", new_state.models["test_rnfl", "pony"].options['index_together'][0])
1659.         # Test the database alteration
1660.         self.assertColumnExists("test_rnfl_pony", "pink")
1661.         self.assertColumnNotExists("test_rnfl_pony", "blue")
1662.         with connection.schema_editor() as editor:
1663.             operation.database_forwards("test_rnfl", editor, project_state, new_state)
1664.         self.assertColumnExists("test_rnfl_pony", "blue")
1665.         self.assertColumnNotExists("test_rnfl_pony", "pink")
1666.         # Ensure the unique constraint has been ported over
1667.         with connection.cursor() as cursor:
1668.             cursor.execute("INSERT INTO test_rnfl_pony (blue, weight) VALUES (1, 1)")
1669.             with self.assertRaises(IntegrityError):
1670.                 with atomic():
1671.                     cursor.execute("INSERT INTO test_rnfl_pony (blue, weight) VALUES (1, 1)")
1672.             cursor.execute("DELETE FROM test_rnfl_pony")
1673.         # Ensure the index constraint has been ported over
1674.         self.assertIndexExists("test_rnfl_pony", ["weight", "blue"])
1675.         # And test reversal
1676.         with connection.schema_editor() as editor:
1677.             operation.database_backwards("test_rnfl", editor, new_state, project_state)
1678.         self.assertColumnExists("test_rnfl_pony", "pink")
1679.         self.assertColumnNotExists("test_rnfl_pony", "blue")
1680.         # Ensure the index constraint has been reset
1681.         self.assertIndexExists("test_rnfl_pony", ["weight", "pink"])
1682.         # And deconstruction
1683.         definition = operation.deconstruct()
1684.         self.assertEqual(definition[0], "RenameField")
1685.         self.assertEqual(definition[1], [])
1686.         self.assertEqual(definition[2], {'model_name': "Pony", 'old_name': "pink", 'new_name': "blue"})
1687. 
1688.     def test_rename_field_with_db_column(self):
1689.         project_state = self.apply_operations('test_rfwdbc', ProjectState(), operations=[
1690.             migrations.CreateModel('Pony', fields=[
1691.                 ('id', models.AutoField(primary_key=True)),
1692.                 ('field', models.IntegerField(db_column='db_field')),
1693.                 ('fk_field', models.ForeignKey(
1694.                     'Pony',
1695.                     models.CASCADE,
1696.                     db_column='db_fk_field',
1697.                 )),
1698.             ]),
1699.         ])
1700.         new_state = project_state.clone()
1701.         operation = migrations.RenameField('Pony', 'field', 'renamed_field')
1702.         operation.state_forwards('test_rfwdbc', new_state)
1703.         self.assertIn('renamed_field', new_state.models['test_rfwdbc', 'pony'].fields)
1704.         self.assertNotIn('field', new_state.models['test_rfwdbc', 'pony'].fields)
1705.         self.assertColumnExists('test_rfwdbc_pony', 'db_field')
1706.         with connection.schema_editor() as editor:
1707.             with self.assertNumQueries(0):
1708.                 operation.database_forwards('test_rfwdbc', editor, project_state, new_state)
1709.         self.assertColumnExists('test_rfwdbc_pony', 'db_field')
1710.         with connection.schema_editor() as editor:
1711.             with self.assertNumQueries(0):
1712.                 operation.database_backwards('test_rfwdbc', editor, new_state, project_state)
1713.         self.assertColumnExists('test_rfwdbc_pony', 'db_field')
1714. 
1715.         new_state = project_state.clone()
1716.         operation = migrations.RenameField('Pony', 'fk_field', 'renamed_fk_field')
1717.         operation.state_forwards('test_rfwdbc', new_state)
1718.         self.assertIn('renamed_fk_field', new_state.models['test_rfwdbc', 'pony'].fields)
1719.         self.assertNotIn('fk_field', new_state.models['test_rfwdbc', 'pony'].fields)
1720.         self.assertColumnExists('test_rfwdbc_pony', 'db_fk_field')
1721.         with connection.schema_editor() as editor:
1722.             with self.assertNumQueries(0):
1723.                 operation.database_forwards('test_rfwdbc', editor, project_state, new_state)
1724.         self.assertColumnExists('test_rfwdbc_pony', 'db_fk_field')
1725.         with connection.schema_editor() as editor:
1726.             with self.assertNumQueries(0):
1727.                 operation.database_backwards('test_rfwdbc', editor, new_state, project_state)
1728.         self.assertColumnExists('test_rfwdbc_pony', 'db_fk_field')
1729. 
1730.     def test_rename_field_case(self):
1731.         project_state = self.apply_operations('test_rfmx', ProjectState(), operations=[
1732.             migrations.CreateModel('Pony', fields=[
1733.                 ('id', models.AutoField(primary_key=True)),
1734.                 ('field', models.IntegerField()),
1735.             ]),
1736.         ])
1737.         new_state = project_state.clone()
1738.         operation = migrations.RenameField('Pony', 'field', 'FiElD')
1739.         operation.state_forwards('test_rfmx', new_state)
1740.         self.assertIn('FiElD', new_state.models['test_rfmx', 'pony'].fields)
1741.         self.assertColumnExists('test_rfmx_pony', 'field')
1742.         with connection.schema_editor() as editor:
1743.             operation.database_forwards('test_rfmx', editor, project_state, new_state)
1744.         self.assertColumnExists(
1745.             'test_rfmx_pony',
1746.             connection.introspection.identifier_converter('FiElD'),
1747.         )
1748.         with connection.schema_editor() as editor:
1749.             operation.database_backwards('test_rfmx', editor, new_state, project_state)
1750.         self.assertColumnExists('test_rfmx_pony', 'field')
1751. 
1752.     def test_rename_missing_field(self):
1753.         state = ProjectState()
1754.         state.add_model(ModelState('app', 'model', []))
1755.         with self.assertRaisesMessage(FieldDoesNotExist, "app.model has no field named 'field'"):
1756.             migrations.RenameField('model', 'field', 'new_field').state_forwards('app', state)
1757. 
1758.     def test_rename_referenced_field_state_forward(self):
1759.         state = ProjectState()
1760.         state.add_model(ModelState('app', 'Model', [
1761.             ('id', models.AutoField(primary_key=True)),
1762.             ('field', models.IntegerField(unique=True)),
1763.         ]))
1764.         state.add_model(ModelState('app', 'OtherModel', [
1765.             ('id', models.AutoField(primary_key=True)),
1766.             ('fk', models.ForeignKey('Model', models.CASCADE, to_field='field')),
1767.             ('fo', models.ForeignObject('Model', models.CASCADE, from_fields=('fk',), to_fields=('field',))),
1768.         ]))
1769.         operation = migrations.RenameField('Model', 'field', 'renamed')
1770.         new_state = state.clone()
1771.         operation.state_forwards('app', new_state)
1772.         self.assertEqual(new_state.models['app', 'othermodel'].fields['fk'].remote_field.field_name, 'renamed')
1773.         self.assertEqual(new_state.models['app', 'othermodel'].fields['fk'].from_fields, ['self'])
1774.         self.assertEqual(new_state.models['app', 'othermodel'].fields['fk'].to_fields, ('renamed',))
1775.         self.assertEqual(new_state.models['app', 'othermodel'].fields['fo'].from_fields, ('fk',))
1776.         self.assertEqual(new_state.models['app', 'othermodel'].fields['fo'].to_fields, ('renamed',))
1777.         operation = migrations.RenameField('OtherModel', 'fk', 'renamed_fk')
1778.         new_state = state.clone()
1779.         operation.state_forwards('app', new_state)
1780.         self.assertEqual(new_state.models['app', 'othermodel'].fields['renamed_fk'].remote_field.field_name, 'renamed')
1781.         self.assertEqual(new_state.models['app', 'othermodel'].fields['renamed_fk'].from_fields, ('self',))
1782.         self.assertEqual(new_state.models['app', 'othermodel'].fields['renamed_fk'].to_fields, ('renamed',))
1783.         self.assertEqual(new_state.models['app', 'othermodel'].fields['fo'].from_fields, ('renamed_fk',))
1784.         self.assertEqual(new_state.models['app', 'othermodel'].fields['fo'].to_fields, ('renamed',))
1785. 
1786.     def test_alter_unique_together(self):
1787.         """
1788.         Tests the AlterUniqueTogether operation.
1789.         """
1790.         project_state = self.set_up_test_model("test_alunto")
1791.         # Test the state alteration
1792.         operation = migrations.AlterUniqueTogether("Pony", [("pink", "weight")])
1793.         self.assertEqual(operation.describe(), "Alter unique_together for Pony (1 constraint(s))")
1794.         self.assertEqual(
1795.             operation.migration_name_fragment,
1796.             'alter_pony_unique_together',
1797.         )
1798.         new_state = project_state.clone()
1799.         operation.state_forwards("test_alunto", new_state)
1800.         self.assertEqual(len(project_state.models["test_alunto", "pony"].options.get("unique_together", set())), 0)
1801.         self.assertEqual(len(new_state.models["test_alunto", "pony"].options.get("unique_together", set())), 1)
1802.         # Make sure we can insert duplicate rows
1803.         with connection.cursor() as cursor:
1804.             cursor.execute("INSERT INTO test_alunto_pony (pink, weight) VALUES (1, 1)")
1805.             cursor.execute("INSERT INTO test_alunto_pony (pink, weight) VALUES (1, 1)")
1806.             cursor.execute("DELETE FROM test_alunto_pony")
1807.             # Test the database alteration
1808.             with connection.schema_editor() as editor:
1809.                 operation.database_forwards("test_alunto", editor, project_state, new_state)
1810.             cursor.execute("INSERT INTO test_alunto_pony (pink, weight) VALUES (1, 1)")
1811.             with self.assertRaises(IntegrityError):
1812.                 with atomic():
1813.                     cursor.execute("INSERT INTO test_alunto_pony (pink, weight) VALUES (1, 1)")
1814.             cursor.execute("DELETE FROM test_alunto_pony")
1815.             # And test reversal
1816.             with connection.schema_editor() as editor:
1817.                 operation.database_backwards("test_alunto", editor, new_state, project_state)
1818.             cursor.execute("INSERT INTO test_alunto_pony (pink, weight) VALUES (1, 1)")
1819.             cursor.execute("INSERT INTO test_alunto_pony (pink, weight) VALUES (1, 1)")
1820.             cursor.execute("DELETE FROM test_alunto_pony")
1821.         # Test flat unique_together
1822.         operation = migrations.AlterUniqueTogether("Pony", ("pink", "weight"))
1823.         operation.state_forwards("test_alunto", new_state)
1824.         self.assertEqual(len(new_state.models["test_alunto", "pony"].options.get("unique_together", set())), 1)
1825.         # And deconstruction
1826.         definition = operation.deconstruct()
1827.         self.assertEqual(definition[0], "AlterUniqueTogether")
1828.         self.assertEqual(definition[1], [])
1829.         self.assertEqual(definition[2], {'name': "Pony", 'unique_together': {("pink", "weight")}})
1830. 
1831.     def test_alter_unique_together_remove(self):
1832.         operation = migrations.AlterUniqueTogether("Pony", None)
1833.         self.assertEqual(operation.describe(), "Alter unique_together for Pony (0 constraint(s))")
1834. 
1835.     def test_add_index(self):
1836.         """
1837.         Test the AddIndex operation.
1838.         """
1839.         project_state = self.set_up_test_model("test_adin")
1840.         msg = (
1841.             "Indexes passed to AddIndex operations require a name argument. "
1842.             "<Index: fields='pink'> doesn't have one."
1843.         )
1844.         with self.assertRaisesMessage(ValueError, msg):
1845.             migrations.AddIndex("Pony", models.Index(fields=["pink"]))
1846.         index = models.Index(fields=["pink"], name="test_adin_pony_pink_idx")
1847.         operation = migrations.AddIndex("Pony", index)
1848.         self.assertEqual(operation.describe(), "Create index test_adin_pony_pink_idx on field(s) pink of model Pony")
1849.         self.assertEqual(
1850.             operation.migration_name_fragment,
1851.             'pony_test_adin_pony_pink_idx',
1852.         )
1853.         new_state = project_state.clone()
1854.         operation.state_forwards("test_adin", new_state)
1855.         # Test the database alteration
1856.         self.assertEqual(len(new_state.models["test_adin", "pony"].options['indexes']), 1)
1857.         self.assertIndexNotExists("test_adin_pony", ["pink"])
1858.         with connection.schema_editor() as editor:
1859.             operation.database_forwards("test_adin", editor, project_state, new_state)
1860.         self.assertIndexExists("test_adin_pony", ["pink"])
1861.         # And test reversal
1862.         with connection.schema_editor() as editor:
1863.             operation.database_backwards("test_adin", editor, new_state, project_state)
1864.         self.assertIndexNotExists("test_adin_pony", ["pink"])
1865.         # And deconstruction
1866.         definition = operation.deconstruct()
1867.         self.assertEqual(definition[0], "AddIndex")
1868.         self.assertEqual(definition[1], [])
1869.         self.assertEqual(definition[2], {'model_name': "Pony", 'index': index})
1870. 
1871.     def test_remove_index(self):
1872.         """
1873.         Test the RemoveIndex operation.
1874.         """
1875.         project_state = self.set_up_test_model("test_rmin", multicol_index=True)
1876.         self.assertTableExists("test_rmin_pony")
1877.         self.assertIndexExists("test_rmin_pony", ["pink", "weight"])
1878.         operation = migrations.RemoveIndex("Pony", "pony_test_idx")
1879.         self.assertEqual(operation.describe(), "Remove index pony_test_idx from Pony")
1880.         self.assertEqual(
1881.             operation.migration_name_fragment,
1882.             'remove_pony_pony_test_idx',
1883.         )
1884.         new_state = project_state.clone()
1885.         operation.state_forwards("test_rmin", new_state)
1886.         # Test the state alteration
1887.         self.assertEqual(len(new_state.models["test_rmin", "pony"].options['indexes']), 0)
1888.         self.assertIndexExists("test_rmin_pony", ["pink", "weight"])
1889.         # Test the database alteration
1890.         with connection.schema_editor() as editor:
1891.             operation.database_forwards("test_rmin", editor, project_state, new_state)
1892.         self.assertIndexNotExists("test_rmin_pony", ["pink", "weight"])
1893.         # And test reversal
1894.         with connection.schema_editor() as editor:
1895.             operation.database_backwards("test_rmin", editor, new_state, project_state)
1896.         self.assertIndexExists("test_rmin_pony", ["pink", "weight"])
1897.         # And deconstruction
1898.         definition = operation.deconstruct()
1899.         self.assertEqual(definition[0], "RemoveIndex")
1900.         self.assertEqual(definition[1], [])
1901.         self.assertEqual(definition[2], {'model_name': "Pony", 'name': "pony_test_idx"})
1902. 
1903.         # Also test a field dropped with index - sqlite remake issue
1904.         operations = [
1905.             migrations.RemoveIndex("Pony", "pony_test_idx"),
1906.             migrations.RemoveField("Pony", "pink"),
1907.         ]
1908.         self.assertColumnExists("test_rmin_pony", "pink")
1909.         self.assertIndexExists("test_rmin_pony", ["pink", "weight"])
1910.         # Test database alteration
1911.         new_state = project_state.clone()
1912.         self.apply_operations('test_rmin', new_state, operations=operations)
1913.         self.assertColumnNotExists("test_rmin_pony", "pink")
1914.         self.assertIndexNotExists("test_rmin_pony", ["pink", "weight"])
1915.         # And test reversal
1916.         self.unapply_operations("test_rmin", project_state, operations=operations)
1917.         self.assertIndexExists("test_rmin_pony", ["pink", "weight"])
1918. 
1919.     def test_add_index_state_forwards(self):
1920.         project_state = self.set_up_test_model('test_adinsf')
1921.         index = models.Index(fields=['pink'], name='test_adinsf_pony_pink_idx')
1922.         old_model = project_state.apps.get_model('test_adinsf', 'Pony')
1923.         new_state = project_state.clone()
1924. 
1925.         operation = migrations.AddIndex('Pony', index)
1926.         operation.state_forwards('test_adinsf', new_state)
1927.         new_model = new_state.apps.get_model('test_adinsf', 'Pony')
1928.         self.assertIsNot(old_model, new_model)
1929. 
1930.     def test_remove_index_state_forwards(self):
1931.         project_state = self.set_up_test_model('test_rminsf')
1932.         index = models.Index(fields=['pink'], name='test_rminsf_pony_pink_idx')
1933.         migrations.AddIndex('Pony', index).state_forwards('test_rminsf', project_state)
1934.         old_model = project_state.apps.get_model('test_rminsf', 'Pony')
1935.         new_state = project_state.clone()
1936. 
1937.         operation = migrations.RemoveIndex('Pony', 'test_rminsf_pony_pink_idx')
1938.         operation.state_forwards('test_rminsf', new_state)
1939.         new_model = new_state.apps.get_model('test_rminsf', 'Pony')
1940.         self.assertIsNot(old_model, new_model)
1941. 
1942.     def test_alter_field_with_index(self):
1943.         """
1944.         Test AlterField operation with an index to ensure indexes created via
1945.         Meta.indexes don't get dropped with sqlite3 remake.
1946.         """
1947.         project_state = self.set_up_test_model("test_alflin", index=True)
1948.         operation = migrations.AlterField("Pony", "pink", models.IntegerField(null=True))
1949.         new_state = project_state.clone()
1950.         operation.state_forwards("test_alflin", new_state)
1951.         # Test the database alteration
1952.         self.assertColumnNotNull("test_alflin_pony", "pink")
1953.         with connection.schema_editor() as editor:
1954.             operation.database_forwards("test_alflin", editor, project_state, new_state)
1955.         # Index hasn't been dropped
1956.         self.assertIndexExists("test_alflin_pony", ["pink"])
1957.         # And test reversal
1958.         with connection.schema_editor() as editor:
1959.             operation.database_backwards("test_alflin", editor, new_state, project_state)
1960.         # Ensure the index is still there
1961.         self.assertIndexExists("test_alflin_pony", ["pink"])
1962. 
1963.     def test_alter_index_together(self):
1964.         """
1965.         Tests the AlterIndexTogether operation.
1966.         """
1967.         project_state = self.set_up_test_model("test_alinto")
1968.         # Test the state alteration
1969.         operation = migrations.AlterIndexTogether("Pony", [("pink", "weight")])
1970.         self.assertEqual(operation.describe(), "Alter index_together for Pony (1 constraint(s))")
1971.         self.assertEqual(
1972.             operation.migration_name_fragment,
1973.             'alter_pony_index_together',
1974.         )
1975.         new_state = project_state.clone()
1976.         operation.state_forwards("test_alinto", new_state)
1977.         self.assertEqual(len(project_state.models["test_alinto", "pony"].options.get("index_together", set())), 0)
1978.         self.assertEqual(len(new_state.models["test_alinto", "pony"].options.get("index_together", set())), 1)
1979.         # Make sure there's no matching index
1980.         self.assertIndexNotExists("test_alinto_pony", ["pink", "weight"])
1981.         # Test the database alteration
1982.         with connection.schema_editor() as editor:
1983.             operation.database_forwards("test_alinto", editor, project_state, new_state)
1984.         self.assertIndexExists("test_alinto_pony", ["pink", "weight"])
1985.         # And test reversal
1986.         with connection.schema_editor() as editor:
1987.             operation.database_backwards("test_alinto", editor, new_state, project_state)
1988.         self.assertIndexNotExists("test_alinto_pony", ["pink", "weight"])
1989.         # And deconstruction
1990.         definition = operation.deconstruct()
1991.         self.assertEqual(definition[0], "AlterIndexTogether")
1992.         self.assertEqual(definition[1], [])
1993.         self.assertEqual(definition[2], {'name': "Pony", 'index_together': {("pink", "weight")}})
1994. 
1995.     def test_alter_index_together_remove(self):
1996.         operation = migrations.AlterIndexTogether("Pony", None)
1997.         self.assertEqual(operation.describe(), "Alter index_together for Pony (0 constraint(s))")
1998. 
1999.     @skipUnlessDBFeature('allows_multiple_constraints_on_same_fields')
2000.     def test_alter_index_together_remove_with_unique_together(self):
2001.         app_label = 'test_alintoremove_wunto'
2002.         table_name = '%s_pony' % app_label
2003.         project_state = self.set_up_test_model(app_label, unique_together=True)
2004.         self.assertUniqueConstraintExists(table_name, ['pink', 'weight'])
2005.         # Add index together.
2006.         new_state = project_state.clone()
2007.         operation = migrations.AlterIndexTogether('Pony', [('pink', 'weight')])
2008.         operation.state_forwards(app_label, new_state)
2009.         with connection.schema_editor() as editor:
2010.             operation.database_forwards(app_label, editor, project_state, new_state)
2011.         self.assertIndexExists(table_name, ['pink', 'weight'])
2012.         # Remove index together.
2013.         project_state = new_state
2014.         new_state = project_state.clone()
2015.         operation = migrations.AlterIndexTogether('Pony', set())
2016.         operation.state_forwards(app_label, new_state)
2017.         with connection.schema_editor() as editor:
2018.             operation.database_forwards(app_label, editor, project_state, new_state)
2019.         self.assertIndexNotExists(table_name, ['pink', 'weight'])
2020.         self.assertUniqueConstraintExists(table_name, ['pink', 'weight'])
2021. 
2022.     @skipUnlessDBFeature('supports_table_check_constraints')
2023.     def test_add_constraint(self):
2024.         project_state = self.set_up_test_model("test_addconstraint")
2025.         gt_check = models.Q(pink__gt=2)
2026.         gt_constraint = models.CheckConstraint(check=gt_check, name="test_add_constraint_pony_pink_gt_2")
2027.         gt_operation = migrations.AddConstraint("Pony", gt_constraint)
2028.         self.assertEqual(
2029.             gt_operation.describe(), "Create constraint test_add_constraint_pony_pink_gt_2 on model Pony"
2030.         )
2031.         self.assertEqual(
2032.             gt_operation.migration_name_fragment,
2033.             'pony_test_add_constraint_pony_pink_gt_2',
2034.         )
2035.         # Test the state alteration
2036.         new_state = project_state.clone()
2037.         gt_operation.state_forwards("test_addconstraint", new_state)
2038.         self.assertEqual(len(new_state.models["test_addconstraint", "pony"].options["constraints"]), 1)
2039.         Pony = new_state.apps.get_model("test_addconstraint", "Pony")
2040.         self.assertEqual(len(Pony._meta.constraints), 1)
2041.         # Test the database alteration
2042.         with connection.schema_editor() as editor:
2043.             gt_operation.database_forwards("test_addconstraint", editor, project_state, new_state)
2044.         with self.assertRaises(IntegrityError), transaction.atomic():
2045.             Pony.objects.create(pink=1, weight=1.0)
2046.         # Add another one.
2047.         lt_check = models.Q(pink__lt=100)
2048.         lt_constraint = models.CheckConstraint(check=lt_check, name="test_add_constraint_pony_pink_lt_100")
2049.         lt_operation = migrations.AddConstraint("Pony", lt_constraint)
2050.         lt_operation.state_forwards("test_addconstraint", new_state)
2051.         self.assertEqual(len(new_state.models["test_addconstraint", "pony"].options["constraints"]), 2)
2052.         Pony = new_state.apps.get_model("test_addconstraint", "Pony")
2053.         self.assertEqual(len(Pony._meta.constraints), 2)
2054.         with connection.schema_editor() as editor:
2055.             lt_operation.database_forwards("test_addconstraint", editor, project_state, new_state)
2056.         with self.assertRaises(IntegrityError), transaction.atomic():
2057.             Pony.objects.create(pink=100, weight=1.0)
2058.         # Test reversal
2059.         with connection.schema_editor() as editor:
2060.             gt_operation.database_backwards("test_addconstraint", editor, new_state, project_state)
2061.         Pony.objects.create(pink=1, weight=1.0)
2062.         # Test deconstruction
2063.         definition = gt_operation.deconstruct()
2064.         self.assertEqual(definition[0], "AddConstraint")
2065.         self.assertEqual(definition[1], [])
2066.         self.assertEqual(definition[2], {'model_name': "Pony", 'constraint': gt_constraint})
2067. 
2068.     @skipUnlessDBFeature('supports_table_check_constraints')
2069.     def test_add_constraint_percent_escaping(self):
2070.         app_label = 'add_constraint_string_quoting'
2071.         operations = [
2072.             migrations.CreateModel(
2073.                 'Author',
2074.                 fields=[
2075.                     ('id', models.AutoField(primary_key=True)),
2076.                     ('name', models.CharField(max_length=100)),
2077.                     ('rebate', models.CharField(max_length=100)),
2078.                 ],
2079.             ),
2080.         ]
2081.         from_state = self.apply_operations(app_label, ProjectState(), operations)
2082.         # "%" generated in startswith lookup should be escaped in a way that is
2083.         # considered a leading wildcard.
2084.         check = models.Q(name__startswith='Albert')
2085.         constraint = models.CheckConstraint(check=check, name='name_constraint')
2086.         operation = migrations.AddConstraint('Author', constraint)
2087.         to_state = from_state.clone()
2088.         operation.state_forwards(app_label, to_state)
2089.         with connection.schema_editor() as editor:
2090.             operation.database_forwards(app_label, editor, from_state, to_state)
2091.         Author = to_state.apps.get_model(app_label, 'Author')
2092.         with self.assertRaises(IntegrityError), transaction.atomic():
2093.             Author.objects.create(name='Artur')
2094.         # Literal "%" should be escaped in a way that is not a considered a
2095.         # wildcard.
2096.         check = models.Q(rebate__endswith='%')
2097.         constraint = models.CheckConstraint(check=check, name='rebate_constraint')
2098.         operation = migrations.AddConstraint('Author', constraint)
2099.         from_state = to_state
2100.         to_state = from_state.clone()
2101.         operation.state_forwards(app_label, to_state)
2102.         Author = to_state.apps.get_model(app_label, 'Author')
2103.         with connection.schema_editor() as editor:
2104.             operation.database_forwards(app_label, editor, from_state, to_state)
2105.         Author = to_state.apps.get_model(app_label, 'Author')
2106.         with self.assertRaises(IntegrityError), transaction.atomic():
2107.             Author.objects.create(name='Albert', rebate='10$')
2108.         author = Author.objects.create(name='Albert', rebate='10%')
2109.         self.assertEqual(Author.objects.get(), author)
2110. 
2111.     @skipUnlessDBFeature('supports_table_check_constraints')
2112.     def test_add_or_constraint(self):
2113.         app_label = 'test_addorconstraint'
2114.         constraint_name = 'add_constraint_or'
2115.         from_state = self.set_up_test_model(app_label)
2116.         check = models.Q(pink__gt=2, weight__gt=2) | models.Q(weight__lt=0)
2117.         constraint = models.CheckConstraint(check=check, name=constraint_name)
2118.         operation = migrations.AddConstraint('Pony', constraint)
2119.         to_state = from_state.clone()
2120.         operation.state_forwards(app_label, to_state)
2121.         with connection.schema_editor() as editor:
2122.             operation.database_forwards(app_label, editor, from_state, to_state)
2123.         Pony = to_state.apps.get_model(app_label, 'Pony')
2124.         with self.assertRaises(IntegrityError), transaction.atomic():
2125.             Pony.objects.create(pink=2, weight=3.0)
2126.         with self.assertRaises(IntegrityError), transaction.atomic():
2127.             Pony.objects.create(pink=3, weight=1.0)
2128.         Pony.objects.bulk_create([
2129.             Pony(pink=3, weight=-1.0),
2130.             Pony(pink=1, weight=-1.0),
2131.             Pony(pink=3, weight=3.0),
2132.         ])
2133. 
2134.     @skipUnlessDBFeature('supports_table_check_constraints')
2135.     def test_add_constraint_combinable(self):
2136.         app_label = 'test_addconstraint_combinable'
2137.         operations = [
2138.             migrations.CreateModel(
2139.                 'Book',
2140.                 fields=[
2141.                     ('id', models.AutoField(primary_key=True)),
2142.                     ('read', models.PositiveIntegerField()),
2143.                     ('unread', models.PositiveIntegerField()),
2144.                 ],
2145.             ),
2146.         ]
2147.         from_state = self.apply_operations(app_label, ProjectState(), operations)
2148.         constraint = models.CheckConstraint(
2149.             check=models.Q(read=(100 - models.F('unread'))),
2150.             name='test_addconstraint_combinable_sum_100',
2151.         )
2152.         operation = migrations.AddConstraint('Book', constraint)
2153.         to_state = from_state.clone()
2154.         operation.state_forwards(app_label, to_state)
2155.         with connection.schema_editor() as editor:
2156.             operation.database_forwards(app_label, editor, from_state, to_state)
2157.         Book = to_state.apps.get_model(app_label, 'Book')
2158.         with self.assertRaises(IntegrityError), transaction.atomic():
2159.             Book.objects.create(read=70, unread=10)
2160.         Book.objects.create(read=70, unread=30)
2161. 
2162.     @skipUnlessDBFeature('supports_table_check_constraints')
2163.     def test_remove_constraint(self):
2164.         project_state = self.set_up_test_model("test_removeconstraint", constraints=[
2165.             models.CheckConstraint(check=models.Q(pink__gt=2), name="test_remove_constraint_pony_pink_gt_2"),
2166.             models.CheckConstraint(check=models.Q(pink__lt=100), name="test_remove_constraint_pony_pink_lt_100"),
2167.         ])
2168.         gt_operation = migrations.RemoveConstraint("Pony", "test_remove_constraint_pony_pink_gt_2")
2169.         self.assertEqual(
2170.             gt_operation.describe(), "Remove constraint test_remove_constraint_pony_pink_gt_2 from model Pony"
2171.         )
2172.         self.assertEqual(
2173.             gt_operation.migration_name_fragment,
2174.             'remove_pony_test_remove_constraint_pony_pink_gt_2',
2175.         )
2176.         # Test state alteration
2177.         new_state = project_state.clone()
2178.         gt_operation.state_forwards("test_removeconstraint", new_state)
2179.         self.assertEqual(len(new_state.models["test_removeconstraint", "pony"].options['constraints']), 1)
2180.         Pony = new_state.apps.get_model("test_removeconstraint", "Pony")
2181.         self.assertEqual(len(Pony._meta.constraints), 1)
2182.         # Test database alteration
2183.         with connection.schema_editor() as editor:
2184.             gt_operation.database_forwards("test_removeconstraint", editor, project_state, new_state)
2185.         Pony.objects.create(pink=1, weight=1.0).delete()
2186.         with self.assertRaises(IntegrityError), transaction.atomic():
2187.             Pony.objects.create(pink=100, weight=1.0)
2188.         # Remove the other one.
2189.         lt_operation = migrations.RemoveConstraint("Pony", "test_remove_constraint_pony_pink_lt_100")
2190.         lt_operation.state_forwards("test_removeconstraint", new_state)
2191.         self.assertEqual(len(new_state.models["test_removeconstraint", "pony"].options['constraints']), 0)
2192.         Pony = new_state.apps.get_model("test_removeconstraint", "Pony")
2193.         self.assertEqual(len(Pony._meta.constraints), 0)
2194.         with connection.schema_editor() as editor:
2195.             lt_operation.database_forwards("test_removeconstraint", editor, project_state, new_state)
2196.         Pony.objects.create(pink=100, weight=1.0).delete()
2197.         # Test reversal
2198.         with connection.schema_editor() as editor:
2199.             gt_operation.database_backwards("test_removeconstraint", editor, new_state, project_state)
2200.         with self.assertRaises(IntegrityError), transaction.atomic():
2201.             Pony.objects.create(pink=1, weight=1.0)
2202.         # Test deconstruction
2203.         definition = gt_operation.deconstruct()
2204.         self.assertEqual(definition[0], "RemoveConstraint")
2205.         self.assertEqual(definition[1], [])
2206.         self.assertEqual(definition[2], {'model_name': "Pony", 'name': "test_remove_constraint_pony_pink_gt_2"})
2207. 
2208.     def test_add_partial_unique_constraint(self):
2209.         project_state = self.set_up_test_model('test_addpartialuniqueconstraint')
2210.         partial_unique_constraint = models.UniqueConstraint(
2211.             fields=['pink'],
2212.             condition=models.Q(weight__gt=5),
2213.             name='test_constraint_pony_pink_for_weight_gt_5_uniq',
2214.         )
2215.         operation = migrations.AddConstraint('Pony', partial_unique_constraint)
2216.         self.assertEqual(
2217.             operation.describe(),
2218.             'Create constraint test_constraint_pony_pink_for_weight_gt_5_uniq '
2219.             'on model Pony'
2220.         )
2221.         # Test the state alteration
2222.         new_state = project_state.clone()
2223.         operation.state_forwards('test_addpartialuniqueconstraint', new_state)
2224.         self.assertEqual(len(new_state.models['test_addpartialuniqueconstraint', 'pony'].options['constraints']), 1)
2225.         Pony = new_state.apps.get_model('test_addpartialuniqueconstraint', 'Pony')
2226.         self.assertEqual(len(Pony._meta.constraints), 1)
2227.         # Test the database alteration
2228.         with connection.schema_editor() as editor:
2229.             operation.database_forwards('test_addpartialuniqueconstraint', editor, project_state, new_state)
2230.         # Test constraint works
2231.         Pony.objects.create(pink=1, weight=4.0)
2232.         Pony.objects.create(pink=1, weight=4.0)
2233.         Pony.objects.create(pink=1, weight=6.0)
2234.         if connection.features.supports_partial_indexes:
2235.             with self.assertRaises(IntegrityError), transaction.atomic():
2236.                 Pony.objects.create(pink=1, weight=7.0)
2237.         else:
2238.             Pony.objects.create(pink=1, weight=7.0)
2239.         # Test reversal
2240.         with connection.schema_editor() as editor:
2241.             operation.database_backwards('test_addpartialuniqueconstraint', editor, new_state, project_state)
2242.         # Test constraint doesn't work
2243.         Pony.objects.create(pink=1, weight=7.0)
2244.         # Test deconstruction
2245.         definition = operation.deconstruct()
2246.         self.assertEqual(definition[0], 'AddConstraint')
2247.         self.assertEqual(definition[1], [])
2248.         self.assertEqual(definition[2], {'model_name': 'Pony', 'constraint': partial_unique_constraint})
2249. 
2250.     def test_remove_partial_unique_constraint(self):
2251.         project_state = self.set_up_test_model('test_removepartialuniqueconstraint', constraints=[
2252.             models.UniqueConstraint(
2253.                 fields=['pink'],
2254.                 condition=models.Q(weight__gt=5),
2255.                 name='test_constraint_pony_pink_for_weight_gt_5_uniq',
2256.             ),
2257.         ])
2258.         gt_operation = migrations.RemoveConstraint('Pony', 'test_constraint_pony_pink_for_weight_gt_5_uniq')
2259.         self.assertEqual(
2260.             gt_operation.describe(), 'Remove constraint test_constraint_pony_pink_for_weight_gt_5_uniq from model Pony'
2261.         )
2262.         # Test state alteration
2263.         new_state = project_state.clone()
2264.         gt_operation.state_forwards('test_removepartialuniqueconstraint', new_state)
2265.         self.assertEqual(len(new_state.models['test_removepartialuniqueconstraint', 'pony'].options['constraints']), 0)
2266.         Pony = new_state.apps.get_model('test_removepartialuniqueconstraint', 'Pony')
2267.         self.assertEqual(len(Pony._meta.constraints), 0)
2268.         # Test database alteration
2269.         with connection.schema_editor() as editor:
2270.             gt_operation.database_forwards('test_removepartialuniqueconstraint', editor, project_state, new_state)
2271.         # Test constraint doesn't work
2272.         Pony.objects.create(pink=1, weight=4.0)
2273.         Pony.objects.create(pink=1, weight=4.0)
2274.         Pony.objects.create(pink=1, weight=6.0)
2275.         Pony.objects.create(pink=1, weight=7.0).delete()
2276.         # Test reversal
2277.         with connection.schema_editor() as editor:
2278.             gt_operation.database_backwards('test_removepartialuniqueconstraint', editor, new_state, project_state)
2279.         # Test constraint works
2280.         if connection.features.supports_partial_indexes:
2281.             with self.assertRaises(IntegrityError), transaction.atomic():
2282.                 Pony.objects.create(pink=1, weight=7.0)
2283.         else:
2284.             Pony.objects.create(pink=1, weight=7.0)
2285.         # Test deconstruction
2286.         definition = gt_operation.deconstruct()
2287.         self.assertEqual(definition[0], 'RemoveConstraint')
2288.         self.assertEqual(definition[1], [])
2289.         self.assertEqual(definition[2], {
2290.             'model_name': 'Pony',
2291.             'name': 'test_constraint_pony_pink_for_weight_gt_5_uniq',
2292.         })
2293. 
2294.     def test_add_deferred_unique_constraint(self):
2295.         app_label = 'test_adddeferred_uc'
2296.         project_state = self.set_up_test_model(app_label)
2297.         deferred_unique_constraint = models.UniqueConstraint(
2298.             fields=['pink'],
2299.             name='deferred_pink_constraint_add',
2300.             deferrable=models.Deferrable.DEFERRED,
2301.         )
2302.         operation = migrations.AddConstraint('Pony', deferred_unique_constraint)
2303.         self.assertEqual(
2304.             operation.describe(),
2305.             'Create constraint deferred_pink_constraint_add on model Pony',
2306.         )
2307.         # Add constraint.
2308.         new_state = project_state.clone()
2309.         operation.state_forwards(app_label, new_state)
2310.         self.assertEqual(len(new_state.models[app_label, 'pony'].options['constraints']), 1)
2311.         Pony = new_state.apps.get_model(app_label, 'Pony')
2312.         self.assertEqual(len(Pony._meta.constraints), 1)
2313.         with connection.schema_editor() as editor:
2314.             operation.database_forwards(app_label, editor, project_state, new_state)
2315.         Pony.objects.create(pink=1, weight=4.0)
2316.         if connection.features.supports_deferrable_unique_constraints:
2317.             # Unique constraint is deferred.
2318.             with transaction.atomic():
2319.                 obj = Pony.objects.create(pink=1, weight=4.0)
2320.                 obj.pink = 2
2321.                 obj.save()
2322.             # Constraint behavior can be changed with SET CONSTRAINTS.
2323.             with self.assertRaises(IntegrityError):
2324.                 with transaction.atomic(), connection.cursor() as cursor:
2325.                     quoted_name = connection.ops.quote_name(deferred_unique_constraint.name)
2326.                     cursor.execute('SET CONSTRAINTS %s IMMEDIATE' % quoted_name)
2327.                     obj = Pony.objects.create(pink=1, weight=4.0)
2328.                     obj.pink = 3
2329.                     obj.save()
2330.         else:
2331.             Pony.objects.create(pink=1, weight=4.0)
2332.         # Reversal.
2333.         with connection.schema_editor() as editor:
2334.             operation.database_backwards(app_label, editor, new_state, project_state)
2335.         # Constraint doesn't work.
2336.         Pony.objects.create(pink=1, weight=4.0)
2337.         # Deconstruction.
2338.         definition = operation.deconstruct()
2339.         self.assertEqual(definition[0], 'AddConstraint')
2340.         self.assertEqual(definition[1], [])
2341.         self.assertEqual(
2342.             definition[2],
2343.             {'model_name': 'Pony', 'constraint': deferred_unique_constraint},
2344.         )
2345. 
2346.     def test_remove_deferred_unique_constraint(self):
2347.         app_label = 'test_removedeferred_uc'
2348.         deferred_unique_constraint = models.UniqueConstraint(
2349.             fields=['pink'],
2350.             name='deferred_pink_constraint_rm',
2351.             deferrable=models.Deferrable.DEFERRED,
2352.         )
2353.         project_state = self.set_up_test_model(app_label, constraints=[deferred_unique_constraint])
2354.         operation = migrations.RemoveConstraint('Pony', deferred_unique_constraint.name)
2355.         self.assertEqual(
2356.             operation.describe(),
2357.             'Remove constraint deferred_pink_constraint_rm from model Pony',
2358.         )
2359.         # Remove constraint.
2360.         new_state = project_state.clone()
2361.         operation.state_forwards(app_label, new_state)
2362.         self.assertEqual(len(new_state.models[app_label, 'pony'].options['constraints']), 0)
2363.         Pony = new_state.apps.get_model(app_label, 'Pony')
2364.         self.assertEqual(len(Pony._meta.constraints), 0)
2365.         with connection.schema_editor() as editor:
2366.             operation.database_forwards(app_label, editor, project_state, new_state)
2367.         # Constraint doesn't work.
2368.         Pony.objects.create(pink=1, weight=4.0)
2369.         Pony.objects.create(pink=1, weight=4.0).delete()
2370.         # Reversal.
2371.         with connection.schema_editor() as editor:
2372.             operation.database_backwards(app_label, editor, new_state, project_state)
2373.         if connection.features.supports_deferrable_unique_constraints:
2374.             # Unique constraint is deferred.
2375.             with transaction.atomic():
2376.                 obj = Pony.objects.create(pink=1, weight=4.0)
2377.                 obj.pink = 2
2378.                 obj.save()
2379.             # Constraint behavior can be changed with SET CONSTRAINTS.
2380.             with self.assertRaises(IntegrityError):
2381.                 with transaction.atomic(), connection.cursor() as cursor:
2382.                     quoted_name = connection.ops.quote_name(deferred_unique_constraint.name)
2383.                     cursor.execute('SET CONSTRAINTS %s IMMEDIATE' % quoted_name)
2384.                     obj = Pony.objects.create(pink=1, weight=4.0)
2385.                     obj.pink = 3
2386.                     obj.save()
2387.         else:
2388.             Pony.objects.create(pink=1, weight=4.0)
2389.         # Deconstruction.
2390.         definition = operation.deconstruct()
2391.         self.assertEqual(definition[0], 'RemoveConstraint')
2392.         self.assertEqual(definition[1], [])
2393.         self.assertEqual(definition[2], {
2394.             'model_name': 'Pony',
2395.             'name': 'deferred_pink_constraint_rm',
2396.         })
2397. 
2398.     def test_add_covering_unique_constraint(self):
2399.         app_label = 'test_addcovering_uc'
2400.         project_state = self.set_up_test_model(app_label)
2401.         covering_unique_constraint = models.UniqueConstraint(
2402.             fields=['pink'],
2403.             name='covering_pink_constraint_add',
2404.             include=['weight'],
2405.         )
2406.         operation = migrations.AddConstraint('Pony', covering_unique_constraint)
2407.         self.assertEqual(
2408.             operation.describe(),
2409.             'Create constraint covering_pink_constraint_add on model Pony',
2410.         )
2411.         # Add constraint.
2412.         new_state = project_state.clone()
2413.         operation.state_forwards(app_label, new_state)
2414.         self.assertEqual(len(new_state.models[app_label, 'pony'].options['constraints']), 1)
2415.         Pony = new_state.apps.get_model(app_label, 'Pony')
2416.         self.assertEqual(len(Pony._meta.constraints), 1)
2417.         with connection.schema_editor() as editor:
2418.             operation.database_forwards(app_label, editor, project_state, new_state)
2419.         Pony.objects.create(pink=1, weight=4.0)
2420.         if connection.features.supports_covering_indexes:
2421.             with self.assertRaises(IntegrityError):
2422.                 Pony.objects.create(pink=1, weight=4.0)
2423.         else:
2424.             Pony.objects.create(pink=1, weight=4.0)
2425.         # Reversal.
2426.         with connection.schema_editor() as editor:
2427.             operation.database_backwards(app_label, editor, new_state, project_state)
2428.         # Constraint doesn't work.
2429.         Pony.objects.create(pink=1, weight=4.0)
2430.         # Deconstruction.
2431.         definition = operation.deconstruct()
2432.         self.assertEqual(definition[0], 'AddConstraint')
2433.         self.assertEqual(definition[1], [])
2434.         self.assertEqual(
2435.             definition[2],
2436.             {'model_name': 'Pony', 'constraint': covering_unique_constraint},
2437.         )
2438. 
2439.     def test_remove_covering_unique_constraint(self):
2440.         app_label = 'test_removecovering_uc'
2441.         covering_unique_constraint = models.UniqueConstraint(
2442.             fields=['pink'],
2443.             name='covering_pink_constraint_rm',
2444.             include=['weight'],
2445.         )
2446.         project_state = self.set_up_test_model(app_label, constraints=[covering_unique_constraint])
2447.         operation = migrations.RemoveConstraint('Pony', covering_unique_constraint.name)
2448.         self.assertEqual(
2449.             operation.describe(),
2450.             'Remove constraint covering_pink_constraint_rm from model Pony',
2451.         )
2452.         # Remove constraint.
2453.         new_state = project_state.clone()
2454.         operation.state_forwards(app_label, new_state)
2455.         self.assertEqual(len(new_state.models[app_label, 'pony'].options['constraints']), 0)
2456.         Pony = new_state.apps.get_model(app_label, 'Pony')
2457.         self.assertEqual(len(Pony._meta.constraints), 0)
2458.         with connection.schema_editor() as editor:
2459.             operation.database_forwards(app_label, editor, project_state, new_state)
2460.         # Constraint doesn't work.
2461.         Pony.objects.create(pink=1, weight=4.0)
2462.         Pony.objects.create(pink=1, weight=4.0).delete()
2463.         # Reversal.
2464.         with connection.schema_editor() as editor:
2465.             operation.database_backwards(app_label, editor, new_state, project_state)
2466.         if connection.features.supports_covering_indexes:
2467.             with self.assertRaises(IntegrityError):
2468.                 Pony.objects.create(pink=1, weight=4.0)
2469.         else:
2470.             Pony.objects.create(pink=1, weight=4.0)
2471.         # Deconstruction.
2472.         definition = operation.deconstruct()
2473.         self.assertEqual(definition[0], 'RemoveConstraint')
2474.         self.assertEqual(definition[1], [])
2475.         self.assertEqual(definition[2], {
2476.             'model_name': 'Pony',
2477.             'name': 'covering_pink_constraint_rm',
2478.         })
2479. 
2480.     def test_alter_model_options(self):
2481.         """
2482.         Tests the AlterModelOptions operation.
2483.         """
2484.         project_state = self.set_up_test_model("test_almoop")
2485.         # Test the state alteration (no DB alteration to test)
2486.         operation = migrations.AlterModelOptions("Pony", {"permissions": [("can_groom", "Can groom")]})
2487.         self.assertEqual(operation.describe(), "Change Meta options on Pony")
2488.         self.assertEqual(operation.migration_name_fragment, 'alter_pony_options')
2489.         new_state = project_state.clone()
2490.         operation.state_forwards("test_almoop", new_state)
2491.         self.assertEqual(len(project_state.models["test_almoop", "pony"].options.get("permissions", [])), 0)
2492.         self.assertEqual(len(new_state.models["test_almoop", "pony"].options.get("permissions", [])), 1)
2493.         self.assertEqual(new_state.models["test_almoop", "pony"].options["permissions"][0][0], "can_groom")
2494.         # And deconstruction
2495.         definition = operation.deconstruct()
2496.         self.assertEqual(definition[0], "AlterModelOptions")
2497.         self.assertEqual(definition[1], [])
2498.         self.assertEqual(definition[2], {'name': "Pony", 'options': {"permissions": [("can_groom", "Can groom")]}})
2499. 
2500.     def test_alter_model_options_emptying(self):
2501.         """
2502.         The AlterModelOptions operation removes keys from the dict (#23121)
2503.         """
2504.         project_state = self.set_up_test_model("test_almoop", options=True)
2505.         # Test the state alteration (no DB alteration to test)
2506.         operation = migrations.AlterModelOptions("Pony", {})
2507.         self.assertEqual(operation.describe(), "Change Meta options on Pony")
2508.         new_state = project_state.clone()
2509.         operation.state_forwards("test_almoop", new_state)
2510.         self.assertEqual(len(project_state.models["test_almoop", "pony"].options.get("permissions", [])), 1)
2511.         self.assertEqual(len(new_state.models["test_almoop", "pony"].options.get("permissions", [])), 0)
2512.         # And deconstruction
2513.         definition = operation.deconstruct()
2514.         self.assertEqual(definition[0], "AlterModelOptions")
2515.         self.assertEqual(definition[1], [])
2516.         self.assertEqual(definition[2], {'name': "Pony", 'options': {}})
2517. 
2518.     def test_alter_order_with_respect_to(self):
2519.         """
2520.         Tests the AlterOrderWithRespectTo operation.
2521.         """
2522.         project_state = self.set_up_test_model("test_alorwrtto", related_model=True)
2523.         # Test the state alteration
2524.         operation = migrations.AlterOrderWithRespectTo("Rider", "pony")
2525.         self.assertEqual(operation.describe(), "Set order_with_respect_to on Rider to pony")
2526.         self.assertEqual(
2527.             operation.migration_name_fragment,
2528.             'alter_rider_order_with_respect_to',
2529.         )
2530.         new_state = project_state.clone()
2531.         operation.state_forwards("test_alorwrtto", new_state)
2532.         self.assertIsNone(
2533.             project_state.models["test_alorwrtto", "rider"].options.get("order_with_respect_to", None)
2534.         )
2535.         self.assertEqual(
2536.             new_state.models["test_alorwrtto", "rider"].options.get("order_with_respect_to", None),
2537.             "pony"
2538.         )
2539.         # Make sure there's no matching index
2540.         self.assertColumnNotExists("test_alorwrtto_rider", "_order")
2541.         # Create some rows before alteration
2542.         rendered_state = project_state.apps
2543.         pony = rendered_state.get_model("test_alorwrtto", "Pony").objects.create(weight=50)
2544.         rider1 = rendered_state.get_model("test_alorwrtto", "Rider").objects.create(pony=pony)
2545.         rider1.friend = rider1
2546.         rider1.save()
2547.         rider2 = rendered_state.get_model("test_alorwrtto", "Rider").objects.create(pony=pony)
2548.         rider2.friend = rider2
2549.         rider2.save()
2550.         # Test the database alteration
2551.         with connection.schema_editor() as editor:
2552.             operation.database_forwards("test_alorwrtto", editor, project_state, new_state)
2553.         self.assertColumnExists("test_alorwrtto_rider", "_order")
2554.         # Check for correct value in rows
2555.         updated_riders = new_state.apps.get_model("test_alorwrtto", "Rider").objects.all()
2556.         self.assertEqual(updated_riders[0]._order, 0)
2557.         self.assertEqual(updated_riders[1]._order, 0)
2558.         # And test reversal
2559.         with connection.schema_editor() as editor:
2560.             operation.database_backwards("test_alorwrtto", editor, new_state, project_state)
2561.         self.assertColumnNotExists("test_alorwrtto_rider", "_order")
2562.         # And deconstruction
2563.         definition = operation.deconstruct()
2564.         self.assertEqual(definition[0], "AlterOrderWithRespectTo")
2565.         self.assertEqual(definition[1], [])
2566.         self.assertEqual(definition[2], {'name': "Rider", 'order_with_respect_to': "pony"})
2567. 
2568.     def test_alter_model_managers(self):
2569.         """
2570.         The managers on a model are set.
2571.         """
2572.         project_state = self.set_up_test_model("test_almoma")
2573.         # Test the state alteration
2574.         operation = migrations.AlterModelManagers(
2575.             "Pony",
2576.             managers=[
2577.                 ("food_qs", FoodQuerySet.as_manager()),
2578.                 ("food_mgr", FoodManager("a", "b")),
2579.                 ("food_mgr_kwargs", FoodManager("x", "y", 3, 4)),
2580.             ]
2581.         )
2582.         self.assertEqual(operation.describe(), "Change managers on Pony")
2583.         self.assertEqual(operation.migration_name_fragment, 'alter_pony_managers')
2584.         managers = project_state.models["test_almoma", "pony"].managers
2585.         self.assertEqual(managers, [])
2586. 
2587.         new_state = project_state.clone()
2588.         operation.state_forwards("test_almoma", new_state)
2589.         self.assertIn(("test_almoma", "pony"), new_state.models)
2590.         managers = new_state.models["test_almoma", "pony"].managers
2591.         self.assertEqual(managers[0][0], "food_qs")
2592.         self.assertIsInstance(managers[0][1], models.Manager)
2593.         self.assertEqual(managers[1][0], "food_mgr")
2594.         self.assertIsInstance(managers[1][1], FoodManager)
2595.         self.assertEqual(managers[1][1].args, ("a", "b", 1, 2))
2596.         self.assertEqual(managers[2][0], "food_mgr_kwargs")
2597.         self.assertIsInstance(managers[2][1], FoodManager)
2598.         self.assertEqual(managers[2][1].args, ("x", "y", 3, 4))
2599.         rendered_state = new_state.apps
2600.         model = rendered_state.get_model('test_almoma', 'pony')
2601.         self.assertIsInstance(model.food_qs, models.Manager)
2602.         self.assertIsInstance(model.food_mgr, FoodManager)
2603.         self.assertIsInstance(model.food_mgr_kwargs, FoodManager)
2604. 
2605.     def test_alter_model_managers_emptying(self):
2606.         """
2607.         The managers on a model are set.
2608.         """
2609.         project_state = self.set_up_test_model("test_almomae", manager_model=True)
2610.         # Test the state alteration
2611.         operation = migrations.AlterModelManagers("Food", managers=[])
2612.         self.assertEqual(operation.describe(), "Change managers on Food")
2613.         self.assertIn(("test_almomae", "food"), project_state.models)
2614.         managers = project_state.models["test_almomae", "food"].managers
2615.         self.assertEqual(managers[0][0], "food_qs")
2616.         self.assertIsInstance(managers[0][1], models.Manager)
2617.         self.assertEqual(managers[1][0], "food_mgr")
2618.         self.assertIsInstance(managers[1][1], FoodManager)
2619.         self.assertEqual(managers[1][1].args, ("a", "b", 1, 2))
2620.         self.assertEqual(managers[2][0], "food_mgr_kwargs")
2621.         self.assertIsInstance(managers[2][1], FoodManager)
2622.         self.assertEqual(managers[2][1].args, ("x", "y", 3, 4))
2623. 
2624.         new_state = project_state.clone()
2625.         operation.state_forwards("test_almomae", new_state)
2626.         managers = new_state.models["test_almomae", "food"].managers
2627.         self.assertEqual(managers, [])
2628. 
2629.     def test_alter_fk(self):
2630.         """
2631.         Creating and then altering an FK works correctly
2632.         and deals with the pending SQL (#23091)
2633.         """
2634.         project_state = self.set_up_test_model("test_alfk")
2635.         # Test adding and then altering the FK in one go
2636.         create_operation = migrations.CreateModel(
2637.             name="Rider",
2638.             fields=[
2639.                 ("id", models.AutoField(primary_key=True)),
2640.                 ("pony", models.ForeignKey("Pony", models.CASCADE)),
2641.             ],
2642.         )
2643.         create_state = project_state.clone()
2644.         create_operation.state_forwards("test_alfk", create_state)
2645.         alter_operation = migrations.AlterField(
2646.             model_name='Rider',
2647.             name='pony',
2648.             field=models.ForeignKey("Pony", models.CASCADE, editable=False),
2649.         )
2650.         alter_state = create_state.clone()
2651.         alter_operation.state_forwards("test_alfk", alter_state)
2652.         with connection.schema_editor() as editor:
2653.             create_operation.database_forwards("test_alfk", editor, project_state, create_state)
2654.             alter_operation.database_forwards("test_alfk", editor, create_state, alter_state)
2655. 
2656.     def test_alter_fk_non_fk(self):
2657.         """
2658.         Altering an FK to a non-FK works (#23244)
2659.         """
2660.         # Test the state alteration
2661.         operation = migrations.AlterField(
2662.             model_name="Rider",
2663.             name="pony",
2664.             field=models.FloatField(),
2665.         )
2666.         project_state, new_state = self.make_test_state("test_afknfk", operation, related_model=True)
2667.         # Test the database alteration
2668.         self.assertColumnExists("test_afknfk_rider", "pony_id")
2669.         self.assertColumnNotExists("test_afknfk_rider", "pony")
2670.         with connection.schema_editor() as editor:
2671.             operation.database_forwards("test_afknfk", editor, project_state, new_state)
2672.         self.assertColumnExists("test_afknfk_rider", "pony")
2673.         self.assertColumnNotExists("test_afknfk_rider", "pony_id")
2674.         # And test reversal
2675.         with connection.schema_editor() as editor:
2676.             operation.database_backwards("test_afknfk", editor, new_state, project_state)
2677.         self.assertColumnExists("test_afknfk_rider", "pony_id")
2678.         self.assertColumnNotExists("test_afknfk_rider", "pony")
2679. 
2680.     def test_run_sql(self):
2681.         """
2682.         Tests the RunSQL operation.
2683.         """
2684.         project_state = self.set_up_test_model("test_runsql")
2685.         # Create the operation
2686.         operation = migrations.RunSQL(
2687.             # Use a multi-line string with a comment to test splitting on SQLite and MySQL respectively
2688.             "CREATE TABLE i_love_ponies (id int, special_thing varchar(15));\n"
2689.             "INSERT INTO i_love_ponies (id, special_thing) VALUES (1, 'i love ponies'); -- this is magic!\n"
2690.             "INSERT INTO i_love_ponies (id, special_thing) VALUES (2, 'i love django');\n"
2691.             "UPDATE i_love_ponies SET special_thing = 'Ponies' WHERE special_thing LIKE '%%ponies';"
2692.             "UPDATE i_love_ponies SET special_thing = 'Django' WHERE special_thing LIKE '%django';",
2693. 
2694.             # Run delete queries to test for parameter substitution failure
2695.             # reported in #23426
2696.             "DELETE FROM i_love_ponies WHERE special_thing LIKE '%Django%';"
2697.             "DELETE FROM i_love_ponies WHERE special_thing LIKE '%%Ponies%%';"
2698.             "DROP TABLE i_love_ponies",
2699. 
2700.             state_operations=[migrations.CreateModel("SomethingElse", [("id", models.AutoField(primary_key=True))])],
2701.         )
2702.         self.assertEqual(operation.describe(), "Raw SQL operation")
2703.         # Test the state alteration
2704.         new_state = project_state.clone()
2705.         operation.state_forwards("test_runsql", new_state)
2706.         self.assertEqual(len(new_state.models["test_runsql", "somethingelse"].fields), 1)
2707.         # Make sure there's no table
2708.         self.assertTableNotExists("i_love_ponies")
2709.         # Test SQL collection
2710.         with connection.schema_editor(collect_sql=True) as editor:
2711.             operation.database_forwards("test_runsql", editor, project_state, new_state)
2712.             self.assertIn("LIKE '%%ponies';", "\n".join(editor.collected_sql))
2713.             operation.database_backwards("test_runsql", editor, project_state, new_state)
2714.             self.assertIn("LIKE '%%Ponies%%';", "\n".join(editor.collected_sql))
2715.         # Test the database alteration
2716.         with connection.schema_editor() as editor:
2717.             operation.database_forwards("test_runsql", editor, project_state, new_state)
2718.         self.assertTableExists("i_love_ponies")
2719.         # Make sure all the SQL was processed
2720.         with connection.cursor() as cursor:
2721.             cursor.execute("SELECT COUNT(*) FROM i_love_ponies")
2722.             self.assertEqual(cursor.fetchall()[0][0], 2)
2723.             cursor.execute("SELECT COUNT(*) FROM i_love_ponies WHERE special_thing = 'Django'")
2724.             self.assertEqual(cursor.fetchall()[0][0], 1)
2725.             cursor.execute("SELECT COUNT(*) FROM i_love_ponies WHERE special_thing = 'Ponies'")
2726.             self.assertEqual(cursor.fetchall()[0][0], 1)
2727.         # And test reversal
2728.         self.assertTrue(operation.reversible)
2729.         with connection.schema_editor() as editor:
2730.             operation.database_backwards("test_runsql", editor, new_state, project_state)
2731.         self.assertTableNotExists("i_love_ponies")
2732.         # And deconstruction
2733.         definition = operation.deconstruct()
2734.         self.assertEqual(definition[0], "RunSQL")
2735.         self.assertEqual(definition[1], [])
2736.         self.assertEqual(sorted(definition[2]), ["reverse_sql", "sql", "state_operations"])
2737.         # And elidable reduction
2738.         self.assertIs(False, operation.reduce(operation, []))
2739.         elidable_operation = migrations.RunSQL('SELECT 1 FROM void;', elidable=True)
2740.         self.assertEqual(elidable_operation.reduce(operation, []), [operation])
2741. 
2742.     def test_run_sql_params(self):
2743.         """
2744.         #23426 - RunSQL should accept parameters.
2745.         """
2746.         project_state = self.set_up_test_model("test_runsql")
2747.         # Create the operation
2748.         operation = migrations.RunSQL(
2749.             ["CREATE TABLE i_love_ponies (id int, special_thing varchar(15));"],
2750.             ["DROP TABLE i_love_ponies"],
2751.         )
2752.         param_operation = migrations.RunSQL(
2753.             # forwards
2754.             (
2755.                 "INSERT INTO i_love_ponies (id, special_thing) VALUES (1, 'Django');",
2756.                 ["INSERT INTO i_love_ponies (id, special_thing) VALUES (2, %s);", ['Ponies']],
2757.                 ("INSERT INTO i_love_ponies (id, special_thing) VALUES (%s, %s);", (3, 'Python',)),
2758.             ),
2759.             # backwards
2760.             [
2761.                 "DELETE FROM i_love_ponies WHERE special_thing = 'Django';",
2762.                 ["DELETE FROM i_love_ponies WHERE special_thing = 'Ponies';", None],
2763.                 ("DELETE FROM i_love_ponies WHERE id = %s OR special_thing = %s;", [3, 'Python']),
2764.             ]
2765.         )
2766. 
2767.         # Make sure there's no table
2768.         self.assertTableNotExists("i_love_ponies")
2769.         new_state = project_state.clone()
2770.         # Test the database alteration
2771.         with connection.schema_editor() as editor:
2772.             operation.database_forwards("test_runsql", editor, project_state, new_state)
2773. 
2774.         # Test parameter passing
2775.         with connection.schema_editor() as editor:
2776.             param_operation.database_forwards("test_runsql", editor, project_state, new_state)
2777.         # Make sure all the SQL was processed
2778.         with connection.cursor() as cursor:
2779.             cursor.execute("SELECT COUNT(*) FROM i_love_ponies")
2780.             self.assertEqual(cursor.fetchall()[0][0], 3)
2781. 
2782.         with connection.schema_editor() as editor:
2783.             param_operation.database_backwards("test_runsql", editor, new_state, project_state)
2784.         with connection.cursor() as cursor:
2785.             cursor.execute("SELECT COUNT(*) FROM i_love_ponies")
2786.             self.assertEqual(cursor.fetchall()[0][0], 0)
2787. 
2788.         # And test reversal
2789.         with connection.schema_editor() as editor:
2790.             operation.database_backwards("test_runsql", editor, new_state, project_state)
2791.         self.assertTableNotExists("i_love_ponies")
2792. 
2793.     def test_run_sql_params_invalid(self):
2794.         """
2795.         #23426 - RunSQL should fail when a list of statements with an incorrect
2796.         number of tuples is given.
2797.         """
2798.         project_state = self.set_up_test_model("test_runsql")
2799.         new_state = project_state.clone()
2800.         operation = migrations.RunSQL(
2801.             # forwards
2802.             [
2803.                 ["INSERT INTO foo (bar) VALUES ('buz');"]
2804.             ],
2805.             # backwards
2806.             (
2807.                 ("DELETE FROM foo WHERE bar = 'buz';", 'invalid', 'parameter count'),
2808.             ),
2809.         )
2810. 
2811.         with connection.schema_editor() as editor:
2812.             with self.assertRaisesMessage(ValueError, "Expected a 2-tuple but got 1"):
2813.                 operation.database_forwards("test_runsql", editor, project_state, new_state)
2814. 
2815.         with connection.schema_editor() as editor:
2816.             with self.assertRaisesMessage(ValueError, "Expected a 2-tuple but got 3"):
2817.                 operation.database_backwards("test_runsql", editor, new_state, project_state)
2818. 
2819.     def test_run_sql_noop(self):
2820.         """
2821.         #24098 - Tests no-op RunSQL operations.
2822.         """
2823.         operation = migrations.RunSQL(migrations.RunSQL.noop, migrations.RunSQL.noop)
2824.         with connection.schema_editor() as editor:
2825.             operation.database_forwards("test_runsql", editor, None, None)
2826.             operation.database_backwards("test_runsql", editor, None, None)
2827. 
2828.     def test_run_python(self):
2829.         """
2830.         Tests the RunPython operation
2831.         """
2832. 
2833.         project_state = self.set_up_test_model("test_runpython", mti_model=True)
2834. 
2835.         # Create the operation
2836.         def inner_method(models, schema_editor):
2837.             Pony = models.get_model("test_runpython", "Pony")
2838.             Pony.objects.create(pink=1, weight=3.55)
2839.             Pony.objects.create(weight=5)
2840. 
2841.         def inner_method_reverse(models, schema_editor):
2842.             Pony = models.get_model("test_runpython", "Pony")
2843.             Pony.objects.filter(pink=1, weight=3.55).delete()
2844.             Pony.objects.filter(weight=5).delete()
2845.         operation = migrations.RunPython(inner_method, reverse_code=inner_method_reverse)
2846.         self.assertEqual(operation.describe(), "Raw Python operation")
2847.         # Test the state alteration does nothing
2848.         new_state = project_state.clone()
2849.         operation.state_forwards("test_runpython", new_state)
2850.         self.assertEqual(new_state, project_state)
2851.         # Test the database alteration
2852.         self.assertEqual(project_state.apps.get_model("test_runpython", "Pony").objects.count(), 0)
2853.         with connection.schema_editor() as editor:
2854.             operation.database_forwards("test_runpython", editor, project_state, new_state)
2855.         self.assertEqual(project_state.apps.get_model("test_runpython", "Pony").objects.count(), 2)
2856.         # Now test reversal
2857.         self.assertTrue(operation.reversible)
2858.         with connection.schema_editor() as editor:
2859.             operation.database_backwards("test_runpython", editor, project_state, new_state)
2860.         self.assertEqual(project_state.apps.get_model("test_runpython", "Pony").objects.count(), 0)
2861.         # Now test we can't use a string
2862.         with self.assertRaisesMessage(ValueError, 'RunPython must be supplied with a callable'):
2863.             migrations.RunPython("print 'ahahaha'")
2864.         # And deconstruction
2865.         definition = operation.deconstruct()
2866.         self.assertEqual(definition[0], "RunPython")
2867.         self.assertEqual(definition[1], [])
2868.         self.assertEqual(sorted(definition[2]), ["code", "reverse_code"])
2869. 
2870.         # Also test reversal fails, with an operation identical to above but without reverse_code set
2871.         no_reverse_operation = migrations.RunPython(inner_method)
2872.         self.assertFalse(no_reverse_operation.reversible)
2873.         with connection.schema_editor() as editor:
2874.             no_reverse_operation.database_forwards("test_runpython", editor, project_state, new_state)
2875.             with self.assertRaises(NotImplementedError):
2876.                 no_reverse_operation.database_backwards("test_runpython", editor, new_state, project_state)
2877.         self.assertEqual(project_state.apps.get_model("test_runpython", "Pony").objects.count(), 2)
2878. 
2879.         def create_ponies(models, schema_editor):
2880.             Pony = models.get_model("test_runpython", "Pony")
2881.             pony1 = Pony.objects.create(pink=1, weight=3.55)
2882.             self.assertIsNot(pony1.pk, None)
2883.             pony2 = Pony.objects.create(weight=5)
2884.             self.assertIsNot(pony2.pk, None)
2885.             self.assertNotEqual(pony1.pk, pony2.pk)
2886. 
2887.         operation = migrations.RunPython(create_ponies)
2888.         with connection.schema_editor() as editor:
2889.             operation.database_forwards("test_runpython", editor, project_state, new_state)
2890.         self.assertEqual(project_state.apps.get_model("test_runpython", "Pony").objects.count(), 4)
2891.         # And deconstruction
2892.         definition = operation.deconstruct()
2893.         self.assertEqual(definition[0], "RunPython")
2894.         self.assertEqual(definition[1], [])
2895.         self.assertEqual(sorted(definition[2]), ["code"])
2896. 
2897.         def create_shetlandponies(models, schema_editor):
2898.             ShetlandPony = models.get_model("test_runpython", "ShetlandPony")
2899.             pony1 = ShetlandPony.objects.create(weight=4.0)
2900.             self.assertIsNot(pony1.pk, None)
2901.             pony2 = ShetlandPony.objects.create(weight=5.0)
2902.             self.assertIsNot(pony2.pk, None)
2903.             self.assertNotEqual(pony1.pk, pony2.pk)
2904. 
2905.         operation = migrations.RunPython(create_shetlandponies)
2906.         with connection.schema_editor() as editor:
2907.             operation.database_forwards("test_runpython", editor, project_state, new_state)
2908.         self.assertEqual(project_state.apps.get_model("test_runpython", "Pony").objects.count(), 6)
2909.         self.assertEqual(project_state.apps.get_model("test_runpython", "ShetlandPony").objects.count(), 2)
2910.         # And elidable reduction
2911.         self.assertIs(False, operation.reduce(operation, []))
2912.         elidable_operation = migrations.RunPython(inner_method, elidable=True)
2913.         self.assertEqual(elidable_operation.reduce(operation, []), [operation])
2914. 
2915.     def test_run_python_atomic(self):
2916.         """
2917.         Tests the RunPython operation correctly handles the "atomic" keyword
2918.         """
2919.         project_state = self.set_up_test_model("test_runpythonatomic", mti_model=True)
2920. 
2921.         def inner_method(models, schema_editor):
2922.             Pony = models.get_model("test_runpythonatomic", "Pony")
2923.             Pony.objects.create(pink=1, weight=3.55)
2924.             raise ValueError("Adrian hates ponies.")
2925. 
2926.         # Verify atomicity when applying.
2927.         atomic_migration = Migration("test", "test_runpythonatomic")
2928.         atomic_migration.operations = [migrations.RunPython(inner_method, reverse_code=inner_method)]
2929.         non_atomic_migration = Migration("test", "test_runpythonatomic")
2930.         non_atomic_migration.operations = [migrations.RunPython(inner_method, reverse_code=inner_method, atomic=False)]
2931.         # If we're a fully-transactional database, both versions should rollback
2932.         if connection.features.can_rollback_ddl:
2933.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2934.             with self.assertRaises(ValueError):
2935.                 with connection.schema_editor() as editor:
2936.                     atomic_migration.apply(project_state, editor)
2937.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2938.             with self.assertRaises(ValueError):
2939.                 with connection.schema_editor() as editor:
2940.                     non_atomic_migration.apply(project_state, editor)
2941.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2942.         # Otherwise, the non-atomic operation should leave a row there
2943.         else:
2944.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2945.             with self.assertRaises(ValueError):
2946.                 with connection.schema_editor() as editor:
2947.                     atomic_migration.apply(project_state, editor)
2948.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2949.             with self.assertRaises(ValueError):
2950.                 with connection.schema_editor() as editor:
2951.                     non_atomic_migration.apply(project_state, editor)
2952.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 1)
2953.         # Reset object count to zero and verify atomicity when unapplying.
2954.         project_state.apps.get_model("test_runpythonatomic", "Pony").objects.all().delete()
2955.         # On a fully-transactional database, both versions rollback.
2956.         if connection.features.can_rollback_ddl:
2957.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2958.             with self.assertRaises(ValueError):
2959.                 with connection.schema_editor() as editor:
2960.                     atomic_migration.unapply(project_state, editor)
2961.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2962.             with self.assertRaises(ValueError):
2963.                 with connection.schema_editor() as editor:
2964.                     non_atomic_migration.unapply(project_state, editor)
2965.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2966.         # Otherwise, the non-atomic operation leaves a row there.
2967.         else:
2968.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2969.             with self.assertRaises(ValueError):
2970.                 with connection.schema_editor() as editor:
2971.                     atomic_migration.unapply(project_state, editor)
2972.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 0)
2973.             with self.assertRaises(ValueError):
2974.                 with connection.schema_editor() as editor:
2975.                     non_atomic_migration.unapply(project_state, editor)
2976.             self.assertEqual(project_state.apps.get_model("test_runpythonatomic", "Pony").objects.count(), 1)
2977.         # Verify deconstruction.
2978.         definition = non_atomic_migration.operations[0].deconstruct()
2979.         self.assertEqual(definition[0], "RunPython")
2980.         self.assertEqual(definition[1], [])
2981.         self.assertEqual(sorted(definition[2]), ["atomic", "code", "reverse_code"])
2982. 
2983.     def test_run_python_related_assignment(self):
2984.         """
2985.         #24282 - Model changes to a FK reverse side update the model
2986.         on the FK side as well.
2987.         """
2988. 
2989.         def inner_method(models, schema_editor):
2990.             Author = models.get_model("test_authors", "Author")
2991.             Book = models.get_model("test_books", "Book")
2992.             author = Author.objects.create(name="Hemingway")
2993.             Book.objects.create(title="Old Man and The Sea", author=author)
2994. 
2995.         create_author = migrations.CreateModel(
2996.             "Author",
2997.             [
2998.                 ("id", models.AutoField(primary_key=True)),
2999.                 ("name", models.CharField(max_length=100)),
3000.             ],
3001.             options={},
3002.         )
3003.         create_book = migrations.CreateModel(
3004.             "Book",
3005.             [
3006.                 ("id", models.AutoField(primary_key=True)),
3007.                 ("title", models.CharField(max_length=100)),
3008.                 ("author", models.ForeignKey("test_authors.Author", models.CASCADE))
3009.             ],
3010.             options={},
3011.         )
3012.         add_hometown = migrations.AddField(
3013.             "Author",
3014.             "hometown",
3015.             models.CharField(max_length=100),
3016.         )
3017.         create_old_man = migrations.RunPython(inner_method, inner_method)
3018. 
3019.         project_state = ProjectState()
3020.         new_state = project_state.clone()
3021.         with connection.schema_editor() as editor:
3022.             create_author.state_forwards("test_authors", new_state)
3023.             create_author.database_forwards("test_authors", editor, project_state, new_state)
3024.         project_state = new_state
3025.         new_state = new_state.clone()
3026.         with connection.schema_editor() as editor:
3027.             create_book.state_forwards("test_books", new_state)
3028.             create_book.database_forwards("test_books", editor, project_state, new_state)
3029.         project_state = new_state
3030.         new_state = new_state.clone()
3031.         with connection.schema_editor() as editor:
3032.             add_hometown.state_forwards("test_authors", new_state)
3033.             add_hometown.database_forwards("test_authors", editor, project_state, new_state)
3034.         project_state = new_state
3035.         new_state = new_state.clone()
3036.         with connection.schema_editor() as editor:
3037.             create_old_man.state_forwards("test_books", new_state)
3038.             create_old_man.database_forwards("test_books", editor, project_state, new_state)
3039. 
3040.     def test_model_with_bigautofield(self):
3041.         """
3042.         A model with BigAutoField can be created.
3043.         """
3044.         def create_data(models, schema_editor):
3045.             Author = models.get_model("test_author", "Author")
3046.             Book = models.get_model("test_book", "Book")
3047.             author1 = Author.objects.create(name="Hemingway")
3048.             Book.objects.create(title="Old Man and The Sea", author=author1)
3049.             Book.objects.create(id=2 ** 33, title="A farewell to arms", author=author1)
3050. 
3051.             author2 = Author.objects.create(id=2 ** 33, name="Remarque")
3052.             Book.objects.create(title="All quiet on the western front", author=author2)
3053.             Book.objects.create(title="Arc de Triomphe", author=author2)
3054. 
3055.         create_author = migrations.CreateModel(
3056.             "Author",
3057.             [
3058.                 ("id", models.BigAutoField(primary_key=True)),
3059.                 ("name", models.CharField(max_length=100)),
3060.             ],
3061.             options={},
3062.         )
3063.         create_book = migrations.CreateModel(
3064.             "Book",
3065.             [
3066.                 ("id", models.BigAutoField(primary_key=True)),
3067.                 ("title", models.CharField(max_length=100)),
3068.                 ("author", models.ForeignKey(to="test_author.Author", on_delete=models.CASCADE))
3069.             ],
3070.             options={},
3071.         )
3072.         fill_data = migrations.RunPython(create_data)
3073. 
3074.         project_state = ProjectState()
3075.         new_state = project_state.clone()
3076.         with connection.schema_editor() as editor:
3077.             create_author.state_forwards("test_author", new_state)
3078.             create_author.database_forwards("test_author", editor, project_state, new_state)
3079. 
3080.         project_state = new_state
3081.         new_state = new_state.clone()
3082.         with connection.schema_editor() as editor:
3083.             create_book.state_forwards("test_book", new_state)
3084.             create_book.database_forwards("test_book", editor, project_state, new_state)
3085. 
3086.         project_state = new_state
3087.         new_state = new_state.clone()
3088.         with connection.schema_editor() as editor:
3089.             fill_data.state_forwards("fill_data", new_state)
3090.             fill_data.database_forwards("fill_data", editor, project_state, new_state)
3091. 
3092.     def _test_autofield_foreignfield_growth(self, source_field, target_field, target_value):
3093.         """
3094.         A field may be migrated in the following ways:
3095. 
3096.         - AutoField to BigAutoField
3097.         - SmallAutoField to AutoField
3098.         - SmallAutoField to BigAutoField
3099.         """
3100.         def create_initial_data(models, schema_editor):
3101.             Article = models.get_model("test_article", "Article")
3102.             Blog = models.get_model("test_blog", "Blog")
3103.             blog = Blog.objects.create(name="web development done right")
3104.             Article.objects.create(name="Frameworks", blog=blog)
3105.             Article.objects.create(name="Programming Languages", blog=blog)
3106. 
3107.         def create_big_data(models, schema_editor):
3108.             Article = models.get_model("test_article", "Article")
3109.             Blog = models.get_model("test_blog", "Blog")
3110.             blog2 = Blog.objects.create(name="Frameworks", id=target_value)
3111.             Article.objects.create(name="Django", blog=blog2)
3112.             Article.objects.create(id=target_value, name="Django2", blog=blog2)
3113. 
3114.         create_blog = migrations.CreateModel(
3115.             "Blog",
3116.             [
3117.                 ("id", source_field(primary_key=True)),
3118.                 ("name", models.CharField(max_length=100)),
3119.             ],
3120.             options={},
3121.         )
3122.         create_article = migrations.CreateModel(
3123.             "Article",
3124.             [
3125.                 ("id", source_field(primary_key=True)),
3126.                 ("blog", models.ForeignKey(to="test_blog.Blog", on_delete=models.CASCADE)),
3127.                 ("name", models.CharField(max_length=100)),
3128.                 ("data", models.TextField(default="")),
3129.             ],
3130.             options={},
3131.         )
3132.         fill_initial_data = migrations.RunPython(create_initial_data, create_initial_data)
3133.         fill_big_data = migrations.RunPython(create_big_data, create_big_data)
3134. 
3135.         grow_article_id = migrations.AlterField('Article', 'id', target_field(primary_key=True))
3136.         grow_blog_id = migrations.AlterField('Blog', 'id', target_field(primary_key=True))
3137. 
3138.         project_state = ProjectState()
3139.         new_state = project_state.clone()
3140.         with connection.schema_editor() as editor:
3141.             create_blog.state_forwards("test_blog", new_state)
3142.             create_blog.database_forwards("test_blog", editor, project_state, new_state)
3143. 
3144.         project_state = new_state
3145.         new_state = new_state.clone()
3146.         with connection.schema_editor() as editor:
3147.             create_article.state_forwards("test_article", new_state)
3148.             create_article.database_forwards("test_article", editor, project_state, new_state)
3149. 
3150.         project_state = new_state
3151.         new_state = new_state.clone()
3152.         with connection.schema_editor() as editor:
3153.             fill_initial_data.state_forwards("fill_initial_data", new_state)
3154.             fill_initial_data.database_forwards("fill_initial_data", editor, project_state, new_state)
3155. 
3156.         project_state = new_state
3157.         new_state = new_state.clone()
3158.         with connection.schema_editor() as editor:
3159.             grow_article_id.state_forwards("test_article", new_state)
3160.             grow_article_id.database_forwards("test_article", editor, project_state, new_state)
3161. 
3162.         state = new_state.clone()
3163.         article = state.apps.get_model("test_article.Article")
3164.         self.assertIsInstance(article._meta.pk, target_field)
3165. 
3166.         project_state = new_state
3167.         new_state = new_state.clone()
3168.         with connection.schema_editor() as editor:
3169.             grow_blog_id.state_forwards("test_blog", new_state)
3170.             grow_blog_id.database_forwards("test_blog", editor, project_state, new_state)
3171. 
3172.         state = new_state.clone()
3173.         blog = state.apps.get_model("test_blog.Blog")
3174.         self.assertIsInstance(blog._meta.pk, target_field)
3175. 
3176.         project_state = new_state
3177.         new_state = new_state.clone()
3178.         with connection.schema_editor() as editor:
3179.             fill_big_data.state_forwards("fill_big_data", new_state)
3180.             fill_big_data.database_forwards("fill_big_data", editor, project_state, new_state)
3181. 
3182.     def test_autofield__bigautofield_foreignfield_growth(self):
3183.         """A field may be migrated from AutoField to BigAutoField."""
3184.         self._test_autofield_foreignfield_growth(
3185.             models.AutoField,
3186.             models.BigAutoField,
3187.             2 ** 33,
3188.         )
3189. 
3190.     def test_smallfield_autofield_foreignfield_growth(self):
3191.         """A field may be migrated from SmallAutoField to AutoField."""
3192.         self._test_autofield_foreignfield_growth(
3193.             models.SmallAutoField,
3194.             models.AutoField,
3195.             2 ** 22,
3196.         )
3197. 
3198.     def test_smallfield_bigautofield_foreignfield_growth(self):
3199.         """A field may be migrated from SmallAutoField to BigAutoField."""
3200.         self._test_autofield_foreignfield_growth(
3201.             models.SmallAutoField,
3202.             models.BigAutoField,
3203.             2 ** 33,
3204.         )
3205. 
3206.     def test_run_python_noop(self):
3207.         """
3208.         #24098 - Tests no-op RunPython operations.
3209.         """
3210.         project_state = ProjectState()
3211.         new_state = project_state.clone()
3212.         operation = migrations.RunPython(migrations.RunPython.noop, migrations.RunPython.noop)
3213.         with connection.schema_editor() as editor:
3214.             operation.database_forwards("test_runpython", editor, project_state, new_state)
3215.             operation.database_backwards("test_runpython", editor, new_state, project_state)
3216. 
3217.     def test_separate_database_and_state(self):
3218.         """
3219.         Tests the SeparateDatabaseAndState operation.
3220.         """
3221.         project_state = self.set_up_test_model("test_separatedatabaseandstate")
3222.         # Create the operation
3223.         database_operation = migrations.RunSQL(
3224.             "CREATE TABLE i_love_ponies (id int, special_thing int);",
3225.             "DROP TABLE i_love_ponies;"
3226.         )
3227.         state_operation = migrations.CreateModel("SomethingElse", [("id", models.AutoField(primary_key=True))])
3228.         operation = migrations.SeparateDatabaseAndState(
3229.             state_operations=[state_operation],
3230.             database_operations=[database_operation]
3231.         )
3232.         self.assertEqual(operation.describe(), "Custom state/database change combination")
3233.         # Test the state alteration
3234.         new_state = project_state.clone()
3235.         operation.state_forwards("test_separatedatabaseandstate", new_state)
3236.         self.assertEqual(len(new_state.models["test_separatedatabaseandstate", "somethingelse"].fields), 1)
3237.         # Make sure there's no table
3238.         self.assertTableNotExists("i_love_ponies")
3239.         # Test the database alteration
3240.         with connection.schema_editor() as editor:
3241.             operation.database_forwards("test_separatedatabaseandstate", editor, project_state, new_state)
3242.         self.assertTableExists("i_love_ponies")
3243.         # And test reversal
3244.         self.assertTrue(operation.reversible)
3245.         with connection.schema_editor() as editor:
3246.             operation.database_backwards("test_separatedatabaseandstate", editor, new_state, project_state)
3247.         self.assertTableNotExists("i_love_ponies")
3248.         # And deconstruction
3249.         definition = operation.deconstruct()
3250.         self.assertEqual(definition[0], "SeparateDatabaseAndState")
3251.         self.assertEqual(definition[1], [])
3252.         self.assertEqual(sorted(definition[2]), ["database_operations", "state_operations"])
3253. 
3254.     def test_separate_database_and_state2(self):
3255.         """
3256.         A complex SeparateDatabaseAndState operation: Multiple operations both
3257.         for state and database. Verify the state dependencies within each list
3258.         and that state ops don't affect the database.
3259.         """
3260.         app_label = "test_separatedatabaseandstate2"
3261.         project_state = self.set_up_test_model(app_label)
3262.         # Create the operation
3263.         database_operations = [
3264.             migrations.CreateModel(
3265.                 "ILovePonies",
3266.                 [("id", models.AutoField(primary_key=True))],
3267.                 options={"db_table": "iloveponies"},
3268.             ),
3269.             migrations.CreateModel(
3270.                 "ILoveMorePonies",
3271.                 # We use IntegerField and not AutoField because
3272.                 # the model is going to be deleted immediately
3273.                 # and with an AutoField this fails on Oracle
3274.                 [("id", models.IntegerField(primary_key=True))],
3275.                 options={"db_table": "ilovemoreponies"},
3276.             ),
3277.             migrations.DeleteModel("ILoveMorePonies"),
3278.             migrations.CreateModel(
3279.                 "ILoveEvenMorePonies",
3280.                 [("id", models.AutoField(primary_key=True))],
3281.                 options={"db_table": "iloveevenmoreponies"},
3282.             ),
3283.         ]
3284.         state_operations = [
3285.             migrations.CreateModel(
3286.                 "SomethingElse",
3287.                 [("id", models.AutoField(primary_key=True))],
3288.                 options={"db_table": "somethingelse"},
3289.             ),
3290.             migrations.DeleteModel("SomethingElse"),
3291.             migrations.CreateModel(
3292.                 "SomethingCompletelyDifferent",
3293.                 [("id", models.AutoField(primary_key=True))],
3294.                 options={"db_table": "somethingcompletelydifferent"},
3295.             ),
3296.         ]
3297.         operation = migrations.SeparateDatabaseAndState(
3298.             state_operations=state_operations,
3299.             database_operations=database_operations,
3300.         )
3301.         # Test the state alteration
3302.         new_state = project_state.clone()
3303.         operation.state_forwards(app_label, new_state)
3304. 
3305.         def assertModelsAndTables(after_db):
3306.             # Tables and models exist, or don't, as they should:
3307.             self.assertNotIn((app_label, "somethingelse"), new_state.models)
3308.             self.assertEqual(len(new_state.models[app_label, "somethingcompletelydifferent"].fields), 1)
3309.             self.assertNotIn((app_label, "iloveponiesonies"), new_state.models)
3310.             self.assertNotIn((app_label, "ilovemoreponies"), new_state.models)
3311.             self.assertNotIn((app_label, "iloveevenmoreponies"), new_state.models)
3312.             self.assertTableNotExists("somethingelse")
3313.             self.assertTableNotExists("somethingcompletelydifferent")
3314.             self.assertTableNotExists("ilovemoreponies")
3315.             if after_db:
3316.                 self.assertTableExists("iloveponies")
3317.                 self.assertTableExists("iloveevenmoreponies")
3318.             else:
3319.                 self.assertTableNotExists("iloveponies")
3320.                 self.assertTableNotExists("iloveevenmoreponies")
3321. 
3322.         assertModelsAndTables(after_db=False)
3323.         # Test the database alteration
3324.         with connection.schema_editor() as editor:
3325.             operation.database_forwards(app_label, editor, project_state, new_state)
3326.         assertModelsAndTables(after_db=True)
3327.         # And test reversal
3328.         self.assertTrue(operation.reversible)
3329.         with connection.schema_editor() as editor:
3330.             operation.database_backwards(app_label, editor, new_state, project_state)
3331.         assertModelsAndTables(after_db=False)
3332. 
3333. 
3334. class SwappableOperationTests(OperationTestBase):
3335.     """
3336.     Key operations ignore swappable models
3337.     (we don't want to replicate all of them here, as the functionality
3338.     is in a common base class anyway)
3339.     """
3340. 
3341.     available_apps = ['migrations']
3342. 
3343.     @override_settings(TEST_SWAP_MODEL="migrations.SomeFakeModel")
3344.     def test_create_ignore_swapped(self):
3345.         """
3346.         The CreateTable operation ignores swapped models.
3347.         """
3348.         operation = migrations.CreateModel(
3349.             "Pony",
3350.             [
3351.                 ("id", models.AutoField(primary_key=True)),
3352.                 ("pink", models.IntegerField(default=1)),
3353.             ],
3354.             options={
3355.                 "swappable": "TEST_SWAP_MODEL",
3356.             },
3357.         )
3358.         # Test the state alteration (it should still be there!)
3359.         project_state = ProjectState()
3360.         new_state = project_state.clone()
3361.         operation.state_forwards("test_crigsw", new_state)
3362.         self.assertEqual(new_state.models["test_crigsw", "pony"].name, "Pony")
3363.         self.assertEqual(len(new_state.models["test_crigsw", "pony"].fields), 2)
3364.         # Test the database alteration
3365.         self.assertTableNotExists("test_crigsw_pony")
3366.         with connection.schema_editor() as editor:
3367.             operation.database_forwards("test_crigsw", editor, project_state, new_state)
3368.         self.assertTableNotExists("test_crigsw_pony")
3369.         # And test reversal
3370.         with connection.schema_editor() as editor:
3371.             operation.database_backwards("test_crigsw", editor, new_state, project_state)
3372.         self.assertTableNotExists("test_crigsw_pony")
3373. 
3374.     @override_settings(TEST_SWAP_MODEL="migrations.SomeFakeModel")
3375.     def test_delete_ignore_swapped(self):
3376.         """
3377.         Tests the DeleteModel operation ignores swapped models.
3378.         """
3379.         operation = migrations.DeleteModel("Pony")
3380.         project_state, new_state = self.make_test_state("test_dligsw", operation)
3381.         # Test the database alteration
3382.         self.assertTableNotExists("test_dligsw_pony")
3383.         with connection.schema_editor() as editor:
3384.             operation.database_forwards("test_dligsw", editor, project_state, new_state)
3385.         self.assertTableNotExists("test_dligsw_pony")
3386.         # And test reversal
3387.         with connection.schema_editor() as editor:
3388.             operation.database_backwards("test_dligsw", editor, new_state, project_state)
3389.         self.assertTableNotExists("test_dligsw_pony")
3390. 
3391.     @override_settings(TEST_SWAP_MODEL="migrations.SomeFakeModel")
3392.     def test_add_field_ignore_swapped(self):
3393.         """
3394.         Tests the AddField operation.
3395.         """
3396.         # Test the state alteration
3397.         operation = migrations.AddField(
3398.             "Pony",
3399.             "height",
3400.             models.FloatField(null=True, default=5),
3401.         )
3402.         project_state, new_state = self.make_test_state("test_adfligsw", operation)
3403.         # Test the database alteration
3404.         self.assertTableNotExists("test_adfligsw_pony")
3405.         with connection.schema_editor() as editor:
3406.             operation.database_forwards("test_adfligsw", editor, project_state, new_state)
3407.         self.assertTableNotExists("test_adfligsw_pony")
3408.         # And test reversal
3409.         with connection.schema_editor() as editor:
3410.             operation.database_backwards("test_adfligsw", editor, new_state, project_state)
3411.         self.assertTableNotExists("test_adfligsw_pony")
3412. 
3413.     @override_settings(TEST_SWAP_MODEL='migrations.SomeFakeModel')
3414.     def test_indexes_ignore_swapped(self):
3415.         """
3416.         Add/RemoveIndex operations ignore swapped models.
3417.         """
3418.         operation = migrations.AddIndex('Pony', models.Index(fields=['pink'], name='my_name_idx'))
3419.         project_state, new_state = self.make_test_state('test_adinigsw', operation)
3420.         with connection.schema_editor() as editor:
3421.             # No database queries should be run for swapped models
3422.             operation.database_forwards('test_adinigsw', editor, project_state, new_state)
3423.             operation.database_backwards('test_adinigsw', editor, new_state, project_state)
3424. 
3425.         operation = migrations.RemoveIndex('Pony', models.Index(fields=['pink'], name='my_name_idx'))
3426.         project_state, new_state = self.make_test_state("test_rminigsw", operation)
3427.         with connection.schema_editor() as editor:
3428.             operation.database_forwards('test_rminigsw', editor, project_state, new_state)
3429.             operation.database_backwards('test_rminigsw', editor, new_state, project_state)
3430. 
3431. 
3432. class TestCreateModel(SimpleTestCase):
3433. 
3434.     def test_references_model_mixin(self):
3435.         migrations.CreateModel(
3436.             'name',
3437.             fields=[],
3438.             bases=(Mixin, models.Model),
3439.         ).references_model('other_model', 'migrations')
3440. 
3441. 
3442. class FieldOperationTests(SimpleTestCase):
3443.     def test_references_model(self):
3444.         operation = FieldOperation('MoDel', 'field', models.ForeignKey('Other', models.CASCADE))
3445.         # Model name match.
3446.         self.assertIs(operation.references_model('mOdEl', 'migrations'), True)
3447.         # Referenced field.
3448.         self.assertIs(operation.references_model('oTher', 'migrations'), True)
3449.         # Doesn't reference.
3450.         self.assertIs(operation.references_model('Whatever', 'migrations'), False)
3451. 
3452.     def test_references_field_by_name(self):
3453.         operation = FieldOperation('MoDel', 'field', models.BooleanField(default=False))
3454.         self.assertIs(operation.references_field('model', 'field', 'migrations'), True)
3455. 
3456.     def test_references_field_by_remote_field_model(self):
3457.         operation = FieldOperation('Model', 'field', models.ForeignKey('Other', models.CASCADE))
3458.         self.assertIs(operation.references_field('Other', 'whatever', 'migrations'), True)
3459.         self.assertIs(operation.references_field('Missing', 'whatever', 'migrations'), False)
3460. 
3461.     def test_references_field_by_from_fields(self):
3462.         operation = FieldOperation(
3463.             'Model', 'field', models.fields.related.ForeignObject('Other', models.CASCADE, ['from'], ['to'])
3464.         )
3465.         self.assertIs(operation.references_field('Model', 'from', 'migrations'), True)
3466.         self.assertIs(operation.references_field('Model', 'to', 'migrations'), False)
3467.         self.assertIs(operation.references_field('Other', 'from', 'migrations'), False)
3468.         self.assertIs(operation.references_field('Model', 'to', 'migrations'), False)
3469. 
3470.     def test_references_field_by_to_fields(self):
3471.         operation = FieldOperation('Model', 'field', models.ForeignKey('Other', models.CASCADE, to_field='field'))
3472.         self.assertIs(operation.references_field('Other', 'field', 'migrations'), True)
3473.         self.assertIs(operation.references_field('Other', 'whatever', 'migrations'), False)
3474.         self.assertIs(operation.references_field('Missing', 'whatever', 'migrations'), False)
3475. 
3476.     def test_references_field_by_through(self):
3477.         operation = FieldOperation('Model', 'field', models.ManyToManyField('Other', through='Through'))
3478.         self.assertIs(operation.references_field('Other', 'whatever', 'migrations'), True)
3479.         self.assertIs(operation.references_field('Through', 'whatever', 'migrations'), True)
3480.         self.assertIs(operation.references_field('Missing', 'whatever', 'migrations'), False)
3481. 
3482.     def test_reference_field_by_through_fields(self):
3483.         operation = FieldOperation(
3484.             'Model', 'field', models.ManyToManyField('Other', through='Through', through_fields=('first', 'second'))
3485.         )
3486.         self.assertIs(operation.references_field('Other', 'whatever', 'migrations'), True)
3487.         self.assertIs(operation.references_field('Through', 'whatever', 'migrations'), False)
3488.         self.assertIs(operation.references_field('Through', 'first', 'migrations'), True)
3489.         self.assertIs(operation.references_field('Through', 'second', 'migrations'), True)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-20 21:59:23,514 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requested the full content of `django/db/migrations/operations/models.py`.\n   - As a fallback, the user asked for the `CreateModel` class definition.\n2. Extended relevance:\n   - This context provides the complete definition of the `CreateModel` class as requested by the user.', relative_path='django/db/migrations/operations/models.py', start_line=41, end_line=243), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requested the content of `tests/migrations/test_operations.py` from line 501 onwards.\n   - As a fallback, the user asked for all tests for `AlterModelOptions`.\n2. Extended relevance:\n   - This context provides the content of the test file starting from line 501 as requested.\n   - It includes the tests for `AlterModelOptions` which start at line 2480, fulfilling the user's specific request.", relative_path='tests/migrations/test_operations.py', start_line=501, end_line=3489)]
2025-12-20 21:59:23,520 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `django/db/migrations/operations/models.py` and the rest of `tests/migrations/test_operations.py` from line 501 onwards.
2025-12-20 21:59:23,520 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-20 21:59:23,520 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-20 21:59:23,520 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 2 existing contexts
2025-12-20 21:59:23,521 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-20 21:59:23,521 - thread-134040120198848.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-20 21:59:23,522 - thread-134040120198848.prometheus_context_collector - INFO - Successfully retrieved 4 context snippets
