2025-12-21 06:35:20,000 - thread-140301230409408.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Use proper whitespace in CREATE INDEX statements

Description: Description
	 
		(last modified by Hannes Ljungberg)
	 
Creating an index through:
index = Index(
	fields=['-name’],
	name='idx'
)
Will generate the valid but not so pretty CREATE INDEX statement: 
CREATE INDEX "idx" ON "schema_author" ("name"DESC)
The following would be expected:
CREATE INDEX "idx" ON "schema_author" ("name" DESC)
This was partially fixed for indexes using opclasses in https://code.djangoproject.com/ticket/30903#ticket but it introduced a new quirk when opclasses is used without explicit ordering:
index = Index(
	fields=['name’],
	name='idx'
	opclasses=['text_pattern_ops’]
)
Will result in:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops )
Note the whitespace after text_pattern_ops. When used with a descending order it will look correct. 
Unfortunately in the fix in #30903 it was assumed that the col_suffixes passed to django.db.backends.ddl_references.Columns would be empty for ascending order but instead it will contain empty strings and thus causing this bug. See: ​https://github.com/django/django/blob/master/django/db/backends/ddl_references.py#L87
The expected output would be:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops)

Patch information:
diff --git a/django/db/backends/ddl_references.py b/django/db/backends/ddl_references.py
index 44e49806f8..2af7ca1d27 100644
--- a/django/db/backends/ddl_references.py
+++ b/django/db/backends/ddl_references.py
@@ -84,9 +84,13 @@ class Columns(TableColumns):
     def __str__(self):
         def col_str(column, idx):
             try:
-                return self.quote_name(column) + self.col_suffixes[idx]
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                return self.quote_name(column)
+                suffix = ''
+            return '{}{}'.format(
+                self.quote_name(column),
+                (' ' + suffix) if suffix else ''
+            )
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))
 
@@ -114,9 +118,11 @@ class IndexColumns(Columns):
             # length as self.columns.
             col = '{} {}'.format(self.quote_name(column), self.opclasses[idx])
             try:
-                col = '{} {}'.format(col, self.col_suffixes[idx])
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                pass
+                suffix = ''
+            if suffix:
+                col = '{} {}'.format(col, suffix)
             return col
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-21 06:35:20,092 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── FUNDING.yml
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   └── test_postgresql.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktrans.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_trans.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
    |   └── utils.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Use proper whitespace in CREATE INDEX statements

Description: Description
	 
		(last modified by Hannes Ljungberg)
	 
Creating an index through:
index = Index(
	fields=['-name’],
	name='idx'
)
Will generate the valid but not so pretty CREATE INDEX statement: 
CREATE INDEX "idx" ON "schema_author" ("name"DESC)
The following would be expected:
CREATE INDEX "idx" ON "schema_author" ("name" DESC)
This was partially fixed for indexes using opclasses in https://code.djangoproject.com/ticket/30903#ticket but it introduced a new quirk when opclasses is used without explicit ordering:
index = Index(
	fields=['name’],
	name='idx'
	opclasses=['text_pattern_ops’]
)
Will result in:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops )
Note the whitespace after text_pattern_ops. When used with a descending order it will look correct. 
Unfortunately in the fix in #30903 it was assumed that the col_suffixes passed to django.db.backends.ddl_references.Columns would be empty for ascending order but instead it will contain empty strings and thus causing this bug. See: ​https://github.com/django/django/blob/master/django/db/backends/ddl_references.py#L87
The expected output would be:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops)

Patch information:
diff --git a/django/db/backends/ddl_references.py b/django/db/backends/ddl_references.py
index 44e49806f8..2af7ca1d27 100644
--- a/django/db/backends/ddl_references.py
+++ b/django/db/backends/ddl_references.py
@@ -84,9 +84,13 @@ class Columns(TableColumns):
     def __str__(self):
         def col_str(column, idx):
             try:
-                return self.quote_name(column) + self.col_suffixes[idx]
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                return self.quote_name(column)
+                suffix = ''
+            return '{}{}'.format(
+                self.quote_name(column),
+                (' ' + suffix) if suffix else ''
+            )
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))
 
@@ -114,9 +118,11 @@ class IndexColumns(Columns):
             # length as self.columns.
             col = '{} {}'.format(self.quote_name(column), self.opclasses[idx])
             try:
-                col = '{} {}'.format(col, self.col_suffixes[idx])
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                pass
+                suffix = ''
+            if suffix:
+                col = '{} {}'.format(col, suffix)
             return col
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 06:35:44,177 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find three relevant test cases for a bug in `CREATE INDEX` SQL statement generation. The bug is related to incorrect whitespace when using descending order or opclasses. To find relevant tests, I need to examine the test files that cover schema and index creation. `tests/schema/tests.py` likely contains general index tests, `tests/postgres_tests/test_indexes.py` should contain tests for `opclasses` which are PostgreSQL-specific, and `tests/model_indexes/tests.py` is another relevant file for index testing. Access to these files is necessary to identify test cases that create indexes with ordering and opclasses and inspect the generated SQL.' query='Please provide the full content of `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`.' extra_requirements='' purpose='I need these files to find three existing test cases that demonstrate the functionality related to the bug in `CREATE INDEX` SQL generation, as requested by the user.'
2025-12-21 06:35:44,178 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`.
2025-12-21 06:35:44,178 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 06:35:44,179 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 06:35:44,180 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 06:35:44,180 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`.
Purpose: I need these files to find three existing test cases that demonstrate the functionality related to the bug in `CREATE INDEX` SQL generation, as requested by the user.
2025-12-21 06:35:48,048 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of the three requested test files: `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`. This will allow me to examine existing test cases and identify those relevant to the `CREATE INDEX` SQL generation bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/model_indexes/tests.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2128, 'candidates_token_count': 138, 'total_token_count': 2506, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2128}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 138}], 'thoughts_token_count': 240, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.05284128672834756, 'model_name': 'gemini-2.5-pro'} id='run--e1326df6-875d-4de4-ae2c-99f4fd15db8a-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/schema/tests.py'}, 'id': 'd25fb14d-ff34-430a-8269-fb5c3af23b26', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/postgres_tests/test_indexes.py'}, 'id': '166cb63c-292e-498d-bddd-78c68bd06952', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/model_indexes/tests.py'}, 'id': '9d826dc7-48f7-410f-8a12-b17587e56872', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2128, 'output_tokens': 138, 'total_tokens': 2506, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 240}}
2025-12-21 06:35:50,945 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the full content of the three requested test files: `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`. Now, I will proceed to analyze these files to identify existing test cases that are relevant to the `CREATE INDEX` SQL generation bug. This will help me understand how the functionality is currently being tested and where potential gaps might exist.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 21612, 'candidates_token_count': 94, 'total_token_count': 21795, 'cached_content_token_count': 1910, 'prompt_tokens_details': [{'modality': 1, 'token_count': 21612}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1910}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 94}], 'thoughts_token_count': 89}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10915720716435859, 'model_name': 'gemini-2.5-pro'} id='run--38e73f6c-4a9f-40be-bdae-e3ae5034f91b-0' usage_metadata={'input_tokens': 21612, 'output_tokens': 94, 'total_tokens': 21795, 'input_token_details': {'cache_read': 1910}, 'output_token_details': {'reasoning': 89}}
2025-12-21 06:35:50,946 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need these files to find three existing test cases that demonstrate the functionality related to the bug in `CREATE INDEX` SQL generation, as requested by the user.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/model_indexes/tests.py
Line number range: 1 - 198
Content:
1. from unittest import mock
2. 
3. from django.conf import settings
4. from django.db import connection, models
5. from django.db.models.query_utils import Q
6. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
7. from django.test.utils import isolate_apps
8. 
9. from .models import Book, ChildModel1, ChildModel2
10. 
11. 
12. class SimpleIndexesTests(SimpleTestCase):
13. 
14.     def test_suffix(self):
15.         self.assertEqual(models.Index.suffix, 'idx')
16. 
17.     def test_repr(self):
18.         index = models.Index(fields=['title'])
19.         multi_col_index = models.Index(fields=['title', 'author'])
20.         partial_index = models.Index(fields=['title'], name='long_books_idx', condition=Q(pages__gt=400))
21.         self.assertEqual(repr(index), "<Index: fields='title'>")
22.         self.assertEqual(repr(multi_col_index), "<Index: fields='title, author'>")
23.         self.assertEqual(repr(partial_index), "<Index: fields='title', condition=(AND: ('pages__gt', 400))>")
24. 
25.     def test_eq(self):
26.         index = models.Index(fields=['title'])
27.         same_index = models.Index(fields=['title'])
28.         another_index = models.Index(fields=['title', 'author'])
29.         index.model = Book
30.         same_index.model = Book
31.         another_index.model = Book
32.         self.assertEqual(index, same_index)
33.         self.assertEqual(index, mock.ANY)
34.         self.assertNotEqual(index, another_index)
35. 
36.     def test_index_fields_type(self):
37.         with self.assertRaisesMessage(ValueError, 'Index.fields must be a list or tuple.'):
38.             models.Index(fields='title')
39. 
40.     def test_fields_tuple(self):
41.         self.assertEqual(models.Index(fields=('title',)).fields, ['title'])
42. 
43.     def test_raises_error_without_field(self):
44.         msg = 'At least one field is required to define an index.'
45.         with self.assertRaisesMessage(ValueError, msg):
46.             models.Index()
47. 
48.     def test_opclasses_requires_index_name(self):
49.         with self.assertRaisesMessage(ValueError, 'An index must be named to use opclasses.'):
50.             models.Index(opclasses=['jsonb_path_ops'])
51. 
52.     def test_opclasses_requires_list_or_tuple(self):
53.         with self.assertRaisesMessage(ValueError, 'Index.opclasses must be a list or tuple.'):
54.             models.Index(name='test_opclass', fields=['field'], opclasses='jsonb_path_ops')
55. 
56.     def test_opclasses_and_fields_same_length(self):
57.         msg = 'Index.fields and Index.opclasses must have the same number of elements.'
58.         with self.assertRaisesMessage(ValueError, msg):
59.             models.Index(name='test_opclass', fields=['field', 'other'], opclasses=['jsonb_path_ops'])
60. 
61.     def test_condition_requires_index_name(self):
62.         with self.assertRaisesMessage(ValueError, 'An index must be named to use condition.'):
63.             models.Index(condition=Q(pages__gt=400))
64. 
65.     def test_condition_must_be_q(self):
66.         with self.assertRaisesMessage(ValueError, 'Index.condition must be a Q instance.'):
67.             models.Index(condition='invalid', name='long_book_idx')
68. 
69.     def test_name_auto_generation(self):
70.         index = models.Index(fields=['author'])
71.         index.set_name_with_model(Book)
72.         self.assertEqual(index.name, 'model_index_author_0f5565_idx')
73. 
74.         # '-' for DESC columns should be accounted for in the index name.
75.         index = models.Index(fields=['-author'])
76.         index.set_name_with_model(Book)
77.         self.assertEqual(index.name, 'model_index_author_708765_idx')
78. 
79.         # fields may be truncated in the name. db_column is used for naming.
80.         long_field_index = models.Index(fields=['pages'])
81.         long_field_index.set_name_with_model(Book)
82.         self.assertEqual(long_field_index.name, 'model_index_page_co_69235a_idx')
83. 
84.         # suffix can't be longer than 3 characters.
85.         long_field_index.suffix = 'suff'
86.         msg = 'Index too long for multiple database support. Is self.suffix longer than 3 characters?'
87.         with self.assertRaisesMessage(AssertionError, msg):
88.             long_field_index.set_name_with_model(Book)
89. 
90.     @isolate_apps('model_indexes')
91.     def test_name_auto_generation_with_quoted_db_table(self):
92.         class QuotedDbTable(models.Model):
93.             name = models.CharField(max_length=50)
94. 
95.             class Meta:
96.                 db_table = '"t_quoted"'
97. 
98.         index = models.Index(fields=['name'])
99.         index.set_name_with_model(QuotedDbTable)
100.         self.assertEqual(index.name, 't_quoted_name_e4ed1b_idx')
101. 
102.     def test_deconstruction(self):
103.         index = models.Index(fields=['title'], db_tablespace='idx_tbls')
104.         index.set_name_with_model(Book)
105.         path, args, kwargs = index.deconstruct()
106.         self.assertEqual(path, 'django.db.models.Index')
107.         self.assertEqual(args, ())
108.         self.assertEqual(
109.             kwargs,
110.             {'fields': ['title'], 'name': 'model_index_title_196f42_idx', 'db_tablespace': 'idx_tbls'}
111.         )
112. 
113.     def test_deconstruct_with_condition(self):
114.         index = models.Index(
115.             name='big_book_index',
116.             fields=['title'],
117.             condition=Q(pages__gt=400),
118.         )
119.         index.set_name_with_model(Book)
120.         path, args, kwargs = index.deconstruct()
121.         self.assertEqual(path, 'django.db.models.Index')
122.         self.assertEqual(args, ())
123.         self.assertEqual(
124.             kwargs,
125.             {
126.                 'fields': ['title'],
127.                 'name': 'model_index_title_196f42_idx',
128.                 'condition': Q(pages__gt=400),
129.             }
130.         )
131. 
132.     def test_clone(self):
133.         index = models.Index(fields=['title'])
134.         new_index = index.clone()
135.         self.assertIsNot(index, new_index)
136.         self.assertEqual(index.fields, new_index.fields)
137. 
138.     def test_name_set(self):
139.         index_names = [index.name for index in Book._meta.indexes]
140.         self.assertCountEqual(
141.             index_names,
142.             [
143.                 'model_index_title_196f42_idx',
144.                 'model_index_isbn_34f975_idx',
145.                 'model_indexes_book_barcode_idx',
146.             ],
147.         )
148. 
149.     def test_abstract_children(self):
150.         index_names = [index.name for index in ChildModel1._meta.indexes]
151.         self.assertEqual(
152.             index_names,
153.             ['model_index_name_440998_idx', 'model_indexes_childmodel1_idx'],
154.         )
155.         index_names = [index.name for index in ChildModel2._meta.indexes]
156.         self.assertEqual(
157.             index_names,
158.             ['model_index_name_b6c374_idx', 'model_indexes_childmodel2_idx'],
159.         )
160. 
161. 
162. class IndexesTests(TestCase):
163. 
164.     @skipUnlessDBFeature('supports_tablespaces')
165.     def test_db_tablespace(self):
166.         editor = connection.schema_editor()
167.         # Index with db_tablespace attribute.
168.         for fields in [
169.             # Field with db_tablespace specified on model.
170.             ['shortcut'],
171.             # Field without db_tablespace specified on model.
172.             ['author'],
173.             # Multi-column with db_tablespaces specified on model.
174.             ['shortcut', 'isbn'],
175.             # Multi-column without db_tablespace specified on model.
176.             ['title', 'author'],
177.         ]:
178.             with self.subTest(fields=fields):
179.                 index = models.Index(fields=fields, db_tablespace='idx_tbls2')
180.                 self.assertIn('"idx_tbls2"', str(index.create_sql(Book, editor)).lower())
181.         # Indexes without db_tablespace attribute.
182.         for fields in [['author'], ['shortcut', 'isbn'], ['title', 'author']]:
183.             with self.subTest(fields=fields):
184.                 index = models.Index(fields=fields)
185.                 # The DEFAULT_INDEX_TABLESPACE setting can't be tested because
186.                 # it's evaluated when the model class is defined. As a
187.                 # consequence, @override_settings doesn't work.
188.                 if settings.DEFAULT_INDEX_TABLESPACE:
189.                     self.assertIn(
190.                         '"%s"' % settings.DEFAULT_INDEX_TABLESPACE,
191.                         str(index.create_sql(Book, editor)).lower()
192.                     )
193.                 else:
194.                     self.assertNotIn('TABLESPACE', str(index.create_sql(Book, editor)))
195.         # Field with db_tablespace specified on the model and an index without
196.         # db_tablespace.
197.         index = models.Index(fields=['shortcut'])
198.         self.assertIn('"idx_tbls"', str(index.create_sql(Book, editor)).lower())


File: tests/postgres_tests/test_indexes.py
Line number range: 1 - 444
Content:
1. from unittest import mock
2. 
3. from django.contrib.postgres.indexes import (
4.     BloomIndex, BrinIndex, BTreeIndex, GinIndex, GistIndex, HashIndex,
5.     SpGistIndex,
6. )
7. from django.db import connection
8. from django.db.models import CharField
9. from django.db.models.functions import Length
10. from django.db.models.query_utils import Q
11. from django.db.utils import NotSupportedError
12. from django.test import skipUnlessDBFeature
13. from django.test.utils import register_lookup
14. 
15. from . import PostgreSQLSimpleTestCase, PostgreSQLTestCase
16. from .models import CharFieldModel, IntegerArrayModel
17. 
18. 
19. class IndexTestMixin:
20. 
21.     def test_name_auto_generation(self):
22.         index = self.index_class(fields=['field'])
23.         index.set_name_with_model(CharFieldModel)
24.         self.assertRegex(index.name, r'postgres_te_field_[0-9a-f]{6}_%s' % self.index_class.suffix)
25. 
26.     def test_deconstruction_no_customization(self):
27.         index = self.index_class(fields=['title'], name='test_title_%s' % self.index_class.suffix)
28.         path, args, kwargs = index.deconstruct()
29.         self.assertEqual(path, 'django.contrib.postgres.indexes.%s' % self.index_class.__name__)
30.         self.assertEqual(args, ())
31.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_%s' % self.index_class.suffix})
32. 
33. 
34. class BloomIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
35.     index_class = BloomIndex
36. 
37.     def test_suffix(self):
38.         self.assertEqual(BloomIndex.suffix, 'bloom')
39. 
40.     def test_deconstruction(self):
41.         index = BloomIndex(fields=['title'], name='test_bloom', length=80, columns=[4])
42.         path, args, kwargs = index.deconstruct()
43.         self.assertEqual(path, 'django.contrib.postgres.indexes.BloomIndex')
44.         self.assertEqual(args, ())
45.         self.assertEqual(kwargs, {
46.             'fields': ['title'],
47.             'name': 'test_bloom',
48.             'length': 80,
49.             'columns': [4],
50.         })
51. 
52.     def test_invalid_fields(self):
53.         msg = 'Bloom indexes support a maximum of 32 fields.'
54.         with self.assertRaisesMessage(ValueError, msg):
55.             BloomIndex(fields=['title'] * 33, name='test_bloom')
56. 
57.     def test_invalid_columns(self):
58.         msg = 'BloomIndex.columns must be a list or tuple.'
59.         with self.assertRaisesMessage(ValueError, msg):
60.             BloomIndex(fields=['title'], name='test_bloom', columns='x')
61.         msg = 'BloomIndex.columns cannot have more values than fields.'
62.         with self.assertRaisesMessage(ValueError, msg):
63.             BloomIndex(fields=['title'], name='test_bloom', columns=[4, 3])
64. 
65.     def test_invalid_columns_value(self):
66.         msg = 'BloomIndex.columns must contain integers from 1 to 4095.'
67.         for length in (0, 4096):
68.             with self.subTest(length), self.assertRaisesMessage(ValueError, msg):
69.                 BloomIndex(fields=['title'], name='test_bloom', columns=[length])
70. 
71.     def test_invalid_length(self):
72.         msg = 'BloomIndex.length must be None or an integer from 1 to 4096.'
73.         for length in (0, 4097):
74.             with self.subTest(length), self.assertRaisesMessage(ValueError, msg):
75.                 BloomIndex(fields=['title'], name='test_bloom', length=length)
76. 
77. 
78. class BrinIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
79.     index_class = BrinIndex
80. 
81.     def test_suffix(self):
82.         self.assertEqual(BrinIndex.suffix, 'brin')
83. 
84.     def test_deconstruction(self):
85.         index = BrinIndex(fields=['title'], name='test_title_brin', autosummarize=True, pages_per_range=16)
86.         path, args, kwargs = index.deconstruct()
87.         self.assertEqual(path, 'django.contrib.postgres.indexes.BrinIndex')
88.         self.assertEqual(args, ())
89.         self.assertEqual(kwargs, {
90.             'fields': ['title'],
91.             'name': 'test_title_brin',
92.             'autosummarize': True,
93.             'pages_per_range': 16,
94.         })
95. 
96.     def test_invalid_pages_per_range(self):
97.         with self.assertRaisesMessage(ValueError, 'pages_per_range must be None or a positive integer'):
98.             BrinIndex(fields=['title'], name='test_title_brin', pages_per_range=0)
99. 
100. 
101. class BTreeIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
102.     index_class = BTreeIndex
103. 
104.     def test_suffix(self):
105.         self.assertEqual(BTreeIndex.suffix, 'btree')
106. 
107.     def test_deconstruction(self):
108.         index = BTreeIndex(fields=['title'], name='test_title_btree', fillfactor=80)
109.         path, args, kwargs = index.deconstruct()
110.         self.assertEqual(path, 'django.contrib.postgres.indexes.BTreeIndex')
111.         self.assertEqual(args, ())
112.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_btree', 'fillfactor': 80})
113. 
114. 
115. class GinIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
116.     index_class = GinIndex
117. 
118.     def test_suffix(self):
119.         self.assertEqual(GinIndex.suffix, 'gin')
120. 
121.     def test_deconstruction(self):
122.         index = GinIndex(
123.             fields=['title'],
124.             name='test_title_gin',
125.             fastupdate=True,
126.             gin_pending_list_limit=128,
127.         )
128.         path, args, kwargs = index.deconstruct()
129.         self.assertEqual(path, 'django.contrib.postgres.indexes.GinIndex')
130.         self.assertEqual(args, ())
131.         self.assertEqual(kwargs, {
132.             'fields': ['title'],
133.             'name': 'test_title_gin',
134.             'fastupdate': True,
135.             'gin_pending_list_limit': 128,
136.         })
137. 
138. 
139. class GistIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
140.     index_class = GistIndex
141. 
142.     def test_suffix(self):
143.         self.assertEqual(GistIndex.suffix, 'gist')
144. 
145.     def test_deconstruction(self):
146.         index = GistIndex(fields=['title'], name='test_title_gist', buffering=False, fillfactor=80)
147.         path, args, kwargs = index.deconstruct()
148.         self.assertEqual(path, 'django.contrib.postgres.indexes.GistIndex')
149.         self.assertEqual(args, ())
150.         self.assertEqual(kwargs, {
151.             'fields': ['title'],
152.             'name': 'test_title_gist',
153.             'buffering': False,
154.             'fillfactor': 80,
155.         })
156. 
157. 
158. class HashIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
159.     index_class = HashIndex
160. 
161.     def test_suffix(self):
162.         self.assertEqual(HashIndex.suffix, 'hash')
163. 
164.     def test_deconstruction(self):
165.         index = HashIndex(fields=['title'], name='test_title_hash', fillfactor=80)
166.         path, args, kwargs = index.deconstruct()
167.         self.assertEqual(path, 'django.contrib.postgres.indexes.HashIndex')
168.         self.assertEqual(args, ())
169.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_hash', 'fillfactor': 80})
170. 
171. 
172. class SpGistIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
173.     index_class = SpGistIndex
174. 
175.     def test_suffix(self):
176.         self.assertEqual(SpGistIndex.suffix, 'spgist')
177. 
178.     def test_deconstruction(self):
179.         index = SpGistIndex(fields=['title'], name='test_title_spgist', fillfactor=80)
180.         path, args, kwargs = index.deconstruct()
181.         self.assertEqual(path, 'django.contrib.postgres.indexes.SpGistIndex')
182.         self.assertEqual(args, ())
183.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_spgist', 'fillfactor': 80})
184. 
185. 
186. class SchemaTests(PostgreSQLTestCase):
187. 
188.     def get_constraints(self, table):
189.         """
190.         Get the indexes on the table using a new cursor.
191.         """
192.         with connection.cursor() as cursor:
193.             return connection.introspection.get_constraints(cursor, table)
194. 
195.     def test_gin_index(self):
196.         # Ensure the table is there and doesn't have an index.
197.         self.assertNotIn('field', self.get_constraints(IntegerArrayModel._meta.db_table))
198.         # Add the index
199.         index_name = 'integer_array_model_field_gin'
200.         index = GinIndex(fields=['field'], name=index_name)
201.         with connection.schema_editor() as editor:
202.             editor.add_index(IntegerArrayModel, index)
203.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
204.         # Check gin index was added
205.         self.assertEqual(constraints[index_name]['type'], GinIndex.suffix)
206.         # Drop the index
207.         with connection.schema_editor() as editor:
208.             editor.remove_index(IntegerArrayModel, index)
209.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
210. 
211.     def test_gin_fastupdate(self):
212.         index_name = 'integer_array_gin_fastupdate'
213.         index = GinIndex(fields=['field'], name=index_name, fastupdate=False)
214.         with connection.schema_editor() as editor:
215.             editor.add_index(IntegerArrayModel, index)
216.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
217.         self.assertEqual(constraints[index_name]['type'], 'gin')
218.         self.assertEqual(constraints[index_name]['options'], ['fastupdate=off'])
219.         with connection.schema_editor() as editor:
220.             editor.remove_index(IntegerArrayModel, index)
221.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
222. 
223.     def test_partial_gin_index(self):
224.         with register_lookup(CharField, Length):
225.             index_name = 'char_field_gin_partial_idx'
226.             index = GinIndex(fields=['field'], name=index_name, condition=Q(field__length=40))
227.             with connection.schema_editor() as editor:
228.                 editor.add_index(CharFieldModel, index)
229.             constraints = self.get_constraints(CharFieldModel._meta.db_table)
230.             self.assertEqual(constraints[index_name]['type'], 'gin')
231.             with connection.schema_editor() as editor:
232.                 editor.remove_index(CharFieldModel, index)
233.             self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
234. 
235.     def test_partial_gin_index_with_tablespace(self):
236.         with register_lookup(CharField, Length):
237.             index_name = 'char_field_gin_partial_idx'
238.             index = GinIndex(
239.                 fields=['field'],
240.                 name=index_name,
241.                 condition=Q(field__length=40),
242.                 db_tablespace='pg_default',
243.             )
244.             with connection.schema_editor() as editor:
245.                 editor.add_index(CharFieldModel, index)
246.                 self.assertIn('TABLESPACE "pg_default" ', str(index.create_sql(CharFieldModel, editor)))
247.             constraints = self.get_constraints(CharFieldModel._meta.db_table)
248.             self.assertEqual(constraints[index_name]['type'], 'gin')
249.             with connection.schema_editor() as editor:
250.                 editor.remove_index(CharFieldModel, index)
251.             self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
252. 
253.     def test_gin_parameters(self):
254.         index_name = 'integer_array_gin_params'
255.         index = GinIndex(fields=['field'], name=index_name, fastupdate=True, gin_pending_list_limit=64)
256.         with connection.schema_editor() as editor:
257.             editor.add_index(IntegerArrayModel, index)
258.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
259.         self.assertEqual(constraints[index_name]['type'], 'gin')
260.         self.assertEqual(constraints[index_name]['options'], ['gin_pending_list_limit=64', 'fastupdate=on'])
261.         with connection.schema_editor() as editor:
262.             editor.remove_index(IntegerArrayModel, index)
263.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
264. 
265.     @skipUnlessDBFeature('has_bloom_index')
266.     def test_bloom_index(self):
267.         index_name = 'char_field_model_field_bloom'
268.         index = BloomIndex(fields=['field'], name=index_name)
269.         with connection.schema_editor() as editor:
270.             editor.add_index(CharFieldModel, index)
271.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
272.         self.assertEqual(constraints[index_name]['type'], BloomIndex.suffix)
273.         with connection.schema_editor() as editor:
274.             editor.remove_index(CharFieldModel, index)
275.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
276. 
277.     @skipUnlessDBFeature('has_bloom_index')
278.     def test_bloom_parameters(self):
279.         index_name = 'char_field_model_field_bloom_params'
280.         index = BloomIndex(fields=['field'], name=index_name, length=512, columns=[3])
281.         with connection.schema_editor() as editor:
282.             editor.add_index(CharFieldModel, index)
283.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
284.         self.assertEqual(constraints[index_name]['type'], BloomIndex.suffix)
285.         self.assertEqual(constraints[index_name]['options'], ['length=512', 'col1=3'])
286.         with connection.schema_editor() as editor:
287.             editor.remove_index(CharFieldModel, index)
288.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
289. 
290.     def test_bloom_index_not_supported(self):
291.         index_name = 'bloom_index_exception'
292.         index = BloomIndex(fields=['field'], name=index_name)
293.         msg = 'Bloom indexes require PostgreSQL 9.6+.'
294.         with self.assertRaisesMessage(NotSupportedError, msg):
295.             with mock.patch('django.db.backends.postgresql.features.DatabaseFeatures.has_bloom_index', False):
296.                 with connection.schema_editor() as editor:
297.                     editor.add_index(CharFieldModel, index)
298.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
299. 
300.     def test_brin_index(self):
301.         index_name = 'char_field_model_field_brin'
302.         index = BrinIndex(fields=['field'], name=index_name, pages_per_range=4)
303.         with connection.schema_editor() as editor:
304.             editor.add_index(CharFieldModel, index)
305.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
306.         self.assertEqual(constraints[index_name]['type'], BrinIndex.suffix)
307.         self.assertEqual(constraints[index_name]['options'], ['pages_per_range=4'])
308.         with connection.schema_editor() as editor:
309.             editor.remove_index(CharFieldModel, index)
310.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
311. 
312.     @skipUnlessDBFeature('has_brin_autosummarize')
313.     def test_brin_parameters(self):
314.         index_name = 'char_field_brin_params'
315.         index = BrinIndex(fields=['field'], name=index_name, autosummarize=True)
316.         with connection.schema_editor() as editor:
317.             editor.add_index(CharFieldModel, index)
318.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
319.         self.assertEqual(constraints[index_name]['type'], BrinIndex.suffix)
320.         self.assertEqual(constraints[index_name]['options'], ['autosummarize=on'])
321.         with connection.schema_editor() as editor:
322.             editor.remove_index(CharFieldModel, index)
323.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
324. 
325.     def test_brin_autosummarize_not_supported(self):
326.         index_name = 'brin_options_exception'
327.         index = BrinIndex(fields=['field'], name=index_name, autosummarize=True)
328.         with self.assertRaisesMessage(NotSupportedError, 'BRIN option autosummarize requires PostgreSQL 10+.'):
329.             with mock.patch('django.db.backends.postgresql.features.DatabaseFeatures.has_brin_autosummarize', False):
330.                 with connection.schema_editor() as editor:
331.                     editor.add_index(CharFieldModel, index)
332.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
333. 
334.     def test_btree_index(self):
335.         # Ensure the table is there and doesn't have an index.
336.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
337.         # Add the index.
338.         index_name = 'char_field_model_field_btree'
339.         index = BTreeIndex(fields=['field'], name=index_name)
340.         with connection.schema_editor() as editor:
341.             editor.add_index(CharFieldModel, index)
342.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
343.         # The index was added.
344.         self.assertEqual(constraints[index_name]['type'], BTreeIndex.suffix)
345.         # Drop the index.
346.         with connection.schema_editor() as editor:
347.             editor.remove_index(CharFieldModel, index)
348.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
349. 
350.     def test_btree_parameters(self):
351.         index_name = 'integer_array_btree_fillfactor'
352.         index = BTreeIndex(fields=['field'], name=index_name, fillfactor=80)
353.         with connection.schema_editor() as editor:
354.             editor.add_index(CharFieldModel, index)
355.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
356.         self.assertEqual(constraints[index_name]['type'], BTreeIndex.suffix)
357.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
358.         with connection.schema_editor() as editor:
359.             editor.remove_index(CharFieldModel, index)
360.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
361. 
362.     def test_gist_index(self):
363.         # Ensure the table is there and doesn't have an index.
364.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
365.         # Add the index.
366.         index_name = 'char_field_model_field_gist'
367.         index = GistIndex(fields=['field'], name=index_name)
368.         with connection.schema_editor() as editor:
369.             editor.add_index(CharFieldModel, index)
370.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
371.         # The index was added.
372.         self.assertEqual(constraints[index_name]['type'], GistIndex.suffix)
373.         # Drop the index.
374.         with connection.schema_editor() as editor:
375.             editor.remove_index(CharFieldModel, index)
376.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
377. 
378.     def test_gist_parameters(self):
379.         index_name = 'integer_array_gist_buffering'
380.         index = GistIndex(fields=['field'], name=index_name, buffering=True, fillfactor=80)
381.         with connection.schema_editor() as editor:
382.             editor.add_index(CharFieldModel, index)
383.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
384.         self.assertEqual(constraints[index_name]['type'], GistIndex.suffix)
385.         self.assertEqual(constraints[index_name]['options'], ['buffering=on', 'fillfactor=80'])
386.         with connection.schema_editor() as editor:
387.             editor.remove_index(CharFieldModel, index)
388.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
389. 
390.     def test_hash_index(self):
391.         # Ensure the table is there and doesn't have an index.
392.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
393.         # Add the index.
394.         index_name = 'char_field_model_field_hash'
395.         index = HashIndex(fields=['field'], name=index_name)
396.         with connection.schema_editor() as editor:
397.             editor.add_index(CharFieldModel, index)
398.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
399.         # The index was added.
400.         self.assertEqual(constraints[index_name]['type'], HashIndex.suffix)
401.         # Drop the index.
402.         with connection.schema_editor() as editor:
403.             editor.remove_index(CharFieldModel, index)
404.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
405. 
406.     def test_hash_parameters(self):
407.         index_name = 'integer_array_hash_fillfactor'
408.         index = HashIndex(fields=['field'], name=index_name, fillfactor=80)
409.         with connection.schema_editor() as editor:
410.             editor.add_index(CharFieldModel, index)
411.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
412.         self.assertEqual(constraints[index_name]['type'], HashIndex.suffix)
413.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
414.         with connection.schema_editor() as editor:
415.             editor.remove_index(CharFieldModel, index)
416.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
417. 
418.     def test_spgist_index(self):
419.         # Ensure the table is there and doesn't have an index.
420.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
421.         # Add the index.
422.         index_name = 'char_field_model_field_spgist'
423.         index = SpGistIndex(fields=['field'], name=index_name)
424.         with connection.schema_editor() as editor:
425.             editor.add_index(CharFieldModel, index)
426.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
427.         # The index was added.
428.         self.assertEqual(constraints[index_name]['type'], SpGistIndex.suffix)
429.         # Drop the index.
430.         with connection.schema_editor() as editor:
431.             editor.remove_index(CharFieldModel, index)
432.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
433. 
434.     def test_spgist_parameters(self):
435.         index_name = 'integer_array_spgist_fillfactor'
436.         index = SpGistIndex(fields=['field'], name=index_name, fillfactor=80)
437.         with connection.schema_editor() as editor:
438.             editor.add_index(CharFieldModel, index)
439.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
440.         self.assertEqual(constraints[index_name]['type'], SpGistIndex.suffix)
441.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
442.         with connection.schema_editor() as editor:
443.             editor.remove_index(CharFieldModel, index)
444.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))


File: tests/schema/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import itertools
3. import unittest
4. from copy import copy
5. from unittest import mock
6. 
7. from django.core.management.color import no_style
8. from django.db import (
9.     DatabaseError, IntegrityError, OperationalError, connection,
10. )
11. from django.db.models import Index, Model, Q
12. from django.db.models.constraints import CheckConstraint, UniqueConstraint
13. from django.db.models.deletion import CASCADE, PROTECT
14. from django.db.models.fields import (
15.     AutoField, BigAutoField, BigIntegerField, BinaryField, BooleanField,
16.     CharField, DateField, DateTimeField, IntegerField, PositiveIntegerField,
17.     SlugField, SmallAutoField, SmallIntegerField, TextField, TimeField,
18.     UUIDField,
19. )
20. from django.db.models.fields.related import (
21.     ForeignKey, ForeignObject, ManyToManyField, OneToOneField,
22. )
23. from django.db.transaction import TransactionManagementError, atomic
24. from django.db.utils import DataError
25. from django.test import (
26.     TransactionTestCase, skipIfDBFeature, skipUnlessDBFeature,
27. )
28. from django.test.utils import CaptureQueriesContext, isolate_apps
29. from django.utils import timezone
30. 
31. from .fields import (
32.     CustomManyToManyField, InheritedManyToManyField, MediumBlobField,
33. )
34. from .models import (
35.     Author, AuthorCharFieldWithIndex, AuthorTextFieldWithIndex,
36.     AuthorWithDefaultHeight, AuthorWithEvenLongerName, AuthorWithIndexedName,
37.     AuthorWithIndexedNameAndBirthday, AuthorWithUniqueName,
38.     AuthorWithUniqueNameAndBirthday, Book, BookForeignObj, BookWeak,
39.     BookWithLongName, BookWithO2O, BookWithoutAuthor, BookWithSlug, IntegerPK,
40.     Node, Note, NoteRename, Tag, TagIndexed, TagM2MTest, TagUniqueRename,
41.     Thing, UniqueTest, new_apps,
42. )
43. 
44. 
45. class SchemaTests(TransactionTestCase):
46.     """
47.     Tests for the schema-alteration code.
48. 
49.     Be aware that these tests are more liable than most to false results,
50.     as sometimes the code to check if a test has worked is almost as complex
51.     as the code it is testing.
52.     """
53. 
54.     available_apps = []
55. 
56.     models = [
57.         Author, AuthorCharFieldWithIndex, AuthorTextFieldWithIndex,
58.         AuthorWithDefaultHeight, AuthorWithEvenLongerName, Book, BookWeak,
59.         BookWithLongName, BookWithO2O, BookWithSlug, IntegerPK, Node, Note,
60.         Tag, TagIndexed, TagM2MTest, TagUniqueRename, Thing, UniqueTest,
61.     ]
62. 
63.     # Utility functions
64. 
65.     def setUp(self):
66.         # local_models should contain test dependent model classes that will be
67.         # automatically removed from the app cache on test tear down.
68.         self.local_models = []
69.         # isolated_local_models contains models that are in test methods
70.         # decorated with @isolate_apps.
71.         self.isolated_local_models = []
72. 
73.     def tearDown(self):
74.         # Delete any tables made for our models
75.         self.delete_tables()
76.         new_apps.clear_cache()
77.         for model in new_apps.get_models():
78.             model._meta._expire_cache()
79.         if 'schema' in new_apps.all_models:
80.             for model in self.local_models:
81.                 for many_to_many in model._meta.many_to_many:
82.                     through = many_to_many.remote_field.through
83.                     if through and through._meta.auto_created:
84.                         del new_apps.all_models['schema'][through._meta.model_name]
85.                 del new_apps.all_models['schema'][model._meta.model_name]
86.         if self.isolated_local_models:
87.             with connection.schema_editor() as editor:
88.                 for model in self.isolated_local_models:
89.                     editor.delete_model(model)
90. 
91.     def delete_tables(self):
92.         "Deletes all model tables for our models for a clean test environment"
93.         converter = connection.introspection.identifier_converter
94.         with connection.schema_editor() as editor:
95.             connection.disable_constraint_checking()
96.             table_names = connection.introspection.table_names()
97.             for model in itertools.chain(SchemaTests.models, self.local_models):
98.                 tbl = converter(model._meta.db_table)
99.                 if tbl in table_names:
100.                     editor.delete_model(model)
101.                     table_names.remove(tbl)
102.             connection.enable_constraint_checking()
103. 
104.     def column_classes(self, model):
105.         with connection.cursor() as cursor:
106.             columns = {
107.                 d[0]: (connection.introspection.get_field_type(d[1], d), d)
108.                 for d in connection.introspection.get_table_description(
109.                     cursor,
110.                     model._meta.db_table,
111.                 )
112.             }
113.         # SQLite has a different format for field_type
114.         for name, (type, desc) in columns.items():
115.             if isinstance(type, tuple):
116.                 columns[name] = (type[0], desc)
117.         # SQLite also doesn't error properly
118.         if not columns:
119.             raise DatabaseError("Table does not exist (empty pragma)")
120.         return columns
121. 
122.     def get_primary_key(self, table):
123.         with connection.cursor() as cursor:
124.             return connection.introspection.get_primary_key_column(cursor, table)
125. 
126.     def get_indexes(self, table):
127.         """
128.         Get the indexes on the table using a new cursor.
129.         """
130.         with connection.cursor() as cursor:
131.             return [
132.                 c['columns'][0]
133.                 for c in connection.introspection.get_constraints(cursor, table).values()
134.                 if c['index'] and len(c['columns']) == 1
135.             ]
136. 
137.     def get_uniques(self, table):
138.         with connection.cursor() as cursor:
139.             return [
140.                 c['columns'][0]
141.                 for c in connection.introspection.get_constraints(cursor, table).values()
142.                 if c['unique'] and len(c['columns']) == 1
143.             ]
144. 
145.     def get_constraints(self, table):
146.         """
147.         Get the constraints on a table using a new cursor.
148.         """
149.         with connection.cursor() as cursor:
150.             return connection.introspection.get_constraints(cursor, table)
151. 
152.     def get_constraints_for_column(self, model, column_name):
153.         constraints = self.get_constraints(model._meta.db_table)
154.         constraints_for_column = []
155.         for name, details in constraints.items():
156.             if details['columns'] == [column_name]:
157.                 constraints_for_column.append(name)
158.         return sorted(constraints_for_column)
159. 
160.     def check_added_field_default(self, schema_editor, model, field, field_name, expected_default,
161.                                   cast_function=None):
162.         with connection.cursor() as cursor:
163.             schema_editor.add_field(model, field)
164.             cursor.execute("SELECT {} FROM {};".format(field_name, model._meta.db_table))
165.             database_default = cursor.fetchall()[0][0]
166.             if cast_function and not type(database_default) == type(expected_default):
167.                 database_default = cast_function(database_default)
168.             self.assertEqual(database_default, expected_default)
169. 
170.     def get_constraints_count(self, table, column, fk_to):
171.         """
172.         Return a dict with keys 'fks', 'uniques, and 'indexes' indicating the
173.         number of foreign keys, unique constraints, and indexes on
174.         `table`.`column`. The `fk_to` argument is a 2-tuple specifying the
175.         expected foreign key relationship's (table, column).
176.         """
177.         with connection.cursor() as cursor:
178.             constraints = connection.introspection.get_constraints(cursor, table)
179.         counts = {'fks': 0, 'uniques': 0, 'indexes': 0}
180.         for c in constraints.values():
181.             if c['columns'] == [column]:
182.                 if c['foreign_key'] == fk_to:
183.                     counts['fks'] += 1
184.                 if c['unique']:
185.                     counts['uniques'] += 1
186.                 elif c['index']:
187.                     counts['indexes'] += 1
188.         return counts
189. 
190.     def assertIndexOrder(self, table, index, order):
191.         constraints = self.get_constraints(table)
192.         self.assertIn(index, constraints)
193.         index_orders = constraints[index]['orders']
194.         self.assertTrue(all(val == expected for val, expected in zip(index_orders, order)))
195. 
196.     def assertForeignKeyExists(self, model, column, expected_fk_table, field='id'):
197.         """
198.         Fail if the FK constraint on `model.Meta.db_table`.`column` to
199.         `expected_fk_table`.id doesn't exist.
200.         """
201.         constraints = self.get_constraints(model._meta.db_table)
202.         constraint_fk = None
203.         for details in constraints.values():
204.             if details['columns'] == [column] and details['foreign_key']:
205.                 constraint_fk = details['foreign_key']
206.                 break
207.         self.assertEqual(constraint_fk, (expected_fk_table, field))
208. 
209.     def assertForeignKeyNotExists(self, model, column, expected_fk_table):
210.         with self.assertRaises(AssertionError):
211.             self.assertForeignKeyExists(model, column, expected_fk_table)
212. 
213.     # Tests
214.     def test_creation_deletion(self):
215.         """
216.         Tries creating a model's table, and then deleting it.
217.         """
218.         with connection.schema_editor() as editor:
219.             # Create the table
220.             editor.create_model(Author)
221.             # The table is there
222.             list(Author.objects.all())
223.             # Clean up that table
224.             editor.delete_model(Author)
225.             # No deferred SQL should be left over.
226.             self.assertEqual(editor.deferred_sql, [])
227.         # The table is gone
228.         with self.assertRaises(DatabaseError):
229.             list(Author.objects.all())
230. 
231.     @skipUnlessDBFeature('supports_foreign_keys')
232.     def test_fk(self):
233.         "Creating tables out of FK order, then repointing, works"
234.         # Create the table
235.         with connection.schema_editor() as editor:
236.             editor.create_model(Book)
237.             editor.create_model(Author)
238.             editor.create_model(Tag)
239.         # Initial tables are there
240.         list(Author.objects.all())
241.         list(Book.objects.all())
242.         # Make sure the FK constraint is present
243.         with self.assertRaises(IntegrityError):
244.             Book.objects.create(
245.                 author_id=1,
246.                 title="Much Ado About Foreign Keys",
247.                 pub_date=datetime.datetime.now(),
248.             )
249.         # Repoint the FK constraint
250.         old_field = Book._meta.get_field("author")
251.         new_field = ForeignKey(Tag, CASCADE)
252.         new_field.set_attributes_from_name("author")
253.         with connection.schema_editor() as editor:
254.             editor.alter_field(Book, old_field, new_field, strict=True)
255.         self.assertForeignKeyExists(Book, 'author_id', 'schema_tag')
256. 
257.     @skipUnlessDBFeature('can_create_inline_fk')
258.     def test_inline_fk(self):
259.         # Create some tables.
260.         with connection.schema_editor() as editor:
261.             editor.create_model(Author)
262.             editor.create_model(Book)
263.             editor.create_model(Note)
264.         self.assertForeignKeyNotExists(Note, 'book_id', 'schema_book')
265.         # Add a foreign key from one to the other.
266.         with connection.schema_editor() as editor:
267.             new_field = ForeignKey(Book, CASCADE)
268.             new_field.set_attributes_from_name('book')
269.             editor.add_field(Note, new_field)
270.         self.assertForeignKeyExists(Note, 'book_id', 'schema_book')
271.         # Creating a FK field with a constraint uses a single statement without
272.         # a deferred ALTER TABLE.
273.         self.assertFalse([
274.             sql for sql in (str(statement) for statement in editor.deferred_sql)
275.             if sql.startswith('ALTER TABLE') and 'ADD CONSTRAINT' in sql
276.         ])
277. 
278.     @skipUnlessDBFeature('supports_foreign_keys')
279.     def test_char_field_with_db_index_to_fk(self):
280.         # Create the table
281.         with connection.schema_editor() as editor:
282.             editor.create_model(Author)
283.             editor.create_model(AuthorCharFieldWithIndex)
284.         # Change CharField to FK
285.         old_field = AuthorCharFieldWithIndex._meta.get_field('char_field')
286.         new_field = ForeignKey(Author, CASCADE, blank=True)
287.         new_field.set_attributes_from_name('char_field')
288.         with connection.schema_editor() as editor:
289.             editor.alter_field(AuthorCharFieldWithIndex, old_field, new_field, strict=True)
290.         self.assertForeignKeyExists(AuthorCharFieldWithIndex, 'char_field_id', 'schema_author')
291. 
292.     @skipUnlessDBFeature('supports_foreign_keys')
293.     @skipUnlessDBFeature('supports_index_on_text_field')
294.     def test_text_field_with_db_index_to_fk(self):
295.         # Create the table
296.         with connection.schema_editor() as editor:
297.             editor.create_model(Author)
298.             editor.create_model(AuthorTextFieldWithIndex)
299.         # Change TextField to FK
300.         old_field = AuthorTextFieldWithIndex._meta.get_field('text_field')
301.         new_field = ForeignKey(Author, CASCADE, blank=True)
302.         new_field.set_attributes_from_name('text_field')
303.         with connection.schema_editor() as editor:
304.             editor.alter_field(AuthorTextFieldWithIndex, old_field, new_field, strict=True)
305.         self.assertForeignKeyExists(AuthorTextFieldWithIndex, 'text_field_id', 'schema_author')
306. 
307.     @isolate_apps('schema')
308.     def test_char_field_pk_to_auto_field(self):
309.         class Foo(Model):
310.             id = CharField(max_length=255, primary_key=True)
311. 
312.             class Meta:
313.                 app_label = 'schema'
314. 
315.         with connection.schema_editor() as editor:
316.             editor.create_model(Foo)
317.         self.isolated_local_models = [Foo]
318.         old_field = Foo._meta.get_field('id')
319.         new_field = AutoField(primary_key=True)
320.         new_field.set_attributes_from_name('id')
321.         new_field.model = Foo
322.         with connection.schema_editor() as editor:
323.             editor.alter_field(Foo, old_field, new_field, strict=True)
324. 
325.     @skipUnlessDBFeature('supports_foreign_keys')
326.     def test_fk_to_proxy(self):
327.         "Creating a FK to a proxy model creates database constraints."
328.         class AuthorProxy(Author):
329.             class Meta:
330.                 app_label = 'schema'
331.                 apps = new_apps
332.                 proxy = True
333. 
334.         class AuthorRef(Model):
335.             author = ForeignKey(AuthorProxy, on_delete=CASCADE)
336. 
337.             class Meta:
338.                 app_label = 'schema'
339.                 apps = new_apps
340. 
341.         self.local_models = [AuthorProxy, AuthorRef]
342. 
343.         # Create the table
344.         with connection.schema_editor() as editor:
345.             editor.create_model(Author)
346.             editor.create_model(AuthorRef)
347.         self.assertForeignKeyExists(AuthorRef, 'author_id', 'schema_author')
348. 
349.     @skipUnlessDBFeature('supports_foreign_keys')
350.     def test_fk_db_constraint(self):
351.         "The db_constraint parameter is respected"
352.         # Create the table
353.         with connection.schema_editor() as editor:
354.             editor.create_model(Tag)
355.             editor.create_model(Author)
356.             editor.create_model(BookWeak)
357.         # Initial tables are there
358.         list(Author.objects.all())
359.         list(Tag.objects.all())
360.         list(BookWeak.objects.all())
361.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
362.         # Make a db_constraint=False FK
363.         new_field = ForeignKey(Tag, CASCADE, db_constraint=False)
364.         new_field.set_attributes_from_name("tag")
365.         with connection.schema_editor() as editor:
366.             editor.add_field(Author, new_field)
367.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
368.         # Alter to one with a constraint
369.         new_field2 = ForeignKey(Tag, CASCADE)
370.         new_field2.set_attributes_from_name("tag")
371.         with connection.schema_editor() as editor:
372.             editor.alter_field(Author, new_field, new_field2, strict=True)
373.         self.assertForeignKeyExists(Author, 'tag_id', 'schema_tag')
374.         # Alter to one without a constraint again
375.         new_field2 = ForeignKey(Tag, CASCADE)
376.         new_field2.set_attributes_from_name("tag")
377.         with connection.schema_editor() as editor:
378.             editor.alter_field(Author, new_field2, new_field, strict=True)
379.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
380. 
381.     @isolate_apps('schema')
382.     def test_no_db_constraint_added_during_primary_key_change(self):
383.         """
384.         When a primary key that's pointed to by a ForeignKey with
385.         db_constraint=False is altered, a foreign key constraint isn't added.
386.         """
387.         class Author(Model):
388.             class Meta:
389.                 app_label = 'schema'
390. 
391.         class BookWeak(Model):
392.             author = ForeignKey(Author, CASCADE, db_constraint=False)
393. 
394.             class Meta:
395.                 app_label = 'schema'
396. 
397.         with connection.schema_editor() as editor:
398.             editor.create_model(Author)
399.             editor.create_model(BookWeak)
400.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
401.         old_field = Author._meta.get_field('id')
402.         new_field = BigAutoField(primary_key=True)
403.         new_field.model = Author
404.         new_field.set_attributes_from_name('id')
405.         # @isolate_apps() and inner models are needed to have the model
406.         # relations populated, otherwise this doesn't act as a regression test.
407.         self.assertEqual(len(new_field.model._meta.related_objects), 1)
408.         with connection.schema_editor() as editor:
409.             editor.alter_field(Author, old_field, new_field, strict=True)
410.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
411. 
412.     def _test_m2m_db_constraint(self, M2MFieldClass):
413.         class LocalAuthorWithM2M(Model):
414.             name = CharField(max_length=255)
415. 
416.             class Meta:
417.                 app_label = 'schema'
418.                 apps = new_apps
419. 
420.         self.local_models = [LocalAuthorWithM2M]
421. 
422.         # Create the table
423.         with connection.schema_editor() as editor:
424.             editor.create_model(Tag)
425.             editor.create_model(LocalAuthorWithM2M)
426.         # Initial tables are there
427.         list(LocalAuthorWithM2M.objects.all())
428.         list(Tag.objects.all())
429.         # Make a db_constraint=False FK
430.         new_field = M2MFieldClass(Tag, related_name="authors", db_constraint=False)
431.         new_field.contribute_to_class(LocalAuthorWithM2M, "tags")
432.         # Add the field
433.         with connection.schema_editor() as editor:
434.             editor.add_field(LocalAuthorWithM2M, new_field)
435.         self.assertForeignKeyNotExists(new_field.remote_field.through, 'tag_id', 'schema_tag')
436. 
437.     @skipUnlessDBFeature('supports_foreign_keys')
438.     def test_m2m_db_constraint(self):
439.         self._test_m2m_db_constraint(ManyToManyField)
440. 
441.     @skipUnlessDBFeature('supports_foreign_keys')
442.     def test_m2m_db_constraint_custom(self):
443.         self._test_m2m_db_constraint(CustomManyToManyField)
444. 
445.     @skipUnlessDBFeature('supports_foreign_keys')
446.     def test_m2m_db_constraint_inherited(self):
447.         self._test_m2m_db_constraint(InheritedManyToManyField)
448. 
449.     def test_add_field(self):
450.         """
451.         Tests adding fields to models
452.         """
453.         # Create the table
454.         with connection.schema_editor() as editor:
455.             editor.create_model(Author)
456.         # Ensure there's no age field
457.         columns = self.column_classes(Author)
458.         self.assertNotIn("age", columns)
459.         # Add the new field
460.         new_field = IntegerField(null=True)
461.         new_field.set_attributes_from_name("age")
462.         with CaptureQueriesContext(connection) as ctx, connection.schema_editor() as editor:
463.             editor.add_field(Author, new_field)
464.         drop_default_sql = editor.sql_alter_column_no_default % {
465.             'column': editor.quote_name(new_field.name),
466.         }
467.         self.assertFalse(any(drop_default_sql in query['sql'] for query in ctx.captured_queries))
468.         # Ensure the field is right afterwards
469.         columns = self.column_classes(Author)
470.         self.assertEqual(columns['age'][0], "IntegerField")
471.         self.assertTrue(columns['age'][1][6])
472. 
473.     def test_add_field_remove_field(self):
474.         """
475.         Adding a field and removing it removes all deferred sql referring to it.
476.         """
477.         with connection.schema_editor() as editor:
478.             # Create a table with a unique constraint on the slug field.
479.             editor.create_model(Tag)
480.             # Remove the slug column.
481.             editor.remove_field(Tag, Tag._meta.get_field('slug'))
482.         self.assertEqual(editor.deferred_sql, [])
483. 
484.     def test_add_field_temp_default(self):
485.         """
486.         Tests adding fields to models with a temporary default
487.         """
488.         # Create the table
489.         with connection.schema_editor() as editor:
490.             editor.create_model(Author)
491.         # Ensure there's no age field
492.         columns = self.column_classes(Author)
493.         self.assertNotIn("age", columns)
494.         # Add some rows of data
495.         Author.objects.create(name="Andrew", height=30)
496.         Author.objects.create(name="Andrea")
497.         # Add a not-null field
498.         new_field = CharField(max_length=30, default="Godwin")
499.         new_field.set_attributes_from_name("surname")
500.         with connection.schema_editor() as editor:

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 06:35:58,197 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of `tests/schema/tests.py`. This context includes the entire file.', relative_path='tests/schema/tests.py', start_line=1, end_line=500), ContextOutput(reasoning='The user requested the full content of `tests/postgres_tests/test_indexes.py`. This context includes the entire file.', relative_path='tests/postgres_tests/test_indexes.py', start_line=1, end_line=444), ContextOutput(reasoning='The user requested the full content of `tests/model_indexes/tests.py`. This context includes the entire file.', relative_path='tests/model_indexes/tests.py', start_line=1, end_line=198)]
2025-12-21 06:35:58,200 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 3 contexts to memory for query: Please provide the full content of `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`.
2025-12-21 06:35:58,200 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 06:35:58,200 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 06:35:58,201 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 3 new contexts to 0 existing contexts
2025-12-21 06:35:58,201 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-21 06:35:58,202 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── FUNDING.yml
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   └── test_postgresql.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktrans.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_trans.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
    |   └── utils.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Use proper whitespace in CREATE INDEX statements

Description: Description
	 
		(last modified by Hannes Ljungberg)
	 
Creating an index through:
index = Index(
	fields=['-name’],
	name='idx'
)
Will generate the valid but not so pretty CREATE INDEX statement: 
CREATE INDEX "idx" ON "schema_author" ("name"DESC)
The following would be expected:
CREATE INDEX "idx" ON "schema_author" ("name" DESC)
This was partially fixed for indexes using opclasses in https://code.djangoproject.com/ticket/30903#ticket but it introduced a new quirk when opclasses is used without explicit ordering:
index = Index(
	fields=['name’],
	name='idx'
	opclasses=['text_pattern_ops’]
)
Will result in:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops )
Note the whitespace after text_pattern_ops. When used with a descending order it will look correct. 
Unfortunately in the fix in #30903 it was assumed that the col_suffixes passed to django.db.backends.ddl_references.Columns would be empty for ascending order but instead it will contain empty strings and thus causing this bug. See: ​https://github.com/django/django/blob/master/django/db/backends/ddl_references.py#L87
The expected output would be:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops)

Patch information:
diff --git a/django/db/backends/ddl_references.py b/django/db/backends/ddl_references.py
index 44e49806f8..2af7ca1d27 100644
--- a/django/db/backends/ddl_references.py
+++ b/django/db/backends/ddl_references.py
@@ -84,9 +84,13 @@ class Columns(TableColumns):
     def __str__(self):
         def col_str(column, idx):
             try:
-                return self.quote_name(column) + self.col_suffixes[idx]
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                return self.quote_name(column)
+                suffix = ''
+            return '{}{}'.format(
+                self.quote_name(column),
+                (' ' + suffix) if suffix else ''
+            )
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))
 
@@ -114,9 +118,11 @@ class IndexColumns(Columns):
             # length as self.columns.
             col = '{} {}'.format(self.quote_name(column), self.opclasses[idx])
             try:
-                col = '{} {}'.format(col, self.col_suffixes[idx])
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                pass
+                suffix = ''
+            if suffix:
+                col = '{} {}'.format(col, suffix)
             return col
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`.
Extra Requirements: 
Purpose: I need these files to find three existing test cases that demonstrate the functionality related to the bug in `CREATE INDEX` SQL generation, as requested by the user.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/model_indexes/tests.py
Line number range: 1 - 198
Content:
1. from unittest import mock
2. 
3. from django.conf import settings
4. from django.db import connection, models
5. from django.db.models.query_utils import Q
6. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
7. from django.test.utils import isolate_apps
8. 
9. from .models import Book, ChildModel1, ChildModel2
10. 
11. 
12. class SimpleIndexesTests(SimpleTestCase):
13. 
14.     def test_suffix(self):
15.         self.assertEqual(models.Index.suffix, 'idx')
16. 
17.     def test_repr(self):
18.         index = models.Index(fields=['title'])
19.         multi_col_index = models.Index(fields=['title', 'author'])
20.         partial_index = models.Index(fields=['title'], name='long_books_idx', condition=Q(pages__gt=400))
21.         self.assertEqual(repr(index), "<Index: fields='title'>")
22.         self.assertEqual(repr(multi_col_index), "<Index: fields='title, author'>")
23.         self.assertEqual(repr(partial_index), "<Index: fields='title', condition=(AND: ('pages__gt', 400))>")
24. 
25.     def test_eq(self):
26.         index = models.Index(fields=['title'])
27.         same_index = models.Index(fields=['title'])
28.         another_index = models.Index(fields=['title', 'author'])
29.         index.model = Book
30.         same_index.model = Book
31.         another_index.model = Book
32.         self.assertEqual(index, same_index)
33.         self.assertEqual(index, mock.ANY)
34.         self.assertNotEqual(index, another_index)
35. 
36.     def test_index_fields_type(self):
37.         with self.assertRaisesMessage(ValueError, 'Index.fields must be a list or tuple.'):
38.             models.Index(fields='title')
39. 
40.     def test_fields_tuple(self):
41.         self.assertEqual(models.Index(fields=('title',)).fields, ['title'])
42. 
43.     def test_raises_error_without_field(self):
44.         msg = 'At least one field is required to define an index.'
45.         with self.assertRaisesMessage(ValueError, msg):
46.             models.Index()
47. 
48.     def test_opclasses_requires_index_name(self):
49.         with self.assertRaisesMessage(ValueError, 'An index must be named to use opclasses.'):
50.             models.Index(opclasses=['jsonb_path_ops'])
51. 
52.     def test_opclasses_requires_list_or_tuple(self):
53.         with self.assertRaisesMessage(ValueError, 'Index.opclasses must be a list or tuple.'):
54.             models.Index(name='test_opclass', fields=['field'], opclasses='jsonb_path_ops')
55. 
56.     def test_opclasses_and_fields_same_length(self):
57.         msg = 'Index.fields and Index.opclasses must have the same number of elements.'
58.         with self.assertRaisesMessage(ValueError, msg):
59.             models.Index(name='test_opclass', fields=['field', 'other'], opclasses=['jsonb_path_ops'])
60. 
61.     def test_condition_requires_index_name(self):
62.         with self.assertRaisesMessage(ValueError, 'An index must be named to use condition.'):
63.             models.Index(condition=Q(pages__gt=400))
64. 
65.     def test_condition_must_be_q(self):
66.         with self.assertRaisesMessage(ValueError, 'Index.condition must be a Q instance.'):
67.             models.Index(condition='invalid', name='long_book_idx')
68. 
69.     def test_name_auto_generation(self):
70.         index = models.Index(fields=['author'])
71.         index.set_name_with_model(Book)
72.         self.assertEqual(index.name, 'model_index_author_0f5565_idx')
73. 
74.         # '-' for DESC columns should be accounted for in the index name.
75.         index = models.Index(fields=['-author'])
76.         index.set_name_with_model(Book)
77.         self.assertEqual(index.name, 'model_index_author_708765_idx')
78. 
79.         # fields may be truncated in the name. db_column is used for naming.
80.         long_field_index = models.Index(fields=['pages'])
81.         long_field_index.set_name_with_model(Book)
82.         self.assertEqual(long_field_index.name, 'model_index_page_co_69235a_idx')
83. 
84.         # suffix can't be longer than 3 characters.
85.         long_field_index.suffix = 'suff'
86.         msg = 'Index too long for multiple database support. Is self.suffix longer than 3 characters?'
87.         with self.assertRaisesMessage(AssertionError, msg):
88.             long_field_index.set_name_with_model(Book)
89. 
90.     @isolate_apps('model_indexes')
91.     def test_name_auto_generation_with_quoted_db_table(self):
92.         class QuotedDbTable(models.Model):
93.             name = models.CharField(max_length=50)
94. 
95.             class Meta:
96.                 db_table = '"t_quoted"'
97. 
98.         index = models.Index(fields=['name'])
99.         index.set_name_with_model(QuotedDbTable)
100.         self.assertEqual(index.name, 't_quoted_name_e4ed1b_idx')
101. 
102.     def test_deconstruction(self):
103.         index = models.Index(fields=['title'], db_tablespace='idx_tbls')
104.         index.set_name_with_model(Book)
105.         path, args, kwargs = index.deconstruct()
106.         self.assertEqual(path, 'django.db.models.Index')
107.         self.assertEqual(args, ())
108.         self.assertEqual(
109.             kwargs,
110.             {'fields': ['title'], 'name': 'model_index_title_196f42_idx', 'db_tablespace': 'idx_tbls'}
111.         )
112. 
113.     def test_deconstruct_with_condition(self):
114.         index = models.Index(
115.             name='big_book_index',
116.             fields=['title'],
117.             condition=Q(pages__gt=400),
118.         )
119.         index.set_name_with_model(Book)
120.         path, args, kwargs = index.deconstruct()
121.         self.assertEqual(path, 'django.db.models.Index')
122.         self.assertEqual(args, ())
123.         self.assertEqual(
124.             kwargs,
125.             {
126.                 'fields': ['title'],
127.                 'name': 'model_index_title_196f42_idx',
128.                 'condition': Q(pages__gt=400),
129.             }
130.         )
131. 
132.     def test_clone(self):
133.         index = models.Index(fields=['title'])
134.         new_index = index.clone()
135.         self.assertIsNot(index, new_index)
136.         self.assertEqual(index.fields, new_index.fields)
137. 
138.     def test_name_set(self):
139.         index_names = [index.name for index in Book._meta.indexes]
140.         self.assertCountEqual(
141.             index_names,
142.             [
143.                 'model_index_title_196f42_idx',
144.                 'model_index_isbn_34f975_idx',
145.                 'model_indexes_book_barcode_idx',
146.             ],
147.         )
148. 
149.     def test_abstract_children(self):
150.         index_names = [index.name for index in ChildModel1._meta.indexes]
151.         self.assertEqual(
152.             index_names,
153.             ['model_index_name_440998_idx', 'model_indexes_childmodel1_idx'],
154.         )
155.         index_names = [index.name for index in ChildModel2._meta.indexes]
156.         self.assertEqual(
157.             index_names,
158.             ['model_index_name_b6c374_idx', 'model_indexes_childmodel2_idx'],
159.         )
160. 
161. 
162. class IndexesTests(TestCase):
163. 
164.     @skipUnlessDBFeature('supports_tablespaces')
165.     def test_db_tablespace(self):
166.         editor = connection.schema_editor()
167.         # Index with db_tablespace attribute.
168.         for fields in [
169.             # Field with db_tablespace specified on model.
170.             ['shortcut'],
171.             # Field without db_tablespace specified on model.
172.             ['author'],
173.             # Multi-column with db_tablespaces specified on model.
174.             ['shortcut', 'isbn'],
175.             # Multi-column without db_tablespace specified on model.
176.             ['title', 'author'],
177.         ]:
178.             with self.subTest(fields=fields):
179.                 index = models.Index(fields=fields, db_tablespace='idx_tbls2')
180.                 self.assertIn('"idx_tbls2"', str(index.create_sql(Book, editor)).lower())
181.         # Indexes without db_tablespace attribute.
182.         for fields in [['author'], ['shortcut', 'isbn'], ['title', 'author']]:
183.             with self.subTest(fields=fields):
184.                 index = models.Index(fields=fields)
185.                 # The DEFAULT_INDEX_TABLESPACE setting can't be tested because
186.                 # it's evaluated when the model class is defined. As a
187.                 # consequence, @override_settings doesn't work.
188.                 if settings.DEFAULT_INDEX_TABLESPACE:
189.                     self.assertIn(
190.                         '"%s"' % settings.DEFAULT_INDEX_TABLESPACE,
191.                         str(index.create_sql(Book, editor)).lower()
192.                     )
193.                 else:
194.                     self.assertNotIn('TABLESPACE', str(index.create_sql(Book, editor)))
195.         # Field with db_tablespace specified on the model and an index without
196.         # db_tablespace.
197.         index = models.Index(fields=['shortcut'])
198.         self.assertIn('"idx_tbls"', str(index.create_sql(Book, editor)).lower())


File: tests/postgres_tests/test_indexes.py
Line number range: 1 - 444
Content:
1. from unittest import mock
2. 
3. from django.contrib.postgres.indexes import (
4.     BloomIndex, BrinIndex, BTreeIndex, GinIndex, GistIndex, HashIndex,
5.     SpGistIndex,
6. )
7. from django.db import connection
8. from django.db.models import CharField
9. from django.db.models.functions import Length
10. from django.db.models.query_utils import Q
11. from django.db.utils import NotSupportedError
12. from django.test import skipUnlessDBFeature
13. from django.test.utils import register_lookup
14. 
15. from . import PostgreSQLSimpleTestCase, PostgreSQLTestCase
16. from .models import CharFieldModel, IntegerArrayModel
17. 
18. 
19. class IndexTestMixin:
20. 
21.     def test_name_auto_generation(self):
22.         index = self.index_class(fields=['field'])
23.         index.set_name_with_model(CharFieldModel)
24.         self.assertRegex(index.name, r'postgres_te_field_[0-9a-f]{6}_%s' % self.index_class.suffix)
25. 
26.     def test_deconstruction_no_customization(self):
27.         index = self.index_class(fields=['title'], name='test_title_%s' % self.index_class.suffix)
28.         path, args, kwargs = index.deconstruct()
29.         self.assertEqual(path, 'django.contrib.postgres.indexes.%s' % self.index_class.__name__)
30.         self.assertEqual(args, ())
31.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_%s' % self.index_class.suffix})
32. 
33. 
34. class BloomIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
35.     index_class = BloomIndex
36. 
37.     def test_suffix(self):
38.         self.assertEqual(BloomIndex.suffix, 'bloom')
39. 
40.     def test_deconstruction(self):
41.         index = BloomIndex(fields=['title'], name='test_bloom', length=80, columns=[4])
42.         path, args, kwargs = index.deconstruct()
43.         self.assertEqual(path, 'django.contrib.postgres.indexes.BloomIndex')
44.         self.assertEqual(args, ())
45.         self.assertEqual(kwargs, {
46.             'fields': ['title'],
47.             'name': 'test_bloom',
48.             'length': 80,
49.             'columns': [4],
50.         })
51. 
52.     def test_invalid_fields(self):
53.         msg = 'Bloom indexes support a maximum of 32 fields.'
54.         with self.assertRaisesMessage(ValueError, msg):
55.             BloomIndex(fields=['title'] * 33, name='test_bloom')
56. 
57.     def test_invalid_columns(self):
58.         msg = 'BloomIndex.columns must be a list or tuple.'
59.         with self.assertRaisesMessage(ValueError, msg):
60.             BloomIndex(fields=['title'], name='test_bloom', columns='x')
61.         msg = 'BloomIndex.columns cannot have more values than fields.'
62.         with self.assertRaisesMessage(ValueError, msg):
63.             BloomIndex(fields=['title'], name='test_bloom', columns=[4, 3])
64. 
65.     def test_invalid_columns_value(self):
66.         msg = 'BloomIndex.columns must contain integers from 1 to 4095.'
67.         for length in (0, 4096):
68.             with self.subTest(length), self.assertRaisesMessage(ValueError, msg):
69.                 BloomIndex(fields=['title'], name='test_bloom', columns=[length])
70. 
71.     def test_invalid_length(self):
72.         msg = 'BloomIndex.length must be None or an integer from 1 to 4096.'
73.         for length in (0, 4097):
74.             with self.subTest(length), self.assertRaisesMessage(ValueError, msg):
75.                 BloomIndex(fields=['title'], name='test_bloom', length=length)
76. 
77. 
78. class BrinIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
79.     index_class = BrinIndex
80. 
81.     def test_suffix(self):
82.         self.assertEqual(BrinIndex.suffix, 'brin')
83. 
84.     def test_deconstruction(self):
85.         index = BrinIndex(fields=['title'], name='test_title_brin', autosummarize=True, pages_per_range=16)
86.         path, args, kwargs = index.deconstruct()
87.         self.assertEqual(path, 'django.contrib.postgres.indexes.BrinIndex')
88.         self.assertEqual(args, ())
89.         self.assertEqual(kwargs, {
90.             'fields': ['title'],
91.             'name': 'test_title_brin',
92.             'autosummarize': True,
93.             'pages_per_range': 16,
94.         })
95. 
96.     def test_invalid_pages_per_range(self):
97.         with self.assertRaisesMessage(ValueError, 'pages_per_range must be None or a positive integer'):
98.             BrinIndex(fields=['title'], name='test_title_brin', pages_per_range=0)
99. 
100. 
101. class BTreeIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
102.     index_class = BTreeIndex
103. 
104.     def test_suffix(self):
105.         self.assertEqual(BTreeIndex.suffix, 'btree')
106. 
107.     def test_deconstruction(self):
108.         index = BTreeIndex(fields=['title'], name='test_title_btree', fillfactor=80)
109.         path, args, kwargs = index.deconstruct()
110.         self.assertEqual(path, 'django.contrib.postgres.indexes.BTreeIndex')
111.         self.assertEqual(args, ())
112.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_btree', 'fillfactor': 80})
113. 
114. 
115. class GinIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
116.     index_class = GinIndex
117. 
118.     def test_suffix(self):
119.         self.assertEqual(GinIndex.suffix, 'gin')
120. 
121.     def test_deconstruction(self):
122.         index = GinIndex(
123.             fields=['title'],
124.             name='test_title_gin',
125.             fastupdate=True,
126.             gin_pending_list_limit=128,
127.         )
128.         path, args, kwargs = index.deconstruct()
129.         self.assertEqual(path, 'django.contrib.postgres.indexes.GinIndex')
130.         self.assertEqual(args, ())
131.         self.assertEqual(kwargs, {
132.             'fields': ['title'],
133.             'name': 'test_title_gin',
134.             'fastupdate': True,
135.             'gin_pending_list_limit': 128,
136.         })
137. 
138. 
139. class GistIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
140.     index_class = GistIndex
141. 
142.     def test_suffix(self):
143.         self.assertEqual(GistIndex.suffix, 'gist')
144. 
145.     def test_deconstruction(self):
146.         index = GistIndex(fields=['title'], name='test_title_gist', buffering=False, fillfactor=80)
147.         path, args, kwargs = index.deconstruct()
148.         self.assertEqual(path, 'django.contrib.postgres.indexes.GistIndex')
149.         self.assertEqual(args, ())
150.         self.assertEqual(kwargs, {
151.             'fields': ['title'],
152.             'name': 'test_title_gist',
153.             'buffering': False,
154.             'fillfactor': 80,
155.         })
156. 
157. 
158. class HashIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
159.     index_class = HashIndex
160. 
161.     def test_suffix(self):
162.         self.assertEqual(HashIndex.suffix, 'hash')
163. 
164.     def test_deconstruction(self):
165.         index = HashIndex(fields=['title'], name='test_title_hash', fillfactor=80)
166.         path, args, kwargs = index.deconstruct()
167.         self.assertEqual(path, 'django.contrib.postgres.indexes.HashIndex')
168.         self.assertEqual(args, ())
169.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_hash', 'fillfactor': 80})
170. 
171. 
172. class SpGistIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
173.     index_class = SpGistIndex
174. 
175.     def test_suffix(self):
176.         self.assertEqual(SpGistIndex.suffix, 'spgist')
177. 
178.     def test_deconstruction(self):
179.         index = SpGistIndex(fields=['title'], name='test_title_spgist', fillfactor=80)
180.         path, args, kwargs = index.deconstruct()
181.         self.assertEqual(path, 'django.contrib.postgres.indexes.SpGistIndex')
182.         self.assertEqual(args, ())
183.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_spgist', 'fillfactor': 80})
184. 
185. 
186. class SchemaTests(PostgreSQLTestCase):
187. 
188.     def get_constraints(self, table):
189.         """
190.         Get the indexes on the table using a new cursor.
191.         """
192.         with connection.cursor() as cursor:
193.             return connection.introspection.get_constraints(cursor, table)
194. 
195.     def test_gin_index(self):
196.         # Ensure the table is there and doesn't have an index.
197.         self.assertNotIn('field', self.get_constraints(IntegerArrayModel._meta.db_table))
198.         # Add the index
199.         index_name = 'integer_array_model_field_gin'
200.         index = GinIndex(fields=['field'], name=index_name)
201.         with connection.schema_editor() as editor:
202.             editor.add_index(IntegerArrayModel, index)
203.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
204.         # Check gin index was added
205.         self.assertEqual(constraints[index_name]['type'], GinIndex.suffix)
206.         # Drop the index
207.         with connection.schema_editor() as editor:
208.             editor.remove_index(IntegerArrayModel, index)
209.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
210. 
211.     def test_gin_fastupdate(self):
212.         index_name = 'integer_array_gin_fastupdate'
213.         index = GinIndex(fields=['field'], name=index_name, fastupdate=False)
214.         with connection.schema_editor() as editor:
215.             editor.add_index(IntegerArrayModel, index)
216.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
217.         self.assertEqual(constraints[index_name]['type'], 'gin')
218.         self.assertEqual(constraints[index_name]['options'], ['fastupdate=off'])
219.         with connection.schema_editor() as editor:
220.             editor.remove_index(IntegerArrayModel, index)
221.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
222. 
223.     def test_partial_gin_index(self):
224.         with register_lookup(CharField, Length):
225.             index_name = 'char_field_gin_partial_idx'
226.             index = GinIndex(fields=['field'], name=index_name, condition=Q(field__length=40))
227.             with connection.schema_editor() as editor:
228.                 editor.add_index(CharFieldModel, index)
229.             constraints = self.get_constraints(CharFieldModel._meta.db_table)
230.             self.assertEqual(constraints[index_name]['type'], 'gin')
231.             with connection.schema_editor() as editor:
232.                 editor.remove_index(CharFieldModel, index)
233.             self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
234. 
235.     def test_partial_gin_index_with_tablespace(self):
236.         with register_lookup(CharField, Length):
237.             index_name = 'char_field_gin_partial_idx'
238.             index = GinIndex(
239.                 fields=['field'],
240.                 name=index_name,
241.                 condition=Q(field__length=40),
242.                 db_tablespace='pg_default',
243.             )
244.             with connection.schema_editor() as editor:
245.                 editor.add_index(CharFieldModel, index)
246.                 self.assertIn('TABLESPACE "pg_default" ', str(index.create_sql(CharFieldModel, editor)))
247.             constraints = self.get_constraints(CharFieldModel._meta.db_table)
248.             self.assertEqual(constraints[index_name]['type'], 'gin')
249.             with connection.schema_editor() as editor:
250.                 editor.remove_index(CharFieldModel, index)
251.             self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
252. 
253.     def test_gin_parameters(self):
254.         index_name = 'integer_array_gin_params'
255.         index = GinIndex(fields=['field'], name=index_name, fastupdate=True, gin_pending_list_limit=64)
256.         with connection.schema_editor() as editor:
257.             editor.add_index(IntegerArrayModel, index)
258.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
259.         self.assertEqual(constraints[index_name]['type'], 'gin')
260.         self.assertEqual(constraints[index_name]['options'], ['gin_pending_list_limit=64', 'fastupdate=on'])
261.         with connection.schema_editor() as editor:
262.             editor.remove_index(IntegerArrayModel, index)
263.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
264. 
265.     @skipUnlessDBFeature('has_bloom_index')
266.     def test_bloom_index(self):
267.         index_name = 'char_field_model_field_bloom'
268.         index = BloomIndex(fields=['field'], name=index_name)
269.         with connection.schema_editor() as editor:
270.             editor.add_index(CharFieldModel, index)
271.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
272.         self.assertEqual(constraints[index_name]['type'], BloomIndex.suffix)
273.         with connection.schema_editor() as editor:
274.             editor.remove_index(CharFieldModel, index)
275.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
276. 
277.     @skipUnlessDBFeature('has_bloom_index')
278.     def test_bloom_parameters(self):
279.         index_name = 'char_field_model_field_bloom_params'
280.         index = BloomIndex(fields=['field'], name=index_name, length=512, columns=[3])
281.         with connection.schema_editor() as editor:
282.             editor.add_index(CharFieldModel, index)
283.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
284.         self.assertEqual(constraints[index_name]['type'], BloomIndex.suffix)
285.         self.assertEqual(constraints[index_name]['options'], ['length=512', 'col1=3'])
286.         with connection.schema_editor() as editor:
287.             editor.remove_index(CharFieldModel, index)
288.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
289. 
290.     def test_bloom_index_not_supported(self):
291.         index_name = 'bloom_index_exception'
292.         index = BloomIndex(fields=['field'], name=index_name)
293.         msg = 'Bloom indexes require PostgreSQL 9.6+.'
294.         with self.assertRaisesMessage(NotSupportedError, msg):
295.             with mock.patch('django.db.backends.postgresql.features.DatabaseFeatures.has_bloom_index', False):
296.                 with connection.schema_editor() as editor:
297.                     editor.add_index(CharFieldModel, index)
298.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
299. 
300.     def test_brin_index(self):
301.         index_name = 'char_field_model_field_brin'
302.         index = BrinIndex(fields=['field'], name=index_name, pages_per_range=4)
303.         with connection.schema_editor() as editor:
304.             editor.add_index(CharFieldModel, index)
305.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
306.         self.assertEqual(constraints[index_name]['type'], BrinIndex.suffix)
307.         self.assertEqual(constraints[index_name]['options'], ['pages_per_range=4'])
308.         with connection.schema_editor() as editor:
309.             editor.remove_index(CharFieldModel, index)
310.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
311. 
312.     @skipUnlessDBFeature('has_brin_autosummarize')
313.     def test_brin_parameters(self):
314.         index_name = 'char_field_brin_params'
315.         index = BrinIndex(fields=['field'], name=index_name, autosummarize=True)
316.         with connection.schema_editor() as editor:
317.             editor.add_index(CharFieldModel, index)
318.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
319.         self.assertEqual(constraints[index_name]['type'], BrinIndex.suffix)
320.         self.assertEqual(constraints[index_name]['options'], ['autosummarize=on'])
321.         with connection.schema_editor() as editor:
322.             editor.remove_index(CharFieldModel, index)
323.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
324. 
325.     def test_brin_autosummarize_not_supported(self):
326.         index_name = 'brin_options_exception'
327.         index = BrinIndex(fields=['field'], name=index_name, autosummarize=True)
328.         with self.assertRaisesMessage(NotSupportedError, 'BRIN option autosummarize requires PostgreSQL 10+.'):
329.             with mock.patch('django.db.backends.postgresql.features.DatabaseFeatures.has_brin_autosummarize', False):
330.                 with connection.schema_editor() as editor:
331.                     editor.add_index(CharFieldModel, index)
332.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
333. 
334.     def test_btree_index(self):
335.         # Ensure the table is there and doesn't have an index.
336.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
337.         # Add the index.
338.         index_name = 'char_field_model_field_btree'
339.         index = BTreeIndex(fields=['field'], name=index_name)
340.         with connection.schema_editor() as editor:
341.             editor.add_index(CharFieldModel, index)
342.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
343.         # The index was added.
344.         self.assertEqual(constraints[index_name]['type'], BTreeIndex.suffix)
345.         # Drop the index.
346.         with connection.schema_editor() as editor:
347.             editor.remove_index(CharFieldModel, index)
348.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
349. 
350.     def test_btree_parameters(self):
351.         index_name = 'integer_array_btree_fillfactor'
352.         index = BTreeIndex(fields=['field'], name=index_name, fillfactor=80)
353.         with connection.schema_editor() as editor:
354.             editor.add_index(CharFieldModel, index)
355.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
356.         self.assertEqual(constraints[index_name]['type'], BTreeIndex.suffix)
357.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
358.         with connection.schema_editor() as editor:
359.             editor.remove_index(CharFieldModel, index)
360.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
361. 
362.     def test_gist_index(self):
363.         # Ensure the table is there and doesn't have an index.
364.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
365.         # Add the index.
366.         index_name = 'char_field_model_field_gist'
367.         index = GistIndex(fields=['field'], name=index_name)
368.         with connection.schema_editor() as editor:
369.             editor.add_index(CharFieldModel, index)
370.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
371.         # The index was added.
372.         self.assertEqual(constraints[index_name]['type'], GistIndex.suffix)
373.         # Drop the index.
374.         with connection.schema_editor() as editor:
375.             editor.remove_index(CharFieldModel, index)
376.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
377. 
378.     def test_gist_parameters(self):
379.         index_name = 'integer_array_gist_buffering'
380.         index = GistIndex(fields=['field'], name=index_name, buffering=True, fillfactor=80)
381.         with connection.schema_editor() as editor:
382.             editor.add_index(CharFieldModel, index)
383.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
384.         self.assertEqual(constraints[index_name]['type'], GistIndex.suffix)
385.         self.assertEqual(constraints[index_name]['options'], ['buffering=on', 'fillfactor=80'])
386.         with connection.schema_editor() as editor:
387.             editor.remove_index(CharFieldModel, index)
388.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
389. 
390.     def test_hash_index(self):
391.         # Ensure the table is there and doesn't have an index.
392.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
393.         # Add the index.
394.         index_name = 'char_field_model_field_hash'
395.         index = HashIndex(fields=['field'], name=index_name)
396.         with connection.schema_editor() as editor:
397.             editor.add_index(CharFieldModel, index)
398.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
399.         # The index was added.
400.         self.assertEqual(constraints[index_name]['type'], HashIndex.suffix)
401.         # Drop the index.
402.         with connection.schema_editor() as editor:
403.             editor.remove_index(CharFieldModel, index)
404.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
405. 
406.     def test_hash_parameters(self):
407.         index_name = 'integer_array_hash_fillfactor'
408.         index = HashIndex(fields=['field'], name=index_name, fillfactor=80)
409.         with connection.schema_editor() as editor:
410.             editor.add_index(CharFieldModel, index)
411.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
412.         self.assertEqual(constraints[index_name]['type'], HashIndex.suffix)
413.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
414.         with connection.schema_editor() as editor:
415.             editor.remove_index(CharFieldModel, index)
416.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
417. 
418.     def test_spgist_index(self):
419.         # Ensure the table is there and doesn't have an index.
420.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
421.         # Add the index.
422.         index_name = 'char_field_model_field_spgist'
423.         index = SpGistIndex(fields=['field'], name=index_name)
424.         with connection.schema_editor() as editor:
425.             editor.add_index(CharFieldModel, index)
426.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
427.         # The index was added.
428.         self.assertEqual(constraints[index_name]['type'], SpGistIndex.suffix)
429.         # Drop the index.
430.         with connection.schema_editor() as editor:
431.             editor.remove_index(CharFieldModel, index)
432.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
433. 
434.     def test_spgist_parameters(self):
435.         index_name = 'integer_array_spgist_fillfactor'
436.         index = SpGistIndex(fields=['field'], name=index_name, fillfactor=80)
437.         with connection.schema_editor() as editor:
438.             editor.add_index(CharFieldModel, index)
439.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
440.         self.assertEqual(constraints[index_name]['type'], SpGistIndex.suffix)
441.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
442.         with connection.schema_editor() as editor:
443.             editor.remove_index(CharFieldModel, index)
444.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))


File: tests/schema/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import itertools
3. import unittest
4. from copy import copy
5. from unittest import mock
6. 
7. from django.core.management.color import no_style
8. from django.db import (
9.     DatabaseError, IntegrityError, OperationalError, connection,
10. )
11. from django.db.models import Index, Model, Q
12. from django.db.models.constraints import CheckConstraint, UniqueConstraint
13. from django.db.models.deletion import CASCADE, PROTECT
14. from django.db.models.fields import (
15.     AutoField, BigAutoField, BigIntegerField, BinaryField, BooleanField,
16.     CharField, DateField, DateTimeField, IntegerField, PositiveIntegerField,
17.     SlugField, SmallAutoField, SmallIntegerField, TextField, TimeField,
18.     UUIDField,
19. )
20. from django.db.models.fields.related import (
21.     ForeignKey, ForeignObject, ManyToManyField, OneToOneField,
22. )
23. from django.db.transaction import TransactionManagementError, atomic
24. from django.db.utils import DataError
25. from django.test import (
26.     TransactionTestCase, skipIfDBFeature, skipUnlessDBFeature,
27. )
28. from django.test.utils import CaptureQueriesContext, isolate_apps
29. from django.utils import timezone
30. 
31. from .fields import (
32.     CustomManyToManyField, InheritedManyToManyField, MediumBlobField,
33. )
34. from .models import (
35.     Author, AuthorCharFieldWithIndex, AuthorTextFieldWithIndex,
36.     AuthorWithDefaultHeight, AuthorWithEvenLongerName, AuthorWithIndexedName,
37.     AuthorWithIndexedNameAndBirthday, AuthorWithUniqueName,
38.     AuthorWithUniqueNameAndBirthday, Book, BookForeignObj, BookWeak,
39.     BookWithLongName, BookWithO2O, BookWithoutAuthor, BookWithSlug, IntegerPK,
40.     Node, Note, NoteRename, Tag, TagIndexed, TagM2MTest, TagUniqueRename,
41.     Thing, UniqueTest, new_apps,
42. )
43. 
44. 
45. class SchemaTests(TransactionTestCase):
46.     """
47.     Tests for the schema-alteration code.
48. 
49.     Be aware that these tests are more liable than most to false results,
50.     as sometimes the code to check if a test has worked is almost as complex
51.     as the code it is testing.
52.     """
53. 
54.     available_apps = []
55. 
56.     models = [
57.         Author, AuthorCharFieldWithIndex, AuthorTextFieldWithIndex,
58.         AuthorWithDefaultHeight, AuthorWithEvenLongerName, Book, BookWeak,
59.         BookWithLongName, BookWithO2O, BookWithSlug, IntegerPK, Node, Note,
60.         Tag, TagIndexed, TagM2MTest, TagUniqueRename, Thing, UniqueTest,
61.     ]
62. 
63.     # Utility functions
64. 
65.     def setUp(self):
66.         # local_models should contain test dependent model classes that will be
67.         # automatically removed from the app cache on test tear down.
68.         self.local_models = []
69.         # isolated_local_models contains models that are in test methods
70.         # decorated with @isolate_apps.
71.         self.isolated_local_models = []
72. 
73.     def tearDown(self):
74.         # Delete any tables made for our models
75.         self.delete_tables()
76.         new_apps.clear_cache()
77.         for model in new_apps.get_models():
78.             model._meta._expire_cache()
79.         if 'schema' in new_apps.all_models:
80.             for model in self.local_models:
81.                 for many_to_many in model._meta.many_to_many:
82.                     through = many_to_many.remote_field.through
83.                     if through and through._meta.auto_created:
84.                         del new_apps.all_models['schema'][through._meta.model_name]
85.                 del new_apps.all_models['schema'][model._meta.model_name]
86.         if self.isolated_local_models:
87.             with connection.schema_editor() as editor:
88.                 for model in self.isolated_local_models:
89.                     editor.delete_model(model)
90. 
91.     def delete_tables(self):
92.         "Deletes all model tables for our models for a clean test environment"
93.         converter = connection.introspection.identifier_converter
94.         with connection.schema_editor() as editor:
95.             connection.disable_constraint_checking()
96.             table_names = connection.introspection.table_names()
97.             for model in itertools.chain(SchemaTests.models, self.local_models):
98.                 tbl = converter(model._meta.db_table)
99.                 if tbl in table_names:
100.                     editor.delete_model(model)
101.                     table_names.remove(tbl)
102.             connection.enable_constraint_checking()
103. 
104.     def column_classes(self, model):
105.         with connection.cursor() as cursor:
106.             columns = {
107.                 d[0]: (connection.introspection.get_field_type(d[1], d), d)
108.                 for d in connection.introspection.get_table_description(
109.                     cursor,
110.                     model._meta.db_table,
111.                 )
112.             }
113.         # SQLite has a different format for field_type
114.         for name, (type, desc) in columns.items():
115.             if isinstance(type, tuple):
116.                 columns[name] = (type[0], desc)
117.         # SQLite also doesn't error properly
118.         if not columns:
119.             raise DatabaseError("Table does not exist (empty pragma)")
120.         return columns
121. 
122.     def get_primary_key(self, table):
123.         with connection.cursor() as cursor:
124.             return connection.introspection.get_primary_key_column(cursor, table)
125. 
126.     def get_indexes(self, table):
127.         """
128.         Get the indexes on the table using a new cursor.
129.         """
130.         with connection.cursor() as cursor:
131.             return [
132.                 c['columns'][0]
133.                 for c in connection.introspection.get_constraints(cursor, table).values()
134.                 if c['index'] and len(c['columns']) == 1
135.             ]
136. 
137.     def get_uniques(self, table):
138.         with connection.cursor() as cursor:
139.             return [
140.                 c['columns'][0]
141.                 for c in connection.introspection.get_constraints(cursor, table).values()
142.                 if c['unique'] and len(c['columns']) == 1
143.             ]
144. 
145.     def get_constraints(self, table):
146.         """
147.         Get the constraints on a table using a new cursor.
148.         """
149.         with connection.cursor() as cursor:
150.             return connection.introspection.get_constraints(cursor, table)
151. 
152.     def get_constraints_for_column(self, model, column_name):
153.         constraints = self.get_constraints(model._meta.db_table)
154.         constraints_for_column = []
155.         for name, details in constraints.items():
156.             if details['columns'] == [column_name]:
157.                 constraints_for_column.append(name)
158.         return sorted(constraints_for_column)
159. 
160.     def check_added_field_default(self, schema_editor, model, field, field_name, expected_default,
161.                                   cast_function=None):
162.         with connection.cursor() as cursor:
163.             schema_editor.add_field(model, field)
164.             cursor.execute("SELECT {} FROM {};".format(field_name, model._meta.db_table))
165.             database_default = cursor.fetchall()[0][0]
166.             if cast_function and not type(database_default) == type(expected_default):
167.                 database_default = cast_function(database_default)
168.             self.assertEqual(database_default, expected_default)
169. 
170.     def get_constraints_count(self, table, column, fk_to):
171.         """
172.         Return a dict with keys 'fks', 'uniques, and 'indexes' indicating the
173.         number of foreign keys, unique constraints, and indexes on
174.         `table`.`column`. The `fk_to` argument is a 2-tuple specifying the
175.         expected foreign key relationship's (table, column).
176.         """
177.         with connection.cursor() as cursor:
178.             constraints = connection.introspection.get_constraints(cursor, table)
179.         counts = {'fks': 0, 'uniques': 0, 'indexes': 0}
180.         for c in constraints.values():
181.             if c['columns'] == [column]:
182.                 if c['foreign_key'] == fk_to:
183.                     counts['fks'] += 1
184.                 if c['unique']:
185.                     counts['uniques'] += 1
186.                 elif c['index']:
187.                     counts['indexes'] += 1
188.         return counts
189. 
190.     def assertIndexOrder(self, table, index, order):
191.         constraints = self.get_constraints(table)
192.         self.assertIn(index, constraints)
193.         index_orders = constraints[index]['orders']
194.         self.assertTrue(all(val == expected for val, expected in zip(index_orders, order)))
195. 
196.     def assertForeignKeyExists(self, model, column, expected_fk_table, field='id'):
197.         """
198.         Fail if the FK constraint on `model.Meta.db_table`.`column` to
199.         `expected_fk_table`.id doesn't exist.
200.         """
201.         constraints = self.get_constraints(model._meta.db_table)
202.         constraint_fk = None
203.         for details in constraints.values():
204.             if details['columns'] == [column] and details['foreign_key']:
205.                 constraint_fk = details['foreign_key']
206.                 break
207.         self.assertEqual(constraint_fk, (expected_fk_table, field))
208. 
209.     def assertForeignKeyNotExists(self, model, column, expected_fk_table):
210.         with self.assertRaises(AssertionError):
211.             self.assertForeignKeyExists(model, column, expected_fk_table)
212. 
213.     # Tests
214.     def test_creation_deletion(self):
215.         """
216.         Tries creating a model's table, and then deleting it.
217.         """
218.         with connection.schema_editor() as editor:
219.             # Create the table
220.             editor.create_model(Author)
221.             # The table is there
222.             list(Author.objects.all())
223.             # Clean up that table
224.             editor.delete_model(Author)
225.             # No deferred SQL should be left over.
226.             self.assertEqual(editor.deferred_sql, [])
227.         # The table is gone
228.         with self.assertRaises(DatabaseError):
229.             list(Author.objects.all())
230. 
231.     @skipUnlessDBFeature('supports_foreign_keys')
232.     def test_fk(self):
233.         "Creating tables out of FK order, then repointing, works"
234.         # Create the table
235.         with connection.schema_editor() as editor:
236.             editor.create_model(Book)
237.             editor.create_model(Author)
238.             editor.create_model(Tag)
239.         # Initial tables are there
240.         list(Author.objects.all())
241.         list(Book.objects.all())
242.         # Make sure the FK constraint is present
243.         with self.assertRaises(IntegrityError):
244.             Book.objects.create(
245.                 author_id=1,
246.                 title="Much Ado About Foreign Keys",
247.                 pub_date=datetime.datetime.now(),
248.             )
249.         # Repoint the FK constraint
250.         old_field = Book._meta.get_field("author")
251.         new_field = ForeignKey(Tag, CASCADE)
252.         new_field.set_attributes_from_name("author")
253.         with connection.schema_editor() as editor:
254.             editor.alter_field(Book, old_field, new_field, strict=True)
255.         self.assertForeignKeyExists(Book, 'author_id', 'schema_tag')
256. 
257.     @skipUnlessDBFeature('can_create_inline_fk')
258.     def test_inline_fk(self):
259.         # Create some tables.
260.         with connection.schema_editor() as editor:
261.             editor.create_model(Author)
262.             editor.create_model(Book)
263.             editor.create_model(Note)
264.         self.assertForeignKeyNotExists(Note, 'book_id', 'schema_book')
265.         # Add a foreign key from one to the other.
266.         with connection.schema_editor() as editor:
267.             new_field = ForeignKey(Book, CASCADE)
268.             new_field.set_attributes_from_name('book')
269.             editor.add_field(Note, new_field)
270.         self.assertForeignKeyExists(Note, 'book_id', 'schema_book')
271.         # Creating a FK field with a constraint uses a single statement without
272.         # a deferred ALTER TABLE.
273.         self.assertFalse([
274.             sql for sql in (str(statement) for statement in editor.deferred_sql)
275.             if sql.startswith('ALTER TABLE') and 'ADD CONSTRAINT' in sql
276.         ])
277. 
278.     @skipUnlessDBFeature('supports_foreign_keys')
279.     def test_char_field_with_db_index_to_fk(self):
280.         # Create the table
281.         with connection.schema_editor() as editor:
282.             editor.create_model(Author)
283.             editor.create_model(AuthorCharFieldWithIndex)
284.         # Change CharField to FK
285.         old_field = AuthorCharFieldWithIndex._meta.get_field('char_field')
286.         new_field = ForeignKey(Author, CASCADE, blank=True)
287.         new_field.set_attributes_from_name('char_field')
288.         with connection.schema_editor() as editor:
289.             editor.alter_field(AuthorCharFieldWithIndex, old_field, new_field, strict=True)
290.         self.assertForeignKeyExists(AuthorCharFieldWithIndex, 'char_field_id', 'schema_author')
291. 
292.     @skipUnlessDBFeature('supports_foreign_keys')
293.     @skipUnlessDBFeature('supports_index_on_text_field')
294.     def test_text_field_with_db_index_to_fk(self):
295.         # Create the table
296.         with connection.schema_editor() as editor:
297.             editor.create_model(Author)
298.             editor.create_model(AuthorTextFieldWithIndex)
299.         # Change TextField to FK
300.         old_field = AuthorTextFieldWithIndex._meta.get_field('text_field')
301.         new_field = ForeignKey(Author, CASCADE, blank=True)
302.         new_field.set_attributes_from_name('text_field')
303.         with connection.schema_editor() as editor:
304.             editor.alter_field(AuthorTextFieldWithIndex, old_field, new_field, strict=True)
305.         self.assertForeignKeyExists(AuthorTextFieldWithIndex, 'text_field_id', 'schema_author')
306. 
307.     @isolate_apps('schema')
308.     def test_char_field_pk_to_auto_field(self):
309.         class Foo(Model):
310.             id = CharField(max_length=255, primary_key=True)
311. 
312.             class Meta:
313.                 app_label = 'schema'
314. 
315.         with connection.schema_editor() as editor:
316.             editor.create_model(Foo)
317.         self.isolated_local_models = [Foo]
318.         old_field = Foo._meta.get_field('id')
319.         new_field = AutoField(primary_key=True)
320.         new_field.set_attributes_from_name('id')
321.         new_field.model = Foo
322.         with connection.schema_editor() as editor:
323.             editor.alter_field(Foo, old_field, new_field, strict=True)
324. 
325.     @skipUnlessDBFeature('supports_foreign_keys')
326.     def test_fk_to_proxy(self):
327.         "Creating a FK to a proxy model creates database constraints."
328.         class AuthorProxy(Author):
329.             class Meta:
330.                 app_label = 'schema'
331.                 apps = new_apps
332.                 proxy = True
333. 
334.         class AuthorRef(Model):
335.             author = ForeignKey(AuthorProxy, on_delete=CASCADE)
336. 
337.             class Meta:
338.                 app_label = 'schema'
339.                 apps = new_apps
340. 
341.         self.local_models = [AuthorProxy, AuthorRef]
342. 
343.         # Create the table
344.         with connection.schema_editor() as editor:
345.             editor.create_model(Author)
346.             editor.create_model(AuthorRef)
347.         self.assertForeignKeyExists(AuthorRef, 'author_id', 'schema_author')
348. 
349.     @skipUnlessDBFeature('supports_foreign_keys')
350.     def test_fk_db_constraint(self):
351.         "The db_constraint parameter is respected"
352.         # Create the table
353.         with connection.schema_editor() as editor:
354.             editor.create_model(Tag)
355.             editor.create_model(Author)
356.             editor.create_model(BookWeak)
357.         # Initial tables are there
358.         list(Author.objects.all())
359.         list(Tag.objects.all())
360.         list(BookWeak.objects.all())
361.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
362.         # Make a db_constraint=False FK
363.         new_field = ForeignKey(Tag, CASCADE, db_constraint=False)
364.         new_field.set_attributes_from_name("tag")
365.         with connection.schema_editor() as editor:
366.             editor.add_field(Author, new_field)
367.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
368.         # Alter to one with a constraint
369.         new_field2 = ForeignKey(Tag, CASCADE)
370.         new_field2.set_attributes_from_name("tag")
371.         with connection.schema_editor() as editor:
372.             editor.alter_field(Author, new_field, new_field2, strict=True)
373.         self.assertForeignKeyExists(Author, 'tag_id', 'schema_tag')
374.         # Alter to one without a constraint again
375.         new_field2 = ForeignKey(Tag, CASCADE)
376.         new_field2.set_attributes_from_name("tag")
377.         with connection.schema_editor() as editor:
378.             editor.alter_field(Author, new_field2, new_field, strict=True)
379.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
380. 
381.     @isolate_apps('schema')
382.     def test_no_db_constraint_added_during_primary_key_change(self):
383.         """
384.         When a primary key that's pointed to by a ForeignKey with
385.         db_constraint=False is altered, a foreign key constraint isn't added.
386.         """
387.         class Author(Model):
388.             class Meta:
389.                 app_label = 'schema'
390. 
391.         class BookWeak(Model):
392.             author = ForeignKey(Author, CASCADE, db_constraint=False)
393. 
394.             class Meta:
395.                 app_label = 'schema'
396. 
397.         with connection.schema_editor() as editor:
398.             editor.create_model(Author)
399.             editor.create_model(BookWeak)
400.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
401.         old_field = Author._meta.get_field('id')
402.         new_field = BigAutoField(primary_key=True)
403.         new_field.model = Author
404.         new_field.set_attributes_from_name('id')
405.         # @isolate_apps() and inner models are needed to have the model
406.         # relations populated, otherwise this doesn't act as a regression test.
407.         self.assertEqual(len(new_field.model._meta.related_objects), 1)
408.         with connection.schema_editor() as editor:
409.             editor.alter_field(Author, old_field, new_field, strict=True)
410.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
411. 
412.     def _test_m2m_db_constraint(self, M2MFieldClass):
413.         class LocalAuthorWithM2M(Model):
414.             name = CharField(max_length=255)
415. 
416.             class Meta:
417.                 app_label = 'schema'
418.                 apps = new_apps
419. 
420.         self.local_models = [LocalAuthorWithM2M]
421. 
422.         # Create the table
423.         with connection.schema_editor() as editor:
424.             editor.create_model(Tag)
425.             editor.create_model(LocalAuthorWithM2M)
426.         # Initial tables are there
427.         list(LocalAuthorWithM2M.objects.all())
428.         list(Tag.objects.all())
429.         # Make a db_constraint=False FK
430.         new_field = M2MFieldClass(Tag, related_name="authors", db_constraint=False)
431.         new_field.contribute_to_class(LocalAuthorWithM2M, "tags")
432.         # Add the field
433.         with connection.schema_editor() as editor:
434.             editor.add_field(LocalAuthorWithM2M, new_field)
435.         self.assertForeignKeyNotExists(new_field.remote_field.through, 'tag_id', 'schema_tag')
436. 
437.     @skipUnlessDBFeature('supports_foreign_keys')
438.     def test_m2m_db_constraint(self):
439.         self._test_m2m_db_constraint(ManyToManyField)
440. 
441.     @skipUnlessDBFeature('supports_foreign_keys')
442.     def test_m2m_db_constraint_custom(self):
443.         self._test_m2m_db_constraint(CustomManyToManyField)
444. 
445.     @skipUnlessDBFeature('supports_foreign_keys')
446.     def test_m2m_db_constraint_inherited(self):
447.         self._test_m2m_db_constraint(InheritedManyToManyField)
448. 
449.     def test_add_field(self):
450.         """
451.         Tests adding fields to models
452.         """
453.         # Create the table
454.         with connection.schema_editor() as editor:
455.             editor.create_model(Author)
456.         # Ensure there's no age field
457.         columns = self.column_classes(Author)
458.         self.assertNotIn("age", columns)
459.         # Add the new field
460.         new_field = IntegerField(null=True)
461.         new_field.set_attributes_from_name("age")
462.         with CaptureQueriesContext(connection) as ctx, connection.schema_editor() as editor:
463.             editor.add_field(Author, new_field)
464.         drop_default_sql = editor.sql_alter_column_no_default % {
465.             'column': editor.quote_name(new_field.name),
466.         }
467.         self.assertFalse(any(drop_default_sql in query['sql'] for query in ctx.captured_queries))
468.         # Ensure the field is right afterwards
469.         columns = self.column_classes(Author)
470.         self.assertEqual(columns['age'][0], "IntegerField")
471.         self.assertTrue(columns['age'][1][6])
472. 
473.     def test_add_field_remove_field(self):
474.         """
475.         Adding a field and removing it removes all deferred sql referring to it.
476.         """
477.         with connection.schema_editor() as editor:
478.             # Create a table with a unique constraint on the slug field.
479.             editor.create_model(Tag)
480.             # Remove the slug column.
481.             editor.remove_field(Tag, Tag._meta.get_field('slug'))
482.         self.assertEqual(editor.deferred_sql, [])
483. 
484.     def test_add_field_temp_default(self):
485.         """
486.         Tests adding fields to models with a temporary default
487.         """
488.         # Create the table
489.         with connection.schema_editor() as editor:
490.             editor.create_model(Author)
491.         # Ensure there's no age field
492.         columns = self.column_classes(Author)
493.         self.assertNotIn("age", columns)
494.         # Add some rows of data
495.         Author.objects.create(name="Andrew", height=30)
496.         Author.objects.create(name="Andrea")
497.         # Add a not-null field
498.         new_field = CharField(max_length=30, default="Godwin")
499.         new_field.set_attributes_from_name("surname")
500.         with connection.schema_editor() as editor:

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 06:37:42,128 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants test cases for a bug in `CREATE INDEX` SQL generation. The bug has two parts: incorrect whitespace with `DESC` ordering, and incorrect whitespace with `opclasses`. The current context is insufficient to find appropriate tests. The provided `tests/schema/tests.py` is truncated, hiding likely tests for `DESC` ordering. The provided `tests/postgres_tests/test_indexes.py` does not contain any tests that use `opclasses`. Therefore, I need more context from other test files to find examples for both scenarios.' query='Please provide the full content of `tests/postgres_tests/test_operations.py` and any test methods from `tests/schema/tests.py` that use the `assertIndexOrder` helper function.' extra_requirements="For `tests/schema/tests.py`, if finding usages of `assertIndexOrder` is not possible, please provide any test that creates an index with a descending field, like `Index(fields=['-foo'])`." purpose='This will provide test cases for `opclasses` (from `test_operations.py`) and for descending indexes (from `schema/tests.py`), which are the two key parts of the bug report, allowing me to select three relevant examples.'
2025-12-21 06:37:42,129 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/postgres_tests/test_operations.py` and any test methods from `tests/schema/tests.py` that use the `assertIndexOrder` helper function.
2025-12-21 06:37:42,129 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 06:37:42,129 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 06:37:42,130 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 06:37:42,130 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/postgres_tests/test_operations.py` and any test methods from `tests/schema/tests.py` that use the `assertIndexOrder` helper function.
Extra requirements: For `tests/schema/tests.py`, if finding usages of `assertIndexOrder` is not possible, please provide any test that creates an index with a descending field, like `Index(fields=['-foo'])`.
Purpose: This will provide test cases for `opclasses` (from `test_operations.py`) and for descending indexes (from `schema/tests.py`), which are the two key parts of the bug report, allowing me to select three relevant examples.
2025-12-21 06:37:45,037 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have located the `tests/postgres_tests/test_operations.py` file and will now retrieve its full content. Following that, I will search for the `assertIndexOrder` helper function within `tests/schema/tests.py` to identify relevant test methods. If that search is unsuccessful, I will look for any tests in the same file that create a descending index.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/postgres_tests/test_operations.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2201, 'candidates_token_count': 104, 'total_token_count': 2447, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2201}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 104}], 'thoughts_token_count': 142, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.14431671912853533, 'model_name': 'gemini-2.5-pro'} id='run--001cfc74-2310-4e6e-8910-4dd6938f5b96-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/postgres_tests/test_operations.py'}, 'id': '1f2590ea-b89f-4b62-9d22-675fde90f052', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2201, 'output_tokens': 104, 'total_tokens': 2447, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 142}}
2025-12-21 06:44:53,966 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "assertIndexOrder", "basename": "tests.py"}'}, '__gemini_function_call_thought_signatures__': {'89f6e946-b660-4070-88d3-96179e4a87ea': 'CrMDAY89a19nU6k87xahOxuitylEoiQ4bd7byEr4ZDCEPqeCa//hYk8O4L+aGA1ZM2yPsop1aulI85QHFMDTWM561pzCCV4T7DDQ9Ds/e8GsIHUHlgvtOj8y82jzG7kQpNDdsCbaBMtmXq+pBxJBZ/yF5/2wkq4s7SRhXgDnHNvC23AS3jiNqIGto9D1IyzzxLPitc6J0XYllltTZW+oVs6btfna/gLgtLs5fxuS7JDIzGgHzaYaZ0Y3nDHexXOOIcbt2Do4uglBg6JxxQtc8BFytzvaKhYoMP+EpDHmGMMa1wWkTuVtTk/ApSrsIfKCBZ+iG/qc0UWnk1AGASHT2UmvlG90NkYzPTGVNaBnC6oLRRodiWGtysHXY5hkTgW8KgslA+PDjd5XsxesjPIcpY4j4W4E01/iCfKLHuEtpqq5OYEClTcbc0GTG/wQ0dnJJUgjmlrv3huigS8d7ALB/HX4BD211yP/R0BDmD+6FGbdpG8DsN4s+hwicqKE7HoRBjQBZjk/kiAbYKRdDvgfah9XM5mYN7uC09HJu/8k7csrZ5NDkVmlcMX+RwnLZzW++LtujqZl'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 4781, 'candidates_token_count': 25, 'total_token_count': 67449, 'cached_content_token_count': 1691, 'prompt_tokens_details': [{'modality': 1, 'token_count': 4781}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1691}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 25}], 'thoughts_token_count': 62643}, 'finish_reason': 'STOP', 'avg_logprobs': -3.979675598144531, 'model_name': 'gemini-2.5-pro'} id='run--79ba3dd3-bfdc-4c99-9d91-4c0ffdd65705-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'assertIndexOrder', 'basename': 'tests.py'}, 'id': '89f6e946-b660-4070-88d3-96179e4a87ea', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4781, 'output_tokens': 25, 'total_tokens': 67449, 'input_token_details': {'cache_read': 1691}, 'output_token_details': {'reasoning': 62643}}
2025-12-21 06:44:57,595 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "self.assertIndexOrder", "basename": "tests.py"}'}, '__gemini_function_call_thought_signatures__': {'4633d67a-8a66-4aa7-8e61-fd990786a99d': 'CvIEAY89a19rcS20rmotHuv9cxvqJzWUDd2J8o9krH9BKX/VDnJ8eK52zzQLnpFCBMCProCTyqKTnPbEMBcc+Qde+qXZ9pnBfBGwxUmG7EJj4UdWjY2oryYhYGnXoDkWIOCcnSM7eBV6pLkiKFtqi/8FsS06PiSZp39s55zd8+ma5WKfQWPH6bMhtCTjpEIf6APpwjTJEqsJ0l3vQkZ6QWc/4KVH7Q1z4EMWzTm39kFZvtCjhWeJaj0hwcUivIP+D3CyqwMaFmTxlStCLNBCPBeVY1fSzzHr09IvUQw2xfe7tc9xiI7RX5TzxG9ZNLzXcSQTG8DKOFEP7bGFS9Nhe8rNu08NF+XnS/s5+FbsGiI67zNE4Tn5P09DvvVFXn7G6DLf+x+RiP9q00VIzGuqAWYv7eCeqydDkzMbj28IWcWdGXOffL3R88MR5zsZpnRiHst84lUe3r+an3ES4rroq1oNSdey3gz8L3xfT2qb7YJQvNuTZmO8Cf514lWkm+T04gYB+NghHYUcFLw3t4nPERwrTly3PFjciLT43SorFH6xvo1AU3PkxjDMzfWvu5jCYqtcx0Uzk9HWmB8+xqQquFmJ4mmF9x6OwBrfwvMGxSQj1r5+aqFcMPul8r5Q3UzyLCgipMVSWGN+DWpZ9vceTdpX3NMcB2PvD3huJIRCJI7LYMFvFmXqGfNl6oeax+SzQvPGSykx8XM9KhMKY38nUb1e1kxRwTiCm7IH49Uty+R7DwkbuYnUWt62UagNaDSOODrixvsKFc2RFZN/Q9/g9jmaPq/2djnSlgSBiop1hh/MN2OL1knuAT7CmVzws3yZF0/4wHo='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 161, 'end_index': 421, 'uri': 'https://github.com/Yoann-Vie/esgi-hearthstone', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 44935, 'candidates_token_count': 27, 'total_token_count': 45111, 'prompt_tokens_details': [{'modality': 1, 'token_count': 45032}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 149, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.35713559609872325, 'model_name': 'gemini-2.5-pro'} id='run--1f437293-cec4-4c97-9eac-10fe999296de-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'self.assertIndexOrder', 'basename': 'tests.py'}, 'id': '4633d67a-8a66-4aa7-8e61-fd990786a99d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 44935, 'output_tokens': 27, 'total_tokens': 45111, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 149}}
2025-12-21 06:45:02,575 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/schema/tests.py", "end_line": 2412.0, "start_line": 2394.0}'}, '__gemini_function_call_thought_signatures__': {'c1f844f3-6c7e-4e43-aac7-cbe2e009f363': 'CuYIAY89a1+Xq8/EPfe3auhM0Xumb+Vel83SKxRjTDRyTExtiziQndI6sNCSl4Nh+W6rukx4YjQ8A+nsLToSega8Z6PX9bwkKgPP0ftZAEUmkE0M0b/EEmxxz6VL51N7mBkOS/Rcg0rZwh2KiC3odKO+g5b73eS5xnc28pAJ8vfpHigEbu3NjCCjzgQFjhS0Ptpq0eZZbxcG1YkDvTMrG9cai8rLKYu+VkAVIoZlPcEAV7SHw3gQL1v9ABHv6D0aFpNFUj0tXGGStZOyH9rwYAWJ2EKSY6Fgo9hoW7iPc/uaMHip8aUrUYRk99sf3CuewGcNh/sEklvIye7WoYfQ2SejO2+zB+INOY7TN2YkSvUu7R2q9jdZ+IRPRiW80iG9IFQAmF22Hrm3rZrQF0nc5UoJyrDiOfC+wed2AlZj3Go7YH4wNFMFsxcYLhUl4qiQ3IcDwjQUPK9D6/44WD80nl6XTE79LPHGY0Iml8FZGfMU5EgLiH0VtcvaSpSFbqI4GLJ1uZogGyI1IPWnHLJx40lU+FQrbuqkx3CcoylSWkXPtnnS5N5WE5H0vKzGWTtCTRrkoAM/Rd1uOEZzDXpxKT/KG9CthuFCSjifLdMe0AGJFBGWcShvn4Rp1QaZMeOEwFGtF+IxfSxdGF+2b8o7hXkPzrFroQpvn10J1aMsWtHEazd7OlYf1DVoNCE38ebcA2hMQlyJwMflQTAIsX2ZrXGJxUsN9MmeWOxsa7IhHYq5/8cSBsSTK+9N751lKc7V2xg1f48IOZyfe/E9TqlFkj7XmQgh3PrQnzCo/UAWmwdAjLz3Fniz/0mX2jlSi+xBM0WTNkSuZ2DtOR3vB6HGyblyNltzQ3r6gB5rQcDCND3p/Drm9ye2L8FMFZVMoyjGc1boi48jMG1S1SywmiCR0DQMAwPSXxLf9xMOr9bB+bLWo+DXI7g0wWp9rqWNS2sRtIOz2uA8ADEvktL/mKG777g9bEzOYeKVj0V33F1Gg6LPMxpRyACf/UqIfqgHWUuQMSFJ7M/L5jvDg13iB2kg6fkZ5+qMmeNYdaOA0NLRkJEhNn7EKnMoQ7aT03R9f23cszdzDAwUIIFWaK+MRAd2HZbHA811ag0M38xwHtUZtJ1T9UO/2bdITzNIMe/rkMu0rdx9aCLGXnBNcrheYXVNHrdBjh7+AK2CPYnx6WU8Myk7RfSdNkSm8HeYXxGprex7hotDvdCyCkoS/7XdkEvyfhtdmgsYHaqG0O3/5WRIzP3HyVFvjV7NLJiJmIQg/+Zwg96ZdaAiaMvwp66mQx03onXjw1A/TNWBpY+rXUrULXmqoKzPdWR60J83EjW4G+0K1Wnf38NrbG5A27wrDuJ9uoc2hBQ2A9Ze9nJ/McF7LXR0uAJT1jSoOAOu/HYfLFvzmz2HCEzPzz7CPNZNr0VN3i+2pg8mm1FILXBw5aoTR8zSw4Nb3+EC1SRKAuK/zDQjp+5jUPWI01SRvhqNQVtHHkn0tiCsRQBj6A=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 138, 'end_index': 696, 'uri': 'https://github.com/Yoann-Vie/esgi-hearthstone', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 85091, 'candidates_token_count': 27, 'total_token_count': 85425, 'prompt_tokens_details': [{'modality': 1, 'token_count': 85337}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 307, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4605446215029116, 'model_name': 'gemini-2.5-pro'} id='run--bc6210dd-8ea4-48ed-8655-e32be6a32f53-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/schema/tests.py', 'end_line': 2412.0, 'start_line': 2394.0}, 'id': 'c1f844f3-6c7e-4e43-aac7-cbe2e009f363', 'type': 'tool_call'}] usage_metadata={'input_tokens': 85091, 'output_tokens': 27, 'total_tokens': 85425, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 307}}
2025-12-21 06:45:04,988 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/schema/tests.py", "end_line": 2393.0, "start_line": 2378.0}'}, '__gemini_function_call_thought_signatures__': {'e963d85d-7511-4113-9295-481abb779446': 'CowCAY89a18LeCrU54fXGJs/Ebem2qe/UmxINuyqS9cX+HhYkZpz5dA5ZPgxeEotCrMxvifss7pqg6qDyzUYKMQIgrAblT3G4oodsLq6fJFRa4SwmXcIIWoyAkk05MrRvTPttvRsFVoPhdkfCfMu3Oh5FLW/vH+ENFBtnyGpVvsHWSYqqzAZVbZ5lioHY0RI0xCXbOV/mncJsJcB5fpfYRYg1P0OUdtN75gd7NZR6Ii7YZssH2eBD90CTF8glvJu1YHV1RJSXscRtXmzTaXp8GN+ar/EyamJ4aB6EO5F4/vtOTDYjKXqYK7fpyFbuwOtXtrexg0Cm9bWJ3wckRSrNXG8KGLWiWkTcB+1gVd8Uw=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 85531, 'candidates_token_count': 27, 'total_token_count': 85621, 'cached_content_token_count': 82456, 'prompt_tokens_details': [{'modality': 1, 'token_count': 86084}], 'cache_tokens_details': [{'modality': 1, 'token_count': 82456}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 63}, 'finish_reason': 'STOP', 'avg_logprobs': -0.34197125611481843, 'model_name': 'gemini-2.5-pro'} id='run--cbce5637-3e1c-4641-a0c4-3804a85e4792-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/schema/tests.py', 'end_line': 2393.0, 'start_line': 2378.0}, 'id': 'e963d85d-7511-4113-9295-481abb779446', 'type': 'tool_call'}] usage_metadata={'input_tokens': 85531, 'output_tokens': 27, 'total_tokens': 85621, 'input_token_details': {'cache_read': 82456}, 'output_token_details': {'reasoning': 63}}
2025-12-21 06:45:07,530 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/schema/tests.py", "start_line": 2329.0, "end_line": 2345.0}'}, '__gemini_function_call_thought_signatures__': {'16960cac-3ebf-4841-8efc-e065c28c3e14': 'CrkCAY89a185xvtgHLCR5NdPZ9L6NyoonQSYa9yXzUArBU9XC0O7twj9zr+b+kZLw+gFY2LJ2Il4Mw1sSPD6wpexWpAhAHqJoZdfc8/zhIsbS43LbUO7QB6KgZWUcImVSaiFfp+EuO2CB2YYPBaDspx8dKwUs+Xy33cV7qyapG/GymXKhcRNBwbxEFguOgwby63vgSW29BvwTPz+nDErI1lWjLVbItUUIMaFq7rPxSRcNsrzQydKeUp3Q9s4NTfp9YBiXk7i6vY484KmbOKX4ASgFHHhQqnVnGnuY0zY1nmbrxPu48v21Js0pSknTRifBMMNcQ9q9LwjLg8N3s4d8cNpMc7nCRubrZRd2/3hpIOR9S1qilbFm1NFyd48+mEFb2Rfz66+mK6tJVhCVi6bQ22hU7Iq9m0b2Po73g=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 85942, 'candidates_token_count': 27, 'total_token_count': 86048, 'cached_content_token_count': 82420, 'prompt_tokens_details': [{'modality': 1, 'token_count': 86558}], 'cache_tokens_details': [{'modality': 1, 'token_count': 82420}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 79}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21212295249656396, 'model_name': 'gemini-2.5-pro'} id='run--510366fe-99ae-4206-94ba-dcd6e68a1dda-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/schema/tests.py', 'start_line': 2329.0, 'end_line': 2345.0}, 'id': '16960cac-3ebf-4841-8efc-e065c28c3e14', 'type': 'tool_call'}] usage_metadata={'input_tokens': 85942, 'output_tokens': 27, 'total_tokens': 86048, 'input_token_details': {'cache_read': 82420}, 'output_token_details': {'reasoning': 79}}
2025-12-21 06:45:10,368 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/schema/tests.py", "start_line": 45.0, "end_line": 3117.0}'}, '__gemini_function_call_thought_signatures__': {'05d040cf-4517-49c4-90c5-5a236338a6dd': 'CoMDAY89a1+G/exix5wvJeWtdPX8ZIX+CC+qUAxWo+uPr0JDbGvnPuxMg8jRKf13wZDsTEFngqDTgJrmjvhuSgZ3VeJ0TgeE/d37OOfW9x2TB9uiEb7+VXf2O44oU/ngM/29jhGcDo/iumeSoYcOfZCWBmcJs44k7DaOlKNkwJD6yb/FCLfgVkeuUliDFBzQ8wAYryv1fvrvRN48ZPg7ZPs0NmPPdsmb79dVera6L9ICIkOtYjmDmY1oGgqDOgOpDqUSU+4XW/VoSAhQcjkCGfnT48gY6N1r2KM7fUVILBIxVcIC0Q4JVYxsqjaK5Cay8Wi5LG1QHhlqgSnYYRqBotKPeimOBr2dNOmMB0X0/dAWuGBy7wIQjbuyRRFZPLSWRQBes8mHPPKSOpyn8nKCKj2zO9fpuvSXxOs7VOnFWcdefK90/rRl3tdLh59GSIBaeAkSzmHRmacnmizSIJhDAU+kvhFpyDDnQe1gWPzV4OdZJcEWLfxUGZUSFf/CQSOZEDStLMtG'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 86313, 'candidates_token_count': 27, 'total_token_count': 86429, 'cached_content_token_count': 86301, 'prompt_tokens_details': [{'modality': 1, 'token_count': 87008}], 'cache_tokens_details': [{'modality': 1, 'token_count': 86301}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 89}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3731372621324327, 'model_name': 'gemini-2.5-pro'} id='run--16ff1489-5b0a-41e4-a44a-9ecb21b2739a-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/schema/tests.py', 'start_line': 45.0, 'end_line': 3117.0}, 'id': '05d040cf-4517-49c4-90c5-5a236338a6dd', 'type': 'tool_call'}] usage_metadata={'input_tokens': 86313, 'output_tokens': 27, 'total_tokens': 86429, 'input_token_details': {'cache_read': 86301}, 'output_token_details': {'reasoning': 89}}
2025-12-21 06:45:15,260 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the required information. I have provided the full content of `tests/postgres_tests/test_operations.py` and the `test_order_index` method from `tests/schema/tests.py`, which uses the `assertIndexOrder` helper function and creates an index with a descending field. This should provide the necessary context for the user to select relevant test cases.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 171, 'end_index': 729, 'uri': 'https://github.com/Yoann-Vie/esgi-hearthstone', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 140789, 'candidates_token_count': 82, 'total_token_count': 141150, 'cached_content_token_count': 86938, 'prompt_tokens_details': [{'modality': 1, 'token_count': 141573}], 'cache_tokens_details': [{'modality': 1, 'token_count': 86938}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 82}], 'thoughts_token_count': 279}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16450001553791324, 'model_name': 'gemini-2.5-pro'} id='run--95569601-cc67-4cb5-a359-6a2f3bb6da25-0' usage_metadata={'input_tokens': 140789, 'output_tokens': 82, 'total_tokens': 141150, 'input_token_details': {'cache_read': 86938}, 'output_token_details': {'reasoning': 279}}
2025-12-21 06:45:15,263 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/postgres_tests/test_operations.py` and any test methods from `tests/schema/tests.py` that use the `assertIndexOrder` helper function.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
For `tests/schema/tests.py`, if finding usages of `assertIndexOrder` is not possible, please provide any test that creates an index with a descending field, like `Index(fields=['-foo'])`.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This will provide test cases for `opclasses` (from `test_operations.py`) and for descending indexes (from `schema/tests.py`), which are the two key parts of the bug report, allowing me to select three relevant examples.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/postgres_tests/test_operations.py
Line number range: 1 - 144
Content:
1. import unittest
2. 
3. from migrations.test_base import OperationTestBase
4. 
5. from django.db import connection, models
6. from django.db.models import Index
7. from django.db.utils import NotSupportedError
8. from django.test import modify_settings
9. 
10. try:
11.     from django.contrib.postgres.operations import (
12.         AddIndexConcurrently, RemoveIndexConcurrently,
13.     )
14.     from django.contrib.postgres.indexes import BrinIndex, BTreeIndex
15. except ImportError:
16.     pass
17. 
18. 
19. @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific tests.')
20. @modify_settings(INSTALLED_APPS={'append': 'migrations'})
21. class AddIndexConcurrentlyTests(OperationTestBase):
22.     app_label = 'test_add_concurrently'
23. 
24.     def test_requires_atomic_false(self):
25.         project_state = self.set_up_test_model(self.app_label)
26.         new_state = project_state.clone()
27.         operation = AddIndexConcurrently(
28.             'Pony',
29.             models.Index(fields=['pink'], name='pony_pink_idx'),
30.         )
31.         msg = (
32.             'The AddIndexConcurrently operation cannot be executed inside '
33.             'a transaction (set atomic = False on the migration).'
34.         )
35.         with self.assertRaisesMessage(NotSupportedError, msg):
36.             with connection.schema_editor(atomic=True) as editor:
37.                 operation.database_forwards(self.app_label, editor, project_state, new_state)
38. 
39.     def test_add(self):
40.         project_state = self.set_up_test_model(self.app_label, index=False)
41.         table_name = '%s_pony' % self.app_label
42.         index = Index(fields=['pink'], name='pony_pink_idx')
43.         new_state = project_state.clone()
44.         operation = AddIndexConcurrently('Pony', index)
45.         self.assertEqual(
46.             operation.describe(),
47.             'Concurrently create index pony_pink_idx on field(s) pink of '
48.             'model Pony'
49.         )
50.         operation.state_forwards(self.app_label, new_state)
51.         self.assertEqual(len(new_state.models[self.app_label, 'pony'].options['indexes']), 1)
52.         self.assertIndexNotExists(table_name, ['pink'])
53.         # Add index.
54.         with connection.schema_editor(atomic=False) as editor:
55.             operation.database_forwards(self.app_label, editor, project_state, new_state)
56.         self.assertIndexExists(table_name, ['pink'])
57.         # Reversal.
58.         with connection.schema_editor(atomic=False) as editor:
59.             operation.database_backwards(self.app_label, editor, new_state, project_state)
60.         self.assertIndexNotExists(table_name, ['pink'])
61.         # Deconstruction.
62.         name, args, kwargs = operation.deconstruct()
63.         self.assertEqual(name, 'AddIndexConcurrently')
64.         self.assertEqual(args, [])
65.         self.assertEqual(kwargs, {'model_name': 'Pony', 'index': index})
66. 
67.     def test_add_other_index_type(self):
68.         project_state = self.set_up_test_model(self.app_label, index=False)
69.         table_name = '%s_pony' % self.app_label
70.         new_state = project_state.clone()
71.         operation = AddIndexConcurrently(
72.             'Pony',
73.             BrinIndex(fields=['pink'], name='pony_pink_brin_idx'),
74.         )
75.         self.assertIndexNotExists(table_name, ['pink'])
76.         # Add index.
77.         with connection.schema_editor(atomic=False) as editor:
78.             operation.database_forwards(self.app_label, editor, project_state, new_state)
79.         self.assertIndexExists(table_name, ['pink'], index_type='brin')
80.         # Reversal.
81.         with connection.schema_editor(atomic=False) as editor:
82.             operation.database_backwards(self.app_label, editor, new_state, project_state)
83.         self.assertIndexNotExists(table_name, ['pink'])
84. 
85.     def test_add_with_options(self):
86.         project_state = self.set_up_test_model(self.app_label, index=False)
87.         table_name = '%s_pony' % self.app_label
88.         new_state = project_state.clone()
89.         index = BTreeIndex(fields=['pink'], name='pony_pink_btree_idx', fillfactor=70)
90.         operation = AddIndexConcurrently('Pony', index)
91.         self.assertIndexNotExists(table_name, ['pink'])
92.         # Add index.
93.         with connection.schema_editor(atomic=False) as editor:
94.             operation.database_forwards(self.app_label, editor, project_state, new_state)
95.         self.assertIndexExists(table_name, ['pink'], index_type='btree')
96.         # Reversal.
97.         with connection.schema_editor(atomic=False) as editor:
98.             operation.database_backwards(self.app_label, editor, new_state, project_state)
99.         self.assertIndexNotExists(table_name, ['pink'])
100. 
101. 
102. @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific tests.')
103. @modify_settings(INSTALLED_APPS={'append': 'migrations'})
104. class RemoveIndexConcurrentlyTests(OperationTestBase):
105.     app_label = 'test_rm_concurrently'
106. 
107.     def test_requires_atomic_false(self):
108.         project_state = self.set_up_test_model(self.app_label, index=True)
109.         new_state = project_state.clone()
110.         operation = RemoveIndexConcurrently('Pony', 'pony_pink_idx')
111.         msg = (
112.             'The RemoveIndexConcurrently operation cannot be executed inside '
113.             'a transaction (set atomic = False on the migration).'
114.         )
115.         with self.assertRaisesMessage(NotSupportedError, msg):
116.             with connection.schema_editor(atomic=True) as editor:
117.                 operation.database_forwards(self.app_label, editor, project_state, new_state)
118. 
119.     def test_remove(self):
120.         project_state = self.set_up_test_model(self.app_label, index=True)
121.         table_name = '%s_pony' % self.app_label
122.         self.assertTableExists(table_name)
123.         new_state = project_state.clone()
124.         operation = RemoveIndexConcurrently('Pony', 'pony_pink_idx')
125.         self.assertEqual(
126.             operation.describe(),
127.             'Concurrently remove index pony_pink_idx from Pony',
128.         )
129.         operation.state_forwards(self.app_label, new_state)
130.         self.assertEqual(len(new_state.models[self.app_label, 'pony'].options['indexes']), 0)
131.         self.assertIndexExists(table_name, ['pink'])
132.         # Remove index.
133.         with connection.schema_editor(atomic=False) as editor:
134.             operation.database_forwards(self.app_label, editor, project_state, new_state)
135.         self.assertIndexNotExists(table_name, ['pink'])
136.         # Reversal.
137.         with connection.schema_editor(atomic=False) as editor:
138.             operation.database_backwards(self.app_label, editor, new_state, project_state)
139.         self.assertIndexExists(table_name, ['pink'])
140.         # Deconstruction.
141.         name, args, kwargs = operation.deconstruct()
142.         self.assertEqual(name, 'RemoveIndexConcurrently')
143.         self.assertEqual(args, [])
144.         self.assertEqual(kwargs, {'model_name': 'Pony', 'name': 'pony_pink_idx'})


File: tests/schema/tests.py
Line number range: 45 - 3117
Content:
45. class SchemaTests(TransactionTestCase):
46.     """
47.     Tests for the schema-alteration code.
48. 
49.     Be aware that these tests are more liable than most to false results,
50.     as sometimes the code to check if a test has worked is almost as complex
51.     as the code it is testing.
52.     """
53. 
54.     available_apps = []
55. 
56.     models = [
57.         Author, AuthorCharFieldWithIndex, AuthorTextFieldWithIndex,
58.         AuthorWithDefaultHeight, AuthorWithEvenLongerName, Book, BookWeak,
59.         BookWithLongName, BookWithO2O, BookWithSlug, IntegerPK, Node, Note,
60.         Tag, TagIndexed, TagM2MTest, TagUniqueRename, Thing, UniqueTest,
61.     ]
62. 
63.     # Utility functions
64. 
65.     def setUp(self):
66.         # local_models should contain test dependent model classes that will be
67.         # automatically removed from the app cache on test tear down.
68.         self.local_models = []
69.         # isolated_local_models contains models that are in test methods
70.         # decorated with @isolate_apps.
71.         self.isolated_local_models = []
72. 
73.     def tearDown(self):
74.         # Delete any tables made for our models
75.         self.delete_tables()
76.         new_apps.clear_cache()
77.         for model in new_apps.get_models():
78.             model._meta._expire_cache()
79.         if 'schema' in new_apps.all_models:
80.             for model in self.local_models:
81.                 for many_to_many in model._meta.many_to_many:
82.                     through = many_to_many.remote_field.through
83.                     if through and through._meta.auto_created:
84.                         del new_apps.all_models['schema'][through._meta.model_name]
85.                 del new_apps.all_models['schema'][model._meta.model_name]
86.         if self.isolated_local_models:
87.             with connection.schema_editor() as editor:
88.                 for model in self.isolated_local_models:
89.                     editor.delete_model(model)
90. 
91.     def delete_tables(self):
92.         "Deletes all model tables for our models for a clean test environment"
93.         converter = connection.introspection.identifier_converter
94.         with connection.schema_editor() as editor:
95.             connection.disable_constraint_checking()
96.             table_names = connection.introspection.table_names()
97.             for model in itertools.chain(SchemaTests.models, self.local_models):
98.                 tbl = converter(model._meta.db_table)
99.                 if tbl in table_names:
100.                     editor.delete_model(model)
101.                     table_names.remove(tbl)
102.             connection.enable_constraint_checking()
103. 
104.     def column_classes(self, model):
105.         with connection.cursor() as cursor:
106.             columns = {
107.                 d[0]: (connection.introspection.get_field_type(d[1], d), d)
108.                 for d in connection.introspection.get_table_description(
109.                     cursor,
110.                     model._meta.db_table,
111.                 )
112.             }
113.         # SQLite has a different format for field_type
114.         for name, (type, desc) in columns.items():
115.             if isinstance(type, tuple):
116.                 columns[name] = (type[0], desc)
117.         # SQLite also doesn't error properly
118.         if not columns:
119.             raise DatabaseError("Table does not exist (empty pragma)")
120.         return columns
121. 
122.     def get_primary_key(self, table):
123.         with connection.cursor() as cursor:
124.             return connection.introspection.get_primary_key_column(cursor, table)
125. 
126.     def get_indexes(self, table):
127.         """
128.         Get the indexes on the table using a new cursor.
129.         """
130.         with connection.cursor() as cursor:
131.             return [
132.                 c['columns'][0]
133.                 for c in connection.introspection.get_constraints(cursor, table).values()
134.                 if c['index'] and len(c['columns']) == 1
135.             ]
136. 
137.     def get_uniques(self, table):
138.         with connection.cursor() as cursor:
139.             return [
140.                 c['columns'][0]
141.                 for c in connection.introspection.get_constraints(cursor, table).values()
142.                 if c['unique'] and len(c['columns']) == 1
143.             ]
144. 
145.     def get_constraints(self, table):
146.         """
147.         Get the constraints on a table using a new cursor.
148.         """
149.         with connection.cursor() as cursor:
150.             return connection.introspection.get_constraints(cursor, table)
151. 
152.     def get_constraints_for_column(self, model, column_name):
153.         constraints = self.get_constraints(model._meta.db_table)
154.         constraints_for_column = []
155.         for name, details in constraints.items():
156.             if details['columns'] == [column_name]:
157.                 constraints_for_column.append(name)
158.         return sorted(constraints_for_column)
159. 
160.     def check_added_field_default(self, schema_editor, model, field, field_name, expected_default,
161.                                   cast_function=None):
162.         with connection.cursor() as cursor:
163.             schema_editor.add_field(model, field)
164.             cursor.execute("SELECT {} FROM {};".format(field_name, model._meta.db_table))
165.             database_default = cursor.fetchall()[0][0]
166.             if cast_function and not type(database_default) == type(expected_default):
167.                 database_default = cast_function(database_default)
168.             self.assertEqual(database_default, expected_default)
169. 
170.     def get_constraints_count(self, table, column, fk_to):
171.         """
172.         Return a dict with keys 'fks', 'uniques, and 'indexes' indicating the
173.         number of foreign keys, unique constraints, and indexes on
174.         `table`.`column`. The `fk_to` argument is a 2-tuple specifying the
175.         expected foreign key relationship's (table, column).
176.         """
177.         with connection.cursor() as cursor:
178.             constraints = connection.introspection.get_constraints(cursor, table)
179.         counts = {'fks': 0, 'uniques': 0, 'indexes': 0}
180.         for c in constraints.values():
181.             if c['columns'] == [column]:
182.                 if c['foreign_key'] == fk_to:
183.                     counts['fks'] += 1
184.                 if c['unique']:
185.                     counts['uniques'] += 1
186.                 elif c['index']:
187.                     counts['indexes'] += 1
188.         return counts
189. 
190.     def assertIndexOrder(self, table, index, order):
191.         constraints = self.get_constraints(table)
192.         self.assertIn(index, constraints)
193.         index_orders = constraints[index]['orders']
194.         self.assertTrue(all(val == expected for val, expected in zip(index_orders, order)))
195. 
196.     def assertForeignKeyExists(self, model, column, expected_fk_table, field='id'):
197.         """
198.         Fail if the FK constraint on `model.Meta.db_table`.`column` to
199.         `expected_fk_table`.id doesn't exist.
200.         """
201.         constraints = self.get_constraints(model._meta.db_table)
202.         constraint_fk = None
203.         for details in constraints.values():
204.             if details['columns'] == [column] and details['foreign_key']:
205.                 constraint_fk = details['foreign_key']
206.                 break
207.         self.assertEqual(constraint_fk, (expected_fk_table, field))
208. 
209.     def assertForeignKeyNotExists(self, model, column, expected_fk_table):
210.         with self.assertRaises(AssertionError):
211.             self.assertForeignKeyExists(model, column, expected_fk_table)
212. 
213.     # Tests
214.     def test_creation_deletion(self):
215.         """
216.         Tries creating a model's table, and then deleting it.
217.         """
218.         with connection.schema_editor() as editor:
219.             # Create the table
220.             editor.create_model(Author)
221.             # The table is there
222.             list(Author.objects.all())
223.             # Clean up that table
224.             editor.delete_model(Author)
225.             # No deferred SQL should be left over.
226.             self.assertEqual(editor.deferred_sql, [])
227.         # The table is gone
228.         with self.assertRaises(DatabaseError):
229.             list(Author.objects.all())
230. 
231.     @skipUnlessDBFeature('supports_foreign_keys')
232.     def test_fk(self):
233.         "Creating tables out of FK order, then repointing, works"
234.         # Create the table
235.         with connection.schema_editor() as editor:
236.             editor.create_model(Book)
237.             editor.create_model(Author)
238.             editor.create_model(Tag)
239.         # Initial tables are there
240.         list(Author.objects.all())
241.         list(Book.objects.all())
242.         # Make sure the FK constraint is present
243.         with self.assertRaises(IntegrityError):
244.             Book.objects.create(
245.                 author_id=1,
246.                 title="Much Ado About Foreign Keys",
247.                 pub_date=datetime.datetime.now(),
248.             )
249.         # Repoint the FK constraint
250.         old_field = Book._meta.get_field("author")
251.         new_field = ForeignKey(Tag, CASCADE)
252.         new_field.set_attributes_from_name("author")
253.         with connection.schema_editor() as editor:
254.             editor.alter_field(Book, old_field, new_field, strict=True)
255.         self.assertForeignKeyExists(Book, 'author_id', 'schema_tag')
256. 
257.     @skipUnlessDBFeature('can_create_inline_fk')
258.     def test_inline_fk(self):
259.         # Create some tables.
260.         with connection.schema_editor() as editor:
261.             editor.create_model(Author)
262.             editor.create_model(Book)
263.             editor.create_model(Note)
264.         self.assertForeignKeyNotExists(Note, 'book_id', 'schema_book')
265.         # Add a foreign key from one to the other.
266.         with connection.schema_editor() as editor:
267.             new_field = ForeignKey(Book, CASCADE)
268.             new_field.set_attributes_from_name('book')
269.             editor.add_field(Note, new_field)
270.         self.assertForeignKeyExists(Note, 'book_id', 'schema_book')
271.         # Creating a FK field with a constraint uses a single statement without
272.         # a deferred ALTER TABLE.
273.         self.assertFalse([
274.             sql for sql in (str(statement) for statement in editor.deferred_sql)
275.             if sql.startswith('ALTER TABLE') and 'ADD CONSTRAINT' in sql
276.         ])
277. 
278.     @skipUnlessDBFeature('supports_foreign_keys')
279.     def test_char_field_with_db_index_to_fk(self):
280.         # Create the table
281.         with connection.schema_editor() as editor:
282.             editor.create_model(Author)
283.             editor.create_model(AuthorCharFieldWithIndex)
284.         # Change CharField to FK
285.         old_field = AuthorCharFieldWithIndex._meta.get_field('char_field')
286.         new_field = ForeignKey(Author, CASCADE, blank=True)
287.         new_field.set_attributes_from_name('char_field')
288.         with connection.schema_editor() as editor:
289.             editor.alter_field(AuthorCharFieldWithIndex, old_field, new_field, strict=True)
290.         self.assertForeignKeyExists(AuthorCharFieldWithIndex, 'char_field_id', 'schema_author')
291. 
292.     @skipUnlessDBFeature('supports_foreign_keys')
293.     @skipUnlessDBFeature('supports_index_on_text_field')
294.     def test_text_field_with_db_index_to_fk(self):
295.         # Create the table
296.         with connection.schema_editor() as editor:
297.             editor.create_model(Author)
298.             editor.create_model(AuthorTextFieldWithIndex)
299.         # Change TextField to FK
300.         old_field = AuthorTextFieldWithIndex._meta.get_field('text_field')
301.         new_field = ForeignKey(Author, CASCADE, blank=True)
302.         new_field.set_attributes_from_name('text_field')
303.         with connection.schema_editor() as editor:
304.             editor.alter_field(AuthorTextFieldWithIndex, old_field, new_field, strict=True)
305.         self.assertForeignKeyExists(AuthorTextFieldWithIndex, 'text_field_id', 'schema_author')
306. 
307.     @isolate_apps('schema')
308.     def test_char_field_pk_to_auto_field(self):
309.         class Foo(Model):
310.             id = CharField(max_length=255, primary_key=True)
311. 
312.             class Meta:
313.                 app_label = 'schema'
314. 
315.         with connection.schema_editor() as editor:
316.             editor.create_model(Foo)
317.         self.isolated_local_models = [Foo]
318.         old_field = Foo._meta.get_field('id')
319.         new_field = AutoField(primary_key=True)
320.         new_field.set_attributes_from_name('id')
321.         new_field.model = Foo
322.         with connection.schema_editor() as editor:
323.             editor.alter_field(Foo, old_field, new_field, strict=True)
324. 
325.     @skipUnlessDBFeature('supports_foreign_keys')
326.     def test_fk_to_proxy(self):
327.         "Creating a FK to a proxy model creates database constraints."
328.         class AuthorProxy(Author):
329.             class Meta:
330.                 app_label = 'schema'
331.                 apps = new_apps
332.                 proxy = True
333. 
334.         class AuthorRef(Model):
335.             author = ForeignKey(AuthorProxy, on_delete=CASCADE)
336. 
337.             class Meta:
338.                 app_label = 'schema'
339.                 apps = new_apps
340. 
341.         self.local_models = [AuthorProxy, AuthorRef]
342. 
343.         # Create the table
344.         with connection.schema_editor() as editor:
345.             editor.create_model(Author)
346.             editor.create_model(AuthorRef)
347.         self.assertForeignKeyExists(AuthorRef, 'author_id', 'schema_author')
348. 
349.     @skipUnlessDBFeature('supports_foreign_keys')
350.     def test_fk_db_constraint(self):
351.         "The db_constraint parameter is respected"
352.         # Create the table
353.         with connection.schema_editor() as editor:
354.             editor.create_model(Tag)
355.             editor.create_model(Author)
356.             editor.create_model(BookWeak)
357.         # Initial tables are there
358.         list(Author.objects.all())
359.         list(Tag.objects.all())
360.         list(BookWeak.objects.all())
361.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
362.         # Make a db_constraint=False FK
363.         new_field = ForeignKey(Tag, CASCADE, db_constraint=False)
364.         new_field.set_attributes_from_name("tag")
365.         with connection.schema_editor() as editor:
366.             editor.add_field(Author, new_field)
367.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
368.         # Alter to one with a constraint
369.         new_field2 = ForeignKey(Tag, CASCADE)
370.         new_field2.set_attributes_from_name("tag")
371.         with connection.schema_editor() as editor:
372.             editor.alter_field(Author, new_field, new_field2, strict=True)
373.         self.assertForeignKeyExists(Author, 'tag_id', 'schema_tag')
374.         # Alter to one without a constraint again
375.         new_field2 = ForeignKey(Tag, CASCADE)
376.         new_field2.set_attributes_from_name("tag")
377.         with connection.schema_editor() as editor:
378.             editor.alter_field(Author, new_field2, new_field, strict=True)
379.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
380. 
381.     @isolate_apps('schema')
382.     def test_no_db_constraint_added_during_primary_key_change(self):
383.         """
384.         When a primary key that's pointed to by a ForeignKey with
385.         db_constraint=False is altered, a foreign key constraint isn't added.
386.         """
387.         class Author(Model):
388.             class Meta:
389.                 app_label = 'schema'
390. 
391.         class BookWeak(Model):
392.             author = ForeignKey(Author, CASCADE, db_constraint=False)
393. 
394.             class Meta:
395.                 app_label = 'schema'
396. 
397.         with connection.schema_editor() as editor:
398.             editor.create_model(Author)
399.             editor.create_model(BookWeak)
400.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
401.         old_field = Author._meta.get_field('id')
402.         new_field = BigAutoField(primary_key=True)
403.         new_field.model = Author
404.         new_field.set_attributes_from_name('id')
405.         # @isolate_apps() and inner models are needed to have the model
406.         # relations populated, otherwise this doesn't act as a regression test.
407.         self.assertEqual(len(new_field.model._meta.related_objects), 1)
408.         with connection.schema_editor() as editor:
409.             editor.alter_field(Author, old_field, new_field, strict=True)
410.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
411. 
412.     def _test_m2m_db_constraint(self, M2MFieldClass):
413.         class LocalAuthorWithM2M(Model):
414.             name = CharField(max_length=255)
415. 
416.             class Meta:
417.                 app_label = 'schema'
418.                 apps = new_apps
419. 
420.         self.local_models = [LocalAuthorWithM2M]
421. 
422.         # Create the table
423.         with connection.schema_editor() as editor:
424.             editor.create_model(Tag)
425.             editor.create_model(LocalAuthorWithM2M)
426.         # Initial tables are there
427.         list(LocalAuthorWithM2M.objects.all())
428.         list(Tag.objects.all())
429.         # Make a db_constraint=False FK
430.         new_field = M2MFieldClass(Tag, related_name="authors", db_constraint=False)
431.         new_field.contribute_to_class(LocalAuthorWithM2M, "tags")
432.         # Add the field
433.         with connection.schema_editor() as editor:
434.             editor.add_field(LocalAuthorWithM2M, new_field)
435.         self.assertForeignKeyNotExists(new_field.remote_field.through, 'tag_id', 'schema_tag')
436. 
437.     @skipUnlessDBFeature('supports_foreign_keys')
438.     def test_m2m_db_constraint(self):
439.         self._test_m2m_db_constraint(ManyToManyField)
440. 
441.     @skipUnlessDBFeature('supports_foreign_keys')
442.     def test_m2m_db_constraint_custom(self):
443.         self._test_m2m_db_constraint(CustomManyToManyField)
444. 
445.     @skipUnlessDBFeature('supports_foreign_keys')
446.     def test_m2m_db_constraint_inherited(self):
447.         self._test_m2m_db_constraint(InheritedManyToManyField)
448. 
449.     def test_add_field(self):
450.         """
451.         Tests adding fields to models
452.         """
453.         # Create the table
454.         with connection.schema_editor() as editor:
455.             editor.create_model(Author)
456.         # Ensure there's no age field
457.         columns = self.column_classes(Author)
458.         self.assertNotIn("age", columns)
459.         # Add the new field
460.         new_field = IntegerField(null=True)
461.         new_field.set_attributes_from_name("age")
462.         with CaptureQueriesContext(connection) as ctx, connection.schema_editor() as editor:
463.             editor.add_field(Author, new_field)
464.         drop_default_sql = editor.sql_alter_column_no_default % {
465.             'column': editor.quote_name(new_field.name),
466.         }
467.         self.assertFalse(any(drop_default_sql in query['sql'] for query in ctx.captured_queries))
468.         # Ensure the field is right afterwards
469.         columns = self.column_classes(Author)
470.         self.assertEqual(columns['age'][0], "IntegerField")
471.         self.assertTrue(columns['age'][1][6])
472. 
473.     def test_add_field_remove_field(self):
474.         """
475.         Adding a field and removing it removes all deferred sql referring to it.
476.         """
477.         with connection.schema_editor() as editor:
478.             # Create a table with a unique constraint on the slug field.
479.             editor.create_model(Tag)
480.             # Remove the slug column.
481.             editor.remove_field(Tag, Tag._meta.get_field('slug'))
482.         self.assertEqual(editor.deferred_sql, [])
483. 
484.     def test_add_field_temp_default(self):
485.         """
486.         Tests adding fields to models with a temporary default
487.         """
488.         # Create the table
489.         with connection.schema_editor() as editor:
490.             editor.create_model(Author)
491.         # Ensure there's no age field
492.         columns = self.column_classes(Author)
493.         self.assertNotIn("age", columns)
494.         # Add some rows of data
495.         Author.objects.create(name="Andrew", height=30)
496.         Author.objects.create(name="Andrea")
497.         # Add a not-null field
498.         new_field = CharField(max_length=30, default="Godwin")
499.         new_field.set_attributes_from_name("surname")
500.         with connection.schema_editor() as editor:
501.             editor.add_field(Author, new_field)
502.         # Ensure the field is right afterwards
503.         columns = self.column_classes(Author)
504.         self.assertEqual(columns['surname'][0], "CharField")
505.         self.assertEqual(columns['surname'][1][6],
506.                          connection.features.interprets_empty_strings_as_nulls)
507. 
508.     def test_add_field_temp_default_boolean(self):
509.         """
510.         Tests adding fields to models with a temporary default where
511.         the default is False. (#21783)
512.         """
513.         # Create the table
514.         with connection.schema_editor() as editor:
515.             editor.create_model(Author)
516.         # Ensure there's no age field
517.         columns = self.column_classes(Author)
518.         self.assertNotIn("age", columns)
519.         # Add some rows of data
520.         Author.objects.create(name="Andrew", height=30)
521.         Author.objects.create(name="Andrea")
522.         # Add a not-null field
523.         new_field = BooleanField(default=False)
524.         new_field.set_attributes_from_name("awesome")
525.         with connection.schema_editor() as editor:
526.             editor.add_field(Author, new_field)
527.         # Ensure the field is right afterwards
528.         columns = self.column_classes(Author)
529.         # BooleanField are stored as TINYINT(1) on MySQL.
530.         field_type = columns['awesome'][0]
531.         self.assertEqual(field_type, connection.features.introspected_boolean_field_type)
532. 
533.     def test_add_field_default_transform(self):
534.         """
535.         Tests adding fields to models with a default that is not directly
536.         valid in the database (#22581)
537.         """
538. 
539.         class TestTransformField(IntegerField):
540. 
541.             # Weird field that saves the count of items in its value
542.             def get_default(self):
543.                 return self.default
544. 
545.             def get_prep_value(self, value):
546.                 if value is None:
547.                     return 0
548.                 return len(value)
549. 
550.         # Create the table
551.         with connection.schema_editor() as editor:
552.             editor.create_model(Author)
553.         # Add some rows of data
554.         Author.objects.create(name="Andrew", height=30)
555.         Author.objects.create(name="Andrea")
556.         # Add the field with a default it needs to cast (to string in this case)
557.         new_field = TestTransformField(default={1: 2})
558.         new_field.set_attributes_from_name("thing")
559.         with connection.schema_editor() as editor:
560.             editor.add_field(Author, new_field)
561.         # Ensure the field is there
562.         columns = self.column_classes(Author)
563.         field_type, field_info = columns['thing']
564.         self.assertEqual(field_type, 'IntegerField')
565.         # Make sure the values were transformed correctly
566.         self.assertEqual(Author.objects.extra(where=["thing = 1"]).count(), 2)
567. 
568.     def test_add_field_binary(self):
569.         """
570.         Tests binary fields get a sane default (#22851)
571.         """
572.         # Create the table
573.         with connection.schema_editor() as editor:
574.             editor.create_model(Author)
575.         # Add the new field
576.         new_field = BinaryField(blank=True)
577.         new_field.set_attributes_from_name("bits")
578.         with connection.schema_editor() as editor:
579.             editor.add_field(Author, new_field)
580.         # Ensure the field is right afterwards
581.         columns = self.column_classes(Author)
582.         # MySQL annoyingly uses the same backend, so it'll come back as one of
583.         # these two types.
584.         self.assertIn(columns['bits'][0], ("BinaryField", "TextField"))
585. 
586.     @unittest.skipUnless(connection.vendor == 'mysql', "MySQL specific")
587.     def test_add_binaryfield_mediumblob(self):
588.         """
589.         Test adding a custom-sized binary field on MySQL (#24846).
590.         """
591.         # Create the table
592.         with connection.schema_editor() as editor:
593.             editor.create_model(Author)
594.         # Add the new field with default
595.         new_field = MediumBlobField(blank=True, default=b'123')
596.         new_field.set_attributes_from_name('bits')
597.         with connection.schema_editor() as editor:
598.             editor.add_field(Author, new_field)
599.         columns = self.column_classes(Author)
600.         # Introspection treats BLOBs as TextFields
601.         self.assertEqual(columns['bits'][0], "TextField")
602. 
603.     def test_alter(self):
604.         """
605.         Tests simple altering of fields
606.         """
607.         # Create the table
608.         with connection.schema_editor() as editor:
609.             editor.create_model(Author)
610.         # Ensure the field is right to begin with
611.         columns = self.column_classes(Author)
612.         self.assertEqual(columns['name'][0], "CharField")
613.         self.assertEqual(bool(columns['name'][1][6]), bool(connection.features.interprets_empty_strings_as_nulls))
614.         # Alter the name field to a TextField
615.         old_field = Author._meta.get_field("name")
616.         new_field = TextField(null=True)
617.         new_field.set_attributes_from_name("name")
618.         with connection.schema_editor() as editor:
619.             editor.alter_field(Author, old_field, new_field, strict=True)
620.         # Ensure the field is right afterwards
621.         columns = self.column_classes(Author)
622.         self.assertEqual(columns['name'][0], "TextField")
623.         self.assertTrue(columns['name'][1][6])
624.         # Change nullability again
625.         new_field2 = TextField(null=False)
626.         new_field2.set_attributes_from_name("name")
627.         with connection.schema_editor() as editor:
628.             editor.alter_field(Author, new_field, new_field2, strict=True)
629.         # Ensure the field is right afterwards
630.         columns = self.column_classes(Author)
631.         self.assertEqual(columns['name'][0], "TextField")
632.         self.assertEqual(bool(columns['name'][1][6]), bool(connection.features.interprets_empty_strings_as_nulls))
633. 
634.     def test_alter_auto_field_to_integer_field(self):
635.         # Create the table
636.         with connection.schema_editor() as editor:
637.             editor.create_model(Author)
638.         # Change AutoField to IntegerField
639.         old_field = Author._meta.get_field('id')
640.         new_field = IntegerField(primary_key=True)
641.         new_field.set_attributes_from_name('id')
642.         new_field.model = Author
643.         with connection.schema_editor() as editor:
644.             editor.alter_field(Author, old_field, new_field, strict=True)
645. 
646.     def test_alter_auto_field_to_char_field(self):
647.         # Create the table
648.         with connection.schema_editor() as editor:
649.             editor.create_model(Author)
650.         # Change AutoField to CharField
651.         old_field = Author._meta.get_field('id')
652.         new_field = CharField(primary_key=True, max_length=50)
653.         new_field.set_attributes_from_name('id')
654.         new_field.model = Author
655.         with connection.schema_editor() as editor:
656.             editor.alter_field(Author, old_field, new_field, strict=True)
657. 
658.     @isolate_apps('schema')
659.     def test_alter_auto_field_quoted_db_column(self):
660.         class Foo(Model):
661.             id = AutoField(primary_key=True, db_column='"quoted_id"')
662. 
663.             class Meta:
664.                 app_label = 'schema'
665. 
666.         with connection.schema_editor() as editor:
667.             editor.create_model(Foo)
668.         self.isolated_local_models = [Foo]
669.         old_field = Foo._meta.get_field('id')
670.         new_field = BigAutoField(primary_key=True)
671.         new_field.model = Foo
672.         new_field.db_column = '"quoted_id"'
673.         new_field.set_attributes_from_name('id')
674.         with connection.schema_editor() as editor:
675.             editor.alter_field(Foo, old_field, new_field, strict=True)
676.         Foo.objects.create()
677. 
678.     def test_alter_not_unique_field_to_primary_key(self):
679.         # Create the table.
680.         with connection.schema_editor() as editor:
681.             editor.create_model(Author)
682.         # Change UUIDField to primary key.
683.         old_field = Author._meta.get_field('uuid')
684.         new_field = UUIDField(primary_key=True)
685.         new_field.set_attributes_from_name('uuid')
686.         new_field.model = Author
687.         with connection.schema_editor() as editor:
688.             editor.remove_field(Author, Author._meta.get_field('id'))
689.             editor.alter_field(Author, old_field, new_field, strict=True)
690. 
691.     @isolate_apps('schema')
692.     def test_alter_primary_key_quoted_db_table(self):
693.         class Foo(Model):
694.             class Meta:
695.                 app_label = 'schema'
696.                 db_table = '"foo"'
697. 
698.         with connection.schema_editor() as editor:
699.             editor.create_model(Foo)
700.         self.isolated_local_models = [Foo]
701.         old_field = Foo._meta.get_field('id')
702.         new_field = BigAutoField(primary_key=True)
703.         new_field.model = Foo
704.         new_field.set_attributes_from_name('id')
705.         with connection.schema_editor() as editor:
706.             editor.alter_field(Foo, old_field, new_field, strict=True)
707.         Foo.objects.create()
708. 
709.     def test_alter_text_field(self):
710.         # Regression for "BLOB/TEXT column 'info' can't have a default value")
711.         # on MySQL.
712.         # Create the table
713.         with connection.schema_editor() as editor:
714.             editor.create_model(Note)
715.         old_field = Note._meta.get_field("info")
716.         new_field = TextField(blank=True)
717.         new_field.set_attributes_from_name("info")
718.         with connection.schema_editor() as editor:
719.             editor.alter_field(Note, old_field, new_field, strict=True)
720. 
721.     @skipUnlessDBFeature('can_defer_constraint_checks', 'can_rollback_ddl')
722.     def test_alter_fk_checks_deferred_constraints(self):
723.         """
724.         #25492 - Altering a foreign key's structure and data in the same
725.         transaction.
726.         """
727.         with connection.schema_editor() as editor:
728.             editor.create_model(Node)
729.         old_field = Node._meta.get_field('parent')
730.         new_field = ForeignKey(Node, CASCADE)
731.         new_field.set_attributes_from_name('parent')
732.         parent = Node.objects.create()
733.         with connection.schema_editor() as editor:
734.             # Update the parent FK to create a deferred constraint check.
735.             Node.objects.update(parent=parent)
736.             editor.alter_field(Node, old_field, new_field, strict=True)
737. 
738.     def test_alter_text_field_to_date_field(self):
739.         """
740.         #25002 - Test conversion of text field to date field.
741.         """
742.         with connection.schema_editor() as editor:
743.             editor.create_model(Note)
744.         Note.objects.create(info='1988-05-05')
745.         old_field = Note._meta.get_field('info')
746.         new_field = DateField(blank=True)
747.         new_field.set_attributes_from_name('info')
748.         with connection.schema_editor() as editor:
749.             editor.alter_field(Note, old_field, new_field, strict=True)
750.         # Make sure the field isn't nullable
751.         columns = self.column_classes(Note)
752.         self.assertFalse(columns['info'][1][6])
753. 
754.     def test_alter_text_field_to_datetime_field(self):
755.         """
756.         #25002 - Test conversion of text field to datetime field.
757.         """
758.         with connection.schema_editor() as editor:
759.             editor.create_model(Note)
760.         Note.objects.create(info='1988-05-05 3:16:17.4567')
761.         old_field = Note._meta.get_field('info')
762.         new_field = DateTimeField(blank=True)
763.         new_field.set_attributes_from_name('info')
764.         with connection.schema_editor() as editor:
765.             editor.alter_field(Note, old_field, new_field, strict=True)
766.         # Make sure the field isn't nullable
767.         columns = self.column_classes(Note)
768.         self.assertFalse(columns['info'][1][6])
769. 
770.     def test_alter_text_field_to_time_field(self):
771.         """
772.         #25002 - Test conversion of text field to time field.
773.         """
774.         with connection.schema_editor() as editor:
775.             editor.create_model(Note)
776.         Note.objects.create(info='3:16:17.4567')
777.         old_field = Note._meta.get_field('info')
778.         new_field = TimeField(blank=True)
779.         new_field.set_attributes_from_name('info')
780.         with connection.schema_editor() as editor:
781.             editor.alter_field(Note, old_field, new_field, strict=True)
782.         # Make sure the field isn't nullable
783.         columns = self.column_classes(Note)
784.         self.assertFalse(columns['info'][1][6])
785. 
786.     @skipIfDBFeature('interprets_empty_strings_as_nulls')
787.     def test_alter_textual_field_keep_null_status(self):
788.         """
789.         Changing a field type shouldn't affect the not null status.
790.         """
791.         with connection.schema_editor() as editor:
792.             editor.create_model(Note)
793.         with self.assertRaises(IntegrityError):
794.             Note.objects.create(info=None)
795.         old_field = Note._meta.get_field("info")
796.         new_field = CharField(max_length=50)
797.         new_field.set_attributes_from_name("info")
798.         with connection.schema_editor() as editor:
799.             editor.alter_field(Note, old_field, new_field, strict=True)
800.         with self.assertRaises(IntegrityError):
801.             Note.objects.create(info=None)
802. 
803.     def test_alter_numeric_field_keep_null_status(self):
804.         """
805.         Changing a field type shouldn't affect the not null status.
806.         """
807.         with connection.schema_editor() as editor:
808.             editor.create_model(UniqueTest)
809.         with self.assertRaises(IntegrityError):
810.             UniqueTest.objects.create(year=None, slug='aaa')
811.         old_field = UniqueTest._meta.get_field("year")
812.         new_field = BigIntegerField()
813.         new_field.set_attributes_from_name("year")
814.         with connection.schema_editor() as editor:
815.             editor.alter_field(UniqueTest, old_field, new_field, strict=True)
816.         with self.assertRaises(IntegrityError):
817.             UniqueTest.objects.create(year=None, slug='bbb')
818. 
819.     def test_alter_null_to_not_null(self):
820.         """
821.         #23609 - Tests handling of default values when altering from NULL to NOT NULL.
822.         """
823.         # Create the table
824.         with connection.schema_editor() as editor:
825.             editor.create_model(Author)
826.         # Ensure the field is right to begin with
827.         columns = self.column_classes(Author)
828.         self.assertTrue(columns['height'][1][6])
829.         # Create some test data
830.         Author.objects.create(name='Not null author', height=12)
831.         Author.objects.create(name='Null author')
832.         # Verify null value
833.         self.assertEqual(Author.objects.get(name='Not null author').height, 12)
834.         self.assertIsNone(Author.objects.get(name='Null author').height)
835.         # Alter the height field to NOT NULL with default
836.         old_field = Author._meta.get_field("height")
837.         new_field = PositiveIntegerField(default=42)
838.         new_field.set_attributes_from_name("height")
839.         with connection.schema_editor() as editor:
840.             editor.alter_field(Author, old_field, new_field, strict=True)
841.         # Ensure the field is right afterwards
842.         columns = self.column_classes(Author)
843.         self.assertFalse(columns['height'][1][6])
844.         # Verify default value
845.         self.assertEqual(Author.objects.get(name='Not null author').height, 12)
846.         self.assertEqual(Author.objects.get(name='Null author').height, 42)
847. 
848.     def test_alter_charfield_to_null(self):
849.         """
850.         #24307 - Should skip an alter statement on databases with
851.         interprets_empty_strings_as_null when changing a CharField to null.
852.         """
853.         # Create the table
854.         with connection.schema_editor() as editor:
855.             editor.create_model(Author)
856.         # Change the CharField to null
857.         old_field = Author._meta.get_field('name')
858.         new_field = copy(old_field)
859.         new_field.null = True
860.         with connection.schema_editor() as editor:
861.             editor.alter_field(Author, old_field, new_field, strict=True)
862. 
863.     @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific')
864.     def test_alter_char_field_decrease_length(self):
865.         # Create the table.
866.         with connection.schema_editor() as editor:
867.             editor.create_model(Author)
868.         Author.objects.create(name='x' * 255)
869.         # Change max_length of CharField.
870.         old_field = Author._meta.get_field('name')
871.         new_field = CharField(max_length=254)
872.         new_field.set_attributes_from_name('name')
873.         with connection.schema_editor() as editor:
874.             msg = 'value too long for type character varying(254)'
875.             with self.assertRaisesMessage(DataError, msg):
876.                 editor.alter_field(Author, old_field, new_field, strict=True)
877. 
878.     @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific')
879.     def test_alter_field_with_custom_db_type(self):
880.         from django.contrib.postgres.fields import ArrayField
881. 
882.         class Foo(Model):
883.             field = ArrayField(CharField(max_length=255))
884. 
885.             class Meta:
886.                 app_label = 'schema'
887. 
888.         with connection.schema_editor() as editor:
889.             editor.create_model(Foo)
890.         self.isolated_local_models = [Foo]
891.         old_field = Foo._meta.get_field('field')
892.         new_field = ArrayField(CharField(max_length=16))
893.         new_field.set_attributes_from_name('field')
894.         new_field.model = Foo
895.         with connection.schema_editor() as editor:
896.             editor.alter_field(Foo, old_field, new_field, strict=True)
897. 
898.     @isolate_apps('schema')
899.     @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific')
900.     def test_alter_array_field_decrease_base_field_length(self):
901.         from django.contrib.postgres.fields import ArrayField
902. 
903.         class ArrayModel(Model):
904.             field = ArrayField(CharField(max_length=16))
905. 
906.             class Meta:
907.                 app_label = 'schema'
908. 
909.         with connection.schema_editor() as editor:
910.             editor.create_model(ArrayModel)
911.         self.isolated_local_models = [ArrayModel]
912.         ArrayModel.objects.create(field=['x' * 16])
913.         old_field = ArrayModel._meta.get_field('field')
914.         new_field = ArrayField(CharField(max_length=15))
915.         new_field.set_attributes_from_name('field')
916.         new_field.model = ArrayModel
917.         with connection.schema_editor() as editor:
918.             msg = 'value too long for type character varying(15)'
919.             with self.assertRaisesMessage(DataError, msg):
920.                 editor.alter_field(ArrayModel, old_field, new_field, strict=True)
921. 
922.     @isolate_apps('schema')
923.     @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific')
924.     def test_alter_array_field_decrease_nested_base_field_length(self):
925.         from django.contrib.postgres.fields import ArrayField
926. 
927.         class ArrayModel(Model):
928.             field = ArrayField(ArrayField(CharField(max_length=16)))
929. 
930.             class Meta:
931.                 app_label = 'schema'
932. 
933.         with connection.schema_editor() as editor:
934.             editor.create_model(ArrayModel)
935.         self.isolated_local_models = [ArrayModel]
936.         ArrayModel.objects.create(field=[['x' * 16]])
937.         old_field = ArrayModel._meta.get_field('field')
938.         new_field = ArrayField(ArrayField(CharField(max_length=15)))
939.         new_field.set_attributes_from_name('field')
940.         new_field.model = ArrayModel
941.         with connection.schema_editor() as editor:
942.             msg = 'value too long for type character varying(15)'
943.             with self.assertRaisesMessage(DataError, msg):
944.                 editor.alter_field(ArrayModel, old_field, new_field, strict=True)
945. 
946.     def test_alter_textfield_to_null(self):
947.         """
948.         #24307 - Should skip an alter statement on databases with
949.         interprets_empty_strings_as_null when changing a TextField to null.
950.         """
951.         # Create the table
952.         with connection.schema_editor() as editor:
953.             editor.create_model(Note)
954.         # Change the TextField to null
955.         old_field = Note._meta.get_field('info')
956.         new_field = copy(old_field)
957.         new_field.null = True
958.         with connection.schema_editor() as editor:
959.             editor.alter_field(Note, old_field, new_field, strict=True)
960. 
961.     @skipUnlessDBFeature('supports_combined_alters')
962.     def test_alter_null_to_not_null_keeping_default(self):
963.         """
964.         #23738 - Can change a nullable field with default to non-nullable
965.         with the same default.
966.         """
967.         # Create the table
968.         with connection.schema_editor() as editor:
969.             editor.create_model(AuthorWithDefaultHeight)
970.         # Ensure the field is right to begin with
971.         columns = self.column_classes(AuthorWithDefaultHeight)
972.         self.assertTrue(columns['height'][1][6])
973.         # Alter the height field to NOT NULL keeping the previous default
974.         old_field = AuthorWithDefaultHeight._meta.get_field("height")
975.         new_field = PositiveIntegerField(default=42)
976.         new_field.set_attributes_from_name("height")
977.         with connection.schema_editor() as editor:
978.             editor.alter_field(AuthorWithDefaultHeight, old_field, new_field, strict=True)
979.         # Ensure the field is right afterwards
980.         columns = self.column_classes(AuthorWithDefaultHeight)
981.         self.assertFalse(columns['height'][1][6])
982. 
983.     @skipUnlessDBFeature('supports_foreign_keys')
984.     def test_alter_fk(self):
985.         """
986.         Tests altering of FKs
987.         """
988.         # Create the table
989.         with connection.schema_editor() as editor:
990.             editor.create_model(Author)
991.             editor.create_model(Book)
992.         # Ensure the field is right to begin with
993.         columns = self.column_classes(Book)
994.         self.assertEqual(columns['author_id'][0], "IntegerField")
995.         self.assertForeignKeyExists(Book, 'author_id', 'schema_author')
996.         # Alter the FK
997.         old_field = Book._meta.get_field("author")
998.         new_field = ForeignKey(Author, CASCADE, editable=False)
999.         new_field.set_attributes_from_name("author")
1000.         with connection.schema_editor() as editor:
1001.             editor.alter_field(Book, old_field, new_field, strict=True)
1002.         # Ensure the field is right afterwards
1003.         columns = self.column_classes(Book)
1004.         self.assertEqual(columns['author_id'][0], "IntegerField")
1005.         self.assertForeignKeyExists(Book, 'author_id', 'schema_author')
1006. 
1007.     @skipUnlessDBFeature('supports_foreign_keys')
1008.     def test_alter_to_fk(self):
1009.         """
1010.         #24447 - Tests adding a FK constraint for an existing column
1011.         """
1012.         class LocalBook(Model):
1013.             author = IntegerField()
1014.             title = CharField(max_length=100, db_index=True)
1015.             pub_date = DateTimeField()
1016. 
1017.             class Meta:
1018.                 app_label = 'schema'
1019.                 apps = new_apps
1020. 
1021.         self.local_models = [LocalBook]
1022. 
1023.         # Create the tables
1024.         with connection.schema_editor() as editor:
1025.             editor.create_model(Author)
1026.             editor.create_model(LocalBook)
1027.         # Ensure no FK constraint exists
1028.         constraints = self.get_constraints(LocalBook._meta.db_table)
1029.         for details in constraints.values():
1030.             if details['foreign_key']:
1031.                 self.fail('Found an unexpected FK constraint to %s' % details['columns'])
1032.         old_field = LocalBook._meta.get_field("author")
1033.         new_field = ForeignKey(Author, CASCADE)
1034.         new_field.set_attributes_from_name("author")
1035.         with connection.schema_editor() as editor:
1036.             editor.alter_field(LocalBook, old_field, new_field, strict=True)
1037.         self.assertForeignKeyExists(LocalBook, 'author_id', 'schema_author')
1038. 
1039.     @skipUnlessDBFeature('supports_foreign_keys')
1040.     def test_alter_o2o_to_fk(self):
1041.         """
1042.         #24163 - Tests altering of OneToOneField to ForeignKey
1043.         """
1044.         # Create the table
1045.         with connection.schema_editor() as editor:
1046.             editor.create_model(Author)
1047.             editor.create_model(BookWithO2O)
1048.         # Ensure the field is right to begin with
1049.         columns = self.column_classes(BookWithO2O)
1050.         self.assertEqual(columns['author_id'][0], "IntegerField")
1051.         # Ensure the field is unique
1052.         author = Author.objects.create(name="Joe")
1053.         BookWithO2O.objects.create(author=author, title="Django 1", pub_date=datetime.datetime.now())
1054.         with self.assertRaises(IntegrityError):
1055.             BookWithO2O.objects.create(author=author, title="Django 2", pub_date=datetime.datetime.now())
1056.         BookWithO2O.objects.all().delete()
1057.         self.assertForeignKeyExists(BookWithO2O, 'author_id', 'schema_author')
1058.         # Alter the OneToOneField to ForeignKey
1059.         old_field = BookWithO2O._meta.get_field("author")
1060.         new_field = ForeignKey(Author, CASCADE)
1061.         new_field.set_attributes_from_name("author")
1062.         with connection.schema_editor() as editor:
1063.             editor.alter_field(BookWithO2O, old_field, new_field, strict=True)
1064.         # Ensure the field is right afterwards
1065.         columns = self.column_classes(Book)
1066.         self.assertEqual(columns['author_id'][0], "IntegerField")
1067.         # Ensure the field is not unique anymore
1068.         Book.objects.create(author=author, title="Django 1", pub_date=datetime.datetime.now())
1069.         Book.objects.create(author=author, title="Django 2", pub_date=datetime.datetime.now())
1070.         self.assertForeignKeyExists(Book, 'author_id', 'schema_author')
1071. 
1072.     @skipUnlessDBFeature('supports_foreign_keys')
1073.     def test_alter_fk_to_o2o(self):
1074.         """
1075.         #24163 - Tests altering of ForeignKey to OneToOneField
1076.         """
1077.         # Create the table
1078.         with connection.schema_editor() as editor:
1079.             editor.create_model(Author)
1080.             editor.create_model(Book)
1081.         # Ensure the field is right to begin with
1082.         columns = self.column_classes(Book)
1083.         self.assertEqual(columns['author_id'][0], "IntegerField")
1084.         # Ensure the field is not unique
1085.         author = Author.objects.create(name="Joe")
1086.         Book.objects.create(author=author, title="Django 1", pub_date=datetime.datetime.now())
1087.         Book.objects.create(author=author, title="Django 2", pub_date=datetime.datetime.now())
1088.         Book.objects.all().delete()
1089.         self.assertForeignKeyExists(Book, 'author_id', 'schema_author')
1090.         # Alter the ForeignKey to OneToOneField
1091.         old_field = Book._meta.get_field("author")
1092.         new_field = OneToOneField(Author, CASCADE)
1093.         new_field.set_attributes_from_name("author")
1094.         with connection.schema_editor() as editor:
1095.             editor.alter_field(Book, old_field, new_field, strict=True)
1096.         # Ensure the field is right afterwards
1097.         columns = self.column_classes(BookWithO2O)
1098.         self.assertEqual(columns['author_id'][0], "IntegerField")
1099.         # Ensure the field is unique now
1100.         BookWithO2O.objects.create(author=author, title="Django 1", pub_date=datetime.datetime.now())
1101.         with self.assertRaises(IntegrityError):
1102.             BookWithO2O.objects.create(author=author, title="Django 2", pub_date=datetime.datetime.now())
1103.         self.assertForeignKeyExists(BookWithO2O, 'author_id', 'schema_author')
1104. 
1105.     def test_alter_field_fk_to_o2o(self):
1106.         with connection.schema_editor() as editor:
1107.             editor.create_model(Author)
1108.             editor.create_model(Book)
1109.         expected_fks = 1 if connection.features.supports_foreign_keys else 0
1110. 
1111.         # Check the index is right to begin with.
1112.         counts = self.get_constraints_count(
1113.             Book._meta.db_table,
1114.             Book._meta.get_field('author').column,
1115.             (Author._meta.db_table, Author._meta.pk.column),
1116.         )
1117.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 0, 'indexes': 1})
1118. 
1119.         old_field = Book._meta.get_field('author')
1120.         new_field = OneToOneField(Author, CASCADE)
1121.         new_field.set_attributes_from_name('author')
1122.         with connection.schema_editor() as editor:
1123.             editor.alter_field(Book, old_field, new_field, strict=True)
1124. 
1125.         counts = self.get_constraints_count(
1126.             Book._meta.db_table,
1127.             Book._meta.get_field('author').column,
1128.             (Author._meta.db_table, Author._meta.pk.column),
1129.         )
1130.         # The index on ForeignKey is replaced with a unique constraint for OneToOneField.
1131.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 1, 'indexes': 0})
1132. 
1133.     def test_alter_field_fk_keeps_index(self):
1134.         with connection.schema_editor() as editor:
1135.             editor.create_model(Author)
1136.             editor.create_model(Book)
1137.         expected_fks = 1 if connection.features.supports_foreign_keys else 0
1138. 
1139.         # Check the index is right to begin with.
1140.         counts = self.get_constraints_count(
1141.             Book._meta.db_table,
1142.             Book._meta.get_field('author').column,
1143.             (Author._meta.db_table, Author._meta.pk.column),
1144.         )
1145.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 0, 'indexes': 1})
1146. 
1147.         old_field = Book._meta.get_field('author')
1148.         # on_delete changed from CASCADE.
1149.         new_field = ForeignKey(Author, PROTECT)
1150.         new_field.set_attributes_from_name('author')
1151.         with connection.schema_editor() as editor:
1152.             editor.alter_field(Book, old_field, new_field, strict=True)
1153. 
1154.         counts = self.get_constraints_count(
1155.             Book._meta.db_table,
1156.             Book._meta.get_field('author').column,
1157.             (Author._meta.db_table, Author._meta.pk.column),
1158.         )
1159.         # The index remains.
1160.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 0, 'indexes': 1})
1161. 
1162.     def test_alter_field_o2o_to_fk(self):
1163.         with connection.schema_editor() as editor:
1164.             editor.create_model(Author)
1165.             editor.create_model(BookWithO2O)
1166.         expected_fks = 1 if connection.features.supports_foreign_keys else 0
1167. 
1168.         # Check the unique constraint is right to begin with.
1169.         counts = self.get_constraints_count(
1170.             BookWithO2O._meta.db_table,
1171.             BookWithO2O._meta.get_field('author').column,
1172.             (Author._meta.db_table, Author._meta.pk.column),
1173.         )
1174.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 1, 'indexes': 0})
1175. 
1176.         old_field = BookWithO2O._meta.get_field('author')
1177.         new_field = ForeignKey(Author, CASCADE)
1178.         new_field.set_attributes_from_name('author')
1179.         with connection.schema_editor() as editor:
1180.             editor.alter_field(BookWithO2O, old_field, new_field, strict=True)
1181. 
1182.         counts = self.get_constraints_count(
1183.             BookWithO2O._meta.db_table,
1184.             BookWithO2O._meta.get_field('author').column,
1185.             (Author._meta.db_table, Author._meta.pk.column),
1186.         )
1187.         # The unique constraint on OneToOneField is replaced with an index for ForeignKey.
1188.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 0, 'indexes': 1})
1189. 
1190.     def test_alter_field_o2o_keeps_unique(self):
1191.         with connection.schema_editor() as editor:
1192.             editor.create_model(Author)
1193.             editor.create_model(BookWithO2O)
1194.         expected_fks = 1 if connection.features.supports_foreign_keys else 0
1195. 
1196.         # Check the unique constraint is right to begin with.
1197.         counts = self.get_constraints_count(
1198.             BookWithO2O._meta.db_table,
1199.             BookWithO2O._meta.get_field('author').column,
1200.             (Author._meta.db_table, Author._meta.pk.column),
1201.         )
1202.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 1, 'indexes': 0})
1203. 
1204.         old_field = BookWithO2O._meta.get_field('author')
1205.         # on_delete changed from CASCADE.
1206.         new_field = OneToOneField(Author, PROTECT)
1207.         new_field.set_attributes_from_name('author')
1208.         with connection.schema_editor() as editor:
1209.             editor.alter_field(BookWithO2O, old_field, new_field, strict=True)
1210. 
1211.         counts = self.get_constraints_count(
1212.             BookWithO2O._meta.db_table,
1213.             BookWithO2O._meta.get_field('author').column,
1214.             (Author._meta.db_table, Author._meta.pk.column),
1215.         )
1216.         # The unique constraint remains.
1217.         self.assertEqual(counts, {'fks': expected_fks, 'uniques': 1, 'indexes': 0})
1218. 
1219.     @skipUnlessDBFeature('ignores_table_name_case')
1220.     def test_alter_db_table_case(self):
1221.         # Create the table
1222.         with connection.schema_editor() as editor:
1223.             editor.create_model(Author)
1224.         # Alter the case of the table
1225.         old_table_name = Author._meta.db_table
1226.         with connection.schema_editor() as editor:
1227.             editor.alter_db_table(Author, old_table_name, old_table_name.upper())
1228. 
1229.     def test_alter_implicit_id_to_explicit(self):
1230.         """
1231.         Should be able to convert an implicit "id" field to an explicit "id"
1232.         primary key field.
1233.         """
1234.         with connection.schema_editor() as editor:
1235.             editor.create_model(Author)
1236. 
1237.         old_field = Author._meta.get_field("id")
1238.         new_field = AutoField(primary_key=True)
1239.         new_field.set_attributes_from_name("id")
1240.         new_field.model = Author
1241.         with connection.schema_editor() as editor:
1242.             editor.alter_field(Author, old_field, new_field, strict=True)
1243.         # This will fail if DROP DEFAULT is inadvertently executed on this
1244.         # field which drops the id sequence, at least on PostgreSQL.
1245.         Author.objects.create(name='Foo')
1246.         Author.objects.create(name='Bar')
1247. 
1248.     def test_alter_autofield_pk_to_bigautofield_pk_sequence_owner(self):
1249.         """
1250.         Converting an implicit PK to BigAutoField(primary_key=True) should keep
1251.         a sequence owner on PostgreSQL.
1252.         """
1253.         with connection.schema_editor() as editor:
1254.             editor.create_model(Author)
1255.         old_field = Author._meta.get_field('id')
1256.         new_field = BigAutoField(primary_key=True)
1257.         new_field.set_attributes_from_name('id')
1258.         new_field.model = Author
1259.         with connection.schema_editor() as editor:
1260.             editor.alter_field(Author, old_field, new_field, strict=True)
1261. 
1262.         Author.objects.create(name='Foo', pk=1)
1263.         with connection.cursor() as cursor:
1264.             sequence_reset_sqls = connection.ops.sequence_reset_sql(no_style(), [Author])
1265.             if sequence_reset_sqls:
1266.                 cursor.execute(sequence_reset_sqls[0])
1267.         # Fail on PostgreSQL if sequence is missing an owner.
1268.         self.assertIsNotNone(Author.objects.create(name='Bar'))
1269. 
1270.     def test_alter_autofield_pk_to_smallautofield_pk_sequence_owner(self):
1271.         """
1272.         Converting an implicit PK to SmallAutoField(primary_key=True) should
1273.         keep a sequence owner on PostgreSQL.
1274.         """
1275.         with connection.schema_editor() as editor:
1276.             editor.create_model(Author)
1277.         old_field = Author._meta.get_field('id')
1278.         new_field = SmallAutoField(primary_key=True)
1279.         new_field.set_attributes_from_name('id')
1280.         new_field.model = Author
1281.         with connection.schema_editor() as editor:
1282.             editor.alter_field(Author, old_field, new_field, strict=True)
1283. 
1284.         Author.objects.create(name='Foo', pk=1)
1285.         with connection.cursor() as cursor:
1286.             sequence_reset_sqls = connection.ops.sequence_reset_sql(no_style(), [Author])
1287.             if sequence_reset_sqls:
1288.                 cursor.execute(sequence_reset_sqls[0])
1289.         # Fail on PostgreSQL if sequence is missing an owner.
1290.         self.assertIsNotNone(Author.objects.create(name='Bar'))
1291. 
1292.     def test_alter_int_pk_to_autofield_pk(self):
1293.         """
1294.         Should be able to rename an IntegerField(primary_key=True) to
1295.         AutoField(primary_key=True).
1296.         """
1297.         with connection.schema_editor() as editor:
1298.             editor.create_model(IntegerPK)
1299. 
1300.         old_field = IntegerPK._meta.get_field('i')
1301.         new_field = AutoField(primary_key=True)
1302.         new_field.model = IntegerPK
1303.         new_field.set_attributes_from_name('i')
1304. 
1305.         with connection.schema_editor() as editor:
1306.             editor.alter_field(IntegerPK, old_field, new_field, strict=True)
1307. 
1308.     def test_alter_int_pk_to_bigautofield_pk(self):
1309.         """
1310.         Should be able to rename an IntegerField(primary_key=True) to
1311.         BigAutoField(primary_key=True).
1312.         """
1313.         with connection.schema_editor() as editor:
1314.             editor.create_model(IntegerPK)
1315. 
1316.         old_field = IntegerPK._meta.get_field('i')
1317.         new_field = BigAutoField(primary_key=True)
1318.         new_field.model = IntegerPK
1319.         new_field.set_attributes_from_name('i')
1320. 
1321.         with connection.schema_editor() as editor:
1322.             editor.alter_field(IntegerPK, old_field, new_field, strict=True)
1323. 
1324.     @isolate_apps('schema')
1325.     def test_alter_smallint_pk_to_smallautofield_pk(self):
1326.         """
1327.         Should be able to rename an SmallIntegerField(primary_key=True) to
1328.         SmallAutoField(primary_key=True).
1329.         """
1330.         class SmallIntegerPK(Model):
1331.             i = SmallIntegerField(primary_key=True)
1332. 
1333.             class Meta:
1334.                 app_label = 'schema'
1335. 
1336.         with connection.schema_editor() as editor:
1337.             editor.create_model(SmallIntegerPK)
1338.         self.isolated_local_models = [SmallIntegerPK]
1339.         old_field = SmallIntegerPK._meta.get_field('i')
1340.         new_field = SmallAutoField(primary_key=True)
1341.         new_field.model = SmallIntegerPK
1342.         new_field.set_attributes_from_name('i')
1343.         with connection.schema_editor() as editor:
1344.             editor.alter_field(SmallIntegerPK, old_field, new_field, strict=True)
1345. 
1346.     def test_alter_int_pk_to_int_unique(self):
1347.         """
1348.         Should be able to rename an IntegerField(primary_key=True) to
1349.         IntegerField(unique=True).
1350.         """
1351.         with connection.schema_editor() as editor:
1352.             editor.create_model(IntegerPK)
1353.         # Delete the old PK
1354.         old_field = IntegerPK._meta.get_field('i')
1355.         new_field = IntegerField(unique=True)
1356.         new_field.model = IntegerPK
1357.         new_field.set_attributes_from_name('i')
1358.         with connection.schema_editor() as editor:
1359.             editor.alter_field(IntegerPK, old_field, new_field, strict=True)
1360.         # The primary key constraint is gone. Result depends on database:
1361.         # 'id' for SQLite, None for others (must not be 'i').
1362.         self.assertIn(self.get_primary_key(IntegerPK._meta.db_table), ('id', None))
1363. 
1364.         # Set up a model class as it currently stands. The original IntegerPK
1365.         # class is now out of date and some backends make use of the whole
1366.         # model class when modifying a field (such as sqlite3 when remaking a
1367.         # table) so an outdated model class leads to incorrect results.
1368.         class Transitional(Model):
1369.             i = IntegerField(unique=True)
1370.             j = IntegerField(unique=True)
1371. 
1372.             class Meta:
1373.                 app_label = 'schema'
1374.                 apps = new_apps
1375.                 db_table = 'INTEGERPK'
1376. 
1377.         # model requires a new PK
1378.         old_field = Transitional._meta.get_field('j')
1379.         new_field = IntegerField(primary_key=True)
1380.         new_field.model = Transitional
1381.         new_field.set_attributes_from_name('j')
1382. 
1383.         with connection.schema_editor() as editor:
1384.             editor.alter_field(Transitional, old_field, new_field, strict=True)
1385. 
1386.         # Create a model class representing the updated model.
1387.         class IntegerUnique(Model):
1388.             i = IntegerField(unique=True)
1389.             j = IntegerField(primary_key=True)
1390. 
1391.             class Meta:
1392.                 app_label = 'schema'
1393.                 apps = new_apps
1394.                 db_table = 'INTEGERPK'
1395. 
1396.         # Ensure unique constraint works.
1397.         IntegerUnique.objects.create(i=1, j=1)
1398.         with self.assertRaises(IntegrityError):
1399.             IntegerUnique.objects.create(i=1, j=2)
1400. 
1401.     def test_rename(self):
1402.         """
1403.         Tests simple altering of fields
1404.         """
1405.         # Create the table
1406.         with connection.schema_editor() as editor:
1407.             editor.create_model(Author)
1408.         # Ensure the field is right to begin with
1409.         columns = self.column_classes(Author)
1410.         self.assertEqual(columns['name'][0], "CharField")
1411.         self.assertNotIn("display_name", columns)
1412.         # Alter the name field's name
1413.         old_field = Author._meta.get_field("name")
1414.         new_field = CharField(max_length=254)
1415.         new_field.set_attributes_from_name("display_name")
1416.         with connection.schema_editor() as editor:
1417.             editor.alter_field(Author, old_field, new_field, strict=True)
1418.         # Ensure the field is right afterwards
1419.         columns = self.column_classes(Author)
1420.         self.assertEqual(columns['display_name'][0], "CharField")
1421.         self.assertNotIn("name", columns)
1422. 
1423.     @isolate_apps('schema')
1424.     def test_rename_referenced_field(self):
1425.         class Author(Model):
1426.             name = CharField(max_length=255, unique=True)
1427. 
1428.             class Meta:
1429.                 app_label = 'schema'
1430. 
1431.         class Book(Model):
1432.             author = ForeignKey(Author, CASCADE, to_field='name')
1433. 
1434.             class Meta:
1435.                 app_label = 'schema'
1436. 
1437.         with connection.schema_editor() as editor:
1438.             editor.create_model(Author)
1439.             editor.create_model(Book)
1440.         new_field = CharField(max_length=255, unique=True)
1441.         new_field.set_attributes_from_name('renamed')
1442.         with connection.schema_editor(atomic=connection.features.supports_atomic_references_rename) as editor:
1443.             editor.alter_field(Author, Author._meta.get_field('name'), new_field)
1444.         # Ensure the foreign key reference was updated.
1445.         self.assertForeignKeyExists(Book, 'author_id', 'schema_author', 'renamed')
1446. 
1447.     @skipIfDBFeature('interprets_empty_strings_as_nulls')
1448.     def test_rename_keep_null_status(self):
1449.         """
1450.         Renaming a field shouldn't affect the not null status.
1451.         """
1452.         with connection.schema_editor() as editor:
1453.             editor.create_model(Note)
1454.         with self.assertRaises(IntegrityError):
1455.             Note.objects.create(info=None)
1456.         old_field = Note._meta.get_field("info")
1457.         new_field = TextField()
1458.         new_field.set_attributes_from_name("detail_info")
1459.         with connection.schema_editor() as editor:
1460.             editor.alter_field(Note, old_field, new_field, strict=True)
1461.         columns = self.column_classes(Note)
1462.         self.assertEqual(columns['detail_info'][0], "TextField")
1463.         self.assertNotIn("info", columns)
1464.         with self.assertRaises(IntegrityError):
1465.             NoteRename.objects.create(detail_info=None)
1466. 
1467.     def _test_m2m_create(self, M2MFieldClass):
1468.         """
1469.         Tests M2M fields on models during creation
1470.         """
1471.         class LocalBookWithM2M(Model):
1472.             author = ForeignKey(Author, CASCADE)
1473.             title = CharField(max_length=100, db_index=True)
1474.             pub_date = DateTimeField()
1475.             tags = M2MFieldClass("TagM2MTest", related_name="books")
1476. 
1477.             class Meta:
1478.                 app_label = 'schema'
1479.                 apps = new_apps
1480.         self.local_models = [LocalBookWithM2M]
1481.         # Create the tables
1482.         with connection.schema_editor() as editor:
1483.             editor.create_model(Author)
1484.             editor.create_model(TagM2MTest)
1485.             editor.create_model(LocalBookWithM2M)
1486.         # Ensure there is now an m2m table there
1487.         columns = self.column_classes(LocalBookWithM2M._meta.get_field("tags").remote_field.through)
1488.         self.assertEqual(columns['tagm2mtest_id'][0], "IntegerField")
1489. 
1490.     def test_m2m_create(self):
1491.         self._test_m2m_create(ManyToManyField)
1492. 
1493.     def test_m2m_create_custom(self):
1494.         self._test_m2m_create(CustomManyToManyField)
1495. 
1496.     def test_m2m_create_inherited(self):
1497.         self._test_m2m_create(InheritedManyToManyField)
1498. 
1499.     def _test_m2m_create_through(self, M2MFieldClass):
1500.         """
1501.         Tests M2M fields on models during creation with through models
1502.         """
1503.         class LocalTagThrough(Model):
1504.             book = ForeignKey("schema.LocalBookWithM2MThrough", CASCADE)
1505.             tag = ForeignKey("schema.TagM2MTest", CASCADE)
1506. 
1507.             class Meta:
1508.                 app_label = 'schema'
1509.                 apps = new_apps
1510. 
1511.         class LocalBookWithM2MThrough(Model):
1512.             tags = M2MFieldClass("TagM2MTest", related_name="books", through=LocalTagThrough)
1513. 
1514.             class Meta:
1515.                 app_label = 'schema'
1516.                 apps = new_apps
1517. 
1518.         self.local_models = [LocalTagThrough, LocalBookWithM2MThrough]
1519. 
1520.         # Create the tables
1521.         with connection.schema_editor() as editor:
1522.             editor.create_model(LocalTagThrough)
1523.             editor.create_model(TagM2MTest)
1524.             editor.create_model(LocalBookWithM2MThrough)
1525.         # Ensure there is now an m2m table there
1526.         columns = self.column_classes(LocalTagThrough)
1527.         self.assertEqual(columns['book_id'][0], "IntegerField")
1528.         self.assertEqual(columns['tag_id'][0], "IntegerField")
1529. 
1530.     def test_m2m_create_through(self):
1531.         self._test_m2m_create_through(ManyToManyField)
1532. 
1533.     def test_m2m_create_through_custom(self):
1534.         self._test_m2m_create_through(CustomManyToManyField)
1535. 
1536.     def test_m2m_create_through_inherited(self):
1537.         self._test_m2m_create_through(InheritedManyToManyField)
1538. 
1539.     def _test_m2m(self, M2MFieldClass):
1540.         """
1541.         Tests adding/removing M2M fields on models
1542.         """
1543.         class LocalAuthorWithM2M(Model):
1544.             name = CharField(max_length=255)
1545. 
1546.             class Meta:
1547.                 app_label = 'schema'
1548.                 apps = new_apps
1549. 
1550.         self.local_models = [LocalAuthorWithM2M]
1551. 
1552.         # Create the tables
1553.         with connection.schema_editor() as editor:
1554.             editor.create_model(LocalAuthorWithM2M)
1555.             editor.create_model(TagM2MTest)
1556.         # Create an M2M field
1557.         new_field = M2MFieldClass("schema.TagM2MTest", related_name="authors")
1558.         new_field.contribute_to_class(LocalAuthorWithM2M, "tags")
1559.         # Ensure there's no m2m table there
1560.         with self.assertRaises(DatabaseError):
1561.             self.column_classes(new_field.remote_field.through)
1562.         # Add the field
1563.         with connection.schema_editor() as editor:
1564.             editor.add_field(LocalAuthorWithM2M, new_field)
1565.         # Ensure there is now an m2m table there
1566.         columns = self.column_classes(new_field.remote_field.through)
1567.         self.assertEqual(columns['tagm2mtest_id'][0], "IntegerField")
1568. 
1569.         # "Alter" the field. This should not rename the DB table to itself.
1570.         with connection.schema_editor() as editor:
1571.             editor.alter_field(LocalAuthorWithM2M, new_field, new_field, strict=True)
1572. 
1573.         # Remove the M2M table again
1574.         with connection.schema_editor() as editor:
1575.             editor.remove_field(LocalAuthorWithM2M, new_field)
1576.         # Ensure there's no m2m table there
1577.         with self.assertRaises(DatabaseError):
1578.             self.column_classes(new_field.remote_field.through)
1579. 
1580.         # Make sure the model state is coherent with the table one now that
1581.         # we've removed the tags field.
1582.         opts = LocalAuthorWithM2M._meta
1583.         opts.local_many_to_many.remove(new_field)
1584.         del new_apps.all_models['schema'][new_field.remote_field.through._meta.model_name]
1585.         opts._expire_cache()
1586. 
1587.     def test_m2m(self):
1588.         self._test_m2m(ManyToManyField)
1589. 
1590.     def test_m2m_custom(self):
1591.         self._test_m2m(CustomManyToManyField)
1592. 
1593.     def test_m2m_inherited(self):
1594.         self._test_m2m(InheritedManyToManyField)
1595. 
1596.     def _test_m2m_through_alter(self, M2MFieldClass):
1597.         """
1598.         Tests altering M2Ms with explicit through models (should no-op)
1599.         """
1600.         class LocalAuthorTag(Model):
1601.             author = ForeignKey("schema.LocalAuthorWithM2MThrough", CASCADE)
1602.             tag = ForeignKey("schema.TagM2MTest", CASCADE)
1603. 
1604.             class Meta:
1605.                 app_label = 'schema'
1606.                 apps = new_apps
1607. 
1608.         class LocalAuthorWithM2MThrough(Model):
1609.             name = CharField(max_length=255)
1610.             tags = M2MFieldClass("schema.TagM2MTest", related_name="authors", through=LocalAuthorTag)
1611. 
1612.             class Meta:
1613.                 app_label = 'schema'
1614.                 apps = new_apps
1615. 
1616.         self.local_models = [LocalAuthorTag, LocalAuthorWithM2MThrough]
1617. 
1618.         # Create the tables
1619.         with connection.schema_editor() as editor:
1620.             editor.create_model(LocalAuthorTag)
1621.             editor.create_model(LocalAuthorWithM2MThrough)
1622.             editor.create_model(TagM2MTest)
1623.         # Ensure the m2m table is there
1624.         self.assertEqual(len(self.column_classes(LocalAuthorTag)), 3)
1625.         # "Alter" the field's blankness. This should not actually do anything.
1626.         old_field = LocalAuthorWithM2MThrough._meta.get_field("tags")
1627.         new_field = M2MFieldClass("schema.TagM2MTest", related_name="authors", through=LocalAuthorTag)
1628.         new_field.contribute_to_class(LocalAuthorWithM2MThrough, "tags")
1629.         with connection.schema_editor() as editor:
1630.             editor.alter_field(LocalAuthorWithM2MThrough, old_field, new_field, strict=True)
1631.         # Ensure the m2m table is still there
1632.         self.assertEqual(len(self.column_classes(LocalAuthorTag)), 3)
1633. 
1634.     def test_m2m_through_alter(self):
1635.         self._test_m2m_through_alter(ManyToManyField)
1636. 
1637.     def test_m2m_through_alter_custom(self):
1638.         self._test_m2m_through_alter(CustomManyToManyField)
1639. 
1640.     def test_m2m_through_alter_inherited(self):
1641.         self._test_m2m_through_alter(InheritedManyToManyField)
1642. 
1643.     def _test_m2m_repoint(self, M2MFieldClass):
1644.         """
1645.         Tests repointing M2M fields
1646.         """
1647.         class LocalBookWithM2M(Model):
1648.             author = ForeignKey(Author, CASCADE)
1649.             title = CharField(max_length=100, db_index=True)
1650.             pub_date = DateTimeField()
1651.             tags = M2MFieldClass("TagM2MTest", related_name="books")
1652. 
1653.             class Meta:
1654.                 app_label = 'schema'
1655.                 apps = new_apps
1656.         self.local_models = [LocalBookWithM2M]
1657.         # Create the tables
1658.         with connection.schema_editor() as editor:
1659.             editor.create_model(Author)
1660.             editor.create_model(LocalBookWithM2M)
1661.             editor.create_model(TagM2MTest)
1662.             editor.create_model(UniqueTest)
1663.         # Ensure the M2M exists and points to TagM2MTest
1664.         if connection.features.supports_foreign_keys:
1665.             self.assertForeignKeyExists(
1666.                 LocalBookWithM2M._meta.get_field("tags").remote_field.through,
1667.                 'tagm2mtest_id',
1668.                 'schema_tagm2mtest',
1669.             )
1670.         # Repoint the M2M
1671.         old_field = LocalBookWithM2M._meta.get_field("tags")
1672.         new_field = M2MFieldClass(UniqueTest)
1673.         new_field.contribute_to_class(LocalBookWithM2M, "uniques")
1674.         with connection.schema_editor() as editor:
1675.             editor.alter_field(LocalBookWithM2M, old_field, new_field, strict=True)
1676.         # Ensure old M2M is gone
1677.         with self.assertRaises(DatabaseError):
1678.             self.column_classes(LocalBookWithM2M._meta.get_field("tags").remote_field.through)
1679. 
1680.         # This model looks like the new model and is used for teardown.
1681.         opts = LocalBookWithM2M._meta
1682.         opts.local_many_to_many.remove(old_field)
1683.         # Ensure the new M2M exists and points to UniqueTest
1684.         if connection.features.supports_foreign_keys:
1685.             self.assertForeignKeyExists(new_field.remote_field.through, 'uniquetest_id', 'schema_uniquetest')
1686. 
1687.     def test_m2m_repoint(self):
1688.         self._test_m2m_repoint(ManyToManyField)
1689. 
1690.     def test_m2m_repoint_custom(self):
1691.         self._test_m2m_repoint(CustomManyToManyField)
1692. 
1693.     def test_m2m_repoint_inherited(self):
1694.         self._test_m2m_repoint(InheritedManyToManyField)
1695. 
1696.     @isolate_apps('schema')
1697.     def test_m2m_rename_field_in_target_model(self):
1698.         class LocalTagM2MTest(Model):
1699.             title = CharField(max_length=255)
1700. 
1701.             class Meta:
1702.                 app_label = 'schema'
1703. 
1704.         class LocalM2M(Model):
1705.             tags = ManyToManyField(LocalTagM2MTest)
1706. 
1707.             class Meta:
1708.                 app_label = 'schema'
1709. 
1710.         # Create the tables.
1711.         with connection.schema_editor() as editor:
1712.             editor.create_model(LocalM2M)
1713.             editor.create_model(LocalTagM2MTest)
1714.         self.isolated_local_models = [LocalM2M, LocalTagM2MTest]
1715.         # Ensure the m2m table is there.
1716.         self.assertEqual(len(self.column_classes(LocalM2M)), 1)
1717.         # Alter a field in LocalTagM2MTest.
1718.         old_field = LocalTagM2MTest._meta.get_field('title')
1719.         new_field = CharField(max_length=254)
1720.         new_field.contribute_to_class(LocalTagM2MTest, 'title1')
1721.         # @isolate_apps() and inner models are needed to have the model
1722.         # relations populated, otherwise this doesn't act as a regression test.
1723.         self.assertEqual(len(new_field.model._meta.related_objects), 1)
1724.         with connection.schema_editor() as editor:
1725.             editor.alter_field(LocalTagM2MTest, old_field, new_field, strict=True)
1726.         # Ensure the m2m table is still there.
1727.         self.assertEqual(len(self.column_classes(LocalM2M)), 1)
1728. 
1729.     @skipUnlessDBFeature('supports_column_check_constraints', 'can_introspect_check_constraints')
1730.     def test_check_constraints(self):
1731.         """
1732.         Tests creating/deleting CHECK constraints
1733.         """
1734.         # Create the tables
1735.         with connection.schema_editor() as editor:
1736.             editor.create_model(Author)
1737.         # Ensure the constraint exists
1738.         constraints = self.get_constraints(Author._meta.db_table)
1739.         if not any(details['columns'] == ['height'] and details['check'] for details in constraints.values()):
1740.             self.fail("No check constraint for height found")
1741.         # Alter the column to remove it
1742.         old_field = Author._meta.get_field("height")
1743.         new_field = IntegerField(null=True, blank=True)
1744.         new_field.set_attributes_from_name("height")
1745.         with connection.schema_editor() as editor:
1746.             editor.alter_field(Author, old_field, new_field, strict=True)
1747.         constraints = self.get_constraints(Author._meta.db_table)
1748.         for details in constraints.values():
1749.             if details['columns'] == ["height"] and details['check']:
1750.                 self.fail("Check constraint for height found")
1751.         # Alter the column to re-add it
1752.         new_field2 = Author._meta.get_field("height")
1753.         with connection.schema_editor() as editor:
1754.             editor.alter_field(Author, new_field, new_field2, strict=True)
1755.         constraints = self.get_constraints(Author._meta.db_table)
1756.         if not any(details['columns'] == ['height'] and details['check'] for details in constraints.values()):
1757.             self.fail("No check constraint for height found")
1758. 
1759.     @skipUnlessDBFeature('supports_column_check_constraints', 'can_introspect_check_constraints')
1760.     def test_remove_field_check_does_not_remove_meta_constraints(self):
1761.         with connection.schema_editor() as editor:
1762.             editor.create_model(Author)
1763.         # Add the custom check constraint
1764.         constraint = CheckConstraint(check=Q(height__gte=0), name='author_height_gte_0_check')
1765.         custom_constraint_name = constraint.name
1766.         Author._meta.constraints = [constraint]
1767.         with connection.schema_editor() as editor:
1768.             editor.add_constraint(Author, constraint)
1769.         # Ensure the constraints exist
1770.         constraints = self.get_constraints(Author._meta.db_table)
1771.         self.assertIn(custom_constraint_name, constraints)
1772.         other_constraints = [
1773.             name for name, details in constraints.items()
1774.             if details['columns'] == ['height'] and details['check'] and name != custom_constraint_name
1775.         ]
1776.         self.assertEqual(len(other_constraints), 1)
1777.         # Alter the column to remove field check
1778.         old_field = Author._meta.get_field('height')
1779.         new_field = IntegerField(null=True, blank=True)
1780.         new_field.set_attributes_from_name('height')
1781.         with connection.schema_editor() as editor:
1782.             editor.alter_field(Author, old_field, new_field, strict=True)
1783.         constraints = self.get_constraints(Author._meta.db_table)
1784.         self.assertIn(custom_constraint_name, constraints)
1785.         other_constraints = [
1786.             name for name, details in constraints.items()
1787.             if details['columns'] == ['height'] and details['check'] and name != custom_constraint_name
1788.         ]
1789.         self.assertEqual(len(other_constraints), 0)
1790.         # Alter the column to re-add field check
1791.         new_field2 = Author._meta.get_field('height')
1792.         with connection.schema_editor() as editor:
1793.             editor.alter_field(Author, new_field, new_field2, strict=True)
1794.         constraints = self.get_constraints(Author._meta.db_table)
1795.         self.assertIn(custom_constraint_name, constraints)
1796.         other_constraints = [
1797.             name for name, details in constraints.items()
1798.             if details['columns'] == ['height'] and details['check'] and name != custom_constraint_name
1799.         ]
1800.         self.assertEqual(len(other_constraints), 1)
1801.         # Drop the check constraint
1802.         with connection.schema_editor() as editor:
1803.             Author._meta.constraints = []
1804.             editor.remove_constraint(Author, constraint)
1805. 
1806.     def test_unique(self):
1807.         """
1808.         Tests removing and adding unique constraints to a single column.
1809.         """
1810.         # Create the table
1811.         with connection.schema_editor() as editor:
1812.             editor.create_model(Tag)
1813.         # Ensure the field is unique to begin with
1814.         Tag.objects.create(title="foo", slug="foo")
1815.         with self.assertRaises(IntegrityError):
1816.             Tag.objects.create(title="bar", slug="foo")
1817.         Tag.objects.all().delete()
1818.         # Alter the slug field to be non-unique
1819.         old_field = Tag._meta.get_field("slug")
1820.         new_field = SlugField(unique=False)
1821.         new_field.set_attributes_from_name("slug")
1822.         with connection.schema_editor() as editor:
1823.             editor.alter_field(Tag, old_field, new_field, strict=True)
1824.         # Ensure the field is no longer unique
1825.         Tag.objects.create(title="foo", slug="foo")
1826.         Tag.objects.create(title="bar", slug="foo")
1827.         Tag.objects.all().delete()
1828.         # Alter the slug field to be unique
1829.         new_field2 = SlugField(unique=True)
1830.         new_field2.set_attributes_from_name("slug")
1831.         with connection.schema_editor() as editor:
1832.             editor.alter_field(Tag, new_field, new_field2, strict=True)
1833.         # Ensure the field is unique again
1834.         Tag.objects.create(title="foo", slug="foo")
1835.         with self.assertRaises(IntegrityError):
1836.             Tag.objects.create(title="bar", slug="foo")
1837.         Tag.objects.all().delete()
1838.         # Rename the field
1839.         new_field3 = SlugField(unique=True)
1840.         new_field3.set_attributes_from_name("slug2")
1841.         with connection.schema_editor() as editor:
1842.             editor.alter_field(Tag, new_field2, new_field3, strict=True)
1843.         # Ensure the field is still unique
1844.         TagUniqueRename.objects.create(title="foo", slug2="foo")
1845.         with self.assertRaises(IntegrityError):
1846.             TagUniqueRename.objects.create(title="bar", slug2="foo")
1847.         Tag.objects.all().delete()
1848. 
1849.     def test_unique_name_quoting(self):
1850.         old_table_name = TagUniqueRename._meta.db_table
1851.         try:
1852.             with connection.schema_editor() as editor:
1853.                 editor.create_model(TagUniqueRename)
1854.                 editor.alter_db_table(TagUniqueRename, old_table_name, 'unique-table')
1855.                 TagUniqueRename._meta.db_table = 'unique-table'
1856.                 # This fails if the unique index name isn't quoted.
1857.                 editor.alter_unique_together(TagUniqueRename, [], (('title', 'slug2'),))
1858.         finally:
1859.             TagUniqueRename._meta.db_table = old_table_name
1860. 
1861.     @isolate_apps('schema')
1862.     @unittest.skipIf(connection.vendor == 'sqlite', 'SQLite naively remakes the table on field alteration.')
1863.     @skipUnlessDBFeature('supports_foreign_keys')
1864.     def test_unique_no_unnecessary_fk_drops(self):
1865.         """
1866.         If AlterField isn't selective about dropping foreign key constraints
1867.         when modifying a field with a unique constraint, the AlterField
1868.         incorrectly drops and recreates the Book.author foreign key even though
1869.         it doesn't restrict the field being changed (#29193).
1870.         """
1871.         class Author(Model):
1872.             name = CharField(max_length=254, unique=True)
1873. 
1874.             class Meta:
1875.                 app_label = 'schema'
1876. 
1877.         class Book(Model):
1878.             author = ForeignKey(Author, CASCADE)
1879. 
1880.             class Meta:
1881.                 app_label = 'schema'
1882. 
1883.         with connection.schema_editor() as editor:
1884.             editor.create_model(Author)
1885.             editor.create_model(Book)
1886.         new_field = CharField(max_length=255, unique=True)
1887.         new_field.model = Author
1888.         new_field.set_attributes_from_name('name')
1889.         with self.assertLogs('django.db.backends.schema', 'DEBUG') as cm:
1890.             with connection.schema_editor() as editor:
1891.                 editor.alter_field(Author, Author._meta.get_field('name'), new_field)
1892.         # One SQL statement is executed to alter the field.
1893.         self.assertEqual(len(cm.records), 1)
1894. 
1895.     @isolate_apps('schema')
1896.     @unittest.skipIf(connection.vendor == 'sqlite', 'SQLite remakes the table on field alteration.')
1897.     def test_unique_and_reverse_m2m(self):
1898.         """
1899.         AlterField can modify a unique field when there's a reverse M2M
1900.         relation on the model.
1901.         """
1902.         class Tag(Model):
1903.             title = CharField(max_length=255)
1904.             slug = SlugField(unique=True)
1905. 
1906.             class Meta:
1907.                 app_label = 'schema'
1908. 
1909.         class Book(Model):
1910.             tags = ManyToManyField(Tag, related_name='books')
1911. 
1912.             class Meta:
1913.                 app_label = 'schema'
1914. 
1915.         self.isolated_local_models = [Book._meta.get_field('tags').remote_field.through]
1916.         with connection.schema_editor() as editor:
1917.             editor.create_model(Tag)
1918.             editor.create_model(Book)
1919.         new_field = SlugField(max_length=75, unique=True)
1920.         new_field.model = Tag
1921.         new_field.set_attributes_from_name('slug')
1922.         with self.assertLogs('django.db.backends.schema', 'DEBUG') as cm:
1923.             with connection.schema_editor() as editor:
1924.                 editor.alter_field(Tag, Tag._meta.get_field('slug'), new_field)
1925.         # One SQL statement is executed to alter the field.
1926.         self.assertEqual(len(cm.records), 1)
1927.         # Ensure that the field is still unique.
1928.         Tag.objects.create(title='foo', slug='foo')
1929.         with self.assertRaises(IntegrityError):
1930.             Tag.objects.create(title='bar', slug='foo')
1931. 
1932.     @skipUnlessDBFeature('allows_multiple_constraints_on_same_fields')
1933.     def test_remove_field_unique_does_not_remove_meta_constraints(self):
1934.         with connection.schema_editor() as editor:
1935.             editor.create_model(AuthorWithUniqueName)
1936.         # Add the custom unique constraint
1937.         constraint = UniqueConstraint(fields=['name'], name='author_name_uniq')
1938.         custom_constraint_name = constraint.name
1939.         AuthorWithUniqueName._meta.constraints = [constraint]
1940.         with connection.schema_editor() as editor:
1941.             editor.add_constraint(AuthorWithUniqueName, constraint)
1942.         # Ensure the constraints exist
1943.         constraints = self.get_constraints(AuthorWithUniqueName._meta.db_table)
1944.         self.assertIn(custom_constraint_name, constraints)
1945.         other_constraints = [
1946.             name for name, details in constraints.items()
1947.             if details['columns'] == ['name'] and details['unique'] and name != custom_constraint_name
1948.         ]
1949.         self.assertEqual(len(other_constraints), 1)
1950.         # Alter the column to remove field uniqueness
1951.         old_field = AuthorWithUniqueName._meta.get_field('name')
1952.         new_field = CharField(max_length=255)
1953.         new_field.set_attributes_from_name('name')
1954.         with connection.schema_editor() as editor:
1955.             editor.alter_field(AuthorWithUniqueName, old_field, new_field, strict=True)
1956.         constraints = self.get_constraints(AuthorWithUniqueName._meta.db_table)
1957.         self.assertIn(custom_constraint_name, constraints)
1958.         other_constraints = [
1959.             name for name, details in constraints.items()
1960.             if details['columns'] == ['name'] and details['unique'] and name != custom_constraint_name
1961.         ]
1962.         self.assertEqual(len(other_constraints), 0)
1963.         # Alter the column to re-add field uniqueness
1964.         new_field2 = AuthorWithUniqueName._meta.get_field('name')
1965.         with connection.schema_editor() as editor:
1966.             editor.alter_field(AuthorWithUniqueName, new_field, new_field2, strict=True)
1967.         constraints = self.get_constraints(AuthorWithUniqueName._meta.db_table)
1968.         self.assertIn(custom_constraint_name, constraints)
1969.         other_constraints = [
1970.             name for name, details in constraints.items()
1971.             if details['columns'] == ['name'] and details['unique'] and name != custom_constraint_name
1972.         ]
1973.         self.assertEqual(len(other_constraints), 1)
1974.         # Drop the unique constraint
1975.         with connection.schema_editor() as editor:
1976.             AuthorWithUniqueName._meta.constraints = []
1977.             editor.remove_constraint(AuthorWithUniqueName, constraint)
1978. 
1979.     def test_unique_together(self):
1980.         """
1981.         Tests removing and adding unique_together constraints on a model.
1982.         """
1983.         # Create the table
1984.         with connection.schema_editor() as editor:
1985.             editor.create_model(UniqueTest)
1986.         # Ensure the fields are unique to begin with
1987.         UniqueTest.objects.create(year=2012, slug="foo")
1988.         UniqueTest.objects.create(year=2011, slug="foo")
1989.         UniqueTest.objects.create(year=2011, slug="bar")
1990.         with self.assertRaises(IntegrityError):
1991.             UniqueTest.objects.create(year=2012, slug="foo")
1992.         UniqueTest.objects.all().delete()
1993.         # Alter the model to its non-unique-together companion
1994.         with connection.schema_editor() as editor:
1995.             editor.alter_unique_together(UniqueTest, UniqueTest._meta.unique_together, [])
1996.         # Ensure the fields are no longer unique
1997.         UniqueTest.objects.create(year=2012, slug="foo")
1998.         UniqueTest.objects.create(year=2012, slug="foo")
1999.         UniqueTest.objects.all().delete()
2000.         # Alter it back
2001.         new_field2 = SlugField(unique=True)
2002.         new_field2.set_attributes_from_name("slug")
2003.         with connection.schema_editor() as editor:
2004.             editor.alter_unique_together(UniqueTest, [], UniqueTest._meta.unique_together)
2005.         # Ensure the fields are unique again
2006.         UniqueTest.objects.create(year=2012, slug="foo")
2007.         with self.assertRaises(IntegrityError):
2008.             UniqueTest.objects.create(year=2012, slug="foo")
2009.         UniqueTest.objects.all().delete()
2010. 
2011.     def test_unique_together_with_fk(self):
2012.         """
2013.         Tests removing and adding unique_together constraints that include
2014.         a foreign key.
2015.         """
2016.         # Create the table
2017.         with connection.schema_editor() as editor:
2018.             editor.create_model(Author)
2019.             editor.create_model(Book)
2020.         # Ensure the fields are unique to begin with
2021.         self.assertEqual(Book._meta.unique_together, ())
2022.         # Add the unique_together constraint
2023.         with connection.schema_editor() as editor:
2024.             editor.alter_unique_together(Book, [], [['author', 'title']])
2025.         # Alter it back
2026.         with connection.schema_editor() as editor:
2027.             editor.alter_unique_together(Book, [['author', 'title']], [])
2028. 
2029.     def test_unique_together_with_fk_with_existing_index(self):
2030.         """
2031.         Tests removing and adding unique_together constraints that include
2032.         a foreign key, where the foreign key is added after the model is
2033.         created.
2034.         """
2035.         # Create the tables
2036.         with connection.schema_editor() as editor:
2037.             editor.create_model(Author)
2038.             editor.create_model(BookWithoutAuthor)
2039.             new_field = ForeignKey(Author, CASCADE)
2040.             new_field.set_attributes_from_name('author')
2041.             editor.add_field(BookWithoutAuthor, new_field)
2042.         # Ensure the fields aren't unique to begin with
2043.         self.assertEqual(Book._meta.unique_together, ())
2044.         # Add the unique_together constraint
2045.         with connection.schema_editor() as editor:
2046.             editor.alter_unique_together(Book, [], [['author', 'title']])
2047.         # Alter it back
2048.         with connection.schema_editor() as editor:
2049.             editor.alter_unique_together(Book, [['author', 'title']], [])
2050. 
2051.     @skipUnlessDBFeature('allows_multiple_constraints_on_same_fields')
2052.     def test_remove_unique_together_does_not_remove_meta_constraints(self):
2053.         with connection.schema_editor() as editor:
2054.             editor.create_model(AuthorWithUniqueNameAndBirthday)
2055.         # Add the custom unique constraint
2056.         constraint = UniqueConstraint(fields=['name', 'birthday'], name='author_name_birthday_uniq')
2057.         custom_constraint_name = constraint.name
2058.         AuthorWithUniqueNameAndBirthday._meta.constraints = [constraint]
2059.         with connection.schema_editor() as editor:
2060.             editor.add_constraint(AuthorWithUniqueNameAndBirthday, constraint)
2061.         # Ensure the constraints exist
2062.         constraints = self.get_constraints(AuthorWithUniqueNameAndBirthday._meta.db_table)
2063.         self.assertIn(custom_constraint_name, constraints)
2064.         other_constraints = [
2065.             name for name, details in constraints.items()
2066.             if details['columns'] == ['name', 'birthday'] and details['unique'] and name != custom_constraint_name
2067.         ]
2068.         self.assertEqual(len(other_constraints), 1)
2069.         # Remove unique together
2070.         unique_together = AuthorWithUniqueNameAndBirthday._meta.unique_together
2071.         with connection.schema_editor() as editor:
2072.             editor.alter_unique_together(AuthorWithUniqueNameAndBirthday, unique_together, [])
2073.         constraints = self.get_constraints(AuthorWithUniqueNameAndBirthday._meta.db_table)
2074.         self.assertIn(custom_constraint_name, constraints)
2075.         other_constraints = [
2076.             name for name, details in constraints.items()
2077.             if details['columns'] == ['name', 'birthday'] and details['unique'] and name != custom_constraint_name
2078.         ]
2079.         self.assertEqual(len(other_constraints), 0)
2080.         # Re-add unique together
2081.         with connection.schema_editor() as editor:
2082.             editor.alter_unique_together(AuthorWithUniqueNameAndBirthday, [], unique_together)
2083.         constraints = self.get_constraints(AuthorWithUniqueNameAndBirthday._meta.db_table)
2084.         self.assertIn(custom_constraint_name, constraints)
2085.         other_constraints = [
2086.             name for name, details in constraints.items()
2087.             if details['columns'] == ['name', 'birthday'] and details['unique'] and name != custom_constraint_name
2088.         ]
2089.         self.assertEqual(len(other_constraints), 1)
2090.         # Drop the unique constraint
2091.         with connection.schema_editor() as editor:
2092.             AuthorWithUniqueNameAndBirthday._meta.constraints = []
2093.             editor.remove_constraint(AuthorWithUniqueNameAndBirthday, constraint)
2094. 
2095.     def test_index_together(self):
2096.         """
2097.         Tests removing and adding index_together constraints on a model.
2098.         """
2099.         # Create the table
2100.         with connection.schema_editor() as editor:
2101.             editor.create_model(Tag)
2102.         # Ensure there's no index on the year/slug columns first
2103.         self.assertIs(
2104.             any(
2105.                 c["index"]
2106.                 for c in self.get_constraints("schema_tag").values()
2107.                 if c['columns'] == ["slug", "title"]
2108.             ),
2109.             False,
2110.         )
2111.         # Alter the model to add an index
2112.         with connection.schema_editor() as editor:
2113.             editor.alter_index_together(Tag, [], [("slug", "title")])
2114.         # Ensure there is now an index
2115.         self.assertIs(
2116.             any(
2117.                 c["index"]
2118.                 for c in self.get_constraints("schema_tag").values()
2119.                 if c['columns'] == ["slug", "title"]
2120.             ),
2121.             True,
2122.         )
2123.         # Alter it back
2124.         new_field2 = SlugField(unique=True)
2125.         new_field2.set_attributes_from_name("slug")
2126.         with connection.schema_editor() as editor:
2127.             editor.alter_index_together(Tag, [("slug", "title")], [])
2128.         # Ensure there's no index
2129.         self.assertIs(
2130.             any(
2131.                 c["index"]
2132.                 for c in self.get_constraints("schema_tag").values()
2133.                 if c['columns'] == ["slug", "title"]
2134.             ),
2135.             False,
2136.         )
2137. 
2138.     def test_index_together_with_fk(self):
2139.         """
2140.         Tests removing and adding index_together constraints that include
2141.         a foreign key.
2142.         """
2143.         # Create the table
2144.         with connection.schema_editor() as editor:
2145.             editor.create_model(Author)
2146.             editor.create_model(Book)
2147.         # Ensure the fields are unique to begin with
2148.         self.assertEqual(Book._meta.index_together, ())
2149.         # Add the unique_together constraint
2150.         with connection.schema_editor() as editor:
2151.             editor.alter_index_together(Book, [], [['author', 'title']])
2152.         # Alter it back
2153.         with connection.schema_editor() as editor:
2154.             editor.alter_index_together(Book, [['author', 'title']], [])
2155. 
2156.     def test_create_index_together(self):
2157.         """
2158.         Tests creating models with index_together already defined
2159.         """
2160.         # Create the table
2161.         with connection.schema_editor() as editor:
2162.             editor.create_model(TagIndexed)
2163.         # Ensure there is an index
2164.         self.assertIs(
2165.             any(
2166.                 c["index"]
2167.                 for c in self.get_constraints("schema_tagindexed").values()
2168.                 if c['columns'] == ["slug", "title"]
2169.             ),
2170.             True,
2171.         )
2172. 
2173.     @skipUnlessDBFeature('allows_multiple_constraints_on_same_fields')
2174.     def test_remove_index_together_does_not_remove_meta_indexes(self):
2175.         with connection.schema_editor() as editor:
2176.             editor.create_model(AuthorWithIndexedNameAndBirthday)
2177.         # Add the custom index
2178.         index = Index(fields=['name', 'birthday'], name='author_name_birthday_idx')
2179.         custom_index_name = index.name
2180.         AuthorWithIndexedNameAndBirthday._meta.indexes = [index]
2181.         with connection.schema_editor() as editor:
2182.             editor.add_index(AuthorWithIndexedNameAndBirthday, index)
2183.         # Ensure the indexes exist
2184.         constraints = self.get_constraints(AuthorWithIndexedNameAndBirthday._meta.db_table)
2185.         self.assertIn(custom_index_name, constraints)
2186.         other_constraints = [
2187.             name for name, details in constraints.items()
2188.             if details['columns'] == ['name', 'birthday'] and details['index'] and name != custom_index_name
2189.         ]
2190.         self.assertEqual(len(other_constraints), 1)
2191.         # Remove index together
2192.         index_together = AuthorWithIndexedNameAndBirthday._meta.index_together
2193.         with connection.schema_editor() as editor:
2194.             editor.alter_index_together(AuthorWithIndexedNameAndBirthday, index_together, [])
2195.         constraints = self.get_constraints(AuthorWithIndexedNameAndBirthday._meta.db_table)
2196.         self.assertIn(custom_index_name, constraints)
2197.         other_constraints = [
2198.             name for name, details in constraints.items()
2199.             if details['columns'] == ['name', 'birthday'] and details['index'] and name != custom_index_name
2200.         ]
2201.         self.assertEqual(len(other_constraints), 0)
2202.         # Re-add index together
2203.         with connection.schema_editor() as editor:
2204.             editor.alter_index_together(AuthorWithIndexedNameAndBirthday, [], index_together)
2205.         constraints = self.get_constraints(AuthorWithIndexedNameAndBirthday._meta.db_table)
2206.         self.assertIn(custom_index_name, constraints)
2207.         other_constraints = [
2208.             name for name, details in constraints.items()
2209.             if details['columns'] == ['name', 'birthday'] and details['index'] and name != custom_index_name
2210.         ]
2211.         self.assertEqual(len(other_constraints), 1)
2212.         # Drop the index
2213.         with connection.schema_editor() as editor:
2214.             AuthorWithIndexedNameAndBirthday._meta.indexes = []
2215.             editor.remove_index(AuthorWithIndexedNameAndBirthday, index)
2216. 
2217.     @isolate_apps('schema')
2218.     def test_db_table(self):
2219.         """
2220.         Tests renaming of the table
2221.         """
2222.         class Author(Model):
2223.             name = CharField(max_length=255)
2224. 
2225.             class Meta:
2226.                 app_label = 'schema'
2227. 
2228.         class Book(Model):
2229.             author = ForeignKey(Author, CASCADE)
2230. 
2231.             class Meta:
2232.                 app_label = 'schema'
2233. 
2234.         # Create the table and one referring it.
2235.         with connection.schema_editor() as editor:
2236.             editor.create_model(Author)
2237.             editor.create_model(Book)
2238.         # Ensure the table is there to begin with
2239.         columns = self.column_classes(Author)
2240.         self.assertEqual(columns['name'][0], "CharField")
2241.         # Alter the table
2242.         with connection.schema_editor(atomic=connection.features.supports_atomic_references_rename) as editor:
2243.             editor.alter_db_table(Author, "schema_author", "schema_otherauthor")
2244.         # Ensure the table is there afterwards
2245.         Author._meta.db_table = "schema_otherauthor"
2246.         columns = self.column_classes(Author)
2247.         self.assertEqual(columns['name'][0], "CharField")
2248.         # Ensure the foreign key reference was updated
2249.         self.assertForeignKeyExists(Book, "author_id", "schema_otherauthor")
2250.         # Alter the table again
2251.         with connection.schema_editor(atomic=connection.features.supports_atomic_references_rename) as editor:
2252.             editor.alter_db_table(Author, "schema_otherauthor", "schema_author")
2253.         # Ensure the table is still there
2254.         Author._meta.db_table = "schema_author"
2255.         columns = self.column_classes(Author)
2256.         self.assertEqual(columns['name'][0], "CharField")
2257. 
2258.     def test_add_remove_index(self):
2259.         """
2260.         Tests index addition and removal
2261.         """
2262.         # Create the table
2263.         with connection.schema_editor() as editor:
2264.             editor.create_model(Author)
2265.         # Ensure the table is there and has no index
2266.         self.assertNotIn('title', self.get_indexes(Author._meta.db_table))
2267.         # Add the index
2268.         index = Index(fields=['name'], name='author_title_idx')
2269.         with connection.schema_editor() as editor:
2270.             editor.add_index(Author, index)
2271.         self.assertIn('name', self.get_indexes(Author._meta.db_table))
2272.         # Drop the index
2273.         with connection.schema_editor() as editor:
2274.             editor.remove_index(Author, index)
2275.         self.assertNotIn('name', self.get_indexes(Author._meta.db_table))
2276. 
2277.     def test_remove_db_index_doesnt_remove_custom_indexes(self):
2278.         """
2279.         Changing db_index to False doesn't remove indexes from Meta.indexes.
2280.         """
2281.         with connection.schema_editor() as editor:
2282.             editor.create_model(AuthorWithIndexedName)
2283.         # Ensure the table has its index
2284.         self.assertIn('name', self.get_indexes(AuthorWithIndexedName._meta.db_table))
2285. 
2286.         # Add the custom index
2287.         index = Index(fields=['-name'], name='author_name_idx')
2288.         author_index_name = index.name
2289.         with connection.schema_editor() as editor:
2290.             db_index_name = editor._create_index_name(
2291.                 table_name=AuthorWithIndexedName._meta.db_table,
2292.                 column_names=('name',),
2293.             )
2294.         try:
2295.             AuthorWithIndexedName._meta.indexes = [index]
2296.             with connection.schema_editor() as editor:
2297.                 editor.add_index(AuthorWithIndexedName, index)
2298.             old_constraints = self.get_constraints(AuthorWithIndexedName._meta.db_table)
2299.             self.assertIn(author_index_name, old_constraints)
2300.             self.assertIn(db_index_name, old_constraints)
2301.             # Change name field to db_index=False
2302.             old_field = AuthorWithIndexedName._meta.get_field('name')
2303.             new_field = CharField(max_length=255)
2304.             new_field.set_attributes_from_name('name')
2305.             with connection.schema_editor() as editor:
2306.                 editor.alter_field(AuthorWithIndexedName, old_field, new_field, strict=True)
2307.             new_constraints = self.get_constraints(AuthorWithIndexedName._meta.db_table)
2308.             self.assertNotIn(db_index_name, new_constraints)
2309.             # The index from Meta.indexes is still in the database.
2310.             self.assertIn(author_index_name, new_constraints)
2311.             # Drop the index
2312.             with connection.schema_editor() as editor:
2313.                 editor.remove_index(AuthorWithIndexedName, index)
2314.         finally:
2315.             AuthorWithIndexedName._meta.indexes = []
2316. 
2317.     def test_order_index(self):
2318.         """
2319.         Indexes defined with ordering (ASC/DESC) defined on column
2320.         """
2321.         with connection.schema_editor() as editor:
2322.             editor.create_model(Author)
2323.         # The table doesn't have an index
2324.         self.assertNotIn('title', self.get_indexes(Author._meta.db_table))
2325.         index_name = 'author_name_idx'
2326.         # Add the index
2327.         index = Index(fields=['name', '-weight'], name=index_name)
2328.         with connection.schema_editor() as editor:
2329.             editor.add_index(Author, index)
2330.         if connection.features.supports_index_column_ordering:
2331.             self.assertIndexOrder(Author._meta.db_table, index_name, ['ASC', 'DESC'])
2332.         # Drop the index
2333.         with connection.schema_editor() as editor:
2334.             editor.remove_index(Author, index)
2335. 
2336.     def test_indexes(self):
2337.         """
2338.         Tests creation/altering of indexes
2339.         """
2340.         # Create the table
2341.         with connection.schema_editor() as editor:
2342.             editor.create_model(Author)
2343.             editor.create_model(Book)
2344.         # Ensure the table is there and has the right index
2345.         self.assertIn(
2346.             "title",
2347.             self.get_indexes(Book._meta.db_table),
2348.         )
2349.         # Alter to remove the index
2350.         old_field = Book._meta.get_field("title")
2351.         new_field = CharField(max_length=100, db_index=False)
2352.         new_field.set_attributes_from_name("title")
2353.         with connection.schema_editor() as editor:
2354.             editor.alter_field(Book, old_field, new_field, strict=True)
2355.         # Ensure the table is there and has no index
2356.         self.assertNotIn(
2357.             "title",
2358.             self.get_indexes(Book._meta.db_table),
2359.         )
2360.         # Alter to re-add the index
2361.         new_field2 = Book._meta.get_field("title")
2362.         with connection.schema_editor() as editor:
2363.             editor.alter_field(Book, new_field, new_field2, strict=True)
2364.         # Ensure the table is there and has the index again
2365.         self.assertIn(
2366.             "title",
2367.             self.get_indexes(Book._meta.db_table),
2368.         )
2369.         # Add a unique column, verify that creates an implicit index
2370.         new_field3 = BookWithSlug._meta.get_field("slug")
2371.         with connection.schema_editor() as editor:
2372.             editor.add_field(Book, new_field3)
2373.         self.assertIn(
2374.             "slug",
2375.             self.get_uniques(Book._meta.db_table),
2376.         )
2377.         # Remove the unique, check the index goes with it
2378.         new_field4 = CharField(max_length=20, unique=False)
2379.         new_field4.set_attributes_from_name("slug")
2380.         with connection.schema_editor() as editor:
2381.             editor.alter_field(BookWithSlug, new_field3, new_field4, strict=True)
2382.         self.assertNotIn(
2383.             "slug",
2384.             self.get_uniques(Book._meta.db_table),
2385.         )
2386. 
2387.     def test_text_field_with_db_index(self):
2388.         with connection.schema_editor() as editor:
2389.             editor.create_model(AuthorTextFieldWithIndex)
2390.         # The text_field index is present if the database supports it.
2391.         assertion = self.assertIn if connection.features.supports_index_on_text_field else self.assertNotIn
2392.         assertion('text_field', self.get_indexes(AuthorTextFieldWithIndex._meta.db_table))
2393. 
2394.     def test_primary_key(self):
2395.         """
2396.         Tests altering of the primary key
2397.         """
2398.         # Create the table
2399.         with connection.schema_editor() as editor:
2400.             editor.create_model(Tag)
2401.         # Ensure the table is there and has the right PK
2402.         self.assertEqual(self.get_primary_key(Tag._meta.db_table), 'id')
2403.         # Alter to change the PK
2404.         id_field = Tag._meta.get_field("id")
2405.         old_field = Tag._meta.get_field("slug")
2406.         new_field = SlugField(primary_key=True)
2407.         new_field.set_attributes_from_name("slug")
2408.         new_field.model = Tag
2409.         with connection.schema_editor() as editor:
2410.             editor.remove_field(Tag, id_field)
2411.             editor.alter_field(Tag, old_field, new_field)
2412.         # Ensure the PK changed
2413.         self.assertNotIn(
2414.             'id',
2415.             self.get_indexes(Tag._meta.db_table),
2416.         )
2417.         self.assertEqual(self.get_primary_key(Tag._meta.db_table), 'slug')
2418. 
2419.     def test_context_manager_exit(self):
2420.         """
2421.         Ensures transaction is correctly closed when an error occurs
2422.         inside a SchemaEditor context.
2423.         """
2424.         class SomeError(Exception):
2425.             pass
2426.         try:
2427.             with connection.schema_editor():
2428.                 raise SomeError
2429.         except SomeError:
2430.             self.assertFalse(connection.in_atomic_block)
2431. 
2432.     @skipIfDBFeature('can_rollback_ddl')
2433.     def test_unsupported_transactional_ddl_disallowed(self):
2434.         message = (
2435.             "Executing DDL statements while in a transaction on databases "
2436.             "that can't perform a rollback is prohibited."
2437.         )
2438.         with atomic(), connection.schema_editor() as editor:
2439.             with self.assertRaisesMessage(TransactionManagementError, message):
2440.                 editor.execute(editor.sql_create_table % {'table': 'foo', 'definition': ''})
2441. 
2442.     @skipUnlessDBFeature('supports_foreign_keys')
2443.     def test_foreign_key_index_long_names_regression(self):
2444.         """
2445.         Regression test for #21497.
2446.         Only affects databases that supports foreign keys.
2447.         """
2448.         # Create the table
2449.         with connection.schema_editor() as editor:
2450.             editor.create_model(AuthorWithEvenLongerName)
2451.             editor.create_model(BookWithLongName)
2452.         # Find the properly shortened column name
2453.         column_name = connection.ops.quote_name("author_foreign_key_with_really_long_field_name_id")
2454.         column_name = column_name[1:-1].lower()  # unquote, and, for Oracle, un-upcase
2455.         # Ensure the table is there and has an index on the column
2456.         self.assertIn(
2457.             column_name,
2458.             self.get_indexes(BookWithLongName._meta.db_table),
2459.         )
2460. 
2461.     @skipUnlessDBFeature('supports_foreign_keys')
2462.     def test_add_foreign_key_long_names(self):
2463.         """
2464.         Regression test for #23009.
2465.         Only affects databases that supports foreign keys.
2466.         """
2467.         # Create the initial tables
2468.         with connection.schema_editor() as editor:
2469.             editor.create_model(AuthorWithEvenLongerName)
2470.             editor.create_model(BookWithLongName)
2471.         # Add a second FK, this would fail due to long ref name before the fix
2472.         new_field = ForeignKey(AuthorWithEvenLongerName, CASCADE, related_name="something")
2473.         new_field.set_attributes_from_name("author_other_really_long_named_i_mean_so_long_fk")
2474.         with connection.schema_editor() as editor:
2475.             editor.add_field(BookWithLongName, new_field)
2476. 
2477.     @isolate_apps('schema')
2478.     @skipUnlessDBFeature('supports_foreign_keys')
2479.     def test_add_foreign_key_quoted_db_table(self):
2480.         class Author(Model):
2481.             class Meta:
2482.                 db_table = '"table_author_double_quoted"'
2483.                 app_label = 'schema'
2484. 
2485.         class Book(Model):
2486.             author = ForeignKey(Author, CASCADE)
2487. 
2488.             class Meta:
2489.                 app_label = 'schema'
2490. 
2491.         with connection.schema_editor() as editor:
2492.             editor.create_model(Author)
2493.             editor.create_model(Book)
2494.         if connection.vendor == 'mysql':
2495.             self.assertForeignKeyExists(Book, 'author_id', '"table_author_double_quoted"')
2496.         else:
2497.             self.assertForeignKeyExists(Book, 'author_id', 'table_author_double_quoted')
2498. 
2499.     def test_add_foreign_object(self):
2500.         with connection.schema_editor() as editor:
2501.             editor.create_model(BookForeignObj)
2502. 
2503.         new_field = ForeignObject(Author, on_delete=CASCADE, from_fields=['author_id'], to_fields=['id'])
2504.         new_field.set_attributes_from_name('author')
2505.         with connection.schema_editor() as editor:
2506.             editor.add_field(BookForeignObj, new_field)
2507. 
2508.     def test_creation_deletion_reserved_names(self):
2509.         """
2510.         Tries creating a model's table, and then deleting it when it has a
2511.         SQL reserved name.
2512.         """
2513.         # Create the table
2514.         with connection.schema_editor() as editor:
2515.             try:
2516.                 editor.create_model(Thing)
2517.             except OperationalError as e:
2518.                 self.fail("Errors when applying initial migration for a model "
2519.                           "with a table named after an SQL reserved word: %s" % e)
2520.         # The table is there
2521.         list(Thing.objects.all())
2522.         # Clean up that table
2523.         with connection.schema_editor() as editor:
2524.             editor.delete_model(Thing)
2525.         # The table is gone
2526.         with self.assertRaises(DatabaseError):
2527.             list(Thing.objects.all())
2528. 
2529.     def test_remove_constraints_capital_letters(self):
2530.         """
2531.         #23065 - Constraint names must be quoted if they contain capital letters.
2532.         """
2533.         def get_field(*args, field_class=IntegerField, **kwargs):
2534.             kwargs['db_column'] = "CamelCase"
2535.             field = field_class(*args, **kwargs)
2536.             field.set_attributes_from_name("CamelCase")
2537.             return field
2538. 
2539.         model = Author
2540.         field = get_field()
2541.         table = model._meta.db_table
2542.         column = field.column
2543.         identifier_converter = connection.introspection.identifier_converter
2544. 
2545.         with connection.schema_editor() as editor:
2546.             editor.create_model(model)
2547.             editor.add_field(model, field)
2548. 
2549.             constraint_name = 'CamelCaseIndex'
2550.             expected_constraint_name = identifier_converter(constraint_name)
2551.             editor.execute(
2552.                 editor.sql_create_index % {
2553.                     "table": editor.quote_name(table),
2554.                     "name": editor.quote_name(constraint_name),
2555.                     "using": "",
2556.                     "columns": editor.quote_name(column),
2557.                     "extra": "",
2558.                     "condition": "",
2559.                 }
2560.             )
2561.             self.assertIn(expected_constraint_name, self.get_constraints(model._meta.db_table))
2562.             editor.alter_field(model, get_field(db_index=True), field, strict=True)
2563.             self.assertNotIn(expected_constraint_name, self.get_constraints(model._meta.db_table))
2564. 
2565.             constraint_name = 'CamelCaseUniqConstraint'
2566.             expected_constraint_name = identifier_converter(constraint_name)
2567.             editor.execute(editor._create_unique_sql(model, [field.column], constraint_name))
2568.             self.assertIn(expected_constraint_name, self.get_constraints(model._meta.db_table))
2569.             editor.alter_field(model, get_field(unique=True), field, strict=True)
2570.             self.assertNotIn(expected_constraint_name, self.get_constraints(model._meta.db_table))
2571. 
2572.             if editor.sql_create_fk:
2573.                 constraint_name = 'CamelCaseFKConstraint'
2574.                 expected_constraint_name = identifier_converter(constraint_name)
2575.                 editor.execute(
2576.                     editor.sql_create_fk % {
2577.                         "table": editor.quote_name(table),
2578.                         "name": editor.quote_name(constraint_name),
2579.                         "column": editor.quote_name(column),
2580.                         "to_table": editor.quote_name(table),
2581.                         "to_column": editor.quote_name(model._meta.auto_field.column),
2582.                         "deferrable": connection.ops.deferrable_sql(),
2583.                     }
2584.                 )
2585.                 self.assertIn(expected_constraint_name, self.get_constraints(model._meta.db_table))
2586.                 editor.alter_field(model, get_field(Author, CASCADE, field_class=ForeignKey), field, strict=True)
2587.                 self.assertNotIn(expected_constraint_name, self.get_constraints(model._meta.db_table))
2588. 
2589.     def test_add_field_use_effective_default(self):
2590.         """
2591.         #23987 - effective_default() should be used as the field default when
2592.         adding a new field.
2593.         """
2594.         # Create the table
2595.         with connection.schema_editor() as editor:
2596.             editor.create_model(Author)
2597.         # Ensure there's no surname field
2598.         columns = self.column_classes(Author)
2599.         self.assertNotIn("surname", columns)
2600.         # Create a row
2601.         Author.objects.create(name='Anonymous1')
2602.         # Add new CharField to ensure default will be used from effective_default
2603.         new_field = CharField(max_length=15, blank=True)
2604.         new_field.set_attributes_from_name("surname")
2605.         with connection.schema_editor() as editor:
2606.             editor.add_field(Author, new_field)
2607.         # Ensure field was added with the right default
2608.         with connection.cursor() as cursor:
2609.             cursor.execute("SELECT surname FROM schema_author;")
2610.             item = cursor.fetchall()[0]
2611.             self.assertEqual(item[0], None if connection.features.interprets_empty_strings_as_nulls else '')
2612. 
2613.     def test_add_field_default_dropped(self):
2614.         # Create the table
2615.         with connection.schema_editor() as editor:
2616.             editor.create_model(Author)
2617.         # Ensure there's no surname field
2618.         columns = self.column_classes(Author)
2619.         self.assertNotIn("surname", columns)
2620.         # Create a row
2621.         Author.objects.create(name='Anonymous1')
2622.         # Add new CharField with a default
2623.         new_field = CharField(max_length=15, blank=True, default='surname default')
2624.         new_field.set_attributes_from_name("surname")
2625.         with connection.schema_editor() as editor:
2626.             editor.add_field(Author, new_field)
2627.         # Ensure field was added with the right default
2628.         with connection.cursor() as cursor:
2629.             cursor.execute("SELECT surname FROM schema_author;")
2630.             item = cursor.fetchall()[0]
2631.             self.assertEqual(item[0], 'surname default')
2632.             # And that the default is no longer set in the database.
2633.             field = next(
2634.                 f for f in connection.introspection.get_table_description(cursor, "schema_author")
2635.                 if f.name == "surname"
2636.             )
2637.             if connection.features.can_introspect_default:
2638.                 self.assertIsNone(field.default)
2639. 
2640.     def test_alter_field_default_dropped(self):
2641.         # Create the table
2642.         with connection.schema_editor() as editor:
2643.             editor.create_model(Author)
2644.         # Create a row
2645.         Author.objects.create(name='Anonymous1')
2646.         self.assertIsNone(Author.objects.get().height)
2647.         old_field = Author._meta.get_field('height')
2648.         # The default from the new field is used in updating existing rows.
2649.         new_field = IntegerField(blank=True, default=42)
2650.         new_field.set_attributes_from_name('height')
2651.         with connection.schema_editor() as editor:
2652.             editor.alter_field(Author, old_field, new_field, strict=True)
2653.         self.assertEqual(Author.objects.get().height, 42)
2654.         # The database default should be removed.
2655.         with connection.cursor() as cursor:
2656.             field = next(
2657.                 f for f in connection.introspection.get_table_description(cursor, "schema_author")
2658.                 if f.name == "height"
2659.             )
2660.             if connection.features.can_introspect_default:
2661.                 self.assertIsNone(field.default)
2662. 
2663.     @unittest.skipIf(connection.vendor == 'sqlite', 'SQLite naively remakes the table on field alteration.')
2664.     def test_alter_field_default_doesnt_perform_queries(self):
2665.         """
2666.         No queries are performed if a field default changes and the field's
2667.         not changing from null to non-null.
2668.         """
2669.         with connection.schema_editor() as editor:
2670.             editor.create_model(AuthorWithDefaultHeight)
2671.         old_field = AuthorWithDefaultHeight._meta.get_field('height')
2672.         new_default = old_field.default * 2
2673.         new_field = PositiveIntegerField(null=True, blank=True, default=new_default)
2674.         new_field.set_attributes_from_name('height')
2675.         with connection.schema_editor() as editor, self.assertNumQueries(0):
2676.             editor.alter_field(AuthorWithDefaultHeight, old_field, new_field, strict=True)
2677. 
2678.     def test_add_textfield_unhashable_default(self):
2679.         # Create the table
2680.         with connection.schema_editor() as editor:
2681.             editor.create_model(Author)
2682.         # Create a row
2683.         Author.objects.create(name='Anonymous1')
2684.         # Create a field that has an unhashable default
2685.         new_field = TextField(default={})
2686.         new_field.set_attributes_from_name("info")
2687.         with connection.schema_editor() as editor:
2688.             editor.add_field(Author, new_field)
2689. 
2690.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2691.     def test_add_indexed_charfield(self):
2692.         field = CharField(max_length=255, db_index=True)
2693.         field.set_attributes_from_name('nom_de_plume')
2694.         with connection.schema_editor() as editor:
2695.             editor.create_model(Author)
2696.             editor.add_field(Author, field)
2697.         # Should create two indexes; one for like operator.
2698.         self.assertEqual(
2699.             self.get_constraints_for_column(Author, 'nom_de_plume'),
2700.             ['schema_author_nom_de_plume_7570a851', 'schema_author_nom_de_plume_7570a851_like'],
2701.         )
2702. 
2703.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2704.     def test_add_unique_charfield(self):
2705.         field = CharField(max_length=255, unique=True)
2706.         field.set_attributes_from_name('nom_de_plume')
2707.         with connection.schema_editor() as editor:
2708.             editor.create_model(Author)
2709.             editor.add_field(Author, field)
2710.         # Should create two indexes; one for like operator.
2711.         self.assertEqual(
2712.             self.get_constraints_for_column(Author, 'nom_de_plume'),
2713.             ['schema_author_nom_de_plume_7570a851_like', 'schema_author_nom_de_plume_key']
2714.         )
2715. 
2716.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2717.     def test_alter_field_add_index_to_charfield(self):
2718.         # Create the table and verify no initial indexes.
2719.         with connection.schema_editor() as editor:
2720.             editor.create_model(Author)
2721.         self.assertEqual(self.get_constraints_for_column(Author, 'name'), [])
2722.         # Alter to add db_index=True and create 2 indexes.
2723.         old_field = Author._meta.get_field('name')
2724.         new_field = CharField(max_length=255, db_index=True)
2725.         new_field.set_attributes_from_name('name')
2726.         with connection.schema_editor() as editor:
2727.             editor.alter_field(Author, old_field, new_field, strict=True)
2728.         self.assertEqual(
2729.             self.get_constraints_for_column(Author, 'name'),
2730.             ['schema_author_name_1fbc5617', 'schema_author_name_1fbc5617_like']
2731.         )
2732.         # Remove db_index=True to drop both indexes.
2733.         with connection.schema_editor() as editor:
2734.             editor.alter_field(Author, new_field, old_field, strict=True)
2735.         self.assertEqual(self.get_constraints_for_column(Author, 'name'), [])
2736. 
2737.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2738.     def test_alter_field_add_unique_to_charfield(self):
2739.         # Create the table and verify no initial indexes.
2740.         with connection.schema_editor() as editor:
2741.             editor.create_model(Author)
2742.         self.assertEqual(self.get_constraints_for_column(Author, 'name'), [])
2743.         # Alter to add unique=True and create 2 indexes.
2744.         old_field = Author._meta.get_field('name')
2745.         new_field = CharField(max_length=255, unique=True)
2746.         new_field.set_attributes_from_name('name')
2747.         with connection.schema_editor() as editor:
2748.             editor.alter_field(Author, old_field, new_field, strict=True)
2749.         self.assertEqual(
2750.             self.get_constraints_for_column(Author, 'name'),
2751.             ['schema_author_name_1fbc5617_like', 'schema_author_name_1fbc5617_uniq']
2752.         )
2753.         # Remove unique=True to drop both indexes.
2754.         with connection.schema_editor() as editor:
2755.             editor.alter_field(Author, new_field, old_field, strict=True)
2756.         self.assertEqual(self.get_constraints_for_column(Author, 'name'), [])
2757. 
2758.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2759.     def test_alter_field_add_index_to_textfield(self):
2760.         # Create the table and verify no initial indexes.
2761.         with connection.schema_editor() as editor:
2762.             editor.create_model(Note)
2763.         self.assertEqual(self.get_constraints_for_column(Note, 'info'), [])
2764.         # Alter to add db_index=True and create 2 indexes.
2765.         old_field = Note._meta.get_field('info')
2766.         new_field = TextField(db_index=True)
2767.         new_field.set_attributes_from_name('info')
2768.         with connection.schema_editor() as editor:
2769.             editor.alter_field(Note, old_field, new_field, strict=True)
2770.         self.assertEqual(
2771.             self.get_constraints_for_column(Note, 'info'),
2772.             ['schema_note_info_4b0ea695', 'schema_note_info_4b0ea695_like']
2773.         )
2774.         # Remove db_index=True to drop both indexes.
2775.         with connection.schema_editor() as editor:
2776.             editor.alter_field(Note, new_field, old_field, strict=True)
2777.         self.assertEqual(self.get_constraints_for_column(Note, 'info'), [])
2778. 
2779.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2780.     def test_alter_field_add_unique_to_charfield_with_db_index(self):
2781.         # Create the table and verify initial indexes.
2782.         with connection.schema_editor() as editor:
2783.             editor.create_model(BookWithoutAuthor)
2784.         self.assertEqual(
2785.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2786.             ['schema_book_title_2dfb2dff', 'schema_book_title_2dfb2dff_like']
2787.         )
2788.         # Alter to add unique=True (should replace the index)
2789.         old_field = BookWithoutAuthor._meta.get_field('title')
2790.         new_field = CharField(max_length=100, db_index=True, unique=True)
2791.         new_field.set_attributes_from_name('title')
2792.         with connection.schema_editor() as editor:
2793.             editor.alter_field(BookWithoutAuthor, old_field, new_field, strict=True)
2794.         self.assertEqual(
2795.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2796.             ['schema_book_title_2dfb2dff_like', 'schema_book_title_2dfb2dff_uniq']
2797.         )
2798.         # Alter to remove unique=True (should drop unique index)
2799.         new_field2 = CharField(max_length=100, db_index=True)
2800.         new_field2.set_attributes_from_name('title')
2801.         with connection.schema_editor() as editor:
2802.             editor.alter_field(BookWithoutAuthor, new_field, new_field2, strict=True)
2803.         self.assertEqual(
2804.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2805.             ['schema_book_title_2dfb2dff', 'schema_book_title_2dfb2dff_like']
2806.         )
2807. 
2808.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2809.     def test_alter_field_remove_unique_and_db_index_from_charfield(self):
2810.         # Create the table and verify initial indexes.
2811.         with connection.schema_editor() as editor:
2812.             editor.create_model(BookWithoutAuthor)
2813.         self.assertEqual(
2814.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2815.             ['schema_book_title_2dfb2dff', 'schema_book_title_2dfb2dff_like']
2816.         )
2817.         # Alter to add unique=True (should replace the index)
2818.         old_field = BookWithoutAuthor._meta.get_field('title')
2819.         new_field = CharField(max_length=100, db_index=True, unique=True)
2820.         new_field.set_attributes_from_name('title')
2821.         with connection.schema_editor() as editor:
2822.             editor.alter_field(BookWithoutAuthor, old_field, new_field, strict=True)
2823.         self.assertEqual(
2824.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2825.             ['schema_book_title_2dfb2dff_like', 'schema_book_title_2dfb2dff_uniq']
2826.         )
2827.         # Alter to remove both unique=True and db_index=True (should drop all indexes)
2828.         new_field2 = CharField(max_length=100)
2829.         new_field2.set_attributes_from_name('title')
2830.         with connection.schema_editor() as editor:
2831.             editor.alter_field(BookWithoutAuthor, new_field, new_field2, strict=True)
2832.         self.assertEqual(self.get_constraints_for_column(BookWithoutAuthor, 'title'), [])
2833. 
2834.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2835.     def test_alter_field_swap_unique_and_db_index_with_charfield(self):
2836.         # Create the table and verify initial indexes.
2837.         with connection.schema_editor() as editor:
2838.             editor.create_model(BookWithoutAuthor)
2839.         self.assertEqual(
2840.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2841.             ['schema_book_title_2dfb2dff', 'schema_book_title_2dfb2dff_like']
2842.         )
2843.         # Alter to set unique=True and remove db_index=True (should replace the index)
2844.         old_field = BookWithoutAuthor._meta.get_field('title')
2845.         new_field = CharField(max_length=100, unique=True)
2846.         new_field.set_attributes_from_name('title')
2847.         with connection.schema_editor() as editor:
2848.             editor.alter_field(BookWithoutAuthor, old_field, new_field, strict=True)
2849.         self.assertEqual(
2850.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2851.             ['schema_book_title_2dfb2dff_like', 'schema_book_title_2dfb2dff_uniq']
2852.         )
2853.         # Alter to set db_index=True and remove unique=True (should restore index)
2854.         new_field2 = CharField(max_length=100, db_index=True)
2855.         new_field2.set_attributes_from_name('title')
2856.         with connection.schema_editor() as editor:
2857.             editor.alter_field(BookWithoutAuthor, new_field, new_field2, strict=True)
2858.         self.assertEqual(
2859.             self.get_constraints_for_column(BookWithoutAuthor, 'title'),
2860.             ['schema_book_title_2dfb2dff', 'schema_book_title_2dfb2dff_like']
2861.         )
2862. 
2863.     @unittest.skipUnless(connection.vendor == 'postgresql', "PostgreSQL specific")
2864.     def test_alter_field_add_db_index_to_charfield_with_unique(self):
2865.         # Create the table and verify initial indexes.
2866.         with connection.schema_editor() as editor:
2867.             editor.create_model(Tag)
2868.         self.assertEqual(
2869.             self.get_constraints_for_column(Tag, 'slug'),
2870.             ['schema_tag_slug_2c418ba3_like', 'schema_tag_slug_key']
2871.         )
2872.         # Alter to add db_index=True
2873.         old_field = Tag._meta.get_field('slug')
2874.         new_field = SlugField(db_index=True, unique=True)
2875.         new_field.set_attributes_from_name('slug')
2876.         with connection.schema_editor() as editor:
2877.             editor.alter_field(Tag, old_field, new_field, strict=True)
2878.         self.assertEqual(
2879.             self.get_constraints_for_column(Tag, 'slug'),
2880.             ['schema_tag_slug_2c418ba3_like', 'schema_tag_slug_key']
2881.         )
2882.         # Alter to remove db_index=True
2883.         new_field2 = SlugField(unique=True)
2884.         new_field2.set_attributes_from_name('slug')
2885.         with connection.schema_editor() as editor:
2886.             editor.alter_field(Tag, new_field, new_field2, strict=True)
2887.         self.assertEqual(
2888.             self.get_constraints_for_column(Tag, 'slug'),
2889.             ['schema_tag_slug_2c418ba3_like', 'schema_tag_slug_key']
2890.         )
2891. 
2892.     def test_alter_field_add_index_to_integerfield(self):
2893.         # Create the table and verify no initial indexes.
2894.         with connection.schema_editor() as editor:
2895.             editor.create_model(Author)
2896.         self.assertEqual(self.get_constraints_for_column(Author, 'weight'), [])
2897. 
2898.         # Alter to add db_index=True and create index.
2899.         old_field = Author._meta.get_field('weight')
2900.         new_field = IntegerField(null=True, db_index=True)
2901.         new_field.set_attributes_from_name('weight')
2902.         with connection.schema_editor() as editor:
2903.             editor.alter_field(Author, old_field, new_field, strict=True)
2904.         self.assertEqual(self.get_constraints_for_column(Author, 'weight'), ['schema_author_weight_587740f9'])
2905. 
2906.         # Remove db_index=True to drop index.
2907.         with connection.schema_editor() as editor:
2908.             editor.alter_field(Author, new_field, old_field, strict=True)
2909.         self.assertEqual(self.get_constraints_for_column(Author, 'weight'), [])
2910. 
2911.     def test_alter_pk_with_self_referential_field(self):
2912.         """
2913.         Changing the primary key field name of a model with a self-referential
2914.         foreign key (#26384).
2915.         """
2916.         with connection.schema_editor() as editor:
2917.             editor.create_model(Node)
2918.         old_field = Node._meta.get_field('node_id')
2919.         new_field = AutoField(primary_key=True)
2920.         new_field.set_attributes_from_name('id')
2921.         with connection.schema_editor() as editor:
2922.             editor.alter_field(Node, old_field, new_field, strict=True)
2923.         self.assertForeignKeyExists(Node, 'parent_id', Node._meta.db_table)
2924. 
2925.     @mock.patch('django.db.backends.base.schema.datetime')
2926.     @mock.patch('django.db.backends.base.schema.timezone')
2927.     def test_add_datefield_and_datetimefield_use_effective_default(self, mocked_datetime, mocked_tz):
2928.         """
2929.         effective_default() should be used for DateField, DateTimeField, and
2930.         TimeField if auto_now or auto_add_now is set (#25005).
2931.         """
2932.         now = datetime.datetime(month=1, day=1, year=2000, hour=1, minute=1)
2933.         now_tz = datetime.datetime(month=1, day=1, year=2000, hour=1, minute=1, tzinfo=timezone.utc)
2934.         mocked_datetime.now = mock.MagicMock(return_value=now)
2935.         mocked_tz.now = mock.MagicMock(return_value=now_tz)
2936.         # Create the table
2937.         with connection.schema_editor() as editor:
2938.             editor.create_model(Author)
2939.         # Check auto_now/auto_now_add attributes are not defined
2940.         columns = self.column_classes(Author)
2941.         self.assertNotIn("dob_auto_now", columns)
2942.         self.assertNotIn("dob_auto_now_add", columns)
2943.         self.assertNotIn("dtob_auto_now", columns)
2944.         self.assertNotIn("dtob_auto_now_add", columns)
2945.         self.assertNotIn("tob_auto_now", columns)
2946.         self.assertNotIn("tob_auto_now_add", columns)
2947.         # Create a row
2948.         Author.objects.create(name='Anonymous1')
2949.         # Ensure fields were added with the correct defaults
2950.         dob_auto_now = DateField(auto_now=True)
2951.         dob_auto_now.set_attributes_from_name('dob_auto_now')
2952.         self.check_added_field_default(
2953.             editor, Author, dob_auto_now, 'dob_auto_now', now.date(),
2954.             cast_function=lambda x: x.date(),
2955.         )
2956.         dob_auto_now_add = DateField(auto_now_add=True)
2957.         dob_auto_now_add.set_attributes_from_name('dob_auto_now_add')
2958.         self.check_added_field_default(
2959.             editor, Author, dob_auto_now_add, 'dob_auto_now_add', now.date(),
2960.             cast_function=lambda x: x.date(),
2961.         )
2962.         dtob_auto_now = DateTimeField(auto_now=True)
2963.         dtob_auto_now.set_attributes_from_name('dtob_auto_now')
2964.         self.check_added_field_default(
2965.             editor, Author, dtob_auto_now, 'dtob_auto_now', now,
2966.         )
2967.         dt_tm_of_birth_auto_now_add = DateTimeField(auto_now_add=True)
2968.         dt_tm_of_birth_auto_now_add.set_attributes_from_name('dtob_auto_now_add')
2969.         self.check_added_field_default(
2970.             editor, Author, dt_tm_of_birth_auto_now_add, 'dtob_auto_now_add', now,
2971.         )
2972.         tob_auto_now = TimeField(auto_now=True)
2973.         tob_auto_now.set_attributes_from_name('tob_auto_now')
2974.         self.check_added_field_default(
2975.             editor, Author, tob_auto_now, 'tob_auto_now', now.time(),
2976.             cast_function=lambda x: x.time(),
2977.         )
2978.         tob_auto_now_add = TimeField(auto_now_add=True)
2979.         tob_auto_now_add.set_attributes_from_name('tob_auto_now_add')
2980.         self.check_added_field_default(
2981.             editor, Author, tob_auto_now_add, 'tob_auto_now_add', now.time(),
2982.             cast_function=lambda x: x.time(),
2983.         )
2984. 
2985.     def test_namespaced_db_table_create_index_name(self):
2986.         """
2987.         Table names are stripped of their namespace/schema before being used to
2988.         generate index names.
2989.         """
2990.         with connection.schema_editor() as editor:
2991.             max_name_length = connection.ops.max_name_length() or 200
2992.             namespace = 'n' * max_name_length
2993.             table_name = 't' * max_name_length
2994.             namespaced_table_name = '"%s"."%s"' % (namespace, table_name)
2995.             self.assertEqual(
2996.                 editor._create_index_name(table_name, []),
2997.                 editor._create_index_name(namespaced_table_name, []),
2998.             )
2999. 
3000.     @unittest.skipUnless(connection.vendor == 'oracle', 'Oracle specific db_table syntax')
3001.     def test_creation_with_db_table_double_quotes(self):
3002.         oracle_user = connection.creation._test_database_user()
3003. 
3004.         class Student(Model):
3005.             name = CharField(max_length=30)
3006. 
3007.             class Meta:
3008.                 app_label = 'schema'
3009.                 apps = new_apps
3010.                 db_table = '"%s"."DJANGO_STUDENT_TABLE"' % oracle_user
3011. 
3012.         class Document(Model):
3013.             name = CharField(max_length=30)
3014.             students = ManyToManyField(Student)
3015. 
3016.             class Meta:
3017.                 app_label = 'schema'
3018.                 apps = new_apps
3019.                 db_table = '"%s"."DJANGO_DOCUMENT_TABLE"' % oracle_user
3020. 
3021.         self.local_models = [Student, Document]
3022. 
3023.         with connection.schema_editor() as editor:
3024.             editor.create_model(Student)
3025.             editor.create_model(Document)
3026. 
3027.         doc = Document.objects.create(name='Test Name')
3028.         student = Student.objects.create(name='Some man')
3029.         doc.students.add(student)
3030. 
3031.     def test_rename_table_renames_deferred_sql_references(self):
3032.         atomic_rename = connection.features.supports_atomic_references_rename
3033.         with connection.schema_editor(atomic=atomic_rename) as editor:
3034.             editor.create_model(Author)
3035.             editor.create_model(Book)
3036.             editor.alter_db_table(Author, 'schema_author', 'schema_renamed_author')
3037.             editor.alter_db_table(Author, 'schema_book', 'schema_renamed_book')
3038.             self.assertGreater(len(editor.deferred_sql), 0)
3039.             for statement in editor.deferred_sql:
3040.                 self.assertIs(statement.references_table('schema_author'), False)
3041.                 self.assertIs(statement.references_table('schema_book'), False)
3042. 
3043.     @unittest.skipIf(connection.vendor == 'sqlite', 'SQLite naively remakes the table on field alteration.')
3044.     def test_rename_column_renames_deferred_sql_references(self):
3045.         with connection.schema_editor() as editor:
3046.             editor.create_model(Author)
3047.             editor.create_model(Book)
3048.             old_title = Book._meta.get_field('title')
3049.             new_title = CharField(max_length=100, db_index=True)
3050.             new_title.set_attributes_from_name('renamed_title')
3051.             editor.alter_field(Book, old_title, new_title)
3052.             old_author = Book._meta.get_field('author')
3053.             new_author = ForeignKey(Author, CASCADE)
3054.             new_author.set_attributes_from_name('renamed_author')
3055.             editor.alter_field(Book, old_author, new_author)
3056.             self.assertGreater(len(editor.deferred_sql), 0)
3057.             for statement in editor.deferred_sql:
3058.                 self.assertIs(statement.references_column('book', 'title'), False)
3059.                 self.assertIs(statement.references_column('book', 'author_id'), False)
3060. 
3061.     @isolate_apps('schema')
3062.     def test_referenced_field_without_constraint_rename_inside_atomic_block(self):
3063.         """
3064.         Foreign keys without database level constraint don't prevent the field
3065.         they reference from being renamed in an atomic block.
3066.         """
3067.         class Foo(Model):
3068.             field = CharField(max_length=255, unique=True)
3069. 
3070.             class Meta:
3071.                 app_label = 'schema'
3072. 
3073.         class Bar(Model):
3074.             foo = ForeignKey(Foo, CASCADE, to_field='field', db_constraint=False)
3075. 
3076.             class Meta:
3077.                 app_label = 'schema'
3078. 
3079.         self.isolated_local_models = [Foo, Bar]
3080.         with connection.schema_editor() as editor:
3081.             editor.create_model(Foo)
3082.             editor.create_model(Bar)
3083. 
3084.         new_field = CharField(max_length=255, unique=True)
3085.         new_field.set_attributes_from_name('renamed')
3086.         with connection.schema_editor(atomic=True) as editor:
3087.             editor.alter_field(Foo, Foo._meta.get_field('field'), new_field)
3088. 
3089.     @isolate_apps('schema')
3090.     def test_referenced_table_without_constraint_rename_inside_atomic_block(self):
3091.         """
3092.         Foreign keys without database level constraint don't prevent the table
3093.         they reference from being renamed in an atomic block.
3094.         """
3095.         class Foo(Model):
3096.             field = CharField(max_length=255, unique=True)
3097. 
3098.             class Meta:
3099.                 app_label = 'schema'
3100. 
3101.         class Bar(Model):
3102.             foo = ForeignKey(Foo, CASCADE, to_field='field', db_constraint=False)
3103. 
3104.             class Meta:
3105.                 app_label = 'schema'
3106. 
3107.         self.isolated_local_models = [Foo, Bar]
3108.         with connection.schema_editor() as editor:
3109.             editor.create_model(Foo)
3110.             editor.create_model(Bar)
3111. 
3112.         new_field = CharField(max_length=255, unique=True)
3113.         new_field.set_attributes_from_name('renamed')
3114.         with connection.schema_editor(atomic=True) as editor:
3115.             editor.alter_db_table(Foo, Foo._meta.db_table, 'renamed_table')
3116.         Foo._meta.db_table = 'renamed_table'

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 06:45:31,199 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The query asks for the full content of `tests/postgres_tests/test_operations.py`.\n2. Extended relevance:\n   - This file contains PostgreSQL-specific operation tests, which aligns with the user's stated purpose of investigating `opclasses`.", relative_path='tests/postgres_tests/test_operations.py', start_line=1, end_line=144), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requested test methods from `tests/schema/tests.py` that use the `assertIndexOrder` helper function.\n2. Extended relevance:\n   - This context provides the definition of the `assertIndexOrder` function itself, which is essential for understanding the test methods that use it.', relative_path='tests/schema/tests.py', start_line=190, end_line=195), ContextOutput(reasoning="1. Query requirement analysis:\n   - This test method, `test_order_index`, directly uses the `assertIndexOrder` helper function as requested by the user.\n2. Extended relevance:\n   - This test also creates an index with a descending field (`Index(fields=['name', '-weight'])`), which satisfies both the primary and the extra requirements of the query for `tests/schema/tests.py`.", relative_path='tests/schema/tests.py', start_line=2317, end_line=2335), ContextOutput(reasoning="1. Query requirement analysis:\n   - The query includes an extra requirement to find any test that creates an index with a descending field, like `Index(fields=['-foo'])`.\n2. Extended relevance:\n   - This test method, `test_remove_db_index_doesnt_remove_custom_indexes`, creates an index with a descending field (`Index(fields=['-name'], name='author_name_idx')`) and is therefore relevant to the user's request.", relative_path='tests/schema/tests.py', start_line=2277, end_line=2316)]
2025-12-21 06:45:31,202 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 4 contexts to memory for query: Please provide the full content of `tests/postgres_tests/test_operations.py` and any test methods from `tests/schema/tests.py` that use the `assertIndexOrder` helper function.
2025-12-21 06:45:31,202 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 06:45:31,202 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 06:45:31,203 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 4 new contexts to 3 existing contexts
2025-12-21 06:45:31,203 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 6 total contexts (removed 1 duplicates)
2025-12-21 06:45:31,204 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .tx
├── CONTRIBUTING.rst
├── FUNDING.yml
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── utils.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── jython.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── _images
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── RelatedObjectLookups.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   ├── qunit
|   |   ├── qunit.css
|   |   └── qunit.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_introspection.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   └── tests.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   └── test_postgresql.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   └── test_srs.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       └── syntax_error2.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktrans.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_trans.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
    |   ├── files
    |   |   ├── strip_tags1.html
    |   |   └── strip_tags2.txt
    |   ├── models.py
    |   ├── test_archive.py
    |   ├── test_autoreload.py
    |   ├── test_baseconv.py
    |   ├── test_crypto.py
    |   ├── test_datastructures.py
    |   ├── test_dateformat.py
    |   ├── test_dateparse.py
    |   ├── test_datetime_safe.py
    |   ├── test_decorators.py
    |   ├── test_duration.py
    |   ├── test_encoding.py
    |   ├── test_encoding_deprecations.py
    |   ├── test_feedgenerator.py
    |   ├── test_functional.py
    |   ├── test_hashable.py
    |   ├── test_html.py
    |   ├── test_http.py
    |   ├── test_inspect.py
    |   ├── test_ipv6.py
    |   ├── test_jslex.py
    |   ├── test_lazyobject.py
    |   ├── test_lorem_ipsum.py
    |   ├── test_module
    |   |   ├── __init__.py
    |   |   ├── another_bad_module.py
    |   |   ├── another_good_module.py
    |   |   ├── bad_module.py
    |   |   ├── child_module
    |   |   |   ├── __init__.py
    |   |   |   └── grandchild_module.py
    |   |   └── good_module.py
    |   ├── test_module_loading.py
    |   ├── test_no_submodule.py
    |   ├── test_numberformat.py
    |   ├── test_os_utils.py
    |   ├── test_regex_helper.py
    |   ├── test_safestring.py
    |   ├── test_simplelazyobject.py
    |   ├── test_termcolors.py
    |   ├── test_text.py
    |   ├── test_timesince.py
    |   ├── test_timezone.py
    |   ├── test_topological_sort.py
    |   ├── test_tree.py
    |   └── utils.py
    ├── validation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_custom_messages.py
    |   ├── test_error_messages.py
    |   ├── test_picklable.py
    |   ├── test_unique.py
    |   ├── test_validators.py
    |   └── tests.py
    ├── validators
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Use proper whitespace in CREATE INDEX statements

Description: Description
	 
		(last modified by Hannes Ljungberg)
	 
Creating an index through:
index = Index(
	fields=['-name’],
	name='idx'
)
Will generate the valid but not so pretty CREATE INDEX statement: 
CREATE INDEX "idx" ON "schema_author" ("name"DESC)
The following would be expected:
CREATE INDEX "idx" ON "schema_author" ("name" DESC)
This was partially fixed for indexes using opclasses in https://code.djangoproject.com/ticket/30903#ticket but it introduced a new quirk when opclasses is used without explicit ordering:
index = Index(
	fields=['name’],
	name='idx'
	opclasses=['text_pattern_ops’]
)
Will result in:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops )
Note the whitespace after text_pattern_ops. When used with a descending order it will look correct. 
Unfortunately in the fix in #30903 it was assumed that the col_suffixes passed to django.db.backends.ddl_references.Columns would be empty for ascending order but instead it will contain empty strings and thus causing this bug. See: ​https://github.com/django/django/blob/master/django/db/backends/ddl_references.py#L87
The expected output would be:
CREATE INDEX "idx" ON "schema_author" (“name” text_pattern_ops)

Patch information:
diff --git a/django/db/backends/ddl_references.py b/django/db/backends/ddl_references.py
index 44e49806f8..2af7ca1d27 100644
--- a/django/db/backends/ddl_references.py
+++ b/django/db/backends/ddl_references.py
@@ -84,9 +84,13 @@ class Columns(TableColumns):
     def __str__(self):
         def col_str(column, idx):
             try:
-                return self.quote_name(column) + self.col_suffixes[idx]
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                return self.quote_name(column)
+                suffix = ''
+            return '{}{}'.format(
+                self.quote_name(column),
+                (' ' + suffix) if suffix else ''
+            )
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))
 
@@ -114,9 +118,11 @@ class IndexColumns(Columns):
             # length as self.columns.
             col = '{} {}'.format(self.quote_name(column), self.opclasses[idx])
             try:
-                col = '{} {}'.format(col, self.col_suffixes[idx])
+                suffix = self.col_suffixes[idx]
             except IndexError:
-                pass
+                suffix = ''
+            if suffix:
+                col = '{} {}'.format(col, suffix)
             return col
 
         return ', '.join(col_str(column, idx) for idx, column in enumerate(self.columns))


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/schema/tests.py`, `tests/postgres_tests/test_indexes.py`, and `tests/model_indexes/tests.py`.
Extra Requirements: 
Purpose: I need these files to find three existing test cases that demonstrate the functionality related to the bug in `CREATE INDEX` SQL generation, as requested by the user.

Previous refined query 2:
Essential Query: Please provide the full content of `tests/postgres_tests/test_operations.py` and any test methods from `tests/schema/tests.py` that use the `assertIndexOrder` helper function.
Extra Requirements: For `tests/schema/tests.py`, if finding usages of `assertIndexOrder` is not possible, please provide any test that creates an index with a descending field, like `Index(fields=['-foo'])`.
Purpose: This will provide test cases for `opclasses` (from `test_operations.py`) and for descending indexes (from `schema/tests.py`), which are the two key parts of the bug report, allowing me to select three relevant examples.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/model_indexes/tests.py
Line number range: 1 - 198
Content:
1. from unittest import mock
2. 
3. from django.conf import settings
4. from django.db import connection, models
5. from django.db.models.query_utils import Q
6. from django.test import SimpleTestCase, TestCase, skipUnlessDBFeature
7. from django.test.utils import isolate_apps
8. 
9. from .models import Book, ChildModel1, ChildModel2
10. 
11. 
12. class SimpleIndexesTests(SimpleTestCase):
13. 
14.     def test_suffix(self):
15.         self.assertEqual(models.Index.suffix, 'idx')
16. 
17.     def test_repr(self):
18.         index = models.Index(fields=['title'])
19.         multi_col_index = models.Index(fields=['title', 'author'])
20.         partial_index = models.Index(fields=['title'], name='long_books_idx', condition=Q(pages__gt=400))
21.         self.assertEqual(repr(index), "<Index: fields='title'>")
22.         self.assertEqual(repr(multi_col_index), "<Index: fields='title, author'>")
23.         self.assertEqual(repr(partial_index), "<Index: fields='title', condition=(AND: ('pages__gt', 400))>")
24. 
25.     def test_eq(self):
26.         index = models.Index(fields=['title'])
27.         same_index = models.Index(fields=['title'])
28.         another_index = models.Index(fields=['title', 'author'])
29.         index.model = Book
30.         same_index.model = Book
31.         another_index.model = Book
32.         self.assertEqual(index, same_index)
33.         self.assertEqual(index, mock.ANY)
34.         self.assertNotEqual(index, another_index)
35. 
36.     def test_index_fields_type(self):
37.         with self.assertRaisesMessage(ValueError, 'Index.fields must be a list or tuple.'):
38.             models.Index(fields='title')
39. 
40.     def test_fields_tuple(self):
41.         self.assertEqual(models.Index(fields=('title',)).fields, ['title'])
42. 
43.     def test_raises_error_without_field(self):
44.         msg = 'At least one field is required to define an index.'
45.         with self.assertRaisesMessage(ValueError, msg):
46.             models.Index()
47. 
48.     def test_opclasses_requires_index_name(self):
49.         with self.assertRaisesMessage(ValueError, 'An index must be named to use opclasses.'):
50.             models.Index(opclasses=['jsonb_path_ops'])
51. 
52.     def test_opclasses_requires_list_or_tuple(self):
53.         with self.assertRaisesMessage(ValueError, 'Index.opclasses must be a list or tuple.'):
54.             models.Index(name='test_opclass', fields=['field'], opclasses='jsonb_path_ops')
55. 
56.     def test_opclasses_and_fields_same_length(self):
57.         msg = 'Index.fields and Index.opclasses must have the same number of elements.'
58.         with self.assertRaisesMessage(ValueError, msg):
59.             models.Index(name='test_opclass', fields=['field', 'other'], opclasses=['jsonb_path_ops'])
60. 
61.     def test_condition_requires_index_name(self):
62.         with self.assertRaisesMessage(ValueError, 'An index must be named to use condition.'):
63.             models.Index(condition=Q(pages__gt=400))
64. 
65.     def test_condition_must_be_q(self):
66.         with self.assertRaisesMessage(ValueError, 'Index.condition must be a Q instance.'):
67.             models.Index(condition='invalid', name='long_book_idx')
68. 
69.     def test_name_auto_generation(self):
70.         index = models.Index(fields=['author'])
71.         index.set_name_with_model(Book)
72.         self.assertEqual(index.name, 'model_index_author_0f5565_idx')
73. 
74.         # '-' for DESC columns should be accounted for in the index name.
75.         index = models.Index(fields=['-author'])
76.         index.set_name_with_model(Book)
77.         self.assertEqual(index.name, 'model_index_author_708765_idx')
78. 
79.         # fields may be truncated in the name. db_column is used for naming.
80.         long_field_index = models.Index(fields=['pages'])
81.         long_field_index.set_name_with_model(Book)
82.         self.assertEqual(long_field_index.name, 'model_index_page_co_69235a_idx')
83. 
84.         # suffix can't be longer than 3 characters.
85.         long_field_index.suffix = 'suff'
86.         msg = 'Index too long for multiple database support. Is self.suffix longer than 3 characters?'
87.         with self.assertRaisesMessage(AssertionError, msg):
88.             long_field_index.set_name_with_model(Book)
89. 
90.     @isolate_apps('model_indexes')
91.     def test_name_auto_generation_with_quoted_db_table(self):
92.         class QuotedDbTable(models.Model):
93.             name = models.CharField(max_length=50)
94. 
95.             class Meta:
96.                 db_table = '"t_quoted"'
97. 
98.         index = models.Index(fields=['name'])
99.         index.set_name_with_model(QuotedDbTable)
100.         self.assertEqual(index.name, 't_quoted_name_e4ed1b_idx')
101. 
102.     def test_deconstruction(self):
103.         index = models.Index(fields=['title'], db_tablespace='idx_tbls')
104.         index.set_name_with_model(Book)
105.         path, args, kwargs = index.deconstruct()
106.         self.assertEqual(path, 'django.db.models.Index')
107.         self.assertEqual(args, ())
108.         self.assertEqual(
109.             kwargs,
110.             {'fields': ['title'], 'name': 'model_index_title_196f42_idx', 'db_tablespace': 'idx_tbls'}
111.         )
112. 
113.     def test_deconstruct_with_condition(self):
114.         index = models.Index(
115.             name='big_book_index',
116.             fields=['title'],
117.             condition=Q(pages__gt=400),
118.         )
119.         index.set_name_with_model(Book)
120.         path, args, kwargs = index.deconstruct()
121.         self.assertEqual(path, 'django.db.models.Index')
122.         self.assertEqual(args, ())
123.         self.assertEqual(
124.             kwargs,
125.             {
126.                 'fields': ['title'],
127.                 'name': 'model_index_title_196f42_idx',
128.                 'condition': Q(pages__gt=400),
129.             }
130.         )
131. 
132.     def test_clone(self):
133.         index = models.Index(fields=['title'])
134.         new_index = index.clone()
135.         self.assertIsNot(index, new_index)
136.         self.assertEqual(index.fields, new_index.fields)
137. 
138.     def test_name_set(self):
139.         index_names = [index.name for index in Book._meta.indexes]
140.         self.assertCountEqual(
141.             index_names,
142.             [
143.                 'model_index_title_196f42_idx',
144.                 'model_index_isbn_34f975_idx',
145.                 'model_indexes_book_barcode_idx',
146.             ],
147.         )
148. 
149.     def test_abstract_children(self):
150.         index_names = [index.name for index in ChildModel1._meta.indexes]
151.         self.assertEqual(
152.             index_names,
153.             ['model_index_name_440998_idx', 'model_indexes_childmodel1_idx'],
154.         )
155.         index_names = [index.name for index in ChildModel2._meta.indexes]
156.         self.assertEqual(
157.             index_names,
158.             ['model_index_name_b6c374_idx', 'model_indexes_childmodel2_idx'],
159.         )
160. 
161. 
162. class IndexesTests(TestCase):
163. 
164.     @skipUnlessDBFeature('supports_tablespaces')
165.     def test_db_tablespace(self):
166.         editor = connection.schema_editor()
167.         # Index with db_tablespace attribute.
168.         for fields in [
169.             # Field with db_tablespace specified on model.
170.             ['shortcut'],
171.             # Field without db_tablespace specified on model.
172.             ['author'],
173.             # Multi-column with db_tablespaces specified on model.
174.             ['shortcut', 'isbn'],
175.             # Multi-column without db_tablespace specified on model.
176.             ['title', 'author'],
177.         ]:
178.             with self.subTest(fields=fields):
179.                 index = models.Index(fields=fields, db_tablespace='idx_tbls2')
180.                 self.assertIn('"idx_tbls2"', str(index.create_sql(Book, editor)).lower())
181.         # Indexes without db_tablespace attribute.
182.         for fields in [['author'], ['shortcut', 'isbn'], ['title', 'author']]:
183.             with self.subTest(fields=fields):
184.                 index = models.Index(fields=fields)
185.                 # The DEFAULT_INDEX_TABLESPACE setting can't be tested because
186.                 # it's evaluated when the model class is defined. As a
187.                 # consequence, @override_settings doesn't work.
188.                 if settings.DEFAULT_INDEX_TABLESPACE:
189.                     self.assertIn(
190.                         '"%s"' % settings.DEFAULT_INDEX_TABLESPACE,
191.                         str(index.create_sql(Book, editor)).lower()
192.                     )
193.                 else:
194.                     self.assertNotIn('TABLESPACE', str(index.create_sql(Book, editor)))
195.         # Field with db_tablespace specified on the model and an index without
196.         # db_tablespace.
197.         index = models.Index(fields=['shortcut'])
198.         self.assertIn('"idx_tbls"', str(index.create_sql(Book, editor)).lower())


File: tests/postgres_tests/test_indexes.py
Line number range: 1 - 444
Content:
1. from unittest import mock
2. 
3. from django.contrib.postgres.indexes import (
4.     BloomIndex, BrinIndex, BTreeIndex, GinIndex, GistIndex, HashIndex,
5.     SpGistIndex,
6. )
7. from django.db import connection
8. from django.db.models import CharField
9. from django.db.models.functions import Length
10. from django.db.models.query_utils import Q
11. from django.db.utils import NotSupportedError
12. from django.test import skipUnlessDBFeature
13. from django.test.utils import register_lookup
14. 
15. from . import PostgreSQLSimpleTestCase, PostgreSQLTestCase
16. from .models import CharFieldModel, IntegerArrayModel
17. 
18. 
19. class IndexTestMixin:
20. 
21.     def test_name_auto_generation(self):
22.         index = self.index_class(fields=['field'])
23.         index.set_name_with_model(CharFieldModel)
24.         self.assertRegex(index.name, r'postgres_te_field_[0-9a-f]{6}_%s' % self.index_class.suffix)
25. 
26.     def test_deconstruction_no_customization(self):
27.         index = self.index_class(fields=['title'], name='test_title_%s' % self.index_class.suffix)
28.         path, args, kwargs = index.deconstruct()
29.         self.assertEqual(path, 'django.contrib.postgres.indexes.%s' % self.index_class.__name__)
30.         self.assertEqual(args, ())
31.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_%s' % self.index_class.suffix})
32. 
33. 
34. class BloomIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
35.     index_class = BloomIndex
36. 
37.     def test_suffix(self):
38.         self.assertEqual(BloomIndex.suffix, 'bloom')
39. 
40.     def test_deconstruction(self):
41.         index = BloomIndex(fields=['title'], name='test_bloom', length=80, columns=[4])
42.         path, args, kwargs = index.deconstruct()
43.         self.assertEqual(path, 'django.contrib.postgres.indexes.BloomIndex')
44.         self.assertEqual(args, ())
45.         self.assertEqual(kwargs, {
46.             'fields': ['title'],
47.             'name': 'test_bloom',
48.             'length': 80,
49.             'columns': [4],
50.         })
51. 
52.     def test_invalid_fields(self):
53.         msg = 'Bloom indexes support a maximum of 32 fields.'
54.         with self.assertRaisesMessage(ValueError, msg):
55.             BloomIndex(fields=['title'] * 33, name='test_bloom')
56. 
57.     def test_invalid_columns(self):
58.         msg = 'BloomIndex.columns must be a list or tuple.'
59.         with self.assertRaisesMessage(ValueError, msg):
60.             BloomIndex(fields=['title'], name='test_bloom', columns='x')
61.         msg = 'BloomIndex.columns cannot have more values than fields.'
62.         with self.assertRaisesMessage(ValueError, msg):
63.             BloomIndex(fields=['title'], name='test_bloom', columns=[4, 3])
64. 
65.     def test_invalid_columns_value(self):
66.         msg = 'BloomIndex.columns must contain integers from 1 to 4095.'
67.         for length in (0, 4096):
68.             with self.subTest(length), self.assertRaisesMessage(ValueError, msg):
69.                 BloomIndex(fields=['title'], name='test_bloom', columns=[length])
70. 
71.     def test_invalid_length(self):
72.         msg = 'BloomIndex.length must be None or an integer from 1 to 4096.'
73.         for length in (0, 4097):
74.             with self.subTest(length), self.assertRaisesMessage(ValueError, msg):
75.                 BloomIndex(fields=['title'], name='test_bloom', length=length)
76. 
77. 
78. class BrinIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
79.     index_class = BrinIndex
80. 
81.     def test_suffix(self):
82.         self.assertEqual(BrinIndex.suffix, 'brin')
83. 
84.     def test_deconstruction(self):
85.         index = BrinIndex(fields=['title'], name='test_title_brin', autosummarize=True, pages_per_range=16)
86.         path, args, kwargs = index.deconstruct()
87.         self.assertEqual(path, 'django.contrib.postgres.indexes.BrinIndex')
88.         self.assertEqual(args, ())
89.         self.assertEqual(kwargs, {
90.             'fields': ['title'],
91.             'name': 'test_title_brin',
92.             'autosummarize': True,
93.             'pages_per_range': 16,
94.         })
95. 
96.     def test_invalid_pages_per_range(self):
97.         with self.assertRaisesMessage(ValueError, 'pages_per_range must be None or a positive integer'):
98.             BrinIndex(fields=['title'], name='test_title_brin', pages_per_range=0)
99. 
100. 
101. class BTreeIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
102.     index_class = BTreeIndex
103. 
104.     def test_suffix(self):
105.         self.assertEqual(BTreeIndex.suffix, 'btree')
106. 
107.     def test_deconstruction(self):
108.         index = BTreeIndex(fields=['title'], name='test_title_btree', fillfactor=80)
109.         path, args, kwargs = index.deconstruct()
110.         self.assertEqual(path, 'django.contrib.postgres.indexes.BTreeIndex')
111.         self.assertEqual(args, ())
112.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_btree', 'fillfactor': 80})
113. 
114. 
115. class GinIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
116.     index_class = GinIndex
117. 
118.     def test_suffix(self):
119.         self.assertEqual(GinIndex.suffix, 'gin')
120. 
121.     def test_deconstruction(self):
122.         index = GinIndex(
123.             fields=['title'],
124.             name='test_title_gin',
125.             fastupdate=True,
126.             gin_pending_list_limit=128,
127.         )
128.         path, args, kwargs = index.deconstruct()
129.         self.assertEqual(path, 'django.contrib.postgres.indexes.GinIndex')
130.         self.assertEqual(args, ())
131.         self.assertEqual(kwargs, {
132.             'fields': ['title'],
133.             'name': 'test_title_gin',
134.             'fastupdate': True,
135.             'gin_pending_list_limit': 128,
136.         })
137. 
138. 
139. class GistIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
140.     index_class = GistIndex
141. 
142.     def test_suffix(self):
143.         self.assertEqual(GistIndex.suffix, 'gist')
144. 
145.     def test_deconstruction(self):
146.         index = GistIndex(fields=['title'], name='test_title_gist', buffering=False, fillfactor=80)
147.         path, args, kwargs = index.deconstruct()
148.         self.assertEqual(path, 'django.contrib.postgres.indexes.GistIndex')
149.         self.assertEqual(args, ())
150.         self.assertEqual(kwargs, {
151.             'fields': ['title'],
152.             'name': 'test_title_gist',
153.             'buffering': False,
154.             'fillfactor': 80,
155.         })
156. 
157. 
158. class HashIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
159.     index_class = HashIndex
160. 
161.     def test_suffix(self):
162.         self.assertEqual(HashIndex.suffix, 'hash')
163. 
164.     def test_deconstruction(self):
165.         index = HashIndex(fields=['title'], name='test_title_hash', fillfactor=80)
166.         path, args, kwargs = index.deconstruct()
167.         self.assertEqual(path, 'django.contrib.postgres.indexes.HashIndex')
168.         self.assertEqual(args, ())
169.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_hash', 'fillfactor': 80})
170. 
171. 
172. class SpGistIndexTests(IndexTestMixin, PostgreSQLSimpleTestCase):
173.     index_class = SpGistIndex
174. 
175.     def test_suffix(self):
176.         self.assertEqual(SpGistIndex.suffix, 'spgist')
177. 
178.     def test_deconstruction(self):
179.         index = SpGistIndex(fields=['title'], name='test_title_spgist', fillfactor=80)
180.         path, args, kwargs = index.deconstruct()
181.         self.assertEqual(path, 'django.contrib.postgres.indexes.SpGistIndex')
182.         self.assertEqual(args, ())
183.         self.assertEqual(kwargs, {'fields': ['title'], 'name': 'test_title_spgist', 'fillfactor': 80})
184. 
185. 
186. class SchemaTests(PostgreSQLTestCase):
187. 
188.     def get_constraints(self, table):
189.         """
190.         Get the indexes on the table using a new cursor.
191.         """
192.         with connection.cursor() as cursor:
193.             return connection.introspection.get_constraints(cursor, table)
194. 
195.     def test_gin_index(self):
196.         # Ensure the table is there and doesn't have an index.
197.         self.assertNotIn('field', self.get_constraints(IntegerArrayModel._meta.db_table))
198.         # Add the index
199.         index_name = 'integer_array_model_field_gin'
200.         index = GinIndex(fields=['field'], name=index_name)
201.         with connection.schema_editor() as editor:
202.             editor.add_index(IntegerArrayModel, index)
203.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
204.         # Check gin index was added
205.         self.assertEqual(constraints[index_name]['type'], GinIndex.suffix)
206.         # Drop the index
207.         with connection.schema_editor() as editor:
208.             editor.remove_index(IntegerArrayModel, index)
209.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
210. 
211.     def test_gin_fastupdate(self):
212.         index_name = 'integer_array_gin_fastupdate'
213.         index = GinIndex(fields=['field'], name=index_name, fastupdate=False)
214.         with connection.schema_editor() as editor:
215.             editor.add_index(IntegerArrayModel, index)
216.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
217.         self.assertEqual(constraints[index_name]['type'], 'gin')
218.         self.assertEqual(constraints[index_name]['options'], ['fastupdate=off'])
219.         with connection.schema_editor() as editor:
220.             editor.remove_index(IntegerArrayModel, index)
221.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
222. 
223.     def test_partial_gin_index(self):
224.         with register_lookup(CharField, Length):
225.             index_name = 'char_field_gin_partial_idx'
226.             index = GinIndex(fields=['field'], name=index_name, condition=Q(field__length=40))
227.             with connection.schema_editor() as editor:
228.                 editor.add_index(CharFieldModel, index)
229.             constraints = self.get_constraints(CharFieldModel._meta.db_table)
230.             self.assertEqual(constraints[index_name]['type'], 'gin')
231.             with connection.schema_editor() as editor:
232.                 editor.remove_index(CharFieldModel, index)
233.             self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
234. 
235.     def test_partial_gin_index_with_tablespace(self):
236.         with register_lookup(CharField, Length):
237.             index_name = 'char_field_gin_partial_idx'
238.             index = GinIndex(
239.                 fields=['field'],
240.                 name=index_name,
241.                 condition=Q(field__length=40),
242.                 db_tablespace='pg_default',
243.             )
244.             with connection.schema_editor() as editor:
245.                 editor.add_index(CharFieldModel, index)
246.                 self.assertIn('TABLESPACE "pg_default" ', str(index.create_sql(CharFieldModel, editor)))
247.             constraints = self.get_constraints(CharFieldModel._meta.db_table)
248.             self.assertEqual(constraints[index_name]['type'], 'gin')
249.             with connection.schema_editor() as editor:
250.                 editor.remove_index(CharFieldModel, index)
251.             self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
252. 
253.     def test_gin_parameters(self):
254.         index_name = 'integer_array_gin_params'
255.         index = GinIndex(fields=['field'], name=index_name, fastupdate=True, gin_pending_list_limit=64)
256.         with connection.schema_editor() as editor:
257.             editor.add_index(IntegerArrayModel, index)
258.         constraints = self.get_constraints(IntegerArrayModel._meta.db_table)
259.         self.assertEqual(constraints[index_name]['type'], 'gin')
260.         self.assertEqual(constraints[index_name]['options'], ['gin_pending_list_limit=64', 'fastupdate=on'])
261.         with connection.schema_editor() as editor:
262.             editor.remove_index(IntegerArrayModel, index)
263.         self.assertNotIn(index_name, self.get_constraints(IntegerArrayModel._meta.db_table))
264. 
265.     @skipUnlessDBFeature('has_bloom_index')
266.     def test_bloom_index(self):
267.         index_name = 'char_field_model_field_bloom'
268.         index = BloomIndex(fields=['field'], name=index_name)
269.         with connection.schema_editor() as editor:
270.             editor.add_index(CharFieldModel, index)
271.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
272.         self.assertEqual(constraints[index_name]['type'], BloomIndex.suffix)
273.         with connection.schema_editor() as editor:
274.             editor.remove_index(CharFieldModel, index)
275.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
276. 
277.     @skipUnlessDBFeature('has_bloom_index')
278.     def test_bloom_parameters(self):
279.         index_name = 'char_field_model_field_bloom_params'
280.         index = BloomIndex(fields=['field'], name=index_name, length=512, columns=[3])
281.         with connection.schema_editor() as editor:
282.             editor.add_index(CharFieldModel, index)
283.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
284.         self.assertEqual(constraints[index_name]['type'], BloomIndex.suffix)
285.         self.assertEqual(constraints[index_name]['options'], ['length=512', 'col1=3'])
286.         with connection.schema_editor() as editor:
287.             editor.remove_index(CharFieldModel, index)
288.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
289. 
290.     def test_bloom_index_not_supported(self):
291.         index_name = 'bloom_index_exception'
292.         index = BloomIndex(fields=['field'], name=index_name)
293.         msg = 'Bloom indexes require PostgreSQL 9.6+.'
294.         with self.assertRaisesMessage(NotSupportedError, msg):
295.             with mock.patch('django.db.backends.postgresql.features.DatabaseFeatures.has_bloom_index', False):
296.                 with connection.schema_editor() as editor:
297.                     editor.add_index(CharFieldModel, index)
298.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
299. 
300.     def test_brin_index(self):
301.         index_name = 'char_field_model_field_brin'
302.         index = BrinIndex(fields=['field'], name=index_name, pages_per_range=4)
303.         with connection.schema_editor() as editor:
304.             editor.add_index(CharFieldModel, index)
305.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
306.         self.assertEqual(constraints[index_name]['type'], BrinIndex.suffix)
307.         self.assertEqual(constraints[index_name]['options'], ['pages_per_range=4'])
308.         with connection.schema_editor() as editor:
309.             editor.remove_index(CharFieldModel, index)
310.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
311. 
312.     @skipUnlessDBFeature('has_brin_autosummarize')
313.     def test_brin_parameters(self):
314.         index_name = 'char_field_brin_params'
315.         index = BrinIndex(fields=['field'], name=index_name, autosummarize=True)
316.         with connection.schema_editor() as editor:
317.             editor.add_index(CharFieldModel, index)
318.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
319.         self.assertEqual(constraints[index_name]['type'], BrinIndex.suffix)
320.         self.assertEqual(constraints[index_name]['options'], ['autosummarize=on'])
321.         with connection.schema_editor() as editor:
322.             editor.remove_index(CharFieldModel, index)
323.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
324. 
325.     def test_brin_autosummarize_not_supported(self):
326.         index_name = 'brin_options_exception'
327.         index = BrinIndex(fields=['field'], name=index_name, autosummarize=True)
328.         with self.assertRaisesMessage(NotSupportedError, 'BRIN option autosummarize requires PostgreSQL 10+.'):
329.             with mock.patch('django.db.backends.postgresql.features.DatabaseFeatures.has_brin_autosummarize', False):
330.                 with connection.schema_editor() as editor:
331.                     editor.add_index(CharFieldModel, index)
332.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
333. 
334.     def test_btree_index(self):
335.         # Ensure the table is there and doesn't have an index.
336.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
337.         # Add the index.
338.         index_name = 'char_field_model_field_btree'
339.         index = BTreeIndex(fields=['field'], name=index_name)
340.         with connection.schema_editor() as editor:
341.             editor.add_index(CharFieldModel, index)
342.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
343.         # The index was added.
344.         self.assertEqual(constraints[index_name]['type'], BTreeIndex.suffix)
345.         # Drop the index.
346.         with connection.schema_editor() as editor:
347.             editor.remove_index(CharFieldModel, index)
348.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
349. 
350.     def test_btree_parameters(self):
351.         index_name = 'integer_array_btree_fillfactor'
352.         index = BTreeIndex(fields=['field'], name=index_name, fillfactor=80)
353.         with connection.schema_editor() as editor:
354.             editor.add_index(CharFieldModel, index)
355.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
356.         self.assertEqual(constraints[index_name]['type'], BTreeIndex.suffix)
357.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
358.         with connection.schema_editor() as editor:
359.             editor.remove_index(CharFieldModel, index)
360.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
361. 
362.     def test_gist_index(self):
363.         # Ensure the table is there and doesn't have an index.
364.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
365.         # Add the index.
366.         index_name = 'char_field_model_field_gist'
367.         index = GistIndex(fields=['field'], name=index_name)
368.         with connection.schema_editor() as editor:
369.             editor.add_index(CharFieldModel, index)
370.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
371.         # The index was added.
372.         self.assertEqual(constraints[index_name]['type'], GistIndex.suffix)
373.         # Drop the index.
374.         with connection.schema_editor() as editor:
375.             editor.remove_index(CharFieldModel, index)
376.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
377. 
378.     def test_gist_parameters(self):
379.         index_name = 'integer_array_gist_buffering'
380.         index = GistIndex(fields=['field'], name=index_name, buffering=True, fillfactor=80)
381.         with connection.schema_editor() as editor:
382.             editor.add_index(CharFieldModel, index)
383.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
384.         self.assertEqual(constraints[index_name]['type'], GistIndex.suffix)
385.         self.assertEqual(constraints[index_name]['options'], ['buffering=on', 'fillfactor=80'])
386.         with connection.schema_editor() as editor:
387.             editor.remove_index(CharFieldModel, index)
388.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
389. 
390.     def test_hash_index(self):
391.         # Ensure the table is there and doesn't have an index.
392.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
393.         # Add the index.
394.         index_name = 'char_field_model_field_hash'
395.         index = HashIndex(fields=['field'], name=index_name)
396.         with connection.schema_editor() as editor:
397.             editor.add_index(CharFieldModel, index)
398.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
399.         # The index was added.
400.         self.assertEqual(constraints[index_name]['type'], HashIndex.suffix)
401.         # Drop the index.
402.         with connection.schema_editor() as editor:
403.             editor.remove_index(CharFieldModel, index)
404.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
405. 
406.     def test_hash_parameters(self):
407.         index_name = 'integer_array_hash_fillfactor'
408.         index = HashIndex(fields=['field'], name=index_name, fillfactor=80)
409.         with connection.schema_editor() as editor:
410.             editor.add_index(CharFieldModel, index)
411.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
412.         self.assertEqual(constraints[index_name]['type'], HashIndex.suffix)
413.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
414.         with connection.schema_editor() as editor:
415.             editor.remove_index(CharFieldModel, index)
416.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
417. 
418.     def test_spgist_index(self):
419.         # Ensure the table is there and doesn't have an index.
420.         self.assertNotIn('field', self.get_constraints(CharFieldModel._meta.db_table))
421.         # Add the index.
422.         index_name = 'char_field_model_field_spgist'
423.         index = SpGistIndex(fields=['field'], name=index_name)
424.         with connection.schema_editor() as editor:
425.             editor.add_index(CharFieldModel, index)
426.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
427.         # The index was added.
428.         self.assertEqual(constraints[index_name]['type'], SpGistIndex.suffix)
429.         # Drop the index.
430.         with connection.schema_editor() as editor:
431.             editor.remove_index(CharFieldModel, index)
432.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))
433. 
434.     def test_spgist_parameters(self):
435.         index_name = 'integer_array_spgist_fillfactor'
436.         index = SpGistIndex(fields=['field'], name=index_name, fillfactor=80)
437.         with connection.schema_editor() as editor:
438.             editor.add_index(CharFieldModel, index)
439.         constraints = self.get_constraints(CharFieldModel._meta.db_table)
440.         self.assertEqual(constraints[index_name]['type'], SpGistIndex.suffix)
441.         self.assertEqual(constraints[index_name]['options'], ['fillfactor=80'])
442.         with connection.schema_editor() as editor:
443.             editor.remove_index(CharFieldModel, index)
444.         self.assertNotIn(index_name, self.get_constraints(CharFieldModel._meta.db_table))


File: tests/postgres_tests/test_operations.py
Line number range: 1 - 144
Content:
1. import unittest
2. 
3. from migrations.test_base import OperationTestBase
4. 
5. from django.db import connection, models
6. from django.db.models import Index
7. from django.db.utils import NotSupportedError
8. from django.test import modify_settings
9. 
10. try:
11.     from django.contrib.postgres.operations import (
12.         AddIndexConcurrently, RemoveIndexConcurrently,
13.     )
14.     from django.contrib.postgres.indexes import BrinIndex, BTreeIndex
15. except ImportError:
16.     pass
17. 
18. 
19. @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific tests.')
20. @modify_settings(INSTALLED_APPS={'append': 'migrations'})
21. class AddIndexConcurrentlyTests(OperationTestBase):
22.     app_label = 'test_add_concurrently'
23. 
24.     def test_requires_atomic_false(self):
25.         project_state = self.set_up_test_model(self.app_label)
26.         new_state = project_state.clone()
27.         operation = AddIndexConcurrently(
28.             'Pony',
29.             models.Index(fields=['pink'], name='pony_pink_idx'),
30.         )
31.         msg = (
32.             'The AddIndexConcurrently operation cannot be executed inside '
33.             'a transaction (set atomic = False on the migration).'
34.         )
35.         with self.assertRaisesMessage(NotSupportedError, msg):
36.             with connection.schema_editor(atomic=True) as editor:
37.                 operation.database_forwards(self.app_label, editor, project_state, new_state)
38. 
39.     def test_add(self):
40.         project_state = self.set_up_test_model(self.app_label, index=False)
41.         table_name = '%s_pony' % self.app_label
42.         index = Index(fields=['pink'], name='pony_pink_idx')
43.         new_state = project_state.clone()
44.         operation = AddIndexConcurrently('Pony', index)
45.         self.assertEqual(
46.             operation.describe(),
47.             'Concurrently create index pony_pink_idx on field(s) pink of '
48.             'model Pony'
49.         )
50.         operation.state_forwards(self.app_label, new_state)
51.         self.assertEqual(len(new_state.models[self.app_label, 'pony'].options['indexes']), 1)
52.         self.assertIndexNotExists(table_name, ['pink'])
53.         # Add index.
54.         with connection.schema_editor(atomic=False) as editor:
55.             operation.database_forwards(self.app_label, editor, project_state, new_state)
56.         self.assertIndexExists(table_name, ['pink'])
57.         # Reversal.
58.         with connection.schema_editor(atomic=False) as editor:
59.             operation.database_backwards(self.app_label, editor, new_state, project_state)
60.         self.assertIndexNotExists(table_name, ['pink'])
61.         # Deconstruction.
62.         name, args, kwargs = operation.deconstruct()
63.         self.assertEqual(name, 'AddIndexConcurrently')
64.         self.assertEqual(args, [])
65.         self.assertEqual(kwargs, {'model_name': 'Pony', 'index': index})
66. 
67.     def test_add_other_index_type(self):
68.         project_state = self.set_up_test_model(self.app_label, index=False)
69.         table_name = '%s_pony' % self.app_label
70.         new_state = project_state.clone()
71.         operation = AddIndexConcurrently(
72.             'Pony',
73.             BrinIndex(fields=['pink'], name='pony_pink_brin_idx'),
74.         )
75.         self.assertIndexNotExists(table_name, ['pink'])
76.         # Add index.
77.         with connection.schema_editor(atomic=False) as editor:
78.             operation.database_forwards(self.app_label, editor, project_state, new_state)
79.         self.assertIndexExists(table_name, ['pink'], index_type='brin')
80.         # Reversal.
81.         with connection.schema_editor(atomic=False) as editor:
82.             operation.database_backwards(self.app_label, editor, new_state, project_state)
83.         self.assertIndexNotExists(table_name, ['pink'])
84. 
85.     def test_add_with_options(self):
86.         project_state = self.set_up_test_model(self.app_label, index=False)
87.         table_name = '%s_pony' % self.app_label
88.         new_state = project_state.clone()
89.         index = BTreeIndex(fields=['pink'], name='pony_pink_btree_idx', fillfactor=70)
90.         operation = AddIndexConcurrently('Pony', index)
91.         self.assertIndexNotExists(table_name, ['pink'])
92.         # Add index.
93.         with connection.schema_editor(atomic=False) as editor:
94.             operation.database_forwards(self.app_label, editor, project_state, new_state)
95.         self.assertIndexExists(table_name, ['pink'], index_type='btree')
96.         # Reversal.
97.         with connection.schema_editor(atomic=False) as editor:
98.             operation.database_backwards(self.app_label, editor, new_state, project_state)
99.         self.assertIndexNotExists(table_name, ['pink'])
100. 
101. 
102. @unittest.skipUnless(connection.vendor == 'postgresql', 'PostgreSQL specific tests.')
103. @modify_settings(INSTALLED_APPS={'append': 'migrations'})
104. class RemoveIndexConcurrentlyTests(OperationTestBase):
105.     app_label = 'test_rm_concurrently'
106. 
107.     def test_requires_atomic_false(self):
108.         project_state = self.set_up_test_model(self.app_label, index=True)
109.         new_state = project_state.clone()
110.         operation = RemoveIndexConcurrently('Pony', 'pony_pink_idx')
111.         msg = (
112.             'The RemoveIndexConcurrently operation cannot be executed inside '
113.             'a transaction (set atomic = False on the migration).'
114.         )
115.         with self.assertRaisesMessage(NotSupportedError, msg):
116.             with connection.schema_editor(atomic=True) as editor:
117.                 operation.database_forwards(self.app_label, editor, project_state, new_state)
118. 
119.     def test_remove(self):
120.         project_state = self.set_up_test_model(self.app_label, index=True)
121.         table_name = '%s_pony' % self.app_label
122.         self.assertTableExists(table_name)
123.         new_state = project_state.clone()
124.         operation = RemoveIndexConcurrently('Pony', 'pony_pink_idx')
125.         self.assertEqual(
126.             operation.describe(),
127.             'Concurrently remove index pony_pink_idx from Pony',
128.         )
129.         operation.state_forwards(self.app_label, new_state)
130.         self.assertEqual(len(new_state.models[self.app_label, 'pony'].options['indexes']), 0)
131.         self.assertIndexExists(table_name, ['pink'])
132.         # Remove index.
133.         with connection.schema_editor(atomic=False) as editor:
134.             operation.database_forwards(self.app_label, editor, project_state, new_state)
135.         self.assertIndexNotExists(table_name, ['pink'])
136.         # Reversal.
137.         with connection.schema_editor(atomic=False) as editor:
138.             operation.database_backwards(self.app_label, editor, new_state, project_state)
139.         self.assertIndexExists(table_name, ['pink'])
140.         # Deconstruction.
141.         name, args, kwargs = operation.deconstruct()
142.         self.assertEqual(name, 'RemoveIndexConcurrently')
143.         self.assertEqual(args, [])
144.         self.assertEqual(kwargs, {'model_name': 'Pony', 'name': 'pony_pink_idx'})


File: tests/schema/tests.py
Line number range: 1 - 500
Content:
1. import datetime
2. import itertools
3. import unittest
4. from copy import copy
5. from unittest import mock
6. 
7. from django.core.management.color import no_style
8. from django.db import (
9.     DatabaseError, IntegrityError, OperationalError, connection,
10. )
11. from django.db.models import Index, Model, Q
12. from django.db.models.constraints import CheckConstraint, UniqueConstraint
13. from django.db.models.deletion import CASCADE, PROTECT
14. from django.db.models.fields import (
15.     AutoField, BigAutoField, BigIntegerField, BinaryField, BooleanField,
16.     CharField, DateField, DateTimeField, IntegerField, PositiveIntegerField,
17.     SlugField, SmallAutoField, SmallIntegerField, TextField, TimeField,
18.     UUIDField,
19. )
20. from django.db.models.fields.related import (
21.     ForeignKey, ForeignObject, ManyToManyField, OneToOneField,
22. )
23. from django.db.transaction import TransactionManagementError, atomic
24. from django.db.utils import DataError
25. from django.test import (
26.     TransactionTestCase, skipIfDBFeature, skipUnlessDBFeature,
27. )
28. from django.test.utils import CaptureQueriesContext, isolate_apps
29. from django.utils import timezone
30. 
31. from .fields import (
32.     CustomManyToManyField, InheritedManyToManyField, MediumBlobField,
33. )
34. from .models import (
35.     Author, AuthorCharFieldWithIndex, AuthorTextFieldWithIndex,
36.     AuthorWithDefaultHeight, AuthorWithEvenLongerName, AuthorWithIndexedName,
37.     AuthorWithIndexedNameAndBirthday, AuthorWithUniqueName,
38.     AuthorWithUniqueNameAndBirthday, Book, BookForeignObj, BookWeak,
39.     BookWithLongName, BookWithO2O, BookWithoutAuthor, BookWithSlug, IntegerPK,
40.     Node, Note, NoteRename, Tag, TagIndexed, TagM2MTest, TagUniqueRename,
41.     Thing, UniqueTest, new_apps,
42. )
43. 
44. 
45. class SchemaTests(TransactionTestCase):
46.     """
47.     Tests for the schema-alteration code.
48. 
49.     Be aware that these tests are more liable than most to false results,
50.     as sometimes the code to check if a test has worked is almost as complex
51.     as the code it is testing.
52.     """
53. 
54.     available_apps = []
55. 
56.     models = [
57.         Author, AuthorCharFieldWithIndex, AuthorTextFieldWithIndex,
58.         AuthorWithDefaultHeight, AuthorWithEvenLongerName, Book, BookWeak,
59.         BookWithLongName, BookWithO2O, BookWithSlug, IntegerPK, Node, Note,
60.         Tag, TagIndexed, TagM2MTest, TagUniqueRename, Thing, UniqueTest,
61.     ]
62. 
63.     # Utility functions
64. 
65.     def setUp(self):
66.         # local_models should contain test dependent model classes that will be
67.         # automatically removed from the app cache on test tear down.
68.         self.local_models = []
69.         # isolated_local_models contains models that are in test methods
70.         # decorated with @isolate_apps.
71.         self.isolated_local_models = []
72. 
73.     def tearDown(self):
74.         # Delete any tables made for our models
75.         self.delete_tables()
76.         new_apps.clear_cache()
77.         for model in new_apps.get_models():
78.             model._meta._expire_cache()
79.         if 'schema' in new_apps.all_models:
80.             for model in self.local_models:
81.                 for many_to_many in model._meta.many_to_many:
82.                     through = many_to_many.remote_field.through
83.                     if through and through._meta.auto_created:
84.                         del new_apps.all_models['schema'][through._meta.model_name]
85.                 del new_apps.all_models['schema'][model._meta.model_name]
86.         if self.isolated_local_models:
87.             with connection.schema_editor() as editor:
88.                 for model in self.isolated_local_models:
89.                     editor.delete_model(model)
90. 
91.     def delete_tables(self):
92.         "Deletes all model tables for our models for a clean test environment"
93.         converter = connection.introspection.identifier_converter
94.         with connection.schema_editor() as editor:
95.             connection.disable_constraint_checking()
96.             table_names = connection.introspection.table_names()
97.             for model in itertools.chain(SchemaTests.models, self.local_models):
98.                 tbl = converter(model._meta.db_table)
99.                 if tbl in table_names:
100.                     editor.delete_model(model)
101.                     table_names.remove(tbl)
102.             connection.enable_constraint_checking()
103. 
104.     def column_classes(self, model):
105.         with connection.cursor() as cursor:
106.             columns = {
107.                 d[0]: (connection.introspection.get_field_type(d[1], d), d)
108.                 for d in connection.introspection.get_table_description(
109.                     cursor,
110.                     model._meta.db_table,
111.                 )
112.             }
113.         # SQLite has a different format for field_type
114.         for name, (type, desc) in columns.items():
115.             if isinstance(type, tuple):
116.                 columns[name] = (type[0], desc)
117.         # SQLite also doesn't error properly
118.         if not columns:
119.             raise DatabaseError("Table does not exist (empty pragma)")
120.         return columns
121. 
122.     def get_primary_key(self, table):
123.         with connection.cursor() as cursor:
124.             return connection.introspection.get_primary_key_column(cursor, table)
125. 
126.     def get_indexes(self, table):
127.         """
128.         Get the indexes on the table using a new cursor.
129.         """
130.         with connection.cursor() as cursor:
131.             return [
132.                 c['columns'][0]
133.                 for c in connection.introspection.get_constraints(cursor, table).values()
134.                 if c['index'] and len(c['columns']) == 1
135.             ]
136. 
137.     def get_uniques(self, table):
138.         with connection.cursor() as cursor:
139.             return [
140.                 c['columns'][0]
141.                 for c in connection.introspection.get_constraints(cursor, table).values()
142.                 if c['unique'] and len(c['columns']) == 1
143.             ]
144. 
145.     def get_constraints(self, table):
146.         """
147.         Get the constraints on a table using a new cursor.
148.         """
149.         with connection.cursor() as cursor:
150.             return connection.introspection.get_constraints(cursor, table)
151. 
152.     def get_constraints_for_column(self, model, column_name):
153.         constraints = self.get_constraints(model._meta.db_table)
154.         constraints_for_column = []
155.         for name, details in constraints.items():
156.             if details['columns'] == [column_name]:
157.                 constraints_for_column.append(name)
158.         return sorted(constraints_for_column)
159. 
160.     def check_added_field_default(self, schema_editor, model, field, field_name, expected_default,
161.                                   cast_function=None):
162.         with connection.cursor() as cursor:
163.             schema_editor.add_field(model, field)
164.             cursor.execute("SELECT {} FROM {};".format(field_name, model._meta.db_table))
165.             database_default = cursor.fetchall()[0][0]
166.             if cast_function and not type(database_default) == type(expected_default):
167.                 database_default = cast_function(database_default)
168.             self.assertEqual(database_default, expected_default)
169. 
170.     def get_constraints_count(self, table, column, fk_to):
171.         """
172.         Return a dict with keys 'fks', 'uniques, and 'indexes' indicating the
173.         number of foreign keys, unique constraints, and indexes on
174.         `table`.`column`. The `fk_to` argument is a 2-tuple specifying the
175.         expected foreign key relationship's (table, column).
176.         """
177.         with connection.cursor() as cursor:
178.             constraints = connection.introspection.get_constraints(cursor, table)
179.         counts = {'fks': 0, 'uniques': 0, 'indexes': 0}
180.         for c in constraints.values():
181.             if c['columns'] == [column]:
182.                 if c['foreign_key'] == fk_to:
183.                     counts['fks'] += 1
184.                 if c['unique']:
185.                     counts['uniques'] += 1
186.                 elif c['index']:
187.                     counts['indexes'] += 1
188.         return counts
189. 
190.     def assertIndexOrder(self, table, index, order):
191.         constraints = self.get_constraints(table)
192.         self.assertIn(index, constraints)
193.         index_orders = constraints[index]['orders']
194.         self.assertTrue(all(val == expected for val, expected in zip(index_orders, order)))
195. 
196.     def assertForeignKeyExists(self, model, column, expected_fk_table, field='id'):
197.         """
198.         Fail if the FK constraint on `model.Meta.db_table`.`column` to
199.         `expected_fk_table`.id doesn't exist.
200.         """
201.         constraints = self.get_constraints(model._meta.db_table)
202.         constraint_fk = None
203.         for details in constraints.values():
204.             if details['columns'] == [column] and details['foreign_key']:
205.                 constraint_fk = details['foreign_key']
206.                 break
207.         self.assertEqual(constraint_fk, (expected_fk_table, field))
208. 
209.     def assertForeignKeyNotExists(self, model, column, expected_fk_table):
210.         with self.assertRaises(AssertionError):
211.             self.assertForeignKeyExists(model, column, expected_fk_table)
212. 
213.     # Tests
214.     def test_creation_deletion(self):
215.         """
216.         Tries creating a model's table, and then deleting it.
217.         """
218.         with connection.schema_editor() as editor:
219.             # Create the table
220.             editor.create_model(Author)
221.             # The table is there
222.             list(Author.objects.all())
223.             # Clean up that table
224.             editor.delete_model(Author)
225.             # No deferred SQL should be left over.
226.             self.assertEqual(editor.deferred_sql, [])
227.         # The table is gone
228.         with self.assertRaises(DatabaseError):
229.             list(Author.objects.all())
230. 
231.     @skipUnlessDBFeature('supports_foreign_keys')
232.     def test_fk(self):
233.         "Creating tables out of FK order, then repointing, works"
234.         # Create the table
235.         with connection.schema_editor() as editor:
236.             editor.create_model(Book)
237.             editor.create_model(Author)
238.             editor.create_model(Tag)
239.         # Initial tables are there
240.         list(Author.objects.all())
241.         list(Book.objects.all())
242.         # Make sure the FK constraint is present
243.         with self.assertRaises(IntegrityError):
244.             Book.objects.create(
245.                 author_id=1,
246.                 title="Much Ado About Foreign Keys",
247.                 pub_date=datetime.datetime.now(),
248.             )
249.         # Repoint the FK constraint
250.         old_field = Book._meta.get_field("author")
251.         new_field = ForeignKey(Tag, CASCADE)
252.         new_field.set_attributes_from_name("author")
253.         with connection.schema_editor() as editor:
254.             editor.alter_field(Book, old_field, new_field, strict=True)
255.         self.assertForeignKeyExists(Book, 'author_id', 'schema_tag')
256. 
257.     @skipUnlessDBFeature('can_create_inline_fk')
258.     def test_inline_fk(self):
259.         # Create some tables.
260.         with connection.schema_editor() as editor:
261.             editor.create_model(Author)
262.             editor.create_model(Book)
263.             editor.create_model(Note)
264.         self.assertForeignKeyNotExists(Note, 'book_id', 'schema_book')
265.         # Add a foreign key from one to the other.
266.         with connection.schema_editor() as editor:
267.             new_field = ForeignKey(Book, CASCADE)
268.             new_field.set_attributes_from_name('book')
269.             editor.add_field(Note, new_field)
270.         self.assertForeignKeyExists(Note, 'book_id', 'schema_book')
271.         # Creating a FK field with a constraint uses a single statement without
272.         # a deferred ALTER TABLE.
273.         self.assertFalse([
274.             sql for sql in (str(statement) for statement in editor.deferred_sql)
275.             if sql.startswith('ALTER TABLE') and 'ADD CONSTRAINT' in sql
276.         ])
277. 
278.     @skipUnlessDBFeature('supports_foreign_keys')
279.     def test_char_field_with_db_index_to_fk(self):
280.         # Create the table
281.         with connection.schema_editor() as editor:
282.             editor.create_model(Author)
283.             editor.create_model(AuthorCharFieldWithIndex)
284.         # Change CharField to FK
285.         old_field = AuthorCharFieldWithIndex._meta.get_field('char_field')
286.         new_field = ForeignKey(Author, CASCADE, blank=True)
287.         new_field.set_attributes_from_name('char_field')
288.         with connection.schema_editor() as editor:
289.             editor.alter_field(AuthorCharFieldWithIndex, old_field, new_field, strict=True)
290.         self.assertForeignKeyExists(AuthorCharFieldWithIndex, 'char_field_id', 'schema_author')
291. 
292.     @skipUnlessDBFeature('supports_foreign_keys')
293.     @skipUnlessDBFeature('supports_index_on_text_field')
294.     def test_text_field_with_db_index_to_fk(self):
295.         # Create the table
296.         with connection.schema_editor() as editor:
297.             editor.create_model(Author)
298.             editor.create_model(AuthorTextFieldWithIndex)
299.         # Change TextField to FK
300.         old_field = AuthorTextFieldWithIndex._meta.get_field('text_field')
301.         new_field = ForeignKey(Author, CASCADE, blank=True)
302.         new_field.set_attributes_from_name('text_field')
303.         with connection.schema_editor() as editor:
304.             editor.alter_field(AuthorTextFieldWithIndex, old_field, new_field, strict=True)
305.         self.assertForeignKeyExists(AuthorTextFieldWithIndex, 'text_field_id', 'schema_author')
306. 
307.     @isolate_apps('schema')
308.     def test_char_field_pk_to_auto_field(self):
309.         class Foo(Model):
310.             id = CharField(max_length=255, primary_key=True)
311. 
312.             class Meta:
313.                 app_label = 'schema'
314. 
315.         with connection.schema_editor() as editor:
316.             editor.create_model(Foo)
317.         self.isolated_local_models = [Foo]
318.         old_field = Foo._meta.get_field('id')
319.         new_field = AutoField(primary_key=True)
320.         new_field.set_attributes_from_name('id')
321.         new_field.model = Foo
322.         with connection.schema_editor() as editor:
323.             editor.alter_field(Foo, old_field, new_field, strict=True)
324. 
325.     @skipUnlessDBFeature('supports_foreign_keys')
326.     def test_fk_to_proxy(self):
327.         "Creating a FK to a proxy model creates database constraints."
328.         class AuthorProxy(Author):
329.             class Meta:
330.                 app_label = 'schema'
331.                 apps = new_apps
332.                 proxy = True
333. 
334.         class AuthorRef(Model):
335.             author = ForeignKey(AuthorProxy, on_delete=CASCADE)
336. 
337.             class Meta:
338.                 app_label = 'schema'
339.                 apps = new_apps
340. 
341.         self.local_models = [AuthorProxy, AuthorRef]
342. 
343.         # Create the table
344.         with connection.schema_editor() as editor:
345.             editor.create_model(Author)
346.             editor.create_model(AuthorRef)
347.         self.assertForeignKeyExists(AuthorRef, 'author_id', 'schema_author')
348. 
349.     @skipUnlessDBFeature('supports_foreign_keys')
350.     def test_fk_db_constraint(self):
351.         "The db_constraint parameter is respected"
352.         # Create the table
353.         with connection.schema_editor() as editor:
354.             editor.create_model(Tag)
355.             editor.create_model(Author)
356.             editor.create_model(BookWeak)
357.         # Initial tables are there
358.         list(Author.objects.all())
359.         list(Tag.objects.all())
360.         list(BookWeak.objects.all())
361.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
362.         # Make a db_constraint=False FK
363.         new_field = ForeignKey(Tag, CASCADE, db_constraint=False)
364.         new_field.set_attributes_from_name("tag")
365.         with connection.schema_editor() as editor:
366.             editor.add_field(Author, new_field)
367.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
368.         # Alter to one with a constraint
369.         new_field2 = ForeignKey(Tag, CASCADE)
370.         new_field2.set_attributes_from_name("tag")
371.         with connection.schema_editor() as editor:
372.             editor.alter_field(Author, new_field, new_field2, strict=True)
373.         self.assertForeignKeyExists(Author, 'tag_id', 'schema_tag')
374.         # Alter to one without a constraint again
375.         new_field2 = ForeignKey(Tag, CASCADE)
376.         new_field2.set_attributes_from_name("tag")
377.         with connection.schema_editor() as editor:
378.             editor.alter_field(Author, new_field2, new_field, strict=True)
379.         self.assertForeignKeyNotExists(Author, 'tag_id', 'schema_tag')
380. 
381.     @isolate_apps('schema')
382.     def test_no_db_constraint_added_during_primary_key_change(self):
383.         """
384.         When a primary key that's pointed to by a ForeignKey with
385.         db_constraint=False is altered, a foreign key constraint isn't added.
386.         """
387.         class Author(Model):
388.             class Meta:
389.                 app_label = 'schema'
390. 
391.         class BookWeak(Model):
392.             author = ForeignKey(Author, CASCADE, db_constraint=False)
393. 
394.             class Meta:
395.                 app_label = 'schema'
396. 
397.         with connection.schema_editor() as editor:
398.             editor.create_model(Author)
399.             editor.create_model(BookWeak)
400.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
401.         old_field = Author._meta.get_field('id')
402.         new_field = BigAutoField(primary_key=True)
403.         new_field.model = Author
404.         new_field.set_attributes_from_name('id')
405.         # @isolate_apps() and inner models are needed to have the model
406.         # relations populated, otherwise this doesn't act as a regression test.
407.         self.assertEqual(len(new_field.model._meta.related_objects), 1)
408.         with connection.schema_editor() as editor:
409.             editor.alter_field(Author, old_field, new_field, strict=True)
410.         self.assertForeignKeyNotExists(BookWeak, 'author_id', 'schema_author')
411. 
412.     def _test_m2m_db_constraint(self, M2MFieldClass):
413.         class LocalAuthorWithM2M(Model):
414.             name = CharField(max_length=255)
415. 
416.             class Meta:
417.                 app_label = 'schema'
418.                 apps = new_apps
419. 
420.         self.local_models = [LocalAuthorWithM2M]
421. 
422.         # Create the table
423.         with connection.schema_editor() as editor:
424.             editor.create_model(Tag)
425.             editor.create_model(LocalAuthorWithM2M)
426.         # Initial tables are there
427.         list(LocalAuthorWithM2M.objects.all())
428.         list(Tag.objects.all())
429.         # Make a db_constraint=False FK
430.         new_field = M2MFieldClass(Tag, related_name="authors", db_constraint=False)
431.         new_field.contribute_to_class(LocalAuthorWithM2M, "tags")
432.         # Add the field
433.         with connection.schema_editor() as editor:
434.             editor.add_field(LocalAuthorWithM2M, new_field)
435.         self.assertForeignKeyNotExists(new_field.remote_field.through, 'tag_id', 'schema_tag')
436. 
437.     @skipUnlessDBFeature('supports_foreign_keys')
438.     def test_m2m_db_constraint(self):
439.         self._test_m2m_db_constraint(ManyToManyField)
440. 
441.     @skipUnlessDBFeature('supports_foreign_keys')
442.     def test_m2m_db_constraint_custom(self):
443.         self._test_m2m_db_constraint(CustomManyToManyField)
444. 
445.     @skipUnlessDBFeature('supports_foreign_keys')
446.     def test_m2m_db_constraint_inherited(self):
447.         self._test_m2m_db_constraint(InheritedManyToManyField)
448. 
449.     def test_add_field(self):
450.         """
451.         Tests adding fields to models
452.         """
453.         # Create the table
454.         with connection.schema_editor() as editor:
455.             editor.create_model(Author)
456.         # Ensure there's no age field
457.         columns = self.column_classes(Author)
458.         self.assertNotIn("age", columns)
459.         # Add the new field
460.         new_field = IntegerField(null=True)
461.         new_field.set_attributes_from_name("age")
462.         with CaptureQueriesContext(connection) as ctx, connection.schema_editor() as editor:
463.             editor.add_field(Author, new_field)
464.         drop_default_sql = editor.sql_alter_column_no_default % {
465.             'column': editor.quote_name(new_field.name),
466.         }
467.         self.assertFalse(any(drop_default_sql in query['sql'] for query in ctx.captured_queries))
468.         # Ensure the field is right afterwards
469.         columns = self.column_classes(Author)
470.         self.assertEqual(columns['age'][0], "IntegerField")
471.         self.assertTrue(columns['age'][1][6])
472. 
473.     def test_add_field_remove_field(self):
474.         """
475.         Adding a field and removing it removes all deferred sql referring to it.
476.         """
477.         with connection.schema_editor() as editor:
478.             # Create a table with a unique constraint on the slug field.
479.             editor.create_model(Tag)
480.             # Remove the slug column.
481.             editor.remove_field(Tag, Tag._meta.get_field('slug'))
482.         self.assertEqual(editor.deferred_sql, [])
483. 
484.     def test_add_field_temp_default(self):
485.         """
486.         Tests adding fields to models with a temporary default
487.         """
488.         # Create the table
489.         with connection.schema_editor() as editor:
490.             editor.create_model(Author)
491.         # Ensure there's no age field
492.         columns = self.column_classes(Author)
493.         self.assertNotIn("age", columns)
494.         # Add some rows of data
495.         Author.objects.create(name="Andrew", height=30)
496.         Author.objects.create(name="Andrea")
497.         # Add a not-null field
498.         new_field = CharField(max_length=30, default="Godwin")
499.         new_field.set_attributes_from_name("surname")
500.         with connection.schema_editor() as editor:


File: tests/schema/tests.py
Line number range: 2277 - 2316
Content:
2277.     def test_remove_db_index_doesnt_remove_custom_indexes(self):
2278.         """
2279.         Changing db_index to False doesn't remove indexes from Meta.indexes.
2280.         """
2281.         with connection.schema_editor() as editor:
2282.             editor.create_model(AuthorWithIndexedName)
2283.         # Ensure the table has its index
2284.         self.assertIn('name', self.get_indexes(AuthorWithIndexedName._meta.db_table))
2285. 
2286.         # Add the custom index
2287.         index = Index(fields=['-name'], name='author_name_idx')
2288.         author_index_name = index.name
2289.         with connection.schema_editor() as editor:
2290.             db_index_name = editor._create_index_name(
2291.                 table_name=AuthorWithIndexedName._meta.db_table,
2292.                 column_names=('name',),
2293.             )
2294.         try:
2295.             AuthorWithIndexedName._meta.indexes = [index]
2296.             with connection.schema_editor() as editor:
2297.                 editor.add_index(AuthorWithIndexedName, index)
2298.             old_constraints = self.get_constraints(AuthorWithIndexedName._meta.db_table)
2299.             self.assertIn(author_index_name, old_constraints)
2300.             self.assertIn(db_index_name, old_constraints)
2301.             # Change name field to db_index=False
2302.             old_field = AuthorWithIndexedName._meta.get_field('name')
2303.             new_field = CharField(max_length=255)
2304.             new_field.set_attributes_from_name('name')
2305.             with connection.schema_editor() as editor:
2306.                 editor.alter_field(AuthorWithIndexedName, old_field, new_field, strict=True)
2307.             new_constraints = self.get_constraints(AuthorWithIndexedName._meta.db_table)
2308.             self.assertNotIn(db_index_name, new_constraints)
2309.             # The index from Meta.indexes is still in the database.
2310.             self.assertIn(author_index_name, new_constraints)
2311.             # Drop the index
2312.             with connection.schema_editor() as editor:
2313.                 editor.remove_index(AuthorWithIndexedName, index)
2314.         finally:
2315.             AuthorWithIndexedName._meta.indexes = []
2316. 


File: tests/schema/tests.py
Line number range: 2317 - 2335
Content:
2317.     def test_order_index(self):
2318.         """
2319.         Indexes defined with ordering (ASC/DESC) defined on column
2320.         """
2321.         with connection.schema_editor() as editor:
2322.             editor.create_model(Author)
2323.         # The table doesn't have an index
2324.         self.assertNotIn('title', self.get_indexes(Author._meta.db_table))
2325.         index_name = 'author_name_idx'
2326.         # Add the index
2327.         index = Index(fields=['name', '-weight'], name=index_name)
2328.         with connection.schema_editor() as editor:
2329.             editor.add_index(Author, index)
2330.         if connection.features.supports_index_column_ordering:
2331.             self.assertIndexOrder(Author._meta.db_table, index_name, ['ASC', 'DESC'])
2332.         # Drop the index
2333.         with connection.schema_editor() as editor:
2334.             editor.remove_index(Author, index)
2335. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 06:46:15,805 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find three test cases related to a bug in `CREATE INDEX` SQL generation. The bug has two parts: incorrect whitespace for descending columns (`DESC`) and for columns with `opclasses`. The current context provides `tests/schema/tests.py`, which contains `test_order_index`, a suitable test case for the `DESC` issue. However, there are no tests in the current context that use the `opclasses` parameter, which is crucial for addressing the second part of the bug. The `test_trigram.py` and `test_unaccent.py` files in `tests/postgres_tests/` are likely to contain such tests, as `opclasses` are a PostgreSQL feature often used with extensions like trigram and unaccent.' query='Please provide the full content of `tests/postgres_tests/test_trigram.py` and `tests/postgres_tests/test_unaccent.py`.' extra_requirements='' purpose='I need these files to find test cases that use `opclasses` in indexes, which is a key part of the bug and is missing from the current context.'
2025-12-21 06:46:15,807 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/postgres_tests/test_trigram.py` and `tests/postgres_tests/test_unaccent.py`.
2025-12-21 06:46:15,807 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 06:46:15,808 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 06:46:15,808 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 06:46:15,808 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/postgres_tests/test_trigram.py` and `tests/postgres_tests/test_unaccent.py`.
Purpose: I need these files to find test cases that use `opclasses` in indexes, which is a key part of the bug and is missing from the current context.
2025-12-21 06:46:18,458 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/postgres_tests/test_unaccent.py"}'}, '__gemini_function_call_thought_signatures__': {'45d7edbf-94c2-4103-b0c5-3f5796fa1cb1': 'CscFAY89a1+4Atj4GpcS8pRcSBoNbapVza+z5rHWe3j91rRTchIcgOET4gLszZiAna0RBmA7aQYCCoKFQ/OZJwU+c3sqR+5zCNsOPGOPFQ/3wnwdTxuFwR4NMIm4umdDbstC6CdqKef9S3YuMo4+XxS6r51SmhcpX47jtnazgGX+rcIH66dWNvQs4AQv0r/hbPLJ6BqlDLRr9nxmJDXqdNnoyGGl31DaxY5nqH1jq0Q1at7mxmPQmQ4YpwQL/SSoZh7RqY6bwGc2mn6M/dgcEf8RDtB1Wpw5avMdVAbPSjcqzROoIWmduVKC1iCwxrnMorA+qmRaCZ5X/WZTiSIWeVkrBXw0D7/57LsSiGE1k5JcFyRfLspno59vQSD3vzBEuf1l4Fmvi5fzO3bv7g2LzXLXR7Mg+rWli31j4FkVunEITW/4yGsNlMMr2wuEP63JL0gN0A05+ijmx4FviKtSrkcVXkphVsmt7O48mk4zGRfd3YeNPEmwJ4ouRZNbwSyUw1+Mw/yg3I9fgtlIMeMLLIoLadnntGINZbzbBAKRcaSs6mMGS5Q5bCHqzJpCEW+jXALiPy+G52EA4cwGYyUjXoIRT07dJAlV/lV943PnWNQOmVxkHorBB3D+Rl/n1jsPlbNCK01vgMnaYK+NP1y3332ngjgyRdAH3yD95JVPK2DyIxo2pY2yRuFF/fxk+F5sG75h5XnMpkfbk5qlqjRUQPLngMjzwoVojV3VgBsJpmwNiLpPxzs37PCxoXEF8EjMG60cXJHFdAng6DOf39qE08xJzOGBdVuBbxoNS07KxD4Tx5PREXB6cRmU6mUoGt4g98Qn9YcKDjB2jSqxa5BJ7KX4kVQkbcBKhb/VsHNW4dSnU/ekjPwxS94Hqb5OR9ALKENKeXpH2dYqh2lpPV+y9pDkUZoY3hcBFtMnBNACRcNj7SUt6dHt7SXW'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2124, 'candidates_token_count': 52, 'total_token_count': 2363, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2124}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 52}], 'thoughts_token_count': 187, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1249918845983652, 'model_name': 'gemini-2.5-pro'} id='run--da5a408c-13c3-463e-889d-fa6cfd984afd-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/postgres_tests/test_trigram.py'}, 'id': '45d7edbf-94c2-4103-b0c5-3f5796fa1cb1', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/postgres_tests/test_unaccent.py'}, 'id': '544f1355-4f38-4e2a-91ea-bc1d0af1a835', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2124, 'output_tokens': 52, 'total_tokens': 2363, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 187}}
2025-12-21 06:46:20,345 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `tests/postgres_tests/test_trigram.py` and `tests/postgres_tests/test_unaccent.py` as you requested. These files contain test cases for trigram similarity and unaccent lookups in PostgreSQL. I will now analyze them to find examples of `opclasses` usage in indexes.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 4046, 'candidates_token_count': 74, 'total_token_count': 4164, 'cached_content_token_count': 1660, 'prompt_tokens_details': [{'modality': 1, 'token_count': 4233}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1660}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 74}], 'thoughts_token_count': 44}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1289880340163772, 'model_name': 'gemini-2.5-pro'} id='run--a19f3762-8055-4520-a0c9-ac65388b8b4a-0' usage_metadata={'input_tokens': 4046, 'output_tokens': 74, 'total_tokens': 4164, 'input_token_details': {'cache_read': 1660}, 'output_token_details': {'reasoning': 44}}
2025-12-21 06:46:20,347 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/postgres_tests/test_trigram.py` and `tests/postgres_tests/test_unaccent.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need these files to find test cases that use `opclasses` in indexes, which is a key part of the bug and is missing from the current context.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/postgres_tests/test_trigram.py
Line number range: 1 - 53
Content:
1. from django.contrib.postgres.search import TrigramDistance, TrigramSimilarity
2. from django.test import modify_settings
3. 
4. from . import PostgreSQLTestCase
5. from .models import CharFieldModel, TextFieldModel
6. 
7. 
8. @modify_settings(INSTALLED_APPS={'append': 'django.contrib.postgres'})
9. class TrigramTest(PostgreSQLTestCase):
10.     Model = CharFieldModel
11. 
12.     @classmethod
13.     def setUpTestData(cls):
14.         cls.Model.objects.bulk_create([
15.             cls.Model(field='Matthew'),
16.             cls.Model(field='Cat sat on mat.'),
17.             cls.Model(field='Dog sat on rug.'),
18.         ])
19. 
20.     def test_trigram_search(self):
21.         self.assertQuerysetEqual(
22.             self.Model.objects.filter(field__trigram_similar='Mathew'),
23.             ['Matthew'],
24.             transform=lambda instance: instance.field,
25.         )
26. 
27.     def test_trigram_similarity(self):
28.         search = 'Bat sat on cat.'
29.         self.assertQuerysetEqual(
30.             self.Model.objects.filter(
31.                 field__trigram_similar=search,
32.             ).annotate(similarity=TrigramSimilarity('field', search)).order_by('-similarity'),
33.             [('Cat sat on mat.', 0.625), ('Dog sat on rug.', 0.333333)],
34.             transform=lambda instance: (instance.field, instance.similarity),
35.             ordered=True,
36.         )
37. 
38.     def test_trigram_similarity_alternate(self):
39.         self.assertQuerysetEqual(
40.             self.Model.objects.annotate(
41.                 distance=TrigramDistance('field', 'Bat sat on cat.'),
42.             ).filter(distance__lte=0.7).order_by('distance'),
43.             [('Cat sat on mat.', 0.375), ('Dog sat on rug.', 0.666667)],
44.             transform=lambda instance: (instance.field, instance.distance),
45.             ordered=True,
46.         )
47. 
48. 
49. class TrigramTextFieldTest(TrigramTest):
50.     """
51.     TextField has the same behavior as CharField regarding trigram lookups.
52.     """
53.     Model = TextFieldModel


File: tests/postgres_tests/test_unaccent.py
Line number range: 1 - 79
Content:
1. from django.db import connection
2. from django.test import modify_settings
3. 
4. from . import PostgreSQLTestCase
5. from .models import CharFieldModel, TextFieldModel
6. 
7. 
8. @modify_settings(INSTALLED_APPS={'append': 'django.contrib.postgres'})
9. class UnaccentTest(PostgreSQLTestCase):
10. 
11.     Model = CharFieldModel
12. 
13.     @classmethod
14.     def setUpTestData(cls):
15.         cls.Model.objects.bulk_create([
16.             cls.Model(field="àéÖ"),
17.             cls.Model(field="aeO"),
18.             cls.Model(field="aeo"),
19.         ])
20. 
21.     def test_unaccent(self):
22.         self.assertQuerysetEqual(
23.             self.Model.objects.filter(field__unaccent="aeO"),
24.             ["àéÖ", "aeO"],
25.             transform=lambda instance: instance.field,
26.             ordered=False
27.         )
28. 
29.     def test_unaccent_chained(self):
30.         """
31.         Unaccent can be used chained with a lookup (which should be the case
32.         since unaccent implements the Transform API)
33.         """
34.         self.assertQuerysetEqual(
35.             self.Model.objects.filter(field__unaccent__iexact="aeO"),
36.             ["àéÖ", "aeO", "aeo"],
37.             transform=lambda instance: instance.field,
38.             ordered=False
39.         )
40.         self.assertQuerysetEqual(
41.             self.Model.objects.filter(field__unaccent__endswith="éÖ"),
42.             ["àéÖ", "aeO"],
43.             transform=lambda instance: instance.field,
44.             ordered=False
45.         )
46. 
47.     def test_unaccent_with_conforming_strings_off(self):
48.         """SQL is valid when standard_conforming_strings is off."""
49.         with connection.cursor() as cursor:
50.             cursor.execute('SHOW standard_conforming_strings')
51.             disable_conforming_strings = cursor.fetchall()[0][0] == 'on'
52.             if disable_conforming_strings:
53.                 cursor.execute('SET standard_conforming_strings TO off')
54.             try:
55.                 self.assertQuerysetEqual(
56.                     self.Model.objects.filter(field__unaccent__endswith='éÖ'),
57.                     ['àéÖ', 'aeO'],
58.                     transform=lambda instance: instance.field,
59.                     ordered=False,
60.                 )
61.             finally:
62.                 if disable_conforming_strings:
63.                     cursor.execute('SET standard_conforming_strings TO on')
64. 
65.     def test_unaccent_accentuated_needle(self):
66.         self.assertQuerysetEqual(
67.             self.Model.objects.filter(field__unaccent="aéÖ"),
68.             ["àéÖ", "aeO"],
69.             transform=lambda instance: instance.field,
70.             ordered=False
71.         )
72. 
73. 
74. class UnaccentTextFieldTest(UnaccentTest):
75.     """
76.     TextField should have the exact same behavior as CharField
77.     regarding unaccent lookups.
78.     """
79.     Model = TextFieldModel

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 06:46:25,810 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of `tests/postgres_tests/test_trigram.py`. This context provides the entire content of the file as requested.', relative_path='tests/postgres_tests/test_trigram.py', start_line=1, end_line=53), ContextOutput(reasoning='The user requested the full content of `tests/postgres_tests/test_unaccent.py`. This context provides the entire content of the file as requested.', relative_path='tests/postgres_tests/test_unaccent.py', start_line=1, end_line=79)]
2025-12-21 06:46:25,811 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/postgres_tests/test_trigram.py` and `tests/postgres_tests/test_unaccent.py`.
2025-12-21 06:46:25,811 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 06:46:25,811 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 06:46:25,812 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 6 existing contexts
2025-12-21 06:46:25,812 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 8 total contexts (removed 0 duplicates)
2025-12-21 06:46:25,812 - thread-140301230409408.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-21 06:46:25,813 - thread-140301230409408.prometheus_context_collector - INFO - Successfully retrieved 8 context snippets
