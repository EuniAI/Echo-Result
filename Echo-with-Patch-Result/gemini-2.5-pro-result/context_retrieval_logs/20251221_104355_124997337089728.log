2025-12-21 10:43:55,491 - thread-124997337089728.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: An index entry with parens was registered for `py:method` directive with `:property:` option

Description: ### Describe the bug

An index entry with parens was registered for `py:method` directive with `:property:` option. It should not have parens.


### How to Reproduce

```
# index.rst

.. py:method:: Foo.bar
   :property:

.. py:property:: Foo.baz
```

### Expected behavior

An index entry for the property should not have parens.

### Your project

N/A

### Screenshots

<img width="528" alt="スクリーンショット 2021-10-03 13 00 53" src="https://user-images.githubusercontent.com/748828/135739148-7f404a37-159b-4032-ac68-efb0aaacb726.png">


### OS

Mac

### Python version

3.9.6

### Sphinx version

HEAD of 4.x

### Sphinx extensions

_No response_

### Extra tools

_No response_

### Additional context

_No response_

Patch information:
diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py
index cd02eaad5..1a3bd60c7 100644
--- a/sphinx/domains/python.py
+++ b/sphinx/domains/python.py
@@ -796,7 +796,7 @@ class PyMethod(PyObject):
         if 'classmethod' in self.options:
             return _('%s() (%s class method)') % (methname, clsname)
         elif 'property' in self.options:
-            return _('%s() (%s property)') % (methname, clsname)
+            return _('%s (%s property)') % (methname, clsname)
         elif 'staticmethod' in self.options:
             return _('%s() (%s static method)') % (methname, clsname)
         else:
diff --git a/tests/test_domain_py.py b/tests/test_domain_py.py
index 682ea76e1..5ba63d0e3 100644
--- a/tests/test_domain_py.py
+++ b/tests/test_domain_py.py
@@ -756,7 +756,7 @@ def test_pymethod_options(app):
 
     # :property:
     assert_node(doctree[1][1][8], addnodes.index,
-                entries=[('single', 'meth5() (Class property)', 'Class.meth5', '', None)])
+                entries=[('single', 'meth5 (Class property)', 'Class.meth5', '', None)])
     assert_node(doctree[1][1][9], ([desc_signature, ([desc_annotation, ("property", desc_sig_space)],
                                                      [desc_name, "meth5"])],
                                    [desc_content, ()]))


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-21 10:43:55,553 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── docutils-latest.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── automatic-doc-generation.rst
|   |   ├── describing-code.rst
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: An index entry with parens was registered for `py:method` directive with `:property:` option

Description: ### Describe the bug

An index entry with parens was registered for `py:method` directive with `:property:` option. It should not have parens.


### How to Reproduce

```
# index.rst

.. py:method:: Foo.bar
   :property:

.. py:property:: Foo.baz
```

### Expected behavior

An index entry for the property should not have parens.

### Your project

N/A

### Screenshots

<img width="528" alt="スクリーンショット 2021-10-03 13 00 53" src="https://user-images.githubusercontent.com/748828/135739148-7f404a37-159b-4032-ac68-efb0aaacb726.png">


### OS

Mac

### Python version

3.9.6

### Sphinx version

HEAD of 4.x

### Sphinx extensions

_No response_

### Extra tools

_No response_

### Additional context

_No response_

Patch information:
diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py
index cd02eaad5..1a3bd60c7 100644
--- a/sphinx/domains/python.py
+++ b/sphinx/domains/python.py
@@ -796,7 +796,7 @@ class PyMethod(PyObject):
         if 'classmethod' in self.options:
             return _('%s() (%s class method)') % (methname, clsname)
         elif 'property' in self.options:
-            return _('%s() (%s property)') % (methname, clsname)
+            return _('%s (%s property)') % (methname, clsname)
         elif 'staticmethod' in self.options:
             return _('%s() (%s static method)') % (methname, clsname)
         else:
diff --git a/tests/test_domain_py.py b/tests/test_domain_py.py
index 682ea76e1..5ba63d0e3 100644
--- a/tests/test_domain_py.py
+++ b/tests/test_domain_py.py
@@ -756,7 +756,7 @@ def test_pymethod_options(app):
 
     # :property:
     assert_node(doctree[1][1][8], addnodes.index,
-                entries=[('single', 'meth5() (Class property)', 'Class.meth5', '', None)])
+                entries=[('single', 'meth5 (Class property)', 'Class.meth5', '', None)])
     assert_node(doctree[1][1][9], ([desc_signature, ([desc_annotation, ("property", desc_sig_space)],
                                                      [desc_name, "meth5"])],
                                    [desc_content, ()]))


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 10:44:06,676 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find three relevant test cases for a bug in the `py:method` directive. The provided patch points to `tests/test_domain_py.py` as the location for relevant tests. To identify three complete and self-contained test cases, including all necessary imports, fixtures, and helper functions, I need the full content of this test file. The current context is empty, so I must request the file.' query='Please provide the full content of the file tests/test_domain_py.py.' extra_requirements='' purpose='I need the content of this file to find three relevant test cases that demonstrate the functionality related to the bug in the `py:method` directive with the `:property:` option.'
2025-12-21 10:44:06,677 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file tests/test_domain_py.py.
2025-12-21 10:44:06,677 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 10:44:06,678 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 10:44:06,679 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 10:44:06,679 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file tests/test_domain_py.py.
Purpose: I need the content of this file to find three relevant test cases that demonstrate the functionality related to the bug in the `py:method` directive with the `:property:` option.
2025-12-21 10:44:11,742 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the file `tests/test_domain_py.py`. This will allow you to examine the test cases and identify the ones that are most relevant to the bug you are investigating.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/test_domain_py.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2090, 'candidates_token_count': 67, 'total_token_count': 2565, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2090}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 67}], 'thoughts_token_count': 408, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4647121144764459, 'model_name': 'gemini-2.5-pro'} id='run--d942b15d-b682-4d66-b316-4558302d49ea-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_domain_py.py'}, 'id': '80524232-aa67-46f0-839b-ca7bbc669f22', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2090, 'output_tokens': 67, 'total_tokens': 2565, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 408}}
2025-12-21 10:44:14,461 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the remaining content of the file `tests/test_domain_py.py` for you. Now you have the complete file content to analyze and find the relevant test cases for your bug investigation.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/test_domain_py.py", "end_line": 1000.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11598, 'candidates_token_count': 72, 'total_token_count': 11848, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11598}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 72}], 'thoughts_token_count': 178, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.26914816432529026, 'model_name': 'gemini-2.5-pro'} id='run--94cbd3f6-3e00-41ff-b9b5-a1b1ce611be3-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/test_domain_py.py', 'end_line': 1000.0}, 'id': '9cfba20c-785f-4708-89ea-17c7f31a13ba', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11598, 'output_tokens': 72, 'total_tokens': 11848, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 178}}
2025-12-21 10:44:18,657 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have analyzed the content of `tests/test_domain_py.py` to identify test cases relevant to the `py:method` directive with the `:property:` option. The `test_pymethod_options` function directly tests this combination. Additionally, the `test_pyproperty` and `test_resolve_xref_for_properties` functions provide context on how properties and their cross-references are handled, which is pertinent to the bug.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 20714, 'candidates_token_count': 94, 'total_token_count': 21068, 'cached_content_token_count': 11231, 'prompt_tokens_details': [{'modality': 1, 'token_count': 20714}], 'cache_tokens_details': [{'modality': 1, 'token_count': 11231}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 94}], 'thoughts_token_count': 260}, 'finish_reason': 'STOP', 'avg_logprobs': -0.23514493982842627, 'model_name': 'gemini-2.5-pro'} id='run--985c2440-bb27-45d7-bfa1-3fbc558ed0db-0' usage_metadata={'input_tokens': 20714, 'output_tokens': 94, 'total_tokens': 21068, 'input_token_details': {'cache_read': 11231}, 'output_token_details': {'reasoning': 260}}
2025-12-21 10:44:18,659 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file tests/test_domain_py.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need the content of this file to find three relevant test cases that demonstrate the functionality related to the bug in the `py:method` directive with the `:property:` option.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/test_domain_py.py
Line number range: 1 - 500
Content:
1. """
2.     test_domain_py
3.     ~~~~~~~~~~~~~~
4. 
5.     Tests the Python Domain
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import re
12. import sys
13. from unittest.mock import Mock
14. 
15. import pytest
16. from docutils import nodes
17. 
18. from sphinx import addnodes
19. from sphinx.addnodes import (desc, desc_addname, desc_annotation, desc_content, desc_name,
20.                              desc_optional, desc_parameter, desc_parameterlist, desc_returns,
21.                              desc_sig_keyword, desc_sig_literal_number,
22.                              desc_sig_literal_string, desc_sig_name, desc_sig_operator,
23.                              desc_sig_punctuation, desc_sig_space, desc_signature,
24.                              pending_xref)
25. from sphinx.domains import IndexEntry
26. from sphinx.domains.python import (PythonDomain, PythonModuleIndex, _parse_annotation,
27.                                    _pseudo_parse_arglist, py_sig_re)
28. from sphinx.testing import restructuredtext
29. from sphinx.testing.util import assert_node
30. 
31. 
32. def parse(sig):
33.     m = py_sig_re.match(sig)
34.     if m is None:
35.         raise ValueError
36.     name_prefix, name, arglist, retann = m.groups()
37.     signode = addnodes.desc_signature(sig, '')
38.     _pseudo_parse_arglist(signode, arglist)
39.     return signode.astext()
40. 
41. 
42. def test_function_signatures():
43.     rv = parse('func(a=1) -> int object')
44.     assert rv == '(a=1)'
45. 
46.     rv = parse('func(a=1, [b=None])')
47.     assert rv == '(a=1, [b=None])'
48. 
49.     rv = parse('func(a=1[, b=None])')
50.     assert rv == '(a=1, [b=None])'
51. 
52.     rv = parse("compile(source : string, filename, symbol='file')")
53.     assert rv == "(source : string, filename, symbol='file')"
54. 
55.     rv = parse('func(a=[], [b=None])')
56.     assert rv == '(a=[], [b=None])'
57. 
58.     rv = parse('func(a=[][, b=None])')
59.     assert rv == '(a=[], [b=None])'
60. 
61. 
62. @pytest.mark.sphinx('dummy', testroot='domain-py')
63. def test_domain_py_xrefs(app, status, warning):
64.     """Domain objects have correct prefixes when looking up xrefs"""
65.     app.builder.build_all()
66. 
67.     def assert_refnode(node, module_name, class_name, target, reftype=None,
68.                        domain='py'):
69.         attributes = {
70.             'refdomain': domain,
71.             'reftarget': target,
72.         }
73.         if reftype is not None:
74.             attributes['reftype'] = reftype
75.         if module_name is not False:
76.             attributes['py:module'] = module_name
77.         if class_name is not False:
78.             attributes['py:class'] = class_name
79.         assert_node(node, **attributes)
80. 
81.     doctree = app.env.get_doctree('roles')
82.     refnodes = list(doctree.traverse(pending_xref))
83.     assert_refnode(refnodes[0], None, None, 'TopLevel', 'class')
84.     assert_refnode(refnodes[1], None, None, 'top_level', 'meth')
85.     assert_refnode(refnodes[2], None, 'NestedParentA', 'child_1', 'meth')
86.     assert_refnode(refnodes[3], None, 'NestedParentA', 'NestedChildA.subchild_2', 'meth')
87.     assert_refnode(refnodes[4], None, 'NestedParentA', 'child_2', 'meth')
88.     assert_refnode(refnodes[5], False, 'NestedParentA', 'any_child', domain='')
89.     assert_refnode(refnodes[6], None, 'NestedParentA', 'NestedChildA', 'class')
90.     assert_refnode(refnodes[7], None, 'NestedParentA.NestedChildA', 'subchild_2', 'meth')
91.     assert_refnode(refnodes[8], None, 'NestedParentA.NestedChildA',
92.                    'NestedParentA.child_1', 'meth')
93.     assert_refnode(refnodes[9], None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth')
94.     assert_refnode(refnodes[10], None, 'NestedParentB', 'child_1', 'meth')
95.     assert_refnode(refnodes[11], None, 'NestedParentB', 'NestedParentB', 'class')
96.     assert_refnode(refnodes[12], None, None, 'NestedParentA.NestedChildA', 'class')
97.     assert len(refnodes) == 13
98. 
99.     doctree = app.env.get_doctree('module')
100.     refnodes = list(doctree.traverse(pending_xref))
101.     assert_refnode(refnodes[0], 'module_a.submodule', None,
102.                    'ModTopLevel', 'class')
103.     assert_refnode(refnodes[1], 'module_a.submodule', 'ModTopLevel',
104.                    'mod_child_1', 'meth')
105.     assert_refnode(refnodes[2], 'module_a.submodule', 'ModTopLevel',
106.                    'ModTopLevel.mod_child_1', 'meth')
107.     assert_refnode(refnodes[3], 'module_a.submodule', 'ModTopLevel',
108.                    'mod_child_2', 'meth')
109.     assert_refnode(refnodes[4], 'module_a.submodule', 'ModTopLevel',
110.                    'module_a.submodule.ModTopLevel.mod_child_1', 'meth')
111.     assert_refnode(refnodes[5], 'module_a.submodule', 'ModTopLevel',
112.                    'prop', 'attr')
113.     assert_refnode(refnodes[6], 'module_a.submodule', 'ModTopLevel',
114.                    'prop', 'meth')
115.     assert_refnode(refnodes[7], 'module_b.submodule', None,
116.                    'ModTopLevel', 'class')
117.     assert_refnode(refnodes[8], 'module_b.submodule', 'ModTopLevel',
118.                    'ModNoModule', 'class')
119.     assert_refnode(refnodes[9], False, False, 'int', 'class')
120.     assert_refnode(refnodes[10], False, False, 'tuple', 'class')
121.     assert_refnode(refnodes[11], False, False, 'str', 'class')
122.     assert_refnode(refnodes[12], False, False, 'float', 'class')
123.     assert_refnode(refnodes[13], False, False, 'list', 'class')
124.     assert_refnode(refnodes[14], False, False, 'ModTopLevel', 'class')
125.     assert_refnode(refnodes[15], False, False, 'index', 'doc', domain='std')
126.     assert len(refnodes) == 16
127. 
128.     doctree = app.env.get_doctree('module_option')
129.     refnodes = list(doctree.traverse(pending_xref))
130.     print(refnodes)
131.     print(refnodes[0])
132.     print(refnodes[1])
133.     assert_refnode(refnodes[0], 'test.extra', 'B', 'foo', 'meth')
134.     assert_refnode(refnodes[1], 'test.extra', 'B', 'foo', 'meth')
135.     assert len(refnodes) == 2
136. 
137. 
138. @pytest.mark.sphinx('html', testroot='domain-py')
139. def test_domain_py_xrefs_abbreviations(app, status, warning):
140.     app.builder.build_all()
141. 
142.     content = (app.outdir / 'abbr.html').read_text()
143.     assert re.search(r'normal: <a .* href="module.html#module_a.submodule.ModTopLevel.'
144.                      r'mod_child_1" .*><.*>module_a.submodule.ModTopLevel.mod_child_1\(\)'
145.                      r'<.*></a>',
146.                      content)
147.     assert re.search(r'relative: <a .* href="module.html#module_a.submodule.ModTopLevel.'
148.                      r'mod_child_1" .*><.*>ModTopLevel.mod_child_1\(\)<.*></a>',
149.                      content)
150.     assert re.search(r'short name: <a .* href="module.html#module_a.submodule.ModTopLevel.'
151.                      r'mod_child_1" .*><.*>mod_child_1\(\)<.*></a>',
152.                      content)
153.     assert re.search(r'relative \+ short name: <a .* href="module.html#module_a.submodule.'
154.                      r'ModTopLevel.mod_child_1" .*><.*>mod_child_1\(\)<.*></a>',
155.                      content)
156.     assert re.search(r'short name \+ relative: <a .* href="module.html#module_a.submodule.'
157.                      r'ModTopLevel.mod_child_1" .*><.*>mod_child_1\(\)<.*></a>',
158.                      content)
159. 
160. 
161. @pytest.mark.sphinx('dummy', testroot='domain-py')
162. def test_domain_py_objects(app, status, warning):
163.     app.builder.build_all()
164. 
165.     modules = app.env.domains['py'].data['modules']
166.     objects = app.env.domains['py'].data['objects']
167. 
168.     assert 'module_a.submodule' in modules
169.     assert 'module_a.submodule' in objects
170.     assert 'module_b.submodule' in modules
171.     assert 'module_b.submodule' in objects
172. 
173.     assert objects['module_a.submodule.ModTopLevel'][2] == 'class'
174.     assert objects['module_a.submodule.ModTopLevel.mod_child_1'][2] == 'method'
175.     assert objects['module_a.submodule.ModTopLevel.mod_child_2'][2] == 'method'
176.     assert 'ModTopLevel.ModNoModule' not in objects
177.     assert objects['ModNoModule'][2] == 'class'
178.     assert objects['module_b.submodule.ModTopLevel'][2] == 'class'
179. 
180.     assert objects['TopLevel'][2] == 'class'
181.     assert objects['top_level'][2] == 'method'
182.     assert objects['NestedParentA'][2] == 'class'
183.     assert objects['NestedParentA.child_1'][2] == 'method'
184.     assert objects['NestedParentA.any_child'][2] == 'method'
185.     assert objects['NestedParentA.NestedChildA'][2] == 'class'
186.     assert objects['NestedParentA.NestedChildA.subchild_1'][2] == 'method'
187.     assert objects['NestedParentA.NestedChildA.subchild_2'][2] == 'method'
188.     assert objects['NestedParentA.child_2'][2] == 'method'
189.     assert objects['NestedParentB'][2] == 'class'
190.     assert objects['NestedParentB.child_1'][2] == 'method'
191. 
192. 
193. @pytest.mark.sphinx('html', testroot='domain-py')
194. def test_resolve_xref_for_properties(app, status, warning):
195.     app.builder.build_all()
196. 
197.     content = (app.outdir / 'module.html').read_text()
198.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
199.             ' title="module_a.submodule.ModTopLevel.prop">'
200.             '<code class="xref py py-attr docutils literal notranslate"><span class="pre">'
201.             'prop</span> <span class="pre">attribute</span></code></a>' in content)
202.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
203.             ' title="module_a.submodule.ModTopLevel.prop">'
204.             '<code class="xref py py-meth docutils literal notranslate"><span class="pre">'
205.             'prop</span> <span class="pre">method</span></code></a>' in content)
206.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
207.             ' title="module_a.submodule.ModTopLevel.prop">'
208.             '<code class="xref py py-attr docutils literal notranslate"><span class="pre">'
209.             'prop</span> <span class="pre">attribute</span></code></a>' in content)
210. 
211. 
212. @pytest.mark.sphinx('dummy', testroot='domain-py')
213. def test_domain_py_find_obj(app, status, warning):
214. 
215.     def find_obj(modname, prefix, obj_name, obj_type, searchmode=0):
216.         return app.env.domains['py'].find_obj(
217.             app.env, modname, prefix, obj_name, obj_type, searchmode)
218. 
219.     app.builder.build_all()
220. 
221.     assert (find_obj(None, None, 'NONEXISTANT', 'class') == [])
222.     assert (find_obj(None, None, 'NestedParentA', 'class') ==
223.             [('NestedParentA', ('roles', 'NestedParentA', 'class', False))])
224.     assert (find_obj(None, None, 'NestedParentA.NestedChildA', 'class') ==
225.             [('NestedParentA.NestedChildA',
226.               ('roles', 'NestedParentA.NestedChildA', 'class', False))])
227.     assert (find_obj(None, 'NestedParentA', 'NestedChildA', 'class') ==
228.             [('NestedParentA.NestedChildA',
229.               ('roles', 'NestedParentA.NestedChildA', 'class', False))])
230.     assert (find_obj(None, None, 'NestedParentA.NestedChildA.subchild_1', 'meth') ==
231.             [('NestedParentA.NestedChildA.subchild_1',
232.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method', False))])
233.     assert (find_obj(None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth') ==
234.             [('NestedParentA.NestedChildA.subchild_1',
235.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method', False))])
236.     assert (find_obj(None, 'NestedParentA.NestedChildA', 'subchild_1', 'meth') ==
237.             [('NestedParentA.NestedChildA.subchild_1',
238.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method', False))])
239. 
240. 
241. @pytest.mark.sphinx('html', testroot='domain-py', freshenv=True)
242. def test_domain_py_canonical(app, status, warning):
243.     app.builder.build_all()
244. 
245.     content = (app.outdir / 'canonical.html').read_text()
246.     assert ('<a class="reference internal" href="#canonical.Foo" title="canonical.Foo">'
247.             '<code class="xref py py-class docutils literal notranslate">'
248.             '<span class="pre">Foo</span></code></a>' in content)
249.     assert warning.getvalue() == ''
250. 
251. 
252. def test_get_full_qualified_name():
253.     env = Mock(domaindata={})
254.     domain = PythonDomain(env)
255. 
256.     # non-python references
257.     node = nodes.reference()
258.     assert domain.get_full_qualified_name(node) is None
259. 
260.     # simple reference
261.     node = nodes.reference(reftarget='func')
262.     assert domain.get_full_qualified_name(node) == 'func'
263. 
264.     # with py:module context
265.     kwargs = {'py:module': 'module1'}
266.     node = nodes.reference(reftarget='func', **kwargs)
267.     assert domain.get_full_qualified_name(node) == 'module1.func'
268. 
269.     # with py:class context
270.     kwargs = {'py:class': 'Class'}
271.     node = nodes.reference(reftarget='func', **kwargs)
272.     assert domain.get_full_qualified_name(node) == 'Class.func'
273. 
274.     # with both py:module and py:class context
275.     kwargs = {'py:module': 'module1', 'py:class': 'Class'}
276.     node = nodes.reference(reftarget='func', **kwargs)
277.     assert domain.get_full_qualified_name(node) == 'module1.Class.func'
278. 
279. 
280. def test_parse_annotation(app):
281.     doctree = _parse_annotation("int", app.env)
282.     assert_node(doctree, ([pending_xref, "int"],))
283.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="class", reftarget="int")
284. 
285.     doctree = _parse_annotation("List[int]", app.env)
286.     assert_node(doctree, ([pending_xref, "List"],
287.                           [desc_sig_punctuation, "["],
288.                           [pending_xref, "int"],
289.                           [desc_sig_punctuation, "]"]))
290. 
291.     doctree = _parse_annotation("Tuple[int, int]", app.env)
292.     assert_node(doctree, ([pending_xref, "Tuple"],
293.                           [desc_sig_punctuation, "["],
294.                           [pending_xref, "int"],
295.                           [desc_sig_punctuation, ","],
296.                           desc_sig_space,
297.                           [pending_xref, "int"],
298.                           [desc_sig_punctuation, "]"]))
299. 
300.     doctree = _parse_annotation("Tuple[()]", app.env)
301.     assert_node(doctree, ([pending_xref, "Tuple"],
302.                           [desc_sig_punctuation, "["],
303.                           [desc_sig_punctuation, "("],
304.                           [desc_sig_punctuation, ")"],
305.                           [desc_sig_punctuation, "]"]))
306. 
307.     doctree = _parse_annotation("Tuple[int, ...]", app.env)
308.     assert_node(doctree, ([pending_xref, "Tuple"],
309.                           [desc_sig_punctuation, "["],
310.                           [pending_xref, "int"],
311.                           [desc_sig_punctuation, ","],
312.                           desc_sig_space,
313.                           [desc_sig_punctuation, "..."],
314.                           [desc_sig_punctuation, "]"]))
315. 
316.     doctree = _parse_annotation("Callable[[int, int], int]", app.env)
317.     print(doctree)
318.     assert_node(doctree, ([pending_xref, "Callable"],
319.                           [desc_sig_punctuation, "["],
320.                           [desc_sig_punctuation, "["],
321.                           [pending_xref, "int"],
322.                           [desc_sig_punctuation, ","],
323.                           desc_sig_space,
324.                           [pending_xref, "int"],
325.                           [desc_sig_punctuation, "]"],
326.                           [desc_sig_punctuation, ","],
327.                           desc_sig_space,
328.                           [pending_xref, "int"],
329.                           [desc_sig_punctuation, "]"]))
330. 
331.     doctree = _parse_annotation("Callable[[], int]", app.env)
332.     assert_node(doctree, ([pending_xref, "Callable"],
333.                           [desc_sig_punctuation, "["],
334.                           [desc_sig_punctuation, "["],
335.                           [desc_sig_punctuation, "]"],
336.                           [desc_sig_punctuation, ","],
337.                           desc_sig_space,
338.                           [pending_xref, "int"],
339.                           [desc_sig_punctuation, "]"]))
340. 
341.     doctree = _parse_annotation("List[None]", app.env)
342.     assert_node(doctree, ([pending_xref, "List"],
343.                           [desc_sig_punctuation, "["],
344.                           [pending_xref, "None"],
345.                           [desc_sig_punctuation, "]"]))
346. 
347.     # None type makes an object-reference (not a class reference)
348.     doctree = _parse_annotation("None", app.env)
349.     assert_node(doctree, ([pending_xref, "None"],))
350.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="obj", reftarget="None")
351. 
352. 
353. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
354. def test_parse_annotation_Literal(app):
355.     doctree = _parse_annotation("Literal[True, False]", app.env)
356.     assert_node(doctree, ([pending_xref, "Literal"],
357.                           [desc_sig_punctuation, "["],
358.                           [desc_sig_keyword, "True"],
359.                           [desc_sig_punctuation, ","],
360.                           desc_sig_space,
361.                           [desc_sig_keyword, "False"],
362.                           [desc_sig_punctuation, "]"]))
363. 
364.     doctree = _parse_annotation("typing.Literal[0, 1, 'abc']", app.env)
365.     assert_node(doctree, ([pending_xref, "typing.Literal"],
366.                           [desc_sig_punctuation, "["],
367.                           [desc_sig_literal_number, "0"],
368.                           [desc_sig_punctuation, ","],
369.                           desc_sig_space,
370.                           [desc_sig_literal_number, "1"],
371.                           [desc_sig_punctuation, ","],
372.                           desc_sig_space,
373.                           [desc_sig_literal_string, "'abc'"],
374.                           [desc_sig_punctuation, "]"]))
375. 
376. 
377. def test_pyfunction_signature(app):
378.     text = ".. py:function:: hello(name: str) -> str"
379.     doctree = restructuredtext.parse(app, text)
380.     assert_node(doctree, (addnodes.index,
381.                           [desc, ([desc_signature, ([desc_name, "hello"],
382.                                                     desc_parameterlist,
383.                                                     [desc_returns, pending_xref, "str"])],
384.                                   desc_content)]))
385.     assert_node(doctree[1], addnodes.desc, desctype="function",
386.                 domain="py", objtype="function", noindex=False)
387.     assert_node(doctree[1][0][1],
388.                 [desc_parameterlist, desc_parameter, ([desc_sig_name, "name"],
389.                                                       [desc_sig_punctuation, ":"],
390.                                                       desc_sig_space,
391.                                                       [nodes.inline, pending_xref, "str"])])
392. 
393. 
394. def test_pyfunction_signature_full(app):
395.     text = (".. py:function:: hello(a: str, b = 1, *args: str, "
396.             "c: bool = True, d: tuple = (1, 2), **kwargs: str) -> str")
397.     doctree = restructuredtext.parse(app, text)
398.     assert_node(doctree, (addnodes.index,
399.                           [desc, ([desc_signature, ([desc_name, "hello"],
400.                                                     desc_parameterlist,
401.                                                     [desc_returns, pending_xref, "str"])],
402.                                   desc_content)]))
403.     assert_node(doctree[1], addnodes.desc, desctype="function",
404.                 domain="py", objtype="function", noindex=False)
405.     assert_node(doctree[1][0][1],
406.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "a"],
407.                                                         [desc_sig_punctuation, ":"],
408.                                                         desc_sig_space,
409.                                                         [desc_sig_name, pending_xref, "str"])],
410.                                       [desc_parameter, ([desc_sig_name, "b"],
411.                                                         [desc_sig_operator, "="],
412.                                                         [nodes.inline, "1"])],
413.                                       [desc_parameter, ([desc_sig_operator, "*"],
414.                                                         [desc_sig_name, "args"],
415.                                                         [desc_sig_punctuation, ":"],
416.                                                         desc_sig_space,
417.                                                         [desc_sig_name, pending_xref, "str"])],
418.                                       [desc_parameter, ([desc_sig_name, "c"],
419.                                                         [desc_sig_punctuation, ":"],
420.                                                         desc_sig_space,
421.                                                         [desc_sig_name, pending_xref, "bool"],
422.                                                         desc_sig_space,
423.                                                         [desc_sig_operator, "="],
424.                                                         desc_sig_space,
425.                                                         [nodes.inline, "True"])],
426.                                       [desc_parameter, ([desc_sig_name, "d"],
427.                                                         [desc_sig_punctuation, ":"],
428.                                                         desc_sig_space,
429.                                                         [desc_sig_name, pending_xref, "tuple"],
430.                                                         desc_sig_space,
431.                                                         [desc_sig_operator, "="],
432.                                                         desc_sig_space,
433.                                                         [nodes.inline, "(1, 2)"])],
434.                                       [desc_parameter, ([desc_sig_operator, "**"],
435.                                                         [desc_sig_name, "kwargs"],
436.                                                         [desc_sig_punctuation, ":"],
437.                                                         desc_sig_space,
438.                                                         [desc_sig_name, pending_xref, "str"])])])
439. 
440. 
441. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
442. def test_pyfunction_signature_full_py38(app):
443.     # case: separator at head
444.     text = ".. py:function:: hello(*, a)"
445.     doctree = restructuredtext.parse(app, text)
446.     assert_node(doctree[1][0][1],
447.                 [desc_parameterlist, ([desc_parameter, nodes.inline, "*"],
448.                                       [desc_parameter, desc_sig_name, "a"])])
449. 
450.     # case: separator in the middle
451.     text = ".. py:function:: hello(a, /, b, *, c)"
452.     doctree = restructuredtext.parse(app, text)
453.     assert_node(doctree[1][0][1],
454.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
455.                                       [desc_parameter, desc_sig_operator, "/"],
456.                                       [desc_parameter, desc_sig_name, "b"],
457.                                       [desc_parameter, desc_sig_operator, "*"],
458.                                       [desc_parameter, desc_sig_name, "c"])])
459. 
460.     # case: separator in the middle (2)
461.     text = ".. py:function:: hello(a, /, *, b)"
462.     doctree = restructuredtext.parse(app, text)
463.     assert_node(doctree[1][0][1],
464.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
465.                                       [desc_parameter, desc_sig_operator, "/"],
466.                                       [desc_parameter, desc_sig_operator, "*"],
467.                                       [desc_parameter, desc_sig_name, "b"])])
468. 
469.     # case: separator at tail
470.     text = ".. py:function:: hello(a, /)"
471.     doctree = restructuredtext.parse(app, text)
472.     assert_node(doctree[1][0][1],
473.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
474.                                       [desc_parameter, desc_sig_operator, "/"])])
475. 
476. 
477. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
478. def test_pyfunction_with_number_literals(app):
479.     text = ".. py:function:: hello(age=0x10, height=1_6_0)"
480.     doctree = restructuredtext.parse(app, text)
481.     assert_node(doctree[1][0][1],
482.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "age"],
483.                                                         [desc_sig_operator, "="],
484.                                                         [nodes.inline, "0x10"])],
485.                                       [desc_parameter, ([desc_sig_name, "height"],
486.                                                         [desc_sig_operator, "="],
487.                                                         [nodes.inline, "1_6_0"])])])
488. 
489. 
490. def test_pyfunction_with_union_type_operator(app):
491.     text = ".. py:function:: hello(age: int | None)"
492.     doctree = restructuredtext.parse(app, text)
493.     assert_node(doctree[1][0][1],
494.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "age"],
495.                                                         [desc_sig_punctuation, ":"],
496.                                                         desc_sig_space,
497.                                                         [desc_sig_name, ([pending_xref, "int"],
498.                                                                          desc_sig_space,
499.                                                                          [desc_sig_punctuation, "|"],
500.                                                                          desc_sig_space,


File: tests/test_domain_py.py
Line number range: 501 - 1000
Content:
501.                                                                          [pending_xref, "None"])])])])
502. 
503. 
504. def test_optional_pyfunction_signature(app):
505.     text = ".. py:function:: compile(source [, filename [, symbol]]) -> ast object"
506.     doctree = restructuredtext.parse(app, text)
507.     assert_node(doctree, (addnodes.index,
508.                           [desc, ([desc_signature, ([desc_name, "compile"],
509.                                                     desc_parameterlist,
510.                                                     [desc_returns, pending_xref, "ast object"])],
511.                                   desc_content)]))
512.     assert_node(doctree[1], addnodes.desc, desctype="function",
513.                 domain="py", objtype="function", noindex=False)
514.     assert_node(doctree[1][0][1],
515.                 ([desc_parameter, ([desc_sig_name, "source"])],
516.                  [desc_optional, ([desc_parameter, ([desc_sig_name, "filename"])],
517.                                   [desc_optional, desc_parameter, ([desc_sig_name, "symbol"])])]))
518. 
519. 
520. def test_pyexception_signature(app):
521.     text = ".. py:exception:: builtins.IOError"
522.     doctree = restructuredtext.parse(app, text)
523.     assert_node(doctree, (addnodes.index,
524.                           [desc, ([desc_signature, ([desc_annotation, ('exception', desc_sig_space)],
525.                                                     [desc_addname, "builtins."],
526.                                                     [desc_name, "IOError"])],
527.                                   desc_content)]))
528.     assert_node(doctree[1], desc, desctype="exception",
529.                 domain="py", objtype="exception", noindex=False)
530. 
531. 
532. def test_pydata_signature(app):
533.     text = (".. py:data:: version\n"
534.             "   :type: int\n"
535.             "   :value: 1\n")
536.     doctree = restructuredtext.parse(app, text)
537.     assert_node(doctree, (addnodes.index,
538.                           [desc, ([desc_signature, ([desc_name, "version"],
539.                                                     [desc_annotation, ([desc_sig_punctuation, ':'],
540.                                                                        desc_sig_space,
541.                                                                        [pending_xref, "int"])],
542.                                                     [desc_annotation, (
543.                                                         desc_sig_space,
544.                                                         [desc_sig_punctuation, '='],
545.                                                         desc_sig_space,
546.                                                         "1")]
547.                                                     )],
548.                                   desc_content)]))
549.     assert_node(doctree[1], addnodes.desc, desctype="data",
550.                 domain="py", objtype="data", noindex=False)
551. 
552. 
553. def test_pydata_signature_old(app):
554.     text = (".. py:data:: version\n"
555.             "   :annotation: = 1\n")
556.     doctree = restructuredtext.parse(app, text)
557.     assert_node(doctree, (addnodes.index,
558.                           [desc, ([desc_signature, ([desc_name, "version"],
559.                                                     [desc_annotation, (desc_sig_space,
560.                                                                        "= 1")])],
561.                                   desc_content)]))
562.     assert_node(doctree[1], addnodes.desc, desctype="data",
563.                 domain="py", objtype="data", noindex=False)
564. 
565. 
566. def test_pydata_with_union_type_operator(app):
567.     text = (".. py:data:: version\n"
568.             "   :type: int | str")
569.     doctree = restructuredtext.parse(app, text)
570.     assert_node(doctree[1][0],
571.                 ([desc_name, "version"],
572.                  [desc_annotation, ([desc_sig_punctuation, ':'],
573.                                     desc_sig_space,
574.                                     [pending_xref, "int"],
575.                                     desc_sig_space,
576.                                     [desc_sig_punctuation, "|"],
577.                                     desc_sig_space,
578.                                     [pending_xref, "str"])]))
579. 
580. 
581. def test_pyobject_prefix(app):
582.     text = (".. py:class:: Foo\n"
583.             "\n"
584.             "   .. py:method:: Foo.say\n"
585.             "   .. py:method:: FooBar.say")
586.     doctree = restructuredtext.parse(app, text)
587.     assert_node(doctree, (addnodes.index,
588.                           [desc, ([desc_signature, ([desc_annotation, ('class', desc_sig_space)],
589.                                                     [desc_name, "Foo"])],
590.                                   [desc_content, (addnodes.index,
591.                                                   desc,
592.                                                   addnodes.index,
593.                                                   desc)])]))
594.     assert doctree[1][1][1].astext().strip() == 'say()'           # prefix is stripped
595.     assert doctree[1][1][3].astext().strip() == 'FooBar.say()'    # not stripped
596. 
597. 
598. def test_pydata(app):
599.     text = (".. py:module:: example\n"
600.             ".. py:data:: var\n"
601.             "   :type: int\n")
602.     domain = app.env.get_domain('py')
603.     doctree = restructuredtext.parse(app, text)
604.     assert_node(doctree, (nodes.target,
605.                           addnodes.index,
606.                           addnodes.index,
607.                           [desc, ([desc_signature, ([desc_addname, "example."],
608.                                                     [desc_name, "var"],
609.                                                     [desc_annotation, ([desc_sig_punctuation, ':'],
610.                                                                        desc_sig_space,
611.                                                                        [pending_xref, "int"])])],
612.                                   [desc_content, ()])]))
613.     assert_node(doctree[3][0][2][2], pending_xref, **{"py:module": "example"})
614.     assert 'example.var' in domain.objects
615.     assert domain.objects['example.var'] == ('index', 'example.var', 'data', False)
616. 
617. 
618. def test_pyfunction(app):
619.     text = (".. py:function:: func1\n"
620.             ".. py:module:: example\n"
621.             ".. py:function:: func2\n"
622.             "   :async:\n")
623.     domain = app.env.get_domain('py')
624.     doctree = restructuredtext.parse(app, text)
625.     assert_node(doctree, (addnodes.index,
626.                           [desc, ([desc_signature, ([desc_name, "func1"],
627.                                                     [desc_parameterlist, ()])],
628.                                   [desc_content, ()])],
629.                           nodes.target,
630.                           addnodes.index,
631.                           addnodes.index,
632.                           [desc, ([desc_signature, ([desc_annotation, ([desc_sig_keyword, 'async'],
633.                                                                        desc_sig_space)],
634.                                                     [desc_addname, "example."],
635.                                                     [desc_name, "func2"],
636.                                                     [desc_parameterlist, ()])],
637.                                   [desc_content, ()])]))
638.     assert_node(doctree[0], addnodes.index,
639.                 entries=[('pair', 'built-in function; func1()', 'func1', '', None)])
640.     assert_node(doctree[3], addnodes.index,
641.                 entries=[('pair', 'module; example', 'module-example', '', None)])
642.     assert_node(doctree[4], addnodes.index,
643.                 entries=[('single', 'func2() (in module example)', 'example.func2', '', None)])
644. 
645.     assert 'func1' in domain.objects
646.     assert domain.objects['func1'] == ('index', 'func1', 'function', False)
647.     assert 'example.func2' in domain.objects
648.     assert domain.objects['example.func2'] == ('index', 'example.func2', 'function', False)
649. 
650. 
651. def test_pyclass_options(app):
652.     text = (".. py:class:: Class1\n"
653.             ".. py:class:: Class2\n"
654.             "   :final:\n")
655.     domain = app.env.get_domain('py')
656.     doctree = restructuredtext.parse(app, text)
657.     assert_node(doctree, (addnodes.index,
658.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
659.                                                     [desc_name, "Class1"])],
660.                                   [desc_content, ()])],
661.                           addnodes.index,
662.                           [desc, ([desc_signature, ([desc_annotation, ("final",
663.                                                                        desc_sig_space,
664.                                                                        "class",
665.                                                                        desc_sig_space)],
666.                                                     [desc_name, "Class2"])],
667.                                   [desc_content, ()])]))
668. 
669.     # class
670.     assert_node(doctree[0], addnodes.index,
671.                 entries=[('single', 'Class1 (built-in class)', 'Class1', '', None)])
672.     assert 'Class1' in domain.objects
673.     assert domain.objects['Class1'] == ('index', 'Class1', 'class', False)
674. 
675.     # :final:
676.     assert_node(doctree[2], addnodes.index,
677.                 entries=[('single', 'Class2 (built-in class)', 'Class2', '', None)])
678.     assert 'Class2' in domain.objects
679.     assert domain.objects['Class2'] == ('index', 'Class2', 'class', False)
680. 
681. 
682. def test_pymethod_options(app):
683.     text = (".. py:class:: Class\n"
684.             "\n"
685.             "   .. py:method:: meth1\n"
686.             "   .. py:method:: meth2\n"
687.             "      :classmethod:\n"
688.             "   .. py:method:: meth3\n"
689.             "      :staticmethod:\n"
690.             "   .. py:method:: meth4\n"
691.             "      :async:\n"
692.             "   .. py:method:: meth5\n"
693.             "      :property:\n"
694.             "   .. py:method:: meth6\n"
695.             "      :abstractmethod:\n"
696.             "   .. py:method:: meth7\n"
697.             "      :final:\n")
698.     domain = app.env.get_domain('py')
699.     doctree = restructuredtext.parse(app, text)
700.     assert_node(doctree, (addnodes.index,
701.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
702.                                                     [desc_name, "Class"])],
703.                                   [desc_content, (addnodes.index,
704.                                                   desc,
705.                                                   addnodes.index,
706.                                                   desc,
707.                                                   addnodes.index,
708.                                                   desc,
709.                                                   addnodes.index,
710.                                                   desc,
711.                                                   addnodes.index,
712.                                                   desc,
713.                                                   addnodes.index,
714.                                                   desc,
715.                                                   addnodes.index,
716.                                                   desc)])]))
717. 
718.     # method
719.     assert_node(doctree[1][1][0], addnodes.index,
720.                 entries=[('single', 'meth1() (Class method)', 'Class.meth1', '', None)])
721.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_name, "meth1"],
722.                                                      [desc_parameterlist, ()])],
723.                                    [desc_content, ()]))
724.     assert 'Class.meth1' in domain.objects
725.     assert domain.objects['Class.meth1'] == ('index', 'Class.meth1', 'method', False)
726. 
727.     # :classmethod:
728.     assert_node(doctree[1][1][2], addnodes.index,
729.                 entries=[('single', 'meth2() (Class class method)', 'Class.meth2', '', None)])
730.     assert_node(doctree[1][1][3], ([desc_signature, ([desc_annotation, ("classmethod", desc_sig_space)],
731.                                                      [desc_name, "meth2"],
732.                                                      [desc_parameterlist, ()])],
733.                                    [desc_content, ()]))
734.     assert 'Class.meth2' in domain.objects
735.     assert domain.objects['Class.meth2'] == ('index', 'Class.meth2', 'method', False)
736. 
737.     # :staticmethod:
738.     assert_node(doctree[1][1][4], addnodes.index,
739.                 entries=[('single', 'meth3() (Class static method)', 'Class.meth3', '', None)])
740.     assert_node(doctree[1][1][5], ([desc_signature, ([desc_annotation, ("static", desc_sig_space)],
741.                                                      [desc_name, "meth3"],
742.                                                      [desc_parameterlist, ()])],
743.                                    [desc_content, ()]))
744.     assert 'Class.meth3' in domain.objects
745.     assert domain.objects['Class.meth3'] == ('index', 'Class.meth3', 'method', False)
746. 
747.     # :async:
748.     assert_node(doctree[1][1][6], addnodes.index,
749.                 entries=[('single', 'meth4() (Class method)', 'Class.meth4', '', None)])
750.     assert_node(doctree[1][1][7], ([desc_signature, ([desc_annotation, ("async", desc_sig_space)],
751.                                                      [desc_name, "meth4"],
752.                                                      [desc_parameterlist, ()])],
753.                                    [desc_content, ()]))
754.     assert 'Class.meth4' in domain.objects
755.     assert domain.objects['Class.meth4'] == ('index', 'Class.meth4', 'method', False)
756. 
757.     # :property:
758.     assert_node(doctree[1][1][8], addnodes.index,
759.                 entries=[('single', 'meth5() (Class property)', 'Class.meth5', '', None)])
760.     assert_node(doctree[1][1][9], ([desc_signature, ([desc_annotation, ("property", desc_sig_space)],
761.                                                      [desc_name, "meth5"])],
762.                                    [desc_content, ()]))
763.     assert 'Class.meth5' in domain.objects
764.     assert domain.objects['Class.meth5'] == ('index', 'Class.meth5', 'method', False)
765. 
766.     # :abstractmethod:
767.     assert_node(doctree[1][1][10], addnodes.index,
768.                 entries=[('single', 'meth6() (Class method)', 'Class.meth6', '', None)])
769.     assert_node(doctree[1][1][11], ([desc_signature, ([desc_annotation, ("abstract", desc_sig_space)],
770.                                                       [desc_name, "meth6"],
771.                                                       [desc_parameterlist, ()])],
772.                                     [desc_content, ()]))
773.     assert 'Class.meth6' in domain.objects
774.     assert domain.objects['Class.meth6'] == ('index', 'Class.meth6', 'method', False)
775. 
776.     # :final:
777.     assert_node(doctree[1][1][12], addnodes.index,
778.                 entries=[('single', 'meth7() (Class method)', 'Class.meth7', '', None)])
779.     assert_node(doctree[1][1][13], ([desc_signature, ([desc_annotation, ("final", desc_sig_space)],
780.                                                       [desc_name, "meth7"],
781.                                                       [desc_parameterlist, ()])],
782.                                     [desc_content, ()]))
783.     assert 'Class.meth7' in domain.objects
784.     assert domain.objects['Class.meth7'] == ('index', 'Class.meth7', 'method', False)
785. 
786. 
787. def test_pyclassmethod(app):
788.     text = (".. py:class:: Class\n"
789.             "\n"
790.             "   .. py:classmethod:: meth\n")
791.     domain = app.env.get_domain('py')
792.     doctree = restructuredtext.parse(app, text)
793.     assert_node(doctree, (addnodes.index,
794.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
795.                                                     [desc_name, "Class"])],
796.                                   [desc_content, (addnodes.index,
797.                                                   desc)])]))
798.     assert_node(doctree[1][1][0], addnodes.index,
799.                 entries=[('single', 'meth() (Class class method)', 'Class.meth', '', None)])
800.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_annotation, ("classmethod", desc_sig_space)],
801.                                                      [desc_name, "meth"],
802.                                                      [desc_parameterlist, ()])],
803.                                    [desc_content, ()]))
804.     assert 'Class.meth' in domain.objects
805.     assert domain.objects['Class.meth'] == ('index', 'Class.meth', 'method', False)
806. 
807. 
808. def test_pystaticmethod(app):
809.     text = (".. py:class:: Class\n"
810.             "\n"
811.             "   .. py:staticmethod:: meth\n")
812.     domain = app.env.get_domain('py')
813.     doctree = restructuredtext.parse(app, text)
814.     assert_node(doctree, (addnodes.index,
815.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
816.                                                     [desc_name, "Class"])],
817.                                   [desc_content, (addnodes.index,
818.                                                   desc)])]))
819.     assert_node(doctree[1][1][0], addnodes.index,
820.                 entries=[('single', 'meth() (Class static method)', 'Class.meth', '', None)])
821.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_annotation, ("static", desc_sig_space)],
822.                                                      [desc_name, "meth"],
823.                                                      [desc_parameterlist, ()])],
824.                                    [desc_content, ()]))
825.     assert 'Class.meth' in domain.objects
826.     assert domain.objects['Class.meth'] == ('index', 'Class.meth', 'method', False)
827. 
828. 
829. def test_pyattribute(app):
830.     text = (".. py:class:: Class\n"
831.             "\n"
832.             "   .. py:attribute:: attr\n"
833.             "      :type: Optional[str]\n"
834.             "      :value: ''\n")
835.     domain = app.env.get_domain('py')
836.     doctree = restructuredtext.parse(app, text)
837.     assert_node(doctree, (addnodes.index,
838.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
839.                                                     [desc_name, "Class"])],
840.                                   [desc_content, (addnodes.index,
841.                                                   desc)])]))
842.     assert_node(doctree[1][1][0], addnodes.index,
843.                 entries=[('single', 'attr (Class attribute)', 'Class.attr', '', None)])
844.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_name, "attr"],
845.                                                      [desc_annotation, ([desc_sig_punctuation, ':'],
846.                                                                         desc_sig_space,
847.                                                                         [pending_xref, "Optional"],
848.                                                                         [desc_sig_punctuation, "["],
849.                                                                         [pending_xref, "str"],
850.                                                                         [desc_sig_punctuation, "]"])],
851.                                                      [desc_annotation, (desc_sig_space,
852.                                                                         [desc_sig_punctuation, '='],
853.                                                                         desc_sig_space,
854.                                                                         "''")]
855.                                                      )],
856.                                    [desc_content, ()]))
857.     assert_node(doctree[1][1][1][0][1][2], pending_xref, **{"py:class": "Class"})
858.     assert_node(doctree[1][1][1][0][1][4], pending_xref, **{"py:class": "Class"})
859.     assert 'Class.attr' in domain.objects
860.     assert domain.objects['Class.attr'] == ('index', 'Class.attr', 'attribute', False)
861. 
862. 
863. def test_pyproperty(app):
864.     text = (".. py:class:: Class\n"
865.             "\n"
866.             "   .. py:property:: prop1\n"
867.             "      :abstractmethod:\n"
868.             "      :type: str\n"
869.             "\n"
870.             "   .. py:property:: prop2\n"
871.             "      :classmethod:\n"
872.             "      :type: str\n")
873.     domain = app.env.get_domain('py')
874.     doctree = restructuredtext.parse(app, text)
875.     assert_node(doctree, (addnodes.index,
876.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
877.                                                     [desc_name, "Class"])],
878.                                   [desc_content, (addnodes.index,
879.                                                   desc,
880.                                                   addnodes.index,
881.                                                   desc)])]))
882.     assert_node(doctree[1][1][0], addnodes.index,
883.                 entries=[('single', 'prop1 (Class property)', 'Class.prop1', '', None)])
884.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_annotation, ("abstract", desc_sig_space,
885.                                                                         "property", desc_sig_space)],
886.                                                      [desc_name, "prop1"],
887.                                                      [desc_annotation, ([desc_sig_punctuation, ':'],
888.                                                                         desc_sig_space,
889.                                                                         [pending_xref, "str"])])],
890.                                    [desc_content, ()]))
891.     assert_node(doctree[1][1][2], addnodes.index,
892.                 entries=[('single', 'prop2 (Class property)', 'Class.prop2', '', None)])
893.     assert_node(doctree[1][1][3], ([desc_signature, ([desc_annotation, ("class", desc_sig_space,
894.                                                                         "property", desc_sig_space)],
895.                                                      [desc_name, "prop2"],
896.                                                      [desc_annotation, ([desc_sig_punctuation, ':'],
897.                                                                         desc_sig_space,
898.                                                                         [pending_xref, "str"])])],
899.                                    [desc_content, ()]))
900.     assert 'Class.prop1' in domain.objects
901.     assert domain.objects['Class.prop1'] == ('index', 'Class.prop1', 'property', False)
902.     assert 'Class.prop2' in domain.objects
903.     assert domain.objects['Class.prop2'] == ('index', 'Class.prop2', 'property', False)
904. 
905. 
906. def test_pydecorator_signature(app):
907.     text = ".. py:decorator:: deco"
908.     domain = app.env.get_domain('py')
909.     doctree = restructuredtext.parse(app, text)
910.     assert_node(doctree, (addnodes.index,
911.                           [desc, ([desc_signature, ([desc_addname, "@"],
912.                                                     [desc_name, "deco"])],
913.                                   desc_content)]))
914.     assert_node(doctree[1], addnodes.desc, desctype="function",
915.                 domain="py", objtype="function", noindex=False)
916. 
917.     assert 'deco' in domain.objects
918.     assert domain.objects['deco'] == ('index', 'deco', 'function', False)
919. 
920. 
921. def test_pydecoratormethod_signature(app):
922.     text = ".. py:decoratormethod:: deco"
923.     domain = app.env.get_domain('py')
924.     doctree = restructuredtext.parse(app, text)
925.     assert_node(doctree, (addnodes.index,
926.                           [desc, ([desc_signature, ([desc_addname, "@"],
927.                                                     [desc_name, "deco"])],
928.                                   desc_content)]))
929.     assert_node(doctree[1], addnodes.desc, desctype="method",
930.                 domain="py", objtype="method", noindex=False)
931. 
932.     assert 'deco' in domain.objects
933.     assert domain.objects['deco'] == ('index', 'deco', 'method', False)
934. 
935. 
936. def test_canonical(app):
937.     text = (".. py:class:: io.StringIO\n"
938.             "   :canonical: _io.StringIO")
939.     domain = app.env.get_domain('py')
940.     doctree = restructuredtext.parse(app, text)
941.     assert_node(doctree, (addnodes.index,
942.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
943.                                                     [desc_addname, "io."],
944.                                                     [desc_name, "StringIO"])],
945.                                   desc_content)]))
946.     assert 'io.StringIO' in domain.objects
947.     assert domain.objects['io.StringIO'] == ('index', 'io.StringIO', 'class', False)
948.     assert domain.objects['_io.StringIO'] == ('index', 'io.StringIO', 'class', True)
949. 
950. 
951. def test_canonical_definition_overrides(app, warning):
952.     text = (".. py:class:: io.StringIO\n"
953.             "   :canonical: _io.StringIO\n"
954.             ".. py:class:: _io.StringIO\n")
955.     restructuredtext.parse(app, text)
956.     assert warning.getvalue() == ""
957. 
958.     domain = app.env.get_domain('py')
959.     assert domain.objects['_io.StringIO'] == ('index', 'id0', 'class', False)
960. 
961. 
962. def test_canonical_definition_skip(app, warning):
963.     text = (".. py:class:: _io.StringIO\n"
964.             ".. py:class:: io.StringIO\n"
965.             "   :canonical: _io.StringIO\n")
966. 
967.     restructuredtext.parse(app, text)
968.     assert warning.getvalue() == ""
969. 
970.     domain = app.env.get_domain('py')
971.     assert domain.objects['_io.StringIO'] == ('index', 'io.StringIO', 'class', False)
972. 
973. 
974. def test_canonical_duplicated(app, warning):
975.     text = (".. py:class:: mypackage.StringIO\n"
976.             "   :canonical: _io.StringIO\n"
977.             ".. py:class:: io.StringIO\n"
978.             "   :canonical: _io.StringIO\n")
979. 
980.     restructuredtext.parse(app, text)
981.     assert warning.getvalue() != ""
982. 
983. 
984. def test_info_field_list(app):
985.     text = (".. py:module:: example\n"
986.             ".. py:class:: Class\n"
987.             "\n"
988.             "   :param str name: blah blah\n"
989.             "   :param age: blah blah\n"
990.             "   :type age: int\n"
991.             "   :param items: blah blah\n"
992.             "   :type items: Tuple[str, ...]\n"
993.             "   :param Dict[str, str] params: blah blah\n")
994.     doctree = restructuredtext.parse(app, text)
995.     print(doctree)
996. 
997.     assert_node(doctree, (nodes.target,
998.                           addnodes.index,
999.                           addnodes.index,
1000.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 10:44:23,221 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asks for the full content of the file 'tests/test_domain_py.py'.\n2. Extended relevance:\n   - The provided context contains the content of the requested file from line 1 to 1000. This directly and completely answers the user's query.", relative_path='tests/test_domain_py.py', start_line=1, end_line=1000)]
2025-12-21 10:44:23,223 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file tests/test_domain_py.py.
2025-12-21 10:44:23,224 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 10:44:23,224 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 10:44:23,224 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-21 10:44:23,224 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-21 10:44:23,225 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug-report.yml
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── docutils-latest.yml
|       ├── lint.yml
|       ├── lock.yml
|       ├── main.yml
|       ├── nodejs.yml
|       └── transifex.yml
├── .readthedocs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   ├── themes
|   |   |   └── fullsize
|   |   └── tutorial
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── autodoc_ext.rst
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── autodoc_intenum.py
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   ├── tutorial
|   |   ├── automatic-doc-generation.rst
|   |   ├── describing-code.rst
|   |   ├── end.rst
|   |   ├── first-steps.rst
|   |   ├── getting-started.rst
|   |   ├── index.rst
|   |   ├── more-sphinx-customization.rst
|   |   └── narrative-documentation.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── changes.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── preserve_defaults.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_GB
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── en_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr_FR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── is
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── yue
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_HK
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_TW
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW.Big5
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── base-stemmer.js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.13.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   ├── doctools.js
|   |   └── searchtools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-csv-table
|   |   |   ├── conf.py
|   |   |   └── subdir
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── ns_lookup.rst
|   |   ├── test-domain-c-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── field-role.rst
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-cpp-intersphinx
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── abbr.rst
|   |   |   ├── canonical.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-python_use_unqualified_type_names
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── autodoc_type_aliases.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── canonical
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── empty_all.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── metadata.py
|   |   |       ├── methods.py
|   |   |       ├── module.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── pep604.py
|   |   |       ├── preserve_defaults.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── properties.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       ├── uninitialized_attributes.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   ├── nomath.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-highlight_options
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_signaturereturn_icon
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-container
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-warn-redirects
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-local-logo
|   |   |   ├── conf.py
|   |   |   ├── images
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nitpicky-warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-remote-logo
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── literals.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-transforms-post_transforms-missing-reference
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_automodule.py
|   ├── test_ext_autodoc_autoproperty.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_preserve_defaults.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: An index entry with parens was registered for `py:method` directive with `:property:` option

Description: ### Describe the bug

An index entry with parens was registered for `py:method` directive with `:property:` option. It should not have parens.


### How to Reproduce

```
# index.rst

.. py:method:: Foo.bar
   :property:

.. py:property:: Foo.baz
```

### Expected behavior

An index entry for the property should not have parens.

### Your project

N/A

### Screenshots

<img width="528" alt="スクリーンショット 2021-10-03 13 00 53" src="https://user-images.githubusercontent.com/748828/135739148-7f404a37-159b-4032-ac68-efb0aaacb726.png">


### OS

Mac

### Python version

3.9.6

### Sphinx version

HEAD of 4.x

### Sphinx extensions

_No response_

### Extra tools

_No response_

### Additional context

_No response_

Patch information:
diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py
index cd02eaad5..1a3bd60c7 100644
--- a/sphinx/domains/python.py
+++ b/sphinx/domains/python.py
@@ -796,7 +796,7 @@ class PyMethod(PyObject):
         if 'classmethod' in self.options:
             return _('%s() (%s class method)') % (methname, clsname)
         elif 'property' in self.options:
-            return _('%s() (%s property)') % (methname, clsname)
+            return _('%s (%s property)') % (methname, clsname)
         elif 'staticmethod' in self.options:
             return _('%s() (%s static method)') % (methname, clsname)
         else:
diff --git a/tests/test_domain_py.py b/tests/test_domain_py.py
index 682ea76e1..5ba63d0e3 100644
--- a/tests/test_domain_py.py
+++ b/tests/test_domain_py.py
@@ -756,7 +756,7 @@ def test_pymethod_options(app):
 
     # :property:
     assert_node(doctree[1][1][8], addnodes.index,
-                entries=[('single', 'meth5() (Class property)', 'Class.meth5', '', None)])
+                entries=[('single', 'meth5 (Class property)', 'Class.meth5', '', None)])
     assert_node(doctree[1][1][9], ([desc_signature, ([desc_annotation, ("property", desc_sig_space)],
                                                      [desc_name, "meth5"])],
                                    [desc_content, ()]))


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file tests/test_domain_py.py.
Extra Requirements: 
Purpose: I need the content of this file to find three relevant test cases that demonstrate the functionality related to the bug in the `py:method` directive with the `:property:` option.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/test_domain_py.py
Line number range: 1 - 1000
Content:
1. """
2.     test_domain_py
3.     ~~~~~~~~~~~~~~
4. 
5.     Tests the Python Domain
6. 
7.     :copyright: Copyright 2007-2021 by the Sphinx team, see AUTHORS.
8.     :license: BSD, see LICENSE for details.
9. """
10. 
11. import re
12. import sys
13. from unittest.mock import Mock
14. 
15. import pytest
16. from docutils import nodes
17. 
18. from sphinx import addnodes
19. from sphinx.addnodes import (desc, desc_addname, desc_annotation, desc_content, desc_name,
20.                              desc_optional, desc_parameter, desc_parameterlist, desc_returns,
21.                              desc_sig_keyword, desc_sig_literal_number,
22.                              desc_sig_literal_string, desc_sig_name, desc_sig_operator,
23.                              desc_sig_punctuation, desc_sig_space, desc_signature,
24.                              pending_xref)
25. from sphinx.domains import IndexEntry
26. from sphinx.domains.python import (PythonDomain, PythonModuleIndex, _parse_annotation,
27.                                    _pseudo_parse_arglist, py_sig_re)
28. from sphinx.testing import restructuredtext
29. from sphinx.testing.util import assert_node
30. 
31. 
32. def parse(sig):
33.     m = py_sig_re.match(sig)
34.     if m is None:
35.         raise ValueError
36.     name_prefix, name, arglist, retann = m.groups()
37.     signode = addnodes.desc_signature(sig, '')
38.     _pseudo_parse_arglist(signode, arglist)
39.     return signode.astext()
40. 
41. 
42. def test_function_signatures():
43.     rv = parse('func(a=1) -> int object')
44.     assert rv == '(a=1)'
45. 
46.     rv = parse('func(a=1, [b=None])')
47.     assert rv == '(a=1, [b=None])'
48. 
49.     rv = parse('func(a=1[, b=None])')
50.     assert rv == '(a=1, [b=None])'
51. 
52.     rv = parse("compile(source : string, filename, symbol='file')")
53.     assert rv == "(source : string, filename, symbol='file')"
54. 
55.     rv = parse('func(a=[], [b=None])')
56.     assert rv == '(a=[], [b=None])'
57. 
58.     rv = parse('func(a=[][, b=None])')
59.     assert rv == '(a=[], [b=None])'
60. 
61. 
62. @pytest.mark.sphinx('dummy', testroot='domain-py')
63. def test_domain_py_xrefs(app, status, warning):
64.     """Domain objects have correct prefixes when looking up xrefs"""
65.     app.builder.build_all()
66. 
67.     def assert_refnode(node, module_name, class_name, target, reftype=None,
68.                        domain='py'):
69.         attributes = {
70.             'refdomain': domain,
71.             'reftarget': target,
72.         }
73.         if reftype is not None:
74.             attributes['reftype'] = reftype
75.         if module_name is not False:
76.             attributes['py:module'] = module_name
77.         if class_name is not False:
78.             attributes['py:class'] = class_name
79.         assert_node(node, **attributes)
80. 
81.     doctree = app.env.get_doctree('roles')
82.     refnodes = list(doctree.traverse(pending_xref))
83.     assert_refnode(refnodes[0], None, None, 'TopLevel', 'class')
84.     assert_refnode(refnodes[1], None, None, 'top_level', 'meth')
85.     assert_refnode(refnodes[2], None, 'NestedParentA', 'child_1', 'meth')
86.     assert_refnode(refnodes[3], None, 'NestedParentA', 'NestedChildA.subchild_2', 'meth')
87.     assert_refnode(refnodes[4], None, 'NestedParentA', 'child_2', 'meth')
88.     assert_refnode(refnodes[5], False, 'NestedParentA', 'any_child', domain='')
89.     assert_refnode(refnodes[6], None, 'NestedParentA', 'NestedChildA', 'class')
90.     assert_refnode(refnodes[7], None, 'NestedParentA.NestedChildA', 'subchild_2', 'meth')
91.     assert_refnode(refnodes[8], None, 'NestedParentA.NestedChildA',
92.                    'NestedParentA.child_1', 'meth')
93.     assert_refnode(refnodes[9], None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth')
94.     assert_refnode(refnodes[10], None, 'NestedParentB', 'child_1', 'meth')
95.     assert_refnode(refnodes[11], None, 'NestedParentB', 'NestedParentB', 'class')
96.     assert_refnode(refnodes[12], None, None, 'NestedParentA.NestedChildA', 'class')
97.     assert len(refnodes) == 13
98. 
99.     doctree = app.env.get_doctree('module')
100.     refnodes = list(doctree.traverse(pending_xref))
101.     assert_refnode(refnodes[0], 'module_a.submodule', None,
102.                    'ModTopLevel', 'class')
103.     assert_refnode(refnodes[1], 'module_a.submodule', 'ModTopLevel',
104.                    'mod_child_1', 'meth')
105.     assert_refnode(refnodes[2], 'module_a.submodule', 'ModTopLevel',
106.                    'ModTopLevel.mod_child_1', 'meth')
107.     assert_refnode(refnodes[3], 'module_a.submodule', 'ModTopLevel',
108.                    'mod_child_2', 'meth')
109.     assert_refnode(refnodes[4], 'module_a.submodule', 'ModTopLevel',
110.                    'module_a.submodule.ModTopLevel.mod_child_1', 'meth')
111.     assert_refnode(refnodes[5], 'module_a.submodule', 'ModTopLevel',
112.                    'prop', 'attr')
113.     assert_refnode(refnodes[6], 'module_a.submodule', 'ModTopLevel',
114.                    'prop', 'meth')
115.     assert_refnode(refnodes[7], 'module_b.submodule', None,
116.                    'ModTopLevel', 'class')
117.     assert_refnode(refnodes[8], 'module_b.submodule', 'ModTopLevel',
118.                    'ModNoModule', 'class')
119.     assert_refnode(refnodes[9], False, False, 'int', 'class')
120.     assert_refnode(refnodes[10], False, False, 'tuple', 'class')
121.     assert_refnode(refnodes[11], False, False, 'str', 'class')
122.     assert_refnode(refnodes[12], False, False, 'float', 'class')
123.     assert_refnode(refnodes[13], False, False, 'list', 'class')
124.     assert_refnode(refnodes[14], False, False, 'ModTopLevel', 'class')
125.     assert_refnode(refnodes[15], False, False, 'index', 'doc', domain='std')
126.     assert len(refnodes) == 16
127. 
128.     doctree = app.env.get_doctree('module_option')
129.     refnodes = list(doctree.traverse(pending_xref))
130.     print(refnodes)
131.     print(refnodes[0])
132.     print(refnodes[1])
133.     assert_refnode(refnodes[0], 'test.extra', 'B', 'foo', 'meth')
134.     assert_refnode(refnodes[1], 'test.extra', 'B', 'foo', 'meth')
135.     assert len(refnodes) == 2
136. 
137. 
138. @pytest.mark.sphinx('html', testroot='domain-py')
139. def test_domain_py_xrefs_abbreviations(app, status, warning):
140.     app.builder.build_all()
141. 
142.     content = (app.outdir / 'abbr.html').read_text()
143.     assert re.search(r'normal: <a .* href="module.html#module_a.submodule.ModTopLevel.'
144.                      r'mod_child_1" .*><.*>module_a.submodule.ModTopLevel.mod_child_1\(\)'
145.                      r'<.*></a>',
146.                      content)
147.     assert re.search(r'relative: <a .* href="module.html#module_a.submodule.ModTopLevel.'
148.                      r'mod_child_1" .*><.*>ModTopLevel.mod_child_1\(\)<.*></a>',
149.                      content)
150.     assert re.search(r'short name: <a .* href="module.html#module_a.submodule.ModTopLevel.'
151.                      r'mod_child_1" .*><.*>mod_child_1\(\)<.*></a>',
152.                      content)
153.     assert re.search(r'relative \+ short name: <a .* href="module.html#module_a.submodule.'
154.                      r'ModTopLevel.mod_child_1" .*><.*>mod_child_1\(\)<.*></a>',
155.                      content)
156.     assert re.search(r'short name \+ relative: <a .* href="module.html#module_a.submodule.'
157.                      r'ModTopLevel.mod_child_1" .*><.*>mod_child_1\(\)<.*></a>',
158.                      content)
159. 
160. 
161. @pytest.mark.sphinx('dummy', testroot='domain-py')
162. def test_domain_py_objects(app, status, warning):
163.     app.builder.build_all()
164. 
165.     modules = app.env.domains['py'].data['modules']
166.     objects = app.env.domains['py'].data['objects']
167. 
168.     assert 'module_a.submodule' in modules
169.     assert 'module_a.submodule' in objects
170.     assert 'module_b.submodule' in modules
171.     assert 'module_b.submodule' in objects
172. 
173.     assert objects['module_a.submodule.ModTopLevel'][2] == 'class'
174.     assert objects['module_a.submodule.ModTopLevel.mod_child_1'][2] == 'method'
175.     assert objects['module_a.submodule.ModTopLevel.mod_child_2'][2] == 'method'
176.     assert 'ModTopLevel.ModNoModule' not in objects
177.     assert objects['ModNoModule'][2] == 'class'
178.     assert objects['module_b.submodule.ModTopLevel'][2] == 'class'
179. 
180.     assert objects['TopLevel'][2] == 'class'
181.     assert objects['top_level'][2] == 'method'
182.     assert objects['NestedParentA'][2] == 'class'
183.     assert objects['NestedParentA.child_1'][2] == 'method'
184.     assert objects['NestedParentA.any_child'][2] == 'method'
185.     assert objects['NestedParentA.NestedChildA'][2] == 'class'
186.     assert objects['NestedParentA.NestedChildA.subchild_1'][2] == 'method'
187.     assert objects['NestedParentA.NestedChildA.subchild_2'][2] == 'method'
188.     assert objects['NestedParentA.child_2'][2] == 'method'
189.     assert objects['NestedParentB'][2] == 'class'
190.     assert objects['NestedParentB.child_1'][2] == 'method'
191. 
192. 
193. @pytest.mark.sphinx('html', testroot='domain-py')
194. def test_resolve_xref_for_properties(app, status, warning):
195.     app.builder.build_all()
196. 
197.     content = (app.outdir / 'module.html').read_text()
198.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
199.             ' title="module_a.submodule.ModTopLevel.prop">'
200.             '<code class="xref py py-attr docutils literal notranslate"><span class="pre">'
201.             'prop</span> <span class="pre">attribute</span></code></a>' in content)
202.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
203.             ' title="module_a.submodule.ModTopLevel.prop">'
204.             '<code class="xref py py-meth docutils literal notranslate"><span class="pre">'
205.             'prop</span> <span class="pre">method</span></code></a>' in content)
206.     assert ('Link to <a class="reference internal" href="#module_a.submodule.ModTopLevel.prop"'
207.             ' title="module_a.submodule.ModTopLevel.prop">'
208.             '<code class="xref py py-attr docutils literal notranslate"><span class="pre">'
209.             'prop</span> <span class="pre">attribute</span></code></a>' in content)
210. 
211. 
212. @pytest.mark.sphinx('dummy', testroot='domain-py')
213. def test_domain_py_find_obj(app, status, warning):
214. 
215.     def find_obj(modname, prefix, obj_name, obj_type, searchmode=0):
216.         return app.env.domains['py'].find_obj(
217.             app.env, modname, prefix, obj_name, obj_type, searchmode)
218. 
219.     app.builder.build_all()
220. 
221.     assert (find_obj(None, None, 'NONEXISTANT', 'class') == [])
222.     assert (find_obj(None, None, 'NestedParentA', 'class') ==
223.             [('NestedParentA', ('roles', 'NestedParentA', 'class', False))])
224.     assert (find_obj(None, None, 'NestedParentA.NestedChildA', 'class') ==
225.             [('NestedParentA.NestedChildA',
226.               ('roles', 'NestedParentA.NestedChildA', 'class', False))])
227.     assert (find_obj(None, 'NestedParentA', 'NestedChildA', 'class') ==
228.             [('NestedParentA.NestedChildA',
229.               ('roles', 'NestedParentA.NestedChildA', 'class', False))])
230.     assert (find_obj(None, None, 'NestedParentA.NestedChildA.subchild_1', 'meth') ==
231.             [('NestedParentA.NestedChildA.subchild_1',
232.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method', False))])
233.     assert (find_obj(None, 'NestedParentA', 'NestedChildA.subchild_1', 'meth') ==
234.             [('NestedParentA.NestedChildA.subchild_1',
235.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method', False))])
236.     assert (find_obj(None, 'NestedParentA.NestedChildA', 'subchild_1', 'meth') ==
237.             [('NestedParentA.NestedChildA.subchild_1',
238.               ('roles', 'NestedParentA.NestedChildA.subchild_1', 'method', False))])
239. 
240. 
241. @pytest.mark.sphinx('html', testroot='domain-py', freshenv=True)
242. def test_domain_py_canonical(app, status, warning):
243.     app.builder.build_all()
244. 
245.     content = (app.outdir / 'canonical.html').read_text()
246.     assert ('<a class="reference internal" href="#canonical.Foo" title="canonical.Foo">'
247.             '<code class="xref py py-class docutils literal notranslate">'
248.             '<span class="pre">Foo</span></code></a>' in content)
249.     assert warning.getvalue() == ''
250. 
251. 
252. def test_get_full_qualified_name():
253.     env = Mock(domaindata={})
254.     domain = PythonDomain(env)
255. 
256.     # non-python references
257.     node = nodes.reference()
258.     assert domain.get_full_qualified_name(node) is None
259. 
260.     # simple reference
261.     node = nodes.reference(reftarget='func')
262.     assert domain.get_full_qualified_name(node) == 'func'
263. 
264.     # with py:module context
265.     kwargs = {'py:module': 'module1'}
266.     node = nodes.reference(reftarget='func', **kwargs)
267.     assert domain.get_full_qualified_name(node) == 'module1.func'
268. 
269.     # with py:class context
270.     kwargs = {'py:class': 'Class'}
271.     node = nodes.reference(reftarget='func', **kwargs)
272.     assert domain.get_full_qualified_name(node) == 'Class.func'
273. 
274.     # with both py:module and py:class context
275.     kwargs = {'py:module': 'module1', 'py:class': 'Class'}
276.     node = nodes.reference(reftarget='func', **kwargs)
277.     assert domain.get_full_qualified_name(node) == 'module1.Class.func'
278. 
279. 
280. def test_parse_annotation(app):
281.     doctree = _parse_annotation("int", app.env)
282.     assert_node(doctree, ([pending_xref, "int"],))
283.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="class", reftarget="int")
284. 
285.     doctree = _parse_annotation("List[int]", app.env)
286.     assert_node(doctree, ([pending_xref, "List"],
287.                           [desc_sig_punctuation, "["],
288.                           [pending_xref, "int"],
289.                           [desc_sig_punctuation, "]"]))
290. 
291.     doctree = _parse_annotation("Tuple[int, int]", app.env)
292.     assert_node(doctree, ([pending_xref, "Tuple"],
293.                           [desc_sig_punctuation, "["],
294.                           [pending_xref, "int"],
295.                           [desc_sig_punctuation, ","],
296.                           desc_sig_space,
297.                           [pending_xref, "int"],
298.                           [desc_sig_punctuation, "]"]))
299. 
300.     doctree = _parse_annotation("Tuple[()]", app.env)
301.     assert_node(doctree, ([pending_xref, "Tuple"],
302.                           [desc_sig_punctuation, "["],
303.                           [desc_sig_punctuation, "("],
304.                           [desc_sig_punctuation, ")"],
305.                           [desc_sig_punctuation, "]"]))
306. 
307.     doctree = _parse_annotation("Tuple[int, ...]", app.env)
308.     assert_node(doctree, ([pending_xref, "Tuple"],
309.                           [desc_sig_punctuation, "["],
310.                           [pending_xref, "int"],
311.                           [desc_sig_punctuation, ","],
312.                           desc_sig_space,
313.                           [desc_sig_punctuation, "..."],
314.                           [desc_sig_punctuation, "]"]))
315. 
316.     doctree = _parse_annotation("Callable[[int, int], int]", app.env)
317.     print(doctree)
318.     assert_node(doctree, ([pending_xref, "Callable"],
319.                           [desc_sig_punctuation, "["],
320.                           [desc_sig_punctuation, "["],
321.                           [pending_xref, "int"],
322.                           [desc_sig_punctuation, ","],
323.                           desc_sig_space,
324.                           [pending_xref, "int"],
325.                           [desc_sig_punctuation, "]"],
326.                           [desc_sig_punctuation, ","],
327.                           desc_sig_space,
328.                           [pending_xref, "int"],
329.                           [desc_sig_punctuation, "]"]))
330. 
331.     doctree = _parse_annotation("Callable[[], int]", app.env)
332.     assert_node(doctree, ([pending_xref, "Callable"],
333.                           [desc_sig_punctuation, "["],
334.                           [desc_sig_punctuation, "["],
335.                           [desc_sig_punctuation, "]"],
336.                           [desc_sig_punctuation, ","],
337.                           desc_sig_space,
338.                           [pending_xref, "int"],
339.                           [desc_sig_punctuation, "]"]))
340. 
341.     doctree = _parse_annotation("List[None]", app.env)
342.     assert_node(doctree, ([pending_xref, "List"],
343.                           [desc_sig_punctuation, "["],
344.                           [pending_xref, "None"],
345.                           [desc_sig_punctuation, "]"]))
346. 
347.     # None type makes an object-reference (not a class reference)
348.     doctree = _parse_annotation("None", app.env)
349.     assert_node(doctree, ([pending_xref, "None"],))
350.     assert_node(doctree[0], pending_xref, refdomain="py", reftype="obj", reftarget="None")
351. 
352. 
353. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
354. def test_parse_annotation_Literal(app):
355.     doctree = _parse_annotation("Literal[True, False]", app.env)
356.     assert_node(doctree, ([pending_xref, "Literal"],
357.                           [desc_sig_punctuation, "["],
358.                           [desc_sig_keyword, "True"],
359.                           [desc_sig_punctuation, ","],
360.                           desc_sig_space,
361.                           [desc_sig_keyword, "False"],
362.                           [desc_sig_punctuation, "]"]))
363. 
364.     doctree = _parse_annotation("typing.Literal[0, 1, 'abc']", app.env)
365.     assert_node(doctree, ([pending_xref, "typing.Literal"],
366.                           [desc_sig_punctuation, "["],
367.                           [desc_sig_literal_number, "0"],
368.                           [desc_sig_punctuation, ","],
369.                           desc_sig_space,
370.                           [desc_sig_literal_number, "1"],
371.                           [desc_sig_punctuation, ","],
372.                           desc_sig_space,
373.                           [desc_sig_literal_string, "'abc'"],
374.                           [desc_sig_punctuation, "]"]))
375. 
376. 
377. def test_pyfunction_signature(app):
378.     text = ".. py:function:: hello(name: str) -> str"
379.     doctree = restructuredtext.parse(app, text)
380.     assert_node(doctree, (addnodes.index,
381.                           [desc, ([desc_signature, ([desc_name, "hello"],
382.                                                     desc_parameterlist,
383.                                                     [desc_returns, pending_xref, "str"])],
384.                                   desc_content)]))
385.     assert_node(doctree[1], addnodes.desc, desctype="function",
386.                 domain="py", objtype="function", noindex=False)
387.     assert_node(doctree[1][0][1],
388.                 [desc_parameterlist, desc_parameter, ([desc_sig_name, "name"],
389.                                                       [desc_sig_punctuation, ":"],
390.                                                       desc_sig_space,
391.                                                       [nodes.inline, pending_xref, "str"])])
392. 
393. 
394. def test_pyfunction_signature_full(app):
395.     text = (".. py:function:: hello(a: str, b = 1, *args: str, "
396.             "c: bool = True, d: tuple = (1, 2), **kwargs: str) -> str")
397.     doctree = restructuredtext.parse(app, text)
398.     assert_node(doctree, (addnodes.index,
399.                           [desc, ([desc_signature, ([desc_name, "hello"],
400.                                                     desc_parameterlist,
401.                                                     [desc_returns, pending_xref, "str"])],
402.                                   desc_content)]))
403.     assert_node(doctree[1], addnodes.desc, desctype="function",
404.                 domain="py", objtype="function", noindex=False)
405.     assert_node(doctree[1][0][1],
406.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "a"],
407.                                                         [desc_sig_punctuation, ":"],
408.                                                         desc_sig_space,
409.                                                         [desc_sig_name, pending_xref, "str"])],
410.                                       [desc_parameter, ([desc_sig_name, "b"],
411.                                                         [desc_sig_operator, "="],
412.                                                         [nodes.inline, "1"])],
413.                                       [desc_parameter, ([desc_sig_operator, "*"],
414.                                                         [desc_sig_name, "args"],
415.                                                         [desc_sig_punctuation, ":"],
416.                                                         desc_sig_space,
417.                                                         [desc_sig_name, pending_xref, "str"])],
418.                                       [desc_parameter, ([desc_sig_name, "c"],
419.                                                         [desc_sig_punctuation, ":"],
420.                                                         desc_sig_space,
421.                                                         [desc_sig_name, pending_xref, "bool"],
422.                                                         desc_sig_space,
423.                                                         [desc_sig_operator, "="],
424.                                                         desc_sig_space,
425.                                                         [nodes.inline, "True"])],
426.                                       [desc_parameter, ([desc_sig_name, "d"],
427.                                                         [desc_sig_punctuation, ":"],
428.                                                         desc_sig_space,
429.                                                         [desc_sig_name, pending_xref, "tuple"],
430.                                                         desc_sig_space,
431.                                                         [desc_sig_operator, "="],
432.                                                         desc_sig_space,
433.                                                         [nodes.inline, "(1, 2)"])],
434.                                       [desc_parameter, ([desc_sig_operator, "**"],
435.                                                         [desc_sig_name, "kwargs"],
436.                                                         [desc_sig_punctuation, ":"],
437.                                                         desc_sig_space,
438.                                                         [desc_sig_name, pending_xref, "str"])])])
439. 
440. 
441. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
442. def test_pyfunction_signature_full_py38(app):
443.     # case: separator at head
444.     text = ".. py:function:: hello(*, a)"
445.     doctree = restructuredtext.parse(app, text)
446.     assert_node(doctree[1][0][1],
447.                 [desc_parameterlist, ([desc_parameter, nodes.inline, "*"],
448.                                       [desc_parameter, desc_sig_name, "a"])])
449. 
450.     # case: separator in the middle
451.     text = ".. py:function:: hello(a, /, b, *, c)"
452.     doctree = restructuredtext.parse(app, text)
453.     assert_node(doctree[1][0][1],
454.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
455.                                       [desc_parameter, desc_sig_operator, "/"],
456.                                       [desc_parameter, desc_sig_name, "b"],
457.                                       [desc_parameter, desc_sig_operator, "*"],
458.                                       [desc_parameter, desc_sig_name, "c"])])
459. 
460.     # case: separator in the middle (2)
461.     text = ".. py:function:: hello(a, /, *, b)"
462.     doctree = restructuredtext.parse(app, text)
463.     assert_node(doctree[1][0][1],
464.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
465.                                       [desc_parameter, desc_sig_operator, "/"],
466.                                       [desc_parameter, desc_sig_operator, "*"],
467.                                       [desc_parameter, desc_sig_name, "b"])])
468. 
469.     # case: separator at tail
470.     text = ".. py:function:: hello(a, /)"
471.     doctree = restructuredtext.parse(app, text)
472.     assert_node(doctree[1][0][1],
473.                 [desc_parameterlist, ([desc_parameter, desc_sig_name, "a"],
474.                                       [desc_parameter, desc_sig_operator, "/"])])
475. 
476. 
477. @pytest.mark.skipif(sys.version_info < (3, 8), reason='python 3.8+ is required.')
478. def test_pyfunction_with_number_literals(app):
479.     text = ".. py:function:: hello(age=0x10, height=1_6_0)"
480.     doctree = restructuredtext.parse(app, text)
481.     assert_node(doctree[1][0][1],
482.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "age"],
483.                                                         [desc_sig_operator, "="],
484.                                                         [nodes.inline, "0x10"])],
485.                                       [desc_parameter, ([desc_sig_name, "height"],
486.                                                         [desc_sig_operator, "="],
487.                                                         [nodes.inline, "1_6_0"])])])
488. 
489. 
490. def test_pyfunction_with_union_type_operator(app):
491.     text = ".. py:function:: hello(age: int | None)"
492.     doctree = restructuredtext.parse(app, text)
493.     assert_node(doctree[1][0][1],
494.                 [desc_parameterlist, ([desc_parameter, ([desc_sig_name, "age"],
495.                                                         [desc_sig_punctuation, ":"],
496.                                                         desc_sig_space,
497.                                                         [desc_sig_name, ([pending_xref, "int"],
498.                                                                          desc_sig_space,
499.                                                                          [desc_sig_punctuation, "|"],
500.                                                                          desc_sig_space,
501.                                                                          [pending_xref, "None"])])])])
502. 
503. 
504. def test_optional_pyfunction_signature(app):
505.     text = ".. py:function:: compile(source [, filename [, symbol]]) -> ast object"
506.     doctree = restructuredtext.parse(app, text)
507.     assert_node(doctree, (addnodes.index,
508.                           [desc, ([desc_signature, ([desc_name, "compile"],
509.                                                     desc_parameterlist,
510.                                                     [desc_returns, pending_xref, "ast object"])],
511.                                   desc_content)]))
512.     assert_node(doctree[1], addnodes.desc, desctype="function",
513.                 domain="py", objtype="function", noindex=False)
514.     assert_node(doctree[1][0][1],
515.                 ([desc_parameter, ([desc_sig_name, "source"])],
516.                  [desc_optional, ([desc_parameter, ([desc_sig_name, "filename"])],
517.                                   [desc_optional, desc_parameter, ([desc_sig_name, "symbol"])])]))
518. 
519. 
520. def test_pyexception_signature(app):
521.     text = ".. py:exception:: builtins.IOError"
522.     doctree = restructuredtext.parse(app, text)
523.     assert_node(doctree, (addnodes.index,
524.                           [desc, ([desc_signature, ([desc_annotation, ('exception', desc_sig_space)],
525.                                                     [desc_addname, "builtins."],
526.                                                     [desc_name, "IOError"])],
527.                                   desc_content)]))
528.     assert_node(doctree[1], desc, desctype="exception",
529.                 domain="py", objtype="exception", noindex=False)
530. 
531. 
532. def test_pydata_signature(app):
533.     text = (".. py:data:: version\n"
534.             "   :type: int\n"
535.             "   :value: 1\n")
536.     doctree = restructuredtext.parse(app, text)
537.     assert_node(doctree, (addnodes.index,
538.                           [desc, ([desc_signature, ([desc_name, "version"],
539.                                                     [desc_annotation, ([desc_sig_punctuation, ':'],
540.                                                                        desc_sig_space,
541.                                                                        [pending_xref, "int"])],
542.                                                     [desc_annotation, (
543.                                                         desc_sig_space,
544.                                                         [desc_sig_punctuation, '='],
545.                                                         desc_sig_space,
546.                                                         "1")]
547.                                                     )],
548.                                   desc_content)]))
549.     assert_node(doctree[1], addnodes.desc, desctype="data",
550.                 domain="py", objtype="data", noindex=False)
551. 
552. 
553. def test_pydata_signature_old(app):
554.     text = (".. py:data:: version\n"
555.             "   :annotation: = 1\n")
556.     doctree = restructuredtext.parse(app, text)
557.     assert_node(doctree, (addnodes.index,
558.                           [desc, ([desc_signature, ([desc_name, "version"],
559.                                                     [desc_annotation, (desc_sig_space,
560.                                                                        "= 1")])],
561.                                   desc_content)]))
562.     assert_node(doctree[1], addnodes.desc, desctype="data",
563.                 domain="py", objtype="data", noindex=False)
564. 
565. 
566. def test_pydata_with_union_type_operator(app):
567.     text = (".. py:data:: version\n"
568.             "   :type: int | str")
569.     doctree = restructuredtext.parse(app, text)
570.     assert_node(doctree[1][0],
571.                 ([desc_name, "version"],
572.                  [desc_annotation, ([desc_sig_punctuation, ':'],
573.                                     desc_sig_space,
574.                                     [pending_xref, "int"],
575.                                     desc_sig_space,
576.                                     [desc_sig_punctuation, "|"],
577.                                     desc_sig_space,
578.                                     [pending_xref, "str"])]))
579. 
580. 
581. def test_pyobject_prefix(app):
582.     text = (".. py:class:: Foo\n"
583.             "\n"
584.             "   .. py:method:: Foo.say\n"
585.             "   .. py:method:: FooBar.say")
586.     doctree = restructuredtext.parse(app, text)
587.     assert_node(doctree, (addnodes.index,
588.                           [desc, ([desc_signature, ([desc_annotation, ('class', desc_sig_space)],
589.                                                     [desc_name, "Foo"])],
590.                                   [desc_content, (addnodes.index,
591.                                                   desc,
592.                                                   addnodes.index,
593.                                                   desc)])]))
594.     assert doctree[1][1][1].astext().strip() == 'say()'           # prefix is stripped
595.     assert doctree[1][1][3].astext().strip() == 'FooBar.say()'    # not stripped
596. 
597. 
598. def test_pydata(app):
599.     text = (".. py:module:: example\n"
600.             ".. py:data:: var\n"
601.             "   :type: int\n")
602.     domain = app.env.get_domain('py')
603.     doctree = restructuredtext.parse(app, text)
604.     assert_node(doctree, (nodes.target,
605.                           addnodes.index,
606.                           addnodes.index,
607.                           [desc, ([desc_signature, ([desc_addname, "example."],
608.                                                     [desc_name, "var"],
609.                                                     [desc_annotation, ([desc_sig_punctuation, ':'],
610.                                                                        desc_sig_space,
611.                                                                        [pending_xref, "int"])])],
612.                                   [desc_content, ()])]))
613.     assert_node(doctree[3][0][2][2], pending_xref, **{"py:module": "example"})
614.     assert 'example.var' in domain.objects
615.     assert domain.objects['example.var'] == ('index', 'example.var', 'data', False)
616. 
617. 
618. def test_pyfunction(app):
619.     text = (".. py:function:: func1\n"
620.             ".. py:module:: example\n"
621.             ".. py:function:: func2\n"
622.             "   :async:\n")
623.     domain = app.env.get_domain('py')
624.     doctree = restructuredtext.parse(app, text)
625.     assert_node(doctree, (addnodes.index,
626.                           [desc, ([desc_signature, ([desc_name, "func1"],
627.                                                     [desc_parameterlist, ()])],
628.                                   [desc_content, ()])],
629.                           nodes.target,
630.                           addnodes.index,
631.                           addnodes.index,
632.                           [desc, ([desc_signature, ([desc_annotation, ([desc_sig_keyword, 'async'],
633.                                                                        desc_sig_space)],
634.                                                     [desc_addname, "example."],
635.                                                     [desc_name, "func2"],
636.                                                     [desc_parameterlist, ()])],
637.                                   [desc_content, ()])]))
638.     assert_node(doctree[0], addnodes.index,
639.                 entries=[('pair', 'built-in function; func1()', 'func1', '', None)])
640.     assert_node(doctree[3], addnodes.index,
641.                 entries=[('pair', 'module; example', 'module-example', '', None)])
642.     assert_node(doctree[4], addnodes.index,
643.                 entries=[('single', 'func2() (in module example)', 'example.func2', '', None)])
644. 
645.     assert 'func1' in domain.objects
646.     assert domain.objects['func1'] == ('index', 'func1', 'function', False)
647.     assert 'example.func2' in domain.objects
648.     assert domain.objects['example.func2'] == ('index', 'example.func2', 'function', False)
649. 
650. 
651. def test_pyclass_options(app):
652.     text = (".. py:class:: Class1\n"
653.             ".. py:class:: Class2\n"
654.             "   :final:\n")
655.     domain = app.env.get_domain('py')
656.     doctree = restructuredtext.parse(app, text)
657.     assert_node(doctree, (addnodes.index,
658.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
659.                                                     [desc_name, "Class1"])],
660.                                   [desc_content, ()])],
661.                           addnodes.index,
662.                           [desc, ([desc_signature, ([desc_annotation, ("final",
663.                                                                        desc_sig_space,
664.                                                                        "class",
665.                                                                        desc_sig_space)],
666.                                                     [desc_name, "Class2"])],
667.                                   [desc_content, ()])]))
668. 
669.     # class
670.     assert_node(doctree[0], addnodes.index,
671.                 entries=[('single', 'Class1 (built-in class)', 'Class1', '', None)])
672.     assert 'Class1' in domain.objects
673.     assert domain.objects['Class1'] == ('index', 'Class1', 'class', False)
674. 
675.     # :final:
676.     assert_node(doctree[2], addnodes.index,
677.                 entries=[('single', 'Class2 (built-in class)', 'Class2', '', None)])
678.     assert 'Class2' in domain.objects
679.     assert domain.objects['Class2'] == ('index', 'Class2', 'class', False)
680. 
681. 
682. def test_pymethod_options(app):
683.     text = (".. py:class:: Class\n"
684.             "\n"
685.             "   .. py:method:: meth1\n"
686.             "   .. py:method:: meth2\n"
687.             "      :classmethod:\n"
688.             "   .. py:method:: meth3\n"
689.             "      :staticmethod:\n"
690.             "   .. py:method:: meth4\n"
691.             "      :async:\n"
692.             "   .. py:method:: meth5\n"
693.             "      :property:\n"
694.             "   .. py:method:: meth6\n"
695.             "      :abstractmethod:\n"
696.             "   .. py:method:: meth7\n"
697.             "      :final:\n")
698.     domain = app.env.get_domain('py')
699.     doctree = restructuredtext.parse(app, text)
700.     assert_node(doctree, (addnodes.index,
701.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
702.                                                     [desc_name, "Class"])],
703.                                   [desc_content, (addnodes.index,
704.                                                   desc,
705.                                                   addnodes.index,
706.                                                   desc,
707.                                                   addnodes.index,
708.                                                   desc,
709.                                                   addnodes.index,
710.                                                   desc,
711.                                                   addnodes.index,
712.                                                   desc,
713.                                                   addnodes.index,
714.                                                   desc,
715.                                                   addnodes.index,
716.                                                   desc)])]))
717. 
718.     # method
719.     assert_node(doctree[1][1][0], addnodes.index,
720.                 entries=[('single', 'meth1() (Class method)', 'Class.meth1', '', None)])
721.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_name, "meth1"],
722.                                                      [desc_parameterlist, ()])],
723.                                    [desc_content, ()]))
724.     assert 'Class.meth1' in domain.objects
725.     assert domain.objects['Class.meth1'] == ('index', 'Class.meth1', 'method', False)
726. 
727.     # :classmethod:
728.     assert_node(doctree[1][1][2], addnodes.index,
729.                 entries=[('single', 'meth2() (Class class method)', 'Class.meth2', '', None)])
730.     assert_node(doctree[1][1][3], ([desc_signature, ([desc_annotation, ("classmethod", desc_sig_space)],
731.                                                      [desc_name, "meth2"],
732.                                                      [desc_parameterlist, ()])],
733.                                    [desc_content, ()]))
734.     assert 'Class.meth2' in domain.objects
735.     assert domain.objects['Class.meth2'] == ('index', 'Class.meth2', 'method', False)
736. 
737.     # :staticmethod:
738.     assert_node(doctree[1][1][4], addnodes.index,
739.                 entries=[('single', 'meth3() (Class static method)', 'Class.meth3', '', None)])
740.     assert_node(doctree[1][1][5], ([desc_signature, ([desc_annotation, ("static", desc_sig_space)],
741.                                                      [desc_name, "meth3"],
742.                                                      [desc_parameterlist, ()])],
743.                                    [desc_content, ()]))
744.     assert 'Class.meth3' in domain.objects
745.     assert domain.objects['Class.meth3'] == ('index', 'Class.meth3', 'method', False)
746. 
747.     # :async:
748.     assert_node(doctree[1][1][6], addnodes.index,
749.                 entries=[('single', 'meth4() (Class method)', 'Class.meth4', '', None)])
750.     assert_node(doctree[1][1][7], ([desc_signature, ([desc_annotation, ("async", desc_sig_space)],
751.                                                      [desc_name, "meth4"],
752.                                                      [desc_parameterlist, ()])],
753.                                    [desc_content, ()]))
754.     assert 'Class.meth4' in domain.objects
755.     assert domain.objects['Class.meth4'] == ('index', 'Class.meth4', 'method', False)
756. 
757.     # :property:
758.     assert_node(doctree[1][1][8], addnodes.index,
759.                 entries=[('single', 'meth5() (Class property)', 'Class.meth5', '', None)])
760.     assert_node(doctree[1][1][9], ([desc_signature, ([desc_annotation, ("property", desc_sig_space)],
761.                                                      [desc_name, "meth5"])],
762.                                    [desc_content, ()]))
763.     assert 'Class.meth5' in domain.objects
764.     assert domain.objects['Class.meth5'] == ('index', 'Class.meth5', 'method', False)
765. 
766.     # :abstractmethod:
767.     assert_node(doctree[1][1][10], addnodes.index,
768.                 entries=[('single', 'meth6() (Class method)', 'Class.meth6', '', None)])
769.     assert_node(doctree[1][1][11], ([desc_signature, ([desc_annotation, ("abstract", desc_sig_space)],
770.                                                       [desc_name, "meth6"],
771.                                                       [desc_parameterlist, ()])],
772.                                     [desc_content, ()]))
773.     assert 'Class.meth6' in domain.objects
774.     assert domain.objects['Class.meth6'] == ('index', 'Class.meth6', 'method', False)
775. 
776.     # :final:
777.     assert_node(doctree[1][1][12], addnodes.index,
778.                 entries=[('single', 'meth7() (Class method)', 'Class.meth7', '', None)])
779.     assert_node(doctree[1][1][13], ([desc_signature, ([desc_annotation, ("final", desc_sig_space)],
780.                                                       [desc_name, "meth7"],
781.                                                       [desc_parameterlist, ()])],
782.                                     [desc_content, ()]))
783.     assert 'Class.meth7' in domain.objects
784.     assert domain.objects['Class.meth7'] == ('index', 'Class.meth7', 'method', False)
785. 
786. 
787. def test_pyclassmethod(app):
788.     text = (".. py:class:: Class\n"
789.             "\n"
790.             "   .. py:classmethod:: meth\n")
791.     domain = app.env.get_domain('py')
792.     doctree = restructuredtext.parse(app, text)
793.     assert_node(doctree, (addnodes.index,
794.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
795.                                                     [desc_name, "Class"])],
796.                                   [desc_content, (addnodes.index,
797.                                                   desc)])]))
798.     assert_node(doctree[1][1][0], addnodes.index,
799.                 entries=[('single', 'meth() (Class class method)', 'Class.meth', '', None)])
800.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_annotation, ("classmethod", desc_sig_space)],
801.                                                      [desc_name, "meth"],
802.                                                      [desc_parameterlist, ()])],
803.                                    [desc_content, ()]))
804.     assert 'Class.meth' in domain.objects
805.     assert domain.objects['Class.meth'] == ('index', 'Class.meth', 'method', False)
806. 
807. 
808. def test_pystaticmethod(app):
809.     text = (".. py:class:: Class\n"
810.             "\n"
811.             "   .. py:staticmethod:: meth\n")
812.     domain = app.env.get_domain('py')
813.     doctree = restructuredtext.parse(app, text)
814.     assert_node(doctree, (addnodes.index,
815.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
816.                                                     [desc_name, "Class"])],
817.                                   [desc_content, (addnodes.index,
818.                                                   desc)])]))
819.     assert_node(doctree[1][1][0], addnodes.index,
820.                 entries=[('single', 'meth() (Class static method)', 'Class.meth', '', None)])
821.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_annotation, ("static", desc_sig_space)],
822.                                                      [desc_name, "meth"],
823.                                                      [desc_parameterlist, ()])],
824.                                    [desc_content, ()]))
825.     assert 'Class.meth' in domain.objects
826.     assert domain.objects['Class.meth'] == ('index', 'Class.meth', 'method', False)
827. 
828. 
829. def test_pyattribute(app):
830.     text = (".. py:class:: Class\n"
831.             "\n"
832.             "   .. py:attribute:: attr\n"
833.             "      :type: Optional[str]\n"
834.             "      :value: ''\n")
835.     domain = app.env.get_domain('py')
836.     doctree = restructuredtext.parse(app, text)
837.     assert_node(doctree, (addnodes.index,
838.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
839.                                                     [desc_name, "Class"])],
840.                                   [desc_content, (addnodes.index,
841.                                                   desc)])]))
842.     assert_node(doctree[1][1][0], addnodes.index,
843.                 entries=[('single', 'attr (Class attribute)', 'Class.attr', '', None)])
844.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_name, "attr"],
845.                                                      [desc_annotation, ([desc_sig_punctuation, ':'],
846.                                                                         desc_sig_space,
847.                                                                         [pending_xref, "Optional"],
848.                                                                         [desc_sig_punctuation, "["],
849.                                                                         [pending_xref, "str"],
850.                                                                         [desc_sig_punctuation, "]"])],
851.                                                      [desc_annotation, (desc_sig_space,
852.                                                                         [desc_sig_punctuation, '='],
853.                                                                         desc_sig_space,
854.                                                                         "''")]
855.                                                      )],
856.                                    [desc_content, ()]))
857.     assert_node(doctree[1][1][1][0][1][2], pending_xref, **{"py:class": "Class"})
858.     assert_node(doctree[1][1][1][0][1][4], pending_xref, **{"py:class": "Class"})
859.     assert 'Class.attr' in domain.objects
860.     assert domain.objects['Class.attr'] == ('index', 'Class.attr', 'attribute', False)
861. 
862. 
863. def test_pyproperty(app):
864.     text = (".. py:class:: Class\n"
865.             "\n"
866.             "   .. py:property:: prop1\n"
867.             "      :abstractmethod:\n"
868.             "      :type: str\n"
869.             "\n"
870.             "   .. py:property:: prop2\n"
871.             "      :classmethod:\n"
872.             "      :type: str\n")
873.     domain = app.env.get_domain('py')
874.     doctree = restructuredtext.parse(app, text)
875.     assert_node(doctree, (addnodes.index,
876.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
877.                                                     [desc_name, "Class"])],
878.                                   [desc_content, (addnodes.index,
879.                                                   desc,
880.                                                   addnodes.index,
881.                                                   desc)])]))
882.     assert_node(doctree[1][1][0], addnodes.index,
883.                 entries=[('single', 'prop1 (Class property)', 'Class.prop1', '', None)])
884.     assert_node(doctree[1][1][1], ([desc_signature, ([desc_annotation, ("abstract", desc_sig_space,
885.                                                                         "property", desc_sig_space)],
886.                                                      [desc_name, "prop1"],
887.                                                      [desc_annotation, ([desc_sig_punctuation, ':'],
888.                                                                         desc_sig_space,
889.                                                                         [pending_xref, "str"])])],
890.                                    [desc_content, ()]))
891.     assert_node(doctree[1][1][2], addnodes.index,
892.                 entries=[('single', 'prop2 (Class property)', 'Class.prop2', '', None)])
893.     assert_node(doctree[1][1][3], ([desc_signature, ([desc_annotation, ("class", desc_sig_space,
894.                                                                         "property", desc_sig_space)],
895.                                                      [desc_name, "prop2"],
896.                                                      [desc_annotation, ([desc_sig_punctuation, ':'],
897.                                                                         desc_sig_space,
898.                                                                         [pending_xref, "str"])])],
899.                                    [desc_content, ()]))
900.     assert 'Class.prop1' in domain.objects
901.     assert domain.objects['Class.prop1'] == ('index', 'Class.prop1', 'property', False)
902.     assert 'Class.prop2' in domain.objects
903.     assert domain.objects['Class.prop2'] == ('index', 'Class.prop2', 'property', False)
904. 
905. 
906. def test_pydecorator_signature(app):
907.     text = ".. py:decorator:: deco"
908.     domain = app.env.get_domain('py')
909.     doctree = restructuredtext.parse(app, text)
910.     assert_node(doctree, (addnodes.index,
911.                           [desc, ([desc_signature, ([desc_addname, "@"],
912.                                                     [desc_name, "deco"])],
913.                                   desc_content)]))
914.     assert_node(doctree[1], addnodes.desc, desctype="function",
915.                 domain="py", objtype="function", noindex=False)
916. 
917.     assert 'deco' in domain.objects
918.     assert domain.objects['deco'] == ('index', 'deco', 'function', False)
919. 
920. 
921. def test_pydecoratormethod_signature(app):
922.     text = ".. py:decoratormethod:: deco"
923.     domain = app.env.get_domain('py')
924.     doctree = restructuredtext.parse(app, text)
925.     assert_node(doctree, (addnodes.index,
926.                           [desc, ([desc_signature, ([desc_addname, "@"],
927.                                                     [desc_name, "deco"])],
928.                                   desc_content)]))
929.     assert_node(doctree[1], addnodes.desc, desctype="method",
930.                 domain="py", objtype="method", noindex=False)
931. 
932.     assert 'deco' in domain.objects
933.     assert domain.objects['deco'] == ('index', 'deco', 'method', False)
934. 
935. 
936. def test_canonical(app):
937.     text = (".. py:class:: io.StringIO\n"
938.             "   :canonical: _io.StringIO")
939.     domain = app.env.get_domain('py')
940.     doctree = restructuredtext.parse(app, text)
941.     assert_node(doctree, (addnodes.index,
942.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],
943.                                                     [desc_addname, "io."],
944.                                                     [desc_name, "StringIO"])],
945.                                   desc_content)]))
946.     assert 'io.StringIO' in domain.objects
947.     assert domain.objects['io.StringIO'] == ('index', 'io.StringIO', 'class', False)
948.     assert domain.objects['_io.StringIO'] == ('index', 'io.StringIO', 'class', True)
949. 
950. 
951. def test_canonical_definition_overrides(app, warning):
952.     text = (".. py:class:: io.StringIO\n"
953.             "   :canonical: _io.StringIO\n"
954.             ".. py:class:: _io.StringIO\n")
955.     restructuredtext.parse(app, text)
956.     assert warning.getvalue() == ""
957. 
958.     domain = app.env.get_domain('py')
959.     assert domain.objects['_io.StringIO'] == ('index', 'id0', 'class', False)
960. 
961. 
962. def test_canonical_definition_skip(app, warning):
963.     text = (".. py:class:: _io.StringIO\n"
964.             ".. py:class:: io.StringIO\n"
965.             "   :canonical: _io.StringIO\n")
966. 
967.     restructuredtext.parse(app, text)
968.     assert warning.getvalue() == ""
969. 
970.     domain = app.env.get_domain('py')
971.     assert domain.objects['_io.StringIO'] == ('index', 'io.StringIO', 'class', False)
972. 
973. 
974. def test_canonical_duplicated(app, warning):
975.     text = (".. py:class:: mypackage.StringIO\n"
976.             "   :canonical: _io.StringIO\n"
977.             ".. py:class:: io.StringIO\n"
978.             "   :canonical: _io.StringIO\n")
979. 
980.     restructuredtext.parse(app, text)
981.     assert warning.getvalue() != ""
982. 
983. 
984. def test_info_field_list(app):
985.     text = (".. py:module:: example\n"
986.             ".. py:class:: Class\n"
987.             "\n"
988.             "   :param str name: blah blah\n"
989.             "   :param age: blah blah\n"
990.             "   :type age: int\n"
991.             "   :param items: blah blah\n"
992.             "   :type items: Tuple[str, ...]\n"
993.             "   :param Dict[str, str] params: blah blah\n")
994.     doctree = restructuredtext.parse(app, text)
995.     print(doctree)
996. 
997.     assert_node(doctree, (nodes.target,
998.                           addnodes.index,
999.                           addnodes.index,
1000.                           [desc, ([desc_signature, ([desc_annotation, ("class", desc_sig_space)],

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 10:44:41,427 - thread-124997337089728.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The provided file `tests/test_domain_py.py` contains all the necessary information to extract the three most relevant test cases. The file includes all required imports and the complete implementation of the test functions, including their decorators. The chosen tests (`test_pymethod_options`, `test_pyproperty`, and `test_resolve_xref_for_properties`) are self-contained within this file and are directly relevant to the user's bug report concerning Python domain property and method directives. Consequently, no additional context is needed." query='' extra_requirements='' purpose=''
2025-12-21 10:44:41,428 - thread-124997337089728.prometheus_context_collector - INFO - Successfully retrieved 1 context snippets
