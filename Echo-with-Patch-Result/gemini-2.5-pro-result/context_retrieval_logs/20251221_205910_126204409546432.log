2025-12-21 20:59:10,624 - thread-126204409546432.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: latex() and mul_symbol

Description: The `latex()` pretty-printing function accepts a `mul_symbol` kwarg that must be one of four choices. I would like to be able to supply my own choice which is not in the list. Specifically, I want the multiplication symbol to be `\,` (i.e., a thin space). This is what I mean
```
>>> latex(3*x**2*y)
'3 \\, x^{2} \\, y' # I typed the thin spaces in after the fact
```

Thin spaces are used by sympy to separate differentials from integrands in integrals.
```
>>> latex(Integral(2*x**2*y, x))
'\\int 2 x^{2} y\\, dx' # This thin space is sympy's current behavior
```

Is there a reason why the user cannot supply the `mul_symbol` of their choosing? Or are the 4 choices a historical artifact? I'm willing to attempt making a PR to allow `mul_symbol` to be arbitrary (and backwards-compatible) if such a PR would be considered.

Patch information:
diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py
index ad4d7d9613..41c4fd9b3a 100644
--- a/sympy/printing/latex.py
+++ b/sympy/printing/latex.py
@@ -156,11 +156,29 @@ def __init__(self, settings=None):
             "times": r" \times "
         }
 
-        self._settings['mul_symbol_latex'] = \
-            mul_symbol_table[self._settings['mul_symbol']]
+        mul_symbol_setting = self._settings.get('mul_symbol')
 
-        self._settings['mul_symbol_latex_numbers'] = \
-            mul_symbol_table[self._settings['mul_symbol'] or 'dot']
+        if mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex = " %s " % mul_symbol_setting
+        elif mul_symbol_setting is None:
+            mul_symbol_latex = mul_symbol_table[None]
+        else:
+            raise ValueError("'mul_symbol' must be None, one of 'ldot', 'dot', 'times', or a LaTeX string")
+
+        self._settings['mul_symbol_latex'] = mul_symbol_latex
+
+        if mul_symbol_setting is None:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+        elif mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex_numbers = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex_numbers = " %s " % mul_symbol_setting
+        else:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+
+        self._settings['mul_symbol_latex_numbers'] = mul_symbol_latex_numbers
 
         self._delim_dict = {'(': ')', '[': ']'}
 
@@ -2155,7 +2173,9 @@ def latex(expr, **settings):
     \frac{1}{2 \pi} \int r\, dr
 
     mul_symbol: The symbol to use for multiplication. Can be one of None,
-    "ldot", "dot", or "times".
+    "ldot", "dot", "times", or any custom LaTeX string (e.g., "\\,").
+    For readability, the separator is inserted with surrounding spaces between factors
+    and between numbers (except when mul_symbol is None, in which case numbers still use a dot).
 
     >>> print(latex((2*tau)**sin(Rational(7,2)), mul_symbol="times"))
     \left(2 \times \tau\right)^{\sin{\left (\frac{7}{2} \right )}}


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-21 20:59:10,697 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.rst
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── gotchas.rst
|       ├── guide.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   └── sparse.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   └── tensor.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   ├── runtests.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── python-comparisons.rst
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   └── release.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── ffunctions.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_ffunctions.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── evaluate.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_eval_power.py
    |   |   ├── test_evalf.py
    |   |   ├── test_evaluate.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_class_registry.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_1_2.py
    |   |   |   ├── test_1_3.py
    |   |   |   ├── test_1_4.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   └── dpll2.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── blockmatrix.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── immutable.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_commonmatrix.py
    |       ├── test_densearith.py
    |       ├── test_densesolve.py
    |       ├── test_densetools.py
    |       ├── test_immutable.py
    |       ├── test_interactions.py
    |       ├── test_matrices.py
    |       ├── test_normalforms.py
    |       ├── test_sparse.py
    |       └── test_sparsetools.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── egyptian_fraction.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sympy_parser.py
    |   ├── sympy_tokenize.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── unitsystems.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_plot.py
    |   |   └── test_plot_implicit.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   └── test_theanocode.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine.py
    |   ├── inequalities.py
    |   ├── ode.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_diophantine.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_ode.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_mix.py
    |       ├── test_rv.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_functions.py
    |       ├── test_index_methods.py
    |       ├── test_indexed.py
    |       └── test_tensor.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_module_imports.py
    |   |   ├── test_pickling.py
    |   |   ├── test_pytest.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   └── timeutils.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: latex() and mul_symbol

Description: The `latex()` pretty-printing function accepts a `mul_symbol` kwarg that must be one of four choices. I would like to be able to supply my own choice which is not in the list. Specifically, I want the multiplication symbol to be `\,` (i.e., a thin space). This is what I mean
```
>>> latex(3*x**2*y)
'3 \\, x^{2} \\, y' # I typed the thin spaces in after the fact
```

Thin spaces are used by sympy to separate differentials from integrands in integrals.
```
>>> latex(Integral(2*x**2*y, x))
'\\int 2 x^{2} y\\, dx' # This thin space is sympy's current behavior
```

Is there a reason why the user cannot supply the `mul_symbol` of their choosing? Or are the 4 choices a historical artifact? I'm willing to attempt making a PR to allow `mul_symbol` to be arbitrary (and backwards-compatible) if such a PR would be considered.

Patch information:
diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py
index ad4d7d9613..41c4fd9b3a 100644
--- a/sympy/printing/latex.py
+++ b/sympy/printing/latex.py
@@ -156,11 +156,29 @@ def __init__(self, settings=None):
             "times": r" \times "
         }
 
-        self._settings['mul_symbol_latex'] = \
-            mul_symbol_table[self._settings['mul_symbol']]
+        mul_symbol_setting = self._settings.get('mul_symbol')
 
-        self._settings['mul_symbol_latex_numbers'] = \
-            mul_symbol_table[self._settings['mul_symbol'] or 'dot']
+        if mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex = " %s " % mul_symbol_setting
+        elif mul_symbol_setting is None:
+            mul_symbol_latex = mul_symbol_table[None]
+        else:
+            raise ValueError("'mul_symbol' must be None, one of 'ldot', 'dot', 'times', or a LaTeX string")
+
+        self._settings['mul_symbol_latex'] = mul_symbol_latex
+
+        if mul_symbol_setting is None:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+        elif mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex_numbers = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex_numbers = " %s " % mul_symbol_setting
+        else:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+
+        self._settings['mul_symbol_latex_numbers'] = mul_symbol_latex_numbers
 
         self._delim_dict = {'(': ')', '[': ']'}
 
@@ -2155,7 +2173,9 @@ def latex(expr, **settings):
     \frac{1}{2 \pi} \int r\, dr
 
     mul_symbol: The symbol to use for multiplication. Can be one of None,
-    "ldot", "dot", or "times".
+    "ldot", "dot", "times", or any custom LaTeX string (e.g., "\\,").
+    For readability, the separator is inserted with surrounding spaces between factors
+    and between numbers (except when mul_symbol is None, in which case numbers still use a dot).
 
     >>> print(latex((2*tau)**sin(Rational(7,2)), mul_symbol="times"))
     \left(2 \times \tau\right)^{\sin{\left (\frac{7}{2} \right )}}


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 20:59:16,443 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find relevant test cases for a change in the `latex` function's `mul_symbol` setting. The most relevant tests would be in the test file for the latex printer. I need to examine the contents of `sympy/printing/tests/test_latex.py` to identify tests that cover the `mul_symbol` functionality or similar settings-based output generation." query='Please provide the full content of the file sympy/printing/tests/test_latex.py.' extra_requirements='' purpose='I need to find 3 relevant test cases that demonstrate how the `mul_symbol` setting is currently tested in the `latex` function to understand the existing test patterns.'
2025-12-21 20:59:16,444 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file sympy/printing/tests/test_latex.py.
2025-12-21 20:59:16,444 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 20:59:16,445 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 20:59:16,446 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 20:59:16,446 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file sympy/printing/tests/test_latex.py.
Purpose: I need to find 3 relevant test cases that demonstrate how the `mul_symbol` setting is currently tested in the `latex` function to understand the existing test patterns.
2025-12-21 20:59:18,957 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first locate the file `sympy/printing/tests/test_latex.py` and then retrieve its entire content. This will allow me to examine the test cases related to the `mul_symbol` setting in the `latex` function as you requested.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "sympy/printing/tests/test_latex.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2111, 'candidates_token_count': 79, 'total_token_count': 2316, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2111}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 126, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.14200841927830177, 'model_name': 'gemini-2.5-pro'} id='run--1fd0cd09-78c1-4c89-97ec-de6dc8f941b3-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '2f4e9d77-9b32-4742-9d25-9d6175c80123', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2111, 'output_tokens': 79, 'total_tokens': 2316, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 126}}
2025-12-21 20:59:20,940 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of `sympy/printing/tests/test_latex.py`. I will now analyze the file to find the relevant test cases for the `mul_symbol` setting.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 1001.0, "start_line": 501.0, "relative_path": "sympy/printing/tests/test_latex.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 14519, 'candidates_token_count': 72, 'total_token_count': 14631, 'cached_content_token_count': 1844, 'prompt_tokens_details': [{'modality': 1, 'token_count': 14519}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1844}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 72}], 'thoughts_token_count': 40}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1335346433851454, 'model_name': 'gemini-2.5-pro'} id='run--3b34999b-9592-47f4-863d-1cf2aa92b072-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 1001.0, 'start_line': 501.0, 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': 'efb5cc63-472a-4290-bc3f-4872ea30f85d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 14519, 'output_tokens': 72, 'total_tokens': 14631, 'input_token_details': {'cache_read': 1844}, 'output_token_details': {'reasoning': 40}}
2025-12-21 20:59:27,937 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of the file `sympy/printing/tests/test_latex.py`. After reviewing the tests, I have identified three relevant test cases that demonstrate the use of the `mul_symbol` setting in the `latex` function. These can be found in the `test_latex_basic`, `test_latex_Float`, and `test_latex_mul_symbol` functions, showcasing how different multiplication symbols can be rendered in the LaTeX output.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 1501.0, "start_line": 1001.0, "relative_path": "sympy/printing/tests/test_latex.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 25490, 'candidates_token_count': 130, 'total_token_count': 26171, 'cached_content_token_count': 13140, 'prompt_tokens_details': [{'modality': 1, 'token_count': 25490}], 'cache_tokens_details': [{'modality': 1, 'token_count': 13140}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 130}], 'thoughts_token_count': 551}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3087314605712891, 'model_name': 'gemini-2.5-pro'} id='run--177cd0e4-c52b-4c0b-815a-ec7dc40b80f9-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 1501.0, 'start_line': 1001.0, 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '58883692-5537-4b2a-9d92-19471ae6505b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 25490, 'output_tokens': 130, 'total_tokens': 26171, 'input_token_details': {'cache_read': 13140}, 'output_token_details': {'reasoning': 551}}
2025-12-21 20:59:30,088 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now examined the entire content of `sympy/printing/tests/test_latex.py`. My analysis has confirmed the presence of multiple test cases for the `mul_symbol` setting. Specifically, the functions `test_latex_basic`, `test_latex_Float`, and `test_latex_mul_symbol` provide clear examples of how this setting is intended to work, covering its application with basic multiplication, floating-point numbers, and various multiplication symbols like `dot` and `times`. This gives me a comprehensive understanding of its current testing patterns.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 36555, 'candidates_token_count': 116, 'total_token_count': 36671, 'cached_content_token_count': 24579, 'prompt_tokens_details': [{'modality': 1, 'token_count': 36555}], 'cache_tokens_details': [{'modality': 1, 'token_count': 24579}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 116}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.15938157048718682, 'model_name': 'gemini-2.5-pro'} id='run--cc9520fe-e0c8-41d5-8e76-55e4cd18afbc-0' usage_metadata={'input_tokens': 36555, 'output_tokens': 116, 'total_tokens': 36671, 'input_token_details': {'cache_read': 24579}}
2025-12-21 20:59:30,090 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file sympy/printing/tests/test_latex.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to find 3 relevant test cases that demonstrate how the `mul_symbol` setting is currently tested in the `latex` function to understand the existing test patterns.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/printing/tests/test_latex.py
Line number range: 1 - 500
Content:
1. from sympy import (
2.     Add, Abs, Chi, Ci, CosineTransform, Dict, Ei, Eq, FallingFactorial,
3.     FiniteSet, Float, FourierTransform, Function, IndexedBase, Integral,
4.     Interval, InverseCosineTransform, InverseFourierTransform,
5.     InverseLaplaceTransform, InverseMellinTransform, InverseSineTransform,
6.     Lambda, LaplaceTransform, Limit, Matrix, Max, MellinTransform, Min, Mul,
7.     Order, Piecewise, Poly, ring, field, ZZ, Pow, Product, Range, Rational,
8.     RisingFactorial, rootof, RootSum, S, Shi, Si, SineTransform, Subs,
9.     Sum, Symbol, ImageSet, Tuple, Union, Ynm, Znm, arg, asin, Mod,
10.     assoc_laguerre, assoc_legendre, binomial, catalan, ceiling, Complement,
11.     chebyshevt, chebyshevu, conjugate, cot, coth, diff, dirichlet_eta, euler,
12.     exp, expint, factorial, factorial2, floor, gamma, gegenbauer, hermite,
13.     hyper, im, jacobi, laguerre, legendre, lerchphi, log, lowergamma,
14.     meijerg, oo, polar_lift, polylog, re, root, sin, sqrt, symbols,
15.     uppergamma, zeta, subfactorial, totient, elliptic_k, elliptic_f,
16.     elliptic_e, elliptic_pi, cos, tan, Wild, true, false, Equivalent, Not,
17.     Contains, divisor_sigma, SymmetricDifference, SeqPer, SeqFormula,
18.     SeqAdd, SeqMul, fourier_series, pi, ConditionSet, ComplexRegion, fps,
19.     AccumBounds, reduced_totient, primenu, primeomega, SingularityFunction,
20.      UnevaluatedExpr, Quaternion)
21. 
22. 
23. from sympy.ntheory.factor_ import udivisor_sigma
24. 
25. from sympy.abc import mu, tau
26. from sympy.printing.latex import (latex, translate, greek_letters_set,
27.                                   tex_greek_dictionary)
28. from sympy.tensor.array import (ImmutableDenseNDimArray, ImmutableSparseNDimArray,
29.                                 MutableSparseNDimArray, MutableDenseNDimArray)
30. from sympy.tensor.array import tensorproduct
31. from sympy.utilities.pytest import XFAIL, raises
32. from sympy.functions import DiracDelta, Heaviside, KroneckerDelta, LeviCivita
33. from sympy.logic import Implies
34. from sympy.logic.boolalg import And, Or, Xor
35. from sympy.physics.quantum import Commutator, Operator
36. from sympy.core.trace import Tr
37. from sympy.core.compatibility import range
38. from sympy.combinatorics.permutations import Cycle, Permutation
39. from sympy import MatrixSymbol
40. from sympy.vector import CoordSys3D, Cross, Curl, Dot, Divergence, Gradient
41. 
42. x, y, z, t, a, b, c = symbols('x y z t a b c')
43. k, m, n = symbols('k m n', integer=True)
44. 
45. 
46. def test_printmethod():
47.     class R(Abs):
48.         def _latex(self, printer):
49.             return "foo(%s)" % printer._print(self.args[0])
50.     assert latex(R(x)) == "foo(x)"
51. 
52.     class R(Abs):
53.         def _latex(self, printer):
54.             return "foo"
55.     assert latex(R(x)) == "foo"
56. 
57. 
58. def test_latex_basic():
59.     assert latex(1 + x) == "x + 1"
60.     assert latex(x**2) == "x^{2}"
61.     assert latex(x**(1 + x)) == "x^{x + 1}"
62.     assert latex(x**3 + x + 1 + x**2) == "x^{3} + x^{2} + x + 1"
63. 
64.     assert latex(2*x*y) == "2 x y"
65.     assert latex(2*x*y, mul_symbol='dot') == r"2 \cdot x \cdot y"
66. 
67.     assert latex(1/x) == r"\frac{1}{x}"
68.     assert latex(1/x, fold_short_frac=True) == "1 / x"
69.     assert latex(-S(3)/2) == r"- \frac{3}{2}"
70.     assert latex(-S(3)/2, fold_short_frac=True) == r"- 3 / 2"
71.     assert latex(1/x**2) == r"\frac{1}{x^{2}}"
72.     assert latex(1/(x + y)/2) == r"\frac{1}{2 \left(x + y\right)}"
73.     assert latex(x/2) == r"\frac{x}{2}"
74.     assert latex(x/2, fold_short_frac=True) == "x / 2"
75.     assert latex((x + y)/(2*x)) == r"\frac{x + y}{2 x}"
76.     assert latex((x + y)/(2*x), fold_short_frac=True) == \
77.         r"\left(x + y\right) / 2 x"
78.     assert latex((x + y)/(2*x), long_frac_ratio=0) == \
79.         r"\frac{1}{2 x} \left(x + y\right)"
80.     assert latex((x + y)/x) == r"\frac{1}{x} \left(x + y\right)"
81.     assert latex((x + y)/x, long_frac_ratio=3) == r"\frac{x + y}{x}"
82. 
83.     assert latex(2*Integral(x, x)/3) == r"\frac{2}{3} \int x\, dx"
84.     assert latex(2*Integral(x, x)/3, fold_short_frac=True) == \
85.         r"\left(2 \int x\, dx\right) / 3"
86. 
87.     assert latex(sqrt(x)) == r"\sqrt{x}"
88.     assert latex(x**Rational(1, 3)) == r"\sqrt[3]{x}"
89.     assert latex(sqrt(x)**3) == r"x^{\frac{3}{2}}"
90.     assert latex(sqrt(x), itex=True) == r"\sqrt{x}"
91.     assert latex(x**Rational(1, 3), itex=True) == r"\root{3}{x}"
92.     assert latex(sqrt(x)**3, itex=True) == r"x^{\frac{3}{2}}"
93.     assert latex(x**Rational(3, 4)) == r"x^{\frac{3}{4}}"
94.     assert latex(x**Rational(3, 4), fold_frac_powers=True) == "x^{3/4}"
95.     assert latex((x + 1)**Rational(3, 4)) == \
96.         r"\left(x + 1\right)^{\frac{3}{4}}"
97.     assert latex((x + 1)**Rational(3, 4), fold_frac_powers=True) == \
98.         r"\left(x + 1\right)^{3/4}"
99. 
100.     assert latex(1.5e20*x) == r"1.5 \cdot 10^{20} x"
101.     assert latex(1.5e20*x, mul_symbol='dot') == r"1.5 \cdot 10^{20} \cdot x"
102.     assert latex(1.5e20*x, mul_symbol='times') == r"1.5 \times 10^{20} \times x"
103. 
104.     assert latex(1/sin(x)) == r"\frac{1}{\sin{\left (x \right )}}"
105.     assert latex(sin(x)**-1) == r"\frac{1}{\sin{\left (x \right )}}"
106.     assert latex(sin(x)**Rational(3, 2)) == \
107.         r"\sin^{\frac{3}{2}}{\left (x \right )}"
108.     assert latex(sin(x)**Rational(3, 2), fold_frac_powers=True) == \
109.         r"\sin^{3/2}{\left (x \right )}"
110. 
111.     assert latex(~x) == r"\neg x"
112.     assert latex(x & y) == r"x \wedge y"
113.     assert latex(x & y & z) == r"x \wedge y \wedge z"
114.     assert latex(x | y) == r"x \vee y"
115.     assert latex(x | y | z) == r"x \vee y \vee z"
116.     assert latex((x & y) | z) == r"z \vee \left(x \wedge y\right)"
117.     assert latex(Implies(x, y)) == r"x \Rightarrow y"
118.     assert latex(~(x >> ~y)) == r"x \not\Rightarrow \neg y"
119.     assert latex(Implies(Or(x,y), z)) == r"\left(x \vee y\right) \Rightarrow z"
120.     assert latex(Implies(z, Or(x,y))) == r"z \Rightarrow \left(x \vee y\right)"
121. 
122.     assert latex(~x, symbol_names={x: "x_i"}) == r"\neg x_i"
123.     assert latex(x & y, symbol_names={x: "x_i", y: "y_i"}) == \
124.         r"x_i \wedge y_i"
125.     assert latex(x & y & z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
126.         r"x_i \wedge y_i \wedge z_i"
127.     assert latex(x | y, symbol_names={x: "x_i", y: "y_i"}) == r"x_i \vee y_i"
128.     assert latex(x | y | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
129.         r"x_i \vee y_i \vee z_i"
130.     assert latex((x & y) | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
131.         r"z_i \vee \left(x_i \wedge y_i\right)"
132.     assert latex(Implies(x, y), symbol_names={x: "x_i", y: "y_i"}) == \
133.         r"x_i \Rightarrow y_i"
134. 
135.     p = Symbol('p', positive=True)
136.     assert latex(exp(-p)*log(p)) == r"e^{- p} \log{\left (p \right )}"
137. 
138. 
139. def test_latex_builtins():
140.     assert latex(True) == r"\mathrm{True}"
141.     assert latex(False) == r"\mathrm{False}"
142.     assert latex(None) == r"\mathrm{None}"
143.     assert latex(true) == r"\mathrm{True}"
144.     assert latex(false) == r'\mathrm{False}'
145. 
146. 
147. def test_latex_SingularityFunction():
148.     assert latex(SingularityFunction(x, 4, 5)) == r"{\langle x - 4 \rangle}^{5}"
149.     assert latex(SingularityFunction(x, -3, 4)) == r"{\langle x + 3 \rangle}^{4}"
150.     assert latex(SingularityFunction(x, 0, 4)) == r"{\langle x \rangle}^{4}"
151.     assert latex(SingularityFunction(x, a, n)) == r"{\langle - a + x \rangle}^{n}"
152.     assert latex(SingularityFunction(x, 4, -2)) == r"{\langle x - 4 \rangle}^{-2}"
153.     assert latex(SingularityFunction(x, 4, -1)) == r"{\langle x - 4 \rangle}^{-1}"
154. 
155. def test_latex_cycle():
156.     assert latex(Cycle(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
157.     assert latex(Cycle(1, 2)(4, 5, 6)) == r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
158.     assert latex(Cycle()) == r"\left( \right)"
159. 
160. 
161. def test_latex_permutation():
162.     assert latex(Permutation(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
163.     assert latex(Permutation(1, 2)(4, 5, 6)) == r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
164.     assert latex(Permutation()) == r"\left( \right)"
165.     assert latex(Permutation(2, 4)*Permutation(5)) == r"\left( 2\; 4\right)\left( 5\right)"
166.     assert latex(Permutation(5)) == r"\left( 5\right)"
167. 
168. 
169. def test_latex_Float():
170.     assert latex(Float(1.0e100)) == r"1.0 \cdot 10^{100}"
171.     assert latex(Float(1.0e-100)) == r"1.0 \cdot 10^{-100}"
172.     assert latex(Float(1.0e-100), mul_symbol="times") == r"1.0 \times 10^{-100}"
173.     assert latex(1.0*oo) == r"\infty"
174.     assert latex(-1.0*oo) == r"- \infty"
175. 
176. 
177. def test_latex_vector_expressions():
178.     A = CoordSys3D('A')
179. 
180.     assert latex(Cross(A.i, A.j*A.x*3+A.k)) == r"\mathbf{\hat{i}_{A}} \times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
181.     assert latex(Cross(A.i, A.j)) == r"\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}"
182.     assert latex(x*Cross(A.i, A.j)) == r"x \left(\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}\right)"
183.     assert latex(Cross(x*A.i, A.j)) == r'- \mathbf{\hat{j}_{A}} \times \left((x)\mathbf{\hat{i}_{A}}\right)'
184. 
185.     assert latex(Curl(3*A.x*A.j)) == r"\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
186.     assert latex(Curl(3*A.x*A.j+A.i)) == r"\nabla\times \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
187.     assert latex(Curl(3*x*A.x*A.j)) == r"\nabla\times \left((3 \mathbf{{x}_{A}} x)\mathbf{\hat{j}_{A}}\right)"
188.     assert latex(x*Curl(3*A.x*A.j)) == r"x \left(\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
189. 
190.     assert latex(Divergence(3*A.x*A.j+A.i)) == r"\nabla\cdot \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
191.     assert latex(Divergence(3*A.x*A.j)) == r"\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
192.     assert latex(x*Divergence(3*A.x*A.j)) == r"x \left(\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
193. 
194.     assert latex(Dot(A.i, A.j*A.x*3+A.k)) == r"\mathbf{\hat{i}_{A}} \cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
195.     assert latex(Dot(A.i, A.j)) == r"\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}"
196.     assert latex(Dot(x*A.i, A.j)) == r"\mathbf{\hat{j}_{A}} \cdot \left((x)\mathbf{\hat{i}_{A}}\right)"
197.     assert latex(x*Dot(A.i, A.j)) == r"x \left(\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}\right)"
198. 
199.     assert latex(Gradient(A.x)) == r"\nabla\cdot \mathbf{{x}_{A}}"
200.     assert latex(Gradient(A.x + 3*A.y)) == r"\nabla\cdot \left(\mathbf{{x}_{A}} + 3 \mathbf{{y}_{A}}\right)"
201.     assert latex(x*Gradient(A.x)) == r"x \left(\nabla\cdot \mathbf{{x}_{A}}\right)"
202.     assert latex(Gradient(x*A.x)) == r"\nabla\cdot \left(\mathbf{{x}_{A}} x\right)"
203. 
204. 
205. def test_latex_symbols():
206.     Gamma, lmbda, rho = symbols('Gamma, lambda, rho')
207.     tau, Tau, TAU, taU = symbols('tau, Tau, TAU, taU')
208.     assert latex(tau) == r"\tau"
209.     assert latex(Tau) == "T"
210.     assert latex(TAU) == r"\tau"
211.     assert latex(taU) == r"\tau"
212.     # Check that all capitalized greek letters are handled explicitly
213.     capitalized_letters = set(l.capitalize() for l in greek_letters_set)
214.     assert len(capitalized_letters - set(tex_greek_dictionary.keys())) == 0
215.     assert latex(Gamma + lmbda) == r"\Gamma + \lambda"
216.     assert latex(Gamma * lmbda) == r"\Gamma \lambda"
217.     assert latex(Symbol('q1')) == r"q_{1}"
218.     assert latex(Symbol('q21')) == r"q_{21}"
219.     assert latex(Symbol('epsilon0')) == r"\epsilon_{0}"
220.     assert latex(Symbol('omega1')) == r"\omega_{1}"
221.     assert latex(Symbol('91')) == r"91"
222.     assert latex(Symbol('alpha_new')) == r"\alpha_{new}"
223.     assert latex(Symbol('C^orig')) == r"C^{orig}"
224.     assert latex(Symbol('x^alpha')) == r"x^{\alpha}"
225.     assert latex(Symbol('beta^alpha')) == r"\beta^{\alpha}"
226.     assert latex(Symbol('e^Alpha')) == r"e^{A}"
227.     assert latex(Symbol('omega_alpha^beta')) == r"\omega^{\beta}_{\alpha}"
228.     assert latex(Symbol('omega') ** Symbol('beta')) == r"\omega^{\beta}"
229. 
230. 
231. @XFAIL
232. def test_latex_symbols_failing():
233.     rho, mass, volume = symbols('rho, mass, volume')
234.     assert latex(
235.         volume * rho == mass) == r"\rho \mathrm{volume} = \mathrm{mass}"
236.     assert latex(volume / mass * rho == 1) == r"\rho \mathrm{volume} {\mathrm{mass}}^{(-1)} = 1"
237.     assert latex(mass**3 * volume**3) == r"{\mathrm{mass}}^{3} \cdot {\mathrm{volume}}^{3}"
238. 
239. 
240. def test_latex_functions():
241.     assert latex(exp(x)) == "e^{x}"
242.     assert latex(exp(1) + exp(2)) == "e + e^{2}"
243. 
244.     f = Function('f')
245.     assert latex(f(x)) == r'f{\left (x \right )}'
246.     assert latex(f) == r'f'
247. 
248.     g = Function('g')
249.     assert latex(g(x, y)) == r'g{\left (x,y \right )}'
250.     assert latex(g) == r'g'
251. 
252.     h = Function('h')
253.     assert latex(h(x, y, z)) == r'h{\left (x,y,z \right )}'
254.     assert latex(h) == r'h'
255. 
256.     Li = Function('Li')
257.     assert latex(Li) == r'\operatorname{Li}'
258.     assert latex(Li(x)) == r'\operatorname{Li}{\left (x \right )}'
259. 
260.     beta = Function('beta')
261. 
262.     # not to be confused with the beta function
263.     assert latex(beta(x)) == r"\beta{\left (x \right )}"
264.     assert latex(beta) == r"\beta"
265. 
266.     a1 = Function('a_1')
267. 
268.     assert latex(a1) == r"\operatorname{a_{1}}"
269.     assert latex(a1(x)) == r"\operatorname{a_{1}}{\left (x \right )}"
270. 
271.     # issue 5868
272.     omega1 = Function('omega1')
273.     assert latex(omega1) == r"\omega_{1}"
274.     assert latex(omega1(x)) == r"\omega_{1}{\left (x \right )}"
275. 
276.     assert latex(sin(x)) == r"\sin{\left (x \right )}"
277.     assert latex(sin(x), fold_func_brackets=True) == r"\sin {x}"
278.     assert latex(sin(2*x**2), fold_func_brackets=True) == \
279.         r"\sin {2 x^{2}}"
280.     assert latex(sin(x**2), fold_func_brackets=True) == \
281.         r"\sin {x^{2}}"
282. 
283.     assert latex(asin(x)**2) == r"\operatorname{asin}^{2}{\left (x \right )}"
284.     assert latex(asin(x)**2, inv_trig_style="full") == \
285.         r"\arcsin^{2}{\left (x \right )}"
286.     assert latex(asin(x)**2, inv_trig_style="power") == \
287.         r"\sin^{-1}{\left (x \right )}^{2}"
288.     assert latex(asin(x**2), inv_trig_style="power",
289.                  fold_func_brackets=True) == \
290.         r"\sin^{-1} {x^{2}}"
291. 
292.     assert latex(factorial(k)) == r"k!"
293.     assert latex(factorial(-k)) == r"\left(- k\right)!"
294. 
295.     assert latex(subfactorial(k)) == r"!k"
296.     assert latex(subfactorial(-k)) == r"!\left(- k\right)"
297. 
298.     assert latex(factorial2(k)) == r"k!!"
299.     assert latex(factorial2(-k)) == r"\left(- k\right)!!"
300. 
301.     assert latex(binomial(2, k)) == r"{\binom{2}{k}}"
302. 
303.     assert latex(FallingFactorial(3, k)) == r"{\left(3\right)}_{k}"
304.     assert latex(RisingFactorial(3, k)) == r"{3}^{\left(k\right)}"
305. 
306.     assert latex(floor(x)) == r"\lfloor{x}\rfloor"
307.     assert latex(ceiling(x)) == r"\lceil{x}\rceil"
308.     assert latex(Min(x, 2, x**3)) == r"\min\left(2, x, x^{3}\right)"
309.     assert latex(Min(x, y)**2) == r"\min\left(x, y\right)^{2}"
310.     assert latex(Max(x, 2, x**3)) == r"\max\left(2, x, x^{3}\right)"
311.     assert latex(Max(x, y)**2) == r"\max\left(x, y\right)^{2}"
312.     assert latex(Abs(x)) == r"\left|{x}\right|"
313.     assert latex(re(x)) == r"\Re{\left(x\right)}"
314.     assert latex(re(x + y)) == r"\Re{\left(x\right)} + \Re{\left(y\right)}"
315.     assert latex(im(x)) == r"\Im{x}"
316.     assert latex(conjugate(x)) == r"\overline{x}"
317.     assert latex(gamma(x)) == r"\Gamma{\left(x \right)}"
318.     w = Wild('w')
319.     assert latex(gamma(w)) == r"\Gamma{\left(w \right)}"
320.     assert latex(Order(x)) == r"\mathcal{O}\left(x\right)"
321.     assert latex(Order(x, x)) == r"\mathcal{O}\left(x\right)"
322.     assert latex(Order(x, (x, 0))) == r"\mathcal{O}\left(x\right)"
323.     assert latex(Order(x, (x, oo))) == r"\mathcal{O}\left(x; x\rightarrow \infty\right)"
324.     assert latex(Order(x - y, (x, y))) == r"\mathcal{O}\left(x - y; x\rightarrow y\right)"
325.     assert latex(Order(x, x, y)) == r"\mathcal{O}\left(x; \left ( x, \quad y\right )\rightarrow \left ( 0, \quad 0\right )\right)"
326.     assert latex(Order(x, x, y)) == r"\mathcal{O}\left(x; \left ( x, \quad y\right )\rightarrow \left ( 0, \quad 0\right )\right)"
327.     assert latex(Order(x, (x, oo), (y, oo))) == r"\mathcal{O}\left(x; \left ( x, \quad y\right )\rightarrow \left ( \infty, \quad \infty\right )\right)"
328.     assert latex(lowergamma(x, y)) == r'\gamma\left(x, y\right)'
329.     assert latex(uppergamma(x, y)) == r'\Gamma\left(x, y\right)'
330. 
331.     assert latex(cot(x)) == r'\cot{\left (x \right )}'
332.     assert latex(coth(x)) == r'\coth{\left (x \right )}'
333.     assert latex(re(x)) == r'\Re{\left(x\right)}'
334.     assert latex(im(x)) == r'\Im{x}'
335.     assert latex(root(x, y)) == r'x^{\frac{1}{y}}'
336.     assert latex(arg(x)) == r'\arg{\left (x \right )}'
337.     assert latex(zeta(x)) == r'\zeta\left(x\right)'
338. 
339.     assert latex(zeta(x)) == r"\zeta\left(x\right)"
340.     assert latex(zeta(x)**2) == r"\zeta^{2}\left(x\right)"
341.     assert latex(zeta(x, y)) == r"\zeta\left(x, y\right)"
342.     assert latex(zeta(x, y)**2) == r"\zeta^{2}\left(x, y\right)"
343.     assert latex(dirichlet_eta(x)) == r"\eta\left(x\right)"
344.     assert latex(dirichlet_eta(x)**2) == r"\eta^{2}\left(x\right)"
345.     assert latex(polylog(x, y)) == r"\operatorname{Li}_{x}\left(y\right)"
346.     assert latex(
347.         polylog(x, y)**2) == r"\operatorname{Li}_{x}^{2}\left(y\right)"
348.     assert latex(lerchphi(x, y, n)) == r"\Phi\left(x, y, n\right)"
349.     assert latex(lerchphi(x, y, n)**2) == r"\Phi^{2}\left(x, y, n\right)"
350. 
351.     assert latex(elliptic_k(z)) == r"K\left(z\right)"
352.     assert latex(elliptic_k(z)**2) == r"K^{2}\left(z\right)"
353.     assert latex(elliptic_f(x, y)) == r"F\left(x\middle| y\right)"
354.     assert latex(elliptic_f(x, y)**2) == r"F^{2}\left(x\middle| y\right)"
355.     assert latex(elliptic_e(x, y)) == r"E\left(x\middle| y\right)"
356.     assert latex(elliptic_e(x, y)**2) == r"E^{2}\left(x\middle| y\right)"
357.     assert latex(elliptic_e(z)) == r"E\left(z\right)"
358.     assert latex(elliptic_e(z)**2) == r"E^{2}\left(z\right)"
359.     assert latex(elliptic_pi(x, y, z)) == r"\Pi\left(x; y\middle| z\right)"
360.     assert latex(elliptic_pi(x, y, z)**2) == \
361.         r"\Pi^{2}\left(x; y\middle| z\right)"
362.     assert latex(elliptic_pi(x, y)) == r"\Pi\left(x\middle| y\right)"
363.     assert latex(elliptic_pi(x, y)**2) == r"\Pi^{2}\left(x\middle| y\right)"
364. 
365.     assert latex(Ei(x)) == r'\operatorname{Ei}{\left (x \right )}'
366.     assert latex(Ei(x)**2) == r'\operatorname{Ei}^{2}{\left (x \right )}'
367.     assert latex(expint(x, y)**2) == r'\operatorname{E}_{x}^{2}\left(y\right)'
368.     assert latex(Shi(x)**2) == r'\operatorname{Shi}^{2}{\left (x \right )}'
369.     assert latex(Si(x)**2) == r'\operatorname{Si}^{2}{\left (x \right )}'
370.     assert latex(Ci(x)**2) == r'\operatorname{Ci}^{2}{\left (x \right )}'
371.     assert latex(Chi(x)**2) == r'\operatorname{Chi}^{2}{\left (x \right )}'
372.     assert latex(Chi(x)) == r'\operatorname{Chi}{\left (x \right )}'
373. 
374.     assert latex(
375.         jacobi(n, a, b, x)) == r'P_{n}^{\left(a,b\right)}\left(x\right)'
376.     assert latex(jacobi(n, a, b, x)**2) == r'\left(P_{n}^{\left(a,b\right)}\left(x\right)\right)^{2}'
377.     assert latex(
378.         gegenbauer(n, a, x)) == r'C_{n}^{\left(a\right)}\left(x\right)'
379.     assert latex(gegenbauer(n, a, x)**2) == r'\left(C_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
380.     assert latex(chebyshevt(n, x)) == r'T_{n}\left(x\right)'
381.     assert latex(
382.         chebyshevt(n, x)**2) == r'\left(T_{n}\left(x\right)\right)^{2}'
383.     assert latex(chebyshevu(n, x)) == r'U_{n}\left(x\right)'
384.     assert latex(
385.         chebyshevu(n, x)**2) == r'\left(U_{n}\left(x\right)\right)^{2}'
386.     assert latex(legendre(n, x)) == r'P_{n}\left(x\right)'
387.     assert latex(legendre(n, x)**2) == r'\left(P_{n}\left(x\right)\right)^{2}'
388.     assert latex(
389.         assoc_legendre(n, a, x)) == r'P_{n}^{\left(a\right)}\left(x\right)'
390.     assert latex(assoc_legendre(n, a, x)**2) == r'\left(P_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
391.     assert latex(laguerre(n, x)) == r'L_{n}\left(x\right)'
392.     assert latex(laguerre(n, x)**2) == r'\left(L_{n}\left(x\right)\right)^{2}'
393.     assert latex(
394.         assoc_laguerre(n, a, x)) == r'L_{n}^{\left(a\right)}\left(x\right)'
395.     assert latex(assoc_laguerre(n, a, x)**2) == r'\left(L_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
396.     assert latex(hermite(n, x)) == r'H_{n}\left(x\right)'
397.     assert latex(hermite(n, x)**2) == r'\left(H_{n}\left(x\right)\right)^{2}'
398. 
399.     theta = Symbol("theta", real=True)
400.     phi = Symbol("phi", real=True)
401.     assert latex(Ynm(n,m,theta,phi)) == r'Y_{n}^{m}\left(\theta,\phi\right)'
402.     assert latex(Ynm(n, m, theta, phi)**3) == r'\left(Y_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
403.     assert latex(Znm(n,m,theta,phi)) == r'Z_{n}^{m}\left(\theta,\phi\right)'
404.     assert latex(Znm(n, m, theta, phi)**3) == r'\left(Z_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
405. 
406.     # Test latex printing of function names with "_"
407.     assert latex(
408.         polar_lift(0)) == r"\operatorname{polar\_lift}{\left (0 \right )}"
409.     assert latex(polar_lift(
410.         0)**3) == r"\operatorname{polar\_lift}^{3}{\left (0 \right )}"
411. 
412.     assert latex(totient(n)) == r'\phi\left(n\right)'
413.     assert latex(totient(n) ** 2) == r'\left(\phi\left(n\right)\right)^{2}'
414. 
415.     assert latex(reduced_totient(n)) == r'\lambda\left(n\right)'
416.     assert latex(reduced_totient(n) ** 2) == r'\left(\lambda\left(n\right)\right)^{2}'
417. 
418.     assert latex(divisor_sigma(x)) == r"\sigma\left(x\right)"
419.     assert latex(divisor_sigma(x)**2) == r"\sigma^{2}\left(x\right)"
420.     assert latex(divisor_sigma(x, y)) == r"\sigma_y\left(x\right)"
421.     assert latex(divisor_sigma(x, y)**2) == r"\sigma^{2}_y\left(x\right)"
422. 
423.     assert latex(udivisor_sigma(x)) == r"\sigma^*\left(x\right)"
424.     assert latex(udivisor_sigma(x)**2) == r"\sigma^*^{2}\left(x\right)"
425.     assert latex(udivisor_sigma(x, y)) == r"\sigma^*_y\left(x\right)"
426.     assert latex(udivisor_sigma(x, y)**2) == r"\sigma^*^{2}_y\left(x\right)"
427. 
428.     assert latex(primenu(n)) == r'\nu\left(n\right)'
429.     assert latex(primenu(n) ** 2) == r'\left(\nu\left(n\right)\right)^{2}'
430. 
431.     assert latex(primeomega(n)) == r'\Omega\left(n\right)'
432.     assert latex(primeomega(n) ** 2) == r'\left(\Omega\left(n\right)\right)^{2}'
433. 
434.     assert latex(Mod(x, 7)) == r'x\bmod{7}'
435.     assert latex(Mod(x + 1, 7)) == r'\left(x + 1\right)\bmod{7}'
436.     assert latex(Mod(2 * x, 7)) == r'2 x\bmod{7}'
437.     assert latex(Mod(x, 7) + 1) == r'\left(x\bmod{7}\right) + 1'
438.     assert latex(2 * Mod(x, 7)) == r'2 \left(x\bmod{7}\right)'
439. 
440.     # some unknown function name should get rendered with \operatorname
441.     fjlkd = Function('fjlkd')
442.     assert latex(fjlkd(x)) == r'\operatorname{fjlkd}{\left (x \right )}'
443.     # even when it is referred to without an argument
444.     assert latex(fjlkd) == r'\operatorname{fjlkd}'
445. 
446. 
447. def test_hyper_printing():
448.     from sympy import pi
449.     from sympy.abc import x, z
450. 
451.     assert latex(meijerg(Tuple(pi, pi, x), Tuple(1),
452.                          (0, 1), Tuple(1, 2, 3/pi), z)) == \
453.         r'{G_{4, 5}^{2, 3}\left(\begin{matrix} \pi, \pi, x & 1 \\0, 1 & 1, 2, \frac{3}{\pi} \end{matrix} \middle| {z} \right)}'
454.     assert latex(meijerg(Tuple(), Tuple(1), (0,), Tuple(), z)) == \
455.         r'{G_{1, 1}^{1, 0}\left(\begin{matrix}  & 1 \\0 &  \end{matrix} \middle| {z} \right)}'
456.     assert latex(hyper((x, 2), (3,), z)) == \
457.         r'{{}_{2}F_{1}\left(\begin{matrix} x, 2 ' \
458.         r'\\ 3 \end{matrix}\middle| {z} \right)}'
459.     assert latex(hyper(Tuple(), Tuple(1), z)) == \
460.         r'{{}_{0}F_{1}\left(\begin{matrix}  ' \
461.         r'\\ 1 \end{matrix}\middle| {z} \right)}'
462. 
463. 
464. def test_latex_bessel():
465.     from sympy.functions.special.bessel import (besselj, bessely, besseli,
466.             besselk, hankel1, hankel2, jn, yn, hn1, hn2)
467.     from sympy.abc import z
468.     assert latex(besselj(n, z**2)**k) == r'J^{k}_{n}\left(z^{2}\right)'
469.     assert latex(bessely(n, z)) == r'Y_{n}\left(z\right)'
470.     assert latex(besseli(n, z)) == r'I_{n}\left(z\right)'
471.     assert latex(besselk(n, z)) == r'K_{n}\left(z\right)'
472.     assert latex(hankel1(n, z**2)**2) == \
473.         r'\left(H^{(1)}_{n}\left(z^{2}\right)\right)^{2}'
474.     assert latex(hankel2(n, z)) == r'H^{(2)}_{n}\left(z\right)'
475.     assert latex(jn(n, z)) == r'j_{n}\left(z\right)'
476.     assert latex(yn(n, z)) == r'y_{n}\left(z\right)'
477.     assert latex(hn1(n, z)) == r'h^{(1)}_{n}\left(z\right)'
478.     assert latex(hn2(n, z)) == r'h^{(2)}_{n}\left(z\right)'
479. 
480. 
481. def test_latex_fresnel():
482.     from sympy.functions.special.error_functions import (fresnels, fresnelc)
483.     from sympy.abc import z
484.     assert latex(fresnels(z)) == r'S\left(z\right)'
485.     assert latex(fresnelc(z)) == r'C\left(z\right)'
486.     assert latex(fresnels(z)**2) == r'S^{2}\left(z\right)'
487.     assert latex(fresnelc(z)**2) == r'C^{2}\left(z\right)'
488. 
489. 
490. def test_latex_brackets():
491.     assert latex((-1)**x) == r"\left(-1\right)^{x}"
492. 
493. 
494. def test_latex_indexed():
495.     Psi_symbol = Symbol('Psi_0', complex=True, real=False)
496.     Psi_indexed = IndexedBase(Symbol('Psi', complex=True, real=False))
497.     symbol_latex = latex(Psi_symbol * conjugate(Psi_symbol))
498.     indexed_latex = latex(Psi_indexed[0] * conjugate(Psi_indexed[0]))
499.     # \\overline{\\Psi_{0}} \\Psi_{0}   vs.   \\Psi_{0} \\overline{\\Psi_{0}}
500.     assert symbol_latex.split() == indexed_latex.split() \


File: sympy/printing/tests/test_latex.py
Line number range: 501 - 1001
Content:
501.         or symbol_latex.split() == indexed_latex.split()[::-1]
502. 
503.     # Symbol('gamma') gives r'\gamma'
504.     assert latex(IndexedBase('gamma')) == r'\gamma'
505.     assert latex(IndexedBase('a b')) == 'a b'
506.     assert latex(IndexedBase('a_b')) == 'a_{b}'
507. 
508. 
509. def test_latex_derivatives():
510.     # regular "d" for ordinary derivatives
511.     assert latex(diff(x**3, x, evaluate=False)) == \
512.         r"\frac{d}{d x} x^{3}"
513.     assert latex(diff(sin(x) + x**2, x, evaluate=False)) == \
514.         r"\frac{d}{d x} \left(x^{2} + \sin{\left (x \right )}\right)"
515.     assert latex(diff(diff(sin(x) + x**2, x, evaluate=False), evaluate=False)) == \
516.         r"\frac{d^{2}}{d x^{2}} \left(x^{2} + \sin{\left (x \right )}\right)"
517.     assert latex(diff(diff(diff(sin(x) + x**2, x, evaluate=False), evaluate=False), evaluate=False)) == \
518.         r"\frac{d^{3}}{d x^{3}} \left(x^{2} + \sin{\left (x \right )}\right)"
519. 
520.     # \partial for partial derivatives
521.     assert latex(diff(sin(x * y), x, evaluate=False)) == \
522.         r"\frac{\partial}{\partial x} \sin{\left (x y \right )}"
523.     assert latex(diff(sin(x * y) + x**2, x, evaluate=False)) == \
524.         r"\frac{\partial}{\partial x} \left(x^{2} + \sin{\left (x y \right )}\right)"
525.     assert latex(diff(diff(sin(x*y) + x**2, x, evaluate=False), x, evaluate=False)) == \
526.         r"\frac{\partial^{2}}{\partial x^{2}} \left(x^{2} + \sin{\left (x y \right )}\right)"
527.     assert latex(diff(diff(diff(sin(x*y) + x**2, x, evaluate=False), x, evaluate=False), x, evaluate=False)) == \
528.         r"\frac{\partial^{3}}{\partial x^{3}} \left(x^{2} + \sin{\left (x y \right )}\right)"
529. 
530.     # mixed partial derivatives
531.     f = Function("f")
532.     assert latex(diff(diff(f(x,y), x, evaluate=False), y, evaluate=False)) == \
533.         r"\frac{\partial^{2}}{\partial y\partial x} " + latex(f(x,y))
534. 
535.     assert latex(diff(diff(diff(f(x,y), x, evaluate=False), x, evaluate=False), y, evaluate=False)) == \
536.         r"\frac{\partial^{3}}{\partial y\partial x^{2}} " + latex(f(x,y))
537. 
538.     # use ordinary d when one of the variables has been integrated out
539.     assert latex(diff(Integral(exp(-x * y), (x, 0, oo)), y, evaluate=False)) == \
540.         r"\frac{d}{d y} \int_{0}^{\infty} e^{- x y}\, dx"
541. 
542.     # Derivative wrapped in power:
543.     assert latex(diff(x, x, evaluate=False)**2) == \
544.         r"\left(\frac{d}{d x} x\right)^{2}"
545. 
546.     assert latex(diff(f(x), x)**2) == \
547.         r"\left(\frac{d}{d x} f{\left (x \right )}\right)^{2}"
548. 
549.     assert latex(diff(f(x), (x, n))) == \
550.         r"\frac{d^{n}}{d x^{n}} f{\left (x \right )}"
551. 
552. 
553. def test_latex_subs():
554.     assert latex(Subs(x*y, (
555.         x, y), (1, 2))) == r'\left. x y \right|_{\substack{ x=1\\ y=2 }}'
556. 
557. 
558. def test_latex_integrals():
559.     assert latex(Integral(log(x), x)) == r"\int \log{\left (x \right )}\, dx"
560.     assert latex(Integral(x**2, (x, 0, 1))) == r"\int_{0}^{1} x^{2}\, dx"
561.     assert latex(Integral(x**2, (x, 10, 20))) == r"\int_{10}^{20} x^{2}\, dx"
562.     assert latex(Integral(
563.         y*x**2, (x, 0, 1), y)) == r"\int\int_{0}^{1} x^{2} y\, dx\, dy"
564.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*') \
565.         == r"\begin{equation*}\int\int\limits_{0}^{1} x^{2} y\, dx\, dy\end{equation*}"
566.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*', itex=True) \
567.         == r"$$\int\int_{0}^{1} x^{2} y\, dx\, dy$$"
568.     assert latex(Integral(x, (x, 0))) == r"\int^{0} x\, dx"
569.     assert latex(Integral(x*y, x, y)) == r"\iint x y\, dx\, dy"
570.     assert latex(Integral(x*y*z, x, y, z)) == r"\iiint x y z\, dx\, dy\, dz"
571.     assert latex(Integral(x*y*z*t, x, y, z, t)) == \
572.         r"\iiiint t x y z\, dx\, dy\, dz\, dt"
573.     assert latex(Integral(x, x, x, x, x, x, x)) == \
574.         r"\int\int\int\int\int\int x\, dx\, dx\, dx\, dx\, dx\, dx"
575.     assert latex(Integral(x, x, y, (z, 0, 1))) == \
576.         r"\int_{0}^{1}\int\int x\, dx\, dy\, dz"
577. 
578.     # fix issue #10806
579.     assert latex(Integral(z, z)**2) == r"\left(\int z\, dz\right)^{2}"
580.     assert latex(Integral(x + z, z)) == r"\int \left(x + z\right)\, dz"
581.     assert latex(Integral(x+z/2, z)) == r"\int \left(x + \frac{z}{2}\right)\, dz"
582.     assert latex(Integral(x**y, z)) == r"\int x^{y}\, dz"
583. 
584. 
585. def test_latex_sets():
586.     for s in (frozenset, set):
587.         assert latex(s([x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
588.         assert latex(s(range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
589.         assert latex(s(range(1, 13))) == \
590.             r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
591. 
592.     s = FiniteSet
593.     assert latex(s(*[x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
594.     assert latex(s(*range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
595.     assert latex(s(*range(1, 13))) == \
596.         r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
597. 
598. 
599. def test_latex_Range():
600.     assert latex(Range(1, 51)) == \
601.         r'\left\{1, 2, \ldots, 50\right\}'
602.     assert latex(Range(1, 4)) == r'\left\{1, 2, 3\right\}'
603. 
604.     assert latex(Range(0, 3, 1)) == r'\left\{0, 1, 2\right\}'
605. 
606.     assert latex(Range(0, 30, 1)) == r'\left\{0, 1, \ldots, 29\right\}'
607. 
608.     assert latex(Range(30, 1, -1)) == r'\left\{30, 29, \ldots, 2\right\}'
609. 
610.     assert latex(Range(0, oo, 2)) == r'\left\{0, 2, \ldots, \infty\right\}'
611. 
612.     assert latex(Range(oo, -2, -2)) == r'\left\{\infty, \ldots, 2, 0\right\}'
613. 
614.     assert latex(Range(-2, -oo, -1)) == r'\left\{-2, -3, \ldots, -\infty\right\}'
615. 
616. 
617. def test_latex_sequences():
618.     s1 = SeqFormula(a**2, (0, oo))
619.     s2 = SeqPer((1, 2))
620. 
621.     latex_str = r'\left\[0, 1, 4, 9, \ldots\right\]'
622.     assert latex(s1) == latex_str
623. 
624.     latex_str = r'\left\[1, 2, 1, 2, \ldots\right\]'
625.     assert latex(s2) == latex_str
626. 
627.     s3 = SeqFormula(a**2, (0, 2))
628.     s4 = SeqPer((1, 2), (0, 2))
629. 
630.     latex_str = r'\left\[0, 1, 4\right\]'
631.     assert latex(s3) == latex_str
632. 
633.     latex_str = r'\left\[1, 2, 1\right\]'
634.     assert latex(s4) == latex_str
635. 
636.     s5 = SeqFormula(a**2, (-oo, 0))
637.     s6 = SeqPer((1, 2), (-oo, 0))
638. 
639.     latex_str = r'\left\[\ldots, 9, 4, 1, 0\right\]'
640.     assert latex(s5) == latex_str
641. 
642.     latex_str = r'\left\[\ldots, 2, 1, 2, 1\right\]'
643.     assert latex(s6) == latex_str
644. 
645.     latex_str = r'\left\[1, 3, 5, 11, \ldots\right\]'
646.     assert latex(SeqAdd(s1, s2)) == latex_str
647. 
648.     latex_str = r'\left\[1, 3, 5\right\]'
649.     assert latex(SeqAdd(s3, s4)) == latex_str
650. 
651.     latex_str = r'\left\[\ldots, 11, 5, 3, 1\right\]'
652.     assert latex(SeqAdd(s5, s6)) == latex_str
653. 
654.     latex_str = r'\left\[0, 2, 4, 18, \ldots\right\]'
655.     assert latex(SeqMul(s1, s2)) == latex_str
656. 
657.     latex_str = r'\left\[0, 2, 4\right\]'
658.     assert latex(SeqMul(s3, s4)) == latex_str
659. 
660.     latex_str = r'\left\[\ldots, 18, 4, 2, 0\right\]'
661.     assert latex(SeqMul(s5, s6)) == latex_str
662. 
663. 
664. def test_latex_FourierSeries():
665.     latex_str = r'2 \sin{\left (x \right )} - \sin{\left (2 x \right )} + \frac{2}{3} \sin{\left (3 x \right )} + \ldots'
666.     assert latex(fourier_series(x, (x, -pi, pi))) == latex_str
667. 
668. 
669. def test_latex_FormalPowerSeries():
670.     latex_str = r'\sum_{k=1}^{\infty} - \frac{\left(-1\right)^{- k}}{k} x^{k}'
671.     assert latex(fps(log(1 + x))) == latex_str
672. 
673. 
674. def test_latex_intervals():
675.     a = Symbol('a', real=True)
676.     assert latex(Interval(0, 0)) == r"\left\{0\right\}"
677.     assert latex(Interval(0, a)) == r"\left[0, a\right]"
678.     assert latex(Interval(0, a, False, False)) == r"\left[0, a\right]"
679.     assert latex(Interval(0, a, True, False)) == r"\left(0, a\right]"
680.     assert latex(Interval(0, a, False, True)) == r"\left[0, a\right)"
681.     assert latex(Interval(0, a, True, True)) == r"\left(0, a\right)"
682. 
683. 
684. def test_latex_AccumuBounds():
685.     a = Symbol('a', real=True)
686.     assert latex(AccumBounds(0, 1)) == r"\langle 0, 1\rangle"
687.     assert latex(AccumBounds(0, a)) == r"\langle 0, a\rangle"
688.     assert latex(AccumBounds(a + 1, a + 2)) == r"\langle a + 1, a + 2\rangle"
689. 
690. 
691. def test_latex_emptyset():
692.     assert latex(S.EmptySet) == r"\emptyset"
693. 
694. def test_latex_commutator():
695.     A = Operator('A')
696.     B = Operator('B')
697.     comm = Commutator(B, A)
698.     assert latex(comm.doit()) == r"- (A B - B A)"
699. 
700. 
701. def test_latex_union():
702.     assert latex(Union(Interval(0, 1), Interval(2, 3))) == \
703.         r"\left[0, 1\right] \cup \left[2, 3\right]"
704.     assert latex(Union(Interval(1, 1), Interval(2, 2), Interval(3, 4))) == \
705.         r"\left\{1, 2\right\} \cup \left[3, 4\right]"
706. 
707. 
708. def test_latex_symmetric_difference():
709.     assert latex(SymmetricDifference(Interval(2,5), Interval(4,7), \
710.         evaluate = False)) == r'\left[2, 5\right] \triangle \left[4, 7\right]'
711. 
712. 
713. def test_latex_Complement():
714.     assert latex(Complement(S.Reals, S.Naturals)) == r"\mathbb{R} \setminus \mathbb{N}"
715. 
716. 
717. def test_latex_Complexes():
718.     assert latex(S.Complexes) == r"\mathbb{C}"
719. 
720. 
721. def test_latex_productset():
722.     line = Interval(0, 1)
723.     bigline = Interval(0, 10)
724.     fset = FiniteSet(1, 2, 3)
725.     assert latex(line**2) == r"%s^2" % latex(line)
726.     assert latex(line * bigline * fset) == r"%s \times %s \times %s" % (
727.         latex(line), latex(bigline), latex(fset))
728. 
729. 
730. def test_latex_Naturals():
731.     assert latex(S.Naturals) == r"\mathbb{N}"
732. 
733. 
734. def test_latex_Naturals0():
735.     assert latex(S.Naturals0) == r"\mathbb{N}_0"
736. 
737. 
738. def test_latex_Integers():
739.     assert latex(S.Integers) == r"\mathbb{Z}"
740. 
741. 
742. def test_latex_ImageSet():
743.     x = Symbol('x')
744.     assert latex(ImageSet(Lambda(x, x**2), S.Naturals)) == \
745.         r"\left\{x^{2}\; |\; x \in \mathbb{N}\right\}"
746. 
747. 
748. def test_latex_ConditionSet():
749.     x = Symbol('x')
750.     assert latex(ConditionSet(x, Eq(x**2, 1), S.Reals)) == \
751.         r"\left\{x\; |\; x \in \mathbb{R} \wedge x^{2} = 1 \right\}"
752. 
753. 
754. def test_latex_ComplexRegion():
755.     assert latex(ComplexRegion(Interval(3, 5)*Interval(4, 6))) == \
756.         r"\left\{x + y i\; |\; x, y \in \left[3, 5\right] \times \left[4, 6\right] \right\}"
757.     assert latex(ComplexRegion(Interval(0, 1)*Interval(0, 2*pi), polar=True)) == \
758.         r"\left\{r \left(i \sin{\left (\theta \right )} + \cos{\left (\theta \right )}\right)\; |\; r, \theta \in \left[0, 1\right] \times \left[0, 2 \pi\right) \right\}"
759. 
760. 
761. def test_latex_Contains():
762.     x = Symbol('x')
763.     assert latex(Contains(x, S.Naturals)) == r"x \in \mathbb{N}"
764. 
765. 
766. def test_latex_sum():
767.     assert latex(Sum(x*y**2, (x, -2, 2), (y, -5, 5))) == \
768.         r"\sum_{\substack{-2 \leq x \leq 2\\-5 \leq y \leq 5}} x y^{2}"
769.     assert latex(Sum(x**2, (x, -2, 2))) == \
770.         r"\sum_{x=-2}^{2} x^{2}"
771.     assert latex(Sum(x**2 + y, (x, -2, 2))) == \
772.         r"\sum_{x=-2}^{2} \left(x^{2} + y\right)"
773. 
774.     assert latex(Sum(x**2 + y, (x, -2, 2))**2) == \
775.         r"\left(\sum_{x=-2}^{2} \left(x^{2} + y\right)\right)^{2}"
776. 
777. 
778. def test_latex_product():
779.     assert latex(Product(x*y**2, (x, -2, 2), (y, -5, 5))) == \
780.         r"\prod_{\substack{-2 \leq x \leq 2\\-5 \leq y \leq 5}} x y^{2}"
781.     assert latex(Product(x**2, (x, -2, 2))) == \
782.         r"\prod_{x=-2}^{2} x^{2}"
783.     assert latex(Product(x**2 + y, (x, -2, 2))) == \
784.         r"\prod_{x=-2}^{2} \left(x^{2} + y\right)"
785. 
786.     assert latex(Product(x, (x, -2, 2))**2) == \
787.         r"\left(\prod_{x=-2}^{2} x\right)^{2}"
788. 
789. 
790. def test_latex_limits():
791.     assert latex(Limit(x, x, oo)) == r"\lim_{x \to \infty} x"
792. 
793.     # issue 8175
794.     f = Function('f')
795.     assert latex(Limit(f(x), x, 0)) == r"\lim_{x \to 0^+} f{\left (x \right )}"
796.     assert latex(Limit(f(x), x, 0, "-")) == r"\lim_{x \to 0^-} f{\left (x \right )}"
797. 
798.     # issue #10806
799.     assert latex(Limit(f(x), x, 0)**2) == r"\left(\lim_{x \to 0^+} f{\left (x \right )}\right)^{2}"
800.     # bi-directional limit
801.     assert latex(Limit(f(x), x, 0, dir='+-')) == r"\lim_{x \to 0} f{\left (x \right )}"
802. 
803. 
804. def test_issue_3568():
805.     beta = Symbol(r'\beta')
806.     y = beta + x
807.     assert latex(y) in [r'\beta + x', r'x + \beta']
808. 
809.     beta = Symbol(r'beta')
810.     y = beta + x
811.     assert latex(y) in [r'\beta + x', r'x + \beta']
812. 
813. 
814. def test_latex():
815.     assert latex((2*tau)**Rational(7, 2)) == "8 \\sqrt{2} \\tau^{\\frac{7}{2}}"
816.     assert latex((2*mu)**Rational(7, 2), mode='equation*') == \
817.         "\\begin{equation*}8 \\sqrt{2} \\mu^{\\frac{7}{2}}\\end{equation*}"
818.     assert latex((2*mu)**Rational(7, 2), mode='equation', itex=True) == \
819.         "$$8 \\sqrt{2} \\mu^{\\frac{7}{2}}$$"
820.     assert latex([2/x, y]) == r"\left [ \frac{2}{x}, \quad y\right ]"
821. 
822. 
823. def test_latex_dict():
824.     d = {Rational(1): 1, x**2: 2, x: 3, x**3: 4}
825.     assert latex(d) == r'\left \{ 1 : 1, \quad x : 3, \quad x^{2} : 2, \quad x^{3} : 4\right \}'
826.     D = Dict(d)
827.     assert latex(D) == r'\left \{ 1 : 1, \quad x : 3, \quad x^{2} : 2, \quad x^{3} : 4\right \}'
828. 
829. 
830. def test_latex_list():
831.     l = [Symbol('omega1'), Symbol('a'), Symbol('alpha')]
832.     assert latex(l) == r'\left [ \omega_{1}, \quad a, \quad \alpha\right ]'
833. 
834. 
835. def test_latex_rational():
836.     #tests issue 3973
837.     assert latex(-Rational(1, 2)) == "- \\frac{1}{2}"
838.     assert latex(Rational(-1, 2)) == "- \\frac{1}{2}"
839.     assert latex(Rational(1, -2)) == "- \\frac{1}{2}"
840.     assert latex(-Rational(-1, 2)) == "\\frac{1}{2}"
841.     assert latex(-Rational(1, 2)*x) == "- \\frac{x}{2}"
842.     assert latex(-Rational(1, 2)*x + Rational(-2, 3)*y) == \
843.         "- \\frac{x}{2} - \\frac{2 y}{3}"
844. 
845. 
846. def test_latex_inverse():
847.     #tests issue 4129
848.     assert latex(1/x) == "\\frac{1}{x}"
849.     assert latex(1/(x + y)) == "\\frac{1}{x + y}"
850. 
851. 
852. def test_latex_DiracDelta():
853.     assert latex(DiracDelta(x)) == r"\delta\left(x\right)"
854.     assert latex(DiracDelta(x)**2) == r"\left(\delta\left(x\right)\right)^{2}"
855.     assert latex(DiracDelta(x, 0)) == r"\delta\left(x\right)"
856.     assert latex(DiracDelta(x, 5)) == \
857.         r"\delta^{\left( 5 \right)}\left( x \right)"
858.     assert latex(DiracDelta(x, 5)**2) == \
859.         r"\left(\delta^{\left( 5 \right)}\left( x \right)\right)^{2}"
860. 
861. 
862. def test_latex_Heaviside():
863.     assert latex(Heaviside(x)) == r"\theta\left(x\right)"
864.     assert latex(Heaviside(x)**2) == r"\left(\theta\left(x\right)\right)^{2}"
865. 
866. 
867. def test_latex_KroneckerDelta():
868.     assert latex(KroneckerDelta(x, y)) == r"\delta_{x y}"
869.     assert latex(KroneckerDelta(x, y + 1)) == r"\delta_{x, y + 1}"
870.     # issue 6578
871.     assert latex(KroneckerDelta(x + 1, y)) == r"\delta_{y, x + 1}"
872. 
873. 
874. def test_latex_LeviCivita():
875.     assert latex(LeviCivita(x, y, z)) == r"\varepsilon_{x y z}"
876.     assert latex(LeviCivita(x, y, z)**2) == r"\left(\varepsilon_{x y z}\right)^{2}"
877.     assert latex(LeviCivita(x, y, z + 1)) == r"\varepsilon_{x, y, z + 1}"
878.     assert latex(LeviCivita(x, y + 1, z)) == r"\varepsilon_{x, y + 1, z}"
879.     assert latex(LeviCivita(x + 1, y, z)) == r"\varepsilon_{x + 1, y, z}"
880. 
881. 
882. def test_mode():
883.     expr = x + y
884.     assert latex(expr) == 'x + y'
885.     assert latex(expr, mode='plain') == 'x + y'
886.     assert latex(expr, mode='inline') == '$x + y$'
887.     assert latex(
888.         expr, mode='equation*') == '\\begin{equation*}x + y\\end{equation*}'
889.     assert latex(
890.         expr, mode='equation') == '\\begin{equation}x + y\\end{equation}'
891. 
892. 
893. def test_latex_Piecewise():
894.     p = Piecewise((x, x < 1), (x**2, True))
895.     assert latex(p) == "\\begin{cases} x & \\text{for}\\: x < 1 \\\\x^{2} &" \
896.                        " \\text{otherwise} \\end{cases}"
897.     assert latex(p, itex=True) == "\\begin{cases} x & \\text{for}\\: x \\lt 1 \\\\x^{2} &" \
898.                                   " \\text{otherwise} \\end{cases}"
899.     p = Piecewise((x, x < 0), (0, x >= 0))
900.     assert latex(p) == '\\begin{cases} x & \\text{for}\\: x < 0 \\\\0 &' \
901.                        ' \\text{otherwise} \\end{cases}'
902.     A, B = symbols("A B", commutative=False)
903.     p = Piecewise((A**2, Eq(A, B)), (A*B, True))
904.     s = r"\begin{cases} A^{2} & \text{for}\: A = B \\A B & \text{otherwise} \end{cases}"
905.     assert latex(p) == s
906.     assert latex(A*p) == r"A \left(%s\right)" % s
907.     assert latex(p*A) == r"\left(%s\right) A" % s
908. 
909. 
910. def test_latex_Matrix():
911.     M = Matrix([[1 + x, y], [y, x - 1]])
912.     assert latex(M) == \
913.         r'\left[\begin{matrix}x + 1 & y\\y & x - 1\end{matrix}\right]'
914.     assert latex(M, mode='inline') == \
915.         r'$\left[\begin{smallmatrix}x + 1 & y\\' \
916.         r'y & x - 1\end{smallmatrix}\right]$'
917.     assert latex(M, mat_str='array') == \
918.         r'\left[\begin{array}{cc}x + 1 & y\\y & x - 1\end{array}\right]'
919.     assert latex(M, mat_str='bmatrix') == \
920.         r'\left[\begin{bmatrix}x + 1 & y\\y & x - 1\end{bmatrix}\right]'
921.     assert latex(M, mat_delim=None, mat_str='bmatrix') == \
922.         r'\begin{bmatrix}x + 1 & y\\y & x - 1\end{bmatrix}'
923.     M2 = Matrix(1, 11, range(11))
924.     assert latex(M2) == \
925.         r'\left[\begin{array}{ccccccccccc}' \
926.         r'0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10\end{array}\right]'
927. 
928. 
929. def test_latex_matrix_with_functions():
930.     t = symbols('t')
931.     theta1 = symbols('theta1', cls=Function)
932. 
933.     M = Matrix([[sin(theta1(t)), cos(theta1(t))],
934.                 [cos(theta1(t).diff(t)), sin(theta1(t).diff(t))]])
935. 
936.     expected = (r'\left[\begin{matrix}\sin{\left '
937.                 r'(\theta_{1}{\left (t \right )} \right )} & '
938.                 r'\cos{\left (\theta_{1}{\left (t \right )} \right '
939.                 r')}\\\cos{\left (\frac{d}{d t} \theta_{1}{\left (t '
940.                 r'\right )} \right )} & \sin{\left (\frac{d}{d t} '
941.                 r'\theta_{1}{\left (t \right )} \right '
942.                 r')}\end{matrix}\right]')
943. 
944.     assert latex(M) == expected
945. 
946. 
947. def test_latex_NDimArray():
948.     x, y, z, w = symbols("x y z w")
949. 
950.     for ArrayType in (ImmutableDenseNDimArray, ImmutableSparseNDimArray, MutableDenseNDimArray, MutableSparseNDimArray):
951.         # Basic: scalar array
952.         M = ArrayType(x)
953. 
954.         assert latex(M) == "x"
955. 
956.         M = ArrayType([[1 / x, y], [z, w]])
957.         M1 = ArrayType([1 / x, y, z])
958. 
959.         M2 = tensorproduct(M1, M)
960.         M3 = tensorproduct(M, M)
961. 
962.         assert latex(M) == '\\left[\\begin{matrix}\\frac{1}{x} & y\\\\z & w\\end{matrix}\\right]'
963.         assert latex(M1) == "\\left[\\begin{matrix}\\frac{1}{x} & y & z\\end{matrix}\\right]"
964.         assert latex(M2) == r"\left[\begin{matrix}" \
965.                             r"\left[\begin{matrix}\frac{1}{x^{2}} & \frac{y}{x}\\\frac{z}{x} & \frac{w}{x}\end{matrix}\right] & " \
966.                             r"\left[\begin{matrix}\frac{y}{x} & y^{2}\\y z & w y\end{matrix}\right] & " \
967.                             r"\left[\begin{matrix}\frac{z}{x} & y z\\z^{2} & w z\end{matrix}\right]" \
968.                             r"\end{matrix}\right]"
969.         assert latex(M3) == r"""\left[\begin{matrix}"""\
970.                 r"""\left[\begin{matrix}\frac{1}{x^{2}} & \frac{y}{x}\\\frac{z}{x} & \frac{w}{x}\end{matrix}\right] & """\
971.                 r"""\left[\begin{matrix}\frac{y}{x} & y^{2}\\y z & w y\end{matrix}\right]\\"""\
972.                 r"""\left[\begin{matrix}\frac{z}{x} & y z\\z^{2} & w z\end{matrix}\right] & """\
973.                 r"""\left[\begin{matrix}\frac{w}{x} & w y\\w z & w^{2}\end{matrix}\right]"""\
974.                 r"""\end{matrix}\right]"""
975. 
976.         Mrow = ArrayType([[x, y, 1/z]])
977.         Mcolumn = ArrayType([[x], [y], [1/z]])
978.         Mcol2 = ArrayType([Mcolumn.tolist()])
979. 
980.         assert latex(Mrow) == r"\left[\left[\begin{matrix}x & y & \frac{1}{z}\end{matrix}\right]\right]"
981.         assert latex(Mcolumn) == r"\left[\begin{matrix}x\\y\\\frac{1}{z}\end{matrix}\right]"
982.         assert latex(Mcol2) == r'\left[\begin{matrix}\left[\begin{matrix}x\\y\\\frac{1}{z}\end{matrix}\right]\end{matrix}\right]'
983. 
984. 
985. def test_latex_mul_symbol():
986.     assert latex(4*4**x, mul_symbol='times') == "4 \\times 4^{x}"
987.     assert latex(4*4**x, mul_symbol='dot') == "4 \\cdot 4^{x}"
988.     assert latex(4*4**x, mul_symbol='ldot') == r"4 \,.\, 4^{x}"
989. 
990.     assert latex(4*x, mul_symbol='times') == "4 \\times x"
991.     assert latex(4*x, mul_symbol='dot') == "4 \\cdot x"
992.     assert latex(4*x, mul_symbol='ldot') == r"4 \,.\, x"
993. 
994. 
995. def test_latex_issue_4381():
996.     y = 4*4**log(2)
997.     assert latex(y) == r'4 \cdot 4^{\log{\left (2 \right )}}'
998.     assert latex(1/y) == r'\frac{1}{4 \cdot 4^{\log{\left (2 \right )}}}'
999. 
1000. 
1001. def test_latex_issue_4576():


File: sympy/printing/tests/test_latex.py
Line number range: 1001 - 1501
Content:
1001. def test_latex_issue_4576():
1002.     assert latex(Symbol("beta_13_2")) == r"\beta_{13 2}"
1003.     assert latex(Symbol("beta_132_20")) == r"\beta_{132 20}"
1004.     assert latex(Symbol("beta_13")) == r"\beta_{13}"
1005.     assert latex(Symbol("x_a_b")) == r"x_{a b}"
1006.     assert latex(Symbol("x_1_2_3")) == r"x_{1 2 3}"
1007.     assert latex(Symbol("x_a_b1")) == r"x_{a b1}"
1008.     assert latex(Symbol("x_a_1")) == r"x_{a 1}"
1009.     assert latex(Symbol("x_1_a")) == r"x_{1 a}"
1010.     assert latex(Symbol("x_1^aa")) == r"x^{aa}_{1}"
1011.     assert latex(Symbol("x_1__aa")) == r"x^{aa}_{1}"
1012.     assert latex(Symbol("x_11^a")) == r"x^{a}_{11}"
1013.     assert latex(Symbol("x_11__a")) == r"x^{a}_{11}"
1014.     assert latex(Symbol("x_a_a_a_a")) == r"x_{a a a a}"
1015.     assert latex(Symbol("x_a_a^a^a")) == r"x^{a a}_{a a}"
1016.     assert latex(Symbol("x_a_a__a__a")) == r"x^{a a}_{a a}"
1017.     assert latex(Symbol("alpha_11")) == r"\alpha_{11}"
1018.     assert latex(Symbol("alpha_11_11")) == r"\alpha_{11 11}"
1019.     assert latex(Symbol("alpha_alpha")) == r"\alpha_{\alpha}"
1020.     assert latex(Symbol("alpha^aleph")) == r"\alpha^{\aleph}"
1021.     assert latex(Symbol("alpha__aleph")) == r"\alpha^{\aleph}"
1022. 
1023. 
1024. def test_latex_pow_fraction():
1025.     x = Symbol('x')
1026.     # Testing exp
1027.     assert 'e^{-x}' in latex(exp(-x)/2).replace(' ', '')  # Remove Whitespace
1028. 
1029.     # Testing just e^{-x} in case future changes alter behavior of muls or fracs
1030.     # In particular current output is \frac{1}{2}e^{- x} but perhaps this will
1031.     # change to \frac{e^{-x}}{2}
1032. 
1033.     # Testing general, non-exp, power
1034.     assert '3^{-x}' in latex(3**-x/2).replace(' ', '')
1035. 
1036. 
1037. def test_noncommutative():
1038.     A, B, C = symbols('A,B,C', commutative=False)
1039. 
1040.     assert latex(A*B*C**-1) == "A B C^{-1}"
1041.     assert latex(C**-1*A*B) == "C^{-1} A B"
1042.     assert latex(A*C**-1*B) == "A C^{-1} B"
1043. 
1044. 
1045. def test_latex_order():
1046.     expr = x**3 + x**2*y + 3*x*y**3 + y**4
1047. 
1048.     assert latex(expr, order='lex') == "x^{3} + x^{2} y + 3 x y^{3} + y^{4}"
1049.     assert latex(
1050.         expr, order='rev-lex') == "y^{4} + 3 x y^{3} + x^{2} y + x^{3}"
1051. 
1052. 
1053. def test_latex_Lambda():
1054.     assert latex(Lambda(x, x + 1)) == \
1055.         r"\left( x \mapsto x + 1 \right)"
1056.     assert latex(Lambda((x, y), x + 1)) == \
1057.         r"\left( \left ( x, \quad y\right ) \mapsto x + 1 \right)"
1058. 
1059. 
1060. def test_latex_PolyElement():
1061.     Ruv, u,v = ring("u,v", ZZ)
1062.     Rxyz, x,y,z = ring("x,y,z", Ruv)
1063. 
1064.     assert latex(x - x) == r"0"
1065.     assert latex(x - 1) == r"x - 1"
1066.     assert latex(x + 1) == r"x + 1"
1067. 
1068.     assert latex((u**2 + 3*u*v + 1)*x**2*y + u + 1) == r"\left({u}^{2} + 3 u v + 1\right) {x}^{2} y + u + 1"
1069.     assert latex((u**2 + 3*u*v + 1)*x**2*y + (u + 1)*x) == r"\left({u}^{2} + 3 u v + 1\right) {x}^{2} y + \left(u + 1\right) x"
1070.     assert latex((u**2 + 3*u*v + 1)*x**2*y + (u + 1)*x + 1) == r"\left({u}^{2} + 3 u v + 1\right) {x}^{2} y + \left(u + 1\right) x + 1"
1071.     assert latex((-u**2 + 3*u*v - 1)*x**2*y - (u + 1)*x - 1) == r"-\left({u}^{2} - 3 u v + 1\right) {x}^{2} y - \left(u + 1\right) x - 1"
1072. 
1073.     assert latex(-(v**2 + v + 1)*x + 3*u*v + 1) == r"-\left({v}^{2} + v + 1\right) x + 3 u v + 1"
1074.     assert latex(-(v**2 + v + 1)*x - 3*u*v + 1) == r"-\left({v}^{2} + v + 1\right) x - 3 u v + 1"
1075. 
1076. 
1077. def test_latex_FracElement():
1078.     Fuv, u,v = field("u,v", ZZ)
1079.     Fxyzt, x,y,z,t = field("x,y,z,t", Fuv)
1080. 
1081.     assert latex(x - x) == r"0"
1082.     assert latex(x - 1) == r"x - 1"
1083.     assert latex(x + 1) == r"x + 1"
1084. 
1085.     assert latex(x/3) == r"\frac{x}{3}"
1086.     assert latex(x/z) == r"\frac{x}{z}"
1087.     assert latex(x*y/z) == r"\frac{x y}{z}"
1088.     assert latex(x/(z*t)) == r"\frac{x}{z t}"
1089.     assert latex(x*y/(z*t)) == r"\frac{x y}{z t}"
1090. 
1091.     assert latex((x - 1)/y) == r"\frac{x - 1}{y}"
1092.     assert latex((x + 1)/y) == r"\frac{x + 1}{y}"
1093.     assert latex((-x - 1)/y) == r"\frac{-x - 1}{y}"
1094.     assert latex((x + 1)/(y*z)) == r"\frac{x + 1}{y z}"
1095.     assert latex(-y/(x + 1)) == r"\frac{-y}{x + 1}"
1096.     assert latex(y*z/(x + 1)) == r"\frac{y z}{x + 1}"
1097. 
1098.     assert latex(((u + 1)*x*y + 1)/((v - 1)*z - 1)) == r"\frac{\left(u + 1\right) x y + 1}{\left(v - 1\right) z - 1}"
1099.     assert latex(((u + 1)*x*y + 1)/((v - 1)*z - t*u*v - 1)) == r"\frac{\left(u + 1\right) x y + 1}{\left(v - 1\right) z - u v t - 1}"
1100. 
1101. 
1102. def test_latex_Poly():
1103.     assert latex(Poly(x**2 + 2 * x, x)) == \
1104.         r"\operatorname{Poly}{\left( x^{2} + 2 x, x, domain=\mathbb{Z} \right)}"
1105.     assert latex(Poly(x/y, x)) == \
1106.         r"\operatorname{Poly}{\left( \frac{x}{y}, x, domain=\mathbb{Z}\left(y\right) \right)}"
1107.     assert latex(Poly(2.0*x + y)) == \
1108.         r"\operatorname{Poly}{\left( 2.0 x + 1.0 y, x, y, domain=\mathbb{R} \right)}"
1109. 
1110. 
1111. def test_latex_ComplexRootOf():
1112.     assert latex(rootof(x**5 + x + 3, 0)) == \
1113.         r"\operatorname{CRootOf} {\left(x^{5} + x + 3, 0\right)}"
1114. 
1115. 
1116. def test_latex_RootSum():
1117.     assert latex(RootSum(x**5 + x + 3, sin)) == \
1118.         r"\operatorname{RootSum} {\left(x^{5} + x + 3, \left( x \mapsto \sin{\left (x \right )} \right)\right)}"
1119. 
1120. 
1121. def test_settings():
1122.     raises(TypeError, lambda: latex(x*y, method="garbage"))
1123. 
1124. 
1125. def test_latex_numbers():
1126.     assert latex(catalan(n)) == r"C_{n}"
1127.     assert latex(catalan(n)**2) == r"C_{n}^{2}"
1128. 
1129. 
1130. def test_latex_euler():
1131.     assert latex(euler(n)) == r"E_{n}"
1132.     assert latex(euler(n, x)) == r"E_{n}\left(x\right)"
1133.     assert latex(euler(n, x)**2) == r"E_{n}^{2}\left(x\right)"
1134. 
1135. 
1136. def test_lamda():
1137.     assert latex(Symbol('lamda')) == r"\lambda"
1138.     assert latex(Symbol('Lamda')) == r"\Lambda"
1139. 
1140. 
1141. def test_custom_symbol_names():
1142.     x = Symbol('x')
1143.     y = Symbol('y')
1144.     assert latex(x) == "x"
1145.     assert latex(x, symbol_names={x: "x_i"}) == "x_i"
1146.     assert latex(x + y, symbol_names={x: "x_i"}) == "x_i + y"
1147.     assert latex(x**2, symbol_names={x: "x_i"}) == "x_i^{2}"
1148.     assert latex(x + y, symbol_names={x: "x_i", y: "y_j"}) == "x_i + y_j"
1149. 
1150. 
1151. def test_matAdd():
1152.     from sympy import MatrixSymbol
1153.     from sympy.printing.latex import LatexPrinter
1154.     C = MatrixSymbol('C', 5, 5)
1155.     B = MatrixSymbol('B', 5, 5)
1156.     l = LatexPrinter()
1157.     assert l._print_MatAdd(C - 2*B) in ['-2 B + C', 'C -2 B']
1158.     assert l._print_MatAdd(C + 2*B) in ['2 B + C', 'C + 2 B']
1159.     assert l._print_MatAdd(B - 2*C) in ['B -2 C', '-2 C + B']
1160.     assert l._print_MatAdd(B + 2*C) in ['B + 2 C', '2 C + B']
1161. 
1162. 
1163. def test_matMul():
1164.     from sympy import MatrixSymbol
1165.     from sympy.printing.latex import LatexPrinter
1166.     A = MatrixSymbol('A', 5, 5)
1167.     B = MatrixSymbol('B', 5, 5)
1168.     x = Symbol('x')
1169.     l = LatexPrinter()
1170.     assert l._print_MatMul(2*A) == '2 A'
1171.     assert l._print_MatMul(2*x*A) == '2 x A'
1172.     assert l._print_MatMul(-2*A) == '-2 A'
1173.     assert l._print_MatMul(1.5*A) == '1.5 A'
1174.     assert l._print_MatMul(sqrt(2)*A) == r'\sqrt{2} A'
1175.     assert l._print_MatMul(-sqrt(2)*A) == r'- \sqrt{2} A'
1176.     assert l._print_MatMul(2*sqrt(2)*x*A) == r'2 \sqrt{2} x A'
1177.     assert l._print_MatMul(-2*A*(A + 2*B)) in [r'-2 A \left(A + 2 B\right)',
1178.         r'-2 A \left(2 B + A\right)']
1179. 
1180. 
1181. def test_latex_MatrixSlice():
1182.     from sympy.matrices.expressions import MatrixSymbol
1183.     assert latex(MatrixSymbol('X', 10, 10)[:5, 1:9:2]) == \
1184.             r'X\left[:5, 1:9:2\right]'
1185.     assert latex(MatrixSymbol('X', 10, 10)[5, :5:2]) == \
1186.             r'X\left[5, :5:2\right]'
1187. 
1188. 
1189. def test_latex_RandomDomain():
1190.     from sympy.stats import Normal, Die, Exponential, pspace, where
1191.     X = Normal('x1', 0, 1)
1192.     assert latex(where(X > 0)) == r"Domain: 0 < x_{1} \wedge x_{1} < \infty"
1193. 
1194.     D = Die('d1', 6)
1195.     assert latex(where(D > 4)) == r"Domain: d_{1} = 5 \vee d_{1} = 6"
1196. 
1197.     A = Exponential('a', 1)
1198.     B = Exponential('b', 1)
1199.     assert latex(
1200.         pspace(Tuple(A, B)).domain) == \
1201.         r"Domain: 0 \leq a \wedge 0 \leq b \wedge a < \infty \wedge b < \infty"
1202. 
1203. 
1204. def test_PrettyPoly():
1205.     from sympy.polys.domains import QQ
1206.     F = QQ.frac_field(x, y)
1207.     R = QQ[x, y]
1208. 
1209.     assert latex(F.convert(x/(x + y))) == latex(x/(x + y))
1210.     assert latex(R.convert(x + y)) == latex(x + y)
1211. 
1212. 
1213. def test_integral_transforms():
1214.     x = Symbol("x")
1215.     k = Symbol("k")
1216.     f = Function("f")
1217.     a = Symbol("a")
1218.     b = Symbol("b")
1219. 
1220.     assert latex(MellinTransform(f(x), x, k)) == r"\mathcal{M}_{x}\left[f{\left (x \right )}\right]\left(k\right)"
1221.     assert latex(InverseMellinTransform(f(k), k, x, a, b)) == r"\mathcal{M}^{-1}_{k}\left[f{\left (k \right )}\right]\left(x\right)"
1222. 
1223.     assert latex(LaplaceTransform(f(x), x, k)) == r"\mathcal{L}_{x}\left[f{\left (x \right )}\right]\left(k\right)"
1224.     assert latex(InverseLaplaceTransform(f(k), k, x, (a, b))) == r"\mathcal{L}^{-1}_{k}\left[f{\left (k \right )}\right]\left(x\right)"
1225. 
1226.     assert latex(FourierTransform(f(x), x, k)) == r"\mathcal{F}_{x}\left[f{\left (x \right )}\right]\left(k\right)"
1227.     assert latex(InverseFourierTransform(f(k), k, x)) == r"\mathcal{F}^{-1}_{k}\left[f{\left (k \right )}\right]\left(x\right)"
1228. 
1229.     assert latex(CosineTransform(f(x), x, k)) == r"\mathcal{COS}_{x}\left[f{\left (x \right )}\right]\left(k\right)"
1230.     assert latex(InverseCosineTransform(f(k), k, x)) == r"\mathcal{COS}^{-1}_{k}\left[f{\left (k \right )}\right]\left(x\right)"
1231. 
1232.     assert latex(SineTransform(f(x), x, k)) == r"\mathcal{SIN}_{x}\left[f{\left (x \right )}\right]\left(k\right)"
1233.     assert latex(InverseSineTransform(f(k), k, x)) == r"\mathcal{SIN}^{-1}_{k}\left[f{\left (k \right )}\right]\left(x\right)"
1234. 
1235. 
1236. def test_PolynomialRingBase():
1237.     from sympy.polys.domains import QQ
1238.     assert latex(QQ.old_poly_ring(x, y)) == r"\mathbb{Q}\left[x, y\right]"
1239.     assert latex(QQ.old_poly_ring(x, y, order="ilex")) == \
1240.         r"S_<^{-1}\mathbb{Q}\left[x, y\right]"
1241. 
1242. 
1243. def test_categories():
1244.     from sympy.categories import (Object, IdentityMorphism,
1245.         NamedMorphism, Category, Diagram, DiagramGrid)
1246. 
1247.     A1 = Object("A1")
1248.     A2 = Object("A2")
1249.     A3 = Object("A3")
1250. 
1251.     f1 = NamedMorphism(A1, A2, "f1")
1252.     f2 = NamedMorphism(A2, A3, "f2")
1253.     id_A1 = IdentityMorphism(A1)
1254. 
1255.     K1 = Category("K1")
1256. 
1257.     assert latex(A1) == "A_{1}"
1258.     assert latex(f1) == "f_{1}:A_{1}\\rightarrow A_{2}"
1259.     assert latex(id_A1) == "id:A_{1}\\rightarrow A_{1}"
1260.     assert latex(f2*f1) == "f_{2}\\circ f_{1}:A_{1}\\rightarrow A_{3}"
1261. 
1262.     assert latex(K1) == r"\mathbf{K_{1}}"
1263. 
1264.     d = Diagram()
1265.     assert latex(d) == r"\emptyset"
1266. 
1267.     d = Diagram({f1: "unique", f2: S.EmptySet})
1268.     assert latex(d) == r"\left \{ f_{2}\circ f_{1}:A_{1}" \
1269.         r"\rightarrow A_{3} : \emptyset, \quad id:A_{1}\rightarrow " \
1270.         r"A_{1} : \emptyset, \quad id:A_{2}\rightarrow A_{2} : " \
1271.         r"\emptyset, \quad id:A_{3}\rightarrow A_{3} : \emptyset, " \
1272.         r"\quad f_{1}:A_{1}\rightarrow A_{2} : \left\{unique\right\}, " \
1273.         r"\quad f_{2}:A_{2}\rightarrow A_{3} : \emptyset\right \}"
1274. 
1275.     d = Diagram({f1: "unique", f2: S.EmptySet}, {f2 * f1: "unique"})
1276.     assert latex(d) == r"\left \{ f_{2}\circ f_{1}:A_{1}" \
1277.         r"\rightarrow A_{3} : \emptyset, \quad id:A_{1}\rightarrow " \
1278.         r"A_{1} : \emptyset, \quad id:A_{2}\rightarrow A_{2} : " \
1279.         r"\emptyset, \quad id:A_{3}\rightarrow A_{3} : \emptyset, " \
1280.         r"\quad f_{1}:A_{1}\rightarrow A_{2} : \left\{unique\right\}," \
1281.         r" \quad f_{2}:A_{2}\rightarrow A_{3} : \emptyset\right \}" \
1282.         r"\Longrightarrow \left \{ f_{2}\circ f_{1}:A_{1}" \
1283.         r"\rightarrow A_{3} : \left\{unique\right\}\right \}"
1284. 
1285.     # A linear diagram.
1286.     A = Object("A")
1287.     B = Object("B")
1288.     C = Object("C")
1289.     f = NamedMorphism(A, B, "f")
1290.     g = NamedMorphism(B, C, "g")
1291.     d = Diagram([f, g])
1292.     grid = DiagramGrid(d)
1293. 
1294.     assert latex(grid) == "\\begin{array}{cc}\n" \
1295.         "A & B \\\\\n" \
1296.         " & C \n" \
1297.         "\\end{array}\n"
1298. 
1299. 
1300. def test_Modules():
1301.     from sympy.polys.domains import QQ
1302.     from sympy.polys.agca import homomorphism
1303. 
1304.     R = QQ.old_poly_ring(x, y)
1305.     F = R.free_module(2)
1306.     M = F.submodule([x, y], [1, x**2])
1307. 
1308.     assert latex(F) == r"{\mathbb{Q}\left[x, y\right]}^{2}"
1309.     assert latex(M) == \
1310.         r"\left< {\left[ {x},{y} \right]},{\left[ {1},{x^{2}} \right]} \right>"
1311. 
1312.     I = R.ideal(x**2, y)
1313.     assert latex(I) == r"\left< {x^{2}},{y} \right>"
1314. 
1315.     Q = F / M
1316.     assert latex(Q) == r"\frac{{\mathbb{Q}\left[x, y\right]}^{2}}{\left< {\left[ {x},{y} \right]},{\left[ {1},{x^{2}} \right]} \right>}"
1317.     assert latex(Q.submodule([1, x**3/2], [2, y])) == \
1318.         r"\left< {{\left[ {1},{\frac{x^{3}}{2}} \right]} + {\left< {\left[ {x},{y} \right]},{\left[ {1},{x^{2}} \right]} \right>}},{{\left[ {2},{y} \right]} + {\left< {\left[ {x},{y} \right]},{\left[ {1},{x^{2}} \right]} \right>}} \right>"
1319. 
1320.     h = homomorphism(QQ.old_poly_ring(x).free_module(2), QQ.old_poly_ring(x).free_module(2), [0, 0])
1321. 
1322.     assert latex(h) == r"{\left[\begin{matrix}0 & 0\\0 & 0\end{matrix}\right]} : {{\mathbb{Q}\left[x\right]}^{2}} \to {{\mathbb{Q}\left[x\right]}^{2}}"
1323. 
1324. 
1325. def test_QuotientRing():
1326.     from sympy.polys.domains import QQ
1327.     R = QQ.old_poly_ring(x)/[x**2 + 1]
1328. 
1329.     assert latex(
1330.         R) == r"\frac{\mathbb{Q}\left[x\right]}{\left< {x^{2} + 1} \right>}"
1331.     assert latex(R.one) == r"{1} + {\left< {x^{2} + 1} \right>}"
1332. 
1333. 
1334. def test_Tr():
1335.     #TODO: Handle indices
1336.     A, B = symbols('A B', commutative=False)
1337.     t = Tr(A*B)
1338.     assert latex(t) == r'\mbox{Tr}\left(A B\right)'
1339. 
1340. 
1341. def test_Adjoint():
1342.     from sympy.matrices import MatrixSymbol, Adjoint, Inverse, Transpose
1343.     X = MatrixSymbol('X', 2, 2)
1344.     Y = MatrixSymbol('Y', 2, 2)
1345.     assert latex(Adjoint(X)) == r'X^\dagger'
1346.     assert latex(Adjoint(X + Y)) == r'\left(X + Y\right)^\dagger'
1347.     assert latex(Adjoint(X) + Adjoint(Y)) == r'X^\dagger + Y^\dagger'
1348.     assert latex(Adjoint(X*Y)) == r'\left(X Y\right)^\dagger'
1349.     assert latex(Adjoint(Y)*Adjoint(X)) == r'Y^\dagger X^\dagger'
1350.     assert latex(Adjoint(X**2)) == r'\left(X^{2}\right)^\dagger'
1351.     assert latex(Adjoint(X)**2) == r'\left(X^\dagger\right)^{2}'
1352.     assert latex(Adjoint(Inverse(X))) == r'\left(X^{-1}\right)^\dagger'
1353.     assert latex(Inverse(Adjoint(X))) == r'\left(X^\dagger\right)^{-1}'
1354.     assert latex(Adjoint(Transpose(X))) == r'\left(X^T\right)^\dagger'
1355.     assert latex(Transpose(Adjoint(X))) == r'\left(X^\dagger\right)^T'
1356. 
1357. 
1358. def test_Hadamard():
1359.     from sympy.matrices import MatrixSymbol, HadamardProduct
1360.     X = MatrixSymbol('X', 2, 2)
1361.     Y = MatrixSymbol('Y', 2, 2)
1362.     assert latex(HadamardProduct(X, Y*Y)) == r'X \circ \left(Y Y\right)'
1363.     assert latex(HadamardProduct(X, Y)*Y) == r'\left(X \circ Y\right) Y'
1364. 
1365. 
1366. def test_ZeroMatrix():
1367.     from sympy import ZeroMatrix
1368.     assert latex(ZeroMatrix(1, 1)) == r"\mathbb{0}"
1369. 
1370. 
1371. def test_boolean_args_order():
1372.     syms = symbols('a:f')
1373. 
1374.     expr = And(*syms)
1375.     assert latex(expr) == 'a \\wedge b \\wedge c \\wedge d \\wedge e \\wedge f'
1376. 
1377.     expr = Or(*syms)
1378.     assert latex(expr) == 'a \\vee b \\vee c \\vee d \\vee e \\vee f'
1379. 
1380.     expr = Equivalent(*syms)
1381.     assert latex(expr) == 'a \\equiv b \\equiv c \\equiv d \\equiv e \\equiv f'
1382. 
1383.     expr = Xor(*syms)
1384.     assert latex(expr) == 'a \\veebar b \\veebar c \\veebar d \\veebar e \\veebar f'
1385. 
1386. 
1387. def test_imaginary():
1388.     i = sqrt(-1)
1389.     assert latex(i) == r'i'
1390. 
1391. 
1392. def test_builtins_without_args():
1393.     assert latex(sin) == r'\sin'
1394.     assert latex(cos) == r'\cos'
1395.     assert latex(tan) == r'\tan'
1396.     assert latex(log) == r'\log'
1397.     assert latex(Ei) == r'\operatorname{Ei}'
1398.     assert latex(zeta) == r'\zeta'
1399. 
1400. 
1401. def test_latex_greek_functions():
1402.     # bug because capital greeks that have roman equivalents should not use
1403.     # \Alpha, \Beta, \Eta, etc.
1404.     s = Function('Alpha')
1405.     assert latex(s) == r'A'
1406.     assert latex(s(x)) == r'A{\left (x \right )}'
1407.     s = Function('Beta')
1408.     assert latex(s) == r'B'
1409.     s = Function('Eta')
1410.     assert latex(s) == r'H'
1411.     assert latex(s(x)) == r'H{\left (x \right )}'
1412. 
1413.     # bug because sympy.core.numbers.Pi is special
1414.     p = Function('Pi')
1415.     # assert latex(p(x)) == r'\Pi{\left (x \right )}'
1416.     assert latex(p) == r'\Pi'
1417. 
1418.     # bug because not all greeks are included
1419.     c = Function('chi')
1420.     assert latex(c(x)) == r'\chi{\left (x \right )}'
1421.     assert latex(c) == r'\chi'
1422. 
1423. 
1424. def test_translate():
1425.     s = 'Alpha'
1426.     assert translate(s) == 'A'
1427.     s = 'Beta'
1428.     assert translate(s) == 'B'
1429.     s = 'Eta'
1430.     assert translate(s) == 'H'
1431.     s = 'omicron'
1432.     assert translate(s) == 'o'
1433.     s = 'Pi'
1434.     assert translate(s) == r'\Pi'
1435.     s = 'pi'
1436.     assert translate(s) == r'\pi'
1437.     s = 'LamdaHatDOT'
1438.     assert translate(s) == r'\dot{\hat{\Lambda}}'
1439. 
1440. 
1441. def test_other_symbols():
1442.     from sympy.printing.latex import other_symbols
1443.     for s in other_symbols:
1444.         assert latex(symbols(s)) == "\\"+s
1445. 
1446. 
1447. def test_modifiers():
1448.     # Test each modifier individually in the simplest case (with funny capitalizations)
1449.     assert latex(symbols("xMathring")) == r"\mathring{x}"
1450.     assert latex(symbols("xCheck")) == r"\check{x}"
1451.     assert latex(symbols("xBreve")) == r"\breve{x}"
1452.     assert latex(symbols("xAcute")) == r"\acute{x}"
1453.     assert latex(symbols("xGrave")) == r"\grave{x}"
1454.     assert latex(symbols("xTilde")) == r"\tilde{x}"
1455.     assert latex(symbols("xPrime")) == r"{x}'"
1456.     assert latex(symbols("xddDDot")) == r"\ddddot{x}"
1457.     assert latex(symbols("xDdDot")) == r"\dddot{x}"
1458.     assert latex(symbols("xDDot")) == r"\ddot{x}"
1459.     assert latex(symbols("xBold")) == r"\boldsymbol{x}"
1460.     assert latex(symbols("xnOrM")) == r"\left\|{x}\right\|"
1461.     assert latex(symbols("xAVG")) == r"\left\langle{x}\right\rangle"
1462.     assert latex(symbols("xHat")) == r"\hat{x}"
1463.     assert latex(symbols("xDot")) == r"\dot{x}"
1464.     assert latex(symbols("xBar")) == r"\bar{x}"
1465.     assert latex(symbols("xVec")) == r"\vec{x}"
1466.     assert latex(symbols("xAbs")) == r"\left|{x}\right|"
1467.     assert latex(symbols("xMag")) == r"\left|{x}\right|"
1468.     assert latex(symbols("xPrM")) == r"{x}'"
1469.     assert latex(symbols("xBM")) == r"\boldsymbol{x}"
1470.     # Test strings that are *only* the names of modifiers
1471.     assert latex(symbols("Mathring")) == r"Mathring"
1472.     assert latex(symbols("Check")) == r"Check"
1473.     assert latex(symbols("Breve")) == r"Breve"
1474.     assert latex(symbols("Acute")) == r"Acute"
1475.     assert latex(symbols("Grave")) == r"Grave"
1476.     assert latex(symbols("Tilde")) == r"Tilde"
1477.     assert latex(symbols("Prime")) == r"Prime"
1478.     assert latex(symbols("DDot")) == r"\dot{D}"
1479.     assert latex(symbols("Bold")) == r"Bold"
1480.     assert latex(symbols("NORm")) == r"NORm"
1481.     assert latex(symbols("AVG")) == r"AVG"
1482.     assert latex(symbols("Hat")) == r"Hat"
1483.     assert latex(symbols("Dot")) == r"Dot"
1484.     assert latex(symbols("Bar")) == r"Bar"
1485.     assert latex(symbols("Vec")) == r"Vec"
1486.     assert latex(symbols("Abs")) == r"Abs"
1487.     assert latex(symbols("Mag")) == r"Mag"
1488.     assert latex(symbols("PrM")) == r"PrM"
1489.     assert latex(symbols("BM")) == r"BM"
1490.     assert latex(symbols("hbar")) == r"\hbar"
1491.     # Check a few combinations
1492.     assert latex(symbols("xvecdot")) == r"\dot{\vec{x}}"
1493.     assert latex(symbols("xDotVec")) == r"\vec{\dot{x}}"
1494.     assert latex(symbols("xHATNorm")) == r"\left\|{\hat{x}}\right\|"
1495.     # Check a couple big, ugly combinations
1496.     assert latex(symbols('xMathringBm_yCheckPRM__zbreveAbs')) == r"\boldsymbol{\mathring{x}}^{\left|{\breve{z}}\right|}_{{\check{y}}'}"
1497.     assert latex(symbols('alphadothat_nVECDOT__tTildePrime')) == r"\hat{\dot{\alpha}}^{{\tilde{t}}'}_{\dot{\vec{n}}}"
1498. 
1499. 
1500. def test_greek_symbols():
1501.     assert latex(Symbol('alpha'))   == r'\alpha'

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 20:59:44,786 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is asking for test cases for the `mul_symbol` setting in the `latex` function.\n   - This context shows a basic test case where `mul_symbol` is set to 'dot' for a simple multiplication expression `2*x*y`.\n2. Extended relevance:\n   - This is a fundamental test case within the `test_latex_basic` function, demonstrating the primary functionality of the `mul_symbol` argument.", relative_path='sympy/printing/tests/test_latex.py', start_line=64, end_line=66), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user is looking for test cases related to the `mul_symbol` setting.\n   - This context provides test cases for `mul_symbol` with 'dot' and 'times' values when dealing with floating-point numbers in scientific notation.\n2. Extended relevance:\n   - This demonstrates how `mul_symbol` interacts with SymPy's handling of floats and scientific notation, providing a more complex scenario than simple variable multiplication.", relative_path='sympy/printing/tests/test_latex.py', start_line=100, end_line=103), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants to see how `mul_symbol` is tested.\n   - This context is a dedicated test function `test_latex_mul_symbol` that explicitly tests various values for `mul_symbol` ('times', 'dot', 'ldot').\n2. Extended relevance:\n   - This function provides a comprehensive overview of the expected behavior for different `mul_symbol` options, making it a highly relevant example of the existing test patterns for this specific setting.", relative_path='sympy/printing/tests/test_latex.py', start_line=985, end_line=994)]
2025-12-21 20:59:44,789 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 3 contexts to memory for query: Please provide the full content of the file sympy/printing/tests/test_latex.py.
2025-12-21 20:59:44,789 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 20:59:44,789 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 20:59:44,790 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 3 new contexts to 0 existing contexts
2025-12-21 20:59:44,790 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-21 20:59:44,791 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.rst
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── gotchas.rst
|       ├── guide.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   └── sparse.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   └── tensor.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   ├── runtests.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── python-comparisons.rst
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   └── release.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── ffunctions.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_ffunctions.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── evaluate.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_eval_power.py
    |   |   ├── test_evalf.py
    |   |   ├── test_evaluate.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_class_registry.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_1_2.py
    |   |   |   ├── test_1_3.py
    |   |   |   ├── test_1_4.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   └── dpll2.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── blockmatrix.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── immutable.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_commonmatrix.py
    |       ├── test_densearith.py
    |       ├── test_densesolve.py
    |       ├── test_densetools.py
    |       ├── test_immutable.py
    |       ├── test_interactions.py
    |       ├── test_matrices.py
    |       ├── test_normalforms.py
    |       ├── test_sparse.py
    |       └── test_sparsetools.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── egyptian_fraction.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sympy_parser.py
    |   ├── sympy_tokenize.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── unitsystems.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_plot.py
    |   |   └── test_plot_implicit.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   └── test_theanocode.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine.py
    |   ├── inequalities.py
    |   ├── ode.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_diophantine.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_ode.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_mix.py
    |       ├── test_rv.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_functions.py
    |       ├── test_index_methods.py
    |       ├── test_indexed.py
    |       └── test_tensor.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_module_imports.py
    |   |   ├── test_pickling.py
    |   |   ├── test_pytest.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   └── timeutils.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: latex() and mul_symbol

Description: The `latex()` pretty-printing function accepts a `mul_symbol` kwarg that must be one of four choices. I would like to be able to supply my own choice which is not in the list. Specifically, I want the multiplication symbol to be `\,` (i.e., a thin space). This is what I mean
```
>>> latex(3*x**2*y)
'3 \\, x^{2} \\, y' # I typed the thin spaces in after the fact
```

Thin spaces are used by sympy to separate differentials from integrands in integrals.
```
>>> latex(Integral(2*x**2*y, x))
'\\int 2 x^{2} y\\, dx' # This thin space is sympy's current behavior
```

Is there a reason why the user cannot supply the `mul_symbol` of their choosing? Or are the 4 choices a historical artifact? I'm willing to attempt making a PR to allow `mul_symbol` to be arbitrary (and backwards-compatible) if such a PR would be considered.

Patch information:
diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py
index ad4d7d9613..41c4fd9b3a 100644
--- a/sympy/printing/latex.py
+++ b/sympy/printing/latex.py
@@ -156,11 +156,29 @@ def __init__(self, settings=None):
             "times": r" \times "
         }
 
-        self._settings['mul_symbol_latex'] = \
-            mul_symbol_table[self._settings['mul_symbol']]
+        mul_symbol_setting = self._settings.get('mul_symbol')
 
-        self._settings['mul_symbol_latex_numbers'] = \
-            mul_symbol_table[self._settings['mul_symbol'] or 'dot']
+        if mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex = " %s " % mul_symbol_setting
+        elif mul_symbol_setting is None:
+            mul_symbol_latex = mul_symbol_table[None]
+        else:
+            raise ValueError("'mul_symbol' must be None, one of 'ldot', 'dot', 'times', or a LaTeX string")
+
+        self._settings['mul_symbol_latex'] = mul_symbol_latex
+
+        if mul_symbol_setting is None:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+        elif mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex_numbers = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex_numbers = " %s " % mul_symbol_setting
+        else:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+
+        self._settings['mul_symbol_latex_numbers'] = mul_symbol_latex_numbers
 
         self._delim_dict = {'(': ')', '[': ']'}
 
@@ -2155,7 +2173,9 @@ def latex(expr, **settings):
     \frac{1}{2 \pi} \int r\, dr
 
     mul_symbol: The symbol to use for multiplication. Can be one of None,
-    "ldot", "dot", or "times".
+    "ldot", "dot", "times", or any custom LaTeX string (e.g., "\\,").
+    For readability, the separator is inserted with surrounding spaces between factors
+    and between numbers (except when mul_symbol is None, in which case numbers still use a dot).
 
     >>> print(latex((2*tau)**sin(Rational(7,2)), mul_symbol="times"))
     \left(2 \times \tau\right)^{\sin{\left (\frac{7}{2} \right )}}


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file sympy/printing/tests/test_latex.py.
Extra Requirements: 
Purpose: I need to find 3 relevant test cases that demonstrate how the `mul_symbol` setting is currently tested in the `latex` function to understand the existing test patterns.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/printing/tests/test_latex.py
Line number range: 64 - 66
Content:
64.     assert latex(2*x*y) == "2 x y"
65.     assert latex(2*x*y, mul_symbol='dot') == r"2 \cdot x \cdot y"
66. 


File: sympy/printing/tests/test_latex.py
Line number range: 100 - 103
Content:
100.     assert latex(1.5e20*x) == r"1.5 \cdot 10^{20} x"
101.     assert latex(1.5e20*x, mul_symbol='dot') == r"1.5 \cdot 10^{20} \cdot x"
102.     assert latex(1.5e20*x, mul_symbol='times') == r"1.5 \times 10^{20} \times x"
103. 


File: sympy/printing/tests/test_latex.py
Line number range: 985 - 994
Content:
985. def test_latex_mul_symbol():
986.     assert latex(4*4**x, mul_symbol='times') == "4 \\times 4^{x}"
987.     assert latex(4*4**x, mul_symbol='dot') == "4 \\cdot 4^{x}"
988.     assert latex(4*4**x, mul_symbol='ldot') == r"4 \,.\, 4^{x}"
989. 
990.     assert latex(4*x, mul_symbol='times') == "4 \\times x"
991.     assert latex(4*x, mul_symbol='dot') == "4 \\cdot x"
992.     assert latex(4*x, mul_symbol='ldot') == r"4 \,.\, x"
993. 
994. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 21:00:03,581 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants three complete test cases, but the current context only provides snippets. I have the body of one test function, `test_latex_mul_symbol`, but I am missing the necessary imports. For the other two snippets, I am missing both the imports and the surrounding test function definitions. To provide complete and self-contained test cases, I need to retrieve this missing information.' query='Please provide the import statements from `sympy/printing/tests/test_latex.py`, and the full source code for the test functions containing the code on lines 64-66 and 100-103.' extra_requirements='If the full source for the functions is not available, please provide at least 20 lines of context before and after the specified line ranges.' purpose='This information is necessary to construct three complete and self-contained test cases as requested by the user, including all imports, setup, and assertions.'
2025-12-21 21:00:03,582 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the import statements from `sympy/printing/tests/test_latex.py`, and the full source code for the test functions containing the code on lines 64-66 and 100-103.
2025-12-21 21:00:03,583 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 21:00:03,583 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 21:00:03,584 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 21:00:03,584 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the import statements from `sympy/printing/tests/test_latex.py`, and the full source code for the test functions containing the code on lines 64-66 and 100-103.
Extra requirements: If the full source for the functions is not available, please provide at least 20 lines of context before and after the specified line ranges.
Purpose: This information is necessary to construct three complete and self-contained test cases as requested by the user, including all imports, setup, and assertions.
2025-12-21 21:00:08,166 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will begin by searching for the `import` statements within the specified file. Following that, I will locate the two test functions based on the line numbers provided in your request. Finally, I will retrieve the complete source code for each of these functions to ensure all necessary context is captured.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 123.0, "start_line": 80.0, "relative_path": "sympy/printing/tests/test_latex.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2167, 'candidates_token_count': 196, 'total_token_count': 2589, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2167}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 196}], 'thoughts_token_count': 226, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1455787249973842, 'model_name': 'gemini-2.5-pro'} id='run--2389687d-f665-4aac-81ee-18ba4cfe861f-0' tool_calls=[{'name': 'find_ast_node_with_type_in_file_with_relative_path', 'args': {'type': 'import_from_statement', 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '3d27b1b7-2e5a-4eec-b4a7-734f93dd2118', 'type': 'tool_call'}, {'name': 'find_ast_node_with_type_in_file_with_relative_path', 'args': {'type': 'import_statement', 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '6e14aba7-f3d7-4eab-a8d0-afaaa2217d42', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'end_line': 86.0, 'start_line': 44.0, 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '0e339fa5-7589-4fca-8c53-8c8feab2e646', 'type': 'tool_call'}, {'name': 'read_code_with_relative_path', 'args': {'end_line': 123.0, 'start_line': 80.0, 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '10cf326b-0bc0-4852-a968-af0324bc3689', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2167, 'output_tokens': 196, 'total_tokens': 2589, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 226}}
2025-12-21 21:00:10,089 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully gathered the required information. I started by extracting all `import` statements from `sympy/printing/tests/test_latex.py` to understand the dependencies. Then, I located the two requested test functions and retrieved their full source code, ensuring all necessary context, including setup and assertions, was captured.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 5115, 'candidates_token_count': 65, 'total_token_count': 5206, 'prompt_tokens_details': [{'modality': 1, 'token_count': 5115}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 65}], 'thoughts_token_count': 26, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1881453147301307, 'model_name': 'gemini-2.5-pro'} id='run--dd24ddba-a938-42a1-af38-3ef11ccdfb9a-0' usage_metadata={'input_tokens': 5115, 'output_tokens': 65, 'total_tokens': 5206, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 26}}
2025-12-21 21:00:10,091 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the import statements from `sympy/printing/tests/test_latex.py`, and the full source code for the test functions containing the code on lines 64-66 and 100-103.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If the full source for the functions is not available, please provide at least 20 lines of context before and after the specified line ranges.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This information is necessary to construct three complete and self-contained test cases as requested by the user, including all imports, setup, and assertions.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/printing/tests/test_latex.py
Line number range: 25 - 25
Content:
from sympy.abc import mu, tau


File: sympy/printing/tests/test_latex.py
Line number range: 33 - 33
Content:
from sympy.logic import Implies


File: sympy/printing/tests/test_latex.py
Line number range: 36 - 36
Content:
from sympy.core.trace import Tr


File: sympy/printing/tests/test_latex.py
Line number range: 37 - 37
Content:
from sympy.core.compatibility import range


File: sympy/printing/tests/test_latex.py
Line number range: 39 - 39
Content:
from sympy import MatrixSymbol


File: sympy/printing/tests/test_latex.py
Line number range: 44 - 86
Content:
44. 
45. 
46. def test_printmethod():
47.     class R(Abs):
48.         def _latex(self, printer):
49.             return "foo(%s)" % printer._print(self.args[0])
50.     assert latex(R(x)) == "foo(x)"
51. 
52.     class R(Abs):
53.         def _latex(self, printer):
54.             return "foo"
55.     assert latex(R(x)) == "foo"
56. 
57. 
58. def test_latex_basic():
59.     assert latex(1 + x) == "x + 1"
60.     assert latex(x**2) == "x^{2}"
61.     assert latex(x**(1 + x)) == "x^{x + 1}"
62.     assert latex(x**3 + x + 1 + x**2) == "x^{3} + x^{2} + x + 1"
63. 
64.     assert latex(2*x*y) == "2 x y"
65.     assert latex(2*x*y, mul_symbol='dot') == r"2 \cdot x \cdot y"
66. 
67.     assert latex(1/x) == r"\frac{1}{x}"
68.     assert latex(1/x, fold_short_frac=True) == "1 / x"
69.     assert latex(-S(3)/2) == r"- \frac{3}{2}"
70.     assert latex(-S(3)/2, fold_short_frac=True) == r"- 3 / 2"
71.     assert latex(1/x**2) == r"\frac{1}{x^{2}}"
72.     assert latex(1/(x + y)/2) == r"\frac{1}{2 \left(x + y\right)}"
73.     assert latex(x/2) == r"\frac{x}{2}"
74.     assert latex(x/2, fold_short_frac=True) == "x / 2"
75.     assert latex((x + y)/(2*x)) == r"\frac{x + y}{2 x}"
76.     assert latex((x + y)/(2*x), fold_short_frac=True) == \
77.         r"\left(x + y\right) / 2 x"
78.     assert latex((x + y)/(2*x), long_frac_ratio=0) == \
79.         r"\frac{1}{2 x} \left(x + y\right)"
80.     assert latex((x + y)/x) == r"\frac{1}{x} \left(x + y\right)"
81.     assert latex((x + y)/x, long_frac_ratio=3) == r"\frac{x + y}{x}"
82. 
83.     assert latex(2*Integral(x, x)/3) == r"\frac{2}{3} \int x\, dx"
84.     assert latex(2*Integral(x, x)/3, fold_short_frac=True) == \
85.         r"\left(2 \int x\, dx\right) / 3"


File: sympy/printing/tests/test_latex.py
Line number range: 80 - 123
Content:
80.     assert latex((x + y)/x) == r"\frac{1}{x} \left(x + y\right)"
81.     assert latex((x + y)/x, long_frac_ratio=3) == r"\frac{x + y}{x}"
82. 
83.     assert latex(2*Integral(x, x)/3) == r"\frac{2}{3} \int x\, dx"
84.     assert latex(2*Integral(x, x)/3, fold_short_frac=True) == \
85.         r"\left(2 \int x\, dx\right) / 3"
86. 
87.     assert latex(sqrt(x)) == r"\sqrt{x}"
88.     assert latex(x**Rational(1, 3)) == r"\sqrt[3]{x}"
89.     assert latex(sqrt(x)**3) == r"x^{\frac{3}{2}}"
90.     assert latex(sqrt(x), itex=True) == r"\sqrt{x}"
91.     assert latex(x**Rational(1, 3), itex=True) == r"\root{3}{x}"
92.     assert latex(sqrt(x)**3, itex=True) == r"x^{\frac{3}{2}}"
93.     assert latex(x**Rational(3, 4)) == r"x^{\frac{3}{4}}"
94.     assert latex(x**Rational(3, 4), fold_frac_powers=True) == "x^{3/4}"
95.     assert latex((x + 1)**Rational(3, 4)) == \
96.         r"\left(x + 1\right)^{\frac{3}{4}}"
97.     assert latex((x + 1)**Rational(3, 4), fold_frac_powers=True) == \
98.         r"\left(x + 1\right)^{3/4}"
99. 
100.     assert latex(1.5e20*x) == r"1.5 \cdot 10^{20} x"
101.     assert latex(1.5e20*x, mul_symbol='dot') == r"1.5 \cdot 10^{20} \cdot x"
102.     assert latex(1.5e20*x, mul_symbol='times') == r"1.5 \times 10^{20} \times x"
103. 
104.     assert latex(1/sin(x)) == r"\frac{1}{\sin{\left (x \right )}}"
105.     assert latex(sin(x)**-1) == r"\frac{1}{\sin{\left (x \right )}}"
106.     assert latex(sin(x)**Rational(3, 2)) == \
107.         r"\sin^{\frac{3}{2}}{\left (x \right )}"
108.     assert latex(sin(x)**Rational(3, 2), fold_frac_powers=True) == \
109.         r"\sin^{3/2}{\left (x \right )}"
110. 
111.     assert latex(~x) == r"\neg x"
112.     assert latex(x & y) == r"x \wedge y"
113.     assert latex(x & y & z) == r"x \wedge y \wedge z"
114.     assert latex(x | y) == r"x \vee y"
115.     assert latex(x | y | z) == r"x \vee y \vee z"
116.     assert latex((x & y) | z) == r"z \vee \left(x \wedge y\right)"
117.     assert latex(Implies(x, y)) == r"x \Rightarrow y"
118.     assert latex(~(x >> ~y)) == r"x \not\Rightarrow \neg y"
119.     assert latex(Implies(Or(x,y), z)) == r"\left(x \vee y\right) \Rightarrow z"
120.     assert latex(Implies(z, Or(x,y))) == r"z \Rightarrow \left(x \vee y\right)"
121. 
122.     assert latex(~x, symbol_names={x: "x_i"}) == r"\neg x_i"
123.     assert latex(x & y, symbol_names={x: "x_i", y: "y_i"}) == \

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 21:00:34,420 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The query asks for import statements from the file `sympy/printing/tests/test_latex.py`.\n   - This context provides one of the requested import statements.\n2. Extended relevance:\n   - This import is necessary to understand the symbols used in the test functions.', relative_path='sympy/printing/tests/test_latex.py', start_line=25, end_line=25), ContextOutput(reasoning='1. Query requirement analysis:\n   - The query asks for import statements from the file `sympy/printing/tests/test_latex.py`.\n   - This context provides one of the requested import statements.\n2. Extended relevance:\n   - This import is necessary to understand the logic functions being tested.', relative_path='sympy/printing/tests/test_latex.py', start_line=33, end_line=33), ContextOutput(reasoning='1. Query requirement analysis:\n   - The query asks for import statements from the file `sympy/printing/tests/test_latex.py`.\n   - This context provides one of the requested import statements.\n2. Extended relevance:\n   - This import is necessary to understand the code being tested.', relative_path='sympy/printing/tests/test_latex.py', start_line=36, end_line=36), ContextOutput(reasoning='1. Query requirement analysis:\n   - The query asks for import statements from the file `sympy/printing/tests/test_latex.py`.\n   - This context provides one of the requested import statements.\n2. Extended relevance:\n   - This import is necessary for compatibility and to understand the code being tested.', relative_path='sympy/printing/tests/test_latex.py', start_line=37, end_line=37), ContextOutput(reasoning='1. Query requirement analysis:\n   - The query asks for import statements from the file `sympy/printing/tests/test_latex.py`.\n   - This context provides one of the requested import statements.\n2. Extended relevance:\n   - This import is necessary to understand the matrix symbols used in the tests.', relative_path='sympy/printing/tests/test_latex.py', start_line=39, end_line=39), ContextOutput(reasoning='1. Query requirement analysis:\n   - The query asks for the full source code for the test functions containing the code on lines 64-66 and 100-103.\n   - This context provides the complete `test_latex_basic` function which contains both of the specified line ranges.\n2. Extended relevance:\n   - Providing the entire function is essential for understanding the test case, including its setup and all its assertions, which is required to construct a complete and self-contained test case.', relative_path='sympy/printing/tests/test_latex.py', start_line=58, end_line=123)]
2025-12-21 21:00:34,423 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 6 contexts to memory for query: Please provide the import statements from `sympy/printing/tests/test_latex.py`, and the full source code for the test functions containing the code on lines 64-66 and 100-103.
2025-12-21 21:00:34,423 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 21:00:34,423 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 21:00:34,423 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 6 new contexts to 3 existing contexts
2025-12-21 21:00:34,424 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 7 total contexts (removed 2 duplicates)
2025-12-21 21:00:34,424 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sympy
├── .ci
|   ├── generate_durations_log.sh
|   └── parse_durations_log.py
├── .travis.yml
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── PULL_REQUEST_TEMPLATE.md
├── README.rst
├── bin
|   ├── ask_update.py
|   ├── authors_update.py
|   ├── coverage_doctest.py
|   ├── coverage_report.py
|   ├── generate_module_list.py
|   ├── generate_test_list.py
|   ├── get_sympy.py
|   ├── mailmap_update.py
|   ├── sympy_time.py
|   ├── sympy_time_cache.py
|   ├── test_import.py
|   ├── test_setup.py
|   └── test_travis.sh
├── conftest.py
├── data
|   └── TeXmacs
|       ├── bin
|       └── progs
├── doc
|   ├── README.rst
|   ├── api
|   |   ├── conf.py
|   |   └── index.rst
|   ├── cheatsheet
|   ├── ext
|   |   ├── docscrape.py
|   |   ├── docscrape_sphinx.py
|   |   ├── numpydoc.py
|   |   └── sympylive.py
|   ├── generate_logos.py
|   ├── man
|   |   └── isympy.xml
|   └── src
|       ├── _static
|       ├── _templates
|       |   └── layout.html
|       ├── aboutus.rst
|       ├── citing.rst
|       ├── conf.py
|       ├── gotchas.rst
|       ├── guide.rst
|       ├── index.rst
|       ├── install.rst
|       ├── logo
|       |   └── info.txt
|       ├── modules
|       |   ├── assumptions
|       |   |   ├── ask.rst
|       |   |   ├── assume.rst
|       |   |   ├── handlers
|       |   |   ├── index.rst
|       |   |   └── refine.rst
|       |   ├── calculus
|       |   |   └── index.rst
|       |   ├── categories.rst
|       |   ├── codegen.rst
|       |   ├── combinatorics
|       |   |   ├── fp_groups.rst
|       |   |   ├── graycode.rst
|       |   |   ├── group_constructs.rst
|       |   |   ├── index.rst
|       |   |   ├── named_groups.rst
|       |   |   ├── partitions.rst
|       |   |   ├── perm_groups.rst
|       |   |   ├── permutations.rst
|       |   |   ├── polyhedron.rst
|       |   |   ├── prufer.rst
|       |   |   ├── subsets.rst
|       |   |   ├── tensor_can.rst
|       |   |   ├── testutil.rst
|       |   |   └── util.rst
|       |   ├── concrete.rst
|       |   ├── core.rst
|       |   ├── crypto.rst
|       |   ├── diffgeom.rst
|       |   ├── evalf.rst
|       |   ├── functions
|       |   |   ├── combinatorial.rst
|       |   |   ├── elementary.rst
|       |   |   ├── index.rst
|       |   |   └── special.rst
|       |   ├── geometry
|       |   |   ├── curves.rst
|       |   |   ├── ellipses.rst
|       |   |   ├── entities.rst
|       |   |   ├── index.rst
|       |   |   ├── lines.rst
|       |   |   ├── plane.rst
|       |   |   ├── points.rst
|       |   |   ├── polygons.rst
|       |   |   └── utils.rst
|       |   ├── holonomic
|       |   |   ├── about.rst
|       |   |   ├── convert.rst
|       |   |   ├── index.rst
|       |   |   ├── operations.rst
|       |   |   ├── represent.rst
|       |   |   └── uses.rst
|       |   ├── index.rst
|       |   ├── integrals
|       |   |   ├── g-functions.rst
|       |   |   └── integrals.rst
|       |   ├── liealgebras
|       |   |   └── index.rst
|       |   ├── logic.rst
|       |   ├── matrices
|       |   |   ├── dense.rst
|       |   |   ├── expressions.rst
|       |   |   ├── immutablematrices.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   └── sparse.rst
|       |   ├── ntheory.rst
|       |   ├── numeric-computation.rst
|       |   ├── parsing.rst
|       |   ├── physics
|       |   |   ├── continuum_mechanics
|       |   |   ├── hep
|       |   |   ├── hydrogen.rst
|       |   |   ├── index.rst
|       |   |   ├── matrices.rst
|       |   |   ├── mechanics
|       |   |   ├── optics
|       |   |   ├── paulialgebra.rst
|       |   |   ├── qho_1d.rst
|       |   |   ├── quantum
|       |   |   ├── secondquant.rst
|       |   |   ├── sho.rst
|       |   |   ├── units
|       |   |   ├── vector
|       |   |   └── wigner.rst
|       |   ├── plotting.rst
|       |   ├── polys
|       |   |   ├── agca.rst
|       |   |   ├── basics.rst
|       |   |   ├── index.rst
|       |   |   ├── internals.rst
|       |   |   ├── literature.rst
|       |   |   ├── reference.rst
|       |   |   ├── ringseries.rst
|       |   |   └── wester.rst
|       |   ├── printing.rst
|       |   ├── rewriting.rst
|       |   ├── series
|       |   |   ├── formal.rst
|       |   |   ├── fourier.rst
|       |   |   ├── index.rst
|       |   |   ├── limitseq.rst
|       |   |   ├── sequences.rst
|       |   |   └── series.rst
|       |   ├── sets.rst
|       |   ├── simplify
|       |   |   ├── hyperexpand.rst
|       |   |   └── simplify.rst
|       |   ├── solvers
|       |   |   ├── diophantine.rst
|       |   |   ├── inequalities.rst
|       |   |   ├── ode.rst
|       |   |   ├── pde.rst
|       |   |   ├── solvers.rst
|       |   |   └── solveset.rst
|       |   ├── stats.rst
|       |   ├── tensor
|       |   |   ├── array.rst
|       |   |   ├── index.rst
|       |   |   ├── index_methods.rst
|       |   |   ├── indexed.rst
|       |   |   └── tensor.rst
|       |   ├── utilities
|       |   |   ├── autowrap.rst
|       |   |   ├── codegen.rst
|       |   |   ├── decorator.rst
|       |   |   ├── enumerative.rst
|       |   |   ├── index.rst
|       |   |   ├── iterables.rst
|       |   |   ├── lambdify.rst
|       |   |   ├── memoization.rst
|       |   |   ├── misc.rst
|       |   |   ├── pkgdata.rst
|       |   |   ├── pytest.rst
|       |   |   ├── randtest.rst
|       |   |   ├── runtests.rst
|       |   |   ├── source.rst
|       |   |   └── timeutils.rst
|       |   └── vector
|       |       ├── api
|       |       ├── basics.rst
|       |       ├── coordsys.rst
|       |       ├── examples.rst
|       |       ├── fields.rst
|       |       ├── index.rst
|       |       └── intro.rst
|       ├── outreach.rst
|       ├── pics
|       ├── python-comparisons.rst
|       ├── special_topics
|       |   ├── finite_diff_derivatives.rst
|       |   ├── index.rst
|       |   └── intro.rst
|       ├── tutorial
|       |   ├── basic_operations.rst
|       |   ├── calculus.rst
|       |   ├── gotchas.rst
|       |   ├── index.rst
|       |   ├── intro.rst
|       |   ├── manipulation.rst
|       |   ├── matrices.rst
|       |   ├── preliminaries.rst
|       |   ├── printing.rst
|       |   ├── simplification.rst
|       |   └── solvers.rst
|       └── wiki.rst
├── examples
|   ├── advanced
|   |   ├── autowrap_integrators.py
|   |   ├── autowrap_ufuncify.py
|   |   ├── curvilinear_coordinates.py
|   |   ├── dense_coding_example.py
|   |   ├── fem.py
|   |   ├── gibbs_phenomenon.py
|   |   ├── grover_example.py
|   |   ├── hydrogen.py
|   |   ├── pidigits.py
|   |   ├── pyglet_plotting.py
|   |   ├── qft.py
|   |   └── relativity.py
|   ├── all.py
|   ├── beginner
|   |   ├── basic.py
|   |   ├── differentiation.py
|   |   ├── expansion.py
|   |   ├── functions.py
|   |   ├── limits_examples.py
|   |   ├── plot_examples.py
|   |   ├── plotting_nice_plot.py
|   |   ├── precision.py
|   |   ├── print_pretty.py
|   |   ├── series.py
|   |   └── substitution.py
|   ├── intermediate
|   |   ├── coupled_cluster.py
|   |   ├── differential_equations.py
|   |   ├── infinite_1d_box.py
|   |   ├── mplot2d.py
|   |   ├── mplot3d.py
|   |   ├── partial_differential_eqs.py
|   |   ├── print_gtk.py
|   |   ├── sample.py
|   |   ├── trees.py
|   |   └── vandermonde.py
|   └── notebooks
|       └── README.txt
├── isympy.py
├── release
|   ├── Dockerfile
|   ├── README.md
|   ├── fabfile.py
|   ├── pull_and_run_rever.sh
|   └── release.sh
├── setup.py
├── setupegg.py
└── sympy
    ├── __init__.py
    ├── abc.py
    ├── algebras
    |   ├── __init__.py
    |   ├── quaternion.py
    |   └── tests
    |       └── test_quaternion.py
    ├── assumptions
    |   ├── __init__.py
    |   ├── ask.py
    |   ├── ask_generated.py
    |   ├── assume.py
    |   ├── handlers
    |   |   ├── __init__.py
    |   |   ├── calculus.py
    |   |   ├── common.py
    |   |   ├── matrices.py
    |   |   ├── ntheory.py
    |   |   ├── order.py
    |   |   └── sets.py
    |   ├── refine.py
    |   ├── satask.py
    |   ├── sathandlers.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_assumptions_2.py
    |       ├── test_context.py
    |       ├── test_matrices.py
    |       ├── test_query.py
    |       ├── test_refine.py
    |       ├── test_satask.py
    |       └── test_sathandlers.py
    ├── benchmarks
    |   ├── __init__.py
    |   ├── bench_discrete_log.py
    |   ├── bench_meijerint.py
    |   └── bench_symbench.py
    ├── calculus
    |   ├── __init__.py
    |   ├── euler.py
    |   ├── finite_diff.py
    |   ├── singularities.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_euler.py
    |   |   ├── test_finite_diff.py
    |   |   ├── test_singularities.py
    |   |   └── test_util.py
    |   └── util.py
    ├── categories
    |   ├── __init__.py
    |   ├── baseclasses.py
    |   ├── diagram_drawing.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_baseclasses.py
    |       └── test_drawing.py
    ├── codegen
    |   ├── __init__.py
    |   ├── ast.py
    |   ├── cfunctions.py
    |   ├── ffunctions.py
    |   ├── rewriting.py
    |   └── tests
    |       ├── test_ast.py
    |       ├── test_cfunctions.py
    |       ├── test_ffunctions.py
    |       └── test_rewriting.py
    ├── combinatorics
    |   ├── __init__.py
    |   ├── coset_table.py
    |   ├── fp_groups.py
    |   ├── free_groups.py
    |   ├── generators.py
    |   ├── graycode.py
    |   ├── group_constructs.py
    |   ├── homomorphisms.py
    |   ├── named_groups.py
    |   ├── partitions.py
    |   ├── perm_groups.py
    |   ├── permutations.py
    |   ├── polyhedron.py
    |   ├── prufer.py
    |   ├── rewritingsystem.py
    |   ├── subsets.py
    |   ├── tensor_can.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_coset_table.py
    |   |   ├── test_fp_groups.py
    |   |   ├── test_free_groups.py
    |   |   ├── test_generators.py
    |   |   ├── test_graycode.py
    |   |   ├── test_group_constructs.py
    |   |   ├── test_homomorphisms.py
    |   |   ├── test_named_groups.py
    |   |   ├── test_partitions.py
    |   |   ├── test_perm_groups.py
    |   |   ├── test_permutations.py
    |   |   ├── test_polyhedron.py
    |   |   ├── test_prufer.py
    |   |   ├── test_rewriting.py
    |   |   ├── test_subsets.py
    |   |   ├── test_tensor_can.py
    |   |   ├── test_testutil.py
    |   |   └── test_util.py
    |   ├── testutil.py
    |   └── util.py
    ├── concrete
    |   ├── __init__.py
    |   ├── delta.py
    |   ├── expr_with_intlimits.py
    |   ├── expr_with_limits.py
    |   ├── gosper.py
    |   ├── guess.py
    |   ├── products.py
    |   ├── summations.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_delta.py
    |       ├── test_gosper.py
    |       ├── test_guess.py
    |       ├── test_products.py
    |       └── test_sums_products.py
    ├── conftest.py
    ├── core
    |   ├── __init__.py
    |   ├── add.py
    |   ├── alphabets.py
    |   ├── assumptions.py
    |   ├── backend.py
    |   ├── basic.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_arit.py
    |   |   ├── bench_assumptions.py
    |   |   ├── bench_basic.py
    |   |   ├── bench_expand.py
    |   |   ├── bench_numbers.py
    |   |   └── bench_sympify.py
    |   ├── cache.py
    |   ├── compatibility.py
    |   ├── containers.py
    |   ├── core.py
    |   ├── coreerrors.py
    |   ├── decorators.py
    |   ├── evalf.py
    |   ├── evaluate.py
    |   ├── expr.py
    |   ├── exprtools.py
    |   ├── facts.py
    |   ├── function.py
    |   ├── logic.py
    |   ├── mod.py
    |   ├── mul.py
    |   ├── multidimensional.py
    |   ├── numbers.py
    |   ├── operations.py
    |   ├── power.py
    |   ├── relational.py
    |   ├── rules.py
    |   ├── singleton.py
    |   ├── symbol.py
    |   ├── sympify.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_args.py
    |   |   ├── test_arit.py
    |   |   ├── test_assumptions.py
    |   |   ├── test_basic.py
    |   |   ├── test_cache.py
    |   |   ├── test_compatibility.py
    |   |   ├── test_complex.py
    |   |   ├── test_constructor_postprocessor.py
    |   |   ├── test_containers.py
    |   |   ├── test_count_ops.py
    |   |   ├── test_diff.py
    |   |   ├── test_equal.py
    |   |   ├── test_eval.py
    |   |   ├── test_eval_power.py
    |   |   ├── test_evalf.py
    |   |   ├── test_evaluate.py
    |   |   ├── test_expand.py
    |   |   ├── test_expr.py
    |   |   ├── test_exprtools.py
    |   |   ├── test_facts.py
    |   |   ├── test_function.py
    |   |   ├── test_logic.py
    |   |   ├── test_match.py
    |   |   ├── test_noncommutative.py
    |   |   ├── test_numbers.py
    |   |   ├── test_operations.py
    |   |   ├── test_priority.py
    |   |   ├── test_relational.py
    |   |   ├── test_rules.py
    |   |   ├── test_subs.py
    |   |   ├── test_symbol.py
    |   |   ├── test_sympify.py
    |   |   ├── test_trace.py
    |   |   ├── test_truediv.py
    |   |   └── test_var.py
    |   └── trace.py
    ├── crypto
    |   ├── __init__.py
    |   ├── crypto.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_crypto.py
    ├── deprecated
    |   ├── __init__.py
    |   ├── class_registry.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_class_registry.py
    ├── diffgeom
    |   ├── __init__.py
    |   ├── diffgeom.py
    |   ├── rn.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_class_structure.py
    |       ├── test_diffgeom.py
    |       ├── test_function_diffgeom_book.py
    |       └── test_hyperbolic_space.py
    ├── external
    |   ├── __init__.py
    |   ├── importtools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_autowrap.py
    |       ├── test_codegen.py
    |       ├── test_importtools.py
    |       ├── test_numpy.py
    |       ├── test_sage.py
    |       └── test_scipy.py
    ├── functions
    |   ├── __init__.py
    |   ├── combinatorial
    |   |   ├── __init__.py
    |   |   ├── factorials.py
    |   |   ├── numbers.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_comb_factorials.py
    |   |       └── test_comb_numbers.py
    |   ├── elementary
    |   |   ├── __init__.py
    |   |   ├── benchmarks
    |   |   |   ├── __init__.py
    |   |   |   └── bench_exp.py
    |   |   ├── complexes.py
    |   |   ├── exponential.py
    |   |   ├── hyperbolic.py
    |   |   ├── integers.py
    |   |   ├── miscellaneous.py
    |   |   ├── piecewise.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_complexes.py
    |   |   |   ├── test_exponential.py
    |   |   |   ├── test_hyperbolic.py
    |   |   |   ├── test_integers.py
    |   |   |   ├── test_interface.py
    |   |   |   ├── test_miscellaneous.py
    |   |   |   ├── test_piecewise.py
    |   |   |   └── test_trigonometric.py
    |   |   └── trigonometric.py
    |   └── special
    |       ├── __init__.py
    |       ├── benchmarks
    |       |   ├── __init__.py
    |       |   └── bench_special.py
    |       ├── bessel.py
    |       ├── beta_functions.py
    |       ├── bsplines.py
    |       ├── delta_functions.py
    |       ├── elliptic_integrals.py
    |       ├── error_functions.py
    |       ├── gamma_functions.py
    |       ├── hyper.py
    |       ├── mathieu_functions.py
    |       ├── polynomials.py
    |       ├── singularity_functions.py
    |       ├── spherical_harmonics.py
    |       ├── tensor_functions.py
    |       ├── tests
    |       |   ├── __init__.py
    |       |   ├── test_bessel.py
    |       |   ├── test_beta_functions.py
    |       |   ├── test_bsplines.py
    |       |   ├── test_delta_functions.py
    |       |   ├── test_elliptic_integrals.py
    |       |   ├── test_error_functions.py
    |       |   ├── test_gamma_functions.py
    |       |   ├── test_hyper.py
    |       |   ├── test_mathieu.py
    |       |   ├── test_singularity_functions.py
    |       |   ├── test_spec_polynomials.py
    |       |   ├── test_spherical_harmonics.py
    |       |   ├── test_tensor_functions.py
    |       |   └── test_zeta_functions.py
    |       └── zeta_functions.py
    ├── galgebra.py
    ├── geometry
    |   ├── __init__.py
    |   ├── curve.py
    |   ├── ellipse.py
    |   ├── entity.py
    |   ├── exceptions.py
    |   ├── line.py
    |   ├── parabola.py
    |   ├── plane.py
    |   ├── point.py
    |   ├── polygon.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_curve.py
    |   |   ├── test_ellipse.py
    |   |   ├── test_entity.py
    |   |   ├── test_geometrysets.py
    |   |   ├── test_line.py
    |   |   ├── test_parabola.py
    |   |   ├── test_plane.py
    |   |   ├── test_point.py
    |   |   ├── test_polygon.py
    |   |   └── test_util.py
    |   └── util.py
    ├── holonomic
    |   ├── __init__.py
    |   ├── holonomic.py
    |   ├── holonomicerrors.py
    |   ├── linearsolver.py
    |   ├── numerical.py
    |   ├── recurrence.py
    |   └── tests
    |       ├── test_holonomic.py
    |       └── test_recurrence.py
    ├── integrals
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_integrate.py
    |   |   └── bench_trigintegrate.py
    |   ├── deltafunctions.py
    |   ├── heurisch.py
    |   ├── integrals.py
    |   ├── intpoly.py
    |   ├── manualintegrate.py
    |   ├── meijerint.py
    |   ├── meijerint_doc.py
    |   ├── prde.py
    |   ├── quadrature.py
    |   ├── rationaltools.py
    |   ├── rde.py
    |   ├── risch.py
    |   ├── rubi
    |   |   ├── __init__.py
    |   |   ├── parsetools
    |   |   |   ├── __init__.py
    |   |   |   ├── parse.py
    |   |   |   └── tests
    |   |   ├── rubi.py
    |   |   ├── rules
    |   |   |   ├── __init__.py
    |   |   |   ├── binomial_products.py
    |   |   |   ├── exponential.py
    |   |   |   ├── hyperbolic.py
    |   |   |   ├── integrand_simplification.py
    |   |   |   ├── inverse_hyperbolic.py
    |   |   |   ├── inverse_trig.py
    |   |   |   ├── linear_products.py
    |   |   |   ├── logarithms.py
    |   |   |   ├── miscellaneous_algebraic.py
    |   |   |   ├── miscellaneous_integration.py
    |   |   |   ├── miscellaneous_trig.py
    |   |   |   ├── piecewise_linear.py
    |   |   |   ├── quadratic_products.py
    |   |   |   ├── secant.py
    |   |   |   ├── sine.py
    |   |   |   ├── tangent.py
    |   |   |   └── trinomial_products.py
    |   |   ├── symbol.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_1_2.py
    |   |   |   ├── test_1_3.py
    |   |   |   ├── test_1_4.py
    |   |   |   ├── test_rubi_integrate.py
    |   |   |   └── test_utility_function.py
    |   |   └── utility_function.py
    |   ├── singularityfunctions.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_deltafunctions.py
    |   |   ├── test_failing_integrals.py
    |   |   ├── test_heurisch.py
    |   |   ├── test_integrals.py
    |   |   ├── test_intpoly.py
    |   |   ├── test_lineintegrals.py
    |   |   ├── test_manual.py
    |   |   ├── test_meijerint.py
    |   |   ├── test_prde.py
    |   |   ├── test_quadrature.py
    |   |   ├── test_rationaltools.py
    |   |   ├── test_rde.py
    |   |   ├── test_risch.py
    |   |   ├── test_singularityfunctions.py
    |   |   ├── test_transforms.py
    |   |   └── test_trigonometry.py
    |   ├── transforms.py
    |   └── trigonometry.py
    ├── interactive
    |   ├── __init__.py
    |   ├── ipythonprinting.py
    |   ├── printing.py
    |   ├── session.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_interactive.py
    |       ├── test_ipython.py
    |       └── test_ipythonprinting.py
    ├── liealgebras
    |   ├── __init__.py
    |   ├── cartan_matrix.py
    |   ├── cartan_type.py
    |   ├── dynkin_diagram.py
    |   ├── root_system.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_cartan_matrix.py
    |   |   ├── test_cartan_type.py
    |   |   ├── test_dynkin_diagram.py
    |   |   ├── test_root_system.py
    |   |   ├── test_type_A.py
    |   |   ├── test_type_B.py
    |   |   ├── test_type_C.py
    |   |   ├── test_type_D.py
    |   |   ├── test_type_E.py
    |   |   ├── test_type_F.py
    |   |   ├── test_type_G.py
    |   |   └── test_weyl_group.py
    |   ├── type_a.py
    |   ├── type_b.py
    |   ├── type_c.py
    |   ├── type_d.py
    |   ├── type_e.py
    |   ├── type_f.py
    |   ├── type_g.py
    |   └── weyl_group.py
    ├── logic
    |   ├── __init__.py
    |   ├── algorithms
    |   |   ├── __init__.py
    |   |   ├── dpll.py
    |   |   └── dpll2.py
    |   ├── boolalg.py
    |   ├── inference.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_boolalg.py
    |   |   ├── test_dimacs.py
    |   |   └── test_inference.py
    |   └── utilities
    |       ├── __init__.py
    |       └── dimacs.py
    ├── matrices
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_matrix.py
    |   ├── common.py
    |   ├── dense.py
    |   ├── densearith.py
    |   ├── densesolve.py
    |   ├── densetools.py
    |   ├── expressions
    |   |   ├── __init__.py
    |   |   ├── adjoint.py
    |   |   ├── blockmatrix.py
    |   |   ├── determinant.py
    |   |   ├── diagonal.py
    |   |   ├── dotproduct.py
    |   |   ├── factorizations.py
    |   |   ├── fourier.py
    |   |   ├── funcmatrix.py
    |   |   ├── hadamard.py
    |   |   ├── inverse.py
    |   |   ├── matadd.py
    |   |   ├── matexpr.py
    |   |   ├── matmul.py
    |   |   ├── matpow.py
    |   |   ├── slice.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_adjoint.py
    |   |   |   ├── test_blockmatrix.py
    |   |   |   ├── test_derivatives.py
    |   |   |   ├── test_determinant.py
    |   |   |   ├── test_diagonal.py
    |   |   |   ├── test_dotproduct.py
    |   |   |   ├── test_factorizations.py
    |   |   |   ├── test_fourier.py
    |   |   |   ├── test_funcmatrix.py
    |   |   |   ├── test_hadamard.py
    |   |   |   ├── test_indexing.py
    |   |   |   ├── test_inverse.py
    |   |   |   ├── test_matadd.py
    |   |   |   ├── test_matexpr.py
    |   |   |   ├── test_matmul.py
    |   |   |   ├── test_matpow.py
    |   |   |   ├── test_slice.py
    |   |   |   ├── test_trace.py
    |   |   |   └── test_transpose.py
    |   |   ├── trace.py
    |   |   └── transpose.py
    |   ├── immutable.py
    |   ├── matrices.py
    |   ├── normalforms.py
    |   ├── sparse.py
    |   ├── sparsetools.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_commonmatrix.py
    |       ├── test_densearith.py
    |       ├── test_densesolve.py
    |       ├── test_densetools.py
    |       ├── test_immutable.py
    |       ├── test_interactions.py
    |       ├── test_matrices.py
    |       ├── test_normalforms.py
    |       ├── test_sparse.py
    |       └── test_sparsetools.py
    ├── ntheory
    |   ├── __init__.py
    |   ├── bbp_pi.py
    |   ├── continued_fraction.py
    |   ├── egyptian_fraction.py
    |   ├── factor_.py
    |   ├── generate.py
    |   ├── modular.py
    |   ├── multinomial.py
    |   ├── partitions_.py
    |   ├── primetest.py
    |   ├── residue_ntheory.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_bbp_pi.py
    |       ├── test_continued_fraction.py
    |       ├── test_egyptian_fraction.py
    |       ├── test_factor_.py
    |       ├── test_generate.py
    |       ├── test_modular.py
    |       ├── test_multinomial.py
    |       ├── test_partitions.py
    |       ├── test_primetest.py
    |       └── test_residue.py
    ├── parsing
    |   ├── __init__.py
    |   ├── ast_parser.py
    |   ├── mathematica.py
    |   ├── maxima.py
    |   ├── sympy_parser.py
    |   ├── sympy_tokenize.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_implicit_multiplication_application.py
    |       ├── test_mathematica.py
    |       ├── test_maxima.py
    |       └── test_sympy_parser.py
    ├── physics
    |   ├── __init__.py
    |   ├── continuum_mechanics
    |   |   ├── __init__.py
    |   |   ├── beam.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_beam.py
    |   ├── gaussopt.py
    |   ├── hep
    |   |   ├── __init__.py
    |   |   ├── gamma_matrices.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_gamma_matrices.py
    |   ├── hydrogen.py
    |   ├── matrices.py
    |   ├── mechanics
    |   |   ├── __init__.py
    |   |   ├── body.py
    |   |   ├── functions.py
    |   |   ├── kane.py
    |   |   ├── lagrange.py
    |   |   ├── linearize.py
    |   |   ├── models.py
    |   |   ├── particle.py
    |   |   ├── rigidbody.py
    |   |   ├── system.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_body.py
    |   |       ├── test_functions.py
    |   |       ├── test_kane.py
    |   |       ├── test_kane2.py
    |   |       ├── test_kane3.py
    |   |       ├── test_lagrange.py
    |   |       ├── test_lagrange2.py
    |   |       ├── test_linearize.py
    |   |       ├── test_models.py
    |   |       ├── test_particle.py
    |   |       ├── test_rigidbody.py
    |   |       └── test_system.py
    |   ├── optics
    |   |   ├── __init__.py
    |   |   ├── gaussopt.py
    |   |   ├── medium.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_gaussopt.py
    |   |   |   ├── test_medium.py
    |   |   |   ├── test_utils.py
    |   |   |   └── test_waves.py
    |   |   ├── utils.py
    |   |   └── waves.py
    |   ├── paulialgebra.py
    |   ├── pring.py
    |   ├── qho_1d.py
    |   ├── quantum
    |   |   ├── __init__.py
    |   |   ├── anticommutator.py
    |   |   ├── boson.py
    |   |   ├── cartesian.py
    |   |   ├── cg.py
    |   |   ├── circuitplot.py
    |   |   ├── circuitutils.py
    |   |   ├── commutator.py
    |   |   ├── constants.py
    |   |   ├── dagger.py
    |   |   ├── density.py
    |   |   ├── fermion.py
    |   |   ├── gate.py
    |   |   ├── grover.py
    |   |   ├── hilbert.py
    |   |   ├── identitysearch.py
    |   |   ├── innerproduct.py
    |   |   ├── matrixcache.py
    |   |   ├── matrixutils.py
    |   |   ├── operator.py
    |   |   ├── operatorordering.py
    |   |   ├── operatorset.py
    |   |   ├── pauli.py
    |   |   ├── piab.py
    |   |   ├── qapply.py
    |   |   ├── qasm.py
    |   |   ├── qexpr.py
    |   |   ├── qft.py
    |   |   ├── qubit.py
    |   |   ├── represent.py
    |   |   ├── sho1d.py
    |   |   ├── shor.py
    |   |   ├── spin.py
    |   |   ├── state.py
    |   |   ├── tensorproduct.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_anticommutator.py
    |   |       ├── test_boson.py
    |   |       ├── test_cartesian.py
    |   |       ├── test_cg.py
    |   |       ├── test_circuitplot.py
    |   |       ├── test_circuitutils.py
    |   |       ├── test_commutator.py
    |   |       ├── test_constants.py
    |   |       ├── test_dagger.py
    |   |       ├── test_density.py
    |   |       ├── test_fermion.py
    |   |       ├── test_gate.py
    |   |       ├── test_grover.py
    |   |       ├── test_hilbert.py
    |   |       ├── test_identitysearch.py
    |   |       ├── test_innerproduct.py
    |   |       ├── test_matrixutils.py
    |   |       ├── test_operator.py
    |   |       ├── test_operatorordering.py
    |   |       ├── test_operatorset.py
    |   |       ├── test_pauli.py
    |   |       ├── test_piab.py
    |   |       ├── test_printing.py
    |   |       ├── test_qapply.py
    |   |       ├── test_qasm.py
    |   |       ├── test_qexpr.py
    |   |       ├── test_qft.py
    |   |       ├── test_qubit.py
    |   |       ├── test_represent.py
    |   |       ├── test_sho1d.py
    |   |       ├── test_shor.py
    |   |       ├── test_spin.py
    |   |       ├── test_state.py
    |   |       └── test_tensorproduct.py
    |   ├── secondquant.py
    |   ├── sho.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_clebsch_gordan.py
    |   |   ├── test_hydrogen.py
    |   |   ├── test_paulialgebra.py
    |   |   ├── test_physics_matrices.py
    |   |   ├── test_pring.py
    |   |   ├── test_qho_1d.py
    |   |   ├── test_secondquant.py
    |   |   └── test_sho.py
    |   ├── units
    |   |   ├── __init__.py
    |   |   ├── definitions.py
    |   |   ├── dimensions.py
    |   |   ├── prefixes.py
    |   |   ├── quantities.py
    |   |   ├── systems
    |   |   |   ├── __init__.py
    |   |   |   ├── mks.py
    |   |   |   ├── mksa.py
    |   |   |   ├── natural.py
    |   |   |   └── si.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dimensions.py
    |   |   |   ├── test_dimensionsystem.py
    |   |   |   ├── test_prefixes.py
    |   |   |   ├── test_quantities.py
    |   |   |   ├── test_unitsystem.py
    |   |   |   └── test_util.py
    |   |   ├── unitsystem.py
    |   |   └── util.py
    |   ├── unitsystems.py
    |   ├── vector
    |   |   ├── __init__.py
    |   |   ├── dyadic.py
    |   |   ├── fieldfunctions.py
    |   |   ├── frame.py
    |   |   ├── functions.py
    |   |   ├── point.py
    |   |   ├── printing.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_dyadic.py
    |   |   |   ├── test_fieldfunctions.py
    |   |   |   ├── test_frame.py
    |   |   |   ├── test_functions.py
    |   |   |   ├── test_output.py
    |   |   |   ├── test_point.py
    |   |   |   ├── test_printing.py
    |   |   |   └── test_vector.py
    |   |   └── vector.py
    |   └── wigner.py
    ├── plotting
    |   ├── __init__.py
    |   ├── experimental_lambdify.py
    |   ├── intervalmath
    |   |   ├── __init__.py
    |   |   ├── interval_arithmetic.py
    |   |   ├── lib_interval.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_interval_functions.py
    |   |       └── test_intervalmath.py
    |   ├── plot.py
    |   ├── plot_implicit.py
    |   ├── pygletplot
    |   |   ├── __init__.py
    |   |   ├── color_scheme.py
    |   |   ├── managed_window.py
    |   |   ├── plot.py
    |   |   ├── plot_axes.py
    |   |   ├── plot_camera.py
    |   |   ├── plot_controller.py
    |   |   ├── plot_curve.py
    |   |   ├── plot_interval.py
    |   |   ├── plot_mode.py
    |   |   ├── plot_mode_base.py
    |   |   ├── plot_modes.py
    |   |   ├── plot_object.py
    |   |   ├── plot_rotation.py
    |   |   ├── plot_surface.py
    |   |   ├── plot_window.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── test_plotting.py
    |   |   └── util.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_plot.py
    |   |   └── test_plot_implicit.py
    |   └── textplot.py
    ├── polys
    |   ├── __init__.py
    |   ├── agca
    |   |   ├── __init__.py
    |   |   ├── extensions.py
    |   |   ├── homomorphisms.py
    |   |   ├── ideals.py
    |   |   ├── modules.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_extensions.py
    |   |       ├── test_homomorphisms.py
    |   |       ├── test_ideals.py
    |   |       └── test_modules.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_galoispolys.py
    |   |   ├── bench_groebnertools.py
    |   |   └── bench_solvers.py
    |   ├── compatibility.py
    |   ├── constructor.py
    |   ├── densearith.py
    |   ├── densebasic.py
    |   ├── densetools.py
    |   ├── dispersion.py
    |   ├── distributedmodules.py
    |   ├── domains
    |   |   ├── __init__.py
    |   |   ├── algebraicfield.py
    |   |   ├── characteristiczero.py
    |   |   ├── complexfield.py
    |   |   ├── compositedomain.py
    |   |   ├── domain.py
    |   |   ├── domainelement.py
    |   |   ├── expressiondomain.py
    |   |   ├── field.py
    |   |   ├── finitefield.py
    |   |   ├── fractionfield.py
    |   |   ├── gmpyfinitefield.py
    |   |   ├── gmpyintegerring.py
    |   |   ├── gmpyrationalfield.py
    |   |   ├── groundtypes.py
    |   |   ├── integerring.py
    |   |   ├── modularinteger.py
    |   |   ├── mpelements.py
    |   |   ├── old_fractionfield.py
    |   |   ├── old_polynomialring.py
    |   |   ├── polynomialring.py
    |   |   ├── pythonfinitefield.py
    |   |   ├── pythonintegerring.py
    |   |   ├── pythonrational.py
    |   |   ├── pythonrationalfield.py
    |   |   ├── quotientring.py
    |   |   ├── rationalfield.py
    |   |   ├── realfield.py
    |   |   ├── ring.py
    |   |   ├── simpledomain.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_domains.py
    |   |       ├── test_polynomialring.py
    |   |       └── test_quotientring.py
    |   ├── euclidtools.py
    |   ├── factortools.py
    |   ├── fglmtools.py
    |   ├── fields.py
    |   ├── galoistools.py
    |   ├── groebnertools.py
    |   ├── heuristicgcd.py
    |   ├── modulargcd.py
    |   ├── monomials.py
    |   ├── numberfields.py
    |   ├── orderings.py
    |   ├── orthopolys.py
    |   ├── partfrac.py
    |   ├── polyclasses.py
    |   ├── polyconfig.py
    |   ├── polyerrors.py
    |   ├── polyfuncs.py
    |   ├── polymatrix.py
    |   ├── polyoptions.py
    |   ├── polyquinticconst.py
    |   ├── polyroots.py
    |   ├── polytools.py
    |   ├── polyutils.py
    |   ├── rationaltools.py
    |   ├── ring_series.py
    |   ├── rings.py
    |   ├── rootisolation.py
    |   ├── rootoftools.py
    |   ├── solvers.py
    |   ├── specialpolys.py
    |   ├── sqfreetools.py
    |   ├── subresultants_qq_zz.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constructor.py
    |       ├── test_densearith.py
    |       ├── test_densebasic.py
    |       ├── test_densetools.py
    |       ├── test_dispersion.py
    |       ├── test_distributedmodules.py
    |       ├── test_euclidtools.py
    |       ├── test_factortools.py
    |       ├── test_fields.py
    |       ├── test_galoistools.py
    |       ├── test_groebnertools.py
    |       ├── test_heuristicgcd.py
    |       ├── test_injections.py
    |       ├── test_modulargcd.py
    |       ├── test_monomials.py
    |       ├── test_numberfields.py
    |       ├── test_orderings.py
    |       ├── test_orthopolys.py
    |       ├── test_partfrac.py
    |       ├── test_polyclasses.py
    |       ├── test_polyfuncs.py
    |       ├── test_polymatrix.py
    |       ├── test_polyoptions.py
    |       ├── test_polyroots.py
    |       ├── test_polytools.py
    |       ├── test_polyutils.py
    |       ├── test_pythonrational.py
    |       ├── test_rationaltools.py
    |       ├── test_ring_series.py
    |       ├── test_rings.py
    |       ├── test_rootisolation.py
    |       ├── test_rootoftools.py
    |       ├── test_solvers.py
    |       ├── test_specialpolys.py
    |       ├── test_sqfreetools.py
    |       └── test_subresultants_qq_zz.py
    ├── printing
    |   ├── __init__.py
    |   ├── ccode.py
    |   ├── codeprinter.py
    |   ├── conventions.py
    |   ├── cxxcode.py
    |   ├── defaults.py
    |   ├── dot.py
    |   ├── fcode.py
    |   ├── glsl.py
    |   ├── gtk.py
    |   ├── jscode.py
    |   ├── julia.py
    |   ├── lambdarepr.py
    |   ├── latex.py
    |   ├── llvmjitcode.py
    |   ├── mathematica.py
    |   ├── mathml.py
    |   ├── octave.py
    |   ├── precedence.py
    |   ├── pretty
    |   |   ├── __init__.py
    |   |   ├── pretty.py
    |   |   ├── pretty_symbology.py
    |   |   ├── stringpict.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       └── test_pretty.py
    |   ├── preview.py
    |   ├── printer.py
    |   ├── pycode.py
    |   ├── python.py
    |   ├── rcode.py
    |   ├── repr.py
    |   ├── rust.py
    |   ├── str.py
    |   ├── tableform.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_ccode.py
    |   |   ├── test_codeprinter.py
    |   |   ├── test_conventions.py
    |   |   ├── test_cxxcode.py
    |   |   ├── test_dot.py
    |   |   ├── test_fcode.py
    |   |   ├── test_glsl.py
    |   |   ├── test_gtk.py
    |   |   ├── test_jscode.py
    |   |   ├── test_julia.py
    |   |   ├── test_lambdarepr.py
    |   |   ├── test_latex.py
    |   |   ├── test_llvmjit.py
    |   |   ├── test_mathematica.py
    |   |   ├── test_mathml.py
    |   |   ├── test_numpy.py
    |   |   ├── test_octave.py
    |   |   ├── test_precedence.py
    |   |   ├── test_preview.py
    |   |   ├── test_pycode.py
    |   |   ├── test_python.py
    |   |   ├── test_rcode.py
    |   |   ├── test_repr.py
    |   |   ├── test_rust.py
    |   |   ├── test_str.py
    |   |   ├── test_tableform.py
    |   |   └── test_theanocode.py
    |   ├── theanocode.py
    |   └── tree.py
    ├── release.py
    ├── sandbox
    |   ├── __init__.py
    |   ├── indexed_integrals.py
    |   └── tests
    |       ├── __init__.py
    |       └── test_indexed_integrals.py
    ├── series
    |   ├── __init__.py
    |   ├── acceleration.py
    |   ├── approximants.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   ├── bench_limit.py
    |   |   └── bench_order.py
    |   ├── formal.py
    |   ├── fourier.py
    |   ├── gruntz.py
    |   ├── kauers.py
    |   ├── limits.py
    |   ├── limitseq.py
    |   ├── order.py
    |   ├── residues.py
    |   ├── sequences.py
    |   ├── series.py
    |   ├── series_class.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_approximants.py
    |       ├── test_demidovich.py
    |       ├── test_formal.py
    |       ├── test_fourier.py
    |       ├── test_gruntz.py
    |       ├── test_kauers.py
    |       ├── test_limits.py
    |       ├── test_limitseq.py
    |       ├── test_lseries.py
    |       ├── test_nseries.py
    |       ├── test_order.py
    |       ├── test_residues.py
    |       ├── test_sequences.py
    |       └── test_series.py
    ├── sets
    |   ├── __init__.py
    |   ├── conditionset.py
    |   ├── contains.py
    |   ├── fancysets.py
    |   ├── sets.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_conditionset.py
    |       ├── test_contains.py
    |       ├── test_fancysets.py
    |       └── test_sets.py
    ├── simplify
    |   ├── __init__.py
    |   ├── combsimp.py
    |   ├── cse_main.py
    |   ├── cse_opts.py
    |   ├── epathtools.py
    |   ├── fu.py
    |   ├── gammasimp.py
    |   ├── hyperexpand.py
    |   ├── hyperexpand_doc.py
    |   ├── powsimp.py
    |   ├── radsimp.py
    |   ├── ratsimp.py
    |   ├── simplify.py
    |   ├── sqrtdenest.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_combsimp.py
    |   |   ├── test_cse.py
    |   |   ├── test_epathtools.py
    |   |   ├── test_fu.py
    |   |   ├── test_function.py
    |   |   ├── test_gammasimp.py
    |   |   ├── test_hyperexpand.py
    |   |   ├── test_powsimp.py
    |   |   ├── test_radsimp.py
    |   |   ├── test_ratsimp.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_simplify.py
    |   |   ├── test_sqrtdenest.py
    |   |   ├── test_traversaltools.py
    |   |   └── test_trigsimp.py
    |   ├── traversaltools.py
    |   └── trigsimp.py
    ├── solvers
    |   ├── __init__.py
    |   ├── benchmarks
    |   |   ├── __init__.py
    |   |   └── bench_solvers.py
    |   ├── bivariate.py
    |   ├── decompogen.py
    |   ├── deutils.py
    |   ├── diophantine.py
    |   ├── inequalities.py
    |   ├── ode.py
    |   ├── pde.py
    |   ├── polysys.py
    |   ├── recurr.py
    |   ├── solvers.py
    |   ├── solveset.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_constantsimp.py
    |       ├── test_decompogen.py
    |       ├── test_diophantine.py
    |       ├── test_inequalities.py
    |       ├── test_numeric.py
    |       ├── test_ode.py
    |       ├── test_pde.py
    |       ├── test_polysys.py
    |       ├── test_recurr.py
    |       ├── test_solvers.py
    |       └── test_solveset.py
    ├── stats
    |   ├── __init__.py
    |   ├── crv.py
    |   ├── crv_types.py
    |   ├── drv.py
    |   ├── drv_types.py
    |   ├── error_prop.py
    |   ├── frv.py
    |   ├── frv_types.py
    |   ├── rv.py
    |   ├── rv_interface.py
    |   ├── symbolic_probability.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_continuous_rv.py
    |       ├── test_discrete_rv.py
    |       ├── test_error_prop.py
    |       ├── test_finite_rv.py
    |       ├── test_mix.py
    |       ├── test_rv.py
    |       └── test_symbolic_probability.py
    ├── strategies
    |   ├── __init__.py
    |   ├── branch
    |   |   ├── __init__.py
    |   |   ├── core.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   ├── test_core.py
    |   |   |   ├── test_tools.py
    |   |   |   └── test_traverse.py
    |   |   ├── tools.py
    |   |   └── traverse.py
    |   ├── core.py
    |   ├── rl.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_core.py
    |   |   ├── test_rl.py
    |   |   ├── test_strat.py
    |   |   ├── test_tools.py
    |   |   ├── test_traverse.py
    |   |   └── test_tree.py
    |   ├── tools.py
    |   ├── traverse.py
    |   ├── tree.py
    |   └── util.py
    ├── tensor
    |   ├── __init__.py
    |   ├── array
    |   |   ├── __init__.py
    |   |   ├── arrayop.py
    |   |   ├── dense_ndim_array.py
    |   |   ├── mutable_ndim_array.py
    |   |   ├── ndim_array.py
    |   |   ├── sparse_ndim_array.py
    |   |   └── tests
    |   |       ├── __init__.py
    |   |       ├── test_arrayop.py
    |   |       ├── test_immutable_ndim_array.py
    |   |       ├── test_mutable_ndim_array.py
    |   |       └── test_ndim_array_conversions.py
    |   ├── functions.py
    |   ├── index_methods.py
    |   ├── indexed.py
    |   ├── tensor.py
    |   └── tests
    |       ├── __init__.py
    |       ├── test_functions.py
    |       ├── test_index_methods.py
    |       ├── test_indexed.py
    |       └── test_tensor.py
    ├── this.py
    ├── unify
    |   ├── __init__.py
    |   ├── core.py
    |   ├── rewrite.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── test_rewrite.py
    |   |   ├── test_sympy.py
    |   |   └── test_unify.py
    |   └── usympy.py
    ├── utilities
    |   ├── __init__.py
    |   ├── autowrap.py
    |   ├── benchmarking.py
    |   ├── codegen.py
    |   ├── decorator.py
    |   ├── enumerative.py
    |   ├── exceptions.py
    |   ├── iterables.py
    |   ├── lambdify.py
    |   ├── magic.py
    |   ├── mathml
    |   |   ├── __init__.py
    |   |   └── data
    |   ├── memoization.py
    |   ├── misc.py
    |   ├── pkgdata.py
    |   ├── pytest.py
    |   ├── randtest.py
    |   ├── runtests.py
    |   ├── source.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── diagnose_imports.py
    |   |   ├── test_autowrap.py
    |   |   ├── test_code_quality.py
    |   |   ├── test_codegen.py
    |   |   ├── test_codegen_julia.py
    |   |   ├── test_codegen_octave.py
    |   |   ├── test_codegen_rust.py
    |   |   ├── test_decorator.py
    |   |   ├── test_enumerative.py
    |   |   ├── test_iterables.py
    |   |   ├── test_lambdify.py
    |   |   ├── test_misc.py
    |   |   ├── test_module_imports.py
    |   |   ├── test_pickling.py
    |   |   ├── test_pytest.py
    |   |   ├── test_source.py
    |   |   ├── test_timeutils.py
    |   |   └── test_wester.py
    |   └── timeutils.py
    └── vector
        ├── __init__.py
        ├── basisdependent.py
        ├── coordsysrect.py
        ├── deloperator.py
        ├── dyadic.py
        ├── functions.py
        ├── operators.py
        ├── orienters.py
        ├── point.py
        ├── scalar.py
        ├── tests
        |   ├── __init__.py
        |   ├── test_coordsysrect.py
        |   ├── test_dyadic.py
        |   ├── test_field_functions.py
        |   ├── test_functions.py
        |   ├── test_operators.py
        |   ├── test_printing.py
        |   └── test_vector.py
        └── vector.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: latex() and mul_symbol

Description: The `latex()` pretty-printing function accepts a `mul_symbol` kwarg that must be one of four choices. I would like to be able to supply my own choice which is not in the list. Specifically, I want the multiplication symbol to be `\,` (i.e., a thin space). This is what I mean
```
>>> latex(3*x**2*y)
'3 \\, x^{2} \\, y' # I typed the thin spaces in after the fact
```

Thin spaces are used by sympy to separate differentials from integrands in integrals.
```
>>> latex(Integral(2*x**2*y, x))
'\\int 2 x^{2} y\\, dx' # This thin space is sympy's current behavior
```

Is there a reason why the user cannot supply the `mul_symbol` of their choosing? Or are the 4 choices a historical artifact? I'm willing to attempt making a PR to allow `mul_symbol` to be arbitrary (and backwards-compatible) if such a PR would be considered.

Patch information:
diff --git a/sympy/printing/latex.py b/sympy/printing/latex.py
index ad4d7d9613..41c4fd9b3a 100644
--- a/sympy/printing/latex.py
+++ b/sympy/printing/latex.py
@@ -156,11 +156,29 @@ def __init__(self, settings=None):
             "times": r" \times "
         }
 
-        self._settings['mul_symbol_latex'] = \
-            mul_symbol_table[self._settings['mul_symbol']]
+        mul_symbol_setting = self._settings.get('mul_symbol')
 
-        self._settings['mul_symbol_latex_numbers'] = \
-            mul_symbol_table[self._settings['mul_symbol'] or 'dot']
+        if mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex = " %s " % mul_symbol_setting
+        elif mul_symbol_setting is None:
+            mul_symbol_latex = mul_symbol_table[None]
+        else:
+            raise ValueError("'mul_symbol' must be None, one of 'ldot', 'dot', 'times', or a LaTeX string")
+
+        self._settings['mul_symbol_latex'] = mul_symbol_latex
+
+        if mul_symbol_setting is None:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+        elif mul_symbol_setting in mul_symbol_table:
+            mul_symbol_latex_numbers = mul_symbol_table[mul_symbol_setting]
+        elif isinstance(mul_symbol_setting, str):
+            mul_symbol_latex_numbers = " %s " % mul_symbol_setting
+        else:
+            mul_symbol_latex_numbers = mul_symbol_table['dot']
+
+        self._settings['mul_symbol_latex_numbers'] = mul_symbol_latex_numbers
 
         self._delim_dict = {'(': ')', '[': ']'}
 
@@ -2155,7 +2173,9 @@ def latex(expr, **settings):
     \frac{1}{2 \pi} \int r\, dr
 
     mul_symbol: The symbol to use for multiplication. Can be one of None,
-    "ldot", "dot", or "times".
+    "ldot", "dot", "times", or any custom LaTeX string (e.g., "\\,").
+    For readability, the separator is inserted with surrounding spaces between factors
+    and between numbers (except when mul_symbol is None, in which case numbers still use a dot).
 
     >>> print(latex((2*tau)**sin(Rational(7,2)), mul_symbol="times"))
     \left(2 \times \tau\right)^{\sin{\left (\frac{7}{2} \right )}}


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file sympy/printing/tests/test_latex.py.
Extra Requirements: 
Purpose: I need to find 3 relevant test cases that demonstrate how the `mul_symbol` setting is currently tested in the `latex` function to understand the existing test patterns.

Previous refined query 2:
Essential Query: Please provide the import statements from `sympy/printing/tests/test_latex.py`, and the full source code for the test functions containing the code on lines 64-66 and 100-103.
Extra Requirements: If the full source for the functions is not available, please provide at least 20 lines of context before and after the specified line ranges.
Purpose: This information is necessary to construct three complete and self-contained test cases as requested by the user, including all imports, setup, and assertions.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: sympy/printing/tests/test_latex.py
Line number range: 25 - 25
Content:
25. from sympy.abc import mu, tau


File: sympy/printing/tests/test_latex.py
Line number range: 33 - 33
Content:
33. from sympy.logic import Implies


File: sympy/printing/tests/test_latex.py
Line number range: 36 - 36
Content:
36. from sympy.core.trace import Tr


File: sympy/printing/tests/test_latex.py
Line number range: 37 - 37
Content:
37. from sympy.core.compatibility import range


File: sympy/printing/tests/test_latex.py
Line number range: 39 - 39
Content:
39. from sympy import MatrixSymbol


File: sympy/printing/tests/test_latex.py
Line number range: 58 - 123
Content:
58. def test_latex_basic():
59.     assert latex(1 + x) == "x + 1"
60.     assert latex(x**2) == "x^{2}"
61.     assert latex(x**(1 + x)) == "x^{x + 1}"
62.     assert latex(x**3 + x + 1 + x**2) == "x^{3} + x^{2} + x + 1"
63. 
64.     assert latex(2*x*y) == "2 x y"
65.     assert latex(2*x*y, mul_symbol='dot') == r"2 \cdot x \cdot y"
66. 
67.     assert latex(1/x) == r"\frac{1}{x}"
68.     assert latex(1/x, fold_short_frac=True) == "1 / x"
69.     assert latex(-S(3)/2) == r"- \frac{3}{2}"
70.     assert latex(-S(3)/2, fold_short_frac=True) == r"- 3 / 2"
71.     assert latex(1/x**2) == r"\frac{1}{x^{2}}"
72.     assert latex(1/(x + y)/2) == r"\frac{1}{2 \left(x + y\right)}"
73.     assert latex(x/2) == r"\frac{x}{2}"
74.     assert latex(x/2, fold_short_frac=True) == "x / 2"
75.     assert latex((x + y)/(2*x)) == r"\frac{x + y}{2 x}"
76.     assert latex((x + y)/(2*x), fold_short_frac=True) == \
77.         r"\left(x + y\right) / 2 x"
78.     assert latex((x + y)/(2*x), long_frac_ratio=0) == \
79.         r"\frac{1}{2 x} \left(x + y\right)"
80.     assert latex((x + y)/x) == r"\frac{1}{x} \left(x + y\right)"
81.     assert latex((x + y)/x, long_frac_ratio=3) == r"\frac{x + y}{x}"
82. 
83.     assert latex(2*Integral(x, x)/3) == r"\frac{2}{3} \int x\, dx"
84.     assert latex(2*Integral(x, x)/3, fold_short_frac=True) == \
85.         r"\left(2 \int x\, dx\right) / 3"
86. 
87.     assert latex(sqrt(x)) == r"\sqrt{x}"
88.     assert latex(x**Rational(1, 3)) == r"\sqrt[3]{x}"
89.     assert latex(sqrt(x)**3) == r"x^{\frac{3}{2}}"
90.     assert latex(sqrt(x), itex=True) == r"\sqrt{x}"
91.     assert latex(x**Rational(1, 3), itex=True) == r"\root{3}{x}"
92.     assert latex(sqrt(x)**3, itex=True) == r"x^{\frac{3}{2}}"
93.     assert latex(x**Rational(3, 4)) == r"x^{\frac{3}{4}}"
94.     assert latex(x**Rational(3, 4), fold_frac_powers=True) == "x^{3/4}"
95.     assert latex((x + 1)**Rational(3, 4)) == \
96.         r"\left(x + 1\right)^{\frac{3}{4}}"
97.     assert latex((x + 1)**Rational(3, 4), fold_frac_powers=True) == \
98.         r"\left(x + 1\right)^{3/4}"
99. 
100.     assert latex(1.5e20*x) == r"1.5 \cdot 10^{20} x"
101.     assert latex(1.5e20*x, mul_symbol='dot') == r"1.5 \cdot 10^{20} \cdot x"
102.     assert latex(1.5e20*x, mul_symbol='times') == r"1.5 \times 10^{20} \times x"
103. 
104.     assert latex(1/sin(x)) == r"\frac{1}{\sin{\left (x \right )}}"
105.     assert latex(sin(x)**-1) == r"\frac{1}{\sin{\left (x \right )}}"
106.     assert latex(sin(x)**Rational(3, 2)) == \
107.         r"\sin^{\frac{3}{2}}{\left (x \right )}"
108.     assert latex(sin(x)**Rational(3, 2), fold_frac_powers=True) == \
109.         r"\sin^{3/2}{\left (x \right )}"
110. 
111.     assert latex(~x) == r"\neg x"
112.     assert latex(x & y) == r"x \wedge y"
113.     assert latex(x & y & z) == r"x \wedge y \wedge z"
114.     assert latex(x | y) == r"x \vee y"
115.     assert latex(x | y | z) == r"x \vee y \vee z"
116.     assert latex((x & y) | z) == r"z \vee \left(x \wedge y\right)"
117.     assert latex(Implies(x, y)) == r"x \Rightarrow y"
118.     assert latex(~(x >> ~y)) == r"x \not\Rightarrow \neg y"
119.     assert latex(Implies(Or(x,y), z)) == r"\left(x \vee y\right) \Rightarrow z"
120.     assert latex(Implies(z, Or(x,y))) == r"z \Rightarrow \left(x \vee y\right)"
121. 
122.     assert latex(~x, symbol_names={x: "x_i"}) == r"\neg x_i"
123.     assert latex(x & y, symbol_names={x: "x_i", y: "y_i"}) == \


File: sympy/printing/tests/test_latex.py
Line number range: 985 - 994
Content:
985. def test_latex_mul_symbol():
986.     assert latex(4*4**x, mul_symbol='times') == "4 \\times 4^{x}"
987.     assert latex(4*4**x, mul_symbol='dot') == "4 \\cdot 4^{x}"
988.     assert latex(4*4**x, mul_symbol='ldot') == r"4 \,.\, 4^{x}"
989. 
990.     assert latex(4*x, mul_symbol='times') == "4 \\times x"
991.     assert latex(4*x, mul_symbol='dot') == "4 \\cdot x"
992.     assert latex(4*x, mul_symbol='ldot') == r"4 \,.\, x"
993. 
994. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 21:01:01,157 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants three complete and self-contained test cases. I have identified several relevant assertions from the provided test code, but I am missing the complete set of import statements from the beginning of `sympy/printing/tests/test_latex.py`. The previously aggregated context only contains a few scattered import lines and is insufficient to create runnable test cases. To fulfill the user's request, I need all the imports used in that test file." query='Please provide the full block of import statements from the top of the file `sympy/printing/tests/test_latex.py`.' extra_requirements='Provide all lines from the beginning of the file until the first test function definition.' purpose='This is necessary to create three complete and self-contained test cases that include all required imports, as requested by the user.'
2025-12-21 21:01:01,158 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full block of import statements from the top of the file `sympy/printing/tests/test_latex.py`.
2025-12-21 21:01:01,158 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 21:01:01,159 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 21:01:01,159 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 21:01:01,160 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full block of import statements from the top of the file `sympy/printing/tests/test_latex.py`.
Extra requirements: Provide all lines from the beginning of the file until the first test function definition.
Purpose: This is necessary to create three complete and self-contained test cases that include all required imports, as requested by the user.
2025-12-21 21:01:05,671 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I first located the initial test function within the specified file to determine the correct range of lines to read. Then, I extracted all the code from the beginning of the file up to the start of that first test, which includes all the import statements as requested.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_type_in_file_with_relative_path', 'arguments': '{"type": "function_definition", "relative_path": "sympy/printing/tests/test_latex.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2128, 'candidates_token_count': 89, 'total_token_count': 2575, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2128}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 89}], 'thoughts_token_count': 358, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2653242175498705, 'model_name': 'gemini-2.5-pro'} id='run--957a220b-85d2-48b5-896e-682ce462a0cd-0' tool_calls=[{'name': 'find_ast_node_with_type_in_file_with_relative_path', 'args': {'type': 'function_definition', 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '6ab23728-7333-435c-9da0-c8d8039aa689', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2128, 'output_tokens': 89, 'total_tokens': 2575, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 358}}
2025-12-21 21:01:08,619 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"end_line": 691.0, "start_line": 1.0, "relative_path": "sympy/printing/tests/test_latex.py"}'}, '__gemini_function_call_thought_signatures__': {'114bb9e3-3cd2-400f-bded-437d59be14a8': 'CrAFAY89a19OBunPYfEPluUF/j5x4JG8vHWKRrGsGonlqIuS1AVQaUBkFjUukIh/zZ2JyD0kAR6KDjeeiWIkupWKd9vs124zk5KOlsBU9YMTDVjfypPUtD1ZBuAXx4quff6NIbPtMVL7MnJsFmBkP4qgGhzfzRI6BsHm6IwFgr8992WWT63qOhGcyzUDDP4k6XaKx9aZQw5z4O6yWKjNXBl9OMuTqanElB5j7sa8M3zq+HDMtUvzVb9c7L64TQJrMq/nMTU1aCWZguUBgtYXY9y8Fj85UKoWlDG5vEtqFG4N6VkPVh3YVz6Pyp0w4rTW36nkliVlKusfIsxAPFE/fxfJles6r4H3CsGPJOw3kqnOYSdJigpU8u7X3f/UKBv/ABvFvrSfSJM+d3Ul6ykVkjsd+CqINEg4xI3r0OylEgXzP/8llh65fCLC2Knw4b28oYrpEyLs6yIE4Af61CF7VfS6psBEH0ZiP5JU2n4YRB2iZyk9jj9LCnTYJp0H14Zmf+pBslBDaEIqOvGJYTJhkKi9gT2sdf02hXwW+v6YIzx+CYPkpniXy4dLB1JmQ8RrNJ34zPpVi9RowCWCJ7Gg4svSJalGeaUqK3BBnOkI26SFD6k0x4pq58YIdWTDEHMqID/vpgTKsN+UShWWlV72s3eTUOeIHWIMnNhY5fScbQqDC/mFhisX/9yY74kq/XjdfYkVU793sjdVmZ3u243uc+3s5LLWgaTDlo671iZmorqc9Y7JEPHrKb5LLztFvZfPS/sC0qQvYi7BiHJ+fIud+bOEZDg+QbndygJUSnt8Fm8h6YIcxRwhx+exFGlrG79PxUzwKfebrKHDqnxu4uMkccHS1OkRotq/No7XLGdAHve7+4Z41pIL1NFtbTfXP2zC+X/diNjqsmgVQiAXL5+drRA6yA=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2882, 'candidates_token_count': 31, 'total_token_count': 3088, 'cached_content_token_count': 1535, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2882}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1535}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 31}], 'thoughts_token_count': 175}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5164413452148438, 'model_name': 'gemini-2.5-pro'} id='run--ec87fd72-ad54-49e2-8aed-7c1a42bf08f2-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'end_line': 691.0, 'start_line': 1.0, 'relative_path': 'sympy/printing/tests/test_latex.py'}, 'id': '114bb9e3-3cd2-400f-bded-437d59be14a8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2882, 'output_tokens': 31, 'total_tokens': 3088, 'input_token_details': {'cache_read': 1535}, 'output_token_details': {'reasoning': 175}}
2025-12-21 21:01:10,685 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the requested code from `sympy/printing/tests/test_latex.py`. This includes all lines from the beginning of the file up to the start of the first test function, `test_latex_emptyset`, which begins on line 691. The extracted code block contains all of the import statements.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 19571, 'candidates_token_count': 68, 'total_token_count': 19692, 'cached_content_token_count': 1864, 'prompt_tokens_details': [{'modality': 1, 'token_count': 19746}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1864}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 68}], 'thoughts_token_count': 53}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2009311143089743, 'model_name': 'gemini-2.5-pro'} id='run--6591c4dc-9a83-48e8-b4e4-6ce3db49d5c1-0' usage_metadata={'input_tokens': 19571, 'output_tokens': 68, 'total_tokens': 19692, 'input_token_details': {'cache_read': 1864}, 'output_token_details': {'reasoning': 53}}
2025-12-21 21:01:10,687 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full block of import statements from the top of the file `sympy/printing/tests/test_latex.py`.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
Provide all lines from the beginning of the file until the first test function definition.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This is necessary to create three complete and self-contained test cases that include all required imports, as requested by the user.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: sympy/printing/tests/test_latex.py
Line number range: 1 - 691
Content:
1. from sympy import (
2.     Add, Abs, Chi, Ci, CosineTransform, Dict, Ei, Eq, FallingFactorial,
3.     FiniteSet, Float, FourierTransform, Function, IndexedBase, Integral,
4.     Interval, InverseCosineTransform, InverseFourierTransform,
5.     InverseLaplaceTransform, InverseMellinTransform, InverseSineTransform,
6.     Lambda, LaplaceTransform, Limit, Matrix, Max, MellinTransform, Min, Mul,
7.     Order, Piecewise, Poly, ring, field, ZZ, Pow, Product, Range, Rational,
8.     RisingFactorial, rootof, RootSum, S, Shi, Si, SineTransform, Subs,
9.     Sum, Symbol, ImageSet, Tuple, Union, Ynm, Znm, arg, asin, Mod,
10.     assoc_laguerre, assoc_legendre, binomial, catalan, ceiling, Complement,
11.     chebyshevt, chebyshevu, conjugate, cot, coth, diff, dirichlet_eta, euler,
12.     exp, expint, factorial, factorial2, floor, gamma, gegenbauer, hermite,
13.     hyper, im, jacobi, laguerre, legendre, lerchphi, log, lowergamma,
14.     meijerg, oo, polar_lift, polylog, re, root, sin, sqrt, symbols,
15.     uppergamma, zeta, subfactorial, totient, elliptic_k, elliptic_f,
16.     elliptic_e, elliptic_pi, cos, tan, Wild, true, false, Equivalent, Not,
17.     Contains, divisor_sigma, SymmetricDifference, SeqPer, SeqFormula,
18.     SeqAdd, SeqMul, fourier_series, pi, ConditionSet, ComplexRegion, fps,
19.     AccumBounds, reduced_totient, primenu, primeomega, SingularityFunction,
20.      UnevaluatedExpr, Quaternion)
21. 
22. 
23. from sympy.ntheory.factor_ import udivisor_sigma
24. 
25. from sympy.abc import mu, tau
26. from sympy.printing.latex import (latex, translate, greek_letters_set,
27.                                   tex_greek_dictionary)
28. from sympy.tensor.array import (ImmutableDenseNDimArray, ImmutableSparseNDimArray,
29.                                 MutableSparseNDimArray, MutableDenseNDimArray)
30. from sympy.tensor.array import tensorproduct
31. from sympy.utilities.pytest import XFAIL, raises
32. from sympy.functions import DiracDelta, Heaviside, KroneckerDelta, LeviCivita
33. from sympy.logic import Implies
34. from sympy.logic.boolalg import And, Or, Xor
35. from sympy.physics.quantum import Commutator, Operator
36. from sympy.core.trace import Tr
37. from sympy.core.compatibility import range
38. from sympy.combinatorics.permutations import Cycle, Permutation
39. from sympy import MatrixSymbol
40. from sympy.vector import CoordSys3D, Cross, Curl, Dot, Divergence, Gradient
41. 
42. x, y, z, t, a, b, c = symbols('x y z t a b c')
43. k, m, n = symbols('k m n', integer=True)
44. 
45. 
46. def test_printmethod():
47.     class R(Abs):
48.         def _latex(self, printer):
49.             return "foo(%s)" % printer._print(self.args[0])
50.     assert latex(R(x)) == "foo(x)"
51. 
52.     class R(Abs):
53.         def _latex(self, printer):
54.             return "foo"
55.     assert latex(R(x)) == "foo"
56. 
57. 
58. def test_latex_basic():
59.     assert latex(1 + x) == "x + 1"
60.     assert latex(x**2) == "x^{2}"
61.     assert latex(x**(1 + x)) == "x^{x + 1}"
62.     assert latex(x**3 + x + 1 + x**2) == "x^{3} + x^{2} + x + 1"
63. 
64.     assert latex(2*x*y) == "2 x y"
65.     assert latex(2*x*y, mul_symbol='dot') == r"2 \cdot x \cdot y"
66. 
67.     assert latex(1/x) == r"\frac{1}{x}"
68.     assert latex(1/x, fold_short_frac=True) == "1 / x"
69.     assert latex(-S(3)/2) == r"- \frac{3}{2}"
70.     assert latex(-S(3)/2, fold_short_frac=True) == r"- 3 / 2"
71.     assert latex(1/x**2) == r"\frac{1}{x^{2}}"
72.     assert latex(1/(x + y)/2) == r"\frac{1}{2 \left(x + y\right)}"
73.     assert latex(x/2) == r"\frac{x}{2}"
74.     assert latex(x/2, fold_short_frac=True) == "x / 2"
75.     assert latex((x + y)/(2*x)) == r"\frac{x + y}{2 x}"
76.     assert latex((x + y)/(2*x), fold_short_frac=True) == \
77.         r"\left(x + y\right) / 2 x"
78.     assert latex((x + y)/(2*x), long_frac_ratio=0) == \
79.         r"\frac{1}{2 x} \left(x + y\right)"
80.     assert latex((x + y)/x) == r"\frac{1}{x} \left(x + y\right)"
81.     assert latex((x + y)/x, long_frac_ratio=3) == r"\frac{x + y}{x}"
82. 
83.     assert latex(2*Integral(x, x)/3) == r"\frac{2}{3} \int x\, dx"
84.     assert latex(2*Integral(x, x)/3, fold_short_frac=True) == \
85.         r"\left(2 \int x\, dx\right) / 3"
86. 
87.     assert latex(sqrt(x)) == r"\sqrt{x}"
88.     assert latex(x**Rational(1, 3)) == r"\sqrt[3]{x}"
89.     assert latex(sqrt(x)**3) == r"x^{\frac{3}{2}}"
90.     assert latex(sqrt(x), itex=True) == r"\sqrt{x}"
91.     assert latex(x**Rational(1, 3), itex=True) == r"\root{3}{x}"
92.     assert latex(sqrt(x)**3, itex=True) == r"x^{\frac{3}{2}}"
93.     assert latex(x**Rational(3, 4)) == r"x^{\frac{3}{4}}"
94.     assert latex(x**Rational(3, 4), fold_frac_powers=True) == "x^{3/4}"
95.     assert latex((x + 1)**Rational(3, 4)) == \
96.         r"\left(x + 1\right)^{\frac{3}{4}}"
97.     assert latex((x + 1)**Rational(3, 4), fold_frac_powers=True) == \
98.         r"\left(x + 1\right)^{3/4}"
99. 
100.     assert latex(1.5e20*x) == r"1.5 \cdot 10^{20} x"
101.     assert latex(1.5e20*x, mul_symbol='dot') == r"1.5 \cdot 10^{20} \cdot x"
102.     assert latex(1.5e20*x, mul_symbol='times') == r"1.5 \times 10^{20} \times x"
103. 
104.     assert latex(1/sin(x)) == r"\frac{1}{\sin{\left (x \right )}}"
105.     assert latex(sin(x)**-1) == r"\frac{1}{\sin{\left (x \right )}}"
106.     assert latex(sin(x)**Rational(3, 2)) == \
107.         r"\sin^{\frac{3}{2}}{\left (x \right )}"
108.     assert latex(sin(x)**Rational(3, 2), fold_frac_powers=True) == \
109.         r"\sin^{3/2}{\left (x \right )}"
110. 
111.     assert latex(~x) == r"\neg x"
112.     assert latex(x & y) == r"x \wedge y"
113.     assert latex(x & y & z) == r"x \wedge y \wedge z"
114.     assert latex(x | y) == r"x \vee y"
115.     assert latex(x | y | z) == r"x \vee y \vee z"
116.     assert latex((x & y) | z) == r"z \vee \left(x \wedge y\right)"
117.     assert latex(Implies(x, y)) == r"x \Rightarrow y"
118.     assert latex(~(x >> ~y)) == r"x \not\Rightarrow \neg y"
119.     assert latex(Implies(Or(x,y), z)) == r"\left(x \vee y\right) \Rightarrow z"
120.     assert latex(Implies(z, Or(x,y))) == r"z \Rightarrow \left(x \vee y\right)"
121. 
122.     assert latex(~x, symbol_names={x: "x_i"}) == r"\neg x_i"
123.     assert latex(x & y, symbol_names={x: "x_i", y: "y_i"}) == \
124.         r"x_i \wedge y_i"
125.     assert latex(x & y & z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
126.         r"x_i \wedge y_i \wedge z_i"
127.     assert latex(x | y, symbol_names={x: "x_i", y: "y_i"}) == r"x_i \vee y_i"
128.     assert latex(x | y | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
129.         r"x_i \vee y_i \vee z_i"
130.     assert latex((x & y) | z, symbol_names={x: "x_i", y: "y_i", z: "z_i"}) == \
131.         r"z_i \vee \left(x_i \wedge y_i\right)"
132.     assert latex(Implies(x, y), symbol_names={x: "x_i", y: "y_i"}) == \
133.         r"x_i \Rightarrow y_i"
134. 
135.     p = Symbol('p', positive=True)
136.     assert latex(exp(-p)*log(p)) == r"e^{- p} \log{\left (p \right )}"
137. 
138. 
139. def test_latex_builtins():
140.     assert latex(True) == r"\mathrm{True}"
141.     assert latex(False) == r"\mathrm{False}"
142.     assert latex(None) == r"\mathrm{None}"
143.     assert latex(true) == r"\mathrm{True}"
144.     assert latex(false) == r'\mathrm{False}'
145. 
146. 
147. def test_latex_SingularityFunction():
148.     assert latex(SingularityFunction(x, 4, 5)) == r"{\langle x - 4 \rangle}^{5}"
149.     assert latex(SingularityFunction(x, -3, 4)) == r"{\langle x + 3 \rangle}^{4}"
150.     assert latex(SingularityFunction(x, 0, 4)) == r"{\langle x \rangle}^{4}"
151.     assert latex(SingularityFunction(x, a, n)) == r"{\langle - a + x \rangle}^{n}"
152.     assert latex(SingularityFunction(x, 4, -2)) == r"{\langle x - 4 \rangle}^{-2}"
153.     assert latex(SingularityFunction(x, 4, -1)) == r"{\langle x - 4 \rangle}^{-1}"
154. 
155. def test_latex_cycle():
156.     assert latex(Cycle(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
157.     assert latex(Cycle(1, 2)(4, 5, 6)) == r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
158.     assert latex(Cycle()) == r"\left( \right)"
159. 
160. 
161. def test_latex_permutation():
162.     assert latex(Permutation(1, 2, 4)) == r"\left( 1\; 2\; 4\right)"
163.     assert latex(Permutation(1, 2)(4, 5, 6)) == r"\left( 1\; 2\right)\left( 4\; 5\; 6\right)"
164.     assert latex(Permutation()) == r"\left( \right)"
165.     assert latex(Permutation(2, 4)*Permutation(5)) == r"\left( 2\; 4\right)\left( 5\right)"
166.     assert latex(Permutation(5)) == r"\left( 5\right)"
167. 
168. 
169. def test_latex_Float():
170.     assert latex(Float(1.0e100)) == r"1.0 \cdot 10^{100}"
171.     assert latex(Float(1.0e-100)) == r"1.0 \cdot 10^{-100}"
172.     assert latex(Float(1.0e-100), mul_symbol="times") == r"1.0 \times 10^{-100}"
173.     assert latex(1.0*oo) == r"\infty"
174.     assert latex(-1.0*oo) == r"- \infty"
175. 
176. 
177. def test_latex_vector_expressions():
178.     A = CoordSys3D('A')
179. 
180.     assert latex(Cross(A.i, A.j*A.x*3+A.k)) == r"\mathbf{\hat{i}_{A}} \times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
181.     assert latex(Cross(A.i, A.j)) == r"\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}"
182.     assert latex(x*Cross(A.i, A.j)) == r"x \left(\mathbf{\hat{i}_{A}} \times \mathbf{\hat{j}_{A}}\right)"
183.     assert latex(Cross(x*A.i, A.j)) == r'- \mathbf{\hat{j}_{A}} \times \left((x)\mathbf{\hat{i}_{A}}\right)'
184. 
185.     assert latex(Curl(3*A.x*A.j)) == r"\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
186.     assert latex(Curl(3*A.x*A.j+A.i)) == r"\nabla\times \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
187.     assert latex(Curl(3*x*A.x*A.j)) == r"\nabla\times \left((3 \mathbf{{x}_{A}} x)\mathbf{\hat{j}_{A}}\right)"
188.     assert latex(x*Curl(3*A.x*A.j)) == r"x \left(\nabla\times \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
189. 
190.     assert latex(Divergence(3*A.x*A.j+A.i)) == r"\nabla\cdot \left(\mathbf{\hat{i}_{A}} + (3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
191.     assert latex(Divergence(3*A.x*A.j)) == r"\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)"
192.     assert latex(x*Divergence(3*A.x*A.j)) == r"x \left(\nabla\cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}}\right)\right)"
193. 
194.     assert latex(Dot(A.i, A.j*A.x*3+A.k)) == r"\mathbf{\hat{i}_{A}} \cdot \left((3 \mathbf{{x}_{A}})\mathbf{\hat{j}_{A}} + \mathbf{\hat{k}_{A}}\right)"
195.     assert latex(Dot(A.i, A.j)) == r"\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}"
196.     assert latex(Dot(x*A.i, A.j)) == r"\mathbf{\hat{j}_{A}} \cdot \left((x)\mathbf{\hat{i}_{A}}\right)"
197.     assert latex(x*Dot(A.i, A.j)) == r"x \left(\mathbf{\hat{i}_{A}} \cdot \mathbf{\hat{j}_{A}}\right)"
198. 
199.     assert latex(Gradient(A.x)) == r"\nabla\cdot \mathbf{{x}_{A}}"
200.     assert latex(Gradient(A.x + 3*A.y)) == r"\nabla\cdot \left(\mathbf{{x}_{A}} + 3 \mathbf{{y}_{A}}\right)"
201.     assert latex(x*Gradient(A.x)) == r"x \left(\nabla\cdot \mathbf{{x}_{A}}\right)"
202.     assert latex(Gradient(x*A.x)) == r"\nabla\cdot \left(\mathbf{{x}_{A}} x\right)"
203. 
204. 
205. def test_latex_symbols():
206.     Gamma, lmbda, rho = symbols('Gamma, lambda, rho')
207.     tau, Tau, TAU, taU = symbols('tau, Tau, TAU, taU')
208.     assert latex(tau) == r"\tau"
209.     assert latex(Tau) == "T"
210.     assert latex(TAU) == r"\tau"
211.     assert latex(taU) == r"\tau"
212.     # Check that all capitalized greek letters are handled explicitly
213.     capitalized_letters = set(l.capitalize() for l in greek_letters_set)
214.     assert len(capitalized_letters - set(tex_greek_dictionary.keys())) == 0
215.     assert latex(Gamma + lmbda) == r"\Gamma + \lambda"
216.     assert latex(Gamma * lmbda) == r"\Gamma \lambda"
217.     assert latex(Symbol('q1')) == r"q_{1}"
218.     assert latex(Symbol('q21')) == r"q_{21}"
219.     assert latex(Symbol('epsilon0')) == r"\epsilon_{0}"
220.     assert latex(Symbol('omega1')) == r"\omega_{1}"
221.     assert latex(Symbol('91')) == r"91"
222.     assert latex(Symbol('alpha_new')) == r"\alpha_{new}"
223.     assert latex(Symbol('C^orig')) == r"C^{orig}"
224.     assert latex(Symbol('x^alpha')) == r"x^{\alpha}"
225.     assert latex(Symbol('beta^alpha')) == r"\beta^{\alpha}"
226.     assert latex(Symbol('e^Alpha')) == r"e^{A}"
227.     assert latex(Symbol('omega_alpha^beta')) == r"\omega^{\beta}_{\alpha}"
228.     assert latex(Symbol('omega') ** Symbol('beta')) == r"\omega^{\beta}"
229. 
230. 
231. @XFAIL
232. def test_latex_symbols_failing():
233.     rho, mass, volume = symbols('rho, mass, volume')
234.     assert latex(
235.         volume * rho == mass) == r"\rho \mathrm{volume} = \mathrm{mass}"
236.     assert latex(volume / mass * rho == 1) == r"\rho \mathrm{volume} {\mathrm{mass}}^{(-1)} = 1"
237.     assert latex(mass**3 * volume**3) == r"{\mathrm{mass}}^{3} \cdot {\mathrm{volume}}^{3}"
238. 
239. 
240. def test_latex_functions():
241.     assert latex(exp(x)) == "e^{x}"
242.     assert latex(exp(1) + exp(2)) == "e + e^{2}"
243. 
244.     f = Function('f')
245.     assert latex(f(x)) == r'f{\left (x \right )}'
246.     assert latex(f) == r'f'
247. 
248.     g = Function('g')
249.     assert latex(g(x, y)) == r'g{\left (x,y \right )}'
250.     assert latex(g) == r'g'
251. 
252.     h = Function('h')
253.     assert latex(h(x, y, z)) == r'h{\left (x,y,z \right )}'
254.     assert latex(h) == r'h'
255. 
256.     Li = Function('Li')
257.     assert latex(Li) == r'\operatorname{Li}'
258.     assert latex(Li(x)) == r'\operatorname{Li}{\left (x \right )}'
259. 
260.     beta = Function('beta')
261. 
262.     # not to be confused with the beta function
263.     assert latex(beta(x)) == r"\beta{\left (x \right )}"
264.     assert latex(beta) == r"\beta"
265. 
266.     a1 = Function('a_1')
267. 
268.     assert latex(a1) == r"\operatorname{a_{1}}"
269.     assert latex(a1(x)) == r"\operatorname{a_{1}}{\left (x \right )}"
270. 
271.     # issue 5868
272.     omega1 = Function('omega1')
273.     assert latex(omega1) == r"\omega_{1}"
274.     assert latex(omega1(x)) == r"\omega_{1}{\left (x \right )}"
275. 
276.     assert latex(sin(x)) == r"\sin{\left (x \right )}"
277.     assert latex(sin(x), fold_func_brackets=True) == r"\sin {x}"
278.     assert latex(sin(2*x**2), fold_func_brackets=True) == \
279.         r"\sin {2 x^{2}}"
280.     assert latex(sin(x**2), fold_func_brackets=True) == \
281.         r"\sin {x^{2}}"
282. 
283.     assert latex(asin(x)**2) == r"\operatorname{asin}^{2}{\left (x \right )}"
284.     assert latex(asin(x)**2, inv_trig_style="full") == \
285.         r"\arcsin^{2}{\left (x \right )}"
286.     assert latex(asin(x)**2, inv_trig_style="power") == \
287.         r"\sin^{-1}{\left (x \right )}^{2}"
288.     assert latex(asin(x**2), inv_trig_style="power",
289.                  fold_func_brackets=True) == \
290.         r"\sin^{-1} {x^{2}}"
291. 
292.     assert latex(factorial(k)) == r"k!"
293.     assert latex(factorial(-k)) == r"\left(- k\right)!"
294. 
295.     assert latex(subfactorial(k)) == r"!k"
296.     assert latex(subfactorial(-k)) == r"!\left(- k\right)"
297. 
298.     assert latex(factorial2(k)) == r"k!!"
299.     assert latex(factorial2(-k)) == r"\left(- k\right)!!"
300. 
301.     assert latex(binomial(2, k)) == r"{\binom{2}{k}}"
302. 
303.     assert latex(FallingFactorial(3, k)) == r"{\left(3\right)}_{k}"
304.     assert latex(RisingFactorial(3, k)) == r"{3}^{\left(k\right)}"
305. 
306.     assert latex(floor(x)) == r"\lfloor{x}\rfloor"
307.     assert latex(ceiling(x)) == r"\lceil{x}\rceil"
308.     assert latex(Min(x, 2, x**3)) == r"\min\left(2, x, x^{3}\right)"
309.     assert latex(Min(x, y)**2) == r"\min\left(x, y\right)^{2}"
310.     assert latex(Max(x, 2, x**3)) == r"\max\left(2, x, x^{3}\right)"
311.     assert latex(Max(x, y)**2) == r"\max\left(x, y\right)^{2}"
312.     assert latex(Abs(x)) == r"\left|{x}\right|"
313.     assert latex(re(x)) == r"\Re{\left(x\right)}"
314.     assert latex(re(x + y)) == r"\Re{\left(x\right)} + \Re{\left(y\right)}"
315.     assert latex(im(x)) == r"\Im{x}"
316.     assert latex(conjugate(x)) == r"\overline{x}"
317.     assert latex(gamma(x)) == r"\Gamma{\left(x \right)}"
318.     w = Wild('w')
319.     assert latex(gamma(w)) == r"\Gamma{\left(w \right)}"
320.     assert latex(Order(x)) == r"\mathcal{O}\left(x\right)"
321.     assert latex(Order(x, x)) == r"\mathcal{O}\left(x\right)"
322.     assert latex(Order(x, (x, 0))) == r"\mathcal{O}\left(x\right)"
323.     assert latex(Order(x, (x, oo))) == r"\mathcal{O}\left(x; x\rightarrow \infty\right)"
324.     assert latex(Order(x - y, (x, y))) == r"\mathcal{O}\left(x - y; x\rightarrow y\right)"
325.     assert latex(Order(x, x, y)) == r"\mathcal{O}\left(x; \left ( x, \quad y\right )\rightarrow \left ( 0, \quad 0\right )\right)"
326.     assert latex(Order(x, x, y)) == r"\mathcal{O}\left(x; \left ( x, \quad y\right )\rightarrow \left ( 0, \quad 0\right )\right)"
327.     assert latex(Order(x, (x, oo), (y, oo))) == r"\mathcal{O}\left(x; \left ( x, \quad y\right )\rightarrow \left ( \infty, \quad \infty\right )\right)"
328.     assert latex(lowergamma(x, y)) == r'\gamma\left(x, y\right)'
329.     assert latex(uppergamma(x, y)) == r'\Gamma\left(x, y\right)'
330. 
331.     assert latex(cot(x)) == r'\cot{\left (x \right )}'
332.     assert latex(coth(x)) == r'\coth{\left (x \right )}'
333.     assert latex(re(x)) == r'\Re{\left(x\right)}'
334.     assert latex(im(x)) == r'\Im{x}'
335.     assert latex(root(x, y)) == r'x^{\frac{1}{y}}'
336.     assert latex(arg(x)) == r'\arg{\left (x \right )}'
337.     assert latex(zeta(x)) == r'\zeta\left(x\right)'
338. 
339.     assert latex(zeta(x)) == r"\zeta\left(x\right)"
340.     assert latex(zeta(x)**2) == r"\zeta^{2}\left(x\right)"
341.     assert latex(zeta(x, y)) == r"\zeta\left(x, y\right)"
342.     assert latex(zeta(x, y)**2) == r"\zeta^{2}\left(x, y\right)"
343.     assert latex(dirichlet_eta(x)) == r"\eta\left(x\right)"
344.     assert latex(dirichlet_eta(x)**2) == r"\eta^{2}\left(x\right)"
345.     assert latex(polylog(x, y)) == r"\operatorname{Li}_{x}\left(y\right)"
346.     assert latex(
347.         polylog(x, y)**2) == r"\operatorname{Li}_{x}^{2}\left(y\right)"
348.     assert latex(lerchphi(x, y, n)) == r"\Phi\left(x, y, n\right)"
349.     assert latex(lerchphi(x, y, n)**2) == r"\Phi^{2}\left(x, y, n\right)"
350. 
351.     assert latex(elliptic_k(z)) == r"K\left(z\right)"
352.     assert latex(elliptic_k(z)**2) == r"K^{2}\left(z\right)"
353.     assert latex(elliptic_f(x, y)) == r"F\left(x\middle| y\right)"
354.     assert latex(elliptic_f(x, y)**2) == r"F^{2}\left(x\middle| y\right)"
355.     assert latex(elliptic_e(x, y)) == r"E\left(x\middle| y\right)"
356.     assert latex(elliptic_e(x, y)**2) == r"E^{2}\left(x\middle| y\right)"
357.     assert latex(elliptic_e(z)) == r"E\left(z\right)"
358.     assert latex(elliptic_e(z)**2) == r"E^{2}\left(z\right)"
359.     assert latex(elliptic_pi(x, y, z)) == r"\Pi\left(x; y\middle| z\right)"
360.     assert latex(elliptic_pi(x, y, z)**2) == \
361.         r"\Pi^{2}\left(x; y\middle| z\right)"
362.     assert latex(elliptic_pi(x, y)) == r"\Pi\left(x\middle| y\right)"
363.     assert latex(elliptic_pi(x, y)**2) == r"\Pi^{2}\left(x\middle| y\right)"
364. 
365.     assert latex(Ei(x)) == r'\operatorname{Ei}{\left (x \right )}'
366.     assert latex(Ei(x)**2) == r'\operatorname{Ei}^{2}{\left (x \right )}'
367.     assert latex(expint(x, y)**2) == r'\operatorname{E}_{x}^{2}\left(y\right)'
368.     assert latex(Shi(x)**2) == r'\operatorname{Shi}^{2}{\left (x \right )}'
369.     assert latex(Si(x)**2) == r'\operatorname{Si}^{2}{\left (x \right )}'
370.     assert latex(Ci(x)**2) == r'\operatorname{Ci}^{2}{\left (x \right )}'
371.     assert latex(Chi(x)**2) == r'\operatorname{Chi}^{2}{\left (x \right )}'
372.     assert latex(Chi(x)) == r'\operatorname{Chi}{\left (x \right )}'
373. 
374.     assert latex(
375.         jacobi(n, a, b, x)) == r'P_{n}^{\left(a,b\right)}\left(x\right)'
376.     assert latex(jacobi(n, a, b, x)**2) == r'\left(P_{n}^{\left(a,b\right)}\left(x\right)\right)^{2}'
377.     assert latex(
378.         gegenbauer(n, a, x)) == r'C_{n}^{\left(a\right)}\left(x\right)'
379.     assert latex(gegenbauer(n, a, x)**2) == r'\left(C_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
380.     assert latex(chebyshevt(n, x)) == r'T_{n}\left(x\right)'
381.     assert latex(
382.         chebyshevt(n, x)**2) == r'\left(T_{n}\left(x\right)\right)^{2}'
383.     assert latex(chebyshevu(n, x)) == r'U_{n}\left(x\right)'
384.     assert latex(
385.         chebyshevu(n, x)**2) == r'\left(U_{n}\left(x\right)\right)^{2}'
386.     assert latex(legendre(n, x)) == r'P_{n}\left(x\right)'
387.     assert latex(legendre(n, x)**2) == r'\left(P_{n}\left(x\right)\right)^{2}'
388.     assert latex(
389.         assoc_legendre(n, a, x)) == r'P_{n}^{\left(a\right)}\left(x\right)'
390.     assert latex(assoc_legendre(n, a, x)**2) == r'\left(P_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
391.     assert latex(laguerre(n, x)) == r'L_{n}\left(x\right)'
392.     assert latex(laguerre(n, x)**2) == r'\left(L_{n}\left(x\right)\right)^{2}'
393.     assert latex(
394.         assoc_laguerre(n, a, x)) == r'L_{n}^{\left(a\right)}\left(x\right)'
395.     assert latex(assoc_laguerre(n, a, x)**2) == r'\left(L_{n}^{\left(a\right)}\left(x\right)\right)^{2}'
396.     assert latex(hermite(n, x)) == r'H_{n}\left(x\right)'
397.     assert latex(hermite(n, x)**2) == r'\left(H_{n}\left(x\right)\right)^{2}'
398. 
399.     theta = Symbol("theta", real=True)
400.     phi = Symbol("phi", real=True)
401.     assert latex(Ynm(n,m,theta,phi)) == r'Y_{n}^{m}\left(\theta,\phi\right)'
402.     assert latex(Ynm(n, m, theta, phi)**3) == r'\left(Y_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
403.     assert latex(Znm(n,m,theta,phi)) == r'Z_{n}^{m}\left(\theta,\phi\right)'
404.     assert latex(Znm(n, m, theta, phi)**3) == r'\left(Z_{n}^{m}\left(\theta,\phi\right)\right)^{3}'
405. 
406.     # Test latex printing of function names with "_"
407.     assert latex(
408.         polar_lift(0)) == r"\operatorname{polar\_lift}{\left (0 \right )}"
409.     assert latex(polar_lift(
410.         0)**3) == r"\operatorname{polar\_lift}^{3}{\left (0 \right )}"
411. 
412.     assert latex(totient(n)) == r'\phi\left(n\right)'
413.     assert latex(totient(n) ** 2) == r'\left(\phi\left(n\right)\right)^{2}'
414. 
415.     assert latex(reduced_totient(n)) == r'\lambda\left(n\right)'
416.     assert latex(reduced_totient(n) ** 2) == r'\left(\lambda\left(n\right)\right)^{2}'
417. 
418.     assert latex(divisor_sigma(x)) == r"\sigma\left(x\right)"
419.     assert latex(divisor_sigma(x)**2) == r"\sigma^{2}\left(x\right)"
420.     assert latex(divisor_sigma(x, y)) == r"\sigma_y\left(x\right)"
421.     assert latex(divisor_sigma(x, y)**2) == r"\sigma^{2}_y\left(x\right)"
422. 
423.     assert latex(udivisor_sigma(x)) == r"\sigma^*\left(x\right)"
424.     assert latex(udivisor_sigma(x)**2) == r"\sigma^*^{2}\left(x\right)"
425.     assert latex(udivisor_sigma(x, y)) == r"\sigma^*_y\left(x\right)"
426.     assert latex(udivisor_sigma(x, y)**2) == r"\sigma^*^{2}_y\left(x\right)"
427. 
428.     assert latex(primenu(n)) == r'\nu\left(n\right)'
429.     assert latex(primenu(n) ** 2) == r'\left(\nu\left(n\right)\right)^{2}'
430. 
431.     assert latex(primeomega(n)) == r'\Omega\left(n\right)'
432.     assert latex(primeomega(n) ** 2) == r'\left(\Omega\left(n\right)\right)^{2}'
433. 
434.     assert latex(Mod(x, 7)) == r'x\bmod{7}'
435.     assert latex(Mod(x + 1, 7)) == r'\left(x + 1\right)\bmod{7}'
436.     assert latex(Mod(2 * x, 7)) == r'2 x\bmod{7}'
437.     assert latex(Mod(x, 7) + 1) == r'\left(x\bmod{7}\right) + 1'
438.     assert latex(2 * Mod(x, 7)) == r'2 \left(x\bmod{7}\right)'
439. 
440.     # some unknown function name should get rendered with \operatorname
441.     fjlkd = Function('fjlkd')
442.     assert latex(fjlkd(x)) == r'\operatorname{fjlkd}{\left (x \right )}'
443.     # even when it is referred to without an argument
444.     assert latex(fjlkd) == r'\operatorname{fjlkd}'
445. 
446. 
447. def test_hyper_printing():
448.     from sympy import pi
449.     from sympy.abc import x, z
450. 
451.     assert latex(meijerg(Tuple(pi, pi, x), Tuple(1),
452.                          (0, 1), Tuple(1, 2, 3/pi), z)) == \
453.         r'{G_{4, 5}^{2, 3}\left(\begin{matrix} \pi, \pi, x & 1 \\0, 1 & 1, 2, \frac{3}{\pi} \end{matrix} \middle| {z} \right)}'
454.     assert latex(meijerg(Tuple(), Tuple(1), (0,), Tuple(), z)) == \
455.         r'{G_{1, 1}^{1, 0}\left(\begin{matrix}  & 1 \\0 &  \end{matrix} \middle| {z} \right)}'
456.     assert latex(hyper((x, 2), (3,), z)) == \
457.         r'{{}_{2}F_{1}\left(\begin{matrix} x, 2 ' \
458.         r'\\ 3 \end{matrix}\middle| {z} \right)}'
459.     assert latex(hyper(Tuple(), Tuple(1), z)) == \
460.         r'{{}_{0}F_{1}\left(\begin{matrix}  ' \
461.         r'\\ 1 \end{matrix}\middle| {z} \right)}'
462. 
463. 
464. def test_latex_bessel():
465.     from sympy.functions.special.bessel import (besselj, bessely, besseli,
466.             besselk, hankel1, hankel2, jn, yn, hn1, hn2)
467.     from sympy.abc import z
468.     assert latex(besselj(n, z**2)**k) == r'J^{k}_{n}\left(z^{2}\right)'
469.     assert latex(bessely(n, z)) == r'Y_{n}\left(z\right)'
470.     assert latex(besseli(n, z)) == r'I_{n}\left(z\right)'
471.     assert latex(besselk(n, z)) == r'K_{n}\left(z\right)'
472.     assert latex(hankel1(n, z**2)**2) == \
473.         r'\left(H^{(1)}_{n}\left(z^{2}\right)\right)^{2}'
474.     assert latex(hankel2(n, z)) == r'H^{(2)}_{n}\left(z\right)'
475.     assert latex(jn(n, z)) == r'j_{n}\left(z\right)'
476.     assert latex(yn(n, z)) == r'y_{n}\left(z\right)'
477.     assert latex(hn1(n, z)) == r'h^{(1)}_{n}\left(z\right)'
478.     assert latex(hn2(n, z)) == r'h^{(2)}_{n}\left(z\right)'
479. 
480. 
481. def test_latex_fresnel():
482.     from sympy.functions.special.error_functions import (fresnels, fresnelc)
483.     from sympy.abc import z
484.     assert latex(fresnels(z)) == r'S\left(z\right)'
485.     assert latex(fresnelc(z)) == r'C\left(z\right)'
486.     assert latex(fresnels(z)**2) == r'S^{2}\left(z\right)'
487.     assert latex(fresnelc(z)**2) == r'C^{2}\left(z\right)'
488. 
489. 
490. def test_latex_brackets():
491.     assert latex((-1)**x) == r"\left(-1\right)^{x}"
492. 
493. 
494. def test_latex_indexed():
495.     Psi_symbol = Symbol('Psi_0', complex=True, real=False)
496.     Psi_indexed = IndexedBase(Symbol('Psi', complex=True, real=False))
497.     symbol_latex = latex(Psi_symbol * conjugate(Psi_symbol))
498.     indexed_latex = latex(Psi_indexed[0] * conjugate(Psi_indexed[0]))
499.     # \\overline{\\Psi_{0}} \\Psi_{0}   vs.   \\Psi_{0} \\overline{\\Psi_{0}}
500.     assert symbol_latex.split() == indexed_latex.split() \
501.         or symbol_latex.split() == indexed_latex.split()[::-1]
502. 
503.     # Symbol('gamma') gives r'\gamma'
504.     assert latex(IndexedBase('gamma')) == r'\gamma'
505.     assert latex(IndexedBase('a b')) == 'a b'
506.     assert latex(IndexedBase('a_b')) == 'a_{b}'
507. 
508. 
509. def test_latex_derivatives():
510.     # regular "d" for ordinary derivatives
511.     assert latex(diff(x**3, x, evaluate=False)) == \
512.         r"\frac{d}{d x} x^{3}"
513.     assert latex(diff(sin(x) + x**2, x, evaluate=False)) == \
514.         r"\frac{d}{d x} \left(x^{2} + \sin{\left (x \right )}\right)"
515.     assert latex(diff(diff(sin(x) + x**2, x, evaluate=False), evaluate=False)) == \
516.         r"\frac{d^{2}}{d x^{2}} \left(x^{2} + \sin{\left (x \right )}\right)"
517.     assert latex(diff(diff(diff(sin(x) + x**2, x, evaluate=False), evaluate=False), evaluate=False)) == \
518.         r"\frac{d^{3}}{d x^{3}} \left(x^{2} + \sin{\left (x \right )}\right)"
519. 
520.     # \partial for partial derivatives
521.     assert latex(diff(sin(x * y), x, evaluate=False)) == \
522.         r"\frac{\partial}{\partial x} \sin{\left (x y \right )}"
523.     assert latex(diff(sin(x * y) + x**2, x, evaluate=False)) == \
524.         r"\frac{\partial}{\partial x} \left(x^{2} + \sin{\left (x y \right )}\right)"
525.     assert latex(diff(diff(sin(x*y) + x**2, x, evaluate=False), x, evaluate=False)) == \
526.         r"\frac{\partial^{2}}{\partial x^{2}} \left(x^{2} + \sin{\left (x y \right )}\right)"
527.     assert latex(diff(diff(diff(sin(x*y) + x**2, x, evaluate=False), x, evaluate=False), x, evaluate=False)) == \
528.         r"\frac{\partial^{3}}{\partial x^{3}} \left(x^{2} + \sin{\left (x y \right )}\right)"
529. 
530.     # mixed partial derivatives
531.     f = Function("f")
532.     assert latex(diff(diff(f(x,y), x, evaluate=False), y, evaluate=False)) == \
533.         r"\frac{\partial^{2}}{\partial y\partial x} " + latex(f(x,y))
534. 
535.     assert latex(diff(diff(diff(f(x,y), x, evaluate=False), x, evaluate=False), y, evaluate=False)) == \
536.         r"\frac{\partial^{3}}{\partial y\partial x^{2}} " + latex(f(x,y))
537. 
538.     # use ordinary d when one of the variables has been integrated out
539.     assert latex(diff(Integral(exp(-x * y), (x, 0, oo)), y, evaluate=False)) == \
540.         r"\frac{d}{d y} \int_{0}^{\infty} e^{- x y}\, dx"
541. 
542.     # Derivative wrapped in power:
543.     assert latex(diff(x, x, evaluate=False)**2) == \
544.         r"\left(\frac{d}{d x} x\right)^{2}"
545. 
546.     assert latex(diff(f(x), x)**2) == \
547.         r"\left(\frac{d}{d x} f{\left (x \right )}\right)^{2}"
548. 
549.     assert latex(diff(f(x), (x, n))) == \
550.         r"\frac{d^{n}}{d x^{n}} f{\left (x \right )}"
551. 
552. 
553. def test_latex_subs():
554.     assert latex(Subs(x*y, (
555.         x, y), (1, 2))) == r'\left. x y \right|_{\substack{ x=1\\ y=2 }}'
556. 
557. 
558. def test_latex_integrals():
559.     assert latex(Integral(log(x), x)) == r"\int \log{\left (x \right )}\, dx"
560.     assert latex(Integral(x**2, (x, 0, 1))) == r"\int_{0}^{1} x^{2}\, dx"
561.     assert latex(Integral(x**2, (x, 10, 20))) == r"\int_{10}^{20} x^{2}\, dx"
562.     assert latex(Integral(
563.         y*x**2, (x, 0, 1), y)) == r"\int\int_{0}^{1} x^{2} y\, dx\, dy"
564.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*') \
565.         == r"\begin{equation*}\int\int\limits_{0}^{1} x^{2} y\, dx\, dy\end{equation*}"
566.     assert latex(Integral(y*x**2, (x, 0, 1), y), mode='equation*', itex=True) \
567.         == r"$$\int\int_{0}^{1} x^{2} y\, dx\, dy$$"
568.     assert latex(Integral(x, (x, 0))) == r"\int^{0} x\, dx"
569.     assert latex(Integral(x*y, x, y)) == r"\iint x y\, dx\, dy"
570.     assert latex(Integral(x*y*z, x, y, z)) == r"\iiint x y z\, dx\, dy\, dz"
571.     assert latex(Integral(x*y*z*t, x, y, z, t)) == \
572.         r"\iiiint t x y z\, dx\, dy\, dz\, dt"
573.     assert latex(Integral(x, x, x, x, x, x, x)) == \
574.         r"\int\int\int\int\int\int x\, dx\, dx\, dx\, dx\, dx\, dx"
575.     assert latex(Integral(x, x, y, (z, 0, 1))) == \
576.         r"\int_{0}^{1}\int\int x\, dx\, dy\, dz"
577. 
578.     # fix issue #10806
579.     assert latex(Integral(z, z)**2) == r"\left(\int z\, dz\right)^{2}"
580.     assert latex(Integral(x + z, z)) == r"\int \left(x + z\right)\, dz"
581.     assert latex(Integral(x+z/2, z)) == r"\int \left(x + \frac{z}{2}\right)\, dz"
582.     assert latex(Integral(x**y, z)) == r"\int x^{y}\, dz"
583. 
584. 
585. def test_latex_sets():
586.     for s in (frozenset, set):
587.         assert latex(s([x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
588.         assert latex(s(range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
589.         assert latex(s(range(1, 13))) == \
590.             r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
591. 
592.     s = FiniteSet
593.     assert latex(s(*[x*y, x**2])) == r"\left\{x^{2}, x y\right\}"
594.     assert latex(s(*range(1, 6))) == r"\left\{1, 2, 3, 4, 5\right\}"
595.     assert latex(s(*range(1, 13))) == \
596.         r"\left\{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12\right\}"
597. 
598. 
599. def test_latex_Range():
600.     assert latex(Range(1, 51)) == \
601.         r'\left\{1, 2, \ldots, 50\right\}'
602.     assert latex(Range(1, 4)) == r'\left\{1, 2, 3\right\}'
603. 
604.     assert latex(Range(0, 3, 1)) == r'\left\{0, 1, 2\right\}'
605. 
606.     assert latex(Range(0, 30, 1)) == r'\left\{0, 1, \ldots, 29\right\}'
607. 
608.     assert latex(Range(30, 1, -1)) == r'\left\{30, 29, \ldots, 2\right\}'
609. 
610.     assert latex(Range(0, oo, 2)) == r'\left\{0, 2, \ldots, \infty\right\}'
611. 
612.     assert latex(Range(oo, -2, -2)) == r'\left\{\infty, \ldots, 2, 0\right\}'
613. 
614.     assert latex(Range(-2, -oo, -1)) == r'\left\{-2, -3, \ldots, -\infty\right\}'
615. 
616. 
617. def test_latex_sequences():
618.     s1 = SeqFormula(a**2, (0, oo))
619.     s2 = SeqPer((1, 2))
620. 
621.     latex_str = r'\left\[0, 1, 4, 9, \ldots\right\]'
622.     assert latex(s1) == latex_str
623. 
624.     latex_str = r'\left\[1, 2, 1, 2, \ldots\right\]'
625.     assert latex(s2) == latex_str
626. 
627.     s3 = SeqFormula(a**2, (0, 2))
628.     s4 = SeqPer((1, 2), (0, 2))
629. 
630.     latex_str = r'\left\[0, 1, 4\right\]'
631.     assert latex(s3) == latex_str
632. 
633.     latex_str = r'\left\[1, 2, 1\right\]'
634.     assert latex(s4) == latex_str
635. 
636.     s5 = SeqFormula(a**2, (-oo, 0))
637.     s6 = SeqPer((1, 2), (-oo, 0))
638. 
639.     latex_str = r'\left\[\ldots, 9, 4, 1, 0\right\]'
640.     assert latex(s5) == latex_str
641. 
642.     latex_str = r'\left\[\ldots, 2, 1, 2, 1\right\]'
643.     assert latex(s6) == latex_str
644. 
645.     latex_str = r'\left\[1, 3, 5, 11, \ldots\right\]'
646.     assert latex(SeqAdd(s1, s2)) == latex_str
647. 
648.     latex_str = r'\left\[1, 3, 5\right\]'
649.     assert latex(SeqAdd(s3, s4)) == latex_str
650. 
651.     latex_str = r'\left\[\ldots, 11, 5, 3, 1\right\]'
652.     assert latex(SeqAdd(s5, s6)) == latex_str
653. 
654.     latex_str = r'\left\[0, 2, 4, 18, \ldots\right\]'
655.     assert latex(SeqMul(s1, s2)) == latex_str
656. 
657.     latex_str = r'\left\[0, 2, 4\right\]'
658.     assert latex(SeqMul(s3, s4)) == latex_str
659. 
660.     latex_str = r'\left\[\ldots, 18, 4, 2, 0\right\]'
661.     assert latex(SeqMul(s5, s6)) == latex_str
662. 
663. 
664. def test_latex_FourierSeries():
665.     latex_str = r'2 \sin{\left (x \right )} - \sin{\left (2 x \right )} + \frac{2}{3} \sin{\left (3 x \right )} + \ldots'
666.     assert latex(fourier_series(x, (x, -pi, pi))) == latex_str
667. 
668. 
669. def test_latex_FormalPowerSeries():
670.     latex_str = r'\sum_{k=1}^{\infty} - \frac{\left(-1\right)^{- k}}{k} x^{k}'
671.     assert latex(fps(log(1 + x))) == latex_str
672. 
673. 
674. def test_latex_intervals():
675.     a = Symbol('a', real=True)
676.     assert latex(Interval(0, 0)) == r"\left\{0\right\}"
677.     assert latex(Interval(0, a)) == r"\left[0, a\right]"
678.     assert latex(Interval(0, a, False, False)) == r"\left[0, a\right]"
679.     assert latex(Interval(0, a, True, False)) == r"\left(0, a\right]"
680.     assert latex(Interval(0, a, False, True)) == r"\left[0, a\right)"
681.     assert latex(Interval(0, a, True, True)) == r"\left(0, a\right)"
682. 
683. 
684. def test_latex_AccumuBounds():
685.     a = Symbol('a', real=True)
686.     assert latex(AccumBounds(0, 1)) == r"\langle 0, 1\rangle"
687.     assert latex(AccumBounds(0, a)) == r"\langle 0, a\rangle"
688.     assert latex(AccumBounds(a + 1, a + 2)) == r"\langle a + 1, a + 2\rangle"
689. 
690. 
691. def test_latex_emptyset():


File: sympy/printing/tests/test_latex.py
Line number range: 691 - 692
Content:
def test_latex_emptyset():
    assert latex(S.EmptySet) == r"\emptyset"


File: sympy/printing/tests/test_latex.py
Line number range: 717 - 718
Content:
def test_latex_Complexes():
    assert latex(S.Complexes) == r"\mathbb{C}"


File: sympy/printing/tests/test_latex.py
Line number range: 730 - 731
Content:
def test_latex_Naturals():
    assert latex(S.Naturals) == r"\mathbb{N}"


File: sympy/printing/tests/test_latex.py
Line number range: 738 - 739
Content:
def test_latex_Integers():
    assert latex(S.Integers) == r"\mathbb{Z}"


File: sympy/printing/tests/test_latex.py
Line number range: 1387 - 1389
Content:
def test_imaginary():
    i = sqrt(-1)
    assert latex(i) == r'i'

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 21:01:17,225 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full block of import statements from the top of the file `sympy/printing/tests/test_latex.py`.\n   - The extra requirements specify to include all lines from the beginning of the file until the first test function definition.\n2. Extended relevance:\n   - This block contains all the necessary imports and symbol definitions required to run the tests in the file. The first test function, `test_printmethod`, starts at line 46, so the context should end at line 45 to fulfill the user's request.", relative_path='sympy/printing/tests/test_latex.py', start_line=1, end_line=45)]
2025-12-21 21:01:17,226 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full block of import statements from the top of the file `sympy/printing/tests/test_latex.py`.
2025-12-21 21:01:17,226 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 21:01:17,226 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 21:01:17,227 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 7 existing contexts
2025-12-21 21:01:17,227 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 5 duplicates)
2025-12-21 21:01:17,228 - thread-126204409546432.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-21 21:01:17,228 - thread-126204409546432.prometheus_context_collector - INFO - Successfully retrieved 3 context snippets
