2025-12-21 08:43:43,075 - thread-124313732646592.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: [ENH]: Add get/set_antialiased to Text objects

Description: ### Problem

Currently, Text objects always retrieve their antialiasing state via the global rcParams["text.antialias"], unlike other artists for which this can be configured on a per-artist basis via `set_antialiased` (and read via `set_antialiased`).

### Proposed solution

Add similar getters/setters on Text objects (also adjusting Annotations accordingly, if needed) and use that info in the drawing stage.

Should be relatively easy to implement, except that the slight fiddling needed with backends requires some understanding of backend code (I think we need to replace the access to `rcParams["text.antialiased"]` by going through the GraphicsContext state).

Patch information:
diff --git a/lib/matplotlib/backends/backend_agg.py b/lib/matplotlib/backends/backend_agg.py
index 7d038a998f..1e43736fd9 100644
--- a/lib/matplotlib/backends/backend_agg.py
+++ b/lib/matplotlib/backends/backend_agg.py
@@ -206,7 +206,7 @@ class RendererAgg(RendererBase):
         # space) in the following call to draw_text_image).
         font.set_text(s, 0, flags=get_hinting_flag())
         font.draw_glyphs_to_bitmap(
-            antialiased=mpl.rcParams['text.antialiased'])
+            antialiased=bool(gc.get_antialiased()))
         d = font.get_descent() / 64.0
         # The descent needs to be adjusted for the angle.
         xo, yo = font.get_bitmap_offset()
diff --git a/lib/matplotlib/backends/backend_cairo.py b/lib/matplotlib/backends/backend_cairo.py
index 9ccadcdf1c..7f1888b4dd 100644
--- a/lib/matplotlib/backends/backend_cairo.py
+++ b/lib/matplotlib/backends/backend_cairo.py
@@ -205,7 +205,7 @@ class RendererCairo(RendererBase):
             ctx.set_font_size(self.points_to_pixels(prop.get_size_in_points()))
             opts = cairo.FontOptions()
             opts.set_antialias(
-                cairo.ANTIALIAS_DEFAULT if mpl.rcParams["text.antialiased"]
+                cairo.ANTIALIAS_DEFAULT if gc.get_antialiased()
                 else cairo.ANTIALIAS_NONE)
             ctx.set_font_options(opts)
             if angle:
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index 4591316cf9..285d06960f 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -167,6 +167,7 @@ class Text(Artist):
         transform_rotates_text=False,
         linespacing=None,
         rotation_mode=None,
+        antialiased=None,
     ):
         self.set_text(text)
         self.set_color(
@@ -187,6 +188,7 @@ class Text(Artist):
             linespacing = 1.2  # Maybe use rcParam later.
         self.set_linespacing(linespacing)
         self.set_rotation_mode(rotation_mode)
+        self.set_antialiased(antialiased)
 
     def update(self, kwargs):
         # docstring inherited
@@ -309,6 +311,24 @@ class Text(Artist):
         """Return the text rotation mode."""
         return self._rotation_mode
 
+    def get_antialiased(self):
+        """Return whether antialiasing is used for drawing text."""
+        return self._antialiased
+
+    def set_antialiased(self, aa):
+        """
+        Set whether to use antialiased rendering for this text.
+
+        Parameters
+        ----------
+        aa : bool or None
+            If None, defaults to rcParams['text.antialiased'].
+        """
+        if aa is None:
+            aa = mpl.rcParams['text.antialiased']
+        self._antialiased = aa
+        self.stale = True
+
     def update_from(self, other):
         # docstring inherited
         super().update_from(other)
@@ -736,6 +756,7 @@ class Text(Artist):
             gc = renderer.new_gc()
             gc.set_foreground(self.get_color())
             gc.set_alpha(self.get_alpha())
+            gc.set_antialiased(self.get_antialiased())
             gc.set_url(self._url)
             self._set_gc_clip(gc)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-21 08:43:43,234 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   ├── deploy-docs.sh
|   └── fetch_doc_logs.py
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── cygwin.yml
|       ├── good-first-issue.yml
|       ├── mypy-stubtest.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       ├── stale.yml
|       └── tests.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   ├── codespell-ignore-words.txt
|   ├── export_sdist_name.py
|   └── mypy-stubtest-allowlist.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── markers
|   |   ├── mpl.css
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   ├── autosummary_class_only.rst
|   |   ├── cheatsheet_sidebar.html
|   |   ├── donate_sidebar.html
|   |   ├── function.rst
|   |   ├── pagesource.html
|   |   ├── search.html
|   |   ├── sidebar_announcement.html
|   |   └── sidebar_versions.html
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24661-AAMW.rst
|   |   |   |   ├── 25044-YI.rst
|   |   |   |   ├── 25061-DS.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25112-GG.rst
|   |   |   |   ├── 25192-DS.rst
|   |   |   |   ├── 25255-RR.rst
|   |   |   |   ├── 25456-AL.rst
|   |   |   |   └── 25697-AL.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23200-OG.rst
|   |   |   |   ├── 24312-AL.rst
|   |   |   |   ├── 24913-AL.rst
|   |   |   |   ├── 24985-OG.rst
|   |   |   |   ├── 24990-OG.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25138-AL.rst
|   |   |   |   ├── 25282-AL.rst
|   |   |   |   ├── 25352-GL.rst
|   |   |   |   ├── 25427-AL.rst
|   |   |   |   ├── 25469-AL.rst
|   |   |   |   ├── 25484-AL.rst
|   |   |   |   ├── 25557-AL.rst
|   |   |   |   ├── 25559-AL.rst
|   |   |   |   ├── 25584-KS.rst
|   |   |   |   ├── 25588-KS.rst
|   |   |   |   ├── 25651-REC.rst
|   |   |   |   ├── 25708-AL.rst
|   |   |   |   ├── 25728-OG.rst
|   |   |   |   ├── 25742-ES.rst
|   |   |   |   ├── 25774-AL.rst
|   |   |   |   ├── 25781-AL.rst
|   |   |   |   ├── 25841-AL.rst
|   |   |   |   ├── 25859-ES.rst
|   |   |   |   └── 25889-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24919-KS.rst
|   |   |   |   ├── 24976-KS.rst
|   |   |   |   └── 25475-ES.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24923-ES.rst
|   |   |       ├── 24984-OG.rst
|   |   |       ├── 24XXX-OG.rst
|   |   |       ├── 25456-AL.rst
|   |   |       ├── 25584-KS.rst
|   |   |       └── 25648-TS.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.6.0.rst
|   |   |   ├── api_changes_3.6.1.rst
|   |   |   ├── api_changes_3.7.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.7.0.rst
|   |   ├── projections
|   |   |   ├── geo.rst
|   |   |   └── polar.rst
|   |   ├── projections_api.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── typing_api.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contributing.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── documenting_mpl.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── maintainer_workflow.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_plots_shareview.rst
|       |   ├── README.rst
|       |   ├── auto_minor_tick.rst
|       |   ├── ecdf.rst
|       |   ├── get_suptitle.rst
|       |   ├── mathtext_supports_text.rst
|       |   ├── new_color_spec_tuple.rst
|       |   ├── pie_hatch.rst
|       |   ├── pie_shadow_control.rst
|       |   ├── savefig_bbox_layout.rst
|       |   ├── shadow_shade.rst
|       |   ├── spinesproxyset.rst
|       |   ├── tick_labelfont_param.rst
|       |   ├── updated_mathtext.rst
|       |   └── widget_button_styling.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── github_stats_3.6.0.rst
|       |   ├── github_stats_3.6.1.rst
|       |   ├── github_stats_3.6.2.rst
|       |   ├── github_stats_3.6.3.rst
|       |   ├── github_stats_3.7.0.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   ├── whats_new_3.6.0.rst
|       |   └── whats_new_3.7.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── galleries
|   ├── examples
|   |   ├── README.txt
|   |   ├── animation
|   |   |   ├── README.txt
|   |   |   ├── animate_decay.py
|   |   |   ├── animated_histogram.py
|   |   |   ├── animation_demo.py
|   |   |   ├── bayes_update.py
|   |   |   ├── double_pendulum.py
|   |   |   ├── dynamic_image.py
|   |   |   ├── frame_grabbing_sgskip.py
|   |   |   ├── multiple_axes.py
|   |   |   ├── pause_resume.py
|   |   |   ├── rain.py
|   |   |   ├── random_walk.py
|   |   |   ├── simple_anim.py
|   |   |   ├── simple_scatter.py
|   |   |   ├── strip_chart.py
|   |   |   └── unchained.py
|   |   ├── axes_grid1
|   |   |   ├── README.txt
|   |   |   ├── demo_anchored_direction_arrows.py
|   |   |   ├── demo_axes_divider.py
|   |   |   ├── demo_axes_grid.py
|   |   |   ├── demo_axes_grid2.py
|   |   |   ├── demo_axes_hbox_divider.py
|   |   |   ├── demo_axes_rgb.py
|   |   |   ├── demo_colorbar_of_inset_axes.py
|   |   |   ├── demo_colorbar_with_axes_divider.py
|   |   |   ├── demo_colorbar_with_inset_locator.py
|   |   |   ├── demo_edge_colorbar.py
|   |   |   ├── demo_fixed_size_axes.py
|   |   |   ├── demo_imagegrid_aspect.py
|   |   |   ├── inset_locator_demo.py
|   |   |   ├── inset_locator_demo2.py
|   |   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   |   ├── parasite_simple.py
|   |   |   ├── parasite_simple2.py
|   |   |   ├── scatter_hist_locatable_axes.py
|   |   |   ├── simple_anchored_artists.py
|   |   |   ├── simple_axes_divider1.py
|   |   |   ├── simple_axes_divider3.py
|   |   |   ├── simple_axesgrid.py
|   |   |   ├── simple_axesgrid2.py
|   |   |   ├── simple_axisline4.py
|   |   |   └── simple_colorbar.py
|   |   ├── axisartist
|   |   |   ├── README.txt
|   |   |   ├── axis_direction.py
|   |   |   ├── demo_axis_direction.py
|   |   |   ├── demo_axisline_style.py
|   |   |   ├── demo_curvelinear_grid.py
|   |   |   ├── demo_curvelinear_grid2.py
|   |   |   ├── demo_floating_axes.py
|   |   |   ├── demo_floating_axis.py
|   |   |   ├── demo_parasite_axes.py
|   |   |   ├── demo_parasite_axes2.py
|   |   |   ├── demo_ticklabel_alignment.py
|   |   |   ├── demo_ticklabel_direction.py
|   |   |   ├── simple_axis_direction01.py
|   |   |   ├── simple_axis_direction03.py
|   |   |   ├── simple_axis_pad.py
|   |   |   ├── simple_axisartist1.py
|   |   |   ├── simple_axisline.py
|   |   |   └── simple_axisline3.py
|   |   ├── color
|   |   |   ├── README.txt
|   |   |   ├── color_by_yvalue.py
|   |   |   ├── color_cycle_default.py
|   |   |   ├── color_demo.py
|   |   |   ├── colorbar_basics.py
|   |   |   ├── colormap_reference.py
|   |   |   ├── custom_cmap.py
|   |   |   ├── named_colors.py
|   |   |   └── set_alpha.py
|   |   ├── event_handling
|   |   |   ├── README.txt
|   |   |   ├── close_event.py
|   |   |   ├── coords_demo.py
|   |   |   ├── cursor_demo.py
|   |   |   ├── data_browser.py
|   |   |   ├── figure_axes_enter_leave.py
|   |   |   ├── ginput_manual_clabel_sgskip.py
|   |   |   ├── image_slices_viewer.py
|   |   |   ├── keypress_demo.py
|   |   |   ├── lasso_demo.py
|   |   |   ├── legend_picking.py
|   |   |   ├── looking_glass.py
|   |   |   ├── path_editor.py
|   |   |   ├── pick_event_demo.py
|   |   |   ├── pick_event_demo2.py
|   |   |   ├── poly_editor.py
|   |   |   ├── pong_sgskip.py
|   |   |   ├── resample.py
|   |   |   ├── timers.py
|   |   |   ├── trifinder_event_demo.py
|   |   |   ├── viewlims.py
|   |   |   └── zoom_window.py
|   |   ├── images_contours_and_fields
|   |   |   ├── README.txt
|   |   |   ├── affine_image.py
|   |   |   ├── barb_demo.py
|   |   |   ├── barcode_demo.py
|   |   |   ├── colormap_interactive_adjustment.py
|   |   |   ├── colormap_normalizations.py
|   |   |   ├── colormap_normalizations_symlognorm.py
|   |   |   ├── contour_corner_mask.py
|   |   |   ├── contour_demo.py
|   |   |   ├── contour_image.py
|   |   |   ├── contour_label_demo.py
|   |   |   ├── contourf_demo.py
|   |   |   ├── contourf_hatching.py
|   |   |   ├── contourf_log.py
|   |   |   ├── contours_in_optimization_demo.py
|   |   |   ├── demo_bboximage.py
|   |   |   ├── figimage_demo.py
|   |   |   ├── image_annotated_heatmap.py
|   |   |   ├── image_antialiasing.py
|   |   |   ├── image_clip_path.py
|   |   |   ├── image_demo.py
|   |   |   ├── image_masked.py
|   |   |   ├── image_nonuniform.py
|   |   |   ├── image_transparency_blend.py
|   |   |   ├── image_zcoord.py
|   |   |   ├── interpolation_methods.py
|   |   |   ├── irregulardatagrid.py
|   |   |   ├── layer_images.py
|   |   |   ├── matshow.py
|   |   |   ├── multi_image.py
|   |   |   ├── pcolor_demo.py
|   |   |   ├── pcolormesh_grids.py
|   |   |   ├── pcolormesh_levels.py
|   |   |   ├── plot_streamplot.py
|   |   |   ├── quadmesh_demo.py
|   |   |   ├── quiver_demo.py
|   |   |   ├── quiver_simple_demo.py
|   |   |   ├── shading_example.py
|   |   |   ├── specgram_demo.py
|   |   |   ├── spy_demos.py
|   |   |   ├── tricontour_demo.py
|   |   |   ├── tricontour_smooth_delaunay.py
|   |   |   ├── tricontour_smooth_user.py
|   |   |   ├── trigradient_demo.py
|   |   |   ├── triinterp_demo.py
|   |   |   ├── tripcolor_demo.py
|   |   |   ├── triplot_demo.py
|   |   |   └── watermark_image.py
|   |   ├── lines_bars_and_markers
|   |   |   ├── README.txt
|   |   |   ├── bar_colors.py
|   |   |   ├── bar_label_demo.py
|   |   |   ├── bar_stacked.py
|   |   |   ├── barchart.py
|   |   |   ├── barh.py
|   |   |   ├── broken_barh.py
|   |   |   ├── capstyle.py
|   |   |   ├── categorical_variables.py
|   |   |   ├── cohere.py
|   |   |   ├── csd_demo.py
|   |   |   ├── curve_error_band.py
|   |   |   ├── errorbar_limits_simple.py
|   |   |   ├── errorbar_subsample.py
|   |   |   ├── eventcollection_demo.py
|   |   |   ├── eventplot_demo.py
|   |   |   ├── fill.py
|   |   |   ├── fill_between_alpha.py
|   |   |   ├── fill_between_demo.py
|   |   |   ├── fill_betweenx_demo.py
|   |   |   ├── filled_step.py
|   |   |   ├── gradient_bar.py
|   |   |   ├── hat_graph.py
|   |   |   ├── horizontal_barchart_distribution.py
|   |   |   ├── joinstyle.py
|   |   |   ├── line_demo_dash_control.py
|   |   |   ├── lines_with_ticks_demo.py
|   |   |   ├── linestyles.py
|   |   |   ├── marker_reference.py
|   |   |   ├── markevery_demo.py
|   |   |   ├── masked_demo.py
|   |   |   ├── multicolored_line.py
|   |   |   ├── multivariate_marker_plot.py
|   |   |   ├── psd_demo.py
|   |   |   ├── scatter_demo2.py
|   |   |   ├── scatter_hist.py
|   |   |   ├── scatter_masked.py
|   |   |   ├── scatter_star_poly.py
|   |   |   ├── scatter_with_legend.py
|   |   |   ├── simple_plot.py
|   |   |   ├── span_regions.py
|   |   |   ├── spectrum_demo.py
|   |   |   ├── stackplot_demo.py
|   |   |   ├── stairs_demo.py
|   |   |   ├── stem_plot.py
|   |   |   ├── step_demo.py
|   |   |   ├── timeline.py
|   |   |   ├── vline_hline_demo.py
|   |   |   └── xcorr_acorr_demo.py
|   |   ├── misc
|   |   |   ├── README.txt
|   |   |   ├── anchored_artists.py
|   |   |   ├── bbox_intersect.py
|   |   |   ├── contour_manual.py
|   |   |   ├── coords_report.py
|   |   |   ├── custom_projection.py
|   |   |   ├── customize_rc.py
|   |   |   ├── demo_agg_filter.py
|   |   |   ├── demo_ribbon_box.py
|   |   |   ├── fig_x.py
|   |   |   ├── fill_spiral.py
|   |   |   ├── findobj_demo.py
|   |   |   ├── font_indexing.py
|   |   |   ├── ftface_props.py
|   |   |   ├── histogram_path.py
|   |   |   ├── hyperlinks_sgskip.py
|   |   |   ├── image_thumbnail_sgskip.py
|   |   |   ├── keyword_plotting.py
|   |   |   ├── logos2.py
|   |   |   ├── multipage_pdf.py
|   |   |   ├── multiprocess_sgskip.py
|   |   |   ├── packed_bubbles.py
|   |   |   ├── patheffect_demo.py
|   |   |   ├── print_stdout_sgskip.py
|   |   |   ├── rasterization_demo.py
|   |   |   ├── set_and_get.py
|   |   |   ├── svg_filter_line.py
|   |   |   ├── svg_filter_pie.py
|   |   |   ├── table_demo.py
|   |   |   ├── tickedstroke_demo.py
|   |   |   ├── transoffset.py
|   |   |   └── zorder_demo.py
|   |   ├── mplot3d
|   |   |   ├── 2dcollections3d.py
|   |   |   ├── 3d_bars.py
|   |   |   ├── README.txt
|   |   |   ├── bars3d.py
|   |   |   ├── box3d.py
|   |   |   ├── contour3d.py
|   |   |   ├── contour3d_2.py
|   |   |   ├── contour3d_3.py
|   |   |   ├── contourf3d.py
|   |   |   ├── contourf3d_2.py
|   |   |   ├── custom_shaded_3d_surface.py
|   |   |   ├── errorbar3d.py
|   |   |   ├── hist3d.py
|   |   |   ├── lines3d.py
|   |   |   ├── lorenz_attractor.py
|   |   |   ├── mixed_subplots.py
|   |   |   ├── offset.py
|   |   |   ├── pathpatch3d.py
|   |   |   ├── polys3d.py
|   |   |   ├── projections.py
|   |   |   ├── quiver3d.py
|   |   |   ├── rotate_axes3d_sgskip.py
|   |   |   ├── scatter3d.py
|   |   |   ├── stem3d_demo.py
|   |   |   ├── subplot3d.py
|   |   |   ├── surface3d.py
|   |   |   ├── surface3d_2.py
|   |   |   ├── surface3d_3.py
|   |   |   ├── surface3d_radial.py
|   |   |   ├── text3d.py
|   |   |   ├── tricontour3d.py
|   |   |   ├── tricontourf3d.py
|   |   |   ├── trisurf3d.py
|   |   |   ├── trisurf3d_2.py
|   |   |   ├── view_planes_3d.py
|   |   |   ├── voxels.py
|   |   |   ├── voxels_numpy_logo.py
|   |   |   ├── voxels_rgb.py
|   |   |   ├── voxels_torus.py
|   |   |   ├── wire3d.py
|   |   |   ├── wire3d_animation_sgskip.py
|   |   |   └── wire3d_zero_stride.py
|   |   ├── pie_and_polar_charts
|   |   |   ├── README.txt
|   |   |   ├── bar_of_pie.py
|   |   |   ├── nested_pie.py
|   |   |   ├── pie_and_donut_labels.py
|   |   |   ├── pie_features.py
|   |   |   ├── polar_bar.py
|   |   |   ├── polar_demo.py
|   |   |   ├── polar_error_caps.py
|   |   |   ├── polar_legend.py
|   |   |   └── polar_scatter.py
|   |   ├── pyplots
|   |   |   ├── README.txt
|   |   |   ├── axline.py
|   |   |   ├── pyplot_simple.py
|   |   |   ├── pyplot_text.py
|   |   |   ├── pyplot_three.py
|   |   |   └── pyplot_two_subplots.py
|   |   ├── scales
|   |   |   ├── README.txt
|   |   |   ├── asinh_demo.py
|   |   |   ├── aspect_loglog.py
|   |   |   ├── custom_scale.py
|   |   |   ├── log_bar.py
|   |   |   ├── log_demo.py
|   |   |   ├── logit_demo.py
|   |   |   ├── power_norm.py
|   |   |   ├── scales.py
|   |   |   ├── semilogx_demo.py
|   |   |   └── symlog_demo.py
|   |   ├── shapes_and_collections
|   |   |   ├── README.txt
|   |   |   ├── arrow_guide.py
|   |   |   ├── artist_reference.py
|   |   |   ├── collections.py
|   |   |   ├── compound_path.py
|   |   |   ├── dolphin.py
|   |   |   ├── donut.py
|   |   |   ├── ellipse_collection.py
|   |   |   ├── ellipse_demo.py
|   |   |   ├── fancybox_demo.py
|   |   |   ├── hatch_demo.py
|   |   |   ├── hatch_style_reference.py
|   |   |   ├── line_collection.py
|   |   |   ├── patch_collection.py
|   |   |   ├── path_patch.py
|   |   |   ├── quad_bezier.py
|   |   |   └── scatter.py
|   |   ├── showcase
|   |   |   ├── README.txt
|   |   |   ├── anatomy.py
|   |   |   ├── firefox.py
|   |   |   ├── integral.py
|   |   |   ├── mandelbrot.py
|   |   |   ├── stock_prices.py
|   |   |   └── xkcd.py
|   |   ├── specialty_plots
|   |   |   ├── README.txt
|   |   |   ├── advanced_hillshading.py
|   |   |   ├── anscombe.py
|   |   |   ├── hinton_demo.py
|   |   |   ├── leftventricle_bullseye.py
|   |   |   ├── mri_demo.py
|   |   |   ├── mri_with_eeg.py
|   |   |   ├── radar_chart.py
|   |   |   ├── sankey_basics.py
|   |   |   ├── sankey_links.py
|   |   |   ├── sankey_rankine.py
|   |   |   ├── skewt.py
|   |   |   └── topographic_hillshading.py
|   |   ├── spines
|   |   |   ├── README.txt
|   |   |   ├── centered_spines_with_arrows.py
|   |   |   ├── multiple_yaxis_with_spines.py
|   |   |   ├── spine_placement_demo.py
|   |   |   ├── spines.py
|   |   |   └── spines_dropped.py
|   |   ├── statistics
|   |   |   ├── README.txt
|   |   |   ├── barchart_demo.py
|   |   |   ├── boxplot.py
|   |   |   ├── boxplot_color.py
|   |   |   ├── boxplot_demo.py
|   |   |   ├── boxplot_vs_violin.py
|   |   |   ├── bxp.py
|   |   |   ├── confidence_ellipse.py
|   |   |   ├── customized_violin.py
|   |   |   ├── errorbar.py
|   |   |   ├── errorbar_features.py
|   |   |   ├── errorbar_limits.py
|   |   |   ├── errorbars_and_boxes.py
|   |   |   ├── hexbin_demo.py
|   |   |   ├── hist.py
|   |   |   ├── histogram_cumulative.py
|   |   |   ├── histogram_features.py
|   |   |   ├── histogram_histtypes.py
|   |   |   ├── histogram_multihist.py
|   |   |   ├── multiple_histograms_side_by_side.py
|   |   |   ├── time_series_histogram.py
|   |   |   └── violinplot.py
|   |   ├── style_sheets
|   |   |   ├── README.txt
|   |   |   ├── bmh.py
|   |   |   ├── dark_background.py
|   |   |   ├── fivethirtyeight.py
|   |   |   ├── ggplot.py
|   |   |   ├── grayscale.py
|   |   |   ├── plot_solarizedlight2.py
|   |   |   └── style_sheets_reference.py
|   |   ├── subplots_axes_and_figures
|   |   |   ├── README.txt
|   |   |   ├── align_labels_demo.py
|   |   |   ├── auto_subplots_adjust.py
|   |   |   ├── axes_box_aspect.py
|   |   |   ├── axes_demo.py
|   |   |   ├── axes_margins.py
|   |   |   ├── axes_props.py
|   |   |   ├── axes_zoom_effect.py
|   |   |   ├── axhspan_demo.py
|   |   |   ├── axis_equal_demo.py
|   |   |   ├── axis_labels_demo.py
|   |   |   ├── broken_axis.py
|   |   |   ├── custom_figure_class.py
|   |   |   ├── demo_constrained_layout.py
|   |   |   ├── demo_tight_layout.py
|   |   |   ├── fahrenheit_celsius_scales.py
|   |   |   ├── figure_size_units.py
|   |   |   ├── figure_title.py
|   |   |   ├── ganged_plots.py
|   |   |   ├── geo_demo.py
|   |   |   ├── gridspec_and_subplots.py
|   |   |   ├── gridspec_multicolumn.py
|   |   |   ├── gridspec_nested.py
|   |   |   ├── invert_axes.py
|   |   |   ├── multiple_figs_demo.py
|   |   |   ├── secondary_axis.py
|   |   |   ├── share_axis_lims_views.py
|   |   |   ├── shared_axis_demo.py
|   |   |   ├── subfigures.py
|   |   |   ├── subplot.py
|   |   |   ├── subplots_adjust.py
|   |   |   ├── subplots_demo.py
|   |   |   ├── two_scales.py
|   |   |   └── zoom_inset_axes.py
|   |   ├── text_labels_and_annotations
|   |   |   ├── README.txt
|   |   |   ├── accented_text.py
|   |   |   ├── align_ylabels.py
|   |   |   ├── angle_annotation.py
|   |   |   ├── angles_on_bracket_arrows.py
|   |   |   ├── annotate_transform.py
|   |   |   ├── annotation_basic.py
|   |   |   ├── annotation_demo.py
|   |   |   ├── annotation_polar.py
|   |   |   ├── arrow_demo.py
|   |   |   ├── autowrap.py
|   |   |   ├── custom_legends.py
|   |   |   ├── date.py
|   |   |   ├── demo_annotation_box.py
|   |   |   ├── demo_text_path.py
|   |   |   ├── demo_text_rotation_mode.py
|   |   |   ├── dfrac_demo.py
|   |   |   ├── engineering_formatter.py
|   |   |   ├── fancyarrow_demo.py
|   |   |   ├── fancytextbox_demo.py
|   |   |   ├── figlegend_demo.py
|   |   |   ├── font_family_rc.py
|   |   |   ├── font_file.py
|   |   |   ├── font_table.py
|   |   |   ├── fonts_demo.py
|   |   |   ├── fonts_demo_kw.py
|   |   |   ├── label_subplots.py
|   |   |   ├── legend.py
|   |   |   ├── legend_demo.py
|   |   |   ├── line_with_text.py
|   |   |   ├── mathtext_asarray.py
|   |   |   ├── mathtext_demo.py
|   |   |   ├── mathtext_examples.py
|   |   |   ├── mathtext_fontfamily_example.py
|   |   |   ├── multiline.py
|   |   |   ├── placing_text_boxes.py
|   |   |   ├── rainbow_text.py
|   |   |   ├── stix_fonts_demo.py
|   |   |   ├── tex_demo.py
|   |   |   ├── text_alignment.py
|   |   |   ├── text_commands.py
|   |   |   ├── text_fontdict.py
|   |   |   ├── text_rotation_relative_to_line.py
|   |   |   ├── titles_demo.py
|   |   |   ├── unicode_minus.py
|   |   |   ├── usetex_baseline_test.py
|   |   |   ├── usetex_fonteffects.py
|   |   |   └── watermark_text.py
|   |   ├── ticks
|   |   |   ├── README.txt
|   |   |   ├── auto_ticks.py
|   |   |   ├── centered_ticklabels.py
|   |   |   ├── colorbar_tick_labelling_demo.py
|   |   |   ├── custom_ticker1.py
|   |   |   ├── date_concise_formatter.py
|   |   |   ├── date_demo_convert.py
|   |   |   ├── date_demo_rrule.py
|   |   |   ├── date_formatters_locators.py
|   |   |   ├── date_index_formatter.py
|   |   |   ├── date_precision_and_epochs.py
|   |   |   ├── dollar_ticks.py
|   |   |   ├── fig_axes_customize_simple.py
|   |   |   ├── major_minor_demo.py
|   |   |   ├── scalarformatter.py
|   |   |   ├── tick-formatters.py
|   |   |   ├── tick-locators.py
|   |   |   ├── tick_label_right.py
|   |   |   ├── tick_labels_from_values.py
|   |   |   ├── tick_xlabel_top.py
|   |   |   ├── ticklabels_rotation.py
|   |   |   └── ticks_too_many.py
|   |   ├── units
|   |   |   ├── README.txt
|   |   |   ├── annotate_with_units.py
|   |   |   ├── artist_tests.py
|   |   |   ├── bar_demo2.py
|   |   |   ├── bar_unit_demo.py
|   |   |   ├── basic_units.py
|   |   |   ├── ellipse_with_units.py
|   |   |   ├── evans_test.py
|   |   |   ├── radian_demo.py
|   |   |   ├── units_sample.py
|   |   |   └── units_scatter.py
|   |   ├── user_interfaces
|   |   |   ├── README.txt
|   |   |   ├── canvasagg.py
|   |   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk3_sgskip.py
|   |   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk4_sgskip.py
|   |   |   ├── embedding_in_qt_sgskip.py
|   |   |   ├── embedding_in_tk_sgskip.py
|   |   |   ├── embedding_in_wx2_sgskip.py
|   |   |   ├── embedding_in_wx3_sgskip.py
|   |   |   ├── embedding_in_wx4_sgskip.py
|   |   |   ├── embedding_in_wx5_sgskip.py
|   |   |   ├── embedding_webagg_sgskip.py
|   |   |   ├── fourier_demo_wx_sgskip.py
|   |   |   ├── gtk3_spreadsheet_sgskip.py
|   |   |   ├── gtk4_spreadsheet_sgskip.py
|   |   |   ├── images
|   |   |   ├── mathtext_wx_sgskip.py
|   |   |   ├── mpl_with_glade3_sgskip.py
|   |   |   ├── mplcvd.py
|   |   |   ├── pylab_with_gtk3_sgskip.py
|   |   |   ├── pylab_with_gtk4_sgskip.py
|   |   |   ├── svg_histogram_sgskip.py
|   |   |   ├── svg_tooltip_sgskip.py
|   |   |   ├── toolmanager_sgskip.py
|   |   |   ├── web_application_server_sgskip.py
|   |   |   └── wxcursor_demo_sgskip.py
|   |   ├── userdemo
|   |   |   ├── README.txt
|   |   |   ├── annotate_explain.py
|   |   |   ├── annotate_simple_coord02.py
|   |   |   ├── annotate_text_arrow.py
|   |   |   ├── connect_simple01.py
|   |   |   ├── connectionstyle_demo.py
|   |   |   ├── custom_boxstyle01.py
|   |   |   ├── demo_gridspec01.py
|   |   |   ├── demo_gridspec03.py
|   |   |   ├── demo_gridspec06.py
|   |   |   ├── pgf_fonts.py
|   |   |   ├── pgf_preamble_sgskip.py
|   |   |   ├── pgf_texsystem.py
|   |   |   ├── simple_annotate01.py
|   |   |   ├── simple_legend01.py
|   |   |   └── simple_legend02.py
|   |   └── widgets
|   |       ├── README.txt
|   |       ├── annotated_cursor.py
|   |       ├── buttons.py
|   |       ├── check_buttons.py
|   |       ├── cursor.py
|   |       ├── lasso_selector_demo_sgskip.py
|   |       ├── menu.py
|   |       ├── mouse_cursor.py
|   |       ├── multicursor.py
|   |       ├── polygon_selector_demo.py
|   |       ├── polygon_selector_simple.py
|   |       ├── radio_buttons.py
|   |       ├── range_slider.py
|   |       ├── rectangle_selector.py
|   |       ├── slider_demo.py
|   |       ├── slider_snap_demo.py
|   |       ├── span_selector.py
|   |       └── textbox.py
|   ├── plot_types
|   |   ├── 3D
|   |   |   ├── README.rst
|   |   |   ├── scatter3d_simple.py
|   |   |   ├── surface3d_simple.py
|   |   |   ├── trisurf3d_simple.py
|   |   |   ├── voxels_simple.py
|   |   |   └── wire3d_simple.py
|   |   ├── README.rst
|   |   ├── arrays
|   |   |   ├── README.rst
|   |   |   ├── barbs.py
|   |   |   ├── contour.py
|   |   |   ├── contourf.py
|   |   |   ├── imshow.py
|   |   |   ├── pcolormesh.py
|   |   |   ├── quiver.py
|   |   |   └── streamplot.py
|   |   ├── basic
|   |   |   ├── README.rst
|   |   |   ├── bar.py
|   |   |   ├── fill_between.py
|   |   |   ├── plot.py
|   |   |   ├── scatter_plot.py
|   |   |   ├── stackplot.py
|   |   |   ├── stem.py
|   |   |   └── step.py
|   |   ├── stats
|   |   |   ├── README.rst
|   |   |   ├── boxplot_plot.py
|   |   |   ├── ecdf.py
|   |   |   ├── errorbar_plot.py
|   |   |   ├── eventplot.py
|   |   |   ├── hexbin.py
|   |   |   ├── hist2d.py
|   |   |   ├── hist_plot.py
|   |   |   ├── pie.py
|   |   |   └── violin.py
|   |   └── unstructured
|   |       ├── README.rst
|   |       ├── tricontour.py
|   |       ├── tricontourf.py
|   |       ├── tripcolor.py
|   |       └── triplot.py
|   ├── tutorials
|   |   ├── artists.py
|   |   ├── images.py
|   |   ├── index.rst
|   |   ├── lifecycle.py
|   |   └── pyplot.py
|   └── users_explain
|       ├── animations
|       |   ├── README.txt
|       |   ├── animations.py
|       |   └── blitting.py
|       ├── artists
|       |   ├── color_cycle.py
|       |   ├── imshow_extent.py
|       |   ├── index.rst
|       |   ├── patheffects_guide.py
|       |   ├── paths.py
|       |   ├── performance.rst
|       |   └── transforms_tutorial.py
|       ├── axes
|       |   ├── arranging_axes.py
|       |   ├── autoscale.py
|       |   ├── colorbar_placement.py
|       |   ├── constrainedlayout_guide.py
|       |   ├── index.rst
|       |   ├── legend_guide.py
|       |   ├── mosaic.py
|       |   └── tight_layout_guide.py
|       ├── axis
|       |   └── index.rst
|       ├── colors
|       |   ├── README.txt
|       |   ├── colorbar_only.py
|       |   ├── colormap-manipulation.py
|       |   ├── colormapnorms.py
|       |   ├── colormaps.py
|       |   └── colors.py
|       ├── customizing.py
|       ├── figure
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── index.rst
|       ├── quick_start.py
|       ├── text
|       |   ├── README.txt
|       |   ├── annotations.py
|       |   ├── fonts.py
|       |   ├── mathtext.py
|       |   ├── pgf.py
|       |   ├── text_intro.py
|       |   ├── text_props.py
|       |   └── usetex.py
|       └── toolkits
|           ├── axes_grid.rst
|           ├── axisartist.rst
|           ├── index.rst
|           └── mplot3d.rst
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── all_figures.html
|   |   |       ├── css
|   |   |       ├── ipython_inline_figure.html
|   |   |       ├── js
|   |   |       └── single_figure.html
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   |   └── plot_directive.css
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── typing.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── __init__.py
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           ├── test_axes3d.py
|   |           └── test_legend3d.py
|   └── pylab.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       ├── minver.txt
|       └── mypy.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
└── tools
    ├── README.txt
    ├── boilerplate.py
    ├── cache_zenodo_svg.py
    ├── check_typehints.py
    ├── create_DejaVuDisplay.sh
    ├── embed_js.py
    ├── gh_api.py
    ├── github_stats.py
    ├── make_icons.py
    ├── memleak.py
    ├── run_examples.py
    ├── subset.py
    ├── triage_tests.py
    └── visualize_tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: [ENH]: Add get/set_antialiased to Text objects

Description: ### Problem

Currently, Text objects always retrieve their antialiasing state via the global rcParams["text.antialias"], unlike other artists for which this can be configured on a per-artist basis via `set_antialiased` (and read via `set_antialiased`).

### Proposed solution

Add similar getters/setters on Text objects (also adjusting Annotations accordingly, if needed) and use that info in the drawing stage.

Should be relatively easy to implement, except that the slight fiddling needed with backends requires some understanding of backend code (I think we need to replace the access to `rcParams["text.antialiased"]` by going through the GraphicsContext state).

Patch information:
diff --git a/lib/matplotlib/backends/backend_agg.py b/lib/matplotlib/backends/backend_agg.py
index 7d038a998f..1e43736fd9 100644
--- a/lib/matplotlib/backends/backend_agg.py
+++ b/lib/matplotlib/backends/backend_agg.py
@@ -206,7 +206,7 @@ class RendererAgg(RendererBase):
         # space) in the following call to draw_text_image).
         font.set_text(s, 0, flags=get_hinting_flag())
         font.draw_glyphs_to_bitmap(
-            antialiased=mpl.rcParams['text.antialiased'])
+            antialiased=bool(gc.get_antialiased()))
         d = font.get_descent() / 64.0
         # The descent needs to be adjusted for the angle.
         xo, yo = font.get_bitmap_offset()
diff --git a/lib/matplotlib/backends/backend_cairo.py b/lib/matplotlib/backends/backend_cairo.py
index 9ccadcdf1c..7f1888b4dd 100644
--- a/lib/matplotlib/backends/backend_cairo.py
+++ b/lib/matplotlib/backends/backend_cairo.py
@@ -205,7 +205,7 @@ class RendererCairo(RendererBase):
             ctx.set_font_size(self.points_to_pixels(prop.get_size_in_points()))
             opts = cairo.FontOptions()
             opts.set_antialias(
-                cairo.ANTIALIAS_DEFAULT if mpl.rcParams["text.antialiased"]
+                cairo.ANTIALIAS_DEFAULT if gc.get_antialiased()
                 else cairo.ANTIALIAS_NONE)
             ctx.set_font_options(opts)
             if angle:
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index 4591316cf9..285d06960f 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -167,6 +167,7 @@ class Text(Artist):
         transform_rotates_text=False,
         linespacing=None,
         rotation_mode=None,
+        antialiased=None,
     ):
         self.set_text(text)
         self.set_color(
@@ -187,6 +188,7 @@ class Text(Artist):
             linespacing = 1.2  # Maybe use rcParam later.
         self.set_linespacing(linespacing)
         self.set_rotation_mode(rotation_mode)
+        self.set_antialiased(antialiased)
 
     def update(self, kwargs):
         # docstring inherited
@@ -309,6 +311,24 @@ class Text(Artist):
         """Return the text rotation mode."""
         return self._rotation_mode
 
+    def get_antialiased(self):
+        """Return whether antialiasing is used for drawing text."""
+        return self._antialiased
+
+    def set_antialiased(self, aa):
+        """
+        Set whether to use antialiased rendering for this text.
+
+        Parameters
+        ----------
+        aa : bool or None
+            If None, defaults to rcParams['text.antialiased'].
+        """
+        if aa is None:
+            aa = mpl.rcParams['text.antialiased']
+        self._antialiased = aa
+        self.stale = True
+
     def update_from(self, other):
         # docstring inherited
         super().update_from(other)
@@ -736,6 +756,7 @@ class Text(Artist):
             gc = renderer.new_gc()
             gc.set_foreground(self.get_color())
             gc.set_alpha(self.get_alpha())
+            gc.set_antialiased(self.get_antialiased())
             gc.set_url(self._url)
             self._set_gc_clip(gc)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 08:44:09,624 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find relevant test cases for adding `get/set_antialiased` to `Text` objects. The issue description mentions that other artists already have this functionality. To find similar test cases, I should look at how this property is tested for other artists. `Line2D` artists are fundamental and likely have this property, so their tests would be a good reference. Therefore, I need the content of the test file for lines to find examples of how `set_antialiased` is tested.' query='Please provide the full content of lib/matplotlib/tests/test_lines.py.' extra_requirements='' purpose="This file will likely contain test cases for the 'antialiased' property on Line2D objects, which can be used as a template for the new tests for Text objects."
2025-12-21 08:44:09,625 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of lib/matplotlib/tests/test_lines.py.
2025-12-21 08:44:09,625 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 08:44:09,626 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 08:44:09,627 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 08:44:09,627 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of lib/matplotlib/tests/test_lines.py.
Purpose: This file will likely contain test cases for the 'antialiased' property on Line2D objects, which can be used as a template for the new tests for Text objects.
2025-12-21 08:44:12,227 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of `lib/matplotlib/tests/test_lines.py`. This file contains test cases for the 'antialiased' property on Line2D objects. These existing tests will be a useful reference for creating new tests for Text objects." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_lines.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2153, 'candidates_token_count': 80, 'total_token_count': 2357, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2153}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 80}], 'thoughts_token_count': 124, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10712538957595825, 'model_name': 'gemini-2.5-pro'} id='run--e2062fe1-327f-4629-879f-067e69ac5760-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_lines.py'}, 'id': '35321596-763b-4499-8c52-d80812b4f07e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2153, 'output_tokens': 80, 'total_tokens': 2357, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 124}}
2025-12-21 08:44:14,576 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of `lib/matplotlib/tests/test_lines.py` as requested. I will now search for mentions of the 'antialiased' property within this file to locate relevant test cases that can serve as a template for the new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_lines.py", "text": "antialiased"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9051, 'candidates_token_count': 96, 'total_token_count': 9201, 'cached_content_token_count': 1838, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9051}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1838}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 96}], 'thoughts_token_count': 54}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10149388511975606, 'model_name': 'gemini-2.5-pro'} id='run--7efb79a3-6e15-4b49-84e3-25deb63cc993-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'lib/matplotlib/tests/test_lines.py', 'text': 'antialiased'}, 'id': 'd76cb356-e270-4d75-b7f2-de28f215596f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9051, 'output_tokens': 96, 'total_tokens': 9201, 'input_token_details': {'cache_read': 1838}, 'output_token_details': {'reasoning': 54}}
2025-12-21 08:44:20,259 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I was unable to find any occurrences of the 'antialiased' property within `lib/matplotlib/tests/test_lines.py`. To ensure I haven't missed anything, I will now broaden my search to the entire codebase to look for any test functions that might be testing this property, which will help in creating the new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "antialiased", "basename": "test_lines.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9179, 'candidates_token_count': 100, 'total_token_count': 9582, 'cached_content_token_count': 7337, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9179}], 'cache_tokens_details': [{'modality': 1, 'token_count': 7337}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 100}], 'thoughts_token_count': 303}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5116004180908204, 'model_name': 'gemini-2.5-pro'} id='run--fd163a1c-260a-41d1-8cf3-247d8cf47cce-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'antialiased', 'basename': 'test_lines.py'}, 'id': '6c47350a-502e-4d8e-983a-a7b12ac5b9fc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9179, 'output_tokens': 100, 'total_tokens': 9582, 'input_token_details': {'cache_read': 7337}, 'output_token_details': {'reasoning': 303}}
2025-12-21 08:44:24,644 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I was unable to find any tests related to the \'antialiased\' property in `test_lines.py`. To find relevant examples, I will now search the entire codebase for any test functions that include "antialiased" in their name or body. This will help me locate existing tests that can be used as a template for the new tests for Text objects.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_basename', 'arguments': '{"text": "antialiased", "basename": "test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9309, 'candidates_token_count': 102, 'total_token_count': 9699, 'cached_content_token_count': 9154, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9309}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9154}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 102}], 'thoughts_token_count': 288}, 'finish_reason': 'STOP', 'avg_logprobs': -0.43480323342715993, 'model_name': 'gemini-2.5-pro'} id='run--7fa65f05-1598-4a7a-af05-47ad023b7bb2-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_basename', 'args': {'text': 'antialiased', 'basename': 'test_artist.py'}, 'id': '48b52133-5ee6-4073-b97f-6f009d9a8a68', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9309, 'output_tokens': 102, 'total_tokens': 9699, 'input_token_details': {'cache_read': 9154}, 'output_token_details': {'reasoning': 288}}
2025-12-21 08:44:34,217 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have been unable to locate any tests for the 'antialiased' property in the previously examined files. To broaden my search, I will now look for a file named `test_artist.py`, as it is likely that this property is inherited from the base `Artist` class and its tests would be located there. This will help me find a suitable template for the new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9441, 'candidates_token_count': 97, 'total_token_count': 10258, 'cached_content_token_count': 9137, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9441}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9137}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 97}], 'thoughts_token_count': 720}, 'finish_reason': 'STOP', 'avg_logprobs': -1.031950724493597, 'model_name': 'gemini-2.5-pro'} id='run--33b1bd2f-18e7-4da0-9901-07f588d46743-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_artist.py'}, 'id': 'a2885f8d-7da5-4fce-9a10-d5d48b040a5a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9441, 'output_tokens': 97, 'total_tokens': 10258, 'input_token_details': {'cache_read': 9137}, 'output_token_details': {'reasoning': 720}}
2025-12-21 08:44:39,025 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have located the file `lib/matplotlib/tests/test_artist.py`. I will now read the contents of this file to find test cases related to the 'antialiased' property, which will provide a template for creating new tests for Text objects." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_artist.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9598, 'candidates_token_count': 79, 'total_token_count': 9979, 'cached_content_token_count': 9121, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9598}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9121}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 302}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3669302735147597, 'model_name': 'gemini-2.5-pro'} id='run--dc07f920-af57-470e-8e48-96aefcedf16b-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_artist.py'}, 'id': 'c2ec49f8-fae1-42aa-95da-3c21e1074014', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9598, 'output_tokens': 79, 'total_tokens': 9979, 'input_token_details': {'cache_read': 9121}, 'output_token_details': {'reasoning': 302}}
2025-12-21 08:44:43,161 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have read the contents of `lib/matplotlib/tests/test_artist.py` and will now search for occurrences of the 'antialiased' property within the file. This will help me identify relevant test cases that can be used as a template for creating new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_artist.py", "text": "antialiased"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17599, 'candidates_token_count': 97, 'total_token_count': 17971, 'cached_content_token_count': 9462, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17599}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9462}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 97}], 'thoughts_token_count': 275}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22059605785251893, 'model_name': 'gemini-2.5-pro'} id='run--633c3838-3f5b-450f-aa17-90deb3a14fce-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'lib/matplotlib/tests/test_artist.py', 'text': 'antialiased'}, 'id': 'ffb61a39-5032-47fb-9f11-a1bd883c88af', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17599, 'output_tokens': 97, 'total_tokens': 17971, 'input_token_details': {'cache_read': 9462}, 'output_token_details': {'reasoning': 275}}
2025-12-21 08:44:46,061 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have been unable to find any direct tests for the \'antialiased\' property in the files I\'ve examined. It\'s possible the tests use a different naming convention or that the property is tested implicitly. To ensure I find any relevant test cases, I will now broaden my search to the entire codebase to locate any mention of "antialiased". This will help me identify a suitable template for creating the new tests for Text objects.' additional_kwargs={'function_call': {'name': 'find_text_node_with_text', 'arguments': '{"text": "antialiased"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17728, 'candidates_token_count': 103, 'total_token_count': 17925, 'cached_content_token_count': 17010, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17728}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17010}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 103}], 'thoughts_token_count': 94}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3296266944663038, 'model_name': 'gemini-2.5-pro'} id='run--28f40034-dade-4a4d-9ec4-3e08f8c1e789-0' tool_calls=[{'name': 'find_text_node_with_text', 'args': {'text': 'antialiased'}, 'id': '0c3f9985-2c85-4618-88a0-6e3336c8cbae', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17728, 'output_tokens': 103, 'total_tokens': 17925, 'input_token_details': {'cache_read': 17010}, 'output_token_details': {'reasoning': 94}}
2025-12-21 08:44:51,402 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have performed a broad search for "antialiased" and found several relevant documentation files. The most promising result is a mention of parametrized `imshow` antialiased tests, which strongly suggests that tests for this property exist. I will now try to locate the `test_imshow.py` file, as it is the most likely place to find the test cases I need.' additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_imshow.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26786, 'candidates_token_count': 92, 'total_token_count': 27265, 'cached_content_token_count': 17367, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26786}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17367}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 92}], 'thoughts_token_count': 387}, 'finish_reason': 'STOP', 'avg_logprobs': -0.43976414721945056, 'model_name': 'gemini-2.5-pro'} id='run--c5690e7f-2d38-4e06-a269-3b9fc513e9c6-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_imshow.py'}, 'id': '230363c8-b5d8-4717-a182-b69c37ae58ad', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26786, 'output_tokens': 92, 'total_tokens': 27265, 'input_token_details': {'cache_read': 17367}, 'output_token_details': {'reasoning': 387}}
2025-12-21 08:44:53,380 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I was unable to find a file named `test_imshow.py`. It's possible the tests for `imshow` are integrated into a different test file. To find these tests, I will now search for a file named `test_axes.py`, as `imshow` is a method of the `Axes` object and its tests are likely located there. This will help me find a suitable template for the new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_axes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26900, 'candidates_token_count': 105, 'total_token_count': 27005, 'cached_content_token_count': 25065, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26900}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25065}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 105}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1358208247593471, 'model_name': 'gemini-2.5-pro'} id='run--63d01aed-ee26-481e-bb0d-9a7136ea04c4-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_axes.py'}, 'id': 'f3483939-6930-46f8-ada1-94055d24716f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26900, 'output_tokens': 105, 'total_tokens': 27005, 'input_token_details': {'cache_read': 25065}}
2025-12-21 08:44:54,973 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have located the file `lib/matplotlib/tests/test_axes.py`. I will now read the contents of this file to find test cases related to the 'antialiased' property, specifically within the context of `imshow`, which will provide a template for creating new tests for Text objects." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_axes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 27065, 'candidates_token_count': 87, 'total_token_count': 27152, 'cached_content_token_count': 25040, 'prompt_tokens_details': [{'modality': 1, 'token_count': 27065}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25040}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 87}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.04577373362135613, 'model_name': 'gemini-2.5-pro'} id='run--fc2de94b-5263-482d-afe1-d892c1970933-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_axes.py'}, 'id': '840eb77a-e4bb-48bf-84af-19ffbd79bdeb', 'type': 'tool_call'}] usage_metadata={'input_tokens': 27065, 'output_tokens': 87, 'total_tokens': 27152, 'input_token_details': {'cache_read': 25040}}
2025-12-21 08:45:14,100 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have read the contents of `lib/matplotlib/tests/test_axes.py`. I will now search for the 'antialiased' property within this file, focusing on tests related to `imshow`, to find a suitable template for creating new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_axes.py", "text": "antialiased"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 35211, 'candidates_token_count': 93, 'total_token_count': 37265, 'cached_content_token_count': 27163, 'prompt_tokens_details': [{'modality': 1, 'token_count': 35211}], 'cache_tokens_details': [{'modality': 1, 'token_count': 27163}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 93}], 'thoughts_token_count': 1961}, 'finish_reason': 'STOP', 'avg_logprobs': -1.9920877436155915, 'model_name': 'gemini-2.5-pro'} id='run--749a413e-2d76-400b-b5f6-fa010705b541-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'lib/matplotlib/tests/test_axes.py', 'text': 'antialiased'}, 'id': '538ad410-3905-44fd-b0a7-dfe186837599', 'type': 'tool_call'}] usage_metadata={'input_tokens': 35211, 'output_tokens': 93, 'total_tokens': 37265, 'input_token_details': {'cache_read': 27163}, 'output_token_details': {'reasoning': 1961}}
2025-12-21 08:45:19,747 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have been unable to find any direct tests for the 'antialiased' property in `test_axes.py`. It appears my assumption that `imshow` tests would contain this property was incorrect. To continue my search, I will now look for a file named `test_image.py`, as it is the most likely place to find tests specifically related to image properties, including antialiasing. This will help me find a suitable template for the new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_file_node_with_basename', 'arguments': '{"basename": "test_image.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 35336, 'candidates_token_count': 113, 'total_token_count': 35765, 'cached_content_token_count': 34898, 'prompt_tokens_details': [{'modality': 1, 'token_count': 35336}], 'cache_tokens_details': [{'modality': 1, 'token_count': 34898}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 113}], 'thoughts_token_count': 316}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5643267336144911, 'model_name': 'gemini-2.5-pro'} id='run--0fdc5f2b-ac88-47a5-a774-d5bf7c5742d0-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'test_image.py'}, 'id': '657f064c-1c5a-4c16-b5b7-411d54074505', 'type': 'tool_call'}] usage_metadata={'input_tokens': 35336, 'output_tokens': 113, 'total_tokens': 35765, 'input_token_details': {'cache_read': 34898}, 'output_token_details': {'reasoning': 316}}
2025-12-21 08:45:21,376 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have located the file `lib/matplotlib/tests/test_image.py`. I will now read the contents of this file to find test cases related to the 'antialiased' property, which will provide a template for creating new tests for Text objects." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_image.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 35509, 'candidates_token_count': 79, 'total_token_count': 35588, 'cached_content_token_count': 34872, 'prompt_tokens_details': [{'modality': 1, 'token_count': 35509}], 'cache_tokens_details': [{'modality': 1, 'token_count': 34872}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.010391016549701933, 'model_name': 'gemini-2.5-pro'} id='run--3faf0fe5-991b-4e06-ada2-bb05c839d214-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_image.py'}, 'id': '54161c8e-deaa-4cbe-905c-daf75cd1a5e0', 'type': 'tool_call'}] usage_metadata={'input_tokens': 35509, 'output_tokens': 79, 'total_tokens': 35588, 'input_token_details': {'cache_read': 34872}}
2025-12-21 08:45:38,166 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have read the contents of `lib/matplotlib/tests/test_image.py`. I will now search for the 'antialiased' property within this file to find relevant test cases that can be used as a template for creating new tests for Text objects." additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_image.py", "text": "antialiased"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 44254, 'candidates_token_count': 91, 'total_token_count': 45981, 'cached_content_token_count': 35111, 'prompt_tokens_details': [{'modality': 1, 'token_count': 44254}], 'cache_tokens_details': [{'modality': 1, 'token_count': 35111}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 91}], 'thoughts_token_count': 1636}, 'finish_reason': 'STOP', 'avg_logprobs': -1.906080811888307, 'model_name': 'gemini-2.5-pro'} id='run--b1757643-5362-4a53-a6b6-aac903c17cf8-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'lib/matplotlib/tests/test_image.py', 'text': 'antialiased'}, 'id': '102ab111-d9d9-4639-be8c-6446c0487db3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 44254, 'output_tokens': 91, 'total_tokens': 45981, 'input_token_details': {'cache_read': 35111}, 'output_token_details': {'reasoning': 1636}}
2025-12-21 08:45:42,660 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully located relevant test cases for the 'antialiased' property in `lib/matplotlib/tests/test_image.py`. The functions `test_imshow_antialiased` and `test_rgba_antialias` provide a solid foundation for creating new tests for Text objects. I will now use these examples to develop the necessary tests." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 46581, 'candidates_token_count': 73, 'total_token_count': 46949, 'cached_content_token_count': 42866, 'prompt_tokens_details': [{'modality': 1, 'token_count': 46581}], 'cache_tokens_details': [{'modality': 1, 'token_count': 42866}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 73}], 'thoughts_token_count': 295}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4301993748913073, 'model_name': 'gemini-2.5-pro'} id='run--7d8f968c-c0a9-47f6-ad48-12a173807d8c-0' usage_metadata={'input_tokens': 46581, 'output_tokens': 73, 'total_tokens': 46949, 'input_token_details': {'cache_read': 42866}, 'output_token_details': {'reasoning': 295}}
2025-12-21 08:45:42,662 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of lib/matplotlib/tests/test_lines.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
This file will likely contain test cases for the 'antialiased' property on Line2D objects, which can be used as a template for the new tests for Text objects.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: doc/users/prev_whats_new/github_stats_3.3.0.rst
Line number range: 713 - 793
Content:
* :ghpull:`16710`: Make format_coord messagebox resize with the window and the content in osx backend
* :ghpull:`16681`: Simplify docstring interpolation for Box/Arrow/ConnectionStyles.
* :ghpull:`16576`: Deprecate arg-less calls to subplot_class_factory (and similar factories)
* :ghpull:`16652`: Deprecate {Locator,Axis}.{pan,zoom}.
* :ghpull:`16596`: Deprecate dviread.Encoding.
* :ghpull:`16231`: Deprecate JPEG-specific kwargs and rcParams to savefig.
* :ghpull:`16636`: Deprecate autofmt_xdate(which=None) to mean which="major".
* :ghpull:`16644`: Deprecate validate_webagg_address.
* :ghpull:`16619`: Fix overindented lines.
* :ghpull:`15233`: backend_ps cleanup.
* :ghpull:`16604`: Deprecate more rc validators.
* :ghpull:`16601`: Small unrelated cleanups.
* :ghpull:`16584`: Rename font_bunch to psfont in textpath.
* :ghpull:`16023`: Dedupe implementations of fill_between & fill_betweenx.
* :ghpull:`16485`: Simplify validate_color_for_prop_cycle.
* :ghpull:`16285`: Deprecate RendererCairo.font{weights,angles}
* :ghpull:`16410`: Fix support for empty usetex strings.
* :ghpull:`11644`: Add feature to fallback to stix font in mathtext
* :ghpull:`16537`: Delay checking for existence of postscript distillers.
* :ghpull:`16351`: Group all init of Legend.legendPatch together.
* :ghpull:`15988`: Refactor Annotation properties.
* :ghpull:`16421`: Shorten the type1-to-unicode name table.
* :ghpull:`16200`: Deprecate Artist.{set,get}_contains.
* :ghpull:`15828`: Deprecate support for dash-offset = None.
* :ghpull:`16338`: Document SymmetricalLogLocator parameters.
* :ghpull:`16504`: DOC: more pcolor fixes
* :ghpull:`15996`: Cleanup axes_size.
* :ghpull:`16108`: Deprecate DraggableBase.on_motion_blit.
* :ghpull:`16706`: Fix exception causes all over the codebase
* :ghpull:`15855`: Simplify 3d axes callback setup.
* :ghpull:`16219`: Simplify CallbackRegistry pickling.
* :ghpull:`16002`: relax two test tolerances on x86_64
* :ghpull:`16063`: Make the signature of Axes.draw() consistent with Artist.draw().
* :ghpull:`16177`: Further simplify setupext.
* :ghpull:`16191`: Make Figure._axobservers a CallbackRegistry.
* :ghpull:`16698`: Small edits to toolkits docs.
* :ghpull:`15430`: Simplify setupext.download_or_cache.
* :ghpull:`16694`: Lower Text's FontProperties priority when updating
* :ghpull:`16511`: Add more detailed kwargs docstrings to Axes methods.
* :ghpull:`16653`: Tutorials: make path/URL option clearer in matplotlibrc tutorial
* :ghpull:`16697`: Update docstrings for plot_directive.
* :ghpull:`16684`: Fix exception causes in 19 modules
* :ghpull:`16674`: Docstring + import cleanups to legend.py.
* :ghpull:`16683`: Turn mathtext.GlueSpec into a (private) namedtuple.
* :ghpull:`16660`: Cleanup fancybox_demo.
* :ghpull:`16691`: Clarify tiny comment re: AnnotationBbox constructor.
* :ghpull:`16676`: Cleanup animation docstrings.
* :ghpull:`16673`: DOC: correct title_fontsize docstring
* :ghpull:`16669`: DOC: update doc release guide
* :ghpull:`16563`: Parametrize imshow antialiased tests.
* :ghpull:`16658`: In docs, add multi-axes connectionpatches to Figure, not Axes.
* :ghpull:`16647`: Update annotation tutorial.
* :ghpull:`16638`: Remove unused, outdated division operators on jpl_units.
* :ghpull:`16509`: Add custom math fallback
* :ghpull:`16609`: Fix exception causes in rcsetup.py
* :ghpull:`16637`: Update docstrings in figure.py.
* :ghpull:`16534`: DOC: MaxNLocator and contour/contourf doc update (replaces #16428)
* :ghpull:`16597`: close #16593: setting ecolor turns off color cycling
* :ghpull:`16615`: Update custom boxstyles example.
* :ghpull:`16610`: Added graphviz_docs to conf.py
* :ghpull:`16608`: Stricter validation of rcParams["axes.axisbelow"].
* :ghpull:`16614`: Cleanup quiver3d examples.
* :ghpull:`16556`: Make backend_ps test robust against timestamp changes in ghostscript.
* :ghpull:`16602`: Cleanup testing.compare.
* :ghpull:`16575`: Style fix for dynamic axes subclass generation in mpl_toolkits.
* :ghpull:`16587`: Remove warnings control from tests.py.
* :ghpull:`16599`: Cleanup dolphin example.
* :ghpull:`16586`: Deprecate recursionlimit kwarg to matplotlib.test().
* :ghpull:`16595`: Minor docstring/references update.
* :ghpull:`16579`: Update usetex_fonteffects example.
* :ghpull:`16578`: Use rc() less often in examples/tutorials.
* :ghpull:`16572`: Remove some remnants of hist{,2d}(normed=...).
* :ghpull:`16491`: Expire the _rename_parameters API changes.
* :ghpull:`14592`: In SecondaryAxis.set_functions, reuse _set_scale's parent scale caching.
* :ghpull:`16279`: STY: Fix underindented continuation lines.
* :ghpull:`16549`: Improve documentation for examples/widgets/textbox.py
* :ghpull:`16560`: Update URL to pyparsing.
* :ghpull:`16292`: More edits to Normalize docstrings.
* :ghpull:`16536`: API/TST: minimum versions
* :ghpull:`16559`: 3D example avoid using statefull .gca()
* :ghpull:`16553`: DOC: clarify the expected shapes of eventplot input


File: doc/users/prev_whats_new/github_stats_3.4.2.rst
Line number range: 33 - 92
Content:
* :ghpull:`20184`: Backport PR #20147 on branch v3.4.x (DOC: add example of labelling axes)
* :ghpull:`20181`: Backport PR #20171 on branch v3.4.x (Remove unsupported arguments from tricontourf documentation)
* :ghpull:`20180`: Backport PR #19876 on branch v3.4.x (FIX: re-order unit conversion and mask array coercion)
* :ghpull:`20171`: Remove unsupported arguments from tricontourf documentation
* :ghpull:`19876`: FIX: re-order unit conversion and mask array coercion
* :ghpull:`20178`: Backport PR #20150 on branch v3.4.x
* :ghpull:`20172`: Backport PR #20161 on branch v3.4.x (Fix resetting grid visibility)
* :ghpull:`20161`: Fix resetting grid visibility
* :ghpull:`20167`: Backport PR #20146 on branch v3.4.x (Don't clip clip paths to Figure bbox.)
* :ghpull:`20166`: Backport PR #19978 on branch v3.4.x (fixed bug in CenteredNorm, issue #19972)
* :ghpull:`20146`: Don't clip clip paths to Figure bbox.
* :ghpull:`19978`: fixed bug in CenteredNorm, issue #19972
* :ghpull:`20160`: Backport PR #20148 on branch v3.4.x (FIX: MouseButton representation in boilerplate generated signatures)
* :ghpull:`20148`: FIX: MouseButton representation in boilerplate generated signatures
* :ghpull:`20152`: Backport PR #20145 on branch v3.4.x (Fix broken link to ggplot in docs)
* :ghpull:`20139`: Backport PR #20135 on branch v3.4.x (Add tricontour/tricontourf arguments(corner_mask, vmin vmax, antialiased, nchunk, hatches) documentation)
* :ghpull:`20135`: Add tricontour/tricontourf arguments(corner_mask, vmin vmax, antialiased, nchunk, hatches) documentation
* :ghpull:`20136`: Backport PR #19959 on branch v3.4.x (Bugfix Tk start_event_loop)
* :ghpull:`19959`: Bugfix Tk start_event_loop
* :ghpull:`20128`: Backport PR #20123 on branch v3.4.x (Ensure that Matplotlib is importable even if there's no HOME.)
* :ghpull:`20123`: Ensure that Matplotlib is importable even if there's no HOME.
* :ghpull:`20009`: Fix removal of shared polar axes.
* :ghpull:`20104`: Backport PR #19686 on branch v3.4.x (Declare sphinxext.redirect_from parallel_read_safe)
* :ghpull:`19686`: Declare sphinxext.redirect_from parallel_read_safe
* :ghpull:`20098`: Backport PR #20096 on branch v3.4.x (Ignore errors for sip with no setapi.)
* :ghpull:`20096`: Ignore errors for sip with no setapi.
* :ghpull:`20087`: Backport PR #20083 on branch v3.4.x (Revert "Temporarily switch intersphinx to latest pytest.")
* :ghpull:`20085`: Backport PR #20082 on branch v3.4.x (Fix bar_label for bars with nan values)
* :ghpull:`20082`: Fix bar_label for bars with nan values
* :ghpull:`20076`: Backport PR #20062 on branch v3.4.x ([DOC] Add top-level .. module:: definition for matplotlib)
* :ghpull:`20043`: Backport PR #20041 on branch v3.4.x (Clarify docs for stackplot.)
* :ghpull:`20041`: Clarify docs for stackplot.
* :ghpull:`20039`: Backport PR #20037 on branch v3.4.x (Don't generate wheels unusable on PyPy7.3.{0,1}.)
* :ghpull:`20037`: Don't generate wheels unusable on PyPy7.3.{0,1}.
* :ghpull:`20033`: Backport PR #20031 on branch v3.4.x (Cleanup widget examples)
* :ghpull:`20031`: Cleanup widget examples
* :ghpull:`20022`: Backport PR #19949 on branch v3.4.x (FIX: subfigure indexing error)
* :ghpull:`19949`: FIX: subfigure indexing error
* :ghpull:`20018`: Backport PR #20017 on branch v3.4.x (FIX typos in imshow_extent.py)
* :ghpull:`20017`: FIX typos in imshow_extent.py
* :ghpull:`20015`: Backport PR #19962 on branch v3.4.x (Dev install troubleshooting)
* :ghpull:`19962`: Dev install troubleshooting
* :ghpull:`20002`: Backport PR #19995 on branch v3.4.x (Fix valinit argument to RangeSlider)
* :ghpull:`20004`: Backport PR #19999 on branch v3.4.x (DOC: add note about axes order to docstring)
* :ghpull:`19998`: Backport PR #19964 on branch v3.4.x (FIX: add subplot_mosaic axes in the order the user gave them to us)
* :ghpull:`19999`: DOC: add note about axes order to docstring
* :ghpull:`19997`: Backport PR #19992 on branch v3.4.x (Minor fixes to polar locator docstrings.)
* :ghpull:`19995`: Fix valinit argument to RangeSlider
* :ghpull:`19964`: FIX: add subplot_mosaic axes in the order the user gave them to us
* :ghpull:`19993`: Backport PR #19983 on branch v3.4.x (Fix handling of "d" glyph in backend_ps.)
* :ghpull:`19992`: Minor fixes to polar locator docstrings.
* :ghpull:`19991`: Backport PR #19987 on branch v3.4.x (Fix set_thetalim((min, max)).)
* :ghpull:`19976`: Backport PR #19970 on branch v3.4.x (Initialize members of PathClipper and check for m_has_init)
* :ghpull:`19983`: Fix handling of "d" glyph in backend_ps.
* :ghpull:`19987`: Fix set_thetalim((min, max)).
* :ghpull:`19970`: Initialize members of PathClipper and check for m_has_init
* :ghpull:`19973`: Backport PR #19971 on branch v3.4.x (Fix missing closing bracket in docs)
* :ghpull:`19971`: Fix missing closing bracket in docs
* :ghpull:`19966`: Backport PR #19963 on branch v3.4.x (test_StrCategoryLocator using parameterized plotter)
* :ghpull:`19965`: Backport PR #19961 on branch v3.4.x (FIX: subfigure tightbbox)


File: doc/users/prev_whats_new/whats_new_1.0.rst
Line number range: 1 - 141
Content:
.. _whats-new-1-0:

What's new in Matplotlib 1.0 (Jul 06, 2010)
===========================================

.. contents:: Table of Contents
   :depth: 2

.. _whats-new-html5:

HTML5/Canvas backend
--------------------

Simon Ratcliffe and Ludwig Schwardt have released an `HTML5/Canvas
<https://code.google.com/archive/p/mplh5canvas>`__ backend for matplotlib.  The
backend is almost feature complete, and they have done a lot of work
comparing their html5 rendered images with our core renderer Agg.  The
backend features client/server interactive navigation of matplotlib
figures in an html5 compliant browser.

Sophisticated subplot grid layout
---------------------------------

Jae-Joon Lee has written :mod:`~matplotlib.gridspec`, a new module for
doing complex subplot layouts, featuring row and column spans and
more.  See :ref:`arranging_axes` for a tutorial
overview.

.. figure:: ../../gallery/userdemo/images/sphx_glr_demo_gridspec01_001.png
   :target: ../../gallery/userdemo/demo_gridspec01.html
   :align: center
   :scale: 50

Easy pythonic subplots
-----------------------

Fernando Perez got tired of all the boilerplate code needed to create a
figure and multiple subplots when using the matplotlib API, and wrote
a :func:`~matplotlib.pyplot.subplots` helper function.  Basic usage
allows you to create the figure and an array of subplots with numpy
indexing (starts with 0).  e.g.::

  fig, axarr = plt.subplots(2, 2)
  axarr[0,0].plot([1,2,3])   # upper, left

See :doc:`/gallery/subplots_axes_and_figures/subplot` for several code examples.

Contour fixes and triplot
-----------------------------

Ian Thomas has fixed a long-standing bug that has vexed our most
talented developers for years.  :func:`~matplotlib.pyplot.contourf`
now handles interior masked regions, and the boundaries of line and
filled contours coincide.

Additionally, he has contributed a new module :mod:`~matplotlib.tri` and
helper function :func:`~matplotlib.pyplot.triplot` for creating and
plotting unstructured triangular grids.

.. figure:: ../../gallery/images_contours_and_fields/images/sphx_glr_triplot_demo_001.png
   :target: ../../gallery/images_contours_and_fields/triplot_demo.html
   :align: center
   :scale: 50

multiple calls to show supported
--------------------------------

A long standing request is to support multiple calls to
:func:`~matplotlib.pyplot.show`.  This has been difficult because it
is hard to get consistent behavior across operating systems, user
interface toolkits and versions.  Eric Firing has done a lot of work
on rationalizing show across backends, with the desired behavior to
make show raise all newly created figures and block execution until
they are closed.  Repeated calls to show should raise newly created
figures since the last call.  Eric has done a lot of testing on the
user interface toolkits and versions and platforms he has access to,
but it is not possible to test them all, so please report problems to
the `mailing list
<https://mail.python.org/mailman/listinfo/matplotlib-users>`__
and `bug tracker
<https://github.com/matplotlib/matplotlib/issues>`__.


mplot3d graphs can be embedded in arbitrary axes
------------------------------------------------

You can now place an mplot3d graph into an arbitrary axes location,
supporting mixing of 2D and 3D graphs in the same figure, and/or
multiple 3D graphs in a single figure, using the "projection" keyword
argument to add_axes or add_subplot.  Thanks Ben Root.

.. plot::

    from mpl_toolkits.mplot3d.axes3d import get_test_data

    fig = plt.figure()

    X = np.arange(-5, 5, 0.25)
    Y = np.arange(-5, 5, 0.25)
    X, Y = np.meshgrid(X, Y)
    R = np.sqrt(X**2 + Y**2)
    Z = np.sin(R)
    ax = fig.add_subplot(1, 2, 1, projection='3d')
    surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, cmap='viridis',
                           linewidth=0, antialiased=False)
    ax.set_zlim3d(-1.01, 1.01)

    fig.colorbar(surf, shrink=0.5, aspect=5)

    X, Y, Z = get_test_data(0.05)
    ax = fig.add_subplot(1, 2, 2, projection='3d')
    ax.plot_wireframe(X, Y, Z, rstride=10, cstride=10)

    plt.show()

tick_params
-----------

Eric Firing wrote tick_params, a convenience method for changing the
appearance of ticks and tick labels. See pyplot function
:func:`~matplotlib.pyplot.tick_params` and associated Axes method
:meth:`~matplotlib.axes.Axes.tick_params`.

Lots of performance and feature enhancements
--------------------------------------------


* Faster magnification of large images, and the ability to zoom in to
  a single pixel

* Local installs of documentation work better

* Improved "widgets" -- mouse grabbing is supported

* More accurate snapping of lines to pixel boundaries

* More consistent handling of color, particularly the alpha channel,
  throughout the API

Much improved software carpentry
--------------------------------


File: doc/users/project/history.rst
Line number range: 1 - 114
Content:
.. redirect-from:: /users/history

.. _project_history:

History
=======

.. note::

   The following introductory text was written in 2008 by John D. Hunter
   (1968-2012), the original author of Matplotlib.

Matplotlib is a library for making 2D plots of arrays in `Python
<https://www.python.org>`_.  Although it has its origins in emulating
the MATLAB graphics commands, it is
independent of MATLAB, and can be used in a Pythonic, object-oriented
way.  Although Matplotlib is written primarily in pure Python, it
makes heavy use of `NumPy <https://numpy.org>`_ and other extension
code to provide good performance even for large arrays.

Matplotlib is designed with the philosophy that you should be able to
create simple plots with just a few commands, or just one!  If you
want to see a histogram of your data, you shouldn't need to
instantiate objects, call methods, set properties, and so on; it
should just work.

For years, I used to use MATLAB exclusively for data analysis and
visualization.  MATLAB excels at making nice looking plots easy.  When
I began working with EEG data, I found that I needed to write
applications to interact with my data, and developed an EEG analysis
application in MATLAB.  As the application grew in complexity,
interacting with databases, http servers, manipulating complex data
structures, I began to strain against the limitations of MATLAB as a
programming language, and decided to start over in Python.  Python
more than makes up for all of MATLAB's deficiencies as a programming
language, but I was having difficulty finding a 2D plotting package
(for 3D `VTK <http://www.vtk.org/>`_ more than exceeds all of my
needs).

When I went searching for a Python plotting package, I had several
requirements:

* Plots should look great - publication quality.  One important
  requirement for me is that the text looks good (antialiased, etc.)

* Postscript output for inclusion with TeX documents

* Embeddable in a graphical user interface for application
  development

* Code should be easy enough that I can understand it and extend
  it

* Making plots should be easy

Finding no package that suited me just right, I did what any
self-respecting Python programmer would do: rolled up my sleeves and
dived in.  Not having any real experience with computer graphics, I
decided to emulate MATLAB's plotting capabilities because that is
something MATLAB does very well.  This had the added advantage that
many people have a lot of MATLAB experience, and thus they can
quickly get up to steam plotting in python.  From a developer's
perspective, having a fixed user interface (the pylab interface) has
been very useful, because the guts of the code base can be redesigned
without affecting user code.

The Matplotlib code is conceptually divided into three parts: the
*pylab interface* is the set of functions provided by
:mod:`pylab` which allow the user to create plots with code
quite similar to MATLAB figure generating code
(:ref:`pyplot_tutorial`).  The *Matplotlib frontend* or *Matplotlib
API* is the set of classes that do the heavy lifting, creating and
managing figures, text, lines, plots and so on
(:ref:`artists_tutorial`).  This is an abstract interface that knows
nothing about output.  The *backends* are device-dependent drawing
devices, aka renderers, that transform the frontend representation to
hardcopy or a display device (:ref:`what-is-a-backend`).  Example
backends: PS creates `PostScript®
<https://www.adobe.com/products/postscript.html>`_ hardcopy, SVG
creates `Scalable Vector Graphics <https://www.w3.org/Graphics/SVG/>`_
hardcopy, Agg creates PNG output using the high quality `Anti-Grain
Geometry <http://agg.sourceforge.net/antigrain.com/>`_
library that ships with Matplotlib, GTK embeds Matplotlib in a
`Gtk+ <https://www.gtk.org/>`_
application, GTKAgg uses the Anti-Grain renderer to create a figure
and embed it in a Gtk+ application, and so on for `PDF
<https://acrobat.adobe.com/us/en/acrobat/about-adobe-pdf.html>`_, `WxWidgets
<https://www.wxpython.org/>`_, `Tkinter
<https://docs.python.org/3/library/tkinter.html>`_, etc.

Matplotlib is used by many people in many different contexts.  Some
people want to automatically generate PostScript files to send
to a printer or publishers.  Others deploy Matplotlib on a web
application server to generate PNG output for inclusion in
dynamically-generated web pages.  Some use Matplotlib interactively
from the Python shell in Tkinter on Windows. My primary use is to
embed Matplotlib in a Gtk+ EEG application that runs on Windows, Linux
and Macintosh OS X.

----

Matplotlib's original logo (2003 -- 2008).

..
   The original logo was added in fc8c215.

.. plot::

   from matplotlib import cbook, pyplot as plt, style
   import numpy as np

   style.use("classic")

   datafile = cbook.get_sample_data('membrane.dat', asfileobj=False)


File: galleries/users_explain/artists/index.rst
Line number range: 1 - 144
Content:
.. _users_artists:

Using Artists
-------------

Almost all objects you interact with on a Matplotlib plot are called "Artist"
(and are subclasses of the `.Artist` class).  :doc:`Figure <../figure/index>`
and :doc:`Axes <../axes/index>` are Artists, and generally contain :doc:`Axis
<../axis/index>` Artists and Artists that contain data or annotation
information.


Creating Artists
~~~~~~~~~~~~~~~~

Usually we do not instantiate Artists directly, but rather use a plotting
method on `~.axes.Axes`.  Some examples of plotting methods and the Artist
object they create is given below:

=========================================  =================
Axes helper method                         Artist
=========================================  =================
`~.axes.Axes.annotate` - text annotations  `.Annotation`
`~.axes.Axes.bar` - bar charts             `.Rectangle`
`~.axes.Axes.errorbar` - error bar plots   `.Line2D` and
                                           `.Rectangle`
`~.axes.Axes.fill` - shared area           `.Polygon`
`~.axes.Axes.hist` - histograms            `.Rectangle`
`~.axes.Axes.imshow` - image data          `.AxesImage`
`~.axes.Axes.legend` - Axes legend         `.Legend`
`~.axes.Axes.plot` - xy plots              `.Line2D`
`~.axes.Axes.scatter` - scatter charts     `.PolyCollection`
`~.axes.Axes.text` - text                  `.Text`
=========================================  =================

As an example, we can save the Line2D Artist returned from `.axes.Axes.plot`:

.. sourcecode:: ipython

    In [209]: import matplotlib.pyplot as plt
    In [210]: import matplotlib.artist as martist
    In [211]: import numpy as np

    In [212]: fig, ax = plt.subplots()
    In [213]: x, y = np.random.rand(2, 100)
    In [214]: lines = ax.plot(x, y, '-', label='example')
    In [215]: print(lines)
    [<matplotlib.lines.Line2D at 0xd378b0c>]

Note that ``plot`` returns a _list_ of lines because you can pass in multiple x,
y pairs to plot.  The line has been added to the Axes, and we can retrieve the
Artist via `~.Axes.get_lines()`:

.. sourcecode:: ipython

    In [216]: print(ax.get_lines())
    <a list of 1 Line2D objects>
    In [217]: print(ax.get_lines()[0])
    Line2D(example)

Changing Artist properties
~~~~~~~~~~~~~~~~~~~~~~~~~~

Getting the ``lines`` object gives us access to all the properties of the
Line2D object.  So if we want to change the *linewidth* after the fact, we can do so using `.Artist.set`.

.. plot::
    :include-source:

    fig, ax = plt.subplots(figsize=(4, 2.5))
    x = np.arange(0, 13, 0.2)
    y = np.sin(x)
    lines = ax.plot(x, y, '-', label='example', linewidth=0.2, color='blue')
    lines[0].set(color='green', linewidth=2)

We can interrogate the full list of settable properties with
`matplotlib.artist.getp`:

.. sourcecode:: ipython

    In [218]: martist.getp(lines[0])
    agg_filter = None
    alpha = None
    animated = False
    antialiased or aa = True
    bbox = Bbox(x0=0.004013842290585101, y0=0.013914221641967...
    children = []
    clip_box = TransformedBbox(     Bbox(x0=0.0, y0=0.0, x1=1.0, ...
    clip_on = True
    clip_path = None
    color or c = blue
    dash_capstyle = butt
    dash_joinstyle = round
    data = (array([0.91377845, 0.58456834, 0.36492019, 0.0379...
    drawstyle or ds = default
    figure = Figure(550x450)
    fillstyle = full
    gapcolor = None
    gid = None
    in_layout = True
    label = example
    linestyle or ls = -
    linewidth or lw = 2.0
    marker = None
    markeredgecolor or mec = blue
    markeredgewidth or mew = 1.0
    markerfacecolor or mfc = blue
    markerfacecoloralt or mfcalt = none
    markersize or ms = 6.0
    markevery = None
    mouseover = False
    path = Path(array([[0.91377845, 0.51224793],        [0.58...
    path_effects = []
    picker = None
    pickradius = 5
    rasterized = False
    sketch_params = None
    snap = None
    solid_capstyle = projecting
    solid_joinstyle = round
    tightbbox = Bbox(x0=70.4609002763619, y0=54.321277798941786, x...
    transform = CompositeGenericTransform(     TransformWrapper(  ...
    transformed_clip_path_and_affine = (None, None)
    url = None
    visible = True
    window_extent = Bbox(x0=70.4609002763619, y0=54.321277798941786, x...
    xdata = [0.91377845 0.58456834 0.36492019 0.03796664 0.884...
    xydata = [[0.91377845 0.51224793]  [0.58456834 0.9820474 ] ...
    ydata = [0.51224793 0.9820474  0.24469912 0.61647032 0.483...
    zorder = 2

Note most Artists also have a distinct list of setters; e.g.
`.Line2D.set_color` or `.Line2D.set_linewidth`.

Changing Artist data
~~~~~~~~~~~~~~~~~~~~

In addition to styling properties like *color* and *linewidth*, the Line2D
object has a *data* property.  You can set the data after the line has been
created using `.Line2D.set_data`.  This is often used for Animations, where the
same line is shown evolving over time (see :doc:`../animations/index`)

.. plot::
    :include-source:


File: lib/matplotlib/tests/test_artist.py
Line number range: 1 - 500
Content:
1. import io
2. from itertools import chain
3. 
4. import numpy as np
5. 
6. import pytest
7. 
8. import matplotlib.colors as mcolors
9. import matplotlib.pyplot as plt
10. import matplotlib.patches as mpatches
11. import matplotlib.lines as mlines
12. import matplotlib.path as mpath
13. import matplotlib.transforms as mtransforms
14. import matplotlib.collections as mcollections
15. import matplotlib.artist as martist
16. import matplotlib.backend_bases as mbackend_bases
17. import matplotlib as mpl
18. from matplotlib.testing.decorators import check_figures_equal, image_comparison
19. 
20. 
21. def test_patch_transform_of_none():
22.     # tests the behaviour of patches added to an Axes with various transform
23.     # specifications
24. 
25.     ax = plt.axes()
26.     ax.set_xlim([1, 3])
27.     ax.set_ylim([1, 3])
28. 
29.     # Draw an ellipse over data coord (2, 2) by specifying device coords.
30.     xy_data = (2, 2)
31.     xy_pix = ax.transData.transform(xy_data)
32. 
33.     # Not providing a transform of None puts the ellipse in data coordinates .
34.     e = mpatches.Ellipse(xy_data, width=1, height=1, fc='yellow', alpha=0.5)
35.     ax.add_patch(e)
36.     assert e._transform == ax.transData
37. 
38.     # Providing a transform of None puts the ellipse in device coordinates.
39.     e = mpatches.Ellipse(xy_pix, width=120, height=120, fc='coral',
40.                          transform=None, alpha=0.5)
41.     assert e.is_transform_set()
42.     ax.add_patch(e)
43.     assert isinstance(e._transform, mtransforms.IdentityTransform)
44. 
45.     # Providing an IdentityTransform puts the ellipse in device coordinates.
46.     e = mpatches.Ellipse(xy_pix, width=100, height=100,
47.                          transform=mtransforms.IdentityTransform(), alpha=0.5)
48.     ax.add_patch(e)
49.     assert isinstance(e._transform, mtransforms.IdentityTransform)
50. 
51.     # Not providing a transform, and then subsequently "get_transform" should
52.     # not mean that "is_transform_set".
53.     e = mpatches.Ellipse(xy_pix, width=120, height=120, fc='coral',
54.                          alpha=0.5)
55.     intermediate_transform = e.get_transform()
56.     assert not e.is_transform_set()
57.     ax.add_patch(e)
58.     assert e.get_transform() != intermediate_transform
59.     assert e.is_transform_set()
60.     assert e._transform == ax.transData
61. 
62. 
63. def test_collection_transform_of_none():
64.     # tests the behaviour of collections added to an Axes with various
65.     # transform specifications
66. 
67.     ax = plt.axes()
68.     ax.set_xlim([1, 3])
69.     ax.set_ylim([1, 3])
70. 
71.     # draw an ellipse over data coord (2, 2) by specifying device coords
72.     xy_data = (2, 2)
73.     xy_pix = ax.transData.transform(xy_data)
74. 
75.     # not providing a transform of None puts the ellipse in data coordinates
76.     e = mpatches.Ellipse(xy_data, width=1, height=1)
77.     c = mcollections.PatchCollection([e], facecolor='yellow', alpha=0.5)
78.     ax.add_collection(c)
79.     # the collection should be in data coordinates
80.     assert c.get_offset_transform() + c.get_transform() == ax.transData
81. 
82.     # providing a transform of None puts the ellipse in device coordinates
83.     e = mpatches.Ellipse(xy_pix, width=120, height=120)
84.     c = mcollections.PatchCollection([e], facecolor='coral',
85.                                      alpha=0.5)
86.     c.set_transform(None)
87.     ax.add_collection(c)
88.     assert isinstance(c.get_transform(), mtransforms.IdentityTransform)
89. 
90.     # providing an IdentityTransform puts the ellipse in device coordinates
91.     e = mpatches.Ellipse(xy_pix, width=100, height=100)
92.     c = mcollections.PatchCollection([e],
93.                                      transform=mtransforms.IdentityTransform(),
94.                                      alpha=0.5)
95.     ax.add_collection(c)
96.     assert isinstance(c.get_offset_transform(), mtransforms.IdentityTransform)
97. 
98. 
99. @image_comparison(["clip_path_clipping"], remove_text=True)
100. def test_clipping():
101.     exterior = mpath.Path.unit_rectangle().deepcopy()
102.     exterior.vertices *= 4
103.     exterior.vertices -= 2
104.     interior = mpath.Path.unit_circle().deepcopy()
105.     interior.vertices = interior.vertices[::-1]
106.     clip_path = mpath.Path.make_compound_path(exterior, interior)
107. 
108.     star = mpath.Path.unit_regular_star(6).deepcopy()
109.     star.vertices *= 2.6
110. 
111.     fig, (ax1, ax2) = plt.subplots(1, 2, sharex=True, sharey=True)
112. 
113.     col = mcollections.PathCollection([star], lw=5, edgecolor='blue',
114.                                       facecolor='red', alpha=0.7, hatch='*')
115.     col.set_clip_path(clip_path, ax1.transData)
116.     ax1.add_collection(col)
117. 
118.     patch = mpatches.PathPatch(star, lw=5, edgecolor='blue', facecolor='red',
119.                                alpha=0.7, hatch='*')
120.     patch.set_clip_path(clip_path, ax2.transData)
121.     ax2.add_patch(patch)
122. 
123.     ax1.set_xlim([-3, 3])
124.     ax1.set_ylim([-3, 3])
125. 
126. 
127. @check_figures_equal(extensions=['png'])
128. def test_clipping_zoom(fig_test, fig_ref):
129.     # This test places the Axes and sets its limits such that the clip path is
130.     # outside the figure entirely. This should not break the clip path.
131.     ax_test = fig_test.add_axes([0, 0, 1, 1])
132.     l, = ax_test.plot([-3, 3], [-3, 3])
133.     # Explicit Path instead of a Rectangle uses clip path processing, instead
134.     # of a clip box optimization.
135.     p = mpath.Path([[0, 0], [1, 0], [1, 1], [0, 1], [0, 0]])
136.     p = mpatches.PathPatch(p, transform=ax_test.transData)
137.     l.set_clip_path(p)
138. 
139.     ax_ref = fig_ref.add_axes([0, 0, 1, 1])
140.     ax_ref.plot([-3, 3], [-3, 3])
141. 
142.     ax_ref.set(xlim=(0.5, 0.75), ylim=(0.5, 0.75))
143.     ax_test.set(xlim=(0.5, 0.75), ylim=(0.5, 0.75))
144. 
145. 
146. def test_cull_markers():
147.     x = np.random.random(20000)
148.     y = np.random.random(20000)
149. 
150.     fig, ax = plt.subplots()
151.     ax.plot(x, y, 'k.')
152.     ax.set_xlim(2, 3)
153. 
154.     pdf = io.BytesIO()
155.     fig.savefig(pdf, format="pdf")
156.     assert len(pdf.getvalue()) < 8000
157. 
158.     svg = io.BytesIO()
159.     fig.savefig(svg, format="svg")
160.     assert len(svg.getvalue()) < 20000
161. 
162. 
163. @image_comparison(['hatching'], remove_text=True, style='default')
164. def test_hatching():
165.     fig, ax = plt.subplots(1, 1)
166. 
167.     # Default hatch color.
168.     rect1 = mpatches.Rectangle((0, 0), 3, 4, hatch='/')
169.     ax.add_patch(rect1)
170. 
171.     rect2 = mcollections.RegularPolyCollection(
172.         4, sizes=[16000], offsets=[(1.5, 6.5)], offset_transform=ax.transData,
173.         hatch='/')
174.     ax.add_collection(rect2)
175. 
176.     # Ensure edge color is not applied to hatching.
177.     rect3 = mpatches.Rectangle((4, 0), 3, 4, hatch='/', edgecolor='C1')
178.     ax.add_patch(rect3)
179. 
180.     rect4 = mcollections.RegularPolyCollection(
181.         4, sizes=[16000], offsets=[(5.5, 6.5)], offset_transform=ax.transData,
182.         hatch='/', edgecolor='C1')
183.     ax.add_collection(rect4)
184. 
185.     ax.set_xlim(0, 7)
186.     ax.set_ylim(0, 9)
187. 
188. 
189. def test_remove():
190.     fig, ax = plt.subplots()
191.     im = ax.imshow(np.arange(36).reshape(6, 6))
192.     ln, = ax.plot(range(5))
193. 
194.     assert fig.stale
195.     assert ax.stale
196. 
197.     fig.canvas.draw()
198.     assert not fig.stale
199.     assert not ax.stale
200.     assert not ln.stale
201. 
202.     assert im in ax._mouseover_set
203.     assert ln not in ax._mouseover_set
204.     assert im.axes is ax
205. 
206.     im.remove()
207.     ln.remove()
208. 
209.     for art in [im, ln]:
210.         assert art.axes is None
211.         assert art.figure is None
212. 
213.     assert im not in ax._mouseover_set
214.     assert fig.stale
215.     assert ax.stale
216. 
217. 
218. @image_comparison(["default_edges.png"], remove_text=True, style='default')
219. def test_default_edges():
220.     # Remove this line when this test image is regenerated.
221.     plt.rcParams['text.kerning_factor'] = 6
222. 
223.     fig, [[ax1, ax2], [ax3, ax4]] = plt.subplots(2, 2)
224. 
225.     ax1.plot(np.arange(10), np.arange(10), 'x',
226.              np.arange(10) + 1, np.arange(10), 'o')
227.     ax2.bar(np.arange(10), np.arange(10), align='edge')
228.     ax3.text(0, 0, "BOX", size=24, bbox=dict(boxstyle='sawtooth'))
229.     ax3.set_xlim((-1, 1))
230.     ax3.set_ylim((-1, 1))
231.     pp1 = mpatches.PathPatch(
232.         mpath.Path([(0, 0), (1, 0), (1, 1), (0, 0)],
233.                    [mpath.Path.MOVETO, mpath.Path.CURVE3,
234.                     mpath.Path.CURVE3, mpath.Path.CLOSEPOLY]),
235.         fc="none", transform=ax4.transData)
236.     ax4.add_patch(pp1)
237. 
238. 
239. def test_properties():
240.     ln = mlines.Line2D([], [])
241.     ln.properties()  # Check that no warning is emitted.
242. 
243. 
244. def test_setp():
245.     # Check empty list
246.     plt.setp([])
247.     plt.setp([[]])
248. 
249.     # Check arbitrary iterables
250.     fig, ax = plt.subplots()
251.     lines1 = ax.plot(range(3))
252.     lines2 = ax.plot(range(3))
253.     martist.setp(chain(lines1, lines2), 'lw', 5)
254.     plt.setp(ax.spines.values(), color='green')
255. 
256.     # Check *file* argument
257.     sio = io.StringIO()
258.     plt.setp(lines1, 'zorder', file=sio)
259.     assert sio.getvalue() == '  zorder: float\n'
260. 
261. 
262. def test_None_zorder():
263.     fig, ax = plt.subplots()
264.     ln, = ax.plot(range(5), zorder=None)
265.     assert ln.get_zorder() == mlines.Line2D.zorder
266.     ln.set_zorder(123456)
267.     assert ln.get_zorder() == 123456
268.     ln.set_zorder(None)
269.     assert ln.get_zorder() == mlines.Line2D.zorder
270. 
271. 
272. @pytest.mark.parametrize('accept_clause, expected', [
273.     ('', 'unknown'),
274.     ("ACCEPTS: [ '-' | '--' | '-.' ]", "[ '-' | '--' | '-.' ]"),
275.     ('ACCEPTS: Some description.', 'Some description.'),
276.     ('.. ACCEPTS: Some description.', 'Some description.'),
277.     ('arg : int', 'int'),
278.     ('*arg : int', 'int'),
279.     ('arg : int\nACCEPTS: Something else.', 'Something else. '),
280. ])
281. def test_artist_inspector_get_valid_values(accept_clause, expected):
282.     class TestArtist(martist.Artist):
283.         def set_f(self, arg):
284.             pass
285. 
286.     TestArtist.set_f.__doc__ = """
287.     Some text.
288. 
289.     %s
290.     """ % accept_clause
291.     valid_values = martist.ArtistInspector(TestArtist).get_valid_values('f')
292.     assert valid_values == expected
293. 
294. 
295. def test_artist_inspector_get_aliases():
296.     # test the correct format and type of get_aliases method
297.     ai = martist.ArtistInspector(mlines.Line2D)
298.     aliases = ai.get_aliases()
299.     assert aliases["linewidth"] == {"lw"}
300. 
301. 
302. def test_set_alpha():
303.     art = martist.Artist()
304.     with pytest.raises(TypeError, match='^alpha must be numeric or None'):
305.         art.set_alpha('string')
306.     with pytest.raises(TypeError, match='^alpha must be numeric or None'):
307.         art.set_alpha([1, 2, 3])
308.     with pytest.raises(ValueError, match="outside 0-1 range"):
309.         art.set_alpha(1.1)
310.     with pytest.raises(ValueError, match="outside 0-1 range"):
311.         art.set_alpha(np.nan)
312. 
313. 
314. def test_set_alpha_for_array():
315.     art = martist.Artist()
316.     with pytest.raises(TypeError, match='^alpha must be numeric or None'):
317.         art._set_alpha_for_array('string')
318.     with pytest.raises(ValueError, match="outside 0-1 range"):
319.         art._set_alpha_for_array(1.1)
320.     with pytest.raises(ValueError, match="outside 0-1 range"):
321.         art._set_alpha_for_array(np.nan)
322.     with pytest.raises(ValueError, match="alpha must be between 0 and 1"):
323.         art._set_alpha_for_array([0.5, 1.1])
324.     with pytest.raises(ValueError, match="alpha must be between 0 and 1"):
325.         art._set_alpha_for_array([0.5, np.nan])
326. 
327. 
328. def test_callbacks():
329.     def func(artist):
330.         func.counter += 1
331. 
332.     func.counter = 0
333. 
334.     art = martist.Artist()
335.     oid = art.add_callback(func)
336.     assert func.counter == 0
337.     art.pchanged()  # must call the callback
338.     assert func.counter == 1
339.     art.set_zorder(10)  # setting a property must also call the callback
340.     assert func.counter == 2
341.     art.remove_callback(oid)
342.     art.pchanged()  # must not call the callback anymore
343.     assert func.counter == 2
344. 
345. 
346. def test_set_signature():
347.     """Test autogenerated ``set()`` for Artist subclasses."""
348.     class MyArtist1(martist.Artist):
349.         def set_myparam1(self, val):
350.             pass
351. 
352.     assert hasattr(MyArtist1.set, '_autogenerated_signature')
353.     assert 'myparam1' in MyArtist1.set.__doc__
354. 
355.     class MyArtist2(MyArtist1):
356.         def set_myparam2(self, val):
357.             pass
358. 
359.     assert hasattr(MyArtist2.set, '_autogenerated_signature')
360.     assert 'myparam1' in MyArtist2.set.__doc__
361.     assert 'myparam2' in MyArtist2.set.__doc__
362. 
363. 
364. def test_set_is_overwritten():
365.     """set() defined in Artist subclasses should not be overwritten."""
366.     class MyArtist3(martist.Artist):
367. 
368.         def set(self, **kwargs):
369.             """Not overwritten."""
370. 
371.     assert not hasattr(MyArtist3.set, '_autogenerated_signature')
372.     assert MyArtist3.set.__doc__ == "Not overwritten."
373. 
374.     class MyArtist4(MyArtist3):
375.         pass
376. 
377.     assert MyArtist4.set is MyArtist3.set
378. 
379. 
380. def test_format_cursor_data_BoundaryNorm():
381.     """Test if cursor data is correct when using BoundaryNorm."""
382.     X = np.empty((3, 3))
383.     X[0, 0] = 0.9
384.     X[0, 1] = 0.99
385.     X[0, 2] = 0.999
386.     X[1, 0] = -1
387.     X[1, 1] = 0
388.     X[1, 2] = 1
389.     X[2, 0] = 0.09
390.     X[2, 1] = 0.009
391.     X[2, 2] = 0.0009
392. 
393.     # map range -1..1 to 0..256 in 0.1 steps
394.     fig, ax = plt.subplots()
395.     fig.suptitle("-1..1 to 0..256 in 0.1")
396.     norm = mcolors.BoundaryNorm(np.linspace(-1, 1, 20), 256)
397.     img = ax.imshow(X, cmap='RdBu_r', norm=norm)
398. 
399.     labels_list = [
400.         "[0.9]",
401.         "[1.]",
402.         "[1.]",
403.         "[-1.0]",
404.         "[0.0]",
405.         "[1.0]",
406.         "[0.09]",
407.         "[0.009]",
408.         "[0.0009]",
409.     ]
410.     for v, label in zip(X.flat, labels_list):
411.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.1))
412.         assert img.format_cursor_data(v) == label
413. 
414.     plt.close()
415. 
416.     # map range -1..1 to 0..256 in 0.01 steps
417.     fig, ax = plt.subplots()
418.     fig.suptitle("-1..1 to 0..256 in 0.01")
419.     cmap = mpl.colormaps['RdBu_r'].resampled(200)
420.     norm = mcolors.BoundaryNorm(np.linspace(-1, 1, 200), 200)
421.     img = ax.imshow(X, cmap=cmap, norm=norm)
422. 
423.     labels_list = [
424.         "[0.90]",
425.         "[0.99]",
426.         "[1.0]",
427.         "[-1.00]",
428.         "[0.00]",
429.         "[1.00]",
430.         "[0.09]",
431.         "[0.009]",
432.         "[0.0009]",
433.     ]
434.     for v, label in zip(X.flat, labels_list):
435.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.01))
436.         assert img.format_cursor_data(v) == label
437. 
438.     plt.close()
439. 
440.     # map range -1..1 to 0..256 in 0.01 steps
441.     fig, ax = plt.subplots()
442.     fig.suptitle("-1..1 to 0..256 in 0.001")
443.     cmap = mpl.colormaps['RdBu_r'].resampled(2000)
444.     norm = mcolors.BoundaryNorm(np.linspace(-1, 1, 2000), 2000)
445.     img = ax.imshow(X, cmap=cmap, norm=norm)
446. 
447.     labels_list = [
448.         "[0.900]",
449.         "[0.990]",
450.         "[0.999]",
451.         "[-1.000]",
452.         "[0.000]",
453.         "[1.000]",
454.         "[0.090]",
455.         "[0.009]",
456.         "[0.0009]",
457.     ]
458.     for v, label in zip(X.flat, labels_list):
459.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.001))
460.         assert img.format_cursor_data(v) == label
461. 
462.     plt.close()
463. 
464.     # different testing data set with
465.     # out of bounds values for 0..1 range
466.     X = np.empty((7, 1))
467.     X[0] = -1.0
468.     X[1] = 0.0
469.     X[2] = 0.1
470.     X[3] = 0.5
471.     X[4] = 0.9
472.     X[5] = 1.0
473.     X[6] = 2.0
474. 
475.     labels_list = [
476.         "[-1.0]",
477.         "[0.0]",
478.         "[0.1]",
479.         "[0.5]",
480.         "[0.9]",
481.         "[1.0]",
482.         "[2.0]",
483.     ]
484. 
485.     fig, ax = plt.subplots()
486.     fig.suptitle("noclip, neither")
487.     norm = mcolors.BoundaryNorm(
488.         np.linspace(0, 1, 4, endpoint=True), 256, clip=False, extend='neither')
489.     img = ax.imshow(X, cmap='RdBu_r', norm=norm)
490.     for v, label in zip(X.flat, labels_list):
491.         # label = "[{:-#.{}g}]".format(v, cbook._g_sig_digits(v, 0.33))
492.         assert img.format_cursor_data(v) == label
493. 
494.     plt.close()
495. 
496.     fig, ax = plt.subplots()
497.     fig.suptitle("noclip, min")
498.     norm = mcolors.BoundaryNorm(
499.         np.linspace(0, 1, 4, endpoint=True), 256, clip=False, extend='min')
500.     img = ax.imshow(X, cmap='RdBu_r', norm=norm)


File: lib/matplotlib/tests/test_axes.py
Line number range: 1 - 500
Content:
1. import contextlib
2. from collections import namedtuple
3. import datetime
4. from decimal import Decimal
5. from functools import partial
6. import inspect
7. import io
8. from itertools import product
9. import platform
10. from types import SimpleNamespace
11. 
12. import dateutil.tz
13. 
14. import numpy as np
15. from numpy import ma
16. from cycler import cycler
17. import pytest
18. 
19. import matplotlib
20. import matplotlib as mpl
21. from matplotlib import rc_context, patheffects
22. import matplotlib.colors as mcolors
23. import matplotlib.dates as mdates
24. from matplotlib.figure import Figure
25. from matplotlib.axes import Axes
26. import matplotlib.font_manager as mfont_manager
27. import matplotlib.markers as mmarkers
28. import matplotlib.patches as mpatches
29. import matplotlib.path as mpath
30. from matplotlib.projections.geo import HammerAxes
31. from matplotlib.projections.polar import PolarAxes
32. import matplotlib.pyplot as plt
33. import matplotlib.text as mtext
34. import matplotlib.ticker as mticker
35. import matplotlib.transforms as mtransforms
36. import mpl_toolkits.axisartist as AA  # type: ignore
37. from numpy.testing import (
38.     assert_allclose, assert_array_equal, assert_array_almost_equal)
39. from matplotlib.testing.decorators import (
40.     image_comparison, check_figures_equal, remove_ticks_and_titles)
41. 
42. # Note: Some test cases are run twice: once normally and once with labeled data
43. #       These two must be defined in the same test function or need to have
44. #       different baseline images to prevent race conditions when pytest runs
45. #       the tests with multiple threads.
46. 
47. 
48. @check_figures_equal(extensions=["png"])
49. def test_invisible_axes(fig_test, fig_ref):
50.     ax = fig_test.subplots()
51.     ax.set_visible(False)
52. 
53. 
54. def test_get_labels():
55.     fig, ax = plt.subplots()
56.     ax.set_xlabel('x label')
57.     ax.set_ylabel('y label')
58.     assert ax.get_xlabel() == 'x label'
59.     assert ax.get_ylabel() == 'y label'
60. 
61. 
62. def test_repr():
63.     fig, ax = plt.subplots()
64.     ax.set_label('label')
65.     ax.set_title('title')
66.     ax.set_xlabel('x')
67.     ax.set_ylabel('y')
68.     assert repr(ax) == (
69.         "<Axes: "
70.         "label='label', title={'center': 'title'}, xlabel='x', ylabel='y'>")
71. 
72. 
73. @check_figures_equal()
74. def test_label_loc_vertical(fig_test, fig_ref):
75.     ax = fig_test.subplots()
76.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
77.     ax.legend()
78.     ax.set_ylabel('Y Label', loc='top')
79.     ax.set_xlabel('X Label', loc='right')
80.     cbar = fig_test.colorbar(sc)
81.     cbar.set_label("Z Label", loc='top')
82. 
83.     ax = fig_ref.subplots()
84.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
85.     ax.legend()
86.     ax.set_ylabel('Y Label', y=1, ha='right')
87.     ax.set_xlabel('X Label', x=1, ha='right')
88.     cbar = fig_ref.colorbar(sc)
89.     cbar.set_label("Z Label", y=1, ha='right')
90. 
91. 
92. @check_figures_equal()
93. def test_label_loc_horizontal(fig_test, fig_ref):
94.     ax = fig_test.subplots()
95.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
96.     ax.legend()
97.     ax.set_ylabel('Y Label', loc='bottom')
98.     ax.set_xlabel('X Label', loc='left')
99.     cbar = fig_test.colorbar(sc, orientation='horizontal')
100.     cbar.set_label("Z Label", loc='left')
101. 
102.     ax = fig_ref.subplots()
103.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
104.     ax.legend()
105.     ax.set_ylabel('Y Label', y=0, ha='left')
106.     ax.set_xlabel('X Label', x=0, ha='left')
107.     cbar = fig_ref.colorbar(sc, orientation='horizontal')
108.     cbar.set_label("Z Label", x=0, ha='left')
109. 
110. 
111. @check_figures_equal()
112. def test_label_loc_rc(fig_test, fig_ref):
113.     with matplotlib.rc_context({"xaxis.labellocation": "right",
114.                                 "yaxis.labellocation": "top"}):
115.         ax = fig_test.subplots()
116.         sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
117.         ax.legend()
118.         ax.set_ylabel('Y Label')
119.         ax.set_xlabel('X Label')
120.         cbar = fig_test.colorbar(sc, orientation='horizontal')
121.         cbar.set_label("Z Label")
122. 
123.     ax = fig_ref.subplots()
124.     sc = ax.scatter([1, 2], [1, 2], c=[1, 2], label='scatter')
125.     ax.legend()
126.     ax.set_ylabel('Y Label', y=1, ha='right')
127.     ax.set_xlabel('X Label', x=1, ha='right')
128.     cbar = fig_ref.colorbar(sc, orientation='horizontal')
129.     cbar.set_label("Z Label", x=1, ha='right')
130. 
131. 
132. def test_label_shift():
133.     fig, ax = plt.subplots()
134. 
135.     # Test label re-centering on x-axis
136.     ax.set_xlabel("Test label", loc="left")
137.     ax.set_xlabel("Test label", loc="center")
138.     assert ax.xaxis.get_label().get_horizontalalignment() == "center"
139.     ax.set_xlabel("Test label", loc="right")
140.     assert ax.xaxis.get_label().get_horizontalalignment() == "right"
141.     ax.set_xlabel("Test label", loc="center")
142.     assert ax.xaxis.get_label().get_horizontalalignment() == "center"
143. 
144.     # Test label re-centering on y-axis
145.     ax.set_ylabel("Test label", loc="top")
146.     ax.set_ylabel("Test label", loc="center")
147.     assert ax.yaxis.get_label().get_horizontalalignment() == "center"
148.     ax.set_ylabel("Test label", loc="bottom")
149.     assert ax.yaxis.get_label().get_horizontalalignment() == "left"
150.     ax.set_ylabel("Test label", loc="center")
151.     assert ax.yaxis.get_label().get_horizontalalignment() == "center"
152. 
153. 
154. @check_figures_equal(extensions=["png"])
155. def test_acorr(fig_test, fig_ref):
156.     np.random.seed(19680801)
157.     Nx = 512
158.     x = np.random.normal(0, 1, Nx).cumsum()
159.     maxlags = Nx-1
160. 
161.     ax_test = fig_test.subplots()
162.     ax_test.acorr(x, maxlags=maxlags)
163. 
164.     ax_ref = fig_ref.subplots()
165.     # Normalized autocorrelation
166.     norm_auto_corr = np.correlate(x, x, mode="full")/np.dot(x, x)
167.     lags = np.arange(-maxlags, maxlags+1)
168.     norm_auto_corr = norm_auto_corr[Nx-1-maxlags:Nx+maxlags]
169.     ax_ref.vlines(lags, [0], norm_auto_corr)
170.     ax_ref.axhline(y=0, xmin=0, xmax=1)
171. 
172. 
173. @check_figures_equal(extensions=["png"])
174. def test_acorr_integers(fig_test, fig_ref):
175.     np.random.seed(19680801)
176.     Nx = 51
177.     x = (np.random.rand(Nx) * 10).cumsum()
178.     x = (np.ceil(x)).astype(np.int64)
179.     maxlags = Nx-1
180. 
181.     ax_test = fig_test.subplots()
182.     ax_test.acorr(x, maxlags=maxlags)
183. 
184.     ax_ref = fig_ref.subplots()
185. 
186.     # Normalized autocorrelation
187.     norm_auto_corr = np.correlate(x, x, mode="full")/np.dot(x, x)
188.     lags = np.arange(-maxlags, maxlags+1)
189.     norm_auto_corr = norm_auto_corr[Nx-1-maxlags:Nx+maxlags]
190.     ax_ref.vlines(lags, [0], norm_auto_corr)
191.     ax_ref.axhline(y=0, xmin=0, xmax=1)
192. 
193. 
194. @check_figures_equal(extensions=["png"])
195. def test_spy(fig_test, fig_ref):
196.     np.random.seed(19680801)
197.     a = np.ones(32 * 32)
198.     a[:16 * 32] = 0
199.     np.random.shuffle(a)
200.     a = a.reshape((32, 32))
201. 
202.     axs_test = fig_test.subplots(2)
203.     axs_test[0].spy(a)
204.     axs_test[1].spy(a, marker=".", origin="lower")
205. 
206.     axs_ref = fig_ref.subplots(2)
207.     axs_ref[0].imshow(a, cmap="gray_r", interpolation="nearest")
208.     axs_ref[0].xaxis.tick_top()
209.     axs_ref[1].plot(*np.nonzero(a)[::-1], ".", markersize=10)
210.     axs_ref[1].set(
211.         aspect=1, xlim=axs_ref[0].get_xlim(), ylim=axs_ref[0].get_ylim()[::-1])
212.     for ax in axs_ref:
213.         ax.xaxis.set_ticks_position("both")
214. 
215. 
216. def test_spy_invalid_kwargs():
217.     fig, ax = plt.subplots()
218.     for unsupported_kw in [{'interpolation': 'nearest'},
219.                            {'marker': 'o', 'linestyle': 'solid'}]:
220.         with pytest.raises(TypeError):
221.             ax.spy(np.eye(3, 3), **unsupported_kw)
222. 
223. 
224. @check_figures_equal(extensions=["png"])
225. def test_matshow(fig_test, fig_ref):
226.     mpl.style.use("mpl20")
227.     a = np.random.rand(32, 32)
228.     fig_test.add_subplot().matshow(a)
229.     ax_ref = fig_ref.add_subplot()
230.     ax_ref.imshow(a)
231.     ax_ref.xaxis.tick_top()
232.     ax_ref.xaxis.set_ticks_position('both')
233. 
234. 
235. @image_comparison(['formatter_ticker_001',
236.                    'formatter_ticker_002',
237.                    'formatter_ticker_003',
238.                    'formatter_ticker_004',
239.                    'formatter_ticker_005',
240.                    ])
241. def test_formatter_ticker():
242.     import matplotlib.testing.jpl_units as units
243.     units.register()
244. 
245.     # This should affect the tick size.  (Tests issue #543)
246.     matplotlib.rcParams['lines.markeredgewidth'] = 30
247. 
248.     # This essentially test to see if user specified labels get overwritten
249.     # by the auto labeler functionality of the axes.
250.     xdata = [x*units.sec for x in range(10)]
251.     ydata1 = [(1.5*y - 0.5)*units.km for y in range(10)]
252.     ydata2 = [(1.75*y - 1.0)*units.km for y in range(10)]
253. 
254.     ax = plt.figure().subplots()
255.     ax.set_xlabel("x-label 001")
256. 
257.     ax = plt.figure().subplots()
258.     ax.set_xlabel("x-label 001")
259.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
260. 
261.     ax = plt.figure().subplots()
262.     ax.set_xlabel("x-label 001")
263.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
264.     ax.set_xlabel("x-label 003")
265. 
266.     ax = plt.figure().subplots()
267.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
268.     ax.plot(xdata, ydata2, color='green', xunits="hour")
269.     ax.set_xlabel("x-label 004")
270. 
271.     # See SF bug 2846058
272.     # https://sourceforge.net/tracker/?func=detail&aid=2846058&group_id=80706&atid=560720
273.     ax = plt.figure().subplots()
274.     ax.plot(xdata, ydata1, color='blue', xunits="sec")
275.     ax.plot(xdata, ydata2, color='green', xunits="hour")
276.     ax.set_xlabel("x-label 005")
277.     ax.autoscale_view()
278. 
279. 
280. def test_funcformatter_auto_formatter():
281.     def _formfunc(x, pos):
282.         return ''
283. 
284.     ax = plt.figure().subplots()
285. 
286.     assert ax.xaxis.isDefault_majfmt
287.     assert ax.xaxis.isDefault_minfmt
288.     assert ax.yaxis.isDefault_majfmt
289.     assert ax.yaxis.isDefault_minfmt
290. 
291.     ax.xaxis.set_major_formatter(_formfunc)
292. 
293.     assert not ax.xaxis.isDefault_majfmt
294.     assert ax.xaxis.isDefault_minfmt
295.     assert ax.yaxis.isDefault_majfmt
296.     assert ax.yaxis.isDefault_minfmt
297. 
298.     targ_funcformatter = mticker.FuncFormatter(_formfunc)
299. 
300.     assert isinstance(ax.xaxis.get_major_formatter(),
301.                       mticker.FuncFormatter)
302. 
303.     assert ax.xaxis.get_major_formatter().func == targ_funcformatter.func
304. 
305. 
306. def test_strmethodformatter_auto_formatter():
307.     formstr = '{x}_{pos}'
308. 
309.     ax = plt.figure().subplots()
310. 
311.     assert ax.xaxis.isDefault_majfmt
312.     assert ax.xaxis.isDefault_minfmt
313.     assert ax.yaxis.isDefault_majfmt
314.     assert ax.yaxis.isDefault_minfmt
315. 
316.     ax.yaxis.set_minor_formatter(formstr)
317. 
318.     assert ax.xaxis.isDefault_majfmt
319.     assert ax.xaxis.isDefault_minfmt
320.     assert ax.yaxis.isDefault_majfmt
321.     assert not ax.yaxis.isDefault_minfmt
322. 
323.     targ_strformatter = mticker.StrMethodFormatter(formstr)
324. 
325.     assert isinstance(ax.yaxis.get_minor_formatter(),
326.                       mticker.StrMethodFormatter)
327. 
328.     assert ax.yaxis.get_minor_formatter().fmt == targ_strformatter.fmt
329. 
330. 
331. @image_comparison(["twin_axis_locators_formatters"])
332. def test_twin_axis_locators_formatters():
333.     vals = np.linspace(0, 1, num=5, endpoint=True)
334.     locs = np.sin(np.pi * vals / 2.0)
335. 
336.     majl = plt.FixedLocator(locs)
337.     minl = plt.FixedLocator([0.1, 0.2, 0.3])
338. 
339.     fig = plt.figure()
340.     ax1 = fig.add_subplot(1, 1, 1)
341.     ax1.plot([0.1, 100], [0, 1])
342.     ax1.yaxis.set_major_locator(majl)
343.     ax1.yaxis.set_minor_locator(minl)
344.     ax1.yaxis.set_major_formatter(plt.FormatStrFormatter('%08.2lf'))
345.     ax1.yaxis.set_minor_formatter(plt.FixedFormatter(['tricks', 'mind',
346.                                                       'jedi']))
347. 
348.     ax1.xaxis.set_major_locator(plt.LinearLocator())
349.     ax1.xaxis.set_minor_locator(plt.FixedLocator([15, 35, 55, 75]))
350.     ax1.xaxis.set_major_formatter(plt.FormatStrFormatter('%05.2lf'))
351.     ax1.xaxis.set_minor_formatter(plt.FixedFormatter(['c', '3', 'p', 'o']))
352.     ax1.twiny()
353.     ax1.twinx()
354. 
355. 
356. def test_twinx_cla():
357.     fig, ax = plt.subplots()
358.     ax2 = ax.twinx()
359.     ax3 = ax2.twiny()
360.     plt.draw()
361.     assert not ax2.xaxis.get_visible()
362.     assert not ax2.patch.get_visible()
363.     ax2.cla()
364.     ax3.cla()
365. 
366.     assert not ax2.xaxis.get_visible()
367.     assert not ax2.patch.get_visible()
368.     assert ax2.yaxis.get_visible()
369. 
370.     assert ax3.xaxis.get_visible()
371.     assert not ax3.patch.get_visible()
372.     assert not ax3.yaxis.get_visible()
373. 
374.     assert ax.xaxis.get_visible()
375.     assert ax.patch.get_visible()
376.     assert ax.yaxis.get_visible()
377. 
378. 
379. @pytest.mark.parametrize('twin', ('x', 'y'))
380. @check_figures_equal(extensions=['png'], tol=0.19)
381. def test_twin_logscale(fig_test, fig_ref, twin):
382.     twin_func = f'twin{twin}'  # test twinx or twiny
383.     set_scale = f'set_{twin}scale'
384.     x = np.arange(1, 100)
385. 
386.     # Change scale after twinning.
387.     ax_test = fig_test.add_subplot(2, 1, 1)
388.     ax_twin = getattr(ax_test, twin_func)()
389.     getattr(ax_test, set_scale)('log')
390.     ax_twin.plot(x, x)
391. 
392.     # Twin after changing scale.
393.     ax_test = fig_test.add_subplot(2, 1, 2)
394.     getattr(ax_test, set_scale)('log')
395.     ax_twin = getattr(ax_test, twin_func)()
396.     ax_twin.plot(x, x)
397. 
398.     for i in [1, 2]:
399.         ax_ref = fig_ref.add_subplot(2, 1, i)
400.         getattr(ax_ref, set_scale)('log')
401.         ax_ref.plot(x, x)
402. 
403.         # This is a hack because twinned Axes double-draw the frame.
404.         # Remove this when that is fixed.
405.         Path = matplotlib.path.Path
406.         fig_ref.add_artist(
407.             matplotlib.patches.PathPatch(
408.                 Path([[0, 0], [0, 1],
409.                       [0, 1], [1, 1],
410.                       [1, 1], [1, 0],
411.                       [1, 0], [0, 0]],
412.                      [Path.MOVETO, Path.LINETO] * 4),
413.                 transform=ax_ref.transAxes,
414.                 facecolor='none',
415.                 edgecolor=mpl.rcParams['axes.edgecolor'],
416.                 linewidth=mpl.rcParams['axes.linewidth'],
417.                 capstyle='projecting'))
418. 
419.     remove_ticks_and_titles(fig_test)
420.     remove_ticks_and_titles(fig_ref)
421. 
422. 
423. @image_comparison(['twin_autoscale.png'])
424. def test_twinx_axis_scales():
425.     x = np.array([0, 0.5, 1])
426.     y = 0.5 * x
427.     x2 = np.array([0, 1, 2])
428.     y2 = 2 * x2
429. 
430.     fig = plt.figure()
431.     ax = fig.add_axes((0, 0, 1, 1), autoscalex_on=False, autoscaley_on=False)
432.     ax.plot(x, y, color='blue', lw=10)
433. 
434.     ax2 = plt.twinx(ax)
435.     ax2.plot(x2, y2, 'r--', lw=5)
436. 
437.     ax.margins(0, 0)
438.     ax2.margins(0, 0)
439. 
440. 
441. def test_twin_inherit_autoscale_setting():
442.     fig, ax = plt.subplots()
443.     ax_x_on = ax.twinx()
444.     ax.set_autoscalex_on(False)
445.     ax_x_off = ax.twinx()
446. 
447.     assert ax_x_on.get_autoscalex_on()
448.     assert not ax_x_off.get_autoscalex_on()
449. 
450.     ax_y_on = ax.twiny()
451.     ax.set_autoscaley_on(False)
452.     ax_y_off = ax.twiny()
453. 
454.     assert ax_y_on.get_autoscaley_on()
455.     assert not ax_y_off.get_autoscaley_on()
456. 
457. 
458. def test_inverted_cla():
459.     # GitHub PR #5450. Setting autoscale should reset
460.     # axes to be non-inverted.
461.     # plotting an image, then 1d graph, axis is now down
462.     fig = plt.figure(0)
463.     ax = fig.gca()
464.     # 1. test that a new axis is not inverted per default
465.     assert not ax.xaxis_inverted()
466.     assert not ax.yaxis_inverted()
467.     img = np.random.random((100, 100))
468.     ax.imshow(img)
469.     # 2. test that a image axis is inverted
470.     assert not ax.xaxis_inverted()
471.     assert ax.yaxis_inverted()
472.     # 3. test that clearing and plotting a line, axes are
473.     # not inverted
474.     ax.cla()
475.     x = np.linspace(0, 2*np.pi, 100)
476.     ax.plot(x, np.cos(x))
477.     assert not ax.xaxis_inverted()
478.     assert not ax.yaxis_inverted()
479. 
480.     # 4. autoscaling should not bring back axes to normal
481.     ax.cla()
482.     ax.imshow(img)
483.     plt.autoscale()
484.     assert not ax.xaxis_inverted()
485.     assert ax.yaxis_inverted()
486. 
487.     for ax in fig.axes:
488.         ax.remove()
489.     # 5. two shared axes. Inverting the leader axis should invert the shared
490.     # axes; clearing the leader axis should bring axes in shared
491.     # axes back to normal.
492.     ax0 = plt.subplot(211)
493.     ax1 = plt.subplot(212, sharey=ax0)
494.     ax0.yaxis.set_inverted(True)
495.     assert ax1.yaxis_inverted()
496.     ax1.plot(x, np.cos(x))
497.     ax0.cla()
498.     assert not ax1.yaxis_inverted()
499.     ax1.cla()
500.     # 6. clearing the follower should not touch limits


File: lib/matplotlib/tests/test_image.py
Line number range: 1 - 500
Content:
1. from contextlib import ExitStack
2. from copy import copy
3. import functools
4. import io
5. import os
6. from pathlib import Path
7. import platform
8. import sys
9. import urllib.request
10. 
11. import numpy as np
12. from numpy.testing import assert_array_equal
13. from PIL import Image
14. 
15. import matplotlib as mpl
16. from matplotlib import (
17.     colors, image as mimage, patches, pyplot as plt, style, rcParams)
18. from matplotlib.image import (AxesImage, BboxImage, FigureImage,
19.                               NonUniformImage, PcolorImage)
20. from matplotlib.testing.decorators import check_figures_equal, image_comparison
21. from matplotlib.transforms import Bbox, Affine2D, TransformedBbox
22. import matplotlib.ticker as mticker
23. 
24. import pytest
25. 
26. 
27. @image_comparison(['image_interps'], style='mpl20')
28. def test_image_interps():
29.     """Make the basic nearest, bilinear and bicubic interps."""
30.     # Remove this line when this test image is regenerated.
31.     plt.rcParams['text.kerning_factor'] = 6
32. 
33.     X = np.arange(100).reshape(5, 20)
34. 
35.     fig, (ax1, ax2, ax3) = plt.subplots(3)
36.     ax1.imshow(X, interpolation='nearest')
37.     ax1.set_title('three interpolations')
38.     ax1.set_ylabel('nearest')
39. 
40.     ax2.imshow(X, interpolation='bilinear')
41.     ax2.set_ylabel('bilinear')
42. 
43.     ax3.imshow(X, interpolation='bicubic')
44.     ax3.set_ylabel('bicubic')
45. 
46. 
47. @image_comparison(['interp_alpha.png'], remove_text=True)
48. def test_alpha_interp():
49.     """Test the interpolation of the alpha channel on RGBA images"""
50.     fig, (axl, axr) = plt.subplots(1, 2)
51.     # full green image
52.     img = np.zeros((5, 5, 4))
53.     img[..., 1] = np.ones((5, 5))
54.     # transparent under main diagonal
55.     img[..., 3] = np.tril(np.ones((5, 5), dtype=np.uint8))
56.     axl.imshow(img, interpolation="none")
57.     axr.imshow(img, interpolation="bilinear")
58. 
59. 
60. @image_comparison(['interp_nearest_vs_none'],
61.                   extensions=['pdf', 'svg'], remove_text=True)
62. def test_interp_nearest_vs_none():
63.     """Test the effect of "nearest" and "none" interpolation"""
64.     # Setting dpi to something really small makes the difference very
65.     # visible. This works fine with pdf, since the dpi setting doesn't
66.     # affect anything but images, but the agg output becomes unusably
67.     # small.
68.     rcParams['savefig.dpi'] = 3
69.     X = np.array([[[218, 165, 32], [122, 103, 238]],
70.                   [[127, 255, 0], [255, 99, 71]]], dtype=np.uint8)
71.     fig, (ax1, ax2) = plt.subplots(1, 2)
72.     ax1.imshow(X, interpolation='none')
73.     ax1.set_title('interpolation none')
74.     ax2.imshow(X, interpolation='nearest')
75.     ax2.set_title('interpolation nearest')
76. 
77. 
78. @pytest.mark.parametrize('suppressComposite', [False, True])
79. @image_comparison(['figimage'], extensions=['png', 'pdf'])
80. def test_figimage(suppressComposite):
81.     fig = plt.figure(figsize=(2, 2), dpi=100)
82.     fig.suppressComposite = suppressComposite
83.     x, y = np.ix_(np.arange(100) / 100.0, np.arange(100) / 100)
84.     z = np.sin(x**2 + y**2 - x*y)
85.     c = np.sin(20*x**2 + 50*y**2)
86.     img = z + c/5
87. 
88.     fig.figimage(img, xo=0, yo=0, origin='lower')
89.     fig.figimage(img[::-1, :], xo=0, yo=100, origin='lower')
90.     fig.figimage(img[:, ::-1], xo=100, yo=0, origin='lower')
91.     fig.figimage(img[::-1, ::-1], xo=100, yo=100, origin='lower')
92. 
93. 
94. def test_image_python_io():
95.     fig, ax = plt.subplots()
96.     ax.plot([1, 2, 3])
97.     buffer = io.BytesIO()
98.     fig.savefig(buffer)
99.     buffer.seek(0)
100.     plt.imread(buffer)
101. 
102. 
103. @pytest.mark.parametrize(
104.     "img_size, fig_size, interpolation",
105.     [(5, 2, "hanning"),  # data larger than figure.
106.      (5, 5, "nearest"),  # exact resample.
107.      (5, 10, "nearest"),  # double sample.
108.      (3, 2.9, "hanning"),  # <3 upsample.
109.      (3, 9.1, "nearest"),  # >3 upsample.
110.      ])
111. @check_figures_equal(extensions=['png'])
112. def test_imshow_antialiased(fig_test, fig_ref,
113.                             img_size, fig_size, interpolation):
114.     np.random.seed(19680801)
115.     dpi = plt.rcParams["savefig.dpi"]
116.     A = np.random.rand(int(dpi * img_size), int(dpi * img_size))
117.     for fig in [fig_test, fig_ref]:
118.         fig.set_size_inches(fig_size, fig_size)
119.     ax = fig_test.subplots()
120.     ax.set_position([0, 0, 1, 1])
121.     ax.imshow(A, interpolation='antialiased')
122.     ax = fig_ref.subplots()
123.     ax.set_position([0, 0, 1, 1])
124.     ax.imshow(A, interpolation=interpolation)
125. 
126. 
127. @check_figures_equal(extensions=['png'])
128. def test_imshow_zoom(fig_test, fig_ref):
129.     # should be less than 3 upsample, so should be nearest...
130.     np.random.seed(19680801)
131.     dpi = plt.rcParams["savefig.dpi"]
132.     A = np.random.rand(int(dpi * 3), int(dpi * 3))
133.     for fig in [fig_test, fig_ref]:
134.         fig.set_size_inches(2.9, 2.9)
135.     ax = fig_test.subplots()
136.     ax.imshow(A, interpolation='antialiased')
137.     ax.set_xlim([10, 20])
138.     ax.set_ylim([10, 20])
139.     ax = fig_ref.subplots()
140.     ax.imshow(A, interpolation='nearest')
141.     ax.set_xlim([10, 20])
142.     ax.set_ylim([10, 20])
143. 
144. 
145. @check_figures_equal()
146. def test_imshow_pil(fig_test, fig_ref):
147.     style.use("default")
148.     png_path = Path(__file__).parent / "baseline_images/pngsuite/basn3p04.png"
149.     tiff_path = Path(__file__).parent / "baseline_images/test_image/uint16.tif"
150.     axs = fig_test.subplots(2)
151.     axs[0].imshow(Image.open(png_path))
152.     axs[1].imshow(Image.open(tiff_path))
153.     axs = fig_ref.subplots(2)
154.     axs[0].imshow(plt.imread(png_path))
155.     axs[1].imshow(plt.imread(tiff_path))
156. 
157. 
158. def test_imread_pil_uint16():
159.     img = plt.imread(os.path.join(os.path.dirname(__file__),
160.                      'baseline_images', 'test_image', 'uint16.tif'))
161.     assert img.dtype == np.uint16
162.     assert np.sum(img) == 134184960
163. 
164. 
165. def test_imread_fspath():
166.     img = plt.imread(
167.         Path(__file__).parent / 'baseline_images/test_image/uint16.tif')
168.     assert img.dtype == np.uint16
169.     assert np.sum(img) == 134184960
170. 
171. 
172. @pytest.mark.parametrize("fmt", ["png", "jpg", "jpeg", "tiff"])
173. def test_imsave(fmt):
174.     has_alpha = fmt not in ["jpg", "jpeg"]
175. 
176.     # The goal here is that the user can specify an output logical DPI
177.     # for the image, but this will not actually add any extra pixels
178.     # to the image, it will merely be used for metadata purposes.
179. 
180.     # So we do the traditional case (dpi == 1), and the new case (dpi
181.     # == 100) and read the resulting PNG files back in and make sure
182.     # the data is 100% identical.
183.     np.random.seed(1)
184.     # The height of 1856 pixels was selected because going through creating an
185.     # actual dpi=100 figure to save the image to a Pillow-provided format would
186.     # cause a rounding error resulting in a final image of shape 1855.
187.     data = np.random.rand(1856, 2)
188. 
189.     buff_dpi1 = io.BytesIO()
190.     plt.imsave(buff_dpi1, data, format=fmt, dpi=1)
191. 
192.     buff_dpi100 = io.BytesIO()
193.     plt.imsave(buff_dpi100, data, format=fmt, dpi=100)
194. 
195.     buff_dpi1.seek(0)
196.     arr_dpi1 = plt.imread(buff_dpi1, format=fmt)
197. 
198.     buff_dpi100.seek(0)
199.     arr_dpi100 = plt.imread(buff_dpi100, format=fmt)
200. 
201.     assert arr_dpi1.shape == (1856, 2, 3 + has_alpha)
202.     assert arr_dpi100.shape == (1856, 2, 3 + has_alpha)
203. 
204.     assert_array_equal(arr_dpi1, arr_dpi100)
205. 
206. 
207. @pytest.mark.parametrize("fmt", ["png", "pdf", "ps", "eps", "svg"])
208. def test_imsave_fspath(fmt):
209.     plt.imsave(Path(os.devnull), np.array([[0, 1]]), format=fmt)
210. 
211. 
212. def test_imsave_color_alpha():
213.     # Test that imsave accept arrays with ndim=3 where the third dimension is
214.     # color and alpha without raising any exceptions, and that the data is
215.     # acceptably preserved through a save/read roundtrip.
216.     np.random.seed(1)
217. 
218.     for origin in ['lower', 'upper']:
219.         data = np.random.rand(16, 16, 4)
220.         buff = io.BytesIO()
221.         plt.imsave(buff, data, origin=origin, format="png")
222. 
223.         buff.seek(0)
224.         arr_buf = plt.imread(buff)
225. 
226.         # Recreate the float -> uint8 conversion of the data
227.         # We can only expect to be the same with 8 bits of precision,
228.         # since that's what the PNG file used.
229.         data = (255*data).astype('uint8')
230.         if origin == 'lower':
231.             data = data[::-1]
232.         arr_buf = (255*arr_buf).astype('uint8')
233. 
234.         assert_array_equal(data, arr_buf)
235. 
236. 
237. def test_imsave_pil_kwargs_png():
238.     from PIL.PngImagePlugin import PngInfo
239.     buf = io.BytesIO()
240.     pnginfo = PngInfo()
241.     pnginfo.add_text("Software", "test")
242.     plt.imsave(buf, [[0, 1], [2, 3]],
243.                format="png", pil_kwargs={"pnginfo": pnginfo})
244.     im = Image.open(buf)
245.     assert im.info["Software"] == "test"
246. 
247. 
248. def test_imsave_pil_kwargs_tiff():
249.     from PIL.TiffTags import TAGS_V2 as TAGS
250.     buf = io.BytesIO()
251.     pil_kwargs = {"description": "test image"}
252.     plt.imsave(buf, [[0, 1], [2, 3]], format="tiff", pil_kwargs=pil_kwargs)
253.     assert len(pil_kwargs) == 1
254.     im = Image.open(buf)
255.     tags = {TAGS[k].name: v for k, v in im.tag_v2.items()}
256.     assert tags["ImageDescription"] == "test image"
257. 
258. 
259. @image_comparison(['image_alpha'], remove_text=True)
260. def test_image_alpha():
261.     np.random.seed(0)
262.     Z = np.random.rand(6, 6)
263. 
264.     fig, (ax1, ax2, ax3) = plt.subplots(1, 3)
265.     ax1.imshow(Z, alpha=1.0, interpolation='none')
266.     ax2.imshow(Z, alpha=0.5, interpolation='none')
267.     ax3.imshow(Z, alpha=0.5, interpolation='nearest')
268. 
269. 
270. def test_cursor_data():
271.     from matplotlib.backend_bases import MouseEvent
272. 
273.     fig, ax = plt.subplots()
274.     im = ax.imshow(np.arange(100).reshape(10, 10), origin='upper')
275. 
276.     x, y = 4, 4
277.     xdisp, ydisp = ax.transData.transform([x, y])
278. 
279.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
280.     assert im.get_cursor_data(event) == 44
281. 
282.     # Now try for a point outside the image
283.     # Tests issue #4957
284.     x, y = 10.1, 4
285.     xdisp, ydisp = ax.transData.transform([x, y])
286. 
287.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
288.     assert im.get_cursor_data(event) is None
289. 
290.     # Hmm, something is wrong here... I get 0, not None...
291.     # But, this works further down in the tests with extents flipped
292.     # x, y = 0.1, -0.1
293.     # xdisp, ydisp = ax.transData.transform([x, y])
294.     # event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
295.     # z = im.get_cursor_data(event)
296.     # assert z is None, "Did not get None, got %d" % z
297. 
298.     ax.clear()
299.     # Now try with the extents flipped.
300.     im = ax.imshow(np.arange(100).reshape(10, 10), origin='lower')
301. 
302.     x, y = 4, 4
303.     xdisp, ydisp = ax.transData.transform([x, y])
304. 
305.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
306.     assert im.get_cursor_data(event) == 44
307. 
308.     fig, ax = plt.subplots()
309.     im = ax.imshow(np.arange(100).reshape(10, 10), extent=[0, 0.5, 0, 0.5])
310. 
311.     x, y = 0.25, 0.25
312.     xdisp, ydisp = ax.transData.transform([x, y])
313. 
314.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
315.     assert im.get_cursor_data(event) == 55
316. 
317.     # Now try for a point outside the image
318.     # Tests issue #4957
319.     x, y = 0.75, 0.25
320.     xdisp, ydisp = ax.transData.transform([x, y])
321. 
322.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
323.     assert im.get_cursor_data(event) is None
324. 
325.     x, y = 0.01, -0.01
326.     xdisp, ydisp = ax.transData.transform([x, y])
327. 
328.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
329.     assert im.get_cursor_data(event) is None
330. 
331.     # Now try with additional transform applied to the image artist
332.     trans = Affine2D().scale(2).rotate(0.5)
333.     im = ax.imshow(np.arange(100).reshape(10, 10),
334.                    transform=trans + ax.transData)
335.     x, y = 3, 10
336.     xdisp, ydisp = ax.transData.transform([x, y])
337.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
338.     assert im.get_cursor_data(event) == 44
339. 
340. 
341. @pytest.mark.parametrize(
342.     "data, text", [
343.         ([[10001, 10000]], "[10001.000]"),
344.         ([[.123, .987]], "[0.123]"),
345.         ([[np.nan, 1, 2]], "[]"),
346.         ([[1, 1+1e-15]], "[1.0000000000000000]"),
347.         ([[-1, -1]], "[-1.0000000000000000]"),
348.     ])
349. def test_format_cursor_data(data, text):
350.     from matplotlib.backend_bases import MouseEvent
351. 
352.     fig, ax = plt.subplots()
353.     im = ax.imshow(data)
354. 
355.     xdisp, ydisp = ax.transData.transform([0, 0])
356.     event = MouseEvent('motion_notify_event', fig.canvas, xdisp, ydisp)
357.     assert im.format_cursor_data(im.get_cursor_data(event)) == text
358. 
359. 
360. @image_comparison(['image_clip'], style='mpl20')
361. def test_image_clip():
362.     d = [[1, 2], [3, 4]]
363. 
364.     fig, ax = plt.subplots()
365.     im = ax.imshow(d)
366.     patch = patches.Circle((0, 0), radius=1, transform=ax.transData)
367.     im.set_clip_path(patch)
368. 
369. 
370. @image_comparison(['image_cliprect'], style='mpl20')
371. def test_image_cliprect():
372.     fig, ax = plt.subplots()
373.     d = [[1, 2], [3, 4]]
374. 
375.     im = ax.imshow(d, extent=(0, 5, 0, 5))
376. 
377.     rect = patches.Rectangle(
378.         xy=(1, 1), width=2, height=2, transform=im.axes.transData)
379.     im.set_clip_path(rect)
380. 
381. 
382. @image_comparison(['imshow'], remove_text=True, style='mpl20')
383. def test_imshow():
384.     fig, ax = plt.subplots()
385.     arr = np.arange(100).reshape((10, 10))
386.     ax.imshow(arr, interpolation="bilinear", extent=(1, 2, 1, 2))
387.     ax.set_xlim(0, 3)
388.     ax.set_ylim(0, 3)
389. 
390. 
391. @check_figures_equal(extensions=['png'])
392. def test_imshow_10_10_1(fig_test, fig_ref):
393.     # 10x10x1 should be the same as 10x10
394.     arr = np.arange(100).reshape((10, 10, 1))
395.     ax = fig_ref.subplots()
396.     ax.imshow(arr[:, :, 0], interpolation="bilinear", extent=(1, 2, 1, 2))
397.     ax.set_xlim(0, 3)
398.     ax.set_ylim(0, 3)
399. 
400.     ax = fig_test.subplots()
401.     ax.imshow(arr, interpolation="bilinear", extent=(1, 2, 1, 2))
402.     ax.set_xlim(0, 3)
403.     ax.set_ylim(0, 3)
404. 
405. 
406. def test_imshow_10_10_2():
407.     fig, ax = plt.subplots()
408.     arr = np.arange(200).reshape((10, 10, 2))
409.     with pytest.raises(TypeError):
410.         ax.imshow(arr)
411. 
412. 
413. def test_imshow_10_10_5():
414.     fig, ax = plt.subplots()
415.     arr = np.arange(500).reshape((10, 10, 5))
416.     with pytest.raises(TypeError):
417.         ax.imshow(arr)
418. 
419. 
420. @image_comparison(['no_interpolation_origin'], remove_text=True)
421. def test_no_interpolation_origin():
422.     fig, axs = plt.subplots(2)
423.     axs[0].imshow(np.arange(100).reshape((2, 50)), origin="lower",
424.                   interpolation='none')
425.     axs[1].imshow(np.arange(100).reshape((2, 50)), interpolation='none')
426. 
427. 
428. @image_comparison(['image_shift'], remove_text=True, extensions=['pdf', 'svg'])
429. def test_image_shift():
430.     imgData = [[1 / x + 1 / y for x in range(1, 100)] for y in range(1, 100)]
431.     tMin = 734717.945208
432.     tMax = 734717.946366
433. 
434.     fig, ax = plt.subplots()
435.     ax.imshow(imgData, norm=colors.LogNorm(), interpolation='none',
436.               extent=(tMin, tMax, 1, 100))
437.     ax.set_aspect('auto')
438. 
439. 
440. def test_image_edges():
441.     fig = plt.figure(figsize=[1, 1])
442.     ax = fig.add_axes([0, 0, 1, 1], frameon=False)
443. 
444.     data = np.tile(np.arange(12), 15).reshape(20, 9)
445. 
446.     im = ax.imshow(data, origin='upper', extent=[-10, 10, -10, 10],
447.                    interpolation='none', cmap='gray')
448. 
449.     x = y = 2
450.     ax.set_xlim([-x, x])
451.     ax.set_ylim([-y, y])
452. 
453.     ax.set_xticks([])
454.     ax.set_yticks([])
455. 
456.     buf = io.BytesIO()
457.     fig.savefig(buf, facecolor=(0, 1, 0))
458. 
459.     buf.seek(0)
460. 
461.     im = plt.imread(buf)
462.     r, g, b, a = sum(im[:, 0])
463.     r, g, b, a = sum(im[:, -1])
464. 
465.     assert g != 100, 'Expected a non-green edge - but sadly, it was.'
466. 
467. 
468. @image_comparison(['image_composite_background'],
469.                   remove_text=True, style='mpl20')
470. def test_image_composite_background():
471.     fig, ax = plt.subplots()
472.     arr = np.arange(12).reshape(4, 3)
473.     ax.imshow(arr, extent=[0, 2, 15, 0])
474.     ax.imshow(arr, extent=[4, 6, 15, 0])
475.     ax.set_facecolor((1, 0, 0, 0.5))
476.     ax.set_xlim([0, 12])
477. 
478. 
479. @image_comparison(['image_composite_alpha'], remove_text=True)
480. def test_image_composite_alpha():
481.     """
482.     Tests that the alpha value is recognized and correctly applied in the
483.     process of compositing images together.
484.     """
485.     fig, ax = plt.subplots()
486.     arr = np.zeros((11, 21, 4))
487.     arr[:, :, 0] = 1
488.     arr[:, :, 3] = np.concatenate(
489.         (np.arange(0, 1.1, 0.1), np.arange(0, 1, 0.1)[::-1]))
490.     arr2 = np.zeros((21, 11, 4))
491.     arr2[:, :, 0] = 1
492.     arr2[:, :, 1] = 1
493.     arr2[:, :, 3] = np.concatenate(
494.         (np.arange(0, 1.1, 0.1), np.arange(0, 1, 0.1)[::-1]))[:, np.newaxis]
495.     ax.imshow(arr, extent=[1, 2, 5, 0], alpha=0.3)
496.     ax.imshow(arr, extent=[2, 3, 5, 0], alpha=0.6)
497.     ax.imshow(arr, extent=[3, 4, 5, 0])
498.     ax.imshow(arr2, extent=[0, 5, 1, 2])
499.     ax.imshow(arr2, extent=[0, 5, 2, 3], alpha=0.6)
500.     ax.imshow(arr2, extent=[0, 5, 3, 4], alpha=0.3)


File: lib/matplotlib/tests/test_image.py
Line number range: 897 - 930
Content:
@image_comparison(['imshow_masked_interpolation'],
                  tol=0 if platform.machine() == 'x86_64' else 0.01,
                  remove_text=True, style='mpl20')
def test_imshow_masked_interpolation():

    cmap = mpl.colormaps['viridis'].with_extremes(over='r', under='b', bad='k')

    N = 20
    n = colors.Normalize(vmin=0, vmax=N*N-1)

    data = np.arange(N*N, dtype=float).reshape(N, N)

    data[5, 5] = -1
    # This will cause crazy ringing for the higher-order
    # interpolations
    data[15, 5] = 1e5

    # data[3, 3] = np.nan

    data[15, 15] = np.inf

    mask = np.zeros_like(data).astype('bool')
    mask[5, 15] = True

    data = np.ma.masked_array(data, mask)

    fig, ax_grid = plt.subplots(3, 6)
    interps = sorted(mimage._interpd_)
    interps.remove('antialiased')

    for interp, ax in zip(interps, ax_grid.ravel()):
        ax.set_title(interp)
        ax.imshow(data, norm=n, cmap=cmap, interpolation=interp)
        ax.axis('off')


File: lib/matplotlib/tests/test_image.py
Line number range: 1356 - 1409
Content:
@image_comparison(
    ['rgba_antialias.png'], style='mpl20', remove_text=True,
    tol=0.007 if platform.machine() in ('aarch64', 'ppc64le', 's390x') else 0)
def test_rgba_antialias():
    fig, axs = plt.subplots(2, 2, figsize=(3.5, 3.5), sharex=False,
                            sharey=False, constrained_layout=True)
    N = 250
    aa = np.ones((N, N))
    aa[::2, :] = -1

    x = np.arange(N) / N - 0.5
    y = np.arange(N) / N - 0.5

    X, Y = np.meshgrid(x, y)
    R = np.sqrt(X**2 + Y**2)
    f0 = 10
    k = 75
    # aliased concentric circles
    a = np.sin(np.pi * 2 * (f0 * R + k * R**2 / 2))

    # stripes on lhs
    a[:int(N/2), :][R[:int(N/2), :] < 0.4] = -1
    a[:int(N/2), :][R[:int(N/2), :] < 0.3] = 1
    aa[:, int(N/2):] = a[:, int(N/2):]

    # set some over/unders and NaNs
    aa[20:50, 20:50] = np.NaN
    aa[70:90, 70:90] = 1e6
    aa[70:90, 20:30] = -1e6
    aa[70:90, 195:215] = 1e6
    aa[20:30, 195:215] = -1e6

    cmap = copy(plt.cm.RdBu_r)
    cmap.set_over('yellow')
    cmap.set_under('cyan')

    axs = axs.flatten()
    # zoom in
    axs[0].imshow(aa, interpolation='nearest', cmap=cmap, vmin=-1.2, vmax=1.2)
    axs[0].set_xlim([N/2-25, N/2+25])
    axs[0].set_ylim([N/2+50, N/2-10])

    # no anti-alias
    axs[1].imshow(aa, interpolation='nearest', cmap=cmap, vmin=-1.2, vmax=1.2)

    # data antialias: Note no purples, and white in circle.  Note
    # that alternating red and blue stripes become white.
    axs[2].imshow(aa, interpolation='antialiased', interpolation_stage='data',
                  cmap=cmap, vmin=-1.2, vmax=1.2)

    # rgba antialias: Note purples at boundary with circle.  Note that
    # alternating red and blue stripes become purple
    axs[3].imshow(aa, interpolation='antialiased', interpolation_stage='rgba',
                  cmap=cmap, vmin=-1.2, vmax=1.2)


File: lib/matplotlib/tests/test_lines.py
Line number range: 1 - 411
Content:
1. """
2. Tests specific to the lines module.
3. """
4. 
5. import itertools
6. import platform
7. import timeit
8. from types import SimpleNamespace
9. 
10. from cycler import cycler
11. import numpy as np
12. from numpy.testing import assert_array_equal
13. import pytest
14. 
15. import matplotlib
16. import matplotlib as mpl
17. from matplotlib import _path
18. import matplotlib.lines as mlines
19. from matplotlib.markers import MarkerStyle
20. from matplotlib.path import Path
21. import matplotlib.pyplot as plt
22. import matplotlib.transforms as mtransforms
23. from matplotlib.testing.decorators import image_comparison, check_figures_equal
24. 
25. 
26. def test_segment_hits():
27.     """Test a problematic case."""
28.     cx, cy = 553, 902
29.     x, y = np.array([553., 553.]), np.array([95., 947.])
30.     radius = 6.94
31.     assert_array_equal(mlines.segment_hits(cx, cy, x, y, radius), [0])
32. 
33. 
34. # Runtimes on a loaded system are inherently flaky. Not so much that a rerun
35. # won't help, hopefully.
36. @pytest.mark.flaky(reruns=3)
37. def test_invisible_Line_rendering():
38.     """
39.     GitHub issue #1256 identified a bug in Line.draw method
40. 
41.     Despite visibility attribute set to False, the draw method was not
42.     returning early enough and some pre-rendering code was executed
43.     though not necessary.
44. 
45.     Consequence was an excessive draw time for invisible Line instances
46.     holding a large number of points (Npts> 10**6)
47.     """
48.     # Creates big x and y data:
49.     N = 10**7
50.     x = np.linspace(0, 1, N)
51.     y = np.random.normal(size=N)
52. 
53.     # Create a plot figure:
54.     fig = plt.figure()
55.     ax = plt.subplot()
56. 
57.     # Create a "big" Line instance:
58.     l = mlines.Line2D(x, y)
59.     l.set_visible(False)
60.     # but don't add it to the Axis instance `ax`
61. 
62.     # [here Interactive panning and zooming is pretty responsive]
63.     # Time the canvas drawing:
64.     t_no_line = min(timeit.repeat(fig.canvas.draw, number=1, repeat=3))
65.     # (gives about 25 ms)
66. 
67.     # Add the big invisible Line:
68.     ax.add_line(l)
69. 
70.     # [Now interactive panning and zooming is very slow]
71.     # Time the canvas drawing:
72.     t_invisible_line = min(timeit.repeat(fig.canvas.draw, number=1, repeat=3))
73.     # gives about 290 ms for N = 10**7 pts
74. 
75.     slowdown_factor = t_invisible_line / t_no_line
76.     slowdown_threshold = 2  # trying to avoid false positive failures
77.     assert slowdown_factor < slowdown_threshold
78. 
79. 
80. def test_set_line_coll_dash():
81.     fig, ax = plt.subplots()
82.     np.random.seed(0)
83.     # Testing setting linestyles for line collections.
84.     # This should not produce an error.
85.     ax.contour(np.random.randn(20, 30), linestyles=[(0, (3, 3))])
86. 
87. 
88. def test_invalid_line_data():
89.     with pytest.raises(RuntimeError, match='xdata must be'):
90.         mlines.Line2D(0, [])
91.     with pytest.raises(RuntimeError, match='ydata must be'):
92.         mlines.Line2D([], 1)
93. 
94.     line = mlines.Line2D([], [])
95.     # when deprecation cycle is completed
96.     # with pytest.raises(RuntimeError, match='x must be'):
97.     with pytest.warns(mpl.MatplotlibDeprecationWarning):
98.         line.set_xdata(0)
99.     # with pytest.raises(RuntimeError, match='y must be'):
100.     with pytest.warns(mpl.MatplotlibDeprecationWarning):
101.         line.set_ydata(0)
102. 
103. 
104. @image_comparison(['line_dashes'], remove_text=True, tol=0.002)
105. def test_line_dashes():
106.     # Tolerance introduced after reordering of floating-point operations
107.     # Remove when regenerating the images
108.     fig, ax = plt.subplots()
109. 
110.     ax.plot(range(10), linestyle=(0, (3, 3)), lw=5)
111. 
112. 
113. def test_line_colors():
114.     fig, ax = plt.subplots()
115.     ax.plot(range(10), color='none')
116.     ax.plot(range(10), color='r')
117.     ax.plot(range(10), color='.3')
118.     ax.plot(range(10), color=(1, 0, 0, 1))
119.     ax.plot(range(10), color=(1, 0, 0))
120.     fig.canvas.draw()
121. 
122. 
123. def test_valid_colors():
124.     line = mlines.Line2D([], [])
125.     with pytest.raises(ValueError):
126.         line.set_color("foobar")
127. 
128. 
129. def test_linestyle_variants():
130.     fig, ax = plt.subplots()
131.     for ls in ["-", "solid", "--", "dashed",
132.                "-.", "dashdot", ":", "dotted",
133.                (0, None), (0, ()), (0, []),  # gh-22930
134.                ]:
135.         ax.plot(range(10), linestyle=ls)
136.     fig.canvas.draw()
137. 
138. 
139. def test_valid_linestyles():
140.     line = mlines.Line2D([], [])
141.     with pytest.raises(ValueError):
142.         line.set_linestyle('aardvark')
143. 
144. 
145. @image_comparison(['drawstyle_variants.png'], remove_text=True)
146. def test_drawstyle_variants():
147.     fig, axs = plt.subplots(6)
148.     dss = ["default", "steps-mid", "steps-pre", "steps-post", "steps", None]
149.     # We want to check that drawstyles are properly handled even for very long
150.     # lines (for which the subslice optimization is on); however, we need
151.     # to zoom in so that the difference between the drawstyles is actually
152.     # visible.
153.     for ax, ds in zip(axs.flat, dss):
154.         ax.plot(range(2000), drawstyle=ds)
155.         ax.set(xlim=(0, 2), ylim=(0, 2))
156. 
157. 
158. @check_figures_equal(extensions=('png',))
159. def test_no_subslice_with_transform(fig_ref, fig_test):
160.     ax = fig_ref.add_subplot()
161.     x = np.arange(2000)
162.     ax.plot(x + 2000, x)
163. 
164.     ax = fig_test.add_subplot()
165.     t = mtransforms.Affine2D().translate(2000.0, 0.0)
166.     ax.plot(x, x, transform=t+ax.transData)
167. 
168. 
169. def test_valid_drawstyles():
170.     line = mlines.Line2D([], [])
171.     with pytest.raises(ValueError):
172.         line.set_drawstyle('foobar')
173. 
174. 
175. def test_set_drawstyle():
176.     x = np.linspace(0, 2*np.pi, 10)
177.     y = np.sin(x)
178. 
179.     fig, ax = plt.subplots()
180.     line, = ax.plot(x, y)
181.     line.set_drawstyle("steps-pre")
182.     assert len(line.get_path().vertices) == 2*len(x)-1
183. 
184.     line.set_drawstyle("default")
185.     assert len(line.get_path().vertices) == len(x)
186. 
187. 
188. @image_comparison(
189.     ['line_collection_dashes'], remove_text=True, style='mpl20',
190.     tol=0.65 if platform.machine() in ('aarch64', 'ppc64le', 's390x') else 0)
191. def test_set_line_coll_dash_image():
192.     fig, ax = plt.subplots()
193.     np.random.seed(0)
194.     ax.contour(np.random.randn(20, 30), linestyles=[(0, (3, 3))])
195. 
196. 
197. @image_comparison(['marker_fill_styles.png'], remove_text=True)
198. def test_marker_fill_styles():
199.     colors = itertools.cycle([[0, 0, 1], 'g', '#ff0000', 'c', 'm', 'y',
200.                               np.array([0, 0, 0])])
201.     altcolor = 'lightgreen'
202. 
203.     y = np.array([1, 1])
204.     x = np.array([0, 9])
205.     fig, ax = plt.subplots()
206. 
207.     # This hard-coded list of markers correspond to an earlier iteration of
208.     # MarkerStyle.filled_markers; the value of that attribute has changed but
209.     # we kept the old value here to not regenerate the baseline image.
210.     # Replace with mlines.Line2D.filled_markers when the image is regenerated.
211.     for j, marker in enumerate("ov^<>8sp*hHDdPX"):
212.         for i, fs in enumerate(mlines.Line2D.fillStyles):
213.             color = next(colors)
214.             ax.plot(j * 10 + x, y + i + .5 * (j % 2),
215.                     marker=marker,
216.                     markersize=20,
217.                     markerfacecoloralt=altcolor,
218.                     fillstyle=fs,
219.                     label=fs,
220.                     linewidth=5,
221.                     color=color,
222.                     markeredgecolor=color,
223.                     markeredgewidth=2)
224. 
225.     ax.set_ylim([0, 7.5])
226.     ax.set_xlim([-5, 155])
227. 
228. 
229. def test_markerfacecolor_fillstyle():
230.     """Test that markerfacecolor does not override fillstyle='none'."""
231.     l, = plt.plot([1, 3, 2], marker=MarkerStyle('o', fillstyle='none'),
232.                   markerfacecolor='red')
233.     assert l.get_fillstyle() == 'none'
234.     assert l.get_markerfacecolor() == 'none'
235. 
236. 
237. @image_comparison(['scaled_lines'], style='default')
238. def test_lw_scaling():
239.     th = np.linspace(0, 32)
240.     fig, ax = plt.subplots()
241.     lins_styles = ['dashed', 'dotted', 'dashdot']
242.     cy = cycler(matplotlib.rcParams['axes.prop_cycle'])
243.     for j, (ls, sty) in enumerate(zip(lins_styles, cy)):
244.         for lw in np.linspace(.5, 10, 10):
245.             ax.plot(th, j*np.ones(50) + .1 * lw, linestyle=ls, lw=lw, **sty)
246. 
247. 
248. def test_is_sorted_and_has_non_nan():
249.     assert _path.is_sorted_and_has_non_nan(np.array([1, 2, 3]))
250.     assert _path.is_sorted_and_has_non_nan(np.array([1, np.nan, 3]))
251.     assert not _path.is_sorted_and_has_non_nan([3, 5] + [np.nan] * 100 + [0, 2])
252.     n = 2 * mlines.Line2D._subslice_optim_min_size
253.     plt.plot([np.nan] * n, range(n))
254. 
255. 
256. @check_figures_equal()
257. def test_step_markers(fig_test, fig_ref):
258.     fig_test.subplots().step([0, 1], "-o")
259.     fig_ref.subplots().plot([0, 0, 1], [0, 1, 1], "-o", markevery=[0, 2])
260. 
261. 
262. @pytest.mark.parametrize("parent", ["figure", "axes"])
263. @check_figures_equal(extensions=('png',))
264. def test_markevery(fig_test, fig_ref, parent):
265.     np.random.seed(42)
266.     x = np.linspace(0, 1, 14)
267.     y = np.random.rand(len(x))
268. 
269.     cases_test = [None, 4, (2, 5), [1, 5, 11],
270.                   [0, -1], slice(5, 10, 2),
271.                   np.arange(len(x))[y > 0.5],
272.                   0.3, (0.3, 0.4)]
273.     cases_ref = ["11111111111111", "10001000100010", "00100001000010",
274.                  "01000100000100", "10000000000001", "00000101010000",
275.                  "01110001110110", "11011011011110", "01010011011101"]
276. 
277.     if parent == "figure":
278.         # float markevery ("relative to axes size") is not supported.
279.         cases_test = cases_test[:-2]
280.         cases_ref = cases_ref[:-2]
281. 
282.         def add_test(x, y, *, markevery):
283.             fig_test.add_artist(
284.                 mlines.Line2D(x, y, marker="o", markevery=markevery))
285. 
286.         def add_ref(x, y, *, markevery):
287.             fig_ref.add_artist(
288.                 mlines.Line2D(x, y, marker="o", markevery=markevery))
289. 
290.     elif parent == "axes":
291.         axs_test = iter(fig_test.subplots(3, 3).flat)
292.         axs_ref = iter(fig_ref.subplots(3, 3).flat)
293. 
294.         def add_test(x, y, *, markevery):
295.             next(axs_test).plot(x, y, "-gD", markevery=markevery)
296. 
297.         def add_ref(x, y, *, markevery):
298.             next(axs_ref).plot(x, y, "-gD", markevery=markevery)
299. 
300.     for case in cases_test:
301.         add_test(x, y, markevery=case)
302. 
303.     for case in cases_ref:
304.         me = np.array(list(case)).astype(int).astype(bool)
305.         add_ref(x, y, markevery=me)
306. 
307. 
308. def test_markevery_figure_line_unsupported_relsize():
309.     fig = plt.figure()
310.     fig.add_artist(mlines.Line2D([0, 1], [0, 1], marker="o", markevery=.5))
311.     with pytest.raises(ValueError):
312.         fig.canvas.draw()
313. 
314. 
315. def test_marker_as_markerstyle():
316.     fig, ax = plt.subplots()
317.     line, = ax.plot([2, 4, 3], marker=MarkerStyle("D"))
318.     fig.canvas.draw()
319.     assert line.get_marker() == "D"
320. 
321.     # continue with smoke tests:
322.     line.set_marker("s")
323.     fig.canvas.draw()
324.     line.set_marker(MarkerStyle("o"))
325.     fig.canvas.draw()
326.     # test Path roundtrip
327.     triangle1 = Path._create_closed([[-1, -1], [1, -1], [0, 2]])
328.     line2, = ax.plot([1, 3, 2], marker=MarkerStyle(triangle1), ms=22)
329.     line3, = ax.plot([0, 2, 1], marker=triangle1, ms=22)
330. 
331.     assert_array_equal(line2.get_marker().vertices, triangle1.vertices)
332.     assert_array_equal(line3.get_marker().vertices, triangle1.vertices)
333. 
334. 
335. @image_comparison(['striped_line.png'], remove_text=True, style='mpl20')
336. def test_striped_lines():
337.     rng = np.random.default_rng(19680801)
338.     _, ax = plt.subplots()
339.     ax.plot(rng.uniform(size=12), color='orange', gapcolor='blue',
340.             linestyle='--', lw=5, label=' ')
341.     ax.plot(rng.uniform(size=12), color='red', gapcolor='black',
342.             linestyle=(0, (2, 5, 4, 2)), lw=5, label=' ', alpha=0.5)
343.     ax.legend(handlelength=5)
344. 
345. 
346. @check_figures_equal()
347. def test_odd_dashes(fig_test, fig_ref):
348.     fig_test.add_subplot().plot([1, 2], dashes=[1, 2, 3])
349.     fig_ref.add_subplot().plot([1, 2], dashes=[1, 2, 3, 1, 2, 3])
350. 
351. 
352. def test_picking():
353.     fig, ax = plt.subplots()
354.     mouse_event = SimpleNamespace(x=fig.bbox.width // 2,
355.                                   y=fig.bbox.height // 2 + 15)
356. 
357.     # Default pickradius is 5, so event should not pick this line.
358.     l0, = ax.plot([0, 1], [0, 1], picker=True)
359.     found, indices = l0.contains(mouse_event)
360.     assert not found
361. 
362.     # But with a larger pickradius, this should be picked.
363.     l1, = ax.plot([0, 1], [0, 1], picker=True, pickradius=20)
364.     found, indices = l1.contains(mouse_event)
365.     assert found
366.     assert_array_equal(indices['ind'], [0])
367. 
368.     # And if we modify the pickradius after creation, it should work as well.
369.     l2, = ax.plot([0, 1], [0, 1], picker=True)
370.     found, indices = l2.contains(mouse_event)
371.     assert not found
372.     l2.set_pickradius(20)
373.     found, indices = l2.contains(mouse_event)
374.     assert found
375.     assert_array_equal(indices['ind'], [0])
376. 
377. 
378. @check_figures_equal()
379. def test_input_copy(fig_test, fig_ref):
380. 
381.     t = np.arange(0, 6, 2)
382.     l, = fig_test.add_subplot().plot(t, t, ".-")
383.     t[:] = range(3)
384.     # Trigger cache invalidation
385.     l.set_drawstyle("steps")
386.     fig_ref.add_subplot().plot([0, 2, 4], [0, 2, 4], ".-", drawstyle="steps")
387. 
388. 
389. @check_figures_equal(extensions=["png"])
390. def test_markevery_prop_cycle(fig_test, fig_ref):
391.     """Test that we can set markevery prop_cycle."""
392.     cases = [None, 8, (30, 8), [16, 24, 30], [0, -1],
393.              slice(100, 200, 3), 0.1, 0.3, 1.5,
394.              (0.0, 0.1), (0.45, 0.1)]
395. 
396.     cmap = mpl.colormaps['jet']
397.     colors = cmap(np.linspace(0.2, 0.8, len(cases)))
398. 
399.     x = np.linspace(-1, 1)
400.     y = 5 * x**2
401. 
402.     axs = fig_ref.add_subplot()
403.     for i, markevery in enumerate(cases):
404.         axs.plot(y - i, 'o-', markevery=markevery, color=colors[i])
405. 
406.     matplotlib.rcParams['axes.prop_cycle'] = cycler(markevery=cases,
407.                                                     color=colors)
408. 
409.     ax = fig_test.add_subplot()
410.     for i, _ in enumerate(cases):
411.         ax.plot(y - i, 'o-')

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 08:45:47,839 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of the file lib/matplotlib/tests/test_lines.py. This context represents the entire file.', relative_path='lib/matplotlib/tests/test_lines.py', start_line=1, end_line=411)]
2025-12-21 08:45:47,841 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of lib/matplotlib/tests/test_lines.py.
2025-12-21 08:45:47,841 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 08:45:47,841 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 08:45:47,841 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-21 08:45:47,841 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-21 08:45:47,842 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   ├── deploy-docs.sh
|   └── fetch_doc_logs.py
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── cygwin.yml
|       ├── good-first-issue.yml
|       ├── mypy-stubtest.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       ├── stale.yml
|       └── tests.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   ├── codespell-ignore-words.txt
|   ├── export_sdist_name.py
|   └── mypy-stubtest-allowlist.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── markers
|   |   ├── mpl.css
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   ├── autosummary_class_only.rst
|   |   ├── cheatsheet_sidebar.html
|   |   ├── donate_sidebar.html
|   |   ├── function.rst
|   |   ├── pagesource.html
|   |   ├── search.html
|   |   ├── sidebar_announcement.html
|   |   └── sidebar_versions.html
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24661-AAMW.rst
|   |   |   |   ├── 25044-YI.rst
|   |   |   |   ├── 25061-DS.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25112-GG.rst
|   |   |   |   ├── 25192-DS.rst
|   |   |   |   ├── 25255-RR.rst
|   |   |   |   ├── 25456-AL.rst
|   |   |   |   └── 25697-AL.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23200-OG.rst
|   |   |   |   ├── 24312-AL.rst
|   |   |   |   ├── 24913-AL.rst
|   |   |   |   ├── 24985-OG.rst
|   |   |   |   ├── 24990-OG.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25138-AL.rst
|   |   |   |   ├── 25282-AL.rst
|   |   |   |   ├── 25352-GL.rst
|   |   |   |   ├── 25427-AL.rst
|   |   |   |   ├── 25469-AL.rst
|   |   |   |   ├── 25484-AL.rst
|   |   |   |   ├── 25557-AL.rst
|   |   |   |   ├── 25559-AL.rst
|   |   |   |   ├── 25584-KS.rst
|   |   |   |   ├── 25588-KS.rst
|   |   |   |   ├── 25651-REC.rst
|   |   |   |   ├── 25708-AL.rst
|   |   |   |   ├── 25728-OG.rst
|   |   |   |   ├── 25742-ES.rst
|   |   |   |   ├── 25774-AL.rst
|   |   |   |   ├── 25781-AL.rst
|   |   |   |   ├── 25841-AL.rst
|   |   |   |   ├── 25859-ES.rst
|   |   |   |   └── 25889-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24919-KS.rst
|   |   |   |   ├── 24976-KS.rst
|   |   |   |   └── 25475-ES.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24923-ES.rst
|   |   |       ├── 24984-OG.rst
|   |   |       ├── 24XXX-OG.rst
|   |   |       ├── 25456-AL.rst
|   |   |       ├── 25584-KS.rst
|   |   |       └── 25648-TS.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.6.0.rst
|   |   |   ├── api_changes_3.6.1.rst
|   |   |   ├── api_changes_3.7.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.7.0.rst
|   |   ├── projections
|   |   |   ├── geo.rst
|   |   |   └── polar.rst
|   |   ├── projections_api.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── typing_api.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contributing.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── documenting_mpl.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── maintainer_workflow.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_plots_shareview.rst
|       |   ├── README.rst
|       |   ├── auto_minor_tick.rst
|       |   ├── ecdf.rst
|       |   ├── get_suptitle.rst
|       |   ├── mathtext_supports_text.rst
|       |   ├── new_color_spec_tuple.rst
|       |   ├── pie_hatch.rst
|       |   ├── pie_shadow_control.rst
|       |   ├── savefig_bbox_layout.rst
|       |   ├── shadow_shade.rst
|       |   ├── spinesproxyset.rst
|       |   ├── tick_labelfont_param.rst
|       |   ├── updated_mathtext.rst
|       |   └── widget_button_styling.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── github_stats_3.6.0.rst
|       |   ├── github_stats_3.6.1.rst
|       |   ├── github_stats_3.6.2.rst
|       |   ├── github_stats_3.6.3.rst
|       |   ├── github_stats_3.7.0.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   ├── whats_new_3.6.0.rst
|       |   └── whats_new_3.7.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── galleries
|   ├── examples
|   |   ├── README.txt
|   |   ├── animation
|   |   |   ├── README.txt
|   |   |   ├── animate_decay.py
|   |   |   ├── animated_histogram.py
|   |   |   ├── animation_demo.py
|   |   |   ├── bayes_update.py
|   |   |   ├── double_pendulum.py
|   |   |   ├── dynamic_image.py
|   |   |   ├── frame_grabbing_sgskip.py
|   |   |   ├── multiple_axes.py
|   |   |   ├── pause_resume.py
|   |   |   ├── rain.py
|   |   |   ├── random_walk.py
|   |   |   ├── simple_anim.py
|   |   |   ├── simple_scatter.py
|   |   |   ├── strip_chart.py
|   |   |   └── unchained.py
|   |   ├── axes_grid1
|   |   |   ├── README.txt
|   |   |   ├── demo_anchored_direction_arrows.py
|   |   |   ├── demo_axes_divider.py
|   |   |   ├── demo_axes_grid.py
|   |   |   ├── demo_axes_grid2.py
|   |   |   ├── demo_axes_hbox_divider.py
|   |   |   ├── demo_axes_rgb.py
|   |   |   ├── demo_colorbar_of_inset_axes.py
|   |   |   ├── demo_colorbar_with_axes_divider.py
|   |   |   ├── demo_colorbar_with_inset_locator.py
|   |   |   ├── demo_edge_colorbar.py
|   |   |   ├── demo_fixed_size_axes.py
|   |   |   ├── demo_imagegrid_aspect.py
|   |   |   ├── inset_locator_demo.py
|   |   |   ├── inset_locator_demo2.py
|   |   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   |   ├── parasite_simple.py
|   |   |   ├── parasite_simple2.py
|   |   |   ├── scatter_hist_locatable_axes.py
|   |   |   ├── simple_anchored_artists.py
|   |   |   ├── simple_axes_divider1.py
|   |   |   ├── simple_axes_divider3.py
|   |   |   ├── simple_axesgrid.py
|   |   |   ├── simple_axesgrid2.py
|   |   |   ├── simple_axisline4.py
|   |   |   └── simple_colorbar.py
|   |   ├── axisartist
|   |   |   ├── README.txt
|   |   |   ├── axis_direction.py
|   |   |   ├── demo_axis_direction.py
|   |   |   ├── demo_axisline_style.py
|   |   |   ├── demo_curvelinear_grid.py
|   |   |   ├── demo_curvelinear_grid2.py
|   |   |   ├── demo_floating_axes.py
|   |   |   ├── demo_floating_axis.py
|   |   |   ├── demo_parasite_axes.py
|   |   |   ├── demo_parasite_axes2.py
|   |   |   ├── demo_ticklabel_alignment.py
|   |   |   ├── demo_ticklabel_direction.py
|   |   |   ├── simple_axis_direction01.py
|   |   |   ├── simple_axis_direction03.py
|   |   |   ├── simple_axis_pad.py
|   |   |   ├── simple_axisartist1.py
|   |   |   ├── simple_axisline.py
|   |   |   └── simple_axisline3.py
|   |   ├── color
|   |   |   ├── README.txt
|   |   |   ├── color_by_yvalue.py
|   |   |   ├── color_cycle_default.py
|   |   |   ├── color_demo.py
|   |   |   ├── colorbar_basics.py
|   |   |   ├── colormap_reference.py
|   |   |   ├── custom_cmap.py
|   |   |   ├── named_colors.py
|   |   |   └── set_alpha.py
|   |   ├── event_handling
|   |   |   ├── README.txt
|   |   |   ├── close_event.py
|   |   |   ├── coords_demo.py
|   |   |   ├── cursor_demo.py
|   |   |   ├── data_browser.py
|   |   |   ├── figure_axes_enter_leave.py
|   |   |   ├── ginput_manual_clabel_sgskip.py
|   |   |   ├── image_slices_viewer.py
|   |   |   ├── keypress_demo.py
|   |   |   ├── lasso_demo.py
|   |   |   ├── legend_picking.py
|   |   |   ├── looking_glass.py
|   |   |   ├── path_editor.py
|   |   |   ├── pick_event_demo.py
|   |   |   ├── pick_event_demo2.py
|   |   |   ├── poly_editor.py
|   |   |   ├── pong_sgskip.py
|   |   |   ├── resample.py
|   |   |   ├── timers.py
|   |   |   ├── trifinder_event_demo.py
|   |   |   ├── viewlims.py
|   |   |   └── zoom_window.py
|   |   ├── images_contours_and_fields
|   |   |   ├── README.txt
|   |   |   ├── affine_image.py
|   |   |   ├── barb_demo.py
|   |   |   ├── barcode_demo.py
|   |   |   ├── colormap_interactive_adjustment.py
|   |   |   ├── colormap_normalizations.py
|   |   |   ├── colormap_normalizations_symlognorm.py
|   |   |   ├── contour_corner_mask.py
|   |   |   ├── contour_demo.py
|   |   |   ├── contour_image.py
|   |   |   ├── contour_label_demo.py
|   |   |   ├── contourf_demo.py
|   |   |   ├── contourf_hatching.py
|   |   |   ├── contourf_log.py
|   |   |   ├── contours_in_optimization_demo.py
|   |   |   ├── demo_bboximage.py
|   |   |   ├── figimage_demo.py
|   |   |   ├── image_annotated_heatmap.py
|   |   |   ├── image_antialiasing.py
|   |   |   ├── image_clip_path.py
|   |   |   ├── image_demo.py
|   |   |   ├── image_masked.py
|   |   |   ├── image_nonuniform.py
|   |   |   ├── image_transparency_blend.py
|   |   |   ├── image_zcoord.py
|   |   |   ├── interpolation_methods.py
|   |   |   ├── irregulardatagrid.py
|   |   |   ├── layer_images.py
|   |   |   ├── matshow.py
|   |   |   ├── multi_image.py
|   |   |   ├── pcolor_demo.py
|   |   |   ├── pcolormesh_grids.py
|   |   |   ├── pcolormesh_levels.py
|   |   |   ├── plot_streamplot.py
|   |   |   ├── quadmesh_demo.py
|   |   |   ├── quiver_demo.py
|   |   |   ├── quiver_simple_demo.py
|   |   |   ├── shading_example.py
|   |   |   ├── specgram_demo.py
|   |   |   ├── spy_demos.py
|   |   |   ├── tricontour_demo.py
|   |   |   ├── tricontour_smooth_delaunay.py
|   |   |   ├── tricontour_smooth_user.py
|   |   |   ├── trigradient_demo.py
|   |   |   ├── triinterp_demo.py
|   |   |   ├── tripcolor_demo.py
|   |   |   ├── triplot_demo.py
|   |   |   └── watermark_image.py
|   |   ├── lines_bars_and_markers
|   |   |   ├── README.txt
|   |   |   ├── bar_colors.py
|   |   |   ├── bar_label_demo.py
|   |   |   ├── bar_stacked.py
|   |   |   ├── barchart.py
|   |   |   ├── barh.py
|   |   |   ├── broken_barh.py
|   |   |   ├── capstyle.py
|   |   |   ├── categorical_variables.py
|   |   |   ├── cohere.py
|   |   |   ├── csd_demo.py
|   |   |   ├── curve_error_band.py
|   |   |   ├── errorbar_limits_simple.py
|   |   |   ├── errorbar_subsample.py
|   |   |   ├── eventcollection_demo.py
|   |   |   ├── eventplot_demo.py
|   |   |   ├── fill.py
|   |   |   ├── fill_between_alpha.py
|   |   |   ├── fill_between_demo.py
|   |   |   ├── fill_betweenx_demo.py
|   |   |   ├── filled_step.py
|   |   |   ├── gradient_bar.py
|   |   |   ├── hat_graph.py
|   |   |   ├── horizontal_barchart_distribution.py
|   |   |   ├── joinstyle.py
|   |   |   ├── line_demo_dash_control.py
|   |   |   ├── lines_with_ticks_demo.py
|   |   |   ├── linestyles.py
|   |   |   ├── marker_reference.py
|   |   |   ├── markevery_demo.py
|   |   |   ├── masked_demo.py
|   |   |   ├── multicolored_line.py
|   |   |   ├── multivariate_marker_plot.py
|   |   |   ├── psd_demo.py
|   |   |   ├── scatter_demo2.py
|   |   |   ├── scatter_hist.py
|   |   |   ├── scatter_masked.py
|   |   |   ├── scatter_star_poly.py
|   |   |   ├── scatter_with_legend.py
|   |   |   ├── simple_plot.py
|   |   |   ├── span_regions.py
|   |   |   ├── spectrum_demo.py
|   |   |   ├── stackplot_demo.py
|   |   |   ├── stairs_demo.py
|   |   |   ├── stem_plot.py
|   |   |   ├── step_demo.py
|   |   |   ├── timeline.py
|   |   |   ├── vline_hline_demo.py
|   |   |   └── xcorr_acorr_demo.py
|   |   ├── misc
|   |   |   ├── README.txt
|   |   |   ├── anchored_artists.py
|   |   |   ├── bbox_intersect.py
|   |   |   ├── contour_manual.py
|   |   |   ├── coords_report.py
|   |   |   ├── custom_projection.py
|   |   |   ├── customize_rc.py
|   |   |   ├── demo_agg_filter.py
|   |   |   ├── demo_ribbon_box.py
|   |   |   ├── fig_x.py
|   |   |   ├── fill_spiral.py
|   |   |   ├── findobj_demo.py
|   |   |   ├── font_indexing.py
|   |   |   ├── ftface_props.py
|   |   |   ├── histogram_path.py
|   |   |   ├── hyperlinks_sgskip.py
|   |   |   ├── image_thumbnail_sgskip.py
|   |   |   ├── keyword_plotting.py
|   |   |   ├── logos2.py
|   |   |   ├── multipage_pdf.py
|   |   |   ├── multiprocess_sgskip.py
|   |   |   ├── packed_bubbles.py
|   |   |   ├── patheffect_demo.py
|   |   |   ├── print_stdout_sgskip.py
|   |   |   ├── rasterization_demo.py
|   |   |   ├── set_and_get.py
|   |   |   ├── svg_filter_line.py
|   |   |   ├── svg_filter_pie.py
|   |   |   ├── table_demo.py
|   |   |   ├── tickedstroke_demo.py
|   |   |   ├── transoffset.py
|   |   |   └── zorder_demo.py
|   |   ├── mplot3d
|   |   |   ├── 2dcollections3d.py
|   |   |   ├── 3d_bars.py
|   |   |   ├── README.txt
|   |   |   ├── bars3d.py
|   |   |   ├── box3d.py
|   |   |   ├── contour3d.py
|   |   |   ├── contour3d_2.py
|   |   |   ├── contour3d_3.py
|   |   |   ├── contourf3d.py
|   |   |   ├── contourf3d_2.py
|   |   |   ├── custom_shaded_3d_surface.py
|   |   |   ├── errorbar3d.py
|   |   |   ├── hist3d.py
|   |   |   ├── lines3d.py
|   |   |   ├── lorenz_attractor.py
|   |   |   ├── mixed_subplots.py
|   |   |   ├── offset.py
|   |   |   ├── pathpatch3d.py
|   |   |   ├── polys3d.py
|   |   |   ├── projections.py
|   |   |   ├── quiver3d.py
|   |   |   ├── rotate_axes3d_sgskip.py
|   |   |   ├── scatter3d.py
|   |   |   ├── stem3d_demo.py
|   |   |   ├── subplot3d.py
|   |   |   ├── surface3d.py
|   |   |   ├── surface3d_2.py
|   |   |   ├── surface3d_3.py
|   |   |   ├── surface3d_radial.py
|   |   |   ├── text3d.py
|   |   |   ├── tricontour3d.py
|   |   |   ├── tricontourf3d.py
|   |   |   ├── trisurf3d.py
|   |   |   ├── trisurf3d_2.py
|   |   |   ├── view_planes_3d.py
|   |   |   ├── voxels.py
|   |   |   ├── voxels_numpy_logo.py
|   |   |   ├── voxels_rgb.py
|   |   |   ├── voxels_torus.py
|   |   |   ├── wire3d.py
|   |   |   ├── wire3d_animation_sgskip.py
|   |   |   └── wire3d_zero_stride.py
|   |   ├── pie_and_polar_charts
|   |   |   ├── README.txt
|   |   |   ├── bar_of_pie.py
|   |   |   ├── nested_pie.py
|   |   |   ├── pie_and_donut_labels.py
|   |   |   ├── pie_features.py
|   |   |   ├── polar_bar.py
|   |   |   ├── polar_demo.py
|   |   |   ├── polar_error_caps.py
|   |   |   ├── polar_legend.py
|   |   |   └── polar_scatter.py
|   |   ├── pyplots
|   |   |   ├── README.txt
|   |   |   ├── axline.py
|   |   |   ├── pyplot_simple.py
|   |   |   ├── pyplot_text.py
|   |   |   ├── pyplot_three.py
|   |   |   └── pyplot_two_subplots.py
|   |   ├── scales
|   |   |   ├── README.txt
|   |   |   ├── asinh_demo.py
|   |   |   ├── aspect_loglog.py
|   |   |   ├── custom_scale.py
|   |   |   ├── log_bar.py
|   |   |   ├── log_demo.py
|   |   |   ├── logit_demo.py
|   |   |   ├── power_norm.py
|   |   |   ├── scales.py
|   |   |   ├── semilogx_demo.py
|   |   |   └── symlog_demo.py
|   |   ├── shapes_and_collections
|   |   |   ├── README.txt
|   |   |   ├── arrow_guide.py
|   |   |   ├── artist_reference.py
|   |   |   ├── collections.py
|   |   |   ├── compound_path.py
|   |   |   ├── dolphin.py
|   |   |   ├── donut.py
|   |   |   ├── ellipse_collection.py
|   |   |   ├── ellipse_demo.py
|   |   |   ├── fancybox_demo.py
|   |   |   ├── hatch_demo.py
|   |   |   ├── hatch_style_reference.py
|   |   |   ├── line_collection.py
|   |   |   ├── patch_collection.py
|   |   |   ├── path_patch.py
|   |   |   ├── quad_bezier.py
|   |   |   └── scatter.py
|   |   ├── showcase
|   |   |   ├── README.txt
|   |   |   ├── anatomy.py
|   |   |   ├── firefox.py
|   |   |   ├── integral.py
|   |   |   ├── mandelbrot.py
|   |   |   ├── stock_prices.py
|   |   |   └── xkcd.py
|   |   ├── specialty_plots
|   |   |   ├── README.txt
|   |   |   ├── advanced_hillshading.py
|   |   |   ├── anscombe.py
|   |   |   ├── hinton_demo.py
|   |   |   ├── leftventricle_bullseye.py
|   |   |   ├── mri_demo.py
|   |   |   ├── mri_with_eeg.py
|   |   |   ├── radar_chart.py
|   |   |   ├── sankey_basics.py
|   |   |   ├── sankey_links.py
|   |   |   ├── sankey_rankine.py
|   |   |   ├── skewt.py
|   |   |   └── topographic_hillshading.py
|   |   ├── spines
|   |   |   ├── README.txt
|   |   |   ├── centered_spines_with_arrows.py
|   |   |   ├── multiple_yaxis_with_spines.py
|   |   |   ├── spine_placement_demo.py
|   |   |   ├── spines.py
|   |   |   └── spines_dropped.py
|   |   ├── statistics
|   |   |   ├── README.txt
|   |   |   ├── barchart_demo.py
|   |   |   ├── boxplot.py
|   |   |   ├── boxplot_color.py
|   |   |   ├── boxplot_demo.py
|   |   |   ├── boxplot_vs_violin.py
|   |   |   ├── bxp.py
|   |   |   ├── confidence_ellipse.py
|   |   |   ├── customized_violin.py
|   |   |   ├── errorbar.py
|   |   |   ├── errorbar_features.py
|   |   |   ├── errorbar_limits.py
|   |   |   ├── errorbars_and_boxes.py
|   |   |   ├── hexbin_demo.py
|   |   |   ├── hist.py
|   |   |   ├── histogram_cumulative.py
|   |   |   ├── histogram_features.py
|   |   |   ├── histogram_histtypes.py
|   |   |   ├── histogram_multihist.py
|   |   |   ├── multiple_histograms_side_by_side.py
|   |   |   ├── time_series_histogram.py
|   |   |   └── violinplot.py
|   |   ├── style_sheets
|   |   |   ├── README.txt
|   |   |   ├── bmh.py
|   |   |   ├── dark_background.py
|   |   |   ├── fivethirtyeight.py
|   |   |   ├── ggplot.py
|   |   |   ├── grayscale.py
|   |   |   ├── plot_solarizedlight2.py
|   |   |   └── style_sheets_reference.py
|   |   ├── subplots_axes_and_figures
|   |   |   ├── README.txt
|   |   |   ├── align_labels_demo.py
|   |   |   ├── auto_subplots_adjust.py
|   |   |   ├── axes_box_aspect.py
|   |   |   ├── axes_demo.py
|   |   |   ├── axes_margins.py
|   |   |   ├── axes_props.py
|   |   |   ├── axes_zoom_effect.py
|   |   |   ├── axhspan_demo.py
|   |   |   ├── axis_equal_demo.py
|   |   |   ├── axis_labels_demo.py
|   |   |   ├── broken_axis.py
|   |   |   ├── custom_figure_class.py
|   |   |   ├── demo_constrained_layout.py
|   |   |   ├── demo_tight_layout.py
|   |   |   ├── fahrenheit_celsius_scales.py
|   |   |   ├── figure_size_units.py
|   |   |   ├── figure_title.py
|   |   |   ├── ganged_plots.py
|   |   |   ├── geo_demo.py
|   |   |   ├── gridspec_and_subplots.py
|   |   |   ├── gridspec_multicolumn.py
|   |   |   ├── gridspec_nested.py
|   |   |   ├── invert_axes.py
|   |   |   ├── multiple_figs_demo.py
|   |   |   ├── secondary_axis.py
|   |   |   ├── share_axis_lims_views.py
|   |   |   ├── shared_axis_demo.py
|   |   |   ├── subfigures.py
|   |   |   ├── subplot.py
|   |   |   ├── subplots_adjust.py
|   |   |   ├── subplots_demo.py
|   |   |   ├── two_scales.py
|   |   |   └── zoom_inset_axes.py
|   |   ├── text_labels_and_annotations
|   |   |   ├── README.txt
|   |   |   ├── accented_text.py
|   |   |   ├── align_ylabels.py
|   |   |   ├── angle_annotation.py
|   |   |   ├── angles_on_bracket_arrows.py
|   |   |   ├── annotate_transform.py
|   |   |   ├── annotation_basic.py
|   |   |   ├── annotation_demo.py
|   |   |   ├── annotation_polar.py
|   |   |   ├── arrow_demo.py
|   |   |   ├── autowrap.py
|   |   |   ├── custom_legends.py
|   |   |   ├── date.py
|   |   |   ├── demo_annotation_box.py
|   |   |   ├── demo_text_path.py
|   |   |   ├── demo_text_rotation_mode.py
|   |   |   ├── dfrac_demo.py
|   |   |   ├── engineering_formatter.py
|   |   |   ├── fancyarrow_demo.py
|   |   |   ├── fancytextbox_demo.py
|   |   |   ├── figlegend_demo.py
|   |   |   ├── font_family_rc.py
|   |   |   ├── font_file.py
|   |   |   ├── font_table.py
|   |   |   ├── fonts_demo.py
|   |   |   ├── fonts_demo_kw.py
|   |   |   ├── label_subplots.py
|   |   |   ├── legend.py
|   |   |   ├── legend_demo.py
|   |   |   ├── line_with_text.py
|   |   |   ├── mathtext_asarray.py
|   |   |   ├── mathtext_demo.py
|   |   |   ├── mathtext_examples.py
|   |   |   ├── mathtext_fontfamily_example.py
|   |   |   ├── multiline.py
|   |   |   ├── placing_text_boxes.py
|   |   |   ├── rainbow_text.py
|   |   |   ├── stix_fonts_demo.py
|   |   |   ├── tex_demo.py
|   |   |   ├── text_alignment.py
|   |   |   ├── text_commands.py
|   |   |   ├── text_fontdict.py
|   |   |   ├── text_rotation_relative_to_line.py
|   |   |   ├── titles_demo.py
|   |   |   ├── unicode_minus.py
|   |   |   ├── usetex_baseline_test.py
|   |   |   ├── usetex_fonteffects.py
|   |   |   └── watermark_text.py
|   |   ├── ticks
|   |   |   ├── README.txt
|   |   |   ├── auto_ticks.py
|   |   |   ├── centered_ticklabels.py
|   |   |   ├── colorbar_tick_labelling_demo.py
|   |   |   ├── custom_ticker1.py
|   |   |   ├── date_concise_formatter.py
|   |   |   ├── date_demo_convert.py
|   |   |   ├── date_demo_rrule.py
|   |   |   ├── date_formatters_locators.py
|   |   |   ├── date_index_formatter.py
|   |   |   ├── date_precision_and_epochs.py
|   |   |   ├── dollar_ticks.py
|   |   |   ├── fig_axes_customize_simple.py
|   |   |   ├── major_minor_demo.py
|   |   |   ├── scalarformatter.py
|   |   |   ├── tick-formatters.py
|   |   |   ├── tick-locators.py
|   |   |   ├── tick_label_right.py
|   |   |   ├── tick_labels_from_values.py
|   |   |   ├── tick_xlabel_top.py
|   |   |   ├── ticklabels_rotation.py
|   |   |   └── ticks_too_many.py
|   |   ├── units
|   |   |   ├── README.txt
|   |   |   ├── annotate_with_units.py
|   |   |   ├── artist_tests.py
|   |   |   ├── bar_demo2.py
|   |   |   ├── bar_unit_demo.py
|   |   |   ├── basic_units.py
|   |   |   ├── ellipse_with_units.py
|   |   |   ├── evans_test.py
|   |   |   ├── radian_demo.py
|   |   |   ├── units_sample.py
|   |   |   └── units_scatter.py
|   |   ├── user_interfaces
|   |   |   ├── README.txt
|   |   |   ├── canvasagg.py
|   |   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk3_sgskip.py
|   |   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk4_sgskip.py
|   |   |   ├── embedding_in_qt_sgskip.py
|   |   |   ├── embedding_in_tk_sgskip.py
|   |   |   ├── embedding_in_wx2_sgskip.py
|   |   |   ├── embedding_in_wx3_sgskip.py
|   |   |   ├── embedding_in_wx4_sgskip.py
|   |   |   ├── embedding_in_wx5_sgskip.py
|   |   |   ├── embedding_webagg_sgskip.py
|   |   |   ├── fourier_demo_wx_sgskip.py
|   |   |   ├── gtk3_spreadsheet_sgskip.py
|   |   |   ├── gtk4_spreadsheet_sgskip.py
|   |   |   ├── images
|   |   |   ├── mathtext_wx_sgskip.py
|   |   |   ├── mpl_with_glade3_sgskip.py
|   |   |   ├── mplcvd.py
|   |   |   ├── pylab_with_gtk3_sgskip.py
|   |   |   ├── pylab_with_gtk4_sgskip.py
|   |   |   ├── svg_histogram_sgskip.py
|   |   |   ├── svg_tooltip_sgskip.py
|   |   |   ├── toolmanager_sgskip.py
|   |   |   ├── web_application_server_sgskip.py
|   |   |   └── wxcursor_demo_sgskip.py
|   |   ├── userdemo
|   |   |   ├── README.txt
|   |   |   ├── annotate_explain.py
|   |   |   ├── annotate_simple_coord02.py
|   |   |   ├── annotate_text_arrow.py
|   |   |   ├── connect_simple01.py
|   |   |   ├── connectionstyle_demo.py
|   |   |   ├── custom_boxstyle01.py
|   |   |   ├── demo_gridspec01.py
|   |   |   ├── demo_gridspec03.py
|   |   |   ├── demo_gridspec06.py
|   |   |   ├── pgf_fonts.py
|   |   |   ├── pgf_preamble_sgskip.py
|   |   |   ├── pgf_texsystem.py
|   |   |   ├── simple_annotate01.py
|   |   |   ├── simple_legend01.py
|   |   |   └── simple_legend02.py
|   |   └── widgets
|   |       ├── README.txt
|   |       ├── annotated_cursor.py
|   |       ├── buttons.py
|   |       ├── check_buttons.py
|   |       ├── cursor.py
|   |       ├── lasso_selector_demo_sgskip.py
|   |       ├── menu.py
|   |       ├── mouse_cursor.py
|   |       ├── multicursor.py
|   |       ├── polygon_selector_demo.py
|   |       ├── polygon_selector_simple.py
|   |       ├── radio_buttons.py
|   |       ├── range_slider.py
|   |       ├── rectangle_selector.py
|   |       ├── slider_demo.py
|   |       ├── slider_snap_demo.py
|   |       ├── span_selector.py
|   |       └── textbox.py
|   ├── plot_types
|   |   ├── 3D
|   |   |   ├── README.rst
|   |   |   ├── scatter3d_simple.py
|   |   |   ├── surface3d_simple.py
|   |   |   ├── trisurf3d_simple.py
|   |   |   ├── voxels_simple.py
|   |   |   └── wire3d_simple.py
|   |   ├── README.rst
|   |   ├── arrays
|   |   |   ├── README.rst
|   |   |   ├── barbs.py
|   |   |   ├── contour.py
|   |   |   ├── contourf.py
|   |   |   ├── imshow.py
|   |   |   ├── pcolormesh.py
|   |   |   ├── quiver.py
|   |   |   └── streamplot.py
|   |   ├── basic
|   |   |   ├── README.rst
|   |   |   ├── bar.py
|   |   |   ├── fill_between.py
|   |   |   ├── plot.py
|   |   |   ├── scatter_plot.py
|   |   |   ├── stackplot.py
|   |   |   ├── stem.py
|   |   |   └── step.py
|   |   ├── stats
|   |   |   ├── README.rst
|   |   |   ├── boxplot_plot.py
|   |   |   ├── ecdf.py
|   |   |   ├── errorbar_plot.py
|   |   |   ├── eventplot.py
|   |   |   ├── hexbin.py
|   |   |   ├── hist2d.py
|   |   |   ├── hist_plot.py
|   |   |   ├── pie.py
|   |   |   └── violin.py
|   |   └── unstructured
|   |       ├── README.rst
|   |       ├── tricontour.py
|   |       ├── tricontourf.py
|   |       ├── tripcolor.py
|   |       └── triplot.py
|   ├── tutorials
|   |   ├── artists.py
|   |   ├── images.py
|   |   ├── index.rst
|   |   ├── lifecycle.py
|   |   └── pyplot.py
|   └── users_explain
|       ├── animations
|       |   ├── README.txt
|       |   ├── animations.py
|       |   └── blitting.py
|       ├── artists
|       |   ├── color_cycle.py
|       |   ├── imshow_extent.py
|       |   ├── index.rst
|       |   ├── patheffects_guide.py
|       |   ├── paths.py
|       |   ├── performance.rst
|       |   └── transforms_tutorial.py
|       ├── axes
|       |   ├── arranging_axes.py
|       |   ├── autoscale.py
|       |   ├── colorbar_placement.py
|       |   ├── constrainedlayout_guide.py
|       |   ├── index.rst
|       |   ├── legend_guide.py
|       |   ├── mosaic.py
|       |   └── tight_layout_guide.py
|       ├── axis
|       |   └── index.rst
|       ├── colors
|       |   ├── README.txt
|       |   ├── colorbar_only.py
|       |   ├── colormap-manipulation.py
|       |   ├── colormapnorms.py
|       |   ├── colormaps.py
|       |   └── colors.py
|       ├── customizing.py
|       ├── figure
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── index.rst
|       ├── quick_start.py
|       ├── text
|       |   ├── README.txt
|       |   ├── annotations.py
|       |   ├── fonts.py
|       |   ├── mathtext.py
|       |   ├── pgf.py
|       |   ├── text_intro.py
|       |   ├── text_props.py
|       |   └── usetex.py
|       └── toolkits
|           ├── axes_grid.rst
|           ├── axisartist.rst
|           ├── index.rst
|           └── mplot3d.rst
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── all_figures.html
|   |   |       ├── css
|   |   |       ├── ipython_inline_figure.html
|   |   |       ├── js
|   |   |       └── single_figure.html
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   |   └── plot_directive.css
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── typing.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── __init__.py
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           ├── test_axes3d.py
|   |           └── test_legend3d.py
|   └── pylab.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       ├── minver.txt
|       └── mypy.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
└── tools
    ├── README.txt
    ├── boilerplate.py
    ├── cache_zenodo_svg.py
    ├── check_typehints.py
    ├── create_DejaVuDisplay.sh
    ├── embed_js.py
    ├── gh_api.py
    ├── github_stats.py
    ├── make_icons.py
    ├── memleak.py
    ├── run_examples.py
    ├── subset.py
    ├── triage_tests.py
    └── visualize_tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: [ENH]: Add get/set_antialiased to Text objects

Description: ### Problem

Currently, Text objects always retrieve their antialiasing state via the global rcParams["text.antialias"], unlike other artists for which this can be configured on a per-artist basis via `set_antialiased` (and read via `set_antialiased`).

### Proposed solution

Add similar getters/setters on Text objects (also adjusting Annotations accordingly, if needed) and use that info in the drawing stage.

Should be relatively easy to implement, except that the slight fiddling needed with backends requires some understanding of backend code (I think we need to replace the access to `rcParams["text.antialiased"]` by going through the GraphicsContext state).

Patch information:
diff --git a/lib/matplotlib/backends/backend_agg.py b/lib/matplotlib/backends/backend_agg.py
index 7d038a998f..1e43736fd9 100644
--- a/lib/matplotlib/backends/backend_agg.py
+++ b/lib/matplotlib/backends/backend_agg.py
@@ -206,7 +206,7 @@ class RendererAgg(RendererBase):
         # space) in the following call to draw_text_image).
         font.set_text(s, 0, flags=get_hinting_flag())
         font.draw_glyphs_to_bitmap(
-            antialiased=mpl.rcParams['text.antialiased'])
+            antialiased=bool(gc.get_antialiased()))
         d = font.get_descent() / 64.0
         # The descent needs to be adjusted for the angle.
         xo, yo = font.get_bitmap_offset()
diff --git a/lib/matplotlib/backends/backend_cairo.py b/lib/matplotlib/backends/backend_cairo.py
index 9ccadcdf1c..7f1888b4dd 100644
--- a/lib/matplotlib/backends/backend_cairo.py
+++ b/lib/matplotlib/backends/backend_cairo.py
@@ -205,7 +205,7 @@ class RendererCairo(RendererBase):
             ctx.set_font_size(self.points_to_pixels(prop.get_size_in_points()))
             opts = cairo.FontOptions()
             opts.set_antialias(
-                cairo.ANTIALIAS_DEFAULT if mpl.rcParams["text.antialiased"]
+                cairo.ANTIALIAS_DEFAULT if gc.get_antialiased()
                 else cairo.ANTIALIAS_NONE)
             ctx.set_font_options(opts)
             if angle:
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index 4591316cf9..285d06960f 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -167,6 +167,7 @@ class Text(Artist):
         transform_rotates_text=False,
         linespacing=None,
         rotation_mode=None,
+        antialiased=None,
     ):
         self.set_text(text)
         self.set_color(
@@ -187,6 +188,7 @@ class Text(Artist):
             linespacing = 1.2  # Maybe use rcParam later.
         self.set_linespacing(linespacing)
         self.set_rotation_mode(rotation_mode)
+        self.set_antialiased(antialiased)
 
     def update(self, kwargs):
         # docstring inherited
@@ -309,6 +311,24 @@ class Text(Artist):
         """Return the text rotation mode."""
         return self._rotation_mode
 
+    def get_antialiased(self):
+        """Return whether antialiasing is used for drawing text."""
+        return self._antialiased
+
+    def set_antialiased(self, aa):
+        """
+        Set whether to use antialiased rendering for this text.
+
+        Parameters
+        ----------
+        aa : bool or None
+            If None, defaults to rcParams['text.antialiased'].
+        """
+        if aa is None:
+            aa = mpl.rcParams['text.antialiased']
+        self._antialiased = aa
+        self.stale = True
+
     def update_from(self, other):
         # docstring inherited
         super().update_from(other)
@@ -736,6 +756,7 @@ class Text(Artist):
             gc = renderer.new_gc()
             gc.set_foreground(self.get_color())
             gc.set_alpha(self.get_alpha())
+            gc.set_antialiased(self.get_antialiased())
             gc.set_url(self._url)
             self._set_gc_clip(gc)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of lib/matplotlib/tests/test_lines.py.
Extra Requirements: 
Purpose: This file will likely contain test cases for the 'antialiased' property on Line2D objects, which can be used as a template for the new tests for Text objects.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: lib/matplotlib/tests/test_lines.py
Line number range: 1 - 411
Content:
1. """
2. Tests specific to the lines module.
3. """
4. 
5. import itertools
6. import platform
7. import timeit
8. from types import SimpleNamespace
9. 
10. from cycler import cycler
11. import numpy as np
12. from numpy.testing import assert_array_equal
13. import pytest
14. 
15. import matplotlib
16. import matplotlib as mpl
17. from matplotlib import _path
18. import matplotlib.lines as mlines
19. from matplotlib.markers import MarkerStyle
20. from matplotlib.path import Path
21. import matplotlib.pyplot as plt
22. import matplotlib.transforms as mtransforms
23. from matplotlib.testing.decorators import image_comparison, check_figures_equal
24. 
25. 
26. def test_segment_hits():
27.     """Test a problematic case."""
28.     cx, cy = 553, 902
29.     x, y = np.array([553., 553.]), np.array([95., 947.])
30.     radius = 6.94
31.     assert_array_equal(mlines.segment_hits(cx, cy, x, y, radius), [0])
32. 
33. 
34. # Runtimes on a loaded system are inherently flaky. Not so much that a rerun
35. # won't help, hopefully.
36. @pytest.mark.flaky(reruns=3)
37. def test_invisible_Line_rendering():
38.     """
39.     GitHub issue #1256 identified a bug in Line.draw method
40. 
41.     Despite visibility attribute set to False, the draw method was not
42.     returning early enough and some pre-rendering code was executed
43.     though not necessary.
44. 
45.     Consequence was an excessive draw time for invisible Line instances
46.     holding a large number of points (Npts> 10**6)
47.     """
48.     # Creates big x and y data:
49.     N = 10**7
50.     x = np.linspace(0, 1, N)
51.     y = np.random.normal(size=N)
52. 
53.     # Create a plot figure:
54.     fig = plt.figure()
55.     ax = plt.subplot()
56. 
57.     # Create a "big" Line instance:
58.     l = mlines.Line2D(x, y)
59.     l.set_visible(False)
60.     # but don't add it to the Axis instance `ax`
61. 
62.     # [here Interactive panning and zooming is pretty responsive]
63.     # Time the canvas drawing:
64.     t_no_line = min(timeit.repeat(fig.canvas.draw, number=1, repeat=3))
65.     # (gives about 25 ms)
66. 
67.     # Add the big invisible Line:
68.     ax.add_line(l)
69. 
70.     # [Now interactive panning and zooming is very slow]
71.     # Time the canvas drawing:
72.     t_invisible_line = min(timeit.repeat(fig.canvas.draw, number=1, repeat=3))
73.     # gives about 290 ms for N = 10**7 pts
74. 
75.     slowdown_factor = t_invisible_line / t_no_line
76.     slowdown_threshold = 2  # trying to avoid false positive failures
77.     assert slowdown_factor < slowdown_threshold
78. 
79. 
80. def test_set_line_coll_dash():
81.     fig, ax = plt.subplots()
82.     np.random.seed(0)
83.     # Testing setting linestyles for line collections.
84.     # This should not produce an error.
85.     ax.contour(np.random.randn(20, 30), linestyles=[(0, (3, 3))])
86. 
87. 
88. def test_invalid_line_data():
89.     with pytest.raises(RuntimeError, match='xdata must be'):
90.         mlines.Line2D(0, [])
91.     with pytest.raises(RuntimeError, match='ydata must be'):
92.         mlines.Line2D([], 1)
93. 
94.     line = mlines.Line2D([], [])
95.     # when deprecation cycle is completed
96.     # with pytest.raises(RuntimeError, match='x must be'):
97.     with pytest.warns(mpl.MatplotlibDeprecationWarning):
98.         line.set_xdata(0)
99.     # with pytest.raises(RuntimeError, match='y must be'):
100.     with pytest.warns(mpl.MatplotlibDeprecationWarning):
101.         line.set_ydata(0)
102. 
103. 
104. @image_comparison(['line_dashes'], remove_text=True, tol=0.002)
105. def test_line_dashes():
106.     # Tolerance introduced after reordering of floating-point operations
107.     # Remove when regenerating the images
108.     fig, ax = plt.subplots()
109. 
110.     ax.plot(range(10), linestyle=(0, (3, 3)), lw=5)
111. 
112. 
113. def test_line_colors():
114.     fig, ax = plt.subplots()
115.     ax.plot(range(10), color='none')
116.     ax.plot(range(10), color='r')
117.     ax.plot(range(10), color='.3')
118.     ax.plot(range(10), color=(1, 0, 0, 1))
119.     ax.plot(range(10), color=(1, 0, 0))
120.     fig.canvas.draw()
121. 
122. 
123. def test_valid_colors():
124.     line = mlines.Line2D([], [])
125.     with pytest.raises(ValueError):
126.         line.set_color("foobar")
127. 
128. 
129. def test_linestyle_variants():
130.     fig, ax = plt.subplots()
131.     for ls in ["-", "solid", "--", "dashed",
132.                "-.", "dashdot", ":", "dotted",
133.                (0, None), (0, ()), (0, []),  # gh-22930
134.                ]:
135.         ax.plot(range(10), linestyle=ls)
136.     fig.canvas.draw()
137. 
138. 
139. def test_valid_linestyles():
140.     line = mlines.Line2D([], [])
141.     with pytest.raises(ValueError):
142.         line.set_linestyle('aardvark')
143. 
144. 
145. @image_comparison(['drawstyle_variants.png'], remove_text=True)
146. def test_drawstyle_variants():
147.     fig, axs = plt.subplots(6)
148.     dss = ["default", "steps-mid", "steps-pre", "steps-post", "steps", None]
149.     # We want to check that drawstyles are properly handled even for very long
150.     # lines (for which the subslice optimization is on); however, we need
151.     # to zoom in so that the difference between the drawstyles is actually
152.     # visible.
153.     for ax, ds in zip(axs.flat, dss):
154.         ax.plot(range(2000), drawstyle=ds)
155.         ax.set(xlim=(0, 2), ylim=(0, 2))
156. 
157. 
158. @check_figures_equal(extensions=('png',))
159. def test_no_subslice_with_transform(fig_ref, fig_test):
160.     ax = fig_ref.add_subplot()
161.     x = np.arange(2000)
162.     ax.plot(x + 2000, x)
163. 
164.     ax = fig_test.add_subplot()
165.     t = mtransforms.Affine2D().translate(2000.0, 0.0)
166.     ax.plot(x, x, transform=t+ax.transData)
167. 
168. 
169. def test_valid_drawstyles():
170.     line = mlines.Line2D([], [])
171.     with pytest.raises(ValueError):
172.         line.set_drawstyle('foobar')
173. 
174. 
175. def test_set_drawstyle():
176.     x = np.linspace(0, 2*np.pi, 10)
177.     y = np.sin(x)
178. 
179.     fig, ax = plt.subplots()
180.     line, = ax.plot(x, y)
181.     line.set_drawstyle("steps-pre")
182.     assert len(line.get_path().vertices) == 2*len(x)-1
183. 
184.     line.set_drawstyle("default")
185.     assert len(line.get_path().vertices) == len(x)
186. 
187. 
188. @image_comparison(
189.     ['line_collection_dashes'], remove_text=True, style='mpl20',
190.     tol=0.65 if platform.machine() in ('aarch64', 'ppc64le', 's390x') else 0)
191. def test_set_line_coll_dash_image():
192.     fig, ax = plt.subplots()
193.     np.random.seed(0)
194.     ax.contour(np.random.randn(20, 30), linestyles=[(0, (3, 3))])
195. 
196. 
197. @image_comparison(['marker_fill_styles.png'], remove_text=True)
198. def test_marker_fill_styles():
199.     colors = itertools.cycle([[0, 0, 1], 'g', '#ff0000', 'c', 'm', 'y',
200.                               np.array([0, 0, 0])])
201.     altcolor = 'lightgreen'
202. 
203.     y = np.array([1, 1])
204.     x = np.array([0, 9])
205.     fig, ax = plt.subplots()
206. 
207.     # This hard-coded list of markers correspond to an earlier iteration of
208.     # MarkerStyle.filled_markers; the value of that attribute has changed but
209.     # we kept the old value here to not regenerate the baseline image.
210.     # Replace with mlines.Line2D.filled_markers when the image is regenerated.
211.     for j, marker in enumerate("ov^<>8sp*hHDdPX"):
212.         for i, fs in enumerate(mlines.Line2D.fillStyles):
213.             color = next(colors)
214.             ax.plot(j * 10 + x, y + i + .5 * (j % 2),
215.                     marker=marker,
216.                     markersize=20,
217.                     markerfacecoloralt=altcolor,
218.                     fillstyle=fs,
219.                     label=fs,
220.                     linewidth=5,
221.                     color=color,
222.                     markeredgecolor=color,
223.                     markeredgewidth=2)
224. 
225.     ax.set_ylim([0, 7.5])
226.     ax.set_xlim([-5, 155])
227. 
228. 
229. def test_markerfacecolor_fillstyle():
230.     """Test that markerfacecolor does not override fillstyle='none'."""
231.     l, = plt.plot([1, 3, 2], marker=MarkerStyle('o', fillstyle='none'),
232.                   markerfacecolor='red')
233.     assert l.get_fillstyle() == 'none'
234.     assert l.get_markerfacecolor() == 'none'
235. 
236. 
237. @image_comparison(['scaled_lines'], style='default')
238. def test_lw_scaling():
239.     th = np.linspace(0, 32)
240.     fig, ax = plt.subplots()
241.     lins_styles = ['dashed', 'dotted', 'dashdot']
242.     cy = cycler(matplotlib.rcParams['axes.prop_cycle'])
243.     for j, (ls, sty) in enumerate(zip(lins_styles, cy)):
244.         for lw in np.linspace(.5, 10, 10):
245.             ax.plot(th, j*np.ones(50) + .1 * lw, linestyle=ls, lw=lw, **sty)
246. 
247. 
248. def test_is_sorted_and_has_non_nan():
249.     assert _path.is_sorted_and_has_non_nan(np.array([1, 2, 3]))
250.     assert _path.is_sorted_and_has_non_nan(np.array([1, np.nan, 3]))
251.     assert not _path.is_sorted_and_has_non_nan([3, 5] + [np.nan] * 100 + [0, 2])
252.     n = 2 * mlines.Line2D._subslice_optim_min_size
253.     plt.plot([np.nan] * n, range(n))
254. 
255. 
256. @check_figures_equal()
257. def test_step_markers(fig_test, fig_ref):
258.     fig_test.subplots().step([0, 1], "-o")
259.     fig_ref.subplots().plot([0, 0, 1], [0, 1, 1], "-o", markevery=[0, 2])
260. 
261. 
262. @pytest.mark.parametrize("parent", ["figure", "axes"])
263. @check_figures_equal(extensions=('png',))
264. def test_markevery(fig_test, fig_ref, parent):
265.     np.random.seed(42)
266.     x = np.linspace(0, 1, 14)
267.     y = np.random.rand(len(x))
268. 
269.     cases_test = [None, 4, (2, 5), [1, 5, 11],
270.                   [0, -1], slice(5, 10, 2),
271.                   np.arange(len(x))[y > 0.5],
272.                   0.3, (0.3, 0.4)]
273.     cases_ref = ["11111111111111", "10001000100010", "00100001000010",
274.                  "01000100000100", "10000000000001", "00000101010000",
275.                  "01110001110110", "11011011011110", "01010011011101"]
276. 
277.     if parent == "figure":
278.         # float markevery ("relative to axes size") is not supported.
279.         cases_test = cases_test[:-2]
280.         cases_ref = cases_ref[:-2]
281. 
282.         def add_test(x, y, *, markevery):
283.             fig_test.add_artist(
284.                 mlines.Line2D(x, y, marker="o", markevery=markevery))
285. 
286.         def add_ref(x, y, *, markevery):
287.             fig_ref.add_artist(
288.                 mlines.Line2D(x, y, marker="o", markevery=markevery))
289. 
290.     elif parent == "axes":
291.         axs_test = iter(fig_test.subplots(3, 3).flat)
292.         axs_ref = iter(fig_ref.subplots(3, 3).flat)
293. 
294.         def add_test(x, y, *, markevery):
295.             next(axs_test).plot(x, y, "-gD", markevery=markevery)
296. 
297.         def add_ref(x, y, *, markevery):
298.             next(axs_ref).plot(x, y, "-gD", markevery=markevery)
299. 
300.     for case in cases_test:
301.         add_test(x, y, markevery=case)
302. 
303.     for case in cases_ref:
304.         me = np.array(list(case)).astype(int).astype(bool)
305.         add_ref(x, y, markevery=me)
306. 
307. 
308. def test_markevery_figure_line_unsupported_relsize():
309.     fig = plt.figure()
310.     fig.add_artist(mlines.Line2D([0, 1], [0, 1], marker="o", markevery=.5))
311.     with pytest.raises(ValueError):
312.         fig.canvas.draw()
313. 
314. 
315. def test_marker_as_markerstyle():
316.     fig, ax = plt.subplots()
317.     line, = ax.plot([2, 4, 3], marker=MarkerStyle("D"))
318.     fig.canvas.draw()
319.     assert line.get_marker() == "D"
320. 
321.     # continue with smoke tests:
322.     line.set_marker("s")
323.     fig.canvas.draw()
324.     line.set_marker(MarkerStyle("o"))
325.     fig.canvas.draw()
326.     # test Path roundtrip
327.     triangle1 = Path._create_closed([[-1, -1], [1, -1], [0, 2]])
328.     line2, = ax.plot([1, 3, 2], marker=MarkerStyle(triangle1), ms=22)
329.     line3, = ax.plot([0, 2, 1], marker=triangle1, ms=22)
330. 
331.     assert_array_equal(line2.get_marker().vertices, triangle1.vertices)
332.     assert_array_equal(line3.get_marker().vertices, triangle1.vertices)
333. 
334. 
335. @image_comparison(['striped_line.png'], remove_text=True, style='mpl20')
336. def test_striped_lines():
337.     rng = np.random.default_rng(19680801)
338.     _, ax = plt.subplots()
339.     ax.plot(rng.uniform(size=12), color='orange', gapcolor='blue',
340.             linestyle='--', lw=5, label=' ')
341.     ax.plot(rng.uniform(size=12), color='red', gapcolor='black',
342.             linestyle=(0, (2, 5, 4, 2)), lw=5, label=' ', alpha=0.5)
343.     ax.legend(handlelength=5)
344. 
345. 
346. @check_figures_equal()
347. def test_odd_dashes(fig_test, fig_ref):
348.     fig_test.add_subplot().plot([1, 2], dashes=[1, 2, 3])
349.     fig_ref.add_subplot().plot([1, 2], dashes=[1, 2, 3, 1, 2, 3])
350. 
351. 
352. def test_picking():
353.     fig, ax = plt.subplots()
354.     mouse_event = SimpleNamespace(x=fig.bbox.width // 2,
355.                                   y=fig.bbox.height // 2 + 15)
356. 
357.     # Default pickradius is 5, so event should not pick this line.
358.     l0, = ax.plot([0, 1], [0, 1], picker=True)
359.     found, indices = l0.contains(mouse_event)
360.     assert not found
361. 
362.     # But with a larger pickradius, this should be picked.
363.     l1, = ax.plot([0, 1], [0, 1], picker=True, pickradius=20)
364.     found, indices = l1.contains(mouse_event)
365.     assert found
366.     assert_array_equal(indices['ind'], [0])
367. 
368.     # And if we modify the pickradius after creation, it should work as well.
369.     l2, = ax.plot([0, 1], [0, 1], picker=True)
370.     found, indices = l2.contains(mouse_event)
371.     assert not found
372.     l2.set_pickradius(20)
373.     found, indices = l2.contains(mouse_event)
374.     assert found
375.     assert_array_equal(indices['ind'], [0])
376. 
377. 
378. @check_figures_equal()
379. def test_input_copy(fig_test, fig_ref):
380. 
381.     t = np.arange(0, 6, 2)
382.     l, = fig_test.add_subplot().plot(t, t, ".-")
383.     t[:] = range(3)
384.     # Trigger cache invalidation
385.     l.set_drawstyle("steps")
386.     fig_ref.add_subplot().plot([0, 2, 4], [0, 2, 4], ".-", drawstyle="steps")
387. 
388. 
389. @check_figures_equal(extensions=["png"])
390. def test_markevery_prop_cycle(fig_test, fig_ref):
391.     """Test that we can set markevery prop_cycle."""
392.     cases = [None, 8, (30, 8), [16, 24, 30], [0, -1],
393.              slice(100, 200, 3), 0.1, 0.3, 1.5,
394.              (0.0, 0.1), (0.45, 0.1)]
395. 
396.     cmap = mpl.colormaps['jet']
397.     colors = cmap(np.linspace(0.2, 0.8, len(cases)))
398. 
399.     x = np.linspace(-1, 1)
400.     y = 5 * x**2
401. 
402.     axs = fig_ref.add_subplot()
403.     for i, markevery in enumerate(cases):
404.         axs.plot(y - i, 'o-', markevery=markevery, color=colors[i])
405. 
406.     matplotlib.rcParams['axes.prop_cycle'] = cycler(markevery=cases,
407.                                                     color=colors)
408. 
409.     ax = fig_test.add_subplot()
410.     for i, _ in enumerate(cases):
411.         ax.plot(y - i, 'o-')

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 08:46:05,479 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases for `get/set_antialiased` on artists. The previously provided context from `test_lines.py` does not contain any such tests. I hypothesize that tests for this functionality exist for other artist types, such as patches, which are known to have an `antialiased` property. Therefore, I need to inspect `lib/matplotlib/tests/test_patches.py`.' query='Please provide the full content of lib/matplotlib/tests/test_patches.py.' extra_requirements='' purpose="This file is expected to contain test cases for the 'antialiased' property on Patch objects, which will serve as a model for writing tests for the same property on Text objects."
2025-12-21 08:46:05,480 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
2025-12-21 08:46:05,481 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 08:46:05,481 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 08:46:05,482 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 08:46:05,482 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
Purpose: This file is expected to contain test cases for the 'antialiased' property on Patch objects, which will serve as a model for writing tests for the same property on Text objects.
2025-12-21 08:46:08,395 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of the file lib/matplotlib/tests/test_patches.py. This file contains test cases for the 'antialiased' property on Patch objects. You can use this as a reference for writing tests for the same property on Text objects." additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_patches.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2154, 'candidates_token_count': 81, 'total_token_count': 2389, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2154}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 81}], 'thoughts_token_count': 154, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.09794450100557303, 'model_name': 'gemini-2.5-pro'} id='run--71083bfa-bf15-44ec-afba-903eda2d7ead-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_patches.py'}, 'id': '8e43cfc9-d14c-4c7a-a1e3-2a8e30d379c1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2154, 'output_tokens': 81, 'total_tokens': 2389, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 154}}
2025-12-21 08:46:11,749 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of the file lib/matplotlib/tests/test_patches.py. This file contains test cases for the 'antialiased' property on Patch objects. You can use this as a reference for writing tests for the same property on Text objects." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10665, 'candidates_token_count': 56, 'total_token_count': 10932, 'cached_content_token_count': 1868, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10665}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1868}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 56}], 'thoughts_token_count': 211}, 'finish_reason': 'STOP', 'avg_logprobs': -0.36538069588797434, 'model_name': 'gemini-2.5-pro'} id='run--9d2bb016-9ee0-4a6c-9bca-a5265c7e94e1-0' usage_metadata={'input_tokens': 10665, 'output_tokens': 56, 'total_tokens': 10932, 'input_token_details': {'cache_read': 1868}, 'output_token_details': {'reasoning': 211}}
2025-12-21 08:46:11,751 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of lib/matplotlib/tests/test_patches.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
This file is expected to contain test cases for the 'antialiased' property on Patch objects, which will serve as a model for writing tests for the same property on Text objects.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: lib/matplotlib/tests/test_patches.py
Line number range: 1 - 500
Content:
1. """
2. Tests specific to the patches module.
3. """
4. import numpy as np
5. from numpy.testing import assert_almost_equal, assert_array_equal
6. import pytest
7. 
8. import matplotlib as mpl
9. from matplotlib.patches import (Annulus, Ellipse, Patch, Polygon, Rectangle,
10.                                 FancyArrowPatch, FancyArrow, BoxStyle, Arc)
11. from matplotlib.testing.decorators import image_comparison, check_figures_equal
12. from matplotlib.transforms import Bbox
13. import matplotlib.pyplot as plt
14. from matplotlib import (
15.     collections as mcollections, colors as mcolors, patches as mpatches,
16.     path as mpath, transforms as mtransforms, rcParams)
17. 
18. import sys
19. on_win = (sys.platform == 'win32')
20. 
21. 
22. def test_Polygon_close():
23.     #: GitHub issue #1018 identified a bug in the Polygon handling
24.     #: of the closed attribute; the path was not getting closed
25.     #: when set_xy was used to set the vertices.
26. 
27.     # open set of vertices:
28.     xy = [[0, 0], [0, 1], [1, 1]]
29.     # closed set:
30.     xyclosed = xy + [[0, 0]]
31. 
32.     # start with open path and close it:
33.     p = Polygon(xy, closed=True)
34.     assert p.get_closed()
35.     assert_array_equal(p.get_xy(), xyclosed)
36.     p.set_xy(xy)
37.     assert_array_equal(p.get_xy(), xyclosed)
38. 
39.     # start with closed path and open it:
40.     p = Polygon(xyclosed, closed=False)
41.     assert_array_equal(p.get_xy(), xy)
42.     p.set_xy(xyclosed)
43.     assert_array_equal(p.get_xy(), xy)
44. 
45.     # start with open path and leave it open:
46.     p = Polygon(xy, closed=False)
47.     assert not p.get_closed()
48.     assert_array_equal(p.get_xy(), xy)
49.     p.set_xy(xy)
50.     assert_array_equal(p.get_xy(), xy)
51. 
52.     # start with closed path and leave it closed:
53.     p = Polygon(xyclosed, closed=True)
54.     assert_array_equal(p.get_xy(), xyclosed)
55.     p.set_xy(xyclosed)
56.     assert_array_equal(p.get_xy(), xyclosed)
57. 
58. 
59. def test_corner_center():
60.     loc = [10, 20]
61.     width = 1
62.     height = 2
63. 
64.     # Rectangle
65.     # No rotation
66.     corners = ((10, 20), (11, 20), (11, 22), (10, 22))
67.     rect = Rectangle(loc, width, height)
68.     assert_array_equal(rect.get_corners(), corners)
69.     assert_array_equal(rect.get_center(), (10.5, 21))
70. 
71.     # 90 deg rotation
72.     corners_rot = ((10, 20), (10, 21), (8, 21), (8, 20))
73.     rect.set_angle(90)
74.     assert_array_equal(rect.get_corners(), corners_rot)
75.     assert_array_equal(rect.get_center(), (9, 20.5))
76. 
77.     # Rotation not a multiple of 90 deg
78.     theta = 33
79.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
80.     corners_rot = t.transform(corners)
81.     rect.set_angle(theta)
82.     assert_almost_equal(rect.get_corners(), corners_rot)
83. 
84.     # Ellipse
85.     loc = [loc[0] + width / 2,
86.            loc[1] + height / 2]
87.     ellipse = Ellipse(loc, width, height)
88. 
89.     # No rotation
90.     assert_array_equal(ellipse.get_corners(), corners)
91. 
92.     # 90 deg rotation
93.     corners_rot = ((11.5, 20.5), (11.5, 21.5), (9.5, 21.5), (9.5, 20.5))
94.     ellipse.set_angle(90)
95.     assert_array_equal(ellipse.get_corners(), corners_rot)
96.     # Rotation shouldn't change ellipse center
97.     assert_array_equal(ellipse.get_center(), loc)
98. 
99.     # Rotation not a multiple of 90 deg
100.     theta = 33
101.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
102.     corners_rot = t.transform(corners)
103.     ellipse.set_angle(theta)
104.     assert_almost_equal(ellipse.get_corners(), corners_rot)
105. 
106. 
107. def test_rotate_rect():
108.     loc = np.asarray([1.0, 2.0])
109.     width = 2
110.     height = 3
111.     angle = 30.0
112. 
113.     # A rotated rectangle
114.     rect1 = Rectangle(loc, width, height, angle=angle)
115. 
116.     # A non-rotated rectangle
117.     rect2 = Rectangle(loc, width, height)
118. 
119.     # Set up an explicit rotation matrix (in radians)
120.     angle_rad = np.pi * angle / 180.0
121.     rotation_matrix = np.array([[np.cos(angle_rad), -np.sin(angle_rad)],
122.                                 [np.sin(angle_rad),  np.cos(angle_rad)]])
123. 
124.     # Translate to origin, rotate each vertex, and then translate back
125.     new_verts = np.inner(rotation_matrix, rect2.get_verts() - loc).T + loc
126. 
127.     # They should be the same
128.     assert_almost_equal(rect1.get_verts(), new_verts)
129. 
130. 
131. @check_figures_equal(extensions=['png'])
132. def test_rotate_rect_draw(fig_test, fig_ref):
133.     ax_test = fig_test.add_subplot()
134.     ax_ref = fig_ref.add_subplot()
135. 
136.     loc = (0, 0)
137.     width, height = (1, 1)
138.     angle = 30
139.     rect_ref = Rectangle(loc, width, height, angle=angle)
140.     ax_ref.add_patch(rect_ref)
141.     assert rect_ref.get_angle() == angle
142. 
143.     # Check that when the angle is updated after adding to an Axes, that the
144.     # patch is marked stale and redrawn in the correct location
145.     rect_test = Rectangle(loc, width, height)
146.     assert rect_test.get_angle() == 0
147.     ax_test.add_patch(rect_test)
148.     rect_test.set_angle(angle)
149.     assert rect_test.get_angle() == angle
150. 
151. 
152. @check_figures_equal(extensions=['png'])
153. def test_dash_offset_patch_draw(fig_test, fig_ref):
154.     ax_test = fig_test.add_subplot()
155.     ax_ref = fig_ref.add_subplot()
156. 
157.     loc = (0.1, 0.1)
158.     width, height = (0.8, 0.8)
159.     rect_ref = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
160.                                                 linestyle=(0, [6, 6]))
161.     # fill the line gaps using a linestyle (0, [0, 6, 6, 0]), which is
162.     # equivalent to (6, [6, 6]) but has 0 dash offset
163.     rect_ref2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
164.                                             linestyle=(0, [0, 6, 6, 0]))
165.     assert rect_ref.get_linestyle() == (0, [6, 6])
166.     assert rect_ref2.get_linestyle() == (0, [0, 6, 6, 0])
167. 
168.     ax_ref.add_patch(rect_ref)
169.     ax_ref.add_patch(rect_ref2)
170. 
171.     # Check that the dash offset of the rect is the same if we pass it in the
172.     # init method and if we create two rects with appropriate onoff sequence
173.     # of linestyle.
174. 
175.     rect_test = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
176.                                                     linestyle=(0, [6, 6]))
177.     rect_test2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
178.                                                     linestyle=(6, [6, 6]))
179.     assert rect_test.get_linestyle() == (0, [6, 6])
180.     assert rect_test2.get_linestyle() == (6, [6, 6])
181. 
182.     ax_test.add_patch(rect_test)
183.     ax_test.add_patch(rect_test2)
184. 
185. 
186. def test_negative_rect():
187.     # These two rectangles have the same vertices, but starting from a
188.     # different point.  (We also drop the last vertex, which is a duplicate.)
189.     pos_vertices = Rectangle((-3, -2), 3, 2).get_verts()[:-1]
190.     neg_vertices = Rectangle((0, 0), -3, -2).get_verts()[:-1]
191.     assert_array_equal(np.roll(neg_vertices, 2, 0), pos_vertices)
192. 
193. 
194. @image_comparison(['clip_to_bbox'])
195. def test_clip_to_bbox():
196.     fig, ax = plt.subplots()
197.     ax.set_xlim([-18, 20])
198.     ax.set_ylim([-150, 100])
199. 
200.     path = mpath.Path.unit_regular_star(8).deepcopy()
201.     path.vertices *= [10, 100]
202.     path.vertices -= [5, 25]
203. 
204.     path2 = mpath.Path.unit_circle().deepcopy()
205.     path2.vertices *= [10, 100]
206.     path2.vertices += [10, -25]
207. 
208.     combined = mpath.Path.make_compound_path(path, path2)
209. 
210.     patch = mpatches.PathPatch(
211.         combined, alpha=0.5, facecolor='coral', edgecolor='none')
212.     ax.add_patch(patch)
213. 
214.     bbox = mtransforms.Bbox([[-12, -77.5], [50, -110]])
215.     result_path = combined.clip_to_bbox(bbox)
216.     result_patch = mpatches.PathPatch(
217.         result_path, alpha=0.5, facecolor='green', lw=4, edgecolor='black')
218. 
219.     ax.add_patch(result_patch)
220. 
221. 
222. @image_comparison(['patch_alpha_coloring'], remove_text=True)
223. def test_patch_alpha_coloring():
224.     """
225.     Test checks that the patch and collection are rendered with the specified
226.     alpha values in their facecolor and edgecolor.
227.     """
228.     star = mpath.Path.unit_regular_star(6)
229.     circle = mpath.Path.unit_circle()
230.     # concatenate the star with an internal cutout of the circle
231.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
232.     codes = np.concatenate([circle.codes, star.codes])
233.     cut_star1 = mpath.Path(verts, codes)
234.     cut_star2 = mpath.Path(verts + 1, codes)
235. 
236.     ax = plt.axes()
237.     col = mcollections.PathCollection([cut_star2],
238.                                       linewidth=5, linestyles='dashdot',
239.                                       facecolor=(1, 0, 0, 0.5),
240.                                       edgecolor=(0, 0, 1, 0.75))
241.     ax.add_collection(col)
242. 
243.     patch = mpatches.PathPatch(cut_star1,
244.                                linewidth=5, linestyle='dashdot',
245.                                facecolor=(1, 0, 0, 0.5),
246.                                edgecolor=(0, 0, 1, 0.75))
247.     ax.add_patch(patch)
248. 
249.     ax.set_xlim([-1, 2])
250.     ax.set_ylim([-1, 2])
251. 
252. 
253. @image_comparison(['patch_alpha_override'], remove_text=True)
254. def test_patch_alpha_override():
255.     #: Test checks that specifying an alpha attribute for a patch or
256.     #: collection will override any alpha component of the facecolor
257.     #: or edgecolor.
258.     star = mpath.Path.unit_regular_star(6)
259.     circle = mpath.Path.unit_circle()
260.     # concatenate the star with an internal cutout of the circle
261.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
262.     codes = np.concatenate([circle.codes, star.codes])
263.     cut_star1 = mpath.Path(verts, codes)
264.     cut_star2 = mpath.Path(verts + 1, codes)
265. 
266.     ax = plt.axes()
267.     col = mcollections.PathCollection([cut_star2],
268.                                       linewidth=5, linestyles='dashdot',
269.                                       alpha=0.25,
270.                                       facecolor=(1, 0, 0, 0.5),
271.                                       edgecolor=(0, 0, 1, 0.75))
272.     ax.add_collection(col)
273. 
274.     patch = mpatches.PathPatch(cut_star1,
275.                                linewidth=5, linestyle='dashdot',
276.                                alpha=0.25,
277.                                facecolor=(1, 0, 0, 0.5),
278.                                edgecolor=(0, 0, 1, 0.75))
279.     ax.add_patch(patch)
280. 
281.     ax.set_xlim([-1, 2])
282.     ax.set_ylim([-1, 2])
283. 
284. 
285. @mpl.style.context('default')
286. def test_patch_color_none():
287.     # Make sure the alpha kwarg does not override 'none' facecolor.
288.     # Addresses issue #7478.
289.     c = plt.Circle((0, 0), 1, facecolor='none', alpha=1)
290.     assert c.get_facecolor()[0] == 0
291. 
292. 
293. @image_comparison(['patch_custom_linestyle'], remove_text=True)
294. def test_patch_custom_linestyle():
295.     #: A test to check that patches and collections accept custom dash
296.     #: patterns as linestyle and that they display correctly.
297.     star = mpath.Path.unit_regular_star(6)
298.     circle = mpath.Path.unit_circle()
299.     # concatenate the star with an internal cutout of the circle
300.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
301.     codes = np.concatenate([circle.codes, star.codes])
302.     cut_star1 = mpath.Path(verts, codes)
303.     cut_star2 = mpath.Path(verts + 1, codes)
304. 
305.     ax = plt.axes()
306.     col = mcollections.PathCollection(
307.         [cut_star2],
308.         linewidth=5, linestyles=[(0, (5, 7, 10, 7))],
309.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
310.     ax.add_collection(col)
311. 
312.     patch = mpatches.PathPatch(
313.         cut_star1,
314.         linewidth=5, linestyle=(0, (5, 7, 10, 7)),
315.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
316.     ax.add_patch(patch)
317. 
318.     ax.set_xlim([-1, 2])
319.     ax.set_ylim([-1, 2])
320. 
321. 
322. def test_patch_linestyle_accents():
323.     #: Test if linestyle can also be specified with short mnemonics like "--"
324.     #: c.f. GitHub issue #2136
325.     star = mpath.Path.unit_regular_star(6)
326.     circle = mpath.Path.unit_circle()
327.     # concatenate the star with an internal cutout of the circle
328.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
329.     codes = np.concatenate([circle.codes, star.codes])
330. 
331.     linestyles = ["-", "--", "-.", ":",
332.                   "solid", "dashed", "dashdot", "dotted"]
333. 
334.     fig, ax = plt.subplots()
335.     for i, ls in enumerate(linestyles):
336.         star = mpath.Path(verts + i, codes)
337.         patch = mpatches.PathPatch(star,
338.                                    linewidth=3, linestyle=ls,
339.                                    facecolor=(1, 0, 0),
340.                                    edgecolor=(0, 0, 1))
341.         ax.add_patch(patch)
342. 
343.     ax.set_xlim([-1, i + 1])
344.     ax.set_ylim([-1, i + 1])
345.     fig.canvas.draw()
346. 
347. 
348. @check_figures_equal(extensions=['png'])
349. def test_patch_linestyle_none(fig_test, fig_ref):
350.     circle = mpath.Path.unit_circle()
351. 
352.     ax_test = fig_test.add_subplot()
353.     ax_ref = fig_ref.add_subplot()
354.     for i, ls in enumerate(['none', 'None', ' ', '']):
355.         path = mpath.Path(circle.vertices + i, circle.codes)
356.         patch = mpatches.PathPatch(path,
357.                                    linewidth=3, linestyle=ls,
358.                                    facecolor=(1, 0, 0),
359.                                    edgecolor=(0, 0, 1))
360.         ax_test.add_patch(patch)
361. 
362.         patch = mpatches.PathPatch(path,
363.                                    linewidth=3, linestyle='-',
364.                                    facecolor=(1, 0, 0),
365.                                    edgecolor='none')
366.         ax_ref.add_patch(patch)
367. 
368.     ax_test.set_xlim([-1, i + 1])
369.     ax_test.set_ylim([-1, i + 1])
370.     ax_ref.set_xlim([-1, i + 1])
371.     ax_ref.set_ylim([-1, i + 1])
372. 
373. 
374. def test_wedge_movement():
375.     param_dict = {'center': ((0, 0), (1, 1), 'set_center'),
376.                   'r': (5, 8, 'set_radius'),
377.                   'width': (2, 3, 'set_width'),
378.                   'theta1': (0, 30, 'set_theta1'),
379.                   'theta2': (45, 50, 'set_theta2')}
380. 
381.     init_args = {k: v[0] for k, v in param_dict.items()}
382. 
383.     w = mpatches.Wedge(**init_args)
384.     for attr, (old_v, new_v, func) in param_dict.items():
385.         assert getattr(w, attr) == old_v
386.         getattr(w, func)(new_v)
387.         assert getattr(w, attr) == new_v
388. 
389. 
390. # png needs tol>=0.06, pdf tol>=1.617
391. @image_comparison(['wedge_range'], remove_text=True, tol=1.65 if on_win else 0)
392. def test_wedge_range():
393.     ax = plt.axes()
394. 
395.     t1 = 2.313869244286224
396. 
397.     args = [[52.31386924, 232.31386924],
398.             [52.313869244286224, 232.31386924428622],
399.             [t1, t1 + 180.0],
400.             [0, 360],
401.             [90, 90 + 360],
402.             [-180, 180],
403.             [0, 380],
404.             [45, 46],
405.             [46, 45]]
406. 
407.     for i, (theta1, theta2) in enumerate(args):
408.         x = i % 3
409.         y = i // 3
410. 
411.         wedge = mpatches.Wedge((x * 3, y * 3), 1, theta1, theta2,
412.                                facecolor='none', edgecolor='k', lw=3)
413. 
414.         ax.add_artist(wedge)
415. 
416.     ax.set_xlim([-2, 8])
417.     ax.set_ylim([-2, 9])
418. 
419. 
420. def test_patch_str():
421.     """
422.     Check that patches have nice and working `str` representation.
423. 
424.     Note that the logic is that `__str__` is defined such that:
425.     str(eval(str(p))) == str(p)
426.     """
427.     p = mpatches.Circle(xy=(1, 2), radius=3)
428.     assert str(p) == 'Circle(xy=(1, 2), radius=3)'
429. 
430.     p = mpatches.Ellipse(xy=(1, 2), width=3, height=4, angle=5)
431.     assert str(p) == 'Ellipse(xy=(1, 2), width=3, height=4, angle=5)'
432. 
433.     p = mpatches.Rectangle(xy=(1, 2), width=3, height=4, angle=5)
434.     assert str(p) == 'Rectangle(xy=(1, 2), width=3, height=4, angle=5)'
435. 
436.     p = mpatches.Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)
437.     assert str(p) == 'Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)'
438. 
439.     p = mpatches.Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)
440.     expected = 'Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)'
441.     assert str(p) == expected
442. 
443.     p = mpatches.Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)
444.     expected = "Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)"
445.     assert str(p) == expected
446. 
447.     p = mpatches.RegularPolygon((1, 2), 20, radius=5)
448.     assert str(p) == "RegularPolygon((1, 2), 20, radius=5, orientation=0)"
449. 
450.     p = mpatches.CirclePolygon(xy=(1, 2), radius=5, resolution=20)
451.     assert str(p) == "CirclePolygon((1, 2), radius=5, resolution=20)"
452. 
453.     p = mpatches.FancyBboxPatch((1, 2), width=3, height=4)
454.     assert str(p) == "FancyBboxPatch((1, 2), width=3, height=4)"
455. 
456.     # Further nice __str__ which cannot be `eval`uated:
457.     path = mpath.Path([(1, 2), (2, 2), (1, 2)], closed=True)
458.     p = mpatches.PathPatch(path)
459.     assert str(p) == "PathPatch3((1, 2) ...)"
460. 
461.     p = mpatches.Polygon(np.empty((0, 2)))
462.     assert str(p) == "Polygon0()"
463. 
464.     data = [[1, 2], [2, 2], [1, 2]]
465.     p = mpatches.Polygon(data)
466.     assert str(p) == "Polygon3((1, 2) ...)"
467. 
468.     p = mpatches.FancyArrowPatch(path=path)
469.     assert str(p)[:27] == "FancyArrowPatch(Path(array("
470. 
471.     p = mpatches.FancyArrowPatch((1, 2), (3, 4))
472.     assert str(p) == "FancyArrowPatch((1, 2)->(3, 4))"
473. 
474.     p = mpatches.ConnectionPatch((1, 2), (3, 4), 'data')
475.     assert str(p) == "ConnectionPatch((1, 2), (3, 4))"
476. 
477.     s = mpatches.Shadow(p, 1, 1)
478.     assert str(s) == "Shadow(ConnectionPatch((1, 2), (3, 4)))"
479. 
480.     # Not testing Arrow, FancyArrow here
481.     # because they seem to exist only for historical reasons.
482. 
483. 
484. @image_comparison(['multi_color_hatch'], remove_text=True, style='default')
485. def test_multi_color_hatch():
486.     fig, ax = plt.subplots()
487. 
488.     rects = ax.bar(range(5), range(1, 6))
489.     for i, rect in enumerate(rects):
490.         rect.set_facecolor('none')
491.         rect.set_edgecolor(f'C{i}')
492.         rect.set_hatch('/')
493. 
494.     ax.autoscale_view()
495.     ax.autoscale(False)
496. 
497.     for i in range(5):
498.         with mpl.style.context({'hatch.color': f'C{i}'}):
499.             r = Rectangle((i - .8 / 2, 5), .8, 1, hatch='//', fc='none')
500.         ax.add_patch(r)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 08:46:16,205 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asks for the full content of the file 'lib/matplotlib/tests/test_patches.py'.\n2. Extended relevance:\n   - The provided context contains the entire content of the requested file, from line 1 to 500. Therefore, the whole file is relevant to fulfill the user's request.", relative_path='lib/matplotlib/tests/test_patches.py', start_line=1, end_line=500)]
2025-12-21 08:46:16,207 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
2025-12-21 08:46:16,207 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 08:46:16,207 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 08:46:16,208 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 1 existing contexts
2025-12-21 08:46:16,208 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-21 08:46:16,209 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
matplotlib
├── .appveyor.yml
├── .circleci
|   ├── config.yml
|   ├── deploy-docs.sh
|   └── fetch_doc_logs.py
├── .git_archival.txt
├── .github
|   ├── CONTRIBUTING.md
|   ├── FUNDING.yml
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.yml
|   |   ├── config.yml
|   |   ├── documentation.yml
|   |   ├── feature_request.yml
|   |   └── maintenance.yml
|   ├── PULL_REQUEST_TEMPLATE.md
|   ├── codecov.yml
|   ├── dependabot.yml
|   └── workflows
|       ├── cibuildwheel.yml
|       ├── circleci.yml
|       ├── clean_pr.yml
|       ├── codeql-analysis.yml
|       ├── conflictcheck.yml
|       ├── cygwin.yml
|       ├── good-first-issue.yml
|       ├── mypy-stubtest.yml
|       ├── nightlies.yml
|       ├── pr_welcome.yml
|       ├── reviewdog.yml
|       ├── stale.yml
|       └── tests.yml
├── .meeseeksdev.yml
├── .pre-commit-config.yaml
├── CODE_OF_CONDUCT.md
├── INSTALL.rst
├── LICENSE
├── README.md
├── SECURITY.md
├── azure-pipelines.yml
├── ci
|   ├── check_version_number.py
|   ├── check_wheel_licenses.py
|   ├── codespell-ignore-words.txt
|   ├── export_sdist_name.py
|   └── mypy-stubtest-allowlist.txt
├── doc
|   ├── README.txt
|   ├── _static
|   |   ├── fa
|   |   ├── markers
|   |   ├── mpl.css
|   |   └── zenodo_cache
|   ├── _templates
|   |   ├── autofunctions.rst
|   |   ├── automodule.rst
|   |   ├── autosummary.rst
|   |   ├── autosummary_class_only.rst
|   |   ├── cheatsheet_sidebar.html
|   |   ├── donate_sidebar.html
|   |   ├── function.rst
|   |   ├── pagesource.html
|   |   ├── search.html
|   |   ├── sidebar_announcement.html
|   |   └── sidebar_versions.html
|   ├── api
|   |   ├── _api_api.rst
|   |   ├── _enums_api.rst
|   |   ├── afm_api.rst
|   |   ├── animation_api.rst
|   |   ├── artist_api.rst
|   |   ├── axes_api.rst
|   |   ├── axis_api.rst
|   |   ├── backend_agg_api.rst
|   |   ├── backend_bases_api.rst
|   |   ├── backend_cairo_api.rst
|   |   ├── backend_gtk3_api.rst
|   |   ├── backend_gtk4_api.rst
|   |   ├── backend_managers_api.rst
|   |   ├── backend_mixed_api.rst
|   |   ├── backend_nbagg_api.rst
|   |   ├── backend_pdf_api.rst
|   |   ├── backend_pgf_api.rst
|   |   ├── backend_ps_api.rst
|   |   ├── backend_qt_api.rst
|   |   ├── backend_svg_api.rst
|   |   ├── backend_template_api.rst
|   |   ├── backend_tk_api.rst
|   |   ├── backend_tools_api.rst
|   |   ├── backend_webagg_api.rst
|   |   ├── backend_wx_api.rst
|   |   ├── bezier_api.rst
|   |   ├── category_api.rst
|   |   ├── cbook_api.rst
|   |   ├── cm_api.rst
|   |   ├── collections_api.rst
|   |   ├── colorbar_api.rst
|   |   ├── colors_api.rst
|   |   ├── container_api.rst
|   |   ├── contour_api.rst
|   |   ├── dates_api.rst
|   |   ├── docstring_api.rst
|   |   ├── dviread.rst
|   |   ├── figure_api.rst
|   |   ├── font_manager_api.rst
|   |   ├── ft2font.rst
|   |   ├── gridspec_api.rst
|   |   ├── hatch_api.rst
|   |   ├── image_api.rst
|   |   ├── index.rst
|   |   ├── index_backend_api.rst
|   |   ├── layout_engine_api.rst
|   |   ├── legend_api.rst
|   |   ├── legend_handler_api.rst
|   |   ├── lines_api.rst
|   |   ├── markers_api.rst
|   |   ├── mathtext_api.rst
|   |   ├── matplotlib_configuration_api.rst
|   |   ├── mlab_api.rst
|   |   ├── next_api_changes
|   |   |   ├── README.rst
|   |   |   ├── behavior
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24661-AAMW.rst
|   |   |   |   ├── 25044-YI.rst
|   |   |   |   ├── 25061-DS.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25112-GG.rst
|   |   |   |   ├── 25192-DS.rst
|   |   |   |   ├── 25255-RR.rst
|   |   |   |   ├── 25456-AL.rst
|   |   |   |   └── 25697-AL.rst
|   |   |   ├── deprecations
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 23200-OG.rst
|   |   |   |   ├── 24312-AL.rst
|   |   |   |   ├── 24913-AL.rst
|   |   |   |   ├── 24985-OG.rst
|   |   |   |   ├── 24990-OG.rst
|   |   |   |   ├── 25101-AL.rst
|   |   |   |   ├── 25138-AL.rst
|   |   |   |   ├── 25282-AL.rst
|   |   |   |   ├── 25352-GL.rst
|   |   |   |   ├── 25427-AL.rst
|   |   |   |   ├── 25469-AL.rst
|   |   |   |   ├── 25484-AL.rst
|   |   |   |   ├── 25557-AL.rst
|   |   |   |   ├── 25559-AL.rst
|   |   |   |   ├── 25584-KS.rst
|   |   |   |   ├── 25588-KS.rst
|   |   |   |   ├── 25651-REC.rst
|   |   |   |   ├── 25708-AL.rst
|   |   |   |   ├── 25728-OG.rst
|   |   |   |   ├── 25742-ES.rst
|   |   |   |   ├── 25774-AL.rst
|   |   |   |   ├── 25781-AL.rst
|   |   |   |   ├── 25841-AL.rst
|   |   |   |   ├── 25859-ES.rst
|   |   |   |   └── 25889-AL.rst
|   |   |   ├── development
|   |   |   |   ├── 00001-ABC.rst
|   |   |   |   ├── 24531-DOS.rst
|   |   |   |   ├── 24919-KS.rst
|   |   |   |   ├── 24976-KS.rst
|   |   |   |   └── 25475-ES.rst
|   |   |   └── removals
|   |   |       ├── 00001-ABC.rst
|   |   |       ├── 24923-ES.rst
|   |   |       ├── 24984-OG.rst
|   |   |       ├── 24XXX-OG.rst
|   |   |       ├── 25456-AL.rst
|   |   |       ├── 25584-KS.rst
|   |   |       └── 25648-TS.rst
|   |   ├── next_api_changes.rst
|   |   ├── offsetbox_api.rst
|   |   ├── patches_api.rst
|   |   ├── path_api.rst
|   |   ├── patheffects_api.rst
|   |   ├── prev_api_changes
|   |   |   ├── api_changes_0.40.rst
|   |   |   ├── api_changes_0.42.rst
|   |   |   ├── api_changes_0.50.rst
|   |   |   ├── api_changes_0.54.3.rst
|   |   |   ├── api_changes_0.54.rst
|   |   |   ├── api_changes_0.60.rst
|   |   |   ├── api_changes_0.61.rst
|   |   |   ├── api_changes_0.63.rst
|   |   |   ├── api_changes_0.65.1.rst
|   |   |   ├── api_changes_0.65.rst
|   |   |   ├── api_changes_0.70.rst
|   |   |   ├── api_changes_0.71.rst
|   |   |   ├── api_changes_0.72.rst
|   |   |   ├── api_changes_0.73.rst
|   |   |   ├── api_changes_0.80.rst
|   |   |   ├── api_changes_0.81.rst
|   |   |   ├── api_changes_0.82.rst
|   |   |   ├── api_changes_0.83.rst
|   |   |   ├── api_changes_0.84.rst
|   |   |   ├── api_changes_0.85.rst
|   |   |   ├── api_changes_0.86.rst
|   |   |   ├── api_changes_0.87.7.rst
|   |   |   ├── api_changes_0.90.0.rst
|   |   |   ├── api_changes_0.90.1.rst
|   |   |   ├── api_changes_0.91.0.rst
|   |   |   ├── api_changes_0.91.2.rst
|   |   |   ├── api_changes_0.98.0.rst
|   |   |   ├── api_changes_0.98.1.rst
|   |   |   ├── api_changes_0.98.x.rst
|   |   |   ├── api_changes_0.99.rst
|   |   |   ├── api_changes_0.99.x.rst
|   |   |   ├── api_changes_1.1.x.rst
|   |   |   ├── api_changes_1.2.x.rst
|   |   |   ├── api_changes_1.3.x.rst
|   |   |   ├── api_changes_1.4.x.rst
|   |   |   ├── api_changes_1.5.0.rst
|   |   |   ├── api_changes_1.5.2.rst
|   |   |   ├── api_changes_1.5.3.rst
|   |   |   ├── api_changes_2.0.0.rst
|   |   |   ├── api_changes_2.0.1.rst
|   |   |   ├── api_changes_2.1.0.rst
|   |   |   ├── api_changes_2.1.1.rst
|   |   |   ├── api_changes_2.1.2.rst
|   |   |   ├── api_changes_2.2.0.rst
|   |   |   ├── api_changes_3.0.0.rst
|   |   |   ├── api_changes_3.0.1.rst
|   |   |   ├── api_changes_3.1.0.rst
|   |   |   ├── api_changes_3.1.1.rst
|   |   |   ├── api_changes_3.2.0
|   |   |   |   ├── behavior.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.2.0.rst
|   |   |   ├── api_changes_3.3.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.3.0.rst
|   |   |   ├── api_changes_3.3.1.rst
|   |   |   ├── api_changes_3.4.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.4.0.rst
|   |   |   ├── api_changes_3.4.2.rst
|   |   |   ├── api_changes_3.5.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.5.0.rst
|   |   |   ├── api_changes_3.5.2.rst
|   |   |   ├── api_changes_3.5.3.rst
|   |   |   ├── api_changes_3.6.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   ├── api_changes_3.6.0.rst
|   |   |   ├── api_changes_3.6.1.rst
|   |   |   ├── api_changes_3.7.0
|   |   |   |   ├── behaviour.rst
|   |   |   |   ├── deprecations.rst
|   |   |   |   ├── development.rst
|   |   |   |   └── removals.rst
|   |   |   └── api_changes_3.7.0.rst
|   |   ├── projections
|   |   |   ├── geo.rst
|   |   |   └── polar.rst
|   |   ├── projections_api.rst
|   |   ├── pyplot_summary.rst
|   |   ├── quiver_api.rst
|   |   ├── rcsetup_api.rst
|   |   ├── sankey_api.rst
|   |   ├── scale_api.rst
|   |   ├── sphinxext_mathmpl_api.rst
|   |   ├── sphinxext_plot_directive_api.rst
|   |   ├── spines_api.rst
|   |   ├── style_api.rst
|   |   ├── table_api.rst
|   |   ├── testing_api.rst
|   |   ├── texmanager_api.rst
|   |   ├── text_api.rst
|   |   ├── ticker_api.rst
|   |   ├── tight_bbox_api.rst
|   |   ├── tight_layout_api.rst
|   |   ├── toolkits
|   |   |   ├── axes_grid1.rst
|   |   |   ├── axisartist.rst
|   |   |   ├── mplot3d
|   |   |   |   ├── axes3d.rst
|   |   |   |   ├── faq.rst
|   |   |   |   └── view_angles.rst
|   |   |   └── mplot3d.rst
|   |   ├── transformations.rst
|   |   ├── tri_api.rst
|   |   ├── type1font.rst
|   |   ├── typing_api.rst
|   |   ├── units_api.rst
|   |   └── widgets_api.rst
|   ├── conf.py
|   ├── devel
|   |   ├── MEP
|   |   |   ├── MEP08.rst
|   |   |   ├── MEP09.rst
|   |   |   ├── MEP10.rst
|   |   |   ├── MEP11.rst
|   |   |   ├── MEP12.rst
|   |   |   ├── MEP13.rst
|   |   |   ├── MEP14.rst
|   |   |   ├── MEP15.rst
|   |   |   ├── MEP19.rst
|   |   |   ├── MEP21.rst
|   |   |   ├── MEP22.rst
|   |   |   ├── MEP23.rst
|   |   |   ├── MEP24.rst
|   |   |   ├── MEP25.rst
|   |   |   ├── MEP26.rst
|   |   |   ├── MEP27.rst
|   |   |   ├── MEP28.rst
|   |   |   ├── MEP29.rst
|   |   |   ├── README.rst
|   |   |   ├── index.rst
|   |   |   └── template.rst
|   |   ├── README.txt
|   |   ├── coding_guide.rst
|   |   ├── color_changes.rst
|   |   ├── contributing.rst
|   |   ├── dependencies.rst
|   |   ├── development_setup.rst
|   |   ├── development_workflow.rst
|   |   ├── documenting_mpl.rst
|   |   ├── index.rst
|   |   ├── license.rst
|   |   ├── maintainer_workflow.rst
|   |   ├── min_dep_policy.rst
|   |   ├── release_guide.rst
|   |   ├── style_guide.rst
|   |   ├── testing.rst
|   |   └── triage.rst
|   ├── index.rst
|   ├── sphinxext
|   |   ├── __init__.py
|   |   ├── custom_roles.py
|   |   ├── gallery_order.py
|   |   ├── github.py
|   |   ├── math_symbol_table.py
|   |   ├── missing_references.py
|   |   ├── mock_gui_toolkits.py
|   |   ├── redirect_from.py
|   |   └── skip_deprecated.py
|   ├── thirdpartypackages
|   |   └── index.rst
|   └── users
|       ├── faq
|       |   ├── environment_variables_faq.rst
|       |   ├── howto_faq.rst
|       |   ├── index.rst
|       |   └── troubleshooting_faq.rst
|       ├── generate_credits.py
|       ├── getting_started
|       |   └── index.rst
|       ├── github_stats.rst
|       ├── index.rst
|       ├── installing
|       |   └── index.rst
|       ├── next_whats_new
|       |   ├── 3d_plots_shareview.rst
|       |   ├── README.rst
|       |   ├── auto_minor_tick.rst
|       |   ├── ecdf.rst
|       |   ├── get_suptitle.rst
|       |   ├── mathtext_supports_text.rst
|       |   ├── new_color_spec_tuple.rst
|       |   ├── pie_hatch.rst
|       |   ├── pie_shadow_control.rst
|       |   ├── savefig_bbox_layout.rst
|       |   ├── shadow_shade.rst
|       |   ├── spinesproxyset.rst
|       |   ├── tick_labelfont_param.rst
|       |   ├── updated_mathtext.rst
|       |   └── widget_button_styling.rst
|       ├── next_whats_new.rst
|       ├── prev_whats_new
|       |   ├── changelog.rst
|       |   ├── dflt_style_changes.rst
|       |   ├── github_stats_3.0.0.rst
|       |   ├── github_stats_3.0.1.rst
|       |   ├── github_stats_3.0.2.rst
|       |   ├── github_stats_3.0.3.rst
|       |   ├── github_stats_3.1.0.rst
|       |   ├── github_stats_3.1.1.rst
|       |   ├── github_stats_3.1.2.rst
|       |   ├── github_stats_3.1.3.rst
|       |   ├── github_stats_3.2.0.rst
|       |   ├── github_stats_3.2.1.rst
|       |   ├── github_stats_3.2.2.rst
|       |   ├── github_stats_3.3.0.rst
|       |   ├── github_stats_3.3.1.rst
|       |   ├── github_stats_3.3.2.rst
|       |   ├── github_stats_3.3.3.rst
|       |   ├── github_stats_3.3.4.rst
|       |   ├── github_stats_3.4.0.rst
|       |   ├── github_stats_3.4.1.rst
|       |   ├── github_stats_3.4.2.rst
|       |   ├── github_stats_3.4.3.rst
|       |   ├── github_stats_3.5.0.rst
|       |   ├── github_stats_3.5.1.rst
|       |   ├── github_stats_3.5.2.rst
|       |   ├── github_stats_3.5.3.rst
|       |   ├── github_stats_3.6.0.rst
|       |   ├── github_stats_3.6.1.rst
|       |   ├── github_stats_3.6.2.rst
|       |   ├── github_stats_3.6.3.rst
|       |   ├── github_stats_3.7.0.rst
|       |   ├── whats_new_0.98.4.rst
|       |   ├── whats_new_0.99.rst
|       |   ├── whats_new_1.0.rst
|       |   ├── whats_new_1.1.rst
|       |   ├── whats_new_1.2.2.rst
|       |   ├── whats_new_1.2.rst
|       |   ├── whats_new_1.3.rst
|       |   ├── whats_new_1.4.rst
|       |   ├── whats_new_1.5.rst
|       |   ├── whats_new_2.0.0.rst
|       |   ├── whats_new_2.1.0.rst
|       |   ├── whats_new_2.2.rst
|       |   ├── whats_new_3.0.rst
|       |   ├── whats_new_3.1.0.rst
|       |   ├── whats_new_3.2.0.rst
|       |   ├── whats_new_3.3.0.rst
|       |   ├── whats_new_3.4.0.rst
|       |   ├── whats_new_3.5.0.rst
|       |   ├── whats_new_3.5.2.rst
|       |   ├── whats_new_3.6.0.rst
|       |   └── whats_new_3.7.0.rst
|       ├── project
|       |   ├── citing.rst
|       |   ├── credits.rst
|       |   ├── history.rst
|       |   ├── index.rst
|       |   ├── license.rst
|       |   └── mission.rst
|       ├── release_notes.rst
|       ├── release_notes_next.rst
|       └── resources
|           └── index.rst
├── environment.yml
├── extern
|   ├── agg24-svn
|   |   ├── include
|   |   |   ├── ctrl
|   |   |   ├── platform
|   |   |   |   ├── mac
|   |   |   |   └── win32
|   |   |   └── util
|   |   └── src
|   |       ├── agg_arc.cpp
|   |       ├── agg_arrowhead.cpp
|   |       ├── agg_bezier_arc.cpp
|   |       ├── agg_bspline.cpp
|   |       ├── agg_color_rgba.cpp
|   |       ├── agg_curves.cpp
|   |       ├── agg_embedded_raster_fonts.cpp
|   |       ├── agg_gsv_text.cpp
|   |       ├── agg_image_filters.cpp
|   |       ├── agg_line_aa_basics.cpp
|   |       ├── agg_line_profile_aa.cpp
|   |       ├── agg_rounded_rect.cpp
|   |       ├── agg_sqrt_tables.cpp
|   |       ├── agg_trans_affine.cpp
|   |       ├── agg_trans_double_path.cpp
|   |       ├── agg_trans_single_path.cpp
|   |       ├── agg_trans_warp_magnifier.cpp
|   |       ├── agg_vcgen_bspline.cpp
|   |       ├── agg_vcgen_contour.cpp
|   |       ├── agg_vcgen_dash.cpp
|   |       ├── agg_vcgen_markers_term.cpp
|   |       ├── agg_vcgen_smooth_poly1.cpp
|   |       ├── agg_vcgen_stroke.cpp
|   |       ├── agg_vpgen_clip_polygon.cpp
|   |       ├── agg_vpgen_clip_polyline.cpp
|   |       ├── agg_vpgen_segmentator.cpp
|   |       ├── ctrl
|   |       |   ├── agg_bezier_ctrl.cpp
|   |       |   ├── agg_cbox_ctrl.cpp
|   |       |   ├── agg_gamma_ctrl.cpp
|   |       |   ├── agg_gamma_spline.cpp
|   |       |   ├── agg_polygon_ctrl.cpp
|   |       |   ├── agg_rbox_ctrl.cpp
|   |       |   ├── agg_scale_ctrl.cpp
|   |       |   ├── agg_slider_ctrl.cpp
|   |       |   └── agg_spline_ctrl.cpp
|   |       └── platform
|   |           ├── AmigaOS
|   |           ├── BeOS
|   |           ├── X11
|   |           ├── mac
|   |           ├── sdl
|   |           └── win32
|   └── ttconv
|       ├── pprdrv_tt.cpp
|       ├── pprdrv_tt2.cpp
|       └── ttutil.cpp
├── galleries
|   ├── examples
|   |   ├── README.txt
|   |   ├── animation
|   |   |   ├── README.txt
|   |   |   ├── animate_decay.py
|   |   |   ├── animated_histogram.py
|   |   |   ├── animation_demo.py
|   |   |   ├── bayes_update.py
|   |   |   ├── double_pendulum.py
|   |   |   ├── dynamic_image.py
|   |   |   ├── frame_grabbing_sgskip.py
|   |   |   ├── multiple_axes.py
|   |   |   ├── pause_resume.py
|   |   |   ├── rain.py
|   |   |   ├── random_walk.py
|   |   |   ├── simple_anim.py
|   |   |   ├── simple_scatter.py
|   |   |   ├── strip_chart.py
|   |   |   └── unchained.py
|   |   ├── axes_grid1
|   |   |   ├── README.txt
|   |   |   ├── demo_anchored_direction_arrows.py
|   |   |   ├── demo_axes_divider.py
|   |   |   ├── demo_axes_grid.py
|   |   |   ├── demo_axes_grid2.py
|   |   |   ├── demo_axes_hbox_divider.py
|   |   |   ├── demo_axes_rgb.py
|   |   |   ├── demo_colorbar_of_inset_axes.py
|   |   |   ├── demo_colorbar_with_axes_divider.py
|   |   |   ├── demo_colorbar_with_inset_locator.py
|   |   |   ├── demo_edge_colorbar.py
|   |   |   ├── demo_fixed_size_axes.py
|   |   |   ├── demo_imagegrid_aspect.py
|   |   |   ├── inset_locator_demo.py
|   |   |   ├── inset_locator_demo2.py
|   |   |   ├── make_room_for_ylabel_using_axesgrid.py
|   |   |   ├── parasite_simple.py
|   |   |   ├── parasite_simple2.py
|   |   |   ├── scatter_hist_locatable_axes.py
|   |   |   ├── simple_anchored_artists.py
|   |   |   ├── simple_axes_divider1.py
|   |   |   ├── simple_axes_divider3.py
|   |   |   ├── simple_axesgrid.py
|   |   |   ├── simple_axesgrid2.py
|   |   |   ├── simple_axisline4.py
|   |   |   └── simple_colorbar.py
|   |   ├── axisartist
|   |   |   ├── README.txt
|   |   |   ├── axis_direction.py
|   |   |   ├── demo_axis_direction.py
|   |   |   ├── demo_axisline_style.py
|   |   |   ├── demo_curvelinear_grid.py
|   |   |   ├── demo_curvelinear_grid2.py
|   |   |   ├── demo_floating_axes.py
|   |   |   ├── demo_floating_axis.py
|   |   |   ├── demo_parasite_axes.py
|   |   |   ├── demo_parasite_axes2.py
|   |   |   ├── demo_ticklabel_alignment.py
|   |   |   ├── demo_ticklabel_direction.py
|   |   |   ├── simple_axis_direction01.py
|   |   |   ├── simple_axis_direction03.py
|   |   |   ├── simple_axis_pad.py
|   |   |   ├── simple_axisartist1.py
|   |   |   ├── simple_axisline.py
|   |   |   └── simple_axisline3.py
|   |   ├── color
|   |   |   ├── README.txt
|   |   |   ├── color_by_yvalue.py
|   |   |   ├── color_cycle_default.py
|   |   |   ├── color_demo.py
|   |   |   ├── colorbar_basics.py
|   |   |   ├── colormap_reference.py
|   |   |   ├── custom_cmap.py
|   |   |   ├── named_colors.py
|   |   |   └── set_alpha.py
|   |   ├── event_handling
|   |   |   ├── README.txt
|   |   |   ├── close_event.py
|   |   |   ├── coords_demo.py
|   |   |   ├── cursor_demo.py
|   |   |   ├── data_browser.py
|   |   |   ├── figure_axes_enter_leave.py
|   |   |   ├── ginput_manual_clabel_sgskip.py
|   |   |   ├── image_slices_viewer.py
|   |   |   ├── keypress_demo.py
|   |   |   ├── lasso_demo.py
|   |   |   ├── legend_picking.py
|   |   |   ├── looking_glass.py
|   |   |   ├── path_editor.py
|   |   |   ├── pick_event_demo.py
|   |   |   ├── pick_event_demo2.py
|   |   |   ├── poly_editor.py
|   |   |   ├── pong_sgskip.py
|   |   |   ├── resample.py
|   |   |   ├── timers.py
|   |   |   ├── trifinder_event_demo.py
|   |   |   ├── viewlims.py
|   |   |   └── zoom_window.py
|   |   ├── images_contours_and_fields
|   |   |   ├── README.txt
|   |   |   ├── affine_image.py
|   |   |   ├── barb_demo.py
|   |   |   ├── barcode_demo.py
|   |   |   ├── colormap_interactive_adjustment.py
|   |   |   ├── colormap_normalizations.py
|   |   |   ├── colormap_normalizations_symlognorm.py
|   |   |   ├── contour_corner_mask.py
|   |   |   ├── contour_demo.py
|   |   |   ├── contour_image.py
|   |   |   ├── contour_label_demo.py
|   |   |   ├── contourf_demo.py
|   |   |   ├── contourf_hatching.py
|   |   |   ├── contourf_log.py
|   |   |   ├── contours_in_optimization_demo.py
|   |   |   ├── demo_bboximage.py
|   |   |   ├── figimage_demo.py
|   |   |   ├── image_annotated_heatmap.py
|   |   |   ├── image_antialiasing.py
|   |   |   ├── image_clip_path.py
|   |   |   ├── image_demo.py
|   |   |   ├── image_masked.py
|   |   |   ├── image_nonuniform.py
|   |   |   ├── image_transparency_blend.py
|   |   |   ├── image_zcoord.py
|   |   |   ├── interpolation_methods.py
|   |   |   ├── irregulardatagrid.py
|   |   |   ├── layer_images.py
|   |   |   ├── matshow.py
|   |   |   ├── multi_image.py
|   |   |   ├── pcolor_demo.py
|   |   |   ├── pcolormesh_grids.py
|   |   |   ├── pcolormesh_levels.py
|   |   |   ├── plot_streamplot.py
|   |   |   ├── quadmesh_demo.py
|   |   |   ├── quiver_demo.py
|   |   |   ├── quiver_simple_demo.py
|   |   |   ├── shading_example.py
|   |   |   ├── specgram_demo.py
|   |   |   ├── spy_demos.py
|   |   |   ├── tricontour_demo.py
|   |   |   ├── tricontour_smooth_delaunay.py
|   |   |   ├── tricontour_smooth_user.py
|   |   |   ├── trigradient_demo.py
|   |   |   ├── triinterp_demo.py
|   |   |   ├── tripcolor_demo.py
|   |   |   ├── triplot_demo.py
|   |   |   └── watermark_image.py
|   |   ├── lines_bars_and_markers
|   |   |   ├── README.txt
|   |   |   ├── bar_colors.py
|   |   |   ├── bar_label_demo.py
|   |   |   ├── bar_stacked.py
|   |   |   ├── barchart.py
|   |   |   ├── barh.py
|   |   |   ├── broken_barh.py
|   |   |   ├── capstyle.py
|   |   |   ├── categorical_variables.py
|   |   |   ├── cohere.py
|   |   |   ├── csd_demo.py
|   |   |   ├── curve_error_band.py
|   |   |   ├── errorbar_limits_simple.py
|   |   |   ├── errorbar_subsample.py
|   |   |   ├── eventcollection_demo.py
|   |   |   ├── eventplot_demo.py
|   |   |   ├── fill.py
|   |   |   ├── fill_between_alpha.py
|   |   |   ├── fill_between_demo.py
|   |   |   ├── fill_betweenx_demo.py
|   |   |   ├── filled_step.py
|   |   |   ├── gradient_bar.py
|   |   |   ├── hat_graph.py
|   |   |   ├── horizontal_barchart_distribution.py
|   |   |   ├── joinstyle.py
|   |   |   ├── line_demo_dash_control.py
|   |   |   ├── lines_with_ticks_demo.py
|   |   |   ├── linestyles.py
|   |   |   ├── marker_reference.py
|   |   |   ├── markevery_demo.py
|   |   |   ├── masked_demo.py
|   |   |   ├── multicolored_line.py
|   |   |   ├── multivariate_marker_plot.py
|   |   |   ├── psd_demo.py
|   |   |   ├── scatter_demo2.py
|   |   |   ├── scatter_hist.py
|   |   |   ├── scatter_masked.py
|   |   |   ├── scatter_star_poly.py
|   |   |   ├── scatter_with_legend.py
|   |   |   ├── simple_plot.py
|   |   |   ├── span_regions.py
|   |   |   ├── spectrum_demo.py
|   |   |   ├── stackplot_demo.py
|   |   |   ├── stairs_demo.py
|   |   |   ├── stem_plot.py
|   |   |   ├── step_demo.py
|   |   |   ├── timeline.py
|   |   |   ├── vline_hline_demo.py
|   |   |   └── xcorr_acorr_demo.py
|   |   ├── misc
|   |   |   ├── README.txt
|   |   |   ├── anchored_artists.py
|   |   |   ├── bbox_intersect.py
|   |   |   ├── contour_manual.py
|   |   |   ├── coords_report.py
|   |   |   ├── custom_projection.py
|   |   |   ├── customize_rc.py
|   |   |   ├── demo_agg_filter.py
|   |   |   ├── demo_ribbon_box.py
|   |   |   ├── fig_x.py
|   |   |   ├── fill_spiral.py
|   |   |   ├── findobj_demo.py
|   |   |   ├── font_indexing.py
|   |   |   ├── ftface_props.py
|   |   |   ├── histogram_path.py
|   |   |   ├── hyperlinks_sgskip.py
|   |   |   ├── image_thumbnail_sgskip.py
|   |   |   ├── keyword_plotting.py
|   |   |   ├── logos2.py
|   |   |   ├── multipage_pdf.py
|   |   |   ├── multiprocess_sgskip.py
|   |   |   ├── packed_bubbles.py
|   |   |   ├── patheffect_demo.py
|   |   |   ├── print_stdout_sgskip.py
|   |   |   ├── rasterization_demo.py
|   |   |   ├── set_and_get.py
|   |   |   ├── svg_filter_line.py
|   |   |   ├── svg_filter_pie.py
|   |   |   ├── table_demo.py
|   |   |   ├── tickedstroke_demo.py
|   |   |   ├── transoffset.py
|   |   |   └── zorder_demo.py
|   |   ├── mplot3d
|   |   |   ├── 2dcollections3d.py
|   |   |   ├── 3d_bars.py
|   |   |   ├── README.txt
|   |   |   ├── bars3d.py
|   |   |   ├── box3d.py
|   |   |   ├── contour3d.py
|   |   |   ├── contour3d_2.py
|   |   |   ├── contour3d_3.py
|   |   |   ├── contourf3d.py
|   |   |   ├── contourf3d_2.py
|   |   |   ├── custom_shaded_3d_surface.py
|   |   |   ├── errorbar3d.py
|   |   |   ├── hist3d.py
|   |   |   ├── lines3d.py
|   |   |   ├── lorenz_attractor.py
|   |   |   ├── mixed_subplots.py
|   |   |   ├── offset.py
|   |   |   ├── pathpatch3d.py
|   |   |   ├── polys3d.py
|   |   |   ├── projections.py
|   |   |   ├── quiver3d.py
|   |   |   ├── rotate_axes3d_sgskip.py
|   |   |   ├── scatter3d.py
|   |   |   ├── stem3d_demo.py
|   |   |   ├── subplot3d.py
|   |   |   ├── surface3d.py
|   |   |   ├── surface3d_2.py
|   |   |   ├── surface3d_3.py
|   |   |   ├── surface3d_radial.py
|   |   |   ├── text3d.py
|   |   |   ├── tricontour3d.py
|   |   |   ├── tricontourf3d.py
|   |   |   ├── trisurf3d.py
|   |   |   ├── trisurf3d_2.py
|   |   |   ├── view_planes_3d.py
|   |   |   ├── voxels.py
|   |   |   ├── voxels_numpy_logo.py
|   |   |   ├── voxels_rgb.py
|   |   |   ├── voxels_torus.py
|   |   |   ├── wire3d.py
|   |   |   ├── wire3d_animation_sgskip.py
|   |   |   └── wire3d_zero_stride.py
|   |   ├── pie_and_polar_charts
|   |   |   ├── README.txt
|   |   |   ├── bar_of_pie.py
|   |   |   ├── nested_pie.py
|   |   |   ├── pie_and_donut_labels.py
|   |   |   ├── pie_features.py
|   |   |   ├── polar_bar.py
|   |   |   ├── polar_demo.py
|   |   |   ├── polar_error_caps.py
|   |   |   ├── polar_legend.py
|   |   |   └── polar_scatter.py
|   |   ├── pyplots
|   |   |   ├── README.txt
|   |   |   ├── axline.py
|   |   |   ├── pyplot_simple.py
|   |   |   ├── pyplot_text.py
|   |   |   ├── pyplot_three.py
|   |   |   └── pyplot_two_subplots.py
|   |   ├── scales
|   |   |   ├── README.txt
|   |   |   ├── asinh_demo.py
|   |   |   ├── aspect_loglog.py
|   |   |   ├── custom_scale.py
|   |   |   ├── log_bar.py
|   |   |   ├── log_demo.py
|   |   |   ├── logit_demo.py
|   |   |   ├── power_norm.py
|   |   |   ├── scales.py
|   |   |   ├── semilogx_demo.py
|   |   |   └── symlog_demo.py
|   |   ├── shapes_and_collections
|   |   |   ├── README.txt
|   |   |   ├── arrow_guide.py
|   |   |   ├── artist_reference.py
|   |   |   ├── collections.py
|   |   |   ├── compound_path.py
|   |   |   ├── dolphin.py
|   |   |   ├── donut.py
|   |   |   ├── ellipse_collection.py
|   |   |   ├── ellipse_demo.py
|   |   |   ├── fancybox_demo.py
|   |   |   ├── hatch_demo.py
|   |   |   ├── hatch_style_reference.py
|   |   |   ├── line_collection.py
|   |   |   ├── patch_collection.py
|   |   |   ├── path_patch.py
|   |   |   ├── quad_bezier.py
|   |   |   └── scatter.py
|   |   ├── showcase
|   |   |   ├── README.txt
|   |   |   ├── anatomy.py
|   |   |   ├── firefox.py
|   |   |   ├── integral.py
|   |   |   ├── mandelbrot.py
|   |   |   ├── stock_prices.py
|   |   |   └── xkcd.py
|   |   ├── specialty_plots
|   |   |   ├── README.txt
|   |   |   ├── advanced_hillshading.py
|   |   |   ├── anscombe.py
|   |   |   ├── hinton_demo.py
|   |   |   ├── leftventricle_bullseye.py
|   |   |   ├── mri_demo.py
|   |   |   ├── mri_with_eeg.py
|   |   |   ├── radar_chart.py
|   |   |   ├── sankey_basics.py
|   |   |   ├── sankey_links.py
|   |   |   ├── sankey_rankine.py
|   |   |   ├── skewt.py
|   |   |   └── topographic_hillshading.py
|   |   ├── spines
|   |   |   ├── README.txt
|   |   |   ├── centered_spines_with_arrows.py
|   |   |   ├── multiple_yaxis_with_spines.py
|   |   |   ├── spine_placement_demo.py
|   |   |   ├── spines.py
|   |   |   └── spines_dropped.py
|   |   ├── statistics
|   |   |   ├── README.txt
|   |   |   ├── barchart_demo.py
|   |   |   ├── boxplot.py
|   |   |   ├── boxplot_color.py
|   |   |   ├── boxplot_demo.py
|   |   |   ├── boxplot_vs_violin.py
|   |   |   ├── bxp.py
|   |   |   ├── confidence_ellipse.py
|   |   |   ├── customized_violin.py
|   |   |   ├── errorbar.py
|   |   |   ├── errorbar_features.py
|   |   |   ├── errorbar_limits.py
|   |   |   ├── errorbars_and_boxes.py
|   |   |   ├── hexbin_demo.py
|   |   |   ├── hist.py
|   |   |   ├── histogram_cumulative.py
|   |   |   ├── histogram_features.py
|   |   |   ├── histogram_histtypes.py
|   |   |   ├── histogram_multihist.py
|   |   |   ├── multiple_histograms_side_by_side.py
|   |   |   ├── time_series_histogram.py
|   |   |   └── violinplot.py
|   |   ├── style_sheets
|   |   |   ├── README.txt
|   |   |   ├── bmh.py
|   |   |   ├── dark_background.py
|   |   |   ├── fivethirtyeight.py
|   |   |   ├── ggplot.py
|   |   |   ├── grayscale.py
|   |   |   ├── plot_solarizedlight2.py
|   |   |   └── style_sheets_reference.py
|   |   ├── subplots_axes_and_figures
|   |   |   ├── README.txt
|   |   |   ├── align_labels_demo.py
|   |   |   ├── auto_subplots_adjust.py
|   |   |   ├── axes_box_aspect.py
|   |   |   ├── axes_demo.py
|   |   |   ├── axes_margins.py
|   |   |   ├── axes_props.py
|   |   |   ├── axes_zoom_effect.py
|   |   |   ├── axhspan_demo.py
|   |   |   ├── axis_equal_demo.py
|   |   |   ├── axis_labels_demo.py
|   |   |   ├── broken_axis.py
|   |   |   ├── custom_figure_class.py
|   |   |   ├── demo_constrained_layout.py
|   |   |   ├── demo_tight_layout.py
|   |   |   ├── fahrenheit_celsius_scales.py
|   |   |   ├── figure_size_units.py
|   |   |   ├── figure_title.py
|   |   |   ├── ganged_plots.py
|   |   |   ├── geo_demo.py
|   |   |   ├── gridspec_and_subplots.py
|   |   |   ├── gridspec_multicolumn.py
|   |   |   ├── gridspec_nested.py
|   |   |   ├── invert_axes.py
|   |   |   ├── multiple_figs_demo.py
|   |   |   ├── secondary_axis.py
|   |   |   ├── share_axis_lims_views.py
|   |   |   ├── shared_axis_demo.py
|   |   |   ├── subfigures.py
|   |   |   ├── subplot.py
|   |   |   ├── subplots_adjust.py
|   |   |   ├── subplots_demo.py
|   |   |   ├── two_scales.py
|   |   |   └── zoom_inset_axes.py
|   |   ├── text_labels_and_annotations
|   |   |   ├── README.txt
|   |   |   ├── accented_text.py
|   |   |   ├── align_ylabels.py
|   |   |   ├── angle_annotation.py
|   |   |   ├── angles_on_bracket_arrows.py
|   |   |   ├── annotate_transform.py
|   |   |   ├── annotation_basic.py
|   |   |   ├── annotation_demo.py
|   |   |   ├── annotation_polar.py
|   |   |   ├── arrow_demo.py
|   |   |   ├── autowrap.py
|   |   |   ├── custom_legends.py
|   |   |   ├── date.py
|   |   |   ├── demo_annotation_box.py
|   |   |   ├── demo_text_path.py
|   |   |   ├── demo_text_rotation_mode.py
|   |   |   ├── dfrac_demo.py
|   |   |   ├── engineering_formatter.py
|   |   |   ├── fancyarrow_demo.py
|   |   |   ├── fancytextbox_demo.py
|   |   |   ├── figlegend_demo.py
|   |   |   ├── font_family_rc.py
|   |   |   ├── font_file.py
|   |   |   ├── font_table.py
|   |   |   ├── fonts_demo.py
|   |   |   ├── fonts_demo_kw.py
|   |   |   ├── label_subplots.py
|   |   |   ├── legend.py
|   |   |   ├── legend_demo.py
|   |   |   ├── line_with_text.py
|   |   |   ├── mathtext_asarray.py
|   |   |   ├── mathtext_demo.py
|   |   |   ├── mathtext_examples.py
|   |   |   ├── mathtext_fontfamily_example.py
|   |   |   ├── multiline.py
|   |   |   ├── placing_text_boxes.py
|   |   |   ├── rainbow_text.py
|   |   |   ├── stix_fonts_demo.py
|   |   |   ├── tex_demo.py
|   |   |   ├── text_alignment.py
|   |   |   ├── text_commands.py
|   |   |   ├── text_fontdict.py
|   |   |   ├── text_rotation_relative_to_line.py
|   |   |   ├── titles_demo.py
|   |   |   ├── unicode_minus.py
|   |   |   ├── usetex_baseline_test.py
|   |   |   ├── usetex_fonteffects.py
|   |   |   └── watermark_text.py
|   |   ├── ticks
|   |   |   ├── README.txt
|   |   |   ├── auto_ticks.py
|   |   |   ├── centered_ticklabels.py
|   |   |   ├── colorbar_tick_labelling_demo.py
|   |   |   ├── custom_ticker1.py
|   |   |   ├── date_concise_formatter.py
|   |   |   ├── date_demo_convert.py
|   |   |   ├── date_demo_rrule.py
|   |   |   ├── date_formatters_locators.py
|   |   |   ├── date_index_formatter.py
|   |   |   ├── date_precision_and_epochs.py
|   |   |   ├── dollar_ticks.py
|   |   |   ├── fig_axes_customize_simple.py
|   |   |   ├── major_minor_demo.py
|   |   |   ├── scalarformatter.py
|   |   |   ├── tick-formatters.py
|   |   |   ├── tick-locators.py
|   |   |   ├── tick_label_right.py
|   |   |   ├── tick_labels_from_values.py
|   |   |   ├── tick_xlabel_top.py
|   |   |   ├── ticklabels_rotation.py
|   |   |   └── ticks_too_many.py
|   |   ├── units
|   |   |   ├── README.txt
|   |   |   ├── annotate_with_units.py
|   |   |   ├── artist_tests.py
|   |   |   ├── bar_demo2.py
|   |   |   ├── bar_unit_demo.py
|   |   |   ├── basic_units.py
|   |   |   ├── ellipse_with_units.py
|   |   |   ├── evans_test.py
|   |   |   ├── radian_demo.py
|   |   |   ├── units_sample.py
|   |   |   └── units_scatter.py
|   |   ├── user_interfaces
|   |   |   ├── README.txt
|   |   |   ├── canvasagg.py
|   |   |   ├── embedding_in_gtk3_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk3_sgskip.py
|   |   |   ├── embedding_in_gtk4_panzoom_sgskip.py
|   |   |   ├── embedding_in_gtk4_sgskip.py
|   |   |   ├── embedding_in_qt_sgskip.py
|   |   |   ├── embedding_in_tk_sgskip.py
|   |   |   ├── embedding_in_wx2_sgskip.py
|   |   |   ├── embedding_in_wx3_sgskip.py
|   |   |   ├── embedding_in_wx4_sgskip.py
|   |   |   ├── embedding_in_wx5_sgskip.py
|   |   |   ├── embedding_webagg_sgskip.py
|   |   |   ├── fourier_demo_wx_sgskip.py
|   |   |   ├── gtk3_spreadsheet_sgskip.py
|   |   |   ├── gtk4_spreadsheet_sgskip.py
|   |   |   ├── images
|   |   |   ├── mathtext_wx_sgskip.py
|   |   |   ├── mpl_with_glade3_sgskip.py
|   |   |   ├── mplcvd.py
|   |   |   ├── pylab_with_gtk3_sgskip.py
|   |   |   ├── pylab_with_gtk4_sgskip.py
|   |   |   ├── svg_histogram_sgskip.py
|   |   |   ├── svg_tooltip_sgskip.py
|   |   |   ├── toolmanager_sgskip.py
|   |   |   ├── web_application_server_sgskip.py
|   |   |   └── wxcursor_demo_sgskip.py
|   |   ├── userdemo
|   |   |   ├── README.txt
|   |   |   ├── annotate_explain.py
|   |   |   ├── annotate_simple_coord02.py
|   |   |   ├── annotate_text_arrow.py
|   |   |   ├── connect_simple01.py
|   |   |   ├── connectionstyle_demo.py
|   |   |   ├── custom_boxstyle01.py
|   |   |   ├── demo_gridspec01.py
|   |   |   ├── demo_gridspec03.py
|   |   |   ├── demo_gridspec06.py
|   |   |   ├── pgf_fonts.py
|   |   |   ├── pgf_preamble_sgskip.py
|   |   |   ├── pgf_texsystem.py
|   |   |   ├── simple_annotate01.py
|   |   |   ├── simple_legend01.py
|   |   |   └── simple_legend02.py
|   |   └── widgets
|   |       ├── README.txt
|   |       ├── annotated_cursor.py
|   |       ├── buttons.py
|   |       ├── check_buttons.py
|   |       ├── cursor.py
|   |       ├── lasso_selector_demo_sgskip.py
|   |       ├── menu.py
|   |       ├── mouse_cursor.py
|   |       ├── multicursor.py
|   |       ├── polygon_selector_demo.py
|   |       ├── polygon_selector_simple.py
|   |       ├── radio_buttons.py
|   |       ├── range_slider.py
|   |       ├── rectangle_selector.py
|   |       ├── slider_demo.py
|   |       ├── slider_snap_demo.py
|   |       ├── span_selector.py
|   |       └── textbox.py
|   ├── plot_types
|   |   ├── 3D
|   |   |   ├── README.rst
|   |   |   ├── scatter3d_simple.py
|   |   |   ├── surface3d_simple.py
|   |   |   ├── trisurf3d_simple.py
|   |   |   ├── voxels_simple.py
|   |   |   └── wire3d_simple.py
|   |   ├── README.rst
|   |   ├── arrays
|   |   |   ├── README.rst
|   |   |   ├── barbs.py
|   |   |   ├── contour.py
|   |   |   ├── contourf.py
|   |   |   ├── imshow.py
|   |   |   ├── pcolormesh.py
|   |   |   ├── quiver.py
|   |   |   └── streamplot.py
|   |   ├── basic
|   |   |   ├── README.rst
|   |   |   ├── bar.py
|   |   |   ├── fill_between.py
|   |   |   ├── plot.py
|   |   |   ├── scatter_plot.py
|   |   |   ├── stackplot.py
|   |   |   ├── stem.py
|   |   |   └── step.py
|   |   ├── stats
|   |   |   ├── README.rst
|   |   |   ├── boxplot_plot.py
|   |   |   ├── ecdf.py
|   |   |   ├── errorbar_plot.py
|   |   |   ├── eventplot.py
|   |   |   ├── hexbin.py
|   |   |   ├── hist2d.py
|   |   |   ├── hist_plot.py
|   |   |   ├── pie.py
|   |   |   └── violin.py
|   |   └── unstructured
|   |       ├── README.rst
|   |       ├── tricontour.py
|   |       ├── tricontourf.py
|   |       ├── tripcolor.py
|   |       └── triplot.py
|   ├── tutorials
|   |   ├── artists.py
|   |   ├── images.py
|   |   ├── index.rst
|   |   ├── lifecycle.py
|   |   └── pyplot.py
|   └── users_explain
|       ├── animations
|       |   ├── README.txt
|       |   ├── animations.py
|       |   └── blitting.py
|       ├── artists
|       |   ├── color_cycle.py
|       |   ├── imshow_extent.py
|       |   ├── index.rst
|       |   ├── patheffects_guide.py
|       |   ├── paths.py
|       |   ├── performance.rst
|       |   └── transforms_tutorial.py
|       ├── axes
|       |   ├── arranging_axes.py
|       |   ├── autoscale.py
|       |   ├── colorbar_placement.py
|       |   ├── constrainedlayout_guide.py
|       |   ├── index.rst
|       |   ├── legend_guide.py
|       |   ├── mosaic.py
|       |   └── tight_layout_guide.py
|       ├── axis
|       |   └── index.rst
|       ├── colors
|       |   ├── README.txt
|       |   ├── colorbar_only.py
|       |   ├── colormap-manipulation.py
|       |   ├── colormapnorms.py
|       |   ├── colormaps.py
|       |   └── colors.py
|       ├── customizing.py
|       ├── figure
|       |   ├── api_interfaces.rst
|       |   ├── backends.rst
|       |   ├── event_handling.rst
|       |   ├── index.rst
|       |   ├── interactive.rst
|       |   ├── interactive_guide.rst
|       |   └── writing_a_backend_pyplot_interface.rst
|       ├── index.rst
|       ├── quick_start.py
|       ├── text
|       |   ├── README.txt
|       |   ├── annotations.py
|       |   ├── fonts.py
|       |   ├── mathtext.py
|       |   ├── pgf.py
|       |   ├── text_intro.py
|       |   ├── text_props.py
|       |   └── usetex.py
|       └── toolkits
|           ├── axes_grid.rst
|           ├── axisartist.rst
|           ├── index.rst
|           └── mplot3d.rst
├── lib
|   ├── matplotlib
|   |   ├── __init__.py
|   |   ├── _afm.py
|   |   ├── _animation_data.py
|   |   ├── _api
|   |   |   ├── __init__.py
|   |   |   └── deprecation.py
|   |   ├── _blocking_input.py
|   |   ├── _cm.py
|   |   ├── _cm_listed.py
|   |   ├── _color_data.py
|   |   ├── _constrained_layout.py
|   |   ├── _docstring.py
|   |   ├── _enums.py
|   |   ├── _fontconfig_pattern.py
|   |   ├── _internal_utils.py
|   |   ├── _layoutgrid.py
|   |   ├── _mathtext.py
|   |   ├── _mathtext_data.py
|   |   ├── _pylab_helpers.py
|   |   ├── _text_helpers.py
|   |   ├── _tight_bbox.py
|   |   ├── _tight_layout.py
|   |   ├── _type1font.py
|   |   ├── animation.py
|   |   ├── artist.py
|   |   ├── axes
|   |   |   ├── __init__.py
|   |   |   ├── _axes.py
|   |   |   ├── _base.py
|   |   |   └── _secondary_axes.py
|   |   ├── axis.py
|   |   ├── backend_bases.py
|   |   ├── backend_managers.py
|   |   ├── backend_tools.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── _backend_gtk.py
|   |   |   ├── _backend_pdf_ps.py
|   |   |   ├── _backend_tk.py
|   |   |   ├── backend_agg.py
|   |   |   ├── backend_cairo.py
|   |   |   ├── backend_gtk3.py
|   |   |   ├── backend_gtk3agg.py
|   |   |   ├── backend_gtk3cairo.py
|   |   |   ├── backend_gtk4.py
|   |   |   ├── backend_gtk4agg.py
|   |   |   ├── backend_gtk4cairo.py
|   |   |   ├── backend_macosx.py
|   |   |   ├── backend_mixed.py
|   |   |   ├── backend_nbagg.py
|   |   |   ├── backend_pdf.py
|   |   |   ├── backend_pgf.py
|   |   |   ├── backend_ps.py
|   |   |   ├── backend_qt.py
|   |   |   ├── backend_qt5.py
|   |   |   ├── backend_qt5agg.py
|   |   |   ├── backend_qt5cairo.py
|   |   |   ├── backend_qtagg.py
|   |   |   ├── backend_qtcairo.py
|   |   |   ├── backend_svg.py
|   |   |   ├── backend_template.py
|   |   |   ├── backend_tkagg.py
|   |   |   ├── backend_tkcairo.py
|   |   |   ├── backend_webagg.py
|   |   |   ├── backend_webagg_core.py
|   |   |   ├── backend_wx.py
|   |   |   ├── backend_wxagg.py
|   |   |   ├── backend_wxcairo.py
|   |   |   ├── qt_compat.py
|   |   |   ├── qt_editor
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _formlayout.py
|   |   |   |   └── figureoptions.py
|   |   |   └── web_backend
|   |   |       ├── .eslintrc.js
|   |   |       ├── all_figures.html
|   |   |       ├── css
|   |   |       ├── ipython_inline_figure.html
|   |   |       ├── js
|   |   |       └── single_figure.html
|   |   ├── bezier.py
|   |   ├── category.py
|   |   ├── cbook.py
|   |   ├── cm.py
|   |   ├── collections.py
|   |   ├── colorbar.py
|   |   ├── colors.py
|   |   ├── container.py
|   |   ├── contour.py
|   |   ├── dates.py
|   |   ├── dviread.py
|   |   ├── figure.py
|   |   ├── font_manager.py
|   |   ├── gridspec.py
|   |   ├── hatch.py
|   |   ├── image.py
|   |   ├── layout_engine.py
|   |   ├── legend.py
|   |   ├── legend_handler.py
|   |   ├── lines.py
|   |   ├── markers.py
|   |   ├── mathtext.py
|   |   ├── mlab.py
|   |   ├── mpl-data
|   |   |   ├── fonts
|   |   |   |   ├── afm
|   |   |   |   ├── pdfcorefonts
|   |   |   |   └── ttf
|   |   |   ├── images
|   |   |   ├── plot_directive
|   |   |   |   └── plot_directive.css
|   |   |   ├── sample_data
|   |   |   |   ├── README.txt
|   |   |   |   └── axes_grid
|   |   |   └── stylelib
|   |   ├── offsetbox.py
|   |   ├── patches.py
|   |   ├── path.py
|   |   ├── patheffects.py
|   |   ├── projections
|   |   |   ├── __init__.py
|   |   |   ├── geo.py
|   |   |   └── polar.py
|   |   ├── pylab.py
|   |   ├── pyplot.py
|   |   ├── quiver.py
|   |   ├── rcsetup.py
|   |   ├── sankey.py
|   |   ├── scale.py
|   |   ├── sphinxext
|   |   |   ├── __init__.py
|   |   |   ├── mathmpl.py
|   |   |   └── plot_directive.py
|   |   ├── spines.py
|   |   ├── stackplot.py
|   |   ├── streamplot.py
|   |   ├── style
|   |   |   ├── __init__.py
|   |   |   └── core.py
|   |   ├── table.py
|   |   ├── testing
|   |   |   ├── __init__.py
|   |   |   ├── _markers.py
|   |   |   ├── compare.py
|   |   |   ├── conftest.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── jpl_units
|   |   |   |   ├── Duration.py
|   |   |   |   ├── Epoch.py
|   |   |   |   ├── EpochConverter.py
|   |   |   |   ├── StrConverter.py
|   |   |   |   ├── UnitDbl.py
|   |   |   |   ├── UnitDblConverter.py
|   |   |   |   ├── UnitDblFormatter.py
|   |   |   |   └── __init__.py
|   |   |   └── widgets.py
|   |   ├── tests
|   |   |   ├── __init__.py
|   |   |   ├── baseline_images
|   |   |   |   ├── dviread
|   |   |   |   ├── pngsuite
|   |   |   |   ├── test_agg
|   |   |   |   ├── test_agg_filter
|   |   |   |   ├── test_arrow_patches
|   |   |   |   ├── test_artist
|   |   |   |   ├── test_axes
|   |   |   |   ├── test_backend_pdf
|   |   |   |   ├── test_backend_pgf
|   |   |   |   ├── test_backend_ps
|   |   |   |   ├── test_backend_svg
|   |   |   |   ├── test_bbox_tight
|   |   |   |   ├── test_collections
|   |   |   |   ├── test_colorbar
|   |   |   |   ├── test_colors
|   |   |   |   ├── test_compare_images
|   |   |   |   ├── test_constrainedlayout
|   |   |   |   ├── test_contour
|   |   |   |   ├── test_dates
|   |   |   |   ├── test_figure
|   |   |   |   ├── test_image
|   |   |   |   ├── test_legend
|   |   |   |   ├── test_lines
|   |   |   |   ├── test_mathtext
|   |   |   |   ├── test_offsetbox
|   |   |   |   ├── test_patches
|   |   |   |   ├── test_path
|   |   |   |   ├── test_patheffects
|   |   |   |   ├── test_png
|   |   |   |   ├── test_polar
|   |   |   |   ├── test_quiver
|   |   |   |   ├── test_scale
|   |   |   |   ├── test_simplification
|   |   |   |   ├── test_skew
|   |   |   |   ├── test_spines
|   |   |   |   ├── test_streamplot
|   |   |   |   ├── test_subplots
|   |   |   |   ├── test_table
|   |   |   |   ├── test_text
|   |   |   |   ├── test_tightlayout
|   |   |   |   ├── test_transforms
|   |   |   |   ├── test_triangulation
|   |   |   |   ├── test_ttconv
|   |   |   |   ├── test_units
|   |   |   |   ├── test_usetex
|   |   |   |   └── test_widgets
|   |   |   ├── conftest.py
|   |   |   ├── test_afm.py
|   |   |   ├── test_agg.py
|   |   |   ├── test_agg_filter.py
|   |   |   ├── test_animation.py
|   |   |   ├── test_api.py
|   |   |   ├── test_arrow_patches.py
|   |   |   ├── test_artist.py
|   |   |   ├── test_axes.py
|   |   |   ├── test_backend_bases.py
|   |   |   ├── test_backend_cairo.py
|   |   |   ├── test_backend_gtk3.py
|   |   |   ├── test_backend_macosx.py
|   |   |   ├── test_backend_nbagg.py
|   |   |   ├── test_backend_pdf.py
|   |   |   ├── test_backend_pgf.py
|   |   |   ├── test_backend_ps.py
|   |   |   ├── test_backend_qt.py
|   |   |   ├── test_backend_svg.py
|   |   |   ├── test_backend_template.py
|   |   |   ├── test_backend_tk.py
|   |   |   ├── test_backend_tools.py
|   |   |   ├── test_backend_webagg.py
|   |   |   ├── test_backends_interactive.py
|   |   |   ├── test_basic.py
|   |   |   ├── test_bbox_tight.py
|   |   |   ├── test_category.py
|   |   |   ├── test_cbook.py
|   |   |   ├── test_collections.py
|   |   |   ├── test_colorbar.py
|   |   |   ├── test_colors.py
|   |   |   ├── test_compare_images.py
|   |   |   ├── test_constrainedlayout.py
|   |   |   ├── test_container.py
|   |   |   ├── test_contour.py
|   |   |   ├── test_cycles.py
|   |   |   ├── test_dates.py
|   |   |   ├── test_determinism.py
|   |   |   ├── test_doc.py
|   |   |   ├── test_dviread.py
|   |   |   ├── test_figure.py
|   |   |   ├── test_font_manager.py
|   |   |   ├── test_fontconfig_pattern.py
|   |   |   ├── test_ft2font.py
|   |   |   ├── test_getattr.py
|   |   |   ├── test_gridspec.py
|   |   |   ├── test_image.py
|   |   |   ├── test_legend.py
|   |   |   ├── test_lines.py
|   |   |   ├── test_marker.py
|   |   |   ├── test_mathtext.py
|   |   |   ├── test_matplotlib.py
|   |   |   ├── test_mlab.py
|   |   |   ├── test_offsetbox.py
|   |   |   ├── test_patches.py
|   |   |   ├── test_path.py
|   |   |   ├── test_patheffects.py
|   |   |   ├── test_pickle.py
|   |   |   ├── test_png.py
|   |   |   ├── test_polar.py
|   |   |   ├── test_preprocess_data.py
|   |   |   ├── test_pyplot.py
|   |   |   ├── test_quiver.py
|   |   |   ├── test_rcparams.py
|   |   |   ├── test_sankey.py
|   |   |   ├── test_scale.py
|   |   |   ├── test_simplification.py
|   |   |   ├── test_skew.py
|   |   |   ├── test_sphinxext.py
|   |   |   ├── test_spines.py
|   |   |   ├── test_streamplot.py
|   |   |   ├── test_style.py
|   |   |   ├── test_subplots.py
|   |   |   ├── test_table.py
|   |   |   ├── test_testing.py
|   |   |   ├── test_texmanager.py
|   |   |   ├── test_text.py
|   |   |   ├── test_textpath.py
|   |   |   ├── test_ticker.py
|   |   |   ├── test_tightlayout.py
|   |   |   ├── test_transforms.py
|   |   |   ├── test_triangulation.py
|   |   |   ├── test_ttconv.py
|   |   |   ├── test_type1font.py
|   |   |   ├── test_units.py
|   |   |   ├── test_usetex.py
|   |   |   ├── test_widgets.py
|   |   |   └── tinypages
|   |   |       ├── README.md
|   |   |       ├── _static
|   |   |       ├── conf.py
|   |   |       ├── included_plot_21.rst
|   |   |       ├── index.rst
|   |   |       ├── range4.py
|   |   |       ├── range6.py
|   |   |       └── some_plots.rst
|   |   ├── texmanager.py
|   |   ├── text.py
|   |   ├── textpath.py
|   |   ├── ticker.py
|   |   ├── transforms.py
|   |   ├── tri
|   |   |   ├── __init__.py
|   |   |   ├── _triangulation.py
|   |   |   ├── _tricontour.py
|   |   |   ├── _trifinder.py
|   |   |   ├── _triinterpolate.py
|   |   |   ├── _tripcolor.py
|   |   |   ├── _triplot.py
|   |   |   ├── _trirefine.py
|   |   |   ├── _tritools.py
|   |   |   ├── triangulation.py
|   |   |   ├── tricontour.py
|   |   |   ├── trifinder.py
|   |   |   ├── triinterpolate.py
|   |   |   ├── tripcolor.py
|   |   |   ├── triplot.py
|   |   |   ├── trirefine.py
|   |   |   └── tritools.py
|   |   ├── typing.py
|   |   ├── units.py
|   |   └── widgets.py
|   ├── mpl_toolkits
|   |   ├── __init__.py
|   |   ├── axes_grid1
|   |   |   ├── __init__.py
|   |   |   ├── anchored_artists.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axes_size.py
|   |   |   ├── inset_locator.py
|   |   |   ├── mpl_axes.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       └── test_axes_grid1.py
|   |   ├── axisartist
|   |   |   ├── __init__.py
|   |   |   ├── angle_helper.py
|   |   |   ├── axes_divider.py
|   |   |   ├── axes_grid.py
|   |   |   ├── axes_rgb.py
|   |   |   ├── axis_artist.py
|   |   |   ├── axisline_style.py
|   |   |   ├── axislines.py
|   |   |   ├── floating_axes.py
|   |   |   ├── grid_finder.py
|   |   |   ├── grid_helper_curvelinear.py
|   |   |   ├── parasite_axes.py
|   |   |   └── tests
|   |   |       ├── __init__.py
|   |   |       ├── baseline_images
|   |   |       ├── conftest.py
|   |   |       ├── test_angle_helper.py
|   |   |       ├── test_axis_artist.py
|   |   |       ├── test_axislines.py
|   |   |       ├── test_floating_axes.py
|   |   |       ├── test_grid_finder.py
|   |   |       └── test_grid_helper_curvelinear.py
|   |   └── mplot3d
|   |       ├── __init__.py
|   |       ├── art3d.py
|   |       ├── axes3d.py
|   |       ├── axis3d.py
|   |       ├── proj3d.py
|   |       └── tests
|   |           ├── __init__.py
|   |           ├── baseline_images
|   |           ├── conftest.py
|   |           ├── test_art3d.py
|   |           ├── test_axes3d.py
|   |           └── test_legend3d.py
|   └── pylab.py
├── requirements
|   ├── dev
|   |   └── dev-requirements.txt
|   ├── doc
|   |   └── doc-requirements.txt
|   └── testing
|       ├── all.txt
|       ├── extra.txt
|       ├── flake8.txt
|       ├── minver.txt
|       └── mypy.txt
├── setup.py
├── setupext.py
├── src
|   ├── _backend_agg.cpp
|   ├── _backend_agg_wrapper.cpp
|   ├── _c_internal_utils.c
|   ├── _image_wrapper.cpp
|   ├── _path_wrapper.cpp
|   ├── _qhull_wrapper.cpp
|   ├── _tkagg.cpp
|   ├── _ttconv.cpp
|   ├── checkdep_freetype2.c
|   ├── doc
|   ├── ft2font.cpp
|   ├── ft2font_wrapper.cpp
|   ├── py_converters.cpp
|   └── tri
|       ├── _tri.cpp
|       └── _tri_wrapper.cpp
└── tools
    ├── README.txt
    ├── boilerplate.py
    ├── cache_zenodo_svg.py
    ├── check_typehints.py
    ├── create_DejaVuDisplay.sh
    ├── embed_js.py
    ├── gh_api.py
    ├── github_stats.py
    ├── make_icons.py
    ├── memleak.py
    ├── run_examples.py
    ├── subset.py
    ├── triage_tests.py
    └── visualize_tests.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: [ENH]: Add get/set_antialiased to Text objects

Description: ### Problem

Currently, Text objects always retrieve their antialiasing state via the global rcParams["text.antialias"], unlike other artists for which this can be configured on a per-artist basis via `set_antialiased` (and read via `set_antialiased`).

### Proposed solution

Add similar getters/setters on Text objects (also adjusting Annotations accordingly, if needed) and use that info in the drawing stage.

Should be relatively easy to implement, except that the slight fiddling needed with backends requires some understanding of backend code (I think we need to replace the access to `rcParams["text.antialiased"]` by going through the GraphicsContext state).

Patch information:
diff --git a/lib/matplotlib/backends/backend_agg.py b/lib/matplotlib/backends/backend_agg.py
index 7d038a998f..1e43736fd9 100644
--- a/lib/matplotlib/backends/backend_agg.py
+++ b/lib/matplotlib/backends/backend_agg.py
@@ -206,7 +206,7 @@ class RendererAgg(RendererBase):
         # space) in the following call to draw_text_image).
         font.set_text(s, 0, flags=get_hinting_flag())
         font.draw_glyphs_to_bitmap(
-            antialiased=mpl.rcParams['text.antialiased'])
+            antialiased=bool(gc.get_antialiased()))
         d = font.get_descent() / 64.0
         # The descent needs to be adjusted for the angle.
         xo, yo = font.get_bitmap_offset()
diff --git a/lib/matplotlib/backends/backend_cairo.py b/lib/matplotlib/backends/backend_cairo.py
index 9ccadcdf1c..7f1888b4dd 100644
--- a/lib/matplotlib/backends/backend_cairo.py
+++ b/lib/matplotlib/backends/backend_cairo.py
@@ -205,7 +205,7 @@ class RendererCairo(RendererBase):
             ctx.set_font_size(self.points_to_pixels(prop.get_size_in_points()))
             opts = cairo.FontOptions()
             opts.set_antialias(
-                cairo.ANTIALIAS_DEFAULT if mpl.rcParams["text.antialiased"]
+                cairo.ANTIALIAS_DEFAULT if gc.get_antialiased()
                 else cairo.ANTIALIAS_NONE)
             ctx.set_font_options(opts)
             if angle:
diff --git a/lib/matplotlib/text.py b/lib/matplotlib/text.py
index 4591316cf9..285d06960f 100644
--- a/lib/matplotlib/text.py
+++ b/lib/matplotlib/text.py
@@ -167,6 +167,7 @@ class Text(Artist):
         transform_rotates_text=False,
         linespacing=None,
         rotation_mode=None,
+        antialiased=None,
     ):
         self.set_text(text)
         self.set_color(
@@ -187,6 +188,7 @@ class Text(Artist):
             linespacing = 1.2  # Maybe use rcParam later.
         self.set_linespacing(linespacing)
         self.set_rotation_mode(rotation_mode)
+        self.set_antialiased(antialiased)
 
     def update(self, kwargs):
         # docstring inherited
@@ -309,6 +311,24 @@ class Text(Artist):
         """Return the text rotation mode."""
         return self._rotation_mode
 
+    def get_antialiased(self):
+        """Return whether antialiasing is used for drawing text."""
+        return self._antialiased
+
+    def set_antialiased(self, aa):
+        """
+        Set whether to use antialiased rendering for this text.
+
+        Parameters
+        ----------
+        aa : bool or None
+            If None, defaults to rcParams['text.antialiased'].
+        """
+        if aa is None:
+            aa = mpl.rcParams['text.antialiased']
+        self._antialiased = aa
+        self.stale = True
+
     def update_from(self, other):
         # docstring inherited
         super().update_from(other)
@@ -736,6 +756,7 @@ class Text(Artist):
             gc = renderer.new_gc()
             gc.set_foreground(self.get_color())
             gc.set_alpha(self.get_alpha())
+            gc.set_antialiased(self.get_antialiased())
             gc.set_url(self._url)
             self._set_gc_clip(gc)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of lib/matplotlib/tests/test_lines.py.
Extra Requirements: 
Purpose: This file will likely contain test cases for the 'antialiased' property on Line2D objects, which can be used as a template for the new tests for Text objects.

Previous refined query 2:
Essential Query: Please provide the full content of lib/matplotlib/tests/test_patches.py.
Extra Requirements: 
Purpose: This file is expected to contain test cases for the 'antialiased' property on Patch objects, which will serve as a model for writing tests for the same property on Text objects.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: lib/matplotlib/tests/test_lines.py
Line number range: 1 - 411
Content:
1. """
2. Tests specific to the lines module.
3. """
4. 
5. import itertools
6. import platform
7. import timeit
8. from types import SimpleNamespace
9. 
10. from cycler import cycler
11. import numpy as np
12. from numpy.testing import assert_array_equal
13. import pytest
14. 
15. import matplotlib
16. import matplotlib as mpl
17. from matplotlib import _path
18. import matplotlib.lines as mlines
19. from matplotlib.markers import MarkerStyle
20. from matplotlib.path import Path
21. import matplotlib.pyplot as plt
22. import matplotlib.transforms as mtransforms
23. from matplotlib.testing.decorators import image_comparison, check_figures_equal
24. 
25. 
26. def test_segment_hits():
27.     """Test a problematic case."""
28.     cx, cy = 553, 902
29.     x, y = np.array([553., 553.]), np.array([95., 947.])
30.     radius = 6.94
31.     assert_array_equal(mlines.segment_hits(cx, cy, x, y, radius), [0])
32. 
33. 
34. # Runtimes on a loaded system are inherently flaky. Not so much that a rerun
35. # won't help, hopefully.
36. @pytest.mark.flaky(reruns=3)
37. def test_invisible_Line_rendering():
38.     """
39.     GitHub issue #1256 identified a bug in Line.draw method
40. 
41.     Despite visibility attribute set to False, the draw method was not
42.     returning early enough and some pre-rendering code was executed
43.     though not necessary.
44. 
45.     Consequence was an excessive draw time for invisible Line instances
46.     holding a large number of points (Npts> 10**6)
47.     """
48.     # Creates big x and y data:
49.     N = 10**7
50.     x = np.linspace(0, 1, N)
51.     y = np.random.normal(size=N)
52. 
53.     # Create a plot figure:
54.     fig = plt.figure()
55.     ax = plt.subplot()
56. 
57.     # Create a "big" Line instance:
58.     l = mlines.Line2D(x, y)
59.     l.set_visible(False)
60.     # but don't add it to the Axis instance `ax`
61. 
62.     # [here Interactive panning and zooming is pretty responsive]
63.     # Time the canvas drawing:
64.     t_no_line = min(timeit.repeat(fig.canvas.draw, number=1, repeat=3))
65.     # (gives about 25 ms)
66. 
67.     # Add the big invisible Line:
68.     ax.add_line(l)
69. 
70.     # [Now interactive panning and zooming is very slow]
71.     # Time the canvas drawing:
72.     t_invisible_line = min(timeit.repeat(fig.canvas.draw, number=1, repeat=3))
73.     # gives about 290 ms for N = 10**7 pts
74. 
75.     slowdown_factor = t_invisible_line / t_no_line
76.     slowdown_threshold = 2  # trying to avoid false positive failures
77.     assert slowdown_factor < slowdown_threshold
78. 
79. 
80. def test_set_line_coll_dash():
81.     fig, ax = plt.subplots()
82.     np.random.seed(0)
83.     # Testing setting linestyles for line collections.
84.     # This should not produce an error.
85.     ax.contour(np.random.randn(20, 30), linestyles=[(0, (3, 3))])
86. 
87. 
88. def test_invalid_line_data():
89.     with pytest.raises(RuntimeError, match='xdata must be'):
90.         mlines.Line2D(0, [])
91.     with pytest.raises(RuntimeError, match='ydata must be'):
92.         mlines.Line2D([], 1)
93. 
94.     line = mlines.Line2D([], [])
95.     # when deprecation cycle is completed
96.     # with pytest.raises(RuntimeError, match='x must be'):
97.     with pytest.warns(mpl.MatplotlibDeprecationWarning):
98.         line.set_xdata(0)
99.     # with pytest.raises(RuntimeError, match='y must be'):
100.     with pytest.warns(mpl.MatplotlibDeprecationWarning):
101.         line.set_ydata(0)
102. 
103. 
104. @image_comparison(['line_dashes'], remove_text=True, tol=0.002)
105. def test_line_dashes():
106.     # Tolerance introduced after reordering of floating-point operations
107.     # Remove when regenerating the images
108.     fig, ax = plt.subplots()
109. 
110.     ax.plot(range(10), linestyle=(0, (3, 3)), lw=5)
111. 
112. 
113. def test_line_colors():
114.     fig, ax = plt.subplots()
115.     ax.plot(range(10), color='none')
116.     ax.plot(range(10), color='r')
117.     ax.plot(range(10), color='.3')
118.     ax.plot(range(10), color=(1, 0, 0, 1))
119.     ax.plot(range(10), color=(1, 0, 0))
120.     fig.canvas.draw()
121. 
122. 
123. def test_valid_colors():
124.     line = mlines.Line2D([], [])
125.     with pytest.raises(ValueError):
126.         line.set_color("foobar")
127. 
128. 
129. def test_linestyle_variants():
130.     fig, ax = plt.subplots()
131.     for ls in ["-", "solid", "--", "dashed",
132.                "-.", "dashdot", ":", "dotted",
133.                (0, None), (0, ()), (0, []),  # gh-22930
134.                ]:
135.         ax.plot(range(10), linestyle=ls)
136.     fig.canvas.draw()
137. 
138. 
139. def test_valid_linestyles():
140.     line = mlines.Line2D([], [])
141.     with pytest.raises(ValueError):
142.         line.set_linestyle('aardvark')
143. 
144. 
145. @image_comparison(['drawstyle_variants.png'], remove_text=True)
146. def test_drawstyle_variants():
147.     fig, axs = plt.subplots(6)
148.     dss = ["default", "steps-mid", "steps-pre", "steps-post", "steps", None]
149.     # We want to check that drawstyles are properly handled even for very long
150.     # lines (for which the subslice optimization is on); however, we need
151.     # to zoom in so that the difference between the drawstyles is actually
152.     # visible.
153.     for ax, ds in zip(axs.flat, dss):
154.         ax.plot(range(2000), drawstyle=ds)
155.         ax.set(xlim=(0, 2), ylim=(0, 2))
156. 
157. 
158. @check_figures_equal(extensions=('png',))
159. def test_no_subslice_with_transform(fig_ref, fig_test):
160.     ax = fig_ref.add_subplot()
161.     x = np.arange(2000)
162.     ax.plot(x + 2000, x)
163. 
164.     ax = fig_test.add_subplot()
165.     t = mtransforms.Affine2D().translate(2000.0, 0.0)
166.     ax.plot(x, x, transform=t+ax.transData)
167. 
168. 
169. def test_valid_drawstyles():
170.     line = mlines.Line2D([], [])
171.     with pytest.raises(ValueError):
172.         line.set_drawstyle('foobar')
173. 
174. 
175. def test_set_drawstyle():
176.     x = np.linspace(0, 2*np.pi, 10)
177.     y = np.sin(x)
178. 
179.     fig, ax = plt.subplots()
180.     line, = ax.plot(x, y)
181.     line.set_drawstyle("steps-pre")
182.     assert len(line.get_path().vertices) == 2*len(x)-1
183. 
184.     line.set_drawstyle("default")
185.     assert len(line.get_path().vertices) == len(x)
186. 
187. 
188. @image_comparison(
189.     ['line_collection_dashes'], remove_text=True, style='mpl20',
190.     tol=0.65 if platform.machine() in ('aarch64', 'ppc64le', 's390x') else 0)
191. def test_set_line_coll_dash_image():
192.     fig, ax = plt.subplots()
193.     np.random.seed(0)
194.     ax.contour(np.random.randn(20, 30), linestyles=[(0, (3, 3))])
195. 
196. 
197. @image_comparison(['marker_fill_styles.png'], remove_text=True)
198. def test_marker_fill_styles():
199.     colors = itertools.cycle([[0, 0, 1], 'g', '#ff0000', 'c', 'm', 'y',
200.                               np.array([0, 0, 0])])
201.     altcolor = 'lightgreen'
202. 
203.     y = np.array([1, 1])
204.     x = np.array([0, 9])
205.     fig, ax = plt.subplots()
206. 
207.     # This hard-coded list of markers correspond to an earlier iteration of
208.     # MarkerStyle.filled_markers; the value of that attribute has changed but
209.     # we kept the old value here to not regenerate the baseline image.
210.     # Replace with mlines.Line2D.filled_markers when the image is regenerated.
211.     for j, marker in enumerate("ov^<>8sp*hHDdPX"):
212.         for i, fs in enumerate(mlines.Line2D.fillStyles):
213.             color = next(colors)
214.             ax.plot(j * 10 + x, y + i + .5 * (j % 2),
215.                     marker=marker,
216.                     markersize=20,
217.                     markerfacecoloralt=altcolor,
218.                     fillstyle=fs,
219.                     label=fs,
220.                     linewidth=5,
221.                     color=color,
222.                     markeredgecolor=color,
223.                     markeredgewidth=2)
224. 
225.     ax.set_ylim([0, 7.5])
226.     ax.set_xlim([-5, 155])
227. 
228. 
229. def test_markerfacecolor_fillstyle():
230.     """Test that markerfacecolor does not override fillstyle='none'."""
231.     l, = plt.plot([1, 3, 2], marker=MarkerStyle('o', fillstyle='none'),
232.                   markerfacecolor='red')
233.     assert l.get_fillstyle() == 'none'
234.     assert l.get_markerfacecolor() == 'none'
235. 
236. 
237. @image_comparison(['scaled_lines'], style='default')
238. def test_lw_scaling():
239.     th = np.linspace(0, 32)
240.     fig, ax = plt.subplots()
241.     lins_styles = ['dashed', 'dotted', 'dashdot']
242.     cy = cycler(matplotlib.rcParams['axes.prop_cycle'])
243.     for j, (ls, sty) in enumerate(zip(lins_styles, cy)):
244.         for lw in np.linspace(.5, 10, 10):
245.             ax.plot(th, j*np.ones(50) + .1 * lw, linestyle=ls, lw=lw, **sty)
246. 
247. 
248. def test_is_sorted_and_has_non_nan():
249.     assert _path.is_sorted_and_has_non_nan(np.array([1, 2, 3]))
250.     assert _path.is_sorted_and_has_non_nan(np.array([1, np.nan, 3]))
251.     assert not _path.is_sorted_and_has_non_nan([3, 5] + [np.nan] * 100 + [0, 2])
252.     n = 2 * mlines.Line2D._subslice_optim_min_size
253.     plt.plot([np.nan] * n, range(n))
254. 
255. 
256. @check_figures_equal()
257. def test_step_markers(fig_test, fig_ref):
258.     fig_test.subplots().step([0, 1], "-o")
259.     fig_ref.subplots().plot([0, 0, 1], [0, 1, 1], "-o", markevery=[0, 2])
260. 
261. 
262. @pytest.mark.parametrize("parent", ["figure", "axes"])
263. @check_figures_equal(extensions=('png',))
264. def test_markevery(fig_test, fig_ref, parent):
265.     np.random.seed(42)
266.     x = np.linspace(0, 1, 14)
267.     y = np.random.rand(len(x))
268. 
269.     cases_test = [None, 4, (2, 5), [1, 5, 11],
270.                   [0, -1], slice(5, 10, 2),
271.                   np.arange(len(x))[y > 0.5],
272.                   0.3, (0.3, 0.4)]
273.     cases_ref = ["11111111111111", "10001000100010", "00100001000010",
274.                  "01000100000100", "10000000000001", "00000101010000",
275.                  "01110001110110", "11011011011110", "01010011011101"]
276. 
277.     if parent == "figure":
278.         # float markevery ("relative to axes size") is not supported.
279.         cases_test = cases_test[:-2]
280.         cases_ref = cases_ref[:-2]
281. 
282.         def add_test(x, y, *, markevery):
283.             fig_test.add_artist(
284.                 mlines.Line2D(x, y, marker="o", markevery=markevery))
285. 
286.         def add_ref(x, y, *, markevery):
287.             fig_ref.add_artist(
288.                 mlines.Line2D(x, y, marker="o", markevery=markevery))
289. 
290.     elif parent == "axes":
291.         axs_test = iter(fig_test.subplots(3, 3).flat)
292.         axs_ref = iter(fig_ref.subplots(3, 3).flat)
293. 
294.         def add_test(x, y, *, markevery):
295.             next(axs_test).plot(x, y, "-gD", markevery=markevery)
296. 
297.         def add_ref(x, y, *, markevery):
298.             next(axs_ref).plot(x, y, "-gD", markevery=markevery)
299. 
300.     for case in cases_test:
301.         add_test(x, y, markevery=case)
302. 
303.     for case in cases_ref:
304.         me = np.array(list(case)).astype(int).astype(bool)
305.         add_ref(x, y, markevery=me)
306. 
307. 
308. def test_markevery_figure_line_unsupported_relsize():
309.     fig = plt.figure()
310.     fig.add_artist(mlines.Line2D([0, 1], [0, 1], marker="o", markevery=.5))
311.     with pytest.raises(ValueError):
312.         fig.canvas.draw()
313. 
314. 
315. def test_marker_as_markerstyle():
316.     fig, ax = plt.subplots()
317.     line, = ax.plot([2, 4, 3], marker=MarkerStyle("D"))
318.     fig.canvas.draw()
319.     assert line.get_marker() == "D"
320. 
321.     # continue with smoke tests:
322.     line.set_marker("s")
323.     fig.canvas.draw()
324.     line.set_marker(MarkerStyle("o"))
325.     fig.canvas.draw()
326.     # test Path roundtrip
327.     triangle1 = Path._create_closed([[-1, -1], [1, -1], [0, 2]])
328.     line2, = ax.plot([1, 3, 2], marker=MarkerStyle(triangle1), ms=22)
329.     line3, = ax.plot([0, 2, 1], marker=triangle1, ms=22)
330. 
331.     assert_array_equal(line2.get_marker().vertices, triangle1.vertices)
332.     assert_array_equal(line3.get_marker().vertices, triangle1.vertices)
333. 
334. 
335. @image_comparison(['striped_line.png'], remove_text=True, style='mpl20')
336. def test_striped_lines():
337.     rng = np.random.default_rng(19680801)
338.     _, ax = plt.subplots()
339.     ax.plot(rng.uniform(size=12), color='orange', gapcolor='blue',
340.             linestyle='--', lw=5, label=' ')
341.     ax.plot(rng.uniform(size=12), color='red', gapcolor='black',
342.             linestyle=(0, (2, 5, 4, 2)), lw=5, label=' ', alpha=0.5)
343.     ax.legend(handlelength=5)
344. 
345. 
346. @check_figures_equal()
347. def test_odd_dashes(fig_test, fig_ref):
348.     fig_test.add_subplot().plot([1, 2], dashes=[1, 2, 3])
349.     fig_ref.add_subplot().plot([1, 2], dashes=[1, 2, 3, 1, 2, 3])
350. 
351. 
352. def test_picking():
353.     fig, ax = plt.subplots()
354.     mouse_event = SimpleNamespace(x=fig.bbox.width // 2,
355.                                   y=fig.bbox.height // 2 + 15)
356. 
357.     # Default pickradius is 5, so event should not pick this line.
358.     l0, = ax.plot([0, 1], [0, 1], picker=True)
359.     found, indices = l0.contains(mouse_event)
360.     assert not found
361. 
362.     # But with a larger pickradius, this should be picked.
363.     l1, = ax.plot([0, 1], [0, 1], picker=True, pickradius=20)
364.     found, indices = l1.contains(mouse_event)
365.     assert found
366.     assert_array_equal(indices['ind'], [0])
367. 
368.     # And if we modify the pickradius after creation, it should work as well.
369.     l2, = ax.plot([0, 1], [0, 1], picker=True)
370.     found, indices = l2.contains(mouse_event)
371.     assert not found
372.     l2.set_pickradius(20)
373.     found, indices = l2.contains(mouse_event)
374.     assert found
375.     assert_array_equal(indices['ind'], [0])
376. 
377. 
378. @check_figures_equal()
379. def test_input_copy(fig_test, fig_ref):
380. 
381.     t = np.arange(0, 6, 2)
382.     l, = fig_test.add_subplot().plot(t, t, ".-")
383.     t[:] = range(3)
384.     # Trigger cache invalidation
385.     l.set_drawstyle("steps")
386.     fig_ref.add_subplot().plot([0, 2, 4], [0, 2, 4], ".-", drawstyle="steps")
387. 
388. 
389. @check_figures_equal(extensions=["png"])
390. def test_markevery_prop_cycle(fig_test, fig_ref):
391.     """Test that we can set markevery prop_cycle."""
392.     cases = [None, 8, (30, 8), [16, 24, 30], [0, -1],
393.              slice(100, 200, 3), 0.1, 0.3, 1.5,
394.              (0.0, 0.1), (0.45, 0.1)]
395. 
396.     cmap = mpl.colormaps['jet']
397.     colors = cmap(np.linspace(0.2, 0.8, len(cases)))
398. 
399.     x = np.linspace(-1, 1)
400.     y = 5 * x**2
401. 
402.     axs = fig_ref.add_subplot()
403.     for i, markevery in enumerate(cases):
404.         axs.plot(y - i, 'o-', markevery=markevery, color=colors[i])
405. 
406.     matplotlib.rcParams['axes.prop_cycle'] = cycler(markevery=cases,
407.                                                     color=colors)
408. 
409.     ax = fig_test.add_subplot()
410.     for i, _ in enumerate(cases):
411.         ax.plot(y - i, 'o-')


File: lib/matplotlib/tests/test_patches.py
Line number range: 1 - 500
Content:
1. """
2. Tests specific to the patches module.
3. """
4. import numpy as np
5. from numpy.testing import assert_almost_equal, assert_array_equal
6. import pytest
7. 
8. import matplotlib as mpl
9. from matplotlib.patches import (Annulus, Ellipse, Patch, Polygon, Rectangle,
10.                                 FancyArrowPatch, FancyArrow, BoxStyle, Arc)
11. from matplotlib.testing.decorators import image_comparison, check_figures_equal
12. from matplotlib.transforms import Bbox
13. import matplotlib.pyplot as plt
14. from matplotlib import (
15.     collections as mcollections, colors as mcolors, patches as mpatches,
16.     path as mpath, transforms as mtransforms, rcParams)
17. 
18. import sys
19. on_win = (sys.platform == 'win32')
20. 
21. 
22. def test_Polygon_close():
23.     #: GitHub issue #1018 identified a bug in the Polygon handling
24.     #: of the closed attribute; the path was not getting closed
25.     #: when set_xy was used to set the vertices.
26. 
27.     # open set of vertices:
28.     xy = [[0, 0], [0, 1], [1, 1]]
29.     # closed set:
30.     xyclosed = xy + [[0, 0]]
31. 
32.     # start with open path and close it:
33.     p = Polygon(xy, closed=True)
34.     assert p.get_closed()
35.     assert_array_equal(p.get_xy(), xyclosed)
36.     p.set_xy(xy)
37.     assert_array_equal(p.get_xy(), xyclosed)
38. 
39.     # start with closed path and open it:
40.     p = Polygon(xyclosed, closed=False)
41.     assert_array_equal(p.get_xy(), xy)
42.     p.set_xy(xyclosed)
43.     assert_array_equal(p.get_xy(), xy)
44. 
45.     # start with open path and leave it open:
46.     p = Polygon(xy, closed=False)
47.     assert not p.get_closed()
48.     assert_array_equal(p.get_xy(), xy)
49.     p.set_xy(xy)
50.     assert_array_equal(p.get_xy(), xy)
51. 
52.     # start with closed path and leave it closed:
53.     p = Polygon(xyclosed, closed=True)
54.     assert_array_equal(p.get_xy(), xyclosed)
55.     p.set_xy(xyclosed)
56.     assert_array_equal(p.get_xy(), xyclosed)
57. 
58. 
59. def test_corner_center():
60.     loc = [10, 20]
61.     width = 1
62.     height = 2
63. 
64.     # Rectangle
65.     # No rotation
66.     corners = ((10, 20), (11, 20), (11, 22), (10, 22))
67.     rect = Rectangle(loc, width, height)
68.     assert_array_equal(rect.get_corners(), corners)
69.     assert_array_equal(rect.get_center(), (10.5, 21))
70. 
71.     # 90 deg rotation
72.     corners_rot = ((10, 20), (10, 21), (8, 21), (8, 20))
73.     rect.set_angle(90)
74.     assert_array_equal(rect.get_corners(), corners_rot)
75.     assert_array_equal(rect.get_center(), (9, 20.5))
76. 
77.     # Rotation not a multiple of 90 deg
78.     theta = 33
79.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
80.     corners_rot = t.transform(corners)
81.     rect.set_angle(theta)
82.     assert_almost_equal(rect.get_corners(), corners_rot)
83. 
84.     # Ellipse
85.     loc = [loc[0] + width / 2,
86.            loc[1] + height / 2]
87.     ellipse = Ellipse(loc, width, height)
88. 
89.     # No rotation
90.     assert_array_equal(ellipse.get_corners(), corners)
91. 
92.     # 90 deg rotation
93.     corners_rot = ((11.5, 20.5), (11.5, 21.5), (9.5, 21.5), (9.5, 20.5))
94.     ellipse.set_angle(90)
95.     assert_array_equal(ellipse.get_corners(), corners_rot)
96.     # Rotation shouldn't change ellipse center
97.     assert_array_equal(ellipse.get_center(), loc)
98. 
99.     # Rotation not a multiple of 90 deg
100.     theta = 33
101.     t = mtransforms.Affine2D().rotate_around(*loc, np.deg2rad(theta))
102.     corners_rot = t.transform(corners)
103.     ellipse.set_angle(theta)
104.     assert_almost_equal(ellipse.get_corners(), corners_rot)
105. 
106. 
107. def test_rotate_rect():
108.     loc = np.asarray([1.0, 2.0])
109.     width = 2
110.     height = 3
111.     angle = 30.0
112. 
113.     # A rotated rectangle
114.     rect1 = Rectangle(loc, width, height, angle=angle)
115. 
116.     # A non-rotated rectangle
117.     rect2 = Rectangle(loc, width, height)
118. 
119.     # Set up an explicit rotation matrix (in radians)
120.     angle_rad = np.pi * angle / 180.0
121.     rotation_matrix = np.array([[np.cos(angle_rad), -np.sin(angle_rad)],
122.                                 [np.sin(angle_rad),  np.cos(angle_rad)]])
123. 
124.     # Translate to origin, rotate each vertex, and then translate back
125.     new_verts = np.inner(rotation_matrix, rect2.get_verts() - loc).T + loc
126. 
127.     # They should be the same
128.     assert_almost_equal(rect1.get_verts(), new_verts)
129. 
130. 
131. @check_figures_equal(extensions=['png'])
132. def test_rotate_rect_draw(fig_test, fig_ref):
133.     ax_test = fig_test.add_subplot()
134.     ax_ref = fig_ref.add_subplot()
135. 
136.     loc = (0, 0)
137.     width, height = (1, 1)
138.     angle = 30
139.     rect_ref = Rectangle(loc, width, height, angle=angle)
140.     ax_ref.add_patch(rect_ref)
141.     assert rect_ref.get_angle() == angle
142. 
143.     # Check that when the angle is updated after adding to an Axes, that the
144.     # patch is marked stale and redrawn in the correct location
145.     rect_test = Rectangle(loc, width, height)
146.     assert rect_test.get_angle() == 0
147.     ax_test.add_patch(rect_test)
148.     rect_test.set_angle(angle)
149.     assert rect_test.get_angle() == angle
150. 
151. 
152. @check_figures_equal(extensions=['png'])
153. def test_dash_offset_patch_draw(fig_test, fig_ref):
154.     ax_test = fig_test.add_subplot()
155.     ax_ref = fig_ref.add_subplot()
156. 
157.     loc = (0.1, 0.1)
158.     width, height = (0.8, 0.8)
159.     rect_ref = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
160.                                                 linestyle=(0, [6, 6]))
161.     # fill the line gaps using a linestyle (0, [0, 6, 6, 0]), which is
162.     # equivalent to (6, [6, 6]) but has 0 dash offset
163.     rect_ref2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
164.                                             linestyle=(0, [0, 6, 6, 0]))
165.     assert rect_ref.get_linestyle() == (0, [6, 6])
166.     assert rect_ref2.get_linestyle() == (0, [0, 6, 6, 0])
167. 
168.     ax_ref.add_patch(rect_ref)
169.     ax_ref.add_patch(rect_ref2)
170. 
171.     # Check that the dash offset of the rect is the same if we pass it in the
172.     # init method and if we create two rects with appropriate onoff sequence
173.     # of linestyle.
174. 
175.     rect_test = Rectangle(loc, width, height, linewidth=3, edgecolor='b',
176.                                                     linestyle=(0, [6, 6]))
177.     rect_test2 = Rectangle(loc, width, height, linewidth=3, edgecolor='r',
178.                                                     linestyle=(6, [6, 6]))
179.     assert rect_test.get_linestyle() == (0, [6, 6])
180.     assert rect_test2.get_linestyle() == (6, [6, 6])
181. 
182.     ax_test.add_patch(rect_test)
183.     ax_test.add_patch(rect_test2)
184. 
185. 
186. def test_negative_rect():
187.     # These two rectangles have the same vertices, but starting from a
188.     # different point.  (We also drop the last vertex, which is a duplicate.)
189.     pos_vertices = Rectangle((-3, -2), 3, 2).get_verts()[:-1]
190.     neg_vertices = Rectangle((0, 0), -3, -2).get_verts()[:-1]
191.     assert_array_equal(np.roll(neg_vertices, 2, 0), pos_vertices)
192. 
193. 
194. @image_comparison(['clip_to_bbox'])
195. def test_clip_to_bbox():
196.     fig, ax = plt.subplots()
197.     ax.set_xlim([-18, 20])
198.     ax.set_ylim([-150, 100])
199. 
200.     path = mpath.Path.unit_regular_star(8).deepcopy()
201.     path.vertices *= [10, 100]
202.     path.vertices -= [5, 25]
203. 
204.     path2 = mpath.Path.unit_circle().deepcopy()
205.     path2.vertices *= [10, 100]
206.     path2.vertices += [10, -25]
207. 
208.     combined = mpath.Path.make_compound_path(path, path2)
209. 
210.     patch = mpatches.PathPatch(
211.         combined, alpha=0.5, facecolor='coral', edgecolor='none')
212.     ax.add_patch(patch)
213. 
214.     bbox = mtransforms.Bbox([[-12, -77.5], [50, -110]])
215.     result_path = combined.clip_to_bbox(bbox)
216.     result_patch = mpatches.PathPatch(
217.         result_path, alpha=0.5, facecolor='green', lw=4, edgecolor='black')
218. 
219.     ax.add_patch(result_patch)
220. 
221. 
222. @image_comparison(['patch_alpha_coloring'], remove_text=True)
223. def test_patch_alpha_coloring():
224.     """
225.     Test checks that the patch and collection are rendered with the specified
226.     alpha values in their facecolor and edgecolor.
227.     """
228.     star = mpath.Path.unit_regular_star(6)
229.     circle = mpath.Path.unit_circle()
230.     # concatenate the star with an internal cutout of the circle
231.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
232.     codes = np.concatenate([circle.codes, star.codes])
233.     cut_star1 = mpath.Path(verts, codes)
234.     cut_star2 = mpath.Path(verts + 1, codes)
235. 
236.     ax = plt.axes()
237.     col = mcollections.PathCollection([cut_star2],
238.                                       linewidth=5, linestyles='dashdot',
239.                                       facecolor=(1, 0, 0, 0.5),
240.                                       edgecolor=(0, 0, 1, 0.75))
241.     ax.add_collection(col)
242. 
243.     patch = mpatches.PathPatch(cut_star1,
244.                                linewidth=5, linestyle='dashdot',
245.                                facecolor=(1, 0, 0, 0.5),
246.                                edgecolor=(0, 0, 1, 0.75))
247.     ax.add_patch(patch)
248. 
249.     ax.set_xlim([-1, 2])
250.     ax.set_ylim([-1, 2])
251. 
252. 
253. @image_comparison(['patch_alpha_override'], remove_text=True)
254. def test_patch_alpha_override():
255.     #: Test checks that specifying an alpha attribute for a patch or
256.     #: collection will override any alpha component of the facecolor
257.     #: or edgecolor.
258.     star = mpath.Path.unit_regular_star(6)
259.     circle = mpath.Path.unit_circle()
260.     # concatenate the star with an internal cutout of the circle
261.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
262.     codes = np.concatenate([circle.codes, star.codes])
263.     cut_star1 = mpath.Path(verts, codes)
264.     cut_star2 = mpath.Path(verts + 1, codes)
265. 
266.     ax = plt.axes()
267.     col = mcollections.PathCollection([cut_star2],
268.                                       linewidth=5, linestyles='dashdot',
269.                                       alpha=0.25,
270.                                       facecolor=(1, 0, 0, 0.5),
271.                                       edgecolor=(0, 0, 1, 0.75))
272.     ax.add_collection(col)
273. 
274.     patch = mpatches.PathPatch(cut_star1,
275.                                linewidth=5, linestyle='dashdot',
276.                                alpha=0.25,
277.                                facecolor=(1, 0, 0, 0.5),
278.                                edgecolor=(0, 0, 1, 0.75))
279.     ax.add_patch(patch)
280. 
281.     ax.set_xlim([-1, 2])
282.     ax.set_ylim([-1, 2])
283. 
284. 
285. @mpl.style.context('default')
286. def test_patch_color_none():
287.     # Make sure the alpha kwarg does not override 'none' facecolor.
288.     # Addresses issue #7478.
289.     c = plt.Circle((0, 0), 1, facecolor='none', alpha=1)
290.     assert c.get_facecolor()[0] == 0
291. 
292. 
293. @image_comparison(['patch_custom_linestyle'], remove_text=True)
294. def test_patch_custom_linestyle():
295.     #: A test to check that patches and collections accept custom dash
296.     #: patterns as linestyle and that they display correctly.
297.     star = mpath.Path.unit_regular_star(6)
298.     circle = mpath.Path.unit_circle()
299.     # concatenate the star with an internal cutout of the circle
300.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
301.     codes = np.concatenate([circle.codes, star.codes])
302.     cut_star1 = mpath.Path(verts, codes)
303.     cut_star2 = mpath.Path(verts + 1, codes)
304. 
305.     ax = plt.axes()
306.     col = mcollections.PathCollection(
307.         [cut_star2],
308.         linewidth=5, linestyles=[(0, (5, 7, 10, 7))],
309.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
310.     ax.add_collection(col)
311. 
312.     patch = mpatches.PathPatch(
313.         cut_star1,
314.         linewidth=5, linestyle=(0, (5, 7, 10, 7)),
315.         facecolor=(1, 0, 0), edgecolor=(0, 0, 1))
316.     ax.add_patch(patch)
317. 
318.     ax.set_xlim([-1, 2])
319.     ax.set_ylim([-1, 2])
320. 
321. 
322. def test_patch_linestyle_accents():
323.     #: Test if linestyle can also be specified with short mnemonics like "--"
324.     #: c.f. GitHub issue #2136
325.     star = mpath.Path.unit_regular_star(6)
326.     circle = mpath.Path.unit_circle()
327.     # concatenate the star with an internal cutout of the circle
328.     verts = np.concatenate([circle.vertices, star.vertices[::-1]])
329.     codes = np.concatenate([circle.codes, star.codes])
330. 
331.     linestyles = ["-", "--", "-.", ":",
332.                   "solid", "dashed", "dashdot", "dotted"]
333. 
334.     fig, ax = plt.subplots()
335.     for i, ls in enumerate(linestyles):
336.         star = mpath.Path(verts + i, codes)
337.         patch = mpatches.PathPatch(star,
338.                                    linewidth=3, linestyle=ls,
339.                                    facecolor=(1, 0, 0),
340.                                    edgecolor=(0, 0, 1))
341.         ax.add_patch(patch)
342. 
343.     ax.set_xlim([-1, i + 1])
344.     ax.set_ylim([-1, i + 1])
345.     fig.canvas.draw()
346. 
347. 
348. @check_figures_equal(extensions=['png'])
349. def test_patch_linestyle_none(fig_test, fig_ref):
350.     circle = mpath.Path.unit_circle()
351. 
352.     ax_test = fig_test.add_subplot()
353.     ax_ref = fig_ref.add_subplot()
354.     for i, ls in enumerate(['none', 'None', ' ', '']):
355.         path = mpath.Path(circle.vertices + i, circle.codes)
356.         patch = mpatches.PathPatch(path,
357.                                    linewidth=3, linestyle=ls,
358.                                    facecolor=(1, 0, 0),
359.                                    edgecolor=(0, 0, 1))
360.         ax_test.add_patch(patch)
361. 
362.         patch = mpatches.PathPatch(path,
363.                                    linewidth=3, linestyle='-',
364.                                    facecolor=(1, 0, 0),
365.                                    edgecolor='none')
366.         ax_ref.add_patch(patch)
367. 
368.     ax_test.set_xlim([-1, i + 1])
369.     ax_test.set_ylim([-1, i + 1])
370.     ax_ref.set_xlim([-1, i + 1])
371.     ax_ref.set_ylim([-1, i + 1])
372. 
373. 
374. def test_wedge_movement():
375.     param_dict = {'center': ((0, 0), (1, 1), 'set_center'),
376.                   'r': (5, 8, 'set_radius'),
377.                   'width': (2, 3, 'set_width'),
378.                   'theta1': (0, 30, 'set_theta1'),
379.                   'theta2': (45, 50, 'set_theta2')}
380. 
381.     init_args = {k: v[0] for k, v in param_dict.items()}
382. 
383.     w = mpatches.Wedge(**init_args)
384.     for attr, (old_v, new_v, func) in param_dict.items():
385.         assert getattr(w, attr) == old_v
386.         getattr(w, func)(new_v)
387.         assert getattr(w, attr) == new_v
388. 
389. 
390. # png needs tol>=0.06, pdf tol>=1.617
391. @image_comparison(['wedge_range'], remove_text=True, tol=1.65 if on_win else 0)
392. def test_wedge_range():
393.     ax = plt.axes()
394. 
395.     t1 = 2.313869244286224
396. 
397.     args = [[52.31386924, 232.31386924],
398.             [52.313869244286224, 232.31386924428622],
399.             [t1, t1 + 180.0],
400.             [0, 360],
401.             [90, 90 + 360],
402.             [-180, 180],
403.             [0, 380],
404.             [45, 46],
405.             [46, 45]]
406. 
407.     for i, (theta1, theta2) in enumerate(args):
408.         x = i % 3
409.         y = i // 3
410. 
411.         wedge = mpatches.Wedge((x * 3, y * 3), 1, theta1, theta2,
412.                                facecolor='none', edgecolor='k', lw=3)
413. 
414.         ax.add_artist(wedge)
415. 
416.     ax.set_xlim([-2, 8])
417.     ax.set_ylim([-2, 9])
418. 
419. 
420. def test_patch_str():
421.     """
422.     Check that patches have nice and working `str` representation.
423. 
424.     Note that the logic is that `__str__` is defined such that:
425.     str(eval(str(p))) == str(p)
426.     """
427.     p = mpatches.Circle(xy=(1, 2), radius=3)
428.     assert str(p) == 'Circle(xy=(1, 2), radius=3)'
429. 
430.     p = mpatches.Ellipse(xy=(1, 2), width=3, height=4, angle=5)
431.     assert str(p) == 'Ellipse(xy=(1, 2), width=3, height=4, angle=5)'
432. 
433.     p = mpatches.Rectangle(xy=(1, 2), width=3, height=4, angle=5)
434.     assert str(p) == 'Rectangle(xy=(1, 2), width=3, height=4, angle=5)'
435. 
436.     p = mpatches.Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)
437.     assert str(p) == 'Wedge(center=(1, 2), r=3, theta1=4, theta2=5, width=6)'
438. 
439.     p = mpatches.Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)
440.     expected = 'Arc(xy=(1, 2), width=3, height=4, angle=5, theta1=6, theta2=7)'
441.     assert str(p) == expected
442. 
443.     p = mpatches.Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)
444.     expected = "Annulus(xy=(1, 2), r=(3, 4), width=1, angle=2)"
445.     assert str(p) == expected
446. 
447.     p = mpatches.RegularPolygon((1, 2), 20, radius=5)
448.     assert str(p) == "RegularPolygon((1, 2), 20, radius=5, orientation=0)"
449. 
450.     p = mpatches.CirclePolygon(xy=(1, 2), radius=5, resolution=20)
451.     assert str(p) == "CirclePolygon((1, 2), radius=5, resolution=20)"
452. 
453.     p = mpatches.FancyBboxPatch((1, 2), width=3, height=4)
454.     assert str(p) == "FancyBboxPatch((1, 2), width=3, height=4)"
455. 
456.     # Further nice __str__ which cannot be `eval`uated:
457.     path = mpath.Path([(1, 2), (2, 2), (1, 2)], closed=True)
458.     p = mpatches.PathPatch(path)
459.     assert str(p) == "PathPatch3((1, 2) ...)"
460. 
461.     p = mpatches.Polygon(np.empty((0, 2)))
462.     assert str(p) == "Polygon0()"
463. 
464.     data = [[1, 2], [2, 2], [1, 2]]
465.     p = mpatches.Polygon(data)
466.     assert str(p) == "Polygon3((1, 2) ...)"
467. 
468.     p = mpatches.FancyArrowPatch(path=path)
469.     assert str(p)[:27] == "FancyArrowPatch(Path(array("
470. 
471.     p = mpatches.FancyArrowPatch((1, 2), (3, 4))
472.     assert str(p) == "FancyArrowPatch((1, 2)->(3, 4))"
473. 
474.     p = mpatches.ConnectionPatch((1, 2), (3, 4), 'data')
475.     assert str(p) == "ConnectionPatch((1, 2), (3, 4))"
476. 
477.     s = mpatches.Shadow(p, 1, 1)
478.     assert str(s) == "Shadow(ConnectionPatch((1, 2), (3, 4)))"
479. 
480.     # Not testing Arrow, FancyArrow here
481.     # because they seem to exist only for historical reasons.
482. 
483. 
484. @image_comparison(['multi_color_hatch'], remove_text=True, style='default')
485. def test_multi_color_hatch():
486.     fig, ax = plt.subplots()
487. 
488.     rects = ax.bar(range(5), range(1, 6))
489.     for i, rect in enumerate(rects):
490.         rect.set_facecolor('none')
491.         rect.set_edgecolor(f'C{i}')
492.         rect.set_hatch('/')
493. 
494.     ax.autoscale_view()
495.     ax.autoscale(False)
496. 
497.     for i in range(5):
498.         with mpl.style.context({'hatch.color': f'C{i}'}):
499.             r = Rectangle((i - .8 / 2, 5), .8, 1, hatch='//', fc='none')
500.         ax.add_patch(r)

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 08:46:37,655 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The previously provided context from `test_lines.py` and `test_patches.py` did not contain explicit tests for the `antialiased` property as expected. To write tests for the new `antialiased` property on `Text` objects, it is essential to examine the existing tests for other `Text` properties to understand the established testing patterns, such as how rendering is tested (e.g., using image comparison) and how property getters and setters are validated. The most relevant file for this purpose is `test_text.py`.' query='Please provide the full content of lib/matplotlib/tests/test_text.py.' extra_requirements='' purpose='I need this file to find examples of existing tests for `Text` object properties, which will serve as a template for creating new tests for the `antialiased` property.'
2025-12-21 08:46:37,656 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of lib/matplotlib/tests/test_text.py.
2025-12-21 08:46:37,656 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 08:46:37,657 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 08:46:37,657 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 08:46:37,657 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of lib/matplotlib/tests/test_text.py.
Purpose: I need this file to find examples of existing tests for `Text` object properties, which will serve as a template for creating new tests for the `antialiased` property.
2025-12-21 08:46:40,021 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the entire content of `lib/matplotlib/tests/test_text.py`. This will give you a comprehensive set of examples for creating new tests for the `antialiased` property of the `Text` object.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "lib/matplotlib/tests/test_text.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2153, 'candidates_token_count': 73, 'total_token_count': 2300, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2153}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 73}], 'thoughts_token_count': 74, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1201359605135983, 'model_name': 'gemini-2.5-pro'} id='run--fd9e3342-38b7-49a4-9744-617cce97bc55-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'lib/matplotlib/tests/test_text.py'}, 'id': 'da89d81b-bc0b-43b8-9bbc-b34722b3c134', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2153, 'output_tokens': 73, 'total_tokens': 2300, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 74}}
2025-12-21 08:46:45,639 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the entire content of `lib/matplotlib/tests/test_text.py` as you requested. This file contains numerous tests for the `Text` object's properties, which should provide you with plenty of examples to use as a template for creating new tests for the `antialiased` property. I have also identified a specific test, `test_antialiasing`, that directly deals with the `antialiased` property and may be particularly helpful for your task." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10348, 'candidates_token_count': 100, 'total_token_count': 10905, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10348}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 100}], 'thoughts_token_count': 457, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6557249450683593, 'model_name': 'gemini-2.5-pro'} id='run--0f0a42ec-9357-44ea-adea-cfde03232b13-0' usage_metadata={'input_tokens': 10348, 'output_tokens': 100, 'total_tokens': 10905, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 457}}
2025-12-21 08:46:45,640 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of lib/matplotlib/tests/test_text.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need this file to find examples of existing tests for `Text` object properties, which will serve as a template for creating new tests for the `antialiased` property.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: lib/matplotlib/tests/test_text.py
Line number range: 1 - 500
Content:
1. from datetime import datetime
2. import io
3. import warnings
4. 
5. import numpy as np
6. from numpy.testing import assert_almost_equal
7. import pytest
8. 
9. import matplotlib as mpl
10. from matplotlib.backend_bases import MouseEvent
11. from matplotlib.font_manager import FontProperties
12. import matplotlib.patches as mpatches
13. import matplotlib.pyplot as plt
14. import matplotlib.transforms as mtransforms
15. from matplotlib.testing.decorators import check_figures_equal, image_comparison
16. from matplotlib.testing._markers import needs_usetex
17. from matplotlib.text import Text
18. 
19. 
20. @image_comparison(['font_styles'])
21. def test_font_styles():
22. 
23.     def find_matplotlib_font(**kw):
24.         prop = FontProperties(**kw)
25.         path = findfont(prop, directory=mpl.get_data_path())
26.         return FontProperties(fname=path)
27. 
28.     from matplotlib.font_manager import FontProperties, findfont
29.     warnings.filterwarnings(
30.         'ignore',
31.         r"findfont: Font family \[u?'Foo'\] not found. Falling back to .",
32.         UserWarning,
33.         module='matplotlib.font_manager')
34. 
35.     fig, ax = plt.subplots()
36. 
37.     normal_font = find_matplotlib_font(
38.         family="sans-serif",
39.         style="normal",
40.         variant="normal",
41.         size=14)
42.     a = ax.annotate(
43.         "Normal Font",
44.         (0.1, 0.1),
45.         xycoords='axes fraction',
46.         fontproperties=normal_font)
47.     assert a.get_fontname() == 'DejaVu Sans'
48.     assert a.get_fontstyle() == 'normal'
49.     assert a.get_fontvariant() == 'normal'
50.     assert a.get_weight() == 'normal'
51.     assert a.get_stretch() == 'normal'
52. 
53.     bold_font = find_matplotlib_font(
54.         family="Foo",
55.         style="normal",
56.         variant="normal",
57.         weight="bold",
58.         stretch=500,
59.         size=14)
60.     ax.annotate(
61.         "Bold Font",
62.         (0.1, 0.2),
63.         xycoords='axes fraction',
64.         fontproperties=bold_font)
65. 
66.     bold_italic_font = find_matplotlib_font(
67.         family="sans serif",
68.         style="italic",
69.         variant="normal",
70.         weight=750,
71.         stretch=500,
72.         size=14)
73.     ax.annotate(
74.         "Bold Italic Font",
75.         (0.1, 0.3),
76.         xycoords='axes fraction',
77.         fontproperties=bold_italic_font)
78. 
79.     light_font = find_matplotlib_font(
80.         family="sans-serif",
81.         style="normal",
82.         variant="normal",
83.         weight=200,
84.         stretch=500,
85.         size=14)
86.     ax.annotate(
87.         "Light Font",
88.         (0.1, 0.4),
89.         xycoords='axes fraction',
90.         fontproperties=light_font)
91. 
92.     condensed_font = find_matplotlib_font(
93.         family="sans-serif",
94.         style="normal",
95.         variant="normal",
96.         weight=500,
97.         stretch=100,
98.         size=14)
99.     ax.annotate(
100.         "Condensed Font",
101.         (0.1, 0.5),
102.         xycoords='axes fraction',
103.         fontproperties=condensed_font)
104. 
105.     ax.set_xticks([])
106.     ax.set_yticks([])
107. 
108. 
109. @image_comparison(['multiline'])
110. def test_multiline():
111.     plt.figure()
112.     ax = plt.subplot(1, 1, 1)
113.     ax.set_title("multiline\ntext alignment")
114. 
115.     plt.text(
116.         0.2, 0.5, "TpTpTp\n$M$\nTpTpTp", size=20, ha="center", va="top")
117. 
118.     plt.text(
119.         0.5, 0.5, "TpTpTp\n$M^{M^{M^{M}}}$\nTpTpTp", size=20,
120.         ha="center", va="top")
121. 
122.     plt.text(
123.         0.8, 0.5, "TpTpTp\n$M_{q_{q_{q}}}$\nTpTpTp", size=20,
124.         ha="center", va="top")
125. 
126.     plt.xlim(0, 1)
127.     plt.ylim(0, 0.8)
128. 
129.     ax.set_xticks([])
130.     ax.set_yticks([])
131. 
132. 
133. @image_comparison(['multiline2'], style='mpl20')
134. def test_multiline2():
135.     # Remove this line when this test image is regenerated.
136.     plt.rcParams['text.kerning_factor'] = 6
137. 
138.     fig, ax = plt.subplots()
139. 
140.     ax.set_xlim([0, 1.4])
141.     ax.set_ylim([0, 2])
142.     ax.axhline(0.5, color='C2', linewidth=0.3)
143.     sts = ['Line', '2 Lineg\n 2 Lg', '$\\sum_i x $', 'hi $\\sum_i x $\ntest',
144.            'test\n $\\sum_i x $', '$\\sum_i x $\n $\\sum_i x $']
145.     renderer = fig.canvas.get_renderer()
146. 
147.     def draw_box(ax, tt):
148.         r = mpatches.Rectangle((0, 0), 1, 1, clip_on=False,
149.                                transform=ax.transAxes)
150.         r.set_bounds(
151.             tt.get_window_extent(renderer)
152.             .transformed(ax.transAxes.inverted())
153.             .bounds)
154.         ax.add_patch(r)
155. 
156.     horal = 'left'
157.     for nn, st in enumerate(sts):
158.         tt = ax.text(0.2 * nn + 0.1, 0.5, st, horizontalalignment=horal,
159.                      verticalalignment='bottom')
160.         draw_box(ax, tt)
161.     ax.text(1.2, 0.5, 'Bottom align', color='C2')
162. 
163.     ax.axhline(1.3, color='C2', linewidth=0.3)
164.     for nn, st in enumerate(sts):
165.         tt = ax.text(0.2 * nn + 0.1, 1.3, st, horizontalalignment=horal,
166.                      verticalalignment='top')
167.         draw_box(ax, tt)
168.     ax.text(1.2, 1.3, 'Top align', color='C2')
169. 
170.     ax.axhline(1.8, color='C2', linewidth=0.3)
171.     for nn, st in enumerate(sts):
172.         tt = ax.text(0.2 * nn + 0.1, 1.8, st, horizontalalignment=horal,
173.                      verticalalignment='baseline')
174.         draw_box(ax, tt)
175.     ax.text(1.2, 1.8, 'Baseline align', color='C2')
176. 
177.     ax.axhline(0.1, color='C2', linewidth=0.3)
178.     for nn, st in enumerate(sts):
179.         tt = ax.text(0.2 * nn + 0.1, 0.1, st, horizontalalignment=horal,
180.                      verticalalignment='bottom', rotation=20)
181.         draw_box(ax, tt)
182.     ax.text(1.2, 0.1, 'Bot align, rot20', color='C2')
183. 
184. 
185. @image_comparison(['antialiased.png'])
186. def test_antialiasing():
187.     mpl.rcParams['text.antialiased'] = True
188. 
189.     fig = plt.figure(figsize=(5.25, 0.75))
190.     fig.text(0.5, 0.75, "antialiased", horizontalalignment='center',
191.              verticalalignment='center')
192.     fig.text(0.5, 0.25, r"$\sqrt{x}$", horizontalalignment='center',
193.              verticalalignment='center')
194.     # NOTE: We don't need to restore the rcParams here, because the
195.     # test cleanup will do it for us.  In fact, if we do it here, it
196.     # will turn antialiasing back off before the images are actually
197.     # rendered.
198. 
199. 
200. def test_afm_kerning():
201.     fn = mpl.font_manager.findfont("Helvetica", fontext="afm")
202.     with open(fn, 'rb') as fh:
203.         afm = mpl._afm.AFM(fh)
204.     assert afm.string_width_height('VAVAVAVAVAVA') == (7174.0, 718)
205. 
206. 
207. @image_comparison(['text_contains.png'])
208. def test_contains():
209.     fig = plt.figure()
210.     ax = plt.axes()
211. 
212.     mevent = MouseEvent('button_press_event', fig.canvas, 0.5, 0.5, 1, None)
213. 
214.     xs = np.linspace(0.25, 0.75, 30)
215.     ys = np.linspace(0.25, 0.75, 30)
216.     xs, ys = np.meshgrid(xs, ys)
217. 
218.     txt = plt.text(
219.         0.5, 0.4, 'hello world', ha='center', fontsize=30, rotation=30)
220.     # uncomment to draw the text's bounding box
221.     # txt.set_bbox(dict(edgecolor='black', facecolor='none'))
222. 
223.     # draw the text. This is important, as the contains method can only work
224.     # when a renderer exists.
225.     fig.canvas.draw()
226. 
227.     for x, y in zip(xs.flat, ys.flat):
228.         mevent.x, mevent.y = plt.gca().transAxes.transform([x, y])
229.         contains, _ = txt.contains(mevent)
230.         color = 'yellow' if contains else 'red'
231. 
232.         # capture the viewLim, plot a point, and reset the viewLim
233.         vl = ax.viewLim.frozen()
234.         ax.plot(x, y, 'o', color=color)
235.         ax.viewLim.set(vl)
236. 
237. 
238. def test_annotation_contains():
239.     # Check that Annotation.contains looks at the bboxes of the text and the
240.     # arrow separately, not at the joint bbox.
241.     fig, ax = plt.subplots()
242.     ann = ax.annotate(
243.         "hello", xy=(.4, .4), xytext=(.6, .6), arrowprops={"arrowstyle": "->"})
244.     fig.canvas.draw()  # Needed for the same reason as in test_contains.
245.     event = MouseEvent(
246.         "button_press_event", fig.canvas, *ax.transData.transform((.5, .6)))
247.     assert ann.contains(event) == (False, {})
248. 
249. 
250. @pytest.mark.parametrize('err, xycoords, match', (
251.     (TypeError, print, "xycoords callable must return a BboxBase or Transform, not a"),
252.     (TypeError, [0, 0], r"'xycoords' must be an instance of str, tuple"),
253.     (ValueError, "foo", "'foo' is not a valid coordinate"),
254.     (ValueError, "foo bar", "'foo bar' is not a valid coordinate"),
255.     (ValueError, "offset foo", "xycoords cannot be an offset coordinate"),
256.     (ValueError, "axes foo", "'foo' is not a recognized unit"),
257. ))
258. def test_annotate_errors(err, xycoords, match):
259.     fig, ax = plt.subplots()
260.     with pytest.raises(err, match=match):
261.         ax.annotate('xy', (0, 0), xytext=(0.5, 0.5), xycoords=xycoords)
262.         fig.canvas.draw()
263. 
264. 
265. @image_comparison(['titles'])
266. def test_titles():
267.     # left and right side titles
268.     plt.figure()
269.     ax = plt.subplot(1, 1, 1)
270.     ax.set_title("left title", loc="left")
271.     ax.set_title("right title", loc="right")
272.     ax.set_xticks([])
273.     ax.set_yticks([])
274. 
275. 
276. @image_comparison(['text_alignment'], style='mpl20')
277. def test_alignment():
278.     plt.figure()
279.     ax = plt.subplot(1, 1, 1)
280. 
281.     x = 0.1
282.     for rotation in (0, 30):
283.         for alignment in ('top', 'bottom', 'baseline', 'center'):
284.             ax.text(
285.                 x, 0.5, alignment + " Tj", va=alignment, rotation=rotation,
286.                 bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.5))
287.             ax.text(
288.                 x, 1.0, r'$\sum_{i=0}^{j}$', va=alignment, rotation=rotation)
289.             x += 0.1
290. 
291.     ax.plot([0, 1], [0.5, 0.5])
292.     ax.plot([0, 1], [1.0, 1.0])
293. 
294.     ax.set_xlim([0, 1])
295.     ax.set_ylim([0, 1.5])
296.     ax.set_xticks([])
297.     ax.set_yticks([])
298. 
299. 
300. @image_comparison(['axes_titles.png'])
301. def test_axes_titles():
302.     # Related to issue #3327
303.     plt.figure()
304.     ax = plt.subplot(1, 1, 1)
305.     ax.set_title('center', loc='center', fontsize=20, fontweight=700)
306.     ax.set_title('left', loc='left', fontsize=12, fontweight=400)
307.     ax.set_title('right', loc='right', fontsize=12, fontweight=400)
308. 
309. 
310. def test_set_position():
311.     fig, ax = plt.subplots()
312. 
313.     # test set_position
314.     ann = ax.annotate(
315.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
316.     fig.canvas.draw()
317. 
318.     init_pos = ann.get_window_extent(fig.canvas.renderer)
319.     shift_val = 15
320.     ann.set_position((shift_val, shift_val))
321.     fig.canvas.draw()
322.     post_pos = ann.get_window_extent(fig.canvas.renderer)
323. 
324.     for a, b in zip(init_pos.min, post_pos.min):
325.         assert a + shift_val == b
326. 
327.     # test xyann
328.     ann = ax.annotate(
329.         'test', (0, 0), xytext=(0, 0), textcoords='figure pixels')
330.     fig.canvas.draw()
331. 
332.     init_pos = ann.get_window_extent(fig.canvas.renderer)
333.     shift_val = 15
334.     ann.xyann = (shift_val, shift_val)
335.     fig.canvas.draw()
336.     post_pos = ann.get_window_extent(fig.canvas.renderer)
337. 
338.     for a, b in zip(init_pos.min, post_pos.min):
339.         assert a + shift_val == b
340. 
341. 
342. def test_char_index_at():
343.     fig = plt.figure()
344.     text = fig.text(0.1, 0.9, "")
345. 
346.     text.set_text("i")
347.     bbox = text.get_window_extent()
348.     size_i = bbox.x1 - bbox.x0
349. 
350.     text.set_text("m")
351.     bbox = text.get_window_extent()
352.     size_m = bbox.x1 - bbox.x0
353. 
354.     text.set_text("iiiimmmm")
355.     bbox = text.get_window_extent()
356.     origin = bbox.x0
357. 
358.     assert text._char_index_at(origin - size_i) == 0  # left of first char
359.     assert text._char_index_at(origin) == 0
360.     assert text._char_index_at(origin + 0.499*size_i) == 0
361.     assert text._char_index_at(origin + 0.501*size_i) == 1
362.     assert text._char_index_at(origin + size_i*3) == 3
363.     assert text._char_index_at(origin + size_i*4 + size_m*3) == 7
364.     assert text._char_index_at(origin + size_i*4 + size_m*4) == 8
365.     assert text._char_index_at(origin + size_i*4 + size_m*10) == 8
366. 
367. 
368. @pytest.mark.parametrize('text', ['', 'O'], ids=['empty', 'non-empty'])
369. def test_non_default_dpi(text):
370.     fig, ax = plt.subplots()
371. 
372.     t1 = ax.text(0.5, 0.5, text, ha='left', va='bottom')
373.     fig.canvas.draw()
374.     dpi = fig.dpi
375. 
376.     bbox1 = t1.get_window_extent()
377.     bbox2 = t1.get_window_extent(dpi=dpi * 10)
378.     np.testing.assert_allclose(bbox2.get_points(), bbox1.get_points() * 10,
379.                                rtol=5e-2)
380.     # Text.get_window_extent should not permanently change dpi.
381.     assert fig.dpi == dpi
382. 
383. 
384. def test_get_rotation_string():
385.     assert Text(rotation='horizontal').get_rotation() == 0.
386.     assert Text(rotation='vertical').get_rotation() == 90.
387. 
388. 
389. def test_get_rotation_float():
390.     for i in [15., 16.70, 77.4]:
391.         assert Text(rotation=i).get_rotation() == i
392. 
393. 
394. def test_get_rotation_int():
395.     for i in [67, 16, 41]:
396.         assert Text(rotation=i).get_rotation() == float(i)
397. 
398. 
399. def test_get_rotation_raises():
400.     with pytest.raises(ValueError):
401.         Text(rotation='hozirontal')
402. 
403. 
404. def test_get_rotation_none():
405.     assert Text(rotation=None).get_rotation() == 0.0
406. 
407. 
408. def test_get_rotation_mod360():
409.     for i, j in zip([360., 377., 720+177.2], [0., 17., 177.2]):
410.         assert_almost_equal(Text(rotation=i).get_rotation(), j)
411. 
412. 
413. @pytest.mark.parametrize("ha", ["center", "right", "left"])
414. @pytest.mark.parametrize("va", ["center", "top", "bottom",
415.                                 "baseline", "center_baseline"])
416. def test_null_rotation_with_rotation_mode(ha, va):
417.     fig, ax = plt.subplots()
418.     kw = dict(rotation=0, va=va, ha=ha)
419.     t0 = ax.text(.5, .5, 'test', rotation_mode='anchor', **kw)
420.     t1 = ax.text(.5, .5, 'test', rotation_mode='default', **kw)
421.     fig.canvas.draw()
422.     assert_almost_equal(t0.get_window_extent(fig.canvas.renderer).get_points(),
423.                         t1.get_window_extent(fig.canvas.renderer).get_points())
424. 
425. 
426. @image_comparison(['text_bboxclip'])
427. def test_bbox_clipping():
428.     plt.text(0.9, 0.2, 'Is bbox clipped?', backgroundcolor='r', clip_on=True)
429.     t = plt.text(0.9, 0.5, 'Is fancy bbox clipped?', clip_on=True)
430.     t.set_bbox({"boxstyle": "round, pad=0.1"})
431. 
432. 
433. @image_comparison(['annotation_negative_ax_coords.png'])
434. def test_annotation_negative_ax_coords():
435.     fig, ax = plt.subplots()
436. 
437.     ax.annotate('+ pts',
438.                 xytext=[30, 20], textcoords='axes points',
439.                 xy=[30, 20], xycoords='axes points', fontsize=32)
440.     ax.annotate('- pts',
441.                 xytext=[30, -20], textcoords='axes points',
442.                 xy=[30, -20], xycoords='axes points', fontsize=32,
443.                 va='top')
444.     ax.annotate('+ frac',
445.                 xytext=[0.75, 0.05], textcoords='axes fraction',
446.                 xy=[0.75, 0.05], xycoords='axes fraction', fontsize=32)
447.     ax.annotate('- frac',
448.                 xytext=[0.75, -0.05], textcoords='axes fraction',
449.                 xy=[0.75, -0.05], xycoords='axes fraction', fontsize=32,
450.                 va='top')
451. 
452.     ax.annotate('+ pixels',
453.                 xytext=[160, 25], textcoords='axes pixels',
454.                 xy=[160, 25], xycoords='axes pixels', fontsize=32)
455.     ax.annotate('- pixels',
456.                 xytext=[160, -25], textcoords='axes pixels',
457.                 xy=[160, -25], xycoords='axes pixels', fontsize=32,
458.                 va='top')
459. 
460. 
461. @image_comparison(['annotation_negative_fig_coords.png'])
462. def test_annotation_negative_fig_coords():
463.     fig, ax = plt.subplots()
464. 
465.     ax.annotate('+ pts',
466.                 xytext=[10, 120], textcoords='figure points',
467.                 xy=[10, 120], xycoords='figure points', fontsize=32)
468.     ax.annotate('- pts',
469.                 xytext=[-10, 180], textcoords='figure points',
470.                 xy=[-10, 180], xycoords='figure points', fontsize=32,
471.                 va='top')
472.     ax.annotate('+ frac',
473.                 xytext=[0.05, 0.55], textcoords='figure fraction',
474.                 xy=[0.05, 0.55], xycoords='figure fraction', fontsize=32)
475.     ax.annotate('- frac',
476.                 xytext=[-0.05, 0.5], textcoords='figure fraction',
477.                 xy=[-0.05, 0.5], xycoords='figure fraction', fontsize=32,
478.                 va='top')
479. 
480.     ax.annotate('+ pixels',
481.                 xytext=[50, 50], textcoords='figure pixels',
482.                 xy=[50, 50], xycoords='figure pixels', fontsize=32)
483.     ax.annotate('- pixels',
484.                 xytext=[-50, 100], textcoords='figure pixels',
485.                 xy=[-50, 100], xycoords='figure pixels', fontsize=32,
486.                 va='top')
487. 
488. 
489. def test_text_stale():
490.     fig, (ax1, ax2) = plt.subplots(1, 2)
491.     plt.draw_all()
492.     assert not ax1.stale
493.     assert not ax2.stale
494.     assert not fig.stale
495. 
496.     txt1 = ax1.text(.5, .5, 'aardvark')
497.     assert ax1.stale
498.     assert txt1.stale
499.     assert fig.stale
500.

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 08:46:53,196 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the 'full content' of the file 'lib/matplotlib/tests/test_text.py'.\n2. Extended relevance:\n   - The user's purpose is to find examples of tests for `Text` object properties. This file contains numerous tests for the `Text` class, including properties like font styles, alignment, rotation, and antialiasing, making the entire file relevant to their goal of creating a new test.", relative_path='lib/matplotlib/tests/test_text.py', start_line=1, end_line=500)]
2025-12-21 08:46:53,198 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of lib/matplotlib/tests/test_text.py.
2025-12-21 08:46:53,198 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 08:46:53,198 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 08:46:53,198 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 2 existing contexts
2025-12-21 08:46:53,198 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-21 08:46:53,199 - thread-124313732646592.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-21 08:46:53,199 - thread-124313732646592.prometheus_context_collector - INFO - Successfully retrieved 3 context snippets
