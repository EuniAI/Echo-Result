2025-12-20 23:35:08,834 - thread-129214860756672.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: autodoc: empty __all__ attribute is ignored

Description: **Describe the bug**
autodoc: empty `__all__` attribute is ignored

**To Reproduce**
```
# example.py
__all__ = []


def foo():
    "docstring"


def bar():
    "docstring"


def baz():
    "docstring"
```
```
# index.rst
.. automodule:: example
   :members:
```

All foo, bar, and baz are shown.

**Expected behavior**
No entries should be shown because `__all__` is empty.

**Your project**
No

**Screenshots**
No

**Environment info**
- OS: Mac
- Python version: 3.9.1
- Sphinx version: HEAD of 3.x
- Sphinx extensions: sphinx.ext.autodoc
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index d85d79617..de94106b4 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1074,10 +1074,13 @@ class ModuleDocumenter(Documenter):
     def get_object_members(self, want_all: bool) -> Tuple[bool, ObjectMembers]:
         members = self.get_module_members()
         if want_all:
-            if not self.__all__:
+            if self.__all__ is None:
                 # for implicit module members, check __module__ to avoid
                 # documenting imported objects
                 return True, list(members.values())
+            elif not self.__all__:  # This handles empty list case
+                # If __all__ is an empty list, return no members
+                return False, []
             else:
                 for member in members.values():
                     if member.__name__ not in self.__all__:


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-20 23:35:08,897 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       ├── main.yml
|       └── nodejs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── annotations.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── methods.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-two-links
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: autodoc: empty __all__ attribute is ignored

Description: **Describe the bug**
autodoc: empty `__all__` attribute is ignored

**To Reproduce**
```
# example.py
__all__ = []


def foo():
    "docstring"


def bar():
    "docstring"


def baz():
    "docstring"
```
```
# index.rst
.. automodule:: example
   :members:
```

All foo, bar, and baz are shown.

**Expected behavior**
No entries should be shown because `__all__` is empty.

**Your project**
No

**Screenshots**
No

**Environment info**
- OS: Mac
- Python version: 3.9.1
- Sphinx version: HEAD of 3.x
- Sphinx extensions: sphinx.ext.autodoc
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index d85d79617..de94106b4 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1074,10 +1074,13 @@ class ModuleDocumenter(Documenter):
     def get_object_members(self, want_all: bool) -> Tuple[bool, ObjectMembers]:
         members = self.get_module_members()
         if want_all:
-            if not self.__all__:
+            if self.__all__ is None:
                 # for implicit module members, check __module__ to avoid
                 # documenting imported objects
                 return True, list(members.values())
+            elif not self.__all__:  # This handles empty list case
+                # If __all__ is an empty list, return no members
+                return False, []
             else:
                 for member in members.values():
                     if member.__name__ not in self.__all__:


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-20 23:35:34,259 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find 3 relevant test cases for a bug in Sphinx's `autodoc` extension where an empty `__all__` attribute is ignored. To do this, I need to examine the tests for `autodoc`. The most relevant test file is likely `tests/test_ext_autodoc.py`. I also need to see the code that is being tested, and `tests/roots/test-ext-autodoc/target/sort_by_all.py` seems highly relevant given its name. I need the full content of these files to understand the test setup, assertions, and any helper functions or fixtures used." query='Please provide the full content of `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`.' extra_requirements='' purpose='To identify relevant test cases for the `autodoc` `__all__` bug, I need to analyze the main `autodoc` test file and the specific test module it uses for `__all__` related checks.'
2025-12-20 23:35:34,422 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`.
2025-12-20 23:35:34,422 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-20 23:35:34,423 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-20 23:35:34,424 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-20 23:35:34,424 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`.
Purpose: To identify relevant test cases for the `autodoc` `__all__` bug, I need to analyze the main `autodoc` test file and the specific test module it uses for `__all__` related checks.
2025-12-20 23:35:37,243 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of both `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py` as requested. This will allow you to analyze the test cases related to the `autodoc` `__all__` bug.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/roots/test-ext-autodoc/target/sort_by_all.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2123, 'candidates_token_count': 127, 'total_token_count': 2409, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2123}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 127}], 'thoughts_token_count': 159, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07169045425775483, 'model_name': 'gemini-2.5-pro'} id='run--bdce658b-0df1-48a4-b1cf-4ee03027e6d6-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_ext_autodoc.py'}, 'id': '47d3ebcc-74d2-48fa-bf2c-a074d119cdfe', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/target/sort_by_all.py'}, 'id': '4fedd2dd-22fb-494e-b45d-5c512189477d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2123, 'output_tokens': 127, 'total_tokens': 2409, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 159}}
2025-12-20 23:35:43,517 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of both `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`. This provides the main test file for the `autodoc` extension and a specific test module for `__all__` related checks. Analyzing these files should help you identify the relevant test cases for the `autodoc` `__all__` bug.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9964, 'candidates_token_count': 94, 'total_token_count': 10697, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9964}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 94}], 'thoughts_token_count': 639, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5772329695681309, 'model_name': 'gemini-2.5-pro'} id='run--5e889ff1-3f9e-43cb-88ba-9ac9b9b2f406-0' usage_metadata={'input_tokens': 9964, 'output_tokens': 94, 'total_tokens': 10697, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 639}}
2025-12-20 23:35:43,519 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
To identify relevant test cases for the `autodoc` `__all__` bug, I need to analyze the main `autodoc` test file and the specific test module it uses for `__all__` related checks.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/roots/test-ext-autodoc/target/sort_by_all.py
Line number range: 1 - 25
Content:
1. __all__ = ['baz', 'foo', 'Bar']
2. 
3. 
4. def foo():
5.     pass
6. 
7. 
8. class Bar:
9.     pass
10. 
11. 
12. def baz():
13.     pass
14. 
15. 
16. def qux():
17.     pass
18. 
19. 
20. class Quux:
21.     pass
22. 
23. 
24. def foobar():
25.     pass


File: tests/test_ext_autodoc.py
Line number range: 1 - 500
Content:
1. """
2.     test_ext_autodoc
3.     ~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.  This tests mainly the Documenters; the auto
6.     directives are tested in a test source file translated by test_build.
7. 
8.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import sys
13. from unittest.mock import Mock
14. from warnings import catch_warnings
15. 
16. import pytest
17. from docutils.statemachine import ViewList
18. 
19. from sphinx import addnodes
20. from sphinx.ext.autodoc import ALL, ModuleLevelDocumenter, Options
21. from sphinx.ext.autodoc.directive import DocumenterBridge, process_documenter_options
22. from sphinx.testing.util import SphinxTestApp, Struct  # NOQA
23. from sphinx.util.docutils import LoggingReporter
24. 
25. try:
26.     # Enable pyximport to test cython module
27.     import pyximport
28.     pyximport.install()
29. except ImportError:
30.     pyximport = None
31. 
32. 
33. def do_autodoc(app, objtype, name, options=None):
34.     if options is None:
35.         options = {}
36.     app.env.temp_data.setdefault('docname', 'index')  # set dummy docname
37.     doccls = app.registry.documenters[objtype]
38.     docoptions = process_documenter_options(doccls, app.config, options)
39.     state = Mock()
40.     state.document.settings.tab_width = 8
41.     bridge = DocumenterBridge(app.env, LoggingReporter(''), docoptions, 1, state)
42.     documenter = doccls(bridge, name)
43.     documenter.generate()
44. 
45.     return bridge.result
46. 
47. 
48. def make_directive_bridge(env):
49.     options = Options(
50.         inherited_members = False,
51.         undoc_members = False,
52.         private_members = False,
53.         special_members = False,
54.         imported_members = False,
55.         show_inheritance = False,
56.         noindex = False,
57.         annotation = None,
58.         synopsis = '',
59.         platform = '',
60.         deprecated = False,
61.         members = [],
62.         member_order = 'alphabetical',
63.         exclude_members = set(),
64.         ignore_module_all = False,
65.     )
66. 
67.     directive = Struct(
68.         env = env,
69.         genopt = options,
70.         result = ViewList(),
71.         filename_set = set(),
72.         state = Mock(),
73.     )
74.     directive.state.document.settings.tab_width = 8
75. 
76.     return directive
77. 
78. 
79. processed_signatures = []
80. 
81. 
82. def process_signature(app, what, name, obj, options, args, retann):
83.     processed_signatures.append((what, name))
84.     if name == 'bar':
85.         return '42', None
86. 
87. 
88. def skip_member(app, what, name, obj, skip, options):
89.     if name in ('__special1__', '__special2__'):
90.         return skip
91.     if name.startswith('__'):
92.         return True
93.     if name == 'skipmeth':
94.         return True
95. 
96. 
97. def test_parse_name(app):
98.     def verify(objtype, name, result):
99.         inst = app.registry.documenters[objtype](directive, name)
100.         assert inst.parse_name()
101.         assert (inst.modname, inst.objpath, inst.args, inst.retann) == result
102. 
103.     directive = make_directive_bridge(app.env)
104. 
105.     # for modules
106.     verify('module', 'test_ext_autodoc', ('test_ext_autodoc', [], None, None))
107.     verify('module', 'test.test_ext_autodoc', ('test.test_ext_autodoc', [], None, None))
108.     verify('module', 'test(arg)', ('test', [], 'arg', None))
109.     assert 'signature arguments' in app._warning.getvalue()
110. 
111.     # for functions/classes
112.     verify('function', 'test_ext_autodoc.raises',
113.            ('test_ext_autodoc', ['raises'], None, None))
114.     verify('function', 'test_ext_autodoc.raises(exc) -> None',
115.            ('test_ext_autodoc', ['raises'], 'exc', 'None'))
116.     directive.env.temp_data['autodoc:module'] = 'test_ext_autodoc'
117.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
118.     del directive.env.temp_data['autodoc:module']
119.     directive.env.ref_context['py:module'] = 'test_ext_autodoc'
120.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
121.     verify('class', 'Base', ('test_ext_autodoc', ['Base'], None, None))
122. 
123.     # for members
124.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
125.     verify('method', 'SphinxTestApp.cleanup',
126.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
127.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
128.     directive.env.ref_context['py:class'] = 'Foo'
129.     directive.env.temp_data['autodoc:class'] = 'SphinxTestApp'
130.     verify('method', 'cleanup',
131.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
132.     verify('method', 'SphinxTestApp.cleanup',
133.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
134. 
135. 
136. def test_format_signature(app):
137.     app.connect('autodoc-process-signature', process_signature)
138.     app.connect('autodoc-skip-member', skip_member)
139. 
140.     directive = make_directive_bridge(app.env)
141. 
142.     def formatsig(objtype, name, obj, args, retann):
143.         inst = app.registry.documenters[objtype](directive, name)
144.         inst.fullname = name
145.         inst.doc_as_attr = False  # for class objtype
146.         inst.parent = object  # dummy
147.         inst.object = obj
148.         inst.objpath = [name]
149.         inst.args = args
150.         inst.retann = retann
151.         res = inst.format_signature()
152.         print(res)
153.         return res
154. 
155.     # no signatures for modules
156.     assert formatsig('module', 'test', None, None, None) == ''
157. 
158.     # test for functions
159.     def f(a, b, c=1, **d):
160.         pass
161. 
162.     def g(a='\n'):
163.         pass
164.     assert formatsig('function', 'f', f, None, None) == '(a, b, c=1, **d)'
165.     assert formatsig('function', 'f', f, 'a, b, c, d', None) == '(a, b, c, d)'
166.     assert formatsig('function', 'g', g, None, None) == r"(a='\n')"
167. 
168.     # test for classes
169.     class D:
170.         pass
171. 
172.     class E:
173.         def __init__(self):
174.             pass
175. 
176.     # an empty init and no init are the same
177.     for C in (D, E):
178.         assert formatsig('class', 'D', C, None, None) == '()'
179. 
180.     class SomeMeta(type):
181.         def __call__(cls, a, b=None):
182.             return type.__call__(cls, a, b)
183. 
184.     # these three are all equivalent
185.     class F:
186.         def __init__(self, a, b=None):
187.             pass
188. 
189.     class FNew:
190.         def __new__(cls, a, b=None):
191.             return super().__new__(cls)
192. 
193.     class FMeta(metaclass=SomeMeta):
194.         pass
195. 
196.     # and subclasses should always inherit
197.     class G(F):
198.         pass
199. 
200.     class GNew(FNew):
201.         pass
202. 
203.     class GMeta(FMeta):
204.         pass
205. 
206.     # subclasses inherit
207.     for C in (F, FNew, FMeta, G, GNew, GMeta):
208.         assert formatsig('class', 'C', C, None, None) == '(a, b=None)'
209.     assert formatsig('class', 'C', D, 'a, b', 'X') == '(a, b) -> X'
210. 
211.     class ListSubclass(list):
212.         pass
213. 
214.     # only supported if the python implementation decides to document it
215.     if getattr(list, '__text_signature__', None) is not None:
216.         assert formatsig('class', 'C', ListSubclass, None, None) == '(iterable=(), /)'
217.     else:
218.         assert formatsig('class', 'C', ListSubclass, None, None) == ''
219. 
220.     class ExceptionSubclass(Exception):
221.         pass
222. 
223.     # Exception has no __text_signature__ at least in Python 3.8
224.     if getattr(Exception, '__text_signature__', None) is None:
225.         assert formatsig('class', 'C', ExceptionSubclass, None, None) == ''
226. 
227.     # __init__ have signature at first line of docstring
228.     directive.env.config.autoclass_content = 'both'
229. 
230.     class F2:
231.         '''some docstring for F2.'''
232.         def __init__(self, *args, **kw):
233.             '''
234.             __init__(a1, a2, kw1=True, kw2=False)
235. 
236.             some docstring for __init__.
237.             '''
238.     class G2(F2):
239.         pass
240. 
241.     assert formatsig('class', 'F2', F2, None, None) == \
242.         '(a1, a2, kw1=True, kw2=False)'
243.     assert formatsig('class', 'G2', G2, None, None) == \
244.         '(a1, a2, kw1=True, kw2=False)'
245. 
246.     # test for methods
247.     class H:
248.         def foo1(self, b, *c):
249.             pass
250. 
251.         def foo2(b, *c):
252.             pass
253. 
254.         def foo3(self, d='\n'):
255.             pass
256.     assert formatsig('method', 'H.foo', H.foo1, None, None) == '(b, *c)'
257.     assert formatsig('method', 'H.foo', H.foo1, 'a', None) == '(a)'
258.     assert formatsig('method', 'H.foo', H.foo2, None, None) == '(*c)'
259.     assert formatsig('method', 'H.foo', H.foo3, None, None) == r"(d='\n')"
260. 
261.     # test bound methods interpreted as functions
262.     assert formatsig('function', 'foo', H().foo1, None, None) == '(b, *c)'
263.     assert formatsig('function', 'foo', H().foo2, None, None) == '(*c)'
264.     assert formatsig('function', 'foo', H().foo3, None, None) == r"(d='\n')"
265. 
266.     # test exception handling (exception is caught and args is '')
267.     directive.env.config.autodoc_docstring_signature = False
268.     assert formatsig('function', 'int', int, None, None) == ''
269. 
270.     # test processing by event handler
271.     assert formatsig('method', 'bar', H.foo1, None, None) == '42'
272. 
273.     # test functions created via functools.partial
274.     from functools import partial
275.     curried1 = partial(lambda a, b, c: None, 'A')
276.     assert formatsig('function', 'curried1', curried1, None, None) == \
277.         '(b, c)'
278.     curried2 = partial(lambda a, b, c=42: None, 'A')
279.     assert formatsig('function', 'curried2', curried2, None, None) == \
280.         '(b, c=42)'
281.     curried3 = partial(lambda a, b, *c: None, 'A')
282.     assert formatsig('function', 'curried3', curried3, None, None) == \
283.         '(b, *c)'
284.     curried4 = partial(lambda a, b, c=42, *d, **e: None, 'A')
285.     assert formatsig('function', 'curried4', curried4, None, None) == \
286.         '(b, c=42, *d, **e)'
287. 
288. 
289. @pytest.mark.skipif(sys.version_info < (3, 5), reason='typing is available since python3.5.')
290. @pytest.mark.sphinx('html', testroot='ext-autodoc')
291. def test_autodoc_process_signature_typing_generic(app):
292.     actual = do_autodoc(app, 'class', 'target.generic_class.A', {})
293. 
294.     assert list(actual) == [
295.         '',
296.         '.. py:class:: A(a, b=None)',
297.         '   :module: target.generic_class',
298.         '',
299.         '   docstring for A',
300.         '',
301.     ]
302. 
303. 
304. def test_autodoc_process_signature_typehints(app):
305.     captured = []
306. 
307.     def process_signature(*args):
308.         captured.append(args)
309. 
310.     app.connect('autodoc-process-signature', process_signature)
311. 
312.     def func(x: int, y: int) -> int:
313.         pass
314. 
315.     directive = make_directive_bridge(app.env)
316.     inst = app.registry.documenters['function'](directive, 'func')
317.     inst.fullname = 'func'
318.     inst.object = func
319.     inst.objpath = ['func']
320.     inst.format_signature()
321.     assert captured == [(app, 'function', 'func', func,
322.                          directive.genopt, '(x: int, y: int)', 'int')]
323. 
324. 
325. def test_get_doc(app):
326.     directive = make_directive_bridge(app.env)
327. 
328.     def getdocl(objtype, obj):
329.         inst = app.registry.documenters[objtype](directive, 'tmp')
330.         inst.parent = object  # dummy
331.         inst.object = obj
332.         inst.objpath = [obj.__name__]
333.         inst.doc_as_attr = False
334.         inst.format_signature()  # handle docstring signatures!
335.         ds = inst.get_doc()
336.         # for testing purposes, concat them and strip the empty line at the end
337.         res = sum(ds, [])[:-1]
338.         print(res)
339.         return res
340. 
341.     # objects without docstring
342.     def f():
343.         pass
344.     assert getdocl('function', f) == []
345. 
346.     # standard function, diverse docstring styles...
347.     def f():
348.         """Docstring"""
349.     def g():
350.         """
351.         Docstring
352.         """
353.     for func in (f, g):
354.         assert getdocl('function', func) == ['Docstring']
355. 
356.     # first line vs. other lines indentation
357.     def f():
358.         """First line
359. 
360.         Other
361.           lines
362.         """
363.     assert getdocl('function', f) == ['First line', '', 'Other', '  lines']
364. 
365.     # charset guessing (this module is encoded in utf-8)
366.     def f():
367.         """Döcstring"""
368.     assert getdocl('function', f) == ['Döcstring']
369. 
370.     # verify that method docstrings get extracted in both normal case
371.     # and in case of bound method posing as a function
372.     class J:  # NOQA
373.         def foo(self):
374.             """Method docstring"""
375.     assert getdocl('method', J.foo) == ['Method docstring']
376.     assert getdocl('function', J().foo) == ['Method docstring']
377. 
378. 
379. @pytest.mark.sphinx('html', testroot='ext-autodoc')
380. def test_new_documenter(app):
381.     class MyDocumenter(ModuleLevelDocumenter):
382.         objtype = 'integer'
383.         directivetype = 'integer'
384.         priority = 100
385. 
386.         @classmethod
387.         def can_document_member(cls, member, membername, isattr, parent):
388.             return isinstance(member, int)
389. 
390.         def document_members(self, all_members=False):
391.             return
392. 
393.     app.add_autodocumenter(MyDocumenter)
394. 
395.     options = {"members": 'integer'}
396.     actual = do_autodoc(app, 'module', 'target', options)
397.     assert list(actual) == [
398.         '',
399.         '.. py:module:: target',
400.         '',
401.         '',
402.         '.. py:integer:: integer',
403.         '   :module: target',
404.         '',
405.         '   documentation for the integer',
406.         '',
407.     ]
408. 
409. 
410. def test_attrgetter_using(app):
411.     from target import Class
412.     from target.inheritance import Derived
413. 
414.     directive = make_directive_bridge(app.env)
415. 
416.     def assert_getter_works(objtype, name, obj, attrs=[], **kw):
417.         getattr_spy = []
418. 
419.         def special_getattr(obj, name, *defargs):
420.             if name in attrs:
421.                 getattr_spy.append((obj, name))
422.                 return None
423.             return getattr(obj, name, *defargs)
424.         app.add_autodoc_attrgetter(type, special_getattr)
425. 
426.         del getattr_spy[:]
427.         inst = app.registry.documenters[objtype](directive, name)
428.         inst.generate(**kw)
429. 
430.         hooked_members = [s[1] for s in getattr_spy]
431.         documented_members = [s[1] for s in processed_signatures]
432.         for attr in attrs:
433.             fullname = '.'.join((name, attr))
434.             assert attr in hooked_members
435.             assert fullname not in documented_members, \
436.                 '%r was not hooked by special_attrgetter function' % fullname
437. 
438.     with catch_warnings(record=True):
439.         directive.genopt['members'] = ALL
440.         directive.genopt['inherited_members'] = False
441.         print(directive.genopt)
442.         assert_getter_works('class', 'target.Class', Class, ['meth'])
443. 
444.         directive.genopt['inherited_members'] = True
445.         assert_getter_works('class', 'target.inheritance.Derived', Derived, ['inheritedmeth'])
446. 
447. 
448. @pytest.mark.sphinx('html', testroot='ext-autodoc')
449. def test_py_module(app, warning):
450.     # without py:module
451.     actual = do_autodoc(app, 'method', 'Class.meth')
452.     assert list(actual) == []
453.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
454.             in warning.getvalue())
455. 
456.     # with py:module
457.     app.env.ref_context['py:module'] = 'target'
458.     warning.truncate(0)
459. 
460.     actual = do_autodoc(app, 'method', 'Class.meth')
461.     assert list(actual) == [
462.         '',
463.         '.. py:method:: Class.meth()',
464.         '   :module: target',
465.         '',
466.         '   Function.',
467.         '',
468.     ]
469.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
470.             not in warning.getvalue())
471. 
472. 
473. @pytest.mark.sphinx('html', testroot='ext-autodoc')
474. def test_autodoc_decorator(app):
475.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco1')
476.     assert list(actual) == [
477.         '',
478.         '.. py:decorator:: deco1',
479.         '   :module: target.decorator',
480.         '',
481.         '   docstring for deco1',
482.         '',
483.     ]
484. 
485.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco2')
486.     assert list(actual) == [
487.         '',
488.         '.. py:decorator:: deco2(condition, message)',
489.         '   :module: target.decorator',
490.         '',
491.         '   docstring for deco2',
492.         '',
493.     ]
494. 
495. 
496. @pytest.mark.sphinx('html', testroot='ext-autodoc')
497. def test_autodoc_exception(app):
498.     actual = do_autodoc(app, 'exception', 'target.CustomEx')
499.     assert list(actual) == [
500.         '',

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-20 23:35:49,166 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly requested the full content of this file. The provided context includes all lines from 1 to 500, which represents the complete file as available in the context.', relative_path='tests/test_ext_autodoc.py', start_line=1, end_line=500), ContextOutput(reasoning='The user explicitly requested the full content of this file. The provided context includes all lines from 1 to 25, which represents the complete file as available in the context.', relative_path='tests/roots/test-ext-autodoc/target/sort_by_all.py', start_line=1, end_line=25)]
2025-12-20 23:35:49,168 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`.
2025-12-20 23:35:49,168 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-20 23:35:49,168 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-20 23:35:49,168 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 0 existing contexts
2025-12-20 23:35:49,168 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-20 23:35:49,169 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       ├── main.yml
|       └── nodejs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── annotations.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── methods.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-two-links
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: autodoc: empty __all__ attribute is ignored

Description: **Describe the bug**
autodoc: empty `__all__` attribute is ignored

**To Reproduce**
```
# example.py
__all__ = []


def foo():
    "docstring"


def bar():
    "docstring"


def baz():
    "docstring"
```
```
# index.rst
.. automodule:: example
   :members:
```

All foo, bar, and baz are shown.

**Expected behavior**
No entries should be shown because `__all__` is empty.

**Your project**
No

**Screenshots**
No

**Environment info**
- OS: Mac
- Python version: 3.9.1
- Sphinx version: HEAD of 3.x
- Sphinx extensions: sphinx.ext.autodoc
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index d85d79617..de94106b4 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1074,10 +1074,13 @@ class ModuleDocumenter(Documenter):
     def get_object_members(self, want_all: bool) -> Tuple[bool, ObjectMembers]:
         members = self.get_module_members()
         if want_all:
-            if not self.__all__:
+            if self.__all__ is None:
                 # for implicit module members, check __module__ to avoid
                 # documenting imported objects
                 return True, list(members.values())
+            elif not self.__all__:  # This handles empty list case
+                # If __all__ is an empty list, return no members
+                return False, []
             else:
                 for member in members.values():
                     if member.__name__ not in self.__all__:


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`.
Extra Requirements: 
Purpose: To identify relevant test cases for the `autodoc` `__all__` bug, I need to analyze the main `autodoc` test file and the specific test module it uses for `__all__` related checks.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/roots/test-ext-autodoc/target/sort_by_all.py
Line number range: 1 - 25
Content:
1. __all__ = ['baz', 'foo', 'Bar']
2. 
3. 
4. def foo():
5.     pass
6. 
7. 
8. class Bar:
9.     pass
10. 
11. 
12. def baz():
13.     pass
14. 
15. 
16. def qux():
17.     pass
18. 
19. 
20. class Quux:
21.     pass
22. 
23. 
24. def foobar():
25.     pass


File: tests/test_ext_autodoc.py
Line number range: 1 - 500
Content:
1. """
2.     test_ext_autodoc
3.     ~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.  This tests mainly the Documenters; the auto
6.     directives are tested in a test source file translated by test_build.
7. 
8.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import sys
13. from unittest.mock import Mock
14. from warnings import catch_warnings
15. 
16. import pytest
17. from docutils.statemachine import ViewList
18. 
19. from sphinx import addnodes
20. from sphinx.ext.autodoc import ALL, ModuleLevelDocumenter, Options
21. from sphinx.ext.autodoc.directive import DocumenterBridge, process_documenter_options
22. from sphinx.testing.util import SphinxTestApp, Struct  # NOQA
23. from sphinx.util.docutils import LoggingReporter
24. 
25. try:
26.     # Enable pyximport to test cython module
27.     import pyximport
28.     pyximport.install()
29. except ImportError:
30.     pyximport = None
31. 
32. 
33. def do_autodoc(app, objtype, name, options=None):
34.     if options is None:
35.         options = {}
36.     app.env.temp_data.setdefault('docname', 'index')  # set dummy docname
37.     doccls = app.registry.documenters[objtype]
38.     docoptions = process_documenter_options(doccls, app.config, options)
39.     state = Mock()
40.     state.document.settings.tab_width = 8
41.     bridge = DocumenterBridge(app.env, LoggingReporter(''), docoptions, 1, state)
42.     documenter = doccls(bridge, name)
43.     documenter.generate()
44. 
45.     return bridge.result
46. 
47. 
48. def make_directive_bridge(env):
49.     options = Options(
50.         inherited_members = False,
51.         undoc_members = False,
52.         private_members = False,
53.         special_members = False,
54.         imported_members = False,
55.         show_inheritance = False,
56.         noindex = False,
57.         annotation = None,
58.         synopsis = '',
59.         platform = '',
60.         deprecated = False,
61.         members = [],
62.         member_order = 'alphabetical',
63.         exclude_members = set(),
64.         ignore_module_all = False,
65.     )
66. 
67.     directive = Struct(
68.         env = env,
69.         genopt = options,
70.         result = ViewList(),
71.         filename_set = set(),
72.         state = Mock(),
73.     )
74.     directive.state.document.settings.tab_width = 8
75. 
76.     return directive
77. 
78. 
79. processed_signatures = []
80. 
81. 
82. def process_signature(app, what, name, obj, options, args, retann):
83.     processed_signatures.append((what, name))
84.     if name == 'bar':
85.         return '42', None
86. 
87. 
88. def skip_member(app, what, name, obj, skip, options):
89.     if name in ('__special1__', '__special2__'):
90.         return skip
91.     if name.startswith('__'):
92.         return True
93.     if name == 'skipmeth':
94.         return True
95. 
96. 
97. def test_parse_name(app):
98.     def verify(objtype, name, result):
99.         inst = app.registry.documenters[objtype](directive, name)
100.         assert inst.parse_name()
101.         assert (inst.modname, inst.objpath, inst.args, inst.retann) == result
102. 
103.     directive = make_directive_bridge(app.env)
104. 
105.     # for modules
106.     verify('module', 'test_ext_autodoc', ('test_ext_autodoc', [], None, None))
107.     verify('module', 'test.test_ext_autodoc', ('test.test_ext_autodoc', [], None, None))
108.     verify('module', 'test(arg)', ('test', [], 'arg', None))
109.     assert 'signature arguments' in app._warning.getvalue()
110. 
111.     # for functions/classes
112.     verify('function', 'test_ext_autodoc.raises',
113.            ('test_ext_autodoc', ['raises'], None, None))
114.     verify('function', 'test_ext_autodoc.raises(exc) -> None',
115.            ('test_ext_autodoc', ['raises'], 'exc', 'None'))
116.     directive.env.temp_data['autodoc:module'] = 'test_ext_autodoc'
117.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
118.     del directive.env.temp_data['autodoc:module']
119.     directive.env.ref_context['py:module'] = 'test_ext_autodoc'
120.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
121.     verify('class', 'Base', ('test_ext_autodoc', ['Base'], None, None))
122. 
123.     # for members
124.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
125.     verify('method', 'SphinxTestApp.cleanup',
126.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
127.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
128.     directive.env.ref_context['py:class'] = 'Foo'
129.     directive.env.temp_data['autodoc:class'] = 'SphinxTestApp'
130.     verify('method', 'cleanup',
131.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
132.     verify('method', 'SphinxTestApp.cleanup',
133.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
134. 
135. 
136. def test_format_signature(app):
137.     app.connect('autodoc-process-signature', process_signature)
138.     app.connect('autodoc-skip-member', skip_member)
139. 
140.     directive = make_directive_bridge(app.env)
141. 
142.     def formatsig(objtype, name, obj, args, retann):
143.         inst = app.registry.documenters[objtype](directive, name)
144.         inst.fullname = name
145.         inst.doc_as_attr = False  # for class objtype
146.         inst.parent = object  # dummy
147.         inst.object = obj
148.         inst.objpath = [name]
149.         inst.args = args
150.         inst.retann = retann
151.         res = inst.format_signature()
152.         print(res)
153.         return res
154. 
155.     # no signatures for modules
156.     assert formatsig('module', 'test', None, None, None) == ''
157. 
158.     # test for functions
159.     def f(a, b, c=1, **d):
160.         pass
161. 
162.     def g(a='\n'):
163.         pass
164.     assert formatsig('function', 'f', f, None, None) == '(a, b, c=1, **d)'
165.     assert formatsig('function', 'f', f, 'a, b, c, d', None) == '(a, b, c, d)'
166.     assert formatsig('function', 'g', g, None, None) == r"(a='\n')"
167. 
168.     # test for classes
169.     class D:
170.         pass
171. 
172.     class E:
173.         def __init__(self):
174.             pass
175. 
176.     # an empty init and no init are the same
177.     for C in (D, E):
178.         assert formatsig('class', 'D', C, None, None) == '()'
179. 
180.     class SomeMeta(type):
181.         def __call__(cls, a, b=None):
182.             return type.__call__(cls, a, b)
183. 
184.     # these three are all equivalent
185.     class F:
186.         def __init__(self, a, b=None):
187.             pass
188. 
189.     class FNew:
190.         def __new__(cls, a, b=None):
191.             return super().__new__(cls)
192. 
193.     class FMeta(metaclass=SomeMeta):
194.         pass
195. 
196.     # and subclasses should always inherit
197.     class G(F):
198.         pass
199. 
200.     class GNew(FNew):
201.         pass
202. 
203.     class GMeta(FMeta):
204.         pass
205. 
206.     # subclasses inherit
207.     for C in (F, FNew, FMeta, G, GNew, GMeta):
208.         assert formatsig('class', 'C', C, None, None) == '(a, b=None)'
209.     assert formatsig('class', 'C', D, 'a, b', 'X') == '(a, b) -> X'
210. 
211.     class ListSubclass(list):
212.         pass
213. 
214.     # only supported if the python implementation decides to document it
215.     if getattr(list, '__text_signature__', None) is not None:
216.         assert formatsig('class', 'C', ListSubclass, None, None) == '(iterable=(), /)'
217.     else:
218.         assert formatsig('class', 'C', ListSubclass, None, None) == ''
219. 
220.     class ExceptionSubclass(Exception):
221.         pass
222. 
223.     # Exception has no __text_signature__ at least in Python 3.8
224.     if getattr(Exception, '__text_signature__', None) is None:
225.         assert formatsig('class', 'C', ExceptionSubclass, None, None) == ''
226. 
227.     # __init__ have signature at first line of docstring
228.     directive.env.config.autoclass_content = 'both'
229. 
230.     class F2:
231.         '''some docstring for F2.'''
232.         def __init__(self, *args, **kw):
233.             '''
234.             __init__(a1, a2, kw1=True, kw2=False)
235. 
236.             some docstring for __init__.
237.             '''
238.     class G2(F2):
239.         pass
240. 
241.     assert formatsig('class', 'F2', F2, None, None) == \
242.         '(a1, a2, kw1=True, kw2=False)'
243.     assert formatsig('class', 'G2', G2, None, None) == \
244.         '(a1, a2, kw1=True, kw2=False)'
245. 
246.     # test for methods
247.     class H:
248.         def foo1(self, b, *c):
249.             pass
250. 
251.         def foo2(b, *c):
252.             pass
253. 
254.         def foo3(self, d='\n'):
255.             pass
256.     assert formatsig('method', 'H.foo', H.foo1, None, None) == '(b, *c)'
257.     assert formatsig('method', 'H.foo', H.foo1, 'a', None) == '(a)'
258.     assert formatsig('method', 'H.foo', H.foo2, None, None) == '(*c)'
259.     assert formatsig('method', 'H.foo', H.foo3, None, None) == r"(d='\n')"
260. 
261.     # test bound methods interpreted as functions
262.     assert formatsig('function', 'foo', H().foo1, None, None) == '(b, *c)'
263.     assert formatsig('function', 'foo', H().foo2, None, None) == '(*c)'
264.     assert formatsig('function', 'foo', H().foo3, None, None) == r"(d='\n')"
265. 
266.     # test exception handling (exception is caught and args is '')
267.     directive.env.config.autodoc_docstring_signature = False
268.     assert formatsig('function', 'int', int, None, None) == ''
269. 
270.     # test processing by event handler
271.     assert formatsig('method', 'bar', H.foo1, None, None) == '42'
272. 
273.     # test functions created via functools.partial
274.     from functools import partial
275.     curried1 = partial(lambda a, b, c: None, 'A')
276.     assert formatsig('function', 'curried1', curried1, None, None) == \
277.         '(b, c)'
278.     curried2 = partial(lambda a, b, c=42: None, 'A')
279.     assert formatsig('function', 'curried2', curried2, None, None) == \
280.         '(b, c=42)'
281.     curried3 = partial(lambda a, b, *c: None, 'A')
282.     assert formatsig('function', 'curried3', curried3, None, None) == \
283.         '(b, *c)'
284.     curried4 = partial(lambda a, b, c=42, *d, **e: None, 'A')
285.     assert formatsig('function', 'curried4', curried4, None, None) == \
286.         '(b, c=42, *d, **e)'
287. 
288. 
289. @pytest.mark.skipif(sys.version_info < (3, 5), reason='typing is available since python3.5.')
290. @pytest.mark.sphinx('html', testroot='ext-autodoc')
291. def test_autodoc_process_signature_typing_generic(app):
292.     actual = do_autodoc(app, 'class', 'target.generic_class.A', {})
293. 
294.     assert list(actual) == [
295.         '',
296.         '.. py:class:: A(a, b=None)',
297.         '   :module: target.generic_class',
298.         '',
299.         '   docstring for A',
300.         '',
301.     ]
302. 
303. 
304. def test_autodoc_process_signature_typehints(app):
305.     captured = []
306. 
307.     def process_signature(*args):
308.         captured.append(args)
309. 
310.     app.connect('autodoc-process-signature', process_signature)
311. 
312.     def func(x: int, y: int) -> int:
313.         pass
314. 
315.     directive = make_directive_bridge(app.env)
316.     inst = app.registry.documenters['function'](directive, 'func')
317.     inst.fullname = 'func'
318.     inst.object = func
319.     inst.objpath = ['func']
320.     inst.format_signature()
321.     assert captured == [(app, 'function', 'func', func,
322.                          directive.genopt, '(x: int, y: int)', 'int')]
323. 
324. 
325. def test_get_doc(app):
326.     directive = make_directive_bridge(app.env)
327. 
328.     def getdocl(objtype, obj):
329.         inst = app.registry.documenters[objtype](directive, 'tmp')
330.         inst.parent = object  # dummy
331.         inst.object = obj
332.         inst.objpath = [obj.__name__]
333.         inst.doc_as_attr = False
334.         inst.format_signature()  # handle docstring signatures!
335.         ds = inst.get_doc()
336.         # for testing purposes, concat them and strip the empty line at the end
337.         res = sum(ds, [])[:-1]
338.         print(res)
339.         return res
340. 
341.     # objects without docstring
342.     def f():
343.         pass
344.     assert getdocl('function', f) == []
345. 
346.     # standard function, diverse docstring styles...
347.     def f():
348.         """Docstring"""
349.     def g():
350.         """
351.         Docstring
352.         """
353.     for func in (f, g):
354.         assert getdocl('function', func) == ['Docstring']
355. 
356.     # first line vs. other lines indentation
357.     def f():
358.         """First line
359. 
360.         Other
361.           lines
362.         """
363.     assert getdocl('function', f) == ['First line', '', 'Other', '  lines']
364. 
365.     # charset guessing (this module is encoded in utf-8)
366.     def f():
367.         """Döcstring"""
368.     assert getdocl('function', f) == ['Döcstring']
369. 
370.     # verify that method docstrings get extracted in both normal case
371.     # and in case of bound method posing as a function
372.     class J:  # NOQA
373.         def foo(self):
374.             """Method docstring"""
375.     assert getdocl('method', J.foo) == ['Method docstring']
376.     assert getdocl('function', J().foo) == ['Method docstring']
377. 
378. 
379. @pytest.mark.sphinx('html', testroot='ext-autodoc')
380. def test_new_documenter(app):
381.     class MyDocumenter(ModuleLevelDocumenter):
382.         objtype = 'integer'
383.         directivetype = 'integer'
384.         priority = 100
385. 
386.         @classmethod
387.         def can_document_member(cls, member, membername, isattr, parent):
388.             return isinstance(member, int)
389. 
390.         def document_members(self, all_members=False):
391.             return
392. 
393.     app.add_autodocumenter(MyDocumenter)
394. 
395.     options = {"members": 'integer'}
396.     actual = do_autodoc(app, 'module', 'target', options)
397.     assert list(actual) == [
398.         '',
399.         '.. py:module:: target',
400.         '',
401.         '',
402.         '.. py:integer:: integer',
403.         '   :module: target',
404.         '',
405.         '   documentation for the integer',
406.         '',
407.     ]
408. 
409. 
410. def test_attrgetter_using(app):
411.     from target import Class
412.     from target.inheritance import Derived
413. 
414.     directive = make_directive_bridge(app.env)
415. 
416.     def assert_getter_works(objtype, name, obj, attrs=[], **kw):
417.         getattr_spy = []
418. 
419.         def special_getattr(obj, name, *defargs):
420.             if name in attrs:
421.                 getattr_spy.append((obj, name))
422.                 return None
423.             return getattr(obj, name, *defargs)
424.         app.add_autodoc_attrgetter(type, special_getattr)
425. 
426.         del getattr_spy[:]
427.         inst = app.registry.documenters[objtype](directive, name)
428.         inst.generate(**kw)
429. 
430.         hooked_members = [s[1] for s in getattr_spy]
431.         documented_members = [s[1] for s in processed_signatures]
432.         for attr in attrs:
433.             fullname = '.'.join((name, attr))
434.             assert attr in hooked_members
435.             assert fullname not in documented_members, \
436.                 '%r was not hooked by special_attrgetter function' % fullname
437. 
438.     with catch_warnings(record=True):
439.         directive.genopt['members'] = ALL
440.         directive.genopt['inherited_members'] = False
441.         print(directive.genopt)
442.         assert_getter_works('class', 'target.Class', Class, ['meth'])
443. 
444.         directive.genopt['inherited_members'] = True
445.         assert_getter_works('class', 'target.inheritance.Derived', Derived, ['inheritedmeth'])
446. 
447. 
448. @pytest.mark.sphinx('html', testroot='ext-autodoc')
449. def test_py_module(app, warning):
450.     # without py:module
451.     actual = do_autodoc(app, 'method', 'Class.meth')
452.     assert list(actual) == []
453.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
454.             in warning.getvalue())
455. 
456.     # with py:module
457.     app.env.ref_context['py:module'] = 'target'
458.     warning.truncate(0)
459. 
460.     actual = do_autodoc(app, 'method', 'Class.meth')
461.     assert list(actual) == [
462.         '',
463.         '.. py:method:: Class.meth()',
464.         '   :module: target',
465.         '',
466.         '   Function.',
467.         '',
468.     ]
469.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
470.             not in warning.getvalue())
471. 
472. 
473. @pytest.mark.sphinx('html', testroot='ext-autodoc')
474. def test_autodoc_decorator(app):
475.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco1')
476.     assert list(actual) == [
477.         '',
478.         '.. py:decorator:: deco1',
479.         '   :module: target.decorator',
480.         '',
481.         '   docstring for deco1',
482.         '',
483.     ]
484. 
485.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco2')
486.     assert list(actual) == [
487.         '',
488.         '.. py:decorator:: deco2(condition, message)',
489.         '   :module: target.decorator',
490.         '',
491.         '   docstring for deco2',
492.         '',
493.     ]
494. 
495. 
496. @pytest.mark.sphinx('html', testroot='ext-autodoc')
497. def test_autodoc_exception(app):
498.     actual = do_autodoc(app, 'exception', 'target.CustomEx')
499.     assert list(actual) == [
500.         '',

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-20 23:36:28,864 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to find test cases related to a bug in `autodoc`'s handling of the `__all__` attribute. The provided context for `tests/test_ext_autodoc.py` is incomplete, and I suspect the relevant tests are in the latter part of the file, especially those that might use `sort_by_all.py`. The bug report also includes an `.rst` snippet using `automodule`, so examining the test suite's `index.rst` will provide insight into how this is tested." query='Please provide the rest of the content for `tests/test_ext_autodoc.py` from line 501 to the end, and also provide the full content of `tests/roots/test-ext-autodoc/index.rst`.' extra_requirements='' purpose='This will allow me to find test cases that specifically deal with `__all__` and `automodule`, which are central to the reported bug.'
2025-12-20 23:36:28,865 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the rest of the content for `tests/test_ext_autodoc.py` from line 501 to the end, and also provide the full content of `tests/roots/test-ext-autodoc/index.rst`.
2025-12-20 23:36:28,865 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-20 23:36:28,866 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-20 23:36:28,867 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-20 23:36:28,867 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the rest of the content for `tests/test_ext_autodoc.py` from line 501 to the end, and also provide the full content of `tests/roots/test-ext-autodoc/index.rst`.
Purpose: This will allow me to find test cases that specifically deal with `__all__` and `automodule`, which are central to the reported bug.
2025-12-20 23:36:32,240 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will first retrieve the content of `tests/test_ext_autodoc.py` from line 501 to the end. To do this, I need to determine the total number of lines in the file. After that, I will fetch the entire content of `tests/roots/test-ext-autodoc/index.rst`.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/roots/test-ext-autodoc/index.rst"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2119, 'candidates_token_count': 124, 'total_token_count': 2468, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2119}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 124}], 'thoughts_token_count': 225, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.12636556933003087, 'model_name': 'gemini-2.5-pro'} id='run--8cfd88c5-8d50-4e7c-bcfd-f9ce250c0d41-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'tests/test_ext_autodoc.py'}, 'id': 'c5c525e4-af0c-4a6a-97bb-7d4b9410e00b', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/index.rst'}, 'id': 'ceb47596-772c-48b1-877e-869634c2917b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2119, 'output_tokens': 124, 'total_tokens': 2468, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 225}}
2025-12-20 23:36:35,094 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now fetched the remaining content of `tests/test_ext_autodoc.py` from line 501 onwards, as well as the complete content of `tests/roots/test-ext-autodoc/index.rst`. This provides the necessary context to analyze the test cases related to `__all__` and `automodule` for the reported bug.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"relative_path": "tests/test_ext_autodoc.py", "end_line": 10000.0, "start_line": 501.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2516, 'candidates_token_count': 108, 'total_token_count': 2775, 'cached_content_token_count': 1504, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2516}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1504}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 108}], 'thoughts_token_count': 151}, 'finish_reason': 'STOP', 'avg_logprobs': -0.169842384479664, 'model_name': 'gemini-2.5-pro'} id='run--04896163-728d-4f62-96ce-77f010b16d33-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'tests/test_ext_autodoc.py', 'end_line': 10000.0, 'start_line': 501.0}, 'id': 'f6a23ebc-4f66-4820-8a4d-f313f8588b22', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2516, 'output_tokens': 108, 'total_tokens': 2775, 'input_token_details': {'cache_read': 1504}, 'output_token_details': {'reasoning': 151}}
2025-12-20 23:36:40,280 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the requested content. I have fetched the content of `tests/test_ext_autodoc.py` from line 501 to the end of the file. Additionally, I have retrieved the entire content of the `tests/roots/test-ext-autodoc/index.rst` file.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 29935, 'candidates_token_count': 67, 'total_token_count': 30371, 'cached_content_token_count': 1812, 'prompt_tokens_details': [{'modality': 1, 'token_count': 29935}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1812}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 67}], 'thoughts_token_count': 369}, 'finish_reason': 'STOP', 'avg_logprobs': -0.4433310494494082, 'model_name': 'gemini-2.5-pro'} id='run--e4394ff2-1f90-49ac-989a-a73e15703d76-0' usage_metadata={'input_tokens': 29935, 'output_tokens': 67, 'total_tokens': 30371, 'input_token_details': {'cache_read': 1812}, 'output_token_details': {'reasoning': 369}}
2025-12-20 23:36:40,282 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the rest of the content for `tests/test_ext_autodoc.py` from line 501 to the end, and also provide the full content of `tests/roots/test-ext-autodoc/index.rst`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This will allow me to find test cases that specifically deal with `__all__` and `automodule`, which are central to the reported bug.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/roots/test-ext-autodoc/index.rst
Line number range: 1 - 13
Content:
1. 
2. .. automodule:: autodoc_dummy_module
3.    :members:
4. 
5. .. automodule:: bug2437.autodoc_dummy_foo
6.    :members:
7. 
8. .. automodule:: autodoc_dummy_bar
9.    :members:
10. 
11. .. autofunction:: target.typehints.incr
12. 
13. .. autofunction:: target.typehints.tuple_args


File: tests/test_ext_autodoc.py
Line number range: 501 - 10000
Content:
501.         '.. py:exception:: CustomEx',
502.         '   :module: target',
503.         '',
504.         '   My custom exception.',
505.         '',
506.     ]
507. 
508. 
509. @pytest.mark.sphinx('html', testroot='ext-autodoc')
510. def test_autodoc_warnings(app, warning):
511.     app.env.temp_data['docname'] = 'dummy'
512. 
513.     # can't import module
514.     do_autodoc(app, 'module', 'unknown')
515.     assert "failed to import module 'unknown'" in warning.getvalue()
516. 
517.     # missing function
518.     do_autodoc(app, 'function', 'unknown')
519.     assert "import for autodocumenting 'unknown'" in warning.getvalue()
520. 
521.     do_autodoc(app, 'function', 'target.unknown')
522.     assert "failed to import function 'unknown' from module 'target'" in warning.getvalue()
523. 
524.     # missing method
525.     do_autodoc(app, 'method', 'target.Class.unknown')
526.     assert "failed to import method 'Class.unknown' from module 'target'" in warning.getvalue()
527. 
528. 
529. @pytest.mark.sphinx('html', testroot='ext-autodoc')
530. def test_autodoc_attributes(app):
531.     options = {"synopsis": 'Synopsis',
532.                "platform": "Platform",
533.                "deprecated": None}
534.     actual = do_autodoc(app, 'module', 'target', options)
535.     assert list(actual) == [
536.         '',
537.         '.. py:module:: target',
538.         '   :synopsis: Synopsis',
539.         '   :platform: Platform',
540.         '   :deprecated:',
541.         ''
542.     ]
543. 
544. 
545. @pytest.mark.sphinx('html', testroot='ext-autodoc')
546. def test_autodoc_members(app):
547.     # default (no-members)
548.     actual = do_autodoc(app, 'class', 'target.inheritance.Base')
549.     assert list(filter(lambda l: '::' in l, actual)) == [
550.         '.. py:class:: Base()',
551.     ]
552. 
553.     # default ALL-members
554.     options = {"members": None}
555.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
556.     assert list(filter(lambda l: '::' in l, actual)) == [
557.         '.. py:class:: Base()',
558.         '   .. py:method:: Base.inheritedclassmeth()',
559.         '   .. py:method:: Base.inheritedmeth()',
560.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
561.     ]
562. 
563.     # default specific-members
564.     options = {"members": "inheritedmeth,inheritedstaticmeth"}
565.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
566.     assert list(filter(lambda l: '::' in l, actual)) == [
567.         '.. py:class:: Base()',
568.         '   .. py:method:: Base.inheritedmeth()',
569.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
570.     ]
571. 
572. 
573. @pytest.mark.sphinx('html', testroot='ext-autodoc')
574. def test_autodoc_exclude_members(app):
575.     options = {"members": None,
576.                "exclude-members": "inheritedmeth,inheritedstaticmeth"}
577.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
578.     assert list(filter(lambda l: '::' in l, actual)) == [
579.         '.. py:class:: Base()',
580.         '   .. py:method:: Base.inheritedclassmeth()'
581.     ]
582. 
583.     # members vs exclude-members
584.     options = {"members": "inheritedmeth",
585.                "exclude-members": "inheritedmeth"}
586.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
587.     assert list(filter(lambda l: '::' in l, actual)) == [
588.         '.. py:class:: Base()',
589.     ]
590. 
591. 
592. @pytest.mark.sphinx('html', testroot='ext-autodoc')
593. def test_autodoc_undoc_members(app):
594.     options = {"members": None,
595.                "undoc-members": None}
596.     actual = do_autodoc(app, 'class', 'target.Class', options)
597.     assert list(filter(lambda l: '::' in l, actual)) == [
598.         '.. py:class:: Class(arg)',
599.         '   .. py:attribute:: Class.attr',
600.         '   .. py:attribute:: Class.docattr',
601.         '   .. py:method:: Class.excludemeth()',
602.         '   .. py:attribute:: Class.inst_attr_comment',
603.         '   .. py:attribute:: Class.inst_attr_inline',
604.         '   .. py:attribute:: Class.inst_attr_string',
605.         '   .. py:attribute:: Class.mdocattr',
606.         '   .. py:method:: Class.meth()',
607.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
608.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
609.         '   .. py:attribute:: Class.skipattr',
610.         '   .. py:method:: Class.skipmeth()',
611.         '   .. py:attribute:: Class.udocattr',
612.         '   .. py:method:: Class.undocmeth()'
613.     ]
614. 
615. 
616. @pytest.mark.sphinx('html', testroot='ext-autodoc')
617. def test_autodoc_inherited_members(app):
618.     options = {"members": None,
619.                "inherited-members": None}
620.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
621.     assert list(filter(lambda l: 'method::' in l, actual)) == [
622.         '   .. py:method:: Derived.inheritedclassmeth()',
623.         '   .. py:method:: Derived.inheritedmeth()',
624.         '   .. py:method:: Derived.inheritedstaticmeth(cls)',
625.     ]
626. 
627. 
628. @pytest.mark.sphinx('html', testroot='ext-autodoc')
629. def test_autodoc_inherited_members_Base(app):
630.     options = {"members": None,
631.                "inherited-members": "Base",
632.                "special-members": None}
633. 
634.     # check methods for object class are shown
635.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
636.     assert '   .. py:method:: Derived.inheritedmeth()' in actual
637.     assert '   .. py:method:: Derived.inheritedclassmeth' not in actual
638. 
639. 
640. @pytest.mark.sphinx('html', testroot='ext-autodoc')
641. def test_autodoc_inherited_members_None(app):
642.     options = {"members": None,
643.                "inherited-members": "None",
644.                "special-members": None}
645. 
646.     # check methods for object class are shown
647.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
648.     assert '   .. py:method:: Derived.__init__()' in actual
649.     assert '   .. py:method:: Derived.__str__()' in actual
650. 
651. 
652. @pytest.mark.sphinx('html', testroot='ext-autodoc')
653. def test_autodoc_imported_members(app):
654.     options = {"members": None,
655.                "imported-members": None,
656.                "ignore-module-all": None}
657.     actual = do_autodoc(app, 'module', 'target', options)
658.     assert '.. py:function:: save_traceback(app: Sphinx) -> str' in actual
659. 
660. 
661. @pytest.mark.sphinx('html', testroot='ext-autodoc')
662. def test_autodoc_special_members(app):
663.     # specific special methods
664.     options = {"undoc-members": None,
665.                "special-members": "__init__,__special1__"}
666.     actual = do_autodoc(app, 'class', 'target.Class', options)
667.     assert list(filter(lambda l: '::' in l, actual)) == [
668.         '.. py:class:: Class(arg)',
669.         '   .. py:method:: Class.__init__(arg)',
670.         '   .. py:method:: Class.__special1__()',
671.     ]
672. 
673.     # combination with specific members
674.     options = {"members": "attr,docattr",
675.                "undoc-members": None,
676.                "special-members": "__init__,__special1__"}
677.     actual = do_autodoc(app, 'class', 'target.Class', options)
678.     assert list(filter(lambda l: '::' in l, actual)) == [
679.         '.. py:class:: Class(arg)',
680.         '   .. py:method:: Class.__init__(arg)',
681.         '   .. py:method:: Class.__special1__()',
682.         '   .. py:attribute:: Class.attr',
683.         '   .. py:attribute:: Class.docattr',
684.     ]
685. 
686.     # all special methods
687.     options = {"members": None,
688.                "undoc-members": None,
689.                "special-members": None}
690.     actual = do_autodoc(app, 'class', 'target.Class', options)
691.     assert list(filter(lambda l: '::' in l, actual)) == [
692.         '.. py:class:: Class(arg)',
693.         '   .. py:attribute:: Class.__annotations__',
694.         '   .. py:attribute:: Class.__dict__',
695.         '   .. py:method:: Class.__init__(arg)',
696.         '   .. py:attribute:: Class.__module__',
697.         '   .. py:method:: Class.__special1__()',
698.         '   .. py:method:: Class.__special2__()',
699.         '   .. py:attribute:: Class.__weakref__',
700.         '   .. py:attribute:: Class.attr',
701.         '   .. py:attribute:: Class.docattr',
702.         '   .. py:method:: Class.excludemeth()',
703.         '   .. py:attribute:: Class.inst_attr_comment',
704.         '   .. py:attribute:: Class.inst_attr_inline',
705.         '   .. py:attribute:: Class.inst_attr_string',
706.         '   .. py:attribute:: Class.mdocattr',
707.         '   .. py:method:: Class.meth()',
708.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
709.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
710.         '   .. py:attribute:: Class.skipattr',
711.         '   .. py:method:: Class.skipmeth()',
712.         '   .. py:attribute:: Class.udocattr',
713.         '   .. py:method:: Class.undocmeth()'
714.     ]
715. 
716. 
717. @pytest.mark.sphinx('html', testroot='ext-autodoc')
718. def test_autodoc_ignore_module_all(app):
719.     # default (no-ignore-module-all)
720.     options = {"members": None}
721.     actual = do_autodoc(app, 'module', 'target', options)
722.     assert list(filter(lambda l: 'class::' in l, actual)) == [
723.         '.. py:class:: Class(arg)',
724.     ]
725. 
726.     # ignore-module-all
727.     options = {"members": None,
728.                "ignore-module-all": None}
729.     actual = do_autodoc(app, 'module', 'target', options)
730.     assert list(filter(lambda l: 'class::' in l, actual)) == [
731.         '.. py:class:: Class(arg)',
732.         '.. py:class:: CustomDict',
733.         '.. py:class:: InnerChild()',
734.         '.. py:class:: InstAttCls()',
735.         '.. py:class:: Outer()',
736.         '   .. py:class:: Outer.Inner()',
737.         '.. py:class:: StrRepr'
738.     ]
739. 
740. 
741. @pytest.mark.sphinx('html', testroot='ext-autodoc')
742. def test_autodoc_noindex(app):
743.     options = {"noindex": True}
744.     actual = do_autodoc(app, 'module', 'target', options)
745.     assert list(actual) == [
746.         '',
747.         '.. py:module:: target',
748.         '   :noindex:',
749.         ''
750.     ]
751. 
752.     # TODO: :noindex: should be propagated to children of target item.
753. 
754.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
755.     assert list(actual) == [
756.         '',
757.         '.. py:class:: Base()',
758.         '   :noindex:',
759.         '   :module: target.inheritance',
760.         ''
761.     ]
762. 
763. 
764. @pytest.mark.sphinx('html', testroot='ext-autodoc')
765. def test_autodoc_subclass_of_builtin_class(app):
766.     options = {"members": None}
767.     actual = do_autodoc(app, 'class', 'target.CustomDict', options)
768.     assert list(actual) == [
769.         '',
770.         '.. py:class:: CustomDict',
771.         '   :module: target',
772.         '',
773.         '   Docstring.',
774.         '',
775.     ]
776. 
777. 
778. @pytest.mark.sphinx('html', testroot='ext-autodoc')
779. def test_autodoc_inner_class(app):
780.     options = {"members": None}
781.     actual = do_autodoc(app, 'class', 'target.Outer', options)
782.     assert list(actual) == [
783.         '',
784.         '.. py:class:: Outer()',
785.         '   :module: target',
786.         '',
787.         '   Foo',
788.         '',
789.         '',
790.         '   .. py:class:: Outer.Inner()',
791.         '      :module: target',
792.         '',
793.         '      Foo',
794.         '',
795.         '',
796.         '      .. py:method:: Outer.Inner.meth()',
797.         '         :module: target',
798.         '',
799.         '         Foo',
800.         '',
801.         '',
802.         '   .. py:attribute:: Outer.factory',
803.         '      :module: target',
804.         '',
805.         '      alias of :class:`dict`'
806.     ]
807. 
808.     actual = do_autodoc(app, 'class', 'target.Outer.Inner', options)
809.     assert list(actual) == [
810.         '',
811.         '.. py:class:: Inner()',
812.         '   :module: target.Outer',
813.         '',
814.         '   Foo',
815.         '',
816.         '',
817.         '   .. py:method:: Inner.meth()',
818.         '      :module: target.Outer',
819.         '',
820.         '      Foo',
821.         '',
822.     ]
823. 
824.     options['show-inheritance'] = True
825.     actual = do_autodoc(app, 'class', 'target.InnerChild', options)
826.     assert list(actual) == [
827.         '',
828.         '.. py:class:: InnerChild()',
829.         '   :module: target', '',
830.         '   Bases: :class:`target.Outer.Inner`',
831.         '',
832.         '   InnerChild docstring',
833.         '',
834.     ]
835. 
836. 
837. @pytest.mark.sphinx('html', testroot='ext-autodoc')
838. def test_autodoc_classmethod(app):
839.     actual = do_autodoc(app, 'method', 'target.inheritance.Base.inheritedclassmeth')
840.     assert list(actual) == [
841.         '',
842.         '.. py:method:: Base.inheritedclassmeth()',
843.         '   :module: target.inheritance',
844.         '   :classmethod:',
845.         '',
846.         '   Inherited class method.',
847.         '',
848.     ]
849. 
850. 
851. @pytest.mark.sphinx('html', testroot='ext-autodoc')
852. def test_autodoc_staticmethod(app):
853.     actual = do_autodoc(app, 'method', 'target.inheritance.Base.inheritedstaticmeth')
854.     assert list(actual) == [
855.         '',
856.         '.. py:method:: Base.inheritedstaticmeth(cls)',
857.         '   :module: target.inheritance',
858.         '   :staticmethod:',
859.         '',
860.         '   Inherited static method.',
861.         '',
862.     ]
863. 
864. 
865. @pytest.mark.sphinx('html', testroot='ext-autodoc')
866. def test_autodoc_descriptor(app):
867.     options = {"members": None,
868.                "undoc-members": True}
869.     actual = do_autodoc(app, 'class', 'target.descriptor.Class', options)
870.     assert list(actual) == [
871.         '',
872.         '.. py:class:: Class()',
873.         '   :module: target.descriptor',
874.         '',
875.         '',
876.         '   .. py:attribute:: Class.descr',
877.         '      :module: target.descriptor',
878.         '',
879.         '      Descriptor instance docstring.',
880.         '',
881.         '',
882.         '   .. py:method:: Class.prop',
883.         '      :module: target.descriptor',
884.         '      :property:',
885.         '',
886.         '      Property.',
887.         ''
888.     ]
889. 
890. 
891. @pytest.mark.skipif(sys.version_info < (3, 8),
892.                     reason='cached_property is available since python3.8.')
893. @pytest.mark.sphinx('html', testroot='ext-autodoc')
894. def test_autodoc_cached_property(app):
895.     options = {"members": None,
896.                "undoc-members": True}
897.     actual = do_autodoc(app, 'class', 'target.cached_property.Foo', options)
898.     assert list(actual) == [
899.         '',
900.         '.. py:class:: Foo()',
901.         '   :module: target.cached_property',
902.         '',
903.         '',
904.         '   .. py:method:: Foo.prop',
905.         '      :module: target.cached_property',
906.         '      :property:',
907.         '',
908.     ]
909. 
910. 
911. @pytest.mark.sphinx('html', testroot='ext-autodoc')
912. def test_autodoc_member_order(app):
913.     # case member-order='bysource'
914.     options = {"members": None,
915.                'member-order': 'bysource',
916.                "undoc-members": True,
917.                'private-members': True}
918.     actual = do_autodoc(app, 'class', 'target.Class', options)
919.     assert list(filter(lambda l: '::' in l, actual)) == [
920.         '.. py:class:: Class(arg)',
921.         '   .. py:method:: Class.meth()',
922.         '   .. py:method:: Class.undocmeth()',
923.         '   .. py:method:: Class.skipmeth()',
924.         '   .. py:method:: Class.excludemeth()',
925.         '   .. py:attribute:: Class.skipattr',
926.         '   .. py:attribute:: Class.attr',
927.         '   .. py:attribute:: Class.docattr',
928.         '   .. py:attribute:: Class.udocattr',
929.         '   .. py:attribute:: Class.mdocattr',
930.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
931.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
932.         '   .. py:attribute:: Class.inst_attr_inline',
933.         '   .. py:attribute:: Class.inst_attr_comment',
934.         '   .. py:attribute:: Class.inst_attr_string',
935.         '   .. py:attribute:: Class._private_inst_attr'
936.     ]
937. 
938.     # case member-order='groupwise'
939.     options = {"members": None,
940.                'member-order': 'groupwise',
941.                "undoc-members": True,
942.                'private-members': True}
943.     actual = do_autodoc(app, 'class', 'target.Class', options)
944.     assert list(filter(lambda l: '::' in l, actual)) == [
945.         '.. py:class:: Class(arg)',
946.         '   .. py:method:: Class.excludemeth()',
947.         '   .. py:method:: Class.meth()',
948.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
949.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
950.         '   .. py:method:: Class.skipmeth()',
951.         '   .. py:method:: Class.undocmeth()',
952.         '   .. py:attribute:: Class._private_inst_attr',
953.         '   .. py:attribute:: Class.attr',
954.         '   .. py:attribute:: Class.docattr',
955.         '   .. py:attribute:: Class.inst_attr_comment',
956.         '   .. py:attribute:: Class.inst_attr_inline',
957.         '   .. py:attribute:: Class.inst_attr_string',
958.         '   .. py:attribute:: Class.mdocattr',
959.         '   .. py:attribute:: Class.skipattr',
960.         '   .. py:attribute:: Class.udocattr'
961.     ]
962. 
963.     # case member-order=None
964.     options = {"members": None,
965.                "undoc-members": True,
966.                'private-members': True}
967.     actual = do_autodoc(app, 'class', 'target.Class', options)
968.     assert list(filter(lambda l: '::' in l, actual)) == [
969.         '.. py:class:: Class(arg)',
970.         '   .. py:attribute:: Class._private_inst_attr',
971.         '   .. py:attribute:: Class.attr',
972.         '   .. py:attribute:: Class.docattr',
973.         '   .. py:method:: Class.excludemeth()',
974.         '   .. py:attribute:: Class.inst_attr_comment',
975.         '   .. py:attribute:: Class.inst_attr_inline',
976.         '   .. py:attribute:: Class.inst_attr_string',
977.         '   .. py:attribute:: Class.mdocattr',
978.         '   .. py:method:: Class.meth()',
979.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
980.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
981.         '   .. py:attribute:: Class.skipattr',
982.         '   .. py:method:: Class.skipmeth()',
983.         '   .. py:attribute:: Class.udocattr',
984.         '   .. py:method:: Class.undocmeth()'
985.     ]
986. 
987. 
988. @pytest.mark.sphinx('html', testroot='ext-autodoc')
989. def test_autodoc_module_member_order(app):
990.     # case member-order='bysource'
991.     options = {"members": 'foo, Bar, baz, qux, Quux, foobar',
992.                'member-order': 'bysource',
993.                "undoc-members": True}
994.     actual = do_autodoc(app, 'module', 'target.sort_by_all', options)
995.     assert list(filter(lambda l: '::' in l, actual)) == [
996.         '.. py:module:: target.sort_by_all',
997.         '.. py:function:: baz()',
998.         '.. py:function:: foo()',
999.         '.. py:class:: Bar()',
1000.         '.. py:class:: Quux()',
1001.         '.. py:function:: foobar()',
1002.         '.. py:function:: qux()',
1003.     ]
1004. 
1005.     # case member-order='bysource' and ignore-module-all
1006.     options = {"members": 'foo, Bar, baz, qux, Quux, foobar',
1007.                'member-order': 'bysource',
1008.                "undoc-members": True,
1009.                "ignore-module-all": True}
1010.     actual = do_autodoc(app, 'module', 'target.sort_by_all', options)
1011.     assert list(filter(lambda l: '::' in l, actual)) == [
1012.         '.. py:module:: target.sort_by_all',
1013.         '.. py:function:: foo()',
1014.         '.. py:class:: Bar()',
1015.         '.. py:function:: baz()',
1016.         '.. py:function:: qux()',
1017.         '.. py:class:: Quux()',
1018.         '.. py:function:: foobar()',
1019.     ]
1020. 
1021. 
1022. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1023. def test_autodoc_module_scope(app):
1024.     app.env.temp_data['autodoc:module'] = 'target'
1025.     actual = do_autodoc(app, 'attribute', 'Class.mdocattr')
1026.     assert list(actual) == [
1027.         '',
1028.         '.. py:attribute:: Class.mdocattr',
1029.         '   :module: target',
1030.         '   :value: <_io.StringIO object>',
1031.         '',
1032.         '   should be documented as well - süß',
1033.         '',
1034.     ]
1035. 
1036. 
1037. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1038. def test_autodoc_class_scope(app):
1039.     app.env.temp_data['autodoc:module'] = 'target'
1040.     app.env.temp_data['autodoc:class'] = 'Class'
1041.     actual = do_autodoc(app, 'attribute', 'mdocattr')
1042.     assert list(actual) == [
1043.         '',
1044.         '.. py:attribute:: Class.mdocattr',
1045.         '   :module: target',
1046.         '   :value: <_io.StringIO object>',
1047.         '',
1048.         '   should be documented as well - süß',
1049.         '',
1050.     ]
1051. 
1052. 
1053. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1054. def test_class_attributes(app):
1055.     options = {"members": None,
1056.                "undoc-members": True}
1057.     actual = do_autodoc(app, 'class', 'target.AttCls', options)
1058.     assert list(actual) == [
1059.         '',
1060.         '.. py:class:: AttCls()',
1061.         '   :module: target',
1062.         '',
1063.         '',
1064.         '   .. py:attribute:: AttCls.a1',
1065.         '      :module: target',
1066.         '      :value: hello world',
1067.         '',
1068.         '',
1069.         '   .. py:attribute:: AttCls.a2',
1070.         '      :module: target',
1071.         '      :value: None',
1072.         ''
1073.     ]
1074. 
1075. 
1076. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1077. def test_autoclass_instance_attributes(app):
1078.     options = {"members": None}
1079.     actual = do_autodoc(app, 'class', 'target.InstAttCls', options)
1080.     assert list(actual) == [
1081.         '',
1082.         '.. py:class:: InstAttCls()',
1083.         '   :module: target',
1084.         '',
1085.         '   Class with documented class and instance attributes.',
1086.         '',
1087.         '',
1088.         '   .. py:attribute:: InstAttCls.ca1',
1089.         '      :module: target',
1090.         "      :value: 'a'",
1091.         '',
1092.         '      Doc comment for class attribute InstAttCls.ca1.',
1093.         '      It can have multiple lines.',
1094.         '',
1095.         '',
1096.         '   .. py:attribute:: InstAttCls.ca2',
1097.         '      :module: target',
1098.         "      :value: 'b'",
1099.         '',
1100.         '      Doc comment for InstAttCls.ca2. One line only.',
1101.         '',
1102.         '',
1103.         '   .. py:attribute:: InstAttCls.ca3',
1104.         '      :module: target',
1105.         "      :value: 'c'",
1106.         '',
1107.         '      Docstring for class attribute InstAttCls.ca3.',
1108.         '',
1109.         '',
1110.         '   .. py:attribute:: InstAttCls.ia1',
1111.         '      :module: target',
1112.         '',
1113.         '      Doc comment for instance attribute InstAttCls.ia1',
1114.         '',
1115.         '',
1116.         '   .. py:attribute:: InstAttCls.ia2',
1117.         '      :module: target',
1118.         '',
1119.         '      Docstring for instance attribute InstAttCls.ia2.',
1120.         ''
1121.     ]
1122. 
1123.     # pick up arbitrary attributes
1124.     options = {"members": 'ca1,ia1'}
1125.     actual = do_autodoc(app, 'class', 'target.InstAttCls', options)
1126.     assert list(actual) == [
1127.         '',
1128.         '.. py:class:: InstAttCls()',
1129.         '   :module: target',
1130.         '',
1131.         '   Class with documented class and instance attributes.',
1132.         '',
1133.         '',
1134.         '   .. py:attribute:: InstAttCls.ca1',
1135.         '      :module: target',
1136.         "      :value: 'a'",
1137.         '',
1138.         '      Doc comment for class attribute InstAttCls.ca1.',
1139.         '      It can have multiple lines.',
1140.         '',
1141.         '',
1142.         '   .. py:attribute:: InstAttCls.ia1',
1143.         '      :module: target',
1144.         '',
1145.         '      Doc comment for instance attribute InstAttCls.ia1',
1146.         ''
1147.     ]
1148. 
1149. 
1150. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1151. def test_autoattribute_instance_attributes(app):
1152.     actual = do_autodoc(app, 'attribute', 'target.InstAttCls.ia1')
1153.     assert list(actual) == [
1154.         '',
1155.         '.. py:attribute:: InstAttCls.ia1',
1156.         '   :module: target',
1157.         '',
1158.         '   Doc comment for instance attribute InstAttCls.ia1',
1159.         ''
1160.     ]
1161. 
1162. 
1163. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1164. def test_slots(app):
1165.     options = {"members": None,
1166.                "undoc-members": True}
1167.     actual = do_autodoc(app, 'module', 'target.slots', options)
1168.     assert list(actual) == [
1169.         '',
1170.         '.. py:module:: target.slots',
1171.         '',
1172.         '',
1173.         '.. py:class:: Bar()',
1174.         '   :module: target.slots',
1175.         '',
1176.         '   docstring',
1177.         '',
1178.         '',
1179.         '   .. py:attribute:: Bar.attr1',
1180.         '      :module: target.slots',
1181.         '',
1182.         '      docstring of attr1',
1183.         '',
1184.         '',
1185.         '   .. py:attribute:: Bar.attr2',
1186.         '      :module: target.slots',
1187.         '',
1188.         '      docstring of instance attr2',
1189.         '',
1190.         '',
1191.         '   .. py:attribute:: Bar.attr3',
1192.         '      :module: target.slots',
1193.         '',
1194.         '',
1195.         '.. py:class:: Baz()',
1196.         '   :module: target.slots',
1197.         '',
1198.         '   docstring',
1199.         '',
1200.         '',
1201.         '   .. py:attribute:: Baz.attr',
1202.         '      :module: target.slots',
1203.         '',
1204.         '',
1205.         '.. py:class:: Foo()',
1206.         '   :module: target.slots',
1207.         '',
1208.         '   docstring',
1209.         '',
1210.         '',
1211.         '   .. py:attribute:: Foo.attr',
1212.         '      :module: target.slots',
1213.         '',
1214.     ]
1215. 
1216. 
1217. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1218. def test_enum_class(app):
1219.     options = {"members": None}
1220.     actual = do_autodoc(app, 'class', 'target.enums.EnumCls', options)
1221.     assert list(actual) == [
1222.         '',
1223.         '.. py:class:: EnumCls(value)',
1224.         '   :module: target.enums',
1225.         '',
1226.         '   this is enum class',
1227.         '',
1228.         '',
1229.         '   .. py:method:: EnumCls.say_goodbye()',
1230.         '      :module: target.enums',
1231.         '      :classmethod:',
1232.         '',
1233.         '      a classmethod says good-bye to you.',
1234.         '',
1235.         '',
1236.         '   .. py:method:: EnumCls.say_hello()',
1237.         '      :module: target.enums',
1238.         '',
1239.         '      a method says hello to you.',
1240.         '',
1241.         '',
1242.         '   .. py:attribute:: EnumCls.val1',
1243.         '      :module: target.enums',
1244.         '      :value: 12',
1245.         '',
1246.         '      doc for val1',
1247.         '',
1248.         '',
1249.         '   .. py:attribute:: EnumCls.val2',
1250.         '      :module: target.enums',
1251.         '      :value: 23',
1252.         '',
1253.         '      doc for val2',
1254.         '',
1255.         '',
1256.         '   .. py:attribute:: EnumCls.val3',
1257.         '      :module: target.enums',
1258.         '      :value: 34',
1259.         '',
1260.         '      doc for val3',
1261.         '',
1262.     ]
1263. 
1264.     # checks for an attribute of EnumClass
1265.     actual = do_autodoc(app, 'attribute', 'target.enums.EnumCls.val1')
1266.     assert list(actual) == [
1267.         '',
1268.         '.. py:attribute:: EnumCls.val1',
1269.         '   :module: target.enums',
1270.         '   :value: 12',
1271.         '',
1272.         '   doc for val1',
1273.         ''
1274.     ]
1275. 
1276. 
1277. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1278. def test_descriptor_class(app):
1279.     options = {"members": 'CustomDataDescriptor,CustomDataDescriptor2'}
1280.     actual = do_autodoc(app, 'module', 'target.descriptor', options)
1281.     assert list(actual) == [
1282.         '',
1283.         '.. py:module:: target.descriptor',
1284.         '',
1285.         '',
1286.         '.. py:class:: CustomDataDescriptor(doc)',
1287.         '   :module: target.descriptor',
1288.         '',
1289.         '   Descriptor class docstring.',
1290.         '',
1291.         '',
1292.         '   .. py:method:: CustomDataDescriptor.meth()',
1293.         '      :module: target.descriptor',
1294.         '',
1295.         '      Function.',
1296.         '',
1297.         '',
1298.         '.. py:class:: CustomDataDescriptor2(doc)',
1299.         '   :module: target.descriptor',
1300.         '',
1301.         '   Descriptor class with custom metaclass docstring.',
1302.         '',
1303.     ]
1304. 
1305. 
1306. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1307. def test_automethod_for_builtin(app):
1308.     actual = do_autodoc(app, 'method', 'builtins.int.__add__')
1309.     assert list(actual) == [
1310.         '',
1311.         '.. py:method:: int.__add__(value, /)',
1312.         '   :module: builtins',
1313.         '',
1314.         '   Return self+value.',
1315.         '',
1316.     ]
1317. 
1318. 
1319. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1320. def test_automethod_for_decorated(app):
1321.     actual = do_autodoc(app, 'method', 'target.decorator.Bar.meth')
1322.     assert list(actual) == [
1323.         '',
1324.         '.. py:method:: Bar.meth(name=None, age=None)',
1325.         '   :module: target.decorator',
1326.         '',
1327.     ]
1328. 
1329. 
1330. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1331. def test_abstractmethods(app):
1332.     options = {"members": None,
1333.                "undoc-members": None}
1334.     actual = do_autodoc(app, 'module', 'target.abstractmethods', options)
1335.     assert list(actual) == [
1336.         '',
1337.         '.. py:module:: target.abstractmethods',
1338.         '',
1339.         '',
1340.         '.. py:class:: Base()',
1341.         '   :module: target.abstractmethods',
1342.         '',
1343.         '',
1344.         '   .. py:method:: Base.abstractmeth()',
1345.         '      :module: target.abstractmethods',
1346.         '      :abstractmethod:',
1347.         '',
1348.         '',
1349.         '   .. py:method:: Base.classmeth()',
1350.         '      :module: target.abstractmethods',
1351.         '      :abstractmethod:',
1352.         '      :classmethod:',
1353.         '',
1354.         '',
1355.         '   .. py:method:: Base.coroutinemeth()',
1356.         '      :module: target.abstractmethods',
1357.         '      :abstractmethod:',
1358.         '      :async:',
1359.         '',
1360.         '',
1361.         '   .. py:method:: Base.meth()',
1362.         '      :module: target.abstractmethods',
1363.         '',
1364.         '',
1365.         '   .. py:method:: Base.prop',
1366.         '      :module: target.abstractmethods',
1367.         '      :abstractmethod:',
1368.         '      :property:',
1369.         '',
1370.         '',
1371.         '   .. py:method:: Base.staticmeth()',
1372.         '      :module: target.abstractmethods',
1373.         '      :abstractmethod:',
1374.         '      :staticmethod:',
1375.         '',
1376.     ]
1377. 
1378. 
1379. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1380. def test_partialfunction(app):
1381.     options = {"members": None}
1382.     actual = do_autodoc(app, 'module', 'target.partialfunction', options)
1383.     assert list(actual) == [
1384.         '',
1385.         '.. py:module:: target.partialfunction',
1386.         '',
1387.         '',
1388.         '.. py:function:: func1(a, b, c)',
1389.         '   :module: target.partialfunction',
1390.         '',
1391.         '   docstring of func1',
1392.         '',
1393.         '',
1394.         '.. py:function:: func2(b, c)',
1395.         '   :module: target.partialfunction',
1396.         '',
1397.         '   docstring of func1',
1398.         '',
1399.         '',
1400.         '.. py:function:: func3(c)',
1401.         '   :module: target.partialfunction',
1402.         '',
1403.         '   docstring of func3',
1404.         '',
1405.         '',
1406.         '.. py:function:: func4()',
1407.         '   :module: target.partialfunction',
1408.         '',
1409.         '   docstring of func3',
1410.         '',
1411.     ]
1412. 
1413. 
1414. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1415. def test_imported_partialfunction_should_not_shown_without_imported_members(app):
1416.     options = {"members": None}
1417.     actual = do_autodoc(app, 'module', 'target.imported_members', options)
1418.     assert list(actual) == [
1419.         '',
1420.         '.. py:module:: target.imported_members',
1421.         ''
1422.     ]
1423. 
1424. 
1425. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1426. def test_bound_method(app):
1427.     options = {"members": None}
1428.     actual = do_autodoc(app, 'module', 'target.bound_method', options)
1429.     assert list(actual) == [
1430.         '',
1431.         '.. py:module:: target.bound_method',
1432.         '',
1433.         '',
1434.         '.. py:function:: bound_method()',
1435.         '   :module: target.bound_method',
1436.         '',
1437.         '   Method docstring',
1438.         '',
1439.     ]
1440. 
1441. 
1442. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1443. def test_coroutine(app):
1444.     actual = do_autodoc(app, 'function', 'target.functions.coroutinefunc')
1445.     assert list(actual) == [
1446.         '',
1447.         '.. py:function:: coroutinefunc()',
1448.         '   :module: target.functions',
1449.         '   :async:',
1450.         '',
1451.     ]
1452. 
1453.     options = {"members": None}
1454.     actual = do_autodoc(app, 'class', 'target.coroutine.AsyncClass', options)
1455.     assert list(actual) == [
1456.         '',
1457.         '.. py:class:: AsyncClass()',
1458.         '   :module: target.coroutine',
1459.         '',
1460.         '',
1461.         '   .. py:method:: AsyncClass.do_coroutine()',
1462.         '      :module: target.coroutine',
1463.         '      :async:',
1464.         '',
1465.         '      A documented coroutine function',
1466.         '',
1467.         '',
1468.         '   .. py:method:: AsyncClass.do_coroutine2()',
1469.         '      :module: target.coroutine',
1470.         '      :async:',
1471.         '      :classmethod:',
1472.         '',
1473.         '      A documented coroutine classmethod',
1474.         '',
1475.         '',
1476.         '   .. py:method:: AsyncClass.do_coroutine3()',
1477.         '      :module: target.coroutine',
1478.         '      :async:',
1479.         '      :staticmethod:',
1480.         '',
1481.         '      A documented coroutine staticmethod',
1482.         '',
1483.     ]
1484. 
1485.     # force-synchronized wrapper
1486.     actual = do_autodoc(app, 'function', 'target.coroutine.sync_func')
1487.     assert list(actual) == [
1488.         '',
1489.         '.. py:function:: sync_func()',
1490.         '   :module: target.coroutine',
1491.         '',
1492.     ]
1493. 
1494. 
1495. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1496. def test_partialmethod(app):
1497.     expected = [
1498.         '',
1499.         '.. py:class:: Cell()',
1500.         '   :module: target.partialmethod',
1501.         '',
1502.         '   An example for partialmethod.',
1503.         '',
1504.         '   refs: https://docs.python.jp/3/library/functools.html#functools.partialmethod',
1505.         '',
1506.         '',
1507.         '   .. py:method:: Cell.set_alive()',
1508.         '      :module: target.partialmethod',
1509.         '',
1510.         '      Make a cell alive.',
1511.         '',
1512.         '',
1513.         '   .. py:method:: Cell.set_state(state)',
1514.         '      :module: target.partialmethod',
1515.         '',
1516.         '      Update state of cell to *state*.',
1517.         '',
1518.     ]
1519. 
1520.     options = {"members": None}
1521.     actual = do_autodoc(app, 'class', 'target.partialmethod.Cell', options)
1522.     assert list(actual) == expected
1523. 
1524. 
1525. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1526. def test_partialmethod_undoc_members(app):
1527.     expected = [
1528.         '',
1529.         '.. py:class:: Cell()',
1530.         '   :module: target.partialmethod',
1531.         '',
1532.         '   An example for partialmethod.',
1533.         '',
1534.         '   refs: https://docs.python.jp/3/library/functools.html#functools.partialmethod',
1535.         '',
1536.         '',
1537.         '   .. py:method:: Cell.set_alive()',
1538.         '      :module: target.partialmethod',
1539.         '',
1540.         '      Make a cell alive.',
1541.         '',
1542.         '',
1543.         '   .. py:method:: Cell.set_dead()',
1544.         '      :module: target.partialmethod',
1545.         '',
1546.         '',
1547.         '   .. py:method:: Cell.set_state(state)',
1548.         '      :module: target.partialmethod',
1549.         '',
1550.         '      Update state of cell to *state*.',
1551.         '',
1552.     ]
1553. 
1554.     options = {"members": None,
1555.                "undoc-members": None}
1556.     actual = do_autodoc(app, 'class', 'target.partialmethod.Cell', options)
1557.     assert list(actual) == expected
1558. 
1559. 
1560. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is available since python3.6.')
1561. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1562. def test_autodoc_typed_instance_variables(app):
1563.     options = {"members": None,
1564.                "undoc-members": True}
1565.     actual = do_autodoc(app, 'module', 'target.typed_vars', options)
1566.     assert list(actual) == [
1567.         '',
1568.         '.. py:module:: target.typed_vars',
1569.         '',
1570.         '',
1571.         '.. py:attribute:: Alias',
1572.         '   :module: target.typed_vars',
1573.         '',
1574.         '   alias of :class:`target.typed_vars.Derived`',
1575.         '',
1576.         '.. py:class:: Class()',
1577.         '   :module: target.typed_vars',
1578.         '',
1579.         '',
1580.         '   .. py:attribute:: Class.attr1',
1581.         '      :module: target.typed_vars',
1582.         '      :type: int',
1583.         '      :value: 0',
1584.         '',
1585.         '',
1586.         '   .. py:attribute:: Class.attr2',
1587.         '      :module: target.typed_vars',
1588.         '      :type: int',
1589.         '',
1590.         '',
1591.         '   .. py:attribute:: Class.attr3',
1592.         '      :module: target.typed_vars',
1593.         '      :type: int',
1594.         '      :value: 0',
1595.         '',
1596.         '',
1597.         '   .. py:attribute:: Class.attr4',
1598.         '      :module: target.typed_vars',
1599.         '      :type: int',
1600.         '',
1601.         '      attr4',
1602.         '',
1603.         '',
1604.         '   .. py:attribute:: Class.attr5',
1605.         '      :module: target.typed_vars',
1606.         '      :type: int',
1607.         '',
1608.         '      attr5',
1609.         '',
1610.         '',
1611.         '   .. py:attribute:: Class.attr6',
1612.         '      :module: target.typed_vars',
1613.         '      :type: int',
1614.         '',
1615.         '      attr6',
1616.         '',
1617.         '',
1618.         '   .. py:attribute:: Class.descr4',
1619.         '      :module: target.typed_vars',
1620.         '      :type: int',
1621.         '',
1622.         '      This is descr4',
1623.         '',
1624.         '',
1625.         '.. py:class:: Derived()',
1626.         '   :module: target.typed_vars',
1627.         '',
1628.         '',
1629.         '   .. py:attribute:: Derived.attr7',
1630.         '      :module: target.typed_vars',
1631.         '      :type: int',
1632.         '',
1633.         '',
1634.         '.. py:data:: attr1',
1635.         '   :module: target.typed_vars',
1636.         '   :type: str',
1637.         "   :value: ''",
1638.         '',
1639.         '   attr1',
1640.         '',
1641.         '',
1642.         '.. py:data:: attr2',
1643.         '   :module: target.typed_vars',
1644.         '   :type: str',
1645.         '',
1646.         '   attr2',
1647.         '',
1648.         '',
1649.         '.. py:data:: attr3',
1650.         '   :module: target.typed_vars',
1651.         '   :type: str',
1652.         "   :value: ''",
1653.         '',
1654.         '   attr3',
1655.         '',
1656.     ]
1657. 
1658. 
1659. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is available since python3.6.')
1660. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1661. def test_autodoc_typed_inherited_instance_variables(app):
1662.     options = {"members": None,
1663.                "undoc-members": True,
1664.                "inherited-members": True}
1665.     actual = do_autodoc(app, 'class', 'target.typed_vars.Derived', options)
1666.     assert list(actual) == [
1667.         '',
1668.         '.. py:class:: Derived()',
1669.         '   :module: target.typed_vars',
1670.         '',
1671.         '',
1672.         '   .. py:attribute:: Derived.attr1',
1673.         '      :module: target.typed_vars',
1674.         '      :type: int',
1675.         '      :value: 0',
1676.         '',
1677.         '',
1678.         '   .. py:attribute:: Derived.attr2',
1679.         '      :module: target.typed_vars',
1680.         '      :type: int',
1681.         '',
1682.         '',
1683.         '   .. py:attribute:: Derived.attr3',
1684.         '      :module: target.typed_vars',
1685.         '      :type: int',
1686.         '      :value: 0',
1687.         '',
1688.         '',
1689.         '   .. py:attribute:: Derived.attr4',
1690.         '      :module: target.typed_vars',
1691.         '      :type: int',
1692.         '',
1693.         '      attr4',
1694.         '',
1695.         '',
1696.         '   .. py:attribute:: Derived.attr5',
1697.         '      :module: target.typed_vars',
1698.         '      :type: int',
1699.         '',
1700.         '      attr5',
1701.         '',
1702.         '',
1703.         '   .. py:attribute:: Derived.attr6',
1704.         '      :module: target.typed_vars',
1705.         '      :type: int',
1706.         '',
1707.         '      attr6',
1708.         '',
1709.         '',
1710.         '   .. py:attribute:: Derived.attr7',
1711.         '      :module: target.typed_vars',
1712.         '      :type: int',
1713.         '',
1714.         '',
1715.         '   .. py:attribute:: Derived.descr4',
1716.         '      :module: target.typed_vars',
1717.         '      :type: int',
1718.         '',
1719.     ]
1720. 
1721. 
1722. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1723. def test_autodoc_GenericAlias(app):
1724.     options = {"members": None,
1725.                "undoc-members": None}
1726.     actual = do_autodoc(app, 'module', 'target.genericalias', options)
1727.     if sys.version_info < (3, 7):
1728.         assert list(actual) == [
1729.             '',
1730.             '.. py:module:: target.genericalias',
1731.             '',
1732.             '',
1733.             '.. py:class:: Class()',
1734.             '   :module: target.genericalias',
1735.             '',
1736.             '',
1737.             '   .. py:attribute:: Class.T',
1738.             '      :module: target.genericalias',
1739.             '',
1740.             '      alias of :class:`List`\\ [:class:`int`]',
1741.             '',
1742.             '.. py:attribute:: T',
1743.             '   :module: target.genericalias',
1744.             '',
1745.             '   alias of :class:`List`\\ [:class:`int`]',
1746.         ]
1747.     else:
1748.         assert list(actual) == [
1749.             '',
1750.             '.. py:module:: target.genericalias',
1751.             '',
1752.             '',
1753.             '.. py:class:: Class()',
1754.             '   :module: target.genericalias',
1755.             '',
1756.             '',
1757.             '   .. py:attribute:: Class.T',
1758.             '      :module: target.genericalias',
1759.             '',
1760.             '      A list of int',
1761.             '',
1762.             '      alias of List[int]',
1763.             '',
1764.             '',
1765.             '.. py:data:: T',
1766.             '   :module: target.genericalias',
1767.             '',
1768.             '   A list of int',
1769.             '',
1770.             '   alias of List[int]',
1771.             '',
1772.         ]
1773. 
1774. 
1775. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1776. def test_autodoc_TypeVar(app):
1777.     options = {"members": None,
1778.                "undoc-members": None}
1779.     actual = do_autodoc(app, 'module', 'target.typevar', options)
1780.     assert list(actual) == [
1781.         '',
1782.         '.. py:module:: target.typevar',
1783.         '',
1784.         '',
1785.         '.. py:class:: Class()',
1786.         '   :module: target.typevar',
1787.         '',
1788.         '',
1789.         '   .. py:attribute:: Class.T1',
1790.         '      :module: target.typevar',
1791.         '',
1792.         '      T1',
1793.         '',
1794.         "      alias of TypeVar('T1')",
1795.         '',
1796.         '',
1797.         '   .. py:attribute:: Class.T6',
1798.         '      :module: target.typevar',
1799.         '',
1800.         '      T6',
1801.         '',
1802.         '      alias of :class:`int`',
1803.         '',
1804.         '',
1805.         '.. py:data:: T1',
1806.         '   :module: target.typevar',
1807.         '',
1808.         '   T1',
1809.         '',
1810.         "   alias of TypeVar('T1')",
1811.         '',
1812.         '',
1813.         '.. py:data:: T3',
1814.         '   :module: target.typevar',
1815.         '',
1816.         '   T3',
1817.         '',
1818.         "   alias of TypeVar('T3', int, str)",
1819.         '',
1820.         '',
1821.         '.. py:data:: T4',
1822.         '   :module: target.typevar',
1823.         '',
1824.         '   T4',
1825.         '',
1826.         "   alias of TypeVar('T4', covariant=True)",
1827.         '',
1828.         '',
1829.         '.. py:data:: T5',
1830.         '   :module: target.typevar',
1831.         '',
1832.         '   T5',
1833.         '',
1834.         "   alias of TypeVar('T5', contravariant=True)",
1835.         '',
1836.         '',
1837.         '.. py:data:: T6',
1838.         '   :module: target.typevar',
1839.         '',
1840.         '   T6',
1841.         '',
1842.         '   alias of :class:`int`',
1843.         '',
1844.     ]
1845. 
1846. 
1847. @pytest.mark.skipif(sys.version_info < (3, 9), reason='py39+ is required.')
1848. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1849. def test_autodoc_Annotated(app):
1850.     options = {"members": None}
1851.     actual = do_autodoc(app, 'module', 'target.annotated', options)
1852.     assert list(actual) == [
1853.         '',
1854.         '.. py:module:: target.annotated',
1855.         '',
1856.         '',
1857.         '.. py:function:: hello(name: str) -> None',
1858.         '   :module: target.annotated',
1859.         '',
1860.         '   docstring',
1861.         '',
1862.     ]
1863. 
1864. 
1865. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is required.')
1866. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1867. def test_autodoc_TYPE_CHECKING(app):
1868.     options = {"members": None,
1869.                "undoc-members": None}
1870.     actual = do_autodoc(app, 'module', 'target.TYPE_CHECKING', options)
1871.     assert list(actual) == [
1872.         '',
1873.         '.. py:module:: target.TYPE_CHECKING',
1874.         '',
1875.         '',
1876.         '.. py:class:: Foo()',
1877.         '   :module: target.TYPE_CHECKING',
1878.         '',
1879.         '',
1880.         '   .. py:attribute:: Foo.attr1',
1881.         '      :module: target.TYPE_CHECKING',
1882.         '      :type: StringIO',
1883.         '',
1884.     ]
1885. 
1886. 
1887. @pytest.mark.sphinx('html', testroot='pycode-egg')
1888. def test_autodoc_for_egged_code(app):
1889.     options = {"members": None,
1890.                "undoc-members": None}
1891.     actual = do_autodoc(app, 'module', 'sample', options)
1892.     assert list(actual) == [
1893.         '',
1894.         '.. py:module:: sample',
1895.         '',
1896.         '',
1897.         '.. py:data:: CONSTANT',
1898.         '   :module: sample',
1899.         '   :value: 1',
1900.         '',
1901.         '   constant on sample.py',
1902.         '',
1903.         '',
1904.         '.. py:function:: hello(s)',
1905.         '   :module: sample',
1906.         ''
1907.     ]
1908. 
1909. 
1910. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1911. def test_singledispatch(app):
1912.     options = {"members": None}
1913.     actual = do_autodoc(app, 'module', 'target.singledispatch', options)
1914.     if sys.version_info < (3, 6):
1915.         # check the result via "in" because the order of singledispatch signatures is
1916.         # usually changed (because dict is not OrderedDict yet!)
1917.         assert '.. py:function:: func(arg, kwarg=None)' in actual
1918.         assert '                 func(arg: int, kwarg=None)' in actual
1919.         assert '                 func(arg: str, kwarg=None)' in actual
1920.     else:
1921.         assert list(actual) == [
1922.             '',
1923.             '.. py:module:: target.singledispatch',
1924.             '',
1925.             '',
1926.             '.. py:function:: func(arg, kwarg=None)',
1927.             '                 func(arg: int, kwarg=None)',
1928.             '                 func(arg: str, kwarg=None)',
1929.             '   :module: target.singledispatch',
1930.             '',
1931.             '   A function for general use.',
1932.             '',
1933.         ]
1934. 
1935. 
1936. @pytest.mark.skipif(sys.version_info < (3, 8),
1937.                     reason='singledispatchmethod is available since python3.8')
1938. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1939. def test_singledispatchmethod(app):
1940.     options = {"members": None}
1941.     actual = do_autodoc(app, 'module', 'target.singledispatchmethod', options)
1942.     assert list(actual) == [
1943.         '',
1944.         '.. py:module:: target.singledispatchmethod',
1945.         '',
1946.         '',
1947.         '.. py:class:: Foo()',
1948.         '   :module: target.singledispatchmethod',
1949.         '',
1950.         '   docstring',
1951.         '',
1952.         '',
1953.         '   .. py:method:: Foo.meth(arg, kwarg=None)',
1954.         '                  Foo.meth(arg: int, kwarg=None)',
1955.         '                  Foo.meth(arg: str, kwarg=None)',
1956.         '      :module: target.singledispatchmethod',
1957.         '',
1958.         '      A method for general use.',
1959.         '',
1960.     ]
1961. 
1962. 
1963. @pytest.mark.skipif(sys.version_info < (3, 8),
1964.                     reason='singledispatchmethod is available since python3.8')
1965. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1966. def test_singledispatchmethod_automethod(app):
1967.     options = {}
1968.     actual = do_autodoc(app, 'method', 'target.singledispatchmethod.Foo.meth', options)
1969.     assert list(actual) == [
1970.         '',
1971.         '.. py:method:: Foo.meth(arg, kwarg=None)',
1972.         '               Foo.meth(arg: int, kwarg=None)',
1973.         '               Foo.meth(arg: str, kwarg=None)',
1974.         '   :module: target.singledispatchmethod',
1975.         '',
1976.         '   A method for general use.',
1977.         '',
1978.     ]
1979. 
1980. 
1981. @pytest.mark.skipif(pyximport is None, reason='cython is not installed')
1982. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1983. def test_cython(app):
1984.     options = {"members": None,
1985.                "undoc-members": None}
1986.     actual = do_autodoc(app, 'module', 'target.cython', options)
1987.     assert list(actual) == [
1988.         '',
1989.         '.. py:module:: target.cython',
1990.         '',
1991.         '',
1992.         '.. py:class:: Class()',
1993.         '   :module: target.cython',
1994.         '',
1995.         '   Docstring.',
1996.         '',
1997.         '',
1998.         '   .. py:method:: Class.meth(name: str, age: int = 0) -> None',
1999.         '      :module: target.cython',
2000.         '',
2001.         '      Docstring.',
2002.         '',
2003.         '',
2004.         '.. py:function:: foo(x: int, *args, y: str, **kwargs)',
2005.         '   :module: target.cython',
2006.         '',
2007.         '   Docstring.',
2008.         '',
2009.     ]
2010. 
2011. 
2012. @pytest.mark.skipif(sys.version_info < (3, 8),
2013.                     reason='typing.final is available since python3.8')
2014. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2015. def test_final(app):
2016.     options = {"members": None}
2017.     actual = do_autodoc(app, 'module', 'target.final', options)
2018.     assert list(actual) == [
2019.         '',
2020.         '.. py:module:: target.final',
2021.         '',
2022.         '',
2023.         '.. py:class:: Class()',
2024.         '   :module: target.final',
2025.         '   :final:',
2026.         '',
2027.         '   docstring',
2028.         '',
2029.         '',
2030.         '   .. py:method:: Class.meth1()',
2031.         '      :module: target.final',
2032.         '      :final:',
2033.         '',
2034.         '      docstring',
2035.         '',
2036.         '',
2037.         '   .. py:method:: Class.meth2()',
2038.         '      :module: target.final',
2039.         '',
2040.         '      docstring',
2041.         '',
2042.     ]
2043. 
2044. 
2045. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2046. def test_overload(app):
2047.     options = {"members": None}
2048.     actual = do_autodoc(app, 'module', 'target.overload', options)
2049.     assert list(actual) == [
2050.         '',
2051.         '.. py:module:: target.overload',
2052.         '',
2053.         '',
2054.         '.. py:class:: Bar(x: int, y: int)',
2055.         '              Bar(x: str, y: str)',
2056.         '   :module: target.overload',
2057.         '',
2058.         '   docstring',
2059.         '',
2060.         '',
2061.         '.. py:class:: Baz(x: int, y: int)',
2062.         '              Baz(x: str, y: str)',
2063.         '   :module: target.overload',
2064.         '',
2065.         '   docstring',
2066.         '',
2067.         '',
2068.         '.. py:class:: Foo(x: int, y: int)',
2069.         '              Foo(x: str, y: str)',
2070.         '   :module: target.overload',
2071.         '',
2072.         '   docstring',
2073.         '',
2074.         '',
2075.         '.. py:class:: Math()',
2076.         '   :module: target.overload',
2077.         '',
2078.         '   docstring',
2079.         '',
2080.         '',
2081.         '   .. py:method:: Math.sum(x: int, y: int) -> int',
2082.         '                  Math.sum(x: float, y: float) -> float',
2083.         '                  Math.sum(x: str, y: str) -> str',
2084.         '      :module: target.overload',
2085.         '',
2086.         '      docstring',
2087.         '',
2088.         '',
2089.         '.. py:function:: sum(x: int, y: int) -> int',
2090.         '                 sum(x: float, y: float) -> float',
2091.         '                 sum(x: str, y: str) -> str',
2092.         '   :module: target.overload',
2093.         '',
2094.         '   docstring',
2095.         '',
2096.     ]
2097. 
2098. 
2099. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2100. def test_overload2(app):
2101.     options = {"members": None}
2102.     actual = do_autodoc(app, 'module', 'target.overload2', options)
2103.     assert list(actual) == [
2104.         '',
2105.         '.. py:module:: target.overload2',
2106.         '',
2107.         '',
2108.         '.. py:class:: Baz(x: int, y: int)',
2109.         '              Baz(x: str, y: str)',
2110.         '   :module: target.overload2',
2111.         '',
2112.     ]
2113. 
2114. 
2115. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2116. def test_pymodule_for_ModuleLevelDocumenter(app):
2117.     app.env.ref_context['py:module'] = 'target.classes'
2118.     actual = do_autodoc(app, 'class', 'Foo')
2119.     assert list(actual) == [
2120.         '',
2121.         '.. py:class:: Foo()',
2122.         '   :module: target.classes',
2123.         '',
2124.     ]
2125. 
2126. 
2127. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2128. def test_pymodule_for_ClassLevelDocumenter(app):
2129.     app.env.ref_context['py:module'] = 'target.methods'
2130.     actual = do_autodoc(app, 'method', 'Base.meth')
2131.     assert list(actual) == [
2132.         '',
2133.         '.. py:method:: Base.meth()',
2134.         '   :module: target.methods',
2135.         '',
2136.     ]
2137. 
2138. 
2139. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2140. def test_pyclass_for_ClassLevelDocumenter(app):
2141.     app.env.ref_context['py:module'] = 'target.methods'
2142.     app.env.ref_context['py:class'] = 'Base'
2143.     actual = do_autodoc(app, 'method', 'meth')
2144.     assert list(actual) == [
2145.         '',
2146.         '.. py:method:: Base.meth()',
2147.         '   :module: target.methods',
2148.         '',
2149.     ]
2150. 
2151. 
2152. @pytest.mark.sphinx('dummy', testroot='ext-autodoc')
2153. def test_autodoc(app, status, warning):
2154.     app.builder.build_all()
2155. 
2156.     content = app.env.get_doctree('index')
2157.     assert isinstance(content[3], addnodes.desc)
2158.     assert content[3][0].astext() == 'autodoc_dummy_module.test()'
2159.     assert content[3][1].astext() == 'Dummy function using dummy.*'
2160. 
2161.     # issue sphinx-doc/sphinx#2437
2162.     assert content[11][-1].astext() == """Dummy class Bar with alias.
2163. 
2164. 
2165. 
2166. my_name
2167. 
2168. alias of bug2437.autodoc_dummy_foo.Foo"""
2169.     assert warning.getvalue() == ''
2170. 
2171. 
2172. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2173. def test_name_conflict(app):
2174.     actual = do_autodoc(app, 'class', 'target.name_conflict.foo')
2175.     assert list(actual) == [
2176.         '',
2177.         '.. py:class:: foo()',
2178.         '   :module: target.name_conflict',
2179.         '',
2180.         '   docstring of target.name_conflict::foo.',
2181.         '',
2182.     ]
2183. 
2184.     actual = do_autodoc(app, 'class', 'target.name_conflict.foo.bar')
2185.     assert list(actual) == [
2186.         '',
2187.         '.. py:class:: bar()',
2188.         '   :module: target.name_conflict.foo',
2189.         '',
2190.         '   docstring of target.name_conflict.foo::bar.',
2191.         '',
2192.     ]
2193. 
2194. 
2195. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2196. def test_name_mangling(app):
2197.     options = {"members": None,
2198.                "undoc-members": None,
2199.                "private-members": None}
2200.     actual = do_autodoc(app, 'module', 'target.name_mangling', options)
2201.     assert list(actual) == [
2202.         '',
2203.         '.. py:module:: target.name_mangling',
2204.         '',
2205.         '',
2206.         '.. py:class:: Bar()',
2207.         '   :module: target.name_mangling',
2208.         '',
2209.         '',
2210.         '   .. py:attribute:: Bar._Baz__email',
2211.         '      :module: target.name_mangling',
2212.         '      :value: None',
2213.         '',
2214.         '      a member having mangled-like name',
2215.         '',
2216.         '',
2217.         '   .. py:attribute:: Bar.__address',
2218.         '      :module: target.name_mangling',
2219.         '      :value: None',
2220.         '',
2221.         '',
2222.         '.. py:class:: Foo()',
2223.         '   :module: target.name_mangling',
2224.         '',
2225.         '',
2226.         '   .. py:attribute:: Foo.__age',
2227.         '      :module: target.name_mangling',
2228.         '      :value: None',
2229.         '',
2230.         '',
2231.         '   .. py:attribute:: Foo.__name',
2232.         '      :module: target.name_mangling',
2233.         '      :value: None',
2234.         '',
2235.         '      name of Foo',
2236.         '',
2237.     ]
2238. 
2239. 
2240. @pytest.mark.skipif(sys.version_info < (3, 6), reason='python 3.6+ is required.')
2241. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2242. def test_hide_value(app):
2243.     options = {'members': True}
2244.     actual = do_autodoc(app, 'module', 'target.hide_value', options)
2245.     assert list(actual) == [
2246.         '',
2247.         '.. py:module:: target.hide_value',
2248.         '',
2249.         '',
2250.         '.. py:class:: Foo()',
2251.         '   :module: target.hide_value',
2252.         '',
2253.         '   docstring',
2254.         '',
2255.         '',
2256.         '   .. py:attribute:: Foo.SENTINEL1',
2257.         '      :module: target.hide_value',
2258.         '',
2259.         '      docstring',
2260.         '',
2261.         '      :meta hide-value:',
2262.         '',
2263.         '',
2264.         '   .. py:attribute:: Foo.SENTINEL2',
2265.         '      :module: target.hide_value',
2266.         '',
2267.         '      :meta hide-value:',
2268.         '',
2269.         '',
2270.         '.. py:data:: SENTINEL1',
2271.         '   :module: target.hide_value',
2272.         '',
2273.         '   docstring',
2274.         '',
2275.         '   :meta hide-value:',
2276.         '',
2277.         '',
2278.         '.. py:data:: SENTINEL2',
2279.         '   :module: target.hide_value',
2280.         '',
2281.         '   :meta hide-value:',
2282.         '',
2283.     ]

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-20 23:36:46,835 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly asked for the full content of `tests/roots/test-ext-autodoc/index.rst`. This context provides the complete file content.', relative_path='tests/roots/test-ext-autodoc/index.rst', start_line=1, end_line=13), ContextOutput(reasoning='The user explicitly asked for the content of `tests/test_ext_autodoc.py` from line 501 to the end. This context provides the requested content.', relative_path='tests/test_ext_autodoc.py', start_line=501, end_line=2283)]
2025-12-20 23:36:46,838 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the rest of the content for `tests/test_ext_autodoc.py` from line 501 to the end, and also provide the full content of `tests/roots/test-ext-autodoc/index.rst`.
2025-12-20 23:36:46,838 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-20 23:36:46,838 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-20 23:36:46,839 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 2 existing contexts
2025-12-20 23:36:46,839 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-20 23:36:46,840 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       ├── main.yml
|       └── nodejs.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── deprecated.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── __init__.py
|   ├── certs
|   ├── conftest.py
|   ├── ext_napoleon_pep526_data_google.py
|   ├── ext_napoleon_pep526_data_numpy.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── function_param_target.rst
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py-xref-warning
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── TYPE_CHECKING.py
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── annotations.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── cached_property.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── generic_class.py
|   |   |       ├── genericalias.py
|   |   |       ├── hide_value.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── instance_variable.py
|   |   |       ├── methods.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── overload2.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-linkcheck-localserver
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-anchor
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-https
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck-localserver-two-links
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autoattribute.py
|   ├── test_ext_autodoc_autoclass.py
|   ├── test_ext_autodoc_autodata.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   ├── typing_test_data.py
|   └── utils.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: autodoc: empty __all__ attribute is ignored

Description: **Describe the bug**
autodoc: empty `__all__` attribute is ignored

**To Reproduce**
```
# example.py
__all__ = []


def foo():
    "docstring"


def bar():
    "docstring"


def baz():
    "docstring"
```
```
# index.rst
.. automodule:: example
   :members:
```

All foo, bar, and baz are shown.

**Expected behavior**
No entries should be shown because `__all__` is empty.

**Your project**
No

**Screenshots**
No

**Environment info**
- OS: Mac
- Python version: 3.9.1
- Sphinx version: HEAD of 3.x
- Sphinx extensions: sphinx.ext.autodoc
- Extra tools: No

**Additional context**
No

Patch information:
diff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py
index d85d79617..de94106b4 100644
--- a/sphinx/ext/autodoc/__init__.py
+++ b/sphinx/ext/autodoc/__init__.py
@@ -1074,10 +1074,13 @@ class ModuleDocumenter(Documenter):
     def get_object_members(self, want_all: bool) -> Tuple[bool, ObjectMembers]:
         members = self.get_module_members()
         if want_all:
-            if not self.__all__:
+            if self.__all__ is None:
                 # for implicit module members, check __module__ to avoid
                 # documenting imported objects
                 return True, list(members.values())
+            elif not self.__all__:  # This handles empty list case
+                # If __all__ is an empty list, return no members
+                return False, []
             else:
                 for member in members.values():
                     if member.__name__ not in self.__all__:


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/test_ext_autodoc.py` and `tests/roots/test-ext-autodoc/target/sort_by_all.py`.
Extra Requirements: 
Purpose: To identify relevant test cases for the `autodoc` `__all__` bug, I need to analyze the main `autodoc` test file and the specific test module it uses for `__all__` related checks.

Previous refined query 2:
Essential Query: Please provide the rest of the content for `tests/test_ext_autodoc.py` from line 501 to the end, and also provide the full content of `tests/roots/test-ext-autodoc/index.rst`.
Extra Requirements: 
Purpose: This will allow me to find test cases that specifically deal with `__all__` and `automodule`, which are central to the reported bug.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/roots/test-ext-autodoc/index.rst
Line number range: 1 - 13
Content:
1. 
2. .. automodule:: autodoc_dummy_module
3.    :members:
4. 
5. .. automodule:: bug2437.autodoc_dummy_foo
6.    :members:
7. 
8. .. automodule:: autodoc_dummy_bar
9.    :members:
10. 
11. .. autofunction:: target.typehints.incr
12. 
13. .. autofunction:: target.typehints.tuple_args


File: tests/roots/test-ext-autodoc/target/sort_by_all.py
Line number range: 1 - 25
Content:
1. __all__ = ['baz', 'foo', 'Bar']
2. 
3. 
4. def foo():
5.     pass
6. 
7. 
8. class Bar:
9.     pass
10. 
11. 
12. def baz():
13.     pass
14. 
15. 
16. def qux():
17.     pass
18. 
19. 
20. class Quux:
21.     pass
22. 
23. 
24. def foobar():
25.     pass


File: tests/test_ext_autodoc.py
Line number range: 1 - 500
Content:
1. """
2.     test_ext_autodoc
3.     ~~~~~~~~~~~~~~~~
4. 
5.     Test the autodoc extension.  This tests mainly the Documenters; the auto
6.     directives are tested in a test source file translated by test_build.
7. 
8.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import sys
13. from unittest.mock import Mock
14. from warnings import catch_warnings
15. 
16. import pytest
17. from docutils.statemachine import ViewList
18. 
19. from sphinx import addnodes
20. from sphinx.ext.autodoc import ALL, ModuleLevelDocumenter, Options
21. from sphinx.ext.autodoc.directive import DocumenterBridge, process_documenter_options
22. from sphinx.testing.util import SphinxTestApp, Struct  # NOQA
23. from sphinx.util.docutils import LoggingReporter
24. 
25. try:
26.     # Enable pyximport to test cython module
27.     import pyximport
28.     pyximport.install()
29. except ImportError:
30.     pyximport = None
31. 
32. 
33. def do_autodoc(app, objtype, name, options=None):
34.     if options is None:
35.         options = {}
36.     app.env.temp_data.setdefault('docname', 'index')  # set dummy docname
37.     doccls = app.registry.documenters[objtype]
38.     docoptions = process_documenter_options(doccls, app.config, options)
39.     state = Mock()
40.     state.document.settings.tab_width = 8
41.     bridge = DocumenterBridge(app.env, LoggingReporter(''), docoptions, 1, state)
42.     documenter = doccls(bridge, name)
43.     documenter.generate()
44. 
45.     return bridge.result
46. 
47. 
48. def make_directive_bridge(env):
49.     options = Options(
50.         inherited_members = False,
51.         undoc_members = False,
52.         private_members = False,
53.         special_members = False,
54.         imported_members = False,
55.         show_inheritance = False,
56.         noindex = False,
57.         annotation = None,
58.         synopsis = '',
59.         platform = '',
60.         deprecated = False,
61.         members = [],
62.         member_order = 'alphabetical',
63.         exclude_members = set(),
64.         ignore_module_all = False,
65.     )
66. 
67.     directive = Struct(
68.         env = env,
69.         genopt = options,
70.         result = ViewList(),
71.         filename_set = set(),
72.         state = Mock(),
73.     )
74.     directive.state.document.settings.tab_width = 8
75. 
76.     return directive
77. 
78. 
79. processed_signatures = []
80. 
81. 
82. def process_signature(app, what, name, obj, options, args, retann):
83.     processed_signatures.append((what, name))
84.     if name == 'bar':
85.         return '42', None
86. 
87. 
88. def skip_member(app, what, name, obj, skip, options):
89.     if name in ('__special1__', '__special2__'):
90.         return skip
91.     if name.startswith('__'):
92.         return True
93.     if name == 'skipmeth':
94.         return True
95. 
96. 
97. def test_parse_name(app):
98.     def verify(objtype, name, result):
99.         inst = app.registry.documenters[objtype](directive, name)
100.         assert inst.parse_name()
101.         assert (inst.modname, inst.objpath, inst.args, inst.retann) == result
102. 
103.     directive = make_directive_bridge(app.env)
104. 
105.     # for modules
106.     verify('module', 'test_ext_autodoc', ('test_ext_autodoc', [], None, None))
107.     verify('module', 'test.test_ext_autodoc', ('test.test_ext_autodoc', [], None, None))
108.     verify('module', 'test(arg)', ('test', [], 'arg', None))
109.     assert 'signature arguments' in app._warning.getvalue()
110. 
111.     # for functions/classes
112.     verify('function', 'test_ext_autodoc.raises',
113.            ('test_ext_autodoc', ['raises'], None, None))
114.     verify('function', 'test_ext_autodoc.raises(exc) -> None',
115.            ('test_ext_autodoc', ['raises'], 'exc', 'None'))
116.     directive.env.temp_data['autodoc:module'] = 'test_ext_autodoc'
117.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
118.     del directive.env.temp_data['autodoc:module']
119.     directive.env.ref_context['py:module'] = 'test_ext_autodoc'
120.     verify('function', 'raises', ('test_ext_autodoc', ['raises'], None, None))
121.     verify('class', 'Base', ('test_ext_autodoc', ['Base'], None, None))
122. 
123.     # for members
124.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
125.     verify('method', 'SphinxTestApp.cleanup',
126.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
127.     directive.env.ref_context['py:module'] = 'sphinx.testing.util'
128.     directive.env.ref_context['py:class'] = 'Foo'
129.     directive.env.temp_data['autodoc:class'] = 'SphinxTestApp'
130.     verify('method', 'cleanup',
131.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
132.     verify('method', 'SphinxTestApp.cleanup',
133.            ('sphinx.testing.util', ['SphinxTestApp', 'cleanup'], None, None))
134. 
135. 
136. def test_format_signature(app):
137.     app.connect('autodoc-process-signature', process_signature)
138.     app.connect('autodoc-skip-member', skip_member)
139. 
140.     directive = make_directive_bridge(app.env)
141. 
142.     def formatsig(objtype, name, obj, args, retann):
143.         inst = app.registry.documenters[objtype](directive, name)
144.         inst.fullname = name
145.         inst.doc_as_attr = False  # for class objtype
146.         inst.parent = object  # dummy
147.         inst.object = obj
148.         inst.objpath = [name]
149.         inst.args = args
150.         inst.retann = retann
151.         res = inst.format_signature()
152.         print(res)
153.         return res
154. 
155.     # no signatures for modules
156.     assert formatsig('module', 'test', None, None, None) == ''
157. 
158.     # test for functions
159.     def f(a, b, c=1, **d):
160.         pass
161. 
162.     def g(a='\n'):
163.         pass
164.     assert formatsig('function', 'f', f, None, None) == '(a, b, c=1, **d)'
165.     assert formatsig('function', 'f', f, 'a, b, c, d', None) == '(a, b, c, d)'
166.     assert formatsig('function', 'g', g, None, None) == r"(a='\n')"
167. 
168.     # test for classes
169.     class D:
170.         pass
171. 
172.     class E:
173.         def __init__(self):
174.             pass
175. 
176.     # an empty init and no init are the same
177.     for C in (D, E):
178.         assert formatsig('class', 'D', C, None, None) == '()'
179. 
180.     class SomeMeta(type):
181.         def __call__(cls, a, b=None):
182.             return type.__call__(cls, a, b)
183. 
184.     # these three are all equivalent
185.     class F:
186.         def __init__(self, a, b=None):
187.             pass
188. 
189.     class FNew:
190.         def __new__(cls, a, b=None):
191.             return super().__new__(cls)
192. 
193.     class FMeta(metaclass=SomeMeta):
194.         pass
195. 
196.     # and subclasses should always inherit
197.     class G(F):
198.         pass
199. 
200.     class GNew(FNew):
201.         pass
202. 
203.     class GMeta(FMeta):
204.         pass
205. 
206.     # subclasses inherit
207.     for C in (F, FNew, FMeta, G, GNew, GMeta):
208.         assert formatsig('class', 'C', C, None, None) == '(a, b=None)'
209.     assert formatsig('class', 'C', D, 'a, b', 'X') == '(a, b) -> X'
210. 
211.     class ListSubclass(list):
212.         pass
213. 
214.     # only supported if the python implementation decides to document it
215.     if getattr(list, '__text_signature__', None) is not None:
216.         assert formatsig('class', 'C', ListSubclass, None, None) == '(iterable=(), /)'
217.     else:
218.         assert formatsig('class', 'C', ListSubclass, None, None) == ''
219. 
220.     class ExceptionSubclass(Exception):
221.         pass
222. 
223.     # Exception has no __text_signature__ at least in Python 3.8
224.     if getattr(Exception, '__text_signature__', None) is None:
225.         assert formatsig('class', 'C', ExceptionSubclass, None, None) == ''
226. 
227.     # __init__ have signature at first line of docstring
228.     directive.env.config.autoclass_content = 'both'
229. 
230.     class F2:
231.         '''some docstring for F2.'''
232.         def __init__(self, *args, **kw):
233.             '''
234.             __init__(a1, a2, kw1=True, kw2=False)
235. 
236.             some docstring for __init__.
237.             '''
238.     class G2(F2):
239.         pass
240. 
241.     assert formatsig('class', 'F2', F2, None, None) == \
242.         '(a1, a2, kw1=True, kw2=False)'
243.     assert formatsig('class', 'G2', G2, None, None) == \
244.         '(a1, a2, kw1=True, kw2=False)'
245. 
246.     # test for methods
247.     class H:
248.         def foo1(self, b, *c):
249.             pass
250. 
251.         def foo2(b, *c):
252.             pass
253. 
254.         def foo3(self, d='\n'):
255.             pass
256.     assert formatsig('method', 'H.foo', H.foo1, None, None) == '(b, *c)'
257.     assert formatsig('method', 'H.foo', H.foo1, 'a', None) == '(a)'
258.     assert formatsig('method', 'H.foo', H.foo2, None, None) == '(*c)'
259.     assert formatsig('method', 'H.foo', H.foo3, None, None) == r"(d='\n')"
260. 
261.     # test bound methods interpreted as functions
262.     assert formatsig('function', 'foo', H().foo1, None, None) == '(b, *c)'
263.     assert formatsig('function', 'foo', H().foo2, None, None) == '(*c)'
264.     assert formatsig('function', 'foo', H().foo3, None, None) == r"(d='\n')"
265. 
266.     # test exception handling (exception is caught and args is '')
267.     directive.env.config.autodoc_docstring_signature = False
268.     assert formatsig('function', 'int', int, None, None) == ''
269. 
270.     # test processing by event handler
271.     assert formatsig('method', 'bar', H.foo1, None, None) == '42'
272. 
273.     # test functions created via functools.partial
274.     from functools import partial
275.     curried1 = partial(lambda a, b, c: None, 'A')
276.     assert formatsig('function', 'curried1', curried1, None, None) == \
277.         '(b, c)'
278.     curried2 = partial(lambda a, b, c=42: None, 'A')
279.     assert formatsig('function', 'curried2', curried2, None, None) == \
280.         '(b, c=42)'
281.     curried3 = partial(lambda a, b, *c: None, 'A')
282.     assert formatsig('function', 'curried3', curried3, None, None) == \
283.         '(b, *c)'
284.     curried4 = partial(lambda a, b, c=42, *d, **e: None, 'A')
285.     assert formatsig('function', 'curried4', curried4, None, None) == \
286.         '(b, c=42, *d, **e)'
287. 
288. 
289. @pytest.mark.skipif(sys.version_info < (3, 5), reason='typing is available since python3.5.')
290. @pytest.mark.sphinx('html', testroot='ext-autodoc')
291. def test_autodoc_process_signature_typing_generic(app):
292.     actual = do_autodoc(app, 'class', 'target.generic_class.A', {})
293. 
294.     assert list(actual) == [
295.         '',
296.         '.. py:class:: A(a, b=None)',
297.         '   :module: target.generic_class',
298.         '',
299.         '   docstring for A',
300.         '',
301.     ]
302. 
303. 
304. def test_autodoc_process_signature_typehints(app):
305.     captured = []
306. 
307.     def process_signature(*args):
308.         captured.append(args)
309. 
310.     app.connect('autodoc-process-signature', process_signature)
311. 
312.     def func(x: int, y: int) -> int:
313.         pass
314. 
315.     directive = make_directive_bridge(app.env)
316.     inst = app.registry.documenters['function'](directive, 'func')
317.     inst.fullname = 'func'
318.     inst.object = func
319.     inst.objpath = ['func']
320.     inst.format_signature()
321.     assert captured == [(app, 'function', 'func', func,
322.                          directive.genopt, '(x: int, y: int)', 'int')]
323. 
324. 
325. def test_get_doc(app):
326.     directive = make_directive_bridge(app.env)
327. 
328.     def getdocl(objtype, obj):
329.         inst = app.registry.documenters[objtype](directive, 'tmp')
330.         inst.parent = object  # dummy
331.         inst.object = obj
332.         inst.objpath = [obj.__name__]
333.         inst.doc_as_attr = False
334.         inst.format_signature()  # handle docstring signatures!
335.         ds = inst.get_doc()
336.         # for testing purposes, concat them and strip the empty line at the end
337.         res = sum(ds, [])[:-1]
338.         print(res)
339.         return res
340. 
341.     # objects without docstring
342.     def f():
343.         pass
344.     assert getdocl('function', f) == []
345. 
346.     # standard function, diverse docstring styles...
347.     def f():
348.         """Docstring"""
349.     def g():
350.         """
351.         Docstring
352.         """
353.     for func in (f, g):
354.         assert getdocl('function', func) == ['Docstring']
355. 
356.     # first line vs. other lines indentation
357.     def f():
358.         """First line
359. 
360.         Other
361.           lines
362.         """
363.     assert getdocl('function', f) == ['First line', '', 'Other', '  lines']
364. 
365.     # charset guessing (this module is encoded in utf-8)
366.     def f():
367.         """Döcstring"""
368.     assert getdocl('function', f) == ['Döcstring']
369. 
370.     # verify that method docstrings get extracted in both normal case
371.     # and in case of bound method posing as a function
372.     class J:  # NOQA
373.         def foo(self):
374.             """Method docstring"""
375.     assert getdocl('method', J.foo) == ['Method docstring']
376.     assert getdocl('function', J().foo) == ['Method docstring']
377. 
378. 
379. @pytest.mark.sphinx('html', testroot='ext-autodoc')
380. def test_new_documenter(app):
381.     class MyDocumenter(ModuleLevelDocumenter):
382.         objtype = 'integer'
383.         directivetype = 'integer'
384.         priority = 100
385. 
386.         @classmethod
387.         def can_document_member(cls, member, membername, isattr, parent):
388.             return isinstance(member, int)
389. 
390.         def document_members(self, all_members=False):
391.             return
392. 
393.     app.add_autodocumenter(MyDocumenter)
394. 
395.     options = {"members": 'integer'}
396.     actual = do_autodoc(app, 'module', 'target', options)
397.     assert list(actual) == [
398.         '',
399.         '.. py:module:: target',
400.         '',
401.         '',
402.         '.. py:integer:: integer',
403.         '   :module: target',
404.         '',
405.         '   documentation for the integer',
406.         '',
407.     ]
408. 
409. 
410. def test_attrgetter_using(app):
411.     from target import Class
412.     from target.inheritance import Derived
413. 
414.     directive = make_directive_bridge(app.env)
415. 
416.     def assert_getter_works(objtype, name, obj, attrs=[], **kw):
417.         getattr_spy = []
418. 
419.         def special_getattr(obj, name, *defargs):
420.             if name in attrs:
421.                 getattr_spy.append((obj, name))
422.                 return None
423.             return getattr(obj, name, *defargs)
424.         app.add_autodoc_attrgetter(type, special_getattr)
425. 
426.         del getattr_spy[:]
427.         inst = app.registry.documenters[objtype](directive, name)
428.         inst.generate(**kw)
429. 
430.         hooked_members = [s[1] for s in getattr_spy]
431.         documented_members = [s[1] for s in processed_signatures]
432.         for attr in attrs:
433.             fullname = '.'.join((name, attr))
434.             assert attr in hooked_members
435.             assert fullname not in documented_members, \
436.                 '%r was not hooked by special_attrgetter function' % fullname
437. 
438.     with catch_warnings(record=True):
439.         directive.genopt['members'] = ALL
440.         directive.genopt['inherited_members'] = False
441.         print(directive.genopt)
442.         assert_getter_works('class', 'target.Class', Class, ['meth'])
443. 
444.         directive.genopt['inherited_members'] = True
445.         assert_getter_works('class', 'target.inheritance.Derived', Derived, ['inheritedmeth'])
446. 
447. 
448. @pytest.mark.sphinx('html', testroot='ext-autodoc')
449. def test_py_module(app, warning):
450.     # without py:module
451.     actual = do_autodoc(app, 'method', 'Class.meth')
452.     assert list(actual) == []
453.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
454.             in warning.getvalue())
455. 
456.     # with py:module
457.     app.env.ref_context['py:module'] = 'target'
458.     warning.truncate(0)
459. 
460.     actual = do_autodoc(app, 'method', 'Class.meth')
461.     assert list(actual) == [
462.         '',
463.         '.. py:method:: Class.meth()',
464.         '   :module: target',
465.         '',
466.         '   Function.',
467.         '',
468.     ]
469.     assert ("don't know which module to import for autodocumenting 'Class.meth'"
470.             not in warning.getvalue())
471. 
472. 
473. @pytest.mark.sphinx('html', testroot='ext-autodoc')
474. def test_autodoc_decorator(app):
475.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco1')
476.     assert list(actual) == [
477.         '',
478.         '.. py:decorator:: deco1',
479.         '   :module: target.decorator',
480.         '',
481.         '   docstring for deco1',
482.         '',
483.     ]
484. 
485.     actual = do_autodoc(app, 'decorator', 'target.decorator.deco2')
486.     assert list(actual) == [
487.         '',
488.         '.. py:decorator:: deco2(condition, message)',
489.         '   :module: target.decorator',
490.         '',
491.         '   docstring for deco2',
492.         '',
493.     ]
494. 
495. 
496. @pytest.mark.sphinx('html', testroot='ext-autodoc')
497. def test_autodoc_exception(app):
498.     actual = do_autodoc(app, 'exception', 'target.CustomEx')
499.     assert list(actual) == [
500.         '',


File: tests/test_ext_autodoc.py
Line number range: 501 - 2283
Content:
501.         '.. py:exception:: CustomEx',
502.         '   :module: target',
503.         '',
504.         '   My custom exception.',
505.         '',
506.     ]
507. 
508. 
509. @pytest.mark.sphinx('html', testroot='ext-autodoc')
510. def test_autodoc_warnings(app, warning):
511.     app.env.temp_data['docname'] = 'dummy'
512. 
513.     # can't import module
514.     do_autodoc(app, 'module', 'unknown')
515.     assert "failed to import module 'unknown'" in warning.getvalue()
516. 
517.     # missing function
518.     do_autodoc(app, 'function', 'unknown')
519.     assert "import for autodocumenting 'unknown'" in warning.getvalue()
520. 
521.     do_autodoc(app, 'function', 'target.unknown')
522.     assert "failed to import function 'unknown' from module 'target'" in warning.getvalue()
523. 
524.     # missing method
525.     do_autodoc(app, 'method', 'target.Class.unknown')
526.     assert "failed to import method 'Class.unknown' from module 'target'" in warning.getvalue()
527. 
528. 
529. @pytest.mark.sphinx('html', testroot='ext-autodoc')
530. def test_autodoc_attributes(app):
531.     options = {"synopsis": 'Synopsis',
532.                "platform": "Platform",
533.                "deprecated": None}
534.     actual = do_autodoc(app, 'module', 'target', options)
535.     assert list(actual) == [
536.         '',
537.         '.. py:module:: target',
538.         '   :synopsis: Synopsis',
539.         '   :platform: Platform',
540.         '   :deprecated:',
541.         ''
542.     ]
543. 
544. 
545. @pytest.mark.sphinx('html', testroot='ext-autodoc')
546. def test_autodoc_members(app):
547.     # default (no-members)
548.     actual = do_autodoc(app, 'class', 'target.inheritance.Base')
549.     assert list(filter(lambda l: '::' in l, actual)) == [
550.         '.. py:class:: Base()',
551.     ]
552. 
553.     # default ALL-members
554.     options = {"members": None}
555.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
556.     assert list(filter(lambda l: '::' in l, actual)) == [
557.         '.. py:class:: Base()',
558.         '   .. py:method:: Base.inheritedclassmeth()',
559.         '   .. py:method:: Base.inheritedmeth()',
560.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
561.     ]
562. 
563.     # default specific-members
564.     options = {"members": "inheritedmeth,inheritedstaticmeth"}
565.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
566.     assert list(filter(lambda l: '::' in l, actual)) == [
567.         '.. py:class:: Base()',
568.         '   .. py:method:: Base.inheritedmeth()',
569.         '   .. py:method:: Base.inheritedstaticmeth(cls)'
570.     ]
571. 
572. 
573. @pytest.mark.sphinx('html', testroot='ext-autodoc')
574. def test_autodoc_exclude_members(app):
575.     options = {"members": None,
576.                "exclude-members": "inheritedmeth,inheritedstaticmeth"}
577.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
578.     assert list(filter(lambda l: '::' in l, actual)) == [
579.         '.. py:class:: Base()',
580.         '   .. py:method:: Base.inheritedclassmeth()'
581.     ]
582. 
583.     # members vs exclude-members
584.     options = {"members": "inheritedmeth",
585.                "exclude-members": "inheritedmeth"}
586.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
587.     assert list(filter(lambda l: '::' in l, actual)) == [
588.         '.. py:class:: Base()',
589.     ]
590. 
591. 
592. @pytest.mark.sphinx('html', testroot='ext-autodoc')
593. def test_autodoc_undoc_members(app):
594.     options = {"members": None,
595.                "undoc-members": None}
596.     actual = do_autodoc(app, 'class', 'target.Class', options)
597.     assert list(filter(lambda l: '::' in l, actual)) == [
598.         '.. py:class:: Class(arg)',
599.         '   .. py:attribute:: Class.attr',
600.         '   .. py:attribute:: Class.docattr',
601.         '   .. py:method:: Class.excludemeth()',
602.         '   .. py:attribute:: Class.inst_attr_comment',
603.         '   .. py:attribute:: Class.inst_attr_inline',
604.         '   .. py:attribute:: Class.inst_attr_string',
605.         '   .. py:attribute:: Class.mdocattr',
606.         '   .. py:method:: Class.meth()',
607.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
608.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
609.         '   .. py:attribute:: Class.skipattr',
610.         '   .. py:method:: Class.skipmeth()',
611.         '   .. py:attribute:: Class.udocattr',
612.         '   .. py:method:: Class.undocmeth()'
613.     ]
614. 
615. 
616. @pytest.mark.sphinx('html', testroot='ext-autodoc')
617. def test_autodoc_inherited_members(app):
618.     options = {"members": None,
619.                "inherited-members": None}
620.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
621.     assert list(filter(lambda l: 'method::' in l, actual)) == [
622.         '   .. py:method:: Derived.inheritedclassmeth()',
623.         '   .. py:method:: Derived.inheritedmeth()',
624.         '   .. py:method:: Derived.inheritedstaticmeth(cls)',
625.     ]
626. 
627. 
628. @pytest.mark.sphinx('html', testroot='ext-autodoc')
629. def test_autodoc_inherited_members_Base(app):
630.     options = {"members": None,
631.                "inherited-members": "Base",
632.                "special-members": None}
633. 
634.     # check methods for object class are shown
635.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
636.     assert '   .. py:method:: Derived.inheritedmeth()' in actual
637.     assert '   .. py:method:: Derived.inheritedclassmeth' not in actual
638. 
639. 
640. @pytest.mark.sphinx('html', testroot='ext-autodoc')
641. def test_autodoc_inherited_members_None(app):
642.     options = {"members": None,
643.                "inherited-members": "None",
644.                "special-members": None}
645. 
646.     # check methods for object class are shown
647.     actual = do_autodoc(app, 'class', 'target.inheritance.Derived', options)
648.     assert '   .. py:method:: Derived.__init__()' in actual
649.     assert '   .. py:method:: Derived.__str__()' in actual
650. 
651. 
652. @pytest.mark.sphinx('html', testroot='ext-autodoc')
653. def test_autodoc_imported_members(app):
654.     options = {"members": None,
655.                "imported-members": None,
656.                "ignore-module-all": None}
657.     actual = do_autodoc(app, 'module', 'target', options)
658.     assert '.. py:function:: save_traceback(app: Sphinx) -> str' in actual
659. 
660. 
661. @pytest.mark.sphinx('html', testroot='ext-autodoc')
662. def test_autodoc_special_members(app):
663.     # specific special methods
664.     options = {"undoc-members": None,
665.                "special-members": "__init__,__special1__"}
666.     actual = do_autodoc(app, 'class', 'target.Class', options)
667.     assert list(filter(lambda l: '::' in l, actual)) == [
668.         '.. py:class:: Class(arg)',
669.         '   .. py:method:: Class.__init__(arg)',
670.         '   .. py:method:: Class.__special1__()',
671.     ]
672. 
673.     # combination with specific members
674.     options = {"members": "attr,docattr",
675.                "undoc-members": None,
676.                "special-members": "__init__,__special1__"}
677.     actual = do_autodoc(app, 'class', 'target.Class', options)
678.     assert list(filter(lambda l: '::' in l, actual)) == [
679.         '.. py:class:: Class(arg)',
680.         '   .. py:method:: Class.__init__(arg)',
681.         '   .. py:method:: Class.__special1__()',
682.         '   .. py:attribute:: Class.attr',
683.         '   .. py:attribute:: Class.docattr',
684.     ]
685. 
686.     # all special methods
687.     options = {"members": None,
688.                "undoc-members": None,
689.                "special-members": None}
690.     actual = do_autodoc(app, 'class', 'target.Class', options)
691.     assert list(filter(lambda l: '::' in l, actual)) == [
692.         '.. py:class:: Class(arg)',
693.         '   .. py:attribute:: Class.__annotations__',
694.         '   .. py:attribute:: Class.__dict__',
695.         '   .. py:method:: Class.__init__(arg)',
696.         '   .. py:attribute:: Class.__module__',
697.         '   .. py:method:: Class.__special1__()',
698.         '   .. py:method:: Class.__special2__()',
699.         '   .. py:attribute:: Class.__weakref__',
700.         '   .. py:attribute:: Class.attr',
701.         '   .. py:attribute:: Class.docattr',
702.         '   .. py:method:: Class.excludemeth()',
703.         '   .. py:attribute:: Class.inst_attr_comment',
704.         '   .. py:attribute:: Class.inst_attr_inline',
705.         '   .. py:attribute:: Class.inst_attr_string',
706.         '   .. py:attribute:: Class.mdocattr',
707.         '   .. py:method:: Class.meth()',
708.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
709.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
710.         '   .. py:attribute:: Class.skipattr',
711.         '   .. py:method:: Class.skipmeth()',
712.         '   .. py:attribute:: Class.udocattr',
713.         '   .. py:method:: Class.undocmeth()'
714.     ]
715. 
716. 
717. @pytest.mark.sphinx('html', testroot='ext-autodoc')
718. def test_autodoc_ignore_module_all(app):
719.     # default (no-ignore-module-all)
720.     options = {"members": None}
721.     actual = do_autodoc(app, 'module', 'target', options)
722.     assert list(filter(lambda l: 'class::' in l, actual)) == [
723.         '.. py:class:: Class(arg)',
724.     ]
725. 
726.     # ignore-module-all
727.     options = {"members": None,
728.                "ignore-module-all": None}
729.     actual = do_autodoc(app, 'module', 'target', options)
730.     assert list(filter(lambda l: 'class::' in l, actual)) == [
731.         '.. py:class:: Class(arg)',
732.         '.. py:class:: CustomDict',
733.         '.. py:class:: InnerChild()',
734.         '.. py:class:: InstAttCls()',
735.         '.. py:class:: Outer()',
736.         '   .. py:class:: Outer.Inner()',
737.         '.. py:class:: StrRepr'
738.     ]
739. 
740. 
741. @pytest.mark.sphinx('html', testroot='ext-autodoc')
742. def test_autodoc_noindex(app):
743.     options = {"noindex": True}
744.     actual = do_autodoc(app, 'module', 'target', options)
745.     assert list(actual) == [
746.         '',
747.         '.. py:module:: target',
748.         '   :noindex:',
749.         ''
750.     ]
751. 
752.     # TODO: :noindex: should be propagated to children of target item.
753. 
754.     actual = do_autodoc(app, 'class', 'target.inheritance.Base', options)
755.     assert list(actual) == [
756.         '',
757.         '.. py:class:: Base()',
758.         '   :noindex:',
759.         '   :module: target.inheritance',
760.         ''
761.     ]
762. 
763. 
764. @pytest.mark.sphinx('html', testroot='ext-autodoc')
765. def test_autodoc_subclass_of_builtin_class(app):
766.     options = {"members": None}
767.     actual = do_autodoc(app, 'class', 'target.CustomDict', options)
768.     assert list(actual) == [
769.         '',
770.         '.. py:class:: CustomDict',
771.         '   :module: target',
772.         '',
773.         '   Docstring.',
774.         '',
775.     ]
776. 
777. 
778. @pytest.mark.sphinx('html', testroot='ext-autodoc')
779. def test_autodoc_inner_class(app):
780.     options = {"members": None}
781.     actual = do_autodoc(app, 'class', 'target.Outer', options)
782.     assert list(actual) == [
783.         '',
784.         '.. py:class:: Outer()',
785.         '   :module: target',
786.         '',
787.         '   Foo',
788.         '',
789.         '',
790.         '   .. py:class:: Outer.Inner()',
791.         '      :module: target',
792.         '',
793.         '      Foo',
794.         '',
795.         '',
796.         '      .. py:method:: Outer.Inner.meth()',
797.         '         :module: target',
798.         '',
799.         '         Foo',
800.         '',
801.         '',
802.         '   .. py:attribute:: Outer.factory',
803.         '      :module: target',
804.         '',
805.         '      alias of :class:`dict`'
806.     ]
807. 
808.     actual = do_autodoc(app, 'class', 'target.Outer.Inner', options)
809.     assert list(actual) == [
810.         '',
811.         '.. py:class:: Inner()',
812.         '   :module: target.Outer',
813.         '',
814.         '   Foo',
815.         '',
816.         '',
817.         '   .. py:method:: Inner.meth()',
818.         '      :module: target.Outer',
819.         '',
820.         '      Foo',
821.         '',
822.     ]
823. 
824.     options['show-inheritance'] = True
825.     actual = do_autodoc(app, 'class', 'target.InnerChild', options)
826.     assert list(actual) == [
827.         '',
828.         '.. py:class:: InnerChild()',
829.         '   :module: target', '',
830.         '   Bases: :class:`target.Outer.Inner`',
831.         '',
832.         '   InnerChild docstring',
833.         '',
834.     ]
835. 
836. 
837. @pytest.mark.sphinx('html', testroot='ext-autodoc')
838. def test_autodoc_classmethod(app):
839.     actual = do_autodoc(app, 'method', 'target.inheritance.Base.inheritedclassmeth')
840.     assert list(actual) == [
841.         '',
842.         '.. py:method:: Base.inheritedclassmeth()',
843.         '   :module: target.inheritance',
844.         '   :classmethod:',
845.         '',
846.         '   Inherited class method.',
847.         '',
848.     ]
849. 
850. 
851. @pytest.mark.sphinx('html', testroot='ext-autodoc')
852. def test_autodoc_staticmethod(app):
853.     actual = do_autodoc(app, 'method', 'target.inheritance.Base.inheritedstaticmeth')
854.     assert list(actual) == [
855.         '',
856.         '.. py:method:: Base.inheritedstaticmeth(cls)',
857.         '   :module: target.inheritance',
858.         '   :staticmethod:',
859.         '',
860.         '   Inherited static method.',
861.         '',
862.     ]
863. 
864. 
865. @pytest.mark.sphinx('html', testroot='ext-autodoc')
866. def test_autodoc_descriptor(app):
867.     options = {"members": None,
868.                "undoc-members": True}
869.     actual = do_autodoc(app, 'class', 'target.descriptor.Class', options)
870.     assert list(actual) == [
871.         '',
872.         '.. py:class:: Class()',
873.         '   :module: target.descriptor',
874.         '',
875.         '',
876.         '   .. py:attribute:: Class.descr',
877.         '      :module: target.descriptor',
878.         '',
879.         '      Descriptor instance docstring.',
880.         '',
881.         '',
882.         '   .. py:method:: Class.prop',
883.         '      :module: target.descriptor',
884.         '      :property:',
885.         '',
886.         '      Property.',
887.         ''
888.     ]
889. 
890. 
891. @pytest.mark.skipif(sys.version_info < (3, 8),
892.                     reason='cached_property is available since python3.8.')
893. @pytest.mark.sphinx('html', testroot='ext-autodoc')
894. def test_autodoc_cached_property(app):
895.     options = {"members": None,
896.                "undoc-members": True}
897.     actual = do_autodoc(app, 'class', 'target.cached_property.Foo', options)
898.     assert list(actual) == [
899.         '',
900.         '.. py:class:: Foo()',
901.         '   :module: target.cached_property',
902.         '',
903.         '',
904.         '   .. py:method:: Foo.prop',
905.         '      :module: target.cached_property',
906.         '      :property:',
907.         '',
908.     ]
909. 
910. 
911. @pytest.mark.sphinx('html', testroot='ext-autodoc')
912. def test_autodoc_member_order(app):
913.     # case member-order='bysource'
914.     options = {"members": None,
915.                'member-order': 'bysource',
916.                "undoc-members": True,
917.                'private-members': True}
918.     actual = do_autodoc(app, 'class', 'target.Class', options)
919.     assert list(filter(lambda l: '::' in l, actual)) == [
920.         '.. py:class:: Class(arg)',
921.         '   .. py:method:: Class.meth()',
922.         '   .. py:method:: Class.undocmeth()',
923.         '   .. py:method:: Class.skipmeth()',
924.         '   .. py:method:: Class.excludemeth()',
925.         '   .. py:attribute:: Class.skipattr',
926.         '   .. py:attribute:: Class.attr',
927.         '   .. py:attribute:: Class.docattr',
928.         '   .. py:attribute:: Class.udocattr',
929.         '   .. py:attribute:: Class.mdocattr',
930.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
931.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
932.         '   .. py:attribute:: Class.inst_attr_inline',
933.         '   .. py:attribute:: Class.inst_attr_comment',
934.         '   .. py:attribute:: Class.inst_attr_string',
935.         '   .. py:attribute:: Class._private_inst_attr'
936.     ]
937. 
938.     # case member-order='groupwise'
939.     options = {"members": None,
940.                'member-order': 'groupwise',
941.                "undoc-members": True,
942.                'private-members': True}
943.     actual = do_autodoc(app, 'class', 'target.Class', options)
944.     assert list(filter(lambda l: '::' in l, actual)) == [
945.         '.. py:class:: Class(arg)',
946.         '   .. py:method:: Class.excludemeth()',
947.         '   .. py:method:: Class.meth()',
948.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
949.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
950.         '   .. py:method:: Class.skipmeth()',
951.         '   .. py:method:: Class.undocmeth()',
952.         '   .. py:attribute:: Class._private_inst_attr',
953.         '   .. py:attribute:: Class.attr',
954.         '   .. py:attribute:: Class.docattr',
955.         '   .. py:attribute:: Class.inst_attr_comment',
956.         '   .. py:attribute:: Class.inst_attr_inline',
957.         '   .. py:attribute:: Class.inst_attr_string',
958.         '   .. py:attribute:: Class.mdocattr',
959.         '   .. py:attribute:: Class.skipattr',
960.         '   .. py:attribute:: Class.udocattr'
961.     ]
962. 
963.     # case member-order=None
964.     options = {"members": None,
965.                "undoc-members": True,
966.                'private-members': True}
967.     actual = do_autodoc(app, 'class', 'target.Class', options)
968.     assert list(filter(lambda l: '::' in l, actual)) == [
969.         '.. py:class:: Class(arg)',
970.         '   .. py:attribute:: Class._private_inst_attr',
971.         '   .. py:attribute:: Class.attr',
972.         '   .. py:attribute:: Class.docattr',
973.         '   .. py:method:: Class.excludemeth()',
974.         '   .. py:attribute:: Class.inst_attr_comment',
975.         '   .. py:attribute:: Class.inst_attr_inline',
976.         '   .. py:attribute:: Class.inst_attr_string',
977.         '   .. py:attribute:: Class.mdocattr',
978.         '   .. py:method:: Class.meth()',
979.         '   .. py:method:: Class.moore(a, e, f) -> happiness',
980.         '   .. py:method:: Class.roger(a, *, b=2, c=3, d=4, e=5, f=6)',
981.         '   .. py:attribute:: Class.skipattr',
982.         '   .. py:method:: Class.skipmeth()',
983.         '   .. py:attribute:: Class.udocattr',
984.         '   .. py:method:: Class.undocmeth()'
985.     ]
986. 
987. 
988. @pytest.mark.sphinx('html', testroot='ext-autodoc')
989. def test_autodoc_module_member_order(app):
990.     # case member-order='bysource'
991.     options = {"members": 'foo, Bar, baz, qux, Quux, foobar',
992.                'member-order': 'bysource',
993.                "undoc-members": True}
994.     actual = do_autodoc(app, 'module', 'target.sort_by_all', options)
995.     assert list(filter(lambda l: '::' in l, actual)) == [
996.         '.. py:module:: target.sort_by_all',
997.         '.. py:function:: baz()',
998.         '.. py:function:: foo()',
999.         '.. py:class:: Bar()',
1000.         '.. py:class:: Quux()',
1001.         '.. py:function:: foobar()',
1002.         '.. py:function:: qux()',
1003.     ]
1004. 
1005.     # case member-order='bysource' and ignore-module-all
1006.     options = {"members": 'foo, Bar, baz, qux, Quux, foobar',
1007.                'member-order': 'bysource',
1008.                "undoc-members": True,
1009.                "ignore-module-all": True}
1010.     actual = do_autodoc(app, 'module', 'target.sort_by_all', options)
1011.     assert list(filter(lambda l: '::' in l, actual)) == [
1012.         '.. py:module:: target.sort_by_all',
1013.         '.. py:function:: foo()',
1014.         '.. py:class:: Bar()',
1015.         '.. py:function:: baz()',
1016.         '.. py:function:: qux()',
1017.         '.. py:class:: Quux()',
1018.         '.. py:function:: foobar()',
1019.     ]
1020. 
1021. 
1022. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1023. def test_autodoc_module_scope(app):
1024.     app.env.temp_data['autodoc:module'] = 'target'
1025.     actual = do_autodoc(app, 'attribute', 'Class.mdocattr')
1026.     assert list(actual) == [
1027.         '',
1028.         '.. py:attribute:: Class.mdocattr',
1029.         '   :module: target',
1030.         '   :value: <_io.StringIO object>',
1031.         '',
1032.         '   should be documented as well - süß',
1033.         '',
1034.     ]
1035. 
1036. 
1037. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1038. def test_autodoc_class_scope(app):
1039.     app.env.temp_data['autodoc:module'] = 'target'
1040.     app.env.temp_data['autodoc:class'] = 'Class'
1041.     actual = do_autodoc(app, 'attribute', 'mdocattr')
1042.     assert list(actual) == [
1043.         '',
1044.         '.. py:attribute:: Class.mdocattr',
1045.         '   :module: target',
1046.         '   :value: <_io.StringIO object>',
1047.         '',
1048.         '   should be documented as well - süß',
1049.         '',
1050.     ]
1051. 
1052. 
1053. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1054. def test_class_attributes(app):
1055.     options = {"members": None,
1056.                "undoc-members": True}
1057.     actual = do_autodoc(app, 'class', 'target.AttCls', options)
1058.     assert list(actual) == [
1059.         '',
1060.         '.. py:class:: AttCls()',
1061.         '   :module: target',
1062.         '',
1063.         '',
1064.         '   .. py:attribute:: AttCls.a1',
1065.         '      :module: target',
1066.         '      :value: hello world',
1067.         '',
1068.         '',
1069.         '   .. py:attribute:: AttCls.a2',
1070.         '      :module: target',
1071.         '      :value: None',
1072.         ''
1073.     ]
1074. 
1075. 
1076. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1077. def test_autoclass_instance_attributes(app):
1078.     options = {"members": None}
1079.     actual = do_autodoc(app, 'class', 'target.InstAttCls', options)
1080.     assert list(actual) == [
1081.         '',
1082.         '.. py:class:: InstAttCls()',
1083.         '   :module: target',
1084.         '',
1085.         '   Class with documented class and instance attributes.',
1086.         '',
1087.         '',
1088.         '   .. py:attribute:: InstAttCls.ca1',
1089.         '      :module: target',
1090.         "      :value: 'a'",
1091.         '',
1092.         '      Doc comment for class attribute InstAttCls.ca1.',
1093.         '      It can have multiple lines.',
1094.         '',
1095.         '',
1096.         '   .. py:attribute:: InstAttCls.ca2',
1097.         '      :module: target',
1098.         "      :value: 'b'",
1099.         '',
1100.         '      Doc comment for InstAttCls.ca2. One line only.',
1101.         '',
1102.         '',
1103.         '   .. py:attribute:: InstAttCls.ca3',
1104.         '      :module: target',
1105.         "      :value: 'c'",
1106.         '',
1107.         '      Docstring for class attribute InstAttCls.ca3.',
1108.         '',
1109.         '',
1110.         '   .. py:attribute:: InstAttCls.ia1',
1111.         '      :module: target',
1112.         '',
1113.         '      Doc comment for instance attribute InstAttCls.ia1',
1114.         '',
1115.         '',
1116.         '   .. py:attribute:: InstAttCls.ia2',
1117.         '      :module: target',
1118.         '',
1119.         '      Docstring for instance attribute InstAttCls.ia2.',
1120.         ''
1121.     ]
1122. 
1123.     # pick up arbitrary attributes
1124.     options = {"members": 'ca1,ia1'}
1125.     actual = do_autodoc(app, 'class', 'target.InstAttCls', options)
1126.     assert list(actual) == [
1127.         '',
1128.         '.. py:class:: InstAttCls()',
1129.         '   :module: target',
1130.         '',
1131.         '   Class with documented class and instance attributes.',
1132.         '',
1133.         '',
1134.         '   .. py:attribute:: InstAttCls.ca1',
1135.         '      :module: target',
1136.         "      :value: 'a'",
1137.         '',
1138.         '      Doc comment for class attribute InstAttCls.ca1.',
1139.         '      It can have multiple lines.',
1140.         '',
1141.         '',
1142.         '   .. py:attribute:: InstAttCls.ia1',
1143.         '      :module: target',
1144.         '',
1145.         '      Doc comment for instance attribute InstAttCls.ia1',
1146.         ''
1147.     ]
1148. 
1149. 
1150. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1151. def test_autoattribute_instance_attributes(app):
1152.     actual = do_autodoc(app, 'attribute', 'target.InstAttCls.ia1')
1153.     assert list(actual) == [
1154.         '',
1155.         '.. py:attribute:: InstAttCls.ia1',
1156.         '   :module: target',
1157.         '',
1158.         '   Doc comment for instance attribute InstAttCls.ia1',
1159.         ''
1160.     ]
1161. 
1162. 
1163. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1164. def test_slots(app):
1165.     options = {"members": None,
1166.                "undoc-members": True}
1167.     actual = do_autodoc(app, 'module', 'target.slots', options)
1168.     assert list(actual) == [
1169.         '',
1170.         '.. py:module:: target.slots',
1171.         '',
1172.         '',
1173.         '.. py:class:: Bar()',
1174.         '   :module: target.slots',
1175.         '',
1176.         '   docstring',
1177.         '',
1178.         '',
1179.         '   .. py:attribute:: Bar.attr1',
1180.         '      :module: target.slots',
1181.         '',
1182.         '      docstring of attr1',
1183.         '',
1184.         '',
1185.         '   .. py:attribute:: Bar.attr2',
1186.         '      :module: target.slots',
1187.         '',
1188.         '      docstring of instance attr2',
1189.         '',
1190.         '',
1191.         '   .. py:attribute:: Bar.attr3',
1192.         '      :module: target.slots',
1193.         '',
1194.         '',
1195.         '.. py:class:: Baz()',
1196.         '   :module: target.slots',
1197.         '',
1198.         '   docstring',
1199.         '',
1200.         '',
1201.         '   .. py:attribute:: Baz.attr',
1202.         '      :module: target.slots',
1203.         '',
1204.         '',
1205.         '.. py:class:: Foo()',
1206.         '   :module: target.slots',
1207.         '',
1208.         '   docstring',
1209.         '',
1210.         '',
1211.         '   .. py:attribute:: Foo.attr',
1212.         '      :module: target.slots',
1213.         '',
1214.     ]
1215. 
1216. 
1217. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1218. def test_enum_class(app):
1219.     options = {"members": None}
1220.     actual = do_autodoc(app, 'class', 'target.enums.EnumCls', options)
1221.     assert list(actual) == [
1222.         '',
1223.         '.. py:class:: EnumCls(value)',
1224.         '   :module: target.enums',
1225.         '',
1226.         '   this is enum class',
1227.         '',
1228.         '',
1229.         '   .. py:method:: EnumCls.say_goodbye()',
1230.         '      :module: target.enums',
1231.         '      :classmethod:',
1232.         '',
1233.         '      a classmethod says good-bye to you.',
1234.         '',
1235.         '',
1236.         '   .. py:method:: EnumCls.say_hello()',
1237.         '      :module: target.enums',
1238.         '',
1239.         '      a method says hello to you.',
1240.         '',
1241.         '',
1242.         '   .. py:attribute:: EnumCls.val1',
1243.         '      :module: target.enums',
1244.         '      :value: 12',
1245.         '',
1246.         '      doc for val1',
1247.         '',
1248.         '',
1249.         '   .. py:attribute:: EnumCls.val2',
1250.         '      :module: target.enums',
1251.         '      :value: 23',
1252.         '',
1253.         '      doc for val2',
1254.         '',
1255.         '',
1256.         '   .. py:attribute:: EnumCls.val3',
1257.         '      :module: target.enums',
1258.         '      :value: 34',
1259.         '',
1260.         '      doc for val3',
1261.         '',
1262.     ]
1263. 
1264.     # checks for an attribute of EnumClass
1265.     actual = do_autodoc(app, 'attribute', 'target.enums.EnumCls.val1')
1266.     assert list(actual) == [
1267.         '',
1268.         '.. py:attribute:: EnumCls.val1',
1269.         '   :module: target.enums',
1270.         '   :value: 12',
1271.         '',
1272.         '   doc for val1',
1273.         ''
1274.     ]
1275. 
1276. 
1277. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1278. def test_descriptor_class(app):
1279.     options = {"members": 'CustomDataDescriptor,CustomDataDescriptor2'}
1280.     actual = do_autodoc(app, 'module', 'target.descriptor', options)
1281.     assert list(actual) == [
1282.         '',
1283.         '.. py:module:: target.descriptor',
1284.         '',
1285.         '',
1286.         '.. py:class:: CustomDataDescriptor(doc)',
1287.         '   :module: target.descriptor',
1288.         '',
1289.         '   Descriptor class docstring.',
1290.         '',
1291.         '',
1292.         '   .. py:method:: CustomDataDescriptor.meth()',
1293.         '      :module: target.descriptor',
1294.         '',
1295.         '      Function.',
1296.         '',
1297.         '',
1298.         '.. py:class:: CustomDataDescriptor2(doc)',
1299.         '   :module: target.descriptor',
1300.         '',
1301.         '   Descriptor class with custom metaclass docstring.',
1302.         '',
1303.     ]
1304. 
1305. 
1306. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1307. def test_automethod_for_builtin(app):
1308.     actual = do_autodoc(app, 'method', 'builtins.int.__add__')
1309.     assert list(actual) == [
1310.         '',
1311.         '.. py:method:: int.__add__(value, /)',
1312.         '   :module: builtins',
1313.         '',
1314.         '   Return self+value.',
1315.         '',
1316.     ]
1317. 
1318. 
1319. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1320. def test_automethod_for_decorated(app):
1321.     actual = do_autodoc(app, 'method', 'target.decorator.Bar.meth')
1322.     assert list(actual) == [
1323.         '',
1324.         '.. py:method:: Bar.meth(name=None, age=None)',
1325.         '   :module: target.decorator',
1326.         '',
1327.     ]
1328. 
1329. 
1330. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1331. def test_abstractmethods(app):
1332.     options = {"members": None,
1333.                "undoc-members": None}
1334.     actual = do_autodoc(app, 'module', 'target.abstractmethods', options)
1335.     assert list(actual) == [
1336.         '',
1337.         '.. py:module:: target.abstractmethods',
1338.         '',
1339.         '',
1340.         '.. py:class:: Base()',
1341.         '   :module: target.abstractmethods',
1342.         '',
1343.         '',
1344.         '   .. py:method:: Base.abstractmeth()',
1345.         '      :module: target.abstractmethods',
1346.         '      :abstractmethod:',
1347.         '',
1348.         '',
1349.         '   .. py:method:: Base.classmeth()',
1350.         '      :module: target.abstractmethods',
1351.         '      :abstractmethod:',
1352.         '      :classmethod:',
1353.         '',
1354.         '',
1355.         '   .. py:method:: Base.coroutinemeth()',
1356.         '      :module: target.abstractmethods',
1357.         '      :abstractmethod:',
1358.         '      :async:',
1359.         '',
1360.         '',
1361.         '   .. py:method:: Base.meth()',
1362.         '      :module: target.abstractmethods',
1363.         '',
1364.         '',
1365.         '   .. py:method:: Base.prop',
1366.         '      :module: target.abstractmethods',
1367.         '      :abstractmethod:',
1368.         '      :property:',
1369.         '',
1370.         '',
1371.         '   .. py:method:: Base.staticmeth()',
1372.         '      :module: target.abstractmethods',
1373.         '      :abstractmethod:',
1374.         '      :staticmethod:',
1375.         '',
1376.     ]
1377. 
1378. 
1379. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1380. def test_partialfunction(app):
1381.     options = {"members": None}
1382.     actual = do_autodoc(app, 'module', 'target.partialfunction', options)
1383.     assert list(actual) == [
1384.         '',
1385.         '.. py:module:: target.partialfunction',
1386.         '',
1387.         '',
1388.         '.. py:function:: func1(a, b, c)',
1389.         '   :module: target.partialfunction',
1390.         '',
1391.         '   docstring of func1',
1392.         '',
1393.         '',
1394.         '.. py:function:: func2(b, c)',
1395.         '   :module: target.partialfunction',
1396.         '',
1397.         '   docstring of func1',
1398.         '',
1399.         '',
1400.         '.. py:function:: func3(c)',
1401.         '   :module: target.partialfunction',
1402.         '',
1403.         '   docstring of func3',
1404.         '',
1405.         '',
1406.         '.. py:function:: func4()',
1407.         '   :module: target.partialfunction',
1408.         '',
1409.         '   docstring of func3',
1410.         '',
1411.     ]
1412. 
1413. 
1414. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1415. def test_imported_partialfunction_should_not_shown_without_imported_members(app):
1416.     options = {"members": None}
1417.     actual = do_autodoc(app, 'module', 'target.imported_members', options)
1418.     assert list(actual) == [
1419.         '',
1420.         '.. py:module:: target.imported_members',
1421.         ''
1422.     ]
1423. 
1424. 
1425. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1426. def test_bound_method(app):
1427.     options = {"members": None}
1428.     actual = do_autodoc(app, 'module', 'target.bound_method', options)
1429.     assert list(actual) == [
1430.         '',
1431.         '.. py:module:: target.bound_method',
1432.         '',
1433.         '',
1434.         '.. py:function:: bound_method()',
1435.         '   :module: target.bound_method',
1436.         '',
1437.         '   Method docstring',
1438.         '',
1439.     ]
1440. 
1441. 
1442. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1443. def test_coroutine(app):
1444.     actual = do_autodoc(app, 'function', 'target.functions.coroutinefunc')
1445.     assert list(actual) == [
1446.         '',
1447.         '.. py:function:: coroutinefunc()',
1448.         '   :module: target.functions',
1449.         '   :async:',
1450.         '',
1451.     ]
1452. 
1453.     options = {"members": None}
1454.     actual = do_autodoc(app, 'class', 'target.coroutine.AsyncClass', options)
1455.     assert list(actual) == [
1456.         '',
1457.         '.. py:class:: AsyncClass()',
1458.         '   :module: target.coroutine',
1459.         '',
1460.         '',
1461.         '   .. py:method:: AsyncClass.do_coroutine()',
1462.         '      :module: target.coroutine',
1463.         '      :async:',
1464.         '',
1465.         '      A documented coroutine function',
1466.         '',
1467.         '',
1468.         '   .. py:method:: AsyncClass.do_coroutine2()',
1469.         '      :module: target.coroutine',
1470.         '      :async:',
1471.         '      :classmethod:',
1472.         '',
1473.         '      A documented coroutine classmethod',
1474.         '',
1475.         '',
1476.         '   .. py:method:: AsyncClass.do_coroutine3()',
1477.         '      :module: target.coroutine',
1478.         '      :async:',
1479.         '      :staticmethod:',
1480.         '',
1481.         '      A documented coroutine staticmethod',
1482.         '',
1483.     ]
1484. 
1485.     # force-synchronized wrapper
1486.     actual = do_autodoc(app, 'function', 'target.coroutine.sync_func')
1487.     assert list(actual) == [
1488.         '',
1489.         '.. py:function:: sync_func()',
1490.         '   :module: target.coroutine',
1491.         '',
1492.     ]
1493. 
1494. 
1495. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1496. def test_partialmethod(app):
1497.     expected = [
1498.         '',
1499.         '.. py:class:: Cell()',
1500.         '   :module: target.partialmethod',
1501.         '',
1502.         '   An example for partialmethod.',
1503.         '',
1504.         '   refs: https://docs.python.jp/3/library/functools.html#functools.partialmethod',
1505.         '',
1506.         '',
1507.         '   .. py:method:: Cell.set_alive()',
1508.         '      :module: target.partialmethod',
1509.         '',
1510.         '      Make a cell alive.',
1511.         '',
1512.         '',
1513.         '   .. py:method:: Cell.set_state(state)',
1514.         '      :module: target.partialmethod',
1515.         '',
1516.         '      Update state of cell to *state*.',
1517.         '',
1518.     ]
1519. 
1520.     options = {"members": None}
1521.     actual = do_autodoc(app, 'class', 'target.partialmethod.Cell', options)
1522.     assert list(actual) == expected
1523. 
1524. 
1525. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1526. def test_partialmethod_undoc_members(app):
1527.     expected = [
1528.         '',
1529.         '.. py:class:: Cell()',
1530.         '   :module: target.partialmethod',
1531.         '',
1532.         '   An example for partialmethod.',
1533.         '',
1534.         '   refs: https://docs.python.jp/3/library/functools.html#functools.partialmethod',
1535.         '',
1536.         '',
1537.         '   .. py:method:: Cell.set_alive()',
1538.         '      :module: target.partialmethod',
1539.         '',
1540.         '      Make a cell alive.',
1541.         '',
1542.         '',
1543.         '   .. py:method:: Cell.set_dead()',
1544.         '      :module: target.partialmethod',
1545.         '',
1546.         '',
1547.         '   .. py:method:: Cell.set_state(state)',
1548.         '      :module: target.partialmethod',
1549.         '',
1550.         '      Update state of cell to *state*.',
1551.         '',
1552.     ]
1553. 
1554.     options = {"members": None,
1555.                "undoc-members": None}
1556.     actual = do_autodoc(app, 'class', 'target.partialmethod.Cell', options)
1557.     assert list(actual) == expected
1558. 
1559. 
1560. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is available since python3.6.')
1561. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1562. def test_autodoc_typed_instance_variables(app):
1563.     options = {"members": None,
1564.                "undoc-members": True}
1565.     actual = do_autodoc(app, 'module', 'target.typed_vars', options)
1566.     assert list(actual) == [
1567.         '',
1568.         '.. py:module:: target.typed_vars',
1569.         '',
1570.         '',
1571.         '.. py:attribute:: Alias',
1572.         '   :module: target.typed_vars',
1573.         '',
1574.         '   alias of :class:`target.typed_vars.Derived`',
1575.         '',
1576.         '.. py:class:: Class()',
1577.         '   :module: target.typed_vars',
1578.         '',
1579.         '',
1580.         '   .. py:attribute:: Class.attr1',
1581.         '      :module: target.typed_vars',
1582.         '      :type: int',
1583.         '      :value: 0',
1584.         '',
1585.         '',
1586.         '   .. py:attribute:: Class.attr2',
1587.         '      :module: target.typed_vars',
1588.         '      :type: int',
1589.         '',
1590.         '',
1591.         '   .. py:attribute:: Class.attr3',
1592.         '      :module: target.typed_vars',
1593.         '      :type: int',
1594.         '      :value: 0',
1595.         '',
1596.         '',
1597.         '   .. py:attribute:: Class.attr4',
1598.         '      :module: target.typed_vars',
1599.         '      :type: int',
1600.         '',
1601.         '      attr4',
1602.         '',
1603.         '',
1604.         '   .. py:attribute:: Class.attr5',
1605.         '      :module: target.typed_vars',
1606.         '      :type: int',
1607.         '',
1608.         '      attr5',
1609.         '',
1610.         '',
1611.         '   .. py:attribute:: Class.attr6',
1612.         '      :module: target.typed_vars',
1613.         '      :type: int',
1614.         '',
1615.         '      attr6',
1616.         '',
1617.         '',
1618.         '   .. py:attribute:: Class.descr4',
1619.         '      :module: target.typed_vars',
1620.         '      :type: int',
1621.         '',
1622.         '      This is descr4',
1623.         '',
1624.         '',
1625.         '.. py:class:: Derived()',
1626.         '   :module: target.typed_vars',
1627.         '',
1628.         '',
1629.         '   .. py:attribute:: Derived.attr7',
1630.         '      :module: target.typed_vars',
1631.         '      :type: int',
1632.         '',
1633.         '',
1634.         '.. py:data:: attr1',
1635.         '   :module: target.typed_vars',
1636.         '   :type: str',
1637.         "   :value: ''",
1638.         '',
1639.         '   attr1',
1640.         '',
1641.         '',
1642.         '.. py:data:: attr2',
1643.         '   :module: target.typed_vars',
1644.         '   :type: str',
1645.         '',
1646.         '   attr2',
1647.         '',
1648.         '',
1649.         '.. py:data:: attr3',
1650.         '   :module: target.typed_vars',
1651.         '   :type: str',
1652.         "   :value: ''",
1653.         '',
1654.         '   attr3',
1655.         '',
1656.     ]
1657. 
1658. 
1659. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is available since python3.6.')
1660. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1661. def test_autodoc_typed_inherited_instance_variables(app):
1662.     options = {"members": None,
1663.                "undoc-members": True,
1664.                "inherited-members": True}
1665.     actual = do_autodoc(app, 'class', 'target.typed_vars.Derived', options)
1666.     assert list(actual) == [
1667.         '',
1668.         '.. py:class:: Derived()',
1669.         '   :module: target.typed_vars',
1670.         '',
1671.         '',
1672.         '   .. py:attribute:: Derived.attr1',
1673.         '      :module: target.typed_vars',
1674.         '      :type: int',
1675.         '      :value: 0',
1676.         '',
1677.         '',
1678.         '   .. py:attribute:: Derived.attr2',
1679.         '      :module: target.typed_vars',
1680.         '      :type: int',
1681.         '',
1682.         '',
1683.         '   .. py:attribute:: Derived.attr3',
1684.         '      :module: target.typed_vars',
1685.         '      :type: int',
1686.         '      :value: 0',
1687.         '',
1688.         '',
1689.         '   .. py:attribute:: Derived.attr4',
1690.         '      :module: target.typed_vars',
1691.         '      :type: int',
1692.         '',
1693.         '      attr4',
1694.         '',
1695.         '',
1696.         '   .. py:attribute:: Derived.attr5',
1697.         '      :module: target.typed_vars',
1698.         '      :type: int',
1699.         '',
1700.         '      attr5',
1701.         '',
1702.         '',
1703.         '   .. py:attribute:: Derived.attr6',
1704.         '      :module: target.typed_vars',
1705.         '      :type: int',
1706.         '',
1707.         '      attr6',
1708.         '',
1709.         '',
1710.         '   .. py:attribute:: Derived.attr7',
1711.         '      :module: target.typed_vars',
1712.         '      :type: int',
1713.         '',
1714.         '',
1715.         '   .. py:attribute:: Derived.descr4',
1716.         '      :module: target.typed_vars',
1717.         '      :type: int',
1718.         '',
1719.     ]
1720. 
1721. 
1722. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1723. def test_autodoc_GenericAlias(app):
1724.     options = {"members": None,
1725.                "undoc-members": None}
1726.     actual = do_autodoc(app, 'module', 'target.genericalias', options)
1727.     if sys.version_info < (3, 7):
1728.         assert list(actual) == [
1729.             '',
1730.             '.. py:module:: target.genericalias',
1731.             '',
1732.             '',
1733.             '.. py:class:: Class()',
1734.             '   :module: target.genericalias',
1735.             '',
1736.             '',
1737.             '   .. py:attribute:: Class.T',
1738.             '      :module: target.genericalias',
1739.             '',
1740.             '      alias of :class:`List`\\ [:class:`int`]',
1741.             '',
1742.             '.. py:attribute:: T',
1743.             '   :module: target.genericalias',
1744.             '',
1745.             '   alias of :class:`List`\\ [:class:`int`]',
1746.         ]
1747.     else:
1748.         assert list(actual) == [
1749.             '',
1750.             '.. py:module:: target.genericalias',
1751.             '',
1752.             '',
1753.             '.. py:class:: Class()',
1754.             '   :module: target.genericalias',
1755.             '',
1756.             '',
1757.             '   .. py:attribute:: Class.T',
1758.             '      :module: target.genericalias',
1759.             '',
1760.             '      A list of int',
1761.             '',
1762.             '      alias of List[int]',
1763.             '',
1764.             '',
1765.             '.. py:data:: T',
1766.             '   :module: target.genericalias',
1767.             '',
1768.             '   A list of int',
1769.             '',
1770.             '   alias of List[int]',
1771.             '',
1772.         ]
1773. 
1774. 
1775. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1776. def test_autodoc_TypeVar(app):
1777.     options = {"members": None,
1778.                "undoc-members": None}
1779.     actual = do_autodoc(app, 'module', 'target.typevar', options)
1780.     assert list(actual) == [
1781.         '',
1782.         '.. py:module:: target.typevar',
1783.         '',
1784.         '',
1785.         '.. py:class:: Class()',
1786.         '   :module: target.typevar',
1787.         '',
1788.         '',
1789.         '   .. py:attribute:: Class.T1',
1790.         '      :module: target.typevar',
1791.         '',
1792.         '      T1',
1793.         '',
1794.         "      alias of TypeVar('T1')",
1795.         '',
1796.         '',
1797.         '   .. py:attribute:: Class.T6',
1798.         '      :module: target.typevar',
1799.         '',
1800.         '      T6',
1801.         '',
1802.         '      alias of :class:`int`',
1803.         '',
1804.         '',
1805.         '.. py:data:: T1',
1806.         '   :module: target.typevar',
1807.         '',
1808.         '   T1',
1809.         '',
1810.         "   alias of TypeVar('T1')",
1811.         '',
1812.         '',
1813.         '.. py:data:: T3',
1814.         '   :module: target.typevar',
1815.         '',
1816.         '   T3',
1817.         '',
1818.         "   alias of TypeVar('T3', int, str)",
1819.         '',
1820.         '',
1821.         '.. py:data:: T4',
1822.         '   :module: target.typevar',
1823.         '',
1824.         '   T4',
1825.         '',
1826.         "   alias of TypeVar('T4', covariant=True)",
1827.         '',
1828.         '',
1829.         '.. py:data:: T5',
1830.         '   :module: target.typevar',
1831.         '',
1832.         '   T5',
1833.         '',
1834.         "   alias of TypeVar('T5', contravariant=True)",
1835.         '',
1836.         '',
1837.         '.. py:data:: T6',
1838.         '   :module: target.typevar',
1839.         '',
1840.         '   T6',
1841.         '',
1842.         '   alias of :class:`int`',
1843.         '',
1844.     ]
1845. 
1846. 
1847. @pytest.mark.skipif(sys.version_info < (3, 9), reason='py39+ is required.')
1848. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1849. def test_autodoc_Annotated(app):
1850.     options = {"members": None}
1851.     actual = do_autodoc(app, 'module', 'target.annotated', options)
1852.     assert list(actual) == [
1853.         '',
1854.         '.. py:module:: target.annotated',
1855.         '',
1856.         '',
1857.         '.. py:function:: hello(name: str) -> None',
1858.         '   :module: target.annotated',
1859.         '',
1860.         '   docstring',
1861.         '',
1862.     ]
1863. 
1864. 
1865. @pytest.mark.skipif(sys.version_info < (3, 6), reason='py36+ is required.')
1866. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1867. def test_autodoc_TYPE_CHECKING(app):
1868.     options = {"members": None,
1869.                "undoc-members": None}
1870.     actual = do_autodoc(app, 'module', 'target.TYPE_CHECKING', options)
1871.     assert list(actual) == [
1872.         '',
1873.         '.. py:module:: target.TYPE_CHECKING',
1874.         '',
1875.         '',
1876.         '.. py:class:: Foo()',
1877.         '   :module: target.TYPE_CHECKING',
1878.         '',
1879.         '',
1880.         '   .. py:attribute:: Foo.attr1',
1881.         '      :module: target.TYPE_CHECKING',
1882.         '      :type: StringIO',
1883.         '',
1884.     ]
1885. 
1886. 
1887. @pytest.mark.sphinx('html', testroot='pycode-egg')
1888. def test_autodoc_for_egged_code(app):
1889.     options = {"members": None,
1890.                "undoc-members": None}
1891.     actual = do_autodoc(app, 'module', 'sample', options)
1892.     assert list(actual) == [
1893.         '',
1894.         '.. py:module:: sample',
1895.         '',
1896.         '',
1897.         '.. py:data:: CONSTANT',
1898.         '   :module: sample',
1899.         '   :value: 1',
1900.         '',
1901.         '   constant on sample.py',
1902.         '',
1903.         '',
1904.         '.. py:function:: hello(s)',
1905.         '   :module: sample',
1906.         ''
1907.     ]
1908. 
1909. 
1910. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1911. def test_singledispatch(app):
1912.     options = {"members": None}
1913.     actual = do_autodoc(app, 'module', 'target.singledispatch', options)
1914.     if sys.version_info < (3, 6):
1915.         # check the result via "in" because the order of singledispatch signatures is
1916.         # usually changed (because dict is not OrderedDict yet!)
1917.         assert '.. py:function:: func(arg, kwarg=None)' in actual
1918.         assert '                 func(arg: int, kwarg=None)' in actual
1919.         assert '                 func(arg: str, kwarg=None)' in actual
1920.     else:
1921.         assert list(actual) == [
1922.             '',
1923.             '.. py:module:: target.singledispatch',
1924.             '',
1925.             '',
1926.             '.. py:function:: func(arg, kwarg=None)',
1927.             '                 func(arg: int, kwarg=None)',
1928.             '                 func(arg: str, kwarg=None)',
1929.             '   :module: target.singledispatch',
1930.             '',
1931.             '   A function for general use.',
1932.             '',
1933.         ]
1934. 
1935. 
1936. @pytest.mark.skipif(sys.version_info < (3, 8),
1937.                     reason='singledispatchmethod is available since python3.8')
1938. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1939. def test_singledispatchmethod(app):
1940.     options = {"members": None}
1941.     actual = do_autodoc(app, 'module', 'target.singledispatchmethod', options)
1942.     assert list(actual) == [
1943.         '',
1944.         '.. py:module:: target.singledispatchmethod',
1945.         '',
1946.         '',
1947.         '.. py:class:: Foo()',
1948.         '   :module: target.singledispatchmethod',
1949.         '',
1950.         '   docstring',
1951.         '',
1952.         '',
1953.         '   .. py:method:: Foo.meth(arg, kwarg=None)',
1954.         '                  Foo.meth(arg: int, kwarg=None)',
1955.         '                  Foo.meth(arg: str, kwarg=None)',
1956.         '      :module: target.singledispatchmethod',
1957.         '',
1958.         '      A method for general use.',
1959.         '',
1960.     ]
1961. 
1962. 
1963. @pytest.mark.skipif(sys.version_info < (3, 8),
1964.                     reason='singledispatchmethod is available since python3.8')
1965. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1966. def test_singledispatchmethod_automethod(app):
1967.     options = {}
1968.     actual = do_autodoc(app, 'method', 'target.singledispatchmethod.Foo.meth', options)
1969.     assert list(actual) == [
1970.         '',
1971.         '.. py:method:: Foo.meth(arg, kwarg=None)',
1972.         '               Foo.meth(arg: int, kwarg=None)',
1973.         '               Foo.meth(arg: str, kwarg=None)',
1974.         '   :module: target.singledispatchmethod',
1975.         '',
1976.         '   A method for general use.',
1977.         '',
1978.     ]
1979. 
1980. 
1981. @pytest.mark.skipif(pyximport is None, reason='cython is not installed')
1982. @pytest.mark.sphinx('html', testroot='ext-autodoc')
1983. def test_cython(app):
1984.     options = {"members": None,
1985.                "undoc-members": None}
1986.     actual = do_autodoc(app, 'module', 'target.cython', options)
1987.     assert list(actual) == [
1988.         '',
1989.         '.. py:module:: target.cython',
1990.         '',
1991.         '',
1992.         '.. py:class:: Class()',
1993.         '   :module: target.cython',
1994.         '',
1995.         '   Docstring.',
1996.         '',
1997.         '',
1998.         '   .. py:method:: Class.meth(name: str, age: int = 0) -> None',
1999.         '      :module: target.cython',
2000.         '',
2001.         '      Docstring.',
2002.         '',
2003.         '',
2004.         '.. py:function:: foo(x: int, *args, y: str, **kwargs)',
2005.         '   :module: target.cython',
2006.         '',
2007.         '   Docstring.',
2008.         '',
2009.     ]
2010. 
2011. 
2012. @pytest.mark.skipif(sys.version_info < (3, 8),
2013.                     reason='typing.final is available since python3.8')
2014. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2015. def test_final(app):
2016.     options = {"members": None}
2017.     actual = do_autodoc(app, 'module', 'target.final', options)
2018.     assert list(actual) == [
2019.         '',
2020.         '.. py:module:: target.final',
2021.         '',
2022.         '',
2023.         '.. py:class:: Class()',
2024.         '   :module: target.final',
2025.         '   :final:',
2026.         '',
2027.         '   docstring',
2028.         '',
2029.         '',
2030.         '   .. py:method:: Class.meth1()',
2031.         '      :module: target.final',
2032.         '      :final:',
2033.         '',
2034.         '      docstring',
2035.         '',
2036.         '',
2037.         '   .. py:method:: Class.meth2()',
2038.         '      :module: target.final',
2039.         '',
2040.         '      docstring',
2041.         '',
2042.     ]
2043. 
2044. 
2045. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2046. def test_overload(app):
2047.     options = {"members": None}
2048.     actual = do_autodoc(app, 'module', 'target.overload', options)
2049.     assert list(actual) == [
2050.         '',
2051.         '.. py:module:: target.overload',
2052.         '',
2053.         '',
2054.         '.. py:class:: Bar(x: int, y: int)',
2055.         '              Bar(x: str, y: str)',
2056.         '   :module: target.overload',
2057.         '',
2058.         '   docstring',
2059.         '',
2060.         '',
2061.         '.. py:class:: Baz(x: int, y: int)',
2062.         '              Baz(x: str, y: str)',
2063.         '   :module: target.overload',
2064.         '',
2065.         '   docstring',
2066.         '',
2067.         '',
2068.         '.. py:class:: Foo(x: int, y: int)',
2069.         '              Foo(x: str, y: str)',
2070.         '   :module: target.overload',
2071.         '',
2072.         '   docstring',
2073.         '',
2074.         '',
2075.         '.. py:class:: Math()',
2076.         '   :module: target.overload',
2077.         '',
2078.         '   docstring',
2079.         '',
2080.         '',
2081.         '   .. py:method:: Math.sum(x: int, y: int) -> int',
2082.         '                  Math.sum(x: float, y: float) -> float',
2083.         '                  Math.sum(x: str, y: str) -> str',
2084.         '      :module: target.overload',
2085.         '',
2086.         '      docstring',
2087.         '',
2088.         '',
2089.         '.. py:function:: sum(x: int, y: int) -> int',
2090.         '                 sum(x: float, y: float) -> float',
2091.         '                 sum(x: str, y: str) -> str',
2092.         '   :module: target.overload',
2093.         '',
2094.         '   docstring',
2095.         '',
2096.     ]
2097. 
2098. 
2099. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2100. def test_overload2(app):
2101.     options = {"members": None}
2102.     actual = do_autodoc(app, 'module', 'target.overload2', options)
2103.     assert list(actual) == [
2104.         '',
2105.         '.. py:module:: target.overload2',
2106.         '',
2107.         '',
2108.         '.. py:class:: Baz(x: int, y: int)',
2109.         '              Baz(x: str, y: str)',
2110.         '   :module: target.overload2',
2111.         '',
2112.     ]
2113. 
2114. 
2115. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2116. def test_pymodule_for_ModuleLevelDocumenter(app):
2117.     app.env.ref_context['py:module'] = 'target.classes'
2118.     actual = do_autodoc(app, 'class', 'Foo')
2119.     assert list(actual) == [
2120.         '',
2121.         '.. py:class:: Foo()',
2122.         '   :module: target.classes',
2123.         '',
2124.     ]
2125. 
2126. 
2127. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2128. def test_pymodule_for_ClassLevelDocumenter(app):
2129.     app.env.ref_context['py:module'] = 'target.methods'
2130.     actual = do_autodoc(app, 'method', 'Base.meth')
2131.     assert list(actual) == [
2132.         '',
2133.         '.. py:method:: Base.meth()',
2134.         '   :module: target.methods',
2135.         '',
2136.     ]
2137. 
2138. 
2139. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2140. def test_pyclass_for_ClassLevelDocumenter(app):
2141.     app.env.ref_context['py:module'] = 'target.methods'
2142.     app.env.ref_context['py:class'] = 'Base'
2143.     actual = do_autodoc(app, 'method', 'meth')
2144.     assert list(actual) == [
2145.         '',
2146.         '.. py:method:: Base.meth()',
2147.         '   :module: target.methods',
2148.         '',
2149.     ]
2150. 
2151. 
2152. @pytest.mark.sphinx('dummy', testroot='ext-autodoc')
2153. def test_autodoc(app, status, warning):
2154.     app.builder.build_all()
2155. 
2156.     content = app.env.get_doctree('index')
2157.     assert isinstance(content[3], addnodes.desc)
2158.     assert content[3][0].astext() == 'autodoc_dummy_module.test()'
2159.     assert content[3][1].astext() == 'Dummy function using dummy.*'
2160. 
2161.     # issue sphinx-doc/sphinx#2437
2162.     assert content[11][-1].astext() == """Dummy class Bar with alias.
2163. 
2164. 
2165. 
2166. my_name
2167. 
2168. alias of bug2437.autodoc_dummy_foo.Foo"""
2169.     assert warning.getvalue() == ''
2170. 
2171. 
2172. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2173. def test_name_conflict(app):
2174.     actual = do_autodoc(app, 'class', 'target.name_conflict.foo')
2175.     assert list(actual) == [
2176.         '',
2177.         '.. py:class:: foo()',
2178.         '   :module: target.name_conflict',
2179.         '',
2180.         '   docstring of target.name_conflict::foo.',
2181.         '',
2182.     ]
2183. 
2184.     actual = do_autodoc(app, 'class', 'target.name_conflict.foo.bar')
2185.     assert list(actual) == [
2186.         '',
2187.         '.. py:class:: bar()',
2188.         '   :module: target.name_conflict.foo',
2189.         '',
2190.         '   docstring of target.name_conflict.foo::bar.',
2191.         '',
2192.     ]
2193. 
2194. 
2195. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2196. def test_name_mangling(app):
2197.     options = {"members": None,
2198.                "undoc-members": None,
2199.                "private-members": None}
2200.     actual = do_autodoc(app, 'module', 'target.name_mangling', options)
2201.     assert list(actual) == [
2202.         '',
2203.         '.. py:module:: target.name_mangling',
2204.         '',
2205.         '',
2206.         '.. py:class:: Bar()',
2207.         '   :module: target.name_mangling',
2208.         '',
2209.         '',
2210.         '   .. py:attribute:: Bar._Baz__email',
2211.         '      :module: target.name_mangling',
2212.         '      :value: None',
2213.         '',
2214.         '      a member having mangled-like name',
2215.         '',
2216.         '',
2217.         '   .. py:attribute:: Bar.__address',
2218.         '      :module: target.name_mangling',
2219.         '      :value: None',
2220.         '',
2221.         '',
2222.         '.. py:class:: Foo()',
2223.         '   :module: target.name_mangling',
2224.         '',
2225.         '',
2226.         '   .. py:attribute:: Foo.__age',
2227.         '      :module: target.name_mangling',
2228.         '      :value: None',
2229.         '',
2230.         '',
2231.         '   .. py:attribute:: Foo.__name',
2232.         '      :module: target.name_mangling',
2233.         '      :value: None',
2234.         '',
2235.         '      name of Foo',
2236.         '',
2237.     ]
2238. 
2239. 
2240. @pytest.mark.skipif(sys.version_info < (3, 6), reason='python 3.6+ is required.')
2241. @pytest.mark.sphinx('html', testroot='ext-autodoc')
2242. def test_hide_value(app):
2243.     options = {'members': True}
2244.     actual = do_autodoc(app, 'module', 'target.hide_value', options)
2245.     assert list(actual) == [
2246.         '',
2247.         '.. py:module:: target.hide_value',
2248.         '',
2249.         '',
2250.         '.. py:class:: Foo()',
2251.         '   :module: target.hide_value',
2252.         '',
2253.         '   docstring',
2254.         '',
2255.         '',
2256.         '   .. py:attribute:: Foo.SENTINEL1',
2257.         '      :module: target.hide_value',
2258.         '',
2259.         '      docstring',
2260.         '',
2261.         '      :meta hide-value:',
2262.         '',
2263.         '',
2264.         '   .. py:attribute:: Foo.SENTINEL2',
2265.         '      :module: target.hide_value',
2266.         '',
2267.         '      :meta hide-value:',
2268.         '',
2269.         '',
2270.         '.. py:data:: SENTINEL1',
2271.         '   :module: target.hide_value',
2272.         '',
2273.         '   docstring',
2274.         '',
2275.         '   :meta hide-value:',
2276.         '',
2277.         '',
2278.         '.. py:data:: SENTINEL2',
2279.         '   :module: target.hide_value',
2280.         '',
2281.         '   :meta hide-value:',
2282.         '',
2283.     ]

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-20 23:37:22,845 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's bug is about `autodoc` ignoring `__all__ = []`. Several tests in `test_ext_autodoc.py` (like `test_autodoc_ignore_module_all`) test the behavior of `__all__` on a module named `target`. To understand these tests and see if they are good candidates, I need the source code of the `target` module. This module is defined in `tests/roots/test-ext-autodoc/target/__init__.py`, which likely contains an `__all__` definition. I also need `tests/roots/test-ext-autodoc/target/classes.py` because it is likely imported by `__init__.py` and contains definitions relevant to the tests." query='Please provide the full content of `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py`.' extra_requirements='' purpose='I need these files to understand the existing tests for `__all__` handling in `autodoc`, which will help me select the most relevant test cases for the reported bug.'
2025-12-20 23:37:22,846 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py`.
2025-12-20 23:37:22,847 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-20 23:37:22,847 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-20 23:37:22,848 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-20 23:37:22,848 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py`.
Purpose: I need these files to understand the existing tests for `__all__` handling in `autodoc`, which will help me select the most relevant test cases for the reported bug.
2025-12-20 23:37:25,864 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have fetched the full content of both `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py`. This will give you the necessary context to understand the existing tests for `__all__` handling in `autodoc` and select the most relevant test cases for the bug you are addressing.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/roots/test-ext-autodoc/target/classes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2115, 'candidates_token_count': 143, 'total_token_count': 2419, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2115}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 143}], 'thoughts_token_count': 161, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.047843926436417585, 'model_name': 'gemini-2.5-pro'} id='run--f6062288-692b-438b-90cc-0a8340bd2631-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/target/__init__.py'}, 'id': 'fc5cb2e1-0b88-4608-959e-1a84727aa6c1', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/target/classes.py'}, 'id': '7d6e4c40-dd9a-4fb4-9a75-00aa5731da0d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2115, 'output_tokens': 143, 'total_tokens': 2419, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 161}}
2025-12-20 23:37:29,276 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have fetched the full content of both `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py`. This will give you the necessary context to understand the existing tests for `__all__` handling in `autodoc` and select the most relevant test cases for the bug you are addressing.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/roots/test-ext-autodoc/target/classes.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 4748, 'candidates_token_count': 143, 'total_token_count': 5116, 'cached_content_token_count': 1663, 'prompt_tokens_details': [{'modality': 1, 'token_count': 4748}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1663}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 143}], 'thoughts_token_count': 225}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0927039393178233, 'model_name': 'gemini-2.5-pro'} id='run--31642bf6-b87c-4992-bf47-91ed2fda9ef5-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/target/__init__.py'}, 'id': 'ce3e1c9e-59e9-4c48-8fe7-7dbdc889aba3', 'type': 'tool_call'}, {'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/roots/test-ext-autodoc/target/classes.py'}, 'id': 'aa56ab0b-5183-4d3c-9e11-e0b1b5b9fbbf', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4748, 'output_tokens': 143, 'total_tokens': 5116, 'input_token_details': {'cache_read': 1663}, 'output_token_details': {'reasoning': 225}}
2025-12-20 23:37:33,998 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the contents of both `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py` for you. These files should provide the necessary context on the existing tests for `__all__` handling in `autodoc`. You can now use this information to select the most relevant test cases for the bug you are working on.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 7381, 'candidates_token_count': 91, 'total_token_count': 7880, 'cached_content_token_count': 3459, 'prompt_tokens_details': [{'modality': 1, 'token_count': 7381}], 'cache_tokens_details': [{'modality': 1, 'token_count': 3459}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 91}], 'thoughts_token_count': 408}, 'finish_reason': 'STOP', 'avg_logprobs': -0.2953317243974287, 'model_name': 'gemini-2.5-pro'} id='run--819c4092-4651-4986-be59-ea55c38977cc-0' usage_metadata={'input_tokens': 7381, 'output_tokens': 91, 'total_tokens': 7880, 'input_token_details': {'cache_read': 3459}, 'output_token_details': {'reasoning': 408}}
2025-12-20 23:37:34,000 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need these files to understand the existing tests for `__all__` handling in `autodoc`, which will help me select the most relevant test cases for the reported bug.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/roots/test-ext-autodoc/target/__init__.py
Line number range: 1 - 190
Content:
1. import enum
2. from io import StringIO
3. 
4. from sphinx.util import save_traceback  # NOQA
5. 
6. __all__ = ['Class']
7. 
8. #: documentation for the integer
9. integer = 1
10. 
11. 
12. def raises(exc, func, *args, **kwds):
13.     """Raise AssertionError if ``func(*args, **kwds)`` does not raise *exc*."""
14.     pass
15. 
16. 
17. class CustomEx(Exception):
18.     """My custom exception."""
19. 
20.     def f(self):
21.         """Exception method."""
22. 
23. 
24. def _funky_classmethod(name, b, c, d, docstring=None):
25.     """Generates a classmethod for a class from a template by filling out
26.     some arguments."""
27.     def template(cls, a, b, c, d=4, e=5, f=6):
28.         return a, b, c, d, e, f
29.     from functools import partial
30.     function = partial(template, b=b, c=c, d=d)
31.     function.__name__ = name
32.     function.__doc__ = docstring
33.     return classmethod(function)
34. 
35. 
36. class Class(object):
37.     """Class to document."""
38. 
39.     def meth(self):
40.         """Function."""
41. 
42.     def undocmeth(self):
43.         pass
44. 
45.     def skipmeth(self):
46.         """Method that should be skipped."""
47. 
48.     def excludemeth(self):
49.         """Method that should be excluded."""
50. 
51.     # should not be documented
52.     skipattr = 'foo'
53. 
54.     #: should be documented -- süß
55.     attr = 'bar'
56. 
57.     docattr = 'baz'
58.     """should likewise be documented -- süß"""
59. 
60.     udocattr = 'quux'
61.     """should be documented as well - süß"""
62. 
63.     # initialized to any class imported from another module
64.     mdocattr = StringIO()
65.     """should be documented as well - süß"""
66. 
67.     roger = _funky_classmethod("roger", 2, 3, 4)
68. 
69.     moore = _funky_classmethod("moore", 9, 8, 7,
70.                                docstring="moore(a, e, f) -> happiness")
71. 
72.     def __init__(self, arg):
73.         self.inst_attr_inline = None  #: an inline documented instance attr
74.         #: a documented instance attribute
75.         self.inst_attr_comment = None
76.         self.inst_attr_string = None
77.         """a documented instance attribute"""
78.         self._private_inst_attr = None  #: a private instance attribute
79. 
80.     def __special1__(self):
81.         """documented special method"""
82. 
83.     def __special2__(self):
84.         # undocumented special method
85.         pass
86. 
87. 
88. class CustomDict(dict):
89.     """Docstring."""
90. 
91. 
92. def function(foo, *args, **kwds):
93.     """
94.     Return spam.
95.     """
96.     pass
97. 
98. 
99. class Outer(object):
100.     """Foo"""
101. 
102.     class Inner(object):
103.         """Foo"""
104. 
105.         def meth(self):
106.             """Foo"""
107. 
108.     # should be documented as an alias
109.     factory = dict
110. 
111. 
112. class InnerChild(Outer.Inner):
113.     """InnerChild docstring"""
114. 
115. 
116. class DocstringSig(object):
117.     def meth(self):
118.         """meth(FOO, BAR=1) -> BAZ
119. First line of docstring
120. 
121.         rest of docstring
122.         """
123. 
124.     def meth2(self):
125.         """First line, no signature
126.         Second line followed by indentation::
127. 
128.             indented line
129.         """
130. 
131.     @property
132.     def prop1(self):
133.         """DocstringSig.prop1(self)
134.         First line of docstring
135.         """
136.         return 123
137. 
138.     @property
139.     def prop2(self):
140.         """First line of docstring
141.         Second line of docstring
142.         """
143.         return 456
144. 
145. 
146. class StrRepr(str):
147.     """docstring"""
148. 
149.     def __repr__(self):
150.         return self
151. 
152. 
153. class AttCls(object):
154.     a1 = StrRepr('hello\nworld')
155.     a2 = None
156. 
157. 
158. class InstAttCls(object):
159.     """Class with documented class and instance attributes."""
160. 
161.     #: Doc comment for class attribute InstAttCls.ca1.
162.     #: It can have multiple lines.
163.     ca1 = 'a'
164. 
165.     ca2 = 'b'    #: Doc comment for InstAttCls.ca2. One line only.
166. 
167.     ca3 = 'c'
168.     """Docstring for class attribute InstAttCls.ca3."""
169. 
170.     def __init__(self):
171.         #: Doc comment for instance attribute InstAttCls.ia1
172.         self.ia1 = 'd'
173. 
174.         self.ia2 = 'e'
175.         """Docstring for instance attribute InstAttCls.ia2."""
176. 
177. 
178. class CustomIter(object):
179.     def __init__(self):
180.         """Create a new `CustomIter`."""
181.         self.values = range(10)
182. 
183.     def __iter__(self):
184.         """Iterate squares of each value."""
185.         for i in self.values:
186.             yield i ** 2
187. 
188.     def snafucate(self):
189.         """Makes this snafucated."""
190.         print("snafucated")


File: tests/roots/test-ext-autodoc/target/classes.py
Line number range: 1 - 32
Content:
1. from inspect import Parameter, Signature
2. from typing import List, Union
3. 
4. 
5. class Foo:
6.     pass
7. 
8. 
9. class Bar:
10.     def __init__(self, x, y):
11.         pass
12. 
13. 
14. class Baz:
15.     def __new__(cls, x, y):
16.         pass
17. 
18. 
19. class Qux:
20.     __signature__ = Signature(parameters=[Parameter('foo', Parameter.POSITIONAL_OR_KEYWORD),
21.                                           Parameter('bar', Parameter.POSITIONAL_OR_KEYWORD)])
22. 
23.     def __init__(self, x, y):
24.         pass
25. 
26. 
27. class Quux(List[Union[int, float]]):
28.     """A subclass of List[Union[int, float]]"""
29.     pass
30. 
31. 
32. Alias = Foo

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-20 23:37:38,826 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user explicitly asked for the full content of this file.', relative_path='tests/roots/test-ext-autodoc/target/__init__.py', start_line=1, end_line=190), ContextOutput(reasoning='The user explicitly asked for the full content of this file.', relative_path='tests/roots/test-ext-autodoc/target/classes.py', start_line=1, end_line=32)]
2025-12-20 23:37:38,827 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of `tests/roots/test-ext-autodoc/target/__init__.py` and `tests/roots/test-ext-autodoc/target/classes.py`.
2025-12-20 23:37:38,827 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-20 23:37:38,827 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-20 23:37:38,828 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 4 existing contexts
2025-12-20 23:37:38,828 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 6 total contexts (removed 0 duplicates)
2025-12-20 23:37:38,829 - thread-129214860756672.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-20 23:37:38,829 - thread-129214860756672.prometheus_context_collector - INFO - Successfully retrieved 6 context snippets
