2025-12-23 09:54:21,959 - thread-130025381672640.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Render error when combining multiple input parameters in docstring

Description: **Describe the bug & Reproduce**

My team is writing a function in Python, which contains 3 inputs that are similar, so we want to put them in the same line in the docstring. 

As described in 4. Parameters in [numpydoc docstring guide](https://numpydoc.readthedocs.io/en/latest/format.html#sections), this is possible if you write something like this:

```
x1, x2 : array_like
    Input arrays, description of `x1`, `x2`.
```

However, this produces:

<img width="406" alt="图片" src="https://user-images.githubusercontent.com/20618587/83668496-566d3680-a5d0-11ea-8a15-5596f77b6c20.png">

Even worse, when added "optional", the rendered HTML stays the same as the screenshot above, so there is no way to tell whether it is optional:

```
x1, x2 : array_like, optional
    Input arrays, description of `x1`, `x2`.
```

**Expected behavior**
Something like 

- x1, x2 (_array_like, optional_)  -  Input arrays, description of x1, x2.

**Environment info**
- OS: macOS 10.15.5 (19F101)
- Python version: 3.7.7
- Sphinx version: 3.0.3.
- Extra tools: browser: Firefox 79.0a1 or Safari 13.1.1
- Sphinx extensions:  

```
extensions = [
    "sphinx.ext.autodoc",
    "sphinx.ext.todo",
    "sphinx.ext.coverage",
    "sphinx.ext.extlinks",
    "sphinx.ext.intersphinx",
    "sphinx.ext.mathjax",
    "sphinx.ext.viewcode",
    "sphinx.ext.napoleon",
    "nbsphinx",
    "sphinx.ext.mathjax",
    "sphinxcontrib.bibtex",
    "sphinx.ext.doctest",
]
```



Patch information:
diff --git a/doc/usage/extensions/napoleon.rst b/doc/usage/extensions/napoleon.rst
index b16577e2d..fa2c9dc49 100644
--- a/doc/usage/extensions/napoleon.rst
+++ b/doc/usage/extensions/napoleon.rst
@@ -445,6 +445,22 @@ sure that "sphinx.ext.napoleon" is enabled in `conf.py`::
                     * **arg2** (*int, optional*) --
                       Description of `arg2`, defaults to 0
 
+   When using NumPy style with multiple parameter names on one line, napoleon will split them into separate parameter entries when ``napoleon_use_param`` is True, preserving the shared type and qualifiers.
+
+   For example, this NumPy style snippet::
+
+       Parameters
+       ----------
+       x1, x2 : array_like, optional
+           Description of `x1`, `x2`.
+
+   will be converted as follows when ``napoleon_use_param`` is True::
+
+       :param x1: Description of `x1`, `x2`
+       :type x1: :class:`array_like`, *optional*
+       :param x2: Description of `x1`, `x2`
+       :type x2: :class:`array_like`, *optional*
+
 .. confval:: napoleon_use_keyword
 
    True to use a ``:keyword:`` role for each function keyword argument.
diff --git a/sphinx/ext/napoleon/docstring.py b/sphinx/ext/napoleon/docstring.py
index b3daa06f1..70e8f2bd3 100644
--- a/sphinx/ext/napoleon/docstring.py
+++ b/sphinx/ext/napoleon/docstring.py
@@ -391,16 +391,19 @@ class GoogleDocstring:
                                 ) -> List[str]:
         lines = []
         for _name, _type, _desc in fields:
-            _desc = self._strip_empty(_desc)
-            if any(_desc):
-                _desc = self._fix_field_desc(_desc)
-                field = ':%s %s: ' % (field_role, _name)
-                lines.extend(self._format_block(field, _desc))
-            else:
-                lines.append(':%s %s:' % (field_role, _name))
+            # Support multiple parameter names on a single line (e.g. "x1, x2")
+            names = [n.strip() for n in _name.split(',')] if _name and ',' in _name else [_name]
+            for name in names:
+                desc_lines = self._strip_empty(_desc)
+                if any(desc_lines):
+                    desc_lines = self._fix_field_desc(desc_lines)
+                    field = ':%s %s: ' % (field_role, name)
+                    lines.extend(self._format_block(field, desc_lines))
+                else:
+                    lines.append(':%s %s:' % (field_role, name))
 
-            if _type:
-                lines.append(':%s %s: %s' % (type_role, _name, _type))
+                if _type:
+                    lines.append(':%s %s: %s' % (type_role, name, _type))
         return lines + ['']
 
     def _format_field(self, _name: str, _type: str, _desc: List[str]) -> List[str]:
@@ -1082,8 +1085,9 @@ class NumpyDocstring(GoogleDocstring):
     def _escape_args_and_kwargs(self, name: str) -> str:
         func = super()._escape_args_and_kwargs
 
-        if ", " in name:
-            return ", ".join(func(param) for param in name.split(", "))
+        if "," in name:
+            parts = [p.strip() for p in name.split(",")]
+            return ", ".join(func(param) for param in parts)
         else:
             return func(name)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-12-23 09:54:22,016 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       └── main.yml
├── .travis.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── conftest.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── genericalias.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── methods.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   └── typing_test_data.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Render error when combining multiple input parameters in docstring

Description: **Describe the bug & Reproduce**

My team is writing a function in Python, which contains 3 inputs that are similar, so we want to put them in the same line in the docstring. 

As described in 4. Parameters in [numpydoc docstring guide](https://numpydoc.readthedocs.io/en/latest/format.html#sections), this is possible if you write something like this:

```
x1, x2 : array_like
    Input arrays, description of `x1`, `x2`.
```

However, this produces:

<img width="406" alt="图片" src="https://user-images.githubusercontent.com/20618587/83668496-566d3680-a5d0-11ea-8a15-5596f77b6c20.png">

Even worse, when added "optional", the rendered HTML stays the same as the screenshot above, so there is no way to tell whether it is optional:

```
x1, x2 : array_like, optional
    Input arrays, description of `x1`, `x2`.
```

**Expected behavior**
Something like 

- x1, x2 (_array_like, optional_)  -  Input arrays, description of x1, x2.

**Environment info**
- OS: macOS 10.15.5 (19F101)
- Python version: 3.7.7
- Sphinx version: 3.0.3.
- Extra tools: browser: Firefox 79.0a1 or Safari 13.1.1
- Sphinx extensions:  

```
extensions = [
    "sphinx.ext.autodoc",
    "sphinx.ext.todo",
    "sphinx.ext.coverage",
    "sphinx.ext.extlinks",
    "sphinx.ext.intersphinx",
    "sphinx.ext.mathjax",
    "sphinx.ext.viewcode",
    "sphinx.ext.napoleon",
    "nbsphinx",
    "sphinx.ext.mathjax",
    "sphinxcontrib.bibtex",
    "sphinx.ext.doctest",
]
```



Patch information:
diff --git a/doc/usage/extensions/napoleon.rst b/doc/usage/extensions/napoleon.rst
index b16577e2d..fa2c9dc49 100644
--- a/doc/usage/extensions/napoleon.rst
+++ b/doc/usage/extensions/napoleon.rst
@@ -445,6 +445,22 @@ sure that "sphinx.ext.napoleon" is enabled in `conf.py`::
                     * **arg2** (*int, optional*) --
                       Description of `arg2`, defaults to 0
 
+   When using NumPy style with multiple parameter names on one line, napoleon will split them into separate parameter entries when ``napoleon_use_param`` is True, preserving the shared type and qualifiers.
+
+   For example, this NumPy style snippet::
+
+       Parameters
+       ----------
+       x1, x2 : array_like, optional
+           Description of `x1`, `x2`.
+
+   will be converted as follows when ``napoleon_use_param`` is True::
+
+       :param x1: Description of `x1`, `x2`
+       :type x1: :class:`array_like`, *optional*
+       :param x2: Description of `x1`, `x2`
+       :type x2: :class:`array_like`, *optional*
+
 .. confval:: napoleon_use_keyword
 
    True to use a ``:keyword:`` role for each function keyword argument.
diff --git a/sphinx/ext/napoleon/docstring.py b/sphinx/ext/napoleon/docstring.py
index b3daa06f1..70e8f2bd3 100644
--- a/sphinx/ext/napoleon/docstring.py
+++ b/sphinx/ext/napoleon/docstring.py
@@ -391,16 +391,19 @@ class GoogleDocstring:
                                 ) -> List[str]:
         lines = []
         for _name, _type, _desc in fields:
-            _desc = self._strip_empty(_desc)
-            if any(_desc):
-                _desc = self._fix_field_desc(_desc)
-                field = ':%s %s: ' % (field_role, _name)
-                lines.extend(self._format_block(field, _desc))
-            else:
-                lines.append(':%s %s:' % (field_role, _name))
+            # Support multiple parameter names on a single line (e.g. "x1, x2")
+            names = [n.strip() for n in _name.split(',')] if _name and ',' in _name else [_name]
+            for name in names:
+                desc_lines = self._strip_empty(_desc)
+                if any(desc_lines):
+                    desc_lines = self._fix_field_desc(desc_lines)
+                    field = ':%s %s: ' % (field_role, name)
+                    lines.extend(self._format_block(field, desc_lines))
+                else:
+                    lines.append(':%s %s:' % (field_role, name))
 
-            if _type:
-                lines.append(':%s %s: %s' % (type_role, _name, _type))
+                if _type:
+                    lines.append(':%s %s: %s' % (type_role, name, _type))
         return lines + ['']
 
     def _format_field(self, _name: str, _type: str, _desc: List[str]) -> List[str]:
@@ -1082,8 +1085,9 @@ class NumpyDocstring(GoogleDocstring):
     def _escape_args_and_kwargs(self, name: str) -> str:
         func = super()._escape_args_and_kwargs
 
-        if ", " in name:
-            return ", ".join(func(param) for param in name.split(", "))
+        if "," in name:
+            parts = [p.strip() for p in name.split(",")]
+            return ", ".join(func(param) for param in parts)
         else:
             return func(name)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 09:54:35,937 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find test cases related to a bug in the Napoleon extension for Sphinx. The bug is about parsing NumPy-style docstrings. The provided patch modifies `sphinx/ext/napoleon/docstring.py`. To find relevant test cases, I need to examine the corresponding test file. The most promising file is `tests/test_ext_napoleon_docstring.py`, which likely contains unit tests for the docstring parsing logic. I need its content to identify and extract the required test cases.' query='Please provide the full content of `tests/test_ext_napoleon_docstring.py`.' extra_requirements='' purpose='I need the content of this test file to find three relevant existing test cases that demonstrate functionality similar to the one described in the bug report.'
2025-12-23 09:54:35,938 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of `tests/test_ext_napoleon_docstring.py`.
2025-12-23 09:54:35,938 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-23 09:54:35,938 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-23 09:54:35,939 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-23 09:54:35,939 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of `tests/test_ext_napoleon_docstring.py`.
Purpose: I need the content of this test file to find three relevant existing test cases that demonstrate functionality similar to the one described in the bug report.
2025-12-23 09:54:40,107 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "tests/test_ext_napoleon_docstring.py"}'}, '__gemini_function_call_thought_signatures__': {'96efa027-f0ae-4390-8a3d-1fd0a1242412': 'CuoKAY89a1+F38Hc/iUnZ/G7gYCbkYc+B+fGyTYfd/TLokdrtTdSpuWhQTOYj5nIWvpEmKTF+2BeI1fBxkj6zO4pn4yvJmKbtWR/FnrdiA14N5qbscK3ShS8PuSW10oGEHwhn8cFmx06ZJ6xF7muJIoj0jMOUk6tPtEnxRsBnDlaiWbCRogsqQQTINI8wAbnf05RqK+zrTcvc3UkrtlOtBIVRtL4MH0j51T95ARntWtPHtSRw6Q+s21MDhV644c5AmZPZnblDuAPHCCQoZYLnfUue3YN4vHAgrI5amXIaPpFlV8ag+p41eLtN52uG36fFbCGPKWgjy41K69ndVKDTbDbxNMeNrX4av/t1J1g5xo/z3wQXEQXN1vLpJb/zAFRiT4pTASgl4ALDiOPJAIa7ugRtHAXwzx6mHaSPJC2NYeDCyfQIVRRwLlRwJcHZFuHN5YbW7OYAx5L8IrzkplPy2KxlaG7p1rWfPFLuMYbfvCrwtOvInOMiWbkjuFRB8K/DVr6kUEaJkRbY4mBnlrGyrskO5BbtUPXXNW5/HO7Rh1XUV5M6Mu1hCOl4TuulFOEtZxp9qVstwc0/KJ/lNXYF17trrciBh1lbePl+qX1eb7+sqxBscGlNUEWB4nMYCmiUWjozXL5VcAovgNjOj+bS71+eh6m0OuEN6C69ntxZzvxhutImAKpCX/plv8iQK3rBs1pyVDMNkrgOp4XAMsbNTPGsoS/6VnsWzw1ZkUU0Q+oT99xyC4ZMUax0WvKdPLqDecFX3oKjbM0hRtifjo17pzcb92Sl/6FMNUzq+MwUOw3NsziSfl/8HEAbHNEwo87DvEPBnFr0sJE/2hymqm12sQxw9S4HwNHgr6/c1VS/4FQR1W+UHZ5OToN9XhI4256vOgWhySU3qKCvO0ON13Bk8yAgAjGttzFWtyF5Om9KnBS3vzGEycyvUpK6Y8HAvZ8oYQwEmYGVNJNASMg5BY+4z93hoB1sWd6kbLd0yp2VDBMx9eVDCxsHo8zA+gAqM90dxEtChXAiM3aSD0ss/uYu/YHnZEKmNXI8QpvMSS0rZxoi3R6n+Ii6GpBLNTVGzU8rF+QI5VOw3P7yxuOelXTL/an9rqqLVkFSRiwBLO5W5J8e384Dge/W6doA0GwFDzxNkE2+amFGqMK3+rnQLE5zj73oBe+Y85FQSoZ9vPwniRZWSbMRocF8ZChvqS8mYrxGTOL0k5DpdgpTPHlgBjj9qqKFrVu3EPtGhETKogan3BY7atxFd0N2K+DuNTDcFCwrrEnO3T/iwzF6vi+4DXc0utmGqsv41PrkPPHeGU6PdCg7RZKBofQk6SLlNl1przrGVW7f5YnpPn+O54aP9WvrH0RrLuX4RFcog3IUGrvlr+RYwdLbq+phoqchJBeIGa6vE+StcGa/AIbpP3RbXTHnz36vikluo6u77PDHHT4pQy2rD9pTOR9LYUhn/5uR3FcFiRKfJezzODP7zByYPGjEGnZ00ieD80BjQ01r66hxRRXdmr06kqiNYF6bFuFrZFuvQsUcxTCPT/08KCiANP7vZjEKZXv23SOC+BBi95iMMOkeXNrlbGGHTHe+0YKb88q/6iVtCDW8qhop4jth6+t458iOvvz1iru+bB/lDEwDh4KJMR+tkGMmBjAxY4S8c8HMLKQvpts9l+pp+6GneqCmM1tQ1lzA2wMGpd70/hDE59LP9NKBhGgVYLtAXtR22zTBqnP8xZBuzkGE4uptmW4jh0dDDx1PoPr+QFVLp1zCgnO3T4hyQR7EjCBm2Xgh3/ALxDHboqf4y4FR0fQ5CCQGAhMGvqSJ7bQcsjBQkpcr/1Aea3SoRCSzVc5ux7T'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2079, 'candidates_token_count': 27, 'total_token_count': 2455, 'cached_content_token_count': 1459, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2079}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1459}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 349}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7108384591561777, 'model_name': 'gemini-2.5-pro'} id='run--558858ed-85ac-43de-86b3-9a4f022c1992-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'tests/test_ext_napoleon_docstring.py'}, 'id': '96efa027-f0ae-4390-8a3d-1fd0a1242412', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2079, 'output_tokens': 27, 'total_tokens': 2455, 'input_token_details': {'cache_read': 1459}, 'output_token_details': {'reasoning': 349}}
2025-12-23 09:54:46,370 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "tests/test_ext_napoleon_docstring.py", "end_line": 2000.0}'}, '__gemini_function_call_thought_signatures__': {'33dfc53c-230f-48ed-bfbb-bef490850c95': 'CrYPAY89a18C6m/QRcL0uoF696tSh6DGPRB5swSNQom+Dr++tcaxDCmB6HBsgNOQgtFx1Te03KY0o1ePSJWa0Lzt7Ik+0e8pAhzf9axM5COLwOeiAaPrUq9UuqwGPHRUTmSgYI91slcHfrRDD35/zAhEKNO917UUujCjxaKsWnEB7r7u6Ch8THY8IRccyYxYRaPhkF88gAQno+tKbCs5gEpoB78m4nn3tjM6548gSIKtecuepVZ1ptYtZagMClI1EkPzxe8PkNFjAOWy7/0knk5xObUxgt19edYwhhACrFgehIaWFUYXpp/sJcm0Ml/9WD+x+17HMxqSHEYKHt4pJMGTqElfrd+FchKKXrEXbmO4OSeq/l5BHGF3cAfAnOE2oxFPZIieyar4qT2b0KrN/01J9DDtRT7lQBlSBkNmwAU8Qugf7h6m1pgZ/4F9mUwzIW5xjYR5ML5tIAsr0yhyMwOfxS06Rb+mpaRtXrt+wYnU7awvReflmGquZUFz1O4WoiX41dHi2gNYghm9vTLGtRd7Myg/w2mozDdCMt4DIm/+bEuPNOeWXwmQX+qiXXyP0/s2D00YCoA0nO1gDuKAiv2ZJP1ki7/Fg3ZhJl/U8/BDz9/WKjD9haHtWtmklRoI/qPpIgsOrNv34EmKRrXH1k8Fn8agHi8dYTlM8BlhwZakP5OS+4RQLgmt2Eyx3FG2mDtDnsEtGeqsKhJAcuE5jLdOVcMd8WJma24Ah3uhkmYaX8vY6Du4eDCN872wx0K8ROf6TRBBHc3lLrLQaPpBk06RcfRO0g8BJ+Hbs26GgK3saYV0n8ueptZB8b4I2hRr5e+E/quovopeDz1CCii3S1gLUzr8IgCHz+N4fV/gEHU0aUBZrXGM0lV2AgBsPxwt1qIXuKo1cuLtBf7r6pJ1g0c04SX9o2u9cvyk+E1cDM1R1j6wdJCjtCCqAEqE2p5IEYp4L+uUTg4R+Equ2mVS+QEb+YCsOPT1W7uTGJLMxjdV14pvXNe7fTT0R4WEIgl9FmcVLAFaIEbfeXqtIZKhJfAm5RWc4UaVJrvaodCs+6a5haZgx3gxm5JCe/EfATpJYSodfWFlaTsgCEO3TTsumDNeLuwFubhVP/mqwByKT81S08Vw3zumFUeeMEwz+6oAZKBeWpP6D9Gfn1TAy85IKUhZ6UWfoBe9dULn3HocJeSB29a/UcbP2EwGH4a+VBsqVuThxfLjXUn01f8g2EipV7IxyOR4EYNk0uppGrveyYmVbgRTbq+QarwZOQ3pOz1h/QZQ2LN9m/tSLCFqv6Kah3ETqhNY6bGoWEjN7DClGZQFyANClzIo4Lqup8fCusn6a16XmlzN+g94mG4MMe2+PJuDC05eCo65STgpKm9ROAJjTk3Pm78b4Tfg5GyPsiPLNn9fMrBG68EU8Lk70h2dLgRxxBBE+WWpWfZb8D/j0ZcuJfeXypYLrE8x8xn1OEj+baEPlWeAW0YvRSwXGf29bGNo0zkxV3U7XJJa1TndAPvLQ0ButF2eXTFQVaCbhgYl4zRHe5iCjZ0zJFtt2Sq/u6lBR7l5fAqCpJv/R3GeHtyBddV3AujK0VqYXZg+Rbxw62VYZvHFExKC3J76nKJi7ha4MYbIA7xQ1YGO4lX4ViB7ETwlUs/8zNaIVGUfwnqdj6C/Edst0ofn9nFOH479pe1U+0ABGZq/2Ofrv6p+rpalCxX1tw19wNuimpjN1mhOeEZTckvj5Rd6bLDRfmtXJY6q0ttWsZ4vLPiWKaTa0USJraAcFsOsF4hPBTnimD3SFF1Ael08l87ttakF1Hr2LCY5h+nD8LPJp4D3m+G++1iWnEY8rb0yWLGSjbuTedSUZ/Rs8jyKsZPkTOY18s6j3l8TGavaMBhEliVK7mhDnwIZruUxBczP0IO4JuYBmiwQg81lBvZrVYmLrbi0tjAwP9ez0Eyh9E+rkp0UKJc0ZjGAWrsTpqEt7cRS3QKPOnwZVWRE5Q26/IWtdySWWwE+NCpnrJDDNBG1i+dtj62H78OFAkFrvmhtJ3h8cL7eF2fdszS5C0hSvTvSgLtrTwjuTq2Q2pinFoV/rEUMwZJEATM2I4gbbcod8q9Vf1NO6ACTSjHRN9NvUuKirFpv9Fyb4PvT2IGfr4Hha3IEp8OdpX8djfuELvGABpjuvjYVdNprndlHDGCXBOZJtqsArYIGwfncLrHfeFrNIAX1oUeruEFUQhh2z3sFlWqbomdwfVTFxypwcwWj3N8B+ykK0DZw/2DdTMinsnJSikaTbuLBOUTI0LEJd0veAtS/344rAmEOuob/TCUSrXOiDKahH/cAjmusLBTW3in7f7BOovTIdvVduKotz+0G2UHYG9SU1qYlyc5iluUs9zdrfBxUBqdggNpX+SxZApRNHlwvGirKqo1C2uBOWZFwEhBN0bU4qxVOAMAwnMTSMUITVcTDouHUtSCZ69M7xz2/Yz8fKj/cIpX33mic6tCmJuygX9idJDNSsWO8eUzFo3ettxFAACK84GZPJuHLb5PvR8ArIWUv0QqPaCNyS87ivO5xrEqLK0lwdSJ17jk1Tf223kPwVKByhUjnborLvtmvC3QSKmzMy2F0kUSFOBi0oymLDuvUvYWrJlp0c5Wom4TK'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 7899, 'candidates_token_count': 33, 'total_token_count': 8493, 'cached_content_token_count': 1787, 'prompt_tokens_details': [{'modality': 1, 'token_count': 8248}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1787}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 33}], 'thoughts_token_count': 561}, 'finish_reason': 'STOP', 'avg_logprobs': -1.0403433135061553, 'model_name': 'gemini-2.5-pro'} id='run--236c9b8b-5fed-4ba1-bba8-4ae0d8127f6d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'tests/test_ext_napoleon_docstring.py', 'end_line': 2000.0}, 'id': '33dfc53c-230f-48ed-bfbb-bef490850c95', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7899, 'output_tokens': 33, 'total_tokens': 8493, 'input_token_details': {'cache_read': 1787}, 'output_token_details': {'reasoning': 561}}
2025-12-23 09:54:52,094 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2001.0, "relative_path": "tests/test_ext_napoleon_docstring.py", "end_line": 4000.0}'}, '__gemini_function_call_thought_signatures__': {'87c6d689-1136-40c4-a779-05fcfed2b1f4': 'CtsNAY89a18RyhiW9sPc3Z+6AMDocrUnPB24ICZSVj/Li0OrdJaGARE4GRVATBab/PBjy9wHQA4rlAPxTMe2mZ8Rivs0hoxnQNHLCDnB+vQS5E4hPB1icDUY9eFLPyMHV70PlG2OA9ULPBQkGcdvKKqyZmevnJP5ozs/S85dT5aTLPWTDRXaQ+vQhi8Q7gc7WsDQQdFHF3pu8s1KNa0zlvcL307GF+LHO4glSr+IzIjXqa8BPXbOLFR6lQgKlKpHnc0hiZ+gGj0+wOSvGIur2EVNKgr+QhUS+v3gYNrkV2au1Bg5cwPcIiHwFrZAYM4bnHHJZk7A7Z9aR3VL9JEh+HuUD2G3XK3HasJISVJhsszM4pD/y+GqkicMk5Sh2dhIrx+iNjTcAY5TmFgnHnE9CNY1loxhwnoHvBGXMgOCc0sCcRPp0Hz901mpJJgLazNE7Jk4qvL3iI46K9AF6IDG2VU0KDZb8IMHC7EXYa48YwnTkrFNy6Gnu8Spzkf9q/N52Cr/+xIFMgdW0gWrhXp3r07aZUDxDVSgjFY+cmVjNfjvvLCA/vbfQqrN4JRSACtUupaLvSlkeG6fXHxlcb44AOPsWTCkmYnFxgaoHsVUx8Sp4EL/wt1mGzdLcRlwflxmx5IcwTVCExGLaNCCn6wOT2aZXL2R9iwKuIRRxTnFWIQCwAnOFVo/wb/nZmyA6HLlpLP+NlkZxRaqAb6CfvBoc4kATcEJPxRDqZKV2FQ2OQRU55vl8kJN3on2R1E22oJj2GYGjE9w+EZNwlq3a5xaxpau9vPhSH9az6sfYcLH6Pjtlk0r3o/OkD04PsycQLuldx4WjZ9uevE1BBH/j64EQKQizwC9YoBMdcsRiqsGnmprMTQRNHz1asiwcV2eSeMZAPXWLO9kqGi6KIDOJZciuNw8SJk8D962EG4oEd/qg9bgqEQubOtOTK7su2JtRC92Jj7BW+eIxgTOtdMuxrSYkyi3VmbteXa4KRcS2o5wZHX02MJFt/EI/a1Eq1IBVF8Ny8CqO2NWhXmkrut8DouWhHdIVeOZlvyd6uQynVhAY+TankrFfeVOUWawNdtkZLxsZvrXxp9A7QEy7IWHgrkavQC3+hXvnALOLmoyhmi8WyyvPNbf+9VMpr3TAtrKKFcuTbJxTez4Y0aav5js+N9Y/NTt8xVWUFOwQUAKohEmD6TykkL+/DobbyXNsFrmOwi/d89++dkyrkr793CqZEQ9Y9SB2ZTzuqjDIfYgDmOOn7GuVHlOLHfh+eqidd8MU4u9ln2cZ9bvq7IUs8nh4uMd6GvO1vEH2UKrMLI7c4WJxHlF+3vWT2S/khWJ4ii4Y6spsNDgltoucn04m/tJzs9QsNFfNGbUlQuiRmE5KPy4QyyzziVGk1vmyLzrza/SyOg9V3Ho1abvCT00gprzdcurcvY3iT7RRxXiL9odZBlrBCdVZU6PCOmF1C2LUvxGTEhmipHkI0eszvWHvqUVpcQGLvBe1KTZREl1Iy5psVqPzixubq6mSnbc9smFx3LjGEfN/aWwHziGUZZ5xN/+afJrRm+MGuPTm5aKOPkLCDgSqnqZW/aYJ/zReycq2SFnhuVh0PaNdHa/YShXf69WhUdqlRBCets1+Pl6vLV6poijERIk/KfPrQ2KRznK+jtnflUT3FLGs3z7s6dkPFhl5/wL/zRcWVeMMKSsQVW4kpFcWfOHu7nBjNc6Of3jUcR4WANr/um+imX4JjlNOg0wqZADoJWBc+/L58MbHWDms9Sxj/zGqv5ifV+goUXXDonaUCJplBj3sINvXLtpnRB49QRT7/5k+L8hSadF9b7d1LBx8NkDZRF7dxQRH3AVVaqTnuVFGCgqMSLgG926YGMbv62XQXHTfubpSG76c810n9KI8R6xFbblDhOZjptYhAt8ZHPEnti1azxP5OTz8cn1h9C3ZuTPu8tQndE2V2K7mATK851OSBmls4UfhagTxV7++YRWlOe4Nje8cMR8ss7N3RMQLVQJ6gKzQgggOv28JcJqyOSaxhlbuxNFtRkEe5O8aiOiIzahIEV4R7rRDNH3AlSpuIg6GYo0MPtrZa7sGg816IT5IoOsvTi16gfW69QrAho4eAi+TpIGd1edB9hGbdctmjTjxvkIwLZelXGylhMre2v5F6eHXBdTIkYV9LV12UlulbwdtVPJ54MejmVvWZKsNJlaQwBnjjiTslXA3cI4F5Jo0iSBuC/9sk+ovLLHq2ruJ+SlJw0fH72iyM3l2J/3M7JriJb90ZkNp5fYCkDijzMu5ybUgbKzCYYfTprMGujHNKK5yAvnU4o29f0Q1hsDTTu0/OyTgZqJSKLoUmID'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 25011, 'candidates_token_count': 33, 'total_token_count': 25564, 'cached_content_token_count': 7634, 'prompt_tokens_details': [{'modality': 1, 'token_count': 25921}], 'cache_tokens_details': [{'modality': 1, 'token_count': 7634}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 33}], 'thoughts_token_count': 520}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7125817501183712, 'model_name': 'gemini-2.5-pro'} id='run--2abfb7f8-7065-4169-964e-aba20e3bf053-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2001.0, 'relative_path': 'tests/test_ext_napoleon_docstring.py', 'end_line': 4000.0}, 'id': '87c6d689-1136-40c4-a779-05fcfed2b1f4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 25011, 'output_tokens': 33, 'total_tokens': 25564, 'input_token_details': {'cache_read': 7634}, 'output_token_details': {'reasoning': 520}}
2025-12-23 09:54:57,937 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2252.0, "relative_path": "tests/test_ext_napoleon_docstring.py", "end_line": 4000.0}'}, '__gemini_function_call_thought_signatures__': {'76148c5b-ec89-4bdb-8fab-0fc490bea96a': 'Cu0MAY89a19TZk/JzBCecYLRq5TtG8XdCOP96ldHds6h9hBfCJ7GfPnEzMEFjb/SA8kwdhsYNvnE0MCDd5p1h9NQLrQ5YFnZxN1ek5SsOiIlbpIq9g7zkCl8SVawEN3DjyD28N9vRPKlyyNmuLGejGtmsHpsOk5tblWTks7hWDMBpC6teltBhVE8VbZGTpfhGrTN1Y3Y0UGZ4hBely7TffVZ6Qwc5hYR3Xv3QQP39tHr1JeLyQ8o6CwsOVU8QEpZwC2rfPXgOr0Gq6byfYG8vUwPxtDmJ7ZMbbT1PGZN4oElv7KfVTJjJwGC4OLJhEIER9vlifr0Mq8bDxLuRb5QH00jguLe8M1eb3cYSmIawa+gnNTOI+ljXq76zAGVaCn2Siec/w9Ru1onyHrjRAHq+RfUbs2oQQKapMp/2bhFr2vGvq9ewb1rHQAgVd1btsRDfkQjMxM+rulHiZwGfMUuY/naQ/PTQOQzjMM/pEDK0/19wiJtjDCSe9UGi7gKaCvYZdBDob836MjZs+pUX/r3qLJb+6VUP2lg2gP6V3R0GD9G1B8BxHDcQuwZHjyU++mam/WVn6S1p6a0i4RkrAwhgTkSvGKHgx3vF28WPVAtuS9YcCEesDRysCoG4/hBiFuZLBeDB2Is1EwQnirsgNll3Qd5y5w3T/6ySFh0PH0XkiCoWCdhITvRevw2dR5vokfHtTrS0VhcXGyGtNFL7d2FdZ1sd/3hP5CxtuSe+GJFP6705NFGapCO3D5a/azp+pApuxEsquPLVVLyuR3N3aYC7c1ipAHYXlEy7CdhyEr7o03XuY3pH4SYiPGm+kI8gCINB0S7FGGfPVTimgSi4AE6euxhl+ByW2O72ZoRuqHwXHzDBBXX3QnyEO6kPtMztgWEgBNZgpsqHcyv8GqJv0ttW2ZZEnvrhw5T5Vd+4vjM6geLLltkHjVtlj6XCg1dq5TCbJcQTZwFSKHStfFwIZwCQ8x1CFhnCsRt9GjW74NxZyZ1sqEuhKmncrz+D63ODeae5so4cIPekrEC8zxFhrmbZyDGz4gvnluMZIG2TlmzU2bWRqfXuMQFFBwJ2kb1Y2Qe0rob+uc27KDB25Dse7mOrk26tddHF8T4DX7kN9VxrGZYdXMfKecMmpdhu50q9k9V1+eqGq/DP+EX2WrES+0XbZQggnD5tGDFE0BD/OvWANSDG7FfOLfgH9OXmxS2PQVy3jR+P+BV0xbZYIakCfz6HHw0jEQ1CPcKqjkW717s0ARGR4Ql3BLPCOs7Es7d9K15OTgmj+Aoqpcjf1WZxkBMKsRcYusMF/8YJ6MXFuPIAU+918AvUUVKH1uklLa1BhsYYN/zPtP5j59K8AqrRW/bv5DBMR/k//N8F6v+wjoNrf82V6sJJ4gu+UPPQcnRGgJJ8Hi47dPpGqBgRQg8m8DQkb8RNyT5UtKt+p5q8O3QoKh9LhCtfEoNynLlDd5jCqZUNcMShX1LYrq+0/URgK+vnCpck2eLVXqqxHgpcyoiq+13Tyu5elfj9VPMXTIIxJeJDy/3k19IlSNbD3zgK2s4PEzOFsM4skGdnL36fDp08L/TA3C0+JijS73aUp0h9T+RbEeKKtgS7gR7SBssoMh9yBnG0JsYjm8iWvHqsdt/HCcJ2BZHg/aie/5I6Up082KY5427OsCJypS2ckscelZe+AH9DiDVgIqvKeDemqGZuMFj+Rnvt4E+sZpE6z6FSuBgJ+L+tBQhZddmVuzAzEA3d8wtUQbCUCa9R6qj8CtxEOy6t6dbPnCDLyfZdeju6OUly9GeEq3/GrGv03vLFaxUASsiHo6mnKXMPRegWYV2GUD+MdtMU/iddvW/l3pf2ntOQj/s4GPFOYDygtyy9fWAaFw8yV4SPsKdPxaHWvRaOXKntYxBhjZUX0rM8vc+zmfLk5m8iLbjLB3zifaKMffy5NDhCWqtqWadlN+tIdweovHFQF5J3M85ejlhzK546wF1YdvsRba/XtrVtLAHiNzFIkZo8w0/7/Qx2B6PgrVh3YQ9mGfUsTdsKsRy68/ieZjCtbgf+10G6qdbIWSc8f5ARvremriGDiso4R6dB22Nob20yhM4GdEYp9rf70ddeqAKx6s1O6I/m0kMWzc1P9eTIevt8h8vOXhVPqlkr6CNjai4jaF/oiIHhEskPWFsFjEIacGO0MZPDP7Gc79i8xjQSw=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 29165, 'candidates_token_count': 33, 'total_token_count': 29667, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30595}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 33}], 'thoughts_token_count': 469, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.7907160556677616, 'model_name': 'gemini-2.5-pro'} id='run--f3b6ff5c-e9a7-4273-9c62-2c7b626923c8-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2252.0, 'relative_path': 'tests/test_ext_napoleon_docstring.py', 'end_line': 4000.0}, 'id': '76148c5b-ec89-4bdb-8fab-0fc490bea96a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 29165, 'output_tokens': 33, 'total_tokens': 29667, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 469}}
2025-12-23 09:55:01,844 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the entire content of `tests/test_ext_napoleon_docstring.py` by using a combination of `read_file_with_knowledge_graph_data` and `read_code_with_relative_path` to read the file in chunks. The first call retrieved the initial 500 lines, and subsequent calls with increasing line numbers allowed me to fetch the rest of the file's content. I have now gathered all the necessary information to fulfill your request." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 29307, 'candidates_token_count': 105, 'total_token_count': 29562, 'cached_content_token_count': 24704, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31206}], 'cache_tokens_details': [{'modality': 1, 'token_count': 24704}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 105}], 'thoughts_token_count': 150}, 'finish_reason': 'STOP', 'avg_logprobs': -0.29808306012834823, 'model_name': 'gemini-2.5-pro'} id='run--02b22790-286e-42d8-a6c3-0532f6e3c04c-0' usage_metadata={'input_tokens': 29307, 'output_tokens': 105, 'total_tokens': 29562, 'input_token_details': {'cache_read': 24704}, 'output_token_details': {'reasoning': 150}}
2025-12-23 09:55:01,846 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of `tests/test_ext_napoleon_docstring.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need the content of this test file to find three relevant existing test cases that demonstrate functionality similar to the one described in the bug report.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: tests/test_ext_napoleon_docstring.py
Line number range: 1 - 500
Content:
1. """
2.     test_napoleon_docstring
3.     ~~~~~~~~~~~~~~~~~~~~~~~
4. 
5.     Tests for :mod:`sphinx.ext.napoleon.docstring` module.
6. 
7. 
8.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import re
13. from collections import namedtuple
14. from contextlib import contextmanager
15. from inspect import cleandoc
16. from textwrap import dedent
17. from unittest import TestCase, mock
18. 
19. import pytest
20. 
21. from sphinx.ext.napoleon import Config
22. from sphinx.ext.napoleon.docstring import GoogleDocstring, NumpyDocstring
23. from sphinx.ext.napoleon.docstring import (
24.     _tokenize_type_spec,
25.     _recombine_set_tokens,
26.     _convert_numpy_type_spec,
27.     _token_type
28. )
29. 
30. 
31. class NamedtupleSubclass(namedtuple('NamedtupleSubclass', ('attr1', 'attr2'))):
32.     """Sample namedtuple subclass
33. 
34.     Attributes
35.     ----------
36.     attr1 : Arbitrary type
37.         Quick description of attr1
38.     attr2 : Another arbitrary type
39.         Quick description of attr2
40.     attr3 : Type
41. 
42.         Adds a newline after the type
43. 
44.     """
45.     # To avoid creating a dict, as a namedtuple doesn't have it:
46.     __slots__ = ()
47. 
48.     def __new__(cls, attr1, attr2=None):
49.         return super().__new__(cls, attr1, attr2)
50. 
51. 
52. class BaseDocstringTest(TestCase):
53.     pass
54. 
55. 
56. class NamedtupleSubclassTest(BaseDocstringTest):
57.     def test_attributes_docstring(self):
58.         config = Config()
59.         actual = str(NumpyDocstring(cleandoc(NamedtupleSubclass.__doc__),
60.                      config=config, app=None, what='class',
61.                      name='NamedtupleSubclass', obj=NamedtupleSubclass))
62.         expected = """\
63. Sample namedtuple subclass
64. 
65. .. attribute:: attr1
66. 
67.    Quick description of attr1
68. 
69.    :type: :class:`Arbitrary type`
70. 
71. .. attribute:: attr2
72. 
73.    Quick description of attr2
74. 
75.    :type: :class:`Another arbitrary type`
76. 
77. .. attribute:: attr3
78. 
79.    Adds a newline after the type
80. 
81.    :type: :class:`Type`
82. """
83. 
84.         self.assertEqual(expected, actual)
85. 
86. 
87. class InlineAttributeTest(BaseDocstringTest):
88. 
89.     def test_class_data_member(self):
90.         config = Config()
91.         docstring = dedent("""\
92.         data member description:
93. 
94.         - a: b
95.         """)
96.         actual = str(GoogleDocstring(docstring, config=config, app=None,
97.                      what='attribute', name='some_data', obj=0))
98.         expected = dedent("""\
99.         data member description:
100. 
101.         - a: b""")
102. 
103.         self.assertEqual(expected, actual)
104. 
105.     def test_class_data_member_inline(self):
106.         config = Config()
107.         docstring = """b: data member description with :ref:`reference`"""
108.         actual = str(GoogleDocstring(docstring, config=config, app=None,
109.                      what='attribute', name='some_data', obj=0))
110.         expected = dedent("""\
111.         data member description with :ref:`reference`
112. 
113.         :type: b""")
114.         self.assertEqual(expected, actual)
115. 
116.     def test_class_data_member_inline_no_type(self):
117.         config = Config()
118.         docstring = """data with ``a : in code`` and :ref:`reference` and no type"""
119.         actual = str(GoogleDocstring(docstring, config=config, app=None,
120.                      what='attribute', name='some_data', obj=0))
121.         expected = """data with ``a : in code`` and :ref:`reference` and no type"""
122. 
123.         self.assertEqual(expected, actual)
124. 
125.     def test_class_data_member_inline_ref_in_type(self):
126.         config = Config()
127.         docstring = """:class:`int`: data member description"""
128.         actual = str(GoogleDocstring(docstring, config=config, app=None,
129.                      what='attribute', name='some_data', obj=0))
130.         expected = dedent("""\
131.         data member description
132. 
133.         :type: :class:`int`""")
134.         self.assertEqual(expected, actual)
135. 
136. 
137. class GoogleDocstringTest(BaseDocstringTest):
138.     docstrings = [(
139.         """Single line summary""",
140.         """Single line summary"""
141.     ), (
142.         """
143.         Single line summary
144. 
145.         Extended description
146. 
147.         """,
148.         """
149.         Single line summary
150. 
151.         Extended description
152.         """
153.     ), (
154.         """
155.         Single line summary
156. 
157.         Args:
158.           arg1(str):Extended
159.             description of arg1
160.         """,
161.         """
162.         Single line summary
163. 
164.         :Parameters: **arg1** (*str*) -- Extended
165.                      description of arg1
166.         """
167.     ), (
168.         """
169.         Single line summary
170. 
171.         Args:
172.           arg1(str):Extended
173.             description of arg1
174.           arg2 ( int ) : Extended
175.             description of arg2
176. 
177.         Keyword Args:
178.           kwarg1(str):Extended
179.             description of kwarg1
180.           kwarg2 ( int ) : Extended
181.             description of kwarg2""",
182.         """
183.         Single line summary
184. 
185.         :Parameters: * **arg1** (*str*) -- Extended
186.                        description of arg1
187.                      * **arg2** (*int*) -- Extended
188.                        description of arg2
189. 
190.         :Keyword Arguments: * **kwarg1** (*str*) -- Extended
191.                               description of kwarg1
192.                             * **kwarg2** (*int*) -- Extended
193.                               description of kwarg2
194.         """
195.     ), (
196.         """
197.         Single line summary
198. 
199.         Arguments:
200.           arg1(str):Extended
201.             description of arg1
202.           arg2 ( int ) : Extended
203.             description of arg2
204. 
205.         Keyword Arguments:
206.           kwarg1(str):Extended
207.             description of kwarg1
208.           kwarg2 ( int ) : Extended
209.             description of kwarg2""",
210.         """
211.         Single line summary
212. 
213.         :Parameters: * **arg1** (*str*) -- Extended
214.                        description of arg1
215.                      * **arg2** (*int*) -- Extended
216.                        description of arg2
217. 
218.         :Keyword Arguments: * **kwarg1** (*str*) -- Extended
219.                               description of kwarg1
220.                             * **kwarg2** (*int*) -- Extended
221.                               description of kwarg2
222.         """
223.     ), (
224.         """
225.         Single line summary
226. 
227.         Return:
228.           str:Extended
229.           description of return value
230.         """,
231.         """
232.         Single line summary
233. 
234.         :returns: *str* -- Extended
235.                   description of return value
236.         """
237.     ), (
238.         """
239.         Single line summary
240. 
241.         Returns:
242.           str:Extended
243.           description of return value
244.         """,
245.         """
246.         Single line summary
247. 
248.         :returns: *str* -- Extended
249.                   description of return value
250.         """
251.     ), (
252.         """
253.         Single line summary
254. 
255.         Returns:
256.           Extended
257.           description of return value
258.         """,
259.         """
260.         Single line summary
261. 
262.         :returns: Extended
263.                   description of return value
264.         """
265.     ), (
266.         """
267.         Single line summary
268. 
269.         Args:
270.           arg1(str):Extended
271.             description of arg1
272.           *args: Variable length argument list.
273.           **kwargs: Arbitrary keyword arguments.
274.         """,
275.         """
276.         Single line summary
277. 
278.         :Parameters: * **arg1** (*str*) -- Extended
279.                        description of arg1
280.                      * **\\*args** -- Variable length argument list.
281.                      * **\\*\\*kwargs** -- Arbitrary keyword arguments.
282.         """
283.     ), (
284.         """
285.         Single line summary
286. 
287.         Args:
288.           arg1 (list(int)): Description
289.           arg2 (list[int]): Description
290.           arg3 (dict(str, int)): Description
291.           arg4 (dict[str, int]): Description
292.         """,
293.         """
294.         Single line summary
295. 
296.         :Parameters: * **arg1** (*list(int)*) -- Description
297.                      * **arg2** (*list[int]*) -- Description
298.                      * **arg3** (*dict(str, int)*) -- Description
299.                      * **arg4** (*dict[str, int]*) -- Description
300.         """
301.     ), (
302.         """
303.         Single line summary
304. 
305.         Yield:
306.           str:Extended
307.           description of yielded value
308.         """,
309.         """
310.         Single line summary
311. 
312.         :Yields: *str* -- Extended
313.                  description of yielded value
314.         """
315.     ), (
316.         """
317.         Single line summary
318. 
319.         Yields:
320.           Extended
321.           description of yielded value
322.         """,
323.         """
324.         Single line summary
325. 
326.         :Yields: Extended
327.                  description of yielded value
328.         """
329.     )]
330. 
331.     def test_sphinx_admonitions(self):
332.         admonition_map = {
333.             'Attention': 'attention',
334.             'Caution': 'caution',
335.             'Danger': 'danger',
336.             'Error': 'error',
337.             'Hint': 'hint',
338.             'Important': 'important',
339.             'Note': 'note',
340.             'Tip': 'tip',
341.             'Todo': 'todo',
342.             'Warning': 'warning',
343.             'Warnings': 'warning',
344.         }
345.         config = Config()
346.         for section, admonition in admonition_map.items():
347.             # Multiline
348.             actual = str(GoogleDocstring(("{}:\n"
349.                                           "    this is the first line\n"
350.                                           "\n"
351.                                           "    and this is the second line\n"
352.                                           ).format(section), config))
353.             expect = (".. {}::\n"
354.                       "\n"
355.                       "   this is the first line\n"
356.                       "   \n"
357.                       "   and this is the second line\n"
358.                       ).format(admonition)
359.             self.assertEqual(expect, actual)
360. 
361.             # Single line
362.             actual = str(GoogleDocstring(("{}:\n"
363.                                           "    this is a single line\n"
364.                                           ).format(section), config))
365.             expect = (".. {}:: this is a single line\n"
366.                       ).format(admonition)
367.             self.assertEqual(expect, actual)
368. 
369.     def test_docstrings(self):
370.         config = Config(
371.             napoleon_use_param=False,
372.             napoleon_use_rtype=False,
373.             napoleon_use_keyword=False
374.         )
375.         for docstring, expected in self.docstrings:
376.             actual = str(GoogleDocstring(dedent(docstring), config))
377.             expected = dedent(expected)
378.             self.assertEqual(expected, actual)
379. 
380.     def test_parameters_with_class_reference(self):
381.         docstring = """\
382. Construct a new XBlock.
383. 
384. This class should only be used by runtimes.
385. 
386. Arguments:
387.     runtime (:class:`~typing.Dict`\\[:class:`int`,:class:`str`\\]): Use it to
388.         access the environment. It is available in XBlock code
389.         as ``self.runtime``.
390. 
391.     field_data (:class:`FieldData`): Interface used by the XBlock
392.         fields to access their data from wherever it is persisted.
393. 
394.     scope_ids (:class:`ScopeIds`): Identifiers needed to resolve scopes.
395. 
396. """
397. 
398.         actual = str(GoogleDocstring(docstring))
399.         expected = """\
400. Construct a new XBlock.
401. 
402. This class should only be used by runtimes.
403. 
404. :param runtime: Use it to
405.                 access the environment. It is available in XBlock code
406.                 as ``self.runtime``.
407. :type runtime: :class:`~typing.Dict`\\[:class:`int`,:class:`str`\\]
408. :param field_data: Interface used by the XBlock
409.                    fields to access their data from wherever it is persisted.
410. :type field_data: :class:`FieldData`
411. :param scope_ids: Identifiers needed to resolve scopes.
412. :type scope_ids: :class:`ScopeIds`
413. """
414.         self.assertEqual(expected, actual)
415. 
416.     def test_attributes_with_class_reference(self):
417.         docstring = """\
418. Attributes:
419.     in_attr(:class:`numpy.ndarray`): super-dooper attribute
420. """
421. 
422.         actual = str(GoogleDocstring(docstring))
423.         expected = """\
424. .. attribute:: in_attr
425. 
426.    super-dooper attribute
427. 
428.    :type: :class:`numpy.ndarray`
429. """
430.         self.assertEqual(expected, actual)
431. 
432.         docstring = """\
433. Attributes:
434.     in_attr(numpy.ndarray): super-dooper attribute
435. """
436. 
437.         actual = str(GoogleDocstring(docstring))
438.         expected = """\
439. .. attribute:: in_attr
440. 
441.    super-dooper attribute
442. 
443.    :type: numpy.ndarray
444. """
445.         self.assertEqual(expected, actual)
446. 
447.     def test_code_block_in_returns_section(self):
448.         docstring = """
449. Returns:
450.     foobar: foo::
451. 
452.         codecode
453.         codecode
454. """
455.         expected = """
456. :returns:
457. 
458.           foo::
459. 
460.               codecode
461.               codecode
462. :rtype: foobar
463. """
464.         actual = str(GoogleDocstring(docstring))
465.         self.assertEqual(expected, actual)
466. 
467.     def test_colon_in_return_type(self):
468.         docstring = """Example property.
469. 
470. Returns:
471.     :py:class:`~.module.submodule.SomeClass`: an example instance
472.     if available, None if not available.
473. """
474.         expected = """Example property.
475. 
476. :returns: an example instance
477.           if available, None if not available.
478. :rtype: :py:class:`~.module.submodule.SomeClass`
479. """
480.         actual = str(GoogleDocstring(docstring))
481.         self.assertEqual(expected, actual)
482. 
483.     def test_xrefs_in_return_type(self):
484.         docstring = """Example Function
485. 
486. Returns:
487.     :class:`numpy.ndarray`: A :math:`n \\times 2` array containing
488.     a bunch of math items
489. """
490.         expected = """Example Function
491. 
492. :returns: A :math:`n \\times 2` array containing
493.           a bunch of math items
494. :rtype: :class:`numpy.ndarray`
495. """
496.         actual = str(GoogleDocstring(docstring))
497.         self.assertEqual(expected, actual)
498. 
499.     def test_raises_types(self):
500.         docstrings = [("""


File: tests/test_ext_napoleon_docstring.py
Line number range: 501 - 2000
Content:
501. Example Function
502. 
503. Raises:
504.     RuntimeError:
505.         A setting wasn't specified, or was invalid.
506.     ValueError:
507.         Something something value error.
508.     :py:class:`AttributeError`
509.         errors for missing attributes.
510.     ~InvalidDimensionsError
511.         If the dimensions couldn't be parsed.
512.     `InvalidArgumentsError`
513.         If the arguments are invalid.
514.     :exc:`~ValueError`
515.         If the arguments are wrong.
516. 
517. """, """
518. Example Function
519. 
520. :raises RuntimeError: A setting wasn't specified, or was invalid.
521. :raises ValueError: Something something value error.
522. :raises AttributeError: errors for missing attributes.
523. :raises ~InvalidDimensionsError: If the dimensions couldn't be parsed.
524. :raises InvalidArgumentsError: If the arguments are invalid.
525. :raises ~ValueError: If the arguments are wrong.
526. """),
527.                       ################################
528.                       ("""
529. Example Function
530. 
531. Raises:
532.     InvalidDimensionsError
533. 
534. """, """
535. Example Function
536. 
537. :raises InvalidDimensionsError:
538. """),
539.                       ################################
540.                       ("""
541. Example Function
542. 
543. Raises:
544.     Invalid Dimensions Error
545. 
546. """, """
547. Example Function
548. 
549. :raises Invalid Dimensions Error:
550. """),
551.                       ################################
552.                       ("""
553. Example Function
554. 
555. Raises:
556.     Invalid Dimensions Error: With description
557. 
558. """, """
559. Example Function
560. 
561. :raises Invalid Dimensions Error: With description
562. """),
563.                       ################################
564.                       ("""
565. Example Function
566. 
567. Raises:
568.     InvalidDimensionsError: If the dimensions couldn't be parsed.
569. 
570. """, """
571. Example Function
572. 
573. :raises InvalidDimensionsError: If the dimensions couldn't be parsed.
574. """),
575.                       ################################
576.                       ("""
577. Example Function
578. 
579. Raises:
580.     Invalid Dimensions Error: If the dimensions couldn't be parsed.
581. 
582. """, """
583. Example Function
584. 
585. :raises Invalid Dimensions Error: If the dimensions couldn't be parsed.
586. """),
587.                       ################################
588.                       ("""
589. Example Function
590. 
591. Raises:
592.     If the dimensions couldn't be parsed.
593. 
594. """, """
595. Example Function
596. 
597. :raises If the dimensions couldn't be parsed.:
598. """),
599.                       ################################
600.                       ("""
601. Example Function
602. 
603. Raises:
604.     :class:`exc.InvalidDimensionsError`
605. 
606. """, """
607. Example Function
608. 
609. :raises exc.InvalidDimensionsError:
610. """),
611.                       ################################
612.                       ("""
613. Example Function
614. 
615. Raises:
616.     :class:`exc.InvalidDimensionsError`: If the dimensions couldn't be parsed.
617. 
618. """, """
619. Example Function
620. 
621. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
622. """),
623.                       ################################
624.                       ("""
625. Example Function
626. 
627. Raises:
628.     :class:`exc.InvalidDimensionsError`: If the dimensions couldn't be parsed,
629.        then a :class:`exc.InvalidDimensionsError` will be raised.
630. 
631. """, """
632. Example Function
633. 
634. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed,
635.     then a :class:`exc.InvalidDimensionsError` will be raised.
636. """),
637.                       ################################
638.                       ("""
639. Example Function
640. 
641. Raises:
642.     :class:`exc.InvalidDimensionsError`: If the dimensions couldn't be parsed.
643.     :class:`exc.InvalidArgumentsError`: If the arguments are invalid.
644. 
645. """, """
646. Example Function
647. 
648. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
649. :raises exc.InvalidArgumentsError: If the arguments are invalid.
650. """),
651.                       ################################
652.                       ("""
653. Example Function
654. 
655. Raises:
656.     :class:`exc.InvalidDimensionsError`
657.     :class:`exc.InvalidArgumentsError`
658. 
659. """, """
660. Example Function
661. 
662. :raises exc.InvalidDimensionsError:
663. :raises exc.InvalidArgumentsError:
664. """)]
665.         for docstring, expected in docstrings:
666.             actual = str(GoogleDocstring(docstring))
667.             self.assertEqual(expected, actual)
668. 
669.     def test_kwargs_in_arguments(self):
670.         docstring = """Allows to create attributes binded to this device.
671. 
672. Some other paragraph.
673. 
674. Code sample for usage::
675. 
676.   dev.bind(loopback=Loopback)
677.   dev.loopback.configure()
678. 
679. Arguments:
680.   **kwargs: name/class pairs that will create resource-managers
681.     bound as instance attributes to this instance. See code
682.     example above.
683. """
684.         expected = """Allows to create attributes binded to this device.
685. 
686. Some other paragraph.
687. 
688. Code sample for usage::
689. 
690.   dev.bind(loopback=Loopback)
691.   dev.loopback.configure()
692. 
693. :param \\*\\*kwargs: name/class pairs that will create resource-managers
694.                    bound as instance attributes to this instance. See code
695.                    example above.
696. """
697.         actual = str(GoogleDocstring(docstring))
698.         self.assertEqual(expected, actual)
699. 
700.     def test_section_header_formatting(self):
701.         docstrings = [("""
702. Summary line
703. 
704. Example:
705.     Multiline reStructuredText
706.     literal code block
707. 
708. """, """
709. Summary line
710. 
711. .. rubric:: Example
712. 
713. Multiline reStructuredText
714. literal code block
715. """),
716.                       ################################
717.                       ("""
718. Summary line
719. 
720. Example::
721. 
722.     Multiline reStructuredText
723.     literal code block
724. 
725. """, """
726. Summary line
727. 
728. Example::
729. 
730.     Multiline reStructuredText
731.     literal code block
732. """),
733.                       ################################
734.                       ("""
735. Summary line
736. 
737. :Example:
738. 
739.     Multiline reStructuredText
740.     literal code block
741. 
742. """, """
743. Summary line
744. 
745. :Example:
746. 
747.     Multiline reStructuredText
748.     literal code block
749. """)]
750.         for docstring, expected in docstrings:
751.             actual = str(GoogleDocstring(docstring))
752.             self.assertEqual(expected, actual)
753. 
754.     def test_list_in_parameter_description(self):
755.         docstring = """One line summary.
756. 
757. Parameters:
758.     no_list (int):
759.     one_bullet_empty (int):
760.         *
761.     one_bullet_single_line (int):
762.         - first line
763.     one_bullet_two_lines (int):
764.         +   first line
765.             continued
766.     two_bullets_single_line (int):
767.         -  first line
768.         -  second line
769.     two_bullets_two_lines (int):
770.         * first line
771.           continued
772.         * second line
773.           continued
774.     one_enumeration_single_line (int):
775.         1.  first line
776.     one_enumeration_two_lines (int):
777.         1)   first line
778.              continued
779.     two_enumerations_one_line (int):
780.         (iii) first line
781.         (iv) second line
782.     two_enumerations_two_lines (int):
783.         a. first line
784.            continued
785.         b. second line
786.            continued
787.     one_definition_one_line (int):
788.         item 1
789.             first line
790.     one_definition_two_lines (int):
791.         item 1
792.             first line
793.             continued
794.     two_definitions_one_line (int):
795.         item 1
796.             first line
797.         item 2
798.             second line
799.     two_definitions_two_lines (int):
800.         item 1
801.             first line
802.             continued
803.         item 2
804.             second line
805.             continued
806.     one_definition_blank_line (int):
807.         item 1
808. 
809.             first line
810. 
811.             extra first line
812. 
813.     two_definitions_blank_lines (int):
814.         item 1
815. 
816.             first line
817. 
818.             extra first line
819. 
820.         item 2
821. 
822.             second line
823. 
824.             extra second line
825. 
826.     definition_after_inline_text (int): text line
827. 
828.         item 1
829.             first line
830. 
831.     definition_after_normal_text (int):
832.         text line
833. 
834.         item 1
835.             first line
836. """
837. 
838.         expected = """One line summary.
839. 
840. :param no_list:
841. :type no_list: int
842. :param one_bullet_empty:
843.                          *
844. :type one_bullet_empty: int
845. :param one_bullet_single_line:
846.                                - first line
847. :type one_bullet_single_line: int
848. :param one_bullet_two_lines:
849.                              +   first line
850.                                  continued
851. :type one_bullet_two_lines: int
852. :param two_bullets_single_line:
853.                                 -  first line
854.                                 -  second line
855. :type two_bullets_single_line: int
856. :param two_bullets_two_lines:
857.                               * first line
858.                                 continued
859.                               * second line
860.                                 continued
861. :type two_bullets_two_lines: int
862. :param one_enumeration_single_line:
863.                                     1.  first line
864. :type one_enumeration_single_line: int
865. :param one_enumeration_two_lines:
866.                                   1)   first line
867.                                        continued
868. :type one_enumeration_two_lines: int
869. :param two_enumerations_one_line:
870.                                   (iii) first line
871.                                   (iv) second line
872. :type two_enumerations_one_line: int
873. :param two_enumerations_two_lines:
874.                                    a. first line
875.                                       continued
876.                                    b. second line
877.                                       continued
878. :type two_enumerations_two_lines: int
879. :param one_definition_one_line:
880.                                 item 1
881.                                     first line
882. :type one_definition_one_line: int
883. :param one_definition_two_lines:
884.                                  item 1
885.                                      first line
886.                                      continued
887. :type one_definition_two_lines: int
888. :param two_definitions_one_line:
889.                                  item 1
890.                                      first line
891.                                  item 2
892.                                      second line
893. :type two_definitions_one_line: int
894. :param two_definitions_two_lines:
895.                                   item 1
896.                                       first line
897.                                       continued
898.                                   item 2
899.                                       second line
900.                                       continued
901. :type two_definitions_two_lines: int
902. :param one_definition_blank_line:
903.                                   item 1
904. 
905.                                       first line
906. 
907.                                       extra first line
908. :type one_definition_blank_line: int
909. :param two_definitions_blank_lines:
910.                                     item 1
911. 
912.                                         first line
913. 
914.                                         extra first line
915. 
916.                                     item 2
917. 
918.                                         second line
919. 
920.                                         extra second line
921. :type two_definitions_blank_lines: int
922. :param definition_after_inline_text: text line
923. 
924.                                      item 1
925.                                          first line
926. :type definition_after_inline_text: int
927. :param definition_after_normal_text: text line
928. 
929.                                      item 1
930.                                          first line
931. :type definition_after_normal_text: int
932. """
933.         config = Config(napoleon_use_param=True)
934.         actual = str(GoogleDocstring(docstring, config))
935.         self.assertEqual(expected, actual)
936. 
937.         expected = """One line summary.
938. 
939. :Parameters: * **no_list** (*int*)
940.              * **one_bullet_empty** (*int*) --
941. 
942.                *
943.              * **one_bullet_single_line** (*int*) --
944. 
945.                - first line
946.              * **one_bullet_two_lines** (*int*) --
947. 
948.                +   first line
949.                    continued
950.              * **two_bullets_single_line** (*int*) --
951. 
952.                -  first line
953.                -  second line
954.              * **two_bullets_two_lines** (*int*) --
955. 
956.                * first line
957.                  continued
958.                * second line
959.                  continued
960.              * **one_enumeration_single_line** (*int*) --
961. 
962.                1.  first line
963.              * **one_enumeration_two_lines** (*int*) --
964. 
965.                1)   first line
966.                     continued
967.              * **two_enumerations_one_line** (*int*) --
968. 
969.                (iii) first line
970.                (iv) second line
971.              * **two_enumerations_two_lines** (*int*) --
972. 
973.                a. first line
974.                   continued
975.                b. second line
976.                   continued
977.              * **one_definition_one_line** (*int*) --
978. 
979.                item 1
980.                    first line
981.              * **one_definition_two_lines** (*int*) --
982. 
983.                item 1
984.                    first line
985.                    continued
986.              * **two_definitions_one_line** (*int*) --
987. 
988.                item 1
989.                    first line
990.                item 2
991.                    second line
992.              * **two_definitions_two_lines** (*int*) --
993. 
994.                item 1
995.                    first line
996.                    continued
997.                item 2
998.                    second line
999.                    continued
1000.              * **one_definition_blank_line** (*int*) --
1001. 
1002.                item 1
1003. 
1004.                    first line
1005. 
1006.                    extra first line
1007.              * **two_definitions_blank_lines** (*int*) --
1008. 
1009.                item 1
1010. 
1011.                    first line
1012. 
1013.                    extra first line
1014. 
1015.                item 2
1016. 
1017.                    second line
1018. 
1019.                    extra second line
1020.              * **definition_after_inline_text** (*int*) -- text line
1021. 
1022.                item 1
1023.                    first line
1024.              * **definition_after_normal_text** (*int*) -- text line
1025. 
1026.                item 1
1027.                    first line
1028. """
1029.         config = Config(napoleon_use_param=False)
1030.         actual = str(GoogleDocstring(docstring, config))
1031.         self.assertEqual(expected, actual)
1032. 
1033.     def test_custom_generic_sections(self):
1034. 
1035.         docstrings = (("""\
1036. Really Important Details:
1037.     You should listen to me!
1038. """, """.. rubric:: Really Important Details
1039. 
1040. You should listen to me!
1041. """),
1042.                       ("""\
1043. Sooper Warning:
1044.     Stop hitting yourself!
1045. """, """:Warns: **Stop hitting yourself!**
1046. """))
1047. 
1048.         testConfig = Config(napoleon_custom_sections=['Really Important Details',
1049.                                                       ('Sooper Warning', 'warns')])
1050. 
1051.         for docstring, expected in docstrings:
1052.             actual = str(GoogleDocstring(docstring, testConfig))
1053.             self.assertEqual(expected, actual)
1054. 
1055.     def test_noindex(self):
1056.         docstring = """
1057. Attributes:
1058.     arg
1059.         description
1060. 
1061. Methods:
1062.     func(i, j)
1063.         description
1064. """
1065. 
1066.         expected = """
1067. .. attribute:: arg
1068.    :noindex:
1069. 
1070.    description
1071. 
1072. .. method:: func(i, j)
1073.    :noindex:
1074. 
1075.    
1076.    description
1077. """
1078.         config = Config()
1079.         actual = str(GoogleDocstring(docstring, config=config, app=None, what='module',
1080.                                      options={'noindex': True}))
1081.         self.assertEqual(expected, actual)
1082. 
1083.     def test_keywords_with_types(self):
1084.         docstring = """\
1085. Do as you please
1086. 
1087. Keyword Args:
1088.     gotham_is_yours (None): shall interfere.
1089. """
1090.         actual = str(GoogleDocstring(docstring))
1091.         expected = """\
1092. Do as you please
1093. 
1094. :keyword gotham_is_yours: shall interfere.
1095. :kwtype gotham_is_yours: None
1096. """
1097.         self.assertEqual(expected, actual)
1098. 
1099. 
1100. class NumpyDocstringTest(BaseDocstringTest):
1101.     docstrings = [(
1102.         """Single line summary""",
1103.         """Single line summary"""
1104.     ), (
1105.         """
1106.         Single line summary
1107. 
1108.         Extended description
1109. 
1110.         """,
1111.         """
1112.         Single line summary
1113. 
1114.         Extended description
1115.         """
1116.     ), (
1117.         """
1118.         Single line summary
1119. 
1120.         Parameters
1121.         ----------
1122.         arg1:str
1123.             Extended
1124.             description of arg1
1125.         """,
1126.         """
1127.         Single line summary
1128. 
1129.         :Parameters: **arg1** (:class:`str`) -- Extended
1130.                      description of arg1
1131.         """
1132.     ), (
1133.         """
1134.         Single line summary
1135. 
1136.         Parameters
1137.         ----------
1138.         arg1:str
1139.             Extended
1140.             description of arg1
1141.         arg2 : int
1142.             Extended
1143.             description of arg2
1144. 
1145.         Keyword Arguments
1146.         -----------------
1147.           kwarg1:str
1148.               Extended
1149.               description of kwarg1
1150.           kwarg2 : int
1151.               Extended
1152.               description of kwarg2
1153.         """,
1154.         """
1155.         Single line summary
1156. 
1157.         :Parameters: * **arg1** (:class:`str`) -- Extended
1158.                        description of arg1
1159.                      * **arg2** (:class:`int`) -- Extended
1160.                        description of arg2
1161. 
1162.         :Keyword Arguments: * **kwarg1** (:class:`str`) -- Extended
1163.                               description of kwarg1
1164.                             * **kwarg2** (:class:`int`) -- Extended
1165.                               description of kwarg2
1166.         """
1167.     ), (
1168.         """
1169.         Single line summary
1170. 
1171.         Return
1172.         ------
1173.         str
1174.             Extended
1175.             description of return value
1176.         """,
1177.         """
1178.         Single line summary
1179. 
1180.         :returns: *str* -- Extended
1181.                   description of return value
1182.         """
1183.     ), (
1184.         """
1185.         Single line summary
1186. 
1187.         Returns
1188.         -------
1189.         str
1190.             Extended
1191.             description of return value
1192.         """,
1193.         """
1194.         Single line summary
1195. 
1196.         :returns: *str* -- Extended
1197.                   description of return value
1198.         """
1199.     ), (
1200.         """
1201.         Single line summary
1202. 
1203.         Parameters
1204.         ----------
1205.         arg1:str
1206.              Extended description of arg1
1207.         *args:
1208.             Variable length argument list.
1209.         **kwargs:
1210.             Arbitrary keyword arguments.
1211.         """,
1212.         """
1213.         Single line summary
1214. 
1215.         :Parameters: * **arg1** (:class:`str`) -- Extended description of arg1
1216.                      * **\\*args** -- Variable length argument list.
1217.                      * **\\*\\*kwargs** -- Arbitrary keyword arguments.
1218.         """
1219.     ), (
1220.         """
1221.         Single line summary
1222. 
1223.         Parameters
1224.         ----------
1225.         arg1:str
1226.              Extended description of arg1
1227.         *args, **kwargs:
1228.             Variable length argument list and arbitrary keyword arguments.
1229.         """,
1230.         """
1231.         Single line summary
1232. 
1233.         :Parameters: * **arg1** (*str*) -- Extended description of arg1
1234.                      * **\\*args, \\*\\*kwargs** -- Variable length argument list and arbitrary keyword arguments.
1235.         """
1236.     ), (
1237.         """
1238.         Single line summary
1239. 
1240.         Yield
1241.         -----
1242.         str
1243.             Extended
1244.             description of yielded value
1245.         """,
1246.         """
1247.         Single line summary
1248. 
1249.         :Yields: *str* -- Extended
1250.                  description of yielded value
1251.         """
1252.     ), (
1253.         """
1254.         Single line summary
1255. 
1256.         Yields
1257.         ------
1258.         str
1259.             Extended
1260.             description of yielded value
1261.         """,
1262.         """
1263.         Single line summary
1264. 
1265.         :Yields: *str* -- Extended
1266.                  description of yielded value
1267.         """
1268.     )]
1269. 
1270.     def test_sphinx_admonitions(self):
1271.         admonition_map = {
1272.             'Attention': 'attention',
1273.             'Caution': 'caution',
1274.             'Danger': 'danger',
1275.             'Error': 'error',
1276.             'Hint': 'hint',
1277.             'Important': 'important',
1278.             'Note': 'note',
1279.             'Tip': 'tip',
1280.             'Todo': 'todo',
1281.             'Warning': 'warning',
1282.             'Warnings': 'warning',
1283.         }
1284.         config = Config()
1285.         for section, admonition in admonition_map.items():
1286.             # Multiline
1287.             actual = str(NumpyDocstring(("{}\n"
1288.                                          "{}\n"
1289.                                          "    this is the first line\n"
1290.                                          "\n"
1291.                                          "    and this is the second line\n"
1292.                                          ).format(section, '-' * len(section)), config))
1293.             expect = (".. {}::\n"
1294.                       "\n"
1295.                       "   this is the first line\n"
1296.                       "   \n"
1297.                       "   and this is the second line\n"
1298.                       ).format(admonition)
1299.             self.assertEqual(expect, actual)
1300. 
1301.             # Single line
1302.             actual = str(NumpyDocstring(("{}\n"
1303.                                          "{}\n"
1304.                                          "    this is a single line\n"
1305.                                          ).format(section, '-' * len(section)), config))
1306.             expect = (".. {}:: this is a single line\n"
1307.                       ).format(admonition)
1308.             self.assertEqual(expect, actual)
1309. 
1310.     def test_docstrings(self):
1311.         config = Config(
1312.             napoleon_use_param=False,
1313.             napoleon_use_rtype=False,
1314.             napoleon_use_keyword=False)
1315.         for docstring, expected in self.docstrings:
1316.             actual = str(NumpyDocstring(dedent(docstring), config))
1317.             expected = dedent(expected)
1318.             self.assertEqual(expected, actual)
1319. 
1320.     def test_parameters_with_class_reference(self):
1321.         docstring = """\
1322. Parameters
1323. ----------
1324. param1 : :class:`MyClass <name.space.MyClass>` instance
1325. 
1326. """
1327. 
1328.         config = Config(napoleon_use_param=False)
1329.         actual = str(NumpyDocstring(docstring, config))
1330.         expected = """\
1331. :Parameters: **param1** (:class:`MyClass <name.space.MyClass>` instance)
1332. """
1333.         self.assertEqual(expected, actual)
1334. 
1335.         config = Config(napoleon_use_param=True)
1336.         actual = str(NumpyDocstring(docstring, config))
1337.         expected = """\
1338. :param param1:
1339. :type param1: :class:`MyClass <name.space.MyClass>` instance
1340. """
1341.         self.assertEqual(expected, actual)
1342. 
1343.     def test_parameters_without_class_reference(self):
1344.         docstring = """\
1345. Parameters
1346. ----------
1347. param1 : MyClass instance
1348. 
1349. """
1350. 
1351.         config = Config(napoleon_use_param=False)
1352.         actual = str(NumpyDocstring(docstring, config))
1353.         expected = """\
1354. :Parameters: **param1** (:class:`MyClass instance`)
1355. """
1356.         self.assertEqual(expected, actual)
1357. 
1358.         config = Config(napoleon_use_param=True)
1359.         actual = str(NumpyDocstring(dedent(docstring), config))
1360.         expected = """\
1361. :param param1:
1362. :type param1: :class:`MyClass instance`
1363. """
1364.         self.assertEqual(expected, actual)
1365. 
1366.     def test_see_also_refs(self):
1367.         docstring = """\
1368. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1369. 
1370. See Also
1371. --------
1372. some, other, funcs
1373. otherfunc : relationship
1374. 
1375. """
1376. 
1377.         actual = str(NumpyDocstring(docstring))
1378. 
1379.         expected = """\
1380. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1381. 
1382. .. seealso::
1383. 
1384.    :obj:`some`, :obj:`other`, :obj:`funcs`
1385.    \n\
1386.    :obj:`otherfunc`
1387.        relationship
1388. """
1389.         self.assertEqual(expected, actual)
1390. 
1391.         docstring = """\
1392. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1393. 
1394. See Also
1395. --------
1396. some, other, funcs
1397. otherfunc : relationship
1398. 
1399. """
1400. 
1401.         config = Config()
1402.         app = mock.Mock()
1403.         actual = str(NumpyDocstring(docstring, config, app, "method"))
1404. 
1405.         expected = """\
1406. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1407. 
1408. .. seealso::
1409. 
1410.    :meth:`some`, :meth:`other`, :meth:`funcs`
1411.    \n\
1412.    :meth:`otherfunc`
1413.        relationship
1414. """
1415.         self.assertEqual(expected, actual)
1416. 
1417.     def test_colon_in_return_type(self):
1418.         docstring = """
1419. Summary
1420. 
1421. Returns
1422. -------
1423. :py:class:`~my_mod.my_class`
1424.     an instance of :py:class:`~my_mod.my_class`
1425. """
1426. 
1427.         expected = """
1428. Summary
1429. 
1430. :returns: an instance of :py:class:`~my_mod.my_class`
1431. :rtype: :py:class:`~my_mod.my_class`
1432. """
1433. 
1434.         config = Config()
1435.         app = mock.Mock()
1436.         actual = str(NumpyDocstring(docstring, config, app, "method"))
1437. 
1438.         self.assertEqual(expected, actual)
1439. 
1440.     def test_underscore_in_attribute(self):
1441.         docstring = """
1442. Attributes
1443. ----------
1444. 
1445. arg_ : type
1446.     some description
1447. """
1448. 
1449.         expected = """
1450. :ivar arg_: some description
1451. :vartype arg_: :class:`type`
1452. """
1453. 
1454.         config = Config(napoleon_use_ivar=True)
1455.         app = mock.Mock()
1456.         actual = str(NumpyDocstring(docstring, config, app, "class"))
1457. 
1458.         self.assertEqual(expected, actual)
1459. 
1460.     def test_underscore_in_attribute_strip_signature_backslash(self):
1461.         docstring = """
1462. Attributes
1463. ----------
1464. 
1465. arg_ : type
1466.     some description
1467. """
1468. 
1469.         expected = """
1470. :ivar arg\\_: some description
1471. :vartype arg\\_: :class:`type`
1472. """
1473. 
1474.         config = Config(napoleon_use_ivar=True)
1475.         config.strip_signature_backslash = True
1476.         app = mock.Mock()
1477.         actual = str(NumpyDocstring(docstring, config, app, "class"))
1478. 
1479.         self.assertEqual(expected, actual)
1480. 
1481.     def test_raises_types(self):
1482.         docstrings = [("""
1483. Example Function
1484. 
1485. Raises
1486. ------
1487.   RuntimeError
1488. 
1489.       A setting wasn't specified, or was invalid.
1490.   ValueError
1491. 
1492.       Something something value error.
1493. 
1494. """, """
1495. Example Function
1496. 
1497. :raises RuntimeError: A setting wasn't specified, or was invalid.
1498. :raises ValueError: Something something value error.
1499. """),
1500.                       ################################
1501.                       ("""
1502. Example Function
1503. 
1504. Raises
1505. ------
1506. InvalidDimensionsError
1507. 
1508. """, """
1509. Example Function
1510. 
1511. :raises InvalidDimensionsError:
1512. """),
1513.                       ################################
1514.                       ("""
1515. Example Function
1516. 
1517. Raises
1518. ------
1519. Invalid Dimensions Error
1520. 
1521. """, """
1522. Example Function
1523. 
1524. :raises Invalid Dimensions Error:
1525. """),
1526.                       ################################
1527.                       ("""
1528. Example Function
1529. 
1530. Raises
1531. ------
1532. Invalid Dimensions Error
1533.     With description
1534. 
1535. """, """
1536. Example Function
1537. 
1538. :raises Invalid Dimensions Error: With description
1539. """),
1540.                       ################################
1541.                       ("""
1542. Example Function
1543. 
1544. Raises
1545. ------
1546. InvalidDimensionsError
1547.     If the dimensions couldn't be parsed.
1548. 
1549. """, """
1550. Example Function
1551. 
1552. :raises InvalidDimensionsError: If the dimensions couldn't be parsed.
1553. """),
1554.                       ################################
1555.                       ("""
1556. Example Function
1557. 
1558. Raises
1559. ------
1560. Invalid Dimensions Error
1561.     If the dimensions couldn't be parsed.
1562. 
1563. """, """
1564. Example Function
1565. 
1566. :raises Invalid Dimensions Error: If the dimensions couldn't be parsed.
1567. """),
1568.                       ################################
1569.                       ("""
1570. Example Function
1571. 
1572. Raises
1573. ------
1574. If the dimensions couldn't be parsed.
1575. 
1576. """, """
1577. Example Function
1578. 
1579. :raises If the dimensions couldn't be parsed.:
1580. """),
1581.                       ################################
1582.                       ("""
1583. Example Function
1584. 
1585. Raises
1586. ------
1587. :class:`exc.InvalidDimensionsError`
1588. 
1589. """, """
1590. Example Function
1591. 
1592. :raises exc.InvalidDimensionsError:
1593. """),
1594.                       ################################
1595.                       ("""
1596. Example Function
1597. 
1598. Raises
1599. ------
1600. :class:`exc.InvalidDimensionsError`
1601.     If the dimensions couldn't be parsed.
1602. 
1603. """, """
1604. Example Function
1605. 
1606. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
1607. """),
1608.                       ################################
1609.                       ("""
1610. Example Function
1611. 
1612. Raises
1613. ------
1614. :class:`exc.InvalidDimensionsError`
1615.     If the dimensions couldn't be parsed,
1616.     then a :class:`exc.InvalidDimensionsError` will be raised.
1617. 
1618. """, """
1619. Example Function
1620. 
1621. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed,
1622.     then a :class:`exc.InvalidDimensionsError` will be raised.
1623. """),
1624.                       ################################
1625.                       ("""
1626. Example Function
1627. 
1628. Raises
1629. ------
1630. :class:`exc.InvalidDimensionsError`
1631.     If the dimensions couldn't be parsed.
1632. :class:`exc.InvalidArgumentsError`
1633.     If the arguments are invalid.
1634. 
1635. """, """
1636. Example Function
1637. 
1638. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
1639. :raises exc.InvalidArgumentsError: If the arguments are invalid.
1640. """),
1641.                       ################################
1642.                       ("""
1643. Example Function
1644. 
1645. Raises
1646. ------
1647. :class:`exc.InvalidDimensionsError`
1648. :class:`exc.InvalidArgumentsError`
1649. 
1650. """, """
1651. Example Function
1652. 
1653. :raises exc.InvalidDimensionsError:
1654. :raises exc.InvalidArgumentsError:
1655. """)]
1656.         for docstring, expected in docstrings:
1657.             config = Config()
1658.             app = mock.Mock()
1659.             actual = str(NumpyDocstring(docstring, config, app, "method"))
1660.             self.assertEqual(expected, actual)
1661. 
1662.     def test_xrefs_in_return_type(self):
1663.         docstring = """
1664. Example Function
1665. 
1666. Returns
1667. -------
1668. :class:`numpy.ndarray`
1669.     A :math:`n \\times 2` array containing
1670.     a bunch of math items
1671. """
1672.         expected = """
1673. Example Function
1674. 
1675. :returns: A :math:`n \\times 2` array containing
1676.           a bunch of math items
1677. :rtype: :class:`numpy.ndarray`
1678. """
1679.         config = Config()
1680.         app = mock.Mock()
1681.         actual = str(NumpyDocstring(docstring, config, app, "method"))
1682.         self.assertEqual(expected, actual)
1683. 
1684.     def test_section_header_underline_length(self):
1685.         docstrings = [("""
1686. Summary line
1687. 
1688. Example
1689. -
1690. Multiline example
1691. body
1692. 
1693. """, """
1694. Summary line
1695. 
1696. Example
1697. -
1698. Multiline example
1699. body
1700. """),
1701.                       ################################
1702.                       ("""
1703. Summary line
1704. 
1705. Example
1706. --
1707. Multiline example
1708. body
1709. 
1710. """, """
1711. Summary line
1712. 
1713. .. rubric:: Example
1714. 
1715. Multiline example
1716. body
1717. """),
1718.                       ################################
1719.                       ("""
1720. Summary line
1721. 
1722. Example
1723. -------
1724. Multiline example
1725. body
1726. 
1727. """, """
1728. Summary line
1729. 
1730. .. rubric:: Example
1731. 
1732. Multiline example
1733. body
1734. """),
1735.                       ################################
1736.                       ("""
1737. Summary line
1738. 
1739. Example
1740. ------------
1741. Multiline example
1742. body
1743. 
1744. """, """
1745. Summary line
1746. 
1747. .. rubric:: Example
1748. 
1749. Multiline example
1750. body
1751. """)]
1752.         for docstring, expected in docstrings:
1753.             actual = str(NumpyDocstring(docstring))
1754.             self.assertEqual(expected, actual)
1755. 
1756.     def test_list_in_parameter_description(self):
1757.         docstring = """One line summary.
1758. 
1759. Parameters
1760. ----------
1761. no_list : int
1762. one_bullet_empty : int
1763.     *
1764. one_bullet_single_line : int
1765.     - first line
1766. one_bullet_two_lines : int
1767.     +   first line
1768.         continued
1769. two_bullets_single_line : int
1770.     -  first line
1771.     -  second line
1772. two_bullets_two_lines : int
1773.     * first line
1774.       continued
1775.     * second line
1776.       continued
1777. one_enumeration_single_line : int
1778.     1.  first line
1779. one_enumeration_two_lines : int
1780.     1)   first line
1781.          continued
1782. two_enumerations_one_line : int
1783.     (iii) first line
1784.     (iv) second line
1785. two_enumerations_two_lines : int
1786.     a. first line
1787.        continued
1788.     b. second line
1789.        continued
1790. one_definition_one_line : int
1791.     item 1
1792.         first line
1793. one_definition_two_lines : int
1794.     item 1
1795.         first line
1796.         continued
1797. two_definitions_one_line : int
1798.     item 1
1799.         first line
1800.     item 2
1801.         second line
1802. two_definitions_two_lines : int
1803.     item 1
1804.         first line
1805.         continued
1806.     item 2
1807.         second line
1808.         continued
1809. one_definition_blank_line : int
1810.     item 1
1811. 
1812.         first line
1813. 
1814.         extra first line
1815. 
1816. two_definitions_blank_lines : int
1817.     item 1
1818. 
1819.         first line
1820. 
1821.         extra first line
1822. 
1823.     item 2
1824. 
1825.         second line
1826. 
1827.         extra second line
1828. 
1829. definition_after_normal_text : int
1830.     text line
1831. 
1832.     item 1
1833.         first line
1834. """
1835. 
1836.         expected = """One line summary.
1837. 
1838. :param no_list:
1839. :type no_list: :class:`int`
1840. :param one_bullet_empty:
1841.                          *
1842. :type one_bullet_empty: :class:`int`
1843. :param one_bullet_single_line:
1844.                                - first line
1845. :type one_bullet_single_line: :class:`int`
1846. :param one_bullet_two_lines:
1847.                              +   first line
1848.                                  continued
1849. :type one_bullet_two_lines: :class:`int`
1850. :param two_bullets_single_line:
1851.                                 -  first line
1852.                                 -  second line
1853. :type two_bullets_single_line: :class:`int`
1854. :param two_bullets_two_lines:
1855.                               * first line
1856.                                 continued
1857.                               * second line
1858.                                 continued
1859. :type two_bullets_two_lines: :class:`int`
1860. :param one_enumeration_single_line:
1861.                                     1.  first line
1862. :type one_enumeration_single_line: :class:`int`
1863. :param one_enumeration_two_lines:
1864.                                   1)   first line
1865.                                        continued
1866. :type one_enumeration_two_lines: :class:`int`
1867. :param two_enumerations_one_line:
1868.                                   (iii) first line
1869.                                   (iv) second line
1870. :type two_enumerations_one_line: :class:`int`
1871. :param two_enumerations_two_lines:
1872.                                    a. first line
1873.                                       continued
1874.                                    b. second line
1875.                                       continued
1876. :type two_enumerations_two_lines: :class:`int`
1877. :param one_definition_one_line:
1878.                                 item 1
1879.                                     first line
1880. :type one_definition_one_line: :class:`int`
1881. :param one_definition_two_lines:
1882.                                  item 1
1883.                                      first line
1884.                                      continued
1885. :type one_definition_two_lines: :class:`int`
1886. :param two_definitions_one_line:
1887.                                  item 1
1888.                                      first line
1889.                                  item 2
1890.                                      second line
1891. :type two_definitions_one_line: :class:`int`
1892. :param two_definitions_two_lines:
1893.                                   item 1
1894.                                       first line
1895.                                       continued
1896.                                   item 2
1897.                                       second line
1898.                                       continued
1899. :type two_definitions_two_lines: :class:`int`
1900. :param one_definition_blank_line:
1901.                                   item 1
1902. 
1903.                                       first line
1904. 
1905.                                       extra first line
1906. :type one_definition_blank_line: :class:`int`
1907. :param two_definitions_blank_lines:
1908.                                     item 1
1909. 
1910.                                         first line
1911. 
1912.                                         extra first line
1913. 
1914.                                     item 2
1915. 
1916.                                         second line
1917. 
1918.                                         extra second line
1919. :type two_definitions_blank_lines: :class:`int`
1920. :param definition_after_normal_text: text line
1921. 
1922.                                      item 1
1923.                                          first line
1924. :type definition_after_normal_text: :class:`int`
1925. """
1926.         config = Config(napoleon_use_param=True)
1927.         actual = str(NumpyDocstring(docstring, config))
1928.         self.assertEqual(expected, actual)
1929. 
1930.         expected = """One line summary.
1931. 
1932. :Parameters: * **no_list** (:class:`int`)
1933.              * **one_bullet_empty** (:class:`int`) --
1934. 
1935.                *
1936.              * **one_bullet_single_line** (:class:`int`) --
1937. 
1938.                - first line
1939.              * **one_bullet_two_lines** (:class:`int`) --
1940. 
1941.                +   first line
1942.                    continued
1943.              * **two_bullets_single_line** (:class:`int`) --
1944. 
1945.                -  first line
1946.                -  second line
1947.              * **two_bullets_two_lines** (:class:`int`) --
1948. 
1949.                * first line
1950.                  continued
1951.                * second line
1952.                  continued
1953.              * **one_enumeration_single_line** (:class:`int`) --
1954. 
1955.                1.  first line
1956.              * **one_enumeration_two_lines** (:class:`int`) --
1957. 
1958.                1)   first line
1959.                     continued
1960.              * **two_enumerations_one_line** (:class:`int`) --
1961. 
1962.                (iii) first line
1963.                (iv) second line
1964.              * **two_enumerations_two_lines** (:class:`int`) --
1965. 
1966.                a. first line
1967.                   continued
1968.                b. second line
1969.                   continued
1970.              * **one_definition_one_line** (:class:`int`) --
1971. 
1972.                item 1
1973.                    first line
1974.              * **one_definition_two_lines** (:class:`int`) --
1975. 
1976.                item 1
1977.                    first line
1978.                    continued
1979.              * **two_definitions_one_line** (:class:`int`) --
1980. 
1981.                item 1
1982.                    first line
1983.                item 2
1984.                    second line
1985.              * **two_definitions_two_lines** (:class:`int`) --
1986. 
1987.                item 1
1988.                    first line
1989.                    continued
1990.                item 2
1991.                    second line
1992.                    continued
1993.              * **one_definition_blank_line** (:class:`int`) --
1994. 
1995.                item 1
1996. 
1997.                    first line
1998. 
1999.                    extra first line
2000.              * **two_definitions_blank_lines** (:class:`int`) --


File: tests/test_ext_napoleon_docstring.py
Line number range: 2001 - 4000
Content:
2001. 
2002.                item 1
2003. 
2004.                    first line
2005. 
2006.                    extra first line
2007. 
2008.                item 2
2009. 
2010.                    second line
2011. 
2012.                    extra second line
2013.              * **definition_after_normal_text** (:class:`int`) -- text line
2014. 
2015.                item 1
2016.                    first line
2017. """
2018.         config = Config(napoleon_use_param=False)
2019.         actual = str(NumpyDocstring(docstring, config))
2020.         self.assertEqual(expected, actual)
2021. 
2022.     def test_token_type(self):
2023.         tokens = (
2024.             ("1", "literal"),
2025.             ("-4.6", "literal"),
2026.             ("2j", "literal"),
2027.             ("'string'", "literal"),
2028.             ('"another_string"', "literal"),
2029.             ("{1, 2}", "literal"),
2030.             ("{'va{ue', 'set'}", "literal"),
2031.             ("optional", "control"),
2032.             ("default", "control"),
2033.             (", ", "delimiter"),
2034.             (" of ", "delimiter"),
2035.             (" or ", "delimiter"),
2036.             (": ", "delimiter"),
2037.             ("True", "obj"),
2038.             ("None", "obj"),
2039.             ("name", "obj"),
2040.             (":py:class:`Enum`", "reference"),
2041.         )
2042. 
2043.         for token, expected in tokens:
2044.             actual = _token_type(token)
2045.             self.assertEqual(expected, actual)
2046. 
2047.     def test_tokenize_type_spec(self):
2048.         specs = (
2049.             "str",
2050.             "defaultdict",
2051.             "int, float, or complex",
2052.             "int or float or None, optional",
2053.             '{"F", "C", "N"}',
2054.             "{'F', 'C', 'N'}, default: 'F'",
2055.             "{'F', 'C', 'N or C'}, default 'F'",
2056.             "str, default: 'F or C'",
2057.             "int, default: None",
2058.             "int, default None",
2059.             "int, default :obj:`None`",
2060.             '"ma{icious"',
2061.             r"'with \'quotes\''",
2062.         )
2063. 
2064.         tokens = (
2065.             ["str"],
2066.             ["defaultdict"],
2067.             ["int", ", ", "float", ", or ", "complex"],
2068.             ["int", " or ", "float", " or ", "None", ", ", "optional"],
2069.             ["{", '"F"', ", ", '"C"', ", ", '"N"', "}"],
2070.             ["{", "'F'", ", ", "'C'", ", ", "'N'", "}", ", ", "default", ": ", "'F'"],
2071.             ["{", "'F'", ", ", "'C'", ", ", "'N or C'", "}", ", ", "default", " ", "'F'"],
2072.             ["str", ", ", "default", ": ", "'F or C'"],
2073.             ["int", ", ", "default", ": ", "None"],
2074.             ["int", ", " , "default", " ", "None"],
2075.             ["int", ", ", "default", " ", ":obj:`None`"],
2076.             ['"ma{icious"'],
2077.             [r"'with \'quotes\''"],
2078.         )
2079. 
2080.         for spec, expected in zip(specs, tokens):
2081.             actual = _tokenize_type_spec(spec)
2082.             self.assertEqual(expected, actual)
2083. 
2084.     def test_recombine_set_tokens(self):
2085.         tokens = (
2086.             ["{", "1", ", ", "2", "}"],
2087.             ["{", '"F"', ", ", '"C"', ", ", '"N"', "}", ", ", "optional"],
2088.             ["{", "'F'", ", ", "'C'", ", ", "'N'", "}", ", ", "default", ": ", "None"],
2089.             ["{", "'F'", ", ", "'C'", ", ", "'N'", "}", ", ", "default", " ", "None"],
2090.         )
2091. 
2092.         combined_tokens = (
2093.             ["{1, 2}"],
2094.             ['{"F", "C", "N"}', ", ", "optional"],
2095.             ["{'F', 'C', 'N'}", ", ", "default", ": ", "None"],
2096.             ["{'F', 'C', 'N'}", ", ", "default", " ", "None"],
2097.         )
2098. 
2099.         for tokens_, expected in zip(tokens, combined_tokens):
2100.             actual = _recombine_set_tokens(tokens_)
2101.             self.assertEqual(expected, actual)
2102. 
2103.     def test_recombine_set_tokens_invalid(self):
2104.         tokens = (
2105.             ["{", "1", ", ", "2"],
2106.             ['"F"', ", ", '"C"', ", ", '"N"', "}", ", ", "optional"],
2107.             ["{", "1", ", ", "2", ", ", "default", ": ", "None"],
2108.         )
2109.         combined_tokens = (
2110.             ["{1, 2"],
2111.             ['"F"', ", ", '"C"', ", ", '"N"', "}", ", ", "optional"],
2112.             ["{1, 2", ", ", "default", ": ", "None"],
2113.         )
2114. 
2115.         for tokens_, expected in zip(tokens, combined_tokens):
2116.             actual = _recombine_set_tokens(tokens_)
2117.             self.assertEqual(expected, actual)
2118. 
2119.     def test_convert_numpy_type_spec(self):
2120.         translations = {
2121.             "DataFrame": "pandas.DataFrame",
2122.         }
2123. 
2124.         specs = (
2125.             "",
2126.             "optional",
2127.             "str, optional",
2128.             "int or float or None, default: None",
2129.             "int, default None",
2130.             '{"F", "C", "N"}',
2131.             "{'F', 'C', 'N'}, default: 'N'",
2132.             "{'F', 'C', 'N'}, default 'N'",
2133.             "DataFrame, optional",
2134.         )
2135. 
2136.         converted = (
2137.             "",
2138.             "*optional*",
2139.             ":class:`str`, *optional*",
2140.             ":class:`int` or :class:`float` or :obj:`None`, *default*: :obj:`None`",
2141.             ":class:`int`, *default* :obj:`None`",
2142.             '``{"F", "C", "N"}``',
2143.             "``{'F', 'C', 'N'}``, *default*: ``'N'``",
2144.             "``{'F', 'C', 'N'}``, *default* ``'N'``",
2145.             ":class:`pandas.DataFrame`, *optional*",
2146.         )
2147. 
2148.         for spec, expected in zip(specs, converted):
2149.             actual = _convert_numpy_type_spec(spec, translations=translations)
2150.             self.assertEqual(expected, actual)
2151. 
2152.     def test_parameter_types(self):
2153.         docstring = dedent("""\
2154.             Parameters
2155.             ----------
2156.             param1 : DataFrame
2157.                 the data to work on
2158.             param2 : int or float or None, optional
2159.                 a parameter with different types
2160.             param3 : dict-like, optional
2161.                 a optional mapping
2162.             param4 : int or float or None, optional
2163.                 a optional parameter with different types
2164.             param5 : {"F", "C", "N"}, optional
2165.                 a optional parameter with fixed values
2166.             param6 : int, default None
2167.                 different default format
2168.             param7 : mapping of hashable to str, optional
2169.                 a optional mapping
2170.             param8 : ... or Ellipsis
2171.                 ellipsis
2172.         """)
2173.         expected = dedent("""\
2174.             :param param1: the data to work on
2175.             :type param1: :class:`DataFrame`
2176.             :param param2: a parameter with different types
2177.             :type param2: :class:`int` or :class:`float` or :obj:`None`, *optional*
2178.             :param param3: a optional mapping
2179.             :type param3: :term:`dict-like <mapping>`, *optional*
2180.             :param param4: a optional parameter with different types
2181.             :type param4: :class:`int` or :class:`float` or :obj:`None`, *optional*
2182.             :param param5: a optional parameter with fixed values
2183.             :type param5: ``{"F", "C", "N"}``, *optional*
2184.             :param param6: different default format
2185.             :type param6: :class:`int`, *default* :obj:`None`
2186.             :param param7: a optional mapping
2187.             :type param7: :term:`mapping` of :term:`hashable` to :class:`str`, *optional*
2188.             :param param8: ellipsis
2189.             :type param8: :obj:`... <Ellipsis>` or :obj:`Ellipsis`
2190.         """)
2191.         translations = {
2192.             "dict-like": ":term:`dict-like <mapping>`",
2193.             "mapping": ":term:`mapping`",
2194.             "hashable": ":term:`hashable`",
2195.         }
2196.         config = Config(
2197.             napoleon_use_param=True,
2198.             napoleon_use_rtype=True,
2199.             napoleon_type_aliases=translations,
2200.         )
2201.         actual = str(NumpyDocstring(docstring, config))
2202.         self.assertEqual(expected, actual)
2203. 
2204. 
2205. @contextmanager
2206. def warns(warning, match):
2207.     match_re = re.compile(match)
2208.     try:
2209.         yield warning
2210.     finally:
2211.         raw_warnings = warning.getvalue()
2212.         warnings = [w for w in raw_warnings.split("\n") if w.strip()]
2213. 
2214.         assert len(warnings) == 1 and all(match_re.match(w) for w in warnings)
2215.         warning.truncate(0)
2216. 
2217. 
2218. class TestNumpyDocstring:
2219.     def test_token_type_invalid(self, warning):
2220.         tokens = (
2221.             "{1, 2",
2222.             "}",
2223.             "'abc",
2224.             "def'",
2225.             '"ghi',
2226.             'jkl"',
2227.         )
2228.         errors = (
2229.             r".+: invalid value set \(missing closing brace\):",
2230.             r".+: invalid value set \(missing opening brace\):",
2231.             r".+: malformed string literal \(missing closing quote\):",
2232.             r".+: malformed string literal \(missing opening quote\):",
2233.             r".+: malformed string literal \(missing closing quote\):",
2234.             r".+: malformed string literal \(missing opening quote\):",
2235.         )
2236.         for token, error in zip(tokens, errors):
2237.             with warns(warning, match=error):
2238.                 _token_type(token)
2239. 
2240.     @pytest.mark.parametrize(
2241.         ("name", "expected"),
2242.         (
2243.             ("x, y, z", "x, y, z"),
2244.             ("*args, **kwargs", r"\*args, \*\*kwargs"),
2245.             ("*x, **y", r"\*x, \*\*y"),
2246.         ),
2247.     )
2248.     def test_escape_args_and_kwargs(self, name, expected):
2249.         numpy_docstring = NumpyDocstring("")
2250.         actual = numpy_docstring._escape_args_and_kwargs(name)
2251. 
2252.         assert actual == expected

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-23 09:55:07,507 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user explicitly requested the full content of the file `tests/test_ext_napoleon_docstring.py`.\n\n2. Extended relevance:\n   - The purpose is to find relevant test cases within this file. Providing the entire file is necessary to fulfill this purpose.\n   - The context provided contains the complete content of the file from line 1 to line 2252.', relative_path='tests/test_ext_napoleon_docstring.py', start_line=1, end_line=2252)]
2025-12-23 09:55:07,509 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of `tests/test_ext_napoleon_docstring.py`.
2025-12-23 09:55:07,510 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-23 09:55:07,510 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-23 09:55:07,510 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-23 09:55:07,510 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-23 09:55:07,511 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
sphinx
├── .circleci
|   └── config.yml
├── .codecov.yml
├── .github
|   ├── ISSUE_TEMPLATE
|   |   ├── bug_report.md
|   |   ├── config.yml
|   |   └── feature_request.md
|   ├── PULL_REQUEST_TEMPLATE.md
|   └── workflows
|       ├── builddoc.yml
|       ├── lint.yml
|       └── main.yml
├── .travis.yml
├── CONTRIBUTING.rst
├── README.rst
├── bindep.txt
├── doc
|   ├── _static
|   |   ├── conf.py.txt
|   |   └── themes
|   |       └── fullsize
|   ├── _templates
|   |   ├── index.html
|   |   └── indexsidebar.html
|   ├── _themes
|   |   └── sphinx13
|   |       ├── layout.html
|   |       └── static
|   |           └── sphinx13.css
|   ├── changes.rst
|   ├── conf.py
|   ├── contents.rst
|   ├── develop.rst
|   ├── development
|   |   ├── builders.rst
|   |   ├── index.rst
|   |   ├── overview.rst
|   |   ├── theming.rst
|   |   └── tutorials
|   |       ├── examples
|   |       |   ├── README.rst
|   |       |   ├── helloworld.py
|   |       |   ├── recipe.py
|   |       |   └── todo.py
|   |       ├── helloworld.rst
|   |       ├── index.rst
|   |       ├── recipe.rst
|   |       └── todo.rst
|   ├── examples.rst
|   ├── extdev
|   |   ├── appapi.rst
|   |   ├── builderapi.rst
|   |   ├── collectorapi.rst
|   |   ├── deprecated.rst
|   |   ├── domainapi.rst
|   |   ├── envapi.rst
|   |   ├── i18n.rst
|   |   ├── index.rst
|   |   ├── logging.rst
|   |   ├── markupapi.rst
|   |   ├── nodes.rst
|   |   ├── parserapi.rst
|   |   ├── projectapi.rst
|   |   └── utils.rst
|   ├── faq.rst
|   ├── glossary.rst
|   ├── internals
|   |   ├── authors.rst
|   |   ├── code-of-conduct.rst
|   |   ├── contributing.rst
|   |   ├── index.rst
|   |   ├── organization.rst
|   |   └── release-process.rst
|   ├── latex.rst
|   ├── man
|   |   ├── index.rst
|   |   ├── sphinx-apidoc.rst
|   |   ├── sphinx-autogen.rst
|   |   ├── sphinx-build.rst
|   |   └── sphinx-quickstart.rst
|   ├── templating.rst
|   └── usage
|       ├── advanced
|       |   ├── intl.rst
|       |   ├── setuptools.rst
|       |   └── websupport
|       |       ├── api.rst
|       |       ├── index.rst
|       |       ├── quickstart.rst
|       |       ├── searchadapters.rst
|       |       └── storagebackends.rst
|       ├── builders
|       |   └── index.rst
|       ├── configuration.rst
|       ├── extensions
|       |   ├── autodoc.rst
|       |   ├── autosectionlabel.rst
|       |   ├── autosummary.rst
|       |   ├── coverage.rst
|       |   ├── doctest.rst
|       |   ├── duration.rst
|       |   ├── example_google.py
|       |   ├── example_google.rst
|       |   ├── example_numpy.py
|       |   ├── example_numpy.rst
|       |   ├── extlinks.rst
|       |   ├── githubpages.rst
|       |   ├── graphviz.rst
|       |   ├── ifconfig.rst
|       |   ├── imgconverter.rst
|       |   ├── index.rst
|       |   ├── inheritance.rst
|       |   ├── intersphinx.rst
|       |   ├── linkcode.rst
|       |   ├── math.rst
|       |   ├── napoleon.rst
|       |   ├── todo.rst
|       |   └── viewcode.rst
|       ├── index.rst
|       ├── installation.rst
|       ├── markdown.rst
|       ├── quickstart.rst
|       ├── restructuredtext
|       |   ├── basics.rst
|       |   ├── directives.rst
|       |   ├── domains.rst
|       |   ├── field-lists.rst
|       |   ├── index.rst
|       |   └── roles.rst
|       └── theming.rst
├── karma.conf.js
├── setup.py
├── sphinx
|   ├── __init__.py
|   ├── __main__.py
|   ├── addnodes.py
|   ├── application.py
|   ├── builders
|   |   ├── __init__.py
|   |   ├── _epub_base.py
|   |   ├── applehelp.py
|   |   ├── changes.py
|   |   ├── devhelp.py
|   |   ├── dirhtml.py
|   |   ├── dummy.py
|   |   ├── epub3.py
|   |   ├── gettext.py
|   |   ├── html
|   |   |   ├── __init__.py
|   |   |   └── transforms.py
|   |   ├── htmlhelp.py
|   |   ├── latex
|   |   |   ├── __init__.py
|   |   |   ├── constants.py
|   |   |   ├── nodes.py
|   |   |   ├── theming.py
|   |   |   ├── transforms.py
|   |   |   └── util.py
|   |   ├── linkcheck.py
|   |   ├── manpage.py
|   |   ├── qthelp.py
|   |   ├── singlehtml.py
|   |   ├── texinfo.py
|   |   ├── text.py
|   |   └── xml.py
|   ├── cmd
|   |   ├── __init__.py
|   |   ├── build.py
|   |   ├── make_mode.py
|   |   └── quickstart.py
|   ├── config.py
|   ├── deprecation.py
|   ├── directives
|   |   ├── __init__.py
|   |   ├── code.py
|   |   ├── other.py
|   |   └── patches.py
|   ├── domains
|   |   ├── __init__.py
|   |   ├── c.py
|   |   ├── changeset.py
|   |   ├── citation.py
|   |   ├── cpp.py
|   |   ├── index.py
|   |   ├── javascript.py
|   |   ├── math.py
|   |   ├── python.py
|   |   ├── rst.py
|   |   └── std.py
|   ├── environment
|   |   ├── __init__.py
|   |   ├── adapters
|   |   |   ├── __init__.py
|   |   |   ├── asset.py
|   |   |   ├── indexentries.py
|   |   |   └── toctree.py
|   |   └── collectors
|   |       ├── __init__.py
|   |       ├── asset.py
|   |       ├── dependencies.py
|   |       ├── indexentries.py
|   |       ├── metadata.py
|   |       ├── title.py
|   |       └── toctree.py
|   ├── errors.py
|   ├── events.py
|   ├── ext
|   |   ├── __init__.py
|   |   ├── apidoc.py
|   |   ├── autodoc
|   |   |   ├── __init__.py
|   |   |   ├── directive.py
|   |   |   ├── importer.py
|   |   |   ├── mock.py
|   |   |   ├── type_comment.py
|   |   |   └── typehints.py
|   |   ├── autosectionlabel.py
|   |   ├── autosummary
|   |   |   ├── __init__.py
|   |   |   ├── generate.py
|   |   |   └── templates
|   |   |       └── autosummary
|   |   ├── coverage.py
|   |   ├── doctest.py
|   |   ├── duration.py
|   |   ├── extlinks.py
|   |   ├── githubpages.py
|   |   ├── graphviz.py
|   |   ├── ifconfig.py
|   |   ├── imgconverter.py
|   |   ├── imgmath.py
|   |   ├── inheritance_diagram.py
|   |   ├── intersphinx.py
|   |   ├── jsmath.py
|   |   ├── linkcode.py
|   |   ├── mathjax.py
|   |   ├── napoleon
|   |   |   ├── __init__.py
|   |   |   ├── docstring.py
|   |   |   └── iterators.py
|   |   ├── todo.py
|   |   └── viewcode.py
|   ├── extension.py
|   ├── highlighting.py
|   ├── io.py
|   ├── jinja2glue.py
|   ├── locale
|   |   ├── __init__.py
|   |   ├── ar
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bg
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── bn
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ca
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cak
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cs
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── cy
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── da
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── de
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── el
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eo
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── es
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── et
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── eu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fa
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── fr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── he
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hi_IN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── hu
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── id
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── it
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ja
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ko
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── lv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── mk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nb_NO
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ne
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── nl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_BR
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── pt_PT
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ro
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ru
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── si
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sk
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sl
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sq
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr@latin
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sr_RS
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── sv
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ta
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── te
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── tr
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── uk_UA
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── ur
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── vi
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   ├── zh_CN
|   |   |   └── LC_MESSAGES
|   |   |       └── sphinx.js
|   |   └── zh_TW
|   |       └── LC_MESSAGES
|   |           └── sphinx.js
|   ├── parsers.py
|   ├── project.py
|   ├── pycode
|   |   ├── __init__.py
|   |   ├── ast.py
|   |   └── parser.py
|   ├── pygments_styles.py
|   ├── registry.py
|   ├── roles.py
|   ├── search
|   |   ├── __init__.py
|   |   ├── da.py
|   |   ├── de.py
|   |   ├── en.py
|   |   ├── es.py
|   |   ├── fi.py
|   |   ├── fr.py
|   |   ├── hu.py
|   |   ├── it.py
|   |   ├── ja.py
|   |   ├── jssplitter.py
|   |   ├── nl.py
|   |   ├── no.py
|   |   ├── non-minified-js
|   |   |   ├── danish-stemmer.js
|   |   |   ├── dutch-stemmer.js
|   |   |   ├── finnish-stemmer.js
|   |   |   ├── french-stemmer.js
|   |   |   ├── german-stemmer.js
|   |   |   ├── hungarian-stemmer.js
|   |   |   ├── italian-stemmer.js
|   |   |   ├── norwegian-stemmer.js
|   |   |   ├── porter-stemmer.js
|   |   |   ├── portuguese-stemmer.js
|   |   |   ├── romanian-stemmer.js
|   |   |   ├── russian-stemmer.js
|   |   |   ├── spanish-stemmer.js
|   |   |   ├── swedish-stemmer.js
|   |   |   └── turkish-stemmer.js
|   |   ├── pt.py
|   |   ├── ro.py
|   |   ├── ru.py
|   |   ├── sv.py
|   |   ├── tr.py
|   |   └── zh.py
|   ├── setup_command.py
|   ├── templates
|   |   ├── apidoc
|   |   ├── epub3
|   |   |   └── container.xml
|   |   ├── gettext
|   |   ├── graphviz
|   |   |   └── graphviz.css
|   |   ├── htmlhelp
|   |   ├── imgmath
|   |   ├── latex
|   |   ├── quickstart
|   |   └── texinfo
|   ├── testing
|   |   ├── __init__.py
|   |   ├── comparer.py
|   |   ├── fixtures.py
|   |   ├── path.py
|   |   ├── restructuredtext.py
|   |   └── util.py
|   ├── texinputs
|   ├── texinputs_win
|   ├── themes
|   |   ├── agogo
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── basic
|   |   |   ├── changes
|   |   |   |   ├── frameset.html
|   |   |   |   ├── rstsource.html
|   |   |   |   └── versionchanges.html
|   |   |   ├── defindex.html
|   |   |   ├── domainindex.html
|   |   |   ├── genindex-single.html
|   |   |   ├── genindex-split.html
|   |   |   ├── genindex.html
|   |   |   ├── globaltoc.html
|   |   |   ├── layout.html
|   |   |   ├── localtoc.html
|   |   |   ├── opensearch.xml
|   |   |   ├── page.html
|   |   |   ├── relations.html
|   |   |   ├── search.html
|   |   |   ├── searchbox.html
|   |   |   ├── sourcelink.html
|   |   |   └── static
|   |   |       ├── doctools.js
|   |   |       ├── jquery-3.5.1.js
|   |   |       ├── jquery.js
|   |   |       ├── searchtools.js
|   |   |       ├── underscore-1.3.1.js
|   |   |       └── underscore.js
|   |   ├── bizstyle
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── css3-mediaqueries.js
|   |   |       └── css3-mediaqueries_src.js
|   |   ├── classic
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── default
|   |   |   └── static
|   |   |       └── default.css
|   |   ├── epub
|   |   |   ├── epub-cover.html
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── haiku
|   |   |   ├── layout.html
|   |   |   └── static
|   |   ├── nature
|   |   |   └── static
|   |   ├── nonav
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       └── nonav.css
|   |   ├── pyramid
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── epub.css
|   |   |       └── ie6.css
|   |   ├── scrolls
|   |   |   ├── artwork
|   |   |   ├── layout.html
|   |   |   └── static
|   |   |       ├── print.css
|   |   |       └── theme_extras.js
|   |   ├── sphinxdoc
|   |   |   └── static
|   |   └── traditional
|   |       └── static
|   ├── theming.py
|   ├── transforms
|   |   ├── __init__.py
|   |   ├── compact_bullet_list.py
|   |   ├── i18n.py
|   |   ├── post_transforms
|   |   |   ├── __init__.py
|   |   |   ├── code.py
|   |   |   └── images.py
|   |   └── references.py
|   ├── util
|   |   ├── __init__.py
|   |   ├── build_phase.py
|   |   ├── cfamily.py
|   |   ├── compat.py
|   |   ├── console.py
|   |   ├── docfields.py
|   |   ├── docstrings.py
|   |   ├── docutils.py
|   |   ├── fileutil.py
|   |   ├── i18n.py
|   |   ├── images.py
|   |   ├── inspect.py
|   |   ├── inventory.py
|   |   ├── jsdump.py
|   |   ├── jsonimpl.py
|   |   ├── logging.py
|   |   ├── matching.py
|   |   ├── math.py
|   |   ├── nodes.py
|   |   ├── osutil.py
|   |   ├── parallel.py
|   |   ├── png.py
|   |   ├── pycompat.py
|   |   ├── requests.py
|   |   ├── rst.py
|   |   ├── smartypants.py
|   |   ├── stemmer
|   |   |   ├── __init__.py
|   |   |   └── porter.py
|   |   ├── tags.py
|   |   ├── template.py
|   |   ├── texescape.py
|   |   └── typing.py
|   ├── versioning.py
|   └── writers
|       ├── __init__.py
|       ├── html.py
|       ├── html5.py
|       ├── latex.py
|       ├── manpage.py
|       ├── texinfo.py
|       ├── text.py
|       └── xml.py
├── tests
|   ├── conftest.py
|   ├── js
|   |   └── doctools.js
|   ├── roots
|   |   ├── test-add_enumerable_node
|   |   |   ├── conf.py
|   |   |   ├── enumerable_node.py
|   |   |   └── index.rst
|   |   ├── test-add_source_parser
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-add_source_parser-conflicts-with-users-setting
|   |   |   ├── conf.py
|   |   |   └── source_parser.py
|   |   ├── test-api-set-translator
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nonext
|   |   |   |   └── conf.py
|   |   |   └── translator.py
|   |   ├── test-apidoc-pep420
|   |   |   └── a
|   |   |       └── b
|   |   ├── test-apidoc-subpackage-in-toc
|   |   |   └── parent
|   |   |       ├── __init__.py
|   |   |       └── child
|   |   ├── test-apidoc-toc
|   |   |   └── mypackage
|   |   |       ├── __init__.py
|   |   |       ├── main.py
|   |   |       ├── no_init
|   |   |       ├── resource
|   |   |       └── something
|   |   ├── test-apidoc-trailing-underscore
|   |   |   └── package_
|   |   |       ├── __init__.py
|   |   |       └── module_.py
|   |   ├── test-autosummary
|   |   |   ├── conf.py
|   |   |   ├── dummy_module.py
|   |   |   ├── index.rst
|   |   |   ├── sphinx.rst
|   |   |   └── underscore_module_.py
|   |   ├── test-basic
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-html-translator
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-build-text
|   |   |   ├── conf.py
|   |   |   ├── doc1.txt
|   |   |   ├── doc2.txt
|   |   |   ├── index.txt
|   |   |   ├── lineblock.txt
|   |   |   ├── listitems.txt
|   |   |   ├── maxwidth.txt
|   |   |   ├── nonascii_maxwidth.txt
|   |   |   ├── nonascii_table.txt
|   |   |   ├── nonascii_title.txt
|   |   |   ├── table.txt
|   |   |   ├── table_colspan.txt
|   |   |   ├── table_colspan_and_rowspan.txt
|   |   |   ├── table_colspan_left.txt
|   |   |   └── table_rowspan.txt
|   |   ├── test-builder-dirhtml
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo
|   |   |   |   ├── foo_1.rst
|   |   |   |   ├── foo_2.rst
|   |   |   |   └── index.rst
|   |   |   └── index.rst
|   |   ├── test-builder-gettext-dont-rebuild-mo
|   |   |   ├── bom.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-changes
|   |   |   ├── base.rst
|   |   |   ├── c-api.rst
|   |   |   ├── conf.py
|   |   |   ├── contents.rst
|   |   |   └── library
|   |   |       └── utils.rst
|   |   ├── test-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-config
|   |   |   └── conf.py
|   |   ├── test-correct-year
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-default_role
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-directive-code
|   |   |   ├── caption.rst
|   |   |   ├── classes.rst
|   |   |   ├── conf.py
|   |   |   ├── emphasize.rst
|   |   |   ├── force.rst
|   |   |   ├── highlight.rst
|   |   |   ├── index.rst
|   |   |   ├── linenos.rst
|   |   |   ├── linenothreshold.rst
|   |   |   ├── namedblocks.rst
|   |   |   ├── py-decorators.rst
|   |   |   ├── python.rst
|   |   |   └── target.py
|   |   ├── test-directive-only
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── only.rst
|   |   ├── test-directives-raw
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-docutilsconf
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-domain-c
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── namespace.rst
|   |   |   └── semicolon.rst
|   |   ├── test-domain-cpp
|   |   |   ├── anon-dup-decl.rst
|   |   |   ├── any-role.rst
|   |   |   ├── backslash.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── lookup-key-overload.rst
|   |   |   ├── multi-decl-lookup.rst
|   |   |   ├── roles-targets-ok.rst
|   |   |   ├── roles-targets-warn.rst
|   |   |   ├── roles.rst
|   |   |   ├── roles2.rst
|   |   |   ├── semicolon.rst
|   |   |   ├── warn-template-param-qualified-name.rst
|   |   |   └── xref_consistency.rst
|   |   ├── test-domain-js
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   └── roles.rst
|   |   ├── test-domain-py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── module.rst
|   |   |   ├── module_option.rst
|   |   |   └── roles.rst
|   |   ├── test-double-inheriting-theme
|   |   |   ├── base_themes_dir
|   |   |   |   ├── base_theme1
|   |   |   |   └── base_theme2
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-epub-anchor-id
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autodoc
|   |   |   ├── autodoc_dummy_bar.py
|   |   |   ├── autodoc_dummy_module.py
|   |   |   ├── bug2437
|   |   |   |   ├── __init__.py
|   |   |   |   └── autodoc_dummy_foo.py
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target
|   |   |       ├── __init__.py
|   |   |       ├── abstractmethods.py
|   |   |       ├── annotated.py
|   |   |       ├── autoclass_content.py
|   |   |       ├── bound_method.py
|   |   |       ├── callable.py
|   |   |       ├── classes.py
|   |   |       ├── coroutine.py
|   |   |       ├── decorator.py
|   |   |       ├── descriptor.py
|   |   |       ├── docstring_signature.py
|   |   |       ├── enums.py
|   |   |       ├── final.py
|   |   |       ├── functions.py
|   |   |       ├── genericalias.py
|   |   |       ├── imported_members.py
|   |   |       ├── inheritance.py
|   |   |       ├── methods.py
|   |   |       ├── name_conflict
|   |   |       ├── name_mangling.py
|   |   |       ├── need_mocks.py
|   |   |       ├── overload.py
|   |   |       ├── partialfunction.py
|   |   |       ├── partialmethod.py
|   |   |       ├── pep570.py
|   |   |       ├── private.py
|   |   |       ├── process_docstring.py
|   |   |       ├── singledispatch.py
|   |   |       ├── singledispatchmethod.py
|   |   |       ├── slots.py
|   |   |       ├── sort_by_all.py
|   |   |       ├── typed_vars.py
|   |   |       ├── typehints.py
|   |   |       ├── typevar.py
|   |   |       └── wrappedfunction.py
|   |   ├── test-ext-autosectionlabel
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosectionlabel-prefix-document
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── autosummary_importfail.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-filename-map
|   |   |   ├── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-imported_members
|   |   |   ├── autosummary_dummy_package
|   |   |   |   ├── __init__.py
|   |   |   |   └── autosummary_dummy_module.py
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-mock_imports
|   |   |   ├── conf.py
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-autosummary-recursive
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── package
|   |   |   |   ├── __init__.py
|   |   |   |   ├── module.py
|   |   |   |   ├── module_importfail.py
|   |   |   |   └── package
|   |   |   └── package2
|   |   |       ├── __init__.py
|   |   |       └── module.py
|   |   ├── test-ext-autosummary-skip-member
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-autosummary-template
|   |   |   ├── _templates
|   |   |   |   └── empty.rst
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── target.py
|   |   ├── test-ext-coverage
|   |   |   ├── conf.py
|   |   |   ├── coverage_ignored.py
|   |   |   ├── coverage_not_ignored.py
|   |   |   └── index.rst
|   |   ├── test-ext-doctest
|   |   |   ├── conf.py
|   |   |   └── doctest.txt
|   |   ├── test-ext-doctest-skipif
|   |   |   ├── conf.py
|   |   |   └── skipif.txt
|   |   ├── test-ext-doctest-with-autodoc
|   |   |   ├── conf.py
|   |   |   ├── dir
|   |   |   |   ├── __init__.py
|   |   |   |   ├── bar.py
|   |   |   |   └── inner.rst
|   |   |   ├── foo.py
|   |   |   └── index.rst
|   |   ├── test-ext-githubpages
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-graphviz
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-ifconfig
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-imgconverter
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-inheritance_diagram
|   |   |   ├── conf.py
|   |   |   ├── example
|   |   |   |   ├── __init__.py
|   |   |   |   └── sphinx.py
|   |   |   ├── index.rst
|   |   |   └── test.py
|   |   ├── test-ext-intersphinx-cppdomain
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── math.rst
|   |   |   └── page.rst
|   |   ├── test-ext-math-compat
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-math-simple
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-ext-todo
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-ext-viewcode
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── objects.rst
|   |   |   └── spam
|   |   |       ├── __init__.py
|   |   |       ├── mod1.py
|   |   |       ├── mod2.py
|   |   |       └── mod3.py
|   |   ├── test-ext-viewcode-find
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── not_a_package
|   |   |       ├── __init__.py
|   |   |       └── submodule.py
|   |   ├── test-extensions
|   |   |   ├── conf.py
|   |   |   ├── read_parallel.py
|   |   |   ├── read_serial.py
|   |   |   ├── write_parallel.py
|   |   |   └── write_serial.py
|   |   ├── test-footnotes
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-gettext-template
|   |   |   ├── _templates
|   |   |   |   ├── template1.html
|   |   |   |   └── template2.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-glossary
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_assets
|   |   |   ├── conf.py
|   |   |   ├── extra
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   └── subdir
|   |   |   ├── index.rst
|   |   |   ├── static
|   |   |   |   ├── css
|   |   |   |   ├── index.rst
|   |   |   |   ├── js
|   |   |   |   └── subdir
|   |   |   └── subdir
|   |   |       └── _build
|   |   ├── test-html_entity
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_scaled_image_link
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-html_style
|   |   |   ├── _static
|   |   |   |   └── default.css
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-parsed-literal
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-image-in-section
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-images
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── subdir
|   |   |       └── index.rst
|   |   ├── test-index_on_title
|   |   |   ├── conf.py
|   |   |   └── contents.rst
|   |   ├── test-inheritance
|   |   |   ├── basic_diagram.rst
|   |   |   ├── conf.py
|   |   |   ├── diagram_module_w_2_top_classes.rst
|   |   |   ├── diagram_w_1_top_class.rst
|   |   |   ├── diagram_w_2_top_classes.rst
|   |   |   ├── diagram_w_nested_classes.rst
|   |   |   ├── diagram_w_parts.rst
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── test.py
|   |   |   |   └── test_nested.py
|   |   |   └── index.rst
|   |   ├── test-intl
|   |   |   ├── _templates
|   |   |   |   └── contents.html
|   |   |   ├── admonitions.txt
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── definition_terms.txt
|   |   |   ├── docfields.txt
|   |   |   ├── external_links.txt
|   |   |   ├── figure.txt
|   |   |   ├── footnote.txt
|   |   |   ├── glossary_terms.txt
|   |   |   ├── glossary_terms_inconsistency.txt
|   |   |   ├── index.txt
|   |   |   ├── index_entries.txt
|   |   |   ├── label_target.txt
|   |   |   ├── literalblock.txt
|   |   |   ├── only.txt
|   |   |   ├── raw.txt
|   |   |   ├── refs.txt
|   |   |   ├── refs_inconsistency.txt
|   |   |   ├── refs_python_domain.txt
|   |   |   ├── role_xref.txt
|   |   |   ├── rubric.txt
|   |   |   ├── section.txt
|   |   |   ├── seealso.txt
|   |   |   ├── subdir
|   |   |   |   └── index.txt
|   |   |   ├── table.txt
|   |   |   ├── toctree.txt
|   |   |   ├── topic.txt
|   |   |   ├── versionchange.txt
|   |   |   ├── warnings.txt
|   |   |   └── xx
|   |   |       └── LC_MESSAGES
|   |   ├── test-keep_warnings
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-babel
|   |   |   ├── bar.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-latex-equations
|   |   |   ├── conf.py
|   |   |   ├── equations.rst
|   |   |   └── expects
|   |   ├── test-latex-figure-in-admonition
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-includegraphics
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-index
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-labels
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── otherdoc.rst
|   |   ├── test-latex-numfig
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── indexhowto.rst
|   |   |   └── indexmanual.rst
|   |   ├── test-latex-table
|   |   |   ├── _mytemplates
|   |   |   |   └── latex
|   |   |   ├── complex.rst
|   |   |   ├── conf.py
|   |   |   ├── expects
|   |   |   ├── index.rst
|   |   |   ├── longtable.rst
|   |   |   └── tabular.rst
|   |   ├── test-latex-theme
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── theme
|   |   |       └── custom
|   |   ├── test-latex-title
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-latex-unicode
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-linkcheck
|   |   |   ├── conf.py
|   |   |   └── links.txt
|   |   ├── test-locale
|   |   |   ├── locale1
|   |   |   |   └── en
|   |   |   └── locale2
|   |   |       └── en
|   |   ├── test-manpage_url
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-citation
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-markup-rubric
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-maxlistdepth
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-metadata
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-need-escaped
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux.rst
|   |   ├── test-nested-enumerated-list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-nested-tables
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-numbered-circular
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── sub.rst
|   |   ├── test-numfig
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-productionlist
|   |   |   ├── Bare.rst
|   |   |   ├── Dup1.rst
|   |   |   ├── Dup2.rst
|   |   |   ├── LineContinuation.rst
|   |   |   ├── P1.rst
|   |   |   ├── P2.rst
|   |   |   ├── conf.py
|   |   |   ├── firstLineRule.rst
|   |   |   └── index.rst
|   |   ├── test-prolog
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── markdown.md
|   |   |   ├── prolog_markdown_parser.py
|   |   |   └── restructuredtext.rst
|   |   ├── test-pycode
|   |   |   └── cp_1251_coded.py
|   |   ├── test-pycode-egg
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   └── src
|   |   |       ├── sample.py
|   |   |       └── setup.py
|   |   ├── test-reST-code-block
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-refonly_bullet_list
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-roles-download
|   |   |   ├── another
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-root
|   |   |   ├── _templates
|   |   |   |   ├── contentssb.html
|   |   |   |   ├── customsb.html
|   |   |   |   └── layout.html
|   |   |   ├── autodoc.txt
|   |   |   ├── autodoc_target.py
|   |   |   ├── bom.txt
|   |   |   ├── conf.py
|   |   |   ├── extapi.txt
|   |   |   ├── extensions.txt
|   |   |   ├── footnote.txt
|   |   |   ├── images.txt
|   |   |   ├── includes.txt
|   |   |   ├── index.txt
|   |   |   ├── lists.txt
|   |   |   ├── markup.txt
|   |   |   ├── math.txt
|   |   |   ├── objects.txt
|   |   |   ├── parsermod.py
|   |   |   ├── special
|   |   |   |   └── code.py
|   |   |   └── subdir
|   |   |       ├── excluded.txt
|   |   |       ├── images.txt
|   |   |       └── includes.txt
|   |   ├── test-search
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── nosearch.rst
|   |   |   └── tocitem.rst
|   |   ├── test-setup
|   |   |   ├── doc
|   |   |   |   ├── conf.py
|   |   |   |   └── index.txt
|   |   |   └── setup.py
|   |   ├── test-smartquotes
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-stylesheets
|   |   |   ├── _templates
|   |   |   |   └── layout.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-templating
|   |   |   ├── _templates
|   |   |   |   ├── autosummary
|   |   |   |   └── layout.html
|   |   |   ├── autosummary_templating.txt
|   |   |   ├── conf.py
|   |   |   └── index.txt
|   |   ├── test-theming
|   |   |   ├── conf.py
|   |   |   ├── index.rst
|   |   |   ├── setup.py
|   |   |   └── test_theme
|   |   |       ├── __init__.py
|   |   |       ├── staticfiles
|   |   |       └── test-theme
|   |   ├── test-tocdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   ├── qux.rst
|   |   |   └── tocdepth.rst
|   |   ├── test-toctree-duplicated
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   └── index.rst
|   |   ├── test-toctree-empty
|   |   |   ├── _templates
|   |   |   |   └── localtoc.html
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-toctree-glob
|   |   |   ├── bar
|   |   |   |   ├── bar_1.rst
|   |   |   |   ├── bar_2.rst
|   |   |   |   ├── bar_3.rst
|   |   |   |   ├── bar_4
|   |   |   |   └── index.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   ├── quux.rst
|   |   |   └── qux
|   |   |       ├── index.rst
|   |   |       ├── qux_1.rst
|   |   |       └── qux_2.rst
|   |   ├── test-toctree-maxdepth
|   |   |   ├── bar.rst
|   |   |   ├── baz.rst
|   |   |   ├── conf.py
|   |   |   ├── foo.rst
|   |   |   ├── index.rst
|   |   |   └── qux.rst
|   |   ├── test-trim_doctest_flags
|   |   |   ├── conf.py
|   |   |   └── index.rst
|   |   ├── test-versioning
|   |   |   ├── added.txt
|   |   |   ├── conf.py
|   |   |   ├── deleted.txt
|   |   |   ├── deleted_end.txt
|   |   |   ├── index.txt
|   |   |   ├── insert.txt
|   |   |   ├── insert_beginning.txt
|   |   |   ├── insert_similar.txt
|   |   |   ├── modified.txt
|   |   |   └── original.txt
|   |   └── test-warnings
|   |       ├── autodoc_fodder.py
|   |       ├── conf.py
|   |       ├── index.rst
|   |       └── undecodable.rst
|   ├── test_api_translator.py
|   ├── test_application.py
|   ├── test_build.py
|   ├── test_build_changes.py
|   ├── test_build_dirhtml.py
|   ├── test_build_epub.py
|   ├── test_build_gettext.py
|   ├── test_build_html.py
|   ├── test_build_latex.py
|   ├── test_build_linkcheck.py
|   ├── test_build_manpage.py
|   ├── test_build_texinfo.py
|   ├── test_build_text.py
|   ├── test_builder.py
|   ├── test_catalogs.py
|   ├── test_config.py
|   ├── test_correct_year.py
|   ├── test_directive_code.py
|   ├── test_directive_only.py
|   ├── test_directive_other.py
|   ├── test_directive_patch.py
|   ├── test_docutilsconf.py
|   ├── test_domain_c.py
|   ├── test_domain_cpp.py
|   ├── test_domain_js.py
|   ├── test_domain_py.py
|   ├── test_domain_rst.py
|   ├── test_domain_std.py
|   ├── test_environment.py
|   ├── test_environment_indexentries.py
|   ├── test_environment_toctree.py
|   ├── test_errors.py
|   ├── test_events.py
|   ├── test_ext_apidoc.py
|   ├── test_ext_autodoc.py
|   ├── test_ext_autodoc_autofunction.py
|   ├── test_ext_autodoc_configs.py
|   ├── test_ext_autodoc_events.py
|   ├── test_ext_autodoc_mock.py
|   ├── test_ext_autodoc_private_members.py
|   ├── test_ext_autosectionlabel.py
|   ├── test_ext_autosummary.py
|   ├── test_ext_coverage.py
|   ├── test_ext_doctest.py
|   ├── test_ext_duration.py
|   ├── test_ext_githubpages.py
|   ├── test_ext_graphviz.py
|   ├── test_ext_ifconfig.py
|   ├── test_ext_imgconverter.py
|   ├── test_ext_inheritance_diagram.py
|   ├── test_ext_intersphinx.py
|   ├── test_ext_math.py
|   ├── test_ext_napoleon.py
|   ├── test_ext_napoleon_docstring.py
|   ├── test_ext_napoleon_iterators.py
|   ├── test_ext_todo.py
|   ├── test_ext_viewcode.py
|   ├── test_highlighting.py
|   ├── test_intl.py
|   ├── test_locale.py
|   ├── test_markup.py
|   ├── test_metadata.py
|   ├── test_parser.py
|   ├── test_project.py
|   ├── test_pycode.py
|   ├── test_pycode_ast.py
|   ├── test_pycode_parser.py
|   ├── test_quickstart.py
|   ├── test_roles.py
|   ├── test_search.py
|   ├── test_setup_command.py
|   ├── test_smartquotes.py
|   ├── test_templating.py
|   ├── test_theming.py
|   ├── test_toctree.py
|   ├── test_transforms_post_transforms_code.py
|   ├── test_util.py
|   ├── test_util_docstrings.py
|   ├── test_util_docutils.py
|   ├── test_util_fileutil.py
|   ├── test_util_i18n.py
|   ├── test_util_images.py
|   ├── test_util_inspect.py
|   ├── test_util_inventory.py
|   ├── test_util_jsdump.py
|   ├── test_util_logging.py
|   ├── test_util_matching.py
|   ├── test_util_nodes.py
|   ├── test_util_pycompat.py
|   ├── test_util_rst.py
|   ├── test_util_template.py
|   ├── test_util_typing.py
|   ├── test_versioning.py
|   ├── test_writer_latex.py
|   └── typing_test_data.py
└── utils
    ├── __init__.py
    ├── bump_docker.sh
    ├── bump_version.py
    ├── checks.py
    ├── doclinter.py
    └── jssplitter_generator.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Render error when combining multiple input parameters in docstring

Description: **Describe the bug & Reproduce**

My team is writing a function in Python, which contains 3 inputs that are similar, so we want to put them in the same line in the docstring. 

As described in 4. Parameters in [numpydoc docstring guide](https://numpydoc.readthedocs.io/en/latest/format.html#sections), this is possible if you write something like this:

```
x1, x2 : array_like
    Input arrays, description of `x1`, `x2`.
```

However, this produces:

<img width="406" alt="图片" src="https://user-images.githubusercontent.com/20618587/83668496-566d3680-a5d0-11ea-8a15-5596f77b6c20.png">

Even worse, when added "optional", the rendered HTML stays the same as the screenshot above, so there is no way to tell whether it is optional:

```
x1, x2 : array_like, optional
    Input arrays, description of `x1`, `x2`.
```

**Expected behavior**
Something like 

- x1, x2 (_array_like, optional_)  -  Input arrays, description of x1, x2.

**Environment info**
- OS: macOS 10.15.5 (19F101)
- Python version: 3.7.7
- Sphinx version: 3.0.3.
- Extra tools: browser: Firefox 79.0a1 or Safari 13.1.1
- Sphinx extensions:  

```
extensions = [
    "sphinx.ext.autodoc",
    "sphinx.ext.todo",
    "sphinx.ext.coverage",
    "sphinx.ext.extlinks",
    "sphinx.ext.intersphinx",
    "sphinx.ext.mathjax",
    "sphinx.ext.viewcode",
    "sphinx.ext.napoleon",
    "nbsphinx",
    "sphinx.ext.mathjax",
    "sphinxcontrib.bibtex",
    "sphinx.ext.doctest",
]
```



Patch information:
diff --git a/doc/usage/extensions/napoleon.rst b/doc/usage/extensions/napoleon.rst
index b16577e2d..fa2c9dc49 100644
--- a/doc/usage/extensions/napoleon.rst
+++ b/doc/usage/extensions/napoleon.rst
@@ -445,6 +445,22 @@ sure that "sphinx.ext.napoleon" is enabled in `conf.py`::
                     * **arg2** (*int, optional*) --
                       Description of `arg2`, defaults to 0
 
+   When using NumPy style with multiple parameter names on one line, napoleon will split them into separate parameter entries when ``napoleon_use_param`` is True, preserving the shared type and qualifiers.
+
+   For example, this NumPy style snippet::
+
+       Parameters
+       ----------
+       x1, x2 : array_like, optional
+           Description of `x1`, `x2`.
+
+   will be converted as follows when ``napoleon_use_param`` is True::
+
+       :param x1: Description of `x1`, `x2`
+       :type x1: :class:`array_like`, *optional*
+       :param x2: Description of `x1`, `x2`
+       :type x2: :class:`array_like`, *optional*
+
 .. confval:: napoleon_use_keyword
 
    True to use a ``:keyword:`` role for each function keyword argument.
diff --git a/sphinx/ext/napoleon/docstring.py b/sphinx/ext/napoleon/docstring.py
index b3daa06f1..70e8f2bd3 100644
--- a/sphinx/ext/napoleon/docstring.py
+++ b/sphinx/ext/napoleon/docstring.py
@@ -391,16 +391,19 @@ class GoogleDocstring:
                                 ) -> List[str]:
         lines = []
         for _name, _type, _desc in fields:
-            _desc = self._strip_empty(_desc)
-            if any(_desc):
-                _desc = self._fix_field_desc(_desc)
-                field = ':%s %s: ' % (field_role, _name)
-                lines.extend(self._format_block(field, _desc))
-            else:
-                lines.append(':%s %s:' % (field_role, _name))
+            # Support multiple parameter names on a single line (e.g. "x1, x2")
+            names = [n.strip() for n in _name.split(',')] if _name and ',' in _name else [_name]
+            for name in names:
+                desc_lines = self._strip_empty(_desc)
+                if any(desc_lines):
+                    desc_lines = self._fix_field_desc(desc_lines)
+                    field = ':%s %s: ' % (field_role, name)
+                    lines.extend(self._format_block(field, desc_lines))
+                else:
+                    lines.append(':%s %s:' % (field_role, name))
 
-            if _type:
-                lines.append(':%s %s: %s' % (type_role, _name, _type))
+                if _type:
+                    lines.append(':%s %s: %s' % (type_role, name, _type))
         return lines + ['']
 
     def _format_field(self, _name: str, _type: str, _desc: List[str]) -> List[str]:
@@ -1082,8 +1085,9 @@ class NumpyDocstring(GoogleDocstring):
     def _escape_args_and_kwargs(self, name: str) -> str:
         func = super()._escape_args_and_kwargs
 
-        if ", " in name:
-            return ", ".join(func(param) for param in name.split(", "))
+        if "," in name:
+            parts = [p.strip() for p in name.split(",")]
+            return ", ".join(func(param) for param in parts)
         else:
             return func(name)
 


OBJECTIVE: Find 3 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 3 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 3 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of `tests/test_ext_napoleon_docstring.py`.
Extra Requirements: 
Purpose: I need the content of this test file to find three relevant existing test cases that demonstrate functionality similar to the one described in the bug report.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: tests/test_ext_napoleon_docstring.py
Line number range: 1 - 2252
Content:
1. """
2.     test_napoleon_docstring
3.     ~~~~~~~~~~~~~~~~~~~~~~~
4. 
5.     Tests for :mod:`sphinx.ext.napoleon.docstring` module.
6. 
7. 
8.     :copyright: Copyright 2007-2020 by the Sphinx team, see AUTHORS.
9.     :license: BSD, see LICENSE for details.
10. """
11. 
12. import re
13. from collections import namedtuple
14. from contextlib import contextmanager
15. from inspect import cleandoc
16. from textwrap import dedent
17. from unittest import TestCase, mock
18. 
19. import pytest
20. 
21. from sphinx.ext.napoleon import Config
22. from sphinx.ext.napoleon.docstring import GoogleDocstring, NumpyDocstring
23. from sphinx.ext.napoleon.docstring import (
24.     _tokenize_type_spec,
25.     _recombine_set_tokens,
26.     _convert_numpy_type_spec,
27.     _token_type
28. )
29. 
30. 
31. class NamedtupleSubclass(namedtuple('NamedtupleSubclass', ('attr1', 'attr2'))):
32.     """Sample namedtuple subclass
33. 
34.     Attributes
35.     ----------
36.     attr1 : Arbitrary type
37.         Quick description of attr1
38.     attr2 : Another arbitrary type
39.         Quick description of attr2
40.     attr3 : Type
41. 
42.         Adds a newline after the type
43. 
44.     """
45.     # To avoid creating a dict, as a namedtuple doesn't have it:
46.     __slots__ = ()
47. 
48.     def __new__(cls, attr1, attr2=None):
49.         return super().__new__(cls, attr1, attr2)
50. 
51. 
52. class BaseDocstringTest(TestCase):
53.     pass
54. 
55. 
56. class NamedtupleSubclassTest(BaseDocstringTest):
57.     def test_attributes_docstring(self):
58.         config = Config()
59.         actual = str(NumpyDocstring(cleandoc(NamedtupleSubclass.__doc__),
60.                      config=config, app=None, what='class',
61.                      name='NamedtupleSubclass', obj=NamedtupleSubclass))
62.         expected = """\
63. Sample namedtuple subclass
64. 
65. .. attribute:: attr1
66. 
67.    Quick description of attr1
68. 
69.    :type: :class:`Arbitrary type`
70. 
71. .. attribute:: attr2
72. 
73.    Quick description of attr2
74. 
75.    :type: :class:`Another arbitrary type`
76. 
77. .. attribute:: attr3
78. 
79.    Adds a newline after the type
80. 
81.    :type: :class:`Type`
82. """
83. 
84.         self.assertEqual(expected, actual)
85. 
86. 
87. class InlineAttributeTest(BaseDocstringTest):
88. 
89.     def test_class_data_member(self):
90.         config = Config()
91.         docstring = dedent("""\
92.         data member description:
93. 
94.         - a: b
95.         """)
96.         actual = str(GoogleDocstring(docstring, config=config, app=None,
97.                      what='attribute', name='some_data', obj=0))
98.         expected = dedent("""\
99.         data member description:
100. 
101.         - a: b""")
102. 
103.         self.assertEqual(expected, actual)
104. 
105.     def test_class_data_member_inline(self):
106.         config = Config()
107.         docstring = """b: data member description with :ref:`reference`"""
108.         actual = str(GoogleDocstring(docstring, config=config, app=None,
109.                      what='attribute', name='some_data', obj=0))
110.         expected = dedent("""\
111.         data member description with :ref:`reference`
112. 
113.         :type: b""")
114.         self.assertEqual(expected, actual)
115. 
116.     def test_class_data_member_inline_no_type(self):
117.         config = Config()
118.         docstring = """data with ``a : in code`` and :ref:`reference` and no type"""
119.         actual = str(GoogleDocstring(docstring, config=config, app=None,
120.                      what='attribute', name='some_data', obj=0))
121.         expected = """data with ``a : in code`` and :ref:`reference` and no type"""
122. 
123.         self.assertEqual(expected, actual)
124. 
125.     def test_class_data_member_inline_ref_in_type(self):
126.         config = Config()
127.         docstring = """:class:`int`: data member description"""
128.         actual = str(GoogleDocstring(docstring, config=config, app=None,
129.                      what='attribute', name='some_data', obj=0))
130.         expected = dedent("""\
131.         data member description
132. 
133.         :type: :class:`int`""")
134.         self.assertEqual(expected, actual)
135. 
136. 
137. class GoogleDocstringTest(BaseDocstringTest):
138.     docstrings = [(
139.         """Single line summary""",
140.         """Single line summary"""
141.     ), (
142.         """
143.         Single line summary
144. 
145.         Extended description
146. 
147.         """,
148.         """
149.         Single line summary
150. 
151.         Extended description
152.         """
153.     ), (
154.         """
155.         Single line summary
156. 
157.         Args:
158.           arg1(str):Extended
159.             description of arg1
160.         """,
161.         """
162.         Single line summary
163. 
164.         :Parameters: **arg1** (*str*) -- Extended
165.                      description of arg1
166.         """
167.     ), (
168.         """
169.         Single line summary
170. 
171.         Args:
172.           arg1(str):Extended
173.             description of arg1
174.           arg2 ( int ) : Extended
175.             description of arg2
176. 
177.         Keyword Args:
178.           kwarg1(str):Extended
179.             description of kwarg1
180.           kwarg2 ( int ) : Extended
181.             description of kwarg2""",
182.         """
183.         Single line summary
184. 
185.         :Parameters: * **arg1** (*str*) -- Extended
186.                        description of arg1
187.                      * **arg2** (*int*) -- Extended
188.                        description of arg2
189. 
190.         :Keyword Arguments: * **kwarg1** (*str*) -- Extended
191.                               description of kwarg1
192.                             * **kwarg2** (*int*) -- Extended
193.                               description of kwarg2
194.         """
195.     ), (
196.         """
197.         Single line summary
198. 
199.         Arguments:
200.           arg1(str):Extended
201.             description of arg1
202.           arg2 ( int ) : Extended
203.             description of arg2
204. 
205.         Keyword Arguments:
206.           kwarg1(str):Extended
207.             description of kwarg1
208.           kwarg2 ( int ) : Extended
209.             description of kwarg2""",
210.         """
211.         Single line summary
212. 
213.         :Parameters: * **arg1** (*str*) -- Extended
214.                        description of arg1
215.                      * **arg2** (*int*) -- Extended
216.                        description of arg2
217. 
218.         :Keyword Arguments: * **kwarg1** (*str*) -- Extended
219.                               description of kwarg1
220.                             * **kwarg2** (*int*) -- Extended
221.                               description of kwarg2
222.         """
223.     ), (
224.         """
225.         Single line summary
226. 
227.         Return:
228.           str:Extended
229.           description of return value
230.         """,
231.         """
232.         Single line summary
233. 
234.         :returns: *str* -- Extended
235.                   description of return value
236.         """
237.     ), (
238.         """
239.         Single line summary
240. 
241.         Returns:
242.           str:Extended
243.           description of return value
244.         """,
245.         """
246.         Single line summary
247. 
248.         :returns: *str* -- Extended
249.                   description of return value
250.         """
251.     ), (
252.         """
253.         Single line summary
254. 
255.         Returns:
256.           Extended
257.           description of return value
258.         """,
259.         """
260.         Single line summary
261. 
262.         :returns: Extended
263.                   description of return value
264.         """
265.     ), (
266.         """
267.         Single line summary
268. 
269.         Args:
270.           arg1(str):Extended
271.             description of arg1
272.           *args: Variable length argument list.
273.           **kwargs: Arbitrary keyword arguments.
274.         """,
275.         """
276.         Single line summary
277. 
278.         :Parameters: * **arg1** (*str*) -- Extended
279.                        description of arg1
280.                      * **\\*args** -- Variable length argument list.
281.                      * **\\*\\*kwargs** -- Arbitrary keyword arguments.
282.         """
283.     ), (
284.         """
285.         Single line summary
286. 
287.         Args:
288.           arg1 (list(int)): Description
289.           arg2 (list[int]): Description
290.           arg3 (dict(str, int)): Description
291.           arg4 (dict[str, int]): Description
292.         """,
293.         """
294.         Single line summary
295. 
296.         :Parameters: * **arg1** (*list(int)*) -- Description
297.                      * **arg2** (*list[int]*) -- Description
298.                      * **arg3** (*dict(str, int)*) -- Description
299.                      * **arg4** (*dict[str, int]*) -- Description
300.         """
301.     ), (
302.         """
303.         Single line summary
304. 
305.         Yield:
306.           str:Extended
307.           description of yielded value
308.         """,
309.         """
310.         Single line summary
311. 
312.         :Yields: *str* -- Extended
313.                  description of yielded value
314.         """
315.     ), (
316.         """
317.         Single line summary
318. 
319.         Yields:
320.           Extended
321.           description of yielded value
322.         """,
323.         """
324.         Single line summary
325. 
326.         :Yields: Extended
327.                  description of yielded value
328.         """
329.     )]
330. 
331.     def test_sphinx_admonitions(self):
332.         admonition_map = {
333.             'Attention': 'attention',
334.             'Caution': 'caution',
335.             'Danger': 'danger',
336.             'Error': 'error',
337.             'Hint': 'hint',
338.             'Important': 'important',
339.             'Note': 'note',
340.             'Tip': 'tip',
341.             'Todo': 'todo',
342.             'Warning': 'warning',
343.             'Warnings': 'warning',
344.         }
345.         config = Config()
346.         for section, admonition in admonition_map.items():
347.             # Multiline
348.             actual = str(GoogleDocstring(("{}:\n"
349.                                           "    this is the first line\n"
350.                                           "\n"
351.                                           "    and this is the second line\n"
352.                                           ).format(section), config))
353.             expect = (".. {}::\n"
354.                       "\n"
355.                       "   this is the first line\n"
356.                       "   \n"
357.                       "   and this is the second line\n"
358.                       ).format(admonition)
359.             self.assertEqual(expect, actual)
360. 
361.             # Single line
362.             actual = str(GoogleDocstring(("{}:\n"
363.                                           "    this is a single line\n"
364.                                           ).format(section), config))
365.             expect = (".. {}:: this is a single line\n"
366.                       ).format(admonition)
367.             self.assertEqual(expect, actual)
368. 
369.     def test_docstrings(self):
370.         config = Config(
371.             napoleon_use_param=False,
372.             napoleon_use_rtype=False,
373.             napoleon_use_keyword=False
374.         )
375.         for docstring, expected in self.docstrings:
376.             actual = str(GoogleDocstring(dedent(docstring), config))
377.             expected = dedent(expected)
378.             self.assertEqual(expected, actual)
379. 
380.     def test_parameters_with_class_reference(self):
381.         docstring = """\
382. Construct a new XBlock.
383. 
384. This class should only be used by runtimes.
385. 
386. Arguments:
387.     runtime (:class:`~typing.Dict`\\[:class:`int`,:class:`str`\\]): Use it to
388.         access the environment. It is available in XBlock code
389.         as ``self.runtime``.
390. 
391.     field_data (:class:`FieldData`): Interface used by the XBlock
392.         fields to access their data from wherever it is persisted.
393. 
394.     scope_ids (:class:`ScopeIds`): Identifiers needed to resolve scopes.
395. 
396. """
397. 
398.         actual = str(GoogleDocstring(docstring))
399.         expected = """\
400. Construct a new XBlock.
401. 
402. This class should only be used by runtimes.
403. 
404. :param runtime: Use it to
405.                 access the environment. It is available in XBlock code
406.                 as ``self.runtime``.
407. :type runtime: :class:`~typing.Dict`\\[:class:`int`,:class:`str`\\]
408. :param field_data: Interface used by the XBlock
409.                    fields to access their data from wherever it is persisted.
410. :type field_data: :class:`FieldData`
411. :param scope_ids: Identifiers needed to resolve scopes.
412. :type scope_ids: :class:`ScopeIds`
413. """
414.         self.assertEqual(expected, actual)
415. 
416.     def test_attributes_with_class_reference(self):
417.         docstring = """\
418. Attributes:
419.     in_attr(:class:`numpy.ndarray`): super-dooper attribute
420. """
421. 
422.         actual = str(GoogleDocstring(docstring))
423.         expected = """\
424. .. attribute:: in_attr
425. 
426.    super-dooper attribute
427. 
428.    :type: :class:`numpy.ndarray`
429. """
430.         self.assertEqual(expected, actual)
431. 
432.         docstring = """\
433. Attributes:
434.     in_attr(numpy.ndarray): super-dooper attribute
435. """
436. 
437.         actual = str(GoogleDocstring(docstring))
438.         expected = """\
439. .. attribute:: in_attr
440. 
441.    super-dooper attribute
442. 
443.    :type: numpy.ndarray
444. """
445.         self.assertEqual(expected, actual)
446. 
447.     def test_code_block_in_returns_section(self):
448.         docstring = """
449. Returns:
450.     foobar: foo::
451. 
452.         codecode
453.         codecode
454. """
455.         expected = """
456. :returns:
457. 
458.           foo::
459. 
460.               codecode
461.               codecode
462. :rtype: foobar
463. """
464.         actual = str(GoogleDocstring(docstring))
465.         self.assertEqual(expected, actual)
466. 
467.     def test_colon_in_return_type(self):
468.         docstring = """Example property.
469. 
470. Returns:
471.     :py:class:`~.module.submodule.SomeClass`: an example instance
472.     if available, None if not available.
473. """
474.         expected = """Example property.
475. 
476. :returns: an example instance
477.           if available, None if not available.
478. :rtype: :py:class:`~.module.submodule.SomeClass`
479. """
480.         actual = str(GoogleDocstring(docstring))
481.         self.assertEqual(expected, actual)
482. 
483.     def test_xrefs_in_return_type(self):
484.         docstring = """Example Function
485. 
486. Returns:
487.     :class:`numpy.ndarray`: A :math:`n \\times 2` array containing
488.     a bunch of math items
489. """
490.         expected = """Example Function
491. 
492. :returns: A :math:`n \\times 2` array containing
493.           a bunch of math items
494. :rtype: :class:`numpy.ndarray`
495. """
496.         actual = str(GoogleDocstring(docstring))
497.         self.assertEqual(expected, actual)
498. 
499.     def test_raises_types(self):
500.         docstrings = [("""
501. Example Function
502. 
503. Raises:
504.     RuntimeError:
505.         A setting wasn't specified, or was invalid.
506.     ValueError:
507.         Something something value error.
508.     :py:class:`AttributeError`
509.         errors for missing attributes.
510.     ~InvalidDimensionsError
511.         If the dimensions couldn't be parsed.
512.     `InvalidArgumentsError`
513.         If the arguments are invalid.
514.     :exc:`~ValueError`
515.         If the arguments are wrong.
516. 
517. """, """
518. Example Function
519. 
520. :raises RuntimeError: A setting wasn't specified, or was invalid.
521. :raises ValueError: Something something value error.
522. :raises AttributeError: errors for missing attributes.
523. :raises ~InvalidDimensionsError: If the dimensions couldn't be parsed.
524. :raises InvalidArgumentsError: If the arguments are invalid.
525. :raises ~ValueError: If the arguments are wrong.
526. """),
527.                       ################################
528.                       ("""
529. Example Function
530. 
531. Raises:
532.     InvalidDimensionsError
533. 
534. """, """
535. Example Function
536. 
537. :raises InvalidDimensionsError:
538. """),
539.                       ################################
540.                       ("""
541. Example Function
542. 
543. Raises:
544.     Invalid Dimensions Error
545. 
546. """, """
547. Example Function
548. 
549. :raises Invalid Dimensions Error:
550. """),
551.                       ################################
552.                       ("""
553. Example Function
554. 
555. Raises:
556.     Invalid Dimensions Error: With description
557. 
558. """, """
559. Example Function
560. 
561. :raises Invalid Dimensions Error: With description
562. """),
563.                       ################################
564.                       ("""
565. Example Function
566. 
567. Raises:
568.     InvalidDimensionsError: If the dimensions couldn't be parsed.
569. 
570. """, """
571. Example Function
572. 
573. :raises InvalidDimensionsError: If the dimensions couldn't be parsed.
574. """),
575.                       ################################
576.                       ("""
577. Example Function
578. 
579. Raises:
580.     Invalid Dimensions Error: If the dimensions couldn't be parsed.
581. 
582. """, """
583. Example Function
584. 
585. :raises Invalid Dimensions Error: If the dimensions couldn't be parsed.
586. """),
587.                       ################################
588.                       ("""
589. Example Function
590. 
591. Raises:
592.     If the dimensions couldn't be parsed.
593. 
594. """, """
595. Example Function
596. 
597. :raises If the dimensions couldn't be parsed.:
598. """),
599.                       ################################
600.                       ("""
601. Example Function
602. 
603. Raises:
604.     :class:`exc.InvalidDimensionsError`
605. 
606. """, """
607. Example Function
608. 
609. :raises exc.InvalidDimensionsError:
610. """),
611.                       ################################
612.                       ("""
613. Example Function
614. 
615. Raises:
616.     :class:`exc.InvalidDimensionsError`: If the dimensions couldn't be parsed.
617. 
618. """, """
619. Example Function
620. 
621. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
622. """),
623.                       ################################
624.                       ("""
625. Example Function
626. 
627. Raises:
628.     :class:`exc.InvalidDimensionsError`: If the dimensions couldn't be parsed,
629.        then a :class:`exc.InvalidDimensionsError` will be raised.
630. 
631. """, """
632. Example Function
633. 
634. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed,
635.     then a :class:`exc.InvalidDimensionsError` will be raised.
636. """),
637.                       ################################
638.                       ("""
639. Example Function
640. 
641. Raises:
642.     :class:`exc.InvalidDimensionsError`: If the dimensions couldn't be parsed.
643.     :class:`exc.InvalidArgumentsError`: If the arguments are invalid.
644. 
645. """, """
646. Example Function
647. 
648. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
649. :raises exc.InvalidArgumentsError: If the arguments are invalid.
650. """),
651.                       ################################
652.                       ("""
653. Example Function
654. 
655. Raises:
656.     :class:`exc.InvalidDimensionsError`
657.     :class:`exc.InvalidArgumentsError`
658. 
659. """, """
660. Example Function
661. 
662. :raises exc.InvalidDimensionsError:
663. :raises exc.InvalidArgumentsError:
664. """)]
665.         for docstring, expected in docstrings:
666.             actual = str(GoogleDocstring(docstring))
667.             self.assertEqual(expected, actual)
668. 
669.     def test_kwargs_in_arguments(self):
670.         docstring = """Allows to create attributes binded to this device.
671. 
672. Some other paragraph.
673. 
674. Code sample for usage::
675. 
676.   dev.bind(loopback=Loopback)
677.   dev.loopback.configure()
678. 
679. Arguments:
680.   **kwargs: name/class pairs that will create resource-managers
681.     bound as instance attributes to this instance. See code
682.     example above.
683. """
684.         expected = """Allows to create attributes binded to this device.
685. 
686. Some other paragraph.
687. 
688. Code sample for usage::
689. 
690.   dev.bind(loopback=Loopback)
691.   dev.loopback.configure()
692. 
693. :param \\*\\*kwargs: name/class pairs that will create resource-managers
694.                    bound as instance attributes to this instance. See code
695.                    example above.
696. """
697.         actual = str(GoogleDocstring(docstring))
698.         self.assertEqual(expected, actual)
699. 
700.     def test_section_header_formatting(self):
701.         docstrings = [("""
702. Summary line
703. 
704. Example:
705.     Multiline reStructuredText
706.     literal code block
707. 
708. """, """
709. Summary line
710. 
711. .. rubric:: Example
712. 
713. Multiline reStructuredText
714. literal code block
715. """),
716.                       ################################
717.                       ("""
718. Summary line
719. 
720. Example::
721. 
722.     Multiline reStructuredText
723.     literal code block
724. 
725. """, """
726. Summary line
727. 
728. Example::
729. 
730.     Multiline reStructuredText
731.     literal code block
732. """),
733.                       ################################
734.                       ("""
735. Summary line
736. 
737. :Example:
738. 
739.     Multiline reStructuredText
740.     literal code block
741. 
742. """, """
743. Summary line
744. 
745. :Example:
746. 
747.     Multiline reStructuredText
748.     literal code block
749. """)]
750.         for docstring, expected in docstrings:
751.             actual = str(GoogleDocstring(docstring))
752.             self.assertEqual(expected, actual)
753. 
754.     def test_list_in_parameter_description(self):
755.         docstring = """One line summary.
756. 
757. Parameters:
758.     no_list (int):
759.     one_bullet_empty (int):
760.         *
761.     one_bullet_single_line (int):
762.         - first line
763.     one_bullet_two_lines (int):
764.         +   first line
765.             continued
766.     two_bullets_single_line (int):
767.         -  first line
768.         -  second line
769.     two_bullets_two_lines (int):
770.         * first line
771.           continued
772.         * second line
773.           continued
774.     one_enumeration_single_line (int):
775.         1.  first line
776.     one_enumeration_two_lines (int):
777.         1)   first line
778.              continued
779.     two_enumerations_one_line (int):
780.         (iii) first line
781.         (iv) second line
782.     two_enumerations_two_lines (int):
783.         a. first line
784.            continued
785.         b. second line
786.            continued
787.     one_definition_one_line (int):
788.         item 1
789.             first line
790.     one_definition_two_lines (int):
791.         item 1
792.             first line
793.             continued
794.     two_definitions_one_line (int):
795.         item 1
796.             first line
797.         item 2
798.             second line
799.     two_definitions_two_lines (int):
800.         item 1
801.             first line
802.             continued
803.         item 2
804.             second line
805.             continued
806.     one_definition_blank_line (int):
807.         item 1
808. 
809.             first line
810. 
811.             extra first line
812. 
813.     two_definitions_blank_lines (int):
814.         item 1
815. 
816.             first line
817. 
818.             extra first line
819. 
820.         item 2
821. 
822.             second line
823. 
824.             extra second line
825. 
826.     definition_after_inline_text (int): text line
827. 
828.         item 1
829.             first line
830. 
831.     definition_after_normal_text (int):
832.         text line
833. 
834.         item 1
835.             first line
836. """
837. 
838.         expected = """One line summary.
839. 
840. :param no_list:
841. :type no_list: int
842. :param one_bullet_empty:
843.                          *
844. :type one_bullet_empty: int
845. :param one_bullet_single_line:
846.                                - first line
847. :type one_bullet_single_line: int
848. :param one_bullet_two_lines:
849.                              +   first line
850.                                  continued
851. :type one_bullet_two_lines: int
852. :param two_bullets_single_line:
853.                                 -  first line
854.                                 -  second line
855. :type two_bullets_single_line: int
856. :param two_bullets_two_lines:
857.                               * first line
858.                                 continued
859.                               * second line
860.                                 continued
861. :type two_bullets_two_lines: int
862. :param one_enumeration_single_line:
863.                                     1.  first line
864. :type one_enumeration_single_line: int
865. :param one_enumeration_two_lines:
866.                                   1)   first line
867.                                        continued
868. :type one_enumeration_two_lines: int
869. :param two_enumerations_one_line:
870.                                   (iii) first line
871.                                   (iv) second line
872. :type two_enumerations_one_line: int
873. :param two_enumerations_two_lines:
874.                                    a. first line
875.                                       continued
876.                                    b. second line
877.                                       continued
878. :type two_enumerations_two_lines: int
879. :param one_definition_one_line:
880.                                 item 1
881.                                     first line
882. :type one_definition_one_line: int
883. :param one_definition_two_lines:
884.                                  item 1
885.                                      first line
886.                                      continued
887. :type one_definition_two_lines: int
888. :param two_definitions_one_line:
889.                                  item 1
890.                                      first line
891.                                  item 2
892.                                      second line
893. :type two_definitions_one_line: int
894. :param two_definitions_two_lines:
895.                                   item 1
896.                                       first line
897.                                       continued
898.                                   item 2
899.                                       second line
900.                                       continued
901. :type two_definitions_two_lines: int
902. :param one_definition_blank_line:
903.                                   item 1
904. 
905.                                       first line
906. 
907.                                       extra first line
908. :type one_definition_blank_line: int
909. :param two_definitions_blank_lines:
910.                                     item 1
911. 
912.                                         first line
913. 
914.                                         extra first line
915. 
916.                                     item 2
917. 
918.                                         second line
919. 
920.                                         extra second line
921. :type two_definitions_blank_lines: int
922. :param definition_after_inline_text: text line
923. 
924.                                      item 1
925.                                          first line
926. :type definition_after_inline_text: int
927. :param definition_after_normal_text: text line
928. 
929.                                      item 1
930.                                          first line
931. :type definition_after_normal_text: int
932. """
933.         config = Config(napoleon_use_param=True)
934.         actual = str(GoogleDocstring(docstring, config))
935.         self.assertEqual(expected, actual)
936. 
937.         expected = """One line summary.
938. 
939. :Parameters: * **no_list** (*int*)
940.              * **one_bullet_empty** (*int*) --
941. 
942.                *
943.              * **one_bullet_single_line** (*int*) --
944. 
945.                - first line
946.              * **one_bullet_two_lines** (*int*) --
947. 
948.                +   first line
949.                    continued
950.              * **two_bullets_single_line** (*int*) --
951. 
952.                -  first line
953.                -  second line
954.              * **two_bullets_two_lines** (*int*) --
955. 
956.                * first line
957.                  continued
958.                * second line
959.                  continued
960.              * **one_enumeration_single_line** (*int*) --
961. 
962.                1.  first line
963.              * **one_enumeration_two_lines** (*int*) --
964. 
965.                1)   first line
966.                     continued
967.              * **two_enumerations_one_line** (*int*) --
968. 
969.                (iii) first line
970.                (iv) second line
971.              * **two_enumerations_two_lines** (*int*) --
972. 
973.                a. first line
974.                   continued
975.                b. second line
976.                   continued
977.              * **one_definition_one_line** (*int*) --
978. 
979.                item 1
980.                    first line
981.              * **one_definition_two_lines** (*int*) --
982. 
983.                item 1
984.                    first line
985.                    continued
986.              * **two_definitions_one_line** (*int*) --
987. 
988.                item 1
989.                    first line
990.                item 2
991.                    second line
992.              * **two_definitions_two_lines** (*int*) --
993. 
994.                item 1
995.                    first line
996.                    continued
997.                item 2
998.                    second line
999.                    continued
1000.              * **one_definition_blank_line** (*int*) --
1001. 
1002.                item 1
1003. 
1004.                    first line
1005. 
1006.                    extra first line
1007.              * **two_definitions_blank_lines** (*int*) --
1008. 
1009.                item 1
1010. 
1011.                    first line
1012. 
1013.                    extra first line
1014. 
1015.                item 2
1016. 
1017.                    second line
1018. 
1019.                    extra second line
1020.              * **definition_after_inline_text** (*int*) -- text line
1021. 
1022.                item 1
1023.                    first line
1024.              * **definition_after_normal_text** (*int*) -- text line
1025. 
1026.                item 1
1027.                    first line
1028. """
1029.         config = Config(napoleon_use_param=False)
1030.         actual = str(GoogleDocstring(docstring, config))
1031.         self.assertEqual(expected, actual)
1032. 
1033.     def test_custom_generic_sections(self):
1034. 
1035.         docstrings = (("""\
1036. Really Important Details:
1037.     You should listen to me!
1038. """, """.. rubric:: Really Important Details
1039. 
1040. You should listen to me!
1041. """),
1042.                       ("""\
1043. Sooper Warning:
1044.     Stop hitting yourself!
1045. """, """:Warns: **Stop hitting yourself!**
1046. """))
1047. 
1048.         testConfig = Config(napoleon_custom_sections=['Really Important Details',
1049.                                                       ('Sooper Warning', 'warns')])
1050. 
1051.         for docstring, expected in docstrings:
1052.             actual = str(GoogleDocstring(docstring, testConfig))
1053.             self.assertEqual(expected, actual)
1054. 
1055.     def test_noindex(self):
1056.         docstring = """
1057. Attributes:
1058.     arg
1059.         description
1060. 
1061. Methods:
1062.     func(i, j)
1063.         description
1064. """
1065. 
1066.         expected = """
1067. .. attribute:: arg
1068.    :noindex:
1069. 
1070.    description
1071. 
1072. .. method:: func(i, j)
1073.    :noindex:
1074. 
1075.    
1076.    description
1077. """
1078.         config = Config()
1079.         actual = str(GoogleDocstring(docstring, config=config, app=None, what='module',
1080.                                      options={'noindex': True}))
1081.         self.assertEqual(expected, actual)
1082. 
1083.     def test_keywords_with_types(self):
1084.         docstring = """\
1085. Do as you please
1086. 
1087. Keyword Args:
1088.     gotham_is_yours (None): shall interfere.
1089. """
1090.         actual = str(GoogleDocstring(docstring))
1091.         expected = """\
1092. Do as you please
1093. 
1094. :keyword gotham_is_yours: shall interfere.
1095. :kwtype gotham_is_yours: None
1096. """
1097.         self.assertEqual(expected, actual)
1098. 
1099. 
1100. class NumpyDocstringTest(BaseDocstringTest):
1101.     docstrings = [(
1102.         """Single line summary""",
1103.         """Single line summary"""
1104.     ), (
1105.         """
1106.         Single line summary
1107. 
1108.         Extended description
1109. 
1110.         """,
1111.         """
1112.         Single line summary
1113. 
1114.         Extended description
1115.         """
1116.     ), (
1117.         """
1118.         Single line summary
1119. 
1120.         Parameters
1121.         ----------
1122.         arg1:str
1123.             Extended
1124.             description of arg1
1125.         """,
1126.         """
1127.         Single line summary
1128. 
1129.         :Parameters: **arg1** (:class:`str`) -- Extended
1130.                      description of arg1
1131.         """
1132.     ), (
1133.         """
1134.         Single line summary
1135. 
1136.         Parameters
1137.         ----------
1138.         arg1:str
1139.             Extended
1140.             description of arg1
1141.         arg2 : int
1142.             Extended
1143.             description of arg2
1144. 
1145.         Keyword Arguments
1146.         -----------------
1147.           kwarg1:str
1148.               Extended
1149.               description of kwarg1
1150.           kwarg2 : int
1151.               Extended
1152.               description of kwarg2
1153.         """,
1154.         """
1155.         Single line summary
1156. 
1157.         :Parameters: * **arg1** (:class:`str`) -- Extended
1158.                        description of arg1
1159.                      * **arg2** (:class:`int`) -- Extended
1160.                        description of arg2
1161. 
1162.         :Keyword Arguments: * **kwarg1** (:class:`str`) -- Extended
1163.                               description of kwarg1
1164.                             * **kwarg2** (:class:`int`) -- Extended
1165.                               description of kwarg2
1166.         """
1167.     ), (
1168.         """
1169.         Single line summary
1170. 
1171.         Return
1172.         ------
1173.         str
1174.             Extended
1175.             description of return value
1176.         """,
1177.         """
1178.         Single line summary
1179. 
1180.         :returns: *str* -- Extended
1181.                   description of return value
1182.         """
1183.     ), (
1184.         """
1185.         Single line summary
1186. 
1187.         Returns
1188.         -------
1189.         str
1190.             Extended
1191.             description of return value
1192.         """,
1193.         """
1194.         Single line summary
1195. 
1196.         :returns: *str* -- Extended
1197.                   description of return value
1198.         """
1199.     ), (
1200.         """
1201.         Single line summary
1202. 
1203.         Parameters
1204.         ----------
1205.         arg1:str
1206.              Extended description of arg1
1207.         *args:
1208.             Variable length argument list.
1209.         **kwargs:
1210.             Arbitrary keyword arguments.
1211.         """,
1212.         """
1213.         Single line summary
1214. 
1215.         :Parameters: * **arg1** (:class:`str`) -- Extended description of arg1
1216.                      * **\\*args** -- Variable length argument list.
1217.                      * **\\*\\*kwargs** -- Arbitrary keyword arguments.
1218.         """
1219.     ), (
1220.         """
1221.         Single line summary
1222. 
1223.         Parameters
1224.         ----------
1225.         arg1:str
1226.              Extended description of arg1
1227.         *args, **kwargs:
1228.             Variable length argument list and arbitrary keyword arguments.
1229.         """,
1230.         """
1231.         Single line summary
1232. 
1233.         :Parameters: * **arg1** (*str*) -- Extended description of arg1
1234.                      * **\\*args, \\*\\*kwargs** -- Variable length argument list and arbitrary keyword arguments.
1235.         """
1236.     ), (
1237.         """
1238.         Single line summary
1239. 
1240.         Yield
1241.         -----
1242.         str
1243.             Extended
1244.             description of yielded value
1245.         """,
1246.         """
1247.         Single line summary
1248. 
1249.         :Yields: *str* -- Extended
1250.                  description of yielded value
1251.         """
1252.     ), (
1253.         """
1254.         Single line summary
1255. 
1256.         Yields
1257.         ------
1258.         str
1259.             Extended
1260.             description of yielded value
1261.         """,
1262.         """
1263.         Single line summary
1264. 
1265.         :Yields: *str* -- Extended
1266.                  description of yielded value
1267.         """
1268.     )]
1269. 
1270.     def test_sphinx_admonitions(self):
1271.         admonition_map = {
1272.             'Attention': 'attention',
1273.             'Caution': 'caution',
1274.             'Danger': 'danger',
1275.             'Error': 'error',
1276.             'Hint': 'hint',
1277.             'Important': 'important',
1278.             'Note': 'note',
1279.             'Tip': 'tip',
1280.             'Todo': 'todo',
1281.             'Warning': 'warning',
1282.             'Warnings': 'warning',
1283.         }
1284.         config = Config()
1285.         for section, admonition in admonition_map.items():
1286.             # Multiline
1287.             actual = str(NumpyDocstring(("{}\n"
1288.                                          "{}\n"
1289.                                          "    this is the first line\n"
1290.                                          "\n"
1291.                                          "    and this is the second line\n"
1292.                                          ).format(section, '-' * len(section)), config))
1293.             expect = (".. {}::\n"
1294.                       "\n"
1295.                       "   this is the first line\n"
1296.                       "   \n"
1297.                       "   and this is the second line\n"
1298.                       ).format(admonition)
1299.             self.assertEqual(expect, actual)
1300. 
1301.             # Single line
1302.             actual = str(NumpyDocstring(("{}\n"
1303.                                          "{}\n"
1304.                                          "    this is a single line\n"
1305.                                          ).format(section, '-' * len(section)), config))
1306.             expect = (".. {}:: this is a single line\n"
1307.                       ).format(admonition)
1308.             self.assertEqual(expect, actual)
1309. 
1310.     def test_docstrings(self):
1311.         config = Config(
1312.             napoleon_use_param=False,
1313.             napoleon_use_rtype=False,
1314.             napoleon_use_keyword=False)
1315.         for docstring, expected in self.docstrings:
1316.             actual = str(NumpyDocstring(dedent(docstring), config))
1317.             expected = dedent(expected)
1318.             self.assertEqual(expected, actual)
1319. 
1320.     def test_parameters_with_class_reference(self):
1321.         docstring = """\
1322. Parameters
1323. ----------
1324. param1 : :class:`MyClass <name.space.MyClass>` instance
1325. 
1326. """
1327. 
1328.         config = Config(napoleon_use_param=False)
1329.         actual = str(NumpyDocstring(docstring, config))
1330.         expected = """\
1331. :Parameters: **param1** (:class:`MyClass <name.space.MyClass>` instance)
1332. """
1333.         self.assertEqual(expected, actual)
1334. 
1335.         config = Config(napoleon_use_param=True)
1336.         actual = str(NumpyDocstring(docstring, config))
1337.         expected = """\
1338. :param param1:
1339. :type param1: :class:`MyClass <name.space.MyClass>` instance
1340. """
1341.         self.assertEqual(expected, actual)
1342. 
1343.     def test_parameters_without_class_reference(self):
1344.         docstring = """\
1345. Parameters
1346. ----------
1347. param1 : MyClass instance
1348. 
1349. """
1350. 
1351.         config = Config(napoleon_use_param=False)
1352.         actual = str(NumpyDocstring(docstring, config))
1353.         expected = """\
1354. :Parameters: **param1** (:class:`MyClass instance`)
1355. """
1356.         self.assertEqual(expected, actual)
1357. 
1358.         config = Config(napoleon_use_param=True)
1359.         actual = str(NumpyDocstring(dedent(docstring), config))
1360.         expected = """\
1361. :param param1:
1362. :type param1: :class:`MyClass instance`
1363. """
1364.         self.assertEqual(expected, actual)
1365. 
1366.     def test_see_also_refs(self):
1367.         docstring = """\
1368. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1369. 
1370. See Also
1371. --------
1372. some, other, funcs
1373. otherfunc : relationship
1374. 
1375. """
1376. 
1377.         actual = str(NumpyDocstring(docstring))
1378. 
1379.         expected = """\
1380. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1381. 
1382. .. seealso::
1383. 
1384.    :obj:`some`, :obj:`other`, :obj:`funcs`
1385.    \n\
1386.    :obj:`otherfunc`
1387.        relationship
1388. """
1389.         self.assertEqual(expected, actual)
1390. 
1391.         docstring = """\
1392. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1393. 
1394. See Also
1395. --------
1396. some, other, funcs
1397. otherfunc : relationship
1398. 
1399. """
1400. 
1401.         config = Config()
1402.         app = mock.Mock()
1403.         actual = str(NumpyDocstring(docstring, config, app, "method"))
1404. 
1405.         expected = """\
1406. numpy.multivariate_normal(mean, cov, shape=None, spam=None)
1407. 
1408. .. seealso::
1409. 
1410.    :meth:`some`, :meth:`other`, :meth:`funcs`
1411.    \n\
1412.    :meth:`otherfunc`
1413.        relationship
1414. """
1415.         self.assertEqual(expected, actual)
1416. 
1417.     def test_colon_in_return_type(self):
1418.         docstring = """
1419. Summary
1420. 
1421. Returns
1422. -------
1423. :py:class:`~my_mod.my_class`
1424.     an instance of :py:class:`~my_mod.my_class`
1425. """
1426. 
1427.         expected = """
1428. Summary
1429. 
1430. :returns: an instance of :py:class:`~my_mod.my_class`
1431. :rtype: :py:class:`~my_mod.my_class`
1432. """
1433. 
1434.         config = Config()
1435.         app = mock.Mock()
1436.         actual = str(NumpyDocstring(docstring, config, app, "method"))
1437. 
1438.         self.assertEqual(expected, actual)
1439. 
1440.     def test_underscore_in_attribute(self):
1441.         docstring = """
1442. Attributes
1443. ----------
1444. 
1445. arg_ : type
1446.     some description
1447. """
1448. 
1449.         expected = """
1450. :ivar arg_: some description
1451. :vartype arg_: :class:`type`
1452. """
1453. 
1454.         config = Config(napoleon_use_ivar=True)
1455.         app = mock.Mock()
1456.         actual = str(NumpyDocstring(docstring, config, app, "class"))
1457. 
1458.         self.assertEqual(expected, actual)
1459. 
1460.     def test_underscore_in_attribute_strip_signature_backslash(self):
1461.         docstring = """
1462. Attributes
1463. ----------
1464. 
1465. arg_ : type
1466.     some description
1467. """
1468. 
1469.         expected = """
1470. :ivar arg\\_: some description
1471. :vartype arg\\_: :class:`type`
1472. """
1473. 
1474.         config = Config(napoleon_use_ivar=True)
1475.         config.strip_signature_backslash = True
1476.         app = mock.Mock()
1477.         actual = str(NumpyDocstring(docstring, config, app, "class"))
1478. 
1479.         self.assertEqual(expected, actual)
1480. 
1481.     def test_raises_types(self):
1482.         docstrings = [("""
1483. Example Function
1484. 
1485. Raises
1486. ------
1487.   RuntimeError
1488. 
1489.       A setting wasn't specified, or was invalid.
1490.   ValueError
1491. 
1492.       Something something value error.
1493. 
1494. """, """
1495. Example Function
1496. 
1497. :raises RuntimeError: A setting wasn't specified, or was invalid.
1498. :raises ValueError: Something something value error.
1499. """),
1500.                       ################################
1501.                       ("""
1502. Example Function
1503. 
1504. Raises
1505. ------
1506. InvalidDimensionsError
1507. 
1508. """, """
1509. Example Function
1510. 
1511. :raises InvalidDimensionsError:
1512. """),
1513.                       ################################
1514.                       ("""
1515. Example Function
1516. 
1517. Raises
1518. ------
1519. Invalid Dimensions Error
1520. 
1521. """, """
1522. Example Function
1523. 
1524. :raises Invalid Dimensions Error:
1525. """),
1526.                       ################################
1527.                       ("""
1528. Example Function
1529. 
1530. Raises
1531. ------
1532. Invalid Dimensions Error
1533.     With description
1534. 
1535. """, """
1536. Example Function
1537. 
1538. :raises Invalid Dimensions Error: With description
1539. """),
1540.                       ################################
1541.                       ("""
1542. Example Function
1543. 
1544. Raises
1545. ------
1546. InvalidDimensionsError
1547.     If the dimensions couldn't be parsed.
1548. 
1549. """, """
1550. Example Function
1551. 
1552. :raises InvalidDimensionsError: If the dimensions couldn't be parsed.
1553. """),
1554.                       ################################
1555.                       ("""
1556. Example Function
1557. 
1558. Raises
1559. ------
1560. Invalid Dimensions Error
1561.     If the dimensions couldn't be parsed.
1562. 
1563. """, """
1564. Example Function
1565. 
1566. :raises Invalid Dimensions Error: If the dimensions couldn't be parsed.
1567. """),
1568.                       ################################
1569.                       ("""
1570. Example Function
1571. 
1572. Raises
1573. ------
1574. If the dimensions couldn't be parsed.
1575. 
1576. """, """
1577. Example Function
1578. 
1579. :raises If the dimensions couldn't be parsed.:
1580. """),
1581.                       ################################
1582.                       ("""
1583. Example Function
1584. 
1585. Raises
1586. ------
1587. :class:`exc.InvalidDimensionsError`
1588. 
1589. """, """
1590. Example Function
1591. 
1592. :raises exc.InvalidDimensionsError:
1593. """),
1594.                       ################################
1595.                       ("""
1596. Example Function
1597. 
1598. Raises
1599. ------
1600. :class:`exc.InvalidDimensionsError`
1601.     If the dimensions couldn't be parsed.
1602. 
1603. """, """
1604. Example Function
1605. 
1606. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
1607. """),
1608.                       ################################
1609.                       ("""
1610. Example Function
1611. 
1612. Raises
1613. ------
1614. :class:`exc.InvalidDimensionsError`
1615.     If the dimensions couldn't be parsed,
1616.     then a :class:`exc.InvalidDimensionsError` will be raised.
1617. 
1618. """, """
1619. Example Function
1620. 
1621. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed,
1622.     then a :class:`exc.InvalidDimensionsError` will be raised.
1623. """),
1624.                       ################################
1625.                       ("""
1626. Example Function
1627. 
1628. Raises
1629. ------
1630. :class:`exc.InvalidDimensionsError`
1631.     If the dimensions couldn't be parsed.
1632. :class:`exc.InvalidArgumentsError`
1633.     If the arguments are invalid.
1634. 
1635. """, """
1636. Example Function
1637. 
1638. :raises exc.InvalidDimensionsError: If the dimensions couldn't be parsed.
1639. :raises exc.InvalidArgumentsError: If the arguments are invalid.
1640. """),
1641.                       ################################
1642.                       ("""
1643. Example Function
1644. 
1645. Raises
1646. ------
1647. :class:`exc.InvalidDimensionsError`
1648. :class:`exc.InvalidArgumentsError`
1649. 
1650. """, """
1651. Example Function
1652. 
1653. :raises exc.InvalidDimensionsError:
1654. :raises exc.InvalidArgumentsError:
1655. """)]
1656.         for docstring, expected in docstrings:
1657.             config = Config()
1658.             app = mock.Mock()
1659.             actual = str(NumpyDocstring(docstring, config, app, "method"))
1660.             self.assertEqual(expected, actual)
1661. 
1662.     def test_xrefs_in_return_type(self):
1663.         docstring = """
1664. Example Function
1665. 
1666. Returns
1667. -------
1668. :class:`numpy.ndarray`
1669.     A :math:`n \\times 2` array containing
1670.     a bunch of math items
1671. """
1672.         expected = """
1673. Example Function
1674. 
1675. :returns: A :math:`n \\times 2` array containing
1676.           a bunch of math items
1677. :rtype: :class:`numpy.ndarray`
1678. """
1679.         config = Config()
1680.         app = mock.Mock()
1681.         actual = str(NumpyDocstring(docstring, config, app, "method"))
1682.         self.assertEqual(expected, actual)
1683. 
1684.     def test_section_header_underline_length(self):
1685.         docstrings = [("""
1686. Summary line
1687. 
1688. Example
1689. -
1690. Multiline example
1691. body
1692. 
1693. """, """
1694. Summary line
1695. 
1696. Example
1697. -
1698. Multiline example
1699. body
1700. """),
1701.                       ################################
1702.                       ("""
1703. Summary line
1704. 
1705. Example
1706. --
1707. Multiline example
1708. body
1709. 
1710. """, """
1711. Summary line
1712. 
1713. .. rubric:: Example
1714. 
1715. Multiline example
1716. body
1717. """),
1718.                       ################################
1719.                       ("""
1720. Summary line
1721. 
1722. Example
1723. -------
1724. Multiline example
1725. body
1726. 
1727. """, """
1728. Summary line
1729. 
1730. .. rubric:: Example
1731. 
1732. Multiline example
1733. body
1734. """),
1735.                       ################################
1736.                       ("""
1737. Summary line
1738. 
1739. Example
1740. ------------
1741. Multiline example
1742. body
1743. 
1744. """, """
1745. Summary line
1746. 
1747. .. rubric:: Example
1748. 
1749. Multiline example
1750. body
1751. """)]
1752.         for docstring, expected in docstrings:
1753.             actual = str(NumpyDocstring(docstring))
1754.             self.assertEqual(expected, actual)
1755. 
1756.     def test_list_in_parameter_description(self):
1757.         docstring = """One line summary.
1758. 
1759. Parameters
1760. ----------
1761. no_list : int
1762. one_bullet_empty : int
1763.     *
1764. one_bullet_single_line : int
1765.     - first line
1766. one_bullet_two_lines : int
1767.     +   first line
1768.         continued
1769. two_bullets_single_line : int
1770.     -  first line
1771.     -  second line
1772. two_bullets_two_lines : int
1773.     * first line
1774.       continued
1775.     * second line
1776.       continued
1777. one_enumeration_single_line : int
1778.     1.  first line
1779. one_enumeration_two_lines : int
1780.     1)   first line
1781.          continued
1782. two_enumerations_one_line : int
1783.     (iii) first line
1784.     (iv) second line
1785. two_enumerations_two_lines : int
1786.     a. first line
1787.        continued
1788.     b. second line
1789.        continued
1790. one_definition_one_line : int
1791.     item 1
1792.         first line
1793. one_definition_two_lines : int
1794.     item 1
1795.         first line
1796.         continued
1797. two_definitions_one_line : int
1798.     item 1
1799.         first line
1800.     item 2
1801.         second line
1802. two_definitions_two_lines : int
1803.     item 1
1804.         first line
1805.         continued
1806.     item 2
1807.         second line
1808.         continued
1809. one_definition_blank_line : int
1810.     item 1
1811. 
1812.         first line
1813. 
1814.         extra first line
1815. 
1816. two_definitions_blank_lines : int
1817.     item 1
1818. 
1819.         first line
1820. 
1821.         extra first line
1822. 
1823.     item 2
1824. 
1825.         second line
1826. 
1827.         extra second line
1828. 
1829. definition_after_normal_text : int
1830.     text line
1831. 
1832.     item 1
1833.         first line
1834. """
1835. 
1836.         expected = """One line summary.
1837. 
1838. :param no_list:
1839. :type no_list: :class:`int`
1840. :param one_bullet_empty:
1841.                          *
1842. :type one_bullet_empty: :class:`int`
1843. :param one_bullet_single_line:
1844.                                - first line
1845. :type one_bullet_single_line: :class:`int`
1846. :param one_bullet_two_lines:
1847.                              +   first line
1848.                                  continued
1849. :type one_bullet_two_lines: :class:`int`
1850. :param two_bullets_single_line:
1851.                                 -  first line
1852.                                 -  second line
1853. :type two_bullets_single_line: :class:`int`
1854. :param two_bullets_two_lines:
1855.                               * first line
1856.                                 continued
1857.                               * second line
1858.                                 continued
1859. :type two_bullets_two_lines: :class:`int`
1860. :param one_enumeration_single_line:
1861.                                     1.  first line
1862. :type one_enumeration_single_line: :class:`int`
1863. :param one_enumeration_two_lines:
1864.                                   1)   first line
1865.                                        continued
1866. :type one_enumeration_two_lines: :class:`int`
1867. :param two_enumerations_one_line:
1868.                                   (iii) first line
1869.                                   (iv) second line
1870. :type two_enumerations_one_line: :class:`int`
1871. :param two_enumerations_two_lines:
1872.                                    a. first line
1873.                                       continued
1874.                                    b. second line
1875.                                       continued
1876. :type two_enumerations_two_lines: :class:`int`
1877. :param one_definition_one_line:
1878.                                 item 1
1879.                                     first line
1880. :type one_definition_one_line: :class:`int`
1881. :param one_definition_two_lines:
1882.                                  item 1
1883.                                      first line
1884.                                      continued
1885. :type one_definition_two_lines: :class:`int`
1886. :param two_definitions_one_line:
1887.                                  item 1
1888.                                      first line
1889.                                  item 2
1890.                                      second line
1891. :type two_definitions_one_line: :class:`int`
1892. :param two_definitions_two_lines:
1893.                                   item 1
1894.                                       first line
1895.                                       continued
1896.                                   item 2
1897.                                       second line
1898.                                       continued
1899. :type two_definitions_two_lines: :class:`int`
1900. :param one_definition_blank_line:
1901.                                   item 1
1902. 
1903.                                       first line
1904. 
1905.                                       extra first line
1906. :type one_definition_blank_line: :class:`int`
1907. :param two_definitions_blank_lines:
1908.                                     item 1
1909. 
1910.                                         first line
1911. 
1912.                                         extra first line
1913. 
1914.                                     item 2
1915. 
1916.                                         second line
1917. 
1918.                                         extra second line
1919. :type two_definitions_blank_lines: :class:`int`
1920. :param definition_after_normal_text: text line
1921. 
1922.                                      item 1
1923.                                          first line
1924. :type definition_after_normal_text: :class:`int`
1925. """
1926.         config = Config(napoleon_use_param=True)
1927.         actual = str(NumpyDocstring(docstring, config))
1928.         self.assertEqual(expected, actual)
1929. 
1930.         expected = """One line summary.
1931. 
1932. :Parameters: * **no_list** (:class:`int`)
1933.              * **one_bullet_empty** (:class:`int`) --
1934. 
1935.                *
1936.              * **one_bullet_single_line** (:class:`int`) --
1937. 
1938.                - first line
1939.              * **one_bullet_two_lines** (:class:`int`) --
1940. 
1941.                +   first line
1942.                    continued
1943.              * **two_bullets_single_line** (:class:`int`) --
1944. 
1945.                -  first line
1946.                -  second line
1947.              * **two_bullets_two_lines** (:class:`int`) --
1948. 
1949.                * first line
1950.                  continued
1951.                * second line
1952.                  continued
1953.              * **one_enumeration_single_line** (:class:`int`) --
1954. 
1955.                1.  first line
1956.              * **one_enumeration_two_lines** (:class:`int`) --
1957. 
1958.                1)   first line
1959.                     continued
1960.              * **two_enumerations_one_line** (:class:`int`) --
1961. 
1962.                (iii) first line
1963.                (iv) second line
1964.              * **two_enumerations_two_lines** (:class:`int`) --
1965. 
1966.                a. first line
1967.                   continued
1968.                b. second line
1969.                   continued
1970.              * **one_definition_one_line** (:class:`int`) --
1971. 
1972.                item 1
1973.                    first line
1974.              * **one_definition_two_lines** (:class:`int`) --
1975. 
1976.                item 1
1977.                    first line
1978.                    continued
1979.              * **two_definitions_one_line** (:class:`int`) --
1980. 
1981.                item 1
1982.                    first line
1983.                item 2
1984.                    second line
1985.              * **two_definitions_two_lines** (:class:`int`) --
1986. 
1987.                item 1
1988.                    first line
1989.                    continued
1990.                item 2
1991.                    second line
1992.                    continued
1993.              * **one_definition_blank_line** (:class:`int`) --
1994. 
1995.                item 1
1996. 
1997.                    first line
1998. 
1999.                    extra first line
2000.              * **two_definitions_blank_lines** (:class:`int`) --
2001. 
2002.                item 1
2003. 
2004.                    first line
2005. 
2006.                    extra first line
2007. 
2008.                item 2
2009. 
2010.                    second line
2011. 
2012.                    extra second line
2013.              * **definition_after_normal_text** (:class:`int`) -- text line
2014. 
2015.                item 1
2016.                    first line
2017. """
2018.         config = Config(napoleon_use_param=False)
2019.         actual = str(NumpyDocstring(docstring, config))
2020.         self.assertEqual(expected, actual)
2021. 
2022.     def test_token_type(self):
2023.         tokens = (
2024.             ("1", "literal"),
2025.             ("-4.6", "literal"),
2026.             ("2j", "literal"),
2027.             ("'string'", "literal"),
2028.             ('"another_string"', "literal"),
2029.             ("{1, 2}", "literal"),
2030.             ("{'va{ue', 'set'}", "literal"),
2031.             ("optional", "control"),
2032.             ("default", "control"),
2033.             (", ", "delimiter"),
2034.             (" of ", "delimiter"),
2035.             (" or ", "delimiter"),
2036.             (": ", "delimiter"),
2037.             ("True", "obj"),
2038.             ("None", "obj"),
2039.             ("name", "obj"),
2040.             (":py:class:`Enum`", "reference"),
2041.         )
2042. 
2043.         for token, expected in tokens:
2044.             actual = _token_type(token)
2045.             self.assertEqual(expected, actual)
2046. 
2047.     def test_tokenize_type_spec(self):
2048.         specs = (
2049.             "str",
2050.             "defaultdict",
2051.             "int, float, or complex",
2052.             "int or float or None, optional",
2053.             '{"F", "C", "N"}',
2054.             "{'F', 'C', 'N'}, default: 'F'",
2055.             "{'F', 'C', 'N or C'}, default 'F'",
2056.             "str, default: 'F or C'",
2057.             "int, default: None",
2058.             "int, default None",
2059.             "int, default :obj:`None`",
2060.             '"ma{icious"',
2061.             r"'with \'quotes\''",
2062.         )
2063. 
2064.         tokens = (
2065.             ["str"],
2066.             ["defaultdict"],
2067.             ["int", ", ", "float", ", or ", "complex"],
2068.             ["int", " or ", "float", " or ", "None", ", ", "optional"],
2069.             ["{", '"F"', ", ", '"C"', ", ", '"N"', "}"],
2070.             ["{", "'F'", ", ", "'C'", ", ", "'N'", "}", ", ", "default", ": ", "'F'"],
2071.             ["{", "'F'", ", ", "'C'", ", ", "'N or C'", "}", ", ", "default", " ", "'F'"],
2072.             ["str", ", ", "default", ": ", "'F or C'"],
2073.             ["int", ", ", "default", ": ", "None"],
2074.             ["int", ", " , "default", " ", "None"],
2075.             ["int", ", ", "default", " ", ":obj:`None`"],
2076.             ['"ma{icious"'],
2077.             [r"'with \'quotes\''"],
2078.         )
2079. 
2080.         for spec, expected in zip(specs, tokens):
2081.             actual = _tokenize_type_spec(spec)
2082.             self.assertEqual(expected, actual)
2083. 
2084.     def test_recombine_set_tokens(self):
2085.         tokens = (
2086.             ["{", "1", ", ", "2", "}"],
2087.             ["{", '"F"', ", ", '"C"', ", ", '"N"', "}", ", ", "optional"],
2088.             ["{", "'F'", ", ", "'C'", ", ", "'N'", "}", ", ", "default", ": ", "None"],
2089.             ["{", "'F'", ", ", "'C'", ", ", "'N'", "}", ", ", "default", " ", "None"],
2090.         )
2091. 
2092.         combined_tokens = (
2093.             ["{1, 2}"],
2094.             ['{"F", "C", "N"}', ", ", "optional"],
2095.             ["{'F', 'C', 'N'}", ", ", "default", ": ", "None"],
2096.             ["{'F', 'C', 'N'}", ", ", "default", " ", "None"],
2097.         )
2098. 
2099.         for tokens_, expected in zip(tokens, combined_tokens):
2100.             actual = _recombine_set_tokens(tokens_)
2101.             self.assertEqual(expected, actual)
2102. 
2103.     def test_recombine_set_tokens_invalid(self):
2104.         tokens = (
2105.             ["{", "1", ", ", "2"],
2106.             ['"F"', ", ", '"C"', ", ", '"N"', "}", ", ", "optional"],
2107.             ["{", "1", ", ", "2", ", ", "default", ": ", "None"],
2108.         )
2109.         combined_tokens = (
2110.             ["{1, 2"],
2111.             ['"F"', ", ", '"C"', ", ", '"N"', "}", ", ", "optional"],
2112.             ["{1, 2", ", ", "default", ": ", "None"],
2113.         )
2114. 
2115.         for tokens_, expected in zip(tokens, combined_tokens):
2116.             actual = _recombine_set_tokens(tokens_)
2117.             self.assertEqual(expected, actual)
2118. 
2119.     def test_convert_numpy_type_spec(self):
2120.         translations = {
2121.             "DataFrame": "pandas.DataFrame",
2122.         }
2123. 
2124.         specs = (
2125.             "",
2126.             "optional",
2127.             "str, optional",
2128.             "int or float or None, default: None",
2129.             "int, default None",
2130.             '{"F", "C", "N"}',
2131.             "{'F', 'C', 'N'}, default: 'N'",
2132.             "{'F', 'C', 'N'}, default 'N'",
2133.             "DataFrame, optional",
2134.         )
2135. 
2136.         converted = (
2137.             "",
2138.             "*optional*",
2139.             ":class:`str`, *optional*",
2140.             ":class:`int` or :class:`float` or :obj:`None`, *default*: :obj:`None`",
2141.             ":class:`int`, *default* :obj:`None`",
2142.             '``{"F", "C", "N"}``',
2143.             "``{'F', 'C', 'N'}``, *default*: ``'N'``",
2144.             "``{'F', 'C', 'N'}``, *default* ``'N'``",
2145.             ":class:`pandas.DataFrame`, *optional*",
2146.         )
2147. 
2148.         for spec, expected in zip(specs, converted):
2149.             actual = _convert_numpy_type_spec(spec, translations=translations)
2150.             self.assertEqual(expected, actual)
2151. 
2152.     def test_parameter_types(self):
2153.         docstring = dedent("""\
2154.             Parameters
2155.             ----------
2156.             param1 : DataFrame
2157.                 the data to work on
2158.             param2 : int or float or None, optional
2159.                 a parameter with different types
2160.             param3 : dict-like, optional
2161.                 a optional mapping
2162.             param4 : int or float or None, optional
2163.                 a optional parameter with different types
2164.             param5 : {"F", "C", "N"}, optional
2165.                 a optional parameter with fixed values
2166.             param6 : int, default None
2167.                 different default format
2168.             param7 : mapping of hashable to str, optional
2169.                 a optional mapping
2170.             param8 : ... or Ellipsis
2171.                 ellipsis
2172.         """)
2173.         expected = dedent("""\
2174.             :param param1: the data to work on
2175.             :type param1: :class:`DataFrame`
2176.             :param param2: a parameter with different types
2177.             :type param2: :class:`int` or :class:`float` or :obj:`None`, *optional*
2178.             :param param3: a optional mapping
2179.             :type param3: :term:`dict-like <mapping>`, *optional*
2180.             :param param4: a optional parameter with different types
2181.             :type param4: :class:`int` or :class:`float` or :obj:`None`, *optional*
2182.             :param param5: a optional parameter with fixed values
2183.             :type param5: ``{"F", "C", "N"}``, *optional*
2184.             :param param6: different default format
2185.             :type param6: :class:`int`, *default* :obj:`None`
2186.             :param param7: a optional mapping
2187.             :type param7: :term:`mapping` of :term:`hashable` to :class:`str`, *optional*
2188.             :param param8: ellipsis
2189.             :type param8: :obj:`... <Ellipsis>` or :obj:`Ellipsis`
2190.         """)
2191.         translations = {
2192.             "dict-like": ":term:`dict-like <mapping>`",
2193.             "mapping": ":term:`mapping`",
2194.             "hashable": ":term:`hashable`",
2195.         }
2196.         config = Config(
2197.             napoleon_use_param=True,
2198.             napoleon_use_rtype=True,
2199.             napoleon_type_aliases=translations,
2200.         )
2201.         actual = str(NumpyDocstring(docstring, config))
2202.         self.assertEqual(expected, actual)
2203. 
2204. 
2205. @contextmanager
2206. def warns(warning, match):
2207.     match_re = re.compile(match)
2208.     try:
2209.         yield warning
2210.     finally:
2211.         raw_warnings = warning.getvalue()
2212.         warnings = [w for w in raw_warnings.split("\n") if w.strip()]
2213. 
2214.         assert len(warnings) == 1 and all(match_re.match(w) for w in warnings)
2215.         warning.truncate(0)
2216. 
2217. 
2218. class TestNumpyDocstring:
2219.     def test_token_type_invalid(self, warning):
2220.         tokens = (
2221.             "{1, 2",
2222.             "}",
2223.             "'abc",
2224.             "def'",
2225.             '"ghi',
2226.             'jkl"',
2227.         )
2228.         errors = (
2229.             r".+: invalid value set \(missing closing brace\):",
2230.             r".+: invalid value set \(missing opening brace\):",
2231.             r".+: malformed string literal \(missing closing quote\):",
2232.             r".+: malformed string literal \(missing opening quote\):",
2233.             r".+: malformed string literal \(missing closing quote\):",
2234.             r".+: malformed string literal \(missing opening quote\):",
2235.         )
2236.         for token, error in zip(tokens, errors):
2237.             with warns(warning, match=error):
2238.                 _token_type(token)
2239. 
2240.     @pytest.mark.parametrize(
2241.         ("name", "expected"),
2242.         (
2243.             ("x, y, z", "x, y, z"),
2244.             ("*args, **kwargs", r"\*args, \*\*kwargs"),
2245.             ("*x, **y", r"\*x, \*\*y"),
2246.         ),
2247.     )
2248.     def test_escape_args_and_kwargs(self, name, expected):
2249.         numpy_docstring = NumpyDocstring("")
2250.         actual = numpy_docstring._escape_args_and_kwargs(name)
2251. 
2252.         assert actual == expected

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-23 09:56:01,425 - thread-130025381672640.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user wants to find 3 relevant test cases for a bug in the Napoleon extension. The provided context is `tests/test_ext_napoleon_docstring.py`, which contains the tests for the Napoleon docstring parsing. I have analyzed this file and found three relevant test cases that cover different aspects of the bug report: a test for multiple parameters on one line (`*args, **kwargs`), a test for `optional` parameters with `napoleon_use_param=True`, and a direct test for the modified `_escape_args_and_kwargs` function. All necessary code, including imports, helper classes (`Config`, `NumpyDocstring`), and test data, is present in the provided context. Therefore, the current context is sufficient to extract the requested test cases and I do not need to request more information.' query='' extra_requirements='' purpose=''
2025-12-23 09:56:01,445 - thread-130025381672640.prometheus_context_collector - INFO - Successfully retrieved 1 context snippets
