2025-12-21 21:38:04,872 - thread-126740888291008.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: models.E015 is raised when ordering uses lookups that are not transforms.

Description: Description
	
./manage.py check
SystemCheckError: System check identified some issues:
ERRORS:
app.Stock: (models.E015) 'ordering' refers to the nonexistent field, related field, or lookup 'supply__product__parent__isnull'.
However this ordering works fine:
>>> list(Stock.objects.order_by('supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[1292, 1293, 1300, 1295, 1294]
>>> list(Stock.objects.order_by('-supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[108, 109, 110, 23, 107]
I believe it was fine until #29408 was implemented.
Stock.supply is a foreign key to Supply, Supply.product is a foreign key to Product, Product.parent is a ForeignKey('self', models.CASCADE, null=True)

Patch information:
diff --git a/django/db/models/base.py b/django/db/models/base.py
index 6c9e9d3707..f8f0734438 100644
--- a/django/db/models/base.py
+++ b/django/db/models/base.py
@@ -1735,7 +1735,8 @@ class Model(metaclass=ModelBase):
         for field in related_fields:
             _cls = cls
             fld = None
-            for part in field.split(LOOKUP_SEP):
+            parts = field.split(LOOKUP_SEP)
+            for idx, part in enumerate(parts):
                 try:
                     # pk is an alias that won't be found by opts.get_field.
                     if part == 'pk':
@@ -1747,7 +1748,7 @@ class Model(metaclass=ModelBase):
                     else:
                         _cls = None
                 except (FieldDoesNotExist, AttributeError):
-                    if fld is None or fld.get_transform(part) is None:
+                    if fld is None:
                         errors.append(
                             checks.Error(
                                 "'ordering' refers to the nonexistent field, "
@@ -1756,6 +1757,31 @@ class Model(metaclass=ModelBase):
                                 id='models.E015',
                             )
                         )
+                        break
+                    # For the final part, allow either a transform or a lookup.
+                    if idx == len(parts) - 1:
+                        if fld.get_transform(part) is None and fld.get_lookup(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
+                    else:
+                        # Intermediate parts must be valid transforms.
+                        if fld.get_transform(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
 
         # Skip ordering on pk. This is always a valid order_by field
         # but is an alias and therefore won't be found by opts.get_field.


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

2025-12-21 21:38:04,962 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: models.E015 is raised when ordering uses lookups that are not transforms.

Description: Description
	
./manage.py check
SystemCheckError: System check identified some issues:
ERRORS:
app.Stock: (models.E015) 'ordering' refers to the nonexistent field, related field, or lookup 'supply__product__parent__isnull'.
However this ordering works fine:
>>> list(Stock.objects.order_by('supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[1292, 1293, 1300, 1295, 1294]
>>> list(Stock.objects.order_by('-supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[108, 109, 110, 23, 107]
I believe it was fine until #29408 was implemented.
Stock.supply is a foreign key to Supply, Supply.product is a foreign key to Product, Product.parent is a ForeignKey('self', models.CASCADE, null=True)

Patch information:
diff --git a/django/db/models/base.py b/django/db/models/base.py
index 6c9e9d3707..f8f0734438 100644
--- a/django/db/models/base.py
+++ b/django/db/models/base.py
@@ -1735,7 +1735,8 @@ class Model(metaclass=ModelBase):
         for field in related_fields:
             _cls = cls
             fld = None
-            for part in field.split(LOOKUP_SEP):
+            parts = field.split(LOOKUP_SEP)
+            for idx, part in enumerate(parts):
                 try:
                     # pk is an alias that won't be found by opts.get_field.
                     if part == 'pk':
@@ -1747,7 +1748,7 @@ class Model(metaclass=ModelBase):
                     else:
                         _cls = None
                 except (FieldDoesNotExist, AttributeError):
-                    if fld is None or fld.get_transform(part) is None:
+                    if fld is None:
                         errors.append(
                             checks.Error(
                                 "'ordering' refers to the nonexistent field, "
@@ -1756,6 +1757,31 @@ class Model(metaclass=ModelBase):
                                 id='models.E015',
                             )
                         )
+                        break
+                    # For the final part, allow either a transform or a lookup.
+                    if idx == len(parts) - 1:
+                        if fld.get_transform(part) is None and fld.get_lookup(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
+                    else:
+                        # Intermediate parts must be valid transforms.
+                        if fld.get_transform(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
 
         # Skip ordering on pk. This is always a valid order_by field
         # but is an alias and therefore won't be found by opts.get_field.


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 21:38:25,406 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user has provided a patch to fix a bug in the `_check_ordering` method of the `Model` class. To understand the full context of the change and verify the fix, I need to see the complete implementation of the `Model` class and its `_check_ordering` method from `django/db/models/base.py`. The provided context is currently empty.' query='Please provide the full content of the file `django/db/models/base.py`.' extra_requirements='' purpose='This will allow me to examine the entire `_check_ordering` method and the `Model` class to understand the environment where the patch is being applied.'
2025-12-21 21:38:25,407 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/models/base.py`.
2025-12-21 21:38:25,407 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 21:38:25,408 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 21:38:25,409 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 21:38:25,409 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/models/base.py`.
Purpose: This will allow me to examine the entire `_check_ordering` method and the `Model` class to understand the environment where the patch is being applied.
2025-12-21 21:38:27,562 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will read the full content of the file `django/db/models/base.py`. This will allow me to examine the `_check_ordering` method and the `Model` class in its entirety, providing a comprehensive understanding of the environment where the patch is being applied.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/base.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2111, 'candidates_token_count': 81, 'total_token_count': 2294, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2111}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 81}], 'thoughts_token_count': 102, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.09125760749534324, 'model_name': 'gemini-2.5-pro'} id='run--ca13ad92-e996-47b1-8e78-d9b92d721793-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/base.py'}, 'id': '527602c5-31a8-45c8-ab08-84fa159c87d7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2111, 'output_tokens': 81, 'total_tokens': 2294, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 102}}
2025-12-21 21:38:30,923 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the initial 500 lines of the `django/db/models/base.py` file. Since the file is larger than the initial preview, I will now proceed to read the remaining content in chunks to provide you with the complete file. This will ensure you have the full context of the `Model` class and the `_check_ordering` method.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 1001.0, "relative_path": "django/db/models/base.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9421, 'candidates_token_count': 108, 'total_token_count': 9667, 'cached_content_token_count': 1842, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9421}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1842}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 108}], 'thoughts_token_count': 138}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16449333120275428, 'model_name': 'gemini-2.5-pro'} id='run--907ca263-2e04-463a-9250-dd2c02610cb6-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 1001.0, 'relative_path': 'django/db/models/base.py'}, 'id': '5f414f09-f0b3-4447-9486-6d7735221f7d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9421, 'output_tokens': 108, 'total_tokens': 9667, 'input_token_details': {'cache_read': 1842}, 'output_token_details': {'reasoning': 138}}
2025-12-21 21:38:35,517 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the content of `django/db/models/base.py` up to line 1001. To provide the complete file, I will read the next chunk of the file. This will give us the full context of the `Model` class and the `_check_ordering` method.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "end_line": 1501.0, "relative_path": "django/db/models/base.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 17560, 'candidates_token_count': 95, 'total_token_count': 17910, 'cached_content_token_count': 9527, 'prompt_tokens_details': [{'modality': 1, 'token_count': 17560}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9527}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 95}], 'thoughts_token_count': 255}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3276553505345395, 'model_name': 'gemini-2.5-pro'} id='run--95de88e5-b58d-4081-9596-2ba618076d1c-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'end_line': 1501.0, 'relative_path': 'django/db/models/base.py'}, 'id': 'c34fee72-9cc2-4ac3-a735-969a251fefe3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17560, 'output_tokens': 95, 'total_tokens': 17910, 'input_token_details': {'cache_read': 9527}, 'output_token_details': {'reasoning': 255}}
2025-12-21 21:38:40,627 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the content of `django/db/models/base.py` up to line 1501. To ensure you have the complete file, I will now read the final remaining portion. This will give you the full and complete context of the `Model` class and the `_check_ordering` method.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1501.0, "end_line": 2001.0, "relative_path": "django/db/models/base.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 25508, 'candidates_token_count': 98, 'total_token_count': 25942, 'cached_content_token_count': 17363, 'prompt_tokens_details': [{'modality': 1, 'token_count': 25508}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17363}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 98}], 'thoughts_token_count': 336}, 'finish_reason': 'STOP', 'avg_logprobs': -0.47531046186174664, 'model_name': 'gemini-2.5-pro'} id='run--7589933e-3e6a-42b2-a95c-926fd72d81a1-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1501.0, 'end_line': 2001.0, 'relative_path': 'django/db/models/base.py'}, 'id': 'd9ca81dd-2df1-4bc9-912f-a02d3ef9a022', 'type': 'tool_call'}] usage_metadata={'input_tokens': 25508, 'output_tokens': 98, 'total_tokens': 25942, 'input_token_details': {'cache_read': 17363}, 'output_token_details': {'reasoning': 336}}
2025-12-21 21:38:44,461 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of the `django/db/models/base.py` file. The file was read in several parts to ensure the full content was captured. You can now examine the `_check_ordering` method and the `Model` class to understand the context of the patch.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 32612, 'candidates_token_count': 63, 'total_token_count': 32952, 'cached_content_token_count': 25199, 'prompt_tokens_details': [{'modality': 1, 'token_count': 32612}], 'cache_tokens_details': [{'modality': 1, 'token_count': 25199}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 63}], 'thoughts_token_count': 277}, 'finish_reason': 'STOP', 'avg_logprobs': -0.48001171293712797, 'model_name': 'gemini-2.5-pro'} id='run--5f009614-f786-497e-b5f4-2e75f786696d-0' usage_metadata={'input_tokens': 32612, 'output_tokens': 63, 'total_tokens': 32952, 'input_token_details': {'cache_read': 25199}, 'output_token_details': {'reasoning': 277}}
2025-12-21 21:38:44,467 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/models/base.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This will allow me to examine the entire `_check_ordering` method and the `Model` class to understand the environment where the patch is being applied.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/base.py
Line number range: 1 - 500
Content:
1. import copy
2. import inspect
3. import warnings
4. from functools import partialmethod
5. from itertools import chain
6. 
7. from django.apps import apps
8. from django.conf import settings
9. from django.core import checks
10. from django.core.exceptions import (
11.     NON_FIELD_ERRORS, FieldDoesNotExist, FieldError, MultipleObjectsReturned,
12.     ObjectDoesNotExist, ValidationError,
13. )
14. from django.db import (
15.     DEFAULT_DB_ALIAS, DJANGO_VERSION_PICKLE_KEY, DatabaseError, connection,
16.     connections, router, transaction,
17. )
18. from django.db.models import (
19.     NOT_PROVIDED, ExpressionWrapper, IntegerField, Max, Value,
20. )
21. from django.db.models.constants import LOOKUP_SEP
22. from django.db.models.constraints import CheckConstraint, UniqueConstraint
23. from django.db.models.deletion import CASCADE, Collector
24. from django.db.models.fields.related import (
25.     ForeignObjectRel, OneToOneField, lazy_related_operation, resolve_relation,
26. )
27. from django.db.models.functions import Coalesce
28. from django.db.models.manager import Manager
29. from django.db.models.options import Options
30. from django.db.models.query import Q
31. from django.db.models.signals import (
32.     class_prepared, post_init, post_save, pre_init, pre_save,
33. )
34. from django.db.models.utils import make_model_tuple
35. from django.utils.encoding import force_str
36. from django.utils.hashable import make_hashable
37. from django.utils.text import capfirst, get_text_list
38. from django.utils.translation import gettext_lazy as _
39. from django.utils.version import get_version
40. 
41. 
42. class Deferred:
43.     def __repr__(self):
44.         return '<Deferred field>'
45. 
46.     def __str__(self):
47.         return '<Deferred field>'
48. 
49. 
50. DEFERRED = Deferred()
51. 
52. 
53. def subclass_exception(name, bases, module, attached_to):
54.     """
55.     Create exception subclass. Used by ModelBase below.
56. 
57.     The exception is created in a way that allows it to be pickled, assuming
58.     that the returned exception class will be added as an attribute to the
59.     'attached_to' class.
60.     """
61.     return type(name, bases, {
62.         '__module__': module,
63.         '__qualname__': '%s.%s' % (attached_to.__qualname__, name),
64.     })
65. 
66. 
67. def _has_contribute_to_class(value):
68.     # Only call contribute_to_class() if it's bound.
69.     return not inspect.isclass(value) and hasattr(value, 'contribute_to_class')
70. 
71. 
72. class ModelBase(type):
73.     """Metaclass for all models."""
74.     def __new__(cls, name, bases, attrs, **kwargs):
75.         super_new = super().__new__
76. 
77.         # Also ensure initialization is only performed for subclasses of Model
78.         # (excluding Model class itself).
79.         parents = [b for b in bases if isinstance(b, ModelBase)]
80.         if not parents:
81.             return super_new(cls, name, bases, attrs)
82. 
83.         # Create the class.
84.         module = attrs.pop('__module__')
85.         new_attrs = {'__module__': module}
86.         classcell = attrs.pop('__classcell__', None)
87.         if classcell is not None:
88.             new_attrs['__classcell__'] = classcell
89.         attr_meta = attrs.pop('Meta', None)
90.         # Pass all attrs without a (Django-specific) contribute_to_class()
91.         # method to type.__new__() so that they're properly initialized
92.         # (i.e. __set_name__()).
93.         contributable_attrs = {}
94.         for obj_name, obj in list(attrs.items()):
95.             if _has_contribute_to_class(obj):
96.                 contributable_attrs[obj_name] = obj
97.             else:
98.                 new_attrs[obj_name] = obj
99.         new_class = super_new(cls, name, bases, new_attrs, **kwargs)
100. 
101.         abstract = getattr(attr_meta, 'abstract', False)
102.         meta = attr_meta or getattr(new_class, 'Meta', None)
103.         base_meta = getattr(new_class, '_meta', None)
104. 
105.         app_label = None
106. 
107.         # Look for an application configuration to attach the model to.
108.         app_config = apps.get_containing_app_config(module)
109. 
110.         if getattr(meta, 'app_label', None) is None:
111.             if app_config is None:
112.                 if not abstract:
113.                     raise RuntimeError(
114.                         "Model class %s.%s doesn't declare an explicit "
115.                         "app_label and isn't in an application in "
116.                         "INSTALLED_APPS." % (module, name)
117.                     )
118. 
119.             else:
120.                 app_label = app_config.label
121. 
122.         new_class.add_to_class('_meta', Options(meta, app_label))
123.         if not abstract:
124.             new_class.add_to_class(
125.                 'DoesNotExist',
126.                 subclass_exception(
127.                     'DoesNotExist',
128.                     tuple(
129.                         x.DoesNotExist for x in parents if hasattr(x, '_meta') and not x._meta.abstract
130.                     ) or (ObjectDoesNotExist,),
131.                     module,
132.                     attached_to=new_class))
133.             new_class.add_to_class(
134.                 'MultipleObjectsReturned',
135.                 subclass_exception(
136.                     'MultipleObjectsReturned',
137.                     tuple(
138.                         x.MultipleObjectsReturned for x in parents if hasattr(x, '_meta') and not x._meta.abstract
139.                     ) or (MultipleObjectsReturned,),
140.                     module,
141.                     attached_to=new_class))
142.             if base_meta and not base_meta.abstract:
143.                 # Non-abstract child classes inherit some attributes from their
144.                 # non-abstract parent (unless an ABC comes before it in the
145.                 # method resolution order).
146.                 if not hasattr(meta, 'ordering'):
147.                     new_class._meta.ordering = base_meta.ordering
148.                 if not hasattr(meta, 'get_latest_by'):
149.                     new_class._meta.get_latest_by = base_meta.get_latest_by
150. 
151.         is_proxy = new_class._meta.proxy
152. 
153.         # If the model is a proxy, ensure that the base class
154.         # hasn't been swapped out.
155.         if is_proxy and base_meta and base_meta.swapped:
156.             raise TypeError("%s cannot proxy the swapped model '%s'." % (name, base_meta.swapped))
157. 
158.         # Add remaining attributes (those with a contribute_to_class() method)
159.         # to the class.
160.         for obj_name, obj in contributable_attrs.items():
161.             new_class.add_to_class(obj_name, obj)
162. 
163.         # All the fields of any type declared on this model
164.         new_fields = chain(
165.             new_class._meta.local_fields,
166.             new_class._meta.local_many_to_many,
167.             new_class._meta.private_fields
168.         )
169.         field_names = {f.name for f in new_fields}
170. 
171.         # Basic setup for proxy models.
172.         if is_proxy:
173.             base = None
174.             for parent in [kls for kls in parents if hasattr(kls, '_meta')]:
175.                 if parent._meta.abstract:
176.                     if parent._meta.fields:
177.                         raise TypeError(
178.                             "Abstract base class containing model fields not "
179.                             "permitted for proxy model '%s'." % name
180.                         )
181.                     else:
182.                         continue
183.                 if base is None:
184.                     base = parent
185.                 elif parent._meta.concrete_model is not base._meta.concrete_model:
186.                     raise TypeError("Proxy model '%s' has more than one non-abstract model base class." % name)
187.             if base is None:
188.                 raise TypeError("Proxy model '%s' has no non-abstract model base class." % name)
189.             new_class._meta.setup_proxy(base)
190.             new_class._meta.concrete_model = base._meta.concrete_model
191.         else:
192.             new_class._meta.concrete_model = new_class
193. 
194.         # Collect the parent links for multi-table inheritance.
195.         parent_links = {}
196.         for base in reversed([new_class] + parents):
197.             # Conceptually equivalent to `if base is Model`.
198.             if not hasattr(base, '_meta'):
199.                 continue
200.             # Skip concrete parent classes.
201.             if base != new_class and not base._meta.abstract:
202.                 continue
203.             # Locate OneToOneField instances.
204.             for field in base._meta.local_fields:
205.                 if isinstance(field, OneToOneField) and field.remote_field.parent_link:
206.                     related = resolve_relation(new_class, field.remote_field.model)
207.                     parent_links[make_model_tuple(related)] = field
208. 
209.         # Track fields inherited from base models.
210.         inherited_attributes = set()
211.         # Do the appropriate setup for any model parents.
212.         for base in new_class.mro():
213.             if base not in parents or not hasattr(base, '_meta'):
214.                 # Things without _meta aren't functional models, so they're
215.                 # uninteresting parents.
216.                 inherited_attributes.update(base.__dict__)
217.                 continue
218. 
219.             parent_fields = base._meta.local_fields + base._meta.local_many_to_many
220.             if not base._meta.abstract:
221.                 # Check for clashes between locally declared fields and those
222.                 # on the base classes.
223.                 for field in parent_fields:
224.                     if field.name in field_names:
225.                         raise FieldError(
226.                             'Local field %r in class %r clashes with field of '
227.                             'the same name from base class %r.' % (
228.                                 field.name,
229.                                 name,
230.                                 base.__name__,
231.                             )
232.                         )
233.                     else:
234.                         inherited_attributes.add(field.name)
235. 
236.                 # Concrete classes...
237.                 base = base._meta.concrete_model
238.                 base_key = make_model_tuple(base)
239.                 if base_key in parent_links:
240.                     field = parent_links[base_key]
241.                 elif not is_proxy:
242.                     attr_name = '%s_ptr' % base._meta.model_name
243.                     field = OneToOneField(
244.                         base,
245.                         on_delete=CASCADE,
246.                         name=attr_name,
247.                         auto_created=True,
248.                         parent_link=True,
249.                     )
250. 
251.                     if attr_name in field_names:
252.                         raise FieldError(
253.                             "Auto-generated field '%s' in class %r for "
254.                             "parent_link to base class %r clashes with "
255.                             "declared field of the same name." % (
256.                                 attr_name,
257.                                 name,
258.                                 base.__name__,
259.                             )
260.                         )
261. 
262.                     # Only add the ptr field if it's not already present;
263.                     # e.g. migrations will already have it specified
264.                     if not hasattr(new_class, attr_name):
265.                         new_class.add_to_class(attr_name, field)
266.                 else:
267.                     field = None
268.                 new_class._meta.parents[base] = field
269.             else:
270.                 base_parents = base._meta.parents.copy()
271. 
272.                 # Add fields from abstract base class if it wasn't overridden.
273.                 for field in parent_fields:
274.                     if (field.name not in field_names and
275.                             field.name not in new_class.__dict__ and
276.                             field.name not in inherited_attributes):
277.                         new_field = copy.deepcopy(field)
278.                         new_class.add_to_class(field.name, new_field)
279.                         # Replace parent links defined on this base by the new
280.                         # field. It will be appropriately resolved if required.
281.                         if field.one_to_one:
282.                             for parent, parent_link in base_parents.items():
283.                                 if field == parent_link:
284.                                     base_parents[parent] = new_field
285. 
286.                 # Pass any non-abstract parent classes onto child.
287.                 new_class._meta.parents.update(base_parents)
288. 
289.             # Inherit private fields (like GenericForeignKey) from the parent
290.             # class
291.             for field in base._meta.private_fields:
292.                 if field.name in field_names:
293.                     if not base._meta.abstract:
294.                         raise FieldError(
295.                             'Local field %r in class %r clashes with field of '
296.                             'the same name from base class %r.' % (
297.                                 field.name,
298.                                 name,
299.                                 base.__name__,
300.                             )
301.                         )
302.                 else:
303.                     field = copy.deepcopy(field)
304.                     if not base._meta.abstract:
305.                         field.mti_inherited = True
306.                     new_class.add_to_class(field.name, field)
307. 
308.         # Copy indexes so that index names are unique when models extend an
309.         # abstract model.
310.         new_class._meta.indexes = [copy.deepcopy(idx) for idx in new_class._meta.indexes]
311. 
312.         if abstract:
313.             # Abstract base models can't be instantiated and don't appear in
314.             # the list of models for an app. We do the final setup for them a
315.             # little differently from normal models.
316.             attr_meta.abstract = False
317.             new_class.Meta = attr_meta
318.             return new_class
319. 
320.         new_class._prepare()
321.         new_class._meta.apps.register_model(new_class._meta.app_label, new_class)
322.         return new_class
323. 
324.     def add_to_class(cls, name, value):
325.         if _has_contribute_to_class(value):
326.             value.contribute_to_class(cls, name)
327.         else:
328.             setattr(cls, name, value)
329. 
330.     def _prepare(cls):
331.         """Create some methods once self._meta has been populated."""
332.         opts = cls._meta
333.         opts._prepare(cls)
334. 
335.         if opts.order_with_respect_to:
336.             cls.get_next_in_order = partialmethod(cls._get_next_or_previous_in_order, is_next=True)
337.             cls.get_previous_in_order = partialmethod(cls._get_next_or_previous_in_order, is_next=False)
338. 
339.             # Defer creating accessors on the foreign class until it has been
340.             # created and registered. If remote_field is None, we're ordering
341.             # with respect to a GenericForeignKey and don't know what the
342.             # foreign class is - we'll add those accessors later in
343.             # contribute_to_class().
344.             if opts.order_with_respect_to.remote_field:
345.                 wrt = opts.order_with_respect_to
346.                 remote = wrt.remote_field.model
347.                 lazy_related_operation(make_foreign_order_accessors, cls, remote)
348. 
349.         # Give the class a docstring -- its definition.
350.         if cls.__doc__ is None:
351.             cls.__doc__ = "%s(%s)" % (cls.__name__, ", ".join(f.name for f in opts.fields))
352. 
353.         get_absolute_url_override = settings.ABSOLUTE_URL_OVERRIDES.get(opts.label_lower)
354.         if get_absolute_url_override:
355.             setattr(cls, 'get_absolute_url', get_absolute_url_override)
356. 
357.         if not opts.managers:
358.             if any(f.name == 'objects' for f in opts.fields):
359.                 raise ValueError(
360.                     "Model %s must specify a custom Manager, because it has a "
361.                     "field named 'objects'." % cls.__name__
362.                 )
363.             manager = Manager()
364.             manager.auto_created = True
365.             cls.add_to_class('objects', manager)
366. 
367.         # Set the name of _meta.indexes. This can't be done in
368.         # Options.contribute_to_class() because fields haven't been added to
369.         # the model at that point.
370.         for index in cls._meta.indexes:
371.             if not index.name:
372.                 index.set_name_with_model(cls)
373. 
374.         class_prepared.send(sender=cls)
375. 
376.     @property
377.     def _base_manager(cls):
378.         return cls._meta.base_manager
379. 
380.     @property
381.     def _default_manager(cls):
382.         return cls._meta.default_manager
383. 
384. 
385. class ModelStateFieldsCacheDescriptor:
386.     def __get__(self, instance, cls=None):
387.         if instance is None:
388.             return self
389.         res = instance.fields_cache = {}
390.         return res
391. 
392. 
393. class ModelState:
394.     """Store model instance state."""
395.     db = None
396.     # If true, uniqueness validation checks will consider this a new, unsaved
397.     # object. Necessary for correct validation of new instances of objects with
398.     # explicit (non-auto) PKs. This impacts validation only; it has no effect
399.     # on the actual save.
400.     adding = True
401.     fields_cache = ModelStateFieldsCacheDescriptor()
402. 
403. 
404. class Model(metaclass=ModelBase):
405. 
406.     def __init__(self, *args, **kwargs):
407.         # Alias some things as locals to avoid repeat global lookups
408.         cls = self.__class__
409.         opts = self._meta
410.         _setattr = setattr
411.         _DEFERRED = DEFERRED
412. 
413.         pre_init.send(sender=cls, args=args, kwargs=kwargs)
414. 
415.         # Set up the storage for instance state
416.         self._state = ModelState()
417. 
418.         # There is a rather weird disparity here; if kwargs, it's set, then args
419.         # overrides it. It should be one or the other; don't duplicate the work
420.         # The reason for the kwargs check is that standard iterator passes in by
421.         # args, and instantiation for iteration is 33% faster.
422.         if len(args) > len(opts.concrete_fields):
423.             # Daft, but matches old exception sans the err msg.
424.             raise IndexError("Number of args exceeds number of fields")
425. 
426.         if not kwargs:
427.             fields_iter = iter(opts.concrete_fields)
428.             # The ordering of the zip calls matter - zip throws StopIteration
429.             # when an iter throws it. So if the first iter throws it, the second
430.             # is *not* consumed. We rely on this, so don't change the order
431.             # without changing the logic.
432.             for val, field in zip(args, fields_iter):
433.                 if val is _DEFERRED:
434.                     continue
435.                 _setattr(self, field.attname, val)
436.         else:
437.             # Slower, kwargs-ready version.
438.             fields_iter = iter(opts.fields)
439.             for val, field in zip(args, fields_iter):
440.                 if val is _DEFERRED:
441.                     continue
442.                 _setattr(self, field.attname, val)
443.                 kwargs.pop(field.name, None)
444. 
445.         # Now we're left with the unprocessed fields that *must* come from
446.         # keywords, or default.
447. 
448.         for field in fields_iter:
449.             is_related_object = False
450.             # Virtual field
451.             if field.attname not in kwargs and field.column is None:
452.                 continue
453.             if kwargs:
454.                 if isinstance(field.remote_field, ForeignObjectRel):
455.                     try:
456.                         # Assume object instance was passed in.
457.                         rel_obj = kwargs.pop(field.name)
458.                         is_related_object = True
459.                     except KeyError:
460.                         try:
461.                             # Object instance wasn't passed in -- must be an ID.
462.                             val = kwargs.pop(field.attname)
463.                         except KeyError:
464.                             val = field.get_default()
465.                 else:
466.                     try:
467.                         val = kwargs.pop(field.attname)
468.                     except KeyError:
469.                         # This is done with an exception rather than the
470.                         # default argument on pop because we don't want
471.                         # get_default() to be evaluated, and then not used.
472.                         # Refs #12057.
473.                         val = field.get_default()
474.             else:
475.                 val = field.get_default()
476. 
477.             if is_related_object:
478.                 # If we are passed a related instance, set it using the
479.                 # field.name instead of field.attname (e.g. "user" instead of
480.                 # "user_id") so that the object gets properly cached (and type
481.                 # checked) by the RelatedObjectDescriptor.
482.                 if rel_obj is not _DEFERRED:
483.                     _setattr(self, field.name, rel_obj)
484.             else:
485.                 if val is not _DEFERRED:
486.                     _setattr(self, field.attname, val)
487. 
488.         if kwargs:
489.             property_names = opts._property_names
490.             for prop in tuple(kwargs):
491.                 try:
492.                     # Any remaining kwargs must correspond to properties or
493.                     # virtual fields.
494.                     if prop in property_names or opts.get_field(prop):
495.                         if kwargs[prop] is not _DEFERRED:
496.                             _setattr(self, prop, kwargs[prop])
497.                         del kwargs[prop]
498.                 except (AttributeError, FieldDoesNotExist):
499.                     pass
500.             for kwarg in kwargs:


File: django/db/models/base.py
Line number range: 501 - 1001
Content:
501.                 raise TypeError("%s() got an unexpected keyword argument '%s'" % (cls.__name__, kwarg))
502.         super().__init__()
503.         post_init.send(sender=cls, instance=self)
504. 
505.     @classmethod
506.     def from_db(cls, db, field_names, values):
507.         if len(values) != len(cls._meta.concrete_fields):
508.             values_iter = iter(values)
509.             values = [
510.                 next(values_iter) if f.attname in field_names else DEFERRED
511.                 for f in cls._meta.concrete_fields
512.             ]
513.         new = cls(*values)
514.         new._state.adding = False
515.         new._state.db = db
516.         return new
517. 
518.     def __repr__(self):
519.         return '<%s: %s>' % (self.__class__.__name__, self)
520. 
521.     def __str__(self):
522.         return '%s object (%s)' % (self.__class__.__name__, self.pk)
523. 
524.     def __eq__(self, other):
525.         if not isinstance(other, Model):
526.             return NotImplemented
527.         if self._meta.concrete_model != other._meta.concrete_model:
528.             return False
529.         my_pk = self.pk
530.         if my_pk is None:
531.             return self is other
532.         return my_pk == other.pk
533. 
534.     def __hash__(self):
535.         if self.pk is None:
536.             raise TypeError("Model instances without primary key value are unhashable")
537.         return hash(self.pk)
538. 
539.     def __reduce__(self):
540.         data = self.__getstate__()
541.         data[DJANGO_VERSION_PICKLE_KEY] = get_version()
542.         class_id = self._meta.app_label, self._meta.object_name
543.         return model_unpickle, (class_id,), data
544. 
545.     def __getstate__(self):
546.         """Hook to allow choosing the attributes to pickle."""
547.         return self.__dict__
548. 
549.     def __setstate__(self, state):
550.         msg = None
551.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
552.         if pickled_version:
553.             current_version = get_version()
554.             if current_version != pickled_version:
555.                 msg = (
556.                     "Pickled model instance's Django version %s does not match "
557.                     "the current version %s." % (pickled_version, current_version)
558.                 )
559.         else:
560.             msg = "Pickled model instance's Django version is not specified."
561. 
562.         if msg:
563.             warnings.warn(msg, RuntimeWarning, stacklevel=2)
564. 
565.         self.__dict__.update(state)
566. 
567.     def _get_pk_val(self, meta=None):
568.         meta = meta or self._meta
569.         return getattr(self, meta.pk.attname)
570. 
571.     def _set_pk_val(self, value):
572.         for parent_link in self._meta.parents.values():
573.             if parent_link and parent_link != self._meta.pk:
574.                 setattr(self, parent_link.target_field.attname, value)
575.         return setattr(self, self._meta.pk.attname, value)
576. 
577.     pk = property(_get_pk_val, _set_pk_val)
578. 
579.     def get_deferred_fields(self):
580.         """
581.         Return a set containing names of deferred fields for this instance.
582.         """
583.         return {
584.             f.attname for f in self._meta.concrete_fields
585.             if f.attname not in self.__dict__
586.         }
587. 
588.     def refresh_from_db(self, using=None, fields=None):
589.         """
590.         Reload field values from the database.
591. 
592.         By default, the reloading happens from the database this instance was
593.         loaded from, or by the read router if this instance wasn't loaded from
594.         any database. The using parameter will override the default.
595. 
596.         Fields can be used to specify which fields to reload. The fields
597.         should be an iterable of field attnames. If fields is None, then
598.         all non-deferred fields are reloaded.
599. 
600.         When accessing deferred fields of an instance, the deferred loading
601.         of the field will call this method.
602.         """
603.         if fields is None:
604.             self._prefetched_objects_cache = {}
605.         else:
606.             prefetched_objects_cache = getattr(self, '_prefetched_objects_cache', ())
607.             for field in fields:
608.                 if field in prefetched_objects_cache:
609.                     del prefetched_objects_cache[field]
610.                     fields.remove(field)
611.             if not fields:
612.                 return
613.             if any(LOOKUP_SEP in f for f in fields):
614.                 raise ValueError(
615.                     'Found "%s" in fields argument. Relations and transforms '
616.                     'are not allowed in fields.' % LOOKUP_SEP)
617. 
618.         hints = {'instance': self}
619.         db_instance_qs = self.__class__._base_manager.db_manager(using, hints=hints).filter(pk=self.pk)
620. 
621.         # Use provided fields, if not set then reload all non-deferred fields.
622.         deferred_fields = self.get_deferred_fields()
623.         if fields is not None:
624.             fields = list(fields)
625.             db_instance_qs = db_instance_qs.only(*fields)
626.         elif deferred_fields:
627.             fields = [f.attname for f in self._meta.concrete_fields
628.                       if f.attname not in deferred_fields]
629.             db_instance_qs = db_instance_qs.only(*fields)
630. 
631.         db_instance = db_instance_qs.get()
632.         non_loaded_fields = db_instance.get_deferred_fields()
633.         for field in self._meta.concrete_fields:
634.             if field.attname in non_loaded_fields:
635.                 # This field wasn't refreshed - skip ahead.
636.                 continue
637.             setattr(self, field.attname, getattr(db_instance, field.attname))
638.             # Clear cached foreign keys.
639.             if field.is_relation and field.is_cached(self):
640.                 field.delete_cached_value(self)
641. 
642.         # Clear cached relations.
643.         for field in self._meta.related_objects:
644.             if field.is_cached(self):
645.                 field.delete_cached_value(self)
646. 
647.         self._state.db = db_instance._state.db
648. 
649.     def serializable_value(self, field_name):
650.         """
651.         Return the value of the field name for this instance. If the field is
652.         a foreign key, return the id value instead of the object. If there's
653.         no Field object with this name on the model, return the model
654.         attribute's value.
655. 
656.         Used to serialize a field's value (in the serializer, or form output,
657.         for example). Normally, you would just access the attribute directly
658.         and not use this method.
659.         """
660.         try:
661.             field = self._meta.get_field(field_name)
662.         except FieldDoesNotExist:
663.             return getattr(self, field_name)
664.         return getattr(self, field.attname)
665. 
666.     def save(self, force_insert=False, force_update=False, using=None,
667.              update_fields=None):
668.         """
669.         Save the current instance. Override this in a subclass if you want to
670.         control the saving process.
671. 
672.         The 'force_insert' and 'force_update' parameters can be used to insist
673.         that the "save" must be an SQL insert or update (or equivalent for
674.         non-SQL backends), respectively. Normally, they should not be set.
675.         """
676.         # Ensure that a model instance without a PK hasn't been assigned to
677.         # a ForeignKey or OneToOneField on this model. If the field is
678.         # nullable, allowing the save() would result in silent data loss.
679.         for field in self._meta.concrete_fields:
680.             # If the related field isn't cached, then an instance hasn't
681.             # been assigned and there's no need to worry about this check.
682.             if field.is_relation and field.is_cached(self):
683.                 obj = getattr(self, field.name, None)
684.                 if not obj:
685.                     continue
686.                 # A pk may have been assigned manually to a model instance not
687.                 # saved to the database (or auto-generated in a case like
688.                 # UUIDField), but we allow the save to proceed and rely on the
689.                 # database to raise an IntegrityError if applicable. If
690.                 # constraints aren't supported by the database, there's the
691.                 # unavoidable risk of data corruption.
692.                 if obj.pk is None:
693.                     # Remove the object from a related instance cache.
694.                     if not field.remote_field.multiple:
695.                         field.remote_field.delete_cached_value(obj)
696.                     raise ValueError(
697.                         "save() prohibited to prevent data loss due to "
698.                         "unsaved related object '%s'." % field.name
699.                     )
700.                 elif getattr(self, field.attname) is None:
701.                     # Use pk from related object if it has been saved after
702.                     # an assignment.
703.                     setattr(self, field.attname, obj.pk)
704.                 # If the relationship's pk/to_field was changed, clear the
705.                 # cached relationship.
706.                 if getattr(obj, field.target_field.attname) != getattr(self, field.attname):
707.                     field.delete_cached_value(self)
708. 
709.         using = using or router.db_for_write(self.__class__, instance=self)
710.         if force_insert and (force_update or update_fields):
711.             raise ValueError("Cannot force both insert and updating in model saving.")
712. 
713.         deferred_fields = self.get_deferred_fields()
714.         if update_fields is not None:
715.             # If update_fields is empty, skip the save. We do also check for
716.             # no-op saves later on for inheritance cases. This bailout is
717.             # still needed for skipping signal sending.
718.             if not update_fields:
719.                 return
720. 
721.             update_fields = frozenset(update_fields)
722.             field_names = set()
723. 
724.             for field in self._meta.fields:
725.                 if not field.primary_key:
726.                     field_names.add(field.name)
727. 
728.                     if field.name != field.attname:
729.                         field_names.add(field.attname)
730. 
731.             non_model_fields = update_fields.difference(field_names)
732. 
733.             if non_model_fields:
734.                 raise ValueError("The following fields do not exist in this "
735.                                  "model or are m2m fields: %s"
736.                                  % ', '.join(non_model_fields))
737. 
738.         # If saving to the same database, and this model is deferred, then
739.         # automatically do an "update_fields" save on the loaded fields.
740.         elif not force_insert and deferred_fields and using == self._state.db:
741.             field_names = set()
742.             for field in self._meta.concrete_fields:
743.                 if not field.primary_key and not hasattr(field, 'through'):
744.                     field_names.add(field.attname)
745.             loaded_fields = field_names.difference(deferred_fields)
746.             if loaded_fields:
747.                 update_fields = frozenset(loaded_fields)
748. 
749.         self.save_base(using=using, force_insert=force_insert,
750.                        force_update=force_update, update_fields=update_fields)
751.     save.alters_data = True
752. 
753.     def save_base(self, raw=False, force_insert=False,
754.                   force_update=False, using=None, update_fields=None):
755.         """
756.         Handle the parts of saving which should be done only once per save,
757.         yet need to be done in raw saves, too. This includes some sanity
758.         checks and signal sending.
759. 
760.         The 'raw' argument is telling save_base not to save any parent
761.         models and not to do any changes to the values before save. This
762.         is used by fixture loading.
763.         """
764.         using = using or router.db_for_write(self.__class__, instance=self)
765.         assert not (force_insert and (force_update or update_fields))
766.         assert update_fields is None or update_fields
767.         cls = origin = self.__class__
768.         # Skip proxies, but keep the origin as the proxy model.
769.         if cls._meta.proxy:
770.             cls = cls._meta.concrete_model
771.         meta = cls._meta
772.         if not meta.auto_created:
773.             pre_save.send(
774.                 sender=origin, instance=self, raw=raw, using=using,
775.                 update_fields=update_fields,
776.             )
777.         # A transaction isn't needed if one query is issued.
778.         if meta.parents:
779.             context_manager = transaction.atomic(using=using, savepoint=False)
780.         else:
781.             context_manager = transaction.mark_for_rollback_on_error(using=using)
782.         with context_manager:
783.             parent_inserted = False
784.             if not raw:
785.                 parent_inserted = self._save_parents(cls, using, update_fields)
786.             updated = self._save_table(
787.                 raw, cls, force_insert or parent_inserted,
788.                 force_update, using, update_fields,
789.             )
790.         # Store the database on which the object was saved
791.         self._state.db = using
792.         # Once saved, this is no longer a to-be-added instance.
793.         self._state.adding = False
794. 
795.         # Signal that the save is complete
796.         if not meta.auto_created:
797.             post_save.send(
798.                 sender=origin, instance=self, created=(not updated),
799.                 update_fields=update_fields, raw=raw, using=using,
800.             )
801. 
802.     save_base.alters_data = True
803. 
804.     def _save_parents(self, cls, using, update_fields):
805.         """Save all the parents of cls using values from self."""
806.         meta = cls._meta
807.         inserted = False
808.         for parent, field in meta.parents.items():
809.             # Make sure the link fields are synced between parent and self.
810.             if (field and getattr(self, parent._meta.pk.attname) is None and
811.                     getattr(self, field.attname) is not None):
812.                 setattr(self, parent._meta.pk.attname, getattr(self, field.attname))
813.             parent_inserted = self._save_parents(cls=parent, using=using, update_fields=update_fields)
814.             updated = self._save_table(
815.                 cls=parent, using=using, update_fields=update_fields,
816.                 force_insert=parent_inserted,
817.             )
818.             if not updated:
819.                 inserted = True
820.             # Set the parent's PK value to self.
821.             if field:
822.                 setattr(self, field.attname, self._get_pk_val(parent._meta))
823.                 # Since we didn't have an instance of the parent handy set
824.                 # attname directly, bypassing the descriptor. Invalidate
825.                 # the related object cache, in case it's been accidentally
826.                 # populated. A fresh instance will be re-built from the
827.                 # database if necessary.
828.                 if field.is_cached(self):
829.                     field.delete_cached_value(self)
830.         return inserted
831. 
832.     def _save_table(self, raw=False, cls=None, force_insert=False,
833.                     force_update=False, using=None, update_fields=None):
834.         """
835.         Do the heavy-lifting involved in saving. Update or insert the data
836.         for a single table.
837.         """
838.         meta = cls._meta
839.         non_pks = [f for f in meta.local_concrete_fields if not f.primary_key]
840. 
841.         if update_fields:
842.             non_pks = [f for f in non_pks
843.                        if f.name in update_fields or f.attname in update_fields]
844. 
845.         pk_val = self._get_pk_val(meta)
846.         if pk_val is None:
847.             pk_val = meta.pk.get_pk_value_on_save(self)
848.             setattr(self, meta.pk.attname, pk_val)
849.         pk_set = pk_val is not None
850.         if not pk_set and (force_update or update_fields):
851.             raise ValueError("Cannot force an update in save() with no primary key.")
852.         updated = False
853.         # Skip an UPDATE when adding an instance and primary key has a default.
854.         if (
855.             not raw and
856.             not force_insert and
857.             self._state.adding and
858.             meta.pk.default and
859.             meta.pk.default is not NOT_PROVIDED
860.         ):
861.             force_insert = True
862.         # If possible, try an UPDATE. If that doesn't update anything, do an INSERT.
863.         if pk_set and not force_insert:
864.             base_qs = cls._base_manager.using(using)
865.             values = [(f, None, (getattr(self, f.attname) if raw else f.pre_save(self, False)))
866.                       for f in non_pks]
867.             forced_update = update_fields or force_update
868.             updated = self._do_update(base_qs, using, pk_val, values, update_fields,
869.                                       forced_update)
870.             if force_update and not updated:
871.                 raise DatabaseError("Forced update did not affect any rows.")
872.             if update_fields and not updated:
873.                 raise DatabaseError("Save with update_fields did not affect any rows.")
874.         if not updated:
875.             if meta.order_with_respect_to:
876.                 # If this is a model with an order_with_respect_to
877.                 # autopopulate the _order field
878.                 field = meta.order_with_respect_to
879.                 filter_args = field.get_filter_kwargs_for_object(self)
880.                 self._order = cls._base_manager.using(using).filter(**filter_args).aggregate(
881.                     _order__max=Coalesce(
882.                         ExpressionWrapper(Max('_order') + Value(1), output_field=IntegerField()),
883.                         Value(0),
884.                     ),
885.                 )['_order__max']
886.             fields = meta.local_concrete_fields
887.             if not pk_set:
888.                 fields = [f for f in fields if f is not meta.auto_field]
889. 
890.             returning_fields = meta.db_returning_fields
891.             results = self._do_insert(cls._base_manager, using, fields, returning_fields, raw)
892.             if results:
893.                 for value, field in zip(results[0], returning_fields):
894.                     setattr(self, field.attname, value)
895.         return updated
896. 
897.     def _do_update(self, base_qs, using, pk_val, values, update_fields, forced_update):
898.         """
899.         Try to update the model. Return True if the model was updated (if an
900.         update query was done and a matching row was found in the DB).
901.         """
902.         filtered = base_qs.filter(pk=pk_val)
903.         if not values:
904.             # We can end up here when saving a model in inheritance chain where
905.             # update_fields doesn't target any field in current model. In that
906.             # case we just say the update succeeded. Another case ending up here
907.             # is a model with just PK - in that case check that the PK still
908.             # exists.
909.             return update_fields is not None or filtered.exists()
910.         if self._meta.select_on_save and not forced_update:
911.             return (
912.                 filtered.exists() and
913.                 # It may happen that the object is deleted from the DB right after
914.                 # this check, causing the subsequent UPDATE to return zero matching
915.                 # rows. The same result can occur in some rare cases when the
916.                 # database returns zero despite the UPDATE being executed
917.                 # successfully (a row is matched and updated). In order to
918.                 # distinguish these two cases, the object's existence in the
919.                 # database is again checked for if the UPDATE query returns 0.
920.                 (filtered._update(values) > 0 or filtered.exists())
921.             )
922.         return filtered._update(values) > 0
923. 
924.     def _do_insert(self, manager, using, fields, returning_fields, raw):
925.         """
926.         Do an INSERT. If returning_fields is defined then this method should
927.         return the newly created data for the model.
928.         """
929.         return manager._insert(
930.             [self], fields=fields, returning_fields=returning_fields,
931.             using=using, raw=raw,
932.         )
933. 
934.     def delete(self, using=None, keep_parents=False):
935.         using = using or router.db_for_write(self.__class__, instance=self)
936.         assert self.pk is not None, (
937.             "%s object can't be deleted because its %s attribute is set to None." %
938.             (self._meta.object_name, self._meta.pk.attname)
939.         )
940. 
941.         collector = Collector(using=using)
942.         collector.collect([self], keep_parents=keep_parents)
943.         return collector.delete()
944. 
945.     delete.alters_data = True
946. 
947.     def _get_FIELD_display(self, field):
948.         value = getattr(self, field.attname)
949.         choices_dict = dict(make_hashable(field.flatchoices))
950.         # force_str() to coerce lazy strings.
951.         return force_str(choices_dict.get(make_hashable(value), value), strings_only=True)
952. 
953.     def _get_next_or_previous_by_FIELD(self, field, is_next, **kwargs):
954.         if not self.pk:
955.             raise ValueError("get_next/get_previous cannot be used on unsaved objects.")
956.         op = 'gt' if is_next else 'lt'
957.         order = '' if is_next else '-'
958.         param = getattr(self, field.attname)
959.         q = Q(**{'%s__%s' % (field.name, op): param})
960.         q = q | Q(**{field.name: param, 'pk__%s' % op: self.pk})
961.         qs = self.__class__._default_manager.using(self._state.db).filter(**kwargs).filter(q).order_by(
962.             '%s%s' % (order, field.name), '%spk' % order
963.         )
964.         try:
965.             return qs[0]
966.         except IndexError:
967.             raise self.DoesNotExist("%s matching query does not exist." % self.__class__._meta.object_name)
968. 
969.     def _get_next_or_previous_in_order(self, is_next):
970.         cachename = "__%s_order_cache" % is_next
971.         if not hasattr(self, cachename):
972.             op = 'gt' if is_next else 'lt'
973.             order = '_order' if is_next else '-_order'
974.             order_field = self._meta.order_with_respect_to
975.             filter_args = order_field.get_filter_kwargs_for_object(self)
976.             obj = self.__class__._default_manager.filter(**filter_args).filter(**{
977.                 '_order__%s' % op: self.__class__._default_manager.values('_order').filter(**{
978.                     self._meta.pk.name: self.pk
979.                 })
980.             }).order_by(order)[:1].get()
981.             setattr(self, cachename, obj)
982.         return getattr(self, cachename)
983. 
984.     def prepare_database_save(self, field):
985.         if self.pk is None:
986.             raise ValueError("Unsaved model instance %r cannot be used in an ORM query." % self)
987.         return getattr(self, field.remote_field.get_related_field().attname)
988. 
989.     def clean(self):
990.         """
991.         Hook for doing any extra model-wide validation after clean() has been
992.         called on every field by self.clean_fields. Any ValidationError raised
993.         by this method will not be associated with a particular field; it will
994.         have a special-case association with the field defined by NON_FIELD_ERRORS.
995.         """
996.         pass
997. 
998.     def validate_unique(self, exclude=None):
999.         """
1000.         Check unique constraints on the model and raise ValidationError if any
1001.         failed.


File: django/db/models/base.py
Line number range: 1001 - 1501
Content:
1001.         failed.
1002.         """
1003.         unique_checks, date_checks = self._get_unique_checks(exclude=exclude)
1004. 
1005.         errors = self._perform_unique_checks(unique_checks)
1006.         date_errors = self._perform_date_checks(date_checks)
1007. 
1008.         for k, v in date_errors.items():
1009.             errors.setdefault(k, []).extend(v)
1010. 
1011.         if errors:
1012.             raise ValidationError(errors)
1013. 
1014.     def _get_unique_checks(self, exclude=None):
1015.         """
1016.         Return a list of checks to perform. Since validate_unique() could be
1017.         called from a ModelForm, some fields may have been excluded; we can't
1018.         perform a unique check on a model that is missing fields involved
1019.         in that check. Fields that did not validate should also be excluded,
1020.         but they need to be passed in via the exclude argument.
1021.         """
1022.         if exclude is None:
1023.             exclude = []
1024.         unique_checks = []
1025. 
1026.         unique_togethers = [(self.__class__, self._meta.unique_together)]
1027.         constraints = [(self.__class__, self._meta.total_unique_constraints)]
1028.         for parent_class in self._meta.get_parent_list():
1029.             if parent_class._meta.unique_together:
1030.                 unique_togethers.append((parent_class, parent_class._meta.unique_together))
1031.             if parent_class._meta.total_unique_constraints:
1032.                 constraints.append(
1033.                     (parent_class, parent_class._meta.total_unique_constraints)
1034.                 )
1035. 
1036.         for model_class, unique_together in unique_togethers:
1037.             for check in unique_together:
1038.                 if not any(name in exclude for name in check):
1039.                     # Add the check if the field isn't excluded.
1040.                     unique_checks.append((model_class, tuple(check)))
1041. 
1042.         for model_class, model_constraints in constraints:
1043.             for constraint in model_constraints:
1044.                 if not any(name in exclude for name in constraint.fields):
1045.                     unique_checks.append((model_class, constraint.fields))
1046. 
1047.         # These are checks for the unique_for_<date/year/month>.
1048.         date_checks = []
1049. 
1050.         # Gather a list of checks for fields declared as unique and add them to
1051.         # the list of checks.
1052. 
1053.         fields_with_class = [(self.__class__, self._meta.local_fields)]
1054.         for parent_class in self._meta.get_parent_list():
1055.             fields_with_class.append((parent_class, parent_class._meta.local_fields))
1056. 
1057.         for model_class, fields in fields_with_class:
1058.             for f in fields:
1059.                 name = f.name
1060.                 if name in exclude:
1061.                     continue
1062.                 if f.unique:
1063.                     unique_checks.append((model_class, (name,)))
1064.                 if f.unique_for_date and f.unique_for_date not in exclude:
1065.                     date_checks.append((model_class, 'date', name, f.unique_for_date))
1066.                 if f.unique_for_year and f.unique_for_year not in exclude:
1067.                     date_checks.append((model_class, 'year', name, f.unique_for_year))
1068.                 if f.unique_for_month and f.unique_for_month not in exclude:
1069.                     date_checks.append((model_class, 'month', name, f.unique_for_month))
1070.         return unique_checks, date_checks
1071. 
1072.     def _perform_unique_checks(self, unique_checks):
1073.         errors = {}
1074. 
1075.         for model_class, unique_check in unique_checks:
1076.             # Try to look up an existing object with the same values as this
1077.             # object's values for all the unique field.
1078. 
1079.             lookup_kwargs = {}
1080.             for field_name in unique_check:
1081.                 f = self._meta.get_field(field_name)
1082.                 lookup_value = getattr(self, f.attname)
1083.                 # TODO: Handle multiple backends with different feature flags.
1084.                 if (lookup_value is None or
1085.                         (lookup_value == '' and connection.features.interprets_empty_strings_as_nulls)):
1086.                     # no value, skip the lookup
1087.                     continue
1088.                 if f.primary_key and not self._state.adding:
1089.                     # no need to check for unique primary key when editing
1090.                     continue
1091.                 lookup_kwargs[str(field_name)] = lookup_value
1092. 
1093.             # some fields were skipped, no reason to do the check
1094.             if len(unique_check) != len(lookup_kwargs):
1095.                 continue
1096. 
1097.             qs = model_class._default_manager.filter(**lookup_kwargs)
1098. 
1099.             # Exclude the current object from the query if we are editing an
1100.             # instance (as opposed to creating a new one)
1101.             # Note that we need to use the pk as defined by model_class, not
1102.             # self.pk. These can be different fields because model inheritance
1103.             # allows single model to have effectively multiple primary keys.
1104.             # Refs #17615.
1105.             model_class_pk = self._get_pk_val(model_class._meta)
1106.             if not self._state.adding and model_class_pk is not None:
1107.                 qs = qs.exclude(pk=model_class_pk)
1108.             if qs.exists():
1109.                 if len(unique_check) == 1:
1110.                     key = unique_check[0]
1111.                 else:
1112.                     key = NON_FIELD_ERRORS
1113.                 errors.setdefault(key, []).append(self.unique_error_message(model_class, unique_check))
1114. 
1115.         return errors
1116. 
1117.     def _perform_date_checks(self, date_checks):
1118.         errors = {}
1119.         for model_class, lookup_type, field, unique_for in date_checks:
1120.             lookup_kwargs = {}
1121.             # there's a ticket to add a date lookup, we can remove this special
1122.             # case if that makes it's way in
1123.             date = getattr(self, unique_for)
1124.             if date is None:
1125.                 continue
1126.             if lookup_type == 'date':
1127.                 lookup_kwargs['%s__day' % unique_for] = date.day
1128.                 lookup_kwargs['%s__month' % unique_for] = date.month
1129.                 lookup_kwargs['%s__year' % unique_for] = date.year
1130.             else:
1131.                 lookup_kwargs['%s__%s' % (unique_for, lookup_type)] = getattr(date, lookup_type)
1132.             lookup_kwargs[field] = getattr(self, field)
1133. 
1134.             qs = model_class._default_manager.filter(**lookup_kwargs)
1135.             # Exclude the current object from the query if we are editing an
1136.             # instance (as opposed to creating a new one)
1137.             if not self._state.adding and self.pk is not None:
1138.                 qs = qs.exclude(pk=self.pk)
1139. 
1140.             if qs.exists():
1141.                 errors.setdefault(field, []).append(
1142.                     self.date_error_message(lookup_type, field, unique_for)
1143.                 )
1144.         return errors
1145. 
1146.     def date_error_message(self, lookup_type, field_name, unique_for):
1147.         opts = self._meta
1148.         field = opts.get_field(field_name)
1149.         return ValidationError(
1150.             message=field.error_messages['unique_for_date'],
1151.             code='unique_for_date',
1152.             params={
1153.                 'model': self,
1154.                 'model_name': capfirst(opts.verbose_name),
1155.                 'lookup_type': lookup_type,
1156.                 'field': field_name,
1157.                 'field_label': capfirst(field.verbose_name),
1158.                 'date_field': unique_for,
1159.                 'date_field_label': capfirst(opts.get_field(unique_for).verbose_name),
1160.             }
1161.         )
1162. 
1163.     def unique_error_message(self, model_class, unique_check):
1164.         opts = model_class._meta
1165. 
1166.         params = {
1167.             'model': self,
1168.             'model_class': model_class,
1169.             'model_name': capfirst(opts.verbose_name),
1170.             'unique_check': unique_check,
1171.         }
1172. 
1173.         # A unique field
1174.         if len(unique_check) == 1:
1175.             field = opts.get_field(unique_check[0])
1176.             params['field_label'] = capfirst(field.verbose_name)
1177.             return ValidationError(
1178.                 message=field.error_messages['unique'],
1179.                 code='unique',
1180.                 params=params,
1181.             )
1182. 
1183.         # unique_together
1184.         else:
1185.             field_labels = [capfirst(opts.get_field(f).verbose_name) for f in unique_check]
1186.             params['field_labels'] = get_text_list(field_labels, _('and'))
1187.             return ValidationError(
1188.                 message=_("%(model_name)s with this %(field_labels)s already exists."),
1189.                 code='unique_together',
1190.                 params=params,
1191.             )
1192. 
1193.     def full_clean(self, exclude=None, validate_unique=True):
1194.         """
1195.         Call clean_fields(), clean(), and validate_unique() on the model.
1196.         Raise a ValidationError for any errors that occur.
1197.         """
1198.         errors = {}
1199.         if exclude is None:
1200.             exclude = []
1201.         else:
1202.             exclude = list(exclude)
1203. 
1204.         try:
1205.             self.clean_fields(exclude=exclude)
1206.         except ValidationError as e:
1207.             errors = e.update_error_dict(errors)
1208. 
1209.         # Form.clean() is run even if other validation fails, so do the
1210.         # same with Model.clean() for consistency.
1211.         try:
1212.             self.clean()
1213.         except ValidationError as e:
1214.             errors = e.update_error_dict(errors)
1215. 
1216.         # Run unique checks, but only for fields that passed validation.
1217.         if validate_unique:
1218.             for name in errors:
1219.                 if name != NON_FIELD_ERRORS and name not in exclude:
1220.                     exclude.append(name)
1221.             try:
1222.                 self.validate_unique(exclude=exclude)
1223.             except ValidationError as e:
1224.                 errors = e.update_error_dict(errors)
1225. 
1226.         if errors:
1227.             raise ValidationError(errors)
1228. 
1229.     def clean_fields(self, exclude=None):
1230.         """
1231.         Clean all fields and raise a ValidationError containing a dict
1232.         of all validation errors if any occur.
1233.         """
1234.         if exclude is None:
1235.             exclude = []
1236. 
1237.         errors = {}
1238.         for f in self._meta.fields:
1239.             if f.name in exclude:
1240.                 continue
1241.             # Skip validation for empty fields with blank=True. The developer
1242.             # is responsible for making sure they have a valid value.
1243.             raw_value = getattr(self, f.attname)
1244.             if f.blank and raw_value in f.empty_values:
1245.                 continue
1246.             try:
1247.                 setattr(self, f.attname, f.clean(raw_value, self))
1248.             except ValidationError as e:
1249.                 errors[f.name] = e.error_list
1250. 
1251.         if errors:
1252.             raise ValidationError(errors)
1253. 
1254.     @classmethod
1255.     def check(cls, **kwargs):
1256.         errors = [*cls._check_swappable(), *cls._check_model(), *cls._check_managers(**kwargs)]
1257.         if not cls._meta.swapped:
1258.             databases = kwargs.get('databases') or []
1259.             errors += [
1260.                 *cls._check_fields(**kwargs),
1261.                 *cls._check_m2m_through_same_relationship(),
1262.                 *cls._check_long_column_names(databases),
1263.             ]
1264.             clash_errors = (
1265.                 *cls._check_id_field(),
1266.                 *cls._check_field_name_clashes(),
1267.                 *cls._check_model_name_db_lookup_clashes(),
1268.                 *cls._check_property_name_related_field_accessor_clashes(),
1269.                 *cls._check_single_primary_key(),
1270.             )
1271.             errors.extend(clash_errors)
1272.             # If there are field name clashes, hide consequent column name
1273.             # clashes.
1274.             if not clash_errors:
1275.                 errors.extend(cls._check_column_name_clashes())
1276.             errors += [
1277.                 *cls._check_index_together(),
1278.                 *cls._check_unique_together(),
1279.                 *cls._check_indexes(databases),
1280.                 *cls._check_ordering(),
1281.                 *cls._check_constraints(databases),
1282.             ]
1283. 
1284.         return errors
1285. 
1286.     @classmethod
1287.     def _check_swappable(cls):
1288.         """Check if the swapped model exists."""
1289.         errors = []
1290.         if cls._meta.swapped:
1291.             try:
1292.                 apps.get_model(cls._meta.swapped)
1293.             except ValueError:
1294.                 errors.append(
1295.                     checks.Error(
1296.                         "'%s' is not of the form 'app_label.app_name'." % cls._meta.swappable,
1297.                         id='models.E001',
1298.                     )
1299.                 )
1300.             except LookupError:
1301.                 app_label, model_name = cls._meta.swapped.split('.')
1302.                 errors.append(
1303.                     checks.Error(
1304.                         "'%s' references '%s.%s', which has not been "
1305.                         "installed, or is abstract." % (
1306.                             cls._meta.swappable, app_label, model_name
1307.                         ),
1308.                         id='models.E002',
1309.                     )
1310.                 )
1311.         return errors
1312. 
1313.     @classmethod
1314.     def _check_model(cls):
1315.         errors = []
1316.         if cls._meta.proxy:
1317.             if cls._meta.local_fields or cls._meta.local_many_to_many:
1318.                 errors.append(
1319.                     checks.Error(
1320.                         "Proxy model '%s' contains model fields." % cls.__name__,
1321.                         id='models.E017',
1322.                     )
1323.                 )
1324.         return errors
1325. 
1326.     @classmethod
1327.     def _check_managers(cls, **kwargs):
1328.         """Perform all manager checks."""
1329.         errors = []
1330.         for manager in cls._meta.managers:
1331.             errors.extend(manager.check(**kwargs))
1332.         return errors
1333. 
1334.     @classmethod
1335.     def _check_fields(cls, **kwargs):
1336.         """Perform all field checks."""
1337.         errors = []
1338.         for field in cls._meta.local_fields:
1339.             errors.extend(field.check(**kwargs))
1340.         for field in cls._meta.local_many_to_many:
1341.             errors.extend(field.check(from_model=cls, **kwargs))
1342.         return errors
1343. 
1344.     @classmethod
1345.     def _check_m2m_through_same_relationship(cls):
1346.         """ Check if no relationship model is used by more than one m2m field.
1347.         """
1348. 
1349.         errors = []
1350.         seen_intermediary_signatures = []
1351. 
1352.         fields = cls._meta.local_many_to_many
1353. 
1354.         # Skip when the target model wasn't found.
1355.         fields = (f for f in fields if isinstance(f.remote_field.model, ModelBase))
1356. 
1357.         # Skip when the relationship model wasn't found.
1358.         fields = (f for f in fields if isinstance(f.remote_field.through, ModelBase))
1359. 
1360.         for f in fields:
1361.             signature = (f.remote_field.model, cls, f.remote_field.through, f.remote_field.through_fields)
1362.             if signature in seen_intermediary_signatures:
1363.                 errors.append(
1364.                     checks.Error(
1365.                         "The model has two identical many-to-many relations "
1366.                         "through the intermediate model '%s'." %
1367.                         f.remote_field.through._meta.label,
1368.                         obj=cls,
1369.                         id='models.E003',
1370.                     )
1371.                 )
1372.             else:
1373.                 seen_intermediary_signatures.append(signature)
1374.         return errors
1375. 
1376.     @classmethod
1377.     def _check_id_field(cls):
1378.         """Check if `id` field is a primary key."""
1379.         fields = [f for f in cls._meta.local_fields if f.name == 'id' and f != cls._meta.pk]
1380.         # fields is empty or consists of the invalid "id" field
1381.         if fields and not fields[0].primary_key and cls._meta.pk.name == 'id':
1382.             return [
1383.                 checks.Error(
1384.                     "'id' can only be used as a field name if the field also "
1385.                     "sets 'primary_key=True'.",
1386.                     obj=cls,
1387.                     id='models.E004',
1388.                 )
1389.             ]
1390.         else:
1391.             return []
1392. 
1393.     @classmethod
1394.     def _check_field_name_clashes(cls):
1395.         """Forbid field shadowing in multi-table inheritance."""
1396.         errors = []
1397.         used_fields = {}  # name or attname -> field
1398. 
1399.         # Check that multi-inheritance doesn't cause field name shadowing.
1400.         for parent in cls._meta.get_parent_list():
1401.             for f in parent._meta.local_fields:
1402.                 clash = used_fields.get(f.name) or used_fields.get(f.attname) or None
1403.                 if clash:
1404.                     errors.append(
1405.                         checks.Error(
1406.                             "The field '%s' from parent model "
1407.                             "'%s' clashes with the field '%s' "
1408.                             "from parent model '%s'." % (
1409.                                 clash.name, clash.model._meta,
1410.                                 f.name, f.model._meta
1411.                             ),
1412.                             obj=cls,
1413.                             id='models.E005',
1414.                         )
1415.                     )
1416.                 used_fields[f.name] = f
1417.                 used_fields[f.attname] = f
1418. 
1419.         # Check that fields defined in the model don't clash with fields from
1420.         # parents, including auto-generated fields like multi-table inheritance
1421.         # child accessors.
1422.         for parent in cls._meta.get_parent_list():
1423.             for f in parent._meta.get_fields():
1424.                 if f not in used_fields:
1425.                     used_fields[f.name] = f
1426. 
1427.         for f in cls._meta.local_fields:
1428.             clash = used_fields.get(f.name) or used_fields.get(f.attname) or None
1429.             # Note that we may detect clash between user-defined non-unique
1430.             # field "id" and automatically added unique field "id", both
1431.             # defined at the same model. This special case is considered in
1432.             # _check_id_field and here we ignore it.
1433.             id_conflict = f.name == "id" and clash and clash.name == "id" and clash.model == cls
1434.             if clash and not id_conflict:
1435.                 errors.append(
1436.                     checks.Error(
1437.                         "The field '%s' clashes with the field '%s' "
1438.                         "from model '%s'." % (
1439.                             f.name, clash.name, clash.model._meta
1440.                         ),
1441.                         obj=f,
1442.                         id='models.E006',
1443.                     )
1444.                 )
1445.             used_fields[f.name] = f
1446.             used_fields[f.attname] = f
1447. 
1448.         return errors
1449. 
1450.     @classmethod
1451.     def _check_column_name_clashes(cls):
1452.         # Store a list of column names which have already been used by other fields.
1453.         used_column_names = []
1454.         errors = []
1455. 
1456.         for f in cls._meta.local_fields:
1457.             _, column_name = f.get_attname_column()
1458. 
1459.             # Ensure the column name is not already in use.
1460.             if column_name and column_name in used_column_names:
1461.                 errors.append(
1462.                     checks.Error(
1463.                         "Field '%s' has column name '%s' that is used by "
1464.                         "another field." % (f.name, column_name),
1465.                         hint="Specify a 'db_column' for the field.",
1466.                         obj=cls,
1467.                         id='models.E007'
1468.                     )
1469.                 )
1470.             else:
1471.                 used_column_names.append(column_name)
1472. 
1473.         return errors
1474. 
1475.     @classmethod
1476.     def _check_model_name_db_lookup_clashes(cls):
1477.         errors = []
1478.         model_name = cls.__name__
1479.         if model_name.startswith('_') or model_name.endswith('_'):
1480.             errors.append(
1481.                 checks.Error(
1482.                     "The model name '%s' cannot start or end with an underscore "
1483.                     "as it collides with the query lookup syntax." % model_name,
1484.                     obj=cls,
1485.                     id='models.E023'
1486.                 )
1487.             )
1488.         elif LOOKUP_SEP in model_name:
1489.             errors.append(
1490.                 checks.Error(
1491.                     "The model name '%s' cannot contain double underscores as "
1492.                     "it collides with the query lookup syntax." % model_name,
1493.                     obj=cls,
1494.                     id='models.E024'
1495.                 )
1496.             )
1497.         return errors
1498. 
1499.     @classmethod
1500.     def _check_property_name_related_field_accessor_clashes(cls):
1501.         errors = []


File: django/db/models/base.py
Line number range: 1501 - 2001
Content:
1501.         errors = []
1502.         property_names = cls._meta._property_names
1503.         related_field_accessors = (
1504.             f.get_attname() for f in cls._meta._get_fields(reverse=False)
1505.             if f.is_relation and f.related_model is not None
1506.         )
1507.         for accessor in related_field_accessors:
1508.             if accessor in property_names:
1509.                 errors.append(
1510.                     checks.Error(
1511.                         "The property '%s' clashes with a related field "
1512.                         "accessor." % accessor,
1513.                         obj=cls,
1514.                         id='models.E025',
1515.                     )
1516.                 )
1517.         return errors
1518. 
1519.     @classmethod
1520.     def _check_single_primary_key(cls):
1521.         errors = []
1522.         if sum(1 for f in cls._meta.local_fields if f.primary_key) > 1:
1523.             errors.append(
1524.                 checks.Error(
1525.                     "The model cannot have more than one field with "
1526.                     "'primary_key=True'.",
1527.                     obj=cls,
1528.                     id='models.E026',
1529.                 )
1530.             )
1531.         return errors
1532. 
1533.     @classmethod
1534.     def _check_index_together(cls):
1535.         """Check the value of "index_together" option."""
1536.         if not isinstance(cls._meta.index_together, (tuple, list)):
1537.             return [
1538.                 checks.Error(
1539.                     "'index_together' must be a list or tuple.",
1540.                     obj=cls,
1541.                     id='models.E008',
1542.                 )
1543.             ]
1544. 
1545.         elif any(not isinstance(fields, (tuple, list)) for fields in cls._meta.index_together):
1546.             return [
1547.                 checks.Error(
1548.                     "All 'index_together' elements must be lists or tuples.",
1549.                     obj=cls,
1550.                     id='models.E009',
1551.                 )
1552.             ]
1553. 
1554.         else:
1555.             errors = []
1556.             for fields in cls._meta.index_together:
1557.                 errors.extend(cls._check_local_fields(fields, "index_together"))
1558.             return errors
1559. 
1560.     @classmethod
1561.     def _check_unique_together(cls):
1562.         """Check the value of "unique_together" option."""
1563.         if not isinstance(cls._meta.unique_together, (tuple, list)):
1564.             return [
1565.                 checks.Error(
1566.                     "'unique_together' must be a list or tuple.",
1567.                     obj=cls,
1568.                     id='models.E010',
1569.                 )
1570.             ]
1571. 
1572.         elif any(not isinstance(fields, (tuple, list)) for fields in cls._meta.unique_together):
1573.             return [
1574.                 checks.Error(
1575.                     "All 'unique_together' elements must be lists or tuples.",
1576.                     obj=cls,
1577.                     id='models.E011',
1578.                 )
1579.             ]
1580. 
1581.         else:
1582.             errors = []
1583.             for fields in cls._meta.unique_together:
1584.                 errors.extend(cls._check_local_fields(fields, "unique_together"))
1585.             return errors
1586. 
1587.     @classmethod
1588.     def _check_indexes(cls, databases):
1589.         """Check fields, names, and conditions of indexes."""
1590.         errors = []
1591.         for index in cls._meta.indexes:
1592.             # Index name can't start with an underscore or a number, restricted
1593.             # for cross-database compatibility with Oracle.
1594.             if index.name[0] == '_' or index.name[0].isdigit():
1595.                 errors.append(
1596.                     checks.Error(
1597.                         "The index name '%s' cannot start with an underscore "
1598.                         "or a number." % index.name,
1599.                         obj=cls,
1600.                         id='models.E033',
1601.                     ),
1602.                 )
1603.             if len(index.name) > index.max_name_length:
1604.                 errors.append(
1605.                     checks.Error(
1606.                         "The index name '%s' cannot be longer than %d "
1607.                         "characters." % (index.name, index.max_name_length),
1608.                         obj=cls,
1609.                         id='models.E034',
1610.                     ),
1611.                 )
1612.         for db in databases:
1613.             if not router.allow_migrate_model(db, cls):
1614.                 continue
1615.             connection = connections[db]
1616.             if (
1617.                 connection.features.supports_partial_indexes or
1618.                 'supports_partial_indexes' in cls._meta.required_db_features
1619.             ):
1620.                 continue
1621.             if any(index.condition is not None for index in cls._meta.indexes):
1622.                 errors.append(
1623.                     checks.Warning(
1624.                         '%s does not support indexes with conditions.'
1625.                         % connection.display_name,
1626.                         hint=(
1627.                             "Conditions will be ignored. Silence this warning "
1628.                             "if you don't care about it."
1629.                         ),
1630.                         obj=cls,
1631.                         id='models.W037',
1632.                     )
1633.                 )
1634.         fields = [field for index in cls._meta.indexes for field, _ in index.fields_orders]
1635.         errors.extend(cls._check_local_fields(fields, 'indexes'))
1636.         return errors
1637. 
1638.     @classmethod
1639.     def _check_local_fields(cls, fields, option):
1640.         from django.db import models
1641. 
1642.         # In order to avoid hitting the relation tree prematurely, we use our
1643.         # own fields_map instead of using get_field()
1644.         forward_fields_map = {}
1645.         for field in cls._meta._get_fields(reverse=False):
1646.             forward_fields_map[field.name] = field
1647.             if hasattr(field, 'attname'):
1648.                 forward_fields_map[field.attname] = field
1649. 
1650.         errors = []
1651.         for field_name in fields:
1652.             try:
1653.                 field = forward_fields_map[field_name]
1654.             except KeyError:
1655.                 errors.append(
1656.                     checks.Error(
1657.                         "'%s' refers to the nonexistent field '%s'." % (
1658.                             option, field_name,
1659.                         ),
1660.                         obj=cls,
1661.                         id='models.E012',
1662.                     )
1663.                 )
1664.             else:
1665.                 if isinstance(field.remote_field, models.ManyToManyRel):
1666.                     errors.append(
1667.                         checks.Error(
1668.                             "'%s' refers to a ManyToManyField '%s', but "
1669.                             "ManyToManyFields are not permitted in '%s'." % (
1670.                                 option, field_name, option,
1671.                             ),
1672.                             obj=cls,
1673.                             id='models.E013',
1674.                         )
1675.                     )
1676.                 elif field not in cls._meta.local_fields:
1677.                     errors.append(
1678.                         checks.Error(
1679.                             "'%s' refers to field '%s' which is not local to model '%s'."
1680.                             % (option, field_name, cls._meta.object_name),
1681.                             hint="This issue may be caused by multi-table inheritance.",
1682.                             obj=cls,
1683.                             id='models.E016',
1684.                         )
1685.                     )
1686.         return errors
1687. 
1688.     @classmethod
1689.     def _check_ordering(cls):
1690.         """
1691.         Check "ordering" option -- is it a list of strings and do all fields
1692.         exist?
1693.         """
1694.         if cls._meta._ordering_clash:
1695.             return [
1696.                 checks.Error(
1697.                     "'ordering' and 'order_with_respect_to' cannot be used together.",
1698.                     obj=cls,
1699.                     id='models.E021',
1700.                 ),
1701.             ]
1702. 
1703.         if cls._meta.order_with_respect_to or not cls._meta.ordering:
1704.             return []
1705. 
1706.         if not isinstance(cls._meta.ordering, (list, tuple)):
1707.             return [
1708.                 checks.Error(
1709.                     "'ordering' must be a tuple or list (even if you want to order by only one field).",
1710.                     obj=cls,
1711.                     id='models.E014',
1712.                 )
1713.             ]
1714. 
1715.         errors = []
1716.         fields = cls._meta.ordering
1717. 
1718.         # Skip expressions and '?' fields.
1719.         fields = (f for f in fields if isinstance(f, str) and f != '?')
1720. 
1721.         # Convert "-field" to "field".
1722.         fields = ((f[1:] if f.startswith('-') else f) for f in fields)
1723. 
1724.         # Separate related fields and non-related fields.
1725.         _fields = []
1726.         related_fields = []
1727.         for f in fields:
1728.             if LOOKUP_SEP in f:
1729.                 related_fields.append(f)
1730.             else:
1731.                 _fields.append(f)
1732.         fields = _fields
1733. 
1734.         # Check related fields.
1735.         for field in related_fields:
1736.             _cls = cls
1737.             fld = None
1738.             for part in field.split(LOOKUP_SEP):
1739.                 try:
1740.                     # pk is an alias that won't be found by opts.get_field.
1741.                     if part == 'pk':
1742.                         fld = _cls._meta.pk
1743.                     else:
1744.                         fld = _cls._meta.get_field(part)
1745.                     if fld.is_relation:
1746.                         _cls = fld.get_path_info()[-1].to_opts.model
1747.                     else:
1748.                         _cls = None
1749.                 except (FieldDoesNotExist, AttributeError):
1750.                     if fld is None or fld.get_transform(part) is None:
1751.                         errors.append(
1752.                             checks.Error(
1753.                                 "'ordering' refers to the nonexistent field, "
1754.                                 "related field, or lookup '%s'." % field,
1755.                                 obj=cls,
1756.                                 id='models.E015',
1757.                             )
1758.                         )
1759. 
1760.         # Skip ordering on pk. This is always a valid order_by field
1761.         # but is an alias and therefore won't be found by opts.get_field.
1762.         fields = {f for f in fields if f != 'pk'}
1763. 
1764.         # Check for invalid or nonexistent fields in ordering.
1765.         invalid_fields = []
1766. 
1767.         # Any field name that is not present in field_names does not exist.
1768.         # Also, ordering by m2m fields is not allowed.
1769.         opts = cls._meta
1770.         valid_fields = set(chain.from_iterable(
1771.             (f.name, f.attname) if not (f.auto_created and not f.concrete) else (f.field.related_query_name(),)
1772.             for f in chain(opts.fields, opts.related_objects)
1773.         ))
1774. 
1775.         invalid_fields.extend(fields - valid_fields)
1776. 
1777.         for invalid_field in invalid_fields:
1778.             errors.append(
1779.                 checks.Error(
1780.                     "'ordering' refers to the nonexistent field, related "
1781.                     "field, or lookup '%s'." % invalid_field,
1782.                     obj=cls,
1783.                     id='models.E015',
1784.                 )
1785.             )
1786.         return errors
1787. 
1788.     @classmethod
1789.     def _check_long_column_names(cls, databases):
1790.         """
1791.         Check that any auto-generated column names are shorter than the limits
1792.         for each database in which the model will be created.
1793.         """
1794.         if not databases:
1795.             return []
1796.         errors = []
1797.         allowed_len = None
1798.         db_alias = None
1799. 
1800.         # Find the minimum max allowed length among all specified db_aliases.
1801.         for db in databases:
1802.             # skip databases where the model won't be created
1803.             if not router.allow_migrate_model(db, cls):
1804.                 continue
1805.             connection = connections[db]
1806.             max_name_length = connection.ops.max_name_length()
1807.             if max_name_length is None or connection.features.truncates_names:
1808.                 continue
1809.             else:
1810.                 if allowed_len is None:
1811.                     allowed_len = max_name_length
1812.                     db_alias = db
1813.                 elif max_name_length < allowed_len:
1814.                     allowed_len = max_name_length
1815.                     db_alias = db
1816. 
1817.         if allowed_len is None:
1818.             return errors
1819. 
1820.         for f in cls._meta.local_fields:
1821.             _, column_name = f.get_attname_column()
1822. 
1823.             # Check if auto-generated name for the field is too long
1824.             # for the database.
1825.             if f.db_column is None and column_name is not None and len(column_name) > allowed_len:
1826.                 errors.append(
1827.                     checks.Error(
1828.                         'Autogenerated column name too long for field "%s". '
1829.                         'Maximum length is "%s" for database "%s".'
1830.                         % (column_name, allowed_len, db_alias),
1831.                         hint="Set the column name manually using 'db_column'.",
1832.                         obj=cls,
1833.                         id='models.E018',
1834.                     )
1835.                 )
1836. 
1837.         for f in cls._meta.local_many_to_many:
1838.             # Skip nonexistent models.
1839.             if isinstance(f.remote_field.through, str):
1840.                 continue
1841. 
1842.             # Check if auto-generated name for the M2M field is too long
1843.             # for the database.
1844.             for m2m in f.remote_field.through._meta.local_fields:
1845.                 _, rel_name = m2m.get_attname_column()
1846.                 if m2m.db_column is None and rel_name is not None and len(rel_name) > allowed_len:
1847.                     errors.append(
1848.                         checks.Error(
1849.                             'Autogenerated column name too long for M2M field '
1850.                             '"%s". Maximum length is "%s" for database "%s".'
1851.                             % (rel_name, allowed_len, db_alias),
1852.                             hint=(
1853.                                 "Use 'through' to create a separate model for "
1854.                                 "M2M and then set column_name using 'db_column'."
1855.                             ),
1856.                             obj=cls,
1857.                             id='models.E019',
1858.                         )
1859.                     )
1860. 
1861.         return errors
1862. 
1863.     @classmethod
1864.     def _check_constraints(cls, databases):
1865.         errors = []
1866.         for db in databases:
1867.             if not router.allow_migrate_model(db, cls):
1868.                 continue
1869.             connection = connections[db]
1870.             if not (
1871.                 connection.features.supports_table_check_constraints or
1872.                 'supports_table_check_constraints' in cls._meta.required_db_features
1873.             ) and any(
1874.                 isinstance(constraint, CheckConstraint)
1875.                 for constraint in cls._meta.constraints
1876.             ):
1877.                 errors.append(
1878.                     checks.Warning(
1879.                         '%s does not support check constraints.' % connection.display_name,
1880.                         hint=(
1881.                             "A constraint won't be created. Silence this "
1882.                             "warning if you don't care about it."
1883.                         ),
1884.                         obj=cls,
1885.                         id='models.W027',
1886.                     )
1887.                 )
1888.             if not (
1889.                 connection.features.supports_partial_indexes or
1890.                 'supports_partial_indexes' in cls._meta.required_db_features
1891.             ) and any(
1892.                 isinstance(constraint, UniqueConstraint) and constraint.condition is not None
1893.                 for constraint in cls._meta.constraints
1894.             ):
1895.                 errors.append(
1896.                     checks.Warning(
1897.                         '%s does not support unique constraints with '
1898.                         'conditions.' % connection.display_name,
1899.                         hint=(
1900.                             "A constraint won't be created. Silence this "
1901.                             "warning if you don't care about it."
1902.                         ),
1903.                         obj=cls,
1904.                         id='models.W036',
1905.                     )
1906.                 )
1907.             if not (
1908.                 connection.features.supports_deferrable_unique_constraints or
1909.                 'supports_deferrable_unique_constraints' in cls._meta.required_db_features
1910.             ) and any(
1911.                 isinstance(constraint, UniqueConstraint) and constraint.deferrable is not None
1912.                 for constraint in cls._meta.constraints
1913.             ):
1914.                 errors.append(
1915.                     checks.Warning(
1916.                         '%s does not support deferrable unique constraints.'
1917.                         % connection.display_name,
1918.                         hint=(
1919.                             "A constraint won't be created. Silence this "
1920.                             "warning if you don't care about it."
1921.                         ),
1922.                         obj=cls,
1923.                         id='models.W038',
1924.                     )
1925.                 )
1926.         return errors
1927. 
1928. 
1929. ############################################
1930. # HELPER FUNCTIONS (CURRIED MODEL METHODS) #
1931. ############################################
1932. 
1933. # ORDERING METHODS #########################
1934. 
1935. def method_set_order(self, ordered_obj, id_list, using=None):
1936.     if using is None:
1937.         using = DEFAULT_DB_ALIAS
1938.     order_wrt = ordered_obj._meta.order_with_respect_to
1939.     filter_args = order_wrt.get_forward_related_filter(self)
1940.     ordered_obj.objects.db_manager(using).filter(**filter_args).bulk_update([
1941.         ordered_obj(pk=pk, _order=order) for order, pk in enumerate(id_list)
1942.     ], ['_order'])
1943. 
1944. 
1945. def method_get_order(self, ordered_obj):
1946.     order_wrt = ordered_obj._meta.order_with_respect_to
1947.     filter_args = order_wrt.get_forward_related_filter(self)
1948.     pk_name = ordered_obj._meta.pk.name
1949.     return ordered_obj.objects.filter(**filter_args).values_list(pk_name, flat=True)
1950. 
1951. 
1952. def make_foreign_order_accessors(model, related_model):
1953.     setattr(
1954.         related_model,
1955.         'get_%s_order' % model.__name__.lower(),
1956.         partialmethod(method_get_order, model)
1957.     )
1958.     setattr(
1959.         related_model,
1960.         'set_%s_order' % model.__name__.lower(),
1961.         partialmethod(method_set_order, model)
1962.     )
1963. 
1964. ########
1965. # MISC #
1966. ########
1967. 
1968. 
1969. def model_unpickle(model_id):
1970.     """Used to unpickle Model subclasses with deferred fields."""
1971.     if isinstance(model_id, tuple):
1972.         model = apps.get_model(*model_id)
1973.     else:
1974.         # Backwards compat - the model was cached directly in earlier versions.
1975.         model = model_id
1976.     return model.__new__(model)
1977. 
1978. 
1979. model_unpickle.__safe_for_unpickle__ = True

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 21:38:49,196 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user has requested the full content of the file `django/db/models/base.py`. The provided context contains the entire file content from line 1 to 1979.', relative_path='django/db/models/base.py', start_line=1, end_line=1979)]
2025-12-21 21:38:49,198 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file `django/db/models/base.py`.
2025-12-21 21:38:49,198 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 21:38:49,198 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 21:38:49,198 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-21 21:38:49,198 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-21 21:38:49,199 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: models.E015 is raised when ordering uses lookups that are not transforms.

Description: Description
	
./manage.py check
SystemCheckError: System check identified some issues:
ERRORS:
app.Stock: (models.E015) 'ordering' refers to the nonexistent field, related field, or lookup 'supply__product__parent__isnull'.
However this ordering works fine:
>>> list(Stock.objects.order_by('supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[1292, 1293, 1300, 1295, 1294]
>>> list(Stock.objects.order_by('-supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[108, 109, 110, 23, 107]
I believe it was fine until #29408 was implemented.
Stock.supply is a foreign key to Supply, Supply.product is a foreign key to Product, Product.parent is a ForeignKey('self', models.CASCADE, null=True)

Patch information:
diff --git a/django/db/models/base.py b/django/db/models/base.py
index 6c9e9d3707..f8f0734438 100644
--- a/django/db/models/base.py
+++ b/django/db/models/base.py
@@ -1735,7 +1735,8 @@ class Model(metaclass=ModelBase):
         for field in related_fields:
             _cls = cls
             fld = None
-            for part in field.split(LOOKUP_SEP):
+            parts = field.split(LOOKUP_SEP)
+            for idx, part in enumerate(parts):
                 try:
                     # pk is an alias that won't be found by opts.get_field.
                     if part == 'pk':
@@ -1747,7 +1748,7 @@ class Model(metaclass=ModelBase):
                     else:
                         _cls = None
                 except (FieldDoesNotExist, AttributeError):
-                    if fld is None or fld.get_transform(part) is None:
+                    if fld is None:
                         errors.append(
                             checks.Error(
                                 "'ordering' refers to the nonexistent field, "
@@ -1756,6 +1757,31 @@ class Model(metaclass=ModelBase):
                                 id='models.E015',
                             )
                         )
+                        break
+                    # For the final part, allow either a transform or a lookup.
+                    if idx == len(parts) - 1:
+                        if fld.get_transform(part) is None and fld.get_lookup(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
+                    else:
+                        # Intermediate parts must be valid transforms.
+                        if fld.get_transform(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
 
         # Skip ordering on pk. This is always a valid order_by field
         # but is an alias and therefore won't be found by opts.get_field.


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file `django/db/models/base.py`.
Extra Requirements: 
Purpose: This will allow me to examine the entire `_check_ordering` method and the `Model` class to understand the environment where the patch is being applied.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/base.py
Line number range: 1 - 1979
Content:
1. import copy
2. import inspect
3. import warnings
4. from functools import partialmethod
5. from itertools import chain
6. 
7. from django.apps import apps
8. from django.conf import settings
9. from django.core import checks
10. from django.core.exceptions import (
11.     NON_FIELD_ERRORS, FieldDoesNotExist, FieldError, MultipleObjectsReturned,
12.     ObjectDoesNotExist, ValidationError,
13. )
14. from django.db import (
15.     DEFAULT_DB_ALIAS, DJANGO_VERSION_PICKLE_KEY, DatabaseError, connection,
16.     connections, router, transaction,
17. )
18. from django.db.models import (
19.     NOT_PROVIDED, ExpressionWrapper, IntegerField, Max, Value,
20. )
21. from django.db.models.constants import LOOKUP_SEP
22. from django.db.models.constraints import CheckConstraint, UniqueConstraint
23. from django.db.models.deletion import CASCADE, Collector
24. from django.db.models.fields.related import (
25.     ForeignObjectRel, OneToOneField, lazy_related_operation, resolve_relation,
26. )
27. from django.db.models.functions import Coalesce
28. from django.db.models.manager import Manager
29. from django.db.models.options import Options
30. from django.db.models.query import Q
31. from django.db.models.signals import (
32.     class_prepared, post_init, post_save, pre_init, pre_save,
33. )
34. from django.db.models.utils import make_model_tuple
35. from django.utils.encoding import force_str
36. from django.utils.hashable import make_hashable
37. from django.utils.text import capfirst, get_text_list
38. from django.utils.translation import gettext_lazy as _
39. from django.utils.version import get_version
40. 
41. 
42. class Deferred:
43.     def __repr__(self):
44.         return '<Deferred field>'
45. 
46.     def __str__(self):
47.         return '<Deferred field>'
48. 
49. 
50. DEFERRED = Deferred()
51. 
52. 
53. def subclass_exception(name, bases, module, attached_to):
54.     """
55.     Create exception subclass. Used by ModelBase below.
56. 
57.     The exception is created in a way that allows it to be pickled, assuming
58.     that the returned exception class will be added as an attribute to the
59.     'attached_to' class.
60.     """
61.     return type(name, bases, {
62.         '__module__': module,
63.         '__qualname__': '%s.%s' % (attached_to.__qualname__, name),
64.     })
65. 
66. 
67. def _has_contribute_to_class(value):
68.     # Only call contribute_to_class() if it's bound.
69.     return not inspect.isclass(value) and hasattr(value, 'contribute_to_class')
70. 
71. 
72. class ModelBase(type):
73.     """Metaclass for all models."""
74.     def __new__(cls, name, bases, attrs, **kwargs):
75.         super_new = super().__new__
76. 
77.         # Also ensure initialization is only performed for subclasses of Model
78.         # (excluding Model class itself).
79.         parents = [b for b in bases if isinstance(b, ModelBase)]
80.         if not parents:
81.             return super_new(cls, name, bases, attrs)
82. 
83.         # Create the class.
84.         module = attrs.pop('__module__')
85.         new_attrs = {'__module__': module}
86.         classcell = attrs.pop('__classcell__', None)
87.         if classcell is not None:
88.             new_attrs['__classcell__'] = classcell
89.         attr_meta = attrs.pop('Meta', None)
90.         # Pass all attrs without a (Django-specific) contribute_to_class()
91.         # method to type.__new__() so that they're properly initialized
92.         # (i.e. __set_name__()).
93.         contributable_attrs = {}
94.         for obj_name, obj in list(attrs.items()):
95.             if _has_contribute_to_class(obj):
96.                 contributable_attrs[obj_name] = obj
97.             else:
98.                 new_attrs[obj_name] = obj
99.         new_class = super_new(cls, name, bases, new_attrs, **kwargs)
100. 
101.         abstract = getattr(attr_meta, 'abstract', False)
102.         meta = attr_meta or getattr(new_class, 'Meta', None)
103.         base_meta = getattr(new_class, '_meta', None)
104. 
105.         app_label = None
106. 
107.         # Look for an application configuration to attach the model to.
108.         app_config = apps.get_containing_app_config(module)
109. 
110.         if getattr(meta, 'app_label', None) is None:
111.             if app_config is None:
112.                 if not abstract:
113.                     raise RuntimeError(
114.                         "Model class %s.%s doesn't declare an explicit "
115.                         "app_label and isn't in an application in "
116.                         "INSTALLED_APPS." % (module, name)
117.                     )
118. 
119.             else:
120.                 app_label = app_config.label
121. 
122.         new_class.add_to_class('_meta', Options(meta, app_label))
123.         if not abstract:
124.             new_class.add_to_class(
125.                 'DoesNotExist',
126.                 subclass_exception(
127.                     'DoesNotExist',
128.                     tuple(
129.                         x.DoesNotExist for x in parents if hasattr(x, '_meta') and not x._meta.abstract
130.                     ) or (ObjectDoesNotExist,),
131.                     module,
132.                     attached_to=new_class))
133.             new_class.add_to_class(
134.                 'MultipleObjectsReturned',
135.                 subclass_exception(
136.                     'MultipleObjectsReturned',
137.                     tuple(
138.                         x.MultipleObjectsReturned for x in parents if hasattr(x, '_meta') and not x._meta.abstract
139.                     ) or (MultipleObjectsReturned,),
140.                     module,
141.                     attached_to=new_class))
142.             if base_meta and not base_meta.abstract:
143.                 # Non-abstract child classes inherit some attributes from their
144.                 # non-abstract parent (unless an ABC comes before it in the
145.                 # method resolution order).
146.                 if not hasattr(meta, 'ordering'):
147.                     new_class._meta.ordering = base_meta.ordering
148.                 if not hasattr(meta, 'get_latest_by'):
149.                     new_class._meta.get_latest_by = base_meta.get_latest_by
150. 
151.         is_proxy = new_class._meta.proxy
152. 
153.         # If the model is a proxy, ensure that the base class
154.         # hasn't been swapped out.
155.         if is_proxy and base_meta and base_meta.swapped:
156.             raise TypeError("%s cannot proxy the swapped model '%s'." % (name, base_meta.swapped))
157. 
158.         # Add remaining attributes (those with a contribute_to_class() method)
159.         # to the class.
160.         for obj_name, obj in contributable_attrs.items():
161.             new_class.add_to_class(obj_name, obj)
162. 
163.         # All the fields of any type declared on this model
164.         new_fields = chain(
165.             new_class._meta.local_fields,
166.             new_class._meta.local_many_to_many,
167.             new_class._meta.private_fields
168.         )
169.         field_names = {f.name for f in new_fields}
170. 
171.         # Basic setup for proxy models.
172.         if is_proxy:
173.             base = None
174.             for parent in [kls for kls in parents if hasattr(kls, '_meta')]:
175.                 if parent._meta.abstract:
176.                     if parent._meta.fields:
177.                         raise TypeError(
178.                             "Abstract base class containing model fields not "
179.                             "permitted for proxy model '%s'." % name
180.                         )
181.                     else:
182.                         continue
183.                 if base is None:
184.                     base = parent
185.                 elif parent._meta.concrete_model is not base._meta.concrete_model:
186.                     raise TypeError("Proxy model '%s' has more than one non-abstract model base class." % name)
187.             if base is None:
188.                 raise TypeError("Proxy model '%s' has no non-abstract model base class." % name)
189.             new_class._meta.setup_proxy(base)
190.             new_class._meta.concrete_model = base._meta.concrete_model
191.         else:
192.             new_class._meta.concrete_model = new_class
193. 
194.         # Collect the parent links for multi-table inheritance.
195.         parent_links = {}
196.         for base in reversed([new_class] + parents):
197.             # Conceptually equivalent to `if base is Model`.
198.             if not hasattr(base, '_meta'):
199.                 continue
200.             # Skip concrete parent classes.
201.             if base != new_class and not base._meta.abstract:
202.                 continue
203.             # Locate OneToOneField instances.
204.             for field in base._meta.local_fields:
205.                 if isinstance(field, OneToOneField) and field.remote_field.parent_link:
206.                     related = resolve_relation(new_class, field.remote_field.model)
207.                     parent_links[make_model_tuple(related)] = field
208. 
209.         # Track fields inherited from base models.
210.         inherited_attributes = set()
211.         # Do the appropriate setup for any model parents.
212.         for base in new_class.mro():
213.             if base not in parents or not hasattr(base, '_meta'):
214.                 # Things without _meta aren't functional models, so they're
215.                 # uninteresting parents.
216.                 inherited_attributes.update(base.__dict__)
217.                 continue
218. 
219.             parent_fields = base._meta.local_fields + base._meta.local_many_to_many
220.             if not base._meta.abstract:
221.                 # Check for clashes between locally declared fields and those
222.                 # on the base classes.
223.                 for field in parent_fields:
224.                     if field.name in field_names:
225.                         raise FieldError(
226.                             'Local field %r in class %r clashes with field of '
227.                             'the same name from base class %r.' % (
228.                                 field.name,
229.                                 name,
230.                                 base.__name__,
231.                             )
232.                         )
233.                     else:
234.                         inherited_attributes.add(field.name)
235. 
236.                 # Concrete classes...
237.                 base = base._meta.concrete_model
238.                 base_key = make_model_tuple(base)
239.                 if base_key in parent_links:
240.                     field = parent_links[base_key]
241.                 elif not is_proxy:
242.                     attr_name = '%s_ptr' % base._meta.model_name
243.                     field = OneToOneField(
244.                         base,
245.                         on_delete=CASCADE,
246.                         name=attr_name,
247.                         auto_created=True,
248.                         parent_link=True,
249.                     )
250. 
251.                     if attr_name in field_names:
252.                         raise FieldError(
253.                             "Auto-generated field '%s' in class %r for "
254.                             "parent_link to base class %r clashes with "
255.                             "declared field of the same name." % (
256.                                 attr_name,
257.                                 name,
258.                                 base.__name__,
259.                             )
260.                         )
261. 
262.                     # Only add the ptr field if it's not already present;
263.                     # e.g. migrations will already have it specified
264.                     if not hasattr(new_class, attr_name):
265.                         new_class.add_to_class(attr_name, field)
266.                 else:
267.                     field = None
268.                 new_class._meta.parents[base] = field
269.             else:
270.                 base_parents = base._meta.parents.copy()
271. 
272.                 # Add fields from abstract base class if it wasn't overridden.
273.                 for field in parent_fields:
274.                     if (field.name not in field_names and
275.                             field.name not in new_class.__dict__ and
276.                             field.name not in inherited_attributes):
277.                         new_field = copy.deepcopy(field)
278.                         new_class.add_to_class(field.name, new_field)
279.                         # Replace parent links defined on this base by the new
280.                         # field. It will be appropriately resolved if required.
281.                         if field.one_to_one:
282.                             for parent, parent_link in base_parents.items():
283.                                 if field == parent_link:
284.                                     base_parents[parent] = new_field
285. 
286.                 # Pass any non-abstract parent classes onto child.
287.                 new_class._meta.parents.update(base_parents)
288. 
289.             # Inherit private fields (like GenericForeignKey) from the parent
290.             # class
291.             for field in base._meta.private_fields:
292.                 if field.name in field_names:
293.                     if not base._meta.abstract:
294.                         raise FieldError(
295.                             'Local field %r in class %r clashes with field of '
296.                             'the same name from base class %r.' % (
297.                                 field.name,
298.                                 name,
299.                                 base.__name__,
300.                             )
301.                         )
302.                 else:
303.                     field = copy.deepcopy(field)
304.                     if not base._meta.abstract:
305.                         field.mti_inherited = True
306.                     new_class.add_to_class(field.name, field)
307. 
308.         # Copy indexes so that index names are unique when models extend an
309.         # abstract model.
310.         new_class._meta.indexes = [copy.deepcopy(idx) for idx in new_class._meta.indexes]
311. 
312.         if abstract:
313.             # Abstract base models can't be instantiated and don't appear in
314.             # the list of models for an app. We do the final setup for them a
315.             # little differently from normal models.
316.             attr_meta.abstract = False
317.             new_class.Meta = attr_meta
318.             return new_class
319. 
320.         new_class._prepare()
321.         new_class._meta.apps.register_model(new_class._meta.app_label, new_class)
322.         return new_class
323. 
324.     def add_to_class(cls, name, value):
325.         if _has_contribute_to_class(value):
326.             value.contribute_to_class(cls, name)
327.         else:
328.             setattr(cls, name, value)
329. 
330.     def _prepare(cls):
331.         """Create some methods once self._meta has been populated."""
332.         opts = cls._meta
333.         opts._prepare(cls)
334. 
335.         if opts.order_with_respect_to:
336.             cls.get_next_in_order = partialmethod(cls._get_next_or_previous_in_order, is_next=True)
337.             cls.get_previous_in_order = partialmethod(cls._get_next_or_previous_in_order, is_next=False)
338. 
339.             # Defer creating accessors on the foreign class until it has been
340.             # created and registered. If remote_field is None, we're ordering
341.             # with respect to a GenericForeignKey and don't know what the
342.             # foreign class is - we'll add those accessors later in
343.             # contribute_to_class().
344.             if opts.order_with_respect_to.remote_field:
345.                 wrt = opts.order_with_respect_to
346.                 remote = wrt.remote_field.model
347.                 lazy_related_operation(make_foreign_order_accessors, cls, remote)
348. 
349.         # Give the class a docstring -- its definition.
350.         if cls.__doc__ is None:
351.             cls.__doc__ = "%s(%s)" % (cls.__name__, ", ".join(f.name for f in opts.fields))
352. 
353.         get_absolute_url_override = settings.ABSOLUTE_URL_OVERRIDES.get(opts.label_lower)
354.         if get_absolute_url_override:
355.             setattr(cls, 'get_absolute_url', get_absolute_url_override)
356. 
357.         if not opts.managers:
358.             if any(f.name == 'objects' for f in opts.fields):
359.                 raise ValueError(
360.                     "Model %s must specify a custom Manager, because it has a "
361.                     "field named 'objects'." % cls.__name__
362.                 )
363.             manager = Manager()
364.             manager.auto_created = True
365.             cls.add_to_class('objects', manager)
366. 
367.         # Set the name of _meta.indexes. This can't be done in
368.         # Options.contribute_to_class() because fields haven't been added to
369.         # the model at that point.
370.         for index in cls._meta.indexes:
371.             if not index.name:
372.                 index.set_name_with_model(cls)
373. 
374.         class_prepared.send(sender=cls)
375. 
376.     @property
377.     def _base_manager(cls):
378.         return cls._meta.base_manager
379. 
380.     @property
381.     def _default_manager(cls):
382.         return cls._meta.default_manager
383. 
384. 
385. class ModelStateFieldsCacheDescriptor:
386.     def __get__(self, instance, cls=None):
387.         if instance is None:
388.             return self
389.         res = instance.fields_cache = {}
390.         return res
391. 
392. 
393. class ModelState:
394.     """Store model instance state."""
395.     db = None
396.     # If true, uniqueness validation checks will consider this a new, unsaved
397.     # object. Necessary for correct validation of new instances of objects with
398.     # explicit (non-auto) PKs. This impacts validation only; it has no effect
399.     # on the actual save.
400.     adding = True
401.     fields_cache = ModelStateFieldsCacheDescriptor()
402. 
403. 
404. class Model(metaclass=ModelBase):
405. 
406.     def __init__(self, *args, **kwargs):
407.         # Alias some things as locals to avoid repeat global lookups
408.         cls = self.__class__
409.         opts = self._meta
410.         _setattr = setattr
411.         _DEFERRED = DEFERRED
412. 
413.         pre_init.send(sender=cls, args=args, kwargs=kwargs)
414. 
415.         # Set up the storage for instance state
416.         self._state = ModelState()
417. 
418.         # There is a rather weird disparity here; if kwargs, it's set, then args
419.         # overrides it. It should be one or the other; don't duplicate the work
420.         # The reason for the kwargs check is that standard iterator passes in by
421.         # args, and instantiation for iteration is 33% faster.
422.         if len(args) > len(opts.concrete_fields):
423.             # Daft, but matches old exception sans the err msg.
424.             raise IndexError("Number of args exceeds number of fields")
425. 
426.         if not kwargs:
427.             fields_iter = iter(opts.concrete_fields)
428.             # The ordering of the zip calls matter - zip throws StopIteration
429.             # when an iter throws it. So if the first iter throws it, the second
430.             # is *not* consumed. We rely on this, so don't change the order
431.             # without changing the logic.
432.             for val, field in zip(args, fields_iter):
433.                 if val is _DEFERRED:
434.                     continue
435.                 _setattr(self, field.attname, val)
436.         else:
437.             # Slower, kwargs-ready version.
438.             fields_iter = iter(opts.fields)
439.             for val, field in zip(args, fields_iter):
440.                 if val is _DEFERRED:
441.                     continue
442.                 _setattr(self, field.attname, val)
443.                 kwargs.pop(field.name, None)
444. 
445.         # Now we're left with the unprocessed fields that *must* come from
446.         # keywords, or default.
447. 
448.         for field in fields_iter:
449.             is_related_object = False
450.             # Virtual field
451.             if field.attname not in kwargs and field.column is None:
452.                 continue
453.             if kwargs:
454.                 if isinstance(field.remote_field, ForeignObjectRel):
455.                     try:
456.                         # Assume object instance was passed in.
457.                         rel_obj = kwargs.pop(field.name)
458.                         is_related_object = True
459.                     except KeyError:
460.                         try:
461.                             # Object instance wasn't passed in -- must be an ID.
462.                             val = kwargs.pop(field.attname)
463.                         except KeyError:
464.                             val = field.get_default()
465.                 else:
466.                     try:
467.                         val = kwargs.pop(field.attname)
468.                     except KeyError:
469.                         # This is done with an exception rather than the
470.                         # default argument on pop because we don't want
471.                         # get_default() to be evaluated, and then not used.
472.                         # Refs #12057.
473.                         val = field.get_default()
474.             else:
475.                 val = field.get_default()
476. 
477.             if is_related_object:
478.                 # If we are passed a related instance, set it using the
479.                 # field.name instead of field.attname (e.g. "user" instead of
480.                 # "user_id") so that the object gets properly cached (and type
481.                 # checked) by the RelatedObjectDescriptor.
482.                 if rel_obj is not _DEFERRED:
483.                     _setattr(self, field.name, rel_obj)
484.             else:
485.                 if val is not _DEFERRED:
486.                     _setattr(self, field.attname, val)
487. 
488.         if kwargs:
489.             property_names = opts._property_names
490.             for prop in tuple(kwargs):
491.                 try:
492.                     # Any remaining kwargs must correspond to properties or
493.                     # virtual fields.
494.                     if prop in property_names or opts.get_field(prop):
495.                         if kwargs[prop] is not _DEFERRED:
496.                             _setattr(self, prop, kwargs[prop])
497.                         del kwargs[prop]
498.                 except (AttributeError, FieldDoesNotExist):
499.                     pass
500.             for kwarg in kwargs:
501.                 raise TypeError("%s() got an unexpected keyword argument '%s'" % (cls.__name__, kwarg))
502.         super().__init__()
503.         post_init.send(sender=cls, instance=self)
504. 
505.     @classmethod
506.     def from_db(cls, db, field_names, values):
507.         if len(values) != len(cls._meta.concrete_fields):
508.             values_iter = iter(values)
509.             values = [
510.                 next(values_iter) if f.attname in field_names else DEFERRED
511.                 for f in cls._meta.concrete_fields
512.             ]
513.         new = cls(*values)
514.         new._state.adding = False
515.         new._state.db = db
516.         return new
517. 
518.     def __repr__(self):
519.         return '<%s: %s>' % (self.__class__.__name__, self)
520. 
521.     def __str__(self):
522.         return '%s object (%s)' % (self.__class__.__name__, self.pk)
523. 
524.     def __eq__(self, other):
525.         if not isinstance(other, Model):
526.             return NotImplemented
527.         if self._meta.concrete_model != other._meta.concrete_model:
528.             return False
529.         my_pk = self.pk
530.         if my_pk is None:
531.             return self is other
532.         return my_pk == other.pk
533. 
534.     def __hash__(self):
535.         if self.pk is None:
536.             raise TypeError("Model instances without primary key value are unhashable")
537.         return hash(self.pk)
538. 
539.     def __reduce__(self):
540.         data = self.__getstate__()
541.         data[DJANGO_VERSION_PICKLE_KEY] = get_version()
542.         class_id = self._meta.app_label, self._meta.object_name
543.         return model_unpickle, (class_id,), data
544. 
545.     def __getstate__(self):
546.         """Hook to allow choosing the attributes to pickle."""
547.         return self.__dict__
548. 
549.     def __setstate__(self, state):
550.         msg = None
551.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
552.         if pickled_version:
553.             current_version = get_version()
554.             if current_version != pickled_version:
555.                 msg = (
556.                     "Pickled model instance's Django version %s does not match "
557.                     "the current version %s." % (pickled_version, current_version)
558.                 )
559.         else:
560.             msg = "Pickled model instance's Django version is not specified."
561. 
562.         if msg:
563.             warnings.warn(msg, RuntimeWarning, stacklevel=2)
564. 
565.         self.__dict__.update(state)
566. 
567.     def _get_pk_val(self, meta=None):
568.         meta = meta or self._meta
569.         return getattr(self, meta.pk.attname)
570. 
571.     def _set_pk_val(self, value):
572.         for parent_link in self._meta.parents.values():
573.             if parent_link and parent_link != self._meta.pk:
574.                 setattr(self, parent_link.target_field.attname, value)
575.         return setattr(self, self._meta.pk.attname, value)
576. 
577.     pk = property(_get_pk_val, _set_pk_val)
578. 
579.     def get_deferred_fields(self):
580.         """
581.         Return a set containing names of deferred fields for this instance.
582.         """
583.         return {
584.             f.attname for f in self._meta.concrete_fields
585.             if f.attname not in self.__dict__
586.         }
587. 
588.     def refresh_from_db(self, using=None, fields=None):
589.         """
590.         Reload field values from the database.
591. 
592.         By default, the reloading happens from the database this instance was
593.         loaded from, or by the read router if this instance wasn't loaded from
594.         any database. The using parameter will override the default.
595. 
596.         Fields can be used to specify which fields to reload. The fields
597.         should be an iterable of field attnames. If fields is None, then
598.         all non-deferred fields are reloaded.
599. 
600.         When accessing deferred fields of an instance, the deferred loading
601.         of the field will call this method.
602.         """
603.         if fields is None:
604.             self._prefetched_objects_cache = {}
605.         else:
606.             prefetched_objects_cache = getattr(self, '_prefetched_objects_cache', ())
607.             for field in fields:
608.                 if field in prefetched_objects_cache:
609.                     del prefetched_objects_cache[field]
610.                     fields.remove(field)
611.             if not fields:
612.                 return
613.             if any(LOOKUP_SEP in f for f in fields):
614.                 raise ValueError(
615.                     'Found "%s" in fields argument. Relations and transforms '
616.                     'are not allowed in fields.' % LOOKUP_SEP)
617. 
618.         hints = {'instance': self}
619.         db_instance_qs = self.__class__._base_manager.db_manager(using, hints=hints).filter(pk=self.pk)
620. 
621.         # Use provided fields, if not set then reload all non-deferred fields.
622.         deferred_fields = self.get_deferred_fields()
623.         if fields is not None:
624.             fields = list(fields)
625.             db_instance_qs = db_instance_qs.only(*fields)
626.         elif deferred_fields:
627.             fields = [f.attname for f in self._meta.concrete_fields
628.                       if f.attname not in deferred_fields]
629.             db_instance_qs = db_instance_qs.only(*fields)
630. 
631.         db_instance = db_instance_qs.get()
632.         non_loaded_fields = db_instance.get_deferred_fields()
633.         for field in self._meta.concrete_fields:
634.             if field.attname in non_loaded_fields:
635.                 # This field wasn't refreshed - skip ahead.
636.                 continue
637.             setattr(self, field.attname, getattr(db_instance, field.attname))
638.             # Clear cached foreign keys.
639.             if field.is_relation and field.is_cached(self):
640.                 field.delete_cached_value(self)
641. 
642.         # Clear cached relations.
643.         for field in self._meta.related_objects:
644.             if field.is_cached(self):
645.                 field.delete_cached_value(self)
646. 
647.         self._state.db = db_instance._state.db
648. 
649.     def serializable_value(self, field_name):
650.         """
651.         Return the value of the field name for this instance. If the field is
652.         a foreign key, return the id value instead of the object. If there's
653.         no Field object with this name on the model, return the model
654.         attribute's value.
655. 
656.         Used to serialize a field's value (in the serializer, or form output,
657.         for example). Normally, you would just access the attribute directly
658.         and not use this method.
659.         """
660.         try:
661.             field = self._meta.get_field(field_name)
662.         except FieldDoesNotExist:
663.             return getattr(self, field_name)
664.         return getattr(self, field.attname)
665. 
666.     def save(self, force_insert=False, force_update=False, using=None,
667.              update_fields=None):
668.         """
669.         Save the current instance. Override this in a subclass if you want to
670.         control the saving process.
671. 
672.         The 'force_insert' and 'force_update' parameters can be used to insist
673.         that the "save" must be an SQL insert or update (or equivalent for
674.         non-SQL backends), respectively. Normally, they should not be set.
675.         """
676.         # Ensure that a model instance without a PK hasn't been assigned to
677.         # a ForeignKey or OneToOneField on this model. If the field is
678.         # nullable, allowing the save() would result in silent data loss.
679.         for field in self._meta.concrete_fields:
680.             # If the related field isn't cached, then an instance hasn't
681.             # been assigned and there's no need to worry about this check.
682.             if field.is_relation and field.is_cached(self):
683.                 obj = getattr(self, field.name, None)
684.                 if not obj:
685.                     continue
686.                 # A pk may have been assigned manually to a model instance not
687.                 # saved to the database (or auto-generated in a case like
688.                 # UUIDField), but we allow the save to proceed and rely on the
689.                 # database to raise an IntegrityError if applicable. If
690.                 # constraints aren't supported by the database, there's the
691.                 # unavoidable risk of data corruption.
692.                 if obj.pk is None:
693.                     # Remove the object from a related instance cache.
694.                     if not field.remote_field.multiple:
695.                         field.remote_field.delete_cached_value(obj)
696.                     raise ValueError(
697.                         "save() prohibited to prevent data loss due to "
698.                         "unsaved related object '%s'." % field.name
699.                     )
700.                 elif getattr(self, field.attname) is None:
701.                     # Use pk from related object if it has been saved after
702.                     # an assignment.
703.                     setattr(self, field.attname, obj.pk)
704.                 # If the relationship's pk/to_field was changed, clear the
705.                 # cached relationship.
706.                 if getattr(obj, field.target_field.attname) != getattr(self, field.attname):
707.                     field.delete_cached_value(self)
708. 
709.         using = using or router.db_for_write(self.__class__, instance=self)
710.         if force_insert and (force_update or update_fields):
711.             raise ValueError("Cannot force both insert and updating in model saving.")
712. 
713.         deferred_fields = self.get_deferred_fields()
714.         if update_fields is not None:
715.             # If update_fields is empty, skip the save. We do also check for
716.             # no-op saves later on for inheritance cases. This bailout is
717.             # still needed for skipping signal sending.
718.             if not update_fields:
719.                 return
720. 
721.             update_fields = frozenset(update_fields)
722.             field_names = set()
723. 
724.             for field in self._meta.fields:
725.                 if not field.primary_key:
726.                     field_names.add(field.name)
727. 
728.                     if field.name != field.attname:
729.                         field_names.add(field.attname)
730. 
731.             non_model_fields = update_fields.difference(field_names)
732. 
733.             if non_model_fields:
734.                 raise ValueError("The following fields do not exist in this "
735.                                  "model or are m2m fields: %s"
736.                                  % ', '.join(non_model_fields))
737. 
738.         # If saving to the same database, and this model is deferred, then
739.         # automatically do an "update_fields" save on the loaded fields.
740.         elif not force_insert and deferred_fields and using == self._state.db:
741.             field_names = set()
742.             for field in self._meta.concrete_fields:
743.                 if not field.primary_key and not hasattr(field, 'through'):
744.                     field_names.add(field.attname)
745.             loaded_fields = field_names.difference(deferred_fields)
746.             if loaded_fields:
747.                 update_fields = frozenset(loaded_fields)
748. 
749.         self.save_base(using=using, force_insert=force_insert,
750.                        force_update=force_update, update_fields=update_fields)
751.     save.alters_data = True
752. 
753.     def save_base(self, raw=False, force_insert=False,
754.                   force_update=False, using=None, update_fields=None):
755.         """
756.         Handle the parts of saving which should be done only once per save,
757.         yet need to be done in raw saves, too. This includes some sanity
758.         checks and signal sending.
759. 
760.         The 'raw' argument is telling save_base not to save any parent
761.         models and not to do any changes to the values before save. This
762.         is used by fixture loading.
763.         """
764.         using = using or router.db_for_write(self.__class__, instance=self)
765.         assert not (force_insert and (force_update or update_fields))
766.         assert update_fields is None or update_fields
767.         cls = origin = self.__class__
768.         # Skip proxies, but keep the origin as the proxy model.
769.         if cls._meta.proxy:
770.             cls = cls._meta.concrete_model
771.         meta = cls._meta
772.         if not meta.auto_created:
773.             pre_save.send(
774.                 sender=origin, instance=self, raw=raw, using=using,
775.                 update_fields=update_fields,
776.             )
777.         # A transaction isn't needed if one query is issued.
778.         if meta.parents:
779.             context_manager = transaction.atomic(using=using, savepoint=False)
780.         else:
781.             context_manager = transaction.mark_for_rollback_on_error(using=using)
782.         with context_manager:
783.             parent_inserted = False
784.             if not raw:
785.                 parent_inserted = self._save_parents(cls, using, update_fields)
786.             updated = self._save_table(
787.                 raw, cls, force_insert or parent_inserted,
788.                 force_update, using, update_fields,
789.             )
790.         # Store the database on which the object was saved
791.         self._state.db = using
792.         # Once saved, this is no longer a to-be-added instance.
793.         self._state.adding = False
794. 
795.         # Signal that the save is complete
796.         if not meta.auto_created:
797.             post_save.send(
798.                 sender=origin, instance=self, created=(not updated),
799.                 update_fields=update_fields, raw=raw, using=using,
800.             )
801. 
802.     save_base.alters_data = True
803. 
804.     def _save_parents(self, cls, using, update_fields):
805.         """Save all the parents of cls using values from self."""
806.         meta = cls._meta
807.         inserted = False
808.         for parent, field in meta.parents.items():
809.             # Make sure the link fields are synced between parent and self.
810.             if (field and getattr(self, parent._meta.pk.attname) is None and
811.                     getattr(self, field.attname) is not None):
812.                 setattr(self, parent._meta.pk.attname, getattr(self, field.attname))
813.             parent_inserted = self._save_parents(cls=parent, using=using, update_fields=update_fields)
814.             updated = self._save_table(
815.                 cls=parent, using=using, update_fields=update_fields,
816.                 force_insert=parent_inserted,
817.             )
818.             if not updated:
819.                 inserted = True
820.             # Set the parent's PK value to self.
821.             if field:
822.                 setattr(self, field.attname, self._get_pk_val(parent._meta))
823.                 # Since we didn't have an instance of the parent handy set
824.                 # attname directly, bypassing the descriptor. Invalidate
825.                 # the related object cache, in case it's been accidentally
826.                 # populated. A fresh instance will be re-built from the
827.                 # database if necessary.
828.                 if field.is_cached(self):
829.                     field.delete_cached_value(self)
830.         return inserted
831. 
832.     def _save_table(self, raw=False, cls=None, force_insert=False,
833.                     force_update=False, using=None, update_fields=None):
834.         """
835.         Do the heavy-lifting involved in saving. Update or insert the data
836.         for a single table.
837.         """
838.         meta = cls._meta
839.         non_pks = [f for f in meta.local_concrete_fields if not f.primary_key]
840. 
841.         if update_fields:
842.             non_pks = [f for f in non_pks
843.                        if f.name in update_fields or f.attname in update_fields]
844. 
845.         pk_val = self._get_pk_val(meta)
846.         if pk_val is None:
847.             pk_val = meta.pk.get_pk_value_on_save(self)
848.             setattr(self, meta.pk.attname, pk_val)
849.         pk_set = pk_val is not None
850.         if not pk_set and (force_update or update_fields):
851.             raise ValueError("Cannot force an update in save() with no primary key.")
852.         updated = False
853.         # Skip an UPDATE when adding an instance and primary key has a default.
854.         if (
855.             not raw and
856.             not force_insert and
857.             self._state.adding and
858.             meta.pk.default and
859.             meta.pk.default is not NOT_PROVIDED
860.         ):
861.             force_insert = True
862.         # If possible, try an UPDATE. If that doesn't update anything, do an INSERT.
863.         if pk_set and not force_insert:
864.             base_qs = cls._base_manager.using(using)
865.             values = [(f, None, (getattr(self, f.attname) if raw else f.pre_save(self, False)))
866.                       for f in non_pks]
867.             forced_update = update_fields or force_update
868.             updated = self._do_update(base_qs, using, pk_val, values, update_fields,
869.                                       forced_update)
870.             if force_update and not updated:
871.                 raise DatabaseError("Forced update did not affect any rows.")
872.             if update_fields and not updated:
873.                 raise DatabaseError("Save with update_fields did not affect any rows.")
874.         if not updated:
875.             if meta.order_with_respect_to:
876.                 # If this is a model with an order_with_respect_to
877.                 # autopopulate the _order field
878.                 field = meta.order_with_respect_to
879.                 filter_args = field.get_filter_kwargs_for_object(self)
880.                 self._order = cls._base_manager.using(using).filter(**filter_args).aggregate(
881.                     _order__max=Coalesce(
882.                         ExpressionWrapper(Max('_order') + Value(1), output_field=IntegerField()),
883.                         Value(0),
884.                     ),
885.                 )['_order__max']
886.             fields = meta.local_concrete_fields
887.             if not pk_set:
888.                 fields = [f for f in fields if f is not meta.auto_field]
889. 
890.             returning_fields = meta.db_returning_fields
891.             results = self._do_insert(cls._base_manager, using, fields, returning_fields, raw)
892.             if results:
893.                 for value, field in zip(results[0], returning_fields):
894.                     setattr(self, field.attname, value)
895.         return updated
896. 
897.     def _do_update(self, base_qs, using, pk_val, values, update_fields, forced_update):
898.         """
899.         Try to update the model. Return True if the model was updated (if an
900.         update query was done and a matching row was found in the DB).
901.         """
902.         filtered = base_qs.filter(pk=pk_val)
903.         if not values:
904.             # We can end up here when saving a model in inheritance chain where
905.             # update_fields doesn't target any field in current model. In that
906.             # case we just say the update succeeded. Another case ending up here
907.             # is a model with just PK - in that case check that the PK still
908.             # exists.
909.             return update_fields is not None or filtered.exists()
910.         if self._meta.select_on_save and not forced_update:
911.             return (
912.                 filtered.exists() and
913.                 # It may happen that the object is deleted from the DB right after
914.                 # this check, causing the subsequent UPDATE to return zero matching
915.                 # rows. The same result can occur in some rare cases when the
916.                 # database returns zero despite the UPDATE being executed
917.                 # successfully (a row is matched and updated). In order to
918.                 # distinguish these two cases, the object's existence in the
919.                 # database is again checked for if the UPDATE query returns 0.
920.                 (filtered._update(values) > 0 or filtered.exists())
921.             )
922.         return filtered._update(values) > 0
923. 
924.     def _do_insert(self, manager, using, fields, returning_fields, raw):
925.         """
926.         Do an INSERT. If returning_fields is defined then this method should
927.         return the newly created data for the model.
928.         """
929.         return manager._insert(
930.             [self], fields=fields, returning_fields=returning_fields,
931.             using=using, raw=raw,
932.         )
933. 
934.     def delete(self, using=None, keep_parents=False):
935.         using = using or router.db_for_write(self.__class__, instance=self)
936.         assert self.pk is not None, (
937.             "%s object can't be deleted because its %s attribute is set to None." %
938.             (self._meta.object_name, self._meta.pk.attname)
939.         )
940. 
941.         collector = Collector(using=using)
942.         collector.collect([self], keep_parents=keep_parents)
943.         return collector.delete()
944. 
945.     delete.alters_data = True
946. 
947.     def _get_FIELD_display(self, field):
948.         value = getattr(self, field.attname)
949.         choices_dict = dict(make_hashable(field.flatchoices))
950.         # force_str() to coerce lazy strings.
951.         return force_str(choices_dict.get(make_hashable(value), value), strings_only=True)
952. 
953.     def _get_next_or_previous_by_FIELD(self, field, is_next, **kwargs):
954.         if not self.pk:
955.             raise ValueError("get_next/get_previous cannot be used on unsaved objects.")
956.         op = 'gt' if is_next else 'lt'
957.         order = '' if is_next else '-'
958.         param = getattr(self, field.attname)
959.         q = Q(**{'%s__%s' % (field.name, op): param})
960.         q = q | Q(**{field.name: param, 'pk__%s' % op: self.pk})
961.         qs = self.__class__._default_manager.using(self._state.db).filter(**kwargs).filter(q).order_by(
962.             '%s%s' % (order, field.name), '%spk' % order
963.         )
964.         try:
965.             return qs[0]
966.         except IndexError:
967.             raise self.DoesNotExist("%s matching query does not exist." % self.__class__._meta.object_name)
968. 
969.     def _get_next_or_previous_in_order(self, is_next):
970.         cachename = "__%s_order_cache" % is_next
971.         if not hasattr(self, cachename):
972.             op = 'gt' if is_next else 'lt'
973.             order = '_order' if is_next else '-_order'
974.             order_field = self._meta.order_with_respect_to
975.             filter_args = order_field.get_filter_kwargs_for_object(self)
976.             obj = self.__class__._default_manager.filter(**filter_args).filter(**{
977.                 '_order__%s' % op: self.__class__._default_manager.values('_order').filter(**{
978.                     self._meta.pk.name: self.pk
979.                 })
980.             }).order_by(order)[:1].get()
981.             setattr(self, cachename, obj)
982.         return getattr(self, cachename)
983. 
984.     def prepare_database_save(self, field):
985.         if self.pk is None:
986.             raise ValueError("Unsaved model instance %r cannot be used in an ORM query." % self)
987.         return getattr(self, field.remote_field.get_related_field().attname)
988. 
989.     def clean(self):
990.         """
991.         Hook for doing any extra model-wide validation after clean() has been
992.         called on every field by self.clean_fields. Any ValidationError raised
993.         by this method will not be associated with a particular field; it will
994.         have a special-case association with the field defined by NON_FIELD_ERRORS.
995.         """
996.         pass
997. 
998.     def validate_unique(self, exclude=None):
999.         """
1000.         Check unique constraints on the model and raise ValidationError if any
1001.         failed.
1002.         """
1003.         unique_checks, date_checks = self._get_unique_checks(exclude=exclude)
1004. 
1005.         errors = self._perform_unique_checks(unique_checks)
1006.         date_errors = self._perform_date_checks(date_checks)
1007. 
1008.         for k, v in date_errors.items():
1009.             errors.setdefault(k, []).extend(v)
1010. 
1011.         if errors:
1012.             raise ValidationError(errors)
1013. 
1014.     def _get_unique_checks(self, exclude=None):
1015.         """
1016.         Return a list of checks to perform. Since validate_unique() could be
1017.         called from a ModelForm, some fields may have been excluded; we can't
1018.         perform a unique check on a model that is missing fields involved
1019.         in that check. Fields that did not validate should also be excluded,
1020.         but they need to be passed in via the exclude argument.
1021.         """
1022.         if exclude is None:
1023.             exclude = []
1024.         unique_checks = []
1025. 
1026.         unique_togethers = [(self.__class__, self._meta.unique_together)]
1027.         constraints = [(self.__class__, self._meta.total_unique_constraints)]
1028.         for parent_class in self._meta.get_parent_list():
1029.             if parent_class._meta.unique_together:
1030.                 unique_togethers.append((parent_class, parent_class._meta.unique_together))
1031.             if parent_class._meta.total_unique_constraints:
1032.                 constraints.append(
1033.                     (parent_class, parent_class._meta.total_unique_constraints)
1034.                 )
1035. 
1036.         for model_class, unique_together in unique_togethers:
1037.             for check in unique_together:
1038.                 if not any(name in exclude for name in check):
1039.                     # Add the check if the field isn't excluded.
1040.                     unique_checks.append((model_class, tuple(check)))
1041. 
1042.         for model_class, model_constraints in constraints:
1043.             for constraint in model_constraints:
1044.                 if not any(name in exclude for name in constraint.fields):
1045.                     unique_checks.append((model_class, constraint.fields))
1046. 
1047.         # These are checks for the unique_for_<date/year/month>.
1048.         date_checks = []
1049. 
1050.         # Gather a list of checks for fields declared as unique and add them to
1051.         # the list of checks.
1052. 
1053.         fields_with_class = [(self.__class__, self._meta.local_fields)]
1054.         for parent_class in self._meta.get_parent_list():
1055.             fields_with_class.append((parent_class, parent_class._meta.local_fields))
1056. 
1057.         for model_class, fields in fields_with_class:
1058.             for f in fields:
1059.                 name = f.name
1060.                 if name in exclude:
1061.                     continue
1062.                 if f.unique:
1063.                     unique_checks.append((model_class, (name,)))
1064.                 if f.unique_for_date and f.unique_for_date not in exclude:
1065.                     date_checks.append((model_class, 'date', name, f.unique_for_date))
1066.                 if f.unique_for_year and f.unique_for_year not in exclude:
1067.                     date_checks.append((model_class, 'year', name, f.unique_for_year))
1068.                 if f.unique_for_month and f.unique_for_month not in exclude:
1069.                     date_checks.append((model_class, 'month', name, f.unique_for_month))
1070.         return unique_checks, date_checks
1071. 
1072.     def _perform_unique_checks(self, unique_checks):
1073.         errors = {}
1074. 
1075.         for model_class, unique_check in unique_checks:
1076.             # Try to look up an existing object with the same values as this
1077.             # object's values for all the unique field.
1078. 
1079.             lookup_kwargs = {}
1080.             for field_name in unique_check:
1081.                 f = self._meta.get_field(field_name)
1082.                 lookup_value = getattr(self, f.attname)
1083.                 # TODO: Handle multiple backends with different feature flags.
1084.                 if (lookup_value is None or
1085.                         (lookup_value == '' and connection.features.interprets_empty_strings_as_nulls)):
1086.                     # no value, skip the lookup
1087.                     continue
1088.                 if f.primary_key and not self._state.adding:
1089.                     # no need to check for unique primary key when editing
1090.                     continue
1091.                 lookup_kwargs[str(field_name)] = lookup_value
1092. 
1093.             # some fields were skipped, no reason to do the check
1094.             if len(unique_check) != len(lookup_kwargs):
1095.                 continue
1096. 
1097.             qs = model_class._default_manager.filter(**lookup_kwargs)
1098. 
1099.             # Exclude the current object from the query if we are editing an
1100.             # instance (as opposed to creating a new one)
1101.             # Note that we need to use the pk as defined by model_class, not
1102.             # self.pk. These can be different fields because model inheritance
1103.             # allows single model to have effectively multiple primary keys.
1104.             # Refs #17615.
1105.             model_class_pk = self._get_pk_val(model_class._meta)
1106.             if not self._state.adding and model_class_pk is not None:
1107.                 qs = qs.exclude(pk=model_class_pk)
1108.             if qs.exists():
1109.                 if len(unique_check) == 1:
1110.                     key = unique_check[0]
1111.                 else:
1112.                     key = NON_FIELD_ERRORS
1113.                 errors.setdefault(key, []).append(self.unique_error_message(model_class, unique_check))
1114. 
1115.         return errors
1116. 
1117.     def _perform_date_checks(self, date_checks):
1118.         errors = {}
1119.         for model_class, lookup_type, field, unique_for in date_checks:
1120.             lookup_kwargs = {}
1121.             # there's a ticket to add a date lookup, we can remove this special
1122.             # case if that makes it's way in
1123.             date = getattr(self, unique_for)
1124.             if date is None:
1125.                 continue
1126.             if lookup_type == 'date':
1127.                 lookup_kwargs['%s__day' % unique_for] = date.day
1128.                 lookup_kwargs['%s__month' % unique_for] = date.month
1129.                 lookup_kwargs['%s__year' % unique_for] = date.year
1130.             else:
1131.                 lookup_kwargs['%s__%s' % (unique_for, lookup_type)] = getattr(date, lookup_type)
1132.             lookup_kwargs[field] = getattr(self, field)
1133. 
1134.             qs = model_class._default_manager.filter(**lookup_kwargs)
1135.             # Exclude the current object from the query if we are editing an
1136.             # instance (as opposed to creating a new one)
1137.             if not self._state.adding and self.pk is not None:
1138.                 qs = qs.exclude(pk=self.pk)
1139. 
1140.             if qs.exists():
1141.                 errors.setdefault(field, []).append(
1142.                     self.date_error_message(lookup_type, field, unique_for)
1143.                 )
1144.         return errors
1145. 
1146.     def date_error_message(self, lookup_type, field_name, unique_for):
1147.         opts = self._meta
1148.         field = opts.get_field(field_name)
1149.         return ValidationError(
1150.             message=field.error_messages['unique_for_date'],
1151.             code='unique_for_date',
1152.             params={
1153.                 'model': self,
1154.                 'model_name': capfirst(opts.verbose_name),
1155.                 'lookup_type': lookup_type,
1156.                 'field': field_name,
1157.                 'field_label': capfirst(field.verbose_name),
1158.                 'date_field': unique_for,
1159.                 'date_field_label': capfirst(opts.get_field(unique_for).verbose_name),
1160.             }
1161.         )
1162. 
1163.     def unique_error_message(self, model_class, unique_check):
1164.         opts = model_class._meta
1165. 
1166.         params = {
1167.             'model': self,
1168.             'model_class': model_class,
1169.             'model_name': capfirst(opts.verbose_name),
1170.             'unique_check': unique_check,
1171.         }
1172. 
1173.         # A unique field
1174.         if len(unique_check) == 1:
1175.             field = opts.get_field(unique_check[0])
1176.             params['field_label'] = capfirst(field.verbose_name)
1177.             return ValidationError(
1178.                 message=field.error_messages['unique'],
1179.                 code='unique',
1180.                 params=params,
1181.             )
1182. 
1183.         # unique_together
1184.         else:
1185.             field_labels = [capfirst(opts.get_field(f).verbose_name) for f in unique_check]
1186.             params['field_labels'] = get_text_list(field_labels, _('and'))
1187.             return ValidationError(
1188.                 message=_("%(model_name)s with this %(field_labels)s already exists."),
1189.                 code='unique_together',
1190.                 params=params,
1191.             )
1192. 
1193.     def full_clean(self, exclude=None, validate_unique=True):
1194.         """
1195.         Call clean_fields(), clean(), and validate_unique() on the model.
1196.         Raise a ValidationError for any errors that occur.
1197.         """
1198.         errors = {}
1199.         if exclude is None:
1200.             exclude = []
1201.         else:
1202.             exclude = list(exclude)
1203. 
1204.         try:
1205.             self.clean_fields(exclude=exclude)
1206.         except ValidationError as e:
1207.             errors = e.update_error_dict(errors)
1208. 
1209.         # Form.clean() is run even if other validation fails, so do the
1210.         # same with Model.clean() for consistency.
1211.         try:
1212.             self.clean()
1213.         except ValidationError as e:
1214.             errors = e.update_error_dict(errors)
1215. 
1216.         # Run unique checks, but only for fields that passed validation.
1217.         if validate_unique:
1218.             for name in errors:
1219.                 if name != NON_FIELD_ERRORS and name not in exclude:
1220.                     exclude.append(name)
1221.             try:
1222.                 self.validate_unique(exclude=exclude)
1223.             except ValidationError as e:
1224.                 errors = e.update_error_dict(errors)
1225. 
1226.         if errors:
1227.             raise ValidationError(errors)
1228. 
1229.     def clean_fields(self, exclude=None):
1230.         """
1231.         Clean all fields and raise a ValidationError containing a dict
1232.         of all validation errors if any occur.
1233.         """
1234.         if exclude is None:
1235.             exclude = []
1236. 
1237.         errors = {}
1238.         for f in self._meta.fields:
1239.             if f.name in exclude:
1240.                 continue
1241.             # Skip validation for empty fields with blank=True. The developer
1242.             # is responsible for making sure they have a valid value.
1243.             raw_value = getattr(self, f.attname)
1244.             if f.blank and raw_value in f.empty_values:
1245.                 continue
1246.             try:
1247.                 setattr(self, f.attname, f.clean(raw_value, self))
1248.             except ValidationError as e:
1249.                 errors[f.name] = e.error_list
1250. 
1251.         if errors:
1252.             raise ValidationError(errors)
1253. 
1254.     @classmethod
1255.     def check(cls, **kwargs):
1256.         errors = [*cls._check_swappable(), *cls._check_model(), *cls._check_managers(**kwargs)]
1257.         if not cls._meta.swapped:
1258.             databases = kwargs.get('databases') or []
1259.             errors += [
1260.                 *cls._check_fields(**kwargs),
1261.                 *cls._check_m2m_through_same_relationship(),
1262.                 *cls._check_long_column_names(databases),
1263.             ]
1264.             clash_errors = (
1265.                 *cls._check_id_field(),
1266.                 *cls._check_field_name_clashes(),
1267.                 *cls._check_model_name_db_lookup_clashes(),
1268.                 *cls._check_property_name_related_field_accessor_clashes(),
1269.                 *cls._check_single_primary_key(),
1270.             )
1271.             errors.extend(clash_errors)
1272.             # If there are field name clashes, hide consequent column name
1273.             # clashes.
1274.             if not clash_errors:
1275.                 errors.extend(cls._check_column_name_clashes())
1276.             errors += [
1277.                 *cls._check_index_together(),
1278.                 *cls._check_unique_together(),
1279.                 *cls._check_indexes(databases),
1280.                 *cls._check_ordering(),
1281.                 *cls._check_constraints(databases),
1282.             ]
1283. 
1284.         return errors
1285. 
1286.     @classmethod
1287.     def _check_swappable(cls):
1288.         """Check if the swapped model exists."""
1289.         errors = []
1290.         if cls._meta.swapped:
1291.             try:
1292.                 apps.get_model(cls._meta.swapped)
1293.             except ValueError:
1294.                 errors.append(
1295.                     checks.Error(
1296.                         "'%s' is not of the form 'app_label.app_name'." % cls._meta.swappable,
1297.                         id='models.E001',
1298.                     )
1299.                 )
1300.             except LookupError:
1301.                 app_label, model_name = cls._meta.swapped.split('.')
1302.                 errors.append(
1303.                     checks.Error(
1304.                         "'%s' references '%s.%s', which has not been "
1305.                         "installed, or is abstract." % (
1306.                             cls._meta.swappable, app_label, model_name
1307.                         ),
1308.                         id='models.E002',
1309.                     )
1310.                 )
1311.         return errors
1312. 
1313.     @classmethod
1314.     def _check_model(cls):
1315.         errors = []
1316.         if cls._meta.proxy:
1317.             if cls._meta.local_fields or cls._meta.local_many_to_many:
1318.                 errors.append(
1319.                     checks.Error(
1320.                         "Proxy model '%s' contains model fields." % cls.__name__,
1321.                         id='models.E017',
1322.                     )
1323.                 )
1324.         return errors
1325. 
1326.     @classmethod
1327.     def _check_managers(cls, **kwargs):
1328.         """Perform all manager checks."""
1329.         errors = []
1330.         for manager in cls._meta.managers:
1331.             errors.extend(manager.check(**kwargs))
1332.         return errors
1333. 
1334.     @classmethod
1335.     def _check_fields(cls, **kwargs):
1336.         """Perform all field checks."""
1337.         errors = []
1338.         for field in cls._meta.local_fields:
1339.             errors.extend(field.check(**kwargs))
1340.         for field in cls._meta.local_many_to_many:
1341.             errors.extend(field.check(from_model=cls, **kwargs))
1342.         return errors
1343. 
1344.     @classmethod
1345.     def _check_m2m_through_same_relationship(cls):
1346.         """ Check if no relationship model is used by more than one m2m field.
1347.         """
1348. 
1349.         errors = []
1350.         seen_intermediary_signatures = []
1351. 
1352.         fields = cls._meta.local_many_to_many
1353. 
1354.         # Skip when the target model wasn't found.
1355.         fields = (f for f in fields if isinstance(f.remote_field.model, ModelBase))
1356. 
1357.         # Skip when the relationship model wasn't found.
1358.         fields = (f for f in fields if isinstance(f.remote_field.through, ModelBase))
1359. 
1360.         for f in fields:
1361.             signature = (f.remote_field.model, cls, f.remote_field.through, f.remote_field.through_fields)
1362.             if signature in seen_intermediary_signatures:
1363.                 errors.append(
1364.                     checks.Error(
1365.                         "The model has two identical many-to-many relations "
1366.                         "through the intermediate model '%s'." %
1367.                         f.remote_field.through._meta.label,
1368.                         obj=cls,
1369.                         id='models.E003',
1370.                     )
1371.                 )
1372.             else:
1373.                 seen_intermediary_signatures.append(signature)
1374.         return errors
1375. 
1376.     @classmethod
1377.     def _check_id_field(cls):
1378.         """Check if `id` field is a primary key."""
1379.         fields = [f for f in cls._meta.local_fields if f.name == 'id' and f != cls._meta.pk]
1380.         # fields is empty or consists of the invalid "id" field
1381.         if fields and not fields[0].primary_key and cls._meta.pk.name == 'id':
1382.             return [
1383.                 checks.Error(
1384.                     "'id' can only be used as a field name if the field also "
1385.                     "sets 'primary_key=True'.",
1386.                     obj=cls,
1387.                     id='models.E004',
1388.                 )
1389.             ]
1390.         else:
1391.             return []
1392. 
1393.     @classmethod
1394.     def _check_field_name_clashes(cls):
1395.         """Forbid field shadowing in multi-table inheritance."""
1396.         errors = []
1397.         used_fields = {}  # name or attname -> field
1398. 
1399.         # Check that multi-inheritance doesn't cause field name shadowing.
1400.         for parent in cls._meta.get_parent_list():
1401.             for f in parent._meta.local_fields:
1402.                 clash = used_fields.get(f.name) or used_fields.get(f.attname) or None
1403.                 if clash:
1404.                     errors.append(
1405.                         checks.Error(
1406.                             "The field '%s' from parent model "
1407.                             "'%s' clashes with the field '%s' "
1408.                             "from parent model '%s'." % (
1409.                                 clash.name, clash.model._meta,
1410.                                 f.name, f.model._meta
1411.                             ),
1412.                             obj=cls,
1413.                             id='models.E005',
1414.                         )
1415.                     )
1416.                 used_fields[f.name] = f
1417.                 used_fields[f.attname] = f
1418. 
1419.         # Check that fields defined in the model don't clash with fields from
1420.         # parents, including auto-generated fields like multi-table inheritance
1421.         # child accessors.
1422.         for parent in cls._meta.get_parent_list():
1423.             for f in parent._meta.get_fields():
1424.                 if f not in used_fields:
1425.                     used_fields[f.name] = f
1426. 
1427.         for f in cls._meta.local_fields:
1428.             clash = used_fields.get(f.name) or used_fields.get(f.attname) or None
1429.             # Note that we may detect clash between user-defined non-unique
1430.             # field "id" and automatically added unique field "id", both
1431.             # defined at the same model. This special case is considered in
1432.             # _check_id_field and here we ignore it.
1433.             id_conflict = f.name == "id" and clash and clash.name == "id" and clash.model == cls
1434.             if clash and not id_conflict:
1435.                 errors.append(
1436.                     checks.Error(
1437.                         "The field '%s' clashes with the field '%s' "
1438.                         "from model '%s'." % (
1439.                             f.name, clash.name, clash.model._meta
1440.                         ),
1441.                         obj=f,
1442.                         id='models.E006',
1443.                     )
1444.                 )
1445.             used_fields[f.name] = f
1446.             used_fields[f.attname] = f
1447. 
1448.         return errors
1449. 
1450.     @classmethod
1451.     def _check_column_name_clashes(cls):
1452.         # Store a list of column names which have already been used by other fields.
1453.         used_column_names = []
1454.         errors = []
1455. 
1456.         for f in cls._meta.local_fields:
1457.             _, column_name = f.get_attname_column()
1458. 
1459.             # Ensure the column name is not already in use.
1460.             if column_name and column_name in used_column_names:
1461.                 errors.append(
1462.                     checks.Error(
1463.                         "Field '%s' has column name '%s' that is used by "
1464.                         "another field." % (f.name, column_name),
1465.                         hint="Specify a 'db_column' for the field.",
1466.                         obj=cls,
1467.                         id='models.E007'
1468.                     )
1469.                 )
1470.             else:
1471.                 used_column_names.append(column_name)
1472. 
1473.         return errors
1474. 
1475.     @classmethod
1476.     def _check_model_name_db_lookup_clashes(cls):
1477.         errors = []
1478.         model_name = cls.__name__
1479.         if model_name.startswith('_') or model_name.endswith('_'):
1480.             errors.append(
1481.                 checks.Error(
1482.                     "The model name '%s' cannot start or end with an underscore "
1483.                     "as it collides with the query lookup syntax." % model_name,
1484.                     obj=cls,
1485.                     id='models.E023'
1486.                 )
1487.             )
1488.         elif LOOKUP_SEP in model_name:
1489.             errors.append(
1490.                 checks.Error(
1491.                     "The model name '%s' cannot contain double underscores as "
1492.                     "it collides with the query lookup syntax." % model_name,
1493.                     obj=cls,
1494.                     id='models.E024'
1495.                 )
1496.             )
1497.         return errors
1498. 
1499.     @classmethod
1500.     def _check_property_name_related_field_accessor_clashes(cls):
1501.         errors = []
1502.         property_names = cls._meta._property_names
1503.         related_field_accessors = (
1504.             f.get_attname() for f in cls._meta._get_fields(reverse=False)
1505.             if f.is_relation and f.related_model is not None
1506.         )
1507.         for accessor in related_field_accessors:
1508.             if accessor in property_names:
1509.                 errors.append(
1510.                     checks.Error(
1511.                         "The property '%s' clashes with a related field "
1512.                         "accessor." % accessor,
1513.                         obj=cls,
1514.                         id='models.E025',
1515.                     )
1516.                 )
1517.         return errors
1518. 
1519.     @classmethod
1520.     def _check_single_primary_key(cls):
1521.         errors = []
1522.         if sum(1 for f in cls._meta.local_fields if f.primary_key) > 1:
1523.             errors.append(
1524.                 checks.Error(
1525.                     "The model cannot have more than one field with "
1526.                     "'primary_key=True'.",
1527.                     obj=cls,
1528.                     id='models.E026',
1529.                 )
1530.             )
1531.         return errors
1532. 
1533.     @classmethod
1534.     def _check_index_together(cls):
1535.         """Check the value of "index_together" option."""
1536.         if not isinstance(cls._meta.index_together, (tuple, list)):
1537.             return [
1538.                 checks.Error(
1539.                     "'index_together' must be a list or tuple.",
1540.                     obj=cls,
1541.                     id='models.E008',
1542.                 )
1543.             ]
1544. 
1545.         elif any(not isinstance(fields, (tuple, list)) for fields in cls._meta.index_together):
1546.             return [
1547.                 checks.Error(
1548.                     "All 'index_together' elements must be lists or tuples.",
1549.                     obj=cls,
1550.                     id='models.E009',
1551.                 )
1552.             ]
1553. 
1554.         else:
1555.             errors = []
1556.             for fields in cls._meta.index_together:
1557.                 errors.extend(cls._check_local_fields(fields, "index_together"))
1558.             return errors
1559. 
1560.     @classmethod
1561.     def _check_unique_together(cls):
1562.         """Check the value of "unique_together" option."""
1563.         if not isinstance(cls._meta.unique_together, (tuple, list)):
1564.             return [
1565.                 checks.Error(
1566.                     "'unique_together' must be a list or tuple.",
1567.                     obj=cls,
1568.                     id='models.E010',
1569.                 )
1570.             ]
1571. 
1572.         elif any(not isinstance(fields, (tuple, list)) for fields in cls._meta.unique_together):
1573.             return [
1574.                 checks.Error(
1575.                     "All 'unique_together' elements must be lists or tuples.",
1576.                     obj=cls,
1577.                     id='models.E011',
1578.                 )
1579.             ]
1580. 
1581.         else:
1582.             errors = []
1583.             for fields in cls._meta.unique_together:
1584.                 errors.extend(cls._check_local_fields(fields, "unique_together"))
1585.             return errors
1586. 
1587.     @classmethod
1588.     def _check_indexes(cls, databases):
1589.         """Check fields, names, and conditions of indexes."""
1590.         errors = []
1591.         for index in cls._meta.indexes:
1592.             # Index name can't start with an underscore or a number, restricted
1593.             # for cross-database compatibility with Oracle.
1594.             if index.name[0] == '_' or index.name[0].isdigit():
1595.                 errors.append(
1596.                     checks.Error(
1597.                         "The index name '%s' cannot start with an underscore "
1598.                         "or a number." % index.name,
1599.                         obj=cls,
1600.                         id='models.E033',
1601.                     ),
1602.                 )
1603.             if len(index.name) > index.max_name_length:
1604.                 errors.append(
1605.                     checks.Error(
1606.                         "The index name '%s' cannot be longer than %d "
1607.                         "characters." % (index.name, index.max_name_length),
1608.                         obj=cls,
1609.                         id='models.E034',
1610.                     ),
1611.                 )
1612.         for db in databases:
1613.             if not router.allow_migrate_model(db, cls):
1614.                 continue
1615.             connection = connections[db]
1616.             if (
1617.                 connection.features.supports_partial_indexes or
1618.                 'supports_partial_indexes' in cls._meta.required_db_features
1619.             ):
1620.                 continue
1621.             if any(index.condition is not None for index in cls._meta.indexes):
1622.                 errors.append(
1623.                     checks.Warning(
1624.                         '%s does not support indexes with conditions.'
1625.                         % connection.display_name,
1626.                         hint=(
1627.                             "Conditions will be ignored. Silence this warning "
1628.                             "if you don't care about it."
1629.                         ),
1630.                         obj=cls,
1631.                         id='models.W037',
1632.                     )
1633.                 )
1634.         fields = [field for index in cls._meta.indexes for field, _ in index.fields_orders]
1635.         errors.extend(cls._check_local_fields(fields, 'indexes'))
1636.         return errors
1637. 
1638.     @classmethod
1639.     def _check_local_fields(cls, fields, option):
1640.         from django.db import models
1641. 
1642.         # In order to avoid hitting the relation tree prematurely, we use our
1643.         # own fields_map instead of using get_field()
1644.         forward_fields_map = {}
1645.         for field in cls._meta._get_fields(reverse=False):
1646.             forward_fields_map[field.name] = field
1647.             if hasattr(field, 'attname'):
1648.                 forward_fields_map[field.attname] = field
1649. 
1650.         errors = []
1651.         for field_name in fields:
1652.             try:
1653.                 field = forward_fields_map[field_name]
1654.             except KeyError:
1655.                 errors.append(
1656.                     checks.Error(
1657.                         "'%s' refers to the nonexistent field '%s'." % (
1658.                             option, field_name,
1659.                         ),
1660.                         obj=cls,
1661.                         id='models.E012',
1662.                     )
1663.                 )
1664.             else:
1665.                 if isinstance(field.remote_field, models.ManyToManyRel):
1666.                     errors.append(
1667.                         checks.Error(
1668.                             "'%s' refers to a ManyToManyField '%s', but "
1669.                             "ManyToManyFields are not permitted in '%s'." % (
1670.                                 option, field_name, option,
1671.                             ),
1672.                             obj=cls,
1673.                             id='models.E013',
1674.                         )
1675.                     )
1676.                 elif field not in cls._meta.local_fields:
1677.                     errors.append(
1678.                         checks.Error(
1679.                             "'%s' refers to field '%s' which is not local to model '%s'."
1680.                             % (option, field_name, cls._meta.object_name),
1681.                             hint="This issue may be caused by multi-table inheritance.",
1682.                             obj=cls,
1683.                             id='models.E016',
1684.                         )
1685.                     )
1686.         return errors
1687. 
1688.     @classmethod
1689.     def _check_ordering(cls):
1690.         """
1691.         Check "ordering" option -- is it a list of strings and do all fields
1692.         exist?
1693.         """
1694.         if cls._meta._ordering_clash:
1695.             return [
1696.                 checks.Error(
1697.                     "'ordering' and 'order_with_respect_to' cannot be used together.",
1698.                     obj=cls,
1699.                     id='models.E021',
1700.                 ),
1701.             ]
1702. 
1703.         if cls._meta.order_with_respect_to or not cls._meta.ordering:
1704.             return []
1705. 
1706.         if not isinstance(cls._meta.ordering, (list, tuple)):
1707.             return [
1708.                 checks.Error(
1709.                     "'ordering' must be a tuple or list (even if you want to order by only one field).",
1710.                     obj=cls,
1711.                     id='models.E014',
1712.                 )
1713.             ]
1714. 
1715.         errors = []
1716.         fields = cls._meta.ordering
1717. 
1718.         # Skip expressions and '?' fields.
1719.         fields = (f for f in fields if isinstance(f, str) and f != '?')
1720. 
1721.         # Convert "-field" to "field".
1722.         fields = ((f[1:] if f.startswith('-') else f) for f in fields)
1723. 
1724.         # Separate related fields and non-related fields.
1725.         _fields = []
1726.         related_fields = []
1727.         for f in fields:
1728.             if LOOKUP_SEP in f:
1729.                 related_fields.append(f)
1730.             else:
1731.                 _fields.append(f)
1732.         fields = _fields
1733. 
1734.         # Check related fields.
1735.         for field in related_fields:
1736.             _cls = cls
1737.             fld = None
1738.             for part in field.split(LOOKUP_SEP):
1739.                 try:
1740.                     # pk is an alias that won't be found by opts.get_field.
1741.                     if part == 'pk':
1742.                         fld = _cls._meta.pk
1743.                     else:
1744.                         fld = _cls._meta.get_field(part)
1745.                     if fld.is_relation:
1746.                         _cls = fld.get_path_info()[-1].to_opts.model
1747.                     else:
1748.                         _cls = None
1749.                 except (FieldDoesNotExist, AttributeError):
1750.                     if fld is None or fld.get_transform(part) is None:
1751.                         errors.append(
1752.                             checks.Error(
1753.                                 "'ordering' refers to the nonexistent field, "
1754.                                 "related field, or lookup '%s'." % field,
1755.                                 obj=cls,
1756.                                 id='models.E015',
1757.                             )
1758.                         )
1759. 
1760.         # Skip ordering on pk. This is always a valid order_by field
1761.         # but is an alias and therefore won't be found by opts.get_field.
1762.         fields = {f for f in fields if f != 'pk'}
1763. 
1764.         # Check for invalid or nonexistent fields in ordering.
1765.         invalid_fields = []
1766. 
1767.         # Any field name that is not present in field_names does not exist.
1768.         # Also, ordering by m2m fields is not allowed.
1769.         opts = cls._meta
1770.         valid_fields = set(chain.from_iterable(
1771.             (f.name, f.attname) if not (f.auto_created and not f.concrete) else (f.field.related_query_name(),)
1772.             for f in chain(opts.fields, opts.related_objects)
1773.         ))
1774. 
1775.         invalid_fields.extend(fields - valid_fields)
1776. 
1777.         for invalid_field in invalid_fields:
1778.             errors.append(
1779.                 checks.Error(
1780.                     "'ordering' refers to the nonexistent field, related "
1781.                     "field, or lookup '%s'." % invalid_field,
1782.                     obj=cls,
1783.                     id='models.E015',
1784.                 )
1785.             )
1786.         return errors
1787. 
1788.     @classmethod
1789.     def _check_long_column_names(cls, databases):
1790.         """
1791.         Check that any auto-generated column names are shorter than the limits
1792.         for each database in which the model will be created.
1793.         """
1794.         if not databases:
1795.             return []
1796.         errors = []
1797.         allowed_len = None
1798.         db_alias = None
1799. 
1800.         # Find the minimum max allowed length among all specified db_aliases.
1801.         for db in databases:
1802.             # skip databases where the model won't be created
1803.             if not router.allow_migrate_model(db, cls):
1804.                 continue
1805.             connection = connections[db]
1806.             max_name_length = connection.ops.max_name_length()
1807.             if max_name_length is None or connection.features.truncates_names:
1808.                 continue
1809.             else:
1810.                 if allowed_len is None:
1811.                     allowed_len = max_name_length
1812.                     db_alias = db
1813.                 elif max_name_length < allowed_len:
1814.                     allowed_len = max_name_length
1815.                     db_alias = db
1816. 
1817.         if allowed_len is None:
1818.             return errors
1819. 
1820.         for f in cls._meta.local_fields:
1821.             _, column_name = f.get_attname_column()
1822. 
1823.             # Check if auto-generated name for the field is too long
1824.             # for the database.
1825.             if f.db_column is None and column_name is not None and len(column_name) > allowed_len:
1826.                 errors.append(
1827.                     checks.Error(
1828.                         'Autogenerated column name too long for field "%s". '
1829.                         'Maximum length is "%s" for database "%s".'
1830.                         % (column_name, allowed_len, db_alias),
1831.                         hint="Set the column name manually using 'db_column'.",
1832.                         obj=cls,
1833.                         id='models.E018',
1834.                     )
1835.                 )
1836. 
1837.         for f in cls._meta.local_many_to_many:
1838.             # Skip nonexistent models.
1839.             if isinstance(f.remote_field.through, str):
1840.                 continue
1841. 
1842.             # Check if auto-generated name for the M2M field is too long
1843.             # for the database.
1844.             for m2m in f.remote_field.through._meta.local_fields:
1845.                 _, rel_name = m2m.get_attname_column()
1846.                 if m2m.db_column is None and rel_name is not None and len(rel_name) > allowed_len:
1847.                     errors.append(
1848.                         checks.Error(
1849.                             'Autogenerated column name too long for M2M field '
1850.                             '"%s". Maximum length is "%s" for database "%s".'
1851.                             % (rel_name, allowed_len, db_alias),
1852.                             hint=(
1853.                                 "Use 'through' to create a separate model for "
1854.                                 "M2M and then set column_name using 'db_column'."
1855.                             ),
1856.                             obj=cls,
1857.                             id='models.E019',
1858.                         )
1859.                     )
1860. 
1861.         return errors
1862. 
1863.     @classmethod
1864.     def _check_constraints(cls, databases):
1865.         errors = []
1866.         for db in databases:
1867.             if not router.allow_migrate_model(db, cls):
1868.                 continue
1869.             connection = connections[db]
1870.             if not (
1871.                 connection.features.supports_table_check_constraints or
1872.                 'supports_table_check_constraints' in cls._meta.required_db_features
1873.             ) and any(
1874.                 isinstance(constraint, CheckConstraint)
1875.                 for constraint in cls._meta.constraints
1876.             ):
1877.                 errors.append(
1878.                     checks.Warning(
1879.                         '%s does not support check constraints.' % connection.display_name,
1880.                         hint=(
1881.                             "A constraint won't be created. Silence this "
1882.                             "warning if you don't care about it."
1883.                         ),
1884.                         obj=cls,
1885.                         id='models.W027',
1886.                     )
1887.                 )
1888.             if not (
1889.                 connection.features.supports_partial_indexes or
1890.                 'supports_partial_indexes' in cls._meta.required_db_features
1891.             ) and any(
1892.                 isinstance(constraint, UniqueConstraint) and constraint.condition is not None
1893.                 for constraint in cls._meta.constraints
1894.             ):
1895.                 errors.append(
1896.                     checks.Warning(
1897.                         '%s does not support unique constraints with '
1898.                         'conditions.' % connection.display_name,
1899.                         hint=(
1900.                             "A constraint won't be created. Silence this "
1901.                             "warning if you don't care about it."
1902.                         ),
1903.                         obj=cls,
1904.                         id='models.W036',
1905.                     )
1906.                 )
1907.             if not (
1908.                 connection.features.supports_deferrable_unique_constraints or
1909.                 'supports_deferrable_unique_constraints' in cls._meta.required_db_features
1910.             ) and any(
1911.                 isinstance(constraint, UniqueConstraint) and constraint.deferrable is not None
1912.                 for constraint in cls._meta.constraints
1913.             ):
1914.                 errors.append(
1915.                     checks.Warning(
1916.                         '%s does not support deferrable unique constraints.'
1917.                         % connection.display_name,
1918.                         hint=(
1919.                             "A constraint won't be created. Silence this "
1920.                             "warning if you don't care about it."
1921.                         ),
1922.                         obj=cls,
1923.                         id='models.W038',
1924.                     )
1925.                 )
1926.         return errors
1927. 
1928. 
1929. ############################################
1930. # HELPER FUNCTIONS (CURRIED MODEL METHODS) #
1931. ############################################
1932. 
1933. # ORDERING METHODS #########################
1934. 
1935. def method_set_order(self, ordered_obj, id_list, using=None):
1936.     if using is None:
1937.         using = DEFAULT_DB_ALIAS
1938.     order_wrt = ordered_obj._meta.order_with_respect_to
1939.     filter_args = order_wrt.get_forward_related_filter(self)
1940.     ordered_obj.objects.db_manager(using).filter(**filter_args).bulk_update([
1941.         ordered_obj(pk=pk, _order=order) for order, pk in enumerate(id_list)
1942.     ], ['_order'])
1943. 
1944. 
1945. def method_get_order(self, ordered_obj):
1946.     order_wrt = ordered_obj._meta.order_with_respect_to
1947.     filter_args = order_wrt.get_forward_related_filter(self)
1948.     pk_name = ordered_obj._meta.pk.name
1949.     return ordered_obj.objects.filter(**filter_args).values_list(pk_name, flat=True)
1950. 
1951. 
1952. def make_foreign_order_accessors(model, related_model):
1953.     setattr(
1954.         related_model,
1955.         'get_%s_order' % model.__name__.lower(),
1956.         partialmethod(method_get_order, model)
1957.     )
1958.     setattr(
1959.         related_model,
1960.         'set_%s_order' % model.__name__.lower(),
1961.         partialmethod(method_set_order, model)
1962.     )
1963. 
1964. ########
1965. # MISC #
1966. ########
1967. 
1968. 
1969. def model_unpickle(model_id):
1970.     """Used to unpickle Model subclasses with deferred fields."""
1971.     if isinstance(model_id, tuple):
1972.         model = apps.get_model(*model_id)
1973.     else:
1974.         # Backwards compat - the model was cached directly in earlier versions.
1975.         model = model_id
1976.     return model.__new__(model)
1977. 
1978. 
1979. model_unpickle.__safe_for_unpickle__ = True

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 21:39:12,837 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user wants to fix a bug in Django's model ordering validation. The provided patch in `django/db/models/base.py` uses `get_transform()` and `get_lookup()` methods on a field object. To understand the patch and the bug, I need to see the implementation of these methods. These methods are defined in the base `Field` class, which is located in `django/db/models/fields/__init__.py`." query='Please provide the full content of the file `django/db/models/fields/__init__.py`.' extra_requirements='' purpose='I need to inspect the `Field` class definition, specifically the `get_transform` and `get_lookup` methods, to understand the logic of the provided patch for the ordering checks in the patch.'
2025-12-21 21:39:12,839 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
2025-12-21 21:39:12,839 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 21:39:12,839 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 21:39:12,840 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 21:39:12,840 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
Purpose: I need to inspect the `Field` class definition, specifically the `get_transform` and `get_lookup` methods, to understand the logic of the provided patch for the ordering checks in the patch.
2025-12-21 21:39:15,744 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the file `django/db/models/fields/__init__.py` so you can inspect the `Field` class definition and its methods.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2123, 'candidates_token_count': 61, 'total_token_count': 2409, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2123}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 61}], 'thoughts_token_count': 225, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1955174774420066, 'model_name': 'gemini-2.5-pro'} id='run--ba01c3d3-0ed5-4f97-be52-b67d0f2137e7-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/fields/__init__.py'}, 'id': '84d188b9-ce6c-4778-b9e1-4f8d0bee4aca', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2123, 'output_tokens': 61, 'total_tokens': 2409, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 225}}
2025-12-21 21:39:21,768 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have provided the full content of the file `django/db/models/fields/__init__.py`. You can now inspect the `Field` class definition and the `get_transform` and `get_lookup` methods to understand the logic of the patch.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 1000.0, "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9332, 'candidates_token_count': 85, 'total_token_count': 9928, 'cached_content_token_count': 1826, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9332}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1826}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 511}, 'finish_reason': 'STOP', 'avg_logprobs': -0.8329157212201287, 'model_name': 'gemini-2.5-pro'} id='run--03edf599-52ef-481c-a81e-8c946a8255b3-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 1000.0, 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': 'e2076978-2e3b-40f2-b5dd-3672127442fe', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9332, 'output_tokens': 85, 'total_tokens': 9928, 'input_token_details': {'cache_read': 1826}, 'output_token_details': {'reasoning': 511}}
2025-12-21 21:39:40,741 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have provided the full content of the file `django/db/models/fields/__init__.py`. You can now inspect the `Field` class definition and the `get_transform` and `get_lookup` methods to understand the logic of the patch.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "end_line": 1500.0, "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 16797, 'candidates_token_count': 85, 'total_token_count': 18450, 'prompt_tokens_details': [{'modality': 1, 'token_count': 16797}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 1568, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -2.0701710420496324, 'model_name': 'gemini-2.5-pro'} id='run--ea6e20a5-795e-4649-8947-4a5af52e0085-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'end_line': 1500.0, 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': 'f8d85a93-20be-4eb1-b826-666a171286a4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 16797, 'output_tokens': 85, 'total_tokens': 18450, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 1568}}
2025-12-21 21:39:42,515 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have provided the full content of the file `django/db/models/fields/__init__.py`. You can now inspect the `Field` class definition and the `get_transform` and `get_lookup` methods to understand the logic of the patch.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1501.0, "end_line": 2000.0, "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 24345, 'candidates_token_count': 85, 'total_token_count': 24430, 'cached_content_token_count': 15266, 'prompt_tokens_details': [{'modality': 1, 'token_count': 24345}], 'cache_tokens_details': [{'modality': 1, 'token_count': 15266}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 0}, 'finish_reason': 'STOP', 'avg_logprobs': -0.0008664668482892653, 'model_name': 'gemini-2.5-pro'} id='run--47dde561-eb05-4c68-9d93-cf7a87ab946a-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1501.0, 'end_line': 2000.0, 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': '1fa59ae8-1808-4982-9c3c-df7e753bcac8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24345, 'output_tokens': 85, 'total_tokens': 24430, 'input_token_details': {'cache_read': 15266}}
2025-12-21 21:46:31,364 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have provided the full content of the file `django/db/models/fields/__init__.py`. You can now inspect the `Field` class definition and the `get_transform` and `get_lookup` methods to understand the logic of the patch.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2001.0, "end_line": 2500.0, "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31598, 'candidates_token_count': 85, 'total_token_count': 94479, 'cached_content_token_count': 23038, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31598}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23038}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 85}], 'thoughts_token_count': 62796}, 'finish_reason': 'STOP', 'avg_logprobs': -4.66772066004136, 'model_name': 'gemini-2.5-pro'} id='run--7817f70d-0de9-44a9-ae89-8ceb62ed0a9d-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2001.0, 'end_line': 2500.0, 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': '2b0c6549-fc3b-4261-9b21-e33d829debeb', 'type': 'tool_call'}] usage_metadata={'input_tokens': 31598, 'output_tokens': 85, 'total_tokens': 94479, 'input_token_details': {'cache_read': 23038}, 'output_token_details': {'reasoning': 62796}}
2025-12-21 21:46:37,316 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have now provided the complete content of the file `django/db/models/fields/__init__.py`. This should allow you to examine the `Field` class and other related code to understand the context of the patch you're working on. The methods `get_transform` and `get_lookup` are not directly defined on the `Field` class but are inherited from `RegisterLookupMixin`." additional_kwargs={'function_call': {'name': 'find_file_node_with_relative_path', 'arguments': '{"relative_path": "django/db/models/query_utils.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38293, 'candidates_token_count': 184, 'total_token_count': 38816, 'cached_content_token_count': 23131, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38293}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23131}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 184}], 'thoughts_token_count': 339}, 'finish_reason': 'STOP', 'avg_logprobs': -0.20012320642885956, 'model_name': 'gemini-2.5-pro'} id='run--d9c2daa0-d07e-47fb-a12f-4387af6cb589-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'django/db/models/fields/__init__.py', 'text': 'def get_transform'}, 'id': '5501cef1-d0d2-4ab2-bf55-6fc2faed7c44', 'type': 'tool_call'}, {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'relative_path': 'django/db/models/fields/__init__.py', 'text': 'def get_lookup'}, 'id': '7db79825-ffea-455d-9181-c0bee79848ba', 'type': 'tool_call'}, {'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'django/db/models/query_utils.py'}, 'id': 'd44d9210-b27a-43e2-a6a9-7e39922df4f2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38293, 'output_tokens': 184, 'total_tokens': 38816, 'input_token_details': {'cache_read': 23131}, 'output_token_details': {'reasoning': 339}}
2025-12-21 21:46:40,860 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have provided the full content of the file `django/db/models/fields/__init__.py`. As I mentioned, the `get_transform` and `get_lookup` methods are inherited from `RegisterLookupMixin`. I will now retrieve the content of `django/db/models/query_utils.py`, where `RegisterLookupMixin` is defined, so you can have the complete context.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/query_utils.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 38603, 'candidates_token_count': 109, 'total_token_count': 38913, 'cached_content_token_count': 36566, 'prompt_tokens_details': [{'modality': 1, 'token_count': 38603}], 'cache_tokens_details': [{'modality': 1, 'token_count': 36566}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 109}], 'thoughts_token_count': 201}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22022775772514694, 'model_name': 'gemini-2.5-pro'} id='run--330f75ca-8c6b-438d-87b3-41eab71c8465-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/query_utils.py'}, 'id': 'bda72f6a-eb2a-41d3-b5df-ad9c915a0b3c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 38603, 'output_tokens': 109, 'total_tokens': 38913, 'input_token_details': {'cache_read': 36566}, 'output_token_details': {'reasoning': 201}}
2025-12-21 21:46:45,633 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have gathered the content of `django/db/models/fields/__init__.py` and `django/db/models/query_utils.py`. The `Field` class, within the former file, inherits from `RegisterLookupMixin`, which is defined in the latter. This mixin provides the `get_transform` and `get_lookup` methods you were interested in, and you can now inspect all the relevant code.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 43658, 'candidates_token_count': 90, 'total_token_count': 44165, 'cached_content_token_count': 38601, 'prompt_tokens_details': [{'modality': 1, 'token_count': 43658}], 'cache_tokens_details': [{'modality': 1, 'token_count': 38601}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 90}], 'thoughts_token_count': 417}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3501092274983724, 'model_name': 'gemini-2.5-pro'} id='run--644a5747-76ff-4830-ad8d-581123a8c928-0' usage_metadata={'input_tokens': 43658, 'output_tokens': 90, 'total_tokens': 44165, 'input_token_details': {'cache_read': 38601}, 'output_token_details': {'reasoning': 417}}
2025-12-21 21:46:45,635 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/models/fields/__init__.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to inspect the `Field` class definition, specifically the `get_transform` and `get_lookup` methods, to understand the logic of the provided patch for the ordering checks in the patch.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/fields/__init__.py
Line number range: 1 - 500
Content:
1. import collections.abc
2. import copy
3. import datetime
4. import decimal
5. import operator
6. import uuid
7. import warnings
8. from base64 import b64decode, b64encode
9. from functools import partialmethod, total_ordering
10. 
11. from django import forms
12. from django.apps import apps
13. from django.conf import settings
14. from django.core import checks, exceptions, validators
15. from django.db import connection, connections, router
16. from django.db.models.constants import LOOKUP_SEP
17. from django.db.models.query_utils import DeferredAttribute, RegisterLookupMixin
18. from django.utils import timezone
19. from django.utils.datastructures import DictWrapper
20. from django.utils.dateparse import (
21.     parse_date, parse_datetime, parse_duration, parse_time,
22. )
23. from django.utils.duration import duration_microseconds, duration_string
24. from django.utils.functional import Promise, cached_property
25. from django.utils.ipv6 import clean_ipv6_address
26. from django.utils.itercompat import is_iterable
27. from django.utils.text import capfirst
28. from django.utils.translation import gettext_lazy as _
29. 
30. __all__ = [
31.     'AutoField', 'BLANK_CHOICE_DASH', 'BigAutoField', 'BigIntegerField',
32.     'BinaryField', 'BooleanField', 'CharField', 'CommaSeparatedIntegerField',
33.     'DateField', 'DateTimeField', 'DecimalField', 'DurationField',
34.     'EmailField', 'Empty', 'Field', 'FilePathField', 'FloatField',
35.     'GenericIPAddressField', 'IPAddressField', 'IntegerField', 'NOT_PROVIDED',
36.     'NullBooleanField', 'PositiveBigIntegerField', 'PositiveIntegerField',
37.     'PositiveSmallIntegerField', 'SlugField', 'SmallAutoField',
38.     'SmallIntegerField', 'TextField', 'TimeField', 'URLField', 'UUIDField',
39. ]
40. 
41. 
42. class Empty:
43.     pass
44. 
45. 
46. class NOT_PROVIDED:
47.     pass
48. 
49. 
50. # The values to use for "blank" in SelectFields. Will be appended to the start
51. # of most "choices" lists.
52. BLANK_CHOICE_DASH = [("", "---------")]
53. 
54. 
55. def _load_field(app_label, model_name, field_name):
56.     return apps.get_model(app_label, model_name)._meta.get_field(field_name)
57. 
58. 
59. # A guide to Field parameters:
60. #
61. #   * name:      The name of the field specified in the model.
62. #   * attname:   The attribute to use on the model object. This is the same as
63. #                "name", except in the case of ForeignKeys, where "_id" is
64. #                appended.
65. #   * db_column: The db_column specified in the model (or None).
66. #   * column:    The database column for this field. This is the same as
67. #                "attname", except if db_column is specified.
68. #
69. # Code that introspects values, or does other dynamic things, should use
70. # attname. For example, this gets the primary key value of object "obj":
71. #
72. #     getattr(obj, opts.pk.attname)
73. 
74. def _empty(of_cls):
75.     new = Empty()
76.     new.__class__ = of_cls
77.     return new
78. 
79. 
80. def return_None():
81.     return None
82. 
83. 
84. @total_ordering
85. class Field(RegisterLookupMixin):
86.     """Base class for all field types"""
87. 
88.     # Designates whether empty strings fundamentally are allowed at the
89.     # database level.
90.     empty_strings_allowed = True
91.     empty_values = list(validators.EMPTY_VALUES)
92. 
93.     # These track each time a Field instance is created. Used to retain order.
94.     # The auto_creation_counter is used for fields that Django implicitly
95.     # creates, creation_counter is used for all user-specified fields.
96.     creation_counter = 0
97.     auto_creation_counter = -1
98.     default_validators = []  # Default set of validators
99.     default_error_messages = {
100.         'invalid_choice': _('Value %(value)r is not a valid choice.'),
101.         'null': _('This field cannot be null.'),
102.         'blank': _('This field cannot be blank.'),
103.         'unique': _('%(model_name)s with this %(field_label)s '
104.                     'already exists.'),
105.         # Translators: The 'lookup_type' is one of 'date', 'year' or 'month'.
106.         # Eg: "Title must be unique for pub_date year"
107.         'unique_for_date': _("%(field_label)s must be unique for "
108.                              "%(date_field_label)s %(lookup_type)s."),
109.     }
110.     system_check_deprecated_details = None
111.     system_check_removed_details = None
112. 
113.     # Field flags
114.     hidden = False
115. 
116.     many_to_many = None
117.     many_to_one = None
118.     one_to_many = None
119.     one_to_one = None
120.     related_model = None
121. 
122.     descriptor_class = DeferredAttribute
123. 
124.     # Generic field type description, usually overridden by subclasses
125.     def _description(self):
126.         return _('Field of type: %(field_type)s') % {
127.             'field_type': self.__class__.__name__
128.         }
129.     description = property(_description)
130. 
131.     def __init__(self, verbose_name=None, name=None, primary_key=False,
132.                  max_length=None, unique=False, blank=False, null=False,
133.                  db_index=False, rel=None, default=NOT_PROVIDED, editable=True,
134.                  serialize=True, unique_for_date=None, unique_for_month=None,
135.                  unique_for_year=None, choices=None, help_text='', db_column=None,
136.                  db_tablespace=None, auto_created=False, validators=(),
137.                  error_messages=None):
138.         self.name = name
139.         self.verbose_name = verbose_name  # May be set by set_attributes_from_name
140.         self._verbose_name = verbose_name  # Store original for deconstruction
141.         self.primary_key = primary_key
142.         self.max_length, self._unique = max_length, unique
143.         self.blank, self.null = blank, null
144.         self.remote_field = rel
145.         self.is_relation = self.remote_field is not None
146.         self.default = default
147.         self.editable = editable
148.         self.serialize = serialize
149.         self.unique_for_date = unique_for_date
150.         self.unique_for_month = unique_for_month
151.         self.unique_for_year = unique_for_year
152.         if isinstance(choices, collections.abc.Iterator):
153.             choices = list(choices)
154.         self.choices = choices
155.         self.help_text = help_text
156.         self.db_index = db_index
157.         self.db_column = db_column
158.         self._db_tablespace = db_tablespace
159.         self.auto_created = auto_created
160. 
161.         # Adjust the appropriate creation counter, and save our local copy.
162.         if auto_created:
163.             self.creation_counter = Field.auto_creation_counter
164.             Field.auto_creation_counter -= 1
165.         else:
166.             self.creation_counter = Field.creation_counter
167.             Field.creation_counter += 1
168. 
169.         self._validators = list(validators)  # Store for deconstruction later
170. 
171.         messages = {}
172.         for c in reversed(self.__class__.__mro__):
173.             messages.update(getattr(c, 'default_error_messages', {}))
174.         messages.update(error_messages or {})
175.         self._error_messages = error_messages  # Store for deconstruction later
176.         self.error_messages = messages
177. 
178.     def __str__(self):
179.         """
180.         Return "app_label.model_label.field_name" for fields attached to
181.         models.
182.         """
183.         if not hasattr(self, 'model'):
184.             return super().__str__()
185.         model = self.model
186.         app = model._meta.app_label
187.         return '%s.%s.%s' % (app, model._meta.object_name, self.name)
188. 
189.     def __repr__(self):
190.         """Display the module, class, and name of the field."""
191.         path = '%s.%s' % (self.__class__.__module__, self.__class__.__qualname__)
192.         name = getattr(self, 'name', None)
193.         if name is not None:
194.             return '<%s: %s>' % (path, name)
195.         return '<%s>' % path
196. 
197.     def check(self, **kwargs):
198.         return [
199.             *self._check_field_name(),
200.             *self._check_choices(),
201.             *self._check_db_index(),
202.             *self._check_null_allowed_for_primary_keys(),
203.             *self._check_backend_specific_checks(**kwargs),
204.             *self._check_validators(),
205.             *self._check_deprecation_details(),
206.         ]
207. 
208.     def _check_field_name(self):
209.         """
210.         Check if field name is valid, i.e. 1) does not end with an
211.         underscore, 2) does not contain "__" and 3) is not "pk".
212.         """
213.         if self.name.endswith('_'):
214.             return [
215.                 checks.Error(
216.                     'Field names must not end with an underscore.',
217.                     obj=self,
218.                     id='fields.E001',
219.                 )
220.             ]
221.         elif LOOKUP_SEP in self.name:
222.             return [
223.                 checks.Error(
224.                     'Field names must not contain "%s".' % LOOKUP_SEP,
225.                     obj=self,
226.                     id='fields.E002',
227.                 )
228.             ]
229.         elif self.name == 'pk':
230.             return [
231.                 checks.Error(
232.                     "'pk' is a reserved word that cannot be used as a field name.",
233.                     obj=self,
234.                     id='fields.E003',
235.                 )
236.             ]
237.         else:
238.             return []
239. 
240.     @classmethod
241.     def _choices_is_value(cls, value):
242.         return isinstance(value, (str, Promise)) or not is_iterable(value)
243. 
244.     def _check_choices(self):
245.         if not self.choices:
246.             return []
247. 
248.         if not is_iterable(self.choices) or isinstance(self.choices, str):
249.             return [
250.                 checks.Error(
251.                     "'choices' must be an iterable (e.g., a list or tuple).",
252.                     obj=self,
253.                     id='fields.E004',
254.                 )
255.             ]
256. 
257.         choice_max_length = 0
258.         # Expect [group_name, [value, display]]
259.         for choices_group in self.choices:
260.             try:
261.                 group_name, group_choices = choices_group
262.             except (TypeError, ValueError):
263.                 # Containing non-pairs
264.                 break
265.             try:
266.                 if not all(
267.                     self._choices_is_value(value) and self._choices_is_value(human_name)
268.                     for value, human_name in group_choices
269.                 ):
270.                     break
271.                 if self.max_length is not None and group_choices:
272.                     choice_max_length = max([
273.                         choice_max_length,
274.                         *(len(value) for value, _ in group_choices if isinstance(value, str)),
275.                     ])
276.             except (TypeError, ValueError):
277.                 # No groups, choices in the form [value, display]
278.                 value, human_name = group_name, group_choices
279.                 if not self._choices_is_value(value) or not self._choices_is_value(human_name):
280.                     break
281.                 if self.max_length is not None and isinstance(value, str):
282.                     choice_max_length = max(choice_max_length, len(value))
283. 
284.             # Special case: choices=['ab']
285.             if isinstance(choices_group, str):
286.                 break
287.         else:
288.             if self.max_length is not None and choice_max_length > self.max_length:
289.                 return [
290.                     checks.Error(
291.                         "'max_length' is too small to fit the longest value "
292.                         "in 'choices' (%d characters)." % choice_max_length,
293.                         obj=self,
294.                         id='fields.E009',
295.                     ),
296.                 ]
297.             return []
298. 
299.         return [
300.             checks.Error(
301.                 "'choices' must be an iterable containing "
302.                 "(actual value, human readable name) tuples.",
303.                 obj=self,
304.                 id='fields.E005',
305.             )
306.         ]
307. 
308.     def _check_db_index(self):
309.         if self.db_index not in (None, True, False):
310.             return [
311.                 checks.Error(
312.                     "'db_index' must be None, True or False.",
313.                     obj=self,
314.                     id='fields.E006',
315.                 )
316.             ]
317.         else:
318.             return []
319. 
320.     def _check_null_allowed_for_primary_keys(self):
321.         if (self.primary_key and self.null and
322.                 not connection.features.interprets_empty_strings_as_nulls):
323.             # We cannot reliably check this for backends like Oracle which
324.             # consider NULL and '' to be equal (and thus set up
325.             # character-based fields a little differently).
326.             return [
327.                 checks.Error(
328.                     'Primary keys must not have null=True.',
329.                     hint=('Set null=False on the field, or '
330.                           'remove primary_key=True argument.'),
331.                     obj=self,
332.                     id='fields.E007',
333.                 )
334.             ]
335.         else:
336.             return []
337. 
338.     def _check_backend_specific_checks(self, databases=None, **kwargs):
339.         if databases is None:
340.             return []
341.         app_label = self.model._meta.app_label
342.         errors = []
343.         for alias in databases:
344.             if router.allow_migrate(alias, app_label, model_name=self.model._meta.model_name):
345.                 errors.extend(connections[alias].validation.check_field(self, **kwargs))
346.         return errors
347. 
348.     def _check_validators(self):
349.         errors = []
350.         for i, validator in enumerate(self.validators):
351.             if not callable(validator):
352.                 errors.append(
353.                     checks.Error(
354.                         "All 'validators' must be callable.",
355.                         hint=(
356.                             "validators[{i}] ({repr}) isn't a function or "
357.                             "instance of a validator class.".format(
358.                                 i=i, repr=repr(validator),
359.                             )
360.                         ),
361.                         obj=self,
362.                         id='fields.E008',
363.                     )
364.                 )
365.         return errors
366. 
367.     def _check_deprecation_details(self):
368.         if self.system_check_removed_details is not None:
369.             return [
370.                 checks.Error(
371.                     self.system_check_removed_details.get(
372.                         'msg',
373.                         '%s has been removed except for support in historical '
374.                         'migrations.' % self.__class__.__name__
375.                     ),
376.                     hint=self.system_check_removed_details.get('hint'),
377.                     obj=self,
378.                     id=self.system_check_removed_details.get('id', 'fields.EXXX'),
379.                 )
380.             ]
381.         elif self.system_check_deprecated_details is not None:
382.             return [
383.                 checks.Warning(
384.                     self.system_check_deprecated_details.get(
385.                         'msg',
386.                         '%s has been deprecated.' % self.__class__.__name__
387.                     ),
388.                     hint=self.system_check_deprecated_details.get('hint'),
389.                     obj=self,
390.                     id=self.system_check_deprecated_details.get('id', 'fields.WXXX'),
391.                 )
392.             ]
393.         return []
394. 
395.     def get_col(self, alias, output_field=None):
396.         if output_field is None:
397.             output_field = self
398.         if alias != self.model._meta.db_table or output_field != self:
399.             from django.db.models.expressions import Col
400.             return Col(alias, self, output_field)
401.         else:
402.             return self.cached_col
403. 
404.     @cached_property
405.     def cached_col(self):
406.         from django.db.models.expressions import Col
407.         return Col(self.model._meta.db_table, self)
408. 
409.     def select_format(self, compiler, sql, params):
410.         """
411.         Custom format for select clauses. For example, GIS columns need to be
412.         selected as AsText(table.col) on MySQL as the table.col data can't be
413.         used by Django.
414.         """
415.         return sql, params
416. 
417.     def deconstruct(self):
418.         """
419.         Return enough information to recreate the field as a 4-tuple:
420. 
421.          * The name of the field on the model, if contribute_to_class() has
422.            been run.
423.          * The import path of the field, including the class:e.g.
424.            django.db.models.IntegerField This should be the most portable
425.            version, so less specific may be better.
426.          * A list of positional arguments.
427.          * A dict of keyword arguments.
428. 
429.         Note that the positional or keyword arguments must contain values of
430.         the following types (including inner values of collection types):
431. 
432.          * None, bool, str, int, float, complex, set, frozenset, list, tuple,
433.            dict
434.          * UUID
435.          * datetime.datetime (naive), datetime.date
436.          * top-level classes, top-level functions - will be referenced by their
437.            full import path
438.          * Storage instances - these have their own deconstruct() method
439. 
440.         This is because the values here must be serialized into a text format
441.         (possibly new Python code, possibly JSON) and these are the only types
442.         with encoding handlers defined.
443. 
444.         There's no need to return the exact way the field was instantiated this
445.         time, just ensure that the resulting field is the same - prefer keyword
446.         arguments over positional ones, and omit parameters with their default
447.         values.
448.         """
449.         # Short-form way of fetching all the default parameters
450.         keywords = {}
451.         possibles = {
452.             "verbose_name": None,
453.             "primary_key": False,
454.             "max_length": None,
455.             "unique": False,
456.             "blank": False,
457.             "null": False,
458.             "db_index": False,
459.             "default": NOT_PROVIDED,
460.             "editable": True,
461.             "serialize": True,
462.             "unique_for_date": None,
463.             "unique_for_month": None,
464.             "unique_for_year": None,
465.             "choices": None,
466.             "help_text": '',
467.             "db_column": None,
468.             "db_tablespace": None,
469.             "auto_created": False,
470.             "validators": [],
471.             "error_messages": None,
472.         }
473.         attr_overrides = {
474.             "unique": "_unique",
475.             "error_messages": "_error_messages",
476.             "validators": "_validators",
477.             "verbose_name": "_verbose_name",
478.             "db_tablespace": "_db_tablespace",
479.         }
480.         equals_comparison = {"choices", "validators"}
481.         for name, default in possibles.items():
482.             value = getattr(self, attr_overrides.get(name, name))
483.             # Unroll anything iterable for choices into a concrete list
484.             if name == "choices" and isinstance(value, collections.abc.Iterable):
485.                 value = list(value)
486.             # Do correct kind of comparison
487.             if name in equals_comparison:
488.                 if value != default:
489.                     keywords[name] = value
490.             else:
491.                 if value is not default:
492.                     keywords[name] = value
493.         # Work out path - we shorten it for known Django core fields
494.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
495.         if path.startswith("django.db.models.fields.related"):
496.             path = path.replace("django.db.models.fields.related", "django.db.models")
497.         elif path.startswith("django.db.models.fields.files"):
498.             path = path.replace("django.db.models.fields.files", "django.db.models")
499.         elif path.startswith("django.db.models.fields.proxy"):
500.             path = path.replace("django.db.models.fields.proxy", "django.db.models")


File: django/db/models/fields/__init__.py
Line number range: 501 - 1000
Content:
501.         elif path.startswith("django.db.models.fields"):
502.             path = path.replace("django.db.models.fields", "django.db.models")
503.         # Return basic info - other fields should override this.
504.         return (self.name, path, [], keywords)
505. 
506.     def clone(self):
507.         """
508.         Uses deconstruct() to clone a new copy of this Field.
509.         Will not preserve any class attachments/attribute names.
510.         """
511.         name, path, args, kwargs = self.deconstruct()
512.         return self.__class__(*args, **kwargs)
513. 
514.     def __eq__(self, other):
515.         # Needed for @total_ordering
516.         if isinstance(other, Field):
517.             return self.creation_counter == other.creation_counter
518.         return NotImplemented
519. 
520.     def __lt__(self, other):
521.         # This is needed because bisect does not take a comparison function.
522.         if isinstance(other, Field):
523.             return self.creation_counter < other.creation_counter
524.         return NotImplemented
525. 
526.     def __hash__(self):
527.         return hash(self.creation_counter)
528. 
529.     def __deepcopy__(self, memodict):
530.         # We don't have to deepcopy very much here, since most things are not
531.         # intended to be altered after initial creation.
532.         obj = copy.copy(self)
533.         if self.remote_field:
534.             obj.remote_field = copy.copy(self.remote_field)
535.             if hasattr(self.remote_field, 'field') and self.remote_field.field is self:
536.                 obj.remote_field.field = obj
537.         memodict[id(self)] = obj
538.         return obj
539. 
540.     def __copy__(self):
541.         # We need to avoid hitting __reduce__, so define this
542.         # slightly weird copy construct.
543.         obj = Empty()
544.         obj.__class__ = self.__class__
545.         obj.__dict__ = self.__dict__.copy()
546.         return obj
547. 
548.     def __reduce__(self):
549.         """
550.         Pickling should return the model._meta.fields instance of the field,
551.         not a new copy of that field. So, use the app registry to load the
552.         model and then the field back.
553.         """
554.         if not hasattr(self, 'model'):
555.             # Fields are sometimes used without attaching them to models (for
556.             # example in aggregation). In this case give back a plain field
557.             # instance. The code below will create a new empty instance of
558.             # class self.__class__, then update its dict with self.__dict__
559.             # values - so, this is very close to normal pickle.
560.             state = self.__dict__.copy()
561.             # The _get_default cached_property can't be pickled due to lambda
562.             # usage.
563.             state.pop('_get_default', None)
564.             return _empty, (self.__class__,), state
565.         return _load_field, (self.model._meta.app_label, self.model._meta.object_name,
566.                              self.name)
567. 
568.     def get_pk_value_on_save(self, instance):
569.         """
570.         Hook to generate new PK values on save. This method is called when
571.         saving instances with no primary key value set. If this method returns
572.         something else than None, then the returned value is used when saving
573.         the new instance.
574.         """
575.         if self.default:
576.             return self.get_default()
577.         return None
578. 
579.     def to_python(self, value):
580.         """
581.         Convert the input value into the expected Python data type, raising
582.         django.core.exceptions.ValidationError if the data can't be converted.
583.         Return the converted value. Subclasses should override this.
584.         """
585.         return value
586. 
587.     @cached_property
588.     def validators(self):
589.         """
590.         Some validators can't be created at field initialization time.
591.         This method provides a way to delay their creation until required.
592.         """
593.         return [*self.default_validators, *self._validators]
594. 
595.     def run_validators(self, value):
596.         if value in self.empty_values:
597.             return
598. 
599.         errors = []
600.         for v in self.validators:
601.             try:
602.                 v(value)
603.             except exceptions.ValidationError as e:
604.                 if hasattr(e, 'code') and e.code in self.error_messages:
605.                     e.message = self.error_messages[e.code]
606.                 errors.extend(e.error_list)
607. 
608.         if errors:
609.             raise exceptions.ValidationError(errors)
610. 
611.     def validate(self, value, model_instance):
612.         """
613.         Validate value and raise ValidationError if necessary. Subclasses
614.         should override this to provide validation logic.
615.         """
616.         if not self.editable:
617.             # Skip validation for non-editable fields.
618.             return
619. 
620.         if self.choices is not None and value not in self.empty_values:
621.             for option_key, option_value in self.choices:
622.                 if isinstance(option_value, (list, tuple)):
623.                     # This is an optgroup, so look inside the group for
624.                     # options.
625.                     for optgroup_key, optgroup_value in option_value:
626.                         if value == optgroup_key:
627.                             return
628.                 elif value == option_key:
629.                     return
630.             raise exceptions.ValidationError(
631.                 self.error_messages['invalid_choice'],
632.                 code='invalid_choice',
633.                 params={'value': value},
634.             )
635. 
636.         if value is None and not self.null:
637.             raise exceptions.ValidationError(self.error_messages['null'], code='null')
638. 
639.         if not self.blank and value in self.empty_values:
640.             raise exceptions.ValidationError(self.error_messages['blank'], code='blank')
641. 
642.     def clean(self, value, model_instance):
643.         """
644.         Convert the value's type and run validation. Validation errors
645.         from to_python() and validate() are propagated. Return the correct
646.         value if no error is raised.
647.         """
648.         value = self.to_python(value)
649.         self.validate(value, model_instance)
650.         self.run_validators(value)
651.         return value
652. 
653.     def db_type_parameters(self, connection):
654.         return DictWrapper(self.__dict__, connection.ops.quote_name, 'qn_')
655. 
656.     def db_check(self, connection):
657.         """
658.         Return the database column check constraint for this field, for the
659.         provided connection. Works the same way as db_type() for the case that
660.         get_internal_type() does not map to a preexisting model field.
661.         """
662.         data = self.db_type_parameters(connection)
663.         try:
664.             return connection.data_type_check_constraints[self.get_internal_type()] % data
665.         except KeyError:
666.             return None
667. 
668.     def db_type(self, connection):
669.         """
670.         Return the database column data type for this field, for the provided
671.         connection.
672.         """
673.         # The default implementation of this method looks at the
674.         # backend-specific data_types dictionary, looking up the field by its
675.         # "internal type".
676.         #
677.         # A Field class can implement the get_internal_type() method to specify
678.         # which *preexisting* Django Field class it's most similar to -- i.e.,
679.         # a custom field might be represented by a TEXT column type, which is
680.         # the same as the TextField Django field type, which means the custom
681.         # field's get_internal_type() returns 'TextField'.
682.         #
683.         # But the limitation of the get_internal_type() / data_types approach
684.         # is that it cannot handle database column types that aren't already
685.         # mapped to one of the built-in Django field types. In this case, you
686.         # can implement db_type() instead of get_internal_type() to specify
687.         # exactly which wacky database column type you want to use.
688.         data = self.db_type_parameters(connection)
689.         try:
690.             return connection.data_types[self.get_internal_type()] % data
691.         except KeyError:
692.             return None
693. 
694.     def rel_db_type(self, connection):
695.         """
696.         Return the data type that a related field pointing to this field should
697.         use. For example, this method is called by ForeignKey and OneToOneField
698.         to determine its data type.
699.         """
700.         return self.db_type(connection)
701. 
702.     def cast_db_type(self, connection):
703.         """Return the data type to use in the Cast() function."""
704.         db_type = connection.ops.cast_data_types.get(self.get_internal_type())
705.         if db_type:
706.             return db_type % self.db_type_parameters(connection)
707.         return self.db_type(connection)
708. 
709.     def db_parameters(self, connection):
710.         """
711.         Extension of db_type(), providing a range of different return values
712.         (type, checks). This will look at db_type(), allowing custom model
713.         fields to override it.
714.         """
715.         type_string = self.db_type(connection)
716.         check_string = self.db_check(connection)
717.         return {
718.             "type": type_string,
719.             "check": check_string,
720.         }
721. 
722.     def db_type_suffix(self, connection):
723.         return connection.data_types_suffix.get(self.get_internal_type())
724. 
725.     def get_db_converters(self, connection):
726.         if hasattr(self, 'from_db_value'):
727.             return [self.from_db_value]
728.         return []
729. 
730.     @property
731.     def unique(self):
732.         return self._unique or self.primary_key
733. 
734.     @property
735.     def db_tablespace(self):
736.         return self._db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
737. 
738.     @property
739.     def db_returning(self):
740.         """
741.         Private API intended only to be used by Django itself. Currently only
742.         the PostgreSQL backend supports returning multiple fields on a model.
743.         """
744.         return False
745. 
746.     def set_attributes_from_name(self, name):
747.         self.name = self.name or name
748.         self.attname, self.column = self.get_attname_column()
749.         self.concrete = self.column is not None
750.         if self.verbose_name is None and self.name:
751.             self.verbose_name = self.name.replace('_', ' ')
752. 
753.     def contribute_to_class(self, cls, name, private_only=False):
754.         """
755.         Register the field with the model class it belongs to.
756. 
757.         If private_only is True, create a separate instance of this field
758.         for every subclass of cls, even if cls is not an abstract model.
759.         """
760.         self.set_attributes_from_name(name)
761.         self.model = cls
762.         cls._meta.add_field(self, private=private_only)
763.         if self.column:
764.             # Don't override classmethods with the descriptor. This means that
765.             # if you have a classmethod and a field with the same name, then
766.             # such fields can't be deferred (we don't have a check for this).
767.             if not getattr(cls, self.attname, None):
768.                 setattr(cls, self.attname, self.descriptor_class(self))
769.         if self.choices is not None:
770.             # Don't override a get_FOO_display() method defined explicitly on
771.             # this class, but don't check methods derived from inheritance, to
772.             # allow overriding inherited choices. For more complex inheritance
773.             # structures users should override contribute_to_class().
774.             if 'get_%s_display' % self.name not in cls.__dict__:
775.                 setattr(
776.                     cls,
777.                     'get_%s_display' % self.name,
778.                     partialmethod(cls._get_FIELD_display, field=self),
779.                 )
780. 
781.     def get_filter_kwargs_for_object(self, obj):
782.         """
783.         Return a dict that when passed as kwargs to self.model.filter(), would
784.         yield all instances having the same value for this field as obj has.
785.         """
786.         return {self.name: getattr(obj, self.attname)}
787. 
788.     def get_attname(self):
789.         return self.name
790. 
791.     def get_attname_column(self):
792.         attname = self.get_attname()
793.         column = self.db_column or attname
794.         return attname, column
795. 
796.     def get_internal_type(self):
797.         return self.__class__.__name__
798. 
799.     def pre_save(self, model_instance, add):
800.         """Return field's value just before saving."""
801.         return getattr(model_instance, self.attname)
802. 
803.     def get_prep_value(self, value):
804.         """Perform preliminary non-db specific value checks and conversions."""
805.         if isinstance(value, Promise):
806.             value = value._proxy____cast()
807.         return value
808. 
809.     def get_db_prep_value(self, value, connection, prepared=False):
810.         """
811.         Return field's value prepared for interacting with the database backend.
812. 
813.         Used by the default implementations of get_db_prep_save().
814.         """
815.         if not prepared:
816.             value = self.get_prep_value(value)
817.         return value
818. 
819.     def get_db_prep_save(self, value, connection):
820.         """Return field's value prepared for saving into a database."""
821.         return self.get_db_prep_value(value, connection=connection, prepared=False)
822. 
823.     def has_default(self):
824.         """Return a boolean of whether this field has a default value."""
825.         return self.default is not NOT_PROVIDED
826. 
827.     def get_default(self):
828.         """Return the default value for this field."""
829.         return self._get_default()
830. 
831.     @cached_property
832.     def _get_default(self):
833.         if self.has_default():
834.             if callable(self.default):
835.                 return self.default
836.             return lambda: self.default
837. 
838.         if not self.empty_strings_allowed or self.null and not connection.features.interprets_empty_strings_as_nulls:
839.             return return_None
840.         return str  # return empty string
841. 
842.     def get_choices(self, include_blank=True, blank_choice=BLANK_CHOICE_DASH, limit_choices_to=None, ordering=()):
843.         """
844.         Return choices with a default blank choices included, for use
845.         as <select> choices for this field.
846.         """
847.         if self.choices is not None:
848.             choices = list(self.choices)
849.             if include_blank:
850.                 blank_defined = any(choice in ('', None) for choice, _ in self.flatchoices)
851.                 if not blank_defined:
852.                     choices = blank_choice + choices
853.             return choices
854.         rel_model = self.remote_field.model
855.         limit_choices_to = limit_choices_to or self.get_limit_choices_to()
856.         choice_func = operator.attrgetter(
857.             self.remote_field.get_related_field().attname
858.             if hasattr(self.remote_field, 'get_related_field')
859.             else 'pk'
860.         )
861.         qs = rel_model._default_manager.complex_filter(limit_choices_to)
862.         if ordering:
863.             qs = qs.order_by(*ordering)
864.         return (blank_choice if include_blank else []) + [
865.             (choice_func(x), str(x)) for x in qs
866.         ]
867. 
868.     def value_to_string(self, obj):
869.         """
870.         Return a string value of this field from the passed obj.
871.         This is used by the serialization framework.
872.         """
873.         return str(self.value_from_object(obj))
874. 
875.     def _get_flatchoices(self):
876.         """Flattened version of choices tuple."""
877.         if self.choices is None:
878.             return []
879.         flat = []
880.         for choice, value in self.choices:
881.             if isinstance(value, (list, tuple)):
882.                 flat.extend(value)
883.             else:
884.                 flat.append((choice, value))
885.         return flat
886.     flatchoices = property(_get_flatchoices)
887. 
888.     def save_form_data(self, instance, data):
889.         setattr(instance, self.name, data)
890. 
891.     def formfield(self, form_class=None, choices_form_class=None, **kwargs):
892.         """Return a django.forms.Field instance for this field."""
893.         defaults = {
894.             'required': not self.blank,
895.             'label': capfirst(self.verbose_name),
896.             'help_text': self.help_text,
897.         }
898.         if self.has_default():
899.             if callable(self.default):
900.                 defaults['initial'] = self.default
901.                 defaults['show_hidden_initial'] = True
902.             else:
903.                 defaults['initial'] = self.get_default()
904.         if self.choices is not None:
905.             # Fields with choices get special treatment.
906.             include_blank = (self.blank or
907.                              not (self.has_default() or 'initial' in kwargs))
908.             defaults['choices'] = self.get_choices(include_blank=include_blank)
909.             defaults['coerce'] = self.to_python
910.             if self.null:
911.                 defaults['empty_value'] = None
912.             if choices_form_class is not None:
913.                 form_class = choices_form_class
914.             else:
915.                 form_class = forms.TypedChoiceField
916.             # Many of the subclass-specific formfield arguments (min_value,
917.             # max_value) don't apply for choice fields, so be sure to only pass
918.             # the values that TypedChoiceField will understand.
919.             for k in list(kwargs):
920.                 if k not in ('coerce', 'empty_value', 'choices', 'required',
921.                              'widget', 'label', 'initial', 'help_text',
922.                              'error_messages', 'show_hidden_initial', 'disabled'):
923.                     del kwargs[k]
924.         defaults.update(kwargs)
925.         if form_class is None:
926.             form_class = forms.CharField
927.         return form_class(**defaults)
928. 
929.     def value_from_object(self, obj):
930.         """Return the value of this field in the given model instance."""
931.         return getattr(obj, self.attname)
932. 
933. 
934. class BooleanField(Field):
935.     empty_strings_allowed = False
936.     default_error_messages = {
937.         'invalid': _('“%(value)s” value must be either True or False.'),
938.         'invalid_nullable': _('“%(value)s” value must be either True, False, or None.'),
939.     }
940.     description = _("Boolean (Either True or False)")
941. 
942.     def get_internal_type(self):
943.         return "BooleanField"
944. 
945.     def to_python(self, value):
946.         if self.null and value in self.empty_values:
947.             return None
948.         if value in (True, False):
949.             # 1/0 are equal to True/False. bool() converts former to latter.
950.             return bool(value)
951.         if value in ('t', 'True', '1'):
952.             return True
953.         if value in ('f', 'False', '0'):
954.             return False
955.         raise exceptions.ValidationError(
956.             self.error_messages['invalid_nullable' if self.null else 'invalid'],
957.             code='invalid',
958.             params={'value': value},
959.         )
960. 
961.     def get_prep_value(self, value):
962.         value = super().get_prep_value(value)
963.         if value is None:
964.             return None
965.         return self.to_python(value)
966. 
967.     def formfield(self, **kwargs):
968.         if self.choices is not None:
969.             include_blank = not (self.has_default() or 'initial' in kwargs)
970.             defaults = {'choices': self.get_choices(include_blank=include_blank)}
971.         else:
972.             form_class = forms.NullBooleanField if self.null else forms.BooleanField
973.             # In HTML checkboxes, 'required' means "must be checked" which is
974.             # different from the choices case ("must select some value").
975.             # required=False allows unchecked checkboxes.
976.             defaults = {'form_class': form_class, 'required': False}
977.         return super().formfield(**{**defaults, **kwargs})
978. 
979. 
980. class CharField(Field):
981.     description = _("String (up to %(max_length)s)")
982. 
983.     def __init__(self, *args, **kwargs):
984.         super().__init__(*args, **kwargs)
985.         self.validators.append(validators.MaxLengthValidator(self.max_length))
986. 
987.     def check(self, **kwargs):
988.         return [
989.             *super().check(**kwargs),
990.             *self._check_max_length_attribute(**kwargs),
991.         ]
992. 
993.     def _check_max_length_attribute(self, **kwargs):
994.         if self.max_length is None:
995.             return [
996.                 checks.Error(
997.                     "CharFields must define a 'max_length' attribute.",
998.                     obj=self,
999.                     id='fields.E120',
1000.                 )


File: django/db/models/fields/__init__.py
Line number range: 1001 - 1500
Content:
1001.             ]
1002.         elif (not isinstance(self.max_length, int) or isinstance(self.max_length, bool) or
1003.                 self.max_length <= 0):
1004.             return [
1005.                 checks.Error(
1006.                     "'max_length' must be a positive integer.",
1007.                     obj=self,
1008.                     id='fields.E121',
1009.                 )
1010.             ]
1011.         else:
1012.             return []
1013. 
1014.     def cast_db_type(self, connection):
1015.         if self.max_length is None:
1016.             return connection.ops.cast_char_field_without_max_length
1017.         return super().cast_db_type(connection)
1018. 
1019.     def get_internal_type(self):
1020.         return "CharField"
1021. 
1022.     def to_python(self, value):
1023.         if isinstance(value, str) or value is None:
1024.             return value
1025.         return str(value)
1026. 
1027.     def get_prep_value(self, value):
1028.         value = super().get_prep_value(value)
1029.         return self.to_python(value)
1030. 
1031.     def formfield(self, **kwargs):
1032.         # Passing max_length to forms.CharField means that the value's length
1033.         # will be validated twice. This is considered acceptable since we want
1034.         # the value in the form field (to pass into widget for example).
1035.         defaults = {'max_length': self.max_length}
1036.         # TODO: Handle multiple backends with different feature flags.
1037.         if self.null and not connection.features.interprets_empty_strings_as_nulls:
1038.             defaults['empty_value'] = None
1039.         defaults.update(kwargs)
1040.         return super().formfield(**defaults)
1041. 
1042. 
1043. class CommaSeparatedIntegerField(CharField):
1044.     default_validators = [validators.validate_comma_separated_integer_list]
1045.     description = _("Comma-separated integers")
1046.     system_check_removed_details = {
1047.         'msg': (
1048.             'CommaSeparatedIntegerField is removed except for support in '
1049.             'historical migrations.'
1050.         ),
1051.         'hint': (
1052.             'Use CharField(validators=[validate_comma_separated_integer_list]) '
1053.             'instead.'
1054.         ),
1055.         'id': 'fields.E901',
1056.     }
1057. 
1058. 
1059. class DateTimeCheckMixin:
1060. 
1061.     def check(self, **kwargs):
1062.         return [
1063.             *super().check(**kwargs),
1064.             *self._check_mutually_exclusive_options(),
1065.             *self._check_fix_default_value(),
1066.         ]
1067. 
1068.     def _check_mutually_exclusive_options(self):
1069.         # auto_now, auto_now_add, and default are mutually exclusive
1070.         # options. The use of more than one of these options together
1071.         # will trigger an Error
1072.         mutually_exclusive_options = [self.auto_now_add, self.auto_now, self.has_default()]
1073.         enabled_options = [option not in (None, False) for option in mutually_exclusive_options].count(True)
1074.         if enabled_options > 1:
1075.             return [
1076.                 checks.Error(
1077.                     "The options auto_now, auto_now_add, and default "
1078.                     "are mutually exclusive. Only one of these options "
1079.                     "may be present.",
1080.                     obj=self,
1081.                     id='fields.E160',
1082.                 )
1083.             ]
1084.         else:
1085.             return []
1086. 
1087.     def _check_fix_default_value(self):
1088.         return []
1089. 
1090. 
1091. class DateField(DateTimeCheckMixin, Field):
1092.     empty_strings_allowed = False
1093.     default_error_messages = {
1094.         'invalid': _('“%(value)s” value has an invalid date format. It must be '
1095.                      'in YYYY-MM-DD format.'),
1096.         'invalid_date': _('“%(value)s” value has the correct format (YYYY-MM-DD) '
1097.                           'but it is an invalid date.'),
1098.     }
1099.     description = _("Date (without time)")
1100. 
1101.     def __init__(self, verbose_name=None, name=None, auto_now=False,
1102.                  auto_now_add=False, **kwargs):
1103.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
1104.         if auto_now or auto_now_add:
1105.             kwargs['editable'] = False
1106.             kwargs['blank'] = True
1107.         super().__init__(verbose_name, name, **kwargs)
1108. 
1109.     def _check_fix_default_value(self):
1110.         """
1111.         Warn that using an actual date or datetime value is probably wrong;
1112.         it's only evaluated on server startup.
1113.         """
1114.         if not self.has_default():
1115.             return []
1116. 
1117.         now = timezone.now()
1118.         if not timezone.is_naive(now):
1119.             now = timezone.make_naive(now, timezone.utc)
1120.         value = self.default
1121.         if isinstance(value, datetime.datetime):
1122.             if not timezone.is_naive(value):
1123.                 value = timezone.make_naive(value, timezone.utc)
1124.             value = value.date()
1125.         elif isinstance(value, datetime.date):
1126.             # Nothing to do, as dates don't have tz information
1127.             pass
1128.         else:
1129.             # No explicit date / datetime value -- no checks necessary
1130.             return []
1131.         offset = datetime.timedelta(days=1)
1132.         lower = (now - offset).date()
1133.         upper = (now + offset).date()
1134.         if lower <= value <= upper:
1135.             return [
1136.                 checks.Warning(
1137.                     'Fixed default value provided.',
1138.                     hint='It seems you set a fixed date / time / datetime '
1139.                          'value as default for this field. This may not be '
1140.                          'what you want. If you want to have the current date '
1141.                          'as default, use `django.utils.timezone.now`',
1142.                     obj=self,
1143.                     id='fields.W161',
1144.                 )
1145.             ]
1146. 
1147.         return []
1148. 
1149.     def deconstruct(self):
1150.         name, path, args, kwargs = super().deconstruct()
1151.         if self.auto_now:
1152.             kwargs['auto_now'] = True
1153.         if self.auto_now_add:
1154.             kwargs['auto_now_add'] = True
1155.         if self.auto_now or self.auto_now_add:
1156.             del kwargs['editable']
1157.             del kwargs['blank']
1158.         return name, path, args, kwargs
1159. 
1160.     def get_internal_type(self):
1161.         return "DateField"
1162. 
1163.     def to_python(self, value):
1164.         if value is None:
1165.             return value
1166.         if isinstance(value, datetime.datetime):
1167.             if settings.USE_TZ and timezone.is_aware(value):
1168.                 # Convert aware datetimes to the default time zone
1169.                 # before casting them to dates (#17742).
1170.                 default_timezone = timezone.get_default_timezone()
1171.                 value = timezone.make_naive(value, default_timezone)
1172.             return value.date()
1173.         if isinstance(value, datetime.date):
1174.             return value
1175. 
1176.         try:
1177.             parsed = parse_date(value)
1178.             if parsed is not None:
1179.                 return parsed
1180.         except ValueError:
1181.             raise exceptions.ValidationError(
1182.                 self.error_messages['invalid_date'],
1183.                 code='invalid_date',
1184.                 params={'value': value},
1185.             )
1186. 
1187.         raise exceptions.ValidationError(
1188.             self.error_messages['invalid'],
1189.             code='invalid',
1190.             params={'value': value},
1191.         )
1192. 
1193.     def pre_save(self, model_instance, add):
1194.         if self.auto_now or (self.auto_now_add and add):
1195.             value = datetime.date.today()
1196.             setattr(model_instance, self.attname, value)
1197.             return value
1198.         else:
1199.             return super().pre_save(model_instance, add)
1200. 
1201.     def contribute_to_class(self, cls, name, **kwargs):
1202.         super().contribute_to_class(cls, name, **kwargs)
1203.         if not self.null:
1204.             setattr(
1205.                 cls, 'get_next_by_%s' % self.name,
1206.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=True)
1207.             )
1208.             setattr(
1209.                 cls, 'get_previous_by_%s' % self.name,
1210.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=False)
1211.             )
1212. 
1213.     def get_prep_value(self, value):
1214.         value = super().get_prep_value(value)
1215.         return self.to_python(value)
1216. 
1217.     def get_db_prep_value(self, value, connection, prepared=False):
1218.         # Casts dates into the format expected by the backend
1219.         if not prepared:
1220.             value = self.get_prep_value(value)
1221.         return connection.ops.adapt_datefield_value(value)
1222. 
1223.     def value_to_string(self, obj):
1224.         val = self.value_from_object(obj)
1225.         return '' if val is None else val.isoformat()
1226. 
1227.     def formfield(self, **kwargs):
1228.         return super().formfield(**{
1229.             'form_class': forms.DateField,
1230.             **kwargs,
1231.         })
1232. 
1233. 
1234. class DateTimeField(DateField):
1235.     empty_strings_allowed = False
1236.     default_error_messages = {
1237.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1238.                      'YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format.'),
1239.         'invalid_date': _("“%(value)s” value has the correct format "
1240.                           "(YYYY-MM-DD) but it is an invalid date."),
1241.         'invalid_datetime': _('“%(value)s” value has the correct format '
1242.                               '(YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]) '
1243.                               'but it is an invalid date/time.'),
1244.     }
1245.     description = _("Date (with time)")
1246. 
1247.     # __init__ is inherited from DateField
1248. 
1249.     def _check_fix_default_value(self):
1250.         """
1251.         Warn that using an actual date or datetime value is probably wrong;
1252.         it's only evaluated on server startup.
1253.         """
1254.         if not self.has_default():
1255.             return []
1256. 
1257.         now = timezone.now()
1258.         if not timezone.is_naive(now):
1259.             now = timezone.make_naive(now, timezone.utc)
1260.         value = self.default
1261.         if isinstance(value, datetime.datetime):
1262.             second_offset = datetime.timedelta(seconds=10)
1263.             lower = now - second_offset
1264.             upper = now + second_offset
1265.             if timezone.is_aware(value):
1266.                 value = timezone.make_naive(value, timezone.utc)
1267.         elif isinstance(value, datetime.date):
1268.             second_offset = datetime.timedelta(seconds=10)
1269.             lower = now - second_offset
1270.             lower = datetime.datetime(lower.year, lower.month, lower.day)
1271.             upper = now + second_offset
1272.             upper = datetime.datetime(upper.year, upper.month, upper.day)
1273.             value = datetime.datetime(value.year, value.month, value.day)
1274.         else:
1275.             # No explicit date / datetime value -- no checks necessary
1276.             return []
1277.         if lower <= value <= upper:
1278.             return [
1279.                 checks.Warning(
1280.                     'Fixed default value provided.',
1281.                     hint='It seems you set a fixed date / time / datetime '
1282.                          'value as default for this field. This may not be '
1283.                          'what you want. If you want to have the current date '
1284.                          'as default, use `django.utils.timezone.now`',
1285.                     obj=self,
1286.                     id='fields.W161',
1287.                 )
1288.             ]
1289. 
1290.         return []
1291. 
1292.     def get_internal_type(self):
1293.         return "DateTimeField"
1294. 
1295.     def to_python(self, value):
1296.         if value is None:
1297.             return value
1298.         if isinstance(value, datetime.datetime):
1299.             return value
1300.         if isinstance(value, datetime.date):
1301.             value = datetime.datetime(value.year, value.month, value.day)
1302.             if settings.USE_TZ:
1303.                 # For backwards compatibility, interpret naive datetimes in
1304.                 # local time. This won't work during DST change, but we can't
1305.                 # do much about it, so we let the exceptions percolate up the
1306.                 # call stack.
1307.                 warnings.warn("DateTimeField %s.%s received a naive datetime "
1308.                               "(%s) while time zone support is active." %
1309.                               (self.model.__name__, self.name, value),
1310.                               RuntimeWarning)
1311.                 default_timezone = timezone.get_default_timezone()
1312.                 value = timezone.make_aware(value, default_timezone)
1313.             return value
1314. 
1315.         try:
1316.             parsed = parse_datetime(value)
1317.             if parsed is not None:
1318.                 return parsed
1319.         except ValueError:
1320.             raise exceptions.ValidationError(
1321.                 self.error_messages['invalid_datetime'],
1322.                 code='invalid_datetime',
1323.                 params={'value': value},
1324.             )
1325. 
1326.         try:
1327.             parsed = parse_date(value)
1328.             if parsed is not None:
1329.                 return datetime.datetime(parsed.year, parsed.month, parsed.day)
1330.         except ValueError:
1331.             raise exceptions.ValidationError(
1332.                 self.error_messages['invalid_date'],
1333.                 code='invalid_date',
1334.                 params={'value': value},
1335.             )
1336. 
1337.         raise exceptions.ValidationError(
1338.             self.error_messages['invalid'],
1339.             code='invalid',
1340.             params={'value': value},
1341.         )
1342. 
1343.     def pre_save(self, model_instance, add):
1344.         if self.auto_now or (self.auto_now_add and add):
1345.             value = timezone.now()
1346.             setattr(model_instance, self.attname, value)
1347.             return value
1348.         else:
1349.             return super().pre_save(model_instance, add)
1350. 
1351.     # contribute_to_class is inherited from DateField, it registers
1352.     # get_next_by_FOO and get_prev_by_FOO
1353. 
1354.     def get_prep_value(self, value):
1355.         value = super().get_prep_value(value)
1356.         value = self.to_python(value)
1357.         if value is not None and settings.USE_TZ and timezone.is_naive(value):
1358.             # For backwards compatibility, interpret naive datetimes in local
1359.             # time. This won't work during DST change, but we can't do much
1360.             # about it, so we let the exceptions percolate up the call stack.
1361.             try:
1362.                 name = '%s.%s' % (self.model.__name__, self.name)
1363.             except AttributeError:
1364.                 name = '(unbound)'
1365.             warnings.warn("DateTimeField %s received a naive datetime (%s)"
1366.                           " while time zone support is active." %
1367.                           (name, value),
1368.                           RuntimeWarning)
1369.             default_timezone = timezone.get_default_timezone()
1370.             value = timezone.make_aware(value, default_timezone)
1371.         return value
1372. 
1373.     def get_db_prep_value(self, value, connection, prepared=False):
1374.         # Casts datetimes into the format expected by the backend
1375.         if not prepared:
1376.             value = self.get_prep_value(value)
1377.         return connection.ops.adapt_datetimefield_value(value)
1378. 
1379.     def value_to_string(self, obj):
1380.         val = self.value_from_object(obj)
1381.         return '' if val is None else val.isoformat()
1382. 
1383.     def formfield(self, **kwargs):
1384.         return super().formfield(**{
1385.             'form_class': forms.DateTimeField,
1386.             **kwargs,
1387.         })
1388. 
1389. 
1390. class DecimalField(Field):
1391.     empty_strings_allowed = False
1392.     default_error_messages = {
1393.         'invalid': _('“%(value)s” value must be a decimal number.'),
1394.     }
1395.     description = _("Decimal number")
1396. 
1397.     def __init__(self, verbose_name=None, name=None, max_digits=None,
1398.                  decimal_places=None, **kwargs):
1399.         self.max_digits, self.decimal_places = max_digits, decimal_places
1400.         super().__init__(verbose_name, name, **kwargs)
1401. 
1402.     def check(self, **kwargs):
1403.         errors = super().check(**kwargs)
1404. 
1405.         digits_errors = [
1406.             *self._check_decimal_places(),
1407.             *self._check_max_digits(),
1408.         ]
1409.         if not digits_errors:
1410.             errors.extend(self._check_decimal_places_and_max_digits(**kwargs))
1411.         else:
1412.             errors.extend(digits_errors)
1413.         return errors
1414. 
1415.     def _check_decimal_places(self):
1416.         try:
1417.             decimal_places = int(self.decimal_places)
1418.             if decimal_places < 0:
1419.                 raise ValueError()
1420.         except TypeError:
1421.             return [
1422.                 checks.Error(
1423.                     "DecimalFields must define a 'decimal_places' attribute.",
1424.                     obj=self,
1425.                     id='fields.E130',
1426.                 )
1427.             ]
1428.         except ValueError:
1429.             return [
1430.                 checks.Error(
1431.                     "'decimal_places' must be a non-negative integer.",
1432.                     obj=self,
1433.                     id='fields.E131',
1434.                 )
1435.             ]
1436.         else:
1437.             return []
1438. 
1439.     def _check_max_digits(self):
1440.         try:
1441.             max_digits = int(self.max_digits)
1442.             if max_digits <= 0:
1443.                 raise ValueError()
1444.         except TypeError:
1445.             return [
1446.                 checks.Error(
1447.                     "DecimalFields must define a 'max_digits' attribute.",
1448.                     obj=self,
1449.                     id='fields.E132',
1450.                 )
1451.             ]
1452.         except ValueError:
1453.             return [
1454.                 checks.Error(
1455.                     "'max_digits' must be a positive integer.",
1456.                     obj=self,
1457.                     id='fields.E133',
1458.                 )
1459.             ]
1460.         else:
1461.             return []
1462. 
1463.     def _check_decimal_places_and_max_digits(self, **kwargs):
1464.         if int(self.decimal_places) > int(self.max_digits):
1465.             return [
1466.                 checks.Error(
1467.                     "'max_digits' must be greater or equal to 'decimal_places'.",
1468.                     obj=self,
1469.                     id='fields.E134',
1470.                 )
1471.             ]
1472.         return []
1473. 
1474.     @cached_property
1475.     def validators(self):
1476.         return super().validators + [
1477.             validators.DecimalValidator(self.max_digits, self.decimal_places)
1478.         ]
1479. 
1480.     @cached_property
1481.     def context(self):
1482.         return decimal.Context(prec=self.max_digits)
1483. 
1484.     def deconstruct(self):
1485.         name, path, args, kwargs = super().deconstruct()
1486.         if self.max_digits is not None:
1487.             kwargs['max_digits'] = self.max_digits
1488.         if self.decimal_places is not None:
1489.             kwargs['decimal_places'] = self.decimal_places
1490.         return name, path, args, kwargs
1491. 
1492.     def get_internal_type(self):
1493.         return "DecimalField"
1494. 
1495.     def to_python(self, value):
1496.         if value is None:
1497.             return value
1498.         if isinstance(value, float):
1499.             return self.context.create_decimal_from_float(value)
1500.         try:


File: django/db/models/fields/__init__.py
Line number range: 1501 - 2000
Content:
1501.             return decimal.Decimal(value)
1502.         except decimal.InvalidOperation:
1503.             raise exceptions.ValidationError(
1504.                 self.error_messages['invalid'],
1505.                 code='invalid',
1506.                 params={'value': value},
1507.             )
1508. 
1509.     def get_db_prep_save(self, value, connection):
1510.         return connection.ops.adapt_decimalfield_value(self.to_python(value), self.max_digits, self.decimal_places)
1511. 
1512.     def get_prep_value(self, value):
1513.         value = super().get_prep_value(value)
1514.         return self.to_python(value)
1515. 
1516.     def formfield(self, **kwargs):
1517.         return super().formfield(**{
1518.             'max_digits': self.max_digits,
1519.             'decimal_places': self.decimal_places,
1520.             'form_class': forms.DecimalField,
1521.             **kwargs,
1522.         })
1523. 
1524. 
1525. class DurationField(Field):
1526.     """
1527.     Store timedelta objects.
1528. 
1529.     Use interval on PostgreSQL, INTERVAL DAY TO SECOND on Oracle, and bigint
1530.     of microseconds on other databases.
1531.     """
1532.     empty_strings_allowed = False
1533.     default_error_messages = {
1534.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1535.                      '[DD] [[HH:]MM:]ss[.uuuuuu] format.')
1536.     }
1537.     description = _("Duration")
1538. 
1539.     def get_internal_type(self):
1540.         return "DurationField"
1541. 
1542.     def to_python(self, value):
1543.         if value is None:
1544.             return value
1545.         if isinstance(value, datetime.timedelta):
1546.             return value
1547.         try:
1548.             parsed = parse_duration(value)
1549.         except ValueError:
1550.             pass
1551.         else:
1552.             if parsed is not None:
1553.                 return parsed
1554. 
1555.         raise exceptions.ValidationError(
1556.             self.error_messages['invalid'],
1557.             code='invalid',
1558.             params={'value': value},
1559.         )
1560. 
1561.     def get_db_prep_value(self, value, connection, prepared=False):
1562.         if connection.features.has_native_duration_field:
1563.             return value
1564.         if value is None:
1565.             return None
1566.         return duration_microseconds(value)
1567. 
1568.     def get_db_converters(self, connection):
1569.         converters = []
1570.         if not connection.features.has_native_duration_field:
1571.             converters.append(connection.ops.convert_durationfield_value)
1572.         return converters + super().get_db_converters(connection)
1573. 
1574.     def value_to_string(self, obj):
1575.         val = self.value_from_object(obj)
1576.         return '' if val is None else duration_string(val)
1577. 
1578.     def formfield(self, **kwargs):
1579.         return super().formfield(**{
1580.             'form_class': forms.DurationField,
1581.             **kwargs,
1582.         })
1583. 
1584. 
1585. class EmailField(CharField):
1586.     default_validators = [validators.validate_email]
1587.     description = _("Email address")
1588. 
1589.     def __init__(self, *args, **kwargs):
1590.         # max_length=254 to be compliant with RFCs 3696 and 5321
1591.         kwargs.setdefault('max_length', 254)
1592.         super().__init__(*args, **kwargs)
1593. 
1594.     def deconstruct(self):
1595.         name, path, args, kwargs = super().deconstruct()
1596.         # We do not exclude max_length if it matches default as we want to change
1597.         # the default in future.
1598.         return name, path, args, kwargs
1599. 
1600.     def formfield(self, **kwargs):
1601.         # As with CharField, this will cause email validation to be performed
1602.         # twice.
1603.         return super().formfield(**{
1604.             'form_class': forms.EmailField,
1605.             **kwargs,
1606.         })
1607. 
1608. 
1609. class FilePathField(Field):
1610.     description = _("File path")
1611. 
1612.     def __init__(self, verbose_name=None, name=None, path='', match=None,
1613.                  recursive=False, allow_files=True, allow_folders=False, **kwargs):
1614.         self.path, self.match, self.recursive = path, match, recursive
1615.         self.allow_files, self.allow_folders = allow_files, allow_folders
1616.         kwargs.setdefault('max_length', 100)
1617.         super().__init__(verbose_name, name, **kwargs)
1618. 
1619.     def check(self, **kwargs):
1620.         return [
1621.             *super().check(**kwargs),
1622.             *self._check_allowing_files_or_folders(**kwargs),
1623.         ]
1624. 
1625.     def _check_allowing_files_or_folders(self, **kwargs):
1626.         if not self.allow_files and not self.allow_folders:
1627.             return [
1628.                 checks.Error(
1629.                     "FilePathFields must have either 'allow_files' or 'allow_folders' set to True.",
1630.                     obj=self,
1631.                     id='fields.E140',
1632.                 )
1633.             ]
1634.         return []
1635. 
1636.     def deconstruct(self):
1637.         name, path, args, kwargs = super().deconstruct()
1638.         if self.path != '':
1639.             kwargs['path'] = self.path
1640.         if self.match is not None:
1641.             kwargs['match'] = self.match
1642.         if self.recursive is not False:
1643.             kwargs['recursive'] = self.recursive
1644.         if self.allow_files is not True:
1645.             kwargs['allow_files'] = self.allow_files
1646.         if self.allow_folders is not False:
1647.             kwargs['allow_folders'] = self.allow_folders
1648.         if kwargs.get("max_length") == 100:
1649.             del kwargs["max_length"]
1650.         return name, path, args, kwargs
1651. 
1652.     def get_prep_value(self, value):
1653.         value = super().get_prep_value(value)
1654.         if value is None:
1655.             return None
1656.         return str(value)
1657. 
1658.     def formfield(self, **kwargs):
1659.         return super().formfield(**{
1660.             'path': self.path() if callable(self.path) else self.path,
1661.             'match': self.match,
1662.             'recursive': self.recursive,
1663.             'form_class': forms.FilePathField,
1664.             'allow_files': self.allow_files,
1665.             'allow_folders': self.allow_folders,
1666.             **kwargs,
1667.         })
1668. 
1669.     def get_internal_type(self):
1670.         return "FilePathField"
1671. 
1672. 
1673. class FloatField(Field):
1674.     empty_strings_allowed = False
1675.     default_error_messages = {
1676.         'invalid': _('“%(value)s” value must be a float.'),
1677.     }
1678.     description = _("Floating point number")
1679. 
1680.     def get_prep_value(self, value):
1681.         value = super().get_prep_value(value)
1682.         if value is None:
1683.             return None
1684.         try:
1685.             return float(value)
1686.         except (TypeError, ValueError) as e:
1687.             raise e.__class__(
1688.                 "Field '%s' expected a number but got %r." % (self.name, value),
1689.             ) from e
1690. 
1691.     def get_internal_type(self):
1692.         return "FloatField"
1693. 
1694.     def to_python(self, value):
1695.         if value is None:
1696.             return value
1697.         try:
1698.             return float(value)
1699.         except (TypeError, ValueError):
1700.             raise exceptions.ValidationError(
1701.                 self.error_messages['invalid'],
1702.                 code='invalid',
1703.                 params={'value': value},
1704.             )
1705. 
1706.     def formfield(self, **kwargs):
1707.         return super().formfield(**{
1708.             'form_class': forms.FloatField,
1709.             **kwargs,
1710.         })
1711. 
1712. 
1713. class IntegerField(Field):
1714.     empty_strings_allowed = False
1715.     default_error_messages = {
1716.         'invalid': _('“%(value)s” value must be an integer.'),
1717.     }
1718.     description = _("Integer")
1719. 
1720.     def check(self, **kwargs):
1721.         return [
1722.             *super().check(**kwargs),
1723.             *self._check_max_length_warning(),
1724.         ]
1725. 
1726.     def _check_max_length_warning(self):
1727.         if self.max_length is not None:
1728.             return [
1729.                 checks.Warning(
1730.                     "'max_length' is ignored when used with %s." % self.__class__.__name__,
1731.                     hint="Remove 'max_length' from field",
1732.                     obj=self,
1733.                     id='fields.W122',
1734.                 )
1735.             ]
1736.         return []
1737. 
1738.     @cached_property
1739.     def validators(self):
1740.         # These validators can't be added at field initialization time since
1741.         # they're based on values retrieved from `connection`.
1742.         validators_ = super().validators
1743.         internal_type = self.get_internal_type()
1744.         min_value, max_value = connection.ops.integer_field_range(internal_type)
1745.         if min_value is not None and not any(
1746.             (
1747.                 isinstance(validator, validators.MinValueValidator) and (
1748.                     validator.limit_value()
1749.                     if callable(validator.limit_value)
1750.                     else validator.limit_value
1751.                 ) >= min_value
1752.             ) for validator in validators_
1753.         ):
1754.             validators_.append(validators.MinValueValidator(min_value))
1755.         if max_value is not None and not any(
1756.             (
1757.                 isinstance(validator, validators.MaxValueValidator) and (
1758.                     validator.limit_value()
1759.                     if callable(validator.limit_value)
1760.                     else validator.limit_value
1761.                 ) <= max_value
1762.             ) for validator in validators_
1763.         ):
1764.             validators_.append(validators.MaxValueValidator(max_value))
1765.         return validators_
1766. 
1767.     def get_prep_value(self, value):
1768.         value = super().get_prep_value(value)
1769.         if value is None:
1770.             return None
1771.         try:
1772.             return int(value)
1773.         except (TypeError, ValueError) as e:
1774.             raise e.__class__(
1775.                 "Field '%s' expected a number but got %r." % (self.name, value),
1776.             ) from e
1777. 
1778.     def get_internal_type(self):
1779.         return "IntegerField"
1780. 
1781.     def to_python(self, value):
1782.         if value is None:
1783.             return value
1784.         try:
1785.             return int(value)
1786.         except (TypeError, ValueError):
1787.             raise exceptions.ValidationError(
1788.                 self.error_messages['invalid'],
1789.                 code='invalid',
1790.                 params={'value': value},
1791.             )
1792. 
1793.     def formfield(self, **kwargs):
1794.         return super().formfield(**{
1795.             'form_class': forms.IntegerField,
1796.             **kwargs,
1797.         })
1798. 
1799. 
1800. class BigIntegerField(IntegerField):
1801.     description = _("Big (8 byte) integer")
1802.     MAX_BIGINT = 9223372036854775807
1803. 
1804.     def get_internal_type(self):
1805.         return "BigIntegerField"
1806. 
1807.     def formfield(self, **kwargs):
1808.         return super().formfield(**{
1809.             'min_value': -BigIntegerField.MAX_BIGINT - 1,
1810.             'max_value': BigIntegerField.MAX_BIGINT,
1811.             **kwargs,
1812.         })
1813. 
1814. 
1815. class IPAddressField(Field):
1816.     empty_strings_allowed = False
1817.     description = _("IPv4 address")
1818.     system_check_removed_details = {
1819.         'msg': (
1820.             'IPAddressField has been removed except for support in '
1821.             'historical migrations.'
1822.         ),
1823.         'hint': 'Use GenericIPAddressField instead.',
1824.         'id': 'fields.E900',
1825.     }
1826. 
1827.     def __init__(self, *args, **kwargs):
1828.         kwargs['max_length'] = 15
1829.         super().__init__(*args, **kwargs)
1830. 
1831.     def deconstruct(self):
1832.         name, path, args, kwargs = super().deconstruct()
1833.         del kwargs['max_length']
1834.         return name, path, args, kwargs
1835. 
1836.     def get_prep_value(self, value):
1837.         value = super().get_prep_value(value)
1838.         if value is None:
1839.             return None
1840.         return str(value)
1841. 
1842.     def get_internal_type(self):
1843.         return "IPAddressField"
1844. 
1845. 
1846. class GenericIPAddressField(Field):
1847.     empty_strings_allowed = False
1848.     description = _("IP address")
1849.     default_error_messages = {}
1850. 
1851.     def __init__(self, verbose_name=None, name=None, protocol='both',
1852.                  unpack_ipv4=False, *args, **kwargs):
1853.         self.unpack_ipv4 = unpack_ipv4
1854.         self.protocol = protocol
1855.         self.default_validators, invalid_error_message = \
1856.             validators.ip_address_validators(protocol, unpack_ipv4)
1857.         self.default_error_messages['invalid'] = invalid_error_message
1858.         kwargs['max_length'] = 39
1859.         super().__init__(verbose_name, name, *args, **kwargs)
1860. 
1861.     def check(self, **kwargs):
1862.         return [
1863.             *super().check(**kwargs),
1864.             *self._check_blank_and_null_values(**kwargs),
1865.         ]
1866. 
1867.     def _check_blank_and_null_values(self, **kwargs):
1868.         if not getattr(self, 'null', False) and getattr(self, 'blank', False):
1869.             return [
1870.                 checks.Error(
1871.                     'GenericIPAddressFields cannot have blank=True if null=False, '
1872.                     'as blank values are stored as nulls.',
1873.                     obj=self,
1874.                     id='fields.E150',
1875.                 )
1876.             ]
1877.         return []
1878. 
1879.     def deconstruct(self):
1880.         name, path, args, kwargs = super().deconstruct()
1881.         if self.unpack_ipv4 is not False:
1882.             kwargs['unpack_ipv4'] = self.unpack_ipv4
1883.         if self.protocol != "both":
1884.             kwargs['protocol'] = self.protocol
1885.         if kwargs.get("max_length") == 39:
1886.             del kwargs['max_length']
1887.         return name, path, args, kwargs
1888. 
1889.     def get_internal_type(self):
1890.         return "GenericIPAddressField"
1891. 
1892.     def to_python(self, value):
1893.         if value is None:
1894.             return None
1895.         if not isinstance(value, str):
1896.             value = str(value)
1897.         value = value.strip()
1898.         if ':' in value:
1899.             return clean_ipv6_address(value, self.unpack_ipv4, self.error_messages['invalid'])
1900.         return value
1901. 
1902.     def get_db_prep_value(self, value, connection, prepared=False):
1903.         if not prepared:
1904.             value = self.get_prep_value(value)
1905.         return connection.ops.adapt_ipaddressfield_value(value)
1906. 
1907.     def get_prep_value(self, value):
1908.         value = super().get_prep_value(value)
1909.         if value is None:
1910.             return None
1911.         if value and ':' in value:
1912.             try:
1913.                 return clean_ipv6_address(value, self.unpack_ipv4)
1914.             except exceptions.ValidationError:
1915.                 pass
1916.         return str(value)
1917. 
1918.     def formfield(self, **kwargs):
1919.         return super().formfield(**{
1920.             'protocol': self.protocol,
1921.             'form_class': forms.GenericIPAddressField,
1922.             **kwargs,
1923.         })
1924. 
1925. 
1926. class NullBooleanField(BooleanField):
1927.     default_error_messages = {
1928.         'invalid': _('“%(value)s” value must be either None, True or False.'),
1929.         'invalid_nullable': _('“%(value)s” value must be either None, True or False.'),
1930.     }
1931.     description = _("Boolean (Either True, False or None)")
1932.     system_check_deprecated_details = {
1933.         'msg': (
1934.             'NullBooleanField is deprecated. Support for it (except in '
1935.             'historical migrations) will be removed in Django 4.0.'
1936.         ),
1937.         'hint': 'Use BooleanField(null=True) instead.',
1938.         'id': 'fields.W903',
1939.     }
1940. 
1941.     def __init__(self, *args, **kwargs):
1942.         kwargs['null'] = True
1943.         kwargs['blank'] = True
1944.         super().__init__(*args, **kwargs)
1945. 
1946.     def deconstruct(self):
1947.         name, path, args, kwargs = super().deconstruct()
1948.         del kwargs['null']
1949.         del kwargs['blank']
1950.         return name, path, args, kwargs
1951. 
1952.     def get_internal_type(self):
1953.         return "NullBooleanField"
1954. 
1955. 
1956. class PositiveIntegerRelDbTypeMixin:
1957. 
1958.     def rel_db_type(self, connection):
1959.         """
1960.         Return the data type that a related field pointing to this field should
1961.         use. In most cases, a foreign key pointing to a positive integer
1962.         primary key will have an integer column data type but some databases
1963.         (e.g. MySQL) have an unsigned integer type. In that case
1964.         (related_fields_match_type=True), the primary key should return its
1965.         db_type.
1966.         """
1967.         if connection.features.related_fields_match_type:
1968.             return self.db_type(connection)
1969.         else:
1970.             return IntegerField().db_type(connection=connection)
1971. 
1972. 
1973. class PositiveBigIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
1974.     description = _('Positive big integer')
1975. 
1976.     def get_internal_type(self):
1977.         return 'PositiveBigIntegerField'
1978. 
1979.     def formfield(self, **kwargs):
1980.         return super().formfield(**{
1981.             'min_value': 0,
1982.             **kwargs,
1983.         })
1984. 
1985. 
1986. class PositiveIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
1987.     description = _("Positive integer")
1988. 
1989.     def get_internal_type(self):
1990.         return "PositiveIntegerField"
1991. 
1992.     def formfield(self, **kwargs):
1993.         return super().formfield(**{
1994.             'min_value': 0,
1995.             **kwargs,
1996.         })
1997. 
1998. 
1999. class PositiveSmallIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
2000.     description = _("Positive small integer")


File: django/db/models/fields/__init__.py
Line number range: 2001 - 2500
Content:
2001. 
2002.     def get_internal_type(self):
2003.         return "PositiveSmallIntegerField"
2004. 
2005.     def formfield(self, **kwargs):
2006.         return super().formfield(**{
2007.             'min_value': 0,
2008.             **kwargs,
2009.         })
2010. 
2011. 
2012. class SlugField(CharField):
2013.     default_validators = [validators.validate_slug]
2014.     description = _("Slug (up to %(max_length)s)")
2015. 
2016.     def __init__(self, *args, max_length=50, db_index=True, allow_unicode=False, **kwargs):
2017.         self.allow_unicode = allow_unicode
2018.         if self.allow_unicode:
2019.             self.default_validators = [validators.validate_unicode_slug]
2020.         super().__init__(*args, max_length=max_length, db_index=db_index, **kwargs)
2021. 
2022.     def deconstruct(self):
2023.         name, path, args, kwargs = super().deconstruct()
2024.         if kwargs.get("max_length") == 50:
2025.             del kwargs['max_length']
2026.         if self.db_index is False:
2027.             kwargs['db_index'] = False
2028.         else:
2029.             del kwargs['db_index']
2030.         if self.allow_unicode is not False:
2031.             kwargs['allow_unicode'] = self.allow_unicode
2032.         return name, path, args, kwargs
2033. 
2034.     def get_internal_type(self):
2035.         return "SlugField"
2036. 
2037.     def formfield(self, **kwargs):
2038.         return super().formfield(**{
2039.             'form_class': forms.SlugField,
2040.             'allow_unicode': self.allow_unicode,
2041.             **kwargs,
2042.         })
2043. 
2044. 
2045. class SmallIntegerField(IntegerField):
2046.     description = _("Small integer")
2047. 
2048.     def get_internal_type(self):
2049.         return "SmallIntegerField"
2050. 
2051. 
2052. class TextField(Field):
2053.     description = _("Text")
2054. 
2055.     def get_internal_type(self):
2056.         return "TextField"
2057. 
2058.     def to_python(self, value):
2059.         if isinstance(value, str) or value is None:
2060.             return value
2061.         return str(value)
2062. 
2063.     def get_prep_value(self, value):
2064.         value = super().get_prep_value(value)
2065.         return self.to_python(value)
2066. 
2067.     def formfield(self, **kwargs):
2068.         # Passing max_length to forms.CharField means that the value's length
2069.         # will be validated twice. This is considered acceptable since we want
2070.         # the value in the form field (to pass into widget for example).
2071.         return super().formfield(**{
2072.             'max_length': self.max_length,
2073.             **({} if self.choices is not None else {'widget': forms.Textarea}),
2074.             **kwargs,
2075.         })
2076. 
2077. 
2078. class TimeField(DateTimeCheckMixin, Field):
2079.     empty_strings_allowed = False
2080.     default_error_messages = {
2081.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
2082.                      'HH:MM[:ss[.uuuuuu]] format.'),
2083.         'invalid_time': _('“%(value)s” value has the correct format '
2084.                           '(HH:MM[:ss[.uuuuuu]]) but it is an invalid time.'),
2085.     }
2086.     description = _("Time")
2087. 
2088.     def __init__(self, verbose_name=None, name=None, auto_now=False,
2089.                  auto_now_add=False, **kwargs):
2090.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
2091.         if auto_now or auto_now_add:
2092.             kwargs['editable'] = False
2093.             kwargs['blank'] = True
2094.         super().__init__(verbose_name, name, **kwargs)
2095. 
2096.     def _check_fix_default_value(self):
2097.         """
2098.         Warn that using an actual date or datetime value is probably wrong;
2099.         it's only evaluated on server startup.
2100.         """
2101.         if not self.has_default():
2102.             return []
2103. 
2104.         now = timezone.now()
2105.         if not timezone.is_naive(now):
2106.             now = timezone.make_naive(now, timezone.utc)
2107.         value = self.default
2108.         if isinstance(value, datetime.datetime):
2109.             second_offset = datetime.timedelta(seconds=10)
2110.             lower = now - second_offset
2111.             upper = now + second_offset
2112.             if timezone.is_aware(value):
2113.                 value = timezone.make_naive(value, timezone.utc)
2114.         elif isinstance(value, datetime.time):
2115.             second_offset = datetime.timedelta(seconds=10)
2116.             lower = now - second_offset
2117.             upper = now + second_offset
2118.             value = datetime.datetime.combine(now.date(), value)
2119.             if timezone.is_aware(value):
2120.                 value = timezone.make_naive(value, timezone.utc).time()
2121.         else:
2122.             # No explicit time / datetime value -- no checks necessary
2123.             return []
2124.         if lower <= value <= upper:
2125.             return [
2126.                 checks.Warning(
2127.                     'Fixed default value provided.',
2128.                     hint='It seems you set a fixed date / time / datetime '
2129.                          'value as default for this field. This may not be '
2130.                          'what you want. If you want to have the current date '
2131.                          'as default, use `django.utils.timezone.now`',
2132.                     obj=self,
2133.                     id='fields.W161',
2134.                 )
2135.             ]
2136. 
2137.         return []
2138. 
2139.     def deconstruct(self):
2140.         name, path, args, kwargs = super().deconstruct()
2141.         if self.auto_now is not False:
2142.             kwargs["auto_now"] = self.auto_now
2143.         if self.auto_now_add is not False:
2144.             kwargs["auto_now_add"] = self.auto_now_add
2145.         if self.auto_now or self.auto_now_add:
2146.             del kwargs['blank']
2147.             del kwargs['editable']
2148.         return name, path, args, kwargs
2149. 
2150.     def get_internal_type(self):
2151.         return "TimeField"
2152. 
2153.     def to_python(self, value):
2154.         if value is None:
2155.             return None
2156.         if isinstance(value, datetime.time):
2157.             return value
2158.         if isinstance(value, datetime.datetime):
2159.             # Not usually a good idea to pass in a datetime here (it loses
2160.             # information), but this can be a side-effect of interacting with a
2161.             # database backend (e.g. Oracle), so we'll be accommodating.
2162.             return value.time()
2163. 
2164.         try:
2165.             parsed = parse_time(value)
2166.             if parsed is not None:
2167.                 return parsed
2168.         except ValueError:
2169.             raise exceptions.ValidationError(
2170.                 self.error_messages['invalid_time'],
2171.                 code='invalid_time',
2172.                 params={'value': value},
2173.             )
2174. 
2175.         raise exceptions.ValidationError(
2176.             self.error_messages['invalid'],
2177.             code='invalid',
2178.             params={'value': value},
2179.         )
2180. 
2181.     def pre_save(self, model_instance, add):
2182.         if self.auto_now or (self.auto_now_add and add):
2183.             value = datetime.datetime.now().time()
2184.             setattr(model_instance, self.attname, value)
2185.             return value
2186.         else:
2187.             return super().pre_save(model_instance, add)
2188. 
2189.     def get_prep_value(self, value):
2190.         value = super().get_prep_value(value)
2191.         return self.to_python(value)
2192. 
2193.     def get_db_prep_value(self, value, connection, prepared=False):
2194.         # Casts times into the format expected by the backend
2195.         if not prepared:
2196.             value = self.get_prep_value(value)
2197.         return connection.ops.adapt_timefield_value(value)
2198. 
2199.     def value_to_string(self, obj):
2200.         val = self.value_from_object(obj)
2201.         return '' if val is None else val.isoformat()
2202. 
2203.     def formfield(self, **kwargs):
2204.         return super().formfield(**{
2205.             'form_class': forms.TimeField,
2206.             **kwargs,
2207.         })
2208. 
2209. 
2210. class URLField(CharField):
2211.     default_validators = [validators.URLValidator()]
2212.     description = _("URL")
2213. 
2214.     def __init__(self, verbose_name=None, name=None, **kwargs):
2215.         kwargs.setdefault('max_length', 200)
2216.         super().__init__(verbose_name, name, **kwargs)
2217. 
2218.     def deconstruct(self):
2219.         name, path, args, kwargs = super().deconstruct()
2220.         if kwargs.get("max_length") == 200:
2221.             del kwargs['max_length']
2222.         return name, path, args, kwargs
2223. 
2224.     def formfield(self, **kwargs):
2225.         # As with CharField, this will cause URL validation to be performed
2226.         # twice.
2227.         return super().formfield(**{
2228.             'form_class': forms.URLField,
2229.             **kwargs,
2230.         })
2231. 
2232. 
2233. class BinaryField(Field):
2234.     description = _("Raw binary data")
2235.     empty_values = [None, b'']
2236. 
2237.     def __init__(self, *args, **kwargs):
2238.         kwargs.setdefault('editable', False)
2239.         super().__init__(*args, **kwargs)
2240.         if self.max_length is not None:
2241.             self.validators.append(validators.MaxLengthValidator(self.max_length))
2242. 
2243.     def check(self, **kwargs):
2244.         return [*super().check(**kwargs), *self._check_str_default_value()]
2245. 
2246.     def _check_str_default_value(self):
2247.         if self.has_default() and isinstance(self.default, str):
2248.             return [
2249.                 checks.Error(
2250.                     "BinaryField's default cannot be a string. Use bytes "
2251.                     "content instead.",
2252.                     obj=self,
2253.                     id='fields.E170',
2254.                 )
2255.             ]
2256.         return []
2257. 
2258.     def deconstruct(self):
2259.         name, path, args, kwargs = super().deconstruct()
2260.         if self.editable:
2261.             kwargs['editable'] = True
2262.         else:
2263.             del kwargs['editable']
2264.         return name, path, args, kwargs
2265. 
2266.     def get_internal_type(self):
2267.         return "BinaryField"
2268. 
2269.     def get_placeholder(self, value, compiler, connection):
2270.         return connection.ops.binary_placeholder_sql(value)
2271. 
2272.     def get_default(self):
2273.         if self.has_default() and not callable(self.default):
2274.             return self.default
2275.         default = super().get_default()
2276.         if default == '':
2277.             return b''
2278.         return default
2279. 
2280.     def get_db_prep_value(self, value, connection, prepared=False):
2281.         value = super().get_db_prep_value(value, connection, prepared)
2282.         if value is not None:
2283.             return connection.Database.Binary(value)
2284.         return value
2285. 
2286.     def value_to_string(self, obj):
2287.         """Binary data is serialized as base64"""
2288.         return b64encode(self.value_from_object(obj)).decode('ascii')
2289. 
2290.     def to_python(self, value):
2291.         # If it's a string, it should be base64-encoded data
2292.         if isinstance(value, str):
2293.             return memoryview(b64decode(value.encode('ascii')))
2294.         return value
2295. 
2296. 
2297. class UUIDField(Field):
2298.     default_error_messages = {
2299.         'invalid': _('“%(value)s” is not a valid UUID.'),
2300.     }
2301.     description = _('Universally unique identifier')
2302.     empty_strings_allowed = False
2303. 
2304.     def __init__(self, verbose_name=None, **kwargs):
2305.         kwargs['max_length'] = 32
2306.         super().__init__(verbose_name, **kwargs)
2307. 
2308.     def deconstruct(self):
2309.         name, path, args, kwargs = super().deconstruct()
2310.         del kwargs['max_length']
2311.         return name, path, args, kwargs
2312. 
2313.     def get_internal_type(self):
2314.         return "UUIDField"
2315. 
2316.     def get_prep_value(self, value):
2317.         value = super().get_prep_value(value)
2318.         return self.to_python(value)
2319. 
2320.     def get_db_prep_value(self, value, connection, prepared=False):
2321.         if value is None:
2322.             return None
2323.         if not isinstance(value, uuid.UUID):
2324.             value = self.to_python(value)
2325. 
2326.         if connection.features.has_native_uuid_field:
2327.             return value
2328.         return value.hex
2329. 
2330.     def to_python(self, value):
2331.         if value is not None and not isinstance(value, uuid.UUID):
2332.             input_form = 'int' if isinstance(value, int) else 'hex'
2333.             try:
2334.                 return uuid.UUID(**{input_form: value})
2335.             except (AttributeError, ValueError):
2336.                 raise exceptions.ValidationError(
2337.                     self.error_messages['invalid'],
2338.                     code='invalid',
2339.                     params={'value': value},
2340.                 )
2341.         return value
2342. 
2343.     def formfield(self, **kwargs):
2344.         return super().formfield(**{
2345.             'form_class': forms.UUIDField,
2346.             **kwargs,
2347.         })
2348. 
2349. 
2350. class AutoFieldMixin:
2351.     db_returning = True
2352. 
2353.     def __init__(self, *args, **kwargs):
2354.         kwargs['blank'] = True
2355.         super().__init__(*args, **kwargs)
2356. 
2357.     def check(self, **kwargs):
2358.         return [
2359.             *super().check(**kwargs),
2360.             *self._check_primary_key(),
2361.         ]
2362. 
2363.     def _check_primary_key(self):
2364.         if not self.primary_key:
2365.             return [
2366.                 checks.Error(
2367.                     'AutoFields must set primary_key=True.',
2368.                     obj=self,
2369.                     id='fields.E100',
2370.                 ),
2371.             ]
2372.         else:
2373.             return []
2374. 
2375.     def deconstruct(self):
2376.         name, path, args, kwargs = super().deconstruct()
2377.         del kwargs['blank']
2378.         kwargs['primary_key'] = True
2379.         return name, path, args, kwargs
2380. 
2381.     def validate(self, value, model_instance):
2382.         pass
2383. 
2384.     def get_db_prep_value(self, value, connection, prepared=False):
2385.         if not prepared:
2386.             value = self.get_prep_value(value)
2387.             value = connection.ops.validate_autopk_value(value)
2388.         return value
2389. 
2390.     def contribute_to_class(self, cls, name, **kwargs):
2391.         assert not cls._meta.auto_field, (
2392.             "Model %s can't have more than one auto-generated field."
2393.             % cls._meta.label
2394.         )
2395.         super().contribute_to_class(cls, name, **kwargs)
2396.         cls._meta.auto_field = self
2397. 
2398.     def formfield(self, **kwargs):
2399.         return None
2400. 
2401. 
2402. class AutoFieldMeta(type):
2403.     """
2404.     Metaclass to maintain backward inheritance compatibility for AutoField.
2405. 
2406.     It is intended that AutoFieldMixin become public API when it is possible to
2407.     create a non-integer automatically-generated field using column defaults
2408.     stored in the database.
2409. 
2410.     In many areas Django also relies on using isinstance() to check for an
2411.     automatically-generated field as a subclass of AutoField. A new flag needs
2412.     to be implemented on Field to be used instead.
2413. 
2414.     When these issues have been addressed, this metaclass could be used to
2415.     deprecate inheritance from AutoField and use of isinstance() with AutoField
2416.     for detecting automatically-generated fields.
2417.     """
2418. 
2419.     @property
2420.     def _subclasses(self):
2421.         return (BigAutoField, SmallAutoField)
2422. 
2423.     def __instancecheck__(self, instance):
2424.         return isinstance(instance, self._subclasses) or super().__instancecheck__(instance)
2425. 
2426.     def __subclasscheck__(self, subclass):
2427.         return subclass in self._subclasses or super().__subclasscheck__(subclass)
2428. 
2429. 
2430. class AutoField(AutoFieldMixin, IntegerField, metaclass=AutoFieldMeta):
2431. 
2432.     def get_internal_type(self):
2433.         return 'AutoField'
2434. 
2435.     def rel_db_type(self, connection):
2436.         return IntegerField().db_type(connection=connection)
2437. 
2438. 
2439. class BigAutoField(AutoFieldMixin, BigIntegerField):
2440. 
2441.     def get_internal_type(self):
2442.         return 'BigAutoField'
2443. 
2444.     def rel_db_type(self, connection):
2445.         return BigIntegerField().db_type(connection=connection)
2446. 
2447. 
2448. class SmallAutoField(AutoFieldMixin, SmallIntegerField):
2449. 
2450.     def get_internal_type(self):
2451.         return 'SmallAutoField'
2452. 
2453.     def rel_db_type(self, connection):
2454.         return SmallIntegerField().db_type(connection=connection)


File: django/db/models/query_utils.py
Line number range: 1 - 351
Content:
1. """
2. Various data structures used in query construction.
3. 
4. Factored out from django.db.models.query to avoid making the main module very
5. large and/or so that they can be used by other modules without getting into
6. circular import difficulties.
7. """
8. import copy
9. import functools
10. import inspect
11. import warnings
12. from collections import namedtuple
13. 
14. from django.core.exceptions import FieldDoesNotExist, FieldError
15. from django.db.models.constants import LOOKUP_SEP
16. from django.utils import tree
17. from django.utils.deprecation import RemovedInDjango40Warning
18. 
19. # PathInfo is used when converting lookups (fk__somecol). The contents
20. # describe the relation in Model terms (model Options and Fields for both
21. # sides of the relation. The join_field is the field backing the relation.
22. PathInfo = namedtuple('PathInfo', 'from_opts to_opts target_fields join_field m2m direct filtered_relation')
23. 
24. 
25. class InvalidQueryType(type):
26.     @property
27.     def _subclasses(self):
28.         return (FieldDoesNotExist, FieldError)
29. 
30.     def __warn(self):
31.         warnings.warn(
32.             'The InvalidQuery exception class is deprecated. Use '
33.             'FieldDoesNotExist or FieldError instead.',
34.             category=RemovedInDjango40Warning,
35.             stacklevel=4,
36.         )
37. 
38.     def __instancecheck__(self, instance):
39.         self.__warn()
40.         return isinstance(instance, self._subclasses) or super().__instancecheck__(instance)
41. 
42.     def __subclasscheck__(self, subclass):
43.         self.__warn()
44.         return issubclass(subclass, self._subclasses) or super().__subclasscheck__(subclass)
45. 
46. 
47. class InvalidQuery(Exception, metaclass=InvalidQueryType):
48.     pass
49. 
50. 
51. def subclasses(cls):
52.     yield cls
53.     for subclass in cls.__subclasses__():
54.         yield from subclasses(subclass)
55. 
56. 
57. class Q(tree.Node):
58.     """
59.     Encapsulate filters as objects that can then be combined logically (using
60.     `&` and `|`).
61.     """
62.     # Connection types
63.     AND = 'AND'
64.     OR = 'OR'
65.     default = AND
66.     conditional = True
67. 
68.     def __init__(self, *args, _connector=None, _negated=False, **kwargs):
69.         super().__init__(children=[*args, *sorted(kwargs.items())], connector=_connector, negated=_negated)
70. 
71.     def _combine(self, other, conn):
72.         if not isinstance(other, Q):
73.             raise TypeError(other)
74. 
75.         # If the other Q() is empty, ignore it and just use `self`.
76.         if not other:
77.             return copy.deepcopy(self)
78.         # Or if this Q is empty, ignore it and just use `other`.
79.         elif not self:
80.             return copy.deepcopy(other)
81. 
82.         obj = type(self)()
83.         obj.connector = conn
84.         obj.add(self, conn)
85.         obj.add(other, conn)
86.         return obj
87. 
88.     def __or__(self, other):
89.         return self._combine(other, self.OR)
90. 
91.     def __and__(self, other):
92.         return self._combine(other, self.AND)
93. 
94.     def __invert__(self):
95.         obj = type(self)()
96.         obj.add(self, self.AND)
97.         obj.negate()
98.         return obj
99. 
100.     def resolve_expression(self, query=None, allow_joins=True, reuse=None, summarize=False, for_save=False):
101.         # We must promote any new joins to left outer joins so that when Q is
102.         # used as an expression, rows aren't filtered due to joins.
103.         clause, joins = query._add_q(
104.             self, reuse, allow_joins=allow_joins, split_subq=False,
105.             check_filterable=False,
106.         )
107.         query.promote_joins(joins)
108.         return clause
109. 
110.     def deconstruct(self):
111.         path = '%s.%s' % (self.__class__.__module__, self.__class__.__name__)
112.         if path.startswith('django.db.models.query_utils'):
113.             path = path.replace('django.db.models.query_utils', 'django.db.models')
114.         args, kwargs = (), {}
115.         if len(self.children) == 1 and not isinstance(self.children[0], Q):
116.             child = self.children[0]
117.             kwargs = {child[0]: child[1]}
118.         else:
119.             args = tuple(self.children)
120.             if self.connector != self.default:
121.                 kwargs = {'_connector': self.connector}
122.         if self.negated:
123.             kwargs['_negated'] = True
124.         return path, args, kwargs
125. 
126. 
127. class DeferredAttribute:
128.     """
129.     A wrapper for a deferred-loading field. When the value is read from this
130.     object the first time, the query is executed.
131.     """
132.     def __init__(self, field):
133.         self.field = field
134. 
135.     def __get__(self, instance, cls=None):
136.         """
137.         Retrieve and caches the value from the datastore on the first lookup.
138.         Return the cached value.
139.         """
140.         if instance is None:
141.             return self
142.         data = instance.__dict__
143.         field_name = self.field.attname
144.         if field_name not in data:
145.             # Let's see if the field is part of the parent chain. If so we
146.             # might be able to reuse the already loaded value. Refs #18343.
147.             val = self._check_parent_chain(instance)
148.             if val is None:
149.                 instance.refresh_from_db(fields=[field_name])
150.                 val = getattr(instance, field_name)
151.             data[field_name] = val
152.         return data[field_name]
153. 
154.     def _check_parent_chain(self, instance):
155.         """
156.         Check if the field value can be fetched from a parent field already
157.         loaded in the instance. This can be done if the to-be fetched
158.         field is a primary key field.
159.         """
160.         opts = instance._meta
161.         link_field = opts.get_ancestor_link(self.field.model)
162.         if self.field.primary_key and self.field != link_field:
163.             return getattr(instance, link_field.attname)
164.         return None
165. 
166. 
167. class RegisterLookupMixin:
168. 
169.     @classmethod
170.     def _get_lookup(cls, lookup_name):
171.         return cls.get_lookups().get(lookup_name, None)
172. 
173.     @classmethod
174.     @functools.lru_cache(maxsize=None)
175.     def get_lookups(cls):
176.         class_lookups = [parent.__dict__.get('class_lookups', {}) for parent in inspect.getmro(cls)]
177.         return cls.merge_dicts(class_lookups)
178. 
179.     def get_lookup(self, lookup_name):
180.         from django.db.models.lookups import Lookup
181.         found = self._get_lookup(lookup_name)
182.         if found is None and hasattr(self, 'output_field'):
183.             return self.output_field.get_lookup(lookup_name)
184.         if found is not None and not issubclass(found, Lookup):
185.             return None
186.         return found
187. 
188.     def get_transform(self, lookup_name):
189.         from django.db.models.lookups import Transform
190.         found = self._get_lookup(lookup_name)
191.         if found is None and hasattr(self, 'output_field'):
192.             return self.output_field.get_transform(lookup_name)
193.         if found is not None and not issubclass(found, Transform):
194.             return None
195.         return found
196. 
197.     @staticmethod
198.     def merge_dicts(dicts):
199.         """
200.         Merge dicts in reverse to preference the order of the original list. e.g.,
201.         merge_dicts([a, b]) will preference the keys in 'a' over those in 'b'.
202.         """
203.         merged = {}
204.         for d in reversed(dicts):
205.             merged.update(d)
206.         return merged
207. 
208.     @classmethod
209.     def _clear_cached_lookups(cls):
210.         for subclass in subclasses(cls):
211.             subclass.get_lookups.cache_clear()
212. 
213.     @classmethod
214.     def register_lookup(cls, lookup, lookup_name=None):
215.         if lookup_name is None:
216.             lookup_name = lookup.lookup_name
217.         if 'class_lookups' not in cls.__dict__:
218.             cls.class_lookups = {}
219.         cls.class_lookups[lookup_name] = lookup
220.         cls._clear_cached_lookups()
221.         return lookup
222. 
223.     @classmethod
224.     def _unregister_lookup(cls, lookup, lookup_name=None):
225.         """
226.         Remove given lookup from cls lookups. For use in tests only as it's
227.         not thread-safe.
228.         """
229.         if lookup_name is None:
230.             lookup_name = lookup.lookup_name
231.         del cls.class_lookups[lookup_name]
232. 
233. 
234. def select_related_descend(field, restricted, requested, load_fields, reverse=False):
235.     """
236.     Return True if this field should be used to descend deeper for
237.     select_related() purposes. Used by both the query construction code
238.     (sql.query.fill_related_selections()) and the model instance creation code
239.     (query.get_klass_info()).
240. 
241.     Arguments:
242.      * field - the field to be checked
243.      * restricted - a boolean field, indicating if the field list has been
244.        manually restricted using a requested clause)
245.      * requested - The select_related() dictionary.
246.      * load_fields - the set of fields to be loaded on this model
247.      * reverse - boolean, True if we are checking a reverse select related
248.     """
249.     if not field.remote_field:
250.         return False
251.     if field.remote_field.parent_link and not reverse:
252.         return False
253.     if restricted:
254.         if reverse and field.related_query_name() not in requested:
255.             return False
256.         if not reverse and field.name not in requested:
257.             return False
258.     if not restricted and field.null:
259.         return False
260.     if load_fields:
261.         if field.attname not in load_fields:
262.             if restricted and field.name in requested:
263.                 msg = (
264.                     'Field %s.%s cannot be both deferred and traversed using '
265.                     'select_related at the same time.'
266.                 ) % (field.model._meta.object_name, field.name)
267.                 raise FieldError(msg)
268.     return True
269. 
270. 
271. def refs_expression(lookup_parts, annotations):
272.     """
273.     Check if the lookup_parts contains references to the given annotations set.
274.     Because the LOOKUP_SEP is contained in the default annotation names, check
275.     each prefix of the lookup_parts for a match.
276.     """
277.     for n in range(1, len(lookup_parts) + 1):
278.         level_n_lookup = LOOKUP_SEP.join(lookup_parts[0:n])
279.         if level_n_lookup in annotations and annotations[level_n_lookup]:
280.             return annotations[level_n_lookup], lookup_parts[n:]
281.     return False, ()
282. 
283. 
284. def check_rel_lookup_compatibility(model, target_opts, field):
285.     """
286.     Check that self.model is compatible with target_opts. Compatibility
287.     is OK if:
288.       1) model and opts match (where proxy inheritance is removed)
289.       2) model is parent of opts' model or the other way around
290.     """
291.     def check(opts):
292.         return (
293.             model._meta.concrete_model == opts.concrete_model or
294.             opts.concrete_model in model._meta.get_parent_list() or
295.             model in opts.get_parent_list()
296.         )
297.     # If the field is a primary key, then doing a query against the field's
298.     # model is ok, too. Consider the case:
299.     # class Restaurant(models.Model):
300.     #     place = OneToOneField(Place, primary_key=True):
301.     # Restaurant.objects.filter(pk__in=Restaurant.objects.all()).
302.     # If we didn't have the primary key check, then pk__in (== place__in) would
303.     # give Place's opts as the target opts, but Restaurant isn't compatible
304.     # with that. This logic applies only to primary keys, as when doing __in=qs,
305.     # we are going to turn this into __in=qs.values('pk') later on.
306.     return (
307.         check(target_opts) or
308.         (getattr(field, 'primary_key', False) and check(field.model._meta))
309.     )
310. 
311. 
312. class FilteredRelation:
313.     """Specify custom filtering in the ON clause of SQL joins."""
314. 
315.     def __init__(self, relation_name, *, condition=Q()):
316.         if not relation_name:
317.             raise ValueError('relation_name cannot be empty.')
318.         self.relation_name = relation_name
319.         self.alias = None
320.         if not isinstance(condition, Q):
321.             raise ValueError('condition argument must be a Q() instance.')
322.         self.condition = condition
323.         self.path = []
324. 
325.     def __eq__(self, other):
326.         if not isinstance(other, self.__class__):
327.             return NotImplemented
328.         return (
329.             self.relation_name == other.relation_name and
330.             self.alias == other.alias and
331.             self.condition == other.condition
332.         )
333. 
334.     def clone(self):
335.         clone = FilteredRelation(self.relation_name, condition=self.condition)
336.         clone.alias = self.alias
337.         clone.path = self.path[:]
338.         return clone
339. 
340.     def resolve_expression(self, *args, **kwargs):
341.         """
342.         QuerySet.annotate() only accepts expression-like arguments
343.         (with a resolve_expression() method).
344.         """
345.         raise NotImplementedError('FilteredRelation.resolve_expression() is unused.')
346. 
347.     def as_sql(self, compiler, connection):
348.         # Resolve the condition in Join.filtered_relation.
349.         query = compiler.query
350.         where = query.build_filtered_relation_q(self.condition, reuse=set(self.path))
351.         return compiler.compile(where)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 21:47:19,758 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full content of the file `django/db/models/fields/__init__.py`.\n2. Extended relevance:\n   - This file contains the definition of the `Field` class, which is central to the user's purpose of inspecting its methods.", relative_path='django/db/models/fields/__init__.py', start_line=1, end_line=2454), ContextOutput(reasoning="1. Query requirement analysis:\n   - The query's purpose is to inspect the `get_transform` and `get_lookup` methods of the `Field` class.\n2. Extended relevance:\n   - The `Field` class inherits these methods from `RegisterLookupMixin`.\n   - This context provides the definition of `RegisterLookupMixin` and the implementation of `get_transform` and `get_lookup`, which is essential for understanding the logic.", relative_path='django/db/models/query_utils.py', start_line=167, end_line=232)]
2025-12-21 21:47:19,762 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
2025-12-21 21:47:19,762 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 21:47:19,762 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 21:47:19,763 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 1 existing contexts
2025-12-21 21:47:19,763 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-21 21:47:19,764 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   └── FUNDING.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── bin
|   |   └── django-admin.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── bin
|   |   |   |   └── compress.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   └── __init__.py
|   |   |   ├── database.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.txt
|   |   ├── index.txt
|   |   └── security.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   └── jsi18n-mocks.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   └── commands
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── test_django_admin_py.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   └── tests.py
    ├── asgi
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_password_reset_timeout_days.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── test_base.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   └── commands
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_greatest.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   |   └── fixture2.xml
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── maps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_json.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_db_returning.py
    |   ├── test_deprecation.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   ├── test_is_ajax_deprecations.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_deprecation.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_if_equal.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
    |   ├── test_fakepayload.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_client_regress
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── bad_templates
    |   |   └── 404.html
    |   ├── context_processors.py
    |   ├── models.py
    |   ├── session.py
    |   ├── templates
    |   |   ├── request_context.html
    |   |   └── unicode.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── test_exceptions
    |   ├── __init__.py
    |   └── test_validation_error.py
    ├── test_runner
    |   ├── __init__.py
    |   ├── models.py
    |   ├── runner.py
    |   ├── test_debug_sql.py
    |   ├── test_discover_runner.py
    |   ├── test_parallel.py
    |   └── tests.py
    ├── test_runner_apps
    |   ├── __init__.py
    |   ├── buffer
    |   |   └── tests_buffer.py
    |   ├── databases
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   ├── sample
    |   |   ├── __init__.py
    |   |   ├── doctests.py
    |   |   ├── empty.py
    |   |   ├── pattern_tests.py
    |   |   ├── tests
    |   |   |   ├── __init__.py
    |   |   |   └── tests.py
    |   |   └── tests_sample.py
    |   ├── simple
    |   |   ├── __init__.py
    |   |   └── tests.py
    |   └── tagged
    |       ├── __init__.py
    |       ├── tests.py
    |       └── tests_inheritance.py
    ├── test_sqlite.py
    ├── test_utils
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── templates
    |   |   └── template_used
    |   |       ├── alternative.html
    |   |       ├── base.html
    |   |       ├── extends.html
    |   |       └── include.html
    |   ├── test_simpletestcase.py
    |   ├── test_testcase.py
    |   ├── test_transactiontestcase.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── timezones
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── transaction_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── transactions
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── unmanaged_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── update_only_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── urlpatterns
    |   ├── __init__.py
    |   ├── converter_urls.py
    |   ├── converters.py
    |   ├── included_urls.py
    |   ├── more_urls.py
    |   ├── path_base64_urls.py
    |   ├── path_dynamic_urls.py
    |   ├── path_same_name_urls.py
    |   ├── path_urls.py
    |   ├── test_resolvers.py
    |   ├── tests.py
    |   └── views.py
    ├── urlpatterns_reverse
    |   ├── __init__.py
    |   ├── erroneous_urls.py
    |   ├── extra_urls.py
    |   ├── included_app_urls.py
    |   ├── included_named_urls.py
    |   ├── included_named_urls2.py
    |   ├── included_namespace_urls.py
    |   ├── included_no_kwargs_urls.py
    |   ├── included_urls.py
    |   ├── included_urls2.py
    |   ├── method_view_urls.py
    |   ├── middleware.py
    |   ├── named_urls.py
    |   ├── named_urls_conflict.py
    |   ├── namespace_urls.py
    |   ├── nested_urls.py
    |   ├── no_urls.py
    |   ├── nonimported_module.py
    |   ├── reverse_lazy_urls.py
    |   ├── test_localeregexdescriptor.py
    |   ├── tests.py
    |   ├── translations
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── urlconf_inner.py
    |   ├── urlconf_outer.py
    |   ├── urls.py
    |   ├── urls_error_handlers.py
    |   ├── urls_error_handlers_callables.py
    |   ├── urls_without_handlers.py
    |   ├── utils.py
    |   ├── views.py
    |   └── views_broken.py
    ├── urls.py
    ├── user_commands
    |   ├── __init__.py
    |   ├── eggs
    |   ├── management
    |   |   └── commands
    |   |       ├── common_args.py
    |   |       ├── dance.py
    |   |       ├── hal.py
    |   |       ├── mutually_exclusive_required.py
    |   |       ├── no_translations.py
    |   |       ├── required_option.py
    |   |       ├── reverse_url.py
    |   |       ├── set_option.py
    |   |       ├── subparser.py
    |   |       ├── subparser_dest.py
    |   |       ├── subparser_required.py
    |   |       └── transaction.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── utils_tests
    |   ├── __init__.py
    |   ├── archives
    |   ├── eggs
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: models.E015 is raised when ordering uses lookups that are not transforms.

Description: Description
	
./manage.py check
SystemCheckError: System check identified some issues:
ERRORS:
app.Stock: (models.E015) 'ordering' refers to the nonexistent field, related field, or lookup 'supply__product__parent__isnull'.
However this ordering works fine:
>>> list(Stock.objects.order_by('supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[1292, 1293, 1300, 1295, 1294]
>>> list(Stock.objects.order_by('-supply__product__parent__isnull').values_list('pk', flat=True)[:5])
[108, 109, 110, 23, 107]
I believe it was fine until #29408 was implemented.
Stock.supply is a foreign key to Supply, Supply.product is a foreign key to Product, Product.parent is a ForeignKey('self', models.CASCADE, null=True)

Patch information:
diff --git a/django/db/models/base.py b/django/db/models/base.py
index 6c9e9d3707..f8f0734438 100644
--- a/django/db/models/base.py
+++ b/django/db/models/base.py
@@ -1735,7 +1735,8 @@ class Model(metaclass=ModelBase):
         for field in related_fields:
             _cls = cls
             fld = None
-            for part in field.split(LOOKUP_SEP):
+            parts = field.split(LOOKUP_SEP)
+            for idx, part in enumerate(parts):
                 try:
                     # pk is an alias that won't be found by opts.get_field.
                     if part == 'pk':
@@ -1747,7 +1748,7 @@ class Model(metaclass=ModelBase):
                     else:
                         _cls = None
                 except (FieldDoesNotExist, AttributeError):
-                    if fld is None or fld.get_transform(part) is None:
+                    if fld is None:
                         errors.append(
                             checks.Error(
                                 "'ordering' refers to the nonexistent field, "
@@ -1756,6 +1757,31 @@ class Model(metaclass=ModelBase):
                                 id='models.E015',
                             )
                         )
+                        break
+                    # For the final part, allow either a transform or a lookup.
+                    if idx == len(parts) - 1:
+                        if fld.get_transform(part) is None and fld.get_lookup(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
+                    else:
+                        # Intermediate parts must be valid transforms.
+                        if fld.get_transform(part) is None:
+                            errors.append(
+                                checks.Error(
+                                    "'ordering' refers to the nonexistent field, "
+                                    "related field, or lookup '%s'." % field,
+                                    obj=cls,
+                                    id='models.E015',
+                                )
+                            )
+                            break
 
         # Skip ordering on pk. This is always a valid order_by field
         # but is an alias and therefore won't be found by opts.get_field.


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file `django/db/models/base.py`.
Extra Requirements: 
Purpose: This will allow me to examine the entire `_check_ordering` method and the `Model` class to understand the environment where the patch is being applied.

Previous refined query 2:
Essential Query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
Extra Requirements: 
Purpose: I need to inspect the `Field` class definition, specifically the `get_transform` and `get_lookup` methods, to understand the logic of the provided patch for the ordering checks in the patch.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/base.py
Line number range: 1 - 1979
Content:
1. import copy
2. import inspect
3. import warnings
4. from functools import partialmethod
5. from itertools import chain
6. 
7. from django.apps import apps
8. from django.conf import settings
9. from django.core import checks
10. from django.core.exceptions import (
11.     NON_FIELD_ERRORS, FieldDoesNotExist, FieldError, MultipleObjectsReturned,
12.     ObjectDoesNotExist, ValidationError,
13. )
14. from django.db import (
15.     DEFAULT_DB_ALIAS, DJANGO_VERSION_PICKLE_KEY, DatabaseError, connection,
16.     connections, router, transaction,
17. )
18. from django.db.models import (
19.     NOT_PROVIDED, ExpressionWrapper, IntegerField, Max, Value,
20. )
21. from django.db.models.constants import LOOKUP_SEP
22. from django.db.models.constraints import CheckConstraint, UniqueConstraint
23. from django.db.models.deletion import CASCADE, Collector
24. from django.db.models.fields.related import (
25.     ForeignObjectRel, OneToOneField, lazy_related_operation, resolve_relation,
26. )
27. from django.db.models.functions import Coalesce
28. from django.db.models.manager import Manager
29. from django.db.models.options import Options
30. from django.db.models.query import Q
31. from django.db.models.signals import (
32.     class_prepared, post_init, post_save, pre_init, pre_save,
33. )
34. from django.db.models.utils import make_model_tuple
35. from django.utils.encoding import force_str
36. from django.utils.hashable import make_hashable
37. from django.utils.text import capfirst, get_text_list
38. from django.utils.translation import gettext_lazy as _
39. from django.utils.version import get_version
40. 
41. 
42. class Deferred:
43.     def __repr__(self):
44.         return '<Deferred field>'
45. 
46.     def __str__(self):
47.         return '<Deferred field>'
48. 
49. 
50. DEFERRED = Deferred()
51. 
52. 
53. def subclass_exception(name, bases, module, attached_to):
54.     """
55.     Create exception subclass. Used by ModelBase below.
56. 
57.     The exception is created in a way that allows it to be pickled, assuming
58.     that the returned exception class will be added as an attribute to the
59.     'attached_to' class.
60.     """
61.     return type(name, bases, {
62.         '__module__': module,
63.         '__qualname__': '%s.%s' % (attached_to.__qualname__, name),
64.     })
65. 
66. 
67. def _has_contribute_to_class(value):
68.     # Only call contribute_to_class() if it's bound.
69.     return not inspect.isclass(value) and hasattr(value, 'contribute_to_class')
70. 
71. 
72. class ModelBase(type):
73.     """Metaclass for all models."""
74.     def __new__(cls, name, bases, attrs, **kwargs):
75.         super_new = super().__new__
76. 
77.         # Also ensure initialization is only performed for subclasses of Model
78.         # (excluding Model class itself).
79.         parents = [b for b in bases if isinstance(b, ModelBase)]
80.         if not parents:
81.             return super_new(cls, name, bases, attrs)
82. 
83.         # Create the class.
84.         module = attrs.pop('__module__')
85.         new_attrs = {'__module__': module}
86.         classcell = attrs.pop('__classcell__', None)
87.         if classcell is not None:
88.             new_attrs['__classcell__'] = classcell
89.         attr_meta = attrs.pop('Meta', None)
90.         # Pass all attrs without a (Django-specific) contribute_to_class()
91.         # method to type.__new__() so that they're properly initialized
92.         # (i.e. __set_name__()).
93.         contributable_attrs = {}
94.         for obj_name, obj in list(attrs.items()):
95.             if _has_contribute_to_class(obj):
96.                 contributable_attrs[obj_name] = obj
97.             else:
98.                 new_attrs[obj_name] = obj
99.         new_class = super_new(cls, name, bases, new_attrs, **kwargs)
100. 
101.         abstract = getattr(attr_meta, 'abstract', False)
102.         meta = attr_meta or getattr(new_class, 'Meta', None)
103.         base_meta = getattr(new_class, '_meta', None)
104. 
105.         app_label = None
106. 
107.         # Look for an application configuration to attach the model to.
108.         app_config = apps.get_containing_app_config(module)
109. 
110.         if getattr(meta, 'app_label', None) is None:
111.             if app_config is None:
112.                 if not abstract:
113.                     raise RuntimeError(
114.                         "Model class %s.%s doesn't declare an explicit "
115.                         "app_label and isn't in an application in "
116.                         "INSTALLED_APPS." % (module, name)
117.                     )
118. 
119.             else:
120.                 app_label = app_config.label
121. 
122.         new_class.add_to_class('_meta', Options(meta, app_label))
123.         if not abstract:
124.             new_class.add_to_class(
125.                 'DoesNotExist',
126.                 subclass_exception(
127.                     'DoesNotExist',
128.                     tuple(
129.                         x.DoesNotExist for x in parents if hasattr(x, '_meta') and not x._meta.abstract
130.                     ) or (ObjectDoesNotExist,),
131.                     module,
132.                     attached_to=new_class))
133.             new_class.add_to_class(
134.                 'MultipleObjectsReturned',
135.                 subclass_exception(
136.                     'MultipleObjectsReturned',
137.                     tuple(
138.                         x.MultipleObjectsReturned for x in parents if hasattr(x, '_meta') and not x._meta.abstract
139.                     ) or (MultipleObjectsReturned,),
140.                     module,
141.                     attached_to=new_class))
142.             if base_meta and not base_meta.abstract:
143.                 # Non-abstract child classes inherit some attributes from their
144.                 # non-abstract parent (unless an ABC comes before it in the
145.                 # method resolution order).
146.                 if not hasattr(meta, 'ordering'):
147.                     new_class._meta.ordering = base_meta.ordering
148.                 if not hasattr(meta, 'get_latest_by'):
149.                     new_class._meta.get_latest_by = base_meta.get_latest_by
150. 
151.         is_proxy = new_class._meta.proxy
152. 
153.         # If the model is a proxy, ensure that the base class
154.         # hasn't been swapped out.
155.         if is_proxy and base_meta and base_meta.swapped:
156.             raise TypeError("%s cannot proxy the swapped model '%s'." % (name, base_meta.swapped))
157. 
158.         # Add remaining attributes (those with a contribute_to_class() method)
159.         # to the class.
160.         for obj_name, obj in contributable_attrs.items():
161.             new_class.add_to_class(obj_name, obj)
162. 
163.         # All the fields of any type declared on this model
164.         new_fields = chain(
165.             new_class._meta.local_fields,
166.             new_class._meta.local_many_to_many,
167.             new_class._meta.private_fields
168.         )
169.         field_names = {f.name for f in new_fields}
170. 
171.         # Basic setup for proxy models.
172.         if is_proxy:
173.             base = None
174.             for parent in [kls for kls in parents if hasattr(kls, '_meta')]:
175.                 if parent._meta.abstract:
176.                     if parent._meta.fields:
177.                         raise TypeError(
178.                             "Abstract base class containing model fields not "
179.                             "permitted for proxy model '%s'." % name
180.                         )
181.                     else:
182.                         continue
183.                 if base is None:
184.                     base = parent
185.                 elif parent._meta.concrete_model is not base._meta.concrete_model:
186.                     raise TypeError("Proxy model '%s' has more than one non-abstract model base class." % name)
187.             if base is None:
188.                 raise TypeError("Proxy model '%s' has no non-abstract model base class." % name)
189.             new_class._meta.setup_proxy(base)
190.             new_class._meta.concrete_model = base._meta.concrete_model
191.         else:
192.             new_class._meta.concrete_model = new_class
193. 
194.         # Collect the parent links for multi-table inheritance.
195.         parent_links = {}
196.         for base in reversed([new_class] + parents):
197.             # Conceptually equivalent to `if base is Model`.
198.             if not hasattr(base, '_meta'):
199.                 continue
200.             # Skip concrete parent classes.
201.             if base != new_class and not base._meta.abstract:
202.                 continue
203.             # Locate OneToOneField instances.
204.             for field in base._meta.local_fields:
205.                 if isinstance(field, OneToOneField) and field.remote_field.parent_link:
206.                     related = resolve_relation(new_class, field.remote_field.model)
207.                     parent_links[make_model_tuple(related)] = field
208. 
209.         # Track fields inherited from base models.
210.         inherited_attributes = set()
211.         # Do the appropriate setup for any model parents.
212.         for base in new_class.mro():
213.             if base not in parents or not hasattr(base, '_meta'):
214.                 # Things without _meta aren't functional models, so they're
215.                 # uninteresting parents.
216.                 inherited_attributes.update(base.__dict__)
217.                 continue
218. 
219.             parent_fields = base._meta.local_fields + base._meta.local_many_to_many
220.             if not base._meta.abstract:
221.                 # Check for clashes between locally declared fields and those
222.                 # on the base classes.
223.                 for field in parent_fields:
224.                     if field.name in field_names:
225.                         raise FieldError(
226.                             'Local field %r in class %r clashes with field of '
227.                             'the same name from base class %r.' % (
228.                                 field.name,
229.                                 name,
230.                                 base.__name__,
231.                             )
232.                         )
233.                     else:
234.                         inherited_attributes.add(field.name)
235. 
236.                 # Concrete classes...
237.                 base = base._meta.concrete_model
238.                 base_key = make_model_tuple(base)
239.                 if base_key in parent_links:
240.                     field = parent_links[base_key]
241.                 elif not is_proxy:
242.                     attr_name = '%s_ptr' % base._meta.model_name
243.                     field = OneToOneField(
244.                         base,
245.                         on_delete=CASCADE,
246.                         name=attr_name,
247.                         auto_created=True,
248.                         parent_link=True,
249.                     )
250. 
251.                     if attr_name in field_names:
252.                         raise FieldError(
253.                             "Auto-generated field '%s' in class %r for "
254.                             "parent_link to base class %r clashes with "
255.                             "declared field of the same name." % (
256.                                 attr_name,
257.                                 name,
258.                                 base.__name__,
259.                             )
260.                         )
261. 
262.                     # Only add the ptr field if it's not already present;
263.                     # e.g. migrations will already have it specified
264.                     if not hasattr(new_class, attr_name):
265.                         new_class.add_to_class(attr_name, field)
266.                 else:
267.                     field = None
268.                 new_class._meta.parents[base] = field
269.             else:
270.                 base_parents = base._meta.parents.copy()
271. 
272.                 # Add fields from abstract base class if it wasn't overridden.
273.                 for field in parent_fields:
274.                     if (field.name not in field_names and
275.                             field.name not in new_class.__dict__ and
276.                             field.name not in inherited_attributes):
277.                         new_field = copy.deepcopy(field)
278.                         new_class.add_to_class(field.name, new_field)
279.                         # Replace parent links defined on this base by the new
280.                         # field. It will be appropriately resolved if required.
281.                         if field.one_to_one:
282.                             for parent, parent_link in base_parents.items():
283.                                 if field == parent_link:
284.                                     base_parents[parent] = new_field
285. 
286.                 # Pass any non-abstract parent classes onto child.
287.                 new_class._meta.parents.update(base_parents)
288. 
289.             # Inherit private fields (like GenericForeignKey) from the parent
290.             # class
291.             for field in base._meta.private_fields:
292.                 if field.name in field_names:
293.                     if not base._meta.abstract:
294.                         raise FieldError(
295.                             'Local field %r in class %r clashes with field of '
296.                             'the same name from base class %r.' % (
297.                                 field.name,
298.                                 name,
299.                                 base.__name__,
300.                             )
301.                         )
302.                 else:
303.                     field = copy.deepcopy(field)
304.                     if not base._meta.abstract:
305.                         field.mti_inherited = True
306.                     new_class.add_to_class(field.name, field)
307. 
308.         # Copy indexes so that index names are unique when models extend an
309.         # abstract model.
310.         new_class._meta.indexes = [copy.deepcopy(idx) for idx in new_class._meta.indexes]
311. 
312.         if abstract:
313.             # Abstract base models can't be instantiated and don't appear in
314.             # the list of models for an app. We do the final setup for them a
315.             # little differently from normal models.
316.             attr_meta.abstract = False
317.             new_class.Meta = attr_meta
318.             return new_class
319. 
320.         new_class._prepare()
321.         new_class._meta.apps.register_model(new_class._meta.app_label, new_class)
322.         return new_class
323. 
324.     def add_to_class(cls, name, value):
325.         if _has_contribute_to_class(value):
326.             value.contribute_to_class(cls, name)
327.         else:
328.             setattr(cls, name, value)
329. 
330.     def _prepare(cls):
331.         """Create some methods once self._meta has been populated."""
332.         opts = cls._meta
333.         opts._prepare(cls)
334. 
335.         if opts.order_with_respect_to:
336.             cls.get_next_in_order = partialmethod(cls._get_next_or_previous_in_order, is_next=True)
337.             cls.get_previous_in_order = partialmethod(cls._get_next_or_previous_in_order, is_next=False)
338. 
339.             # Defer creating accessors on the foreign class until it has been
340.             # created and registered. If remote_field is None, we're ordering
341.             # with respect to a GenericForeignKey and don't know what the
342.             # foreign class is - we'll add those accessors later in
343.             # contribute_to_class().
344.             if opts.order_with_respect_to.remote_field:
345.                 wrt = opts.order_with_respect_to
346.                 remote = wrt.remote_field.model
347.                 lazy_related_operation(make_foreign_order_accessors, cls, remote)
348. 
349.         # Give the class a docstring -- its definition.
350.         if cls.__doc__ is None:
351.             cls.__doc__ = "%s(%s)" % (cls.__name__, ", ".join(f.name for f in opts.fields))
352. 
353.         get_absolute_url_override = settings.ABSOLUTE_URL_OVERRIDES.get(opts.label_lower)
354.         if get_absolute_url_override:
355.             setattr(cls, 'get_absolute_url', get_absolute_url_override)
356. 
357.         if not opts.managers:
358.             if any(f.name == 'objects' for f in opts.fields):
359.                 raise ValueError(
360.                     "Model %s must specify a custom Manager, because it has a "
361.                     "field named 'objects'." % cls.__name__
362.                 )
363.             manager = Manager()
364.             manager.auto_created = True
365.             cls.add_to_class('objects', manager)
366. 
367.         # Set the name of _meta.indexes. This can't be done in
368.         # Options.contribute_to_class() because fields haven't been added to
369.         # the model at that point.
370.         for index in cls._meta.indexes:
371.             if not index.name:
372.                 index.set_name_with_model(cls)
373. 
374.         class_prepared.send(sender=cls)
375. 
376.     @property
377.     def _base_manager(cls):
378.         return cls._meta.base_manager
379. 
380.     @property
381.     def _default_manager(cls):
382.         return cls._meta.default_manager
383. 
384. 
385. class ModelStateFieldsCacheDescriptor:
386.     def __get__(self, instance, cls=None):
387.         if instance is None:
388.             return self
389.         res = instance.fields_cache = {}
390.         return res
391. 
392. 
393. class ModelState:
394.     """Store model instance state."""
395.     db = None
396.     # If true, uniqueness validation checks will consider this a new, unsaved
397.     # object. Necessary for correct validation of new instances of objects with
398.     # explicit (non-auto) PKs. This impacts validation only; it has no effect
399.     # on the actual save.
400.     adding = True
401.     fields_cache = ModelStateFieldsCacheDescriptor()
402. 
403. 
404. class Model(metaclass=ModelBase):
405. 
406.     def __init__(self, *args, **kwargs):
407.         # Alias some things as locals to avoid repeat global lookups
408.         cls = self.__class__
409.         opts = self._meta
410.         _setattr = setattr
411.         _DEFERRED = DEFERRED
412. 
413.         pre_init.send(sender=cls, args=args, kwargs=kwargs)
414. 
415.         # Set up the storage for instance state
416.         self._state = ModelState()
417. 
418.         # There is a rather weird disparity here; if kwargs, it's set, then args
419.         # overrides it. It should be one or the other; don't duplicate the work
420.         # The reason for the kwargs check is that standard iterator passes in by
421.         # args, and instantiation for iteration is 33% faster.
422.         if len(args) > len(opts.concrete_fields):
423.             # Daft, but matches old exception sans the err msg.
424.             raise IndexError("Number of args exceeds number of fields")
425. 
426.         if not kwargs:
427.             fields_iter = iter(opts.concrete_fields)
428.             # The ordering of the zip calls matter - zip throws StopIteration
429.             # when an iter throws it. So if the first iter throws it, the second
430.             # is *not* consumed. We rely on this, so don't change the order
431.             # without changing the logic.
432.             for val, field in zip(args, fields_iter):
433.                 if val is _DEFERRED:
434.                     continue
435.                 _setattr(self, field.attname, val)
436.         else:
437.             # Slower, kwargs-ready version.
438.             fields_iter = iter(opts.fields)
439.             for val, field in zip(args, fields_iter):
440.                 if val is _DEFERRED:
441.                     continue
442.                 _setattr(self, field.attname, val)
443.                 kwargs.pop(field.name, None)
444. 
445.         # Now we're left with the unprocessed fields that *must* come from
446.         # keywords, or default.
447. 
448.         for field in fields_iter:
449.             is_related_object = False
450.             # Virtual field
451.             if field.attname not in kwargs and field.column is None:
452.                 continue
453.             if kwargs:
454.                 if isinstance(field.remote_field, ForeignObjectRel):
455.                     try:
456.                         # Assume object instance was passed in.
457.                         rel_obj = kwargs.pop(field.name)
458.                         is_related_object = True
459.                     except KeyError:
460.                         try:
461.                             # Object instance wasn't passed in -- must be an ID.
462.                             val = kwargs.pop(field.attname)
463.                         except KeyError:
464.                             val = field.get_default()
465.                 else:
466.                     try:
467.                         val = kwargs.pop(field.attname)
468.                     except KeyError:
469.                         # This is done with an exception rather than the
470.                         # default argument on pop because we don't want
471.                         # get_default() to be evaluated, and then not used.
472.                         # Refs #12057.
473.                         val = field.get_default()
474.             else:
475.                 val = field.get_default()
476. 
477.             if is_related_object:
478.                 # If we are passed a related instance, set it using the
479.                 # field.name instead of field.attname (e.g. "user" instead of
480.                 # "user_id") so that the object gets properly cached (and type
481.                 # checked) by the RelatedObjectDescriptor.
482.                 if rel_obj is not _DEFERRED:
483.                     _setattr(self, field.name, rel_obj)
484.             else:
485.                 if val is not _DEFERRED:
486.                     _setattr(self, field.attname, val)
487. 
488.         if kwargs:
489.             property_names = opts._property_names
490.             for prop in tuple(kwargs):
491.                 try:
492.                     # Any remaining kwargs must correspond to properties or
493.                     # virtual fields.
494.                     if prop in property_names or opts.get_field(prop):
495.                         if kwargs[prop] is not _DEFERRED:
496.                             _setattr(self, prop, kwargs[prop])
497.                         del kwargs[prop]
498.                 except (AttributeError, FieldDoesNotExist):
499.                     pass
500.             for kwarg in kwargs:
501.                 raise TypeError("%s() got an unexpected keyword argument '%s'" % (cls.__name__, kwarg))
502.         super().__init__()
503.         post_init.send(sender=cls, instance=self)
504. 
505.     @classmethod
506.     def from_db(cls, db, field_names, values):
507.         if len(values) != len(cls._meta.concrete_fields):
508.             values_iter = iter(values)
509.             values = [
510.                 next(values_iter) if f.attname in field_names else DEFERRED
511.                 for f in cls._meta.concrete_fields
512.             ]
513.         new = cls(*values)
514.         new._state.adding = False
515.         new._state.db = db
516.         return new
517. 
518.     def __repr__(self):
519.         return '<%s: %s>' % (self.__class__.__name__, self)
520. 
521.     def __str__(self):
522.         return '%s object (%s)' % (self.__class__.__name__, self.pk)
523. 
524.     def __eq__(self, other):
525.         if not isinstance(other, Model):
526.             return NotImplemented
527.         if self._meta.concrete_model != other._meta.concrete_model:
528.             return False
529.         my_pk = self.pk
530.         if my_pk is None:
531.             return self is other
532.         return my_pk == other.pk
533. 
534.     def __hash__(self):
535.         if self.pk is None:
536.             raise TypeError("Model instances without primary key value are unhashable")
537.         return hash(self.pk)
538. 
539.     def __reduce__(self):
540.         data = self.__getstate__()
541.         data[DJANGO_VERSION_PICKLE_KEY] = get_version()
542.         class_id = self._meta.app_label, self._meta.object_name
543.         return model_unpickle, (class_id,), data
544. 
545.     def __getstate__(self):
546.         """Hook to allow choosing the attributes to pickle."""
547.         return self.__dict__
548. 
549.     def __setstate__(self, state):
550.         msg = None
551.         pickled_version = state.get(DJANGO_VERSION_PICKLE_KEY)
552.         if pickled_version:
553.             current_version = get_version()
554.             if current_version != pickled_version:
555.                 msg = (
556.                     "Pickled model instance's Django version %s does not match "
557.                     "the current version %s." % (pickled_version, current_version)
558.                 )
559.         else:
560.             msg = "Pickled model instance's Django version is not specified."
561. 
562.         if msg:
563.             warnings.warn(msg, RuntimeWarning, stacklevel=2)
564. 
565.         self.__dict__.update(state)
566. 
567.     def _get_pk_val(self, meta=None):
568.         meta = meta or self._meta
569.         return getattr(self, meta.pk.attname)
570. 
571.     def _set_pk_val(self, value):
572.         for parent_link in self._meta.parents.values():
573.             if parent_link and parent_link != self._meta.pk:
574.                 setattr(self, parent_link.target_field.attname, value)
575.         return setattr(self, self._meta.pk.attname, value)
576. 
577.     pk = property(_get_pk_val, _set_pk_val)
578. 
579.     def get_deferred_fields(self):
580.         """
581.         Return a set containing names of deferred fields for this instance.
582.         """
583.         return {
584.             f.attname for f in self._meta.concrete_fields
585.             if f.attname not in self.__dict__
586.         }
587. 
588.     def refresh_from_db(self, using=None, fields=None):
589.         """
590.         Reload field values from the database.
591. 
592.         By default, the reloading happens from the database this instance was
593.         loaded from, or by the read router if this instance wasn't loaded from
594.         any database. The using parameter will override the default.
595. 
596.         Fields can be used to specify which fields to reload. The fields
597.         should be an iterable of field attnames. If fields is None, then
598.         all non-deferred fields are reloaded.
599. 
600.         When accessing deferred fields of an instance, the deferred loading
601.         of the field will call this method.
602.         """
603.         if fields is None:
604.             self._prefetched_objects_cache = {}
605.         else:
606.             prefetched_objects_cache = getattr(self, '_prefetched_objects_cache', ())
607.             for field in fields:
608.                 if field in prefetched_objects_cache:
609.                     del prefetched_objects_cache[field]
610.                     fields.remove(field)
611.             if not fields:
612.                 return
613.             if any(LOOKUP_SEP in f for f in fields):
614.                 raise ValueError(
615.                     'Found "%s" in fields argument. Relations and transforms '
616.                     'are not allowed in fields.' % LOOKUP_SEP)
617. 
618.         hints = {'instance': self}
619.         db_instance_qs = self.__class__._base_manager.db_manager(using, hints=hints).filter(pk=self.pk)
620. 
621.         # Use provided fields, if not set then reload all non-deferred fields.
622.         deferred_fields = self.get_deferred_fields()
623.         if fields is not None:
624.             fields = list(fields)
625.             db_instance_qs = db_instance_qs.only(*fields)
626.         elif deferred_fields:
627.             fields = [f.attname for f in self._meta.concrete_fields
628.                       if f.attname not in deferred_fields]
629.             db_instance_qs = db_instance_qs.only(*fields)
630. 
631.         db_instance = db_instance_qs.get()
632.         non_loaded_fields = db_instance.get_deferred_fields()
633.         for field in self._meta.concrete_fields:
634.             if field.attname in non_loaded_fields:
635.                 # This field wasn't refreshed - skip ahead.
636.                 continue
637.             setattr(self, field.attname, getattr(db_instance, field.attname))
638.             # Clear cached foreign keys.
639.             if field.is_relation and field.is_cached(self):
640.                 field.delete_cached_value(self)
641. 
642.         # Clear cached relations.
643.         for field in self._meta.related_objects:
644.             if field.is_cached(self):
645.                 field.delete_cached_value(self)
646. 
647.         self._state.db = db_instance._state.db
648. 
649.     def serializable_value(self, field_name):
650.         """
651.         Return the value of the field name for this instance. If the field is
652.         a foreign key, return the id value instead of the object. If there's
653.         no Field object with this name on the model, return the model
654.         attribute's value.
655. 
656.         Used to serialize a field's value (in the serializer, or form output,
657.         for example). Normally, you would just access the attribute directly
658.         and not use this method.
659.         """
660.         try:
661.             field = self._meta.get_field(field_name)
662.         except FieldDoesNotExist:
663.             return getattr(self, field_name)
664.         return getattr(self, field.attname)
665. 
666.     def save(self, force_insert=False, force_update=False, using=None,
667.              update_fields=None):
668.         """
669.         Save the current instance. Override this in a subclass if you want to
670.         control the saving process.
671. 
672.         The 'force_insert' and 'force_update' parameters can be used to insist
673.         that the "save" must be an SQL insert or update (or equivalent for
674.         non-SQL backends), respectively. Normally, they should not be set.
675.         """
676.         # Ensure that a model instance without a PK hasn't been assigned to
677.         # a ForeignKey or OneToOneField on this model. If the field is
678.         # nullable, allowing the save() would result in silent data loss.
679.         for field in self._meta.concrete_fields:
680.             # If the related field isn't cached, then an instance hasn't
681.             # been assigned and there's no need to worry about this check.
682.             if field.is_relation and field.is_cached(self):
683.                 obj = getattr(self, field.name, None)
684.                 if not obj:
685.                     continue
686.                 # A pk may have been assigned manually to a model instance not
687.                 # saved to the database (or auto-generated in a case like
688.                 # UUIDField), but we allow the save to proceed and rely on the
689.                 # database to raise an IntegrityError if applicable. If
690.                 # constraints aren't supported by the database, there's the
691.                 # unavoidable risk of data corruption.
692.                 if obj.pk is None:
693.                     # Remove the object from a related instance cache.
694.                     if not field.remote_field.multiple:
695.                         field.remote_field.delete_cached_value(obj)
696.                     raise ValueError(
697.                         "save() prohibited to prevent data loss due to "
698.                         "unsaved related object '%s'." % field.name
699.                     )
700.                 elif getattr(self, field.attname) is None:
701.                     # Use pk from related object if it has been saved after
702.                     # an assignment.
703.                     setattr(self, field.attname, obj.pk)
704.                 # If the relationship's pk/to_field was changed, clear the
705.                 # cached relationship.
706.                 if getattr(obj, field.target_field.attname) != getattr(self, field.attname):
707.                     field.delete_cached_value(self)
708. 
709.         using = using or router.db_for_write(self.__class__, instance=self)
710.         if force_insert and (force_update or update_fields):
711.             raise ValueError("Cannot force both insert and updating in model saving.")
712. 
713.         deferred_fields = self.get_deferred_fields()
714.         if update_fields is not None:
715.             # If update_fields is empty, skip the save. We do also check for
716.             # no-op saves later on for inheritance cases. This bailout is
717.             # still needed for skipping signal sending.
718.             if not update_fields:
719.                 return
720. 
721.             update_fields = frozenset(update_fields)
722.             field_names = set()
723. 
724.             for field in self._meta.fields:
725.                 if not field.primary_key:
726.                     field_names.add(field.name)
727. 
728.                     if field.name != field.attname:
729.                         field_names.add(field.attname)
730. 
731.             non_model_fields = update_fields.difference(field_names)
732. 
733.             if non_model_fields:
734.                 raise ValueError("The following fields do not exist in this "
735.                                  "model or are m2m fields: %s"
736.                                  % ', '.join(non_model_fields))
737. 
738.         # If saving to the same database, and this model is deferred, then
739.         # automatically do an "update_fields" save on the loaded fields.
740.         elif not force_insert and deferred_fields and using == self._state.db:
741.             field_names = set()
742.             for field in self._meta.concrete_fields:
743.                 if not field.primary_key and not hasattr(field, 'through'):
744.                     field_names.add(field.attname)
745.             loaded_fields = field_names.difference(deferred_fields)
746.             if loaded_fields:
747.                 update_fields = frozenset(loaded_fields)
748. 
749.         self.save_base(using=using, force_insert=force_insert,
750.                        force_update=force_update, update_fields=update_fields)
751.     save.alters_data = True
752. 
753.     def save_base(self, raw=False, force_insert=False,
754.                   force_update=False, using=None, update_fields=None):
755.         """
756.         Handle the parts of saving which should be done only once per save,
757.         yet need to be done in raw saves, too. This includes some sanity
758.         checks and signal sending.
759. 
760.         The 'raw' argument is telling save_base not to save any parent
761.         models and not to do any changes to the values before save. This
762.         is used by fixture loading.
763.         """
764.         using = using or router.db_for_write(self.__class__, instance=self)
765.         assert not (force_insert and (force_update or update_fields))
766.         assert update_fields is None or update_fields
767.         cls = origin = self.__class__
768.         # Skip proxies, but keep the origin as the proxy model.
769.         if cls._meta.proxy:
770.             cls = cls._meta.concrete_model
771.         meta = cls._meta
772.         if not meta.auto_created:
773.             pre_save.send(
774.                 sender=origin, instance=self, raw=raw, using=using,
775.                 update_fields=update_fields,
776.             )
777.         # A transaction isn't needed if one query is issued.
778.         if meta.parents:
779.             context_manager = transaction.atomic(using=using, savepoint=False)
780.         else:
781.             context_manager = transaction.mark_for_rollback_on_error(using=using)
782.         with context_manager:
783.             parent_inserted = False
784.             if not raw:
785.                 parent_inserted = self._save_parents(cls, using, update_fields)
786.             updated = self._save_table(
787.                 raw, cls, force_insert or parent_inserted,
788.                 force_update, using, update_fields,
789.             )
790.         # Store the database on which the object was saved
791.         self._state.db = using
792.         # Once saved, this is no longer a to-be-added instance.
793.         self._state.adding = False
794. 
795.         # Signal that the save is complete
796.         if not meta.auto_created:
797.             post_save.send(
798.                 sender=origin, instance=self, created=(not updated),
799.                 update_fields=update_fields, raw=raw, using=using,
800.             )
801. 
802.     save_base.alters_data = True
803. 
804.     def _save_parents(self, cls, using, update_fields):
805.         """Save all the parents of cls using values from self."""
806.         meta = cls._meta
807.         inserted = False
808.         for parent, field in meta.parents.items():
809.             # Make sure the link fields are synced between parent and self.
810.             if (field and getattr(self, parent._meta.pk.attname) is None and
811.                     getattr(self, field.attname) is not None):
812.                 setattr(self, parent._meta.pk.attname, getattr(self, field.attname))
813.             parent_inserted = self._save_parents(cls=parent, using=using, update_fields=update_fields)
814.             updated = self._save_table(
815.                 cls=parent, using=using, update_fields=update_fields,
816.                 force_insert=parent_inserted,
817.             )
818.             if not updated:
819.                 inserted = True
820.             # Set the parent's PK value to self.
821.             if field:
822.                 setattr(self, field.attname, self._get_pk_val(parent._meta))
823.                 # Since we didn't have an instance of the parent handy set
824.                 # attname directly, bypassing the descriptor. Invalidate
825.                 # the related object cache, in case it's been accidentally
826.                 # populated. A fresh instance will be re-built from the
827.                 # database if necessary.
828.                 if field.is_cached(self):
829.                     field.delete_cached_value(self)
830.         return inserted
831. 
832.     def _save_table(self, raw=False, cls=None, force_insert=False,
833.                     force_update=False, using=None, update_fields=None):
834.         """
835.         Do the heavy-lifting involved in saving. Update or insert the data
836.         for a single table.
837.         """
838.         meta = cls._meta
839.         non_pks = [f for f in meta.local_concrete_fields if not f.primary_key]
840. 
841.         if update_fields:
842.             non_pks = [f for f in non_pks
843.                        if f.name in update_fields or f.attname in update_fields]
844. 
845.         pk_val = self._get_pk_val(meta)
846.         if pk_val is None:
847.             pk_val = meta.pk.get_pk_value_on_save(self)
848.             setattr(self, meta.pk.attname, pk_val)
849.         pk_set = pk_val is not None
850.         if not pk_set and (force_update or update_fields):
851.             raise ValueError("Cannot force an update in save() with no primary key.")
852.         updated = False
853.         # Skip an UPDATE when adding an instance and primary key has a default.
854.         if (
855.             not raw and
856.             not force_insert and
857.             self._state.adding and
858.             meta.pk.default and
859.             meta.pk.default is not NOT_PROVIDED
860.         ):
861.             force_insert = True
862.         # If possible, try an UPDATE. If that doesn't update anything, do an INSERT.
863.         if pk_set and not force_insert:
864.             base_qs = cls._base_manager.using(using)
865.             values = [(f, None, (getattr(self, f.attname) if raw else f.pre_save(self, False)))
866.                       for f in non_pks]
867.             forced_update = update_fields or force_update
868.             updated = self._do_update(base_qs, using, pk_val, values, update_fields,
869.                                       forced_update)
870.             if force_update and not updated:
871.                 raise DatabaseError("Forced update did not affect any rows.")
872.             if update_fields and not updated:
873.                 raise DatabaseError("Save with update_fields did not affect any rows.")
874.         if not updated:
875.             if meta.order_with_respect_to:
876.                 # If this is a model with an order_with_respect_to
877.                 # autopopulate the _order field
878.                 field = meta.order_with_respect_to
879.                 filter_args = field.get_filter_kwargs_for_object(self)
880.                 self._order = cls._base_manager.using(using).filter(**filter_args).aggregate(
881.                     _order__max=Coalesce(
882.                         ExpressionWrapper(Max('_order') + Value(1), output_field=IntegerField()),
883.                         Value(0),
884.                     ),
885.                 )['_order__max']
886.             fields = meta.local_concrete_fields
887.             if not pk_set:
888.                 fields = [f for f in fields if f is not meta.auto_field]
889. 
890.             returning_fields = meta.db_returning_fields
891.             results = self._do_insert(cls._base_manager, using, fields, returning_fields, raw)
892.             if results:
893.                 for value, field in zip(results[0], returning_fields):
894.                     setattr(self, field.attname, value)
895.         return updated
896. 
897.     def _do_update(self, base_qs, using, pk_val, values, update_fields, forced_update):
898.         """
899.         Try to update the model. Return True if the model was updated (if an
900.         update query was done and a matching row was found in the DB).
901.         """
902.         filtered = base_qs.filter(pk=pk_val)
903.         if not values:
904.             # We can end up here when saving a model in inheritance chain where
905.             # update_fields doesn't target any field in current model. In that
906.             # case we just say the update succeeded. Another case ending up here
907.             # is a model with just PK - in that case check that the PK still
908.             # exists.
909.             return update_fields is not None or filtered.exists()
910.         if self._meta.select_on_save and not forced_update:
911.             return (
912.                 filtered.exists() and
913.                 # It may happen that the object is deleted from the DB right after
914.                 # this check, causing the subsequent UPDATE to return zero matching
915.                 # rows. The same result can occur in some rare cases when the
916.                 # database returns zero despite the UPDATE being executed
917.                 # successfully (a row is matched and updated). In order to
918.                 # distinguish these two cases, the object's existence in the
919.                 # database is again checked for if the UPDATE query returns 0.
920.                 (filtered._update(values) > 0 or filtered.exists())
921.             )
922.         return filtered._update(values) > 0
923. 
924.     def _do_insert(self, manager, using, fields, returning_fields, raw):
925.         """
926.         Do an INSERT. If returning_fields is defined then this method should
927.         return the newly created data for the model.
928.         """
929.         return manager._insert(
930.             [self], fields=fields, returning_fields=returning_fields,
931.             using=using, raw=raw,
932.         )
933. 
934.     def delete(self, using=None, keep_parents=False):
935.         using = using or router.db_for_write(self.__class__, instance=self)
936.         assert self.pk is not None, (
937.             "%s object can't be deleted because its %s attribute is set to None." %
938.             (self._meta.object_name, self._meta.pk.attname)
939.         )
940. 
941.         collector = Collector(using=using)
942.         collector.collect([self], keep_parents=keep_parents)
943.         return collector.delete()
944. 
945.     delete.alters_data = True
946. 
947.     def _get_FIELD_display(self, field):
948.         value = getattr(self, field.attname)
949.         choices_dict = dict(make_hashable(field.flatchoices))
950.         # force_str() to coerce lazy strings.
951.         return force_str(choices_dict.get(make_hashable(value), value), strings_only=True)
952. 
953.     def _get_next_or_previous_by_FIELD(self, field, is_next, **kwargs):
954.         if not self.pk:
955.             raise ValueError("get_next/get_previous cannot be used on unsaved objects.")
956.         op = 'gt' if is_next else 'lt'
957.         order = '' if is_next else '-'
958.         param = getattr(self, field.attname)
959.         q = Q(**{'%s__%s' % (field.name, op): param})
960.         q = q | Q(**{field.name: param, 'pk__%s' % op: self.pk})
961.         qs = self.__class__._default_manager.using(self._state.db).filter(**kwargs).filter(q).order_by(
962.             '%s%s' % (order, field.name), '%spk' % order
963.         )
964.         try:
965.             return qs[0]
966.         except IndexError:
967.             raise self.DoesNotExist("%s matching query does not exist." % self.__class__._meta.object_name)
968. 
969.     def _get_next_or_previous_in_order(self, is_next):
970.         cachename = "__%s_order_cache" % is_next
971.         if not hasattr(self, cachename):
972.             op = 'gt' if is_next else 'lt'
973.             order = '_order' if is_next else '-_order'
974.             order_field = self._meta.order_with_respect_to
975.             filter_args = order_field.get_filter_kwargs_for_object(self)
976.             obj = self.__class__._default_manager.filter(**filter_args).filter(**{
977.                 '_order__%s' % op: self.__class__._default_manager.values('_order').filter(**{
978.                     self._meta.pk.name: self.pk
979.                 })
980.             }).order_by(order)[:1].get()
981.             setattr(self, cachename, obj)
982.         return getattr(self, cachename)
983. 
984.     def prepare_database_save(self, field):
985.         if self.pk is None:
986.             raise ValueError("Unsaved model instance %r cannot be used in an ORM query." % self)
987.         return getattr(self, field.remote_field.get_related_field().attname)
988. 
989.     def clean(self):
990.         """
991.         Hook for doing any extra model-wide validation after clean() has been
992.         called on every field by self.clean_fields. Any ValidationError raised
993.         by this method will not be associated with a particular field; it will
994.         have a special-case association with the field defined by NON_FIELD_ERRORS.
995.         """
996.         pass
997. 
998.     def validate_unique(self, exclude=None):
999.         """
1000.         Check unique constraints on the model and raise ValidationError if any
1001.         failed.
1002.         """
1003.         unique_checks, date_checks = self._get_unique_checks(exclude=exclude)
1004. 
1005.         errors = self._perform_unique_checks(unique_checks)
1006.         date_errors = self._perform_date_checks(date_checks)
1007. 
1008.         for k, v in date_errors.items():
1009.             errors.setdefault(k, []).extend(v)
1010. 
1011.         if errors:
1012.             raise ValidationError(errors)
1013. 
1014.     def _get_unique_checks(self, exclude=None):
1015.         """
1016.         Return a list of checks to perform. Since validate_unique() could be
1017.         called from a ModelForm, some fields may have been excluded; we can't
1018.         perform a unique check on a model that is missing fields involved
1019.         in that check. Fields that did not validate should also be excluded,
1020.         but they need to be passed in via the exclude argument.
1021.         """
1022.         if exclude is None:
1023.             exclude = []
1024.         unique_checks = []
1025. 
1026.         unique_togethers = [(self.__class__, self._meta.unique_together)]
1027.         constraints = [(self.__class__, self._meta.total_unique_constraints)]
1028.         for parent_class in self._meta.get_parent_list():
1029.             if parent_class._meta.unique_together:
1030.                 unique_togethers.append((parent_class, parent_class._meta.unique_together))
1031.             if parent_class._meta.total_unique_constraints:
1032.                 constraints.append(
1033.                     (parent_class, parent_class._meta.total_unique_constraints)
1034.                 )
1035. 
1036.         for model_class, unique_together in unique_togethers:
1037.             for check in unique_together:
1038.                 if not any(name in exclude for name in check):
1039.                     # Add the check if the field isn't excluded.
1040.                     unique_checks.append((model_class, tuple(check)))
1041. 
1042.         for model_class, model_constraints in constraints:
1043.             for constraint in model_constraints:
1044.                 if not any(name in exclude for name in constraint.fields):
1045.                     unique_checks.append((model_class, constraint.fields))
1046. 
1047.         # These are checks for the unique_for_<date/year/month>.
1048.         date_checks = []
1049. 
1050.         # Gather a list of checks for fields declared as unique and add them to
1051.         # the list of checks.
1052. 
1053.         fields_with_class = [(self.__class__, self._meta.local_fields)]
1054.         for parent_class in self._meta.get_parent_list():
1055.             fields_with_class.append((parent_class, parent_class._meta.local_fields))
1056. 
1057.         for model_class, fields in fields_with_class:
1058.             for f in fields:
1059.                 name = f.name
1060.                 if name in exclude:
1061.                     continue
1062.                 if f.unique:
1063.                     unique_checks.append((model_class, (name,)))
1064.                 if f.unique_for_date and f.unique_for_date not in exclude:
1065.                     date_checks.append((model_class, 'date', name, f.unique_for_date))
1066.                 if f.unique_for_year and f.unique_for_year not in exclude:
1067.                     date_checks.append((model_class, 'year', name, f.unique_for_year))
1068.                 if f.unique_for_month and f.unique_for_month not in exclude:
1069.                     date_checks.append((model_class, 'month', name, f.unique_for_month))
1070.         return unique_checks, date_checks
1071. 
1072.     def _perform_unique_checks(self, unique_checks):
1073.         errors = {}
1074. 
1075.         for model_class, unique_check in unique_checks:
1076.             # Try to look up an existing object with the same values as this
1077.             # object's values for all the unique field.
1078. 
1079.             lookup_kwargs = {}
1080.             for field_name in unique_check:
1081.                 f = self._meta.get_field(field_name)
1082.                 lookup_value = getattr(self, f.attname)
1083.                 # TODO: Handle multiple backends with different feature flags.
1084.                 if (lookup_value is None or
1085.                         (lookup_value == '' and connection.features.interprets_empty_strings_as_nulls)):
1086.                     # no value, skip the lookup
1087.                     continue
1088.                 if f.primary_key and not self._state.adding:
1089.                     # no need to check for unique primary key when editing
1090.                     continue
1091.                 lookup_kwargs[str(field_name)] = lookup_value
1092. 
1093.             # some fields were skipped, no reason to do the check
1094.             if len(unique_check) != len(lookup_kwargs):
1095.                 continue
1096. 
1097.             qs = model_class._default_manager.filter(**lookup_kwargs)
1098. 
1099.             # Exclude the current object from the query if we are editing an
1100.             # instance (as opposed to creating a new one)
1101.             # Note that we need to use the pk as defined by model_class, not
1102.             # self.pk. These can be different fields because model inheritance
1103.             # allows single model to have effectively multiple primary keys.
1104.             # Refs #17615.
1105.             model_class_pk = self._get_pk_val(model_class._meta)
1106.             if not self._state.adding and model_class_pk is not None:
1107.                 qs = qs.exclude(pk=model_class_pk)
1108.             if qs.exists():
1109.                 if len(unique_check) == 1:
1110.                     key = unique_check[0]
1111.                 else:
1112.                     key = NON_FIELD_ERRORS
1113.                 errors.setdefault(key, []).append(self.unique_error_message(model_class, unique_check))
1114. 
1115.         return errors
1116. 
1117.     def _perform_date_checks(self, date_checks):
1118.         errors = {}
1119.         for model_class, lookup_type, field, unique_for in date_checks:
1120.             lookup_kwargs = {}
1121.             # there's a ticket to add a date lookup, we can remove this special
1122.             # case if that makes it's way in
1123.             date = getattr(self, unique_for)
1124.             if date is None:
1125.                 continue
1126.             if lookup_type == 'date':
1127.                 lookup_kwargs['%s__day' % unique_for] = date.day
1128.                 lookup_kwargs['%s__month' % unique_for] = date.month
1129.                 lookup_kwargs['%s__year' % unique_for] = date.year
1130.             else:
1131.                 lookup_kwargs['%s__%s' % (unique_for, lookup_type)] = getattr(date, lookup_type)
1132.             lookup_kwargs[field] = getattr(self, field)
1133. 
1134.             qs = model_class._default_manager.filter(**lookup_kwargs)
1135.             # Exclude the current object from the query if we are editing an
1136.             # instance (as opposed to creating a new one)
1137.             if not self._state.adding and self.pk is not None:
1138.                 qs = qs.exclude(pk=self.pk)
1139. 
1140.             if qs.exists():
1141.                 errors.setdefault(field, []).append(
1142.                     self.date_error_message(lookup_type, field, unique_for)
1143.                 )
1144.         return errors
1145. 
1146.     def date_error_message(self, lookup_type, field_name, unique_for):
1147.         opts = self._meta
1148.         field = opts.get_field(field_name)
1149.         return ValidationError(
1150.             message=field.error_messages['unique_for_date'],
1151.             code='unique_for_date',
1152.             params={
1153.                 'model': self,
1154.                 'model_name': capfirst(opts.verbose_name),
1155.                 'lookup_type': lookup_type,
1156.                 'field': field_name,
1157.                 'field_label': capfirst(field.verbose_name),
1158.                 'date_field': unique_for,
1159.                 'date_field_label': capfirst(opts.get_field(unique_for).verbose_name),
1160.             }
1161.         )
1162. 
1163.     def unique_error_message(self, model_class, unique_check):
1164.         opts = model_class._meta
1165. 
1166.         params = {
1167.             'model': self,
1168.             'model_class': model_class,
1169.             'model_name': capfirst(opts.verbose_name),
1170.             'unique_check': unique_check,
1171.         }
1172. 
1173.         # A unique field
1174.         if len(unique_check) == 1:
1175.             field = opts.get_field(unique_check[0])
1176.             params['field_label'] = capfirst(field.verbose_name)
1177.             return ValidationError(
1178.                 message=field.error_messages['unique'],
1179.                 code='unique',
1180.                 params=params,
1181.             )
1182. 
1183.         # unique_together
1184.         else:
1185.             field_labels = [capfirst(opts.get_field(f).verbose_name) for f in unique_check]
1186.             params['field_labels'] = get_text_list(field_labels, _('and'))
1187.             return ValidationError(
1188.                 message=_("%(model_name)s with this %(field_labels)s already exists."),
1189.                 code='unique_together',
1190.                 params=params,
1191.             )
1192. 
1193.     def full_clean(self, exclude=None, validate_unique=True):
1194.         """
1195.         Call clean_fields(), clean(), and validate_unique() on the model.
1196.         Raise a ValidationError for any errors that occur.
1197.         """
1198.         errors = {}
1199.         if exclude is None:
1200.             exclude = []
1201.         else:
1202.             exclude = list(exclude)
1203. 
1204.         try:
1205.             self.clean_fields(exclude=exclude)
1206.         except ValidationError as e:
1207.             errors = e.update_error_dict(errors)
1208. 
1209.         # Form.clean() is run even if other validation fails, so do the
1210.         # same with Model.clean() for consistency.
1211.         try:
1212.             self.clean()
1213.         except ValidationError as e:
1214.             errors = e.update_error_dict(errors)
1215. 
1216.         # Run unique checks, but only for fields that passed validation.
1217.         if validate_unique:
1218.             for name in errors:
1219.                 if name != NON_FIELD_ERRORS and name not in exclude:
1220.                     exclude.append(name)
1221.             try:
1222.                 self.validate_unique(exclude=exclude)
1223.             except ValidationError as e:
1224.                 errors = e.update_error_dict(errors)
1225. 
1226.         if errors:
1227.             raise ValidationError(errors)
1228. 
1229.     def clean_fields(self, exclude=None):
1230.         """
1231.         Clean all fields and raise a ValidationError containing a dict
1232.         of all validation errors if any occur.
1233.         """
1234.         if exclude is None:
1235.             exclude = []
1236. 
1237.         errors = {}
1238.         for f in self._meta.fields:
1239.             if f.name in exclude:
1240.                 continue
1241.             # Skip validation for empty fields with blank=True. The developer
1242.             # is responsible for making sure they have a valid value.
1243.             raw_value = getattr(self, f.attname)
1244.             if f.blank and raw_value in f.empty_values:
1245.                 continue
1246.             try:
1247.                 setattr(self, f.attname, f.clean(raw_value, self))
1248.             except ValidationError as e:
1249.                 errors[f.name] = e.error_list
1250. 
1251.         if errors:
1252.             raise ValidationError(errors)
1253. 
1254.     @classmethod
1255.     def check(cls, **kwargs):
1256.         errors = [*cls._check_swappable(), *cls._check_model(), *cls._check_managers(**kwargs)]
1257.         if not cls._meta.swapped:
1258.             databases = kwargs.get('databases') or []
1259.             errors += [
1260.                 *cls._check_fields(**kwargs),
1261.                 *cls._check_m2m_through_same_relationship(),
1262.                 *cls._check_long_column_names(databases),
1263.             ]
1264.             clash_errors = (
1265.                 *cls._check_id_field(),
1266.                 *cls._check_field_name_clashes(),
1267.                 *cls._check_model_name_db_lookup_clashes(),
1268.                 *cls._check_property_name_related_field_accessor_clashes(),
1269.                 *cls._check_single_primary_key(),
1270.             )
1271.             errors.extend(clash_errors)
1272.             # If there are field name clashes, hide consequent column name
1273.             # clashes.
1274.             if not clash_errors:
1275.                 errors.extend(cls._check_column_name_clashes())
1276.             errors += [
1277.                 *cls._check_index_together(),
1278.                 *cls._check_unique_together(),
1279.                 *cls._check_indexes(databases),
1280.                 *cls._check_ordering(),
1281.                 *cls._check_constraints(databases),
1282.             ]
1283. 
1284.         return errors
1285. 
1286.     @classmethod
1287.     def _check_swappable(cls):
1288.         """Check if the swapped model exists."""
1289.         errors = []
1290.         if cls._meta.swapped:
1291.             try:
1292.                 apps.get_model(cls._meta.swapped)
1293.             except ValueError:
1294.                 errors.append(
1295.                     checks.Error(
1296.                         "'%s' is not of the form 'app_label.app_name'." % cls._meta.swappable,
1297.                         id='models.E001',
1298.                     )
1299.                 )
1300.             except LookupError:
1301.                 app_label, model_name = cls._meta.swapped.split('.')
1302.                 errors.append(
1303.                     checks.Error(
1304.                         "'%s' references '%s.%s', which has not been "
1305.                         "installed, or is abstract." % (
1306.                             cls._meta.swappable, app_label, model_name
1307.                         ),
1308.                         id='models.E002',
1309.                     )
1310.                 )
1311.         return errors
1312. 
1313.     @classmethod
1314.     def _check_model(cls):
1315.         errors = []
1316.         if cls._meta.proxy:
1317.             if cls._meta.local_fields or cls._meta.local_many_to_many:
1318.                 errors.append(
1319.                     checks.Error(
1320.                         "Proxy model '%s' contains model fields." % cls.__name__,
1321.                         id='models.E017',
1322.                     )
1323.                 )
1324.         return errors
1325. 
1326.     @classmethod
1327.     def _check_managers(cls, **kwargs):
1328.         """Perform all manager checks."""
1329.         errors = []
1330.         for manager in cls._meta.managers:
1331.             errors.extend(manager.check(**kwargs))
1332.         return errors
1333. 
1334.     @classmethod
1335.     def _check_fields(cls, **kwargs):
1336.         """Perform all field checks."""
1337.         errors = []
1338.         for field in cls._meta.local_fields:
1339.             errors.extend(field.check(**kwargs))
1340.         for field in cls._meta.local_many_to_many:
1341.             errors.extend(field.check(from_model=cls, **kwargs))
1342.         return errors
1343. 
1344.     @classmethod
1345.     def _check_m2m_through_same_relationship(cls):
1346.         """ Check if no relationship model is used by more than one m2m field.
1347.         """
1348. 
1349.         errors = []
1350.         seen_intermediary_signatures = []
1351. 
1352.         fields = cls._meta.local_many_to_many
1353. 
1354.         # Skip when the target model wasn't found.
1355.         fields = (f for f in fields if isinstance(f.remote_field.model, ModelBase))
1356. 
1357.         # Skip when the relationship model wasn't found.
1358.         fields = (f for f in fields if isinstance(f.remote_field.through, ModelBase))
1359. 
1360.         for f in fields:
1361.             signature = (f.remote_field.model, cls, f.remote_field.through, f.remote_field.through_fields)
1362.             if signature in seen_intermediary_signatures:
1363.                 errors.append(
1364.                     checks.Error(
1365.                         "The model has two identical many-to-many relations "
1366.                         "through the intermediate model '%s'." %
1367.                         f.remote_field.through._meta.label,
1368.                         obj=cls,
1369.                         id='models.E003',
1370.                     )
1371.                 )
1372.             else:
1373.                 seen_intermediary_signatures.append(signature)
1374.         return errors
1375. 
1376.     @classmethod
1377.     def _check_id_field(cls):
1378.         """Check if `id` field is a primary key."""
1379.         fields = [f for f in cls._meta.local_fields if f.name == 'id' and f != cls._meta.pk]
1380.         # fields is empty or consists of the invalid "id" field
1381.         if fields and not fields[0].primary_key and cls._meta.pk.name == 'id':
1382.             return [
1383.                 checks.Error(
1384.                     "'id' can only be used as a field name if the field also "
1385.                     "sets 'primary_key=True'.",
1386.                     obj=cls,
1387.                     id='models.E004',
1388.                 )
1389.             ]
1390.         else:
1391.             return []
1392. 
1393.     @classmethod
1394.     def _check_field_name_clashes(cls):
1395.         """Forbid field shadowing in multi-table inheritance."""
1396.         errors = []
1397.         used_fields = {}  # name or attname -> field
1398. 
1399.         # Check that multi-inheritance doesn't cause field name shadowing.
1400.         for parent in cls._meta.get_parent_list():
1401.             for f in parent._meta.local_fields:
1402.                 clash = used_fields.get(f.name) or used_fields.get(f.attname) or None
1403.                 if clash:
1404.                     errors.append(
1405.                         checks.Error(
1406.                             "The field '%s' from parent model "
1407.                             "'%s' clashes with the field '%s' "
1408.                             "from parent model '%s'." % (
1409.                                 clash.name, clash.model._meta,
1410.                                 f.name, f.model._meta
1411.                             ),
1412.                             obj=cls,
1413.                             id='models.E005',
1414.                         )
1415.                     )
1416.                 used_fields[f.name] = f
1417.                 used_fields[f.attname] = f
1418. 
1419.         # Check that fields defined in the model don't clash with fields from
1420.         # parents, including auto-generated fields like multi-table inheritance
1421.         # child accessors.
1422.         for parent in cls._meta.get_parent_list():
1423.             for f in parent._meta.get_fields():
1424.                 if f not in used_fields:
1425.                     used_fields[f.name] = f
1426. 
1427.         for f in cls._meta.local_fields:
1428.             clash = used_fields.get(f.name) or used_fields.get(f.attname) or None
1429.             # Note that we may detect clash between user-defined non-unique
1430.             # field "id" and automatically added unique field "id", both
1431.             # defined at the same model. This special case is considered in
1432.             # _check_id_field and here we ignore it.
1433.             id_conflict = f.name == "id" and clash and clash.name == "id" and clash.model == cls
1434.             if clash and not id_conflict:
1435.                 errors.append(
1436.                     checks.Error(
1437.                         "The field '%s' clashes with the field '%s' "
1438.                         "from model '%s'." % (
1439.                             f.name, clash.name, clash.model._meta
1440.                         ),
1441.                         obj=f,
1442.                         id='models.E006',
1443.                     )
1444.                 )
1445.             used_fields[f.name] = f
1446.             used_fields[f.attname] = f
1447. 
1448.         return errors
1449. 
1450.     @classmethod
1451.     def _check_column_name_clashes(cls):
1452.         # Store a list of column names which have already been used by other fields.
1453.         used_column_names = []
1454.         errors = []
1455. 
1456.         for f in cls._meta.local_fields:
1457.             _, column_name = f.get_attname_column()
1458. 
1459.             # Ensure the column name is not already in use.
1460.             if column_name and column_name in used_column_names:
1461.                 errors.append(
1462.                     checks.Error(
1463.                         "Field '%s' has column name '%s' that is used by "
1464.                         "another field." % (f.name, column_name),
1465.                         hint="Specify a 'db_column' for the field.",
1466.                         obj=cls,
1467.                         id='models.E007'
1468.                     )
1469.                 )
1470.             else:
1471.                 used_column_names.append(column_name)
1472. 
1473.         return errors
1474. 
1475.     @classmethod
1476.     def _check_model_name_db_lookup_clashes(cls):
1477.         errors = []
1478.         model_name = cls.__name__
1479.         if model_name.startswith('_') or model_name.endswith('_'):
1480.             errors.append(
1481.                 checks.Error(
1482.                     "The model name '%s' cannot start or end with an underscore "
1483.                     "as it collides with the query lookup syntax." % model_name,
1484.                     obj=cls,
1485.                     id='models.E023'
1486.                 )
1487.             )
1488.         elif LOOKUP_SEP in model_name:
1489.             errors.append(
1490.                 checks.Error(
1491.                     "The model name '%s' cannot contain double underscores as "
1492.                     "it collides with the query lookup syntax." % model_name,
1493.                     obj=cls,
1494.                     id='models.E024'
1495.                 )
1496.             )
1497.         return errors
1498. 
1499.     @classmethod
1500.     def _check_property_name_related_field_accessor_clashes(cls):
1501.         errors = []
1502.         property_names = cls._meta._property_names
1503.         related_field_accessors = (
1504.             f.get_attname() for f in cls._meta._get_fields(reverse=False)
1505.             if f.is_relation and f.related_model is not None
1506.         )
1507.         for accessor in related_field_accessors:
1508.             if accessor in property_names:
1509.                 errors.append(
1510.                     checks.Error(
1511.                         "The property '%s' clashes with a related field "
1512.                         "accessor." % accessor,
1513.                         obj=cls,
1514.                         id='models.E025',
1515.                     )
1516.                 )
1517.         return errors
1518. 
1519.     @classmethod
1520.     def _check_single_primary_key(cls):
1521.         errors = []
1522.         if sum(1 for f in cls._meta.local_fields if f.primary_key) > 1:
1523.             errors.append(
1524.                 checks.Error(
1525.                     "The model cannot have more than one field with "
1526.                     "'primary_key=True'.",
1527.                     obj=cls,
1528.                     id='models.E026',
1529.                 )
1530.             )
1531.         return errors
1532. 
1533.     @classmethod
1534.     def _check_index_together(cls):
1535.         """Check the value of "index_together" option."""
1536.         if not isinstance(cls._meta.index_together, (tuple, list)):
1537.             return [
1538.                 checks.Error(
1539.                     "'index_together' must be a list or tuple.",
1540.                     obj=cls,
1541.                     id='models.E008',
1542.                 )
1543.             ]
1544. 
1545.         elif any(not isinstance(fields, (tuple, list)) for fields in cls._meta.index_together):
1546.             return [
1547.                 checks.Error(
1548.                     "All 'index_together' elements must be lists or tuples.",
1549.                     obj=cls,
1550.                     id='models.E009',
1551.                 )
1552.             ]
1553. 
1554.         else:
1555.             errors = []
1556.             for fields in cls._meta.index_together:
1557.                 errors.extend(cls._check_local_fields(fields, "index_together"))
1558.             return errors
1559. 
1560.     @classmethod
1561.     def _check_unique_together(cls):
1562.         """Check the value of "unique_together" option."""
1563.         if not isinstance(cls._meta.unique_together, (tuple, list)):
1564.             return [
1565.                 checks.Error(
1566.                     "'unique_together' must be a list or tuple.",
1567.                     obj=cls,
1568.                     id='models.E010',
1569.                 )
1570.             ]
1571. 
1572.         elif any(not isinstance(fields, (tuple, list)) for fields in cls._meta.unique_together):
1573.             return [
1574.                 checks.Error(
1575.                     "All 'unique_together' elements must be lists or tuples.",
1576.                     obj=cls,
1577.                     id='models.E011',
1578.                 )
1579.             ]
1580. 
1581.         else:
1582.             errors = []
1583.             for fields in cls._meta.unique_together:
1584.                 errors.extend(cls._check_local_fields(fields, "unique_together"))
1585.             return errors
1586. 
1587.     @classmethod
1588.     def _check_indexes(cls, databases):
1589.         """Check fields, names, and conditions of indexes."""
1590.         errors = []
1591.         for index in cls._meta.indexes:
1592.             # Index name can't start with an underscore or a number, restricted
1593.             # for cross-database compatibility with Oracle.
1594.             if index.name[0] == '_' or index.name[0].isdigit():
1595.                 errors.append(
1596.                     checks.Error(
1597.                         "The index name '%s' cannot start with an underscore "
1598.                         "or a number." % index.name,
1599.                         obj=cls,
1600.                         id='models.E033',
1601.                     ),
1602.                 )
1603.             if len(index.name) > index.max_name_length:
1604.                 errors.append(
1605.                     checks.Error(
1606.                         "The index name '%s' cannot be longer than %d "
1607.                         "characters." % (index.name, index.max_name_length),
1608.                         obj=cls,
1609.                         id='models.E034',
1610.                     ),
1611.                 )
1612.         for db in databases:
1613.             if not router.allow_migrate_model(db, cls):
1614.                 continue
1615.             connection = connections[db]
1616.             if (
1617.                 connection.features.supports_partial_indexes or
1618.                 'supports_partial_indexes' in cls._meta.required_db_features
1619.             ):
1620.                 continue
1621.             if any(index.condition is not None for index in cls._meta.indexes):
1622.                 errors.append(
1623.                     checks.Warning(
1624.                         '%s does not support indexes with conditions.'
1625.                         % connection.display_name,
1626.                         hint=(
1627.                             "Conditions will be ignored. Silence this warning "
1628.                             "if you don't care about it."
1629.                         ),
1630.                         obj=cls,
1631.                         id='models.W037',
1632.                     )
1633.                 )
1634.         fields = [field for index in cls._meta.indexes for field, _ in index.fields_orders]
1635.         errors.extend(cls._check_local_fields(fields, 'indexes'))
1636.         return errors
1637. 
1638.     @classmethod
1639.     def _check_local_fields(cls, fields, option):
1640.         from django.db import models
1641. 
1642.         # In order to avoid hitting the relation tree prematurely, we use our
1643.         # own fields_map instead of using get_field()
1644.         forward_fields_map = {}
1645.         for field in cls._meta._get_fields(reverse=False):
1646.             forward_fields_map[field.name] = field
1647.             if hasattr(field, 'attname'):
1648.                 forward_fields_map[field.attname] = field
1649. 
1650.         errors = []
1651.         for field_name in fields:
1652.             try:
1653.                 field = forward_fields_map[field_name]
1654.             except KeyError:
1655.                 errors.append(
1656.                     checks.Error(
1657.                         "'%s' refers to the nonexistent field '%s'." % (
1658.                             option, field_name,
1659.                         ),
1660.                         obj=cls,
1661.                         id='models.E012',
1662.                     )
1663.                 )
1664.             else:
1665.                 if isinstance(field.remote_field, models.ManyToManyRel):
1666.                     errors.append(
1667.                         checks.Error(
1668.                             "'%s' refers to a ManyToManyField '%s', but "
1669.                             "ManyToManyFields are not permitted in '%s'." % (
1670.                                 option, field_name, option,
1671.                             ),
1672.                             obj=cls,
1673.                             id='models.E013',
1674.                         )
1675.                     )
1676.                 elif field not in cls._meta.local_fields:
1677.                     errors.append(
1678.                         checks.Error(
1679.                             "'%s' refers to field '%s' which is not local to model '%s'."
1680.                             % (option, field_name, cls._meta.object_name),
1681.                             hint="This issue may be caused by multi-table inheritance.",
1682.                             obj=cls,
1683.                             id='models.E016',
1684.                         )
1685.                     )
1686.         return errors
1687. 
1688.     @classmethod
1689.     def _check_ordering(cls):
1690.         """
1691.         Check "ordering" option -- is it a list of strings and do all fields
1692.         exist?
1693.         """
1694.         if cls._meta._ordering_clash:
1695.             return [
1696.                 checks.Error(
1697.                     "'ordering' and 'order_with_respect_to' cannot be used together.",
1698.                     obj=cls,
1699.                     id='models.E021',
1700.                 ),
1701.             ]
1702. 
1703.         if cls._meta.order_with_respect_to or not cls._meta.ordering:
1704.             return []
1705. 
1706.         if not isinstance(cls._meta.ordering, (list, tuple)):
1707.             return [
1708.                 checks.Error(
1709.                     "'ordering' must be a tuple or list (even if you want to order by only one field).",
1710.                     obj=cls,
1711.                     id='models.E014',
1712.                 )
1713.             ]
1714. 
1715.         errors = []
1716.         fields = cls._meta.ordering
1717. 
1718.         # Skip expressions and '?' fields.
1719.         fields = (f for f in fields if isinstance(f, str) and f != '?')
1720. 
1721.         # Convert "-field" to "field".
1722.         fields = ((f[1:] if f.startswith('-') else f) for f in fields)
1723. 
1724.         # Separate related fields and non-related fields.
1725.         _fields = []
1726.         related_fields = []
1727.         for f in fields:
1728.             if LOOKUP_SEP in f:
1729.                 related_fields.append(f)
1730.             else:
1731.                 _fields.append(f)
1732.         fields = _fields
1733. 
1734.         # Check related fields.
1735.         for field in related_fields:
1736.             _cls = cls
1737.             fld = None
1738.             for part in field.split(LOOKUP_SEP):
1739.                 try:
1740.                     # pk is an alias that won't be found by opts.get_field.
1741.                     if part == 'pk':
1742.                         fld = _cls._meta.pk
1743.                     else:
1744.                         fld = _cls._meta.get_field(part)
1745.                     if fld.is_relation:
1746.                         _cls = fld.get_path_info()[-1].to_opts.model
1747.                     else:
1748.                         _cls = None
1749.                 except (FieldDoesNotExist, AttributeError):
1750.                     if fld is None or fld.get_transform(part) is None:
1751.                         errors.append(
1752.                             checks.Error(
1753.                                 "'ordering' refers to the nonexistent field, "
1754.                                 "related field, or lookup '%s'." % field,
1755.                                 obj=cls,
1756.                                 id='models.E015',
1757.                             )
1758.                         )
1759. 
1760.         # Skip ordering on pk. This is always a valid order_by field
1761.         # but is an alias and therefore won't be found by opts.get_field.
1762.         fields = {f for f in fields if f != 'pk'}
1763. 
1764.         # Check for invalid or nonexistent fields in ordering.
1765.         invalid_fields = []
1766. 
1767.         # Any field name that is not present in field_names does not exist.
1768.         # Also, ordering by m2m fields is not allowed.
1769.         opts = cls._meta
1770.         valid_fields = set(chain.from_iterable(
1771.             (f.name, f.attname) if not (f.auto_created and not f.concrete) else (f.field.related_query_name(),)
1772.             for f in chain(opts.fields, opts.related_objects)
1773.         ))
1774. 
1775.         invalid_fields.extend(fields - valid_fields)
1776. 
1777.         for invalid_field in invalid_fields:
1778.             errors.append(
1779.                 checks.Error(
1780.                     "'ordering' refers to the nonexistent field, related "
1781.                     "field, or lookup '%s'." % invalid_field,
1782.                     obj=cls,
1783.                     id='models.E015',
1784.                 )
1785.             )
1786.         return errors
1787. 
1788.     @classmethod
1789.     def _check_long_column_names(cls, databases):
1790.         """
1791.         Check that any auto-generated column names are shorter than the limits
1792.         for each database in which the model will be created.
1793.         """
1794.         if not databases:
1795.             return []
1796.         errors = []
1797.         allowed_len = None
1798.         db_alias = None
1799. 
1800.         # Find the minimum max allowed length among all specified db_aliases.
1801.         for db in databases:
1802.             # skip databases where the model won't be created
1803.             if not router.allow_migrate_model(db, cls):
1804.                 continue
1805.             connection = connections[db]
1806.             max_name_length = connection.ops.max_name_length()
1807.             if max_name_length is None or connection.features.truncates_names:
1808.                 continue
1809.             else:
1810.                 if allowed_len is None:
1811.                     allowed_len = max_name_length
1812.                     db_alias = db
1813.                 elif max_name_length < allowed_len:
1814.                     allowed_len = max_name_length
1815.                     db_alias = db
1816. 
1817.         if allowed_len is None:
1818.             return errors
1819. 
1820.         for f in cls._meta.local_fields:
1821.             _, column_name = f.get_attname_column()
1822. 
1823.             # Check if auto-generated name for the field is too long
1824.             # for the database.
1825.             if f.db_column is None and column_name is not None and len(column_name) > allowed_len:
1826.                 errors.append(
1827.                     checks.Error(
1828.                         'Autogenerated column name too long for field "%s". '
1829.                         'Maximum length is "%s" for database "%s".'
1830.                         % (column_name, allowed_len, db_alias),
1831.                         hint="Set the column name manually using 'db_column'.",
1832.                         obj=cls,
1833.                         id='models.E018',
1834.                     )
1835.                 )
1836. 
1837.         for f in cls._meta.local_many_to_many:
1838.             # Skip nonexistent models.
1839.             if isinstance(f.remote_field.through, str):
1840.                 continue
1841. 
1842.             # Check if auto-generated name for the M2M field is too long
1843.             # for the database.
1844.             for m2m in f.remote_field.through._meta.local_fields:
1845.                 _, rel_name = m2m.get_attname_column()
1846.                 if m2m.db_column is None and rel_name is not None and len(rel_name) > allowed_len:
1847.                     errors.append(
1848.                         checks.Error(
1849.                             'Autogenerated column name too long for M2M field '
1850.                             '"%s". Maximum length is "%s" for database "%s".'
1851.                             % (rel_name, allowed_len, db_alias),
1852.                             hint=(
1853.                                 "Use 'through' to create a separate model for "
1854.                                 "M2M and then set column_name using 'db_column'."
1855.                             ),
1856.                             obj=cls,
1857.                             id='models.E019',
1858.                         )
1859.                     )
1860. 
1861.         return errors
1862. 
1863.     @classmethod
1864.     def _check_constraints(cls, databases):
1865.         errors = []
1866.         for db in databases:
1867.             if not router.allow_migrate_model(db, cls):
1868.                 continue
1869.             connection = connections[db]
1870.             if not (
1871.                 connection.features.supports_table_check_constraints or
1872.                 'supports_table_check_constraints' in cls._meta.required_db_features
1873.             ) and any(
1874.                 isinstance(constraint, CheckConstraint)
1875.                 for constraint in cls._meta.constraints
1876.             ):
1877.                 errors.append(
1878.                     checks.Warning(
1879.                         '%s does not support check constraints.' % connection.display_name,
1880.                         hint=(
1881.                             "A constraint won't be created. Silence this "
1882.                             "warning if you don't care about it."
1883.                         ),
1884.                         obj=cls,
1885.                         id='models.W027',
1886.                     )
1887.                 )
1888.             if not (
1889.                 connection.features.supports_partial_indexes or
1890.                 'supports_partial_indexes' in cls._meta.required_db_features
1891.             ) and any(
1892.                 isinstance(constraint, UniqueConstraint) and constraint.condition is not None
1893.                 for constraint in cls._meta.constraints
1894.             ):
1895.                 errors.append(
1896.                     checks.Warning(
1897.                         '%s does not support unique constraints with '
1898.                         'conditions.' % connection.display_name,
1899.                         hint=(
1900.                             "A constraint won't be created. Silence this "
1901.                             "warning if you don't care about it."
1902.                         ),
1903.                         obj=cls,
1904.                         id='models.W036',
1905.                     )
1906.                 )
1907.             if not (
1908.                 connection.features.supports_deferrable_unique_constraints or
1909.                 'supports_deferrable_unique_constraints' in cls._meta.required_db_features
1910.             ) and any(
1911.                 isinstance(constraint, UniqueConstraint) and constraint.deferrable is not None
1912.                 for constraint in cls._meta.constraints
1913.             ):
1914.                 errors.append(
1915.                     checks.Warning(
1916.                         '%s does not support deferrable unique constraints.'
1917.                         % connection.display_name,
1918.                         hint=(
1919.                             "A constraint won't be created. Silence this "
1920.                             "warning if you don't care about it."
1921.                         ),
1922.                         obj=cls,
1923.                         id='models.W038',
1924.                     )
1925.                 )
1926.         return errors
1927. 
1928. 
1929. ############################################
1930. # HELPER FUNCTIONS (CURRIED MODEL METHODS) #
1931. ############################################
1932. 
1933. # ORDERING METHODS #########################
1934. 
1935. def method_set_order(self, ordered_obj, id_list, using=None):
1936.     if using is None:
1937.         using = DEFAULT_DB_ALIAS
1938.     order_wrt = ordered_obj._meta.order_with_respect_to
1939.     filter_args = order_wrt.get_forward_related_filter(self)
1940.     ordered_obj.objects.db_manager(using).filter(**filter_args).bulk_update([
1941.         ordered_obj(pk=pk, _order=order) for order, pk in enumerate(id_list)
1942.     ], ['_order'])
1943. 
1944. 
1945. def method_get_order(self, ordered_obj):
1946.     order_wrt = ordered_obj._meta.order_with_respect_to
1947.     filter_args = order_wrt.get_forward_related_filter(self)
1948.     pk_name = ordered_obj._meta.pk.name
1949.     return ordered_obj.objects.filter(**filter_args).values_list(pk_name, flat=True)
1950. 
1951. 
1952. def make_foreign_order_accessors(model, related_model):
1953.     setattr(
1954.         related_model,
1955.         'get_%s_order' % model.__name__.lower(),
1956.         partialmethod(method_get_order, model)
1957.     )
1958.     setattr(
1959.         related_model,
1960.         'set_%s_order' % model.__name__.lower(),
1961.         partialmethod(method_set_order, model)
1962.     )
1963. 
1964. ########
1965. # MISC #
1966. ########
1967. 
1968. 
1969. def model_unpickle(model_id):
1970.     """Used to unpickle Model subclasses with deferred fields."""
1971.     if isinstance(model_id, tuple):
1972.         model = apps.get_model(*model_id)
1973.     else:
1974.         # Backwards compat - the model was cached directly in earlier versions.
1975.         model = model_id
1976.     return model.__new__(model)
1977. 
1978. 
1979. model_unpickle.__safe_for_unpickle__ = True


File: django/db/models/fields/__init__.py
Line number range: 1 - 2454
Content:
1. import collections.abc
2. import copy
3. import datetime
4. import decimal
5. import operator
6. import uuid
7. import warnings
8. from base64 import b64decode, b64encode
9. from functools import partialmethod, total_ordering
10. 
11. from django import forms
12. from django.apps import apps
13. from django.conf import settings
14. from django.core import checks, exceptions, validators
15. from django.db import connection, connections, router
16. from django.db.models.constants import LOOKUP_SEP
17. from django.db.models.query_utils import DeferredAttribute, RegisterLookupMixin
18. from django.utils import timezone
19. from django.utils.datastructures import DictWrapper
20. from django.utils.dateparse import (
21.     parse_date, parse_datetime, parse_duration, parse_time,
22. )
23. from django.utils.duration import duration_microseconds, duration_string
24. from django.utils.functional import Promise, cached_property
25. from django.utils.ipv6 import clean_ipv6_address
26. from django.utils.itercompat import is_iterable
27. from django.utils.text import capfirst
28. from django.utils.translation import gettext_lazy as _
29. 
30. __all__ = [
31.     'AutoField', 'BLANK_CHOICE_DASH', 'BigAutoField', 'BigIntegerField',
32.     'BinaryField', 'BooleanField', 'CharField', 'CommaSeparatedIntegerField',
33.     'DateField', 'DateTimeField', 'DecimalField', 'DurationField',
34.     'EmailField', 'Empty', 'Field', 'FilePathField', 'FloatField',
35.     'GenericIPAddressField', 'IPAddressField', 'IntegerField', 'NOT_PROVIDED',
36.     'NullBooleanField', 'PositiveBigIntegerField', 'PositiveIntegerField',
37.     'PositiveSmallIntegerField', 'SlugField', 'SmallAutoField',
38.     'SmallIntegerField', 'TextField', 'TimeField', 'URLField', 'UUIDField',
39. ]
40. 
41. 
42. class Empty:
43.     pass
44. 
45. 
46. class NOT_PROVIDED:
47.     pass
48. 
49. 
50. # The values to use for "blank" in SelectFields. Will be appended to the start
51. # of most "choices" lists.
52. BLANK_CHOICE_DASH = [("", "---------")]
53. 
54. 
55. def _load_field(app_label, model_name, field_name):
56.     return apps.get_model(app_label, model_name)._meta.get_field(field_name)
57. 
58. 
59. # A guide to Field parameters:
60. #
61. #   * name:      The name of the field specified in the model.
62. #   * attname:   The attribute to use on the model object. This is the same as
63. #                "name", except in the case of ForeignKeys, where "_id" is
64. #                appended.
65. #   * db_column: The db_column specified in the model (or None).
66. #   * column:    The database column for this field. This is the same as
67. #                "attname", except if db_column is specified.
68. #
69. # Code that introspects values, or does other dynamic things, should use
70. # attname. For example, this gets the primary key value of object "obj":
71. #
72. #     getattr(obj, opts.pk.attname)
73. 
74. def _empty(of_cls):
75.     new = Empty()
76.     new.__class__ = of_cls
77.     return new
78. 
79. 
80. def return_None():
81.     return None
82. 
83. 
84. @total_ordering
85. class Field(RegisterLookupMixin):
86.     """Base class for all field types"""
87. 
88.     # Designates whether empty strings fundamentally are allowed at the
89.     # database level.
90.     empty_strings_allowed = True
91.     empty_values = list(validators.EMPTY_VALUES)
92. 
93.     # These track each time a Field instance is created. Used to retain order.
94.     # The auto_creation_counter is used for fields that Django implicitly
95.     # creates, creation_counter is used for all user-specified fields.
96.     creation_counter = 0
97.     auto_creation_counter = -1
98.     default_validators = []  # Default set of validators
99.     default_error_messages = {
100.         'invalid_choice': _('Value %(value)r is not a valid choice.'),
101.         'null': _('This field cannot be null.'),
102.         'blank': _('This field cannot be blank.'),
103.         'unique': _('%(model_name)s with this %(field_label)s '
104.                     'already exists.'),
105.         # Translators: The 'lookup_type' is one of 'date', 'year' or 'month'.
106.         # Eg: "Title must be unique for pub_date year"
107.         'unique_for_date': _("%(field_label)s must be unique for "
108.                              "%(date_field_label)s %(lookup_type)s."),
109.     }
110.     system_check_deprecated_details = None
111.     system_check_removed_details = None
112. 
113.     # Field flags
114.     hidden = False
115. 
116.     many_to_many = None
117.     many_to_one = None
118.     one_to_many = None
119.     one_to_one = None
120.     related_model = None
121. 
122.     descriptor_class = DeferredAttribute
123. 
124.     # Generic field type description, usually overridden by subclasses
125.     def _description(self):
126.         return _('Field of type: %(field_type)s') % {
127.             'field_type': self.__class__.__name__
128.         }
129.     description = property(_description)
130. 
131.     def __init__(self, verbose_name=None, name=None, primary_key=False,
132.                  max_length=None, unique=False, blank=False, null=False,
133.                  db_index=False, rel=None, default=NOT_PROVIDED, editable=True,
134.                  serialize=True, unique_for_date=None, unique_for_month=None,
135.                  unique_for_year=None, choices=None, help_text='', db_column=None,
136.                  db_tablespace=None, auto_created=False, validators=(),
137.                  error_messages=None):
138.         self.name = name
139.         self.verbose_name = verbose_name  # May be set by set_attributes_from_name
140.         self._verbose_name = verbose_name  # Store original for deconstruction
141.         self.primary_key = primary_key
142.         self.max_length, self._unique = max_length, unique
143.         self.blank, self.null = blank, null
144.         self.remote_field = rel
145.         self.is_relation = self.remote_field is not None
146.         self.default = default
147.         self.editable = editable
148.         self.serialize = serialize
149.         self.unique_for_date = unique_for_date
150.         self.unique_for_month = unique_for_month
151.         self.unique_for_year = unique_for_year
152.         if isinstance(choices, collections.abc.Iterator):
153.             choices = list(choices)
154.         self.choices = choices
155.         self.help_text = help_text
156.         self.db_index = db_index
157.         self.db_column = db_column
158.         self._db_tablespace = db_tablespace
159.         self.auto_created = auto_created
160. 
161.         # Adjust the appropriate creation counter, and save our local copy.
162.         if auto_created:
163.             self.creation_counter = Field.auto_creation_counter
164.             Field.auto_creation_counter -= 1
165.         else:
166.             self.creation_counter = Field.creation_counter
167.             Field.creation_counter += 1
168. 
169.         self._validators = list(validators)  # Store for deconstruction later
170. 
171.         messages = {}
172.         for c in reversed(self.__class__.__mro__):
173.             messages.update(getattr(c, 'default_error_messages', {}))
174.         messages.update(error_messages or {})
175.         self._error_messages = error_messages  # Store for deconstruction later
176.         self.error_messages = messages
177. 
178.     def __str__(self):
179.         """
180.         Return "app_label.model_label.field_name" for fields attached to
181.         models.
182.         """
183.         if not hasattr(self, 'model'):
184.             return super().__str__()
185.         model = self.model
186.         app = model._meta.app_label
187.         return '%s.%s.%s' % (app, model._meta.object_name, self.name)
188. 
189.     def __repr__(self):
190.         """Display the module, class, and name of the field."""
191.         path = '%s.%s' % (self.__class__.__module__, self.__class__.__qualname__)
192.         name = getattr(self, 'name', None)
193.         if name is not None:
194.             return '<%s: %s>' % (path, name)
195.         return '<%s>' % path
196. 
197.     def check(self, **kwargs):
198.         return [
199.             *self._check_field_name(),
200.             *self._check_choices(),
201.             *self._check_db_index(),
202.             *self._check_null_allowed_for_primary_keys(),
203.             *self._check_backend_specific_checks(**kwargs),
204.             *self._check_validators(),
205.             *self._check_deprecation_details(),
206.         ]
207. 
208.     def _check_field_name(self):
209.         """
210.         Check if field name is valid, i.e. 1) does not end with an
211.         underscore, 2) does not contain "__" and 3) is not "pk".
212.         """
213.         if self.name.endswith('_'):
214.             return [
215.                 checks.Error(
216.                     'Field names must not end with an underscore.',
217.                     obj=self,
218.                     id='fields.E001',
219.                 )
220.             ]
221.         elif LOOKUP_SEP in self.name:
222.             return [
223.                 checks.Error(
224.                     'Field names must not contain "%s".' % LOOKUP_SEP,
225.                     obj=self,
226.                     id='fields.E002',
227.                 )
228.             ]
229.         elif self.name == 'pk':
230.             return [
231.                 checks.Error(
232.                     "'pk' is a reserved word that cannot be used as a field name.",
233.                     obj=self,
234.                     id='fields.E003',
235.                 )
236.             ]
237.         else:
238.             return []
239. 
240.     @classmethod
241.     def _choices_is_value(cls, value):
242.         return isinstance(value, (str, Promise)) or not is_iterable(value)
243. 
244.     def _check_choices(self):
245.         if not self.choices:
246.             return []
247. 
248.         if not is_iterable(self.choices) or isinstance(self.choices, str):
249.             return [
250.                 checks.Error(
251.                     "'choices' must be an iterable (e.g., a list or tuple).",
252.                     obj=self,
253.                     id='fields.E004',
254.                 )
255.             ]
256. 
257.         choice_max_length = 0
258.         # Expect [group_name, [value, display]]
259.         for choices_group in self.choices:
260.             try:
261.                 group_name, group_choices = choices_group
262.             except (TypeError, ValueError):
263.                 # Containing non-pairs
264.                 break
265.             try:
266.                 if not all(
267.                     self._choices_is_value(value) and self._choices_is_value(human_name)
268.                     for value, human_name in group_choices
269.                 ):
270.                     break
271.                 if self.max_length is not None and group_choices:
272.                     choice_max_length = max([
273.                         choice_max_length,
274.                         *(len(value) for value, _ in group_choices if isinstance(value, str)),
275.                     ])
276.             except (TypeError, ValueError):
277.                 # No groups, choices in the form [value, display]
278.                 value, human_name = group_name, group_choices
279.                 if not self._choices_is_value(value) or not self._choices_is_value(human_name):
280.                     break
281.                 if self.max_length is not None and isinstance(value, str):
282.                     choice_max_length = max(choice_max_length, len(value))
283. 
284.             # Special case: choices=['ab']
285.             if isinstance(choices_group, str):
286.                 break
287.         else:
288.             if self.max_length is not None and choice_max_length > self.max_length:
289.                 return [
290.                     checks.Error(
291.                         "'max_length' is too small to fit the longest value "
292.                         "in 'choices' (%d characters)." % choice_max_length,
293.                         obj=self,
294.                         id='fields.E009',
295.                     ),
296.                 ]
297.             return []
298. 
299.         return [
300.             checks.Error(
301.                 "'choices' must be an iterable containing "
302.                 "(actual value, human readable name) tuples.",
303.                 obj=self,
304.                 id='fields.E005',
305.             )
306.         ]
307. 
308.     def _check_db_index(self):
309.         if self.db_index not in (None, True, False):
310.             return [
311.                 checks.Error(
312.                     "'db_index' must be None, True or False.",
313.                     obj=self,
314.                     id='fields.E006',
315.                 )
316.             ]
317.         else:
318.             return []
319. 
320.     def _check_null_allowed_for_primary_keys(self):
321.         if (self.primary_key and self.null and
322.                 not connection.features.interprets_empty_strings_as_nulls):
323.             # We cannot reliably check this for backends like Oracle which
324.             # consider NULL and '' to be equal (and thus set up
325.             # character-based fields a little differently).
326.             return [
327.                 checks.Error(
328.                     'Primary keys must not have null=True.',
329.                     hint=('Set null=False on the field, or '
330.                           'remove primary_key=True argument.'),
331.                     obj=self,
332.                     id='fields.E007',
333.                 )
334.             ]
335.         else:
336.             return []
337. 
338.     def _check_backend_specific_checks(self, databases=None, **kwargs):
339.         if databases is None:
340.             return []
341.         app_label = self.model._meta.app_label
342.         errors = []
343.         for alias in databases:
344.             if router.allow_migrate(alias, app_label, model_name=self.model._meta.model_name):
345.                 errors.extend(connections[alias].validation.check_field(self, **kwargs))
346.         return errors
347. 
348.     def _check_validators(self):
349.         errors = []
350.         for i, validator in enumerate(self.validators):
351.             if not callable(validator):
352.                 errors.append(
353.                     checks.Error(
354.                         "All 'validators' must be callable.",
355.                         hint=(
356.                             "validators[{i}] ({repr}) isn't a function or "
357.                             "instance of a validator class.".format(
358.                                 i=i, repr=repr(validator),
359.                             )
360.                         ),
361.                         obj=self,
362.                         id='fields.E008',
363.                     )
364.                 )
365.         return errors
366. 
367.     def _check_deprecation_details(self):
368.         if self.system_check_removed_details is not None:
369.             return [
370.                 checks.Error(
371.                     self.system_check_removed_details.get(
372.                         'msg',
373.                         '%s has been removed except for support in historical '
374.                         'migrations.' % self.__class__.__name__
375.                     ),
376.                     hint=self.system_check_removed_details.get('hint'),
377.                     obj=self,
378.                     id=self.system_check_removed_details.get('id', 'fields.EXXX'),
379.                 )
380.             ]
381.         elif self.system_check_deprecated_details is not None:
382.             return [
383.                 checks.Warning(
384.                     self.system_check_deprecated_details.get(
385.                         'msg',
386.                         '%s has been deprecated.' % self.__class__.__name__
387.                     ),
388.                     hint=self.system_check_deprecated_details.get('hint'),
389.                     obj=self,
390.                     id=self.system_check_deprecated_details.get('id', 'fields.WXXX'),
391.                 )
392.             ]
393.         return []
394. 
395.     def get_col(self, alias, output_field=None):
396.         if output_field is None:
397.             output_field = self
398.         if alias != self.model._meta.db_table or output_field != self:
399.             from django.db.models.expressions import Col
400.             return Col(alias, self, output_field)
401.         else:
402.             return self.cached_col
403. 
404.     @cached_property
405.     def cached_col(self):
406.         from django.db.models.expressions import Col
407.         return Col(self.model._meta.db_table, self)
408. 
409.     def select_format(self, compiler, sql, params):
410.         """
411.         Custom format for select clauses. For example, GIS columns need to be
412.         selected as AsText(table.col) on MySQL as the table.col data can't be
413.         used by Django.
414.         """
415.         return sql, params
416. 
417.     def deconstruct(self):
418.         """
419.         Return enough information to recreate the field as a 4-tuple:
420. 
421.          * The name of the field on the model, if contribute_to_class() has
422.            been run.
423.          * The import path of the field, including the class:e.g.
424.            django.db.models.IntegerField This should be the most portable
425.            version, so less specific may be better.
426.          * A list of positional arguments.
427.          * A dict of keyword arguments.
428. 
429.         Note that the positional or keyword arguments must contain values of
430.         the following types (including inner values of collection types):
431. 
432.          * None, bool, str, int, float, complex, set, frozenset, list, tuple,
433.            dict
434.          * UUID
435.          * datetime.datetime (naive), datetime.date
436.          * top-level classes, top-level functions - will be referenced by their
437.            full import path
438.          * Storage instances - these have their own deconstruct() method
439. 
440.         This is because the values here must be serialized into a text format
441.         (possibly new Python code, possibly JSON) and these are the only types
442.         with encoding handlers defined.
443. 
444.         There's no need to return the exact way the field was instantiated this
445.         time, just ensure that the resulting field is the same - prefer keyword
446.         arguments over positional ones, and omit parameters with their default
447.         values.
448.         """
449.         # Short-form way of fetching all the default parameters
450.         keywords = {}
451.         possibles = {
452.             "verbose_name": None,
453.             "primary_key": False,
454.             "max_length": None,
455.             "unique": False,
456.             "blank": False,
457.             "null": False,
458.             "db_index": False,
459.             "default": NOT_PROVIDED,
460.             "editable": True,
461.             "serialize": True,
462.             "unique_for_date": None,
463.             "unique_for_month": None,
464.             "unique_for_year": None,
465.             "choices": None,
466.             "help_text": '',
467.             "db_column": None,
468.             "db_tablespace": None,
469.             "auto_created": False,
470.             "validators": [],
471.             "error_messages": None,
472.         }
473.         attr_overrides = {
474.             "unique": "_unique",
475.             "error_messages": "_error_messages",
476.             "validators": "_validators",
477.             "verbose_name": "_verbose_name",
478.             "db_tablespace": "_db_tablespace",
479.         }
480.         equals_comparison = {"choices", "validators"}
481.         for name, default in possibles.items():
482.             value = getattr(self, attr_overrides.get(name, name))
483.             # Unroll anything iterable for choices into a concrete list
484.             if name == "choices" and isinstance(value, collections.abc.Iterable):
485.                 value = list(value)
486.             # Do correct kind of comparison
487.             if name in equals_comparison:
488.                 if value != default:
489.                     keywords[name] = value
490.             else:
491.                 if value is not default:
492.                     keywords[name] = value
493.         # Work out path - we shorten it for known Django core fields
494.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
495.         if path.startswith("django.db.models.fields.related"):
496.             path = path.replace("django.db.models.fields.related", "django.db.models")
497.         elif path.startswith("django.db.models.fields.files"):
498.             path = path.replace("django.db.models.fields.files", "django.db.models")
499.         elif path.startswith("django.db.models.fields.proxy"):
500.             path = path.replace("django.db.models.fields.proxy", "django.db.models")
501.         elif path.startswith("django.db.models.fields"):
502.             path = path.replace("django.db.models.fields", "django.db.models")
503.         # Return basic info - other fields should override this.
504.         return (self.name, path, [], keywords)
505. 
506.     def clone(self):
507.         """
508.         Uses deconstruct() to clone a new copy of this Field.
509.         Will not preserve any class attachments/attribute names.
510.         """
511.         name, path, args, kwargs = self.deconstruct()
512.         return self.__class__(*args, **kwargs)
513. 
514.     def __eq__(self, other):
515.         # Needed for @total_ordering
516.         if isinstance(other, Field):
517.             return self.creation_counter == other.creation_counter
518.         return NotImplemented
519. 
520.     def __lt__(self, other):
521.         # This is needed because bisect does not take a comparison function.
522.         if isinstance(other, Field):
523.             return self.creation_counter < other.creation_counter
524.         return NotImplemented
525. 
526.     def __hash__(self):
527.         return hash(self.creation_counter)
528. 
529.     def __deepcopy__(self, memodict):
530.         # We don't have to deepcopy very much here, since most things are not
531.         # intended to be altered after initial creation.
532.         obj = copy.copy(self)
533.         if self.remote_field:
534.             obj.remote_field = copy.copy(self.remote_field)
535.             if hasattr(self.remote_field, 'field') and self.remote_field.field is self:
536.                 obj.remote_field.field = obj
537.         memodict[id(self)] = obj
538.         return obj
539. 
540.     def __copy__(self):
541.         # We need to avoid hitting __reduce__, so define this
542.         # slightly weird copy construct.
543.         obj = Empty()
544.         obj.__class__ = self.__class__
545.         obj.__dict__ = self.__dict__.copy()
546.         return obj
547. 
548.     def __reduce__(self):
549.         """
550.         Pickling should return the model._meta.fields instance of the field,
551.         not a new copy of that field. So, use the app registry to load the
552.         model and then the field back.
553.         """
554.         if not hasattr(self, 'model'):
555.             # Fields are sometimes used without attaching them to models (for
556.             # example in aggregation). In this case give back a plain field
557.             # instance. The code below will create a new empty instance of
558.             # class self.__class__, then update its dict with self.__dict__
559.             # values - so, this is very close to normal pickle.
560.             state = self.__dict__.copy()
561.             # The _get_default cached_property can't be pickled due to lambda
562.             # usage.
563.             state.pop('_get_default', None)
564.             return _empty, (self.__class__,), state
565.         return _load_field, (self.model._meta.app_label, self.model._meta.object_name,
566.                              self.name)
567. 
568.     def get_pk_value_on_save(self, instance):
569.         """
570.         Hook to generate new PK values on save. This method is called when
571.         saving instances with no primary key value set. If this method returns
572.         something else than None, then the returned value is used when saving
573.         the new instance.
574.         """
575.         if self.default:
576.             return self.get_default()
577.         return None
578. 
579.     def to_python(self, value):
580.         """
581.         Convert the input value into the expected Python data type, raising
582.         django.core.exceptions.ValidationError if the data can't be converted.
583.         Return the converted value. Subclasses should override this.
584.         """
585.         return value
586. 
587.     @cached_property
588.     def validators(self):
589.         """
590.         Some validators can't be created at field initialization time.
591.         This method provides a way to delay their creation until required.
592.         """
593.         return [*self.default_validators, *self._validators]
594. 
595.     def run_validators(self, value):
596.         if value in self.empty_values:
597.             return
598. 
599.         errors = []
600.         for v in self.validators:
601.             try:
602.                 v(value)
603.             except exceptions.ValidationError as e:
604.                 if hasattr(e, 'code') and e.code in self.error_messages:
605.                     e.message = self.error_messages[e.code]
606.                 errors.extend(e.error_list)
607. 
608.         if errors:
609.             raise exceptions.ValidationError(errors)
610. 
611.     def validate(self, value, model_instance):
612.         """
613.         Validate value and raise ValidationError if necessary. Subclasses
614.         should override this to provide validation logic.
615.         """
616.         if not self.editable:
617.             # Skip validation for non-editable fields.
618.             return
619. 
620.         if self.choices is not None and value not in self.empty_values:
621.             for option_key, option_value in self.choices:
622.                 if isinstance(option_value, (list, tuple)):
623.                     # This is an optgroup, so look inside the group for
624.                     # options.
625.                     for optgroup_key, optgroup_value in option_value:
626.                         if value == optgroup_key:
627.                             return
628.                 elif value == option_key:
629.                     return
630.             raise exceptions.ValidationError(
631.                 self.error_messages['invalid_choice'],
632.                 code='invalid_choice',
633.                 params={'value': value},
634.             )
635. 
636.         if value is None and not self.null:
637.             raise exceptions.ValidationError(self.error_messages['null'], code='null')
638. 
639.         if not self.blank and value in self.empty_values:
640.             raise exceptions.ValidationError(self.error_messages['blank'], code='blank')
641. 
642.     def clean(self, value, model_instance):
643.         """
644.         Convert the value's type and run validation. Validation errors
645.         from to_python() and validate() are propagated. Return the correct
646.         value if no error is raised.
647.         """
648.         value = self.to_python(value)
649.         self.validate(value, model_instance)
650.         self.run_validators(value)
651.         return value
652. 
653.     def db_type_parameters(self, connection):
654.         return DictWrapper(self.__dict__, connection.ops.quote_name, 'qn_')
655. 
656.     def db_check(self, connection):
657.         """
658.         Return the database column check constraint for this field, for the
659.         provided connection. Works the same way as db_type() for the case that
660.         get_internal_type() does not map to a preexisting model field.
661.         """
662.         data = self.db_type_parameters(connection)
663.         try:
664.             return connection.data_type_check_constraints[self.get_internal_type()] % data
665.         except KeyError:
666.             return None
667. 
668.     def db_type(self, connection):
669.         """
670.         Return the database column data type for this field, for the provided
671.         connection.
672.         """
673.         # The default implementation of this method looks at the
674.         # backend-specific data_types dictionary, looking up the field by its
675.         # "internal type".
676.         #
677.         # A Field class can implement the get_internal_type() method to specify
678.         # which *preexisting* Django Field class it's most similar to -- i.e.,
679.         # a custom field might be represented by a TEXT column type, which is
680.         # the same as the TextField Django field type, which means the custom
681.         # field's get_internal_type() returns 'TextField'.
682.         #
683.         # But the limitation of the get_internal_type() / data_types approach
684.         # is that it cannot handle database column types that aren't already
685.         # mapped to one of the built-in Django field types. In this case, you
686.         # can implement db_type() instead of get_internal_type() to specify
687.         # exactly which wacky database column type you want to use.
688.         data = self.db_type_parameters(connection)
689.         try:
690.             return connection.data_types[self.get_internal_type()] % data
691.         except KeyError:
692.             return None
693. 
694.     def rel_db_type(self, connection):
695.         """
696.         Return the data type that a related field pointing to this field should
697.         use. For example, this method is called by ForeignKey and OneToOneField
698.         to determine its data type.
699.         """
700.         return self.db_type(connection)
701. 
702.     def cast_db_type(self, connection):
703.         """Return the data type to use in the Cast() function."""
704.         db_type = connection.ops.cast_data_types.get(self.get_internal_type())
705.         if db_type:
706.             return db_type % self.db_type_parameters(connection)
707.         return self.db_type(connection)
708. 
709.     def db_parameters(self, connection):
710.         """
711.         Extension of db_type(), providing a range of different return values
712.         (type, checks). This will look at db_type(), allowing custom model
713.         fields to override it.
714.         """
715.         type_string = self.db_type(connection)
716.         check_string = self.db_check(connection)
717.         return {
718.             "type": type_string,
719.             "check": check_string,
720.         }
721. 
722.     def db_type_suffix(self, connection):
723.         return connection.data_types_suffix.get(self.get_internal_type())
724. 
725.     def get_db_converters(self, connection):
726.         if hasattr(self, 'from_db_value'):
727.             return [self.from_db_value]
728.         return []
729. 
730.     @property
731.     def unique(self):
732.         return self._unique or self.primary_key
733. 
734.     @property
735.     def db_tablespace(self):
736.         return self._db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
737. 
738.     @property
739.     def db_returning(self):
740.         """
741.         Private API intended only to be used by Django itself. Currently only
742.         the PostgreSQL backend supports returning multiple fields on a model.
743.         """
744.         return False
745. 
746.     def set_attributes_from_name(self, name):
747.         self.name = self.name or name
748.         self.attname, self.column = self.get_attname_column()
749.         self.concrete = self.column is not None
750.         if self.verbose_name is None and self.name:
751.             self.verbose_name = self.name.replace('_', ' ')
752. 
753.     def contribute_to_class(self, cls, name, private_only=False):
754.         """
755.         Register the field with the model class it belongs to.
756. 
757.         If private_only is True, create a separate instance of this field
758.         for every subclass of cls, even if cls is not an abstract model.
759.         """
760.         self.set_attributes_from_name(name)
761.         self.model = cls
762.         cls._meta.add_field(self, private=private_only)
763.         if self.column:
764.             # Don't override classmethods with the descriptor. This means that
765.             # if you have a classmethod and a field with the same name, then
766.             # such fields can't be deferred (we don't have a check for this).
767.             if not getattr(cls, self.attname, None):
768.                 setattr(cls, self.attname, self.descriptor_class(self))
769.         if self.choices is not None:
770.             # Don't override a get_FOO_display() method defined explicitly on
771.             # this class, but don't check methods derived from inheritance, to
772.             # allow overriding inherited choices. For more complex inheritance
773.             # structures users should override contribute_to_class().
774.             if 'get_%s_display' % self.name not in cls.__dict__:
775.                 setattr(
776.                     cls,
777.                     'get_%s_display' % self.name,
778.                     partialmethod(cls._get_FIELD_display, field=self),
779.                 )
780. 
781.     def get_filter_kwargs_for_object(self, obj):
782.         """
783.         Return a dict that when passed as kwargs to self.model.filter(), would
784.         yield all instances having the same value for this field as obj has.
785.         """
786.         return {self.name: getattr(obj, self.attname)}
787. 
788.     def get_attname(self):
789.         return self.name
790. 
791.     def get_attname_column(self):
792.         attname = self.get_attname()
793.         column = self.db_column or attname
794.         return attname, column
795. 
796.     def get_internal_type(self):
797.         return self.__class__.__name__
798. 
799.     def pre_save(self, model_instance, add):
800.         """Return field's value just before saving."""
801.         return getattr(model_instance, self.attname)
802. 
803.     def get_prep_value(self, value):
804.         """Perform preliminary non-db specific value checks and conversions."""
805.         if isinstance(value, Promise):
806.             value = value._proxy____cast()
807.         return value
808. 
809.     def get_db_prep_value(self, value, connection, prepared=False):
810.         """
811.         Return field's value prepared for interacting with the database backend.
812. 
813.         Used by the default implementations of get_db_prep_save().
814.         """
815.         if not prepared:
816.             value = self.get_prep_value(value)
817.         return value
818. 
819.     def get_db_prep_save(self, value, connection):
820.         """Return field's value prepared for saving into a database."""
821.         return self.get_db_prep_value(value, connection=connection, prepared=False)
822. 
823.     def has_default(self):
824.         """Return a boolean of whether this field has a default value."""
825.         return self.default is not NOT_PROVIDED
826. 
827.     def get_default(self):
828.         """Return the default value for this field."""
829.         return self._get_default()
830. 
831.     @cached_property
832.     def _get_default(self):
833.         if self.has_default():
834.             if callable(self.default):
835.                 return self.default
836.             return lambda: self.default
837. 
838.         if not self.empty_strings_allowed or self.null and not connection.features.interprets_empty_strings_as_nulls:
839.             return return_None
840.         return str  # return empty string
841. 
842.     def get_choices(self, include_blank=True, blank_choice=BLANK_CHOICE_DASH, limit_choices_to=None, ordering=()):
843.         """
844.         Return choices with a default blank choices included, for use
845.         as <select> choices for this field.
846.         """
847.         if self.choices is not None:
848.             choices = list(self.choices)
849.             if include_blank:
850.                 blank_defined = any(choice in ('', None) for choice, _ in self.flatchoices)
851.                 if not blank_defined:
852.                     choices = blank_choice + choices
853.             return choices
854.         rel_model = self.remote_field.model
855.         limit_choices_to = limit_choices_to or self.get_limit_choices_to()
856.         choice_func = operator.attrgetter(
857.             self.remote_field.get_related_field().attname
858.             if hasattr(self.remote_field, 'get_related_field')
859.             else 'pk'
860.         )
861.         qs = rel_model._default_manager.complex_filter(limit_choices_to)
862.         if ordering:
863.             qs = qs.order_by(*ordering)
864.         return (blank_choice if include_blank else []) + [
865.             (choice_func(x), str(x)) for x in qs
866.         ]
867. 
868.     def value_to_string(self, obj):
869.         """
870.         Return a string value of this field from the passed obj.
871.         This is used by the serialization framework.
872.         """
873.         return str(self.value_from_object(obj))
874. 
875.     def _get_flatchoices(self):
876.         """Flattened version of choices tuple."""
877.         if self.choices is None:
878.             return []
879.         flat = []
880.         for choice, value in self.choices:
881.             if isinstance(value, (list, tuple)):
882.                 flat.extend(value)
883.             else:
884.                 flat.append((choice, value))
885.         return flat
886.     flatchoices = property(_get_flatchoices)
887. 
888.     def save_form_data(self, instance, data):
889.         setattr(instance, self.name, data)
890. 
891.     def formfield(self, form_class=None, choices_form_class=None, **kwargs):
892.         """Return a django.forms.Field instance for this field."""
893.         defaults = {
894.             'required': not self.blank,
895.             'label': capfirst(self.verbose_name),
896.             'help_text': self.help_text,
897.         }
898.         if self.has_default():
899.             if callable(self.default):
900.                 defaults['initial'] = self.default
901.                 defaults['show_hidden_initial'] = True
902.             else:
903.                 defaults['initial'] = self.get_default()
904.         if self.choices is not None:
905.             # Fields with choices get special treatment.
906.             include_blank = (self.blank or
907.                              not (self.has_default() or 'initial' in kwargs))
908.             defaults['choices'] = self.get_choices(include_blank=include_blank)
909.             defaults['coerce'] = self.to_python
910.             if self.null:
911.                 defaults['empty_value'] = None
912.             if choices_form_class is not None:
913.                 form_class = choices_form_class
914.             else:
915.                 form_class = forms.TypedChoiceField
916.             # Many of the subclass-specific formfield arguments (min_value,
917.             # max_value) don't apply for choice fields, so be sure to only pass
918.             # the values that TypedChoiceField will understand.
919.             for k in list(kwargs):
920.                 if k not in ('coerce', 'empty_value', 'choices', 'required',
921.                              'widget', 'label', 'initial', 'help_text',
922.                              'error_messages', 'show_hidden_initial', 'disabled'):
923.                     del kwargs[k]
924.         defaults.update(kwargs)
925.         if form_class is None:
926.             form_class = forms.CharField
927.         return form_class(**defaults)
928. 
929.     def value_from_object(self, obj):
930.         """Return the value of this field in the given model instance."""
931.         return getattr(obj, self.attname)
932. 
933. 
934. class BooleanField(Field):
935.     empty_strings_allowed = False
936.     default_error_messages = {
937.         'invalid': _('“%(value)s” value must be either True or False.'),
938.         'invalid_nullable': _('“%(value)s” value must be either True, False, or None.'),
939.     }
940.     description = _("Boolean (Either True or False)")
941. 
942.     def get_internal_type(self):
943.         return "BooleanField"
944. 
945.     def to_python(self, value):
946.         if self.null and value in self.empty_values:
947.             return None
948.         if value in (True, False):
949.             # 1/0 are equal to True/False. bool() converts former to latter.
950.             return bool(value)
951.         if value in ('t', 'True', '1'):
952.             return True
953.         if value in ('f', 'False', '0'):
954.             return False
955.         raise exceptions.ValidationError(
956.             self.error_messages['invalid_nullable' if self.null else 'invalid'],
957.             code='invalid',
958.             params={'value': value},
959.         )
960. 
961.     def get_prep_value(self, value):
962.         value = super().get_prep_value(value)
963.         if value is None:
964.             return None
965.         return self.to_python(value)
966. 
967.     def formfield(self, **kwargs):
968.         if self.choices is not None:
969.             include_blank = not (self.has_default() or 'initial' in kwargs)
970.             defaults = {'choices': self.get_choices(include_blank=include_blank)}
971.         else:
972.             form_class = forms.NullBooleanField if self.null else forms.BooleanField
973.             # In HTML checkboxes, 'required' means "must be checked" which is
974.             # different from the choices case ("must select some value").
975.             # required=False allows unchecked checkboxes.
976.             defaults = {'form_class': form_class, 'required': False}
977.         return super().formfield(**{**defaults, **kwargs})
978. 
979. 
980. class CharField(Field):
981.     description = _("String (up to %(max_length)s)")
982. 
983.     def __init__(self, *args, **kwargs):
984.         super().__init__(*args, **kwargs)
985.         self.validators.append(validators.MaxLengthValidator(self.max_length))
986. 
987.     def check(self, **kwargs):
988.         return [
989.             *super().check(**kwargs),
990.             *self._check_max_length_attribute(**kwargs),
991.         ]
992. 
993.     def _check_max_length_attribute(self, **kwargs):
994.         if self.max_length is None:
995.             return [
996.                 checks.Error(
997.                     "CharFields must define a 'max_length' attribute.",
998.                     obj=self,
999.                     id='fields.E120',
1000.                 )
1001.             ]
1002.         elif (not isinstance(self.max_length, int) or isinstance(self.max_length, bool) or
1003.                 self.max_length <= 0):
1004.             return [
1005.                 checks.Error(
1006.                     "'max_length' must be a positive integer.",
1007.                     obj=self,
1008.                     id='fields.E121',
1009.                 )
1010.             ]
1011.         else:
1012.             return []
1013. 
1014.     def cast_db_type(self, connection):
1015.         if self.max_length is None:
1016.             return connection.ops.cast_char_field_without_max_length
1017.         return super().cast_db_type(connection)
1018. 
1019.     def get_internal_type(self):
1020.         return "CharField"
1021. 
1022.     def to_python(self, value):
1023.         if isinstance(value, str) or value is None:
1024.             return value
1025.         return str(value)
1026. 
1027.     def get_prep_value(self, value):
1028.         value = super().get_prep_value(value)
1029.         return self.to_python(value)
1030. 
1031.     def formfield(self, **kwargs):
1032.         # Passing max_length to forms.CharField means that the value's length
1033.         # will be validated twice. This is considered acceptable since we want
1034.         # the value in the form field (to pass into widget for example).
1035.         defaults = {'max_length': self.max_length}
1036.         # TODO: Handle multiple backends with different feature flags.
1037.         if self.null and not connection.features.interprets_empty_strings_as_nulls:
1038.             defaults['empty_value'] = None
1039.         defaults.update(kwargs)
1040.         return super().formfield(**defaults)
1041. 
1042. 
1043. class CommaSeparatedIntegerField(CharField):
1044.     default_validators = [validators.validate_comma_separated_integer_list]
1045.     description = _("Comma-separated integers")
1046.     system_check_removed_details = {
1047.         'msg': (
1048.             'CommaSeparatedIntegerField is removed except for support in '
1049.             'historical migrations.'
1050.         ),
1051.         'hint': (
1052.             'Use CharField(validators=[validate_comma_separated_integer_list]) '
1053.             'instead.'
1054.         ),
1055.         'id': 'fields.E901',
1056.     }
1057. 
1058. 
1059. class DateTimeCheckMixin:
1060. 
1061.     def check(self, **kwargs):
1062.         return [
1063.             *super().check(**kwargs),
1064.             *self._check_mutually_exclusive_options(),
1065.             *self._check_fix_default_value(),
1066.         ]
1067. 
1068.     def _check_mutually_exclusive_options(self):
1069.         # auto_now, auto_now_add, and default are mutually exclusive
1070.         # options. The use of more than one of these options together
1071.         # will trigger an Error
1072.         mutually_exclusive_options = [self.auto_now_add, self.auto_now, self.has_default()]
1073.         enabled_options = [option not in (None, False) for option in mutually_exclusive_options].count(True)
1074.         if enabled_options > 1:
1075.             return [
1076.                 checks.Error(
1077.                     "The options auto_now, auto_now_add, and default "
1078.                     "are mutually exclusive. Only one of these options "
1079.                     "may be present.",
1080.                     obj=self,
1081.                     id='fields.E160',
1082.                 )
1083.             ]
1084.         else:
1085.             return []
1086. 
1087.     def _check_fix_default_value(self):
1088.         return []
1089. 
1090. 
1091. class DateField(DateTimeCheckMixin, Field):
1092.     empty_strings_allowed = False
1093.     default_error_messages = {
1094.         'invalid': _('“%(value)s” value has an invalid date format. It must be '
1095.                      'in YYYY-MM-DD format.'),
1096.         'invalid_date': _('“%(value)s” value has the correct format (YYYY-MM-DD) '
1097.                           'but it is an invalid date.'),
1098.     }
1099.     description = _("Date (without time)")
1100. 
1101.     def __init__(self, verbose_name=None, name=None, auto_now=False,
1102.                  auto_now_add=False, **kwargs):
1103.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
1104.         if auto_now or auto_now_add:
1105.             kwargs['editable'] = False
1106.             kwargs['blank'] = True
1107.         super().__init__(verbose_name, name, **kwargs)
1108. 
1109.     def _check_fix_default_value(self):
1110.         """
1111.         Warn that using an actual date or datetime value is probably wrong;
1112.         it's only evaluated on server startup.
1113.         """
1114.         if not self.has_default():
1115.             return []
1116. 
1117.         now = timezone.now()
1118.         if not timezone.is_naive(now):
1119.             now = timezone.make_naive(now, timezone.utc)
1120.         value = self.default
1121.         if isinstance(value, datetime.datetime):
1122.             if not timezone.is_naive(value):
1123.                 value = timezone.make_naive(value, timezone.utc)
1124.             value = value.date()
1125.         elif isinstance(value, datetime.date):
1126.             # Nothing to do, as dates don't have tz information
1127.             pass
1128.         else:
1129.             # No explicit date / datetime value -- no checks necessary
1130.             return []
1131.         offset = datetime.timedelta(days=1)
1132.         lower = (now - offset).date()
1133.         upper = (now + offset).date()
1134.         if lower <= value <= upper:
1135.             return [
1136.                 checks.Warning(
1137.                     'Fixed default value provided.',
1138.                     hint='It seems you set a fixed date / time / datetime '
1139.                          'value as default for this field. This may not be '
1140.                          'what you want. If you want to have the current date '
1141.                          'as default, use `django.utils.timezone.now`',
1142.                     obj=self,
1143.                     id='fields.W161',
1144.                 )
1145.             ]
1146. 
1147.         return []
1148. 
1149.     def deconstruct(self):
1150.         name, path, args, kwargs = super().deconstruct()
1151.         if self.auto_now:
1152.             kwargs['auto_now'] = True
1153.         if self.auto_now_add:
1154.             kwargs['auto_now_add'] = True
1155.         if self.auto_now or self.auto_now_add:
1156.             del kwargs['editable']
1157.             del kwargs['blank']
1158.         return name, path, args, kwargs
1159. 
1160.     def get_internal_type(self):
1161.         return "DateField"
1162. 
1163.     def to_python(self, value):
1164.         if value is None:
1165.             return value
1166.         if isinstance(value, datetime.datetime):
1167.             if settings.USE_TZ and timezone.is_aware(value):
1168.                 # Convert aware datetimes to the default time zone
1169.                 # before casting them to dates (#17742).
1170.                 default_timezone = timezone.get_default_timezone()
1171.                 value = timezone.make_naive(value, default_timezone)
1172.             return value.date()
1173.         if isinstance(value, datetime.date):
1174.             return value
1175. 
1176.         try:
1177.             parsed = parse_date(value)
1178.             if parsed is not None:
1179.                 return parsed
1180.         except ValueError:
1181.             raise exceptions.ValidationError(
1182.                 self.error_messages['invalid_date'],
1183.                 code='invalid_date',
1184.                 params={'value': value},
1185.             )
1186. 
1187.         raise exceptions.ValidationError(
1188.             self.error_messages['invalid'],
1189.             code='invalid',
1190.             params={'value': value},
1191.         )
1192. 
1193.     def pre_save(self, model_instance, add):
1194.         if self.auto_now or (self.auto_now_add and add):
1195.             value = datetime.date.today()
1196.             setattr(model_instance, self.attname, value)
1197.             return value
1198.         else:
1199.             return super().pre_save(model_instance, add)
1200. 
1201.     def contribute_to_class(self, cls, name, **kwargs):
1202.         super().contribute_to_class(cls, name, **kwargs)
1203.         if not self.null:
1204.             setattr(
1205.                 cls, 'get_next_by_%s' % self.name,
1206.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=True)
1207.             )
1208.             setattr(
1209.                 cls, 'get_previous_by_%s' % self.name,
1210.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=False)
1211.             )
1212. 
1213.     def get_prep_value(self, value):
1214.         value = super().get_prep_value(value)
1215.         return self.to_python(value)
1216. 
1217.     def get_db_prep_value(self, value, connection, prepared=False):
1218.         # Casts dates into the format expected by the backend
1219.         if not prepared:
1220.             value = self.get_prep_value(value)
1221.         return connection.ops.adapt_datefield_value(value)
1222. 
1223.     def value_to_string(self, obj):
1224.         val = self.value_from_object(obj)
1225.         return '' if val is None else val.isoformat()
1226. 
1227.     def formfield(self, **kwargs):
1228.         return super().formfield(**{
1229.             'form_class': forms.DateField,
1230.             **kwargs,
1231.         })
1232. 
1233. 
1234. class DateTimeField(DateField):
1235.     empty_strings_allowed = False
1236.     default_error_messages = {
1237.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1238.                      'YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format.'),
1239.         'invalid_date': _("“%(value)s” value has the correct format "
1240.                           "(YYYY-MM-DD) but it is an invalid date."),
1241.         'invalid_datetime': _('“%(value)s” value has the correct format '
1242.                               '(YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]) '
1243.                               'but it is an invalid date/time.'),
1244.     }
1245.     description = _("Date (with time)")
1246. 
1247.     # __init__ is inherited from DateField
1248. 
1249.     def _check_fix_default_value(self):
1250.         """
1251.         Warn that using an actual date or datetime value is probably wrong;
1252.         it's only evaluated on server startup.
1253.         """
1254.         if not self.has_default():
1255.             return []
1256. 
1257.         now = timezone.now()
1258.         if not timezone.is_naive(now):
1259.             now = timezone.make_naive(now, timezone.utc)
1260.         value = self.default
1261.         if isinstance(value, datetime.datetime):
1262.             second_offset = datetime.timedelta(seconds=10)
1263.             lower = now - second_offset
1264.             upper = now + second_offset
1265.             if timezone.is_aware(value):
1266.                 value = timezone.make_naive(value, timezone.utc)
1267.         elif isinstance(value, datetime.date):
1268.             second_offset = datetime.timedelta(seconds=10)
1269.             lower = now - second_offset
1270.             lower = datetime.datetime(lower.year, lower.month, lower.day)
1271.             upper = now + second_offset
1272.             upper = datetime.datetime(upper.year, upper.month, upper.day)
1273.             value = datetime.datetime(value.year, value.month, value.day)
1274.         else:
1275.             # No explicit date / datetime value -- no checks necessary
1276.             return []
1277.         if lower <= value <= upper:
1278.             return [
1279.                 checks.Warning(
1280.                     'Fixed default value provided.',
1281.                     hint='It seems you set a fixed date / time / datetime '
1282.                          'value as default for this field. This may not be '
1283.                          'what you want. If you want to have the current date '
1284.                          'as default, use `django.utils.timezone.now`',
1285.                     obj=self,
1286.                     id='fields.W161',
1287.                 )
1288.             ]
1289. 
1290.         return []
1291. 
1292.     def get_internal_type(self):
1293.         return "DateTimeField"
1294. 
1295.     def to_python(self, value):
1296.         if value is None:
1297.             return value
1298.         if isinstance(value, datetime.datetime):
1299.             return value
1300.         if isinstance(value, datetime.date):
1301.             value = datetime.datetime(value.year, value.month, value.day)
1302.             if settings.USE_TZ:
1303.                 # For backwards compatibility, interpret naive datetimes in
1304.                 # local time. This won't work during DST change, but we can't
1305.                 # do much about it, so we let the exceptions percolate up the
1306.                 # call stack.
1307.                 warnings.warn("DateTimeField %s.%s received a naive datetime "
1308.                               "(%s) while time zone support is active." %
1309.                               (self.model.__name__, self.name, value),
1310.                               RuntimeWarning)
1311.                 default_timezone = timezone.get_default_timezone()
1312.                 value = timezone.make_aware(value, default_timezone)
1313.             return value
1314. 
1315.         try:
1316.             parsed = parse_datetime(value)
1317.             if parsed is not None:
1318.                 return parsed
1319.         except ValueError:
1320.             raise exceptions.ValidationError(
1321.                 self.error_messages['invalid_datetime'],
1322.                 code='invalid_datetime',
1323.                 params={'value': value},
1324.             )
1325. 
1326.         try:
1327.             parsed = parse_date(value)
1328.             if parsed is not None:
1329.                 return datetime.datetime(parsed.year, parsed.month, parsed.day)
1330.         except ValueError:
1331.             raise exceptions.ValidationError(
1332.                 self.error_messages['invalid_date'],
1333.                 code='invalid_date',
1334.                 params={'value': value},
1335.             )
1336. 
1337.         raise exceptions.ValidationError(
1338.             self.error_messages['invalid'],
1339.             code='invalid',
1340.             params={'value': value},
1341.         )
1342. 
1343.     def pre_save(self, model_instance, add):
1344.         if self.auto_now or (self.auto_now_add and add):
1345.             value = timezone.now()
1346.             setattr(model_instance, self.attname, value)
1347.             return value
1348.         else:
1349.             return super().pre_save(model_instance, add)
1350. 
1351.     # contribute_to_class is inherited from DateField, it registers
1352.     # get_next_by_FOO and get_prev_by_FOO
1353. 
1354.     def get_prep_value(self, value):
1355.         value = super().get_prep_value(value)
1356.         value = self.to_python(value)
1357.         if value is not None and settings.USE_TZ and timezone.is_naive(value):
1358.             # For backwards compatibility, interpret naive datetimes in local
1359.             # time. This won't work during DST change, but we can't do much
1360.             # about it, so we let the exceptions percolate up the call stack.
1361.             try:
1362.                 name = '%s.%s' % (self.model.__name__, self.name)
1363.             except AttributeError:
1364.                 name = '(unbound)'
1365.             warnings.warn("DateTimeField %s received a naive datetime (%s)"
1366.                           " while time zone support is active." %
1367.                           (name, value),
1368.                           RuntimeWarning)
1369.             default_timezone = timezone.get_default_timezone()
1370.             value = timezone.make_aware(value, default_timezone)
1371.         return value
1372. 
1373.     def get_db_prep_value(self, value, connection, prepared=False):
1374.         # Casts datetimes into the format expected by the backend
1375.         if not prepared:
1376.             value = self.get_prep_value(value)
1377.         return connection.ops.adapt_datetimefield_value(value)
1378. 
1379.     def value_to_string(self, obj):
1380.         val = self.value_from_object(obj)
1381.         return '' if val is None else val.isoformat()
1382. 
1383.     def formfield(self, **kwargs):
1384.         return super().formfield(**{
1385.             'form_class': forms.DateTimeField,
1386.             **kwargs,
1387.         })
1388. 
1389. 
1390. class DecimalField(Field):
1391.     empty_strings_allowed = False
1392.     default_error_messages = {
1393.         'invalid': _('“%(value)s” value must be a decimal number.'),
1394.     }
1395.     description = _("Decimal number")
1396. 
1397.     def __init__(self, verbose_name=None, name=None, max_digits=None,
1398.                  decimal_places=None, **kwargs):
1399.         self.max_digits, self.decimal_places = max_digits, decimal_places
1400.         super().__init__(verbose_name, name, **kwargs)
1401. 
1402.     def check(self, **kwargs):
1403.         errors = super().check(**kwargs)
1404. 
1405.         digits_errors = [
1406.             *self._check_decimal_places(),
1407.             *self._check_max_digits(),
1408.         ]
1409.         if not digits_errors:
1410.             errors.extend(self._check_decimal_places_and_max_digits(**kwargs))
1411.         else:
1412.             errors.extend(digits_errors)
1413.         return errors
1414. 
1415.     def _check_decimal_places(self):
1416.         try:
1417.             decimal_places = int(self.decimal_places)
1418.             if decimal_places < 0:
1419.                 raise ValueError()
1420.         except TypeError:
1421.             return [
1422.                 checks.Error(
1423.                     "DecimalFields must define a 'decimal_places' attribute.",
1424.                     obj=self,
1425.                     id='fields.E130',
1426.                 )
1427.             ]
1428.         except ValueError:
1429.             return [
1430.                 checks.Error(
1431.                     "'decimal_places' must be a non-negative integer.",
1432.                     obj=self,
1433.                     id='fields.E131',
1434.                 )
1435.             ]
1436.         else:
1437.             return []
1438. 
1439.     def _check_max_digits(self):
1440.         try:
1441.             max_digits = int(self.max_digits)
1442.             if max_digits <= 0:
1443.                 raise ValueError()
1444.         except TypeError:
1445.             return [
1446.                 checks.Error(
1447.                     "DecimalFields must define a 'max_digits' attribute.",
1448.                     obj=self,
1449.                     id='fields.E132',
1450.                 )
1451.             ]
1452.         except ValueError:
1453.             return [
1454.                 checks.Error(
1455.                     "'max_digits' must be a positive integer.",
1456.                     obj=self,
1457.                     id='fields.E133',
1458.                 )
1459.             ]
1460.         else:
1461.             return []
1462. 
1463.     def _check_decimal_places_and_max_digits(self, **kwargs):
1464.         if int(self.decimal_places) > int(self.max_digits):
1465.             return [
1466.                 checks.Error(
1467.                     "'max_digits' must be greater or equal to 'decimal_places'.",
1468.                     obj=self,
1469.                     id='fields.E134',
1470.                 )
1471.             ]
1472.         return []
1473. 
1474.     @cached_property
1475.     def validators(self):
1476.         return super().validators + [
1477.             validators.DecimalValidator(self.max_digits, self.decimal_places)
1478.         ]
1479. 
1480.     @cached_property
1481.     def context(self):
1482.         return decimal.Context(prec=self.max_digits)
1483. 
1484.     def deconstruct(self):
1485.         name, path, args, kwargs = super().deconstruct()
1486.         if self.max_digits is not None:
1487.             kwargs['max_digits'] = self.max_digits
1488.         if self.decimal_places is not None:
1489.             kwargs['decimal_places'] = self.decimal_places
1490.         return name, path, args, kwargs
1491. 
1492.     def get_internal_type(self):
1493.         return "DecimalField"
1494. 
1495.     def to_python(self, value):
1496.         if value is None:
1497.             return value
1498.         if isinstance(value, float):
1499.             return self.context.create_decimal_from_float(value)
1500.         try:
1501.             return decimal.Decimal(value)
1502.         except decimal.InvalidOperation:
1503.             raise exceptions.ValidationError(
1504.                 self.error_messages['invalid'],
1505.                 code='invalid',
1506.                 params={'value': value},
1507.             )
1508. 
1509.     def get_db_prep_save(self, value, connection):
1510.         return connection.ops.adapt_decimalfield_value(self.to_python(value), self.max_digits, self.decimal_places)
1511. 
1512.     def get_prep_value(self, value):
1513.         value = super().get_prep_value(value)
1514.         return self.to_python(value)
1515. 
1516.     def formfield(self, **kwargs):
1517.         return super().formfield(**{
1518.             'max_digits': self.max_digits,
1519.             'decimal_places': self.decimal_places,
1520.             'form_class': forms.DecimalField,
1521.             **kwargs,
1522.         })
1523. 
1524. 
1525. class DurationField(Field):
1526.     """
1527.     Store timedelta objects.
1528. 
1529.     Use interval on PostgreSQL, INTERVAL DAY TO SECOND on Oracle, and bigint
1530.     of microseconds on other databases.
1531.     """
1532.     empty_strings_allowed = False
1533.     default_error_messages = {
1534.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1535.                      '[DD] [[HH:]MM:]ss[.uuuuuu] format.')
1536.     }
1537.     description = _("Duration")
1538. 
1539.     def get_internal_type(self):
1540.         return "DurationField"
1541. 
1542.     def to_python(self, value):
1543.         if value is None:
1544.             return value
1545.         if isinstance(value, datetime.timedelta):
1546.             return value
1547.         try:
1548.             parsed = parse_duration(value)
1549.         except ValueError:
1550.             pass
1551.         else:
1552.             if parsed is not None:
1553.                 return parsed
1554. 
1555.         raise exceptions.ValidationError(
1556.             self.error_messages['invalid'],
1557.             code='invalid',
1558.             params={'value': value},
1559.         )
1560. 
1561.     def get_db_prep_value(self, value, connection, prepared=False):
1562.         if connection.features.has_native_duration_field:
1563.             return value
1564.         if value is None:
1565.             return None
1566.         return duration_microseconds(value)
1567. 
1568.     def get_db_converters(self, connection):
1569.         converters = []
1570.         if not connection.features.has_native_duration_field:
1571.             converters.append(connection.ops.convert_durationfield_value)
1572.         return converters + super().get_db_converters(connection)
1573. 
1574.     def value_to_string(self, obj):
1575.         val = self.value_from_object(obj)
1576.         return '' if val is None else duration_string(val)
1577. 
1578.     def formfield(self, **kwargs):
1579.         return super().formfield(**{
1580.             'form_class': forms.DurationField,
1581.             **kwargs,
1582.         })
1583. 
1584. 
1585. class EmailField(CharField):
1586.     default_validators = [validators.validate_email]
1587.     description = _("Email address")
1588. 
1589.     def __init__(self, *args, **kwargs):
1590.         # max_length=254 to be compliant with RFCs 3696 and 5321
1591.         kwargs.setdefault('max_length', 254)
1592.         super().__init__(*args, **kwargs)
1593. 
1594.     def deconstruct(self):
1595.         name, path, args, kwargs = super().deconstruct()
1596.         # We do not exclude max_length if it matches default as we want to change
1597.         # the default in future.
1598.         return name, path, args, kwargs
1599. 
1600.     def formfield(self, **kwargs):
1601.         # As with CharField, this will cause email validation to be performed
1602.         # twice.
1603.         return super().formfield(**{
1604.             'form_class': forms.EmailField,
1605.             **kwargs,
1606.         })
1607. 
1608. 
1609. class FilePathField(Field):
1610.     description = _("File path")
1611. 
1612.     def __init__(self, verbose_name=None, name=None, path='', match=None,
1613.                  recursive=False, allow_files=True, allow_folders=False, **kwargs):
1614.         self.path, self.match, self.recursive = path, match, recursive
1615.         self.allow_files, self.allow_folders = allow_files, allow_folders
1616.         kwargs.setdefault('max_length', 100)
1617.         super().__init__(verbose_name, name, **kwargs)
1618. 
1619.     def check(self, **kwargs):
1620.         return [
1621.             *super().check(**kwargs),
1622.             *self._check_allowing_files_or_folders(**kwargs),
1623.         ]
1624. 
1625.     def _check_allowing_files_or_folders(self, **kwargs):
1626.         if not self.allow_files and not self.allow_folders:
1627.             return [
1628.                 checks.Error(
1629.                     "FilePathFields must have either 'allow_files' or 'allow_folders' set to True.",
1630.                     obj=self,
1631.                     id='fields.E140',
1632.                 )
1633.             ]
1634.         return []
1635. 
1636.     def deconstruct(self):
1637.         name, path, args, kwargs = super().deconstruct()
1638.         if self.path != '':
1639.             kwargs['path'] = self.path
1640.         if self.match is not None:
1641.             kwargs['match'] = self.match
1642.         if self.recursive is not False:
1643.             kwargs['recursive'] = self.recursive
1644.         if self.allow_files is not True:
1645.             kwargs['allow_files'] = self.allow_files
1646.         if self.allow_folders is not False:
1647.             kwargs['allow_folders'] = self.allow_folders
1648.         if kwargs.get("max_length") == 100:
1649.             del kwargs["max_length"]
1650.         return name, path, args, kwargs
1651. 
1652.     def get_prep_value(self, value):
1653.         value = super().get_prep_value(value)
1654.         if value is None:
1655.             return None
1656.         return str(value)
1657. 
1658.     def formfield(self, **kwargs):
1659.         return super().formfield(**{
1660.             'path': self.path() if callable(self.path) else self.path,
1661.             'match': self.match,
1662.             'recursive': self.recursive,
1663.             'form_class': forms.FilePathField,
1664.             'allow_files': self.allow_files,
1665.             'allow_folders': self.allow_folders,
1666.             **kwargs,
1667.         })
1668. 
1669.     def get_internal_type(self):
1670.         return "FilePathField"
1671. 
1672. 
1673. class FloatField(Field):
1674.     empty_strings_allowed = False
1675.     default_error_messages = {
1676.         'invalid': _('“%(value)s” value must be a float.'),
1677.     }
1678.     description = _("Floating point number")
1679. 
1680.     def get_prep_value(self, value):
1681.         value = super().get_prep_value(value)
1682.         if value is None:
1683.             return None
1684.         try:
1685.             return float(value)
1686.         except (TypeError, ValueError) as e:
1687.             raise e.__class__(
1688.                 "Field '%s' expected a number but got %r." % (self.name, value),
1689.             ) from e
1690. 
1691.     def get_internal_type(self):
1692.         return "FloatField"
1693. 
1694.     def to_python(self, value):
1695.         if value is None:
1696.             return value
1697.         try:
1698.             return float(value)
1699.         except (TypeError, ValueError):
1700.             raise exceptions.ValidationError(
1701.                 self.error_messages['invalid'],
1702.                 code='invalid',
1703.                 params={'value': value},
1704.             )
1705. 
1706.     def formfield(self, **kwargs):
1707.         return super().formfield(**{
1708.             'form_class': forms.FloatField,
1709.             **kwargs,
1710.         })
1711. 
1712. 
1713. class IntegerField(Field):
1714.     empty_strings_allowed = False
1715.     default_error_messages = {
1716.         'invalid': _('“%(value)s” value must be an integer.'),
1717.     }
1718.     description = _("Integer")
1719. 
1720.     def check(self, **kwargs):
1721.         return [
1722.             *super().check(**kwargs),
1723.             *self._check_max_length_warning(),
1724.         ]
1725. 
1726.     def _check_max_length_warning(self):
1727.         if self.max_length is not None:
1728.             return [
1729.                 checks.Warning(
1730.                     "'max_length' is ignored when used with %s." % self.__class__.__name__,
1731.                     hint="Remove 'max_length' from field",
1732.                     obj=self,
1733.                     id='fields.W122',
1734.                 )
1735.             ]
1736.         return []
1737. 
1738.     @cached_property
1739.     def validators(self):
1740.         # These validators can't be added at field initialization time since
1741.         # they're based on values retrieved from `connection`.
1742.         validators_ = super().validators
1743.         internal_type = self.get_internal_type()
1744.         min_value, max_value = connection.ops.integer_field_range(internal_type)
1745.         if min_value is not None and not any(
1746.             (
1747.                 isinstance(validator, validators.MinValueValidator) and (
1748.                     validator.limit_value()
1749.                     if callable(validator.limit_value)
1750.                     else validator.limit_value
1751.                 ) >= min_value
1752.             ) for validator in validators_
1753.         ):
1754.             validators_.append(validators.MinValueValidator(min_value))
1755.         if max_value is not None and not any(
1756.             (
1757.                 isinstance(validator, validators.MaxValueValidator) and (
1758.                     validator.limit_value()
1759.                     if callable(validator.limit_value)
1760.                     else validator.limit_value
1761.                 ) <= max_value
1762.             ) for validator in validators_
1763.         ):
1764.             validators_.append(validators.MaxValueValidator(max_value))
1765.         return validators_
1766. 
1767.     def get_prep_value(self, value):
1768.         value = super().get_prep_value(value)
1769.         if value is None:
1770.             return None
1771.         try:
1772.             return int(value)
1773.         except (TypeError, ValueError) as e:
1774.             raise e.__class__(
1775.                 "Field '%s' expected a number but got %r." % (self.name, value),
1776.             ) from e
1777. 
1778.     def get_internal_type(self):
1779.         return "IntegerField"
1780. 
1781.     def to_python(self, value):
1782.         if value is None:
1783.             return value
1784.         try:
1785.             return int(value)
1786.         except (TypeError, ValueError):
1787.             raise exceptions.ValidationError(
1788.                 self.error_messages['invalid'],
1789.                 code='invalid',
1790.                 params={'value': value},
1791.             )
1792. 
1793.     def formfield(self, **kwargs):
1794.         return super().formfield(**{
1795.             'form_class': forms.IntegerField,
1796.             **kwargs,
1797.         })
1798. 
1799. 
1800. class BigIntegerField(IntegerField):
1801.     description = _("Big (8 byte) integer")
1802.     MAX_BIGINT = 9223372036854775807
1803. 
1804.     def get_internal_type(self):
1805.         return "BigIntegerField"
1806. 
1807.     def formfield(self, **kwargs):
1808.         return super().formfield(**{
1809.             'min_value': -BigIntegerField.MAX_BIGINT - 1,
1810.             'max_value': BigIntegerField.MAX_BIGINT,
1811.             **kwargs,
1812.         })
1813. 
1814. 
1815. class IPAddressField(Field):
1816.     empty_strings_allowed = False
1817.     description = _("IPv4 address")
1818.     system_check_removed_details = {
1819.         'msg': (
1820.             'IPAddressField has been removed except for support in '
1821.             'historical migrations.'
1822.         ),
1823.         'hint': 'Use GenericIPAddressField instead.',
1824.         'id': 'fields.E900',
1825.     }
1826. 
1827.     def __init__(self, *args, **kwargs):
1828.         kwargs['max_length'] = 15
1829.         super().__init__(*args, **kwargs)
1830. 
1831.     def deconstruct(self):
1832.         name, path, args, kwargs = super().deconstruct()
1833.         del kwargs['max_length']
1834.         return name, path, args, kwargs
1835. 
1836.     def get_prep_value(self, value):
1837.         value = super().get_prep_value(value)
1838.         if value is None:
1839.             return None
1840.         return str(value)
1841. 
1842.     def get_internal_type(self):
1843.         return "IPAddressField"
1844. 
1845. 
1846. class GenericIPAddressField(Field):
1847.     empty_strings_allowed = False
1848.     description = _("IP address")
1849.     default_error_messages = {}
1850. 
1851.     def __init__(self, verbose_name=None, name=None, protocol='both',
1852.                  unpack_ipv4=False, *args, **kwargs):
1853.         self.unpack_ipv4 = unpack_ipv4
1854.         self.protocol = protocol
1855.         self.default_validators, invalid_error_message = \
1856.             validators.ip_address_validators(protocol, unpack_ipv4)
1857.         self.default_error_messages['invalid'] = invalid_error_message
1858.         kwargs['max_length'] = 39
1859.         super().__init__(verbose_name, name, *args, **kwargs)
1860. 
1861.     def check(self, **kwargs):
1862.         return [
1863.             *super().check(**kwargs),
1864.             *self._check_blank_and_null_values(**kwargs),
1865.         ]
1866. 
1867.     def _check_blank_and_null_values(self, **kwargs):
1868.         if not getattr(self, 'null', False) and getattr(self, 'blank', False):
1869.             return [
1870.                 checks.Error(
1871.                     'GenericIPAddressFields cannot have blank=True if null=False, '
1872.                     'as blank values are stored as nulls.',
1873.                     obj=self,
1874.                     id='fields.E150',
1875.                 )
1876.             ]
1877.         return []
1878. 
1879.     def deconstruct(self):
1880.         name, path, args, kwargs = super().deconstruct()
1881.         if self.unpack_ipv4 is not False:
1882.             kwargs['unpack_ipv4'] = self.unpack_ipv4
1883.         if self.protocol != "both":
1884.             kwargs['protocol'] = self.protocol
1885.         if kwargs.get("max_length") == 39:
1886.             del kwargs['max_length']
1887.         return name, path, args, kwargs
1888. 
1889.     def get_internal_type(self):
1890.         return "GenericIPAddressField"
1891. 
1892.     def to_python(self, value):
1893.         if value is None:
1894.             return None
1895.         if not isinstance(value, str):
1896.             value = str(value)
1897.         value = value.strip()
1898.         if ':' in value:
1899.             return clean_ipv6_address(value, self.unpack_ipv4, self.error_messages['invalid'])
1900.         return value
1901. 
1902.     def get_db_prep_value(self, value, connection, prepared=False):
1903.         if not prepared:
1904.             value = self.get_prep_value(value)
1905.         return connection.ops.adapt_ipaddressfield_value(value)
1906. 
1907.     def get_prep_value(self, value):
1908.         value = super().get_prep_value(value)
1909.         if value is None:
1910.             return None
1911.         if value and ':' in value:
1912.             try:
1913.                 return clean_ipv6_address(value, self.unpack_ipv4)
1914.             except exceptions.ValidationError:
1915.                 pass
1916.         return str(value)
1917. 
1918.     def formfield(self, **kwargs):
1919.         return super().formfield(**{
1920.             'protocol': self.protocol,
1921.             'form_class': forms.GenericIPAddressField,
1922.             **kwargs,
1923.         })
1924. 
1925. 
1926. class NullBooleanField(BooleanField):
1927.     default_error_messages = {
1928.         'invalid': _('“%(value)s” value must be either None, True or False.'),
1929.         'invalid_nullable': _('“%(value)s” value must be either None, True or False.'),
1930.     }
1931.     description = _("Boolean (Either True, False or None)")
1932.     system_check_deprecated_details = {
1933.         'msg': (
1934.             'NullBooleanField is deprecated. Support for it (except in '
1935.             'historical migrations) will be removed in Django 4.0.'
1936.         ),
1937.         'hint': 'Use BooleanField(null=True) instead.',
1938.         'id': 'fields.W903',
1939.     }
1940. 
1941.     def __init__(self, *args, **kwargs):
1942.         kwargs['null'] = True
1943.         kwargs['blank'] = True
1944.         super().__init__(*args, **kwargs)
1945. 
1946.     def deconstruct(self):
1947.         name, path, args, kwargs = super().deconstruct()
1948.         del kwargs['null']
1949.         del kwargs['blank']
1950.         return name, path, args, kwargs
1951. 
1952.     def get_internal_type(self):
1953.         return "NullBooleanField"
1954. 
1955. 
1956. class PositiveIntegerRelDbTypeMixin:
1957. 
1958.     def rel_db_type(self, connection):
1959.         """
1960.         Return the data type that a related field pointing to this field should
1961.         use. In most cases, a foreign key pointing to a positive integer
1962.         primary key will have an integer column data type but some databases
1963.         (e.g. MySQL) have an unsigned integer type. In that case
1964.         (related_fields_match_type=True), the primary key should return its
1965.         db_type.
1966.         """
1967.         if connection.features.related_fields_match_type:
1968.             return self.db_type(connection)
1969.         else:
1970.             return IntegerField().db_type(connection=connection)
1971. 
1972. 
1973. class PositiveBigIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
1974.     description = _('Positive big integer')
1975. 
1976.     def get_internal_type(self):
1977.         return 'PositiveBigIntegerField'
1978. 
1979.     def formfield(self, **kwargs):
1980.         return super().formfield(**{
1981.             'min_value': 0,
1982.             **kwargs,
1983.         })
1984. 
1985. 
1986. class PositiveIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
1987.     description = _("Positive integer")
1988. 
1989.     def get_internal_type(self):
1990.         return "PositiveIntegerField"
1991. 
1992.     def formfield(self, **kwargs):
1993.         return super().formfield(**{
1994.             'min_value': 0,
1995.             **kwargs,
1996.         })
1997. 
1998. 
1999. class PositiveSmallIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
2000.     description = _("Positive small integer")
2001. 
2002.     def get_internal_type(self):
2003.         return "PositiveSmallIntegerField"
2004. 
2005.     def formfield(self, **kwargs):
2006.         return super().formfield(**{
2007.             'min_value': 0,
2008.             **kwargs,
2009.         })
2010. 
2011. 
2012. class SlugField(CharField):
2013.     default_validators = [validators.validate_slug]
2014.     description = _("Slug (up to %(max_length)s)")
2015. 
2016.     def __init__(self, *args, max_length=50, db_index=True, allow_unicode=False, **kwargs):
2017.         self.allow_unicode = allow_unicode
2018.         if self.allow_unicode:
2019.             self.default_validators = [validators.validate_unicode_slug]
2020.         super().__init__(*args, max_length=max_length, db_index=db_index, **kwargs)
2021. 
2022.     def deconstruct(self):
2023.         name, path, args, kwargs = super().deconstruct()
2024.         if kwargs.get("max_length") == 50:
2025.             del kwargs['max_length']
2026.         if self.db_index is False:
2027.             kwargs['db_index'] = False
2028.         else:
2029.             del kwargs['db_index']
2030.         if self.allow_unicode is not False:
2031.             kwargs['allow_unicode'] = self.allow_unicode
2032.         return name, path, args, kwargs
2033. 
2034.     def get_internal_type(self):
2035.         return "SlugField"
2036. 
2037.     def formfield(self, **kwargs):
2038.         return super().formfield(**{
2039.             'form_class': forms.SlugField,
2040.             'allow_unicode': self.allow_unicode,
2041.             **kwargs,
2042.         })
2043. 
2044. 
2045. class SmallIntegerField(IntegerField):
2046.     description = _("Small integer")
2047. 
2048.     def get_internal_type(self):
2049.         return "SmallIntegerField"
2050. 
2051. 
2052. class TextField(Field):
2053.     description = _("Text")
2054. 
2055.     def get_internal_type(self):
2056.         return "TextField"
2057. 
2058.     def to_python(self, value):
2059.         if isinstance(value, str) or value is None:
2060.             return value
2061.         return str(value)
2062. 
2063.     def get_prep_value(self, value):
2064.         value = super().get_prep_value(value)
2065.         return self.to_python(value)
2066. 
2067.     def formfield(self, **kwargs):
2068.         # Passing max_length to forms.CharField means that the value's length
2069.         # will be validated twice. This is considered acceptable since we want
2070.         # the value in the form field (to pass into widget for example).
2071.         return super().formfield(**{
2072.             'max_length': self.max_length,
2073.             **({} if self.choices is not None else {'widget': forms.Textarea}),
2074.             **kwargs,
2075.         })
2076. 
2077. 
2078. class TimeField(DateTimeCheckMixin, Field):
2079.     empty_strings_allowed = False
2080.     default_error_messages = {
2081.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
2082.                      'HH:MM[:ss[.uuuuuu]] format.'),
2083.         'invalid_time': _('“%(value)s” value has the correct format '
2084.                           '(HH:MM[:ss[.uuuuuu]]) but it is an invalid time.'),
2085.     }
2086.     description = _("Time")
2087. 
2088.     def __init__(self, verbose_name=None, name=None, auto_now=False,
2089.                  auto_now_add=False, **kwargs):
2090.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
2091.         if auto_now or auto_now_add:
2092.             kwargs['editable'] = False
2093.             kwargs['blank'] = True
2094.         super().__init__(verbose_name, name, **kwargs)
2095. 
2096.     def _check_fix_default_value(self):
2097.         """
2098.         Warn that using an actual date or datetime value is probably wrong;
2099.         it's only evaluated on server startup.
2100.         """
2101.         if not self.has_default():
2102.             return []
2103. 
2104.         now = timezone.now()
2105.         if not timezone.is_naive(now):
2106.             now = timezone.make_naive(now, timezone.utc)
2107.         value = self.default
2108.         if isinstance(value, datetime.datetime):
2109.             second_offset = datetime.timedelta(seconds=10)
2110.             lower = now - second_offset
2111.             upper = now + second_offset
2112.             if timezone.is_aware(value):
2113.                 value = timezone.make_naive(value, timezone.utc)
2114.         elif isinstance(value, datetime.time):
2115.             second_offset = datetime.timedelta(seconds=10)
2116.             lower = now - second_offset
2117.             upper = now + second_offset
2118.             value = datetime.datetime.combine(now.date(), value)
2119.             if timezone.is_aware(value):
2120.                 value = timezone.make_naive(value, timezone.utc).time()
2121.         else:
2122.             # No explicit time / datetime value -- no checks necessary
2123.             return []
2124.         if lower <= value <= upper:
2125.             return [
2126.                 checks.Warning(
2127.                     'Fixed default value provided.',
2128.                     hint='It seems you set a fixed date / time / datetime '
2129.                          'value as default for this field. This may not be '
2130.                          'what you want. If you want to have the current date '
2131.                          'as default, use `django.utils.timezone.now`',
2132.                     obj=self,
2133.                     id='fields.W161',
2134.                 )
2135.             ]
2136. 
2137.         return []
2138. 
2139.     def deconstruct(self):
2140.         name, path, args, kwargs = super().deconstruct()
2141.         if self.auto_now is not False:
2142.             kwargs["auto_now"] = self.auto_now
2143.         if self.auto_now_add is not False:
2144.             kwargs["auto_now_add"] = self.auto_now_add
2145.         if self.auto_now or self.auto_now_add:
2146.             del kwargs['blank']
2147.             del kwargs['editable']
2148.         return name, path, args, kwargs
2149. 
2150.     def get_internal_type(self):
2151.         return "TimeField"
2152. 
2153.     def to_python(self, value):
2154.         if value is None:
2155.             return None
2156.         if isinstance(value, datetime.time):
2157.             return value
2158.         if isinstance(value, datetime.datetime):
2159.             # Not usually a good idea to pass in a datetime here (it loses
2160.             # information), but this can be a side-effect of interacting with a
2161.             # database backend (e.g. Oracle), so we'll be accommodating.
2162.             return value.time()
2163. 
2164.         try:
2165.             parsed = parse_time(value)
2166.             if parsed is not None:
2167.                 return parsed
2168.         except ValueError:
2169.             raise exceptions.ValidationError(
2170.                 self.error_messages['invalid_time'],
2171.                 code='invalid_time',
2172.                 params={'value': value},
2173.             )
2174. 
2175.         raise exceptions.ValidationError(
2176.             self.error_messages['invalid'],
2177.             code='invalid',
2178.             params={'value': value},
2179.         )
2180. 
2181.     def pre_save(self, model_instance, add):
2182.         if self.auto_now or (self.auto_now_add and add):
2183.             value = datetime.datetime.now().time()
2184.             setattr(model_instance, self.attname, value)
2185.             return value
2186.         else:
2187.             return super().pre_save(model_instance, add)
2188. 
2189.     def get_prep_value(self, value):
2190.         value = super().get_prep_value(value)
2191.         return self.to_python(value)
2192. 
2193.     def get_db_prep_value(self, value, connection, prepared=False):
2194.         # Casts times into the format expected by the backend
2195.         if not prepared:
2196.             value = self.get_prep_value(value)
2197.         return connection.ops.adapt_timefield_value(value)
2198. 
2199.     def value_to_string(self, obj):
2200.         val = self.value_from_object(obj)
2201.         return '' if val is None else val.isoformat()
2202. 
2203.     def formfield(self, **kwargs):
2204.         return super().formfield(**{
2205.             'form_class': forms.TimeField,
2206.             **kwargs,
2207.         })
2208. 
2209. 
2210. class URLField(CharField):
2211.     default_validators = [validators.URLValidator()]
2212.     description = _("URL")
2213. 
2214.     def __init__(self, verbose_name=None, name=None, **kwargs):
2215.         kwargs.setdefault('max_length', 200)
2216.         super().__init__(verbose_name, name, **kwargs)
2217. 
2218.     def deconstruct(self):
2219.         name, path, args, kwargs = super().deconstruct()
2220.         if kwargs.get("max_length") == 200:
2221.             del kwargs['max_length']
2222.         return name, path, args, kwargs
2223. 
2224.     def formfield(self, **kwargs):
2225.         # As with CharField, this will cause URL validation to be performed
2226.         # twice.
2227.         return super().formfield(**{
2228.             'form_class': forms.URLField,
2229.             **kwargs,
2230.         })
2231. 
2232. 
2233. class BinaryField(Field):
2234.     description = _("Raw binary data")
2235.     empty_values = [None, b'']
2236. 
2237.     def __init__(self, *args, **kwargs):
2238.         kwargs.setdefault('editable', False)
2239.         super().__init__(*args, **kwargs)
2240.         if self.max_length is not None:
2241.             self.validators.append(validators.MaxLengthValidator(self.max_length))
2242. 
2243.     def check(self, **kwargs):
2244.         return [*super().check(**kwargs), *self._check_str_default_value()]
2245. 
2246.     def _check_str_default_value(self):
2247.         if self.has_default() and isinstance(self.default, str):
2248.             return [
2249.                 checks.Error(
2250.                     "BinaryField's default cannot be a string. Use bytes "
2251.                     "content instead.",
2252.                     obj=self,
2253.                     id='fields.E170',
2254.                 )
2255.             ]
2256.         return []
2257. 
2258.     def deconstruct(self):
2259.         name, path, args, kwargs = super().deconstruct()
2260.         if self.editable:
2261.             kwargs['editable'] = True
2262.         else:
2263.             del kwargs['editable']
2264.         return name, path, args, kwargs
2265. 
2266.     def get_internal_type(self):
2267.         return "BinaryField"
2268. 
2269.     def get_placeholder(self, value, compiler, connection):
2270.         return connection.ops.binary_placeholder_sql(value)
2271. 
2272.     def get_default(self):
2273.         if self.has_default() and not callable(self.default):
2274.             return self.default
2275.         default = super().get_default()
2276.         if default == '':
2277.             return b''
2278.         return default
2279. 
2280.     def get_db_prep_value(self, value, connection, prepared=False):
2281.         value = super().get_db_prep_value(value, connection, prepared)
2282.         if value is not None:
2283.             return connection.Database.Binary(value)
2284.         return value
2285. 
2286.     def value_to_string(self, obj):
2287.         """Binary data is serialized as base64"""
2288.         return b64encode(self.value_from_object(obj)).decode('ascii')
2289. 
2290.     def to_python(self, value):
2291.         # If it's a string, it should be base64-encoded data
2292.         if isinstance(value, str):
2293.             return memoryview(b64decode(value.encode('ascii')))
2294.         return value
2295. 
2296. 
2297. class UUIDField(Field):
2298.     default_error_messages = {
2299.         'invalid': _('“%(value)s” is not a valid UUID.'),
2300.     }
2301.     description = _('Universally unique identifier')
2302.     empty_strings_allowed = False
2303. 
2304.     def __init__(self, verbose_name=None, **kwargs):
2305.         kwargs['max_length'] = 32
2306.         super().__init__(verbose_name, **kwargs)
2307. 
2308.     def deconstruct(self):
2309.         name, path, args, kwargs = super().deconstruct()
2310.         del kwargs['max_length']
2311.         return name, path, args, kwargs
2312. 
2313.     def get_internal_type(self):
2314.         return "UUIDField"
2315. 
2316.     def get_prep_value(self, value):
2317.         value = super().get_prep_value(value)
2318.         return self.to_python(value)
2319. 
2320.     def get_db_prep_value(self, value, connection, prepared=False):
2321.         if value is None:
2322.             return None
2323.         if not isinstance(value, uuid.UUID):
2324.             value = self.to_python(value)
2325. 
2326.         if connection.features.has_native_uuid_field:
2327.             return value
2328.         return value.hex
2329. 
2330.     def to_python(self, value):
2331.         if value is not None and not isinstance(value, uuid.UUID):
2332.             input_form = 'int' if isinstance(value, int) else 'hex'
2333.             try:
2334.                 return uuid.UUID(**{input_form: value})
2335.             except (AttributeError, ValueError):
2336.                 raise exceptions.ValidationError(
2337.                     self.error_messages['invalid'],
2338.                     code='invalid',
2339.                     params={'value': value},
2340.                 )
2341.         return value
2342. 
2343.     def formfield(self, **kwargs):
2344.         return super().formfield(**{
2345.             'form_class': forms.UUIDField,
2346.             **kwargs,
2347.         })
2348. 
2349. 
2350. class AutoFieldMixin:
2351.     db_returning = True
2352. 
2353.     def __init__(self, *args, **kwargs):
2354.         kwargs['blank'] = True
2355.         super().__init__(*args, **kwargs)
2356. 
2357.     def check(self, **kwargs):
2358.         return [
2359.             *super().check(**kwargs),
2360.             *self._check_primary_key(),
2361.         ]
2362. 
2363.     def _check_primary_key(self):
2364.         if not self.primary_key:
2365.             return [
2366.                 checks.Error(
2367.                     'AutoFields must set primary_key=True.',
2368.                     obj=self,
2369.                     id='fields.E100',
2370.                 ),
2371.             ]
2372.         else:
2373.             return []
2374. 
2375.     def deconstruct(self):
2376.         name, path, args, kwargs = super().deconstruct()
2377.         del kwargs['blank']
2378.         kwargs['primary_key'] = True
2379.         return name, path, args, kwargs
2380. 
2381.     def validate(self, value, model_instance):
2382.         pass
2383. 
2384.     def get_db_prep_value(self, value, connection, prepared=False):
2385.         if not prepared:
2386.             value = self.get_prep_value(value)
2387.             value = connection.ops.validate_autopk_value(value)
2388.         return value
2389. 
2390.     def contribute_to_class(self, cls, name, **kwargs):
2391.         assert not cls._meta.auto_field, (
2392.             "Model %s can't have more than one auto-generated field."
2393.             % cls._meta.label
2394.         )
2395.         super().contribute_to_class(cls, name, **kwargs)
2396.         cls._meta.auto_field = self
2397. 
2398.     def formfield(self, **kwargs):
2399.         return None
2400. 
2401. 
2402. class AutoFieldMeta(type):
2403.     """
2404.     Metaclass to maintain backward inheritance compatibility for AutoField.
2405. 
2406.     It is intended that AutoFieldMixin become public API when it is possible to
2407.     create a non-integer automatically-generated field using column defaults
2408.     stored in the database.
2409. 
2410.     In many areas Django also relies on using isinstance() to check for an
2411.     automatically-generated field as a subclass of AutoField. A new flag needs
2412.     to be implemented on Field to be used instead.
2413. 
2414.     When these issues have been addressed, this metaclass could be used to
2415.     deprecate inheritance from AutoField and use of isinstance() with AutoField
2416.     for detecting automatically-generated fields.
2417.     """
2418. 
2419.     @property
2420.     def _subclasses(self):
2421.         return (BigAutoField, SmallAutoField)
2422. 
2423.     def __instancecheck__(self, instance):
2424.         return isinstance(instance, self._subclasses) or super().__instancecheck__(instance)
2425. 
2426.     def __subclasscheck__(self, subclass):
2427.         return subclass in self._subclasses or super().__subclasscheck__(subclass)
2428. 
2429. 
2430. class AutoField(AutoFieldMixin, IntegerField, metaclass=AutoFieldMeta):
2431. 
2432.     def get_internal_type(self):
2433.         return 'AutoField'
2434. 
2435.     def rel_db_type(self, connection):
2436.         return IntegerField().db_type(connection=connection)
2437. 
2438. 
2439. class BigAutoField(AutoFieldMixin, BigIntegerField):
2440. 
2441.     def get_internal_type(self):
2442.         return 'BigAutoField'
2443. 
2444.     def rel_db_type(self, connection):
2445.         return BigIntegerField().db_type(connection=connection)
2446. 
2447. 
2448. class SmallAutoField(AutoFieldMixin, SmallIntegerField):
2449. 
2450.     def get_internal_type(self):
2451.         return 'SmallAutoField'
2452. 
2453.     def rel_db_type(self, connection):
2454.         return SmallIntegerField().db_type(connection=connection)


File: django/db/models/query_utils.py
Line number range: 167 - 232
Content:
167. class RegisterLookupMixin:
168. 
169.     @classmethod
170.     def _get_lookup(cls, lookup_name):
171.         return cls.get_lookups().get(lookup_name, None)
172. 
173.     @classmethod
174.     @functools.lru_cache(maxsize=None)
175.     def get_lookups(cls):
176.         class_lookups = [parent.__dict__.get('class_lookups', {}) for parent in inspect.getmro(cls)]
177.         return cls.merge_dicts(class_lookups)
178. 
179.     def get_lookup(self, lookup_name):
180.         from django.db.models.lookups import Lookup
181.         found = self._get_lookup(lookup_name)
182.         if found is None and hasattr(self, 'output_field'):
183.             return self.output_field.get_lookup(lookup_name)
184.         if found is not None and not issubclass(found, Lookup):
185.             return None
186.         return found
187. 
188.     def get_transform(self, lookup_name):
189.         from django.db.models.lookups import Transform
190.         found = self._get_lookup(lookup_name)
191.         if found is None and hasattr(self, 'output_field'):
192.             return self.output_field.get_transform(lookup_name)
193.         if found is not None and not issubclass(found, Transform):
194.             return None
195.         return found
196. 
197.     @staticmethod
198.     def merge_dicts(dicts):
199.         """
200.         Merge dicts in reverse to preference the order of the original list. e.g.,
201.         merge_dicts([a, b]) will preference the keys in 'a' over those in 'b'.
202.         """
203.         merged = {}
204.         for d in reversed(dicts):
205.             merged.update(d)
206.         return merged
207. 
208.     @classmethod
209.     def _clear_cached_lookups(cls):
210.         for subclass in subclasses(cls):
211.             subclass.get_lookups.cache_clear()
212. 
213.     @classmethod
214.     def register_lookup(cls, lookup, lookup_name=None):
215.         if lookup_name is None:
216.             lookup_name = lookup.lookup_name
217.         if 'class_lookups' not in cls.__dict__:
218.             cls.class_lookups = {}
219.         cls.class_lookups[lookup_name] = lookup
220.         cls._clear_cached_lookups()
221.         return lookup
222. 
223.     @classmethod
224.     def _unregister_lookup(cls, lookup, lookup_name=None):
225.         """
226.         Remove given lookup from cls lookups. For use in tests only as it's
227.         not thread-safe.
228.         """
229.         if lookup_name is None:
230.             lookup_name = lookup.lookup_name
231.         del cls.class_lookups[lookup_name]
232. 

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-21 21:47:48,908 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's patch differentiates between a `lookup` and a `transform`. To understand why `isnull` is considered a lookup but not a transform, I need to see the definitions of the `Lookup` and `Transform` base classes, and the implementation of the `IsNull` lookup. This information is located in `django/db/models/lookups.py`, which is not yet in the context." query='Please provide the full content of the file `django/db/models/lookups.py`.' extra_requirements='' purpose='This file will clarify the distinction between lookups and transforms and confirm that `isnull` is a lookup but not a transform, which is the core of the issue and the patch.'
2025-12-21 21:47:48,910 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/models/lookups.py`.
2025-12-21 21:47:48,910 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-21 21:47:48,910 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-21 21:47:48,911 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-21 21:47:48,911 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/models/lookups.py`.
Purpose: This file will clarify the distinction between lookups and transforms and confirm that `isnull` is a lookup but not a transform, which is the core of the issue and the patch.
2025-12-21 21:47:51,080 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I will read the full content of the file `django/db/models/lookups.py` to clarify the distinction between lookups and transforms, and to confirm that `isnull` is a lookup but not a transform.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/lookups.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2116, 'candidates_token_count': 70, 'total_token_count': 2277, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2116}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 70}], 'thoughts_token_count': 91, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.10355821337018695, 'model_name': 'gemini-2.5-pro'} id='run--c7168c22-e55e-48cb-a987-f0d91b7e8b93-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/lookups.py'}, 'id': '642bd900-3ff2-42cc-a43c-52cd6334429c', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2116, 'output_tokens': 70, 'total_tokens': 2277, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 91}}
2025-12-21 21:47:54,049 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have read the first 500 lines of `django/db/models/lookups.py` to understand the implementation of lookups and transforms. To provide the complete file content as requested, I will now read the remaining lines of the file. This will give a full picture of the code, including the definition of the `IsNull` lookup.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 1000.0, "relative_path": "django/db/models/lookups.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9605, 'candidates_token_count': 103, 'total_token_count': 9840, 'cached_content_token_count': 1837, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9605}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1837}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 103}], 'thoughts_token_count': 132}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1879962624855412, 'model_name': 'gemini-2.5-pro'} id='run--0887c81f-4fc5-467e-9737-e52f2e059a21-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 1000.0, 'relative_path': 'django/db/models/lookups.py'}, 'id': '34d5d898-8ccb-4cfc-9fe1-9fce60a7fc81', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9605, 'output_tokens': 103, 'total_tokens': 9840, 'input_token_details': {'cache_read': 1837}, 'output_token_details': {'reasoning': 132}}
2025-12-21 21:47:58,220 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have successfully retrieved the entire content of the file `django/db/models/lookups.py`. The file's contents clarify the distinction between lookups and transforms, with the `Lookup` and `Transform` classes being central to this. I can confirm that `isnull` is indeed a lookup, as it is implemented as a class that inherits from `BuiltinLookup`." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 11611, 'candidates_token_count': 78, 'total_token_count': 11990, 'cached_content_token_count': 9277, 'prompt_tokens_details': [{'modality': 1, 'token_count': 11611}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9277}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 78}], 'thoughts_token_count': 301}, 'finish_reason': 'STOP', 'avg_logprobs': -0.6420602553930038, 'model_name': 'gemini-2.5-pro'} id='run--bf3f2803-22c0-418d-9a68-3391069681c1-0' usage_metadata={'input_tokens': 11611, 'output_tokens': 78, 'total_tokens': 11990, 'input_token_details': {'cache_read': 9277}, 'output_token_details': {'reasoning': 301}}
2025-12-21 21:47:58,222 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/models/lookups.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This file will clarify the distinction between lookups and transforms and confirm that `isnull` is a lookup but not a transform, which is the core of the issue and the patch.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/lookups.py
Line number range: 1 - 500
Content:
1. import itertools
2. import math
3. import warnings
4. from copy import copy
5. 
6. from django.core.exceptions import EmptyResultSet
7. from django.db.models.expressions import Case, Exists, Func, Value, When
8. from django.db.models.fields import (
9.     BooleanField, CharField, DateTimeField, Field, IntegerField, UUIDField,
10. )
11. from django.db.models.query_utils import RegisterLookupMixin
12. from django.utils.datastructures import OrderedSet
13. from django.utils.deprecation import RemovedInDjango40Warning
14. from django.utils.functional import cached_property
15. 
16. 
17. class Lookup:
18.     lookup_name = None
19.     prepare_rhs = True
20.     can_use_none_as_rhs = False
21. 
22.     def __init__(self, lhs, rhs):
23.         self.lhs, self.rhs = lhs, rhs
24.         self.rhs = self.get_prep_lookup()
25.         if hasattr(self.lhs, 'get_bilateral_transforms'):
26.             bilateral_transforms = self.lhs.get_bilateral_transforms()
27.         else:
28.             bilateral_transforms = []
29.         if bilateral_transforms:
30.             # Warn the user as soon as possible if they are trying to apply
31.             # a bilateral transformation on a nested QuerySet: that won't work.
32.             from django.db.models.sql.query import Query  # avoid circular import
33.             if isinstance(rhs, Query):
34.                 raise NotImplementedError("Bilateral transformations on nested querysets are not implemented.")
35.         self.bilateral_transforms = bilateral_transforms
36. 
37.     def apply_bilateral_transforms(self, value):
38.         for transform in self.bilateral_transforms:
39.             value = transform(value)
40.         return value
41. 
42.     def batch_process_rhs(self, compiler, connection, rhs=None):
43.         if rhs is None:
44.             rhs = self.rhs
45.         if self.bilateral_transforms:
46.             sqls, sqls_params = [], []
47.             for p in rhs:
48.                 value = Value(p, output_field=self.lhs.output_field)
49.                 value = self.apply_bilateral_transforms(value)
50.                 value = value.resolve_expression(compiler.query)
51.                 sql, sql_params = compiler.compile(value)
52.                 sqls.append(sql)
53.                 sqls_params.extend(sql_params)
54.         else:
55.             _, params = self.get_db_prep_lookup(rhs, connection)
56.             sqls, sqls_params = ['%s'] * len(params), params
57.         return sqls, sqls_params
58. 
59.     def get_source_expressions(self):
60.         if self.rhs_is_direct_value():
61.             return [self.lhs]
62.         return [self.lhs, self.rhs]
63. 
64.     def set_source_expressions(self, new_exprs):
65.         if len(new_exprs) == 1:
66.             self.lhs = new_exprs[0]
67.         else:
68.             self.lhs, self.rhs = new_exprs
69. 
70.     def get_prep_lookup(self):
71.         if hasattr(self.rhs, 'resolve_expression'):
72.             return self.rhs
73.         if self.prepare_rhs and hasattr(self.lhs.output_field, 'get_prep_value'):
74.             return self.lhs.output_field.get_prep_value(self.rhs)
75.         return self.rhs
76. 
77.     def get_db_prep_lookup(self, value, connection):
78.         return ('%s', [value])
79. 
80.     def process_lhs(self, compiler, connection, lhs=None):
81.         lhs = lhs or self.lhs
82.         if hasattr(lhs, 'resolve_expression'):
83.             lhs = lhs.resolve_expression(compiler.query)
84.         return compiler.compile(lhs)
85. 
86.     def process_rhs(self, compiler, connection):
87.         value = self.rhs
88.         if self.bilateral_transforms:
89.             if self.rhs_is_direct_value():
90.                 # Do not call get_db_prep_lookup here as the value will be
91.                 # transformed before being used for lookup
92.                 value = Value(value, output_field=self.lhs.output_field)
93.             value = self.apply_bilateral_transforms(value)
94.             value = value.resolve_expression(compiler.query)
95.         if hasattr(value, 'as_sql'):
96.             return compiler.compile(value)
97.         else:
98.             return self.get_db_prep_lookup(value, connection)
99. 
100.     def rhs_is_direct_value(self):
101.         return not hasattr(self.rhs, 'as_sql')
102. 
103.     def relabeled_clone(self, relabels):
104.         new = copy(self)
105.         new.lhs = new.lhs.relabeled_clone(relabels)
106.         if hasattr(new.rhs, 'relabeled_clone'):
107.             new.rhs = new.rhs.relabeled_clone(relabels)
108.         return new
109. 
110.     def get_group_by_cols(self, alias=None):
111.         cols = self.lhs.get_group_by_cols()
112.         if hasattr(self.rhs, 'get_group_by_cols'):
113.             cols.extend(self.rhs.get_group_by_cols())
114.         return cols
115. 
116.     def as_sql(self, compiler, connection):
117.         raise NotImplementedError
118. 
119.     def as_oracle(self, compiler, connection):
120.         # Oracle doesn't allow EXISTS() to be compared to another expression
121.         # unless it's wrapped in a CASE WHEN.
122.         wrapped = False
123.         exprs = []
124.         for expr in (self.lhs, self.rhs):
125.             if isinstance(expr, Exists):
126.                 expr = Case(When(expr, then=True), default=False, output_field=BooleanField())
127.                 wrapped = True
128.             exprs.append(expr)
129.         lookup = type(self)(*exprs) if wrapped else self
130.         return lookup.as_sql(compiler, connection)
131. 
132.     @cached_property
133.     def contains_aggregate(self):
134.         return self.lhs.contains_aggregate or getattr(self.rhs, 'contains_aggregate', False)
135. 
136.     @cached_property
137.     def contains_over_clause(self):
138.         return self.lhs.contains_over_clause or getattr(self.rhs, 'contains_over_clause', False)
139. 
140.     @property
141.     def is_summary(self):
142.         return self.lhs.is_summary or getattr(self.rhs, 'is_summary', False)
143. 
144. 
145. class Transform(RegisterLookupMixin, Func):
146.     """
147.     RegisterLookupMixin() is first so that get_lookup() and get_transform()
148.     first examine self and then check output_field.
149.     """
150.     bilateral = False
151.     arity = 1
152. 
153.     @property
154.     def lhs(self):
155.         return self.get_source_expressions()[0]
156. 
157.     def get_bilateral_transforms(self):
158.         if hasattr(self.lhs, 'get_bilateral_transforms'):
159.             bilateral_transforms = self.lhs.get_bilateral_transforms()
160.         else:
161.             bilateral_transforms = []
162.         if self.bilateral:
163.             bilateral_transforms.append(self.__class__)
164.         return bilateral_transforms
165. 
166. 
167. class BuiltinLookup(Lookup):
168.     def process_lhs(self, compiler, connection, lhs=None):
169.         lhs_sql, params = super().process_lhs(compiler, connection, lhs)
170.         field_internal_type = self.lhs.output_field.get_internal_type()
171.         db_type = self.lhs.output_field.db_type(connection=connection)
172.         lhs_sql = connection.ops.field_cast_sql(
173.             db_type, field_internal_type) % lhs_sql
174.         lhs_sql = connection.ops.lookup_cast(self.lookup_name, field_internal_type) % lhs_sql
175.         return lhs_sql, list(params)
176. 
177.     def as_sql(self, compiler, connection):
178.         lhs_sql, params = self.process_lhs(compiler, connection)
179.         rhs_sql, rhs_params = self.process_rhs(compiler, connection)
180.         params.extend(rhs_params)
181.         rhs_sql = self.get_rhs_op(connection, rhs_sql)
182.         return '%s %s' % (lhs_sql, rhs_sql), params
183. 
184.     def get_rhs_op(self, connection, rhs):
185.         return connection.operators[self.lookup_name] % rhs
186. 
187. 
188. class FieldGetDbPrepValueMixin:
189.     """
190.     Some lookups require Field.get_db_prep_value() to be called on their
191.     inputs.
192.     """
193.     get_db_prep_lookup_value_is_iterable = False
194. 
195.     def get_db_prep_lookup(self, value, connection):
196.         # For relational fields, use the 'target_field' attribute of the
197.         # output_field.
198.         field = getattr(self.lhs.output_field, 'target_field', None)
199.         get_db_prep_value = getattr(field, 'get_db_prep_value', None) or self.lhs.output_field.get_db_prep_value
200.         return (
201.             '%s',
202.             [get_db_prep_value(v, connection, prepared=True) for v in value]
203.             if self.get_db_prep_lookup_value_is_iterable else
204.             [get_db_prep_value(value, connection, prepared=True)]
205.         )
206. 
207. 
208. class FieldGetDbPrepValueIterableMixin(FieldGetDbPrepValueMixin):
209.     """
210.     Some lookups require Field.get_db_prep_value() to be called on each value
211.     in an iterable.
212.     """
213.     get_db_prep_lookup_value_is_iterable = True
214. 
215.     def get_prep_lookup(self):
216.         if hasattr(self.rhs, 'resolve_expression'):
217.             return self.rhs
218.         prepared_values = []
219.         for rhs_value in self.rhs:
220.             if hasattr(rhs_value, 'resolve_expression'):
221.                 # An expression will be handled by the database but can coexist
222.                 # alongside real values.
223.                 pass
224.             elif self.prepare_rhs and hasattr(self.lhs.output_field, 'get_prep_value'):
225.                 rhs_value = self.lhs.output_field.get_prep_value(rhs_value)
226.             prepared_values.append(rhs_value)
227.         return prepared_values
228. 
229.     def process_rhs(self, compiler, connection):
230.         if self.rhs_is_direct_value():
231.             # rhs should be an iterable of values. Use batch_process_rhs()
232.             # to prepare/transform those values.
233.             return self.batch_process_rhs(compiler, connection)
234.         else:
235.             return super().process_rhs(compiler, connection)
236. 
237.     def resolve_expression_parameter(self, compiler, connection, sql, param):
238.         params = [param]
239.         if hasattr(param, 'resolve_expression'):
240.             param = param.resolve_expression(compiler.query)
241.         if hasattr(param, 'as_sql'):
242.             sql, params = param.as_sql(compiler, connection)
243.         return sql, params
244. 
245.     def batch_process_rhs(self, compiler, connection, rhs=None):
246.         pre_processed = super().batch_process_rhs(compiler, connection, rhs)
247.         # The params list may contain expressions which compile to a
248.         # sql/param pair. Zip them to get sql and param pairs that refer to the
249.         # same argument and attempt to replace them with the result of
250.         # compiling the param step.
251.         sql, params = zip(*(
252.             self.resolve_expression_parameter(compiler, connection, sql, param)
253.             for sql, param in zip(*pre_processed)
254.         ))
255.         params = itertools.chain.from_iterable(params)
256.         return sql, tuple(params)
257. 
258. 
259. class PostgresOperatorLookup(FieldGetDbPrepValueMixin, Lookup):
260.     """Lookup defined by operators on PostgreSQL."""
261.     postgres_operator = None
262. 
263.     def as_postgresql(self, compiler, connection):
264.         lhs, lhs_params = self.process_lhs(compiler, connection)
265.         rhs, rhs_params = self.process_rhs(compiler, connection)
266.         params = tuple(lhs_params) + tuple(rhs_params)
267.         return '%s %s %s' % (lhs, self.postgres_operator, rhs), params
268. 
269. 
270. @Field.register_lookup
271. class Exact(FieldGetDbPrepValueMixin, BuiltinLookup):
272.     lookup_name = 'exact'
273. 
274.     def process_rhs(self, compiler, connection):
275.         from django.db.models.sql.query import Query
276.         if isinstance(self.rhs, Query):
277.             if self.rhs.has_limit_one():
278.                 if not self.rhs.has_select_fields:
279.                     self.rhs.clear_select_clause()
280.                     self.rhs.add_fields(['pk'])
281.             else:
282.                 raise ValueError(
283.                     'The QuerySet value for an exact lookup must be limited to '
284.                     'one result using slicing.'
285.                 )
286.         return super().process_rhs(compiler, connection)
287. 
288.     def as_sql(self, compiler, connection):
289.         # Avoid comparison against direct rhs if lhs is a boolean value. That
290.         # turns "boolfield__exact=True" into "WHERE boolean_field" instead of
291.         # "WHERE boolean_field = True" when allowed.
292.         if (
293.             isinstance(self.rhs, bool) and
294.             getattr(self.lhs, 'conditional', False) and
295.             connection.ops.conditional_expression_supported_in_where_clause(self.lhs)
296.         ):
297.             lhs_sql, params = self.process_lhs(compiler, connection)
298.             template = '%s' if self.rhs else 'NOT %s'
299.             return template % lhs_sql, params
300.         return super().as_sql(compiler, connection)
301. 
302. 
303. @Field.register_lookup
304. class IExact(BuiltinLookup):
305.     lookup_name = 'iexact'
306.     prepare_rhs = False
307. 
308.     def process_rhs(self, qn, connection):
309.         rhs, params = super().process_rhs(qn, connection)
310.         if params:
311.             params[0] = connection.ops.prep_for_iexact_query(params[0])
312.         return rhs, params
313. 
314. 
315. @Field.register_lookup
316. class GreaterThan(FieldGetDbPrepValueMixin, BuiltinLookup):
317.     lookup_name = 'gt'
318. 
319. 
320. @Field.register_lookup
321. class GreaterThanOrEqual(FieldGetDbPrepValueMixin, BuiltinLookup):
322.     lookup_name = 'gte'
323. 
324. 
325. @Field.register_lookup
326. class LessThan(FieldGetDbPrepValueMixin, BuiltinLookup):
327.     lookup_name = 'lt'
328. 
329. 
330. @Field.register_lookup
331. class LessThanOrEqual(FieldGetDbPrepValueMixin, BuiltinLookup):
332.     lookup_name = 'lte'
333. 
334. 
335. class IntegerFieldFloatRounding:
336.     """
337.     Allow floats to work as query values for IntegerField. Without this, the
338.     decimal portion of the float would always be discarded.
339.     """
340.     def get_prep_lookup(self):
341.         if isinstance(self.rhs, float):
342.             self.rhs = math.ceil(self.rhs)
343.         return super().get_prep_lookup()
344. 
345. 
346. @IntegerField.register_lookup
347. class IntegerGreaterThanOrEqual(IntegerFieldFloatRounding, GreaterThanOrEqual):
348.     pass
349. 
350. 
351. @IntegerField.register_lookup
352. class IntegerLessThan(IntegerFieldFloatRounding, LessThan):
353.     pass
354. 
355. 
356. @Field.register_lookup
357. class In(FieldGetDbPrepValueIterableMixin, BuiltinLookup):
358.     lookup_name = 'in'
359. 
360.     def process_rhs(self, compiler, connection):
361.         db_rhs = getattr(self.rhs, '_db', None)
362.         if db_rhs is not None and db_rhs != connection.alias:
363.             raise ValueError(
364.                 "Subqueries aren't allowed across different databases. Force "
365.                 "the inner query to be evaluated using `list(inner_query)`."
366.             )
367. 
368.         if self.rhs_is_direct_value():
369.             try:
370.                 rhs = OrderedSet(self.rhs)
371.             except TypeError:  # Unhashable items in self.rhs
372.                 rhs = self.rhs
373. 
374.             if not rhs:
375.                 raise EmptyResultSet
376. 
377.             # rhs should be an iterable; use batch_process_rhs() to
378.             # prepare/transform those values.
379.             sqls, sqls_params = self.batch_process_rhs(compiler, connection, rhs)
380.             placeholder = '(' + ', '.join(sqls) + ')'
381.             return (placeholder, sqls_params)
382.         else:
383.             if not getattr(self.rhs, 'has_select_fields', True):
384.                 self.rhs.clear_select_clause()
385.                 self.rhs.add_fields(['pk'])
386.             return super().process_rhs(compiler, connection)
387. 
388.     def get_rhs_op(self, connection, rhs):
389.         return 'IN %s' % rhs
390. 
391.     def as_sql(self, compiler, connection):
392.         max_in_list_size = connection.ops.max_in_list_size()
393.         if self.rhs_is_direct_value() and max_in_list_size and len(self.rhs) > max_in_list_size:
394.             return self.split_parameter_list_as_sql(compiler, connection)
395.         return super().as_sql(compiler, connection)
396. 
397.     def split_parameter_list_as_sql(self, compiler, connection):
398.         # This is a special case for databases which limit the number of
399.         # elements which can appear in an 'IN' clause.
400.         max_in_list_size = connection.ops.max_in_list_size()
401.         lhs, lhs_params = self.process_lhs(compiler, connection)
402.         rhs, rhs_params = self.batch_process_rhs(compiler, connection)
403.         in_clause_elements = ['(']
404.         params = []
405.         for offset in range(0, len(rhs_params), max_in_list_size):
406.             if offset > 0:
407.                 in_clause_elements.append(' OR ')
408.             in_clause_elements.append('%s IN (' % lhs)
409.             params.extend(lhs_params)
410.             sqls = rhs[offset: offset + max_in_list_size]
411.             sqls_params = rhs_params[offset: offset + max_in_list_size]
412.             param_group = ', '.join(sqls)
413.             in_clause_elements.append(param_group)
414.             in_clause_elements.append(')')
415.             params.extend(sqls_params)
416.         in_clause_elements.append(')')
417.         return ''.join(in_clause_elements), params
418. 
419. 
420. class PatternLookup(BuiltinLookup):
421.     param_pattern = '%%%s%%'
422.     prepare_rhs = False
423. 
424.     def get_rhs_op(self, connection, rhs):
425.         # Assume we are in startswith. We need to produce SQL like:
426.         #     col LIKE %s, ['thevalue%']
427.         # For python values we can (and should) do that directly in Python,
428.         # but if the value is for example reference to other column, then
429.         # we need to add the % pattern match to the lookup by something like
430.         #     col LIKE othercol || '%%'
431.         # So, for Python values we don't need any special pattern, but for
432.         # SQL reference values or SQL transformations we need the correct
433.         # pattern added.
434.         if hasattr(self.rhs, 'as_sql') or self.bilateral_transforms:
435.             pattern = connection.pattern_ops[self.lookup_name].format(connection.pattern_esc)
436.             return pattern.format(rhs)
437.         else:
438.             return super().get_rhs_op(connection, rhs)
439. 
440.     def process_rhs(self, qn, connection):
441.         rhs, params = super().process_rhs(qn, connection)
442.         if self.rhs_is_direct_value() and params and not self.bilateral_transforms:
443.             params[0] = self.param_pattern % connection.ops.prep_for_like_query(params[0])
444.         return rhs, params
445. 
446. 
447. @Field.register_lookup
448. class Contains(PatternLookup):
449.     lookup_name = 'contains'
450. 
451. 
452. @Field.register_lookup
453. class IContains(Contains):
454.     lookup_name = 'icontains'
455. 
456. 
457. @Field.register_lookup
458. class StartsWith(PatternLookup):
459.     lookup_name = 'startswith'
460.     param_pattern = '%s%%'
461. 
462. 
463. @Field.register_lookup
464. class IStartsWith(StartsWith):
465.     lookup_name = 'istartswith'
466. 
467. 
468. @Field.register_lookup
469. class EndsWith(PatternLookup):
470.     lookup_name = 'endswith'
471.     param_pattern = '%%%s'
472. 
473. 
474. @Field.register_lookup
475. class IEndsWith(EndsWith):
476.     lookup_name = 'iendswith'
477. 
478. 
479. @Field.register_lookup
480. class Range(FieldGetDbPrepValueIterableMixin, BuiltinLookup):
481.     lookup_name = 'range'
482. 
483.     def get_rhs_op(self, connection, rhs):
484.         return "BETWEEN %s AND %s" % (rhs[0], rhs[1])
485. 
486. 
487. @Field.register_lookup
488. class IsNull(BuiltinLookup):
489.     lookup_name = 'isnull'
490.     prepare_rhs = False
491. 
492.     def as_sql(self, compiler, connection):
493.         if not isinstance(self.rhs, bool):
494.             # When the deprecation ends, replace with:
495.             # raise ValueError(
496.             #     'The QuerySet value for an isnull lookup must be True or '
497.             #     'False.'
498.             # )
499.             warnings.warn(
500.                 'Using a non-boolean value for an isnull lookup is '


File: django/db/models/lookups.py
Line number range: 501 - 1000
Content:
501.                 'deprecated, use True or False instead.',
502.                 RemovedInDjango40Warning,
503.             )
504.         sql, params = compiler.compile(self.lhs)
505.         if self.rhs:
506.             return "%s IS NULL" % sql, params
507.         else:
508.             return "%s IS NOT NULL" % sql, params
509. 
510. 
511. @Field.register_lookup
512. class Regex(BuiltinLookup):
513.     lookup_name = 'regex'
514.     prepare_rhs = False
515. 
516.     def as_sql(self, compiler, connection):
517.         if self.lookup_name in connection.operators:
518.             return super().as_sql(compiler, connection)
519.         else:
520.             lhs, lhs_params = self.process_lhs(compiler, connection)
521.             rhs, rhs_params = self.process_rhs(compiler, connection)
522.             sql_template = connection.ops.regex_lookup(self.lookup_name)
523.             return sql_template % (lhs, rhs), lhs_params + rhs_params
524. 
525. 
526. @Field.register_lookup
527. class IRegex(Regex):
528.     lookup_name = 'iregex'
529. 
530. 
531. class YearLookup(Lookup):
532.     def year_lookup_bounds(self, connection, year):
533.         output_field = self.lhs.lhs.output_field
534.         if isinstance(output_field, DateTimeField):
535.             bounds = connection.ops.year_lookup_bounds_for_datetime_field(year)
536.         else:
537.             bounds = connection.ops.year_lookup_bounds_for_date_field(year)
538.         return bounds
539. 
540.     def as_sql(self, compiler, connection):
541.         # Avoid the extract operation if the rhs is a direct value to allow
542.         # indexes to be used.
543.         if self.rhs_is_direct_value():
544.             # Skip the extract part by directly using the originating field,
545.             # that is self.lhs.lhs.
546.             lhs_sql, params = self.process_lhs(compiler, connection, self.lhs.lhs)
547.             rhs_sql, _ = self.process_rhs(compiler, connection)
548.             rhs_sql = self.get_direct_rhs_sql(connection, rhs_sql)
549.             start, finish = self.year_lookup_bounds(connection, self.rhs)
550.             params.extend(self.get_bound_params(start, finish))
551.             return '%s %s' % (lhs_sql, rhs_sql), params
552.         return super().as_sql(compiler, connection)
553. 
554.     def get_direct_rhs_sql(self, connection, rhs):
555.         return connection.operators[self.lookup_name] % rhs
556. 
557.     def get_bound_params(self, start, finish):
558.         raise NotImplementedError(
559.             'subclasses of YearLookup must provide a get_bound_params() method'
560.         )
561. 
562. 
563. class YearExact(YearLookup, Exact):
564.     def get_direct_rhs_sql(self, connection, rhs):
565.         return 'BETWEEN %s AND %s'
566. 
567.     def get_bound_params(self, start, finish):
568.         return (start, finish)
569. 
570. 
571. class YearGt(YearLookup, GreaterThan):
572.     def get_bound_params(self, start, finish):
573.         return (finish,)
574. 
575. 
576. class YearGte(YearLookup, GreaterThanOrEqual):
577.     def get_bound_params(self, start, finish):
578.         return (start,)
579. 
580. 
581. class YearLt(YearLookup, LessThan):
582.     def get_bound_params(self, start, finish):
583.         return (start,)
584. 
585. 
586. class YearLte(YearLookup, LessThanOrEqual):
587.     def get_bound_params(self, start, finish):
588.         return (finish,)
589. 
590. 
591. class UUIDTextMixin:
592.     """
593.     Strip hyphens from a value when filtering a UUIDField on backends without
594.     a native datatype for UUID.
595.     """
596.     def process_rhs(self, qn, connection):
597.         if not connection.features.has_native_uuid_field:
598.             from django.db.models.functions import Replace
599.             if self.rhs_is_direct_value():
600.                 self.rhs = Value(self.rhs)
601.             self.rhs = Replace(self.rhs, Value('-'), Value(''), output_field=CharField())
602.         rhs, params = super().process_rhs(qn, connection)
603.         return rhs, params
604. 
605. 
606. @UUIDField.register_lookup
607. class UUIDIExact(UUIDTextMixin, IExact):
608.     pass
609. 
610. 
611. @UUIDField.register_lookup
612. class UUIDContains(UUIDTextMixin, Contains):
613.     pass
614. 
615. 
616. @UUIDField.register_lookup
617. class UUIDIContains(UUIDTextMixin, IContains):
618.     pass
619. 
620. 
621. @UUIDField.register_lookup
622. class UUIDStartsWith(UUIDTextMixin, StartsWith):
623.     pass
624. 
625. 
626. @UUIDField.register_lookup
627. class UUIDIStartsWith(UUIDTextMixin, IStartsWith):
628.     pass
629. 
630. 
631. @UUIDField.register_lookup
632. class UUIDEndsWith(UUIDTextMixin, EndsWith):
633.     pass
634. 
635. 
636. @UUIDField.register_lookup
637. class UUIDIEndsWith(UUIDTextMixin, IEndsWith):
638.     pass

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-21 21:48:02,182 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The user requested the full content of the file `django/db/models/lookups.py`. The provided context contains the entire file content, so I am returning the whole file as a single context.', relative_path='django/db/models/lookups.py', start_line=1, end_line=638)]
2025-12-21 21:48:02,184 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file `django/db/models/lookups.py`.
2025-12-21 21:48:02,184 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-21 21:48:02,184 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-21 21:48:02,185 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 3 existing contexts
2025-12-21 21:48:02,185 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-21 21:48:02,185 - thread-126740888291008.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-21 21:48:02,186 - thread-126740888291008.prometheus_context_collector - INFO - Successfully retrieved 4 context snippets
