2025-12-24 21:13:56,953 - thread-128180010612416.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Django Admin with Inlines not using UUIDField default value

Description: Description
	 
		(last modified by Joseph Metzinger)
	 
Hello,
I am a long time django user, first time bug reporter, so please let me know if I need to do anything else to help get this bug fixed :)
I am using Django 3.1.3 and python 3.8.5 and have cerated a toy project to illustrate the bug. I have the following models:
class UUIDModel(models.Model):
	pkid = models.BigAutoField(primary_key=True, editable=False)
	id = models.UUIDField(default=uuid.uuid4, editable=False, unique=True)
	class Meta:
		abstract = True
class Thing(UUIDModel):
	name = models.CharField(max_length=191)
class SubThing(models.Model):
	name = models.CharField(max_length=191)
	thing = models.ForeignKey(
		'bugapp.Thing',
		to_field='id',
		on_delete = models.CASCADE,
		related_name='subthings',
	)
And the following admin.py file:
class SubThingInline(admin.StackedInline):
	model = SubThing
@admin.register(Thing)
class ThingAdmin(admin.ModelAdmin):
	list_display = ('name',)
	ordering = ('pkid',)
	inlines = (SubThingInline,)
When logging into the admin, if you delete all of the entries for "subthings", add a name, and save the model, it will work. As soon as you try to add a subthing alongside the main Thing, it fails with the following exception:
​https://dpaste.com/8EU4FF6RW
It shows that the value of "id" in the Thing model is being set to null.
I believe this is a bug in django.
Thanks!

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index 3fa04b821f..13b46b1e43 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1170,14 +1170,24 @@ class BaseInlineFormSet(BaseModelFormSet):
         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
             kwargs["to_field"] = self.fk.remote_field.field_name
 
-        # If we're adding a new object, ignore a parent's auto-generated key
-        # as it will be regenerated on the save request.
+        # If we're adding a new object, ignore a parent's auto-incrementing primary key
+        # as it will be regenerated on the save request. Preserve fields with
+        # Python-level defaults (e.g., UUIDField) and non-PK to_field targets.
         if self.instance._state.adding:
             if kwargs.get("to_field") is not None:
                 to_field = self.instance._meta.get_field(kwargs["to_field"])
             else:
                 to_field = self.instance._meta.pk
-            if to_field.has_default():
+            # Only clear database auto-increment primary keys; do not clear fields
+            # that rely on Python-level defaults such as UUIDField.
+            from django.db import models
+            if (
+                to_field == self.instance._meta.pk
+                and isinstance(
+                    to_field,
+                    (models.AutoField, models.BigAutoField, models.SmallAutoField),
+                )
+            ):
                 setattr(self.instance, to_field.attname, None)
 
         form.fields[name] = InlineForeignKeyField(self.instance, **kwargs)


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

2025-12-24 21:13:57,064 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── benchmark.yml
|       ├── data
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       ├── schedule_tests.yml
|       ├── schedules.yml
|       ├── selenium.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ckb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_IE
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   └── options.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── filesystem.py
|   |   |   |   ├── handler.py
|   |   |   |   ├── memory.py
|   |   |   |   └── mixins.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── optimizemigration.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── psycopg_any.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _functions.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── csrf_403.html
|           ├── default_urlconf.html
|           ├── directory_index.html
|           ├── i18n_catalog.js
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── csrf.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   ├── tutorial08.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.26.txt
|   |   ├── 2.2.27.txt
|   |   ├── 2.2.28.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.11.txt
|   |   ├── 3.2.12.txt
|   |   ├── 3.2.13.txt
|   |   ├── 3.2.14.txt
|   |   ├── 3.2.15.txt
|   |   ├── 3.2.16.txt
|   |   ├── 3.2.17.txt
|   |   ├── 3.2.18.txt
|   |   ├── 3.2.19.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.20.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.10.txt
|   |   ├── 4.0.2.txt
|   |   ├── 4.0.3.txt
|   |   ├── 4.0.4.txt
|   |   ├── 4.0.5.txt
|   |   ├── 4.0.6.txt
|   |   ├── 4.0.7.txt
|   |   ├── 4.0.8.txt
|   |   ├── 4.0.9.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.1.txt
|   |   ├── 4.1.10.txt
|   |   ├── 4.1.2.txt
|   |   ├── 4.1.3.txt
|   |   ├── 4.1.4.txt
|   |   ├── 4.1.5.txt
|   |   ├── 4.1.6.txt
|   |   ├── 4.1.7.txt
|   |   ├── 4.1.8.txt
|   |   ├── 4.1.9.txt
|   |   ├── 4.1.txt
|   |   ├── 4.2.1.txt
|   |   ├── 4.2.2.txt
|   |   ├── 4.2.3.txt
|   |   ├── 4.2.4.txt
|   |   ├── 4.2.txt
|   |   ├── 5.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── fixtures.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_breadcrumbs.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_related_object_lookups.py
    |   ├── test_skip_link_to_content.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_auth.py
    |   ├── test_async_model_methods.py
    |   ├── test_async_queryset.py
    |   ├── test_async_related_managers.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   ├── with_many_to_many.py
    |   |   └── with_unique_constraint.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_functions.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_migrations.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   ├── test_cache.py
    |   ├── test_clickjacking.py
    |   ├── test_common.py
    |   ├── test_http.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   ├── test_storages.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── test_inmemory_storage.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       ├── custom_field.html
    |   |       ├── custom_widget.html
    |   |       ├── cyclic_context_boundfield_render.html
    |   |       ├── error.html
    |   |       ├── form_snippet.html
    |   |       ├── legend_test.html
    |   |       └── use_fieldset.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_manual_porting
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_noop
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_no_replaces
    |   |   ├── 0001_squashed_0002.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests_tests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_lastmod_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── nonutf8
    |   |   |   └── nonutf8.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_escapeseq.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Django Admin with Inlines not using UUIDField default value

Description: Description
	 
		(last modified by Joseph Metzinger)
	 
Hello,
I am a long time django user, first time bug reporter, so please let me know if I need to do anything else to help get this bug fixed :)
I am using Django 3.1.3 and python 3.8.5 and have cerated a toy project to illustrate the bug. I have the following models:
class UUIDModel(models.Model):
	pkid = models.BigAutoField(primary_key=True, editable=False)
	id = models.UUIDField(default=uuid.uuid4, editable=False, unique=True)
	class Meta:
		abstract = True
class Thing(UUIDModel):
	name = models.CharField(max_length=191)
class SubThing(models.Model):
	name = models.CharField(max_length=191)
	thing = models.ForeignKey(
		'bugapp.Thing',
		to_field='id',
		on_delete = models.CASCADE,
		related_name='subthings',
	)
And the following admin.py file:
class SubThingInline(admin.StackedInline):
	model = SubThing
@admin.register(Thing)
class ThingAdmin(admin.ModelAdmin):
	list_display = ('name',)
	ordering = ('pkid',)
	inlines = (SubThingInline,)
When logging into the admin, if you delete all of the entries for "subthings", add a name, and save the model, it will work. As soon as you try to add a subthing alongside the main Thing, it fails with the following exception:
​https://dpaste.com/8EU4FF6RW
It shows that the value of "id" in the Thing model is being set to null.
I believe this is a bug in django.
Thanks!

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index 3fa04b821f..13b46b1e43 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1170,14 +1170,24 @@ class BaseInlineFormSet(BaseModelFormSet):
         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
             kwargs["to_field"] = self.fk.remote_field.field_name
 
-        # If we're adding a new object, ignore a parent's auto-generated key
-        # as it will be regenerated on the save request.
+        # If we're adding a new object, ignore a parent's auto-incrementing primary key
+        # as it will be regenerated on the save request. Preserve fields with
+        # Python-level defaults (e.g., UUIDField) and non-PK to_field targets.
         if self.instance._state.adding:
             if kwargs.get("to_field") is not None:
                 to_field = self.instance._meta.get_field(kwargs["to_field"])
             else:
                 to_field = self.instance._meta.pk
-            if to_field.has_default():
+            # Only clear database auto-increment primary keys; do not clear fields
+            # that rely on Python-level defaults such as UUIDField.
+            from django.db import models
+            if (
+                to_field == self.instance._meta.pk
+                and isinstance(
+                    to_field,
+                    (models.AutoField, models.BigAutoField, models.SmallAutoField),
+                )
+            ):
                 setattr(self.instance, to_field.attname, None)
 
         form.fields[name] = InlineForeignKeyField(self.instance, **kwargs)


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 21:14:32,905 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's bug report and patch point directly to an issue within the `BaseInlineFormSet` class in `django/forms/models.py`. To fully understand the problem and the proposed solution, I need to examine the complete implementation of `BaseInlineFormSet`, its parent class `BaseModelFormSet`, and the `inlineformset_factory` that creates it, all of which are located in this file." query='Please provide the full content of django/forms/models.py.' extra_requirements='' purpose=''
2025-12-24 21:14:32,906 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of django/forms/models.py.
2025-12-24 21:14:32,906 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 21:14:32,907 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 21:14:32,908 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 21:14:32,908 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of django/forms/models.py.
2025-12-24 21:14:35,112 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/forms/models.py"}'}, '__gemini_function_call_thought_signatures__': {'0488c052-acdc-40b3-be56-5051e5581ff6': 'CvQEAY89a19M7gw+TF7LUEk4VGnf52QfQN7IkHxfjUW+4Im5CWcK52ilvtuuvCGoUZQUTx3xPKh0/WmyiB9tbxtYERwWD/li5HFZQsybVTVxsZRr5TcSuMRW6KlNREO9zq4AyUkxxNGKHcgR4NDKyhM8suksyB6xAaiMQXoGWcGfHXEI1Pz0ZO9AMZ+uan9R3+aDzjEr5HoMd9VT+G76RNyOGkRK2IRHvasqWe86bWpfR5Eia7WDf3EPu0HGwTszlmvnYKrAc5wnfF6qPUIamz7WsPuJzPNt/74Sz4zIEkM9iHRL/gaXNNW0jMkD0qnvwopSb/mEvCkDia9iJAPYROMcAOKbX0Ujvz3tpIkmid4A+cu/lXVIzShIp+jCKg561jhiWC+nk2VslVHn4pnDE8DleQS/R3ezKPQnUzARUBuBrpDu0WVutveAohyD68YGFUaTJpLh2aaPY/C2yDUluh4+b8K0IbZ39Go5IDorbJpPq+SkpHB8BIfzJ0XBCitQve1JmAyIvUdd9hIqD/2BGvm0QxAOZs1YZ6sKWYBT1O3D0hV2c8/sVBcZIIpl9lY94UOHepiV5ktRK/D8N3Mvm5bG5h+OP2AuUeKL1l6RCtFStrC/lXDw7TzMAhiQZHT7OqrYNdfLBENdxUlBmHOZDkwEKlyU9w6S9UYma6q66tzkyeSlT9FRnGQgDGHW6MCE9w2Ltz/3LDu6up5POg8ZikSFoezRsFpksNO6LNexnvhR/LTll+5q/FlNXblBsug1aGQLHZvGd1W4Xw2mnjaRu958DFtqRNqx/Ua2qii9HJhIGFZj4c5tvndxhgNgxFhaDnB3269n/w=='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2071, 'candidates_token_count': 21, 'total_token_count': 2242, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2071}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 21}], 'thoughts_token_count': 150, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.3432706424168178, 'model_name': 'gemini-2.5-pro'} id='run--a73f2a65-d156-4a89-8ffc-368f5e409641-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/forms/models.py'}, 'id': '0488c052-acdc-40b3-be56-5051e5581ff6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2071, 'output_tokens': 21, 'total_tokens': 2242, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 150}}
2025-12-24 21:14:37,453 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "end_line": 2000.0, "relative_path": "django/forms/models.py"}'}, '__gemini_function_call_thought_signatures__': {'1ff55106-4f43-480c-8a0b-24bfa71f4fe6': 'CtMDAY89a1+x70S5FC+a091BEBXQjDm1qMz90b02d4bOAT1m5IEWU6uDWUzTwsUxf1K27yylHCNTHn2rD+qH+G1+ouXw4FUz1mGU0LfvS4uMCqCNIfJx6AswuZ7nPYLeUhUKN5vSbI43Or+4eirkZJEMN2jmS+DllhSk5BrL3c28Ar6TLBGHxE9mbQklwCFlLi/X8CdfdCsoN1R0Tkxmj8IcnG7+B9V+qbB4TD/Yh4nWjljDo8qAxpV/l8CcN5MGTP8ODIlF0yzEAit71WJw4hXrzsq8hd8Xj3HGFPuDYGzjst6d9VT9P+D2/ZfqA/nN3ybOlqP/vTLPXv2tQKikZRE4jFNXCebsfFjPJ/29SnYU4dkr0zNnnEQ9ayue36JmvQUOsMZ3Bp1cU6zZVWyOe6jC30yICofatFAOXwlUbx3ImuQzlneHx46/Jkg0zOfrvgxh318TZuFXimpvFMZFmkI6OisiyMsjpVlsQggYfxrykjuIPAEPU3bUrL+d8IJLqcUggcxjNPgmZzvwBirm0gyXyR1aA742ZybO62HOuT3Ydf3c+dqAGrv7DObjamGeYSIt1Uw9HvOZ0vhEPLM7T98ebBX11edyYbkFL9ciHAkJEtZiMzM='}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8917, 'candidates_token_count': 27, 'total_token_count': 9072, 'cached_content_token_count': 1842, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9067}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1842}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 27}], 'thoughts_token_count': 128}, 'finish_reason': 'STOP', 'avg_logprobs': -0.33520076892994066, 'model_name': 'gemini-2.5-pro'} id='run--83220148-5af1-489b-869b-1b843c58b2b6-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'end_line': 2000.0, 'relative_path': 'django/forms/models.py'}, 'id': '1ff55106-4f43-480c-8a0b-24bfa71f4fe6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8917, 'output_tokens': 27, 'total_tokens': 9072, 'input_token_details': {'cache_read': 1842}, 'output_token_details': {'reasoning': 128}}
2025-12-24 21:14:39,925 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of the file `django/forms/models.py`. Initially, I used a tool to read the beginning of the file, which returned the first 500 lines. To get the remaining content, I used another tool to read from line 501 to the end of the file, ensuring the complete file content was retrieved.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 25840, 'candidates_token_count': 76, 'total_token_count': 25996, 'cached_content_token_count': 7758, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26118}], 'cache_tokens_details': [{'modality': 1, 'token_count': 7758}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 76}], 'thoughts_token_count': 80}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16601812212090744, 'model_name': 'gemini-2.5-pro'} id='run--96b7badc-4d77-4413-94d7-9caeb8f611a3-0' usage_metadata={'input_tokens': 25840, 'output_tokens': 76, 'total_tokens': 25996, 'input_token_details': {'cache_read': 7758}, 'output_token_details': {'reasoning': 80}}
2025-12-24 21:14:39,927 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of django/forms/models.py.
--- END QUERY ---





The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/forms/models.py
Line number range: 1 - 500
Content:
1. """
2. Helper functions for creating Form classes from Django models
3. and database field objects.
4. """
5. from itertools import chain
6. 
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS,
9.     FieldError,
10.     ImproperlyConfigured,
11.     ValidationError,
12. )
13. from django.db.models.utils import AltersData
14. from django.forms.fields import ChoiceField, Field
15. from django.forms.forms import BaseForm, DeclarativeFieldsMetaclass
16. from django.forms.formsets import BaseFormSet, formset_factory
17. from django.forms.utils import ErrorList
18. from django.forms.widgets import (
19.     HiddenInput,
20.     MultipleHiddenInput,
21.     RadioSelect,
22.     SelectMultiple,
23. )
24. from django.utils.text import capfirst, get_text_list
25. from django.utils.translation import gettext
26. from django.utils.translation import gettext_lazy as _
27. 
28. __all__ = (
29.     "ModelForm",
30.     "BaseModelForm",
31.     "model_to_dict",
32.     "fields_for_model",
33.     "ModelChoiceField",
34.     "ModelMultipleChoiceField",
35.     "ALL_FIELDS",
36.     "BaseModelFormSet",
37.     "modelformset_factory",
38.     "BaseInlineFormSet",
39.     "inlineformset_factory",
40.     "modelform_factory",
41. )
42. 
43. ALL_FIELDS = "__all__"
44. 
45. 
46. def construct_instance(form, instance, fields=None, exclude=None):
47.     """
48.     Construct and return a model instance from the bound ``form``'s
49.     ``cleaned_data``, but do not save the returned instance to the database.
50.     """
51.     from django.db import models
52. 
53.     opts = instance._meta
54. 
55.     cleaned_data = form.cleaned_data
56.     file_field_list = []
57.     for f in opts.fields:
58.         if (
59.             not f.editable
60.             or isinstance(f, models.AutoField)
61.             or f.name not in cleaned_data
62.         ):
63.             continue
64.         if fields is not None and f.name not in fields:
65.             continue
66.         if exclude and f.name in exclude:
67.             continue
68.         # Leave defaults for fields that aren't in POST data, except for
69.         # checkbox inputs because they don't appear in POST data if not checked.
70.         if (
71.             f.has_default()
72.             and form[f.name].field.widget.value_omitted_from_data(
73.                 form.data, form.files, form.add_prefix(f.name)
74.             )
75.             and cleaned_data.get(f.name) in form[f.name].field.empty_values
76.         ):
77.             continue
78.         # Defer saving file-type fields until after the other fields, so a
79.         # callable upload_to can use the values from other fields.
80.         if isinstance(f, models.FileField):
81.             file_field_list.append(f)
82.         else:
83.             f.save_form_data(instance, cleaned_data[f.name])
84. 
85.     for f in file_field_list:
86.         f.save_form_data(instance, cleaned_data[f.name])
87. 
88.     return instance
89. 
90. 
91. # ModelForms #################################################################
92. 
93. 
94. def model_to_dict(instance, fields=None, exclude=None):
95.     """
96.     Return a dict containing the data in ``instance`` suitable for passing as
97.     a Form's ``initial`` keyword argument.
98. 
99.     ``fields`` is an optional list of field names. If provided, return only the
100.     named.
101. 
102.     ``exclude`` is an optional list of field names. If provided, exclude the
103.     named from the returned dict, even if they are listed in the ``fields``
104.     argument.
105.     """
106.     opts = instance._meta
107.     data = {}
108.     for f in chain(opts.concrete_fields, opts.private_fields, opts.many_to_many):
109.         if not getattr(f, "editable", False):
110.             continue
111.         if fields is not None and f.name not in fields:
112.             continue
113.         if exclude and f.name in exclude:
114.             continue
115.         data[f.name] = f.value_from_object(instance)
116.     return data
117. 
118. 
119. def apply_limit_choices_to_to_formfield(formfield):
120.     """Apply limit_choices_to to the formfield's queryset if needed."""
121.     from django.db.models import Exists, OuterRef, Q
122. 
123.     if hasattr(formfield, "queryset") and hasattr(formfield, "get_limit_choices_to"):
124.         limit_choices_to = formfield.get_limit_choices_to()
125.         if limit_choices_to:
126.             complex_filter = limit_choices_to
127.             if not isinstance(complex_filter, Q):
128.                 complex_filter = Q(**limit_choices_to)
129.             complex_filter &= Q(pk=OuterRef("pk"))
130.             # Use Exists() to avoid potential duplicates.
131.             formfield.queryset = formfield.queryset.filter(
132.                 Exists(formfield.queryset.model._base_manager.filter(complex_filter)),
133.             )
134. 
135. 
136. def fields_for_model(
137.     model,
138.     fields=None,
139.     exclude=None,
140.     widgets=None,
141.     formfield_callback=None,
142.     localized_fields=None,
143.     labels=None,
144.     help_texts=None,
145.     error_messages=None,
146.     field_classes=None,
147.     *,
148.     apply_limit_choices_to=True,
149.     form_declared_fields=None,
150. ):
151.     """
152.     Return a dictionary containing form fields for the given model.
153. 
154.     ``fields`` is an optional list of field names. If provided, return only the
155.     named fields.
156. 
157.     ``exclude`` is an optional list of field names. If provided, exclude the
158.     named fields from the returned fields, even if they are listed in the
159.     ``fields`` argument.
160. 
161.     ``widgets`` is a dictionary of model field names mapped to a widget.
162. 
163.     ``formfield_callback`` is a callable that takes a model field and returns
164.     a form field.
165. 
166.     ``localized_fields`` is a list of names of fields which should be localized.
167. 
168.     ``labels`` is a dictionary of model field names mapped to a label.
169. 
170.     ``help_texts`` is a dictionary of model field names mapped to a help text.
171. 
172.     ``error_messages`` is a dictionary of model field names mapped to a
173.     dictionary of error messages.
174. 
175.     ``field_classes`` is a dictionary of model field names mapped to a form
176.     field class.
177. 
178.     ``apply_limit_choices_to`` is a boolean indicating if limit_choices_to
179.     should be applied to a field's queryset.
180. 
181.     ``form_declared_fields`` is a dictionary of form fields created directly on
182.     a form.
183.     """
184.     form_declared_fields = form_declared_fields or {}
185.     field_dict = {}
186.     ignored = []
187.     opts = model._meta
188.     # Avoid circular import
189.     from django.db.models import Field as ModelField
190. 
191.     sortable_private_fields = [
192.         f for f in opts.private_fields if isinstance(f, ModelField)
193.     ]
194.     for f in sorted(
195.         chain(opts.concrete_fields, sortable_private_fields, opts.many_to_many)
196.     ):
197.         if not getattr(f, "editable", False):
198.             if (
199.                 fields is not None
200.                 and f.name in fields
201.                 and (exclude is None or f.name not in exclude)
202.             ):
203.                 raise FieldError(
204.                     "'%s' cannot be specified for %s model form as it is a "
205.                     "non-editable field" % (f.name, model.__name__)
206.                 )
207.             continue
208.         if fields is not None and f.name not in fields:
209.             continue
210.         if exclude and f.name in exclude:
211.             continue
212.         if f.name in form_declared_fields:
213.             field_dict[f.name] = form_declared_fields[f.name]
214.             continue
215. 
216.         kwargs = {}
217.         if widgets and f.name in widgets:
218.             kwargs["widget"] = widgets[f.name]
219.         if localized_fields == ALL_FIELDS or (
220.             localized_fields and f.name in localized_fields
221.         ):
222.             kwargs["localize"] = True
223.         if labels and f.name in labels:
224.             kwargs["label"] = labels[f.name]
225.         if help_texts and f.name in help_texts:
226.             kwargs["help_text"] = help_texts[f.name]
227.         if error_messages and f.name in error_messages:
228.             kwargs["error_messages"] = error_messages[f.name]
229.         if field_classes and f.name in field_classes:
230.             kwargs["form_class"] = field_classes[f.name]
231. 
232.         if formfield_callback is None:
233.             formfield = f.formfield(**kwargs)
234.         elif not callable(formfield_callback):
235.             raise TypeError("formfield_callback must be a function or callable")
236.         else:
237.             formfield = formfield_callback(f, **kwargs)
238. 
239.         if formfield:
240.             if apply_limit_choices_to:
241.                 apply_limit_choices_to_to_formfield(formfield)
242.             field_dict[f.name] = formfield
243.         else:
244.             ignored.append(f.name)
245.     if fields:
246.         field_dict = {
247.             f: field_dict.get(f)
248.             for f in fields
249.             if (not exclude or f not in exclude) and f not in ignored
250.         }
251.     return field_dict
252. 
253. 
254. class ModelFormOptions:
255.     def __init__(self, options=None):
256.         self.model = getattr(options, "model", None)
257.         self.fields = getattr(options, "fields", None)
258.         self.exclude = getattr(options, "exclude", None)
259.         self.widgets = getattr(options, "widgets", None)
260.         self.localized_fields = getattr(options, "localized_fields", None)
261.         self.labels = getattr(options, "labels", None)
262.         self.help_texts = getattr(options, "help_texts", None)
263.         self.error_messages = getattr(options, "error_messages", None)
264.         self.field_classes = getattr(options, "field_classes", None)
265.         self.formfield_callback = getattr(options, "formfield_callback", None)
266. 
267. 
268. class ModelFormMetaclass(DeclarativeFieldsMetaclass):
269.     def __new__(mcs, name, bases, attrs):
270.         new_class = super().__new__(mcs, name, bases, attrs)
271. 
272.         if bases == (BaseModelForm,):
273.             return new_class
274. 
275.         opts = new_class._meta = ModelFormOptions(getattr(new_class, "Meta", None))
276. 
277.         # We check if a string was passed to `fields` or `exclude`,
278.         # which is likely to be a mistake where the user typed ('foo') instead
279.         # of ('foo',)
280.         for opt in ["fields", "exclude", "localized_fields"]:
281.             value = getattr(opts, opt)
282.             if isinstance(value, str) and value != ALL_FIELDS:
283.                 msg = (
284.                     "%(model)s.Meta.%(opt)s cannot be a string. "
285.                     "Did you mean to type: ('%(value)s',)?"
286.                     % {
287.                         "model": new_class.__name__,
288.                         "opt": opt,
289.                         "value": value,
290.                     }
291.                 )
292.                 raise TypeError(msg)
293. 
294.         if opts.model:
295.             # If a model is defined, extract form fields from it.
296.             if opts.fields is None and opts.exclude is None:
297.                 raise ImproperlyConfigured(
298.                     "Creating a ModelForm without either the 'fields' attribute "
299.                     "or the 'exclude' attribute is prohibited; form %s "
300.                     "needs updating." % name
301.                 )
302. 
303.             if opts.fields == ALL_FIELDS:
304.                 # Sentinel for fields_for_model to indicate "get the list of
305.                 # fields from the model"
306.                 opts.fields = None
307. 
308.             fields = fields_for_model(
309.                 opts.model,
310.                 opts.fields,
311.                 opts.exclude,
312.                 opts.widgets,
313.                 opts.formfield_callback,
314.                 opts.localized_fields,
315.                 opts.labels,
316.                 opts.help_texts,
317.                 opts.error_messages,
318.                 opts.field_classes,
319.                 # limit_choices_to will be applied during ModelForm.__init__().
320.                 apply_limit_choices_to=False,
321.                 form_declared_fields=new_class.declared_fields,
322.             )
323. 
324.             # make sure opts.fields doesn't specify an invalid field
325.             none_model_fields = {k for k, v in fields.items() if not v}
326.             missing_fields = none_model_fields.difference(new_class.declared_fields)
327.             if missing_fields:
328.                 message = "Unknown field(s) (%s) specified for %s"
329.                 message %= (", ".join(missing_fields), opts.model.__name__)
330.                 raise FieldError(message)
331.             # Include all the other declared fields.
332.             fields.update(new_class.declared_fields)
333.         else:
334.             fields = new_class.declared_fields
335. 
336.         new_class.base_fields = fields
337. 
338.         return new_class
339. 
340. 
341. class BaseModelForm(BaseForm, AltersData):
342.     def __init__(
343.         self,
344.         data=None,
345.         files=None,
346.         auto_id="id_%s",
347.         prefix=None,
348.         initial=None,
349.         error_class=ErrorList,
350.         label_suffix=None,
351.         empty_permitted=False,
352.         instance=None,
353.         use_required_attribute=None,
354.         renderer=None,
355.     ):
356.         opts = self._meta
357.         if opts.model is None:
358.             raise ValueError("ModelForm has no model class specified.")
359.         if instance is None:
360.             # if we didn't get an instance, instantiate a new one
361.             self.instance = opts.model()
362.             object_data = {}
363.         else:
364.             self.instance = instance
365.             object_data = model_to_dict(instance, opts.fields, opts.exclude)
366.         # if initial was provided, it should override the values from instance
367.         if initial is not None:
368.             object_data.update(initial)
369.         # self._validate_unique will be set to True by BaseModelForm.clean().
370.         # It is False by default so overriding self.clean() and failing to call
371.         # super will stop validate_unique from being called.
372.         self._validate_unique = False
373.         super().__init__(
374.             data,
375.             files,
376.             auto_id,
377.             prefix,
378.             object_data,
379.             error_class,
380.             label_suffix,
381.             empty_permitted,
382.             use_required_attribute=use_required_attribute,
383.             renderer=renderer,
384.         )
385.         for formfield in self.fields.values():
386.             apply_limit_choices_to_to_formfield(formfield)
387. 
388.     def _get_validation_exclusions(self):
389.         """
390.         For backwards-compatibility, exclude several types of fields from model
391.         validation. See tickets #12507, #12521, #12553.
392.         """
393.         exclude = set()
394.         # Build up a list of fields that should be excluded from model field
395.         # validation and unique checks.
396.         for f in self.instance._meta.fields:
397.             field = f.name
398.             # Exclude fields that aren't on the form. The developer may be
399.             # adding these values to the model after form validation.
400.             if field not in self.fields:
401.                 exclude.add(f.name)
402. 
403.             # Don't perform model validation on fields that were defined
404.             # manually on the form and excluded via the ModelForm's Meta
405.             # class. See #12901.
406.             elif self._meta.fields and field not in self._meta.fields:
407.                 exclude.add(f.name)
408.             elif self._meta.exclude and field in self._meta.exclude:
409.                 exclude.add(f.name)
410. 
411.             # Exclude fields that failed form validation. There's no need for
412.             # the model fields to validate them as well.
413.             elif field in self._errors:
414.                 exclude.add(f.name)
415. 
416.             # Exclude empty fields that are not required by the form, if the
417.             # underlying model field is required. This keeps the model field
418.             # from raising a required error. Note: don't exclude the field from
419.             # validation if the model field allows blanks. If it does, the blank
420.             # value may be included in a unique check, so cannot be excluded
421.             # from validation.
422.             else:
423.                 form_field = self.fields[field]
424.                 field_value = self.cleaned_data.get(field)
425.                 if (
426.                     not f.blank
427.                     and not form_field.required
428.                     and field_value in form_field.empty_values
429.                 ):
430.                     exclude.add(f.name)
431.         return exclude
432. 
433.     def clean(self):
434.         self._validate_unique = True
435.         return self.cleaned_data
436. 
437.     def _update_errors(self, errors):
438.         # Override any validation error messages defined at the model level
439.         # with those defined at the form level.
440.         opts = self._meta
441. 
442.         # Allow the model generated by construct_instance() to raise
443.         # ValidationError and have them handled in the same way as others.
444.         if hasattr(errors, "error_dict"):
445.             error_dict = errors.error_dict
446.         else:
447.             error_dict = {NON_FIELD_ERRORS: errors}
448. 
449.         for field, messages in error_dict.items():
450.             if (
451.                 field == NON_FIELD_ERRORS
452.                 and opts.error_messages
453.                 and NON_FIELD_ERRORS in opts.error_messages
454.             ):
455.                 error_messages = opts.error_messages[NON_FIELD_ERRORS]
456.             elif field in self.fields:
457.                 error_messages = self.fields[field].error_messages
458.             else:
459.                 continue
460. 
461.             for message in messages:
462.                 if (
463.                     isinstance(message, ValidationError)
464.                     and message.code in error_messages
465.                 ):
466.                     message.message = error_messages[message.code]
467. 
468.         self.add_error(None, errors)
469. 
470.     def _post_clean(self):
471.         opts = self._meta
472. 
473.         exclude = self._get_validation_exclusions()
474. 
475.         # Foreign Keys being used to represent inline relationships
476.         # are excluded from basic field value validation. This is for two
477.         # reasons: firstly, the value may not be supplied (#12507; the
478.         # case of providing new values to the admin); secondly the
479.         # object being referred to may not yet fully exist (#12749).
480.         # However, these fields *must* be included in uniqueness checks,
481.         # so this can't be part of _get_validation_exclusions().
482.         for name, field in self.fields.items():
483.             if isinstance(field, InlineForeignKeyField):
484.                 exclude.add(name)
485. 
486.         try:
487.             self.instance = construct_instance(
488.                 self, self.instance, opts.fields, opts.exclude
489.             )
490.         except ValidationError as e:
491.             self._update_errors(e)
492. 
493.         try:
494.             self.instance.full_clean(exclude=exclude, validate_unique=False)
495.         except ValidationError as e:
496.             self._update_errors(e)
497. 
498.         # Validate uniqueness if needed.
499.         if self._validate_unique:
500.             self.validate_unique()


File: django/forms/models.py
Line number range: 501 - 2000
Content:
501. 
502.     def validate_unique(self):
503.         """
504.         Call the instance's validate_unique() method and update the form's
505.         validation errors if any were raised.
506.         """
507.         exclude = self._get_validation_exclusions()
508.         try:
509.             self.instance.validate_unique(exclude=exclude)
510.         except ValidationError as e:
511.             self._update_errors(e)
512. 
513.     def _save_m2m(self):
514.         """
515.         Save the many-to-many fields and generic relations for this form.
516.         """
517.         cleaned_data = self.cleaned_data
518.         exclude = self._meta.exclude
519.         fields = self._meta.fields
520.         opts = self.instance._meta
521.         # Note that for historical reasons we want to include also
522.         # private_fields here. (GenericRelation was previously a fake
523.         # m2m field).
524.         for f in chain(opts.many_to_many, opts.private_fields):
525.             if not hasattr(f, "save_form_data"):
526.                 continue
527.             if fields and f.name not in fields:
528.                 continue
529.             if exclude and f.name in exclude:
530.                 continue
531.             if f.name in cleaned_data:
532.                 f.save_form_data(self.instance, cleaned_data[f.name])
533. 
534.     def save(self, commit=True):
535.         """
536.         Save this form's self.instance object if commit=True. Otherwise, add
537.         a save_m2m() method to the form which can be called after the instance
538.         is saved manually at a later time. Return the model instance.
539.         """
540.         if self.errors:
541.             raise ValueError(
542.                 "The %s could not be %s because the data didn't validate."
543.                 % (
544.                     self.instance._meta.object_name,
545.                     "created" if self.instance._state.adding else "changed",
546.                 )
547.             )
548.         if commit:
549.             # If committing, save the instance and the m2m data immediately.
550.             self.instance.save()
551.             self._save_m2m()
552.         else:
553.             # If not committing, add a method to the form to allow deferred
554.             # saving of m2m data.
555.             self.save_m2m = self._save_m2m
556.         return self.instance
557. 
558.     save.alters_data = True
559. 
560. 
561. class ModelForm(BaseModelForm, metaclass=ModelFormMetaclass):
562.     pass
563. 
564. 
565. def modelform_factory(
566.     model,
567.     form=ModelForm,
568.     fields=None,
569.     exclude=None,
570.     formfield_callback=None,
571.     widgets=None,
572.     localized_fields=None,
573.     labels=None,
574.     help_texts=None,
575.     error_messages=None,
576.     field_classes=None,
577. ):
578.     """
579.     Return a ModelForm containing form fields for the given model. You can
580.     optionally pass a `form` argument to use as a starting point for
581.     constructing the ModelForm.
582. 
583.     ``fields`` is an optional list of field names. If provided, include only
584.     the named fields in the returned fields. If omitted or '__all__', use all
585.     fields.
586. 
587.     ``exclude`` is an optional list of field names. If provided, exclude the
588.     named fields from the returned fields, even if they are listed in the
589.     ``fields`` argument.
590. 
591.     ``widgets`` is a dictionary of model field names mapped to a widget.
592. 
593.     ``localized_fields`` is a list of names of fields which should be localized.
594. 
595.     ``formfield_callback`` is a callable that takes a model field and returns
596.     a form field.
597. 
598.     ``labels`` is a dictionary of model field names mapped to a label.
599. 
600.     ``help_texts`` is a dictionary of model field names mapped to a help text.
601. 
602.     ``error_messages`` is a dictionary of model field names mapped to a
603.     dictionary of error messages.
604. 
605.     ``field_classes`` is a dictionary of model field names mapped to a form
606.     field class.
607.     """
608.     # Create the inner Meta class. FIXME: ideally, we should be able to
609.     # construct a ModelForm without creating and passing in a temporary
610.     # inner class.
611. 
612.     # Build up a list of attributes that the Meta object will have.
613.     attrs = {"model": model}
614.     if fields is not None:
615.         attrs["fields"] = fields
616.     if exclude is not None:
617.         attrs["exclude"] = exclude
618.     if widgets is not None:
619.         attrs["widgets"] = widgets
620.     if localized_fields is not None:
621.         attrs["localized_fields"] = localized_fields
622.     if labels is not None:
623.         attrs["labels"] = labels
624.     if help_texts is not None:
625.         attrs["help_texts"] = help_texts
626.     if error_messages is not None:
627.         attrs["error_messages"] = error_messages
628.     if field_classes is not None:
629.         attrs["field_classes"] = field_classes
630. 
631.     # If parent form class already has an inner Meta, the Meta we're
632.     # creating needs to inherit from the parent's inner meta.
633.     bases = (form.Meta,) if hasattr(form, "Meta") else ()
634.     Meta = type("Meta", bases, attrs)
635.     if formfield_callback:
636.         Meta.formfield_callback = staticmethod(formfield_callback)
637.     # Give this new form class a reasonable name.
638.     class_name = model.__name__ + "Form"
639. 
640.     # Class attributes for the new form class.
641.     form_class_attrs = {"Meta": Meta}
642. 
643.     if getattr(Meta, "fields", None) is None and getattr(Meta, "exclude", None) is None:
644.         raise ImproperlyConfigured(
645.             "Calling modelform_factory without defining 'fields' or "
646.             "'exclude' explicitly is prohibited."
647.         )
648. 
649.     # Instantiate type(form) in order to use the same metaclass as form.
650.     return type(form)(class_name, (form,), form_class_attrs)
651. 
652. 
653. # ModelFormSets ##############################################################
654. 
655. 
656. class BaseModelFormSet(BaseFormSet, AltersData):
657.     """
658.     A ``FormSet`` for editing a queryset and/or adding new objects to it.
659.     """
660. 
661.     model = None
662.     edit_only = False
663. 
664.     # Set of fields that must be unique among forms of this set.
665.     unique_fields = set()
666. 
667.     def __init__(
668.         self,
669.         data=None,
670.         files=None,
671.         auto_id="id_%s",
672.         prefix=None,
673.         queryset=None,
674.         *,
675.         initial=None,
676.         **kwargs,
677.     ):
678.         self.queryset = queryset
679.         self.initial_extra = initial
680.         super().__init__(
681.             **{
682.                 "data": data,
683.                 "files": files,
684.                 "auto_id": auto_id,
685.                 "prefix": prefix,
686.                 **kwargs,
687.             }
688.         )
689. 
690.     def initial_form_count(self):
691.         """Return the number of forms that are required in this FormSet."""
692.         if not self.is_bound:
693.             return len(self.get_queryset())
694.         return super().initial_form_count()
695. 
696.     def _existing_object(self, pk):
697.         if not hasattr(self, "_object_dict"):
698.             self._object_dict = {o.pk: o for o in self.get_queryset()}
699.         return self._object_dict.get(pk)
700. 
701.     def _get_to_python(self, field):
702.         """
703.         If the field is a related field, fetch the concrete field's (that
704.         is, the ultimate pointed-to field's) to_python.
705.         """
706.         while field.remote_field is not None:
707.             field = field.remote_field.get_related_field()
708.         return field.to_python
709. 
710.     def _construct_form(self, i, **kwargs):
711.         pk_required = i < self.initial_form_count()
712.         if pk_required:
713.             if self.is_bound:
714.                 pk_key = "%s-%s" % (self.add_prefix(i), self.model._meta.pk.name)
715.                 try:
716.                     pk = self.data[pk_key]
717.                 except KeyError:
718.                     # The primary key is missing. The user may have tampered
719.                     # with POST data.
720.                     pass
721.                 else:
722.                     to_python = self._get_to_python(self.model._meta.pk)
723.                     try:
724.                         pk = to_python(pk)
725.                     except ValidationError:
726.                         # The primary key exists but is an invalid value. The
727.                         # user may have tampered with POST data.
728.                         pass
729.                     else:
730.                         kwargs["instance"] = self._existing_object(pk)
731.             else:
732.                 kwargs["instance"] = self.get_queryset()[i]
733.         elif self.initial_extra:
734.             # Set initial values for extra forms
735.             try:
736.                 kwargs["initial"] = self.initial_extra[i - self.initial_form_count()]
737.             except IndexError:
738.                 pass
739.         form = super()._construct_form(i, **kwargs)
740.         if pk_required:
741.             form.fields[self.model._meta.pk.name].required = True
742.         return form
743. 
744.     def get_queryset(self):
745.         if not hasattr(self, "_queryset"):
746.             if self.queryset is not None:
747.                 qs = self.queryset
748.             else:
749.                 qs = self.model._default_manager.get_queryset()
750. 
751.             # If the queryset isn't already ordered we need to add an
752.             # artificial ordering here to make sure that all formsets
753.             # constructed from this queryset have the same form order.
754.             if not qs.ordered:
755.                 qs = qs.order_by(self.model._meta.pk.name)
756. 
757.             # Removed queryset limiting here. As per discussion re: #13023
758.             # on django-dev, max_num should not prevent existing
759.             # related objects/inlines from being displayed.
760.             self._queryset = qs
761.         return self._queryset
762. 
763.     def save_new(self, form, commit=True):
764.         """Save and return a new model instance for the given form."""
765.         return form.save(commit=commit)
766. 
767.     def save_existing(self, form, obj, commit=True):
768.         """Save and return an existing model instance for the given form."""
769.         return form.save(commit=commit)
770. 
771.     def delete_existing(self, obj, commit=True):
772.         """Deletes an existing model instance."""
773.         if commit:
774.             obj.delete()
775. 
776.     def save(self, commit=True):
777.         """
778.         Save model instances for every form, adding and changing instances
779.         as necessary, and return the list of instances.
780.         """
781.         if not commit:
782.             self.saved_forms = []
783. 
784.             def save_m2m():
785.                 for form in self.saved_forms:
786.                     form.save_m2m()
787. 
788.             self.save_m2m = save_m2m
789.         if self.edit_only:
790.             return self.save_existing_objects(commit)
791.         else:
792.             return self.save_existing_objects(commit) + self.save_new_objects(commit)
793. 
794.     save.alters_data = True
795. 
796.     def clean(self):
797.         self.validate_unique()
798. 
799.     def validate_unique(self):
800.         # Collect unique_checks and date_checks to run from all the forms.
801.         all_unique_checks = set()
802.         all_date_checks = set()
803.         forms_to_delete = self.deleted_forms
804.         valid_forms = [
805.             form
806.             for form in self.forms
807.             if form.is_valid() and form not in forms_to_delete
808.         ]
809.         for form in valid_forms:
810.             exclude = form._get_validation_exclusions()
811.             unique_checks, date_checks = form.instance._get_unique_checks(
812.                 exclude=exclude,
813.                 include_meta_constraints=True,
814.             )
815.             all_unique_checks.update(unique_checks)
816.             all_date_checks.update(date_checks)
817. 
818.         errors = []
819.         # Do each of the unique checks (unique and unique_together)
820.         for uclass, unique_check in all_unique_checks:
821.             seen_data = set()
822.             for form in valid_forms:
823.                 # Get the data for the set of fields that must be unique among
824.                 # the forms.
825.                 row_data = (
826.                     field if field in self.unique_fields else form.cleaned_data[field]
827.                     for field in unique_check
828.                     if field in form.cleaned_data
829.                 )
830.                 # Reduce Model instances to their primary key values
831.                 row_data = tuple(
832.                     d._get_pk_val() if hasattr(d, "_get_pk_val")
833.                     # Prevent "unhashable type: list" errors later on.
834.                     else tuple(d) if isinstance(d, list) else d
835.                     for d in row_data
836.                 )
837.                 if row_data and None not in row_data:
838.                     # if we've already seen it then we have a uniqueness failure
839.                     if row_data in seen_data:
840.                         # poke error messages into the right places and mark
841.                         # the form as invalid
842.                         errors.append(self.get_unique_error_message(unique_check))
843.                         form._errors[NON_FIELD_ERRORS] = self.error_class(
844.                             [self.get_form_error()],
845.                             renderer=self.renderer,
846.                         )
847.                         # Remove the data from the cleaned_data dict since it
848.                         # was invalid.
849.                         for field in unique_check:
850.                             if field in form.cleaned_data:
851.                                 del form.cleaned_data[field]
852.                     # mark the data as seen
853.                     seen_data.add(row_data)
854.         # iterate over each of the date checks now
855.         for date_check in all_date_checks:
856.             seen_data = set()
857.             uclass, lookup, field, unique_for = date_check
858.             for form in valid_forms:
859.                 # see if we have data for both fields
860.                 if (
861.                     form.cleaned_data
862.                     and form.cleaned_data[field] is not None
863.                     and form.cleaned_data[unique_for] is not None
864.                 ):
865.                     # if it's a date lookup we need to get the data for all the fields
866.                     if lookup == "date":
867.                         date = form.cleaned_data[unique_for]
868.                         date_data = (date.year, date.month, date.day)
869.                     # otherwise it's just the attribute on the date/datetime
870.                     # object
871.                     else:
872.                         date_data = (getattr(form.cleaned_data[unique_for], lookup),)
873.                     data = (form.cleaned_data[field],) + date_data
874.                     # if we've already seen it then we have a uniqueness failure
875.                     if data in seen_data:
876.                         # poke error messages into the right places and mark
877.                         # the form as invalid
878.                         errors.append(self.get_date_error_message(date_check))
879.                         form._errors[NON_FIELD_ERRORS] = self.error_class(
880.                             [self.get_form_error()],
881.                             renderer=self.renderer,
882.                         )
883.                         # Remove the data from the cleaned_data dict since it
884.                         # was invalid.
885.                         del form.cleaned_data[field]
886.                     # mark the data as seen
887.                     seen_data.add(data)
888. 
889.         if errors:
890.             raise ValidationError(errors)
891. 
892.     def get_unique_error_message(self, unique_check):
893.         if len(unique_check) == 1:
894.             return gettext("Please correct the duplicate data for %(field)s.") % {
895.                 "field": unique_check[0],
896.             }
897.         else:
898.             return gettext(
899.                 "Please correct the duplicate data for %(field)s, which must be unique."
900.             ) % {
901.                 "field": get_text_list(unique_check, _("and")),
902.             }
903. 
904.     def get_date_error_message(self, date_check):
905.         return gettext(
906.             "Please correct the duplicate data for %(field_name)s "
907.             "which must be unique for the %(lookup)s in %(date_field)s."
908.         ) % {
909.             "field_name": date_check[2],
910.             "date_field": date_check[3],
911.             "lookup": str(date_check[1]),
912.         }
913. 
914.     def get_form_error(self):
915.         return gettext("Please correct the duplicate values below.")
916. 
917.     def save_existing_objects(self, commit=True):
918.         self.changed_objects = []
919.         self.deleted_objects = []
920.         if not self.initial_forms:
921.             return []
922. 
923.         saved_instances = []
924.         forms_to_delete = self.deleted_forms
925.         for form in self.initial_forms:
926.             obj = form.instance
927.             # If the pk is None, it means either:
928.             # 1. The object is an unexpected empty model, created by invalid
929.             #    POST data such as an object outside the formset's queryset.
930.             # 2. The object was already deleted from the database.
931.             if obj.pk is None:
932.                 continue
933.             if form in forms_to_delete:
934.                 self.deleted_objects.append(obj)
935.                 self.delete_existing(obj, commit=commit)
936.             elif form.has_changed():
937.                 self.changed_objects.append((obj, form.changed_data))
938.                 saved_instances.append(self.save_existing(form, obj, commit=commit))
939.                 if not commit:
940.                     self.saved_forms.append(form)
941.         return saved_instances
942. 
943.     def save_new_objects(self, commit=True):
944.         self.new_objects = []
945.         for form in self.extra_forms:
946.             if not form.has_changed():
947.                 continue
948.             # If someone has marked an add form for deletion, don't save the
949.             # object.
950.             if self.can_delete and self._should_delete_form(form):
951.                 continue
952.             self.new_objects.append(self.save_new(form, commit=commit))
953.             if not commit:
954.                 self.saved_forms.append(form)
955.         return self.new_objects
956. 
957.     def add_fields(self, form, index):
958.         """Add a hidden field for the object's primary key."""
959.         from django.db.models import AutoField, ForeignKey, OneToOneField
960. 
961.         self._pk_field = pk = self.model._meta.pk
962.         # If a pk isn't editable, then it won't be on the form, so we need to
963.         # add it here so we can tell which object is which when we get the
964.         # data back. Generally, pk.editable should be false, but for some
965.         # reason, auto_created pk fields and AutoField's editable attribute is
966.         # True, so check for that as well.
967. 
968.         def pk_is_not_editable(pk):
969.             return (
970.                 (not pk.editable)
971.                 or (pk.auto_created or isinstance(pk, AutoField))
972.                 or (
973.                     pk.remote_field
974.                     and pk.remote_field.parent_link
975.                     and pk_is_not_editable(pk.remote_field.model._meta.pk)
976.                 )
977.             )
978. 
979.         if pk_is_not_editable(pk) or pk.name not in form.fields:
980.             if form.is_bound:
981.                 # If we're adding the related instance, ignore its primary key
982.                 # as it could be an auto-generated default which isn't actually
983.                 # in the database.
984.                 pk_value = None if form.instance._state.adding else form.instance.pk
985.             else:
986.                 try:
987.                     if index is not None:
988.                         pk_value = self.get_queryset()[index].pk
989.                     else:
990.                         pk_value = None
991.                 except IndexError:
992.                     pk_value = None
993.             if isinstance(pk, (ForeignKey, OneToOneField)):
994.                 qs = pk.remote_field.model._default_manager.get_queryset()
995.             else:
996.                 qs = self.model._default_manager.get_queryset()
997.             qs = qs.using(form.instance._state.db)
998.             if form._meta.widgets:
999.                 widget = form._meta.widgets.get(self._pk_field.name, HiddenInput)
1000.             else:
1001.                 widget = HiddenInput
1002.             form.fields[self._pk_field.name] = ModelChoiceField(
1003.                 qs, initial=pk_value, required=False, widget=widget
1004.             )
1005.         super().add_fields(form, index)
1006. 
1007. 
1008. def modelformset_factory(
1009.     model,
1010.     form=ModelForm,
1011.     formfield_callback=None,
1012.     formset=BaseModelFormSet,
1013.     extra=1,
1014.     can_delete=False,
1015.     can_order=False,
1016.     max_num=None,
1017.     fields=None,
1018.     exclude=None,
1019.     widgets=None,
1020.     validate_max=False,
1021.     localized_fields=None,
1022.     labels=None,
1023.     help_texts=None,
1024.     error_messages=None,
1025.     min_num=None,
1026.     validate_min=False,
1027.     field_classes=None,
1028.     absolute_max=None,
1029.     can_delete_extra=True,
1030.     renderer=None,
1031.     edit_only=False,
1032. ):
1033.     """Return a FormSet class for the given Django model class."""
1034.     meta = getattr(form, "Meta", None)
1035.     if (
1036.         getattr(meta, "fields", fields) is None
1037.         and getattr(meta, "exclude", exclude) is None
1038.     ):
1039.         raise ImproperlyConfigured(
1040.             "Calling modelformset_factory without defining 'fields' or "
1041.             "'exclude' explicitly is prohibited."
1042.         )
1043. 
1044.     form = modelform_factory(
1045.         model,
1046.         form=form,
1047.         fields=fields,
1048.         exclude=exclude,
1049.         formfield_callback=formfield_callback,
1050.         widgets=widgets,
1051.         localized_fields=localized_fields,
1052.         labels=labels,
1053.         help_texts=help_texts,
1054.         error_messages=error_messages,
1055.         field_classes=field_classes,
1056.     )
1057.     FormSet = formset_factory(
1058.         form,
1059.         formset,
1060.         extra=extra,
1061.         min_num=min_num,
1062.         max_num=max_num,
1063.         can_order=can_order,
1064.         can_delete=can_delete,
1065.         validate_min=validate_min,
1066.         validate_max=validate_max,
1067.         absolute_max=absolute_max,
1068.         can_delete_extra=can_delete_extra,
1069.         renderer=renderer,
1070.     )
1071.     FormSet.model = model
1072.     FormSet.edit_only = edit_only
1073.     return FormSet
1074. 
1075. 
1076. # InlineFormSets #############################################################
1077. 
1078. 
1079. class BaseInlineFormSet(BaseModelFormSet):
1080.     """A formset for child objects related to a parent."""
1081. 
1082.     def __init__(
1083.         self,
1084.         data=None,
1085.         files=None,
1086.         instance=None,
1087.         save_as_new=False,
1088.         prefix=None,
1089.         queryset=None,
1090.         **kwargs,
1091.     ):
1092.         if instance is None:
1093.             self.instance = self.fk.remote_field.model()
1094.         else:
1095.             self.instance = instance
1096.         self.save_as_new = save_as_new
1097.         if queryset is None:
1098.             queryset = self.model._default_manager
1099.         if self.instance.pk is not None:
1100.             qs = queryset.filter(**{self.fk.name: self.instance})
1101.         else:
1102.             qs = queryset.none()
1103.         self.unique_fields = {self.fk.name}
1104.         super().__init__(data, files, prefix=prefix, queryset=qs, **kwargs)
1105. 
1106.         # Add the generated field to form._meta.fields if it's defined to make
1107.         # sure validation isn't skipped on that field.
1108.         if self.form._meta.fields and self.fk.name not in self.form._meta.fields:
1109.             if isinstance(self.form._meta.fields, tuple):
1110.                 self.form._meta.fields = list(self.form._meta.fields)
1111.             self.form._meta.fields.append(self.fk.name)
1112. 
1113.     def initial_form_count(self):
1114.         if self.save_as_new:
1115.             return 0
1116.         return super().initial_form_count()
1117. 
1118.     def _construct_form(self, i, **kwargs):
1119.         form = super()._construct_form(i, **kwargs)
1120.         if self.save_as_new:
1121.             mutable = getattr(form.data, "_mutable", None)
1122.             # Allow modifying an immutable QueryDict.
1123.             if mutable is not None:
1124.                 form.data._mutable = True
1125.             # Remove the primary key from the form's data, we are only
1126.             # creating new instances
1127.             form.data[form.add_prefix(self._pk_field.name)] = None
1128.             # Remove the foreign key from the form's data
1129.             form.data[form.add_prefix(self.fk.name)] = None
1130.             if mutable is not None:
1131.                 form.data._mutable = mutable
1132. 
1133.         # Set the fk value here so that the form can do its validation.
1134.         fk_value = self.instance.pk
1135.         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
1136.             fk_value = getattr(self.instance, self.fk.remote_field.field_name)
1137.             fk_value = getattr(fk_value, "pk", fk_value)
1138.         setattr(form.instance, self.fk.get_attname(), fk_value)
1139.         return form
1140. 
1141.     @classmethod
1142.     def get_default_prefix(cls):
1143.         return cls.fk.remote_field.get_accessor_name(model=cls.model).replace("+", "")
1144. 
1145.     def save_new(self, form, commit=True):
1146.         # Ensure the latest copy of the related instance is present on each
1147.         # form (it may have been saved after the formset was originally
1148.         # instantiated).
1149.         setattr(form.instance, self.fk.name, self.instance)
1150.         return super().save_new(form, commit=commit)
1151. 
1152.     def add_fields(self, form, index):
1153.         super().add_fields(form, index)
1154.         if self._pk_field == self.fk:
1155.             name = self._pk_field.name
1156.             kwargs = {"pk_field": True}
1157.         else:
1158.             # The foreign key field might not be on the form, so we poke at the
1159.             # Model field to get the label, since we need that for error messages.
1160.             name = self.fk.name
1161.             kwargs = {
1162.                 "label": getattr(
1163.                     form.fields.get(name), "label", capfirst(self.fk.verbose_name)
1164.                 )
1165.             }
1166. 
1167.         # The InlineForeignKeyField assumes that the foreign key relation is
1168.         # based on the parent model's pk. If this isn't the case, set to_field
1169.         # to correctly resolve the initial form value.
1170.         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
1171.             kwargs["to_field"] = self.fk.remote_field.field_name
1172. 
1173.         # If we're adding a new object, ignore a parent's auto-generated key
1174.         # as it will be regenerated on the save request.
1175.         if self.instance._state.adding:
1176.             if kwargs.get("to_field") is not None:
1177.                 to_field = self.instance._meta.get_field(kwargs["to_field"])
1178.             else:
1179.                 to_field = self.instance._meta.pk
1180.             if to_field.has_default():
1181.                 setattr(self.instance, to_field.attname, None)
1182. 
1183.         form.fields[name] = InlineForeignKeyField(self.instance, **kwargs)
1184. 
1185.     def get_unique_error_message(self, unique_check):
1186.         unique_check = [field for field in unique_check if field != self.fk.name]
1187.         return super().get_unique_error_message(unique_check)
1188. 
1189. 
1190. def _get_foreign_key(parent_model, model, fk_name=None, can_fail=False):
1191.     """
1192.     Find and return the ForeignKey from model to parent if there is one
1193.     (return None if can_fail is True and no such field exists). If fk_name is
1194.     provided, assume it is the name of the ForeignKey field. Unless can_fail is
1195.     True, raise an exception if there isn't a ForeignKey from model to
1196.     parent_model.
1197.     """
1198.     # avoid circular import
1199.     from django.db.models import ForeignKey
1200. 
1201.     opts = model._meta
1202.     if fk_name:
1203.         fks_to_parent = [f for f in opts.fields if f.name == fk_name]
1204.         if len(fks_to_parent) == 1:
1205.             fk = fks_to_parent[0]
1206.             parent_list = parent_model._meta.get_parent_list()
1207.             if (
1208.                 not isinstance(fk, ForeignKey)
1209.                 or (
1210.                     # ForeignKey to proxy models.
1211.                     fk.remote_field.model._meta.proxy
1212.                     and fk.remote_field.model._meta.proxy_for_model not in parent_list
1213.                 )
1214.                 or (
1215.                     # ForeignKey to concrete models.
1216.                     not fk.remote_field.model._meta.proxy
1217.                     and fk.remote_field.model != parent_model
1218.                     and fk.remote_field.model not in parent_list
1219.                 )
1220.             ):
1221.                 raise ValueError(
1222.                     "fk_name '%s' is not a ForeignKey to '%s'."
1223.                     % (fk_name, parent_model._meta.label)
1224.                 )
1225.         elif not fks_to_parent:
1226.             raise ValueError(
1227.                 "'%s' has no field named '%s'." % (model._meta.label, fk_name)
1228.             )
1229.     else:
1230.         # Try to discover what the ForeignKey from model to parent_model is
1231.         parent_list = parent_model._meta.get_parent_list()
1232.         fks_to_parent = [
1233.             f
1234.             for f in opts.fields
1235.             if isinstance(f, ForeignKey)
1236.             and (
1237.                 f.remote_field.model == parent_model
1238.                 or f.remote_field.model in parent_list
1239.                 or (
1240.                     f.remote_field.model._meta.proxy
1241.                     and f.remote_field.model._meta.proxy_for_model in parent_list
1242.                 )
1243.             )
1244.         ]
1245.         if len(fks_to_parent) == 1:
1246.             fk = fks_to_parent[0]
1247.         elif not fks_to_parent:
1248.             if can_fail:
1249.                 return
1250.             raise ValueError(
1251.                 "'%s' has no ForeignKey to '%s'."
1252.                 % (
1253.                     model._meta.label,
1254.                     parent_model._meta.label,
1255.                 )
1256.             )
1257.         else:
1258.             raise ValueError(
1259.                 "'%s' has more than one ForeignKey to '%s'. You must specify "
1260.                 "a 'fk_name' attribute."
1261.                 % (
1262.                     model._meta.label,
1263.                     parent_model._meta.label,
1264.                 )
1265.             )
1266.     return fk
1267. 
1268. 
1269. def inlineformset_factory(
1270.     parent_model,
1271.     model,
1272.     form=ModelForm,
1273.     formset=BaseInlineFormSet,
1274.     fk_name=None,
1275.     fields=None,
1276.     exclude=None,
1277.     extra=3,
1278.     can_order=False,
1279.     can_delete=True,
1280.     max_num=None,
1281.     formfield_callback=None,
1282.     widgets=None,
1283.     validate_max=False,
1284.     localized_fields=None,
1285.     labels=None,
1286.     help_texts=None,
1287.     error_messages=None,
1288.     min_num=None,
1289.     validate_min=False,
1290.     field_classes=None,
1291.     absolute_max=None,
1292.     can_delete_extra=True,
1293.     renderer=None,
1294.     edit_only=False,
1295. ):
1296.     """
1297.     Return an ``InlineFormSet`` for the given kwargs.
1298. 
1299.     ``fk_name`` must be provided if ``model`` has more than one ``ForeignKey``
1300.     to ``parent_model``.
1301.     """
1302.     fk = _get_foreign_key(parent_model, model, fk_name=fk_name)
1303.     # enforce a max_num=1 when the foreign key to the parent model is unique.
1304.     if fk.unique:
1305.         max_num = 1
1306.     kwargs = {
1307.         "form": form,
1308.         "formfield_callback": formfield_callback,
1309.         "formset": formset,
1310.         "extra": extra,
1311.         "can_delete": can_delete,
1312.         "can_order": can_order,
1313.         "fields": fields,
1314.         "exclude": exclude,
1315.         "min_num": min_num,
1316.         "max_num": max_num,
1317.         "widgets": widgets,
1318.         "validate_min": validate_min,
1319.         "validate_max": validate_max,
1320.         "localized_fields": localized_fields,
1321.         "labels": labels,
1322.         "help_texts": help_texts,
1323.         "error_messages": error_messages,
1324.         "field_classes": field_classes,
1325.         "absolute_max": absolute_max,
1326.         "can_delete_extra": can_delete_extra,
1327.         "renderer": renderer,
1328.         "edit_only": edit_only,
1329.     }
1330.     FormSet = modelformset_factory(model, **kwargs)
1331.     FormSet.fk = fk
1332.     return FormSet
1333. 
1334. 
1335. # Fields #####################################################################
1336. 
1337. 
1338. class InlineForeignKeyField(Field):
1339.     """
1340.     A basic integer field that deals with validating the given value to a
1341.     given parent instance in an inline.
1342.     """
1343. 
1344.     widget = HiddenInput
1345.     default_error_messages = {
1346.         "invalid_choice": _("The inline value did not match the parent instance."),
1347.     }
1348. 
1349.     def __init__(self, parent_instance, *args, pk_field=False, to_field=None, **kwargs):
1350.         self.parent_instance = parent_instance
1351.         self.pk_field = pk_field
1352.         self.to_field = to_field
1353.         if self.parent_instance is not None:
1354.             if self.to_field:
1355.                 kwargs["initial"] = getattr(self.parent_instance, self.to_field)
1356.             else:
1357.                 kwargs["initial"] = self.parent_instance.pk
1358.         kwargs["required"] = False
1359.         super().__init__(*args, **kwargs)
1360. 
1361.     def clean(self, value):
1362.         if value in self.empty_values:
1363.             if self.pk_field:
1364.                 return None
1365.             # if there is no value act as we did before.
1366.             return self.parent_instance
1367.         # ensure the we compare the values as equal types.
1368.         if self.to_field:
1369.             orig = getattr(self.parent_instance, self.to_field)
1370.         else:
1371.             orig = self.parent_instance.pk
1372.         if str(value) != str(orig):
1373.             raise ValidationError(
1374.                 self.error_messages["invalid_choice"], code="invalid_choice"
1375.             )
1376.         return self.parent_instance
1377. 
1378.     def has_changed(self, initial, data):
1379.         return False
1380. 
1381. 
1382. class ModelChoiceIteratorValue:
1383.     def __init__(self, value, instance):
1384.         self.value = value
1385.         self.instance = instance
1386. 
1387.     def __str__(self):
1388.         return str(self.value)
1389. 
1390.     def __hash__(self):
1391.         return hash(self.value)
1392. 
1393.     def __eq__(self, other):
1394.         if isinstance(other, ModelChoiceIteratorValue):
1395.             other = other.value
1396.         return self.value == other
1397. 
1398. 
1399. class ModelChoiceIterator:
1400.     def __init__(self, field):
1401.         self.field = field
1402.         self.queryset = field.queryset
1403. 
1404.     def __iter__(self):
1405.         if self.field.empty_label is not None:
1406.             yield ("", self.field.empty_label)
1407.         queryset = self.queryset
1408.         # Can't use iterator() when queryset uses prefetch_related()
1409.         if not queryset._prefetch_related_lookups:
1410.             queryset = queryset.iterator()
1411.         for obj in queryset:
1412.             yield self.choice(obj)
1413. 
1414.     def __len__(self):
1415.         # count() adds a query but uses less memory since the QuerySet results
1416.         # won't be cached. In most cases, the choices will only be iterated on,
1417.         # and __len__() won't be called.
1418.         return self.queryset.count() + (1 if self.field.empty_label is not None else 0)
1419. 
1420.     def __bool__(self):
1421.         return self.field.empty_label is not None or self.queryset.exists()
1422. 
1423.     def choice(self, obj):
1424.         return (
1425.             ModelChoiceIteratorValue(self.field.prepare_value(obj), obj),
1426.             self.field.label_from_instance(obj),
1427.         )
1428. 
1429. 
1430. class ModelChoiceField(ChoiceField):
1431.     """A ChoiceField whose choices are a model QuerySet."""
1432. 
1433.     # This class is a subclass of ChoiceField for purity, but it doesn't
1434.     # actually use any of ChoiceField's implementation.
1435.     default_error_messages = {
1436.         "invalid_choice": _(
1437.             "Select a valid choice. That choice is not one of the available choices."
1438.         ),
1439.     }
1440.     iterator = ModelChoiceIterator
1441. 
1442.     def __init__(
1443.         self,
1444.         queryset,
1445.         *,
1446.         empty_label="---------",
1447.         required=True,
1448.         widget=None,
1449.         label=None,
1450.         initial=None,
1451.         help_text="",
1452.         to_field_name=None,
1453.         limit_choices_to=None,
1454.         blank=False,
1455.         **kwargs,
1456.     ):
1457.         # Call Field instead of ChoiceField __init__() because we don't need
1458.         # ChoiceField.__init__().
1459.         Field.__init__(
1460.             self,
1461.             required=required,
1462.             widget=widget,
1463.             label=label,
1464.             initial=initial,
1465.             help_text=help_text,
1466.             **kwargs,
1467.         )
1468.         if (required and initial is not None) or (
1469.             isinstance(self.widget, RadioSelect) and not blank
1470.         ):
1471.             self.empty_label = None
1472.         else:
1473.             self.empty_label = empty_label
1474.         self.queryset = queryset
1475.         self.limit_choices_to = limit_choices_to  # limit the queryset later.
1476.         self.to_field_name = to_field_name
1477. 
1478.     def get_limit_choices_to(self):
1479.         """
1480.         Return ``limit_choices_to`` for this form field.
1481. 
1482.         If it is a callable, invoke it and return the result.
1483.         """
1484.         if callable(self.limit_choices_to):
1485.             return self.limit_choices_to()
1486.         return self.limit_choices_to
1487. 
1488.     def __deepcopy__(self, memo):
1489.         result = super(ChoiceField, self).__deepcopy__(memo)
1490.         # Need to force a new ModelChoiceIterator to be created, bug #11183
1491.         if self.queryset is not None:
1492.             result.queryset = self.queryset.all()
1493.         return result
1494. 
1495.     def _get_queryset(self):
1496.         return self._queryset
1497. 
1498.     def _set_queryset(self, queryset):
1499.         self._queryset = None if queryset is None else queryset.all()
1500.         self.widget.choices = self.choices
1501. 
1502.     queryset = property(_get_queryset, _set_queryset)
1503. 
1504.     # this method will be used to create object labels by the QuerySetIterator.
1505.     # Override it to customize the label.
1506.     def label_from_instance(self, obj):
1507.         """
1508.         Convert objects into strings and generate the labels for the choices
1509.         presented by this object. Subclasses can override this method to
1510.         customize the display of the choices.
1511.         """
1512.         return str(obj)
1513. 
1514.     def _get_choices(self):
1515.         # If self._choices is set, then somebody must have manually set
1516.         # the property self.choices. In this case, just return self._choices.
1517.         if hasattr(self, "_choices"):
1518.             return self._choices
1519. 
1520.         # Otherwise, execute the QuerySet in self.queryset to determine the
1521.         # choices dynamically. Return a fresh ModelChoiceIterator that has not been
1522.         # consumed. Note that we're instantiating a new ModelChoiceIterator *each*
1523.         # time _get_choices() is called (and, thus, each time self.choices is
1524.         # accessed) so that we can ensure the QuerySet has not been consumed. This
1525.         # construct might look complicated but it allows for lazy evaluation of
1526.         # the queryset.
1527.         return self.iterator(self)
1528. 
1529.     choices = property(_get_choices, ChoiceField._set_choices)
1530. 
1531.     def prepare_value(self, value):
1532.         if hasattr(value, "_meta"):
1533.             if self.to_field_name:
1534.                 return value.serializable_value(self.to_field_name)
1535.             else:
1536.                 return value.pk
1537.         return super().prepare_value(value)
1538. 
1539.     def to_python(self, value):
1540.         if value in self.empty_values:
1541.             return None
1542.         try:
1543.             key = self.to_field_name or "pk"
1544.             if isinstance(value, self.queryset.model):
1545.                 value = getattr(value, key)
1546.             value = self.queryset.get(**{key: value})
1547.         except (ValueError, TypeError, self.queryset.model.DoesNotExist):
1548.             raise ValidationError(
1549.                 self.error_messages["invalid_choice"],
1550.                 code="invalid_choice",
1551.                 params={"value": value},
1552.             )
1553.         return value
1554. 
1555.     def validate(self, value):
1556.         return Field.validate(self, value)
1557. 
1558.     def has_changed(self, initial, data):
1559.         if self.disabled:
1560.             return False
1561.         initial_value = initial if initial is not None else ""
1562.         data_value = data if data is not None else ""
1563.         return str(self.prepare_value(initial_value)) != str(data_value)
1564. 
1565. 
1566. class ModelMultipleChoiceField(ModelChoiceField):
1567.     """A MultipleChoiceField whose choices are a model QuerySet."""
1568. 
1569.     widget = SelectMultiple
1570.     hidden_widget = MultipleHiddenInput
1571.     default_error_messages = {
1572.         "invalid_list": _("Enter a list of values."),
1573.         "invalid_choice": _(
1574.             "Select a valid choice. %(value)s is not one of the available choices."
1575.         ),
1576.         "invalid_pk_value": _("“%(pk)s” is not a valid value."),
1577.     }
1578. 
1579.     def __init__(self, queryset, **kwargs):
1580.         super().__init__(queryset, empty_label=None, **kwargs)
1581. 
1582.     def to_python(self, value):
1583.         if not value:
1584.             return []
1585.         return list(self._check_values(value))
1586. 
1587.     def clean(self, value):
1588.         value = self.prepare_value(value)
1589.         if self.required and not value:
1590.             raise ValidationError(self.error_messages["required"], code="required")
1591.         elif not self.required and not value:
1592.             return self.queryset.none()
1593.         if not isinstance(value, (list, tuple)):
1594.             raise ValidationError(
1595.                 self.error_messages["invalid_list"],
1596.                 code="invalid_list",
1597.             )
1598.         qs = self._check_values(value)
1599.         # Since this overrides the inherited ModelChoiceField.clean
1600.         # we run custom validators here
1601.         self.run_validators(value)
1602.         return qs
1603. 
1604.     def _check_values(self, value):
1605.         """
1606.         Given a list of possible PK values, return a QuerySet of the
1607.         corresponding objects. Raise a ValidationError if a given value is
1608.         invalid (not a valid PK, not in the queryset, etc.)
1609.         """
1610.         key = self.to_field_name or "pk"
1611.         # deduplicate given values to avoid creating many querysets or
1612.         # requiring the database backend deduplicate efficiently.
1613.         try:
1614.             value = frozenset(value)
1615.         except TypeError:
1616.             # list of lists isn't hashable, for example
1617.             raise ValidationError(
1618.                 self.error_messages["invalid_list"],
1619.                 code="invalid_list",
1620.             )
1621.         for pk in value:
1622.             try:
1623.                 self.queryset.filter(**{key: pk})
1624.             except (ValueError, TypeError):
1625.                 raise ValidationError(
1626.                     self.error_messages["invalid_pk_value"],
1627.                     code="invalid_pk_value",
1628.                     params={"pk": pk},
1629.                 )
1630.         qs = self.queryset.filter(**{"%s__in" % key: value})
1631.         pks = {str(getattr(o, key)) for o in qs}
1632.         for val in value:
1633.             if str(val) not in pks:
1634.                 raise ValidationError(
1635.                     self.error_messages["invalid_choice"],
1636.                     code="invalid_choice",
1637.                     params={"value": val},
1638.                 )
1639.         return qs
1640. 
1641.     def prepare_value(self, value):
1642.         if (
1643.             hasattr(value, "__iter__")
1644.             and not isinstance(value, str)
1645.             and not hasattr(value, "_meta")
1646.         ):
1647.             prepare_value = super().prepare_value
1648.             return [prepare_value(v) for v in value]
1649.         return super().prepare_value(value)
1650. 
1651.     def has_changed(self, initial, data):
1652.         if self.disabled:
1653.             return False
1654.         if initial is None:
1655.             initial = []
1656.         if data is None:
1657.             data = []
1658.         if len(initial) != len(data):
1659.             return True
1660.         initial_set = {str(value) for value in self.prepare_value(initial)}
1661.         data_set = {str(value) for value in data}
1662.         return data_set != initial_set
1663. 
1664. 
1665. def modelform_defines_fields(form_class):
1666.     return hasattr(form_class, "_meta") and (
1667.         form_class._meta.fields is not None or form_class._meta.exclude is not None
1668.     )

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 21:14:44,588 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user has requested the full content of the file 'django/forms/models.py'. The provided context contains the content of this file from line 1 to 1668, which appears to be the complete file. Therefore, to fulfill the user's request, the entire file content is selected.", relative_path='django/forms/models.py', start_line=1, end_line=1668)]
2025-12-24 21:14:44,591 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of django/forms/models.py.
2025-12-24 21:14:44,591 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 21:14:44,591 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 21:14:44,592 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-24 21:14:44,592 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-24 21:14:44,593 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── benchmark.yml
|       ├── data
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       ├── schedule_tests.yml
|       ├── schedules.yml
|       ├── selenium.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ckb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_IE
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   └── options.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── filesystem.py
|   |   |   |   ├── handler.py
|   |   |   |   ├── memory.py
|   |   |   |   └── mixins.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── optimizemigration.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── psycopg_any.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _functions.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── csrf_403.html
|           ├── default_urlconf.html
|           ├── directory_index.html
|           ├── i18n_catalog.js
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── csrf.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   ├── tutorial08.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.26.txt
|   |   ├── 2.2.27.txt
|   |   ├── 2.2.28.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.11.txt
|   |   ├── 3.2.12.txt
|   |   ├── 3.2.13.txt
|   |   ├── 3.2.14.txt
|   |   ├── 3.2.15.txt
|   |   ├── 3.2.16.txt
|   |   ├── 3.2.17.txt
|   |   ├── 3.2.18.txt
|   |   ├── 3.2.19.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.20.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.10.txt
|   |   ├── 4.0.2.txt
|   |   ├── 4.0.3.txt
|   |   ├── 4.0.4.txt
|   |   ├── 4.0.5.txt
|   |   ├── 4.0.6.txt
|   |   ├── 4.0.7.txt
|   |   ├── 4.0.8.txt
|   |   ├── 4.0.9.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.1.txt
|   |   ├── 4.1.10.txt
|   |   ├── 4.1.2.txt
|   |   ├── 4.1.3.txt
|   |   ├── 4.1.4.txt
|   |   ├── 4.1.5.txt
|   |   ├── 4.1.6.txt
|   |   ├── 4.1.7.txt
|   |   ├── 4.1.8.txt
|   |   ├── 4.1.9.txt
|   |   ├── 4.1.txt
|   |   ├── 4.2.1.txt
|   |   ├── 4.2.2.txt
|   |   ├── 4.2.3.txt
|   |   ├── 4.2.4.txt
|   |   ├── 4.2.txt
|   |   ├── 5.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── fixtures.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_breadcrumbs.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_related_object_lookups.py
    |   ├── test_skip_link_to_content.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_auth.py
    |   ├── test_async_model_methods.py
    |   ├── test_async_queryset.py
    |   ├── test_async_related_managers.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   ├── with_many_to_many.py
    |   |   └── with_unique_constraint.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_functions.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_migrations.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   ├── test_cache.py
    |   ├── test_clickjacking.py
    |   ├── test_common.py
    |   ├── test_http.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   ├── test_storages.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── test_inmemory_storage.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       ├── custom_field.html
    |   |       ├── custom_widget.html
    |   |       ├── cyclic_context_boundfield_render.html
    |   |       ├── error.html
    |   |       ├── form_snippet.html
    |   |       ├── legend_test.html
    |   |       └── use_fieldset.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_manual_porting
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_noop
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_no_replaces
    |   |   ├── 0001_squashed_0002.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests_tests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_lastmod_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── nonutf8
    |   |   |   └── nonutf8.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_escapeseq.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Django Admin with Inlines not using UUIDField default value

Description: Description
	 
		(last modified by Joseph Metzinger)
	 
Hello,
I am a long time django user, first time bug reporter, so please let me know if I need to do anything else to help get this bug fixed :)
I am using Django 3.1.3 and python 3.8.5 and have cerated a toy project to illustrate the bug. I have the following models:
class UUIDModel(models.Model):
	pkid = models.BigAutoField(primary_key=True, editable=False)
	id = models.UUIDField(default=uuid.uuid4, editable=False, unique=True)
	class Meta:
		abstract = True
class Thing(UUIDModel):
	name = models.CharField(max_length=191)
class SubThing(models.Model):
	name = models.CharField(max_length=191)
	thing = models.ForeignKey(
		'bugapp.Thing',
		to_field='id',
		on_delete = models.CASCADE,
		related_name='subthings',
	)
And the following admin.py file:
class SubThingInline(admin.StackedInline):
	model = SubThing
@admin.register(Thing)
class ThingAdmin(admin.ModelAdmin):
	list_display = ('name',)
	ordering = ('pkid',)
	inlines = (SubThingInline,)
When logging into the admin, if you delete all of the entries for "subthings", add a name, and save the model, it will work. As soon as you try to add a subthing alongside the main Thing, it fails with the following exception:
​https://dpaste.com/8EU4FF6RW
It shows that the value of "id" in the Thing model is being set to null.
I believe this is a bug in django.
Thanks!

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index 3fa04b821f..13b46b1e43 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1170,14 +1170,24 @@ class BaseInlineFormSet(BaseModelFormSet):
         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
             kwargs["to_field"] = self.fk.remote_field.field_name
 
-        # If we're adding a new object, ignore a parent's auto-generated key
-        # as it will be regenerated on the save request.
+        # If we're adding a new object, ignore a parent's auto-incrementing primary key
+        # as it will be regenerated on the save request. Preserve fields with
+        # Python-level defaults (e.g., UUIDField) and non-PK to_field targets.
         if self.instance._state.adding:
             if kwargs.get("to_field") is not None:
                 to_field = self.instance._meta.get_field(kwargs["to_field"])
             else:
                 to_field = self.instance._meta.pk
-            if to_field.has_default():
+            # Only clear database auto-increment primary keys; do not clear fields
+            # that rely on Python-level defaults such as UUIDField.
+            from django.db import models
+            if (
+                to_field == self.instance._meta.pk
+                and isinstance(
+                    to_field,
+                    (models.AutoField, models.BigAutoField, models.SmallAutoField),
+                )
+            ):
                 setattr(self.instance, to_field.attname, None)
 
         form.fields[name] = InlineForeignKeyField(self.instance, **kwargs)


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of django/forms/models.py.
Extra Requirements: 
Purpose: 
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/forms/models.py
Line number range: 1 - 1668
Content:
1. """
2. Helper functions for creating Form classes from Django models
3. and database field objects.
4. """
5. from itertools import chain
6. 
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS,
9.     FieldError,
10.     ImproperlyConfigured,
11.     ValidationError,
12. )
13. from django.db.models.utils import AltersData
14. from django.forms.fields import ChoiceField, Field
15. from django.forms.forms import BaseForm, DeclarativeFieldsMetaclass
16. from django.forms.formsets import BaseFormSet, formset_factory
17. from django.forms.utils import ErrorList
18. from django.forms.widgets import (
19.     HiddenInput,
20.     MultipleHiddenInput,
21.     RadioSelect,
22.     SelectMultiple,
23. )
24. from django.utils.text import capfirst, get_text_list
25. from django.utils.translation import gettext
26. from django.utils.translation import gettext_lazy as _
27. 
28. __all__ = (
29.     "ModelForm",
30.     "BaseModelForm",
31.     "model_to_dict",
32.     "fields_for_model",
33.     "ModelChoiceField",
34.     "ModelMultipleChoiceField",
35.     "ALL_FIELDS",
36.     "BaseModelFormSet",
37.     "modelformset_factory",
38.     "BaseInlineFormSet",
39.     "inlineformset_factory",
40.     "modelform_factory",
41. )
42. 
43. ALL_FIELDS = "__all__"
44. 
45. 
46. def construct_instance(form, instance, fields=None, exclude=None):
47.     """
48.     Construct and return a model instance from the bound ``form``'s
49.     ``cleaned_data``, but do not save the returned instance to the database.
50.     """
51.     from django.db import models
52. 
53.     opts = instance._meta
54. 
55.     cleaned_data = form.cleaned_data
56.     file_field_list = []
57.     for f in opts.fields:
58.         if (
59.             not f.editable
60.             or isinstance(f, models.AutoField)
61.             or f.name not in cleaned_data
62.         ):
63.             continue
64.         if fields is not None and f.name not in fields:
65.             continue
66.         if exclude and f.name in exclude:
67.             continue
68.         # Leave defaults for fields that aren't in POST data, except for
69.         # checkbox inputs because they don't appear in POST data if not checked.
70.         if (
71.             f.has_default()
72.             and form[f.name].field.widget.value_omitted_from_data(
73.                 form.data, form.files, form.add_prefix(f.name)
74.             )
75.             and cleaned_data.get(f.name) in form[f.name].field.empty_values
76.         ):
77.             continue
78.         # Defer saving file-type fields until after the other fields, so a
79.         # callable upload_to can use the values from other fields.
80.         if isinstance(f, models.FileField):
81.             file_field_list.append(f)
82.         else:
83.             f.save_form_data(instance, cleaned_data[f.name])
84. 
85.     for f in file_field_list:
86.         f.save_form_data(instance, cleaned_data[f.name])
87. 
88.     return instance
89. 
90. 
91. # ModelForms #################################################################
92. 
93. 
94. def model_to_dict(instance, fields=None, exclude=None):
95.     """
96.     Return a dict containing the data in ``instance`` suitable for passing as
97.     a Form's ``initial`` keyword argument.
98. 
99.     ``fields`` is an optional list of field names. If provided, return only the
100.     named.
101. 
102.     ``exclude`` is an optional list of field names. If provided, exclude the
103.     named from the returned dict, even if they are listed in the ``fields``
104.     argument.
105.     """
106.     opts = instance._meta
107.     data = {}
108.     for f in chain(opts.concrete_fields, opts.private_fields, opts.many_to_many):
109.         if not getattr(f, "editable", False):
110.             continue
111.         if fields is not None and f.name not in fields:
112.             continue
113.         if exclude and f.name in exclude:
114.             continue
115.         data[f.name] = f.value_from_object(instance)
116.     return data
117. 
118. 
119. def apply_limit_choices_to_to_formfield(formfield):
120.     """Apply limit_choices_to to the formfield's queryset if needed."""
121.     from django.db.models import Exists, OuterRef, Q
122. 
123.     if hasattr(formfield, "queryset") and hasattr(formfield, "get_limit_choices_to"):
124.         limit_choices_to = formfield.get_limit_choices_to()
125.         if limit_choices_to:
126.             complex_filter = limit_choices_to
127.             if not isinstance(complex_filter, Q):
128.                 complex_filter = Q(**limit_choices_to)
129.             complex_filter &= Q(pk=OuterRef("pk"))
130.             # Use Exists() to avoid potential duplicates.
131.             formfield.queryset = formfield.queryset.filter(
132.                 Exists(formfield.queryset.model._base_manager.filter(complex_filter)),
133.             )
134. 
135. 
136. def fields_for_model(
137.     model,
138.     fields=None,
139.     exclude=None,
140.     widgets=None,
141.     formfield_callback=None,
142.     localized_fields=None,
143.     labels=None,
144.     help_texts=None,
145.     error_messages=None,
146.     field_classes=None,
147.     *,
148.     apply_limit_choices_to=True,
149.     form_declared_fields=None,
150. ):
151.     """
152.     Return a dictionary containing form fields for the given model.
153. 
154.     ``fields`` is an optional list of field names. If provided, return only the
155.     named fields.
156. 
157.     ``exclude`` is an optional list of field names. If provided, exclude the
158.     named fields from the returned fields, even if they are listed in the
159.     ``fields`` argument.
160. 
161.     ``widgets`` is a dictionary of model field names mapped to a widget.
162. 
163.     ``formfield_callback`` is a callable that takes a model field and returns
164.     a form field.
165. 
166.     ``localized_fields`` is a list of names of fields which should be localized.
167. 
168.     ``labels`` is a dictionary of model field names mapped to a label.
169. 
170.     ``help_texts`` is a dictionary of model field names mapped to a help text.
171. 
172.     ``error_messages`` is a dictionary of model field names mapped to a
173.     dictionary of error messages.
174. 
175.     ``field_classes`` is a dictionary of model field names mapped to a form
176.     field class.
177. 
178.     ``apply_limit_choices_to`` is a boolean indicating if limit_choices_to
179.     should be applied to a field's queryset.
180. 
181.     ``form_declared_fields`` is a dictionary of form fields created directly on
182.     a form.
183.     """
184.     form_declared_fields = form_declared_fields or {}
185.     field_dict = {}
186.     ignored = []
187.     opts = model._meta
188.     # Avoid circular import
189.     from django.db.models import Field as ModelField
190. 
191.     sortable_private_fields = [
192.         f for f in opts.private_fields if isinstance(f, ModelField)
193.     ]
194.     for f in sorted(
195.         chain(opts.concrete_fields, sortable_private_fields, opts.many_to_many)
196.     ):
197.         if not getattr(f, "editable", False):
198.             if (
199.                 fields is not None
200.                 and f.name in fields
201.                 and (exclude is None or f.name not in exclude)
202.             ):
203.                 raise FieldError(
204.                     "'%s' cannot be specified for %s model form as it is a "
205.                     "non-editable field" % (f.name, model.__name__)
206.                 )
207.             continue
208.         if fields is not None and f.name not in fields:
209.             continue
210.         if exclude and f.name in exclude:
211.             continue
212.         if f.name in form_declared_fields:
213.             field_dict[f.name] = form_declared_fields[f.name]
214.             continue
215. 
216.         kwargs = {}
217.         if widgets and f.name in widgets:
218.             kwargs["widget"] = widgets[f.name]
219.         if localized_fields == ALL_FIELDS or (
220.             localized_fields and f.name in localized_fields
221.         ):
222.             kwargs["localize"] = True
223.         if labels and f.name in labels:
224.             kwargs["label"] = labels[f.name]
225.         if help_texts and f.name in help_texts:
226.             kwargs["help_text"] = help_texts[f.name]
227.         if error_messages and f.name in error_messages:
228.             kwargs["error_messages"] = error_messages[f.name]
229.         if field_classes and f.name in field_classes:
230.             kwargs["form_class"] = field_classes[f.name]
231. 
232.         if formfield_callback is None:
233.             formfield = f.formfield(**kwargs)
234.         elif not callable(formfield_callback):
235.             raise TypeError("formfield_callback must be a function or callable")
236.         else:
237.             formfield = formfield_callback(f, **kwargs)
238. 
239.         if formfield:
240.             if apply_limit_choices_to:
241.                 apply_limit_choices_to_to_formfield(formfield)
242.             field_dict[f.name] = formfield
243.         else:
244.             ignored.append(f.name)
245.     if fields:
246.         field_dict = {
247.             f: field_dict.get(f)
248.             for f in fields
249.             if (not exclude or f not in exclude) and f not in ignored
250.         }
251.     return field_dict
252. 
253. 
254. class ModelFormOptions:
255.     def __init__(self, options=None):
256.         self.model = getattr(options, "model", None)
257.         self.fields = getattr(options, "fields", None)
258.         self.exclude = getattr(options, "exclude", None)
259.         self.widgets = getattr(options, "widgets", None)
260.         self.localized_fields = getattr(options, "localized_fields", None)
261.         self.labels = getattr(options, "labels", None)
262.         self.help_texts = getattr(options, "help_texts", None)
263.         self.error_messages = getattr(options, "error_messages", None)
264.         self.field_classes = getattr(options, "field_classes", None)
265.         self.formfield_callback = getattr(options, "formfield_callback", None)
266. 
267. 
268. class ModelFormMetaclass(DeclarativeFieldsMetaclass):
269.     def __new__(mcs, name, bases, attrs):
270.         new_class = super().__new__(mcs, name, bases, attrs)
271. 
272.         if bases == (BaseModelForm,):
273.             return new_class
274. 
275.         opts = new_class._meta = ModelFormOptions(getattr(new_class, "Meta", None))
276. 
277.         # We check if a string was passed to `fields` or `exclude`,
278.         # which is likely to be a mistake where the user typed ('foo') instead
279.         # of ('foo',)
280.         for opt in ["fields", "exclude", "localized_fields"]:
281.             value = getattr(opts, opt)
282.             if isinstance(value, str) and value != ALL_FIELDS:
283.                 msg = (
284.                     "%(model)s.Meta.%(opt)s cannot be a string. "
285.                     "Did you mean to type: ('%(value)s',)?"
286.                     % {
287.                         "model": new_class.__name__,
288.                         "opt": opt,
289.                         "value": value,
290.                     }
291.                 )
292.                 raise TypeError(msg)
293. 
294.         if opts.model:
295.             # If a model is defined, extract form fields from it.
296.             if opts.fields is None and opts.exclude is None:
297.                 raise ImproperlyConfigured(
298.                     "Creating a ModelForm without either the 'fields' attribute "
299.                     "or the 'exclude' attribute is prohibited; form %s "
300.                     "needs updating." % name
301.                 )
302. 
303.             if opts.fields == ALL_FIELDS:
304.                 # Sentinel for fields_for_model to indicate "get the list of
305.                 # fields from the model"
306.                 opts.fields = None
307. 
308.             fields = fields_for_model(
309.                 opts.model,
310.                 opts.fields,
311.                 opts.exclude,
312.                 opts.widgets,
313.                 opts.formfield_callback,
314.                 opts.localized_fields,
315.                 opts.labels,
316.                 opts.help_texts,
317.                 opts.error_messages,
318.                 opts.field_classes,
319.                 # limit_choices_to will be applied during ModelForm.__init__().
320.                 apply_limit_choices_to=False,
321.                 form_declared_fields=new_class.declared_fields,
322.             )
323. 
324.             # make sure opts.fields doesn't specify an invalid field
325.             none_model_fields = {k for k, v in fields.items() if not v}
326.             missing_fields = none_model_fields.difference(new_class.declared_fields)
327.             if missing_fields:
328.                 message = "Unknown field(s) (%s) specified for %s"
329.                 message %= (", ".join(missing_fields), opts.model.__name__)
330.                 raise FieldError(message)
331.             # Include all the other declared fields.
332.             fields.update(new_class.declared_fields)
333.         else:
334.             fields = new_class.declared_fields
335. 
336.         new_class.base_fields = fields
337. 
338.         return new_class
339. 
340. 
341. class BaseModelForm(BaseForm, AltersData):
342.     def __init__(
343.         self,
344.         data=None,
345.         files=None,
346.         auto_id="id_%s",
347.         prefix=None,
348.         initial=None,
349.         error_class=ErrorList,
350.         label_suffix=None,
351.         empty_permitted=False,
352.         instance=None,
353.         use_required_attribute=None,
354.         renderer=None,
355.     ):
356.         opts = self._meta
357.         if opts.model is None:
358.             raise ValueError("ModelForm has no model class specified.")
359.         if instance is None:
360.             # if we didn't get an instance, instantiate a new one
361.             self.instance = opts.model()
362.             object_data = {}
363.         else:
364.             self.instance = instance
365.             object_data = model_to_dict(instance, opts.fields, opts.exclude)
366.         # if initial was provided, it should override the values from instance
367.         if initial is not None:
368.             object_data.update(initial)
369.         # self._validate_unique will be set to True by BaseModelForm.clean().
370.         # It is False by default so overriding self.clean() and failing to call
371.         # super will stop validate_unique from being called.
372.         self._validate_unique = False
373.         super().__init__(
374.             data,
375.             files,
376.             auto_id,
377.             prefix,
378.             object_data,
379.             error_class,
380.             label_suffix,
381.             empty_permitted,
382.             use_required_attribute=use_required_attribute,
383.             renderer=renderer,
384.         )
385.         for formfield in self.fields.values():
386.             apply_limit_choices_to_to_formfield(formfield)
387. 
388.     def _get_validation_exclusions(self):
389.         """
390.         For backwards-compatibility, exclude several types of fields from model
391.         validation. See tickets #12507, #12521, #12553.
392.         """
393.         exclude = set()
394.         # Build up a list of fields that should be excluded from model field
395.         # validation and unique checks.
396.         for f in self.instance._meta.fields:
397.             field = f.name
398.             # Exclude fields that aren't on the form. The developer may be
399.             # adding these values to the model after form validation.
400.             if field not in self.fields:
401.                 exclude.add(f.name)
402. 
403.             # Don't perform model validation on fields that were defined
404.             # manually on the form and excluded via the ModelForm's Meta
405.             # class. See #12901.
406.             elif self._meta.fields and field not in self._meta.fields:
407.                 exclude.add(f.name)
408.             elif self._meta.exclude and field in self._meta.exclude:
409.                 exclude.add(f.name)
410. 
411.             # Exclude fields that failed form validation. There's no need for
412.             # the model fields to validate them as well.
413.             elif field in self._errors:
414.                 exclude.add(f.name)
415. 
416.             # Exclude empty fields that are not required by the form, if the
417.             # underlying model field is required. This keeps the model field
418.             # from raising a required error. Note: don't exclude the field from
419.             # validation if the model field allows blanks. If it does, the blank
420.             # value may be included in a unique check, so cannot be excluded
421.             # from validation.
422.             else:
423.                 form_field = self.fields[field]
424.                 field_value = self.cleaned_data.get(field)
425.                 if (
426.                     not f.blank
427.                     and not form_field.required
428.                     and field_value in form_field.empty_values
429.                 ):
430.                     exclude.add(f.name)
431.         return exclude
432. 
433.     def clean(self):
434.         self._validate_unique = True
435.         return self.cleaned_data
436. 
437.     def _update_errors(self, errors):
438.         # Override any validation error messages defined at the model level
439.         # with those defined at the form level.
440.         opts = self._meta
441. 
442.         # Allow the model generated by construct_instance() to raise
443.         # ValidationError and have them handled in the same way as others.
444.         if hasattr(errors, "error_dict"):
445.             error_dict = errors.error_dict
446.         else:
447.             error_dict = {NON_FIELD_ERRORS: errors}
448. 
449.         for field, messages in error_dict.items():
450.             if (
451.                 field == NON_FIELD_ERRORS
452.                 and opts.error_messages
453.                 and NON_FIELD_ERRORS in opts.error_messages
454.             ):
455.                 error_messages = opts.error_messages[NON_FIELD_ERRORS]
456.             elif field in self.fields:
457.                 error_messages = self.fields[field].error_messages
458.             else:
459.                 continue
460. 
461.             for message in messages:
462.                 if (
463.                     isinstance(message, ValidationError)
464.                     and message.code in error_messages
465.                 ):
466.                     message.message = error_messages[message.code]
467. 
468.         self.add_error(None, errors)
469. 
470.     def _post_clean(self):
471.         opts = self._meta
472. 
473.         exclude = self._get_validation_exclusions()
474. 
475.         # Foreign Keys being used to represent inline relationships
476.         # are excluded from basic field value validation. This is for two
477.         # reasons: firstly, the value may not be supplied (#12507; the
478.         # case of providing new values to the admin); secondly the
479.         # object being referred to may not yet fully exist (#12749).
480.         # However, these fields *must* be included in uniqueness checks,
481.         # so this can't be part of _get_validation_exclusions().
482.         for name, field in self.fields.items():
483.             if isinstance(field, InlineForeignKeyField):
484.                 exclude.add(name)
485. 
486.         try:
487.             self.instance = construct_instance(
488.                 self, self.instance, opts.fields, opts.exclude
489.             )
490.         except ValidationError as e:
491.             self._update_errors(e)
492. 
493.         try:
494.             self.instance.full_clean(exclude=exclude, validate_unique=False)
495.         except ValidationError as e:
496.             self._update_errors(e)
497. 
498.         # Validate uniqueness if needed.
499.         if self._validate_unique:
500.             self.validate_unique()
501. 
502.     def validate_unique(self):
503.         """
504.         Call the instance's validate_unique() method and update the form's
505.         validation errors if any were raised.
506.         """
507.         exclude = self._get_validation_exclusions()
508.         try:
509.             self.instance.validate_unique(exclude=exclude)
510.         except ValidationError as e:
511.             self._update_errors(e)
512. 
513.     def _save_m2m(self):
514.         """
515.         Save the many-to-many fields and generic relations for this form.
516.         """
517.         cleaned_data = self.cleaned_data
518.         exclude = self._meta.exclude
519.         fields = self._meta.fields
520.         opts = self.instance._meta
521.         # Note that for historical reasons we want to include also
522.         # private_fields here. (GenericRelation was previously a fake
523.         # m2m field).
524.         for f in chain(opts.many_to_many, opts.private_fields):
525.             if not hasattr(f, "save_form_data"):
526.                 continue
527.             if fields and f.name not in fields:
528.                 continue
529.             if exclude and f.name in exclude:
530.                 continue
531.             if f.name in cleaned_data:
532.                 f.save_form_data(self.instance, cleaned_data[f.name])
533. 
534.     def save(self, commit=True):
535.         """
536.         Save this form's self.instance object if commit=True. Otherwise, add
537.         a save_m2m() method to the form which can be called after the instance
538.         is saved manually at a later time. Return the model instance.
539.         """
540.         if self.errors:
541.             raise ValueError(
542.                 "The %s could not be %s because the data didn't validate."
543.                 % (
544.                     self.instance._meta.object_name,
545.                     "created" if self.instance._state.adding else "changed",
546.                 )
547.             )
548.         if commit:
549.             # If committing, save the instance and the m2m data immediately.
550.             self.instance.save()
551.             self._save_m2m()
552.         else:
553.             # If not committing, add a method to the form to allow deferred
554.             # saving of m2m data.
555.             self.save_m2m = self._save_m2m
556.         return self.instance
557. 
558.     save.alters_data = True
559. 
560. 
561. class ModelForm(BaseModelForm, metaclass=ModelFormMetaclass):
562.     pass
563. 
564. 
565. def modelform_factory(
566.     model,
567.     form=ModelForm,
568.     fields=None,
569.     exclude=None,
570.     formfield_callback=None,
571.     widgets=None,
572.     localized_fields=None,
573.     labels=None,
574.     help_texts=None,
575.     error_messages=None,
576.     field_classes=None,
577. ):
578.     """
579.     Return a ModelForm containing form fields for the given model. You can
580.     optionally pass a `form` argument to use as a starting point for
581.     constructing the ModelForm.
582. 
583.     ``fields`` is an optional list of field names. If provided, include only
584.     the named fields in the returned fields. If omitted or '__all__', use all
585.     fields.
586. 
587.     ``exclude`` is an optional list of field names. If provided, exclude the
588.     named fields from the returned fields, even if they are listed in the
589.     ``fields`` argument.
590. 
591.     ``widgets`` is a dictionary of model field names mapped to a widget.
592. 
593.     ``localized_fields`` is a list of names of fields which should be localized.
594. 
595.     ``formfield_callback`` is a callable that takes a model field and returns
596.     a form field.
597. 
598.     ``labels`` is a dictionary of model field names mapped to a label.
599. 
600.     ``help_texts`` is a dictionary of model field names mapped to a help text.
601. 
602.     ``error_messages`` is a dictionary of model field names mapped to a
603.     dictionary of error messages.
604. 
605.     ``field_classes`` is a dictionary of model field names mapped to a form
606.     field class.
607.     """
608.     # Create the inner Meta class. FIXME: ideally, we should be able to
609.     # construct a ModelForm without creating and passing in a temporary
610.     # inner class.
611. 
612.     # Build up a list of attributes that the Meta object will have.
613.     attrs = {"model": model}
614.     if fields is not None:
615.         attrs["fields"] = fields
616.     if exclude is not None:
617.         attrs["exclude"] = exclude
618.     if widgets is not None:
619.         attrs["widgets"] = widgets
620.     if localized_fields is not None:
621.         attrs["localized_fields"] = localized_fields
622.     if labels is not None:
623.         attrs["labels"] = labels
624.     if help_texts is not None:
625.         attrs["help_texts"] = help_texts
626.     if error_messages is not None:
627.         attrs["error_messages"] = error_messages
628.     if field_classes is not None:
629.         attrs["field_classes"] = field_classes
630. 
631.     # If parent form class already has an inner Meta, the Meta we're
632.     # creating needs to inherit from the parent's inner meta.
633.     bases = (form.Meta,) if hasattr(form, "Meta") else ()
634.     Meta = type("Meta", bases, attrs)
635.     if formfield_callback:
636.         Meta.formfield_callback = staticmethod(formfield_callback)
637.     # Give this new form class a reasonable name.
638.     class_name = model.__name__ + "Form"
639. 
640.     # Class attributes for the new form class.
641.     form_class_attrs = {"Meta": Meta}
642. 
643.     if getattr(Meta, "fields", None) is None and getattr(Meta, "exclude", None) is None:
644.         raise ImproperlyConfigured(
645.             "Calling modelform_factory without defining 'fields' or "
646.             "'exclude' explicitly is prohibited."
647.         )
648. 
649.     # Instantiate type(form) in order to use the same metaclass as form.
650.     return type(form)(class_name, (form,), form_class_attrs)
651. 
652. 
653. # ModelFormSets ##############################################################
654. 
655. 
656. class BaseModelFormSet(BaseFormSet, AltersData):
657.     """
658.     A ``FormSet`` for editing a queryset and/or adding new objects to it.
659.     """
660. 
661.     model = None
662.     edit_only = False
663. 
664.     # Set of fields that must be unique among forms of this set.
665.     unique_fields = set()
666. 
667.     def __init__(
668.         self,
669.         data=None,
670.         files=None,
671.         auto_id="id_%s",
672.         prefix=None,
673.         queryset=None,
674.         *,
675.         initial=None,
676.         **kwargs,
677.     ):
678.         self.queryset = queryset
679.         self.initial_extra = initial
680.         super().__init__(
681.             **{
682.                 "data": data,
683.                 "files": files,
684.                 "auto_id": auto_id,
685.                 "prefix": prefix,
686.                 **kwargs,
687.             }
688.         )
689. 
690.     def initial_form_count(self):
691.         """Return the number of forms that are required in this FormSet."""
692.         if not self.is_bound:
693.             return len(self.get_queryset())
694.         return super().initial_form_count()
695. 
696.     def _existing_object(self, pk):
697.         if not hasattr(self, "_object_dict"):
698.             self._object_dict = {o.pk: o for o in self.get_queryset()}
699.         return self._object_dict.get(pk)
700. 
701.     def _get_to_python(self, field):
702.         """
703.         If the field is a related field, fetch the concrete field's (that
704.         is, the ultimate pointed-to field's) to_python.
705.         """
706.         while field.remote_field is not None:
707.             field = field.remote_field.get_related_field()
708.         return field.to_python
709. 
710.     def _construct_form(self, i, **kwargs):
711.         pk_required = i < self.initial_form_count()
712.         if pk_required:
713.             if self.is_bound:
714.                 pk_key = "%s-%s" % (self.add_prefix(i), self.model._meta.pk.name)
715.                 try:
716.                     pk = self.data[pk_key]
717.                 except KeyError:
718.                     # The primary key is missing. The user may have tampered
719.                     # with POST data.
720.                     pass
721.                 else:
722.                     to_python = self._get_to_python(self.model._meta.pk)
723.                     try:
724.                         pk = to_python(pk)
725.                     except ValidationError:
726.                         # The primary key exists but is an invalid value. The
727.                         # user may have tampered with POST data.
728.                         pass
729.                     else:
730.                         kwargs["instance"] = self._existing_object(pk)
731.             else:
732.                 kwargs["instance"] = self.get_queryset()[i]
733.         elif self.initial_extra:
734.             # Set initial values for extra forms
735.             try:
736.                 kwargs["initial"] = self.initial_extra[i - self.initial_form_count()]
737.             except IndexError:
738.                 pass
739.         form = super()._construct_form(i, **kwargs)
740.         if pk_required:
741.             form.fields[self.model._meta.pk.name].required = True
742.         return form
743. 
744.     def get_queryset(self):
745.         if not hasattr(self, "_queryset"):
746.             if self.queryset is not None:
747.                 qs = self.queryset
748.             else:
749.                 qs = self.model._default_manager.get_queryset()
750. 
751.             # If the queryset isn't already ordered we need to add an
752.             # artificial ordering here to make sure that all formsets
753.             # constructed from this queryset have the same form order.
754.             if not qs.ordered:
755.                 qs = qs.order_by(self.model._meta.pk.name)
756. 
757.             # Removed queryset limiting here. As per discussion re: #13023
758.             # on django-dev, max_num should not prevent existing
759.             # related objects/inlines from being displayed.
760.             self._queryset = qs
761.         return self._queryset
762. 
763.     def save_new(self, form, commit=True):
764.         """Save and return a new model instance for the given form."""
765.         return form.save(commit=commit)
766. 
767.     def save_existing(self, form, obj, commit=True):
768.         """Save and return an existing model instance for the given form."""
769.         return form.save(commit=commit)
770. 
771.     def delete_existing(self, obj, commit=True):
772.         """Deletes an existing model instance."""
773.         if commit:
774.             obj.delete()
775. 
776.     def save(self, commit=True):
777.         """
778.         Save model instances for every form, adding and changing instances
779.         as necessary, and return the list of instances.
780.         """
781.         if not commit:
782.             self.saved_forms = []
783. 
784.             def save_m2m():
785.                 for form in self.saved_forms:
786.                     form.save_m2m()
787. 
788.             self.save_m2m = save_m2m
789.         if self.edit_only:
790.             return self.save_existing_objects(commit)
791.         else:
792.             return self.save_existing_objects(commit) + self.save_new_objects(commit)
793. 
794.     save.alters_data = True
795. 
796.     def clean(self):
797.         self.validate_unique()
798. 
799.     def validate_unique(self):
800.         # Collect unique_checks and date_checks to run from all the forms.
801.         all_unique_checks = set()
802.         all_date_checks = set()
803.         forms_to_delete = self.deleted_forms
804.         valid_forms = [
805.             form
806.             for form in self.forms
807.             if form.is_valid() and form not in forms_to_delete
808.         ]
809.         for form in valid_forms:
810.             exclude = form._get_validation_exclusions()
811.             unique_checks, date_checks = form.instance._get_unique_checks(
812.                 exclude=exclude,
813.                 include_meta_constraints=True,
814.             )
815.             all_unique_checks.update(unique_checks)
816.             all_date_checks.update(date_checks)
817. 
818.         errors = []
819.         # Do each of the unique checks (unique and unique_together)
820.         for uclass, unique_check in all_unique_checks:
821.             seen_data = set()
822.             for form in valid_forms:
823.                 # Get the data for the set of fields that must be unique among
824.                 # the forms.
825.                 row_data = (
826.                     field if field in self.unique_fields else form.cleaned_data[field]
827.                     for field in unique_check
828.                     if field in form.cleaned_data
829.                 )
830.                 # Reduce Model instances to their primary key values
831.                 row_data = tuple(
832.                     d._get_pk_val() if hasattr(d, "_get_pk_val")
833.                     # Prevent "unhashable type: list" errors later on.
834.                     else tuple(d) if isinstance(d, list) else d
835.                     for d in row_data
836.                 )
837.                 if row_data and None not in row_data:
838.                     # if we've already seen it then we have a uniqueness failure
839.                     if row_data in seen_data:
840.                         # poke error messages into the right places and mark
841.                         # the form as invalid
842.                         errors.append(self.get_unique_error_message(unique_check))
843.                         form._errors[NON_FIELD_ERRORS] = self.error_class(
844.                             [self.get_form_error()],
845.                             renderer=self.renderer,
846.                         )
847.                         # Remove the data from the cleaned_data dict since it
848.                         # was invalid.
849.                         for field in unique_check:
850.                             if field in form.cleaned_data:
851.                                 del form.cleaned_data[field]
852.                     # mark the data as seen
853.                     seen_data.add(row_data)
854.         # iterate over each of the date checks now
855.         for date_check in all_date_checks:
856.             seen_data = set()
857.             uclass, lookup, field, unique_for = date_check
858.             for form in valid_forms:
859.                 # see if we have data for both fields
860.                 if (
861.                     form.cleaned_data
862.                     and form.cleaned_data[field] is not None
863.                     and form.cleaned_data[unique_for] is not None
864.                 ):
865.                     # if it's a date lookup we need to get the data for all the fields
866.                     if lookup == "date":
867.                         date = form.cleaned_data[unique_for]
868.                         date_data = (date.year, date.month, date.day)
869.                     # otherwise it's just the attribute on the date/datetime
870.                     # object
871.                     else:
872.                         date_data = (getattr(form.cleaned_data[unique_for], lookup),)
873.                     data = (form.cleaned_data[field],) + date_data
874.                     # if we've already seen it then we have a uniqueness failure
875.                     if data in seen_data:
876.                         # poke error messages into the right places and mark
877.                         # the form as invalid
878.                         errors.append(self.get_date_error_message(date_check))
879.                         form._errors[NON_FIELD_ERRORS] = self.error_class(
880.                             [self.get_form_error()],
881.                             renderer=self.renderer,
882.                         )
883.                         # Remove the data from the cleaned_data dict since it
884.                         # was invalid.
885.                         del form.cleaned_data[field]
886.                     # mark the data as seen
887.                     seen_data.add(data)
888. 
889.         if errors:
890.             raise ValidationError(errors)
891. 
892.     def get_unique_error_message(self, unique_check):
893.         if len(unique_check) == 1:
894.             return gettext("Please correct the duplicate data for %(field)s.") % {
895.                 "field": unique_check[0],
896.             }
897.         else:
898.             return gettext(
899.                 "Please correct the duplicate data for %(field)s, which must be unique."
900.             ) % {
901.                 "field": get_text_list(unique_check, _("and")),
902.             }
903. 
904.     def get_date_error_message(self, date_check):
905.         return gettext(
906.             "Please correct the duplicate data for %(field_name)s "
907.             "which must be unique for the %(lookup)s in %(date_field)s."
908.         ) % {
909.             "field_name": date_check[2],
910.             "date_field": date_check[3],
911.             "lookup": str(date_check[1]),
912.         }
913. 
914.     def get_form_error(self):
915.         return gettext("Please correct the duplicate values below.")
916. 
917.     def save_existing_objects(self, commit=True):
918.         self.changed_objects = []
919.         self.deleted_objects = []
920.         if not self.initial_forms:
921.             return []
922. 
923.         saved_instances = []
924.         forms_to_delete = self.deleted_forms
925.         for form in self.initial_forms:
926.             obj = form.instance
927.             # If the pk is None, it means either:
928.             # 1. The object is an unexpected empty model, created by invalid
929.             #    POST data such as an object outside the formset's queryset.
930.             # 2. The object was already deleted from the database.
931.             if obj.pk is None:
932.                 continue
933.             if form in forms_to_delete:
934.                 self.deleted_objects.append(obj)
935.                 self.delete_existing(obj, commit=commit)
936.             elif form.has_changed():
937.                 self.changed_objects.append((obj, form.changed_data))
938.                 saved_instances.append(self.save_existing(form, obj, commit=commit))
939.                 if not commit:
940.                     self.saved_forms.append(form)
941.         return saved_instances
942. 
943.     def save_new_objects(self, commit=True):
944.         self.new_objects = []
945.         for form in self.extra_forms:
946.             if not form.has_changed():
947.                 continue
948.             # If someone has marked an add form for deletion, don't save the
949.             # object.
950.             if self.can_delete and self._should_delete_form(form):
951.                 continue
952.             self.new_objects.append(self.save_new(form, commit=commit))
953.             if not commit:
954.                 self.saved_forms.append(form)
955.         return self.new_objects
956. 
957.     def add_fields(self, form, index):
958.         """Add a hidden field for the object's primary key."""
959.         from django.db.models import AutoField, ForeignKey, OneToOneField
960. 
961.         self._pk_field = pk = self.model._meta.pk
962.         # If a pk isn't editable, then it won't be on the form, so we need to
963.         # add it here so we can tell which object is which when we get the
964.         # data back. Generally, pk.editable should be false, but for some
965.         # reason, auto_created pk fields and AutoField's editable attribute is
966.         # True, so check for that as well.
967. 
968.         def pk_is_not_editable(pk):
969.             return (
970.                 (not pk.editable)
971.                 or (pk.auto_created or isinstance(pk, AutoField))
972.                 or (
973.                     pk.remote_field
974.                     and pk.remote_field.parent_link
975.                     and pk_is_not_editable(pk.remote_field.model._meta.pk)
976.                 )
977.             )
978. 
979.         if pk_is_not_editable(pk) or pk.name not in form.fields:
980.             if form.is_bound:
981.                 # If we're adding the related instance, ignore its primary key
982.                 # as it could be an auto-generated default which isn't actually
983.                 # in the database.
984.                 pk_value = None if form.instance._state.adding else form.instance.pk
985.             else:
986.                 try:
987.                     if index is not None:
988.                         pk_value = self.get_queryset()[index].pk
989.                     else:
990.                         pk_value = None
991.                 except IndexError:
992.                     pk_value = None
993.             if isinstance(pk, (ForeignKey, OneToOneField)):
994.                 qs = pk.remote_field.model._default_manager.get_queryset()
995.             else:
996.                 qs = self.model._default_manager.get_queryset()
997.             qs = qs.using(form.instance._state.db)
998.             if form._meta.widgets:
999.                 widget = form._meta.widgets.get(self._pk_field.name, HiddenInput)
1000.             else:
1001.                 widget = HiddenInput
1002.             form.fields[self._pk_field.name] = ModelChoiceField(
1003.                 qs, initial=pk_value, required=False, widget=widget
1004.             )
1005.         super().add_fields(form, index)
1006. 
1007. 
1008. def modelformset_factory(
1009.     model,
1010.     form=ModelForm,
1011.     formfield_callback=None,
1012.     formset=BaseModelFormSet,
1013.     extra=1,
1014.     can_delete=False,
1015.     can_order=False,
1016.     max_num=None,
1017.     fields=None,
1018.     exclude=None,
1019.     widgets=None,
1020.     validate_max=False,
1021.     localized_fields=None,
1022.     labels=None,
1023.     help_texts=None,
1024.     error_messages=None,
1025.     min_num=None,
1026.     validate_min=False,
1027.     field_classes=None,
1028.     absolute_max=None,
1029.     can_delete_extra=True,
1030.     renderer=None,
1031.     edit_only=False,
1032. ):
1033.     """Return a FormSet class for the given Django model class."""
1034.     meta = getattr(form, "Meta", None)
1035.     if (
1036.         getattr(meta, "fields", fields) is None
1037.         and getattr(meta, "exclude", exclude) is None
1038.     ):
1039.         raise ImproperlyConfigured(
1040.             "Calling modelformset_factory without defining 'fields' or "
1041.             "'exclude' explicitly is prohibited."
1042.         )
1043. 
1044.     form = modelform_factory(
1045.         model,
1046.         form=form,
1047.         fields=fields,
1048.         exclude=exclude,
1049.         formfield_callback=formfield_callback,
1050.         widgets=widgets,
1051.         localized_fields=localized_fields,
1052.         labels=labels,
1053.         help_texts=help_texts,
1054.         error_messages=error_messages,
1055.         field_classes=field_classes,
1056.     )
1057.     FormSet = formset_factory(
1058.         form,
1059.         formset,
1060.         extra=extra,
1061.         min_num=min_num,
1062.         max_num=max_num,
1063.         can_order=can_order,
1064.         can_delete=can_delete,
1065.         validate_min=validate_min,
1066.         validate_max=validate_max,
1067.         absolute_max=absolute_max,
1068.         can_delete_extra=can_delete_extra,
1069.         renderer=renderer,
1070.     )
1071.     FormSet.model = model
1072.     FormSet.edit_only = edit_only
1073.     return FormSet
1074. 
1075. 
1076. # InlineFormSets #############################################################
1077. 
1078. 
1079. class BaseInlineFormSet(BaseModelFormSet):
1080.     """A formset for child objects related to a parent."""
1081. 
1082.     def __init__(
1083.         self,
1084.         data=None,
1085.         files=None,
1086.         instance=None,
1087.         save_as_new=False,
1088.         prefix=None,
1089.         queryset=None,
1090.         **kwargs,
1091.     ):
1092.         if instance is None:
1093.             self.instance = self.fk.remote_field.model()
1094.         else:
1095.             self.instance = instance
1096.         self.save_as_new = save_as_new
1097.         if queryset is None:
1098.             queryset = self.model._default_manager
1099.         if self.instance.pk is not None:
1100.             qs = queryset.filter(**{self.fk.name: self.instance})
1101.         else:
1102.             qs = queryset.none()
1103.         self.unique_fields = {self.fk.name}
1104.         super().__init__(data, files, prefix=prefix, queryset=qs, **kwargs)
1105. 
1106.         # Add the generated field to form._meta.fields if it's defined to make
1107.         # sure validation isn't skipped on that field.
1108.         if self.form._meta.fields and self.fk.name not in self.form._meta.fields:
1109.             if isinstance(self.form._meta.fields, tuple):
1110.                 self.form._meta.fields = list(self.form._meta.fields)
1111.             self.form._meta.fields.append(self.fk.name)
1112. 
1113.     def initial_form_count(self):
1114.         if self.save_as_new:
1115.             return 0
1116.         return super().initial_form_count()
1117. 
1118.     def _construct_form(self, i, **kwargs):
1119.         form = super()._construct_form(i, **kwargs)
1120.         if self.save_as_new:
1121.             mutable = getattr(form.data, "_mutable", None)
1122.             # Allow modifying an immutable QueryDict.
1123.             if mutable is not None:
1124.                 form.data._mutable = True
1125.             # Remove the primary key from the form's data, we are only
1126.             # creating new instances
1127.             form.data[form.add_prefix(self._pk_field.name)] = None
1128.             # Remove the foreign key from the form's data
1129.             form.data[form.add_prefix(self.fk.name)] = None
1130.             if mutable is not None:
1131.                 form.data._mutable = mutable
1132. 
1133.         # Set the fk value here so that the form can do its validation.
1134.         fk_value = self.instance.pk
1135.         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
1136.             fk_value = getattr(self.instance, self.fk.remote_field.field_name)
1137.             fk_value = getattr(fk_value, "pk", fk_value)
1138.         setattr(form.instance, self.fk.get_attname(), fk_value)
1139.         return form
1140. 
1141.     @classmethod
1142.     def get_default_prefix(cls):
1143.         return cls.fk.remote_field.get_accessor_name(model=cls.model).replace("+", "")
1144. 
1145.     def save_new(self, form, commit=True):
1146.         # Ensure the latest copy of the related instance is present on each
1147.         # form (it may have been saved after the formset was originally
1148.         # instantiated).
1149.         setattr(form.instance, self.fk.name, self.instance)
1150.         return super().save_new(form, commit=commit)
1151. 
1152.     def add_fields(self, form, index):
1153.         super().add_fields(form, index)
1154.         if self._pk_field == self.fk:
1155.             name = self._pk_field.name
1156.             kwargs = {"pk_field": True}
1157.         else:
1158.             # The foreign key field might not be on the form, so we poke at the
1159.             # Model field to get the label, since we need that for error messages.
1160.             name = self.fk.name
1161.             kwargs = {
1162.                 "label": getattr(
1163.                     form.fields.get(name), "label", capfirst(self.fk.verbose_name)
1164.                 )
1165.             }
1166. 
1167.         # The InlineForeignKeyField assumes that the foreign key relation is
1168.         # based on the parent model's pk. If this isn't the case, set to_field
1169.         # to correctly resolve the initial form value.
1170.         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
1171.             kwargs["to_field"] = self.fk.remote_field.field_name
1172. 
1173.         # If we're adding a new object, ignore a parent's auto-generated key
1174.         # as it will be regenerated on the save request.
1175.         if self.instance._state.adding:
1176.             if kwargs.get("to_field") is not None:
1177.                 to_field = self.instance._meta.get_field(kwargs["to_field"])
1178.             else:
1179.                 to_field = self.instance._meta.pk
1180.             if to_field.has_default():
1181.                 setattr(self.instance, to_field.attname, None)
1182. 
1183.         form.fields[name] = InlineForeignKeyField(self.instance, **kwargs)
1184. 
1185.     def get_unique_error_message(self, unique_check):
1186.         unique_check = [field for field in unique_check if field != self.fk.name]
1187.         return super().get_unique_error_message(unique_check)
1188. 
1189. 
1190. def _get_foreign_key(parent_model, model, fk_name=None, can_fail=False):
1191.     """
1192.     Find and return the ForeignKey from model to parent if there is one
1193.     (return None if can_fail is True and no such field exists). If fk_name is
1194.     provided, assume it is the name of the ForeignKey field. Unless can_fail is
1195.     True, raise an exception if there isn't a ForeignKey from model to
1196.     parent_model.
1197.     """
1198.     # avoid circular import
1199.     from django.db.models import ForeignKey
1200. 
1201.     opts = model._meta
1202.     if fk_name:
1203.         fks_to_parent = [f for f in opts.fields if f.name == fk_name]
1204.         if len(fks_to_parent) == 1:
1205.             fk = fks_to_parent[0]
1206.             parent_list = parent_model._meta.get_parent_list()
1207.             if (
1208.                 not isinstance(fk, ForeignKey)
1209.                 or (
1210.                     # ForeignKey to proxy models.
1211.                     fk.remote_field.model._meta.proxy
1212.                     and fk.remote_field.model._meta.proxy_for_model not in parent_list
1213.                 )
1214.                 or (
1215.                     # ForeignKey to concrete models.
1216.                     not fk.remote_field.model._meta.proxy
1217.                     and fk.remote_field.model != parent_model
1218.                     and fk.remote_field.model not in parent_list
1219.                 )
1220.             ):
1221.                 raise ValueError(
1222.                     "fk_name '%s' is not a ForeignKey to '%s'."
1223.                     % (fk_name, parent_model._meta.label)
1224.                 )
1225.         elif not fks_to_parent:
1226.             raise ValueError(
1227.                 "'%s' has no field named '%s'." % (model._meta.label, fk_name)
1228.             )
1229.     else:
1230.         # Try to discover what the ForeignKey from model to parent_model is
1231.         parent_list = parent_model._meta.get_parent_list()
1232.         fks_to_parent = [
1233.             f
1234.             for f in opts.fields
1235.             if isinstance(f, ForeignKey)
1236.             and (
1237.                 f.remote_field.model == parent_model
1238.                 or f.remote_field.model in parent_list
1239.                 or (
1240.                     f.remote_field.model._meta.proxy
1241.                     and f.remote_field.model._meta.proxy_for_model in parent_list
1242.                 )
1243.             )
1244.         ]
1245.         if len(fks_to_parent) == 1:
1246.             fk = fks_to_parent[0]
1247.         elif not fks_to_parent:
1248.             if can_fail:
1249.                 return
1250.             raise ValueError(
1251.                 "'%s' has no ForeignKey to '%s'."
1252.                 % (
1253.                     model._meta.label,
1254.                     parent_model._meta.label,
1255.                 )
1256.             )
1257.         else:
1258.             raise ValueError(
1259.                 "'%s' has more than one ForeignKey to '%s'. You must specify "
1260.                 "a 'fk_name' attribute."
1261.                 % (
1262.                     model._meta.label,
1263.                     parent_model._meta.label,
1264.                 )
1265.             )
1266.     return fk
1267. 
1268. 
1269. def inlineformset_factory(
1270.     parent_model,
1271.     model,
1272.     form=ModelForm,
1273.     formset=BaseInlineFormSet,
1274.     fk_name=None,
1275.     fields=None,
1276.     exclude=None,
1277.     extra=3,
1278.     can_order=False,
1279.     can_delete=True,
1280.     max_num=None,
1281.     formfield_callback=None,
1282.     widgets=None,
1283.     validate_max=False,
1284.     localized_fields=None,
1285.     labels=None,
1286.     help_texts=None,
1287.     error_messages=None,
1288.     min_num=None,
1289.     validate_min=False,
1290.     field_classes=None,
1291.     absolute_max=None,
1292.     can_delete_extra=True,
1293.     renderer=None,
1294.     edit_only=False,
1295. ):
1296.     """
1297.     Return an ``InlineFormSet`` for the given kwargs.
1298. 
1299.     ``fk_name`` must be provided if ``model`` has more than one ``ForeignKey``
1300.     to ``parent_model``.
1301.     """
1302.     fk = _get_foreign_key(parent_model, model, fk_name=fk_name)
1303.     # enforce a max_num=1 when the foreign key to the parent model is unique.
1304.     if fk.unique:
1305.         max_num = 1
1306.     kwargs = {
1307.         "form": form,
1308.         "formfield_callback": formfield_callback,
1309.         "formset": formset,
1310.         "extra": extra,
1311.         "can_delete": can_delete,
1312.         "can_order": can_order,
1313.         "fields": fields,
1314.         "exclude": exclude,
1315.         "min_num": min_num,
1316.         "max_num": max_num,
1317.         "widgets": widgets,
1318.         "validate_min": validate_min,
1319.         "validate_max": validate_max,
1320.         "localized_fields": localized_fields,
1321.         "labels": labels,
1322.         "help_texts": help_texts,
1323.         "error_messages": error_messages,
1324.         "field_classes": field_classes,
1325.         "absolute_max": absolute_max,
1326.         "can_delete_extra": can_delete_extra,
1327.         "renderer": renderer,
1328.         "edit_only": edit_only,
1329.     }
1330.     FormSet = modelformset_factory(model, **kwargs)
1331.     FormSet.fk = fk
1332.     return FormSet
1333. 
1334. 
1335. # Fields #####################################################################
1336. 
1337. 
1338. class InlineForeignKeyField(Field):
1339.     """
1340.     A basic integer field that deals with validating the given value to a
1341.     given parent instance in an inline.
1342.     """
1343. 
1344.     widget = HiddenInput
1345.     default_error_messages = {
1346.         "invalid_choice": _("The inline value did not match the parent instance."),
1347.     }
1348. 
1349.     def __init__(self, parent_instance, *args, pk_field=False, to_field=None, **kwargs):
1350.         self.parent_instance = parent_instance
1351.         self.pk_field = pk_field
1352.         self.to_field = to_field
1353.         if self.parent_instance is not None:
1354.             if self.to_field:
1355.                 kwargs["initial"] = getattr(self.parent_instance, self.to_field)
1356.             else:
1357.                 kwargs["initial"] = self.parent_instance.pk
1358.         kwargs["required"] = False
1359.         super().__init__(*args, **kwargs)
1360. 
1361.     def clean(self, value):
1362.         if value in self.empty_values:
1363.             if self.pk_field:
1364.                 return None
1365.             # if there is no value act as we did before.
1366.             return self.parent_instance
1367.         # ensure the we compare the values as equal types.
1368.         if self.to_field:
1369.             orig = getattr(self.parent_instance, self.to_field)
1370.         else:
1371.             orig = self.parent_instance.pk
1372.         if str(value) != str(orig):
1373.             raise ValidationError(
1374.                 self.error_messages["invalid_choice"], code="invalid_choice"
1375.             )
1376.         return self.parent_instance
1377. 
1378.     def has_changed(self, initial, data):
1379.         return False
1380. 
1381. 
1382. class ModelChoiceIteratorValue:
1383.     def __init__(self, value, instance):
1384.         self.value = value
1385.         self.instance = instance
1386. 
1387.     def __str__(self):
1388.         return str(self.value)
1389. 
1390.     def __hash__(self):
1391.         return hash(self.value)
1392. 
1393.     def __eq__(self, other):
1394.         if isinstance(other, ModelChoiceIteratorValue):
1395.             other = other.value
1396.         return self.value == other
1397. 
1398. 
1399. class ModelChoiceIterator:
1400.     def __init__(self, field):
1401.         self.field = field
1402.         self.queryset = field.queryset
1403. 
1404.     def __iter__(self):
1405.         if self.field.empty_label is not None:
1406.             yield ("", self.field.empty_label)
1407.         queryset = self.queryset
1408.         # Can't use iterator() when queryset uses prefetch_related()
1409.         if not queryset._prefetch_related_lookups:
1410.             queryset = queryset.iterator()
1411.         for obj in queryset:
1412.             yield self.choice(obj)
1413. 
1414.     def __len__(self):
1415.         # count() adds a query but uses less memory since the QuerySet results
1416.         # won't be cached. In most cases, the choices will only be iterated on,
1417.         # and __len__() won't be called.
1418.         return self.queryset.count() + (1 if self.field.empty_label is not None else 0)
1419. 
1420.     def __bool__(self):
1421.         return self.field.empty_label is not None or self.queryset.exists()
1422. 
1423.     def choice(self, obj):
1424.         return (
1425.             ModelChoiceIteratorValue(self.field.prepare_value(obj), obj),
1426.             self.field.label_from_instance(obj),
1427.         )
1428. 
1429. 
1430. class ModelChoiceField(ChoiceField):
1431.     """A ChoiceField whose choices are a model QuerySet."""
1432. 
1433.     # This class is a subclass of ChoiceField for purity, but it doesn't
1434.     # actually use any of ChoiceField's implementation.
1435.     default_error_messages = {
1436.         "invalid_choice": _(
1437.             "Select a valid choice. That choice is not one of the available choices."
1438.         ),
1439.     }
1440.     iterator = ModelChoiceIterator
1441. 
1442.     def __init__(
1443.         self,
1444.         queryset,
1445.         *,
1446.         empty_label="---------",
1447.         required=True,
1448.         widget=None,
1449.         label=None,
1450.         initial=None,
1451.         help_text="",
1452.         to_field_name=None,
1453.         limit_choices_to=None,
1454.         blank=False,
1455.         **kwargs,
1456.     ):
1457.         # Call Field instead of ChoiceField __init__() because we don't need
1458.         # ChoiceField.__init__().
1459.         Field.__init__(
1460.             self,
1461.             required=required,
1462.             widget=widget,
1463.             label=label,
1464.             initial=initial,
1465.             help_text=help_text,
1466.             **kwargs,
1467.         )
1468.         if (required and initial is not None) or (
1469.             isinstance(self.widget, RadioSelect) and not blank
1470.         ):
1471.             self.empty_label = None
1472.         else:
1473.             self.empty_label = empty_label
1474.         self.queryset = queryset
1475.         self.limit_choices_to = limit_choices_to  # limit the queryset later.
1476.         self.to_field_name = to_field_name
1477. 
1478.     def get_limit_choices_to(self):
1479.         """
1480.         Return ``limit_choices_to`` for this form field.
1481. 
1482.         If it is a callable, invoke it and return the result.
1483.         """
1484.         if callable(self.limit_choices_to):
1485.             return self.limit_choices_to()
1486.         return self.limit_choices_to
1487. 
1488.     def __deepcopy__(self, memo):
1489.         result = super(ChoiceField, self).__deepcopy__(memo)
1490.         # Need to force a new ModelChoiceIterator to be created, bug #11183
1491.         if self.queryset is not None:
1492.             result.queryset = self.queryset.all()
1493.         return result
1494. 
1495.     def _get_queryset(self):
1496.         return self._queryset
1497. 
1498.     def _set_queryset(self, queryset):
1499.         self._queryset = None if queryset is None else queryset.all()
1500.         self.widget.choices = self.choices
1501. 
1502.     queryset = property(_get_queryset, _set_queryset)
1503. 
1504.     # this method will be used to create object labels by the QuerySetIterator.
1505.     # Override it to customize the label.
1506.     def label_from_instance(self, obj):
1507.         """
1508.         Convert objects into strings and generate the labels for the choices
1509.         presented by this object. Subclasses can override this method to
1510.         customize the display of the choices.
1511.         """
1512.         return str(obj)
1513. 
1514.     def _get_choices(self):
1515.         # If self._choices is set, then somebody must have manually set
1516.         # the property self.choices. In this case, just return self._choices.
1517.         if hasattr(self, "_choices"):
1518.             return self._choices
1519. 
1520.         # Otherwise, execute the QuerySet in self.queryset to determine the
1521.         # choices dynamically. Return a fresh ModelChoiceIterator that has not been
1522.         # consumed. Note that we're instantiating a new ModelChoiceIterator *each*
1523.         # time _get_choices() is called (and, thus, each time self.choices is
1524.         # accessed) so that we can ensure the QuerySet has not been consumed. This
1525.         # construct might look complicated but it allows for lazy evaluation of
1526.         # the queryset.
1527.         return self.iterator(self)
1528. 
1529.     choices = property(_get_choices, ChoiceField._set_choices)
1530. 
1531.     def prepare_value(self, value):
1532.         if hasattr(value, "_meta"):
1533.             if self.to_field_name:
1534.                 return value.serializable_value(self.to_field_name)
1535.             else:
1536.                 return value.pk
1537.         return super().prepare_value(value)
1538. 
1539.     def to_python(self, value):
1540.         if value in self.empty_values:
1541.             return None
1542.         try:
1543.             key = self.to_field_name or "pk"
1544.             if isinstance(value, self.queryset.model):
1545.                 value = getattr(value, key)
1546.             value = self.queryset.get(**{key: value})
1547.         except (ValueError, TypeError, self.queryset.model.DoesNotExist):
1548.             raise ValidationError(
1549.                 self.error_messages["invalid_choice"],
1550.                 code="invalid_choice",
1551.                 params={"value": value},
1552.             )
1553.         return value
1554. 
1555.     def validate(self, value):
1556.         return Field.validate(self, value)
1557. 
1558.     def has_changed(self, initial, data):
1559.         if self.disabled:
1560.             return False
1561.         initial_value = initial if initial is not None else ""
1562.         data_value = data if data is not None else ""
1563.         return str(self.prepare_value(initial_value)) != str(data_value)
1564. 
1565. 
1566. class ModelMultipleChoiceField(ModelChoiceField):
1567.     """A MultipleChoiceField whose choices are a model QuerySet."""
1568. 
1569.     widget = SelectMultiple
1570.     hidden_widget = MultipleHiddenInput
1571.     default_error_messages = {
1572.         "invalid_list": _("Enter a list of values."),
1573.         "invalid_choice": _(
1574.             "Select a valid choice. %(value)s is not one of the available choices."
1575.         ),
1576.         "invalid_pk_value": _("“%(pk)s” is not a valid value."),
1577.     }
1578. 
1579.     def __init__(self, queryset, **kwargs):
1580.         super().__init__(queryset, empty_label=None, **kwargs)
1581. 
1582.     def to_python(self, value):
1583.         if not value:
1584.             return []
1585.         return list(self._check_values(value))
1586. 
1587.     def clean(self, value):
1588.         value = self.prepare_value(value)
1589.         if self.required and not value:
1590.             raise ValidationError(self.error_messages["required"], code="required")
1591.         elif not self.required and not value:
1592.             return self.queryset.none()
1593.         if not isinstance(value, (list, tuple)):
1594.             raise ValidationError(
1595.                 self.error_messages["invalid_list"],
1596.                 code="invalid_list",
1597.             )
1598.         qs = self._check_values(value)
1599.         # Since this overrides the inherited ModelChoiceField.clean
1600.         # we run custom validators here
1601.         self.run_validators(value)
1602.         return qs
1603. 
1604.     def _check_values(self, value):
1605.         """
1606.         Given a list of possible PK values, return a QuerySet of the
1607.         corresponding objects. Raise a ValidationError if a given value is
1608.         invalid (not a valid PK, not in the queryset, etc.)
1609.         """
1610.         key = self.to_field_name or "pk"
1611.         # deduplicate given values to avoid creating many querysets or
1612.         # requiring the database backend deduplicate efficiently.
1613.         try:
1614.             value = frozenset(value)
1615.         except TypeError:
1616.             # list of lists isn't hashable, for example
1617.             raise ValidationError(
1618.                 self.error_messages["invalid_list"],
1619.                 code="invalid_list",
1620.             )
1621.         for pk in value:
1622.             try:
1623.                 self.queryset.filter(**{key: pk})
1624.             except (ValueError, TypeError):
1625.                 raise ValidationError(
1626.                     self.error_messages["invalid_pk_value"],
1627.                     code="invalid_pk_value",
1628.                     params={"pk": pk},
1629.                 )
1630.         qs = self.queryset.filter(**{"%s__in" % key: value})
1631.         pks = {str(getattr(o, key)) for o in qs}
1632.         for val in value:
1633.             if str(val) not in pks:
1634.                 raise ValidationError(
1635.                     self.error_messages["invalid_choice"],
1636.                     code="invalid_choice",
1637.                     params={"value": val},
1638.                 )
1639.         return qs
1640. 
1641.     def prepare_value(self, value):
1642.         if (
1643.             hasattr(value, "__iter__")
1644.             and not isinstance(value, str)
1645.             and not hasattr(value, "_meta")
1646.         ):
1647.             prepare_value = super().prepare_value
1648.             return [prepare_value(v) for v in value]
1649.         return super().prepare_value(value)
1650. 
1651.     def has_changed(self, initial, data):
1652.         if self.disabled:
1653.             return False
1654.         if initial is None:
1655.             initial = []
1656.         if data is None:
1657.             data = []
1658.         if len(initial) != len(data):
1659.             return True
1660.         initial_set = {str(value) for value in self.prepare_value(initial)}
1661.         data_set = {str(value) for value in data}
1662.         return data_set != initial_set
1663. 
1664. 
1665. def modelform_defines_fields(form_class):
1666.     return hasattr(form_class, "_meta") and (
1667.         form_class._meta.fields is not None or form_class._meta.exclude is not None
1668.     )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 21:15:19,810 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's patch modifies `django/forms/models.py` to fix a bug related to `UUIDField` default values in inline formsets. The fix involves checking the type of the model field using `isinstance` with `AutoField`, `BigAutoField`, and `SmallAutoField`. To fully understand this change and verify its correctness, I need the definitions of these field classes, as well as the definition of `UUIDField` itself. These are located in `django/db/models/fields/__init__.py`." query='Please provide the full content of django/db/models/fields/__init__.py.' extra_requirements='' purpose='I need to inspect the definitions of `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` to understand the logic in the provided patch.'
2025-12-24 21:15:19,811 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of django/db/models/fields/__init__.py.
2025-12-24 21:15:19,811 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-24 21:15:19,811 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-24 21:15:19,812 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-24 21:15:19,812 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of django/db/models/fields/__init__.py.
Purpose: I need to inspect the definitions of `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` to understand the logic in the provided patch.
2025-12-24 21:15:22,739 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have fetched the entire content of `django/db/models/fields/__init__.py` to allow for a detailed inspection of the `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` definitions. This will help in understanding the logic of the provided patch.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2109, 'candidates_token_count': 82, 'total_token_count': 2320, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2109}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 82}], 'thoughts_token_count': 129, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21171986184469083, 'model_name': 'gemini-2.5-pro'} id='run--eb959ab7-7f03-4797-b437-fd485b8651ff-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/fields/__init__.py'}, 'id': '00743a70-ef82-4382-9e84-e9bcaaf9970d', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2109, 'output_tokens': 82, 'total_tokens': 2320, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 129}}
2025-12-24 21:15:25,139 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have initiated a search for the full content of `django/db/models/fields/__init__.py` to find the definitions of `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField`. I am continuing to read the file to retrieve the complete content for your inspection.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "django/db/models/fields/__init__.py", "end_line": 1001.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 8670, 'candidates_token_count': 90, 'total_token_count': 8837, 'cached_content_token_count': 1830, 'prompt_tokens_details': [{'modality': 1, 'token_count': 8670}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1830}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 90}], 'thoughts_token_count': 77}, 'finish_reason': 'STOP', 'avg_logprobs': -0.1570518069797092, 'model_name': 'gemini-2.5-pro'} id='run--f6062479-ca81-4942-8880-ad7869c874b7-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'django/db/models/fields/__init__.py', 'end_line': 1001.0}, 'id': '24f835ce-ba97-47ab-ac27-4a8b876efa2e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8670, 'output_tokens': 90, 'total_tokens': 8837, 'input_token_details': {'cache_read': 1830}, 'output_token_details': {'reasoning': 77}}
2025-12-24 21:15:54,205 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the first 1000 lines of `django/db/models/fields/__init__.py` and am continuing to read the file to ensure I have the complete content. This will allow for a thorough examination of the `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` definitions as requested.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "end_line": 1501.0, "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 15977, 'candidates_token_count': 99, 'total_token_count': 18689, 'prompt_tokens_details': [{'modality': 1, 'token_count': 15977}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 99}], 'thoughts_token_count': 2613, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -3.2892511541193183, 'model_name': 'gemini-2.5-pro'} id='run--96a903a3-66fc-4cc0-87ec-d0ad9b26a61b-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'end_line': 1501.0, 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': 'af634ff3-0023-4bf8-8c27-1606fa80e58f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 15977, 'output_tokens': 99, 'total_tokens': 18689, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 2613}}
2025-12-24 21:15:59,071 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the first 1500 lines of `django/db/models/fields/__init__.py` and am continuing to read the file to ensure I have the complete content. This will allow for a thorough examination of the `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` definitions as requested.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1501.0, "end_line": 2001.0, "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 23352, 'candidates_token_count': 99, 'total_token_count': 23680, 'cached_content_token_count': 15348, 'prompt_tokens_details': [{'modality': 1, 'token_count': 23352}], 'cache_tokens_details': [{'modality': 1, 'token_count': 15348}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 99}], 'thoughts_token_count': 229}, 'finish_reason': 'STOP', 'avg_logprobs': -0.45434870864405774, 'model_name': 'gemini-2.5-pro'} id='run--06c43121-497e-4ab5-9698-d4caa4fbb4f6-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1501.0, 'end_line': 2001.0, 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': '6cc13cd8-f7c2-48ad-876a-e0111af699a3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 23352, 'output_tokens': 99, 'total_tokens': 23680, 'input_token_details': {'cache_read': 15348}, 'output_token_details': {'reasoning': 229}}
2025-12-24 21:16:01,019 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the first 2000 lines of `django/db/models/fields/__init__.py` and am continuing to read the file to ensure I have the complete content. This will allow for a thorough examination of the `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` definitions as requested.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2001.0, "end_line": 2501.0, "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 30390, 'candidates_token_count': 99, 'total_token_count': 30517, 'cached_content_token_count': 23194, 'prompt_tokens_details': [{'modality': 1, 'token_count': 30390}], 'cache_tokens_details': [{'modality': 1, 'token_count': 23194}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 99}], 'thoughts_token_count': 28}, 'finish_reason': 'STOP', 'avg_logprobs': -0.07396574694700915, 'model_name': 'gemini-2.5-pro'} id='run--d76c44a1-c0cf-460e-942a-5e975537219c-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2001.0, 'end_line': 2501.0, 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': 'af328d60-a3b5-4112-8535-0c0fb821647f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 30390, 'output_tokens': 99, 'total_tokens': 30517, 'input_token_details': {'cache_read': 23194}, 'output_token_details': {'reasoning': 28}}
2025-12-24 21:16:55,817 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the first 2500 lines of `django/db/models/fields/__init__.py` and am continuing to read the file to ensure I have the complete content. This will allow for a thorough examination of the `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` definitions as requested.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 2501.0, "relative_path": "django/db/models/fields/__init__.py", "end_line": 3001.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'citation_metadata': {'citations': [{'start_index': 5439, 'end_index': 5765, 'uri': 'https://github.com/katrid/orun', 'title': '', 'license_': ''}]}, 'usage_metadata': {'prompt_token_count': 37296, 'candidates_token_count': 99, 'total_token_count': 44946, 'cached_content_token_count': 29108, 'prompt_tokens_details': [{'modality': 1, 'token_count': 37296}], 'cache_tokens_details': [{'modality': 1, 'token_count': 29108}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 99}], 'thoughts_token_count': 7551}, 'finish_reason': 'STOP', 'avg_logprobs': -3.445141416607481, 'model_name': 'gemini-2.5-pro'} id='run--75ba2d02-c10e-4850-bb43-44b89507eccf-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 2501.0, 'relative_path': 'django/db/models/fields/__init__.py', 'end_line': 3001.0}, 'id': '69ca355c-eac1-4f7e-8abe-89220e7ab8ac', 'type': 'tool_call'}] usage_metadata={'input_tokens': 37296, 'output_tokens': 99, 'total_tokens': 44946, 'input_token_details': {'cache_read': 29108}, 'output_token_details': {'reasoning': 7551}}
2025-12-24 21:17:05,137 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of the file `django/db/models/fields/__init__.py` by reading it in chunks. The definitions of `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` are included in the retrieved content. This information should be sufficient to help you understand the logic in the provided patch.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 42652, 'candidates_token_count': 70, 'total_token_count': 43509, 'cached_content_token_count': 36940, 'prompt_tokens_details': [{'modality': 1, 'token_count': 42652}], 'cache_tokens_details': [{'modality': 1, 'token_count': 36940}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 70}], 'thoughts_token_count': 787}, 'finish_reason': 'STOP', 'avg_logprobs': -1.5298780168805803, 'model_name': 'gemini-2.5-pro'} id='run--e311ac4d-e96b-41b6-87c8-251ed595980f-0' usage_metadata={'input_tokens': 42652, 'output_tokens': 70, 'total_tokens': 43509, 'input_token_details': {'cache_read': 36940}, 'output_token_details': {'reasoning': 787}}
2025-12-24 21:17:05,141 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of django/db/models/fields/__init__.py.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to inspect the definitions of `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` to understand the logic in the provided patch.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/fields/__init__.py
Line number range: 1 - 500
Content:
1. import collections.abc
2. import copy
3. import datetime
4. import decimal
5. import operator
6. import uuid
7. import warnings
8. from base64 import b64decode, b64encode
9. from functools import partialmethod, total_ordering
10. 
11. from django import forms
12. from django.apps import apps
13. from django.conf import settings
14. from django.core import checks, exceptions, validators
15. from django.db import connection, connections, router
16. from django.db.models.constants import LOOKUP_SEP
17. from django.db.models.enums import ChoicesMeta
18. from django.db.models.query_utils import DeferredAttribute, RegisterLookupMixin
19. from django.utils import timezone
20. from django.utils.datastructures import DictWrapper
21. from django.utils.dateparse import (
22.     parse_date,
23.     parse_datetime,
24.     parse_duration,
25.     parse_time,
26. )
27. from django.utils.duration import duration_microseconds, duration_string
28. from django.utils.functional import Promise, cached_property
29. from django.utils.ipv6 import clean_ipv6_address
30. from django.utils.itercompat import is_iterable
31. from django.utils.text import capfirst
32. from django.utils.translation import gettext_lazy as _
33. 
34. __all__ = [
35.     "AutoField",
36.     "BLANK_CHOICE_DASH",
37.     "BigAutoField",
38.     "BigIntegerField",
39.     "BinaryField",
40.     "BooleanField",
41.     "CharField",
42.     "CommaSeparatedIntegerField",
43.     "DateField",
44.     "DateTimeField",
45.     "DecimalField",
46.     "DurationField",
47.     "EmailField",
48.     "Empty",
49.     "Field",
50.     "FilePathField",
51.     "FloatField",
52.     "GenericIPAddressField",
53.     "IPAddressField",
54.     "IntegerField",
55.     "NOT_PROVIDED",
56.     "NullBooleanField",
57.     "PositiveBigIntegerField",
58.     "PositiveIntegerField",
59.     "PositiveSmallIntegerField",
60.     "SlugField",
61.     "SmallAutoField",
62.     "SmallIntegerField",
63.     "TextField",
64.     "TimeField",
65.     "URLField",
66.     "UUIDField",
67. ]
68. 
69. 
70. class Empty:
71.     pass
72. 
73. 
74. class NOT_PROVIDED:
75.     pass
76. 
77. 
78. # The values to use for "blank" in SelectFields. Will be appended to the start
79. # of most "choices" lists.
80. BLANK_CHOICE_DASH = [("", "---------")]
81. 
82. 
83. def _load_field(app_label, model_name, field_name):
84.     return apps.get_model(app_label, model_name)._meta.get_field(field_name)
85. 
86. 
87. # A guide to Field parameters:
88. #
89. #   * name:      The name of the field specified in the model.
90. #   * attname:   The attribute to use on the model object. This is the same as
91. #                "name", except in the case of ForeignKeys, where "_id" is
92. #                appended.
93. #   * db_column: The db_column specified in the model (or None).
94. #   * column:    The database column for this field. This is the same as
95. #                "attname", except if db_column is specified.
96. #
97. # Code that introspects values, or does other dynamic things, should use
98. # attname. For example, this gets the primary key value of object "obj":
99. #
100. #     getattr(obj, opts.pk.attname)
101. 
102. 
103. def _empty(of_cls):
104.     new = Empty()
105.     new.__class__ = of_cls
106.     return new
107. 
108. 
109. def return_None():
110.     return None
111. 
112. 
113. @total_ordering
114. class Field(RegisterLookupMixin):
115.     """Base class for all field types"""
116. 
117.     # Designates whether empty strings fundamentally are allowed at the
118.     # database level.
119.     empty_strings_allowed = True
120.     empty_values = list(validators.EMPTY_VALUES)
121. 
122.     # These track each time a Field instance is created. Used to retain order.
123.     # The auto_creation_counter is used for fields that Django implicitly
124.     # creates, creation_counter is used for all user-specified fields.
125.     creation_counter = 0
126.     auto_creation_counter = -1
127.     default_validators = []  # Default set of validators
128.     default_error_messages = {
129.         "invalid_choice": _("Value %(value)r is not a valid choice."),
130.         "null": _("This field cannot be null."),
131.         "blank": _("This field cannot be blank."),
132.         "unique": _("%(model_name)s with this %(field_label)s already exists."),
133.         "unique_for_date": _(
134.             # Translators: The 'lookup_type' is one of 'date', 'year' or
135.             # 'month'. Eg: "Title must be unique for pub_date year"
136.             "%(field_label)s must be unique for "
137.             "%(date_field_label)s %(lookup_type)s."
138.         ),
139.     }
140.     system_check_deprecated_details = None
141.     system_check_removed_details = None
142. 
143.     # Attributes that don't affect a column definition.
144.     # These attributes are ignored when altering the field.
145.     non_db_attrs = (
146.         "blank",
147.         "choices",
148.         "db_column",
149.         "editable",
150.         "error_messages",
151.         "help_text",
152.         "limit_choices_to",
153.         # Database-level options are not supported, see #21961.
154.         "on_delete",
155.         "related_name",
156.         "related_query_name",
157.         "validators",
158.         "verbose_name",
159.     )
160. 
161.     # Field flags
162.     hidden = False
163. 
164.     many_to_many = None
165.     many_to_one = None
166.     one_to_many = None
167.     one_to_one = None
168.     related_model = None
169. 
170.     descriptor_class = DeferredAttribute
171. 
172.     # Generic field type description, usually overridden by subclasses
173.     def _description(self):
174.         return _("Field of type: %(field_type)s") % {
175.             "field_type": self.__class__.__name__
176.         }
177. 
178.     description = property(_description)
179. 
180.     def __init__(
181.         self,
182.         verbose_name=None,
183.         name=None,
184.         primary_key=False,
185.         max_length=None,
186.         unique=False,
187.         blank=False,
188.         null=False,
189.         db_index=False,
190.         rel=None,
191.         default=NOT_PROVIDED,
192.         editable=True,
193.         serialize=True,
194.         unique_for_date=None,
195.         unique_for_month=None,
196.         unique_for_year=None,
197.         choices=None,
198.         help_text="",
199.         db_column=None,
200.         db_tablespace=None,
201.         auto_created=False,
202.         validators=(),
203.         error_messages=None,
204.         db_comment=None,
205.         db_default=NOT_PROVIDED,
206.     ):
207.         self.name = name
208.         self.verbose_name = verbose_name  # May be set by set_attributes_from_name
209.         self._verbose_name = verbose_name  # Store original for deconstruction
210.         self.primary_key = primary_key
211.         self.max_length, self._unique = max_length, unique
212.         self.blank, self.null = blank, null
213.         self.remote_field = rel
214.         self.is_relation = self.remote_field is not None
215.         self.default = default
216.         if db_default is not NOT_PROVIDED and not hasattr(
217.             db_default, "resolve_expression"
218.         ):
219.             from django.db.models.expressions import Value
220. 
221.             db_default = Value(db_default)
222.         self.db_default = db_default
223.         self.editable = editable
224.         self.serialize = serialize
225.         self.unique_for_date = unique_for_date
226.         self.unique_for_month = unique_for_month
227.         self.unique_for_year = unique_for_year
228.         if isinstance(choices, ChoicesMeta):
229.             choices = choices.choices
230.         if isinstance(choices, collections.abc.Iterator):
231.             choices = list(choices)
232.         self.choices = choices
233.         self.help_text = help_text
234.         self.db_index = db_index
235.         self.db_column = db_column
236.         self.db_comment = db_comment
237.         self._db_tablespace = db_tablespace
238.         self.auto_created = auto_created
239. 
240.         # Adjust the appropriate creation counter, and save our local copy.
241.         if auto_created:
242.             self.creation_counter = Field.auto_creation_counter
243.             Field.auto_creation_counter -= 1
244.         else:
245.             self.creation_counter = Field.creation_counter
246.             Field.creation_counter += 1
247. 
248.         self._validators = list(validators)  # Store for deconstruction later
249. 
250.         self._error_messages = error_messages  # Store for deconstruction later
251. 
252.     def __str__(self):
253.         """
254.         Return "app_label.model_label.field_name" for fields attached to
255.         models.
256.         """
257.         if not hasattr(self, "model"):
258.             return super().__str__()
259.         model = self.model
260.         return "%s.%s" % (model._meta.label, self.name)
261. 
262.     def __repr__(self):
263.         """Display the module, class, and name of the field."""
264.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
265.         name = getattr(self, "name", None)
266.         if name is not None:
267.             return "<%s: %s>" % (path, name)
268.         return "<%s>" % path
269. 
270.     def check(self, **kwargs):
271.         return [
272.             *self._check_field_name(),
273.             *self._check_choices(),
274.             *self._check_db_default(**kwargs),
275.             *self._check_db_index(),
276.             *self._check_db_comment(**kwargs),
277.             *self._check_null_allowed_for_primary_keys(),
278.             *self._check_backend_specific_checks(**kwargs),
279.             *self._check_validators(),
280.             *self._check_deprecation_details(),
281.         ]
282. 
283.     def _check_field_name(self):
284.         """
285.         Check if field name is valid, i.e. 1) does not end with an
286.         underscore, 2) does not contain "__" and 3) is not "pk".
287.         """
288.         if self.name.endswith("_"):
289.             return [
290.                 checks.Error(
291.                     "Field names must not end with an underscore.",
292.                     obj=self,
293.                     id="fields.E001",
294.                 )
295.             ]
296.         elif LOOKUP_SEP in self.name:
297.             return [
298.                 checks.Error(
299.                     'Field names must not contain "%s".' % LOOKUP_SEP,
300.                     obj=self,
301.                     id="fields.E002",
302.                 )
303.             ]
304.         elif self.name == "pk":
305.             return [
306.                 checks.Error(
307.                     "'pk' is a reserved word that cannot be used as a field name.",
308.                     obj=self,
309.                     id="fields.E003",
310.                 )
311.             ]
312.         else:
313.             return []
314. 
315.     @classmethod
316.     def _choices_is_value(cls, value):
317.         return isinstance(value, (str, Promise)) or not is_iterable(value)
318. 
319.     def _check_choices(self):
320.         if not self.choices:
321.             return []
322. 
323.         if not is_iterable(self.choices) or isinstance(self.choices, str):
324.             return [
325.                 checks.Error(
326.                     "'choices' must be an iterable (e.g., a list or tuple).",
327.                     obj=self,
328.                     id="fields.E004",
329.                 )
330.             ]
331. 
332.         choice_max_length = 0
333.         # Expect [group_name, [value, display]]
334.         for choices_group in self.choices:
335.             try:
336.                 group_name, group_choices = choices_group
337.             except (TypeError, ValueError):
338.                 # Containing non-pairs
339.                 break
340.             try:
341.                 if not all(
342.                     self._choices_is_value(value) and self._choices_is_value(human_name)
343.                     for value, human_name in group_choices
344.                 ):
345.                     break
346.                 if self.max_length is not None and group_choices:
347.                     choice_max_length = max(
348.                         [
349.                             choice_max_length,
350.                             *(
351.                                 len(value)
352.                                 for value, _ in group_choices
353.                                 if isinstance(value, str)
354.                             ),
355.                         ]
356.                     )
357.             except (TypeError, ValueError):
358.                 # No groups, choices in the form [value, display]
359.                 value, human_name = group_name, group_choices
360.                 if not self._choices_is_value(value) or not self._choices_is_value(
361.                     human_name
362.                 ):
363.                     break
364.                 if self.max_length is not None and isinstance(value, str):
365.                     choice_max_length = max(choice_max_length, len(value))
366. 
367.             # Special case: choices=['ab']
368.             if isinstance(choices_group, str):
369.                 break
370.         else:
371.             if self.max_length is not None and choice_max_length > self.max_length:
372.                 return [
373.                     checks.Error(
374.                         "'max_length' is too small to fit the longest value "
375.                         "in 'choices' (%d characters)." % choice_max_length,
376.                         obj=self,
377.                         id="fields.E009",
378.                     ),
379.                 ]
380.             return []
381. 
382.         return [
383.             checks.Error(
384.                 "'choices' must be an iterable containing "
385.                 "(actual value, human readable name) tuples.",
386.                 obj=self,
387.                 id="fields.E005",
388.             )
389.         ]
390. 
391.     def _check_db_default(self, databases=None, **kwargs):
392.         from django.db.models.expressions import Value
393. 
394.         if (
395.             self.db_default is NOT_PROVIDED
396.             or isinstance(self.db_default, Value)
397.             or databases is None
398.         ):
399.             return []
400.         errors = []
401.         for db in databases:
402.             if not router.allow_migrate_model(db, self.model):
403.                 continue
404.             connection = connections[db]
405. 
406.             if not getattr(self.db_default, "allowed_default", False) and (
407.                 connection.features.supports_expression_defaults
408.             ):
409.                 msg = f"{self.db_default} cannot be used in db_default."
410.                 errors.append(checks.Error(msg, obj=self, id="fields.E012"))
411. 
412.             if not (
413.                 connection.features.supports_expression_defaults
414.                 or "supports_expression_defaults"
415.                 in self.model._meta.required_db_features
416.             ):
417.                 msg = (
418.                     f"{connection.display_name} does not support default database "
419.                     "values with expressions (db_default)."
420.                 )
421.                 errors.append(checks.Error(msg, obj=self, id="fields.E011"))
422.         return errors
423. 
424.     def _check_db_index(self):
425.         if self.db_index not in (None, True, False):
426.             return [
427.                 checks.Error(
428.                     "'db_index' must be None, True or False.",
429.                     obj=self,
430.                     id="fields.E006",
431.                 )
432.             ]
433.         else:
434.             return []
435. 
436.     def _check_db_comment(self, databases=None, **kwargs):
437.         if not self.db_comment or not databases:
438.             return []
439.         errors = []
440.         for db in databases:
441.             if not router.allow_migrate_model(db, self.model):
442.                 continue
443.             connection = connections[db]
444.             if not (
445.                 connection.features.supports_comments
446.                 or "supports_comments" in self.model._meta.required_db_features
447.             ):
448.                 errors.append(
449.                     checks.Warning(
450.                         f"{connection.display_name} does not support comments on "
451.                         f"columns (db_comment).",
452.                         obj=self,
453.                         id="fields.W163",
454.                     )
455.                 )
456.         return errors
457. 
458.     def _check_null_allowed_for_primary_keys(self):
459.         if (
460.             self.primary_key
461.             and self.null
462.             and not connection.features.interprets_empty_strings_as_nulls
463.         ):
464.             # We cannot reliably check this for backends like Oracle which
465.             # consider NULL and '' to be equal (and thus set up
466.             # character-based fields a little differently).
467.             return [
468.                 checks.Error(
469.                     "Primary keys must not have null=True.",
470.                     hint=(
471.                         "Set null=False on the field, or "
472.                         "remove primary_key=True argument."
473.                     ),
474.                     obj=self,
475.                     id="fields.E007",
476.                 )
477.             ]
478.         else:
479.             return []
480. 
481.     def _check_backend_specific_checks(self, databases=None, **kwargs):
482.         if databases is None:
483.             return []
484.         errors = []
485.         for alias in databases:
486.             if router.allow_migrate_model(alias, self.model):
487.                 errors.extend(connections[alias].validation.check_field(self, **kwargs))
488.         return errors
489. 
490.     def _check_validators(self):
491.         errors = []
492.         for i, validator in enumerate(self.validators):
493.             if not callable(validator):
494.                 errors.append(
495.                     checks.Error(
496.                         "All 'validators' must be callable.",
497.                         hint=(
498.                             "validators[{i}] ({repr}) isn't a function or "
499.                             "instance of a validator class.".format(
500.                                 i=i,


File: django/db/models/fields/__init__.py
Line number range: 501 - 1001
Content:
501.                                 repr=repr(validator),
502.                             )
503.                         ),
504.                         obj=self,
505.                         id="fields.E008",
506.                     )
507.                 )
508.         return errors
509. 
510.     def _check_deprecation_details(self):
511.         if self.system_check_removed_details is not None:
512.             return [
513.                 checks.Error(
514.                     self.system_check_removed_details.get(
515.                         "msg",
516.                         "%s has been removed except for support in historical "
517.                         "migrations." % self.__class__.__name__,
518.                     ),
519.                     hint=self.system_check_removed_details.get("hint"),
520.                     obj=self,
521.                     id=self.system_check_removed_details.get("id", "fields.EXXX"),
522.                 )
523.             ]
524.         elif self.system_check_deprecated_details is not None:
525.             return [
526.                 checks.Warning(
527.                     self.system_check_deprecated_details.get(
528.                         "msg", "%s has been deprecated." % self.__class__.__name__
529.                     ),
530.                     hint=self.system_check_deprecated_details.get("hint"),
531.                     obj=self,
532.                     id=self.system_check_deprecated_details.get("id", "fields.WXXX"),
533.                 )
534.             ]
535.         return []
536. 
537.     def get_col(self, alias, output_field=None):
538.         if alias == self.model._meta.db_table and (
539.             output_field is None or output_field == self
540.         ):
541.             return self.cached_col
542.         from django.db.models.expressions import Col
543. 
544.         return Col(alias, self, output_field)
545. 
546.     @cached_property
547.     def cached_col(self):
548.         from django.db.models.expressions import Col
549. 
550.         return Col(self.model._meta.db_table, self)
551. 
552.     def select_format(self, compiler, sql, params):
553.         """
554.         Custom format for select clauses. For example, GIS columns need to be
555.         selected as AsText(table.col) on MySQL as the table.col data can't be
556.         used by Django.
557.         """
558.         return sql, params
559. 
560.     def deconstruct(self):
561.         """
562.         Return enough information to recreate the field as a 4-tuple:
563. 
564.          * The name of the field on the model, if contribute_to_class() has
565.            been run.
566.          * The import path of the field, including the class, e.g.
567.            django.db.models.IntegerField. This should be the most portable
568.            version, so less specific may be better.
569.          * A list of positional arguments.
570.          * A dict of keyword arguments.
571. 
572.         Note that the positional or keyword arguments must contain values of
573.         the following types (including inner values of collection types):
574. 
575.          * None, bool, str, int, float, complex, set, frozenset, list, tuple,
576.            dict
577.          * UUID
578.          * datetime.datetime (naive), datetime.date
579.          * top-level classes, top-level functions - will be referenced by their
580.            full import path
581.          * Storage instances - these have their own deconstruct() method
582. 
583.         This is because the values here must be serialized into a text format
584.         (possibly new Python code, possibly JSON) and these are the only types
585.         with encoding handlers defined.
586. 
587.         There's no need to return the exact way the field was instantiated this
588.         time, just ensure that the resulting field is the same - prefer keyword
589.         arguments over positional ones, and omit parameters with their default
590.         values.
591.         """
592.         # Short-form way of fetching all the default parameters
593.         keywords = {}
594.         possibles = {
595.             "verbose_name": None,
596.             "primary_key": False,
597.             "max_length": None,
598.             "unique": False,
599.             "blank": False,
600.             "null": False,
601.             "db_index": False,
602.             "default": NOT_PROVIDED,
603.             "db_default": NOT_PROVIDED,
604.             "editable": True,
605.             "serialize": True,
606.             "unique_for_date": None,
607.             "unique_for_month": None,
608.             "unique_for_year": None,
609.             "choices": None,
610.             "help_text": "",
611.             "db_column": None,
612.             "db_comment": None,
613.             "db_tablespace": None,
614.             "auto_created": False,
615.             "validators": [],
616.             "error_messages": None,
617.         }
618.         attr_overrides = {
619.             "unique": "_unique",
620.             "error_messages": "_error_messages",
621.             "validators": "_validators",
622.             "verbose_name": "_verbose_name",
623.             "db_tablespace": "_db_tablespace",
624.         }
625.         equals_comparison = {"choices", "validators"}
626.         for name, default in possibles.items():
627.             value = getattr(self, attr_overrides.get(name, name))
628.             # Unroll anything iterable for choices into a concrete list
629.             if name == "choices" and isinstance(value, collections.abc.Iterable):
630.                 value = list(value)
631.             # Do correct kind of comparison
632.             if name in equals_comparison:
633.                 if value != default:
634.                     keywords[name] = value
635.             else:
636.                 if value is not default:
637.                     keywords[name] = value
638.         # Work out path - we shorten it for known Django core fields
639.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
640.         if path.startswith("django.db.models.fields.related"):
641.             path = path.replace("django.db.models.fields.related", "django.db.models")
642.         elif path.startswith("django.db.models.fields.files"):
643.             path = path.replace("django.db.models.fields.files", "django.db.models")
644.         elif path.startswith("django.db.models.fields.json"):
645.             path = path.replace("django.db.models.fields.json", "django.db.models")
646.         elif path.startswith("django.db.models.fields.proxy"):
647.             path = path.replace("django.db.models.fields.proxy", "django.db.models")
648.         elif path.startswith("django.db.models.fields"):
649.             path = path.replace("django.db.models.fields", "django.db.models")
650.         # Return basic info - other fields should override this.
651.         return (self.name, path, [], keywords)
652. 
653.     def clone(self):
654.         """
655.         Uses deconstruct() to clone a new copy of this Field.
656.         Will not preserve any class attachments/attribute names.
657.         """
658.         name, path, args, kwargs = self.deconstruct()
659.         return self.__class__(*args, **kwargs)
660. 
661.     def __eq__(self, other):
662.         # Needed for @total_ordering
663.         if isinstance(other, Field):
664.             return self.creation_counter == other.creation_counter and getattr(
665.                 self, "model", None
666.             ) == getattr(other, "model", None)
667.         return NotImplemented
668. 
669.     def __lt__(self, other):
670.         # This is needed because bisect does not take a comparison function.
671.         # Order by creation_counter first for backward compatibility.
672.         if isinstance(other, Field):
673.             if (
674.                 self.creation_counter != other.creation_counter
675.                 or not hasattr(self, "model")
676.                 and not hasattr(other, "model")
677.             ):
678.                 return self.creation_counter < other.creation_counter
679.             elif hasattr(self, "model") != hasattr(other, "model"):
680.                 return not hasattr(self, "model")  # Order no-model fields first
681.             else:
682.                 # creation_counter's are equal, compare only models.
683.                 return (self.model._meta.app_label, self.model._meta.model_name) < (
684.                     other.model._meta.app_label,
685.                     other.model._meta.model_name,
686.                 )
687.         return NotImplemented
688. 
689.     def __hash__(self):
690.         return hash(self.creation_counter)
691. 
692.     def __deepcopy__(self, memodict):
693.         # We don't have to deepcopy very much here, since most things are not
694.         # intended to be altered after initial creation.
695.         obj = copy.copy(self)
696.         if self.remote_field:
697.             obj.remote_field = copy.copy(self.remote_field)
698.             if hasattr(self.remote_field, "field") and self.remote_field.field is self:
699.                 obj.remote_field.field = obj
700.         memodict[id(self)] = obj
701.         return obj
702. 
703.     def __copy__(self):
704.         # We need to avoid hitting __reduce__, so define this
705.         # slightly weird copy construct.
706.         obj = Empty()
707.         obj.__class__ = self.__class__
708.         obj.__dict__ = self.__dict__.copy()
709.         return obj
710. 
711.     def __reduce__(self):
712.         """
713.         Pickling should return the model._meta.fields instance of the field,
714.         not a new copy of that field. So, use the app registry to load the
715.         model and then the field back.
716.         """
717.         if not hasattr(self, "model"):
718.             # Fields are sometimes used without attaching them to models (for
719.             # example in aggregation). In this case give back a plain field
720.             # instance. The code below will create a new empty instance of
721.             # class self.__class__, then update its dict with self.__dict__
722.             # values - so, this is very close to normal pickle.
723.             state = self.__dict__.copy()
724.             # The _get_default cached_property can't be pickled due to lambda
725.             # usage.
726.             state.pop("_get_default", None)
727.             return _empty, (self.__class__,), state
728.         return _load_field, (
729.             self.model._meta.app_label,
730.             self.model._meta.object_name,
731.             self.name,
732.         )
733. 
734.     def get_pk_value_on_save(self, instance):
735.         """
736.         Hook to generate new PK values on save. This method is called when
737.         saving instances with no primary key value set. If this method returns
738.         something else than None, then the returned value is used when saving
739.         the new instance.
740.         """
741.         if self.default:
742.             return self.get_default()
743.         return None
744. 
745.     def to_python(self, value):
746.         """
747.         Convert the input value into the expected Python data type, raising
748.         django.core.exceptions.ValidationError if the data can't be converted.
749.         Return the converted value. Subclasses should override this.
750.         """
751.         return value
752. 
753.     @cached_property
754.     def error_messages(self):
755.         messages = {}
756.         for c in reversed(self.__class__.__mro__):
757.             messages.update(getattr(c, "default_error_messages", {}))
758.         messages.update(self._error_messages or {})
759.         return messages
760. 
761.     @cached_property
762.     def validators(self):
763.         """
764.         Some validators can't be created at field initialization time.
765.         This method provides a way to delay their creation until required.
766.         """
767.         return [*self.default_validators, *self._validators]
768. 
769.     def run_validators(self, value):
770.         if value in self.empty_values:
771.             return
772. 
773.         errors = []
774.         for v in self.validators:
775.             try:
776.                 v(value)
777.             except exceptions.ValidationError as e:
778.                 if hasattr(e, "code") and e.code in self.error_messages:
779.                     e.message = self.error_messages[e.code]
780.                 errors.extend(e.error_list)
781. 
782.         if errors:
783.             raise exceptions.ValidationError(errors)
784. 
785.     def validate(self, value, model_instance):
786.         """
787.         Validate value and raise ValidationError if necessary. Subclasses
788.         should override this to provide validation logic.
789.         """
790.         if not self.editable:
791.             # Skip validation for non-editable fields.
792.             return
793. 
794.         if self.choices is not None and value not in self.empty_values:
795.             for option_key, option_value in self.choices:
796.                 if isinstance(option_value, (list, tuple)):
797.                     # This is an optgroup, so look inside the group for
798.                     # options.
799.                     for optgroup_key, optgroup_value in option_value:
800.                         if value == optgroup_key:
801.                             return
802.                 elif value == option_key:
803.                     return
804.             raise exceptions.ValidationError(
805.                 self.error_messages["invalid_choice"],
806.                 code="invalid_choice",
807.                 params={"value": value},
808.             )
809. 
810.         if value is None and not self.null:
811.             raise exceptions.ValidationError(self.error_messages["null"], code="null")
812. 
813.         if not self.blank and value in self.empty_values:
814.             raise exceptions.ValidationError(self.error_messages["blank"], code="blank")
815. 
816.     def clean(self, value, model_instance):
817.         """
818.         Convert the value's type and run validation. Validation errors
819.         from to_python() and validate() are propagated. Return the correct
820.         value if no error is raised.
821.         """
822.         value = self.to_python(value)
823.         self.validate(value, model_instance)
824.         self.run_validators(value)
825.         return value
826. 
827.     def db_type_parameters(self, connection):
828.         return DictWrapper(self.__dict__, connection.ops.quote_name, "qn_")
829. 
830.     def db_check(self, connection):
831.         """
832.         Return the database column check constraint for this field, for the
833.         provided connection. Works the same way as db_type() for the case that
834.         get_internal_type() does not map to a preexisting model field.
835.         """
836.         data = self.db_type_parameters(connection)
837.         try:
838.             return (
839.                 connection.data_type_check_constraints[self.get_internal_type()] % data
840.             )
841.         except KeyError:
842.             return None
843. 
844.     def db_type(self, connection):
845.         """
846.         Return the database column data type for this field, for the provided
847.         connection.
848.         """
849.         # The default implementation of this method looks at the
850.         # backend-specific data_types dictionary, looking up the field by its
851.         # "internal type".
852.         #
853.         # A Field class can implement the get_internal_type() method to specify
854.         # which *preexisting* Django Field class it's most similar to -- i.e.,
855.         # a custom field might be represented by a TEXT column type, which is
856.         # the same as the TextField Django field type, which means the custom
857.         # field's get_internal_type() returns 'TextField'.
858.         #
859.         # But the limitation of the get_internal_type() / data_types approach
860.         # is that it cannot handle database column types that aren't already
861.         # mapped to one of the built-in Django field types. In this case, you
862.         # can implement db_type() instead of get_internal_type() to specify
863.         # exactly which wacky database column type you want to use.
864.         data = self.db_type_parameters(connection)
865.         try:
866.             column_type = connection.data_types[self.get_internal_type()]
867.         except KeyError:
868.             return None
869.         else:
870.             # column_type is either a single-parameter function or a string.
871.             if callable(column_type):
872.                 return column_type(data)
873.             return column_type % data
874. 
875.     def rel_db_type(self, connection):
876.         """
877.         Return the data type that a related field pointing to this field should
878.         use. For example, this method is called by ForeignKey and OneToOneField
879.         to determine its data type.
880.         """
881.         return self.db_type(connection)
882. 
883.     def cast_db_type(self, connection):
884.         """Return the data type to use in the Cast() function."""
885.         db_type = connection.ops.cast_data_types.get(self.get_internal_type())
886.         if db_type:
887.             return db_type % self.db_type_parameters(connection)
888.         return self.db_type(connection)
889. 
890.     def db_parameters(self, connection):
891.         """
892.         Extension of db_type(), providing a range of different return values
893.         (type, checks). This will look at db_type(), allowing custom model
894.         fields to override it.
895.         """
896.         type_string = self.db_type(connection)
897.         check_string = self.db_check(connection)
898.         return {
899.             "type": type_string,
900.             "check": check_string,
901.         }
902. 
903.     def db_type_suffix(self, connection):
904.         return connection.data_types_suffix.get(self.get_internal_type())
905. 
906.     def get_db_converters(self, connection):
907.         if hasattr(self, "from_db_value"):
908.             return [self.from_db_value]
909.         return []
910. 
911.     @property
912.     def unique(self):
913.         return self._unique or self.primary_key
914. 
915.     @property
916.     def db_tablespace(self):
917.         return self._db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
918. 
919.     @property
920.     def db_returning(self):
921.         """Private API intended only to be used by Django itself."""
922.         return (
923.             self.db_default is not NOT_PROVIDED
924.             and connection.features.can_return_columns_from_insert
925.         )
926. 
927.     def set_attributes_from_name(self, name):
928.         self.name = self.name or name
929.         self.attname, self.column = self.get_attname_column()
930.         self.concrete = self.column is not None
931.         if self.verbose_name is None and self.name:
932.             self.verbose_name = self.name.replace("_", " ")
933. 
934.     def contribute_to_class(self, cls, name, private_only=False):
935.         """
936.         Register the field with the model class it belongs to.
937. 
938.         If private_only is True, create a separate instance of this field
939.         for every subclass of cls, even if cls is not an abstract model.
940.         """
941.         self.set_attributes_from_name(name)
942.         self.model = cls
943.         cls._meta.add_field(self, private=private_only)
944.         if self.column:
945.             setattr(cls, self.attname, self.descriptor_class(self))
946.         if self.choices is not None:
947.             # Don't override a get_FOO_display() method defined explicitly on
948.             # this class, but don't check methods derived from inheritance, to
949.             # allow overriding inherited choices. For more complex inheritance
950.             # structures users should override contribute_to_class().
951.             if "get_%s_display" % self.name not in cls.__dict__:
952.                 setattr(
953.                     cls,
954.                     "get_%s_display" % self.name,
955.                     partialmethod(cls._get_FIELD_display, field=self),
956.                 )
957. 
958.     def get_filter_kwargs_for_object(self, obj):
959.         """
960.         Return a dict that when passed as kwargs to self.model.filter(), would
961.         yield all instances having the same value for this field as obj has.
962.         """
963.         return {self.name: getattr(obj, self.attname)}
964. 
965.     def get_attname(self):
966.         return self.name
967. 
968.     def get_attname_column(self):
969.         attname = self.get_attname()
970.         column = self.db_column or attname
971.         return attname, column
972. 
973.     def get_internal_type(self):
974.         return self.__class__.__name__
975. 
976.     def pre_save(self, model_instance, add):
977.         """Return field's value just before saving."""
978.         value = getattr(model_instance, self.attname)
979.         if not connection.features.supports_default_keyword_in_insert:
980.             from django.db.models.expressions import DatabaseDefault
981. 
982.             if isinstance(value, DatabaseDefault):
983.                 return self.db_default
984.         return value
985. 
986.     def get_prep_value(self, value):
987.         """Perform preliminary non-db specific value checks and conversions."""
988.         if isinstance(value, Promise):
989.             value = value._proxy____cast()
990.         return value
991. 
992.     def get_db_prep_value(self, value, connection, prepared=False):
993.         """
994.         Return field's value prepared for interacting with the database backend.
995. 
996.         Used by the default implementations of get_db_prep_save().
997.         """
998.         if not prepared:
999.             value = self.get_prep_value(value)
1000.         return value


File: django/db/models/fields/__init__.py
Line number range: 1001 - 1501
Content:
1001. 
1002.     def get_db_prep_save(self, value, connection):
1003.         """Return field's value prepared for saving into a database."""
1004.         if hasattr(value, "as_sql"):
1005.             return value
1006.         return self.get_db_prep_value(value, connection=connection, prepared=False)
1007. 
1008.     def has_default(self):
1009.         """Return a boolean of whether this field has a default value."""
1010.         return self.default is not NOT_PROVIDED
1011. 
1012.     def get_default(self):
1013.         """Return the default value for this field."""
1014.         return self._get_default()
1015. 
1016.     @cached_property
1017.     def _get_default(self):
1018.         if self.has_default():
1019.             if callable(self.default):
1020.                 return self.default
1021.             return lambda: self.default
1022. 
1023.         if self.db_default is not NOT_PROVIDED:
1024.             from django.db.models.expressions import DatabaseDefault
1025. 
1026.             return DatabaseDefault
1027. 
1028.         if (
1029.             not self.empty_strings_allowed
1030.             or self.null
1031.             and not connection.features.interprets_empty_strings_as_nulls
1032.         ):
1033.             return return_None
1034.         return str  # return empty string
1035. 
1036.     def get_choices(
1037.         self,
1038.         include_blank=True,
1039.         blank_choice=BLANK_CHOICE_DASH,
1040.         limit_choices_to=None,
1041.         ordering=(),
1042.     ):
1043.         """
1044.         Return choices with a default blank choices included, for use
1045.         as <select> choices for this field.
1046.         """
1047.         if self.choices is not None:
1048.             choices = list(self.choices)
1049.             if include_blank:
1050.                 blank_defined = any(
1051.                     choice in ("", None) for choice, _ in self.flatchoices
1052.                 )
1053.                 if not blank_defined:
1054.                     choices = blank_choice + choices
1055.             return choices
1056.         rel_model = self.remote_field.model
1057.         limit_choices_to = limit_choices_to or self.get_limit_choices_to()
1058.         choice_func = operator.attrgetter(
1059.             self.remote_field.get_related_field().attname
1060.             if hasattr(self.remote_field, "get_related_field")
1061.             else "pk"
1062.         )
1063.         qs = rel_model._default_manager.complex_filter(limit_choices_to)
1064.         if ordering:
1065.             qs = qs.order_by(*ordering)
1066.         return (blank_choice if include_blank else []) + [
1067.             (choice_func(x), str(x)) for x in qs
1068.         ]
1069. 
1070.     def value_to_string(self, obj):
1071.         """
1072.         Return a string value of this field from the passed obj.
1073.         This is used by the serialization framework.
1074.         """
1075.         return str(self.value_from_object(obj))
1076. 
1077.     def _get_flatchoices(self):
1078.         """Flattened version of choices tuple."""
1079.         if self.choices is None:
1080.             return []
1081.         flat = []
1082.         for choice, value in self.choices:
1083.             if isinstance(value, (list, tuple)):
1084.                 flat.extend(value)
1085.             else:
1086.                 flat.append((choice, value))
1087.         return flat
1088. 
1089.     flatchoices = property(_get_flatchoices)
1090. 
1091.     def save_form_data(self, instance, data):
1092.         setattr(instance, self.name, data)
1093. 
1094.     def formfield(self, form_class=None, choices_form_class=None, **kwargs):
1095.         """Return a django.forms.Field instance for this field."""
1096.         defaults = {
1097.             "required": not self.blank,
1098.             "label": capfirst(self.verbose_name),
1099.             "help_text": self.help_text,
1100.         }
1101.         if self.has_default():
1102.             if callable(self.default):
1103.                 defaults["initial"] = self.default
1104.                 defaults["show_hidden_initial"] = True
1105.             else:
1106.                 defaults["initial"] = self.get_default()
1107.         if self.choices is not None:
1108.             # Fields with choices get special treatment.
1109.             include_blank = self.blank or not (
1110.                 self.has_default() or "initial" in kwargs
1111.             )
1112.             defaults["choices"] = self.get_choices(include_blank=include_blank)
1113.             defaults["coerce"] = self.to_python
1114.             if self.null:
1115.                 defaults["empty_value"] = None
1116.             if choices_form_class is not None:
1117.                 form_class = choices_form_class
1118.             else:
1119.                 form_class = forms.TypedChoiceField
1120.             # Many of the subclass-specific formfield arguments (min_value,
1121.             # max_value) don't apply for choice fields, so be sure to only pass
1122.             # the values that TypedChoiceField will understand.
1123.             for k in list(kwargs):
1124.                 if k not in (
1125.                     "coerce",
1126.                     "empty_value",
1127.                     "choices",
1128.                     "required",
1129.                     "widget",
1130.                     "label",
1131.                     "initial",
1132.                     "help_text",
1133.                     "error_messages",
1134.                     "show_hidden_initial",
1135.                     "disabled",
1136.                 ):
1137.                     del kwargs[k]
1138.         defaults.update(kwargs)
1139.         if form_class is None:
1140.             form_class = forms.CharField
1141.         return form_class(**defaults)
1142. 
1143.     def value_from_object(self, obj):
1144.         """Return the value of this field in the given model instance."""
1145.         return getattr(obj, self.attname)
1146. 
1147. 
1148. class BooleanField(Field):
1149.     empty_strings_allowed = False
1150.     default_error_messages = {
1151.         "invalid": _("“%(value)s” value must be either True or False."),
1152.         "invalid_nullable": _("“%(value)s” value must be either True, False, or None."),
1153.     }
1154.     description = _("Boolean (Either True or False)")
1155. 
1156.     def get_internal_type(self):
1157.         return "BooleanField"
1158. 
1159.     def to_python(self, value):
1160.         if self.null and value in self.empty_values:
1161.             return None
1162.         if value in (True, False):
1163.             # 1/0 are equal to True/False. bool() converts former to latter.
1164.             return bool(value)
1165.         if value in ("t", "True", "1"):
1166.             return True
1167.         if value in ("f", "False", "0"):
1168.             return False
1169.         raise exceptions.ValidationError(
1170.             self.error_messages["invalid_nullable" if self.null else "invalid"],
1171.             code="invalid",
1172.             params={"value": value},
1173.         )
1174. 
1175.     def get_prep_value(self, value):
1176.         value = super().get_prep_value(value)
1177.         if value is None:
1178.             return None
1179.         return self.to_python(value)
1180. 
1181.     def formfield(self, **kwargs):
1182.         if self.choices is not None:
1183.             include_blank = not (self.has_default() or "initial" in kwargs)
1184.             defaults = {"choices": self.get_choices(include_blank=include_blank)}
1185.         else:
1186.             form_class = forms.NullBooleanField if self.null else forms.BooleanField
1187.             # In HTML checkboxes, 'required' means "must be checked" which is
1188.             # different from the choices case ("must select some value").
1189.             # required=False allows unchecked checkboxes.
1190.             defaults = {"form_class": form_class, "required": False}
1191.         return super().formfield(**{**defaults, **kwargs})
1192. 
1193. 
1194. class CharField(Field):
1195.     def __init__(self, *args, db_collation=None, **kwargs):
1196.         super().__init__(*args, **kwargs)
1197.         self.db_collation = db_collation
1198.         if self.max_length is not None:
1199.             self.validators.append(validators.MaxLengthValidator(self.max_length))
1200. 
1201.     @property
1202.     def description(self):
1203.         if self.max_length is not None:
1204.             return _("String (up to %(max_length)s)")
1205.         else:
1206.             return _("String (unlimited)")
1207. 
1208.     def check(self, **kwargs):
1209.         databases = kwargs.get("databases") or []
1210.         return [
1211.             *super().check(**kwargs),
1212.             *self._check_db_collation(databases),
1213.             *self._check_max_length_attribute(**kwargs),
1214.         ]
1215. 
1216.     def _check_max_length_attribute(self, **kwargs):
1217.         if self.max_length is None:
1218.             if (
1219.                 connection.features.supports_unlimited_charfield
1220.                 or "supports_unlimited_charfield"
1221.                 in self.model._meta.required_db_features
1222.             ):
1223.                 return []
1224.             return [
1225.                 checks.Error(
1226.                     "CharFields must define a 'max_length' attribute.",
1227.                     obj=self,
1228.                     id="fields.E120",
1229.                 )
1230.             ]
1231.         elif (
1232.             not isinstance(self.max_length, int)
1233.             or isinstance(self.max_length, bool)
1234.             or self.max_length <= 0
1235.         ):
1236.             return [
1237.                 checks.Error(
1238.                     "'max_length' must be a positive integer.",
1239.                     obj=self,
1240.                     id="fields.E121",
1241.                 )
1242.             ]
1243.         else:
1244.             return []
1245. 
1246.     def _check_db_collation(self, databases):
1247.         errors = []
1248.         for db in databases:
1249.             if not router.allow_migrate_model(db, self.model):
1250.                 continue
1251.             connection = connections[db]
1252.             if not (
1253.                 self.db_collation is None
1254.                 or "supports_collation_on_charfield"
1255.                 in self.model._meta.required_db_features
1256.                 or connection.features.supports_collation_on_charfield
1257.             ):
1258.                 errors.append(
1259.                     checks.Error(
1260.                         "%s does not support a database collation on "
1261.                         "CharFields." % connection.display_name,
1262.                         obj=self,
1263.                         id="fields.E190",
1264.                     ),
1265.                 )
1266.         return errors
1267. 
1268.     def cast_db_type(self, connection):
1269.         if self.max_length is None:
1270.             return connection.ops.cast_char_field_without_max_length
1271.         return super().cast_db_type(connection)
1272. 
1273.     def db_parameters(self, connection):
1274.         db_params = super().db_parameters(connection)
1275.         db_params["collation"] = self.db_collation
1276.         return db_params
1277. 
1278.     def get_internal_type(self):
1279.         return "CharField"
1280. 
1281.     def to_python(self, value):
1282.         if isinstance(value, str) or value is None:
1283.             return value
1284.         return str(value)
1285. 
1286.     def get_prep_value(self, value):
1287.         value = super().get_prep_value(value)
1288.         return self.to_python(value)
1289. 
1290.     def formfield(self, **kwargs):
1291.         # Passing max_length to forms.CharField means that the value's length
1292.         # will be validated twice. This is considered acceptable since we want
1293.         # the value in the form field (to pass into widget for example).
1294.         defaults = {"max_length": self.max_length}
1295.         # TODO: Handle multiple backends with different feature flags.
1296.         if self.null and not connection.features.interprets_empty_strings_as_nulls:
1297.             defaults["empty_value"] = None
1298.         defaults.update(kwargs)
1299.         return super().formfield(**defaults)
1300. 
1301.     def deconstruct(self):
1302.         name, path, args, kwargs = super().deconstruct()
1303.         if self.db_collation:
1304.             kwargs["db_collation"] = self.db_collation
1305.         return name, path, args, kwargs
1306. 
1307. 
1308. class CommaSeparatedIntegerField(CharField):
1309.     default_validators = [validators.validate_comma_separated_integer_list]
1310.     description = _("Comma-separated integers")
1311.     system_check_removed_details = {
1312.         "msg": (
1313.             "CommaSeparatedIntegerField is removed except for support in "
1314.             "historical migrations."
1315.         ),
1316.         "hint": (
1317.             "Use CharField(validators=[validate_comma_separated_integer_list]) "
1318.             "instead."
1319.         ),
1320.         "id": "fields.E901",
1321.     }
1322. 
1323. 
1324. def _to_naive(value):
1325.     if timezone.is_aware(value):
1326.         value = timezone.make_naive(value, datetime.timezone.utc)
1327.     return value
1328. 
1329. 
1330. def _get_naive_now():
1331.     return _to_naive(timezone.now())
1332. 
1333. 
1334. class DateTimeCheckMixin:
1335.     def check(self, **kwargs):
1336.         return [
1337.             *super().check(**kwargs),
1338.             *self._check_mutually_exclusive_options(),
1339.             *self._check_fix_default_value(),
1340.         ]
1341. 
1342.     def _check_mutually_exclusive_options(self):
1343.         # auto_now, auto_now_add, and default are mutually exclusive
1344.         # options. The use of more than one of these options together
1345.         # will trigger an Error
1346.         mutually_exclusive_options = [
1347.             self.auto_now_add,
1348.             self.auto_now,
1349.             self.has_default(),
1350.         ]
1351.         enabled_options = [
1352.             option not in (None, False) for option in mutually_exclusive_options
1353.         ].count(True)
1354.         if enabled_options > 1:
1355.             return [
1356.                 checks.Error(
1357.                     "The options auto_now, auto_now_add, and default "
1358.                     "are mutually exclusive. Only one of these options "
1359.                     "may be present.",
1360.                     obj=self,
1361.                     id="fields.E160",
1362.                 )
1363.             ]
1364.         else:
1365.             return []
1366. 
1367.     def _check_fix_default_value(self):
1368.         return []
1369. 
1370.     # Concrete subclasses use this in their implementations of
1371.     # _check_fix_default_value().
1372.     def _check_if_value_fixed(self, value, now=None):
1373.         """
1374.         Check if the given value appears to have been provided as a "fixed"
1375.         time value, and include a warning in the returned list if it does. The
1376.         value argument must be a date object or aware/naive datetime object. If
1377.         now is provided, it must be a naive datetime object.
1378.         """
1379.         if now is None:
1380.             now = _get_naive_now()
1381.         offset = datetime.timedelta(seconds=10)
1382.         lower = now - offset
1383.         upper = now + offset
1384.         if isinstance(value, datetime.datetime):
1385.             value = _to_naive(value)
1386.         else:
1387.             assert isinstance(value, datetime.date)
1388.             lower = lower.date()
1389.             upper = upper.date()
1390.         if lower <= value <= upper:
1391.             return [
1392.                 checks.Warning(
1393.                     "Fixed default value provided.",
1394.                     hint=(
1395.                         "It seems you set a fixed date / time / datetime "
1396.                         "value as default for this field. This may not be "
1397.                         "what you want. If you want to have the current date "
1398.                         "as default, use `django.utils.timezone.now`"
1399.                     ),
1400.                     obj=self,
1401.                     id="fields.W161",
1402.                 )
1403.             ]
1404.         return []
1405. 
1406. 
1407. class DateField(DateTimeCheckMixin, Field):
1408.     empty_strings_allowed = False
1409.     default_error_messages = {
1410.         "invalid": _(
1411.             "“%(value)s” value has an invalid date format. It must be "
1412.             "in YYYY-MM-DD format."
1413.         ),
1414.         "invalid_date": _(
1415.             "“%(value)s” value has the correct format (YYYY-MM-DD) "
1416.             "but it is an invalid date."
1417.         ),
1418.     }
1419.     description = _("Date (without time)")
1420. 
1421.     def __init__(
1422.         self, verbose_name=None, name=None, auto_now=False, auto_now_add=False, **kwargs
1423.     ):
1424.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
1425.         if auto_now or auto_now_add:
1426.             kwargs["editable"] = False
1427.             kwargs["blank"] = True
1428.         super().__init__(verbose_name, name, **kwargs)
1429. 
1430.     def _check_fix_default_value(self):
1431.         """
1432.         Warn that using an actual date or datetime value is probably wrong;
1433.         it's only evaluated on server startup.
1434.         """
1435.         if not self.has_default():
1436.             return []
1437. 
1438.         value = self.default
1439.         if isinstance(value, datetime.datetime):
1440.             value = _to_naive(value).date()
1441.         elif isinstance(value, datetime.date):
1442.             pass
1443.         else:
1444.             # No explicit date / datetime value -- no checks necessary
1445.             return []
1446.         # At this point, value is a date object.
1447.         return self._check_if_value_fixed(value)
1448. 
1449.     def deconstruct(self):
1450.         name, path, args, kwargs = super().deconstruct()
1451.         if self.auto_now:
1452.             kwargs["auto_now"] = True
1453.         if self.auto_now_add:
1454.             kwargs["auto_now_add"] = True
1455.         if self.auto_now or self.auto_now_add:
1456.             del kwargs["editable"]
1457.             del kwargs["blank"]
1458.         return name, path, args, kwargs
1459. 
1460.     def get_internal_type(self):
1461.         return "DateField"
1462. 
1463.     def to_python(self, value):
1464.         if value is None:
1465.             return value
1466.         if isinstance(value, datetime.datetime):
1467.             if settings.USE_TZ and timezone.is_aware(value):
1468.                 # Convert aware datetimes to the default time zone
1469.                 # before casting them to dates (#17742).
1470.                 default_timezone = timezone.get_default_timezone()
1471.                 value = timezone.make_naive(value, default_timezone)
1472.             return value.date()
1473.         if isinstance(value, datetime.date):
1474.             return value
1475. 
1476.         try:
1477.             parsed = parse_date(value)
1478.             if parsed is not None:
1479.                 return parsed
1480.         except ValueError:
1481.             raise exceptions.ValidationError(
1482.                 self.error_messages["invalid_date"],
1483.                 code="invalid_date",
1484.                 params={"value": value},
1485.             )
1486. 
1487.         raise exceptions.ValidationError(
1488.             self.error_messages["invalid"],
1489.             code="invalid",
1490.             params={"value": value},
1491.         )
1492. 
1493.     def pre_save(self, model_instance, add):
1494.         if self.auto_now or (self.auto_now_add and add):
1495.             value = datetime.date.today()
1496.             setattr(model_instance, self.attname, value)
1497.             return value
1498.         else:
1499.             return super().pre_save(model_instance, add)
1500. 
1501.     def contribute_to_class(self, cls, name, **kwargs):


File: django/db/models/fields/__init__.py
Line number range: 1501 - 2001
Content:
1501.     def contribute_to_class(self, cls, name, **kwargs):
1502.         super().contribute_to_class(cls, name, **kwargs)
1503.         if not self.null:
1504.             setattr(
1505.                 cls,
1506.                 "get_next_by_%s" % self.name,
1507.                 partialmethod(
1508.                     cls._get_next_or_previous_by_FIELD, field=self, is_next=True
1509.                 ),
1510.             )
1511.             setattr(
1512.                 cls,
1513.                 "get_previous_by_%s" % self.name,
1514.                 partialmethod(
1515.                     cls._get_next_or_previous_by_FIELD, field=self, is_next=False
1516.                 ),
1517.             )
1518. 
1519.     def get_prep_value(self, value):
1520.         value = super().get_prep_value(value)
1521.         return self.to_python(value)
1522. 
1523.     def get_db_prep_value(self, value, connection, prepared=False):
1524.         # Casts dates into the format expected by the backend
1525.         if not prepared:
1526.             value = self.get_prep_value(value)
1527.         return connection.ops.adapt_datefield_value(value)
1528. 
1529.     def value_to_string(self, obj):
1530.         val = self.value_from_object(obj)
1531.         return "" if val is None else val.isoformat()
1532. 
1533.     def formfield(self, **kwargs):
1534.         return super().formfield(
1535.             **{
1536.                 "form_class": forms.DateField,
1537.                 **kwargs,
1538.             }
1539.         )
1540. 
1541. 
1542. class DateTimeField(DateField):
1543.     empty_strings_allowed = False
1544.     default_error_messages = {
1545.         "invalid": _(
1546.             "“%(value)s” value has an invalid format. It must be in "
1547.             "YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format."
1548.         ),
1549.         "invalid_date": _(
1550.             "“%(value)s” value has the correct format "
1551.             "(YYYY-MM-DD) but it is an invalid date."
1552.         ),
1553.         "invalid_datetime": _(
1554.             "“%(value)s” value has the correct format "
1555.             "(YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]) "
1556.             "but it is an invalid date/time."
1557.         ),
1558.     }
1559.     description = _("Date (with time)")
1560. 
1561.     # __init__ is inherited from DateField
1562. 
1563.     def _check_fix_default_value(self):
1564.         """
1565.         Warn that using an actual date or datetime value is probably wrong;
1566.         it's only evaluated on server startup.
1567.         """
1568.         if not self.has_default():
1569.             return []
1570. 
1571.         value = self.default
1572.         if isinstance(value, (datetime.datetime, datetime.date)):
1573.             return self._check_if_value_fixed(value)
1574.         # No explicit date / datetime value -- no checks necessary.
1575.         return []
1576. 
1577.     def get_internal_type(self):
1578.         return "DateTimeField"
1579. 
1580.     def to_python(self, value):
1581.         if value is None:
1582.             return value
1583.         if isinstance(value, datetime.datetime):
1584.             return value
1585.         if isinstance(value, datetime.date):
1586.             value = datetime.datetime(value.year, value.month, value.day)
1587.             if settings.USE_TZ:
1588.                 # For backwards compatibility, interpret naive datetimes in
1589.                 # local time. This won't work during DST change, but we can't
1590.                 # do much about it, so we let the exceptions percolate up the
1591.                 # call stack.
1592.                 warnings.warn(
1593.                     "DateTimeField %s.%s received a naive datetime "
1594.                     "(%s) while time zone support is active."
1595.                     % (self.model.__name__, self.name, value),
1596.                     RuntimeWarning,
1597.                 )
1598.                 default_timezone = timezone.get_default_timezone()
1599.                 value = timezone.make_aware(value, default_timezone)
1600.             return value
1601. 
1602.         try:
1603.             parsed = parse_datetime(value)
1604.             if parsed is not None:
1605.                 return parsed
1606.         except ValueError:
1607.             raise exceptions.ValidationError(
1608.                 self.error_messages["invalid_datetime"],
1609.                 code="invalid_datetime",
1610.                 params={"value": value},
1611.             )
1612. 
1613.         try:
1614.             parsed = parse_date(value)
1615.             if parsed is not None:
1616.                 return datetime.datetime(parsed.year, parsed.month, parsed.day)
1617.         except ValueError:
1618.             raise exceptions.ValidationError(
1619.                 self.error_messages["invalid_date"],
1620.                 code="invalid_date",
1621.                 params={"value": value},
1622.             )
1623. 
1624.         raise exceptions.ValidationError(
1625.             self.error_messages["invalid"],
1626.             code="invalid",
1627.             params={"value": value},
1628.         )
1629. 
1630.     def pre_save(self, model_instance, add):
1631.         if self.auto_now or (self.auto_now_add and add):
1632.             value = timezone.now()
1633.             setattr(model_instance, self.attname, value)
1634.             return value
1635.         else:
1636.             return super().pre_save(model_instance, add)
1637. 
1638.     # contribute_to_class is inherited from DateField, it registers
1639.     # get_next_by_FOO and get_prev_by_FOO
1640. 
1641.     def get_prep_value(self, value):
1642.         value = super().get_prep_value(value)
1643.         value = self.to_python(value)
1644.         if value is not None and settings.USE_TZ and timezone.is_naive(value):
1645.             # For backwards compatibility, interpret naive datetimes in local
1646.             # time. This won't work during DST change, but we can't do much
1647.             # about it, so we let the exceptions percolate up the call stack.
1648.             try:
1649.                 name = "%s.%s" % (self.model.__name__, self.name)
1650.             except AttributeError:
1651.                 name = "(unbound)"
1652.             warnings.warn(
1653.                 "DateTimeField %s received a naive datetime (%s)"
1654.                 " while time zone support is active." % (name, value),
1655.                 RuntimeWarning,
1656.             )
1657.             default_timezone = timezone.get_default_timezone()
1658.             value = timezone.make_aware(value, default_timezone)
1659.         return value
1660. 
1661.     def get_db_prep_value(self, value, connection, prepared=False):
1662.         # Casts datetimes into the format expected by the backend
1663.         if not prepared:
1664.             value = self.get_prep_value(value)
1665.         return connection.ops.adapt_datetimefield_value(value)
1666. 
1667.     def value_to_string(self, obj):
1668.         val = self.value_from_object(obj)
1669.         return "" if val is None else val.isoformat()
1670. 
1671.     def formfield(self, **kwargs):
1672.         return super().formfield(
1673.             **{
1674.                 "form_class": forms.DateTimeField,
1675.                 **kwargs,
1676.             }
1677.         )
1678. 
1679. 
1680. class DecimalField(Field):
1681.     empty_strings_allowed = False
1682.     default_error_messages = {
1683.         "invalid": _("“%(value)s” value must be a decimal number."),
1684.     }
1685.     description = _("Decimal number")
1686. 
1687.     def __init__(
1688.         self,
1689.         verbose_name=None,
1690.         name=None,
1691.         max_digits=None,
1692.         decimal_places=None,
1693.         **kwargs,
1694.     ):
1695.         self.max_digits, self.decimal_places = max_digits, decimal_places
1696.         super().__init__(verbose_name, name, **kwargs)
1697. 
1698.     def check(self, **kwargs):
1699.         errors = super().check(**kwargs)
1700. 
1701.         digits_errors = [
1702.             *self._check_decimal_places(),
1703.             *self._check_max_digits(),
1704.         ]
1705.         if not digits_errors:
1706.             errors.extend(self._check_decimal_places_and_max_digits(**kwargs))
1707.         else:
1708.             errors.extend(digits_errors)
1709.         return errors
1710. 
1711.     def _check_decimal_places(self):
1712.         try:
1713.             decimal_places = int(self.decimal_places)
1714.             if decimal_places < 0:
1715.                 raise ValueError()
1716.         except TypeError:
1717.             return [
1718.                 checks.Error(
1719.                     "DecimalFields must define a 'decimal_places' attribute.",
1720.                     obj=self,
1721.                     id="fields.E130",
1722.                 )
1723.             ]
1724.         except ValueError:
1725.             return [
1726.                 checks.Error(
1727.                     "'decimal_places' must be a non-negative integer.",
1728.                     obj=self,
1729.                     id="fields.E131",
1730.                 )
1731.             ]
1732.         else:
1733.             return []
1734. 
1735.     def _check_max_digits(self):
1736.         try:
1737.             max_digits = int(self.max_digits)
1738.             if max_digits <= 0:
1739.                 raise ValueError()
1740.         except TypeError:
1741.             return [
1742.                 checks.Error(
1743.                     "DecimalFields must define a 'max_digits' attribute.",
1744.                     obj=self,
1745.                     id="fields.E132",
1746.                 )
1747.             ]
1748.         except ValueError:
1749.             return [
1750.                 checks.Error(
1751.                     "'max_digits' must be a positive integer.",
1752.                     obj=self,
1753.                     id="fields.E133",
1754.                 )
1755.             ]
1756.         else:
1757.             return []
1758. 
1759.     def _check_decimal_places_and_max_digits(self, **kwargs):
1760.         if int(self.decimal_places) > int(self.max_digits):
1761.             return [
1762.                 checks.Error(
1763.                     "'max_digits' must be greater or equal to 'decimal_places'.",
1764.                     obj=self,
1765.                     id="fields.E134",
1766.                 )
1767.             ]
1768.         return []
1769. 
1770.     @cached_property
1771.     def validators(self):
1772.         return super().validators + [
1773.             validators.DecimalValidator(self.max_digits, self.decimal_places)
1774.         ]
1775. 
1776.     @cached_property
1777.     def context(self):
1778.         return decimal.Context(prec=self.max_digits)
1779. 
1780.     def deconstruct(self):
1781.         name, path, args, kwargs = super().deconstruct()
1782.         if self.max_digits is not None:
1783.             kwargs["max_digits"] = self.max_digits
1784.         if self.decimal_places is not None:
1785.             kwargs["decimal_places"] = self.decimal_places
1786.         return name, path, args, kwargs
1787. 
1788.     def get_internal_type(self):
1789.         return "DecimalField"
1790. 
1791.     def to_python(self, value):
1792.         if value is None:
1793.             return value
1794.         try:
1795.             if isinstance(value, float):
1796.                 decimal_value = self.context.create_decimal_from_float(value)
1797.             else:
1798.                 decimal_value = decimal.Decimal(value)
1799.         except (decimal.InvalidOperation, TypeError, ValueError):
1800.             raise exceptions.ValidationError(
1801.                 self.error_messages["invalid"],
1802.                 code="invalid",
1803.                 params={"value": value},
1804.             )
1805.         if not decimal_value.is_finite():
1806.             raise exceptions.ValidationError(
1807.                 self.error_messages["invalid"],
1808.                 code="invalid",
1809.                 params={"value": value},
1810.             )
1811.         return decimal_value
1812. 
1813.     def get_db_prep_save(self, value, connection):
1814.         if hasattr(value, "as_sql"):
1815.             return value
1816.         return connection.ops.adapt_decimalfield_value(
1817.             self.to_python(value), self.max_digits, self.decimal_places
1818.         )
1819. 
1820.     def get_prep_value(self, value):
1821.         value = super().get_prep_value(value)
1822.         return self.to_python(value)
1823. 
1824.     def formfield(self, **kwargs):
1825.         return super().formfield(
1826.             **{
1827.                 "max_digits": self.max_digits,
1828.                 "decimal_places": self.decimal_places,
1829.                 "form_class": forms.DecimalField,
1830.                 **kwargs,
1831.             }
1832.         )
1833. 
1834. 
1835. class DurationField(Field):
1836.     """
1837.     Store timedelta objects.
1838. 
1839.     Use interval on PostgreSQL, INTERVAL DAY TO SECOND on Oracle, and bigint
1840.     of microseconds on other databases.
1841.     """
1842. 
1843.     empty_strings_allowed = False
1844.     default_error_messages = {
1845.         "invalid": _(
1846.             "“%(value)s” value has an invalid format. It must be in "
1847.             "[DD] [[HH:]MM:]ss[.uuuuuu] format."
1848.         )
1849.     }
1850.     description = _("Duration")
1851. 
1852.     def get_internal_type(self):
1853.         return "DurationField"
1854. 
1855.     def to_python(self, value):
1856.         if value is None:
1857.             return value
1858.         if isinstance(value, datetime.timedelta):
1859.             return value
1860.         try:
1861.             parsed = parse_duration(value)
1862.         except ValueError:
1863.             pass
1864.         else:
1865.             if parsed is not None:
1866.                 return parsed
1867. 
1868.         raise exceptions.ValidationError(
1869.             self.error_messages["invalid"],
1870.             code="invalid",
1871.             params={"value": value},
1872.         )
1873. 
1874.     def get_db_prep_value(self, value, connection, prepared=False):
1875.         if connection.features.has_native_duration_field:
1876.             return value
1877.         if value is None:
1878.             return None
1879.         return duration_microseconds(value)
1880. 
1881.     def get_db_converters(self, connection):
1882.         converters = []
1883.         if not connection.features.has_native_duration_field:
1884.             converters.append(connection.ops.convert_durationfield_value)
1885.         return converters + super().get_db_converters(connection)
1886. 
1887.     def value_to_string(self, obj):
1888.         val = self.value_from_object(obj)
1889.         return "" if val is None else duration_string(val)
1890. 
1891.     def formfield(self, **kwargs):
1892.         return super().formfield(
1893.             **{
1894.                 "form_class": forms.DurationField,
1895.                 **kwargs,
1896.             }
1897.         )
1898. 
1899. 
1900. class EmailField(CharField):
1901.     default_validators = [validators.validate_email]
1902.     description = _("Email address")
1903. 
1904.     def __init__(self, *args, **kwargs):
1905.         # max_length=254 to be compliant with RFCs 3696 and 5321
1906.         kwargs.setdefault("max_length", 254)
1907.         super().__init__(*args, **kwargs)
1908. 
1909.     def deconstruct(self):
1910.         name, path, args, kwargs = super().deconstruct()
1911.         # We do not exclude max_length if it matches default as we want to change
1912.         # the default in future.
1913.         return name, path, args, kwargs
1914. 
1915.     def formfield(self, **kwargs):
1916.         # As with CharField, this will cause email validation to be performed
1917.         # twice.
1918.         return super().formfield(
1919.             **{
1920.                 "form_class": forms.EmailField,
1921.                 **kwargs,
1922.             }
1923.         )
1924. 
1925. 
1926. class FilePathField(Field):
1927.     description = _("File path")
1928. 
1929.     def __init__(
1930.         self,
1931.         verbose_name=None,
1932.         name=None,
1933.         path="",
1934.         match=None,
1935.         recursive=False,
1936.         allow_files=True,
1937.         allow_folders=False,
1938.         **kwargs,
1939.     ):
1940.         self.path, self.match, self.recursive = path, match, recursive
1941.         self.allow_files, self.allow_folders = allow_files, allow_folders
1942.         kwargs.setdefault("max_length", 100)
1943.         super().__init__(verbose_name, name, **kwargs)
1944. 
1945.     def check(self, **kwargs):
1946.         return [
1947.             *super().check(**kwargs),
1948.             *self._check_allowing_files_or_folders(**kwargs),
1949.         ]
1950. 
1951.     def _check_allowing_files_or_folders(self, **kwargs):
1952.         if not self.allow_files and not self.allow_folders:
1953.             return [
1954.                 checks.Error(
1955.                     "FilePathFields must have either 'allow_files' or 'allow_folders' "
1956.                     "set to True.",
1957.                     obj=self,
1958.                     id="fields.E140",
1959.                 )
1960.             ]
1961.         return []
1962. 
1963.     def deconstruct(self):
1964.         name, path, args, kwargs = super().deconstruct()
1965.         if self.path != "":
1966.             kwargs["path"] = self.path
1967.         if self.match is not None:
1968.             kwargs["match"] = self.match
1969.         if self.recursive is not False:
1970.             kwargs["recursive"] = self.recursive
1971.         if self.allow_files is not True:
1972.             kwargs["allow_files"] = self.allow_files
1973.         if self.allow_folders is not False:
1974.             kwargs["allow_folders"] = self.allow_folders
1975.         if kwargs.get("max_length") == 100:
1976.             del kwargs["max_length"]
1977.         return name, path, args, kwargs
1978. 
1979.     def get_prep_value(self, value):
1980.         value = super().get_prep_value(value)
1981.         if value is None:
1982.             return None
1983.         return str(value)
1984. 
1985.     def formfield(self, **kwargs):
1986.         return super().formfield(
1987.             **{
1988.                 "path": self.path() if callable(self.path) else self.path,
1989.                 "match": self.match,
1990.                 "recursive": self.recursive,
1991.                 "form_class": forms.FilePathField,
1992.                 "allow_files": self.allow_files,
1993.                 "allow_folders": self.allow_folders,
1994.                 **kwargs,
1995.             }
1996.         )
1997. 
1998.     def get_internal_type(self):
1999.         return "FilePathField"
2000.


File: django/db/models/fields/__init__.py
Line number range: 2001 - 2501
Content:
2001. 
2002. class FloatField(Field):
2003.     empty_strings_allowed = False
2004.     default_error_messages = {
2005.         "invalid": _("“%(value)s” value must be a float."),
2006.     }
2007.     description = _("Floating point number")
2008. 
2009.     def get_prep_value(self, value):
2010.         value = super().get_prep_value(value)
2011.         if value is None:
2012.             return None
2013.         try:
2014.             return float(value)
2015.         except (TypeError, ValueError) as e:
2016.             raise e.__class__(
2017.                 "Field '%s' expected a number but got %r." % (self.name, value),
2018.             ) from e
2019. 
2020.     def get_internal_type(self):
2021.         return "FloatField"
2022. 
2023.     def to_python(self, value):
2024.         if value is None:
2025.             return value
2026.         try:
2027.             return float(value)
2028.         except (TypeError, ValueError):
2029.             raise exceptions.ValidationError(
2030.                 self.error_messages["invalid"],
2031.                 code="invalid",
2032.                 params={"value": value},
2033.             )
2034. 
2035.     def formfield(self, **kwargs):
2036.         return super().formfield(
2037.             **{
2038.                 "form_class": forms.FloatField,
2039.                 **kwargs,
2040.             }
2041.         )
2042. 
2043. 
2044. class IntegerField(Field):
2045.     empty_strings_allowed = False
2046.     default_error_messages = {
2047.         "invalid": _("“%(value)s” value must be an integer."),
2048.     }
2049.     description = _("Integer")
2050. 
2051.     def check(self, **kwargs):
2052.         return [
2053.             *super().check(**kwargs),
2054.             *self._check_max_length_warning(),
2055.         ]
2056. 
2057.     def _check_max_length_warning(self):
2058.         if self.max_length is not None:
2059.             return [
2060.                 checks.Warning(
2061.                     "'max_length' is ignored when used with %s."
2062.                     % self.__class__.__name__,
2063.                     hint="Remove 'max_length' from field",
2064.                     obj=self,
2065.                     id="fields.W122",
2066.                 )
2067.             ]
2068.         return []
2069. 
2070.     @cached_property
2071.     def validators(self):
2072.         # These validators can't be added at field initialization time since
2073.         # they're based on values retrieved from `connection`.
2074.         validators_ = super().validators
2075.         internal_type = self.get_internal_type()
2076.         min_value, max_value = connection.ops.integer_field_range(internal_type)
2077.         if min_value is not None and not any(
2078.             (
2079.                 isinstance(validator, validators.MinValueValidator)
2080.                 and (
2081.                     validator.limit_value()
2082.                     if callable(validator.limit_value)
2083.                     else validator.limit_value
2084.                 )
2085.                 >= min_value
2086.             )
2087.             for validator in validators_
2088.         ):
2089.             validators_.append(validators.MinValueValidator(min_value))
2090.         if max_value is not None and not any(
2091.             (
2092.                 isinstance(validator, validators.MaxValueValidator)
2093.                 and (
2094.                     validator.limit_value()
2095.                     if callable(validator.limit_value)
2096.                     else validator.limit_value
2097.                 )
2098.                 <= max_value
2099.             )
2100.             for validator in validators_
2101.         ):
2102.             validators_.append(validators.MaxValueValidator(max_value))
2103.         return validators_
2104. 
2105.     def get_prep_value(self, value):
2106.         value = super().get_prep_value(value)
2107.         if value is None:
2108.             return None
2109.         try:
2110.             return int(value)
2111.         except (TypeError, ValueError) as e:
2112.             raise e.__class__(
2113.                 "Field '%s' expected a number but got %r." % (self.name, value),
2114.             ) from e
2115. 
2116.     def get_db_prep_value(self, value, connection, prepared=False):
2117.         value = super().get_db_prep_value(value, connection, prepared)
2118.         return connection.ops.adapt_integerfield_value(value, self.get_internal_type())
2119. 
2120.     def get_internal_type(self):
2121.         return "IntegerField"
2122. 
2123.     def to_python(self, value):
2124.         if value is None:
2125.             return value
2126.         try:
2127.             return int(value)
2128.         except (TypeError, ValueError):
2129.             raise exceptions.ValidationError(
2130.                 self.error_messages["invalid"],
2131.                 code="invalid",
2132.                 params={"value": value},
2133.             )
2134. 
2135.     def formfield(self, **kwargs):
2136.         return super().formfield(
2137.             **{
2138.                 "form_class": forms.IntegerField,
2139.                 **kwargs,
2140.             }
2141.         )
2142. 
2143. 
2144. class BigIntegerField(IntegerField):
2145.     description = _("Big (8 byte) integer")
2146.     MAX_BIGINT = 9223372036854775807
2147. 
2148.     def get_internal_type(self):
2149.         return "BigIntegerField"
2150. 
2151.     def formfield(self, **kwargs):
2152.         return super().formfield(
2153.             **{
2154.                 "min_value": -BigIntegerField.MAX_BIGINT - 1,
2155.                 "max_value": BigIntegerField.MAX_BIGINT,
2156.                 **kwargs,
2157.             }
2158.         )
2159. 
2160. 
2161. class SmallIntegerField(IntegerField):
2162.     description = _("Small integer")
2163. 
2164.     def get_internal_type(self):
2165.         return "SmallIntegerField"
2166. 
2167. 
2168. class IPAddressField(Field):
2169.     empty_strings_allowed = False
2170.     description = _("IPv4 address")
2171.     system_check_removed_details = {
2172.         "msg": (
2173.             "IPAddressField has been removed except for support in "
2174.             "historical migrations."
2175.         ),
2176.         "hint": "Use GenericIPAddressField instead.",
2177.         "id": "fields.E900",
2178.     }
2179. 
2180.     def __init__(self, *args, **kwargs):
2181.         kwargs["max_length"] = 15
2182.         super().__init__(*args, **kwargs)
2183. 
2184.     def deconstruct(self):
2185.         name, path, args, kwargs = super().deconstruct()
2186.         del kwargs["max_length"]
2187.         return name, path, args, kwargs
2188. 
2189.     def get_prep_value(self, value):
2190.         value = super().get_prep_value(value)
2191.         if value is None:
2192.             return None
2193.         return str(value)
2194. 
2195.     def get_internal_type(self):
2196.         return "IPAddressField"
2197. 
2198. 
2199. class GenericIPAddressField(Field):
2200.     empty_strings_allowed = False
2201.     description = _("IP address")
2202.     default_error_messages = {}
2203. 
2204.     def __init__(
2205.         self,
2206.         verbose_name=None,
2207.         name=None,
2208.         protocol="both",
2209.         unpack_ipv4=False,
2210.         *args,
2211.         **kwargs,
2212.     ):
2213.         self.unpack_ipv4 = unpack_ipv4
2214.         self.protocol = protocol
2215.         (
2216.             self.default_validators,
2217.             invalid_error_message,
2218.         ) = validators.ip_address_validators(protocol, unpack_ipv4)
2219.         self.default_error_messages["invalid"] = invalid_error_message
2220.         kwargs["max_length"] = 39
2221.         super().__init__(verbose_name, name, *args, **kwargs)
2222. 
2223.     def check(self, **kwargs):
2224.         return [
2225.             *super().check(**kwargs),
2226.             *self._check_blank_and_null_values(**kwargs),
2227.         ]
2228. 
2229.     def _check_blank_and_null_values(self, **kwargs):
2230.         if not getattr(self, "null", False) and getattr(self, "blank", False):
2231.             return [
2232.                 checks.Error(
2233.                     "GenericIPAddressFields cannot have blank=True if null=False, "
2234.                     "as blank values are stored as nulls.",
2235.                     obj=self,
2236.                     id="fields.E150",
2237.                 )
2238.             ]
2239.         return []
2240. 
2241.     def deconstruct(self):
2242.         name, path, args, kwargs = super().deconstruct()
2243.         if self.unpack_ipv4 is not False:
2244.             kwargs["unpack_ipv4"] = self.unpack_ipv4
2245.         if self.protocol != "both":
2246.             kwargs["protocol"] = self.protocol
2247.         if kwargs.get("max_length") == 39:
2248.             del kwargs["max_length"]
2249.         return name, path, args, kwargs
2250. 
2251.     def get_internal_type(self):
2252.         return "GenericIPAddressField"
2253. 
2254.     def to_python(self, value):
2255.         if value is None:
2256.             return None
2257.         if not isinstance(value, str):
2258.             value = str(value)
2259.         value = value.strip()
2260.         if ":" in value:
2261.             return clean_ipv6_address(
2262.                 value, self.unpack_ipv4, self.error_messages["invalid"]
2263.             )
2264.         return value
2265. 
2266.     def get_db_prep_value(self, value, connection, prepared=False):
2267.         if not prepared:
2268.             value = self.get_prep_value(value)
2269.         return connection.ops.adapt_ipaddressfield_value(value)
2270. 
2271.     def get_prep_value(self, value):
2272.         value = super().get_prep_value(value)
2273.         if value is None:
2274.             return None
2275.         if value and ":" in value:
2276.             try:
2277.                 return clean_ipv6_address(value, self.unpack_ipv4)
2278.             except exceptions.ValidationError:
2279.                 pass
2280.         return str(value)
2281. 
2282.     def formfield(self, **kwargs):
2283.         return super().formfield(
2284.             **{
2285.                 "protocol": self.protocol,
2286.                 "form_class": forms.GenericIPAddressField,
2287.                 **kwargs,
2288.             }
2289.         )
2290. 
2291. 
2292. class NullBooleanField(BooleanField):
2293.     default_error_messages = {
2294.         "invalid": _("“%(value)s” value must be either None, True or False."),
2295.         "invalid_nullable": _("“%(value)s” value must be either None, True or False."),
2296.     }
2297.     description = _("Boolean (Either True, False or None)")
2298.     system_check_removed_details = {
2299.         "msg": (
2300.             "NullBooleanField is removed except for support in historical "
2301.             "migrations."
2302.         ),
2303.         "hint": "Use BooleanField(null=True, blank=True) instead.",
2304.         "id": "fields.E903",
2305.     }
2306. 
2307.     def __init__(self, *args, **kwargs):
2308.         kwargs["null"] = True
2309.         kwargs["blank"] = True
2310.         super().__init__(*args, **kwargs)
2311. 
2312.     def deconstruct(self):
2313.         name, path, args, kwargs = super().deconstruct()
2314.         del kwargs["null"]
2315.         del kwargs["blank"]
2316.         return name, path, args, kwargs
2317. 
2318. 
2319. class PositiveIntegerRelDbTypeMixin:
2320.     def __init_subclass__(cls, **kwargs):
2321.         super().__init_subclass__(**kwargs)
2322.         if not hasattr(cls, "integer_field_class"):
2323.             cls.integer_field_class = next(
2324.                 (
2325.                     parent
2326.                     for parent in cls.__mro__[1:]
2327.                     if issubclass(parent, IntegerField)
2328.                 ),
2329.                 None,
2330.             )
2331. 
2332.     def rel_db_type(self, connection):
2333.         """
2334.         Return the data type that a related field pointing to this field should
2335.         use. In most cases, a foreign key pointing to a positive integer
2336.         primary key will have an integer column data type but some databases
2337.         (e.g. MySQL) have an unsigned integer type. In that case
2338.         (related_fields_match_type=True), the primary key should return its
2339.         db_type.
2340.         """
2341.         if connection.features.related_fields_match_type:
2342.             return self.db_type(connection)
2343.         else:
2344.             return self.integer_field_class().db_type(connection=connection)
2345. 
2346. 
2347. class PositiveBigIntegerField(PositiveIntegerRelDbTypeMixin, BigIntegerField):
2348.     description = _("Positive big integer")
2349. 
2350.     def get_internal_type(self):
2351.         return "PositiveBigIntegerField"
2352. 
2353.     def formfield(self, **kwargs):
2354.         return super().formfield(
2355.             **{
2356.                 "min_value": 0,
2357.                 **kwargs,
2358.             }
2359.         )
2360. 
2361. 
2362. class PositiveIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
2363.     description = _("Positive integer")
2364. 
2365.     def get_internal_type(self):
2366.         return "PositiveIntegerField"
2367. 
2368.     def formfield(self, **kwargs):
2369.         return super().formfield(
2370.             **{
2371.                 "min_value": 0,
2372.                 **kwargs,
2373.             }
2374.         )
2375. 
2376. 
2377. class PositiveSmallIntegerField(PositiveIntegerRelDbTypeMixin, SmallIntegerField):
2378.     description = _("Positive small integer")
2379. 
2380.     def get_internal_type(self):
2381.         return "PositiveSmallIntegerField"
2382. 
2383.     def formfield(self, **kwargs):
2384.         return super().formfield(
2385.             **{
2386.                 "min_value": 0,
2387.                 **kwargs,
2388.             }
2389.         )
2390. 
2391. 
2392. class SlugField(CharField):
2393.     default_validators = [validators.validate_slug]
2394.     description = _("Slug (up to %(max_length)s)")
2395. 
2396.     def __init__(
2397.         self, *args, max_length=50, db_index=True, allow_unicode=False, **kwargs
2398.     ):
2399.         self.allow_unicode = allow_unicode
2400.         if self.allow_unicode:
2401.             self.default_validators = [validators.validate_unicode_slug]
2402.         super().__init__(*args, max_length=max_length, db_index=db_index, **kwargs)
2403. 
2404.     def deconstruct(self):
2405.         name, path, args, kwargs = super().deconstruct()
2406.         if kwargs.get("max_length") == 50:
2407.             del kwargs["max_length"]
2408.         if self.db_index is False:
2409.             kwargs["db_index"] = False
2410.         else:
2411.             del kwargs["db_index"]
2412.         if self.allow_unicode is not False:
2413.             kwargs["allow_unicode"] = self.allow_unicode
2414.         return name, path, args, kwargs
2415. 
2416.     def get_internal_type(self):
2417.         return "SlugField"
2418. 
2419.     def formfield(self, **kwargs):
2420.         return super().formfield(
2421.             **{
2422.                 "form_class": forms.SlugField,
2423.                 "allow_unicode": self.allow_unicode,
2424.                 **kwargs,
2425.             }
2426.         )
2427. 
2428. 
2429. class TextField(Field):
2430.     description = _("Text")
2431. 
2432.     def __init__(self, *args, db_collation=None, **kwargs):
2433.         super().__init__(*args, **kwargs)
2434.         self.db_collation = db_collation
2435. 
2436.     def check(self, **kwargs):
2437.         databases = kwargs.get("databases") or []
2438.         return [
2439.             *super().check(**kwargs),
2440.             *self._check_db_collation(databases),
2441.         ]
2442. 
2443.     def _check_db_collation(self, databases):
2444.         errors = []
2445.         for db in databases:
2446.             if not router.allow_migrate_model(db, self.model):
2447.                 continue
2448.             connection = connections[db]
2449.             if not (
2450.                 self.db_collation is None
2451.                 or "supports_collation_on_textfield"
2452.                 in self.model._meta.required_db_features
2453.                 or connection.features.supports_collation_on_textfield
2454.             ):
2455.                 errors.append(
2456.                     checks.Error(
2457.                         "%s does not support a database collation on "
2458.                         "TextFields." % connection.display_name,
2459.                         obj=self,
2460.                         id="fields.E190",
2461.                     ),
2462.                 )
2463.         return errors
2464. 
2465.     def db_parameters(self, connection):
2466.         db_params = super().db_parameters(connection)
2467.         db_params["collation"] = self.db_collation
2468.         return db_params
2469. 
2470.     def get_internal_type(self):
2471.         return "TextField"
2472. 
2473.     def to_python(self, value):
2474.         if isinstance(value, str) or value is None:
2475.             return value
2476.         return str(value)
2477. 
2478.     def get_prep_value(self, value):
2479.         value = super().get_prep_value(value)
2480.         return self.to_python(value)
2481. 
2482.     def formfield(self, **kwargs):
2483.         # Passing max_length to forms.CharField means that the value's length
2484.         # will be validated twice. This is considered acceptable since we want
2485.         # the value in the form field (to pass into widget for example).
2486.         return super().formfield(
2487.             **{
2488.                 "max_length": self.max_length,
2489.                 **({} if self.choices is not None else {"widget": forms.Textarea}),
2490.                 **kwargs,
2491.             }
2492.         )
2493. 
2494.     def deconstruct(self):
2495.         name, path, args, kwargs = super().deconstruct()
2496.         if self.db_collation:
2497.             kwargs["db_collation"] = self.db_collation
2498.         return name, path, args, kwargs
2499. 
2500. 
2501. class TimeField(DateTimeCheckMixin, Field):


File: django/db/models/fields/__init__.py
Line number range: 2501 - 3001
Content:
2501. class TimeField(DateTimeCheckMixin, Field):
2502.     empty_strings_allowed = False
2503.     default_error_messages = {
2504.         "invalid": _(
2505.             "“%(value)s” value has an invalid format. It must be in "
2506.             "HH:MM[:ss[.uuuuuu]] format."
2507.         ),
2508.         "invalid_time": _(
2509.             "“%(value)s” value has the correct format "
2510.             "(HH:MM[:ss[.uuuuuu]]) but it is an invalid time."
2511.         ),
2512.     }
2513.     description = _("Time")
2514. 
2515.     def __init__(
2516.         self, verbose_name=None, name=None, auto_now=False, auto_now_add=False, **kwargs
2517.     ):
2518.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
2519.         if auto_now or auto_now_add:
2520.             kwargs["editable"] = False
2521.             kwargs["blank"] = True
2522.         super().__init__(verbose_name, name, **kwargs)
2523. 
2524.     def _check_fix_default_value(self):
2525.         """
2526.         Warn that using an actual date or datetime value is probably wrong;
2527.         it's only evaluated on server startup.
2528.         """
2529.         if not self.has_default():
2530.             return []
2531. 
2532.         value = self.default
2533.         if isinstance(value, datetime.datetime):
2534.             now = None
2535.         elif isinstance(value, datetime.time):
2536.             now = _get_naive_now()
2537.             # This will not use the right date in the race condition where now
2538.             # is just before the date change and value is just past 0:00.
2539.             value = datetime.datetime.combine(now.date(), value)
2540.         else:
2541.             # No explicit time / datetime value -- no checks necessary
2542.             return []
2543.         # At this point, value is a datetime object.
2544.         return self._check_if_value_fixed(value, now=now)
2545. 
2546.     def deconstruct(self):
2547.         name, path, args, kwargs = super().deconstruct()
2548.         if self.auto_now is not False:
2549.             kwargs["auto_now"] = self.auto_now
2550.         if self.auto_now_add is not False:
2551.             kwargs["auto_now_add"] = self.auto_now_add
2552.         if self.auto_now or self.auto_now_add:
2553.             del kwargs["blank"]
2554.             del kwargs["editable"]
2555.         return name, path, args, kwargs
2556. 
2557.     def get_internal_type(self):
2558.         return "TimeField"
2559. 
2560.     def to_python(self, value):
2561.         if value is None:
2562.             return None
2563.         if isinstance(value, datetime.time):
2564.             return value
2565.         if isinstance(value, datetime.datetime):
2566.             # Not usually a good idea to pass in a datetime here (it loses
2567.             # information), but this can be a side-effect of interacting with a
2568.             # database backend (e.g. Oracle), so we'll be accommodating.
2569.             return value.time()
2570. 
2571.         try:
2572.             parsed = parse_time(value)
2573.             if parsed is not None:
2574.                 return parsed
2575.         except ValueError:
2576.             raise exceptions.ValidationError(
2577.                 self.error_messages["invalid_time"],
2578.                 code="invalid_time",
2579.                 params={"value": value},
2580.             )
2581. 
2582.         raise exceptions.ValidationError(
2583.             self.error_messages["invalid"],
2584.             code="invalid",
2585.             params={"value": value},
2586.         )
2587. 
2588.     def pre_save(self, model_instance, add):
2589.         if self.auto_now or (self.auto_now_add and add):
2590.             value = datetime.datetime.now().time()
2591.             setattr(model_instance, self.attname, value)
2592.             return value
2593.         else:
2594.             return super().pre_save(model_instance, add)
2595. 
2596.     def get_prep_value(self, value):
2597.         value = super().get_prep_value(value)
2598.         return self.to_python(value)
2599. 
2600.     def get_db_prep_value(self, value, connection, prepared=False):
2601.         # Casts times into the format expected by the backend
2602.         if not prepared:
2603.             value = self.get_prep_value(value)
2604.         return connection.ops.adapt_timefield_value(value)
2605. 
2606.     def value_to_string(self, obj):
2607.         val = self.value_from_object(obj)
2608.         return "" if val is None else val.isoformat()
2609. 
2610.     def formfield(self, **kwargs):
2611.         return super().formfield(
2612.             **{
2613.                 "form_class": forms.TimeField,
2614.                 **kwargs,
2615.             }
2616.         )
2617. 
2618. 
2619. class URLField(CharField):
2620.     default_validators = [validators.URLValidator()]
2621.     description = _("URL")
2622. 
2623.     def __init__(self, verbose_name=None, name=None, **kwargs):
2624.         kwargs.setdefault("max_length", 200)
2625.         super().__init__(verbose_name, name, **kwargs)
2626. 
2627.     def deconstruct(self):
2628.         name, path, args, kwargs = super().deconstruct()
2629.         if kwargs.get("max_length") == 200:
2630.             del kwargs["max_length"]
2631.         return name, path, args, kwargs
2632. 
2633.     def formfield(self, **kwargs):
2634.         # As with CharField, this will cause URL validation to be performed
2635.         # twice.
2636.         return super().formfield(
2637.             **{
2638.                 "form_class": forms.URLField,
2639.                 **kwargs,
2640.             }
2641.         )
2642. 
2643. 
2644. class BinaryField(Field):
2645.     description = _("Raw binary data")
2646.     empty_values = [None, b""]
2647. 
2648.     def __init__(self, *args, **kwargs):
2649.         kwargs.setdefault("editable", False)
2650.         super().__init__(*args, **kwargs)
2651.         if self.max_length is not None:
2652.             self.validators.append(validators.MaxLengthValidator(self.max_length))
2653. 
2654.     def check(self, **kwargs):
2655.         return [*super().check(**kwargs), *self._check_str_default_value()]
2656. 
2657.     def _check_str_default_value(self):
2658.         if self.has_default() and isinstance(self.default, str):
2659.             return [
2660.                 checks.Error(
2661.                     "BinaryField's default cannot be a string. Use bytes "
2662.                     "content instead.",
2663.                     obj=self,
2664.                     id="fields.E170",
2665.                 )
2666.             ]
2667.         return []
2668. 
2669.     def deconstruct(self):
2670.         name, path, args, kwargs = super().deconstruct()
2671.         if self.editable:
2672.             kwargs["editable"] = True
2673.         else:
2674.             del kwargs["editable"]
2675.         return name, path, args, kwargs
2676. 
2677.     def get_internal_type(self):
2678.         return "BinaryField"
2679. 
2680.     def get_placeholder(self, value, compiler, connection):
2681.         return connection.ops.binary_placeholder_sql(value)
2682. 
2683.     def get_default(self):
2684.         if self.has_default() and not callable(self.default):
2685.             return self.default
2686.         default = super().get_default()
2687.         if default == "":
2688.             return b""
2689.         return default
2690. 
2691.     def get_db_prep_value(self, value, connection, prepared=False):
2692.         value = super().get_db_prep_value(value, connection, prepared)
2693.         if value is not None:
2694.             return connection.Database.Binary(value)
2695.         return value
2696. 
2697.     def value_to_string(self, obj):
2698.         """Binary data is serialized as base64"""
2699.         return b64encode(self.value_from_object(obj)).decode("ascii")
2700. 
2701.     def to_python(self, value):
2702.         # If it's a string, it should be base64-encoded data
2703.         if isinstance(value, str):
2704.             return memoryview(b64decode(value.encode("ascii")))
2705.         return value
2706. 
2707. 
2708. class UUIDField(Field):
2709.     default_error_messages = {
2710.         "invalid": _("“%(value)s” is not a valid UUID."),
2711.     }
2712.     description = _("Universally unique identifier")
2713.     empty_strings_allowed = False
2714. 
2715.     def __init__(self, verbose_name=None, **kwargs):
2716.         kwargs["max_length"] = 32
2717.         super().__init__(verbose_name, **kwargs)
2718. 
2719.     def deconstruct(self):
2720.         name, path, args, kwargs = super().deconstruct()
2721.         del kwargs["max_length"]
2722.         return name, path, args, kwargs
2723. 
2724.     def get_internal_type(self):
2725.         return "UUIDField"
2726. 
2727.     def get_prep_value(self, value):
2728.         value = super().get_prep_value(value)
2729.         return self.to_python(value)
2730. 
2731.     def get_db_prep_value(self, value, connection, prepared=False):
2732.         if value is None:
2733.             return None
2734.         if not isinstance(value, uuid.UUID):
2735.             value = self.to_python(value)
2736. 
2737.         if connection.features.has_native_uuid_field:
2738.             return value
2739.         return value.hex
2740. 
2741.     def to_python(self, value):
2742.         if value is not None and not isinstance(value, uuid.UUID):
2743.             input_form = "int" if isinstance(value, int) else "hex"
2744.             try:
2745.                 return uuid.UUID(**{input_form: value})
2746.             except (AttributeError, ValueError):
2747.                 raise exceptions.ValidationError(
2748.                     self.error_messages["invalid"],
2749.                     code="invalid",
2750.                     params={"value": value},
2751.                 )
2752.         return value
2753. 
2754.     def formfield(self, **kwargs):
2755.         return super().formfield(
2756.             **{
2757.                 "form_class": forms.UUIDField,
2758.                 **kwargs,
2759.             }
2760.         )
2761. 
2762. 
2763. class AutoFieldMixin:
2764.     db_returning = True
2765. 
2766.     def __init__(self, *args, **kwargs):
2767.         kwargs["blank"] = True
2768.         super().__init__(*args, **kwargs)
2769. 
2770.     def check(self, **kwargs):
2771.         return [
2772.             *super().check(**kwargs),
2773.             *self._check_primary_key(),
2774.         ]
2775. 
2776.     def _check_primary_key(self):
2777.         if not self.primary_key:
2778.             return [
2779.                 checks.Error(
2780.                     "AutoFields must set primary_key=True.",
2781.                     obj=self,
2782.                     id="fields.E100",
2783.                 ),
2784.             ]
2785.         else:
2786.             return []
2787. 
2788.     def deconstruct(self):
2789.         name, path, args, kwargs = super().deconstruct()
2790.         del kwargs["blank"]
2791.         kwargs["primary_key"] = True
2792.         return name, path, args, kwargs
2793. 
2794.     def validate(self, value, model_instance):
2795.         pass
2796. 
2797.     def get_db_prep_value(self, value, connection, prepared=False):
2798.         if not prepared:
2799.             value = self.get_prep_value(value)
2800.             value = connection.ops.validate_autopk_value(value)
2801.         return value
2802. 
2803.     def contribute_to_class(self, cls, name, **kwargs):
2804.         if cls._meta.auto_field:
2805.             raise ValueError(
2806.                 "Model %s can't have more than one auto-generated field."
2807.                 % cls._meta.label
2808.             )
2809.         super().contribute_to_class(cls, name, **kwargs)
2810.         cls._meta.auto_field = self
2811. 
2812.     def formfield(self, **kwargs):
2813.         return None
2814. 
2815. 
2816. class AutoFieldMeta(type):
2817.     """
2818.     Metaclass to maintain backward inheritance compatibility for AutoField.
2819. 
2820.     It is intended that AutoFieldMixin become public API when it is possible to
2821.     create a non-integer automatically-generated field using column defaults
2822.     stored in the database.
2823. 
2824.     In many areas Django also relies on using isinstance() to check for an
2825.     automatically-generated field as a subclass of AutoField. A new flag needs
2826.     to be implemented on Field to be used instead.
2827. 
2828.     When these issues have been addressed, this metaclass could be used to
2829.     deprecate inheritance from AutoField and use of isinstance() with AutoField
2830.     for detecting automatically-generated fields.
2831.     """
2832. 
2833.     @property
2834.     def _subclasses(self):
2835.         return (BigAutoField, SmallAutoField)
2836. 
2837.     def __instancecheck__(self, instance):
2838.         return isinstance(instance, self._subclasses) or super().__instancecheck__(
2839.             instance
2840.         )
2841. 
2842.     def __subclasscheck__(self, subclass):
2843.         return issubclass(subclass, self._subclasses) or super().__subclasscheck__(
2844.             subclass
2845.         )
2846. 
2847. 
2848. class AutoField(AutoFieldMixin, IntegerField, metaclass=AutoFieldMeta):
2849.     def get_internal_type(self):
2850.         return "AutoField"
2851. 
2852.     def rel_db_type(self, connection):
2853.         return IntegerField().db_type(connection=connection)
2854. 
2855. 
2856. class BigAutoField(AutoFieldMixin, BigIntegerField):
2857.     def get_internal_type(self):
2858.         return "BigAutoField"
2859. 
2860.     def rel_db_type(self, connection):
2861.         return BigIntegerField().db_type(connection=connection)
2862. 
2863. 
2864. class SmallAutoField(AutoFieldMixin, SmallIntegerField):
2865.     def get_internal_type(self):
2866.         return "SmallAutoField"
2867. 
2868.     def rel_db_type(self, connection):
2869.         return SmallIntegerField().db_type(connection=connection)

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-24 21:17:14,813 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly asks for the full content of the file `django/db/models/fields/__init__.py`.\n   - The provided context contains the entire content of this file.\n2. Extended relevance:\n   - The user's purpose is to inspect the definitions of `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField`. These definitions are all contained within this file. Providing the full file content is the most direct way to satisfy the user's request and purpose.", relative_path='django/db/models/fields/__init__.py', start_line=1, end_line=2869)]
2025-12-24 21:17:14,818 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of django/db/models/fields/__init__.py.
2025-12-24 21:17:14,818 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-24 21:17:14,818 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-24 21:17:14,819 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 1 existing contexts
2025-12-24 21:17:14,819 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 2 total contexts (removed 0 duplicates)
2025-12-24 21:17:14,821 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── CODE_OF_CONDUCT.md
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── benchmark.yml
|       ├── data
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       ├── schedule_tests.yml
|       ├── schedules.yml
|       ├── selenium.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .readthedocs.yml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ckb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_IE
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ms
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   └── options.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── ms
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── ckb
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   ├── memcached.py
|   |   |   |   └── redis.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── filesystem.py
|   |   |   |   ├── handler.py
|   |   |   |   ├── memory.py
|   |   |   |   └── mixins.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── optimizemigration.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── psycopg_any.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── _functions.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   └── special.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── csrf_403.html
|           ├── default_urlconf.html
|           ├── directory_index.html
|           ├── i18n_catalog.js
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── csrf.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── logging.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   ├── tutorial08.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── filters.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── expressions.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── logging.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.21.txt
|   |   ├── 2.2.22.txt
|   |   ├── 2.2.23.txt
|   |   ├── 2.2.24.txt
|   |   ├── 2.2.25.txt
|   |   ├── 2.2.26.txt
|   |   ├── 2.2.27.txt
|   |   ├── 2.2.28.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.10.txt
|   |   ├── 3.1.11.txt
|   |   ├── 3.1.12.txt
|   |   ├── 3.1.13.txt
|   |   ├── 3.1.14.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.9.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.10.txt
|   |   ├── 3.2.11.txt
|   |   ├── 3.2.12.txt
|   |   ├── 3.2.13.txt
|   |   ├── 3.2.14.txt
|   |   ├── 3.2.15.txt
|   |   ├── 3.2.16.txt
|   |   ├── 3.2.17.txt
|   |   ├── 3.2.18.txt
|   |   ├── 3.2.19.txt
|   |   ├── 3.2.2.txt
|   |   ├── 3.2.20.txt
|   |   ├── 3.2.3.txt
|   |   ├── 3.2.4.txt
|   |   ├── 3.2.5.txt
|   |   ├── 3.2.6.txt
|   |   ├── 3.2.7.txt
|   |   ├── 3.2.8.txt
|   |   ├── 3.2.9.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.1.txt
|   |   ├── 4.0.10.txt
|   |   ├── 4.0.2.txt
|   |   ├── 4.0.3.txt
|   |   ├── 4.0.4.txt
|   |   ├── 4.0.5.txt
|   |   ├── 4.0.6.txt
|   |   ├── 4.0.7.txt
|   |   ├── 4.0.8.txt
|   |   ├── 4.0.9.txt
|   |   ├── 4.0.txt
|   |   ├── 4.1.1.txt
|   |   ├── 4.1.10.txt
|   |   ├── 4.1.2.txt
|   |   ├── 4.1.3.txt
|   |   ├── 4.1.4.txt
|   |   ├── 4.1.5.txt
|   |   ├── 4.1.6.txt
|   |   ├── 4.1.7.txt
|   |   ├── 4.1.8.txt
|   |   ├── 4.1.9.txt
|   |   ├── 4.1.txt
|   |   ├── 4.2.1.txt
|   |   ├── 4.2.2.txt
|   |   ├── 4.2.3.txt
|   |   ├── 4.2.4.txt
|   |   ├── 4.2.txt
|   |   ├── 5.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── fixtures.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── .hidden
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       ├── noargs_command.py
    |   |       └── suppress_base_options_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_breadcrumbs.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_related_object_lookups.py
    |   ├── test_skip_link_to_content.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_async_auth.py
    |   ├── test_async_model_methods.py
    |   ├── test_async_queryset.py
    |   ├── test_async_related_managers.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   ├── with_many_to_many.py
    |   |   └── with_unique_constraint.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_functions.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   ├── tests.py
    |   └── tests_async.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── template_test_apps
    |   |   ├── __init__.py
    |   |   ├── different_tags_app
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   ├── same_tags_app_1
    |   |   |   ├── __init__.py
    |   |   |   ├── apps.py
    |   |   |   └── templatetags
    |   |   └── same_tags_app_2
    |   |       ├── __init__.py
    |   |       ├── apps.py
    |   |       └── templatetags
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── cbv_as_view.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_migrations.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   ├── test_cache.py
    |   ├── test_clickjacking.py
    |   ├── test_common.py
    |   ├── test_http.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   ├── test_storages.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── test_inmemory_storage.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       ├── custom_field.html
    |   |       ├── custom_widget.html
    |   |       ├── cyclic_context_boundfield_render.html
    |   |       ├── error.html
    |   |       ├── form_snippet.html
    |   |       ├── legend_test.html
    |   |       └── use_fieldset.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   └── tags.py
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── models.py
    |   |   |   └── test.html
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── unchanged
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_manual_porting
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_noop
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_no_replaces
    |   |   ├── 0001_squashed_0002.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── model_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   ├── test_sqlcompiler.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests_tests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_lastmod_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       ├── index_only.py
    |       └── sitemap_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── absolute_root.js
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── nonutf8
    |   |   |   └── nonutf8.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_escapeseq.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Django Admin with Inlines not using UUIDField default value

Description: Description
	 
		(last modified by Joseph Metzinger)
	 
Hello,
I am a long time django user, first time bug reporter, so please let me know if I need to do anything else to help get this bug fixed :)
I am using Django 3.1.3 and python 3.8.5 and have cerated a toy project to illustrate the bug. I have the following models:
class UUIDModel(models.Model):
	pkid = models.BigAutoField(primary_key=True, editable=False)
	id = models.UUIDField(default=uuid.uuid4, editable=False, unique=True)
	class Meta:
		abstract = True
class Thing(UUIDModel):
	name = models.CharField(max_length=191)
class SubThing(models.Model):
	name = models.CharField(max_length=191)
	thing = models.ForeignKey(
		'bugapp.Thing',
		to_field='id',
		on_delete = models.CASCADE,
		related_name='subthings',
	)
And the following admin.py file:
class SubThingInline(admin.StackedInline):
	model = SubThing
@admin.register(Thing)
class ThingAdmin(admin.ModelAdmin):
	list_display = ('name',)
	ordering = ('pkid',)
	inlines = (SubThingInline,)
When logging into the admin, if you delete all of the entries for "subthings", add a name, and save the model, it will work. As soon as you try to add a subthing alongside the main Thing, it fails with the following exception:
​https://dpaste.com/8EU4FF6RW
It shows that the value of "id" in the Thing model is being set to null.
I believe this is a bug in django.
Thanks!

Patch information:
diff --git a/django/forms/models.py b/django/forms/models.py
index 3fa04b821f..13b46b1e43 100644
--- a/django/forms/models.py
+++ b/django/forms/models.py
@@ -1170,14 +1170,24 @@ class BaseInlineFormSet(BaseModelFormSet):
         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
             kwargs["to_field"] = self.fk.remote_field.field_name
 
-        # If we're adding a new object, ignore a parent's auto-generated key
-        # as it will be regenerated on the save request.
+        # If we're adding a new object, ignore a parent's auto-incrementing primary key
+        # as it will be regenerated on the save request. Preserve fields with
+        # Python-level defaults (e.g., UUIDField) and non-PK to_field targets.
         if self.instance._state.adding:
             if kwargs.get("to_field") is not None:
                 to_field = self.instance._meta.get_field(kwargs["to_field"])
             else:
                 to_field = self.instance._meta.pk
-            if to_field.has_default():
+            # Only clear database auto-increment primary keys; do not clear fields
+            # that rely on Python-level defaults such as UUIDField.
+            from django.db import models
+            if (
+                to_field == self.instance._meta.pk
+                and isinstance(
+                    to_field,
+                    (models.AutoField, models.BigAutoField, models.SmallAutoField),
+                )
+            ):
                 setattr(self.instance, to_field.attname, None)
 
         form.fields[name] = InlineForeignKeyField(self.instance, **kwargs)


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of django/forms/models.py.
Extra Requirements: 
Purpose: 

Previous refined query 2:
Essential Query: Please provide the full content of django/db/models/fields/__init__.py.
Extra Requirements: 
Purpose: I need to inspect the definitions of `AutoField`, `BigAutoField`, `SmallAutoField`, and `UUIDField` to understand the logic in the provided patch.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/fields/__init__.py
Line number range: 1 - 2869
Content:
1. import collections.abc
2. import copy
3. import datetime
4. import decimal
5. import operator
6. import uuid
7. import warnings
8. from base64 import b64decode, b64encode
9. from functools import partialmethod, total_ordering
10. 
11. from django import forms
12. from django.apps import apps
13. from django.conf import settings
14. from django.core import checks, exceptions, validators
15. from django.db import connection, connections, router
16. from django.db.models.constants import LOOKUP_SEP
17. from django.db.models.enums import ChoicesMeta
18. from django.db.models.query_utils import DeferredAttribute, RegisterLookupMixin
19. from django.utils import timezone
20. from django.utils.datastructures import DictWrapper
21. from django.utils.dateparse import (
22.     parse_date,
23.     parse_datetime,
24.     parse_duration,
25.     parse_time,
26. )
27. from django.utils.duration import duration_microseconds, duration_string
28. from django.utils.functional import Promise, cached_property
29. from django.utils.ipv6 import clean_ipv6_address
30. from django.utils.itercompat import is_iterable
31. from django.utils.text import capfirst
32. from django.utils.translation import gettext_lazy as _
33. 
34. __all__ = [
35.     "AutoField",
36.     "BLANK_CHOICE_DASH",
37.     "BigAutoField",
38.     "BigIntegerField",
39.     "BinaryField",
40.     "BooleanField",
41.     "CharField",
42.     "CommaSeparatedIntegerField",
43.     "DateField",
44.     "DateTimeField",
45.     "DecimalField",
46.     "DurationField",
47.     "EmailField",
48.     "Empty",
49.     "Field",
50.     "FilePathField",
51.     "FloatField",
52.     "GenericIPAddressField",
53.     "IPAddressField",
54.     "IntegerField",
55.     "NOT_PROVIDED",
56.     "NullBooleanField",
57.     "PositiveBigIntegerField",
58.     "PositiveIntegerField",
59.     "PositiveSmallIntegerField",
60.     "SlugField",
61.     "SmallAutoField",
62.     "SmallIntegerField",
63.     "TextField",
64.     "TimeField",
65.     "URLField",
66.     "UUIDField",
67. ]
68. 
69. 
70. class Empty:
71.     pass
72. 
73. 
74. class NOT_PROVIDED:
75.     pass
76. 
77. 
78. # The values to use for "blank" in SelectFields. Will be appended to the start
79. # of most "choices" lists.
80. BLANK_CHOICE_DASH = [("", "---------")]
81. 
82. 
83. def _load_field(app_label, model_name, field_name):
84.     return apps.get_model(app_label, model_name)._meta.get_field(field_name)
85. 
86. 
87. # A guide to Field parameters:
88. #
89. #   * name:      The name of the field specified in the model.
90. #   * attname:   The attribute to use on the model object. This is the same as
91. #                "name", except in the case of ForeignKeys, where "_id" is
92. #                appended.
93. #   * db_column: The db_column specified in the model (or None).
94. #   * column:    The database column for this field. This is the same as
95. #                "attname", except if db_column is specified.
96. #
97. # Code that introspects values, or does other dynamic things, should use
98. # attname. For example, this gets the primary key value of object "obj":
99. #
100. #     getattr(obj, opts.pk.attname)
101. 
102. 
103. def _empty(of_cls):
104.     new = Empty()
105.     new.__class__ = of_cls
106.     return new
107. 
108. 
109. def return_None():
110.     return None
111. 
112. 
113. @total_ordering
114. class Field(RegisterLookupMixin):
115.     """Base class for all field types"""
116. 
117.     # Designates whether empty strings fundamentally are allowed at the
118.     # database level.
119.     empty_strings_allowed = True
120.     empty_values = list(validators.EMPTY_VALUES)
121. 
122.     # These track each time a Field instance is created. Used to retain order.
123.     # The auto_creation_counter is used for fields that Django implicitly
124.     # creates, creation_counter is used for all user-specified fields.
125.     creation_counter = 0
126.     auto_creation_counter = -1
127.     default_validators = []  # Default set of validators
128.     default_error_messages = {
129.         "invalid_choice": _("Value %(value)r is not a valid choice."),
130.         "null": _("This field cannot be null."),
131.         "blank": _("This field cannot be blank."),
132.         "unique": _("%(model_name)s with this %(field_label)s already exists."),
133.         "unique_for_date": _(
134.             # Translators: The 'lookup_type' is one of 'date', 'year' or
135.             # 'month'. Eg: "Title must be unique for pub_date year"
136.             "%(field_label)s must be unique for "
137.             "%(date_field_label)s %(lookup_type)s."
138.         ),
139.     }
140.     system_check_deprecated_details = None
141.     system_check_removed_details = None
142. 
143.     # Attributes that don't affect a column definition.
144.     # These attributes are ignored when altering the field.
145.     non_db_attrs = (
146.         "blank",
147.         "choices",
148.         "db_column",
149.         "editable",
150.         "error_messages",
151.         "help_text",
152.         "limit_choices_to",
153.         # Database-level options are not supported, see #21961.
154.         "on_delete",
155.         "related_name",
156.         "related_query_name",
157.         "validators",
158.         "verbose_name",
159.     )
160. 
161.     # Field flags
162.     hidden = False
163. 
164.     many_to_many = None
165.     many_to_one = None
166.     one_to_many = None
167.     one_to_one = None
168.     related_model = None
169. 
170.     descriptor_class = DeferredAttribute
171. 
172.     # Generic field type description, usually overridden by subclasses
173.     def _description(self):
174.         return _("Field of type: %(field_type)s") % {
175.             "field_type": self.__class__.__name__
176.         }
177. 
178.     description = property(_description)
179. 
180.     def __init__(
181.         self,
182.         verbose_name=None,
183.         name=None,
184.         primary_key=False,
185.         max_length=None,
186.         unique=False,
187.         blank=False,
188.         null=False,
189.         db_index=False,
190.         rel=None,
191.         default=NOT_PROVIDED,
192.         editable=True,
193.         serialize=True,
194.         unique_for_date=None,
195.         unique_for_month=None,
196.         unique_for_year=None,
197.         choices=None,
198.         help_text="",
199.         db_column=None,
200.         db_tablespace=None,
201.         auto_created=False,
202.         validators=(),
203.         error_messages=None,
204.         db_comment=None,
205.         db_default=NOT_PROVIDED,
206.     ):
207.         self.name = name
208.         self.verbose_name = verbose_name  # May be set by set_attributes_from_name
209.         self._verbose_name = verbose_name  # Store original for deconstruction
210.         self.primary_key = primary_key
211.         self.max_length, self._unique = max_length, unique
212.         self.blank, self.null = blank, null
213.         self.remote_field = rel
214.         self.is_relation = self.remote_field is not None
215.         self.default = default
216.         if db_default is not NOT_PROVIDED and not hasattr(
217.             db_default, "resolve_expression"
218.         ):
219.             from django.db.models.expressions import Value
220. 
221.             db_default = Value(db_default)
222.         self.db_default = db_default
223.         self.editable = editable
224.         self.serialize = serialize
225.         self.unique_for_date = unique_for_date
226.         self.unique_for_month = unique_for_month
227.         self.unique_for_year = unique_for_year
228.         if isinstance(choices, ChoicesMeta):
229.             choices = choices.choices
230.         if isinstance(choices, collections.abc.Iterator):
231.             choices = list(choices)
232.         self.choices = choices
233.         self.help_text = help_text
234.         self.db_index = db_index
235.         self.db_column = db_column
236.         self.db_comment = db_comment
237.         self._db_tablespace = db_tablespace
238.         self.auto_created = auto_created
239. 
240.         # Adjust the appropriate creation counter, and save our local copy.
241.         if auto_created:
242.             self.creation_counter = Field.auto_creation_counter
243.             Field.auto_creation_counter -= 1
244.         else:
245.             self.creation_counter = Field.creation_counter
246.             Field.creation_counter += 1
247. 
248.         self._validators = list(validators)  # Store for deconstruction later
249. 
250.         self._error_messages = error_messages  # Store for deconstruction later
251. 
252.     def __str__(self):
253.         """
254.         Return "app_label.model_label.field_name" for fields attached to
255.         models.
256.         """
257.         if not hasattr(self, "model"):
258.             return super().__str__()
259.         model = self.model
260.         return "%s.%s" % (model._meta.label, self.name)
261. 
262.     def __repr__(self):
263.         """Display the module, class, and name of the field."""
264.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
265.         name = getattr(self, "name", None)
266.         if name is not None:
267.             return "<%s: %s>" % (path, name)
268.         return "<%s>" % path
269. 
270.     def check(self, **kwargs):
271.         return [
272.             *self._check_field_name(),
273.             *self._check_choices(),
274.             *self._check_db_default(**kwargs),
275.             *self._check_db_index(),
276.             *self._check_db_comment(**kwargs),
277.             *self._check_null_allowed_for_primary_keys(),
278.             *self._check_backend_specific_checks(**kwargs),
279.             *self._check_validators(),
280.             *self._check_deprecation_details(),
281.         ]
282. 
283.     def _check_field_name(self):
284.         """
285.         Check if field name is valid, i.e. 1) does not end with an
286.         underscore, 2) does not contain "__" and 3) is not "pk".
287.         """
288.         if self.name.endswith("_"):
289.             return [
290.                 checks.Error(
291.                     "Field names must not end with an underscore.",
292.                     obj=self,
293.                     id="fields.E001",
294.                 )
295.             ]
296.         elif LOOKUP_SEP in self.name:
297.             return [
298.                 checks.Error(
299.                     'Field names must not contain "%s".' % LOOKUP_SEP,
300.                     obj=self,
301.                     id="fields.E002",
302.                 )
303.             ]
304.         elif self.name == "pk":
305.             return [
306.                 checks.Error(
307.                     "'pk' is a reserved word that cannot be used as a field name.",
308.                     obj=self,
309.                     id="fields.E003",
310.                 )
311.             ]
312.         else:
313.             return []
314. 
315.     @classmethod
316.     def _choices_is_value(cls, value):
317.         return isinstance(value, (str, Promise)) or not is_iterable(value)
318. 
319.     def _check_choices(self):
320.         if not self.choices:
321.             return []
322. 
323.         if not is_iterable(self.choices) or isinstance(self.choices, str):
324.             return [
325.                 checks.Error(
326.                     "'choices' must be an iterable (e.g., a list or tuple).",
327.                     obj=self,
328.                     id="fields.E004",
329.                 )
330.             ]
331. 
332.         choice_max_length = 0
333.         # Expect [group_name, [value, display]]
334.         for choices_group in self.choices:
335.             try:
336.                 group_name, group_choices = choices_group
337.             except (TypeError, ValueError):
338.                 # Containing non-pairs
339.                 break
340.             try:
341.                 if not all(
342.                     self._choices_is_value(value) and self._choices_is_value(human_name)
343.                     for value, human_name in group_choices
344.                 ):
345.                     break
346.                 if self.max_length is not None and group_choices:
347.                     choice_max_length = max(
348.                         [
349.                             choice_max_length,
350.                             *(
351.                                 len(value)
352.                                 for value, _ in group_choices
353.                                 if isinstance(value, str)
354.                             ),
355.                         ]
356.                     )
357.             except (TypeError, ValueError):
358.                 # No groups, choices in the form [value, display]
359.                 value, human_name = group_name, group_choices
360.                 if not self._choices_is_value(value) or not self._choices_is_value(
361.                     human_name
362.                 ):
363.                     break
364.                 if self.max_length is not None and isinstance(value, str):
365.                     choice_max_length = max(choice_max_length, len(value))
366. 
367.             # Special case: choices=['ab']
368.             if isinstance(choices_group, str):
369.                 break
370.         else:
371.             if self.max_length is not None and choice_max_length > self.max_length:
372.                 return [
373.                     checks.Error(
374.                         "'max_length' is too small to fit the longest value "
375.                         "in 'choices' (%d characters)." % choice_max_length,
376.                         obj=self,
377.                         id="fields.E009",
378.                     ),
379.                 ]
380.             return []
381. 
382.         return [
383.             checks.Error(
384.                 "'choices' must be an iterable containing "
385.                 "(actual value, human readable name) tuples.",
386.                 obj=self,
387.                 id="fields.E005",
388.             )
389.         ]
390. 
391.     def _check_db_default(self, databases=None, **kwargs):
392.         from django.db.models.expressions import Value
393. 
394.         if (
395.             self.db_default is NOT_PROVIDED
396.             or isinstance(self.db_default, Value)
397.             or databases is None
398.         ):
399.             return []
400.         errors = []
401.         for db in databases:
402.             if not router.allow_migrate_model(db, self.model):
403.                 continue
404.             connection = connections[db]
405. 
406.             if not getattr(self.db_default, "allowed_default", False) and (
407.                 connection.features.supports_expression_defaults
408.             ):
409.                 msg = f"{self.db_default} cannot be used in db_default."
410.                 errors.append(checks.Error(msg, obj=self, id="fields.E012"))
411. 
412.             if not (
413.                 connection.features.supports_expression_defaults
414.                 or "supports_expression_defaults"
415.                 in self.model._meta.required_db_features
416.             ):
417.                 msg = (
418.                     f"{connection.display_name} does not support default database "
419.                     "values with expressions (db_default)."
420.                 )
421.                 errors.append(checks.Error(msg, obj=self, id="fields.E011"))
422.         return errors
423. 
424.     def _check_db_index(self):
425.         if self.db_index not in (None, True, False):
426.             return [
427.                 checks.Error(
428.                     "'db_index' must be None, True or False.",
429.                     obj=self,
430.                     id="fields.E006",
431.                 )
432.             ]
433.         else:
434.             return []
435. 
436.     def _check_db_comment(self, databases=None, **kwargs):
437.         if not self.db_comment or not databases:
438.             return []
439.         errors = []
440.         for db in databases:
441.             if not router.allow_migrate_model(db, self.model):
442.                 continue
443.             connection = connections[db]
444.             if not (
445.                 connection.features.supports_comments
446.                 or "supports_comments" in self.model._meta.required_db_features
447.             ):
448.                 errors.append(
449.                     checks.Warning(
450.                         f"{connection.display_name} does not support comments on "
451.                         f"columns (db_comment).",
452.                         obj=self,
453.                         id="fields.W163",
454.                     )
455.                 )
456.         return errors
457. 
458.     def _check_null_allowed_for_primary_keys(self):
459.         if (
460.             self.primary_key
461.             and self.null
462.             and not connection.features.interprets_empty_strings_as_nulls
463.         ):
464.             # We cannot reliably check this for backends like Oracle which
465.             # consider NULL and '' to be equal (and thus set up
466.             # character-based fields a little differently).
467.             return [
468.                 checks.Error(
469.                     "Primary keys must not have null=True.",
470.                     hint=(
471.                         "Set null=False on the field, or "
472.                         "remove primary_key=True argument."
473.                     ),
474.                     obj=self,
475.                     id="fields.E007",
476.                 )
477.             ]
478.         else:
479.             return []
480. 
481.     def _check_backend_specific_checks(self, databases=None, **kwargs):
482.         if databases is None:
483.             return []
484.         errors = []
485.         for alias in databases:
486.             if router.allow_migrate_model(alias, self.model):
487.                 errors.extend(connections[alias].validation.check_field(self, **kwargs))
488.         return errors
489. 
490.     def _check_validators(self):
491.         errors = []
492.         for i, validator in enumerate(self.validators):
493.             if not callable(validator):
494.                 errors.append(
495.                     checks.Error(
496.                         "All 'validators' must be callable.",
497.                         hint=(
498.                             "validators[{i}] ({repr}) isn't a function or "
499.                             "instance of a validator class.".format(
500.                                 i=i,
501.                                 repr=repr(validator),
502.                             )
503.                         ),
504.                         obj=self,
505.                         id="fields.E008",
506.                     )
507.                 )
508.         return errors
509. 
510.     def _check_deprecation_details(self):
511.         if self.system_check_removed_details is not None:
512.             return [
513.                 checks.Error(
514.                     self.system_check_removed_details.get(
515.                         "msg",
516.                         "%s has been removed except for support in historical "
517.                         "migrations." % self.__class__.__name__,
518.                     ),
519.                     hint=self.system_check_removed_details.get("hint"),
520.                     obj=self,
521.                     id=self.system_check_removed_details.get("id", "fields.EXXX"),
522.                 )
523.             ]
524.         elif self.system_check_deprecated_details is not None:
525.             return [
526.                 checks.Warning(
527.                     self.system_check_deprecated_details.get(
528.                         "msg", "%s has been deprecated." % self.__class__.__name__
529.                     ),
530.                     hint=self.system_check_deprecated_details.get("hint"),
531.                     obj=self,
532.                     id=self.system_check_deprecated_details.get("id", "fields.WXXX"),
533.                 )
534.             ]
535.         return []
536. 
537.     def get_col(self, alias, output_field=None):
538.         if alias == self.model._meta.db_table and (
539.             output_field is None or output_field == self
540.         ):
541.             return self.cached_col
542.         from django.db.models.expressions import Col
543. 
544.         return Col(alias, self, output_field)
545. 
546.     @cached_property
547.     def cached_col(self):
548.         from django.db.models.expressions import Col
549. 
550.         return Col(self.model._meta.db_table, self)
551. 
552.     def select_format(self, compiler, sql, params):
553.         """
554.         Custom format for select clauses. For example, GIS columns need to be
555.         selected as AsText(table.col) on MySQL as the table.col data can't be
556.         used by Django.
557.         """
558.         return sql, params
559. 
560.     def deconstruct(self):
561.         """
562.         Return enough information to recreate the field as a 4-tuple:
563. 
564.          * The name of the field on the model, if contribute_to_class() has
565.            been run.
566.          * The import path of the field, including the class, e.g.
567.            django.db.models.IntegerField. This should be the most portable
568.            version, so less specific may be better.
569.          * A list of positional arguments.
570.          * A dict of keyword arguments.
571. 
572.         Note that the positional or keyword arguments must contain values of
573.         the following types (including inner values of collection types):
574. 
575.          * None, bool, str, int, float, complex, set, frozenset, list, tuple,
576.            dict
577.          * UUID
578.          * datetime.datetime (naive), datetime.date
579.          * top-level classes, top-level functions - will be referenced by their
580.            full import path
581.          * Storage instances - these have their own deconstruct() method
582. 
583.         This is because the values here must be serialized into a text format
584.         (possibly new Python code, possibly JSON) and these are the only types
585.         with encoding handlers defined.
586. 
587.         There's no need to return the exact way the field was instantiated this
588.         time, just ensure that the resulting field is the same - prefer keyword
589.         arguments over positional ones, and omit parameters with their default
590.         values.
591.         """
592.         # Short-form way of fetching all the default parameters
593.         keywords = {}
594.         possibles = {
595.             "verbose_name": None,
596.             "primary_key": False,
597.             "max_length": None,
598.             "unique": False,
599.             "blank": False,
600.             "null": False,
601.             "db_index": False,
602.             "default": NOT_PROVIDED,
603.             "db_default": NOT_PROVIDED,
604.             "editable": True,
605.             "serialize": True,
606.             "unique_for_date": None,
607.             "unique_for_month": None,
608.             "unique_for_year": None,
609.             "choices": None,
610.             "help_text": "",
611.             "db_column": None,
612.             "db_comment": None,
613.             "db_tablespace": None,
614.             "auto_created": False,
615.             "validators": [],
616.             "error_messages": None,
617.         }
618.         attr_overrides = {
619.             "unique": "_unique",
620.             "error_messages": "_error_messages",
621.             "validators": "_validators",
622.             "verbose_name": "_verbose_name",
623.             "db_tablespace": "_db_tablespace",
624.         }
625.         equals_comparison = {"choices", "validators"}
626.         for name, default in possibles.items():
627.             value = getattr(self, attr_overrides.get(name, name))
628.             # Unroll anything iterable for choices into a concrete list
629.             if name == "choices" and isinstance(value, collections.abc.Iterable):
630.                 value = list(value)
631.             # Do correct kind of comparison
632.             if name in equals_comparison:
633.                 if value != default:
634.                     keywords[name] = value
635.             else:
636.                 if value is not default:
637.                     keywords[name] = value
638.         # Work out path - we shorten it for known Django core fields
639.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
640.         if path.startswith("django.db.models.fields.related"):
641.             path = path.replace("django.db.models.fields.related", "django.db.models")
642.         elif path.startswith("django.db.models.fields.files"):
643.             path = path.replace("django.db.models.fields.files", "django.db.models")
644.         elif path.startswith("django.db.models.fields.json"):
645.             path = path.replace("django.db.models.fields.json", "django.db.models")
646.         elif path.startswith("django.db.models.fields.proxy"):
647.             path = path.replace("django.db.models.fields.proxy", "django.db.models")
648.         elif path.startswith("django.db.models.fields"):
649.             path = path.replace("django.db.models.fields", "django.db.models")
650.         # Return basic info - other fields should override this.
651.         return (self.name, path, [], keywords)
652. 
653.     def clone(self):
654.         """
655.         Uses deconstruct() to clone a new copy of this Field.
656.         Will not preserve any class attachments/attribute names.
657.         """
658.         name, path, args, kwargs = self.deconstruct()
659.         return self.__class__(*args, **kwargs)
660. 
661.     def __eq__(self, other):
662.         # Needed for @total_ordering
663.         if isinstance(other, Field):
664.             return self.creation_counter == other.creation_counter and getattr(
665.                 self, "model", None
666.             ) == getattr(other, "model", None)
667.         return NotImplemented
668. 
669.     def __lt__(self, other):
670.         # This is needed because bisect does not take a comparison function.
671.         # Order by creation_counter first for backward compatibility.
672.         if isinstance(other, Field):
673.             if (
674.                 self.creation_counter != other.creation_counter
675.                 or not hasattr(self, "model")
676.                 and not hasattr(other, "model")
677.             ):
678.                 return self.creation_counter < other.creation_counter
679.             elif hasattr(self, "model") != hasattr(other, "model"):
680.                 return not hasattr(self, "model")  # Order no-model fields first
681.             else:
682.                 # creation_counter's are equal, compare only models.
683.                 return (self.model._meta.app_label, self.model._meta.model_name) < (
684.                     other.model._meta.app_label,
685.                     other.model._meta.model_name,
686.                 )
687.         return NotImplemented
688. 
689.     def __hash__(self):
690.         return hash(self.creation_counter)
691. 
692.     def __deepcopy__(self, memodict):
693.         # We don't have to deepcopy very much here, since most things are not
694.         # intended to be altered after initial creation.
695.         obj = copy.copy(self)
696.         if self.remote_field:
697.             obj.remote_field = copy.copy(self.remote_field)
698.             if hasattr(self.remote_field, "field") and self.remote_field.field is self:
699.                 obj.remote_field.field = obj
700.         memodict[id(self)] = obj
701.         return obj
702. 
703.     def __copy__(self):
704.         # We need to avoid hitting __reduce__, so define this
705.         # slightly weird copy construct.
706.         obj = Empty()
707.         obj.__class__ = self.__class__
708.         obj.__dict__ = self.__dict__.copy()
709.         return obj
710. 
711.     def __reduce__(self):
712.         """
713.         Pickling should return the model._meta.fields instance of the field,
714.         not a new copy of that field. So, use the app registry to load the
715.         model and then the field back.
716.         """
717.         if not hasattr(self, "model"):
718.             # Fields are sometimes used without attaching them to models (for
719.             # example in aggregation). In this case give back a plain field
720.             # instance. The code below will create a new empty instance of
721.             # class self.__class__, then update its dict with self.__dict__
722.             # values - so, this is very close to normal pickle.
723.             state = self.__dict__.copy()
724.             # The _get_default cached_property can't be pickled due to lambda
725.             # usage.
726.             state.pop("_get_default", None)
727.             return _empty, (self.__class__,), state
728.         return _load_field, (
729.             self.model._meta.app_label,
730.             self.model._meta.object_name,
731.             self.name,
732.         )
733. 
734.     def get_pk_value_on_save(self, instance):
735.         """
736.         Hook to generate new PK values on save. This method is called when
737.         saving instances with no primary key value set. If this method returns
738.         something else than None, then the returned value is used when saving
739.         the new instance.
740.         """
741.         if self.default:
742.             return self.get_default()
743.         return None
744. 
745.     def to_python(self, value):
746.         """
747.         Convert the input value into the expected Python data type, raising
748.         django.core.exceptions.ValidationError if the data can't be converted.
749.         Return the converted value. Subclasses should override this.
750.         """
751.         return value
752. 
753.     @cached_property
754.     def error_messages(self):
755.         messages = {}
756.         for c in reversed(self.__class__.__mro__):
757.             messages.update(getattr(c, "default_error_messages", {}))
758.         messages.update(self._error_messages or {})
759.         return messages
760. 
761.     @cached_property
762.     def validators(self):
763.         """
764.         Some validators can't be created at field initialization time.
765.         This method provides a way to delay their creation until required.
766.         """
767.         return [*self.default_validators, *self._validators]
768. 
769.     def run_validators(self, value):
770.         if value in self.empty_values:
771.             return
772. 
773.         errors = []
774.         for v in self.validators:
775.             try:
776.                 v(value)
777.             except exceptions.ValidationError as e:
778.                 if hasattr(e, "code") and e.code in self.error_messages:
779.                     e.message = self.error_messages[e.code]
780.                 errors.extend(e.error_list)
781. 
782.         if errors:
783.             raise exceptions.ValidationError(errors)
784. 
785.     def validate(self, value, model_instance):
786.         """
787.         Validate value and raise ValidationError if necessary. Subclasses
788.         should override this to provide validation logic.
789.         """
790.         if not self.editable:
791.             # Skip validation for non-editable fields.
792.             return
793. 
794.         if self.choices is not None and value not in self.empty_values:
795.             for option_key, option_value in self.choices:
796.                 if isinstance(option_value, (list, tuple)):
797.                     # This is an optgroup, so look inside the group for
798.                     # options.
799.                     for optgroup_key, optgroup_value in option_value:
800.                         if value == optgroup_key:
801.                             return
802.                 elif value == option_key:
803.                     return
804.             raise exceptions.ValidationError(
805.                 self.error_messages["invalid_choice"],
806.                 code="invalid_choice",
807.                 params={"value": value},
808.             )
809. 
810.         if value is None and not self.null:
811.             raise exceptions.ValidationError(self.error_messages["null"], code="null")
812. 
813.         if not self.blank and value in self.empty_values:
814.             raise exceptions.ValidationError(self.error_messages["blank"], code="blank")
815. 
816.     def clean(self, value, model_instance):
817.         """
818.         Convert the value's type and run validation. Validation errors
819.         from to_python() and validate() are propagated. Return the correct
820.         value if no error is raised.
821.         """
822.         value = self.to_python(value)
823.         self.validate(value, model_instance)
824.         self.run_validators(value)
825.         return value
826. 
827.     def db_type_parameters(self, connection):
828.         return DictWrapper(self.__dict__, connection.ops.quote_name, "qn_")
829. 
830.     def db_check(self, connection):
831.         """
832.         Return the database column check constraint for this field, for the
833.         provided connection. Works the same way as db_type() for the case that
834.         get_internal_type() does not map to a preexisting model field.
835.         """
836.         data = self.db_type_parameters(connection)
837.         try:
838.             return (
839.                 connection.data_type_check_constraints[self.get_internal_type()] % data
840.             )
841.         except KeyError:
842.             return None
843. 
844.     def db_type(self, connection):
845.         """
846.         Return the database column data type for this field, for the provided
847.         connection.
848.         """
849.         # The default implementation of this method looks at the
850.         # backend-specific data_types dictionary, looking up the field by its
851.         # "internal type".
852.         #
853.         # A Field class can implement the get_internal_type() method to specify
854.         # which *preexisting* Django Field class it's most similar to -- i.e.,
855.         # a custom field might be represented by a TEXT column type, which is
856.         # the same as the TextField Django field type, which means the custom
857.         # field's get_internal_type() returns 'TextField'.
858.         #
859.         # But the limitation of the get_internal_type() / data_types approach
860.         # is that it cannot handle database column types that aren't already
861.         # mapped to one of the built-in Django field types. In this case, you
862.         # can implement db_type() instead of get_internal_type() to specify
863.         # exactly which wacky database column type you want to use.
864.         data = self.db_type_parameters(connection)
865.         try:
866.             column_type = connection.data_types[self.get_internal_type()]
867.         except KeyError:
868.             return None
869.         else:
870.             # column_type is either a single-parameter function or a string.
871.             if callable(column_type):
872.                 return column_type(data)
873.             return column_type % data
874. 
875.     def rel_db_type(self, connection):
876.         """
877.         Return the data type that a related field pointing to this field should
878.         use. For example, this method is called by ForeignKey and OneToOneField
879.         to determine its data type.
880.         """
881.         return self.db_type(connection)
882. 
883.     def cast_db_type(self, connection):
884.         """Return the data type to use in the Cast() function."""
885.         db_type = connection.ops.cast_data_types.get(self.get_internal_type())
886.         if db_type:
887.             return db_type % self.db_type_parameters(connection)
888.         return self.db_type(connection)
889. 
890.     def db_parameters(self, connection):
891.         """
892.         Extension of db_type(), providing a range of different return values
893.         (type, checks). This will look at db_type(), allowing custom model
894.         fields to override it.
895.         """
896.         type_string = self.db_type(connection)
897.         check_string = self.db_check(connection)
898.         return {
899.             "type": type_string,
900.             "check": check_string,
901.         }
902. 
903.     def db_type_suffix(self, connection):
904.         return connection.data_types_suffix.get(self.get_internal_type())
905. 
906.     def get_db_converters(self, connection):
907.         if hasattr(self, "from_db_value"):
908.             return [self.from_db_value]
909.         return []
910. 
911.     @property
912.     def unique(self):
913.         return self._unique or self.primary_key
914. 
915.     @property
916.     def db_tablespace(self):
917.         return self._db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
918. 
919.     @property
920.     def db_returning(self):
921.         """Private API intended only to be used by Django itself."""
922.         return (
923.             self.db_default is not NOT_PROVIDED
924.             and connection.features.can_return_columns_from_insert
925.         )
926. 
927.     def set_attributes_from_name(self, name):
928.         self.name = self.name or name
929.         self.attname, self.column = self.get_attname_column()
930.         self.concrete = self.column is not None
931.         if self.verbose_name is None and self.name:
932.             self.verbose_name = self.name.replace("_", " ")
933. 
934.     def contribute_to_class(self, cls, name, private_only=False):
935.         """
936.         Register the field with the model class it belongs to.
937. 
938.         If private_only is True, create a separate instance of this field
939.         for every subclass of cls, even if cls is not an abstract model.
940.         """
941.         self.set_attributes_from_name(name)
942.         self.model = cls
943.         cls._meta.add_field(self, private=private_only)
944.         if self.column:
945.             setattr(cls, self.attname, self.descriptor_class(self))
946.         if self.choices is not None:
947.             # Don't override a get_FOO_display() method defined explicitly on
948.             # this class, but don't check methods derived from inheritance, to
949.             # allow overriding inherited choices. For more complex inheritance
950.             # structures users should override contribute_to_class().
951.             if "get_%s_display" % self.name not in cls.__dict__:
952.                 setattr(
953.                     cls,
954.                     "get_%s_display" % self.name,
955.                     partialmethod(cls._get_FIELD_display, field=self),
956.                 )
957. 
958.     def get_filter_kwargs_for_object(self, obj):
959.         """
960.         Return a dict that when passed as kwargs to self.model.filter(), would
961.         yield all instances having the same value for this field as obj has.
962.         """
963.         return {self.name: getattr(obj, self.attname)}
964. 
965.     def get_attname(self):
966.         return self.name
967. 
968.     def get_attname_column(self):
969.         attname = self.get_attname()
970.         column = self.db_column or attname
971.         return attname, column
972. 
973.     def get_internal_type(self):
974.         return self.__class__.__name__
975. 
976.     def pre_save(self, model_instance, add):
977.         """Return field's value just before saving."""
978.         value = getattr(model_instance, self.attname)
979.         if not connection.features.supports_default_keyword_in_insert:
980.             from django.db.models.expressions import DatabaseDefault
981. 
982.             if isinstance(value, DatabaseDefault):
983.                 return self.db_default
984.         return value
985. 
986.     def get_prep_value(self, value):
987.         """Perform preliminary non-db specific value checks and conversions."""
988.         if isinstance(value, Promise):
989.             value = value._proxy____cast()
990.         return value
991. 
992.     def get_db_prep_value(self, value, connection, prepared=False):
993.         """
994.         Return field's value prepared for interacting with the database backend.
995. 
996.         Used by the default implementations of get_db_prep_save().
997.         """
998.         if not prepared:
999.             value = self.get_prep_value(value)
1000.         return value
1001. 
1002.     def get_db_prep_save(self, value, connection):
1003.         """Return field's value prepared for saving into a database."""
1004.         if hasattr(value, "as_sql"):
1005.             return value
1006.         return self.get_db_prep_value(value, connection=connection, prepared=False)
1007. 
1008.     def has_default(self):
1009.         """Return a boolean of whether this field has a default value."""
1010.         return self.default is not NOT_PROVIDED
1011. 
1012.     def get_default(self):
1013.         """Return the default value for this field."""
1014.         return self._get_default()
1015. 
1016.     @cached_property
1017.     def _get_default(self):
1018.         if self.has_default():
1019.             if callable(self.default):
1020.                 return self.default
1021.             return lambda: self.default
1022. 
1023.         if self.db_default is not NOT_PROVIDED:
1024.             from django.db.models.expressions import DatabaseDefault
1025. 
1026.             return DatabaseDefault
1027. 
1028.         if (
1029.             not self.empty_strings_allowed
1030.             or self.null
1031.             and not connection.features.interprets_empty_strings_as_nulls
1032.         ):
1033.             return return_None
1034.         return str  # return empty string
1035. 
1036.     def get_choices(
1037.         self,
1038.         include_blank=True,
1039.         blank_choice=BLANK_CHOICE_DASH,
1040.         limit_choices_to=None,
1041.         ordering=(),
1042.     ):
1043.         """
1044.         Return choices with a default blank choices included, for use
1045.         as <select> choices for this field.
1046.         """
1047.         if self.choices is not None:
1048.             choices = list(self.choices)
1049.             if include_blank:
1050.                 blank_defined = any(
1051.                     choice in ("", None) for choice, _ in self.flatchoices
1052.                 )
1053.                 if not blank_defined:
1054.                     choices = blank_choice + choices
1055.             return choices
1056.         rel_model = self.remote_field.model
1057.         limit_choices_to = limit_choices_to or self.get_limit_choices_to()
1058.         choice_func = operator.attrgetter(
1059.             self.remote_field.get_related_field().attname
1060.             if hasattr(self.remote_field, "get_related_field")
1061.             else "pk"
1062.         )
1063.         qs = rel_model._default_manager.complex_filter(limit_choices_to)
1064.         if ordering:
1065.             qs = qs.order_by(*ordering)
1066.         return (blank_choice if include_blank else []) + [
1067.             (choice_func(x), str(x)) for x in qs
1068.         ]
1069. 
1070.     def value_to_string(self, obj):
1071.         """
1072.         Return a string value of this field from the passed obj.
1073.         This is used by the serialization framework.
1074.         """
1075.         return str(self.value_from_object(obj))
1076. 
1077.     def _get_flatchoices(self):
1078.         """Flattened version of choices tuple."""
1079.         if self.choices is None:
1080.             return []
1081.         flat = []
1082.         for choice, value in self.choices:
1083.             if isinstance(value, (list, tuple)):
1084.                 flat.extend(value)
1085.             else:
1086.                 flat.append((choice, value))
1087.         return flat
1088. 
1089.     flatchoices = property(_get_flatchoices)
1090. 
1091.     def save_form_data(self, instance, data):
1092.         setattr(instance, self.name, data)
1093. 
1094.     def formfield(self, form_class=None, choices_form_class=None, **kwargs):
1095.         """Return a django.forms.Field instance for this field."""
1096.         defaults = {
1097.             "required": not self.blank,
1098.             "label": capfirst(self.verbose_name),
1099.             "help_text": self.help_text,
1100.         }
1101.         if self.has_default():
1102.             if callable(self.default):
1103.                 defaults["initial"] = self.default
1104.                 defaults["show_hidden_initial"] = True
1105.             else:
1106.                 defaults["initial"] = self.get_default()
1107.         if self.choices is not None:
1108.             # Fields with choices get special treatment.
1109.             include_blank = self.blank or not (
1110.                 self.has_default() or "initial" in kwargs
1111.             )
1112.             defaults["choices"] = self.get_choices(include_blank=include_blank)
1113.             defaults["coerce"] = self.to_python
1114.             if self.null:
1115.                 defaults["empty_value"] = None
1116.             if choices_form_class is not None:
1117.                 form_class = choices_form_class
1118.             else:
1119.                 form_class = forms.TypedChoiceField
1120.             # Many of the subclass-specific formfield arguments (min_value,
1121.             # max_value) don't apply for choice fields, so be sure to only pass
1122.             # the values that TypedChoiceField will understand.
1123.             for k in list(kwargs):
1124.                 if k not in (
1125.                     "coerce",
1126.                     "empty_value",
1127.                     "choices",
1128.                     "required",
1129.                     "widget",
1130.                     "label",
1131.                     "initial",
1132.                     "help_text",
1133.                     "error_messages",
1134.                     "show_hidden_initial",
1135.                     "disabled",
1136.                 ):
1137.                     del kwargs[k]
1138.         defaults.update(kwargs)
1139.         if form_class is None:
1140.             form_class = forms.CharField
1141.         return form_class(**defaults)
1142. 
1143.     def value_from_object(self, obj):
1144.         """Return the value of this field in the given model instance."""
1145.         return getattr(obj, self.attname)
1146. 
1147. 
1148. class BooleanField(Field):
1149.     empty_strings_allowed = False
1150.     default_error_messages = {
1151.         "invalid": _("“%(value)s” value must be either True or False."),
1152.         "invalid_nullable": _("“%(value)s” value must be either True, False, or None."),
1153.     }
1154.     description = _("Boolean (Either True or False)")
1155. 
1156.     def get_internal_type(self):
1157.         return "BooleanField"
1158. 
1159.     def to_python(self, value):
1160.         if self.null and value in self.empty_values:
1161.             return None
1162.         if value in (True, False):
1163.             # 1/0 are equal to True/False. bool() converts former to latter.
1164.             return bool(value)
1165.         if value in ("t", "True", "1"):
1166.             return True
1167.         if value in ("f", "False", "0"):
1168.             return False
1169.         raise exceptions.ValidationError(
1170.             self.error_messages["invalid_nullable" if self.null else "invalid"],
1171.             code="invalid",
1172.             params={"value": value},
1173.         )
1174. 
1175.     def get_prep_value(self, value):
1176.         value = super().get_prep_value(value)
1177.         if value is None:
1178.             return None
1179.         return self.to_python(value)
1180. 
1181.     def formfield(self, **kwargs):
1182.         if self.choices is not None:
1183.             include_blank = not (self.has_default() or "initial" in kwargs)
1184.             defaults = {"choices": self.get_choices(include_blank=include_blank)}
1185.         else:
1186.             form_class = forms.NullBooleanField if self.null else forms.BooleanField
1187.             # In HTML checkboxes, 'required' means "must be checked" which is
1188.             # different from the choices case ("must select some value").
1189.             # required=False allows unchecked checkboxes.
1190.             defaults = {"form_class": form_class, "required": False}
1191.         return super().formfield(**{**defaults, **kwargs})
1192. 
1193. 
1194. class CharField(Field):
1195.     def __init__(self, *args, db_collation=None, **kwargs):
1196.         super().__init__(*args, **kwargs)
1197.         self.db_collation = db_collation
1198.         if self.max_length is not None:
1199.             self.validators.append(validators.MaxLengthValidator(self.max_length))
1200. 
1201.     @property
1202.     def description(self):
1203.         if self.max_length is not None:
1204.             return _("String (up to %(max_length)s)")
1205.         else:
1206.             return _("String (unlimited)")
1207. 
1208.     def check(self, **kwargs):
1209.         databases = kwargs.get("databases") or []
1210.         return [
1211.             *super().check(**kwargs),
1212.             *self._check_db_collation(databases),
1213.             *self._check_max_length_attribute(**kwargs),
1214.         ]
1215. 
1216.     def _check_max_length_attribute(self, **kwargs):
1217.         if self.max_length is None:
1218.             if (
1219.                 connection.features.supports_unlimited_charfield
1220.                 or "supports_unlimited_charfield"
1221.                 in self.model._meta.required_db_features
1222.             ):
1223.                 return []
1224.             return [
1225.                 checks.Error(
1226.                     "CharFields must define a 'max_length' attribute.",
1227.                     obj=self,
1228.                     id="fields.E120",
1229.                 )
1230.             ]
1231.         elif (
1232.             not isinstance(self.max_length, int)
1233.             or isinstance(self.max_length, bool)
1234.             or self.max_length <= 0
1235.         ):
1236.             return [
1237.                 checks.Error(
1238.                     "'max_length' must be a positive integer.",
1239.                     obj=self,
1240.                     id="fields.E121",
1241.                 )
1242.             ]
1243.         else:
1244.             return []
1245. 
1246.     def _check_db_collation(self, databases):
1247.         errors = []
1248.         for db in databases:
1249.             if not router.allow_migrate_model(db, self.model):
1250.                 continue
1251.             connection = connections[db]
1252.             if not (
1253.                 self.db_collation is None
1254.                 or "supports_collation_on_charfield"
1255.                 in self.model._meta.required_db_features
1256.                 or connection.features.supports_collation_on_charfield
1257.             ):
1258.                 errors.append(
1259.                     checks.Error(
1260.                         "%s does not support a database collation on "
1261.                         "CharFields." % connection.display_name,
1262.                         obj=self,
1263.                         id="fields.E190",
1264.                     ),
1265.                 )
1266.         return errors
1267. 
1268.     def cast_db_type(self, connection):
1269.         if self.max_length is None:
1270.             return connection.ops.cast_char_field_without_max_length
1271.         return super().cast_db_type(connection)
1272. 
1273.     def db_parameters(self, connection):
1274.         db_params = super().db_parameters(connection)
1275.         db_params["collation"] = self.db_collation
1276.         return db_params
1277. 
1278.     def get_internal_type(self):
1279.         return "CharField"
1280. 
1281.     def to_python(self, value):
1282.         if isinstance(value, str) or value is None:
1283.             return value
1284.         return str(value)
1285. 
1286.     def get_prep_value(self, value):
1287.         value = super().get_prep_value(value)
1288.         return self.to_python(value)
1289. 
1290.     def formfield(self, **kwargs):
1291.         # Passing max_length to forms.CharField means that the value's length
1292.         # will be validated twice. This is considered acceptable since we want
1293.         # the value in the form field (to pass into widget for example).
1294.         defaults = {"max_length": self.max_length}
1295.         # TODO: Handle multiple backends with different feature flags.
1296.         if self.null and not connection.features.interprets_empty_strings_as_nulls:
1297.             defaults["empty_value"] = None
1298.         defaults.update(kwargs)
1299.         return super().formfield(**defaults)
1300. 
1301.     def deconstruct(self):
1302.         name, path, args, kwargs = super().deconstruct()
1303.         if self.db_collation:
1304.             kwargs["db_collation"] = self.db_collation
1305.         return name, path, args, kwargs
1306. 
1307. 
1308. class CommaSeparatedIntegerField(CharField):
1309.     default_validators = [validators.validate_comma_separated_integer_list]
1310.     description = _("Comma-separated integers")
1311.     system_check_removed_details = {
1312.         "msg": (
1313.             "CommaSeparatedIntegerField is removed except for support in "
1314.             "historical migrations."
1315.         ),
1316.         "hint": (
1317.             "Use CharField(validators=[validate_comma_separated_integer_list]) "
1318.             "instead."
1319.         ),
1320.         "id": "fields.E901",
1321.     }
1322. 
1323. 
1324. def _to_naive(value):
1325.     if timezone.is_aware(value):
1326.         value = timezone.make_naive(value, datetime.timezone.utc)
1327.     return value
1328. 
1329. 
1330. def _get_naive_now():
1331.     return _to_naive(timezone.now())
1332. 
1333. 
1334. class DateTimeCheckMixin:
1335.     def check(self, **kwargs):
1336.         return [
1337.             *super().check(**kwargs),
1338.             *self._check_mutually_exclusive_options(),
1339.             *self._check_fix_default_value(),
1340.         ]
1341. 
1342.     def _check_mutually_exclusive_options(self):
1343.         # auto_now, auto_now_add, and default are mutually exclusive
1344.         # options. The use of more than one of these options together
1345.         # will trigger an Error
1346.         mutually_exclusive_options = [
1347.             self.auto_now_add,
1348.             self.auto_now,
1349.             self.has_default(),
1350.         ]
1351.         enabled_options = [
1352.             option not in (None, False) for option in mutually_exclusive_options
1353.         ].count(True)
1354.         if enabled_options > 1:
1355.             return [
1356.                 checks.Error(
1357.                     "The options auto_now, auto_now_add, and default "
1358.                     "are mutually exclusive. Only one of these options "
1359.                     "may be present.",
1360.                     obj=self,
1361.                     id="fields.E160",
1362.                 )
1363.             ]
1364.         else:
1365.             return []
1366. 
1367.     def _check_fix_default_value(self):
1368.         return []
1369. 
1370.     # Concrete subclasses use this in their implementations of
1371.     # _check_fix_default_value().
1372.     def _check_if_value_fixed(self, value, now=None):
1373.         """
1374.         Check if the given value appears to have been provided as a "fixed"
1375.         time value, and include a warning in the returned list if it does. The
1376.         value argument must be a date object or aware/naive datetime object. If
1377.         now is provided, it must be a naive datetime object.
1378.         """
1379.         if now is None:
1380.             now = _get_naive_now()
1381.         offset = datetime.timedelta(seconds=10)
1382.         lower = now - offset
1383.         upper = now + offset
1384.         if isinstance(value, datetime.datetime):
1385.             value = _to_naive(value)
1386.         else:
1387.             assert isinstance(value, datetime.date)
1388.             lower = lower.date()
1389.             upper = upper.date()
1390.         if lower <= value <= upper:
1391.             return [
1392.                 checks.Warning(
1393.                     "Fixed default value provided.",
1394.                     hint=(
1395.                         "It seems you set a fixed date / time / datetime "
1396.                         "value as default for this field. This may not be "
1397.                         "what you want. If you want to have the current date "
1398.                         "as default, use `django.utils.timezone.now`"
1399.                     ),
1400.                     obj=self,
1401.                     id="fields.W161",
1402.                 )
1403.             ]
1404.         return []
1405. 
1406. 
1407. class DateField(DateTimeCheckMixin, Field):
1408.     empty_strings_allowed = False
1409.     default_error_messages = {
1410.         "invalid": _(
1411.             "“%(value)s” value has an invalid date format. It must be "
1412.             "in YYYY-MM-DD format."
1413.         ),
1414.         "invalid_date": _(
1415.             "“%(value)s” value has the correct format (YYYY-MM-DD) "
1416.             "but it is an invalid date."
1417.         ),
1418.     }
1419.     description = _("Date (without time)")
1420. 
1421.     def __init__(
1422.         self, verbose_name=None, name=None, auto_now=False, auto_now_add=False, **kwargs
1423.     ):
1424.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
1425.         if auto_now or auto_now_add:
1426.             kwargs["editable"] = False
1427.             kwargs["blank"] = True
1428.         super().__init__(verbose_name, name, **kwargs)
1429. 
1430.     def _check_fix_default_value(self):
1431.         """
1432.         Warn that using an actual date or datetime value is probably wrong;
1433.         it's only evaluated on server startup.
1434.         """
1435.         if not self.has_default():
1436.             return []
1437. 
1438.         value = self.default
1439.         if isinstance(value, datetime.datetime):
1440.             value = _to_naive(value).date()
1441.         elif isinstance(value, datetime.date):
1442.             pass
1443.         else:
1444.             # No explicit date / datetime value -- no checks necessary
1445.             return []
1446.         # At this point, value is a date object.
1447.         return self._check_if_value_fixed(value)
1448. 
1449.     def deconstruct(self):
1450.         name, path, args, kwargs = super().deconstruct()
1451.         if self.auto_now:
1452.             kwargs["auto_now"] = True
1453.         if self.auto_now_add:
1454.             kwargs["auto_now_add"] = True
1455.         if self.auto_now or self.auto_now_add:
1456.             del kwargs["editable"]
1457.             del kwargs["blank"]
1458.         return name, path, args, kwargs
1459. 
1460.     def get_internal_type(self):
1461.         return "DateField"
1462. 
1463.     def to_python(self, value):
1464.         if value is None:
1465.             return value
1466.         if isinstance(value, datetime.datetime):
1467.             if settings.USE_TZ and timezone.is_aware(value):
1468.                 # Convert aware datetimes to the default time zone
1469.                 # before casting them to dates (#17742).
1470.                 default_timezone = timezone.get_default_timezone()
1471.                 value = timezone.make_naive(value, default_timezone)
1472.             return value.date()
1473.         if isinstance(value, datetime.date):
1474.             return value
1475. 
1476.         try:
1477.             parsed = parse_date(value)
1478.             if parsed is not None:
1479.                 return parsed
1480.         except ValueError:
1481.             raise exceptions.ValidationError(
1482.                 self.error_messages["invalid_date"],
1483.                 code="invalid_date",
1484.                 params={"value": value},
1485.             )
1486. 
1487.         raise exceptions.ValidationError(
1488.             self.error_messages["invalid"],
1489.             code="invalid",
1490.             params={"value": value},
1491.         )
1492. 
1493.     def pre_save(self, model_instance, add):
1494.         if self.auto_now or (self.auto_now_add and add):
1495.             value = datetime.date.today()
1496.             setattr(model_instance, self.attname, value)
1497.             return value
1498.         else:
1499.             return super().pre_save(model_instance, add)
1500. 
1501.     def contribute_to_class(self, cls, name, **kwargs):
1502.         super().contribute_to_class(cls, name, **kwargs)
1503.         if not self.null:
1504.             setattr(
1505.                 cls,
1506.                 "get_next_by_%s" % self.name,
1507.                 partialmethod(
1508.                     cls._get_next_or_previous_by_FIELD, field=self, is_next=True
1509.                 ),
1510.             )
1511.             setattr(
1512.                 cls,
1513.                 "get_previous_by_%s" % self.name,
1514.                 partialmethod(
1515.                     cls._get_next_or_previous_by_FIELD, field=self, is_next=False
1516.                 ),
1517.             )
1518. 
1519.     def get_prep_value(self, value):
1520.         value = super().get_prep_value(value)
1521.         return self.to_python(value)
1522. 
1523.     def get_db_prep_value(self, value, connection, prepared=False):
1524.         # Casts dates into the format expected by the backend
1525.         if not prepared:
1526.             value = self.get_prep_value(value)
1527.         return connection.ops.adapt_datefield_value(value)
1528. 
1529.     def value_to_string(self, obj):
1530.         val = self.value_from_object(obj)
1531.         return "" if val is None else val.isoformat()
1532. 
1533.     def formfield(self, **kwargs):
1534.         return super().formfield(
1535.             **{
1536.                 "form_class": forms.DateField,
1537.                 **kwargs,
1538.             }
1539.         )
1540. 
1541. 
1542. class DateTimeField(DateField):
1543.     empty_strings_allowed = False
1544.     default_error_messages = {
1545.         "invalid": _(
1546.             "“%(value)s” value has an invalid format. It must be in "
1547.             "YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format."
1548.         ),
1549.         "invalid_date": _(
1550.             "“%(value)s” value has the correct format "
1551.             "(YYYY-MM-DD) but it is an invalid date."
1552.         ),
1553.         "invalid_datetime": _(
1554.             "“%(value)s” value has the correct format "
1555.             "(YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]) "
1556.             "but it is an invalid date/time."
1557.         ),
1558.     }
1559.     description = _("Date (with time)")
1560. 
1561.     # __init__ is inherited from DateField
1562. 
1563.     def _check_fix_default_value(self):
1564.         """
1565.         Warn that using an actual date or datetime value is probably wrong;
1566.         it's only evaluated on server startup.
1567.         """
1568.         if not self.has_default():
1569.             return []
1570. 
1571.         value = self.default
1572.         if isinstance(value, (datetime.datetime, datetime.date)):
1573.             return self._check_if_value_fixed(value)
1574.         # No explicit date / datetime value -- no checks necessary.
1575.         return []
1576. 
1577.     def get_internal_type(self):
1578.         return "DateTimeField"
1579. 
1580.     def to_python(self, value):
1581.         if value is None:
1582.             return value
1583.         if isinstance(value, datetime.datetime):
1584.             return value
1585.         if isinstance(value, datetime.date):
1586.             value = datetime.datetime(value.year, value.month, value.day)
1587.             if settings.USE_TZ:
1588.                 # For backwards compatibility, interpret naive datetimes in
1589.                 # local time. This won't work during DST change, but we can't
1590.                 # do much about it, so we let the exceptions percolate up the
1591.                 # call stack.
1592.                 warnings.warn(
1593.                     "DateTimeField %s.%s received a naive datetime "
1594.                     "(%s) while time zone support is active."
1595.                     % (self.model.__name__, self.name, value),
1596.                     RuntimeWarning,
1597.                 )
1598.                 default_timezone = timezone.get_default_timezone()
1599.                 value = timezone.make_aware(value, default_timezone)
1600.             return value
1601. 
1602.         try:
1603.             parsed = parse_datetime(value)
1604.             if parsed is not None:
1605.                 return parsed
1606.         except ValueError:
1607.             raise exceptions.ValidationError(
1608.                 self.error_messages["invalid_datetime"],
1609.                 code="invalid_datetime",
1610.                 params={"value": value},
1611.             )
1612. 
1613.         try:
1614.             parsed = parse_date(value)
1615.             if parsed is not None:
1616.                 return datetime.datetime(parsed.year, parsed.month, parsed.day)
1617.         except ValueError:
1618.             raise exceptions.ValidationError(
1619.                 self.error_messages["invalid_date"],
1620.                 code="invalid_date",
1621.                 params={"value": value},
1622.             )
1623. 
1624.         raise exceptions.ValidationError(
1625.             self.error_messages["invalid"],
1626.             code="invalid",
1627.             params={"value": value},
1628.         )
1629. 
1630.     def pre_save(self, model_instance, add):
1631.         if self.auto_now or (self.auto_now_add and add):
1632.             value = timezone.now()
1633.             setattr(model_instance, self.attname, value)
1634.             return value
1635.         else:
1636.             return super().pre_save(model_instance, add)
1637. 
1638.     # contribute_to_class is inherited from DateField, it registers
1639.     # get_next_by_FOO and get_prev_by_FOO
1640. 
1641.     def get_prep_value(self, value):
1642.         value = super().get_prep_value(value)
1643.         value = self.to_python(value)
1644.         if value is not None and settings.USE_TZ and timezone.is_naive(value):
1645.             # For backwards compatibility, interpret naive datetimes in local
1646.             # time. This won't work during DST change, but we can't do much
1647.             # about it, so we let the exceptions percolate up the call stack.
1648.             try:
1649.                 name = "%s.%s" % (self.model.__name__, self.name)
1650.             except AttributeError:
1651.                 name = "(unbound)"
1652.             warnings.warn(
1653.                 "DateTimeField %s received a naive datetime (%s)"
1654.                 " while time zone support is active." % (name, value),
1655.                 RuntimeWarning,
1656.             )
1657.             default_timezone = timezone.get_default_timezone()
1658.             value = timezone.make_aware(value, default_timezone)
1659.         return value
1660. 
1661.     def get_db_prep_value(self, value, connection, prepared=False):
1662.         # Casts datetimes into the format expected by the backend
1663.         if not prepared:
1664.             value = self.get_prep_value(value)
1665.         return connection.ops.adapt_datetimefield_value(value)
1666. 
1667.     def value_to_string(self, obj):
1668.         val = self.value_from_object(obj)
1669.         return "" if val is None else val.isoformat()
1670. 
1671.     def formfield(self, **kwargs):
1672.         return super().formfield(
1673.             **{
1674.                 "form_class": forms.DateTimeField,
1675.                 **kwargs,
1676.             }
1677.         )
1678. 
1679. 
1680. class DecimalField(Field):
1681.     empty_strings_allowed = False
1682.     default_error_messages = {
1683.         "invalid": _("“%(value)s” value must be a decimal number."),
1684.     }
1685.     description = _("Decimal number")
1686. 
1687.     def __init__(
1688.         self,
1689.         verbose_name=None,
1690.         name=None,
1691.         max_digits=None,
1692.         decimal_places=None,
1693.         **kwargs,
1694.     ):
1695.         self.max_digits, self.decimal_places = max_digits, decimal_places
1696.         super().__init__(verbose_name, name, **kwargs)
1697. 
1698.     def check(self, **kwargs):
1699.         errors = super().check(**kwargs)
1700. 
1701.         digits_errors = [
1702.             *self._check_decimal_places(),
1703.             *self._check_max_digits(),
1704.         ]
1705.         if not digits_errors:
1706.             errors.extend(self._check_decimal_places_and_max_digits(**kwargs))
1707.         else:
1708.             errors.extend(digits_errors)
1709.         return errors
1710. 
1711.     def _check_decimal_places(self):
1712.         try:
1713.             decimal_places = int(self.decimal_places)
1714.             if decimal_places < 0:
1715.                 raise ValueError()
1716.         except TypeError:
1717.             return [
1718.                 checks.Error(
1719.                     "DecimalFields must define a 'decimal_places' attribute.",
1720.                     obj=self,
1721.                     id="fields.E130",
1722.                 )
1723.             ]
1724.         except ValueError:
1725.             return [
1726.                 checks.Error(
1727.                     "'decimal_places' must be a non-negative integer.",
1728.                     obj=self,
1729.                     id="fields.E131",
1730.                 )
1731.             ]
1732.         else:
1733.             return []
1734. 
1735.     def _check_max_digits(self):
1736.         try:
1737.             max_digits = int(self.max_digits)
1738.             if max_digits <= 0:
1739.                 raise ValueError()
1740.         except TypeError:
1741.             return [
1742.                 checks.Error(
1743.                     "DecimalFields must define a 'max_digits' attribute.",
1744.                     obj=self,
1745.                     id="fields.E132",
1746.                 )
1747.             ]
1748.         except ValueError:
1749.             return [
1750.                 checks.Error(
1751.                     "'max_digits' must be a positive integer.",
1752.                     obj=self,
1753.                     id="fields.E133",
1754.                 )
1755.             ]
1756.         else:
1757.             return []
1758. 
1759.     def _check_decimal_places_and_max_digits(self, **kwargs):
1760.         if int(self.decimal_places) > int(self.max_digits):
1761.             return [
1762.                 checks.Error(
1763.                     "'max_digits' must be greater or equal to 'decimal_places'.",
1764.                     obj=self,
1765.                     id="fields.E134",
1766.                 )
1767.             ]
1768.         return []
1769. 
1770.     @cached_property
1771.     def validators(self):
1772.         return super().validators + [
1773.             validators.DecimalValidator(self.max_digits, self.decimal_places)
1774.         ]
1775. 
1776.     @cached_property
1777.     def context(self):
1778.         return decimal.Context(prec=self.max_digits)
1779. 
1780.     def deconstruct(self):
1781.         name, path, args, kwargs = super().deconstruct()
1782.         if self.max_digits is not None:
1783.             kwargs["max_digits"] = self.max_digits
1784.         if self.decimal_places is not None:
1785.             kwargs["decimal_places"] = self.decimal_places
1786.         return name, path, args, kwargs
1787. 
1788.     def get_internal_type(self):
1789.         return "DecimalField"
1790. 
1791.     def to_python(self, value):
1792.         if value is None:
1793.             return value
1794.         try:
1795.             if isinstance(value, float):
1796.                 decimal_value = self.context.create_decimal_from_float(value)
1797.             else:
1798.                 decimal_value = decimal.Decimal(value)
1799.         except (decimal.InvalidOperation, TypeError, ValueError):
1800.             raise exceptions.ValidationError(
1801.                 self.error_messages["invalid"],
1802.                 code="invalid",
1803.                 params={"value": value},
1804.             )
1805.         if not decimal_value.is_finite():
1806.             raise exceptions.ValidationError(
1807.                 self.error_messages["invalid"],
1808.                 code="invalid",
1809.                 params={"value": value},
1810.             )
1811.         return decimal_value
1812. 
1813.     def get_db_prep_save(self, value, connection):
1814.         if hasattr(value, "as_sql"):
1815.             return value
1816.         return connection.ops.adapt_decimalfield_value(
1817.             self.to_python(value), self.max_digits, self.decimal_places
1818.         )
1819. 
1820.     def get_prep_value(self, value):
1821.         value = super().get_prep_value(value)
1822.         return self.to_python(value)
1823. 
1824.     def formfield(self, **kwargs):
1825.         return super().formfield(
1826.             **{
1827.                 "max_digits": self.max_digits,
1828.                 "decimal_places": self.decimal_places,
1829.                 "form_class": forms.DecimalField,
1830.                 **kwargs,
1831.             }
1832.         )
1833. 
1834. 
1835. class DurationField(Field):
1836.     """
1837.     Store timedelta objects.
1838. 
1839.     Use interval on PostgreSQL, INTERVAL DAY TO SECOND on Oracle, and bigint
1840.     of microseconds on other databases.
1841.     """
1842. 
1843.     empty_strings_allowed = False
1844.     default_error_messages = {
1845.         "invalid": _(
1846.             "“%(value)s” value has an invalid format. It must be in "
1847.             "[DD] [[HH:]MM:]ss[.uuuuuu] format."
1848.         )
1849.     }
1850.     description = _("Duration")
1851. 
1852.     def get_internal_type(self):
1853.         return "DurationField"
1854. 
1855.     def to_python(self, value):
1856.         if value is None:
1857.             return value
1858.         if isinstance(value, datetime.timedelta):
1859.             return value
1860.         try:
1861.             parsed = parse_duration(value)
1862.         except ValueError:
1863.             pass
1864.         else:
1865.             if parsed is not None:
1866.                 return parsed
1867. 
1868.         raise exceptions.ValidationError(
1869.             self.error_messages["invalid"],
1870.             code="invalid",
1871.             params={"value": value},
1872.         )
1873. 
1874.     def get_db_prep_value(self, value, connection, prepared=False):
1875.         if connection.features.has_native_duration_field:
1876.             return value
1877.         if value is None:
1878.             return None
1879.         return duration_microseconds(value)
1880. 
1881.     def get_db_converters(self, connection):
1882.         converters = []
1883.         if not connection.features.has_native_duration_field:
1884.             converters.append(connection.ops.convert_durationfield_value)
1885.         return converters + super().get_db_converters(connection)
1886. 
1887.     def value_to_string(self, obj):
1888.         val = self.value_from_object(obj)
1889.         return "" if val is None else duration_string(val)
1890. 
1891.     def formfield(self, **kwargs):
1892.         return super().formfield(
1893.             **{
1894.                 "form_class": forms.DurationField,
1895.                 **kwargs,
1896.             }
1897.         )
1898. 
1899. 
1900. class EmailField(CharField):
1901.     default_validators = [validators.validate_email]
1902.     description = _("Email address")
1903. 
1904.     def __init__(self, *args, **kwargs):
1905.         # max_length=254 to be compliant with RFCs 3696 and 5321
1906.         kwargs.setdefault("max_length", 254)
1907.         super().__init__(*args, **kwargs)
1908. 
1909.     def deconstruct(self):
1910.         name, path, args, kwargs = super().deconstruct()
1911.         # We do not exclude max_length if it matches default as we want to change
1912.         # the default in future.
1913.         return name, path, args, kwargs
1914. 
1915.     def formfield(self, **kwargs):
1916.         # As with CharField, this will cause email validation to be performed
1917.         # twice.
1918.         return super().formfield(
1919.             **{
1920.                 "form_class": forms.EmailField,
1921.                 **kwargs,
1922.             }
1923.         )
1924. 
1925. 
1926. class FilePathField(Field):
1927.     description = _("File path")
1928. 
1929.     def __init__(
1930.         self,
1931.         verbose_name=None,
1932.         name=None,
1933.         path="",
1934.         match=None,
1935.         recursive=False,
1936.         allow_files=True,
1937.         allow_folders=False,
1938.         **kwargs,
1939.     ):
1940.         self.path, self.match, self.recursive = path, match, recursive
1941.         self.allow_files, self.allow_folders = allow_files, allow_folders
1942.         kwargs.setdefault("max_length", 100)
1943.         super().__init__(verbose_name, name, **kwargs)
1944. 
1945.     def check(self, **kwargs):
1946.         return [
1947.             *super().check(**kwargs),
1948.             *self._check_allowing_files_or_folders(**kwargs),
1949.         ]
1950. 
1951.     def _check_allowing_files_or_folders(self, **kwargs):
1952.         if not self.allow_files and not self.allow_folders:
1953.             return [
1954.                 checks.Error(
1955.                     "FilePathFields must have either 'allow_files' or 'allow_folders' "
1956.                     "set to True.",
1957.                     obj=self,
1958.                     id="fields.E140",
1959.                 )
1960.             ]
1961.         return []
1962. 
1963.     def deconstruct(self):
1964.         name, path, args, kwargs = super().deconstruct()
1965.         if self.path != "":
1966.             kwargs["path"] = self.path
1967.         if self.match is not None:
1968.             kwargs["match"] = self.match
1969.         if self.recursive is not False:
1970.             kwargs["recursive"] = self.recursive
1971.         if self.allow_files is not True:
1972.             kwargs["allow_files"] = self.allow_files
1973.         if self.allow_folders is not False:
1974.             kwargs["allow_folders"] = self.allow_folders
1975.         if kwargs.get("max_length") == 100:
1976.             del kwargs["max_length"]
1977.         return name, path, args, kwargs
1978. 
1979.     def get_prep_value(self, value):
1980.         value = super().get_prep_value(value)
1981.         if value is None:
1982.             return None
1983.         return str(value)
1984. 
1985.     def formfield(self, **kwargs):
1986.         return super().formfield(
1987.             **{
1988.                 "path": self.path() if callable(self.path) else self.path,
1989.                 "match": self.match,
1990.                 "recursive": self.recursive,
1991.                 "form_class": forms.FilePathField,
1992.                 "allow_files": self.allow_files,
1993.                 "allow_folders": self.allow_folders,
1994.                 **kwargs,
1995.             }
1996.         )
1997. 
1998.     def get_internal_type(self):
1999.         return "FilePathField"
2000. 
2001. 
2002. class FloatField(Field):
2003.     empty_strings_allowed = False
2004.     default_error_messages = {
2005.         "invalid": _("“%(value)s” value must be a float."),
2006.     }
2007.     description = _("Floating point number")
2008. 
2009.     def get_prep_value(self, value):
2010.         value = super().get_prep_value(value)
2011.         if value is None:
2012.             return None
2013.         try:
2014.             return float(value)
2015.         except (TypeError, ValueError) as e:
2016.             raise e.__class__(
2017.                 "Field '%s' expected a number but got %r." % (self.name, value),
2018.             ) from e
2019. 
2020.     def get_internal_type(self):
2021.         return "FloatField"
2022. 
2023.     def to_python(self, value):
2024.         if value is None:
2025.             return value
2026.         try:
2027.             return float(value)
2028.         except (TypeError, ValueError):
2029.             raise exceptions.ValidationError(
2030.                 self.error_messages["invalid"],
2031.                 code="invalid",
2032.                 params={"value": value},
2033.             )
2034. 
2035.     def formfield(self, **kwargs):
2036.         return super().formfield(
2037.             **{
2038.                 "form_class": forms.FloatField,
2039.                 **kwargs,
2040.             }
2041.         )
2042. 
2043. 
2044. class IntegerField(Field):
2045.     empty_strings_allowed = False
2046.     default_error_messages = {
2047.         "invalid": _("“%(value)s” value must be an integer."),
2048.     }
2049.     description = _("Integer")
2050. 
2051.     def check(self, **kwargs):
2052.         return [
2053.             *super().check(**kwargs),
2054.             *self._check_max_length_warning(),
2055.         ]
2056. 
2057.     def _check_max_length_warning(self):
2058.         if self.max_length is not None:
2059.             return [
2060.                 checks.Warning(
2061.                     "'max_length' is ignored when used with %s."
2062.                     % self.__class__.__name__,
2063.                     hint="Remove 'max_length' from field",
2064.                     obj=self,
2065.                     id="fields.W122",
2066.                 )
2067.             ]
2068.         return []
2069. 
2070.     @cached_property
2071.     def validators(self):
2072.         # These validators can't be added at field initialization time since
2073.         # they're based on values retrieved from `connection`.
2074.         validators_ = super().validators
2075.         internal_type = self.get_internal_type()
2076.         min_value, max_value = connection.ops.integer_field_range(internal_type)
2077.         if min_value is not None and not any(
2078.             (
2079.                 isinstance(validator, validators.MinValueValidator)
2080.                 and (
2081.                     validator.limit_value()
2082.                     if callable(validator.limit_value)
2083.                     else validator.limit_value
2084.                 )
2085.                 >= min_value
2086.             )
2087.             for validator in validators_
2088.         ):
2089.             validators_.append(validators.MinValueValidator(min_value))
2090.         if max_value is not None and not any(
2091.             (
2092.                 isinstance(validator, validators.MaxValueValidator)
2093.                 and (
2094.                     validator.limit_value()
2095.                     if callable(validator.limit_value)
2096.                     else validator.limit_value
2097.                 )
2098.                 <= max_value
2099.             )
2100.             for validator in validators_
2101.         ):
2102.             validators_.append(validators.MaxValueValidator(max_value))
2103.         return validators_
2104. 
2105.     def get_prep_value(self, value):
2106.         value = super().get_prep_value(value)
2107.         if value is None:
2108.             return None
2109.         try:
2110.             return int(value)
2111.         except (TypeError, ValueError) as e:
2112.             raise e.__class__(
2113.                 "Field '%s' expected a number but got %r." % (self.name, value),
2114.             ) from e
2115. 
2116.     def get_db_prep_value(self, value, connection, prepared=False):
2117.         value = super().get_db_prep_value(value, connection, prepared)
2118.         return connection.ops.adapt_integerfield_value(value, self.get_internal_type())
2119. 
2120.     def get_internal_type(self):
2121.         return "IntegerField"
2122. 
2123.     def to_python(self, value):
2124.         if value is None:
2125.             return value
2126.         try:
2127.             return int(value)
2128.         except (TypeError, ValueError):
2129.             raise exceptions.ValidationError(
2130.                 self.error_messages["invalid"],
2131.                 code="invalid",
2132.                 params={"value": value},
2133.             )
2134. 
2135.     def formfield(self, **kwargs):
2136.         return super().formfield(
2137.             **{
2138.                 "form_class": forms.IntegerField,
2139.                 **kwargs,
2140.             }
2141.         )
2142. 
2143. 
2144. class BigIntegerField(IntegerField):
2145.     description = _("Big (8 byte) integer")
2146.     MAX_BIGINT = 9223372036854775807
2147. 
2148.     def get_internal_type(self):
2149.         return "BigIntegerField"
2150. 
2151.     def formfield(self, **kwargs):
2152.         return super().formfield(
2153.             **{
2154.                 "min_value": -BigIntegerField.MAX_BIGINT - 1,
2155.                 "max_value": BigIntegerField.MAX_BIGINT,
2156.                 **kwargs,
2157.             }
2158.         )
2159. 
2160. 
2161. class SmallIntegerField(IntegerField):
2162.     description = _("Small integer")
2163. 
2164.     def get_internal_type(self):
2165.         return "SmallIntegerField"
2166. 
2167. 
2168. class IPAddressField(Field):
2169.     empty_strings_allowed = False
2170.     description = _("IPv4 address")
2171.     system_check_removed_details = {
2172.         "msg": (
2173.             "IPAddressField has been removed except for support in "
2174.             "historical migrations."
2175.         ),
2176.         "hint": "Use GenericIPAddressField instead.",
2177.         "id": "fields.E900",
2178.     }
2179. 
2180.     def __init__(self, *args, **kwargs):
2181.         kwargs["max_length"] = 15
2182.         super().__init__(*args, **kwargs)
2183. 
2184.     def deconstruct(self):
2185.         name, path, args, kwargs = super().deconstruct()
2186.         del kwargs["max_length"]
2187.         return name, path, args, kwargs
2188. 
2189.     def get_prep_value(self, value):
2190.         value = super().get_prep_value(value)
2191.         if value is None:
2192.             return None
2193.         return str(value)
2194. 
2195.     def get_internal_type(self):
2196.         return "IPAddressField"
2197. 
2198. 
2199. class GenericIPAddressField(Field):
2200.     empty_strings_allowed = False
2201.     description = _("IP address")
2202.     default_error_messages = {}
2203. 
2204.     def __init__(
2205.         self,
2206.         verbose_name=None,
2207.         name=None,
2208.         protocol="both",
2209.         unpack_ipv4=False,
2210.         *args,
2211.         **kwargs,
2212.     ):
2213.         self.unpack_ipv4 = unpack_ipv4
2214.         self.protocol = protocol
2215.         (
2216.             self.default_validators,
2217.             invalid_error_message,
2218.         ) = validators.ip_address_validators(protocol, unpack_ipv4)
2219.         self.default_error_messages["invalid"] = invalid_error_message
2220.         kwargs["max_length"] = 39
2221.         super().__init__(verbose_name, name, *args, **kwargs)
2222. 
2223.     def check(self, **kwargs):
2224.         return [
2225.             *super().check(**kwargs),
2226.             *self._check_blank_and_null_values(**kwargs),
2227.         ]
2228. 
2229.     def _check_blank_and_null_values(self, **kwargs):
2230.         if not getattr(self, "null", False) and getattr(self, "blank", False):
2231.             return [
2232.                 checks.Error(
2233.                     "GenericIPAddressFields cannot have blank=True if null=False, "
2234.                     "as blank values are stored as nulls.",
2235.                     obj=self,
2236.                     id="fields.E150",
2237.                 )
2238.             ]
2239.         return []
2240. 
2241.     def deconstruct(self):
2242.         name, path, args, kwargs = super().deconstruct()
2243.         if self.unpack_ipv4 is not False:
2244.             kwargs["unpack_ipv4"] = self.unpack_ipv4
2245.         if self.protocol != "both":
2246.             kwargs["protocol"] = self.protocol
2247.         if kwargs.get("max_length") == 39:
2248.             del kwargs["max_length"]
2249.         return name, path, args, kwargs
2250. 
2251.     def get_internal_type(self):
2252.         return "GenericIPAddressField"
2253. 
2254.     def to_python(self, value):
2255.         if value is None:
2256.             return None
2257.         if not isinstance(value, str):
2258.             value = str(value)
2259.         value = value.strip()
2260.         if ":" in value:
2261.             return clean_ipv6_address(
2262.                 value, self.unpack_ipv4, self.error_messages["invalid"]
2263.             )
2264.         return value
2265. 
2266.     def get_db_prep_value(self, value, connection, prepared=False):
2267.         if not prepared:
2268.             value = self.get_prep_value(value)
2269.         return connection.ops.adapt_ipaddressfield_value(value)
2270. 
2271.     def get_prep_value(self, value):
2272.         value = super().get_prep_value(value)
2273.         if value is None:
2274.             return None
2275.         if value and ":" in value:
2276.             try:
2277.                 return clean_ipv6_address(value, self.unpack_ipv4)
2278.             except exceptions.ValidationError:
2279.                 pass
2280.         return str(value)
2281. 
2282.     def formfield(self, **kwargs):
2283.         return super().formfield(
2284.             **{
2285.                 "protocol": self.protocol,
2286.                 "form_class": forms.GenericIPAddressField,
2287.                 **kwargs,
2288.             }
2289.         )
2290. 
2291. 
2292. class NullBooleanField(BooleanField):
2293.     default_error_messages = {
2294.         "invalid": _("“%(value)s” value must be either None, True or False."),
2295.         "invalid_nullable": _("“%(value)s” value must be either None, True or False."),
2296.     }
2297.     description = _("Boolean (Either True, False or None)")
2298.     system_check_removed_details = {
2299.         "msg": (
2300.             "NullBooleanField is removed except for support in historical "
2301.             "migrations."
2302.         ),
2303.         "hint": "Use BooleanField(null=True, blank=True) instead.",
2304.         "id": "fields.E903",
2305.     }
2306. 
2307.     def __init__(self, *args, **kwargs):
2308.         kwargs["null"] = True
2309.         kwargs["blank"] = True
2310.         super().__init__(*args, **kwargs)
2311. 
2312.     def deconstruct(self):
2313.         name, path, args, kwargs = super().deconstruct()
2314.         del kwargs["null"]
2315.         del kwargs["blank"]
2316.         return name, path, args, kwargs
2317. 
2318. 
2319. class PositiveIntegerRelDbTypeMixin:
2320.     def __init_subclass__(cls, **kwargs):
2321.         super().__init_subclass__(**kwargs)
2322.         if not hasattr(cls, "integer_field_class"):
2323.             cls.integer_field_class = next(
2324.                 (
2325.                     parent
2326.                     for parent in cls.__mro__[1:]
2327.                     if issubclass(parent, IntegerField)
2328.                 ),
2329.                 None,
2330.             )
2331. 
2332.     def rel_db_type(self, connection):
2333.         """
2334.         Return the data type that a related field pointing to this field should
2335.         use. In most cases, a foreign key pointing to a positive integer
2336.         primary key will have an integer column data type but some databases
2337.         (e.g. MySQL) have an unsigned integer type. In that case
2338.         (related_fields_match_type=True), the primary key should return its
2339.         db_type.
2340.         """
2341.         if connection.features.related_fields_match_type:
2342.             return self.db_type(connection)
2343.         else:
2344.             return self.integer_field_class().db_type(connection=connection)
2345. 
2346. 
2347. class PositiveBigIntegerField(PositiveIntegerRelDbTypeMixin, BigIntegerField):
2348.     description = _("Positive big integer")
2349. 
2350.     def get_internal_type(self):
2351.         return "PositiveBigIntegerField"
2352. 
2353.     def formfield(self, **kwargs):
2354.         return super().formfield(
2355.             **{
2356.                 "min_value": 0,
2357.                 **kwargs,
2358.             }
2359.         )
2360. 
2361. 
2362. class PositiveIntegerField(PositiveIntegerRelDbTypeMixin, IntegerField):
2363.     description = _("Positive integer")
2364. 
2365.     def get_internal_type(self):
2366.         return "PositiveIntegerField"
2367. 
2368.     def formfield(self, **kwargs):
2369.         return super().formfield(
2370.             **{
2371.                 "min_value": 0,
2372.                 **kwargs,
2373.             }
2374.         )
2375. 
2376. 
2377. class PositiveSmallIntegerField(PositiveIntegerRelDbTypeMixin, SmallIntegerField):
2378.     description = _("Positive small integer")
2379. 
2380.     def get_internal_type(self):
2381.         return "PositiveSmallIntegerField"
2382. 
2383.     def formfield(self, **kwargs):
2384.         return super().formfield(
2385.             **{
2386.                 "min_value": 0,
2387.                 **kwargs,
2388.             }
2389.         )
2390. 
2391. 
2392. class SlugField(CharField):
2393.     default_validators = [validators.validate_slug]
2394.     description = _("Slug (up to %(max_length)s)")
2395. 
2396.     def __init__(
2397.         self, *args, max_length=50, db_index=True, allow_unicode=False, **kwargs
2398.     ):
2399.         self.allow_unicode = allow_unicode
2400.         if self.allow_unicode:
2401.             self.default_validators = [validators.validate_unicode_slug]
2402.         super().__init__(*args, max_length=max_length, db_index=db_index, **kwargs)
2403. 
2404.     def deconstruct(self):
2405.         name, path, args, kwargs = super().deconstruct()
2406.         if kwargs.get("max_length") == 50:
2407.             del kwargs["max_length"]
2408.         if self.db_index is False:
2409.             kwargs["db_index"] = False
2410.         else:
2411.             del kwargs["db_index"]
2412.         if self.allow_unicode is not False:
2413.             kwargs["allow_unicode"] = self.allow_unicode
2414.         return name, path, args, kwargs
2415. 
2416.     def get_internal_type(self):
2417.         return "SlugField"
2418. 
2419.     def formfield(self, **kwargs):
2420.         return super().formfield(
2421.             **{
2422.                 "form_class": forms.SlugField,
2423.                 "allow_unicode": self.allow_unicode,
2424.                 **kwargs,
2425.             }
2426.         )
2427. 
2428. 
2429. class TextField(Field):
2430.     description = _("Text")
2431. 
2432.     def __init__(self, *args, db_collation=None, **kwargs):
2433.         super().__init__(*args, **kwargs)
2434.         self.db_collation = db_collation
2435. 
2436.     def check(self, **kwargs):
2437.         databases = kwargs.get("databases") or []
2438.         return [
2439.             *super().check(**kwargs),
2440.             *self._check_db_collation(databases),
2441.         ]
2442. 
2443.     def _check_db_collation(self, databases):
2444.         errors = []
2445.         for db in databases:
2446.             if not router.allow_migrate_model(db, self.model):
2447.                 continue
2448.             connection = connections[db]
2449.             if not (
2450.                 self.db_collation is None
2451.                 or "supports_collation_on_textfield"
2452.                 in self.model._meta.required_db_features
2453.                 or connection.features.supports_collation_on_textfield
2454.             ):
2455.                 errors.append(
2456.                     checks.Error(
2457.                         "%s does not support a database collation on "
2458.                         "TextFields." % connection.display_name,
2459.                         obj=self,
2460.                         id="fields.E190",
2461.                     ),
2462.                 )
2463.         return errors
2464. 
2465.     def db_parameters(self, connection):
2466.         db_params = super().db_parameters(connection)
2467.         db_params["collation"] = self.db_collation
2468.         return db_params
2469. 
2470.     def get_internal_type(self):
2471.         return "TextField"
2472. 
2473.     def to_python(self, value):
2474.         if isinstance(value, str) or value is None:
2475.             return value
2476.         return str(value)
2477. 
2478.     def get_prep_value(self, value):
2479.         value = super().get_prep_value(value)
2480.         return self.to_python(value)
2481. 
2482.     def formfield(self, **kwargs):
2483.         # Passing max_length to forms.CharField means that the value's length
2484.         # will be validated twice. This is considered acceptable since we want
2485.         # the value in the form field (to pass into widget for example).
2486.         return super().formfield(
2487.             **{
2488.                 "max_length": self.max_length,
2489.                 **({} if self.choices is not None else {"widget": forms.Textarea}),
2490.                 **kwargs,
2491.             }
2492.         )
2493. 
2494.     def deconstruct(self):
2495.         name, path, args, kwargs = super().deconstruct()
2496.         if self.db_collation:
2497.             kwargs["db_collation"] = self.db_collation
2498.         return name, path, args, kwargs
2499. 
2500. 
2501. class TimeField(DateTimeCheckMixin, Field):
2502.     empty_strings_allowed = False
2503.     default_error_messages = {
2504.         "invalid": _(
2505.             "“%(value)s” value has an invalid format. It must be in "
2506.             "HH:MM[:ss[.uuuuuu]] format."
2507.         ),
2508.         "invalid_time": _(
2509.             "“%(value)s” value has the correct format "
2510.             "(HH:MM[:ss[.uuuuuu]]) but it is an invalid time."
2511.         ),
2512.     }
2513.     description = _("Time")
2514. 
2515.     def __init__(
2516.         self, verbose_name=None, name=None, auto_now=False, auto_now_add=False, **kwargs
2517.     ):
2518.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
2519.         if auto_now or auto_now_add:
2520.             kwargs["editable"] = False
2521.             kwargs["blank"] = True
2522.         super().__init__(verbose_name, name, **kwargs)
2523. 
2524.     def _check_fix_default_value(self):
2525.         """
2526.         Warn that using an actual date or datetime value is probably wrong;
2527.         it's only evaluated on server startup.
2528.         """
2529.         if not self.has_default():
2530.             return []
2531. 
2532.         value = self.default
2533.         if isinstance(value, datetime.datetime):
2534.             now = None
2535.         elif isinstance(value, datetime.time):
2536.             now = _get_naive_now()
2537.             # This will not use the right date in the race condition where now
2538.             # is just before the date change and value is just past 0:00.
2539.             value = datetime.datetime.combine(now.date(), value)
2540.         else:
2541.             # No explicit time / datetime value -- no checks necessary
2542.             return []
2543.         # At this point, value is a datetime object.
2544.         return self._check_if_value_fixed(value, now=now)
2545. 
2546.     def deconstruct(self):
2547.         name, path, args, kwargs = super().deconstruct()
2548.         if self.auto_now is not False:
2549.             kwargs["auto_now"] = self.auto_now
2550.         if self.auto_now_add is not False:
2551.             kwargs["auto_now_add"] = self.auto_now_add
2552.         if self.auto_now or self.auto_now_add:
2553.             del kwargs["blank"]
2554.             del kwargs["editable"]
2555.         return name, path, args, kwargs
2556. 
2557.     def get_internal_type(self):
2558.         return "TimeField"
2559. 
2560.     def to_python(self, value):
2561.         if value is None:
2562.             return None
2563.         if isinstance(value, datetime.time):
2564.             return value
2565.         if isinstance(value, datetime.datetime):
2566.             # Not usually a good idea to pass in a datetime here (it loses
2567.             # information), but this can be a side-effect of interacting with a
2568.             # database backend (e.g. Oracle), so we'll be accommodating.
2569.             return value.time()
2570. 
2571.         try:
2572.             parsed = parse_time(value)
2573.             if parsed is not None:
2574.                 return parsed
2575.         except ValueError:
2576.             raise exceptions.ValidationError(
2577.                 self.error_messages["invalid_time"],
2578.                 code="invalid_time",
2579.                 params={"value": value},
2580.             )
2581. 
2582.         raise exceptions.ValidationError(
2583.             self.error_messages["invalid"],
2584.             code="invalid",
2585.             params={"value": value},
2586.         )
2587. 
2588.     def pre_save(self, model_instance, add):
2589.         if self.auto_now or (self.auto_now_add and add):
2590.             value = datetime.datetime.now().time()
2591.             setattr(model_instance, self.attname, value)
2592.             return value
2593.         else:
2594.             return super().pre_save(model_instance, add)
2595. 
2596.     def get_prep_value(self, value):
2597.         value = super().get_prep_value(value)
2598.         return self.to_python(value)
2599. 
2600.     def get_db_prep_value(self, value, connection, prepared=False):
2601.         # Casts times into the format expected by the backend
2602.         if not prepared:
2603.             value = self.get_prep_value(value)
2604.         return connection.ops.adapt_timefield_value(value)
2605. 
2606.     def value_to_string(self, obj):
2607.         val = self.value_from_object(obj)
2608.         return "" if val is None else val.isoformat()
2609. 
2610.     def formfield(self, **kwargs):
2611.         return super().formfield(
2612.             **{
2613.                 "form_class": forms.TimeField,
2614.                 **kwargs,
2615.             }
2616.         )
2617. 
2618. 
2619. class URLField(CharField):
2620.     default_validators = [validators.URLValidator()]
2621.     description = _("URL")
2622. 
2623.     def __init__(self, verbose_name=None, name=None, **kwargs):
2624.         kwargs.setdefault("max_length", 200)
2625.         super().__init__(verbose_name, name, **kwargs)
2626. 
2627.     def deconstruct(self):
2628.         name, path, args, kwargs = super().deconstruct()
2629.         if kwargs.get("max_length") == 200:
2630.             del kwargs["max_length"]
2631.         return name, path, args, kwargs
2632. 
2633.     def formfield(self, **kwargs):
2634.         # As with CharField, this will cause URL validation to be performed
2635.         # twice.
2636.         return super().formfield(
2637.             **{
2638.                 "form_class": forms.URLField,
2639.                 **kwargs,
2640.             }
2641.         )
2642. 
2643. 
2644. class BinaryField(Field):
2645.     description = _("Raw binary data")
2646.     empty_values = [None, b""]
2647. 
2648.     def __init__(self, *args, **kwargs):
2649.         kwargs.setdefault("editable", False)
2650.         super().__init__(*args, **kwargs)
2651.         if self.max_length is not None:
2652.             self.validators.append(validators.MaxLengthValidator(self.max_length))
2653. 
2654.     def check(self, **kwargs):
2655.         return [*super().check(**kwargs), *self._check_str_default_value()]
2656. 
2657.     def _check_str_default_value(self):
2658.         if self.has_default() and isinstance(self.default, str):
2659.             return [
2660.                 checks.Error(
2661.                     "BinaryField's default cannot be a string. Use bytes "
2662.                     "content instead.",
2663.                     obj=self,
2664.                     id="fields.E170",
2665.                 )
2666.             ]
2667.         return []
2668. 
2669.     def deconstruct(self):
2670.         name, path, args, kwargs = super().deconstruct()
2671.         if self.editable:
2672.             kwargs["editable"] = True
2673.         else:
2674.             del kwargs["editable"]
2675.         return name, path, args, kwargs
2676. 
2677.     def get_internal_type(self):
2678.         return "BinaryField"
2679. 
2680.     def get_placeholder(self, value, compiler, connection):
2681.         return connection.ops.binary_placeholder_sql(value)
2682. 
2683.     def get_default(self):
2684.         if self.has_default() and not callable(self.default):
2685.             return self.default
2686.         default = super().get_default()
2687.         if default == "":
2688.             return b""
2689.         return default
2690. 
2691.     def get_db_prep_value(self, value, connection, prepared=False):
2692.         value = super().get_db_prep_value(value, connection, prepared)
2693.         if value is not None:
2694.             return connection.Database.Binary(value)
2695.         return value
2696. 
2697.     def value_to_string(self, obj):
2698.         """Binary data is serialized as base64"""
2699.         return b64encode(self.value_from_object(obj)).decode("ascii")
2700. 
2701.     def to_python(self, value):
2702.         # If it's a string, it should be base64-encoded data
2703.         if isinstance(value, str):
2704.             return memoryview(b64decode(value.encode("ascii")))
2705.         return value
2706. 
2707. 
2708. class UUIDField(Field):
2709.     default_error_messages = {
2710.         "invalid": _("“%(value)s” is not a valid UUID."),
2711.     }
2712.     description = _("Universally unique identifier")
2713.     empty_strings_allowed = False
2714. 
2715.     def __init__(self, verbose_name=None, **kwargs):
2716.         kwargs["max_length"] = 32
2717.         super().__init__(verbose_name, **kwargs)
2718. 
2719.     def deconstruct(self):
2720.         name, path, args, kwargs = super().deconstruct()
2721.         del kwargs["max_length"]
2722.         return name, path, args, kwargs
2723. 
2724.     def get_internal_type(self):
2725.         return "UUIDField"
2726. 
2727.     def get_prep_value(self, value):
2728.         value = super().get_prep_value(value)
2729.         return self.to_python(value)
2730. 
2731.     def get_db_prep_value(self, value, connection, prepared=False):
2732.         if value is None:
2733.             return None
2734.         if not isinstance(value, uuid.UUID):
2735.             value = self.to_python(value)
2736. 
2737.         if connection.features.has_native_uuid_field:
2738.             return value
2739.         return value.hex
2740. 
2741.     def to_python(self, value):
2742.         if value is not None and not isinstance(value, uuid.UUID):
2743.             input_form = "int" if isinstance(value, int) else "hex"
2744.             try:
2745.                 return uuid.UUID(**{input_form: value})
2746.             except (AttributeError, ValueError):
2747.                 raise exceptions.ValidationError(
2748.                     self.error_messages["invalid"],
2749.                     code="invalid",
2750.                     params={"value": value},
2751.                 )
2752.         return value
2753. 
2754.     def formfield(self, **kwargs):
2755.         return super().formfield(
2756.             **{
2757.                 "form_class": forms.UUIDField,
2758.                 **kwargs,
2759.             }
2760.         )
2761. 
2762. 
2763. class AutoFieldMixin:
2764.     db_returning = True
2765. 
2766.     def __init__(self, *args, **kwargs):
2767.         kwargs["blank"] = True
2768.         super().__init__(*args, **kwargs)
2769. 
2770.     def check(self, **kwargs):
2771.         return [
2772.             *super().check(**kwargs),
2773.             *self._check_primary_key(),
2774.         ]
2775. 
2776.     def _check_primary_key(self):
2777.         if not self.primary_key:
2778.             return [
2779.                 checks.Error(
2780.                     "AutoFields must set primary_key=True.",
2781.                     obj=self,
2782.                     id="fields.E100",
2783.                 ),
2784.             ]
2785.         else:
2786.             return []
2787. 
2788.     def deconstruct(self):
2789.         name, path, args, kwargs = super().deconstruct()
2790.         del kwargs["blank"]
2791.         kwargs["primary_key"] = True
2792.         return name, path, args, kwargs
2793. 
2794.     def validate(self, value, model_instance):
2795.         pass
2796. 
2797.     def get_db_prep_value(self, value, connection, prepared=False):
2798.         if not prepared:
2799.             value = self.get_prep_value(value)
2800.             value = connection.ops.validate_autopk_value(value)
2801.         return value
2802. 
2803.     def contribute_to_class(self, cls, name, **kwargs):
2804.         if cls._meta.auto_field:
2805.             raise ValueError(
2806.                 "Model %s can't have more than one auto-generated field."
2807.                 % cls._meta.label
2808.             )
2809.         super().contribute_to_class(cls, name, **kwargs)
2810.         cls._meta.auto_field = self
2811. 
2812.     def formfield(self, **kwargs):
2813.         return None
2814. 
2815. 
2816. class AutoFieldMeta(type):
2817.     """
2818.     Metaclass to maintain backward inheritance compatibility for AutoField.
2819. 
2820.     It is intended that AutoFieldMixin become public API when it is possible to
2821.     create a non-integer automatically-generated field using column defaults
2822.     stored in the database.
2823. 
2824.     In many areas Django also relies on using isinstance() to check for an
2825.     automatically-generated field as a subclass of AutoField. A new flag needs
2826.     to be implemented on Field to be used instead.
2827. 
2828.     When these issues have been addressed, this metaclass could be used to
2829.     deprecate inheritance from AutoField and use of isinstance() with AutoField
2830.     for detecting automatically-generated fields.
2831.     """
2832. 
2833.     @property
2834.     def _subclasses(self):
2835.         return (BigAutoField, SmallAutoField)
2836. 
2837.     def __instancecheck__(self, instance):
2838.         return isinstance(instance, self._subclasses) or super().__instancecheck__(
2839.             instance
2840.         )
2841. 
2842.     def __subclasscheck__(self, subclass):
2843.         return issubclass(subclass, self._subclasses) or super().__subclasscheck__(
2844.             subclass
2845.         )
2846. 
2847. 
2848. class AutoField(AutoFieldMixin, IntegerField, metaclass=AutoFieldMeta):
2849.     def get_internal_type(self):
2850.         return "AutoField"
2851. 
2852.     def rel_db_type(self, connection):
2853.         return IntegerField().db_type(connection=connection)
2854. 
2855. 
2856. class BigAutoField(AutoFieldMixin, BigIntegerField):
2857.     def get_internal_type(self):
2858.         return "BigAutoField"
2859. 
2860.     def rel_db_type(self, connection):
2861.         return BigIntegerField().db_type(connection=connection)
2862. 
2863. 
2864. class SmallAutoField(AutoFieldMixin, SmallIntegerField):
2865.     def get_internal_type(self):
2866.         return "SmallAutoField"
2867. 
2868.     def rel_db_type(self, connection):
2869.         return SmallIntegerField().db_type(connection=connection)


File: django/forms/models.py
Line number range: 1 - 1668
Content:
1. """
2. Helper functions for creating Form classes from Django models
3. and database field objects.
4. """
5. from itertools import chain
6. 
7. from django.core.exceptions import (
8.     NON_FIELD_ERRORS,
9.     FieldError,
10.     ImproperlyConfigured,
11.     ValidationError,
12. )
13. from django.db.models.utils import AltersData
14. from django.forms.fields import ChoiceField, Field
15. from django.forms.forms import BaseForm, DeclarativeFieldsMetaclass
16. from django.forms.formsets import BaseFormSet, formset_factory
17. from django.forms.utils import ErrorList
18. from django.forms.widgets import (
19.     HiddenInput,
20.     MultipleHiddenInput,
21.     RadioSelect,
22.     SelectMultiple,
23. )
24. from django.utils.text import capfirst, get_text_list
25. from django.utils.translation import gettext
26. from django.utils.translation import gettext_lazy as _
27. 
28. __all__ = (
29.     "ModelForm",
30.     "BaseModelForm",
31.     "model_to_dict",
32.     "fields_for_model",
33.     "ModelChoiceField",
34.     "ModelMultipleChoiceField",
35.     "ALL_FIELDS",
36.     "BaseModelFormSet",
37.     "modelformset_factory",
38.     "BaseInlineFormSet",
39.     "inlineformset_factory",
40.     "modelform_factory",
41. )
42. 
43. ALL_FIELDS = "__all__"
44. 
45. 
46. def construct_instance(form, instance, fields=None, exclude=None):
47.     """
48.     Construct and return a model instance from the bound ``form``'s
49.     ``cleaned_data``, but do not save the returned instance to the database.
50.     """
51.     from django.db import models
52. 
53.     opts = instance._meta
54. 
55.     cleaned_data = form.cleaned_data
56.     file_field_list = []
57.     for f in opts.fields:
58.         if (
59.             not f.editable
60.             or isinstance(f, models.AutoField)
61.             or f.name not in cleaned_data
62.         ):
63.             continue
64.         if fields is not None and f.name not in fields:
65.             continue
66.         if exclude and f.name in exclude:
67.             continue
68.         # Leave defaults for fields that aren't in POST data, except for
69.         # checkbox inputs because they don't appear in POST data if not checked.
70.         if (
71.             f.has_default()
72.             and form[f.name].field.widget.value_omitted_from_data(
73.                 form.data, form.files, form.add_prefix(f.name)
74.             )
75.             and cleaned_data.get(f.name) in form[f.name].field.empty_values
76.         ):
77.             continue
78.         # Defer saving file-type fields until after the other fields, so a
79.         # callable upload_to can use the values from other fields.
80.         if isinstance(f, models.FileField):
81.             file_field_list.append(f)
82.         else:
83.             f.save_form_data(instance, cleaned_data[f.name])
84. 
85.     for f in file_field_list:
86.         f.save_form_data(instance, cleaned_data[f.name])
87. 
88.     return instance
89. 
90. 
91. # ModelForms #################################################################
92. 
93. 
94. def model_to_dict(instance, fields=None, exclude=None):
95.     """
96.     Return a dict containing the data in ``instance`` suitable for passing as
97.     a Form's ``initial`` keyword argument.
98. 
99.     ``fields`` is an optional list of field names. If provided, return only the
100.     named.
101. 
102.     ``exclude`` is an optional list of field names. If provided, exclude the
103.     named from the returned dict, even if they are listed in the ``fields``
104.     argument.
105.     """
106.     opts = instance._meta
107.     data = {}
108.     for f in chain(opts.concrete_fields, opts.private_fields, opts.many_to_many):
109.         if not getattr(f, "editable", False):
110.             continue
111.         if fields is not None and f.name not in fields:
112.             continue
113.         if exclude and f.name in exclude:
114.             continue
115.         data[f.name] = f.value_from_object(instance)
116.     return data
117. 
118. 
119. def apply_limit_choices_to_to_formfield(formfield):
120.     """Apply limit_choices_to to the formfield's queryset if needed."""
121.     from django.db.models import Exists, OuterRef, Q
122. 
123.     if hasattr(formfield, "queryset") and hasattr(formfield, "get_limit_choices_to"):
124.         limit_choices_to = formfield.get_limit_choices_to()
125.         if limit_choices_to:
126.             complex_filter = limit_choices_to
127.             if not isinstance(complex_filter, Q):
128.                 complex_filter = Q(**limit_choices_to)
129.             complex_filter &= Q(pk=OuterRef("pk"))
130.             # Use Exists() to avoid potential duplicates.
131.             formfield.queryset = formfield.queryset.filter(
132.                 Exists(formfield.queryset.model._base_manager.filter(complex_filter)),
133.             )
134. 
135. 
136. def fields_for_model(
137.     model,
138.     fields=None,
139.     exclude=None,
140.     widgets=None,
141.     formfield_callback=None,
142.     localized_fields=None,
143.     labels=None,
144.     help_texts=None,
145.     error_messages=None,
146.     field_classes=None,
147.     *,
148.     apply_limit_choices_to=True,
149.     form_declared_fields=None,
150. ):
151.     """
152.     Return a dictionary containing form fields for the given model.
153. 
154.     ``fields`` is an optional list of field names. If provided, return only the
155.     named fields.
156. 
157.     ``exclude`` is an optional list of field names. If provided, exclude the
158.     named fields from the returned fields, even if they are listed in the
159.     ``fields`` argument.
160. 
161.     ``widgets`` is a dictionary of model field names mapped to a widget.
162. 
163.     ``formfield_callback`` is a callable that takes a model field and returns
164.     a form field.
165. 
166.     ``localized_fields`` is a list of names of fields which should be localized.
167. 
168.     ``labels`` is a dictionary of model field names mapped to a label.
169. 
170.     ``help_texts`` is a dictionary of model field names mapped to a help text.
171. 
172.     ``error_messages`` is a dictionary of model field names mapped to a
173.     dictionary of error messages.
174. 
175.     ``field_classes`` is a dictionary of model field names mapped to a form
176.     field class.
177. 
178.     ``apply_limit_choices_to`` is a boolean indicating if limit_choices_to
179.     should be applied to a field's queryset.
180. 
181.     ``form_declared_fields`` is a dictionary of form fields created directly on
182.     a form.
183.     """
184.     form_declared_fields = form_declared_fields or {}
185.     field_dict = {}
186.     ignored = []
187.     opts = model._meta
188.     # Avoid circular import
189.     from django.db.models import Field as ModelField
190. 
191.     sortable_private_fields = [
192.         f for f in opts.private_fields if isinstance(f, ModelField)
193.     ]
194.     for f in sorted(
195.         chain(opts.concrete_fields, sortable_private_fields, opts.many_to_many)
196.     ):
197.         if not getattr(f, "editable", False):
198.             if (
199.                 fields is not None
200.                 and f.name in fields
201.                 and (exclude is None or f.name not in exclude)
202.             ):
203.                 raise FieldError(
204.                     "'%s' cannot be specified for %s model form as it is a "
205.                     "non-editable field" % (f.name, model.__name__)
206.                 )
207.             continue
208.         if fields is not None and f.name not in fields:
209.             continue
210.         if exclude and f.name in exclude:
211.             continue
212.         if f.name in form_declared_fields:
213.             field_dict[f.name] = form_declared_fields[f.name]
214.             continue
215. 
216.         kwargs = {}
217.         if widgets and f.name in widgets:
218.             kwargs["widget"] = widgets[f.name]
219.         if localized_fields == ALL_FIELDS or (
220.             localized_fields and f.name in localized_fields
221.         ):
222.             kwargs["localize"] = True
223.         if labels and f.name in labels:
224.             kwargs["label"] = labels[f.name]
225.         if help_texts and f.name in help_texts:
226.             kwargs["help_text"] = help_texts[f.name]
227.         if error_messages and f.name in error_messages:
228.             kwargs["error_messages"] = error_messages[f.name]
229.         if field_classes and f.name in field_classes:
230.             kwargs["form_class"] = field_classes[f.name]
231. 
232.         if formfield_callback is None:
233.             formfield = f.formfield(**kwargs)
234.         elif not callable(formfield_callback):
235.             raise TypeError("formfield_callback must be a function or callable")
236.         else:
237.             formfield = formfield_callback(f, **kwargs)
238. 
239.         if formfield:
240.             if apply_limit_choices_to:
241.                 apply_limit_choices_to_to_formfield(formfield)
242.             field_dict[f.name] = formfield
243.         else:
244.             ignored.append(f.name)
245.     if fields:
246.         field_dict = {
247.             f: field_dict.get(f)
248.             for f in fields
249.             if (not exclude or f not in exclude) and f not in ignored
250.         }
251.     return field_dict
252. 
253. 
254. class ModelFormOptions:
255.     def __init__(self, options=None):
256.         self.model = getattr(options, "model", None)
257.         self.fields = getattr(options, "fields", None)
258.         self.exclude = getattr(options, "exclude", None)
259.         self.widgets = getattr(options, "widgets", None)
260.         self.localized_fields = getattr(options, "localized_fields", None)
261.         self.labels = getattr(options, "labels", None)
262.         self.help_texts = getattr(options, "help_texts", None)
263.         self.error_messages = getattr(options, "error_messages", None)
264.         self.field_classes = getattr(options, "field_classes", None)
265.         self.formfield_callback = getattr(options, "formfield_callback", None)
266. 
267. 
268. class ModelFormMetaclass(DeclarativeFieldsMetaclass):
269.     def __new__(mcs, name, bases, attrs):
270.         new_class = super().__new__(mcs, name, bases, attrs)
271. 
272.         if bases == (BaseModelForm,):
273.             return new_class
274. 
275.         opts = new_class._meta = ModelFormOptions(getattr(new_class, "Meta", None))
276. 
277.         # We check if a string was passed to `fields` or `exclude`,
278.         # which is likely to be a mistake where the user typed ('foo') instead
279.         # of ('foo',)
280.         for opt in ["fields", "exclude", "localized_fields"]:
281.             value = getattr(opts, opt)
282.             if isinstance(value, str) and value != ALL_FIELDS:
283.                 msg = (
284.                     "%(model)s.Meta.%(opt)s cannot be a string. "
285.                     "Did you mean to type: ('%(value)s',)?"
286.                     % {
287.                         "model": new_class.__name__,
288.                         "opt": opt,
289.                         "value": value,
290.                     }
291.                 )
292.                 raise TypeError(msg)
293. 
294.         if opts.model:
295.             # If a model is defined, extract form fields from it.
296.             if opts.fields is None and opts.exclude is None:
297.                 raise ImproperlyConfigured(
298.                     "Creating a ModelForm without either the 'fields' attribute "
299.                     "or the 'exclude' attribute is prohibited; form %s "
300.                     "needs updating." % name
301.                 )
302. 
303.             if opts.fields == ALL_FIELDS:
304.                 # Sentinel for fields_for_model to indicate "get the list of
305.                 # fields from the model"
306.                 opts.fields = None
307. 
308.             fields = fields_for_model(
309.                 opts.model,
310.                 opts.fields,
311.                 opts.exclude,
312.                 opts.widgets,
313.                 opts.formfield_callback,
314.                 opts.localized_fields,
315.                 opts.labels,
316.                 opts.help_texts,
317.                 opts.error_messages,
318.                 opts.field_classes,
319.                 # limit_choices_to will be applied during ModelForm.__init__().
320.                 apply_limit_choices_to=False,
321.                 form_declared_fields=new_class.declared_fields,
322.             )
323. 
324.             # make sure opts.fields doesn't specify an invalid field
325.             none_model_fields = {k for k, v in fields.items() if not v}
326.             missing_fields = none_model_fields.difference(new_class.declared_fields)
327.             if missing_fields:
328.                 message = "Unknown field(s) (%s) specified for %s"
329.                 message %= (", ".join(missing_fields), opts.model.__name__)
330.                 raise FieldError(message)
331.             # Include all the other declared fields.
332.             fields.update(new_class.declared_fields)
333.         else:
334.             fields = new_class.declared_fields
335. 
336.         new_class.base_fields = fields
337. 
338.         return new_class
339. 
340. 
341. class BaseModelForm(BaseForm, AltersData):
342.     def __init__(
343.         self,
344.         data=None,
345.         files=None,
346.         auto_id="id_%s",
347.         prefix=None,
348.         initial=None,
349.         error_class=ErrorList,
350.         label_suffix=None,
351.         empty_permitted=False,
352.         instance=None,
353.         use_required_attribute=None,
354.         renderer=None,
355.     ):
356.         opts = self._meta
357.         if opts.model is None:
358.             raise ValueError("ModelForm has no model class specified.")
359.         if instance is None:
360.             # if we didn't get an instance, instantiate a new one
361.             self.instance = opts.model()
362.             object_data = {}
363.         else:
364.             self.instance = instance
365.             object_data = model_to_dict(instance, opts.fields, opts.exclude)
366.         # if initial was provided, it should override the values from instance
367.         if initial is not None:
368.             object_data.update(initial)
369.         # self._validate_unique will be set to True by BaseModelForm.clean().
370.         # It is False by default so overriding self.clean() and failing to call
371.         # super will stop validate_unique from being called.
372.         self._validate_unique = False
373.         super().__init__(
374.             data,
375.             files,
376.             auto_id,
377.             prefix,
378.             object_data,
379.             error_class,
380.             label_suffix,
381.             empty_permitted,
382.             use_required_attribute=use_required_attribute,
383.             renderer=renderer,
384.         )
385.         for formfield in self.fields.values():
386.             apply_limit_choices_to_to_formfield(formfield)
387. 
388.     def _get_validation_exclusions(self):
389.         """
390.         For backwards-compatibility, exclude several types of fields from model
391.         validation. See tickets #12507, #12521, #12553.
392.         """
393.         exclude = set()
394.         # Build up a list of fields that should be excluded from model field
395.         # validation and unique checks.
396.         for f in self.instance._meta.fields:
397.             field = f.name
398.             # Exclude fields that aren't on the form. The developer may be
399.             # adding these values to the model after form validation.
400.             if field not in self.fields:
401.                 exclude.add(f.name)
402. 
403.             # Don't perform model validation on fields that were defined
404.             # manually on the form and excluded via the ModelForm's Meta
405.             # class. See #12901.
406.             elif self._meta.fields and field not in self._meta.fields:
407.                 exclude.add(f.name)
408.             elif self._meta.exclude and field in self._meta.exclude:
409.                 exclude.add(f.name)
410. 
411.             # Exclude fields that failed form validation. There's no need for
412.             # the model fields to validate them as well.
413.             elif field in self._errors:
414.                 exclude.add(f.name)
415. 
416.             # Exclude empty fields that are not required by the form, if the
417.             # underlying model field is required. This keeps the model field
418.             # from raising a required error. Note: don't exclude the field from
419.             # validation if the model field allows blanks. If it does, the blank
420.             # value may be included in a unique check, so cannot be excluded
421.             # from validation.
422.             else:
423.                 form_field = self.fields[field]
424.                 field_value = self.cleaned_data.get(field)
425.                 if (
426.                     not f.blank
427.                     and not form_field.required
428.                     and field_value in form_field.empty_values
429.                 ):
430.                     exclude.add(f.name)
431.         return exclude
432. 
433.     def clean(self):
434.         self._validate_unique = True
435.         return self.cleaned_data
436. 
437.     def _update_errors(self, errors):
438.         # Override any validation error messages defined at the model level
439.         # with those defined at the form level.
440.         opts = self._meta
441. 
442.         # Allow the model generated by construct_instance() to raise
443.         # ValidationError and have them handled in the same way as others.
444.         if hasattr(errors, "error_dict"):
445.             error_dict = errors.error_dict
446.         else:
447.             error_dict = {NON_FIELD_ERRORS: errors}
448. 
449.         for field, messages in error_dict.items():
450.             if (
451.                 field == NON_FIELD_ERRORS
452.                 and opts.error_messages
453.                 and NON_FIELD_ERRORS in opts.error_messages
454.             ):
455.                 error_messages = opts.error_messages[NON_FIELD_ERRORS]
456.             elif field in self.fields:
457.                 error_messages = self.fields[field].error_messages
458.             else:
459.                 continue
460. 
461.             for message in messages:
462.                 if (
463.                     isinstance(message, ValidationError)
464.                     and message.code in error_messages
465.                 ):
466.                     message.message = error_messages[message.code]
467. 
468.         self.add_error(None, errors)
469. 
470.     def _post_clean(self):
471.         opts = self._meta
472. 
473.         exclude = self._get_validation_exclusions()
474. 
475.         # Foreign Keys being used to represent inline relationships
476.         # are excluded from basic field value validation. This is for two
477.         # reasons: firstly, the value may not be supplied (#12507; the
478.         # case of providing new values to the admin); secondly the
479.         # object being referred to may not yet fully exist (#12749).
480.         # However, these fields *must* be included in uniqueness checks,
481.         # so this can't be part of _get_validation_exclusions().
482.         for name, field in self.fields.items():
483.             if isinstance(field, InlineForeignKeyField):
484.                 exclude.add(name)
485. 
486.         try:
487.             self.instance = construct_instance(
488.                 self, self.instance, opts.fields, opts.exclude
489.             )
490.         except ValidationError as e:
491.             self._update_errors(e)
492. 
493.         try:
494.             self.instance.full_clean(exclude=exclude, validate_unique=False)
495.         except ValidationError as e:
496.             self._update_errors(e)
497. 
498.         # Validate uniqueness if needed.
499.         if self._validate_unique:
500.             self.validate_unique()
501. 
502.     def validate_unique(self):
503.         """
504.         Call the instance's validate_unique() method and update the form's
505.         validation errors if any were raised.
506.         """
507.         exclude = self._get_validation_exclusions()
508.         try:
509.             self.instance.validate_unique(exclude=exclude)
510.         except ValidationError as e:
511.             self._update_errors(e)
512. 
513.     def _save_m2m(self):
514.         """
515.         Save the many-to-many fields and generic relations for this form.
516.         """
517.         cleaned_data = self.cleaned_data
518.         exclude = self._meta.exclude
519.         fields = self._meta.fields
520.         opts = self.instance._meta
521.         # Note that for historical reasons we want to include also
522.         # private_fields here. (GenericRelation was previously a fake
523.         # m2m field).
524.         for f in chain(opts.many_to_many, opts.private_fields):
525.             if not hasattr(f, "save_form_data"):
526.                 continue
527.             if fields and f.name not in fields:
528.                 continue
529.             if exclude and f.name in exclude:
530.                 continue
531.             if f.name in cleaned_data:
532.                 f.save_form_data(self.instance, cleaned_data[f.name])
533. 
534.     def save(self, commit=True):
535.         """
536.         Save this form's self.instance object if commit=True. Otherwise, add
537.         a save_m2m() method to the form which can be called after the instance
538.         is saved manually at a later time. Return the model instance.
539.         """
540.         if self.errors:
541.             raise ValueError(
542.                 "The %s could not be %s because the data didn't validate."
543.                 % (
544.                     self.instance._meta.object_name,
545.                     "created" if self.instance._state.adding else "changed",
546.                 )
547.             )
548.         if commit:
549.             # If committing, save the instance and the m2m data immediately.
550.             self.instance.save()
551.             self._save_m2m()
552.         else:
553.             # If not committing, add a method to the form to allow deferred
554.             # saving of m2m data.
555.             self.save_m2m = self._save_m2m
556.         return self.instance
557. 
558.     save.alters_data = True
559. 
560. 
561. class ModelForm(BaseModelForm, metaclass=ModelFormMetaclass):
562.     pass
563. 
564. 
565. def modelform_factory(
566.     model,
567.     form=ModelForm,
568.     fields=None,
569.     exclude=None,
570.     formfield_callback=None,
571.     widgets=None,
572.     localized_fields=None,
573.     labels=None,
574.     help_texts=None,
575.     error_messages=None,
576.     field_classes=None,
577. ):
578.     """
579.     Return a ModelForm containing form fields for the given model. You can
580.     optionally pass a `form` argument to use as a starting point for
581.     constructing the ModelForm.
582. 
583.     ``fields`` is an optional list of field names. If provided, include only
584.     the named fields in the returned fields. If omitted or '__all__', use all
585.     fields.
586. 
587.     ``exclude`` is an optional list of field names. If provided, exclude the
588.     named fields from the returned fields, even if they are listed in the
589.     ``fields`` argument.
590. 
591.     ``widgets`` is a dictionary of model field names mapped to a widget.
592. 
593.     ``localized_fields`` is a list of names of fields which should be localized.
594. 
595.     ``formfield_callback`` is a callable that takes a model field and returns
596.     a form field.
597. 
598.     ``labels`` is a dictionary of model field names mapped to a label.
599. 
600.     ``help_texts`` is a dictionary of model field names mapped to a help text.
601. 
602.     ``error_messages`` is a dictionary of model field names mapped to a
603.     dictionary of error messages.
604. 
605.     ``field_classes`` is a dictionary of model field names mapped to a form
606.     field class.
607.     """
608.     # Create the inner Meta class. FIXME: ideally, we should be able to
609.     # construct a ModelForm without creating and passing in a temporary
610.     # inner class.
611. 
612.     # Build up a list of attributes that the Meta object will have.
613.     attrs = {"model": model}
614.     if fields is not None:
615.         attrs["fields"] = fields
616.     if exclude is not None:
617.         attrs["exclude"] = exclude
618.     if widgets is not None:
619.         attrs["widgets"] = widgets
620.     if localized_fields is not None:
621.         attrs["localized_fields"] = localized_fields
622.     if labels is not None:
623.         attrs["labels"] = labels
624.     if help_texts is not None:
625.         attrs["help_texts"] = help_texts
626.     if error_messages is not None:
627.         attrs["error_messages"] = error_messages
628.     if field_classes is not None:
629.         attrs["field_classes"] = field_classes
630. 
631.     # If parent form class already has an inner Meta, the Meta we're
632.     # creating needs to inherit from the parent's inner meta.
633.     bases = (form.Meta,) if hasattr(form, "Meta") else ()
634.     Meta = type("Meta", bases, attrs)
635.     if formfield_callback:
636.         Meta.formfield_callback = staticmethod(formfield_callback)
637.     # Give this new form class a reasonable name.
638.     class_name = model.__name__ + "Form"
639. 
640.     # Class attributes for the new form class.
641.     form_class_attrs = {"Meta": Meta}
642. 
643.     if getattr(Meta, "fields", None) is None and getattr(Meta, "exclude", None) is None:
644.         raise ImproperlyConfigured(
645.             "Calling modelform_factory without defining 'fields' or "
646.             "'exclude' explicitly is prohibited."
647.         )
648. 
649.     # Instantiate type(form) in order to use the same metaclass as form.
650.     return type(form)(class_name, (form,), form_class_attrs)
651. 
652. 
653. # ModelFormSets ##############################################################
654. 
655. 
656. class BaseModelFormSet(BaseFormSet, AltersData):
657.     """
658.     A ``FormSet`` for editing a queryset and/or adding new objects to it.
659.     """
660. 
661.     model = None
662.     edit_only = False
663. 
664.     # Set of fields that must be unique among forms of this set.
665.     unique_fields = set()
666. 
667.     def __init__(
668.         self,
669.         data=None,
670.         files=None,
671.         auto_id="id_%s",
672.         prefix=None,
673.         queryset=None,
674.         *,
675.         initial=None,
676.         **kwargs,
677.     ):
678.         self.queryset = queryset
679.         self.initial_extra = initial
680.         super().__init__(
681.             **{
682.                 "data": data,
683.                 "files": files,
684.                 "auto_id": auto_id,
685.                 "prefix": prefix,
686.                 **kwargs,
687.             }
688.         )
689. 
690.     def initial_form_count(self):
691.         """Return the number of forms that are required in this FormSet."""
692.         if not self.is_bound:
693.             return len(self.get_queryset())
694.         return super().initial_form_count()
695. 
696.     def _existing_object(self, pk):
697.         if not hasattr(self, "_object_dict"):
698.             self._object_dict = {o.pk: o for o in self.get_queryset()}
699.         return self._object_dict.get(pk)
700. 
701.     def _get_to_python(self, field):
702.         """
703.         If the field is a related field, fetch the concrete field's (that
704.         is, the ultimate pointed-to field's) to_python.
705.         """
706.         while field.remote_field is not None:
707.             field = field.remote_field.get_related_field()
708.         return field.to_python
709. 
710.     def _construct_form(self, i, **kwargs):
711.         pk_required = i < self.initial_form_count()
712.         if pk_required:
713.             if self.is_bound:
714.                 pk_key = "%s-%s" % (self.add_prefix(i), self.model._meta.pk.name)
715.                 try:
716.                     pk = self.data[pk_key]
717.                 except KeyError:
718.                     # The primary key is missing. The user may have tampered
719.                     # with POST data.
720.                     pass
721.                 else:
722.                     to_python = self._get_to_python(self.model._meta.pk)
723.                     try:
724.                         pk = to_python(pk)
725.                     except ValidationError:
726.                         # The primary key exists but is an invalid value. The
727.                         # user may have tampered with POST data.
728.                         pass
729.                     else:
730.                         kwargs["instance"] = self._existing_object(pk)
731.             else:
732.                 kwargs["instance"] = self.get_queryset()[i]
733.         elif self.initial_extra:
734.             # Set initial values for extra forms
735.             try:
736.                 kwargs["initial"] = self.initial_extra[i - self.initial_form_count()]
737.             except IndexError:
738.                 pass
739.         form = super()._construct_form(i, **kwargs)
740.         if pk_required:
741.             form.fields[self.model._meta.pk.name].required = True
742.         return form
743. 
744.     def get_queryset(self):
745.         if not hasattr(self, "_queryset"):
746.             if self.queryset is not None:
747.                 qs = self.queryset
748.             else:
749.                 qs = self.model._default_manager.get_queryset()
750. 
751.             # If the queryset isn't already ordered we need to add an
752.             # artificial ordering here to make sure that all formsets
753.             # constructed from this queryset have the same form order.
754.             if not qs.ordered:
755.                 qs = qs.order_by(self.model._meta.pk.name)
756. 
757.             # Removed queryset limiting here. As per discussion re: #13023
758.             # on django-dev, max_num should not prevent existing
759.             # related objects/inlines from being displayed.
760.             self._queryset = qs
761.         return self._queryset
762. 
763.     def save_new(self, form, commit=True):
764.         """Save and return a new model instance for the given form."""
765.         return form.save(commit=commit)
766. 
767.     def save_existing(self, form, obj, commit=True):
768.         """Save and return an existing model instance for the given form."""
769.         return form.save(commit=commit)
770. 
771.     def delete_existing(self, obj, commit=True):
772.         """Deletes an existing model instance."""
773.         if commit:
774.             obj.delete()
775. 
776.     def save(self, commit=True):
777.         """
778.         Save model instances for every form, adding and changing instances
779.         as necessary, and return the list of instances.
780.         """
781.         if not commit:
782.             self.saved_forms = []
783. 
784.             def save_m2m():
785.                 for form in self.saved_forms:
786.                     form.save_m2m()
787. 
788.             self.save_m2m = save_m2m
789.         if self.edit_only:
790.             return self.save_existing_objects(commit)
791.         else:
792.             return self.save_existing_objects(commit) + self.save_new_objects(commit)
793. 
794.     save.alters_data = True
795. 
796.     def clean(self):
797.         self.validate_unique()
798. 
799.     def validate_unique(self):
800.         # Collect unique_checks and date_checks to run from all the forms.
801.         all_unique_checks = set()
802.         all_date_checks = set()
803.         forms_to_delete = self.deleted_forms
804.         valid_forms = [
805.             form
806.             for form in self.forms
807.             if form.is_valid() and form not in forms_to_delete
808.         ]
809.         for form in valid_forms:
810.             exclude = form._get_validation_exclusions()
811.             unique_checks, date_checks = form.instance._get_unique_checks(
812.                 exclude=exclude,
813.                 include_meta_constraints=True,
814.             )
815.             all_unique_checks.update(unique_checks)
816.             all_date_checks.update(date_checks)
817. 
818.         errors = []
819.         # Do each of the unique checks (unique and unique_together)
820.         for uclass, unique_check in all_unique_checks:
821.             seen_data = set()
822.             for form in valid_forms:
823.                 # Get the data for the set of fields that must be unique among
824.                 # the forms.
825.                 row_data = (
826.                     field if field in self.unique_fields else form.cleaned_data[field]
827.                     for field in unique_check
828.                     if field in form.cleaned_data
829.                 )
830.                 # Reduce Model instances to their primary key values
831.                 row_data = tuple(
832.                     d._get_pk_val() if hasattr(d, "_get_pk_val")
833.                     # Prevent "unhashable type: list" errors later on.
834.                     else tuple(d) if isinstance(d, list) else d
835.                     for d in row_data
836.                 )
837.                 if row_data and None not in row_data:
838.                     # if we've already seen it then we have a uniqueness failure
839.                     if row_data in seen_data:
840.                         # poke error messages into the right places and mark
841.                         # the form as invalid
842.                         errors.append(self.get_unique_error_message(unique_check))
843.                         form._errors[NON_FIELD_ERRORS] = self.error_class(
844.                             [self.get_form_error()],
845.                             renderer=self.renderer,
846.                         )
847.                         # Remove the data from the cleaned_data dict since it
848.                         # was invalid.
849.                         for field in unique_check:
850.                             if field in form.cleaned_data:
851.                                 del form.cleaned_data[field]
852.                     # mark the data as seen
853.                     seen_data.add(row_data)
854.         # iterate over each of the date checks now
855.         for date_check in all_date_checks:
856.             seen_data = set()
857.             uclass, lookup, field, unique_for = date_check
858.             for form in valid_forms:
859.                 # see if we have data for both fields
860.                 if (
861.                     form.cleaned_data
862.                     and form.cleaned_data[field] is not None
863.                     and form.cleaned_data[unique_for] is not None
864.                 ):
865.                     # if it's a date lookup we need to get the data for all the fields
866.                     if lookup == "date":
867.                         date = form.cleaned_data[unique_for]
868.                         date_data = (date.year, date.month, date.day)
869.                     # otherwise it's just the attribute on the date/datetime
870.                     # object
871.                     else:
872.                         date_data = (getattr(form.cleaned_data[unique_for], lookup),)
873.                     data = (form.cleaned_data[field],) + date_data
874.                     # if we've already seen it then we have a uniqueness failure
875.                     if data in seen_data:
876.                         # poke error messages into the right places and mark
877.                         # the form as invalid
878.                         errors.append(self.get_date_error_message(date_check))
879.                         form._errors[NON_FIELD_ERRORS] = self.error_class(
880.                             [self.get_form_error()],
881.                             renderer=self.renderer,
882.                         )
883.                         # Remove the data from the cleaned_data dict since it
884.                         # was invalid.
885.                         del form.cleaned_data[field]
886.                     # mark the data as seen
887.                     seen_data.add(data)
888. 
889.         if errors:
890.             raise ValidationError(errors)
891. 
892.     def get_unique_error_message(self, unique_check):
893.         if len(unique_check) == 1:
894.             return gettext("Please correct the duplicate data for %(field)s.") % {
895.                 "field": unique_check[0],
896.             }
897.         else:
898.             return gettext(
899.                 "Please correct the duplicate data for %(field)s, which must be unique."
900.             ) % {
901.                 "field": get_text_list(unique_check, _("and")),
902.             }
903. 
904.     def get_date_error_message(self, date_check):
905.         return gettext(
906.             "Please correct the duplicate data for %(field_name)s "
907.             "which must be unique for the %(lookup)s in %(date_field)s."
908.         ) % {
909.             "field_name": date_check[2],
910.             "date_field": date_check[3],
911.             "lookup": str(date_check[1]),
912.         }
913. 
914.     def get_form_error(self):
915.         return gettext("Please correct the duplicate values below.")
916. 
917.     def save_existing_objects(self, commit=True):
918.         self.changed_objects = []
919.         self.deleted_objects = []
920.         if not self.initial_forms:
921.             return []
922. 
923.         saved_instances = []
924.         forms_to_delete = self.deleted_forms
925.         for form in self.initial_forms:
926.             obj = form.instance
927.             # If the pk is None, it means either:
928.             # 1. The object is an unexpected empty model, created by invalid
929.             #    POST data such as an object outside the formset's queryset.
930.             # 2. The object was already deleted from the database.
931.             if obj.pk is None:
932.                 continue
933.             if form in forms_to_delete:
934.                 self.deleted_objects.append(obj)
935.                 self.delete_existing(obj, commit=commit)
936.             elif form.has_changed():
937.                 self.changed_objects.append((obj, form.changed_data))
938.                 saved_instances.append(self.save_existing(form, obj, commit=commit))
939.                 if not commit:
940.                     self.saved_forms.append(form)
941.         return saved_instances
942. 
943.     def save_new_objects(self, commit=True):
944.         self.new_objects = []
945.         for form in self.extra_forms:
946.             if not form.has_changed():
947.                 continue
948.             # If someone has marked an add form for deletion, don't save the
949.             # object.
950.             if self.can_delete and self._should_delete_form(form):
951.                 continue
952.             self.new_objects.append(self.save_new(form, commit=commit))
953.             if not commit:
954.                 self.saved_forms.append(form)
955.         return self.new_objects
956. 
957.     def add_fields(self, form, index):
958.         """Add a hidden field for the object's primary key."""
959.         from django.db.models import AutoField, ForeignKey, OneToOneField
960. 
961.         self._pk_field = pk = self.model._meta.pk
962.         # If a pk isn't editable, then it won't be on the form, so we need to
963.         # add it here so we can tell which object is which when we get the
964.         # data back. Generally, pk.editable should be false, but for some
965.         # reason, auto_created pk fields and AutoField's editable attribute is
966.         # True, so check for that as well.
967. 
968.         def pk_is_not_editable(pk):
969.             return (
970.                 (not pk.editable)
971.                 or (pk.auto_created or isinstance(pk, AutoField))
972.                 or (
973.                     pk.remote_field
974.                     and pk.remote_field.parent_link
975.                     and pk_is_not_editable(pk.remote_field.model._meta.pk)
976.                 )
977.             )
978. 
979.         if pk_is_not_editable(pk) or pk.name not in form.fields:
980.             if form.is_bound:
981.                 # If we're adding the related instance, ignore its primary key
982.                 # as it could be an auto-generated default which isn't actually
983.                 # in the database.
984.                 pk_value = None if form.instance._state.adding else form.instance.pk
985.             else:
986.                 try:
987.                     if index is not None:
988.                         pk_value = self.get_queryset()[index].pk
989.                     else:
990.                         pk_value = None
991.                 except IndexError:
992.                     pk_value = None
993.             if isinstance(pk, (ForeignKey, OneToOneField)):
994.                 qs = pk.remote_field.model._default_manager.get_queryset()
995.             else:
996.                 qs = self.model._default_manager.get_queryset()
997.             qs = qs.using(form.instance._state.db)
998.             if form._meta.widgets:
999.                 widget = form._meta.widgets.get(self._pk_field.name, HiddenInput)
1000.             else:
1001.                 widget = HiddenInput
1002.             form.fields[self._pk_field.name] = ModelChoiceField(
1003.                 qs, initial=pk_value, required=False, widget=widget
1004.             )
1005.         super().add_fields(form, index)
1006. 
1007. 
1008. def modelformset_factory(
1009.     model,
1010.     form=ModelForm,
1011.     formfield_callback=None,
1012.     formset=BaseModelFormSet,
1013.     extra=1,
1014.     can_delete=False,
1015.     can_order=False,
1016.     max_num=None,
1017.     fields=None,
1018.     exclude=None,
1019.     widgets=None,
1020.     validate_max=False,
1021.     localized_fields=None,
1022.     labels=None,
1023.     help_texts=None,
1024.     error_messages=None,
1025.     min_num=None,
1026.     validate_min=False,
1027.     field_classes=None,
1028.     absolute_max=None,
1029.     can_delete_extra=True,
1030.     renderer=None,
1031.     edit_only=False,
1032. ):
1033.     """Return a FormSet class for the given Django model class."""
1034.     meta = getattr(form, "Meta", None)
1035.     if (
1036.         getattr(meta, "fields", fields) is None
1037.         and getattr(meta, "exclude", exclude) is None
1038.     ):
1039.         raise ImproperlyConfigured(
1040.             "Calling modelformset_factory without defining 'fields' or "
1041.             "'exclude' explicitly is prohibited."
1042.         )
1043. 
1044.     form = modelform_factory(
1045.         model,
1046.         form=form,
1047.         fields=fields,
1048.         exclude=exclude,
1049.         formfield_callback=formfield_callback,
1050.         widgets=widgets,
1051.         localized_fields=localized_fields,
1052.         labels=labels,
1053.         help_texts=help_texts,
1054.         error_messages=error_messages,
1055.         field_classes=field_classes,
1056.     )
1057.     FormSet = formset_factory(
1058.         form,
1059.         formset,
1060.         extra=extra,
1061.         min_num=min_num,
1062.         max_num=max_num,
1063.         can_order=can_order,
1064.         can_delete=can_delete,
1065.         validate_min=validate_min,
1066.         validate_max=validate_max,
1067.         absolute_max=absolute_max,
1068.         can_delete_extra=can_delete_extra,
1069.         renderer=renderer,
1070.     )
1071.     FormSet.model = model
1072.     FormSet.edit_only = edit_only
1073.     return FormSet
1074. 
1075. 
1076. # InlineFormSets #############################################################
1077. 
1078. 
1079. class BaseInlineFormSet(BaseModelFormSet):
1080.     """A formset for child objects related to a parent."""
1081. 
1082.     def __init__(
1083.         self,
1084.         data=None,
1085.         files=None,
1086.         instance=None,
1087.         save_as_new=False,
1088.         prefix=None,
1089.         queryset=None,
1090.         **kwargs,
1091.     ):
1092.         if instance is None:
1093.             self.instance = self.fk.remote_field.model()
1094.         else:
1095.             self.instance = instance
1096.         self.save_as_new = save_as_new
1097.         if queryset is None:
1098.             queryset = self.model._default_manager
1099.         if self.instance.pk is not None:
1100.             qs = queryset.filter(**{self.fk.name: self.instance})
1101.         else:
1102.             qs = queryset.none()
1103.         self.unique_fields = {self.fk.name}
1104.         super().__init__(data, files, prefix=prefix, queryset=qs, **kwargs)
1105. 
1106.         # Add the generated field to form._meta.fields if it's defined to make
1107.         # sure validation isn't skipped on that field.
1108.         if self.form._meta.fields and self.fk.name not in self.form._meta.fields:
1109.             if isinstance(self.form._meta.fields, tuple):
1110.                 self.form._meta.fields = list(self.form._meta.fields)
1111.             self.form._meta.fields.append(self.fk.name)
1112. 
1113.     def initial_form_count(self):
1114.         if self.save_as_new:
1115.             return 0
1116.         return super().initial_form_count()
1117. 
1118.     def _construct_form(self, i, **kwargs):
1119.         form = super()._construct_form(i, **kwargs)
1120.         if self.save_as_new:
1121.             mutable = getattr(form.data, "_mutable", None)
1122.             # Allow modifying an immutable QueryDict.
1123.             if mutable is not None:
1124.                 form.data._mutable = True
1125.             # Remove the primary key from the form's data, we are only
1126.             # creating new instances
1127.             form.data[form.add_prefix(self._pk_field.name)] = None
1128.             # Remove the foreign key from the form's data
1129.             form.data[form.add_prefix(self.fk.name)] = None
1130.             if mutable is not None:
1131.                 form.data._mutable = mutable
1132. 
1133.         # Set the fk value here so that the form can do its validation.
1134.         fk_value = self.instance.pk
1135.         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
1136.             fk_value = getattr(self.instance, self.fk.remote_field.field_name)
1137.             fk_value = getattr(fk_value, "pk", fk_value)
1138.         setattr(form.instance, self.fk.get_attname(), fk_value)
1139.         return form
1140. 
1141.     @classmethod
1142.     def get_default_prefix(cls):
1143.         return cls.fk.remote_field.get_accessor_name(model=cls.model).replace("+", "")
1144. 
1145.     def save_new(self, form, commit=True):
1146.         # Ensure the latest copy of the related instance is present on each
1147.         # form (it may have been saved after the formset was originally
1148.         # instantiated).
1149.         setattr(form.instance, self.fk.name, self.instance)
1150.         return super().save_new(form, commit=commit)
1151. 
1152.     def add_fields(self, form, index):
1153.         super().add_fields(form, index)
1154.         if self._pk_field == self.fk:
1155.             name = self._pk_field.name
1156.             kwargs = {"pk_field": True}
1157.         else:
1158.             # The foreign key field might not be on the form, so we poke at the
1159.             # Model field to get the label, since we need that for error messages.
1160.             name = self.fk.name
1161.             kwargs = {
1162.                 "label": getattr(
1163.                     form.fields.get(name), "label", capfirst(self.fk.verbose_name)
1164.                 )
1165.             }
1166. 
1167.         # The InlineForeignKeyField assumes that the foreign key relation is
1168.         # based on the parent model's pk. If this isn't the case, set to_field
1169.         # to correctly resolve the initial form value.
1170.         if self.fk.remote_field.field_name != self.fk.remote_field.model._meta.pk.name:
1171.             kwargs["to_field"] = self.fk.remote_field.field_name
1172. 
1173.         # If we're adding a new object, ignore a parent's auto-generated key
1174.         # as it will be regenerated on the save request.
1175.         if self.instance._state.adding:
1176.             if kwargs.get("to_field") is not None:
1177.                 to_field = self.instance._meta.get_field(kwargs["to_field"])
1178.             else:
1179.                 to_field = self.instance._meta.pk
1180.             if to_field.has_default():
1181.                 setattr(self.instance, to_field.attname, None)
1182. 
1183.         form.fields[name] = InlineForeignKeyField(self.instance, **kwargs)
1184. 
1185.     def get_unique_error_message(self, unique_check):
1186.         unique_check = [field for field in unique_check if field != self.fk.name]
1187.         return super().get_unique_error_message(unique_check)
1188. 
1189. 
1190. def _get_foreign_key(parent_model, model, fk_name=None, can_fail=False):
1191.     """
1192.     Find and return the ForeignKey from model to parent if there is one
1193.     (return None if can_fail is True and no such field exists). If fk_name is
1194.     provided, assume it is the name of the ForeignKey field. Unless can_fail is
1195.     True, raise an exception if there isn't a ForeignKey from model to
1196.     parent_model.
1197.     """
1198.     # avoid circular import
1199.     from django.db.models import ForeignKey
1200. 
1201.     opts = model._meta
1202.     if fk_name:
1203.         fks_to_parent = [f for f in opts.fields if f.name == fk_name]
1204.         if len(fks_to_parent) == 1:
1205.             fk = fks_to_parent[0]
1206.             parent_list = parent_model._meta.get_parent_list()
1207.             if (
1208.                 not isinstance(fk, ForeignKey)
1209.                 or (
1210.                     # ForeignKey to proxy models.
1211.                     fk.remote_field.model._meta.proxy
1212.                     and fk.remote_field.model._meta.proxy_for_model not in parent_list
1213.                 )
1214.                 or (
1215.                     # ForeignKey to concrete models.
1216.                     not fk.remote_field.model._meta.proxy
1217.                     and fk.remote_field.model != parent_model
1218.                     and fk.remote_field.model not in parent_list
1219.                 )
1220.             ):
1221.                 raise ValueError(
1222.                     "fk_name '%s' is not a ForeignKey to '%s'."
1223.                     % (fk_name, parent_model._meta.label)
1224.                 )
1225.         elif not fks_to_parent:
1226.             raise ValueError(
1227.                 "'%s' has no field named '%s'." % (model._meta.label, fk_name)
1228.             )
1229.     else:
1230.         # Try to discover what the ForeignKey from model to parent_model is
1231.         parent_list = parent_model._meta.get_parent_list()
1232.         fks_to_parent = [
1233.             f
1234.             for f in opts.fields
1235.             if isinstance(f, ForeignKey)
1236.             and (
1237.                 f.remote_field.model == parent_model
1238.                 or f.remote_field.model in parent_list
1239.                 or (
1240.                     f.remote_field.model._meta.proxy
1241.                     and f.remote_field.model._meta.proxy_for_model in parent_list
1242.                 )
1243.             )
1244.         ]
1245.         if len(fks_to_parent) == 1:
1246.             fk = fks_to_parent[0]
1247.         elif not fks_to_parent:
1248.             if can_fail:
1249.                 return
1250.             raise ValueError(
1251.                 "'%s' has no ForeignKey to '%s'."
1252.                 % (
1253.                     model._meta.label,
1254.                     parent_model._meta.label,
1255.                 )
1256.             )
1257.         else:
1258.             raise ValueError(
1259.                 "'%s' has more than one ForeignKey to '%s'. You must specify "
1260.                 "a 'fk_name' attribute."
1261.                 % (
1262.                     model._meta.label,
1263.                     parent_model._meta.label,
1264.                 )
1265.             )
1266.     return fk
1267. 
1268. 
1269. def inlineformset_factory(
1270.     parent_model,
1271.     model,
1272.     form=ModelForm,
1273.     formset=BaseInlineFormSet,
1274.     fk_name=None,
1275.     fields=None,
1276.     exclude=None,
1277.     extra=3,
1278.     can_order=False,
1279.     can_delete=True,
1280.     max_num=None,
1281.     formfield_callback=None,
1282.     widgets=None,
1283.     validate_max=False,
1284.     localized_fields=None,
1285.     labels=None,
1286.     help_texts=None,
1287.     error_messages=None,
1288.     min_num=None,
1289.     validate_min=False,
1290.     field_classes=None,
1291.     absolute_max=None,
1292.     can_delete_extra=True,
1293.     renderer=None,
1294.     edit_only=False,
1295. ):
1296.     """
1297.     Return an ``InlineFormSet`` for the given kwargs.
1298. 
1299.     ``fk_name`` must be provided if ``model`` has more than one ``ForeignKey``
1300.     to ``parent_model``.
1301.     """
1302.     fk = _get_foreign_key(parent_model, model, fk_name=fk_name)
1303.     # enforce a max_num=1 when the foreign key to the parent model is unique.
1304.     if fk.unique:
1305.         max_num = 1
1306.     kwargs = {
1307.         "form": form,
1308.         "formfield_callback": formfield_callback,
1309.         "formset": formset,
1310.         "extra": extra,
1311.         "can_delete": can_delete,
1312.         "can_order": can_order,
1313.         "fields": fields,
1314.         "exclude": exclude,
1315.         "min_num": min_num,
1316.         "max_num": max_num,
1317.         "widgets": widgets,
1318.         "validate_min": validate_min,
1319.         "validate_max": validate_max,
1320.         "localized_fields": localized_fields,
1321.         "labels": labels,
1322.         "help_texts": help_texts,
1323.         "error_messages": error_messages,
1324.         "field_classes": field_classes,
1325.         "absolute_max": absolute_max,
1326.         "can_delete_extra": can_delete_extra,
1327.         "renderer": renderer,
1328.         "edit_only": edit_only,
1329.     }
1330.     FormSet = modelformset_factory(model, **kwargs)
1331.     FormSet.fk = fk
1332.     return FormSet
1333. 
1334. 
1335. # Fields #####################################################################
1336. 
1337. 
1338. class InlineForeignKeyField(Field):
1339.     """
1340.     A basic integer field that deals with validating the given value to a
1341.     given parent instance in an inline.
1342.     """
1343. 
1344.     widget = HiddenInput
1345.     default_error_messages = {
1346.         "invalid_choice": _("The inline value did not match the parent instance."),
1347.     }
1348. 
1349.     def __init__(self, parent_instance, *args, pk_field=False, to_field=None, **kwargs):
1350.         self.parent_instance = parent_instance
1351.         self.pk_field = pk_field
1352.         self.to_field = to_field
1353.         if self.parent_instance is not None:
1354.             if self.to_field:
1355.                 kwargs["initial"] = getattr(self.parent_instance, self.to_field)
1356.             else:
1357.                 kwargs["initial"] = self.parent_instance.pk
1358.         kwargs["required"] = False
1359.         super().__init__(*args, **kwargs)
1360. 
1361.     def clean(self, value):
1362.         if value in self.empty_values:
1363.             if self.pk_field:
1364.                 return None
1365.             # if there is no value act as we did before.
1366.             return self.parent_instance
1367.         # ensure the we compare the values as equal types.
1368.         if self.to_field:
1369.             orig = getattr(self.parent_instance, self.to_field)
1370.         else:
1371.             orig = self.parent_instance.pk
1372.         if str(value) != str(orig):
1373.             raise ValidationError(
1374.                 self.error_messages["invalid_choice"], code="invalid_choice"
1375.             )
1376.         return self.parent_instance
1377. 
1378.     def has_changed(self, initial, data):
1379.         return False
1380. 
1381. 
1382. class ModelChoiceIteratorValue:
1383.     def __init__(self, value, instance):
1384.         self.value = value
1385.         self.instance = instance
1386. 
1387.     def __str__(self):
1388.         return str(self.value)
1389. 
1390.     def __hash__(self):
1391.         return hash(self.value)
1392. 
1393.     def __eq__(self, other):
1394.         if isinstance(other, ModelChoiceIteratorValue):
1395.             other = other.value
1396.         return self.value == other
1397. 
1398. 
1399. class ModelChoiceIterator:
1400.     def __init__(self, field):
1401.         self.field = field
1402.         self.queryset = field.queryset
1403. 
1404.     def __iter__(self):
1405.         if self.field.empty_label is not None:
1406.             yield ("", self.field.empty_label)
1407.         queryset = self.queryset
1408.         # Can't use iterator() when queryset uses prefetch_related()
1409.         if not queryset._prefetch_related_lookups:
1410.             queryset = queryset.iterator()
1411.         for obj in queryset:
1412.             yield self.choice(obj)
1413. 
1414.     def __len__(self):
1415.         # count() adds a query but uses less memory since the QuerySet results
1416.         # won't be cached. In most cases, the choices will only be iterated on,
1417.         # and __len__() won't be called.
1418.         return self.queryset.count() + (1 if self.field.empty_label is not None else 0)
1419. 
1420.     def __bool__(self):
1421.         return self.field.empty_label is not None or self.queryset.exists()
1422. 
1423.     def choice(self, obj):
1424.         return (
1425.             ModelChoiceIteratorValue(self.field.prepare_value(obj), obj),
1426.             self.field.label_from_instance(obj),
1427.         )
1428. 
1429. 
1430. class ModelChoiceField(ChoiceField):
1431.     """A ChoiceField whose choices are a model QuerySet."""
1432. 
1433.     # This class is a subclass of ChoiceField for purity, but it doesn't
1434.     # actually use any of ChoiceField's implementation.
1435.     default_error_messages = {
1436.         "invalid_choice": _(
1437.             "Select a valid choice. That choice is not one of the available choices."
1438.         ),
1439.     }
1440.     iterator = ModelChoiceIterator
1441. 
1442.     def __init__(
1443.         self,
1444.         queryset,
1445.         *,
1446.         empty_label="---------",
1447.         required=True,
1448.         widget=None,
1449.         label=None,
1450.         initial=None,
1451.         help_text="",
1452.         to_field_name=None,
1453.         limit_choices_to=None,
1454.         blank=False,
1455.         **kwargs,
1456.     ):
1457.         # Call Field instead of ChoiceField __init__() because we don't need
1458.         # ChoiceField.__init__().
1459.         Field.__init__(
1460.             self,
1461.             required=required,
1462.             widget=widget,
1463.             label=label,
1464.             initial=initial,
1465.             help_text=help_text,
1466.             **kwargs,
1467.         )
1468.         if (required and initial is not None) or (
1469.             isinstance(self.widget, RadioSelect) and not blank
1470.         ):
1471.             self.empty_label = None
1472.         else:
1473.             self.empty_label = empty_label
1474.         self.queryset = queryset
1475.         self.limit_choices_to = limit_choices_to  # limit the queryset later.
1476.         self.to_field_name = to_field_name
1477. 
1478.     def get_limit_choices_to(self):
1479.         """
1480.         Return ``limit_choices_to`` for this form field.
1481. 
1482.         If it is a callable, invoke it and return the result.
1483.         """
1484.         if callable(self.limit_choices_to):
1485.             return self.limit_choices_to()
1486.         return self.limit_choices_to
1487. 
1488.     def __deepcopy__(self, memo):
1489.         result = super(ChoiceField, self).__deepcopy__(memo)
1490.         # Need to force a new ModelChoiceIterator to be created, bug #11183
1491.         if self.queryset is not None:
1492.             result.queryset = self.queryset.all()
1493.         return result
1494. 
1495.     def _get_queryset(self):
1496.         return self._queryset
1497. 
1498.     def _set_queryset(self, queryset):
1499.         self._queryset = None if queryset is None else queryset.all()
1500.         self.widget.choices = self.choices
1501. 
1502.     queryset = property(_get_queryset, _set_queryset)
1503. 
1504.     # this method will be used to create object labels by the QuerySetIterator.
1505.     # Override it to customize the label.
1506.     def label_from_instance(self, obj):
1507.         """
1508.         Convert objects into strings and generate the labels for the choices
1509.         presented by this object. Subclasses can override this method to
1510.         customize the display of the choices.
1511.         """
1512.         return str(obj)
1513. 
1514.     def _get_choices(self):
1515.         # If self._choices is set, then somebody must have manually set
1516.         # the property self.choices. In this case, just return self._choices.
1517.         if hasattr(self, "_choices"):
1518.             return self._choices
1519. 
1520.         # Otherwise, execute the QuerySet in self.queryset to determine the
1521.         # choices dynamically. Return a fresh ModelChoiceIterator that has not been
1522.         # consumed. Note that we're instantiating a new ModelChoiceIterator *each*
1523.         # time _get_choices() is called (and, thus, each time self.choices is
1524.         # accessed) so that we can ensure the QuerySet has not been consumed. This
1525.         # construct might look complicated but it allows for lazy evaluation of
1526.         # the queryset.
1527.         return self.iterator(self)
1528. 
1529.     choices = property(_get_choices, ChoiceField._set_choices)
1530. 
1531.     def prepare_value(self, value):
1532.         if hasattr(value, "_meta"):
1533.             if self.to_field_name:
1534.                 return value.serializable_value(self.to_field_name)
1535.             else:
1536.                 return value.pk
1537.         return super().prepare_value(value)
1538. 
1539.     def to_python(self, value):
1540.         if value in self.empty_values:
1541.             return None
1542.         try:
1543.             key = self.to_field_name or "pk"
1544.             if isinstance(value, self.queryset.model):
1545.                 value = getattr(value, key)
1546.             value = self.queryset.get(**{key: value})
1547.         except (ValueError, TypeError, self.queryset.model.DoesNotExist):
1548.             raise ValidationError(
1549.                 self.error_messages["invalid_choice"],
1550.                 code="invalid_choice",
1551.                 params={"value": value},
1552.             )
1553.         return value
1554. 
1555.     def validate(self, value):
1556.         return Field.validate(self, value)
1557. 
1558.     def has_changed(self, initial, data):
1559.         if self.disabled:
1560.             return False
1561.         initial_value = initial if initial is not None else ""
1562.         data_value = data if data is not None else ""
1563.         return str(self.prepare_value(initial_value)) != str(data_value)
1564. 
1565. 
1566. class ModelMultipleChoiceField(ModelChoiceField):
1567.     """A MultipleChoiceField whose choices are a model QuerySet."""
1568. 
1569.     widget = SelectMultiple
1570.     hidden_widget = MultipleHiddenInput
1571.     default_error_messages = {
1572.         "invalid_list": _("Enter a list of values."),
1573.         "invalid_choice": _(
1574.             "Select a valid choice. %(value)s is not one of the available choices."
1575.         ),
1576.         "invalid_pk_value": _("“%(pk)s” is not a valid value."),
1577.     }
1578. 
1579.     def __init__(self, queryset, **kwargs):
1580.         super().__init__(queryset, empty_label=None, **kwargs)
1581. 
1582.     def to_python(self, value):
1583.         if not value:
1584.             return []
1585.         return list(self._check_values(value))
1586. 
1587.     def clean(self, value):
1588.         value = self.prepare_value(value)
1589.         if self.required and not value:
1590.             raise ValidationError(self.error_messages["required"], code="required")
1591.         elif not self.required and not value:
1592.             return self.queryset.none()
1593.         if not isinstance(value, (list, tuple)):
1594.             raise ValidationError(
1595.                 self.error_messages["invalid_list"],
1596.                 code="invalid_list",
1597.             )
1598.         qs = self._check_values(value)
1599.         # Since this overrides the inherited ModelChoiceField.clean
1600.         # we run custom validators here
1601.         self.run_validators(value)
1602.         return qs
1603. 
1604.     def _check_values(self, value):
1605.         """
1606.         Given a list of possible PK values, return a QuerySet of the
1607.         corresponding objects. Raise a ValidationError if a given value is
1608.         invalid (not a valid PK, not in the queryset, etc.)
1609.         """
1610.         key = self.to_field_name or "pk"
1611.         # deduplicate given values to avoid creating many querysets or
1612.         # requiring the database backend deduplicate efficiently.
1613.         try:
1614.             value = frozenset(value)
1615.         except TypeError:
1616.             # list of lists isn't hashable, for example
1617.             raise ValidationError(
1618.                 self.error_messages["invalid_list"],
1619.                 code="invalid_list",
1620.             )
1621.         for pk in value:
1622.             try:
1623.                 self.queryset.filter(**{key: pk})
1624.             except (ValueError, TypeError):
1625.                 raise ValidationError(
1626.                     self.error_messages["invalid_pk_value"],
1627.                     code="invalid_pk_value",
1628.                     params={"pk": pk},
1629.                 )
1630.         qs = self.queryset.filter(**{"%s__in" % key: value})
1631.         pks = {str(getattr(o, key)) for o in qs}
1632.         for val in value:
1633.             if str(val) not in pks:
1634.                 raise ValidationError(
1635.                     self.error_messages["invalid_choice"],
1636.                     code="invalid_choice",
1637.                     params={"value": val},
1638.                 )
1639.         return qs
1640. 
1641.     def prepare_value(self, value):
1642.         if (
1643.             hasattr(value, "__iter__")
1644.             and not isinstance(value, str)
1645.             and not hasattr(value, "_meta")
1646.         ):
1647.             prepare_value = super().prepare_value
1648.             return [prepare_value(v) for v in value]
1649.         return super().prepare_value(value)
1650. 
1651.     def has_changed(self, initial, data):
1652.         if self.disabled:
1653.             return False
1654.         if initial is None:
1655.             initial = []
1656.         if data is None:
1657.             data = []
1658.         if len(initial) != len(data):
1659.             return True
1660.         initial_set = {str(value) for value in self.prepare_value(initial)}
1661.         data_set = {str(value) for value in data}
1662.         return data_set != initial_set
1663. 
1664. 
1665. def modelform_defines_fields(form_class):
1666.     return hasattr(form_class, "_meta") and (
1667.         form_class._meta.fields is not None or form_class._meta.exclude is not None
1668.     )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-24 21:17:45,079 - thread-128180010612416.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The provided context, including `django/forms/models.py` and `django/db/models/fields/__init__.py`, is sufficient to understand the issue. The bug is in `BaseInlineFormSet.add_fields` (or a related method in newer Django versions) where it incorrectly nullifies a `UUIDField` on a new parent instance when an inline form is present. The provided patch and the code for `Field.has_default()` and the `UUIDField` and `AutoField` classes are all available, which is enough to understand the problem and the proposed solution. No further context is needed.' query='' extra_requirements='' purpose=''
2025-12-24 21:17:45,080 - thread-128180010612416.prometheus_context_collector - INFO - Successfully retrieved 2 context snippets
