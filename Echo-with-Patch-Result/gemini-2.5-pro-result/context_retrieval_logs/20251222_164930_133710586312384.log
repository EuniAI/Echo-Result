2025-12-22 16:49:30,386 - thread-133710586312384.prometheus_context_collector - INFO - Starting context retrieval for query: 
Issue: Database converters (from_db_value) not called for returning_fields on insert

Description: Description
	
Making a subclass of BigAutoField, I've found that, unlike all other query pathways, on insert the returned integer is not passed through any database converters defined for the field - including the from_db_value hook.
This means that a field which would normally use a wrapper class has instead a plain integer.
Take this field:
class MyAutoField(models.BigAutoField):
	def from_db_value(self, value, expression, connection):
		if value is None:
			return None
		return MyIntWrapper(value)
	def get_prep_value(self, value):
		if value is None:
			return None
		return int(value)
And a model that uses it:
class AutoModel(models.Model):
	id = MyAutoField(primary_key=True)
Queried instances have the wrapper class for id:
>>> am = AutoModel.objects.first()
>>> am.id
<MyIntWrapper: 1>
But on creation, the returned integer is directly set as an attribute on the class:
>>> am2 = AutoModel.objects.create()
>>> am2.id
2
This also affects bulk_create on backends that support fetching the primary key value:
>>> ams = [AutoModel()]
>>> AutoModel.objects.bulk_create(ams)
[<AutoModel: AutoModel object (2)>]
>>> ams[0].id
2

Patch information:
diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py
index f02199d97c..bc06ac3cc4 100644
--- a/django/db/models/sql/compiler.py
+++ b/django/db/models/sql/compiler.py
@@ -1411,14 +1411,30 @@ class SQLInsertCompiler(SQLCompiler):
                 cursor.execute(sql, params)
             if not self.returning_fields:
                 return []
+            # Fetch rows/columns returned by the INSERT.
             if self.connection.features.can_return_rows_from_bulk_insert and len(self.query.objs) > 1:
-                return self.connection.ops.fetch_returned_insert_rows(cursor)
-            if self.connection.features.can_return_columns_from_insert:
+                rows = self.connection.ops.fetch_returned_insert_rows(cursor)
+            elif self.connection.features.can_return_columns_from_insert:
                 assert len(self.query.objs) == 1
-                return [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
-            return [(self.connection.ops.last_insert_id(
-                cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
-            ),)]
+                rows = [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
+            else:
+                rows = [(self.connection.ops.last_insert_id(
+                    cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
+                ),)]
+            # Apply database and field converters (e.g., from_db_value) to the
+            # returned values so they match the types produced by SELECT queries.
+            if self.returning_fields:
+                # Only apply converters for the number of columns actually returned.
+                if rows:
+                    num_cols = len(rows[0])
+                else:
+                    num_cols = 0
+                fields_for_conversion = self.returning_fields[:num_cols] if num_cols else []
+                if fields_for_conversion:
+                    converters = self.get_converters(fields_for_conversion)
+                    if converters:
+                        rows = [tuple(row) for row in self.apply_converters(rows, converters)]
+            return rows
 
 
 class SQLDeleteCompiler(SQLCompiler):


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

2025-12-22 16:49:30,474 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Database converters (from_db_value) not called for returning_fields on insert

Description: Description
	
Making a subclass of BigAutoField, I've found that, unlike all other query pathways, on insert the returned integer is not passed through any database converters defined for the field - including the from_db_value hook.
This means that a field which would normally use a wrapper class has instead a plain integer.
Take this field:
class MyAutoField(models.BigAutoField):
	def from_db_value(self, value, expression, connection):
		if value is None:
			return None
		return MyIntWrapper(value)
	def get_prep_value(self, value):
		if value is None:
			return None
		return int(value)
And a model that uses it:
class AutoModel(models.Model):
	id = MyAutoField(primary_key=True)
Queried instances have the wrapper class for id:
>>> am = AutoModel.objects.first()
>>> am.id
<MyIntWrapper: 1>
But on creation, the returned integer is directly set as an attribute on the class:
>>> am2 = AutoModel.objects.create()
>>> am2.id
2
This also affects bulk_create on backends that support fetching the primary key value:
>>> ams = [AutoModel()]
>>> AutoModel.objects.bulk_create(ams)
[<AutoModel: AutoModel object (2)>]
>>> ams[0].id
2

Patch information:
diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py
index f02199d97c..bc06ac3cc4 100644
--- a/django/db/models/sql/compiler.py
+++ b/django/db/models/sql/compiler.py
@@ -1411,14 +1411,30 @@ class SQLInsertCompiler(SQLCompiler):
                 cursor.execute(sql, params)
             if not self.returning_fields:
                 return []
+            # Fetch rows/columns returned by the INSERT.
             if self.connection.features.can_return_rows_from_bulk_insert and len(self.query.objs) > 1:
-                return self.connection.ops.fetch_returned_insert_rows(cursor)
-            if self.connection.features.can_return_columns_from_insert:
+                rows = self.connection.ops.fetch_returned_insert_rows(cursor)
+            elif self.connection.features.can_return_columns_from_insert:
                 assert len(self.query.objs) == 1
-                return [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
-            return [(self.connection.ops.last_insert_id(
-                cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
-            ),)]
+                rows = [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
+            else:
+                rows = [(self.connection.ops.last_insert_id(
+                    cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
+                ),)]
+            # Apply database and field converters (e.g., from_db_value) to the
+            # returned values so they match the types produced by SELECT queries.
+            if self.returning_fields:
+                # Only apply converters for the number of columns actually returned.
+                if rows:
+                    num_cols = len(rows[0])
+                else:
+                    num_cols = 0
+                fields_for_conversion = self.returning_fields[:num_cols] if num_cols else []
+                if fields_for_conversion:
+                    converters = self.get_converters(fields_for_conversion)
+                    if converters:
+                        rows = [tuple(row) for row in self.apply_converters(rows, converters)]
+            return rows
 
 
 class SQLDeleteCompiler(SQLCompiler):


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-22 16:49:59,615 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The user has provided a patch to `django/db/models/sql/compiler.py`. The patch is inside the `SQLInsertCompiler.execute_sql` method and calls `get_converters` and `apply_converters` which are likely defined in the base `SQLCompiler` class. To understand the patch and its context, I need the full source code for both `SQLInsertCompiler` and `SQLCompiler`. Both are located in `django/db/models/sql/compiler.py`.' query='Please provide the full content of the file `django/db/models/sql/compiler.py`.' extra_requirements='' purpose='This file contains the core logic for SQL query compilation, including the `SQLInsertCompiler` that is being patched, and its parent `SQLCompiler` which provides the methods used in the patch. This is essential to understand the fix.'
2025-12-22 16:49:59,616 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/models/sql/compiler.py`.
2025-12-22 16:49:59,616 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-22 16:49:59,616 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-22 16:49:59,617 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-22 16:49:59,617 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/models/sql/compiler.py`.
Purpose: This file contains the core logic for SQL query compilation, including the `SQLInsertCompiler` that is being patched, and its parent `SQLCompiler` which provides the methods used in the patch. This is essential to understand the fix.
2025-12-22 16:50:03,240 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the file `django/db/models/sql/compiler.py`. This file is crucial for understanding the core logic of SQL query compilation in Django, particularly for analyzing the `SQLInsertCompiler` and its parent class, `SQLCompiler`. The methods within these classes are directly relevant to the patch being examined.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/sql/compiler.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2128, 'candidates_token_count': 95, 'total_token_count': 2399, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2128}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 95}], 'thoughts_token_count': 176, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.14840891988653887, 'model_name': 'gemini-2.5-pro'} id='run--46f4ef5b-2d72-42e3-b587-8fa97a827a13-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/sql/compiler.py'}, 'id': '930460a6-7abf-4ad4-8999-45aefead4037', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2128, 'output_tokens': 95, 'total_tokens': 2399, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 176}}
2025-12-22 16:51:09,372 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the remaining content of the `django/db/models/sql/compiler.py` file. I will now combine this with the previously fetched content to provide you with the complete file. This will give you the full context of the SQL query compilation logic, including the `SQLInsertCompiler` and `SQLCompiler` classes.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "django/db/models/sql/compiler.py", "end_line": 1000.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 10171, 'candidates_token_count': 100, 'total_token_count': 18760, 'cached_content_token_count': 1854, 'prompt_tokens_details': [{'modality': 1, 'token_count': 10171}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1854}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 100}], 'thoughts_token_count': 8489}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5672241592407227, 'model_name': 'gemini-2.5-pro'} id='run--57fe75ff-a3cd-4817-8426-5d1470ca16d1-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'django/db/models/sql/compiler.py', 'end_line': 1000.0}, 'id': '67060764-6755-4cc6-ac5b-645f3509a3c9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10171, 'output_tokens': 100, 'total_tokens': 18760, 'input_token_details': {'cache_read': 1854}, 'output_token_details': {'reasoning': 8489}}
2025-12-22 16:51:14,588 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have now retrieved the entire content of `django/db/models/sql/compiler.py`. This file is essential for understanding the SQL query compilation process in Django, including the `SQLInsertCompiler` and its parent `SQLCompiler`, which are central to the issue at hand. The full code is now available for your analysis.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 1001.0, "relative_path": "django/db/models/sql/compiler.py", "end_line": 1500.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 18467, 'candidates_token_count': 99, 'total_token_count': 18644, 'cached_content_token_count': 9554, 'prompt_tokens_details': [{'modality': 1, 'token_count': 18467}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9554}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 99}], 'thoughts_token_count': 78}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21855955412893585, 'model_name': 'gemini-2.5-pro'} id='run--1dd84e49-0b0c-46af-8920-a5e39987c4bc-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 1001.0, 'relative_path': 'django/db/models/sql/compiler.py', 'end_line': 1500.0}, 'id': 'deae4cb8-3598-4c0b-bfe0-317ea7196640', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18467, 'output_tokens': 99, 'total_tokens': 18644, 'input_token_details': {'cache_read': 9554}, 'output_token_details': {'reasoning': 78}}
2025-12-22 16:51:17,650 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have successfully retrieved the entire content of the file `django/db/models/sql/compiler.py`. This file provides the complete implementation for the `SQLCompiler`, `SQLInsertCompiler`, `SQLDeleteCompiler`, and `SQLUpdateCompiler` classes, which are fundamental to understanding how Django constructs and executes SQL queries. You now have the full context to analyze the query compilation logic.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 26848, 'candidates_token_count': 79, 'total_token_count': 27036, 'cached_content_token_count': 17406, 'prompt_tokens_details': [{'modality': 1, 'token_count': 26848}], 'cache_tokens_details': [{'modality': 1, 'token_count': 17406}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 79}], 'thoughts_token_count': 109}, 'finish_reason': 'STOP', 'avg_logprobs': -0.297655467745624, 'model_name': 'gemini-2.5-pro'} id='run--e16bb198-c70d-4bde-bd68-33505e075b91-0' usage_metadata={'input_tokens': 26848, 'output_tokens': 79, 'total_tokens': 27036, 'input_token_details': {'cache_read': 17406}, 'output_token_details': {'reasoning': 109}}
2025-12-22 16:51:17,653 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/models/sql/compiler.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
This file contains the core logic for SQL query compilation, including the `SQLInsertCompiler` that is being patched, and its parent `SQLCompiler` which provides the methods used in the patch. This is essential to understand the fix.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/sql/compiler.py
Line number range: 1 - 500
Content:
1. import collections
2. import re
3. from functools import partial
4. from itertools import chain
5. 
6. from django.core.exceptions import EmptyResultSet, FieldError
7. from django.db import DatabaseError, NotSupportedError
8. from django.db.models.constants import LOOKUP_SEP
9. from django.db.models.expressions import F, OrderBy, RawSQL, Ref, Value
10. from django.db.models.functions import Cast, Random
11. from django.db.models.query_utils import Q, select_related_descend
12. from django.db.models.sql.constants import (
13.     CURSOR, GET_ITERATOR_CHUNK_SIZE, MULTI, NO_RESULTS, ORDER_DIR, SINGLE,
14. )
15. from django.db.models.sql.query import Query, get_order_dir
16. from django.db.transaction import TransactionManagementError
17. from django.utils.functional import cached_property
18. from django.utils.hashable import make_hashable
19. from django.utils.regex_helper import _lazy_re_compile
20. 
21. 
22. class SQLCompiler:
23.     # Multiline ordering SQL clause may appear from RawSQL.
24.     ordering_parts = _lazy_re_compile(
25.         r'^(.*)\s(?:ASC|DESC).*',
26.         re.MULTILINE | re.DOTALL,
27.     )
28. 
29.     def __init__(self, query, connection, using):
30.         self.query = query
31.         self.connection = connection
32.         self.using = using
33.         self.quote_cache = {'*': '*'}
34.         # The select, klass_info, and annotations are needed by QuerySet.iterator()
35.         # these are set as a side-effect of executing the query. Note that we calculate
36.         # separately a list of extra select columns needed for grammatical correctness
37.         # of the query, but these columns are not included in self.select.
38.         self.select = None
39.         self.annotation_col_map = None
40.         self.klass_info = None
41.         self._meta_ordering = None
42. 
43.     def setup_query(self):
44.         if all(self.query.alias_refcount[a] == 0 for a in self.query.alias_map):
45.             self.query.get_initial_alias()
46.         self.select, self.klass_info, self.annotation_col_map = self.get_select()
47.         self.col_count = len(self.select)
48. 
49.     def pre_sql_setup(self):
50.         """
51.         Do any necessary class setup immediately prior to producing SQL. This
52.         is for things that can't necessarily be done in __init__ because we
53.         might not have all the pieces in place at that time.
54.         """
55.         self.setup_query()
56.         order_by = self.get_order_by()
57.         self.where, self.having = self.query.where.split_having()
58.         extra_select = self.get_extra_select(order_by, self.select)
59.         self.has_extra_select = bool(extra_select)
60.         group_by = self.get_group_by(self.select + extra_select, order_by)
61.         return extra_select, order_by, group_by
62. 
63.     def get_group_by(self, select, order_by):
64.         """
65.         Return a list of 2-tuples of form (sql, params).
66. 
67.         The logic of what exactly the GROUP BY clause contains is hard
68.         to describe in other words than "if it passes the test suite,
69.         then it is correct".
70.         """
71.         # Some examples:
72.         #     SomeModel.objects.annotate(Count('somecol'))
73.         #     GROUP BY: all fields of the model
74.         #
75.         #    SomeModel.objects.values('name').annotate(Count('somecol'))
76.         #    GROUP BY: name
77.         #
78.         #    SomeModel.objects.annotate(Count('somecol')).values('name')
79.         #    GROUP BY: all cols of the model
80.         #
81.         #    SomeModel.objects.values('name', 'pk').annotate(Count('somecol')).values('pk')
82.         #    GROUP BY: name, pk
83.         #
84.         #    SomeModel.objects.values('name').annotate(Count('somecol')).values('pk')
85.         #    GROUP BY: name, pk
86.         #
87.         # In fact, the self.query.group_by is the minimal set to GROUP BY. It
88.         # can't be ever restricted to a smaller set, but additional columns in
89.         # HAVING, ORDER BY, and SELECT clauses are added to it. Unfortunately
90.         # the end result is that it is impossible to force the query to have
91.         # a chosen GROUP BY clause - you can almost do this by using the form:
92.         #     .values(*wanted_cols).annotate(AnAggregate())
93.         # but any later annotations, extra selects, values calls that
94.         # refer some column outside of the wanted_cols, order_by, or even
95.         # filter calls can alter the GROUP BY clause.
96. 
97.         # The query.group_by is either None (no GROUP BY at all), True
98.         # (group by select fields), or a list of expressions to be added
99.         # to the group by.
100.         if self.query.group_by is None:
101.             return []
102.         expressions = []
103.         if self.query.group_by is not True:
104.             # If the group by is set to a list (by .values() call most likely),
105.             # then we need to add everything in it to the GROUP BY clause.
106.             # Backwards compatibility hack for setting query.group_by. Remove
107.             # when  we have public API way of forcing the GROUP BY clause.
108.             # Converts string references to expressions.
109.             for expr in self.query.group_by:
110.                 if not hasattr(expr, 'as_sql'):
111.                     expressions.append(self.query.resolve_ref(expr))
112.                 else:
113.                     expressions.append(expr)
114.         # Note that even if the group_by is set, it is only the minimal
115.         # set to group by. So, we need to add cols in select, order_by, and
116.         # having into the select in any case.
117.         ref_sources = {
118.             expr.source for expr in expressions if isinstance(expr, Ref)
119.         }
120.         for expr, _, _ in select:
121.             # Skip members of the select clause that are already included
122.             # by reference.
123.             if expr in ref_sources:
124.                 continue
125.             cols = expr.get_group_by_cols()
126.             for col in cols:
127.                 expressions.append(col)
128.         if not self._meta_ordering:
129.             for expr, (sql, params, is_ref) in order_by:
130.                 # Skip references to the SELECT clause, as all expressions in
131.                 # the SELECT clause are already part of the GROUP BY.
132.                 if not is_ref:
133.                     expressions.extend(expr.get_group_by_cols())
134.         having_group_by = self.having.get_group_by_cols() if self.having else ()
135.         for expr in having_group_by:
136.             expressions.append(expr)
137.         result = []
138.         seen = set()
139.         expressions = self.collapse_group_by(expressions, having_group_by)
140. 
141.         for expr in expressions:
142.             sql, params = self.compile(expr)
143.             sql, params = expr.select_format(self, sql, params)
144.             params_hash = make_hashable(params)
145.             if (sql, params_hash) not in seen:
146.                 result.append((sql, params))
147.                 seen.add((sql, params_hash))
148.         return result
149. 
150.     def collapse_group_by(self, expressions, having):
151.         # If the DB can group by primary key, then group by the primary key of
152.         # query's main model. Note that for PostgreSQL the GROUP BY clause must
153.         # include the primary key of every table, but for MySQL it is enough to
154.         # have the main table's primary key.
155.         if self.connection.features.allows_group_by_pk:
156.             # Determine if the main model's primary key is in the query.
157.             pk = None
158.             for expr in expressions:
159.                 # Is this a reference to query's base table primary key? If the
160.                 # expression isn't a Col-like, then skip the expression.
161.                 if (getattr(expr, 'target', None) == self.query.model._meta.pk and
162.                         getattr(expr, 'alias', None) == self.query.base_table):
163.                     pk = expr
164.                     break
165.             # If the main model's primary key is in the query, group by that
166.             # field, HAVING expressions, and expressions associated with tables
167.             # that don't have a primary key included in the grouped columns.
168.             if pk:
169.                 pk_aliases = {
170.                     expr.alias for expr in expressions
171.                     if hasattr(expr, 'target') and expr.target.primary_key
172.                 }
173.                 expressions = [pk] + [
174.                     expr for expr in expressions
175.                     if expr in having or (
176.                         getattr(expr, 'alias', None) is not None and expr.alias not in pk_aliases
177.                     )
178.                 ]
179.         elif self.connection.features.allows_group_by_selected_pks:
180.             # Filter out all expressions associated with a table's primary key
181.             # present in the grouped columns. This is done by identifying all
182.             # tables that have their primary key included in the grouped
183.             # columns and removing non-primary key columns referring to them.
184.             # Unmanaged models are excluded because they could be representing
185.             # database views on which the optimization might not be allowed.
186.             pks = {
187.                 expr for expr in expressions
188.                 if (
189.                     hasattr(expr, 'target') and
190.                     expr.target.primary_key and
191.                     self.connection.features.allows_group_by_selected_pks_on_model(expr.target.model)
192.                 )
193.             }
194.             aliases = {expr.alias for expr in pks}
195.             expressions = [
196.                 expr for expr in expressions if expr in pks or getattr(expr, 'alias', None) not in aliases
197.             ]
198.         return expressions
199. 
200.     def get_select(self):
201.         """
202.         Return three values:
203.         - a list of 3-tuples of (expression, (sql, params), alias)
204.         - a klass_info structure,
205.         - a dictionary of annotations
206. 
207.         The (sql, params) is what the expression will produce, and alias is the
208.         "AS alias" for the column (possibly None).
209. 
210.         The klass_info structure contains the following information:
211.         - The base model of the query.
212.         - Which columns for that model are present in the query (by
213.           position of the select clause).
214.         - related_klass_infos: [f, klass_info] to descent into
215. 
216.         The annotations is a dictionary of {'attname': column position} values.
217.         """
218.         select = []
219.         klass_info = None
220.         annotations = {}
221.         select_idx = 0
222.         for alias, (sql, params) in self.query.extra_select.items():
223.             annotations[alias] = select_idx
224.             select.append((RawSQL(sql, params), alias))
225.             select_idx += 1
226.         assert not (self.query.select and self.query.default_cols)
227.         if self.query.default_cols:
228.             cols = self.get_default_columns()
229.         else:
230.             # self.query.select is a special case. These columns never go to
231.             # any model.
232.             cols = self.query.select
233.         if cols:
234.             select_list = []
235.             for col in cols:
236.                 select_list.append(select_idx)
237.                 select.append((col, None))
238.                 select_idx += 1
239.             klass_info = {
240.                 'model': self.query.model,
241.                 'select_fields': select_list,
242.             }
243.         for alias, annotation in self.query.annotation_select.items():
244.             annotations[alias] = select_idx
245.             select.append((annotation, alias))
246.             select_idx += 1
247. 
248.         if self.query.select_related:
249.             related_klass_infos = self.get_related_selections(select)
250.             klass_info['related_klass_infos'] = related_klass_infos
251. 
252.             def get_select_from_parent(klass_info):
253.                 for ki in klass_info['related_klass_infos']:
254.                     if ki['from_parent']:
255.                         ki['select_fields'] = (klass_info['select_fields'] +
256.                                                ki['select_fields'])
257.                     get_select_from_parent(ki)
258.             get_select_from_parent(klass_info)
259. 
260.         ret = []
261.         for col, alias in select:
262.             try:
263.                 sql, params = self.compile(col)
264.             except EmptyResultSet:
265.                 # Select a predicate that's always False.
266.                 sql, params = '0', ()
267.             else:
268.                 sql, params = col.select_format(self, sql, params)
269.             ret.append((col, (sql, params), alias))
270.         return ret, klass_info, annotations
271. 
272.     def get_order_by(self):
273.         """
274.         Return a list of 2-tuples of form (expr, (sql, params, is_ref)) for the
275.         ORDER BY clause.
276. 
277.         The order_by clause can alter the select clause (for example it
278.         can add aliases to clauses that do not yet have one, or it can
279.         add totally new select clauses).
280.         """
281.         if self.query.extra_order_by:
282.             ordering = self.query.extra_order_by
283.         elif not self.query.default_ordering:
284.             ordering = self.query.order_by
285.         elif self.query.order_by:
286.             ordering = self.query.order_by
287.         elif self.query.get_meta().ordering:
288.             ordering = self.query.get_meta().ordering
289.             self._meta_ordering = ordering
290.         else:
291.             ordering = []
292.         if self.query.standard_ordering:
293.             asc, desc = ORDER_DIR['ASC']
294.         else:
295.             asc, desc = ORDER_DIR['DESC']
296. 
297.         order_by = []
298.         for field in ordering:
299.             if hasattr(field, 'resolve_expression'):
300.                 if isinstance(field, Value):
301.                     # output_field must be resolved for constants.
302.                     field = Cast(field, field.output_field)
303.                 if not isinstance(field, OrderBy):
304.                     field = field.asc()
305.                 if not self.query.standard_ordering:
306.                     field = field.copy()
307.                     field.reverse_ordering()
308.                 order_by.append((field, False))
309.                 continue
310.             if field == '?':  # random
311.                 order_by.append((OrderBy(Random()), False))
312.                 continue
313. 
314.             col, order = get_order_dir(field, asc)
315.             descending = order == 'DESC'
316. 
317.             if col in self.query.annotation_select:
318.                 # Reference to expression in SELECT clause
319.                 order_by.append((
320.                     OrderBy(Ref(col, self.query.annotation_select[col]), descending=descending),
321.                     True))
322.                 continue
323.             if col in self.query.annotations:
324.                 # References to an expression which is masked out of the SELECT
325.                 # clause.
326.                 if self.query.combinator and self.select:
327.                     # Don't use the resolved annotation because other
328.                     # combinated queries might define it differently.
329.                     expr = F(col)
330.                 else:
331.                     expr = self.query.annotations[col]
332.                     if isinstance(expr, Value):
333.                         # output_field must be resolved for constants.
334.                         expr = Cast(expr, expr.output_field)
335.                 order_by.append((OrderBy(expr, descending=descending), False))
336.                 continue
337. 
338.             if '.' in field:
339.                 # This came in through an extra(order_by=...) addition. Pass it
340.                 # on verbatim.
341.                 table, col = col.split('.', 1)
342.                 order_by.append((
343.                     OrderBy(
344.                         RawSQL('%s.%s' % (self.quote_name_unless_alias(table), col), []),
345.                         descending=descending
346.                     ), False))
347.                 continue
348. 
349.             if not self.query.extra or col not in self.query.extra:
350.                 # 'col' is of the form 'field' or 'field1__field2' or
351.                 # '-field1__field2__field', etc.
352.                 order_by.extend(self.find_ordering_name(
353.                     field, self.query.get_meta(), default_order=asc))
354.             else:
355.                 if col not in self.query.extra_select:
356.                     order_by.append((
357.                         OrderBy(RawSQL(*self.query.extra[col]), descending=descending),
358.                         False))
359.                 else:
360.                     order_by.append((
361.                         OrderBy(Ref(col, RawSQL(*self.query.extra[col])), descending=descending),
362.                         True))
363.         result = []
364.         seen = set()
365. 
366.         for expr, is_ref in order_by:
367.             resolved = expr.resolve_expression(self.query, allow_joins=True, reuse=None)
368.             if self.query.combinator and self.select:
369.                 src = resolved.get_source_expressions()[0]
370.                 expr_src = expr.get_source_expressions()[0]
371.                 # Relabel order by columns to raw numbers if this is a combined
372.                 # query; necessary since the columns can't be referenced by the
373.                 # fully qualified name and the simple column names may collide.
374.                 for idx, (sel_expr, _, col_alias) in enumerate(self.select):
375.                     if is_ref and col_alias == src.refs:
376.                         src = src.source
377.                     elif col_alias and not (
378.                         isinstance(expr_src, F) and col_alias == expr_src.name
379.                     ):
380.                         continue
381.                     if src == sel_expr:
382.                         resolved.set_source_expressions([RawSQL('%d' % (idx + 1), ())])
383.                         break
384.                 else:
385.                     if col_alias:
386.                         raise DatabaseError('ORDER BY term does not match any column in the result set.')
387.                     # Add column used in ORDER BY clause to the selected
388.                     # columns and to each combined query.
389.                     order_by_idx = len(self.query.select) + 1
390.                     col_name = f'__orderbycol{order_by_idx}'
391.                     for q in self.query.combined_queries:
392.                         q.add_annotation(expr_src, col_name)
393.                     self.query.add_select_col(resolved, col_name)
394.                     resolved.set_source_expressions([RawSQL(f'{order_by_idx}', ())])
395.             sql, params = self.compile(resolved)
396.             # Don't add the same column twice, but the order direction is
397.             # not taken into account so we strip it. When this entire method
398.             # is refactored into expressions, then we can check each part as we
399.             # generate it.
400.             without_ordering = self.ordering_parts.search(sql)[1]
401.             params_hash = make_hashable(params)
402.             if (without_ordering, params_hash) in seen:
403.                 continue
404.             seen.add((without_ordering, params_hash))
405.             result.append((resolved, (sql, params, is_ref)))
406.         return result
407. 
408.     def get_extra_select(self, order_by, select):
409.         extra_select = []
410.         if self.query.distinct and not self.query.distinct_fields:
411.             select_sql = [t[1] for t in select]
412.             for expr, (sql, params, is_ref) in order_by:
413.                 without_ordering = self.ordering_parts.search(sql)[1]
414.                 if not is_ref and (without_ordering, params) not in select_sql:
415.                     extra_select.append((expr, (without_ordering, params), None))
416.         return extra_select
417. 
418.     def quote_name_unless_alias(self, name):
419.         """
420.         A wrapper around connection.ops.quote_name that doesn't quote aliases
421.         for table names. This avoids problems with some SQL dialects that treat
422.         quoted strings specially (e.g. PostgreSQL).
423.         """
424.         if name in self.quote_cache:
425.             return self.quote_cache[name]
426.         if ((name in self.query.alias_map and name not in self.query.table_map) or
427.                 name in self.query.extra_select or (
428.                     self.query.external_aliases.get(name) and name not in self.query.table_map)):
429.             self.quote_cache[name] = name
430.             return name
431.         r = self.connection.ops.quote_name(name)
432.         self.quote_cache[name] = r
433.         return r
434. 
435.     def compile(self, node):
436.         vendor_impl = getattr(node, 'as_' + self.connection.vendor, None)
437.         if vendor_impl:
438.             sql, params = vendor_impl(self, self.connection)
439.         else:
440.             sql, params = node.as_sql(self, self.connection)
441.         return sql, params
442. 
443.     def get_combinator_sql(self, combinator, all):
444.         features = self.connection.features
445.         compilers = [
446.             query.get_compiler(self.using, self.connection)
447.             for query in self.query.combined_queries if not query.is_empty()
448.         ]
449.         if not features.supports_slicing_ordering_in_compound:
450.             for query, compiler in zip(self.query.combined_queries, compilers):
451.                 if query.low_mark or query.high_mark:
452.                     raise DatabaseError('LIMIT/OFFSET not allowed in subqueries of compound statements.')
453.                 if compiler.get_order_by():
454.                     raise DatabaseError('ORDER BY not allowed in subqueries of compound statements.')
455.         parts = ()
456.         for compiler in compilers:
457.             try:
458.                 # If the columns list is limited, then all combined queries
459.                 # must have the same columns list. Set the selects defined on
460.                 # the query on all combined queries, if not already set.
461.                 if not compiler.query.values_select and self.query.values_select:
462.                     compiler.query = compiler.query.clone()
463.                     compiler.query.set_values((
464.                         *self.query.extra_select,
465.                         *self.query.values_select,
466.                         *self.query.annotation_select,
467.                     ))
468.                 part_sql, part_args = compiler.as_sql()
469.                 if compiler.query.combinator:
470.                     # Wrap in a subquery if wrapping in parentheses isn't
471.                     # supported.
472.                     if not features.supports_parentheses_in_compound:
473.                         part_sql = 'SELECT * FROM ({})'.format(part_sql)
474.                     # Add parentheses when combining with compound query if not
475.                     # already added for all compound queries.
476.                     elif not features.supports_slicing_ordering_in_compound:
477.                         part_sql = '({})'.format(part_sql)
478.                 parts += ((part_sql, part_args),)
479.             except EmptyResultSet:
480.                 # Omit the empty queryset with UNION and with DIFFERENCE if the
481.                 # first queryset is nonempty.
482.                 if combinator == 'union' or (combinator == 'difference' and parts):
483.                     continue
484.                 raise
485.         if not parts:
486.             raise EmptyResultSet
487.         combinator_sql = self.connection.ops.set_operators[combinator]
488.         if all and combinator == 'union':
489.             combinator_sql += ' ALL'
490.         braces = '({})' if features.supports_slicing_ordering_in_compound else '{}'
491.         sql_parts, args_parts = zip(*((braces.format(sql), args) for sql, args in parts))
492.         result = [' {} '.format(combinator_sql).join(sql_parts)]
493.         params = []
494.         for part in args_parts:
495.             params.extend(part)
496.         return result, params
497. 
498.     def as_sql(self, with_limits=True, with_col_aliases=False):
499.         """
500.         Create the SQL for this query. Return the SQL string and list of


File: django/db/models/sql/compiler.py
Line number range: 501 - 1000
Content:
501.         parameters.
502. 
503.         If 'with_limits' is False, any limit/offset information is not included
504.         in the query.
505.         """
506.         refcounts_before = self.query.alias_refcount.copy()
507.         try:
508.             extra_select, order_by, group_by = self.pre_sql_setup()
509.             for_update_part = None
510.             # Is a LIMIT/OFFSET clause needed?
511.             with_limit_offset = with_limits and (self.query.high_mark is not None or self.query.low_mark)
512.             combinator = self.query.combinator
513.             features = self.connection.features
514.             if combinator:
515.                 if not getattr(features, 'supports_select_{}'.format(combinator)):
516.                     raise NotSupportedError('{} is not supported on this database backend.'.format(combinator))
517.                 result, params = self.get_combinator_sql(combinator, self.query.combinator_all)
518.             else:
519.                 distinct_fields, distinct_params = self.get_distinct()
520.                 # This must come after 'select', 'ordering', and 'distinct'
521.                 # (see docstring of get_from_clause() for details).
522.                 from_, f_params = self.get_from_clause()
523.                 where, w_params = self.compile(self.where) if self.where is not None else ("", [])
524.                 having, h_params = self.compile(self.having) if self.having is not None else ("", [])
525.                 result = ['SELECT']
526.                 params = []
527. 
528.                 if self.query.distinct:
529.                     distinct_result, distinct_params = self.connection.ops.distinct_sql(
530.                         distinct_fields,
531.                         distinct_params,
532.                     )
533.                     result += distinct_result
534.                     params += distinct_params
535. 
536.                 out_cols = []
537.                 col_idx = 1
538.                 for _, (s_sql, s_params), alias in self.select + extra_select:
539.                     if alias:
540.                         s_sql = '%s AS %s' % (s_sql, self.connection.ops.quote_name(alias))
541.                     elif with_col_aliases:
542.                         s_sql = '%s AS %s' % (s_sql, 'Col%d' % col_idx)
543.                         col_idx += 1
544.                     params.extend(s_params)
545.                     out_cols.append(s_sql)
546. 
547.                 result += [', '.join(out_cols), 'FROM', *from_]
548.                 params.extend(f_params)
549. 
550.                 if self.query.select_for_update and self.connection.features.has_select_for_update:
551.                     if self.connection.get_autocommit():
552.                         raise TransactionManagementError('select_for_update cannot be used outside of a transaction.')
553. 
554.                     if with_limit_offset and not self.connection.features.supports_select_for_update_with_limit:
555.                         raise NotSupportedError(
556.                             'LIMIT/OFFSET is not supported with '
557.                             'select_for_update on this database backend.'
558.                         )
559.                     nowait = self.query.select_for_update_nowait
560.                     skip_locked = self.query.select_for_update_skip_locked
561.                     of = self.query.select_for_update_of
562.                     no_key = self.query.select_for_no_key_update
563.                     # If it's a NOWAIT/SKIP LOCKED/OF/NO KEY query but the
564.                     # backend doesn't support it, raise NotSupportedError to
565.                     # prevent a possible deadlock.
566.                     if nowait and not self.connection.features.has_select_for_update_nowait:
567.                         raise NotSupportedError('NOWAIT is not supported on this database backend.')
568.                     elif skip_locked and not self.connection.features.has_select_for_update_skip_locked:
569.                         raise NotSupportedError('SKIP LOCKED is not supported on this database backend.')
570.                     elif of and not self.connection.features.has_select_for_update_of:
571.                         raise NotSupportedError('FOR UPDATE OF is not supported on this database backend.')
572.                     elif no_key and not self.connection.features.has_select_for_no_key_update:
573.                         raise NotSupportedError(
574.                             'FOR NO KEY UPDATE is not supported on this '
575.                             'database backend.'
576.                         )
577.                     for_update_part = self.connection.ops.for_update_sql(
578.                         nowait=nowait,
579.                         skip_locked=skip_locked,
580.                         of=self.get_select_for_update_of_arguments(),
581.                         no_key=no_key,
582.                     )
583. 
584.                 if for_update_part and self.connection.features.for_update_after_from:
585.                     result.append(for_update_part)
586. 
587.                 if where:
588.                     result.append('WHERE %s' % where)
589.                     params.extend(w_params)
590. 
591.                 grouping = []
592.                 for g_sql, g_params in group_by:
593.                     grouping.append(g_sql)
594.                     params.extend(g_params)
595.                 if grouping:
596.                     if distinct_fields:
597.                         raise NotImplementedError('annotate() + distinct(fields) is not implemented.')
598.                     order_by = order_by or self.connection.ops.force_no_ordering()
599.                     result.append('GROUP BY %s' % ', '.join(grouping))
600.                     if self._meta_ordering:
601.                         order_by = None
602.                 if having:
603.                     result.append('HAVING %s' % having)
604.                     params.extend(h_params)
605. 
606.             if self.query.explain_query:
607.                 result.insert(0, self.connection.ops.explain_query_prefix(
608.                     self.query.explain_format,
609.                     **self.query.explain_options
610.                 ))
611. 
612.             if order_by:
613.                 ordering = []
614.                 for _, (o_sql, o_params, _) in order_by:
615.                     ordering.append(o_sql)
616.                     params.extend(o_params)
617.                 result.append('ORDER BY %s' % ', '.join(ordering))
618. 
619.             if with_limit_offset:
620.                 result.append(self.connection.ops.limit_offset_sql(self.query.low_mark, self.query.high_mark))
621. 
622.             if for_update_part and not self.connection.features.for_update_after_from:
623.                 result.append(for_update_part)
624. 
625.             if self.query.subquery and extra_select:
626.                 # If the query is used as a subquery, the extra selects would
627.                 # result in more columns than the left-hand side expression is
628.                 # expecting. This can happen when a subquery uses a combination
629.                 # of order_by() and distinct(), forcing the ordering expressions
630.                 # to be selected as well. Wrap the query in another subquery
631.                 # to exclude extraneous selects.
632.                 sub_selects = []
633.                 sub_params = []
634.                 for index, (select, _, alias) in enumerate(self.select, start=1):
635.                     if not alias and with_col_aliases:
636.                         alias = 'col%d' % index
637.                     if alias:
638.                         sub_selects.append("%s.%s" % (
639.                             self.connection.ops.quote_name('subquery'),
640.                             self.connection.ops.quote_name(alias),
641.                         ))
642.                     else:
643.                         select_clone = select.relabeled_clone({select.alias: 'subquery'})
644.                         subselect, subparams = select_clone.as_sql(self, self.connection)
645.                         sub_selects.append(subselect)
646.                         sub_params.extend(subparams)
647.                 return 'SELECT %s FROM (%s) subquery' % (
648.                     ', '.join(sub_selects),
649.                     ' '.join(result),
650.                 ), tuple(sub_params + params)
651. 
652.             return ' '.join(result), tuple(params)
653.         finally:
654.             # Finally do cleanup - get rid of the joins we created above.
655.             self.query.reset_refcounts(refcounts_before)
656. 
657.     def get_default_columns(self, start_alias=None, opts=None, from_parent=None):
658.         """
659.         Compute the default columns for selecting every field in the base
660.         model. Will sometimes be called to pull in related models (e.g. via
661.         select_related), in which case "opts" and "start_alias" will be given
662.         to provide a starting point for the traversal.
663. 
664.         Return a list of strings, quoted appropriately for use in SQL
665.         directly, as well as a set of aliases used in the select statement (if
666.         'as_pairs' is True, return a list of (alias, col_name) pairs instead
667.         of strings as the first component and None as the second component).
668.         """
669.         result = []
670.         if opts is None:
671.             opts = self.query.get_meta()
672.         only_load = self.deferred_to_columns()
673.         start_alias = start_alias or self.query.get_initial_alias()
674.         # The 'seen_models' is used to optimize checking the needed parent
675.         # alias for a given field. This also includes None -> start_alias to
676.         # be used by local fields.
677.         seen_models = {None: start_alias}
678. 
679.         for field in opts.concrete_fields:
680.             model = field.model._meta.concrete_model
681.             # A proxy model will have a different model and concrete_model. We
682.             # will assign None if the field belongs to this model.
683.             if model == opts.model:
684.                 model = None
685.             if from_parent and model is not None and issubclass(
686.                     from_parent._meta.concrete_model, model._meta.concrete_model):
687.                 # Avoid loading data for already loaded parents.
688.                 # We end up here in the case select_related() resolution
689.                 # proceeds from parent model to child model. In that case the
690.                 # parent model data is already present in the SELECT clause,
691.                 # and we want to avoid reloading the same data again.
692.                 continue
693.             if field.model in only_load and field.attname not in only_load[field.model]:
694.                 continue
695.             alias = self.query.join_parent_model(opts, model, start_alias,
696.                                                  seen_models)
697.             column = field.get_col(alias)
698.             result.append(column)
699.         return result
700. 
701.     def get_distinct(self):
702.         """
703.         Return a quoted list of fields to use in DISTINCT ON part of the query.
704. 
705.         This method can alter the tables in the query, and thus it must be
706.         called before get_from_clause().
707.         """
708.         result = []
709.         params = []
710.         opts = self.query.get_meta()
711. 
712.         for name in self.query.distinct_fields:
713.             parts = name.split(LOOKUP_SEP)
714.             _, targets, alias, joins, path, _, transform_function = self._setup_joins(parts, opts, None)
715.             targets, alias, _ = self.query.trim_joins(targets, joins, path)
716.             for target in targets:
717.                 if name in self.query.annotation_select:
718.                     result.append(name)
719.                 else:
720.                     r, p = self.compile(transform_function(target, alias))
721.                     result.append(r)
722.                     params.append(p)
723.         return result, params
724. 
725.     def find_ordering_name(self, name, opts, alias=None, default_order='ASC',
726.                            already_seen=None):
727.         """
728.         Return the table alias (the name might be ambiguous, the alias will
729.         not be) and column name for ordering by the given 'name' parameter.
730.         The 'name' is of the form 'field1__field2__...__fieldN'.
731.         """
732.         name, order = get_order_dir(name, default_order)
733.         descending = order == 'DESC'
734.         pieces = name.split(LOOKUP_SEP)
735.         field, targets, alias, joins, path, opts, transform_function = self._setup_joins(pieces, opts, alias)
736. 
737.         # If we get to this point and the field is a relation to another model,
738.         # append the default ordering for that model unless it is the pk
739.         # shortcut or the attribute name of the field that is specified.
740.         if (
741.             field.is_relation and
742.             opts.ordering and
743.             getattr(field, 'attname', None) != pieces[-1] and
744.             name != 'pk'
745.         ):
746.             # Firstly, avoid infinite loops.
747.             already_seen = already_seen or set()
748.             join_tuple = tuple(getattr(self.query.alias_map[j], 'join_cols', None) for j in joins)
749.             if join_tuple in already_seen:
750.                 raise FieldError('Infinite loop caused by ordering.')
751.             already_seen.add(join_tuple)
752. 
753.             results = []
754.             for item in opts.ordering:
755.                 if hasattr(item, 'resolve_expression') and not isinstance(item, OrderBy):
756.                     item = item.desc() if descending else item.asc()
757.                 if isinstance(item, OrderBy):
758.                     results.append((item, False))
759.                     continue
760.                 results.extend(self.find_ordering_name(item, opts, alias,
761.                                                        order, already_seen))
762.             return results
763.         targets, alias, _ = self.query.trim_joins(targets, joins, path)
764.         return [(OrderBy(transform_function(t, alias), descending=descending), False) for t in targets]
765. 
766.     def _setup_joins(self, pieces, opts, alias):
767.         """
768.         Helper method for get_order_by() and get_distinct().
769. 
770.         get_ordering() and get_distinct() must produce same target columns on
771.         same input, as the prefixes of get_ordering() and get_distinct() must
772.         match. Executing SQL where this is not true is an error.
773.         """
774.         alias = alias or self.query.get_initial_alias()
775.         field, targets, opts, joins, path, transform_function = self.query.setup_joins(pieces, opts, alias)
776.         alias = joins[-1]
777.         return field, targets, alias, joins, path, opts, transform_function
778. 
779.     def get_from_clause(self):
780.         """
781.         Return a list of strings that are joined together to go after the
782.         "FROM" part of the query, as well as a list any extra parameters that
783.         need to be included. Subclasses, can override this to create a
784.         from-clause via a "select".
785. 
786.         This should only be called after any SQL construction methods that
787.         might change the tables that are needed. This means the select columns,
788.         ordering, and distinct must be done first.
789.         """
790.         result = []
791.         params = []
792.         for alias in tuple(self.query.alias_map):
793.             if not self.query.alias_refcount[alias]:
794.                 continue
795.             try:
796.                 from_clause = self.query.alias_map[alias]
797.             except KeyError:
798.                 # Extra tables can end up in self.tables, but not in the
799.                 # alias_map if they aren't in a join. That's OK. We skip them.
800.                 continue
801.             clause_sql, clause_params = self.compile(from_clause)
802.             result.append(clause_sql)
803.             params.extend(clause_params)
804.         for t in self.query.extra_tables:
805.             alias, _ = self.query.table_alias(t)
806.             # Only add the alias if it's not already present (the table_alias()
807.             # call increments the refcount, so an alias refcount of one means
808.             # this is the only reference).
809.             if alias not in self.query.alias_map or self.query.alias_refcount[alias] == 1:
810.                 result.append(', %s' % self.quote_name_unless_alias(alias))
811.         return result, params
812. 
813.     def get_related_selections(self, select, opts=None, root_alias=None, cur_depth=1,
814.                                requested=None, restricted=None):
815.         """
816.         Fill in the information needed for a select_related query. The current
817.         depth is measured as the number of connections away from the root model
818.         (for example, cur_depth=1 means we are looking at models with direct
819.         connections to the root model).
820.         """
821.         def _get_field_choices():
822.             direct_choices = (f.name for f in opts.fields if f.is_relation)
823.             reverse_choices = (
824.                 f.field.related_query_name()
825.                 for f in opts.related_objects if f.field.unique
826.             )
827.             return chain(direct_choices, reverse_choices, self.query._filtered_relations)
828. 
829.         related_klass_infos = []
830.         if not restricted and cur_depth > self.query.max_depth:
831.             # We've recursed far enough; bail out.
832.             return related_klass_infos
833. 
834.         if not opts:
835.             opts = self.query.get_meta()
836.             root_alias = self.query.get_initial_alias()
837.         only_load = self.query.get_loaded_field_names()
838. 
839.         # Setup for the case when only particular related fields should be
840.         # included in the related selection.
841.         fields_found = set()
842.         if requested is None:
843.             restricted = isinstance(self.query.select_related, dict)
844.             if restricted:
845.                 requested = self.query.select_related
846. 
847.         def get_related_klass_infos(klass_info, related_klass_infos):
848.             klass_info['related_klass_infos'] = related_klass_infos
849. 
850.         for f in opts.fields:
851.             field_model = f.model._meta.concrete_model
852.             fields_found.add(f.name)
853. 
854.             if restricted:
855.                 next = requested.get(f.name, {})
856.                 if not f.is_relation:
857.                     # If a non-related field is used like a relation,
858.                     # or if a single non-relational field is given.
859.                     if next or f.name in requested:
860.                         raise FieldError(
861.                             "Non-relational field given in select_related: '%s'. "
862.                             "Choices are: %s" % (
863.                                 f.name,
864.                                 ", ".join(_get_field_choices()) or '(none)',
865.                             )
866.                         )
867.             else:
868.                 next = False
869. 
870.             if not select_related_descend(f, restricted, requested,
871.                                           only_load.get(field_model)):
872.                 continue
873.             klass_info = {
874.                 'model': f.remote_field.model,
875.                 'field': f,
876.                 'reverse': False,
877.                 'local_setter': f.set_cached_value,
878.                 'remote_setter': f.remote_field.set_cached_value if f.unique else lambda x, y: None,
879.                 'from_parent': False,
880.             }
881.             related_klass_infos.append(klass_info)
882.             select_fields = []
883.             _, _, _, joins, _, _ = self.query.setup_joins(
884.                 [f.name], opts, root_alias)
885.             alias = joins[-1]
886.             columns = self.get_default_columns(start_alias=alias, opts=f.remote_field.model._meta)
887.             for col in columns:
888.                 select_fields.append(len(select))
889.                 select.append((col, None))
890.             klass_info['select_fields'] = select_fields
891.             next_klass_infos = self.get_related_selections(
892.                 select, f.remote_field.model._meta, alias, cur_depth + 1, next, restricted)
893.             get_related_klass_infos(klass_info, next_klass_infos)
894. 
895.         if restricted:
896.             related_fields = [
897.                 (o.field, o.related_model)
898.                 for o in opts.related_objects
899.                 if o.field.unique and not o.many_to_many
900.             ]
901.             for f, model in related_fields:
902.                 if not select_related_descend(f, restricted, requested,
903.                                               only_load.get(model), reverse=True):
904.                     continue
905. 
906.                 related_field_name = f.related_query_name()
907.                 fields_found.add(related_field_name)
908. 
909.                 join_info = self.query.setup_joins([related_field_name], opts, root_alias)
910.                 alias = join_info.joins[-1]
911.                 from_parent = issubclass(model, opts.model) and model is not opts.model
912.                 klass_info = {
913.                     'model': model,
914.                     'field': f,
915.                     'reverse': True,
916.                     'local_setter': f.remote_field.set_cached_value,
917.                     'remote_setter': f.set_cached_value,
918.                     'from_parent': from_parent,
919.                 }
920.                 related_klass_infos.append(klass_info)
921.                 select_fields = []
922.                 columns = self.get_default_columns(
923.                     start_alias=alias, opts=model._meta, from_parent=opts.model)
924.                 for col in columns:
925.                     select_fields.append(len(select))
926.                     select.append((col, None))
927.                 klass_info['select_fields'] = select_fields
928.                 next = requested.get(f.related_query_name(), {})
929.                 next_klass_infos = self.get_related_selections(
930.                     select, model._meta, alias, cur_depth + 1,
931.                     next, restricted)
932.                 get_related_klass_infos(klass_info, next_klass_infos)
933. 
934.             def local_setter(obj, from_obj):
935.                 # Set a reverse fk object when relation is non-empty.
936.                 if from_obj:
937.                     f.remote_field.set_cached_value(from_obj, obj)
938. 
939.             def remote_setter(name, obj, from_obj):
940.                 setattr(from_obj, name, obj)
941. 
942.             for name in list(requested):
943.                 # Filtered relations work only on the topmost level.
944.                 if cur_depth > 1:
945.                     break
946.                 if name in self.query._filtered_relations:
947.                     fields_found.add(name)
948.                     f, _, join_opts, joins, _, _ = self.query.setup_joins([name], opts, root_alias)
949.                     model = join_opts.model
950.                     alias = joins[-1]
951.                     from_parent = issubclass(model, opts.model) and model is not opts.model
952.                     klass_info = {
953.                         'model': model,
954.                         'field': f,
955.                         'reverse': True,
956.                         'local_setter': local_setter,
957.                         'remote_setter': partial(remote_setter, name),
958.                         'from_parent': from_parent,
959.                     }
960.                     related_klass_infos.append(klass_info)
961.                     select_fields = []
962.                     columns = self.get_default_columns(
963.                         start_alias=alias, opts=model._meta,
964.                         from_parent=opts.model,
965.                     )
966.                     for col in columns:
967.                         select_fields.append(len(select))
968.                         select.append((col, None))
969.                     klass_info['select_fields'] = select_fields
970.                     next_requested = requested.get(name, {})
971.                     next_klass_infos = self.get_related_selections(
972.                         select, opts=model._meta, root_alias=alias,
973.                         cur_depth=cur_depth + 1, requested=next_requested,
974.                         restricted=restricted,
975.                     )
976.                     get_related_klass_infos(klass_info, next_klass_infos)
977.             fields_not_found = set(requested).difference(fields_found)
978.             if fields_not_found:
979.                 invalid_fields = ("'%s'" % s for s in fields_not_found)
980.                 raise FieldError(
981.                     'Invalid field name(s) given in select_related: %s. '
982.                     'Choices are: %s' % (
983.                         ', '.join(invalid_fields),
984.                         ', '.join(_get_field_choices()) or '(none)',
985.                     )
986.                 )
987.         return related_klass_infos
988. 
989.     def get_select_for_update_of_arguments(self):
990.         """
991.         Return a quoted list of arguments for the SELECT FOR UPDATE OF part of
992.         the query.
993.         """
994.         def _get_parent_klass_info(klass_info):
995.             concrete_model = klass_info['model']._meta.concrete_model
996.             for parent_model, parent_link in concrete_model._meta.parents.items():
997.                 parent_list = parent_model._meta.get_parent_list()
998.                 yield {
999.                     'model': parent_model,
1000.                     'field': parent_link,


File: django/db/models/sql/compiler.py
Line number range: 1001 - 1500
Content:
1001.                     'reverse': False,
1002.                     'select_fields': [
1003.                         select_index
1004.                         for select_index in klass_info['select_fields']
1005.                         # Selected columns from a model or its parents.
1006.                         if (
1007.                             self.select[select_index][0].target.model == parent_model or
1008.                             self.select[select_index][0].target.model in parent_list
1009.                         )
1010.                     ],
1011.                 }
1012. 
1013.         def _get_first_selected_col_from_model(klass_info):
1014.             """
1015.             Find the first selected column from a model. If it doesn't exist,
1016.             don't lock a model.
1017. 
1018.             select_fields is filled recursively, so it also contains fields
1019.             from the parent models.
1020.             """
1021.             concrete_model = klass_info['model']._meta.concrete_model
1022.             for select_index in klass_info['select_fields']:
1023.                 if self.select[select_index][0].target.model == concrete_model:
1024.                     return self.select[select_index][0]
1025. 
1026.         def _get_field_choices():
1027.             """Yield all allowed field paths in breadth-first search order."""
1028.             queue = collections.deque([(None, self.klass_info)])
1029.             while queue:
1030.                 parent_path, klass_info = queue.popleft()
1031.                 if parent_path is None:
1032.                     path = []
1033.                     yield 'self'
1034.                 else:
1035.                     field = klass_info['field']
1036.                     if klass_info['reverse']:
1037.                         field = field.remote_field
1038.                     path = parent_path + [field.name]
1039.                     yield LOOKUP_SEP.join(path)
1040.                 queue.extend(
1041.                     (path, klass_info)
1042.                     for klass_info in _get_parent_klass_info(klass_info)
1043.                 )
1044.                 queue.extend(
1045.                     (path, klass_info)
1046.                     for klass_info in klass_info.get('related_klass_infos', [])
1047.                 )
1048.         result = []
1049.         invalid_names = []
1050.         for name in self.query.select_for_update_of:
1051.             klass_info = self.klass_info
1052.             if name == 'self':
1053.                 col = _get_first_selected_col_from_model(klass_info)
1054.             else:
1055.                 for part in name.split(LOOKUP_SEP):
1056.                     klass_infos = (
1057.                         *klass_info.get('related_klass_infos', []),
1058.                         *_get_parent_klass_info(klass_info),
1059.                     )
1060.                     for related_klass_info in klass_infos:
1061.                         field = related_klass_info['field']
1062.                         if related_klass_info['reverse']:
1063.                             field = field.remote_field
1064.                         if field.name == part:
1065.                             klass_info = related_klass_info
1066.                             break
1067.                     else:
1068.                         klass_info = None
1069.                         break
1070.                 if klass_info is None:
1071.                     invalid_names.append(name)
1072.                     continue
1073.                 col = _get_first_selected_col_from_model(klass_info)
1074.             if col is not None:
1075.                 if self.connection.features.select_for_update_of_column:
1076.                     result.append(self.compile(col)[0])
1077.                 else:
1078.                     result.append(self.quote_name_unless_alias(col.alias))
1079.         if invalid_names:
1080.             raise FieldError(
1081.                 'Invalid field name(s) given in select_for_update(of=(...)): %s. '
1082.                 'Only relational fields followed in the query are allowed. '
1083.                 'Choices are: %s.' % (
1084.                     ', '.join(invalid_names),
1085.                     ', '.join(_get_field_choices()),
1086.                 )
1087.             )
1088.         return result
1089. 
1090.     def deferred_to_columns(self):
1091.         """
1092.         Convert the self.deferred_loading data structure to mapping of table
1093.         names to sets of column names which are to be loaded. Return the
1094.         dictionary.
1095.         """
1096.         columns = {}
1097.         self.query.deferred_to_data(columns, self.query.get_loaded_field_names_cb)
1098.         return columns
1099. 
1100.     def get_converters(self, expressions):
1101.         converters = {}
1102.         for i, expression in enumerate(expressions):
1103.             if expression:
1104.                 backend_converters = self.connection.ops.get_db_converters(expression)
1105.                 field_converters = expression.get_db_converters(self.connection)
1106.                 if backend_converters or field_converters:
1107.                     converters[i] = (backend_converters + field_converters, expression)
1108.         return converters
1109. 
1110.     def apply_converters(self, rows, converters):
1111.         connection = self.connection
1112.         converters = list(converters.items())
1113.         for row in map(list, rows):
1114.             for pos, (convs, expression) in converters:
1115.                 value = row[pos]
1116.                 for converter in convs:
1117.                     value = converter(value, expression, connection)
1118.                 row[pos] = value
1119.             yield row
1120. 
1121.     def results_iter(self, results=None, tuple_expected=False, chunked_fetch=False,
1122.                      chunk_size=GET_ITERATOR_CHUNK_SIZE):
1123.         """Return an iterator over the results from executing this query."""
1124.         if results is None:
1125.             results = self.execute_sql(MULTI, chunked_fetch=chunked_fetch, chunk_size=chunk_size)
1126.         fields = [s[0] for s in self.select[0:self.col_count]]
1127.         converters = self.get_converters(fields)
1128.         rows = chain.from_iterable(results)
1129.         if converters:
1130.             rows = self.apply_converters(rows, converters)
1131.             if tuple_expected:
1132.                 rows = map(tuple, rows)
1133.         return rows
1134. 
1135.     def has_results(self):
1136.         """
1137.         Backends (e.g. NoSQL) can override this in order to use optimized
1138.         versions of "query has any results."
1139.         """
1140.         return bool(self.execute_sql(SINGLE))
1141. 
1142.     def execute_sql(self, result_type=MULTI, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
1143.         """
1144.         Run the query against the database and return the result(s). The
1145.         return value is a single data item if result_type is SINGLE, or an
1146.         iterator over the results if the result_type is MULTI.
1147. 
1148.         result_type is either MULTI (use fetchmany() to retrieve all rows),
1149.         SINGLE (only retrieve a single row), or None. In this last case, the
1150.         cursor is returned if any query is executed, since it's used by
1151.         subclasses such as InsertQuery). It's possible, however, that no query
1152.         is needed, as the filters describe an empty set. In that case, None is
1153.         returned, to avoid any unnecessary database interaction.
1154.         """
1155.         result_type = result_type or NO_RESULTS
1156.         try:
1157.             sql, params = self.as_sql()
1158.             if not sql:
1159.                 raise EmptyResultSet
1160.         except EmptyResultSet:
1161.             if result_type == MULTI:
1162.                 return iter([])
1163.             else:
1164.                 return
1165.         if chunked_fetch:
1166.             cursor = self.connection.chunked_cursor()
1167.         else:
1168.             cursor = self.connection.cursor()
1169.         try:
1170.             cursor.execute(sql, params)
1171.         except Exception:
1172.             # Might fail for server-side cursors (e.g. connection closed)
1173.             cursor.close()
1174.             raise
1175. 
1176.         if result_type == CURSOR:
1177.             # Give the caller the cursor to process and close.
1178.             return cursor
1179.         if result_type == SINGLE:
1180.             try:
1181.                 val = cursor.fetchone()
1182.                 if val:
1183.                     return val[0:self.col_count]
1184.                 return val
1185.             finally:
1186.                 # done with the cursor
1187.                 cursor.close()
1188.         if result_type == NO_RESULTS:
1189.             cursor.close()
1190.             return
1191. 
1192.         result = cursor_iter(
1193.             cursor, self.connection.features.empty_fetchmany_value,
1194.             self.col_count if self.has_extra_select else None,
1195.             chunk_size,
1196.         )
1197.         if not chunked_fetch or not self.connection.features.can_use_chunked_reads:
1198.             try:
1199.                 # If we are using non-chunked reads, we return the same data
1200.                 # structure as normally, but ensure it is all read into memory
1201.                 # before going any further. Use chunked_fetch if requested,
1202.                 # unless the database doesn't support it.
1203.                 return list(result)
1204.             finally:
1205.                 # done with the cursor
1206.                 cursor.close()
1207.         return result
1208. 
1209.     def as_subquery_condition(self, alias, columns, compiler):
1210.         qn = compiler.quote_name_unless_alias
1211.         qn2 = self.connection.ops.quote_name
1212. 
1213.         for index, select_col in enumerate(self.query.select):
1214.             lhs_sql, lhs_params = self.compile(select_col)
1215.             rhs = '%s.%s' % (qn(alias), qn2(columns[index]))
1216.             self.query.where.add(
1217.                 RawSQL('%s = %s' % (lhs_sql, rhs), lhs_params), 'AND')
1218. 
1219.         sql, params = self.as_sql()
1220.         return 'EXISTS (%s)' % sql, params
1221. 
1222.     def explain_query(self):
1223.         result = list(self.execute_sql())
1224.         # Some backends return 1 item tuples with strings, and others return
1225.         # tuples with integers and strings. Flatten them out into strings.
1226.         for row in result[0]:
1227.             if not isinstance(row, str):
1228.                 yield ' '.join(str(c) for c in row)
1229.             else:
1230.                 yield row
1231. 
1232. 
1233. class SQLInsertCompiler(SQLCompiler):
1234.     returning_fields = None
1235.     returning_params = tuple()
1236. 
1237.     def field_as_sql(self, field, val):
1238.         """
1239.         Take a field and a value intended to be saved on that field, and
1240.         return placeholder SQL and accompanying params. Check for raw values,
1241.         expressions, and fields with get_placeholder() defined in that order.
1242. 
1243.         When field is None, consider the value raw and use it as the
1244.         placeholder, with no corresponding parameters returned.
1245.         """
1246.         if field is None:
1247.             # A field value of None means the value is raw.
1248.             sql, params = val, []
1249.         elif hasattr(val, 'as_sql'):
1250.             # This is an expression, let's compile it.
1251.             sql, params = self.compile(val)
1252.         elif hasattr(field, 'get_placeholder'):
1253.             # Some fields (e.g. geo fields) need special munging before
1254.             # they can be inserted.
1255.             sql, params = field.get_placeholder(val, self, self.connection), [val]
1256.         else:
1257.             # Return the common case for the placeholder
1258.             sql, params = '%s', [val]
1259. 
1260.         # The following hook is only used by Oracle Spatial, which sometimes
1261.         # needs to yield 'NULL' and [] as its placeholder and params instead
1262.         # of '%s' and [None]. The 'NULL' placeholder is produced earlier by
1263.         # OracleOperations.get_geom_placeholder(). The following line removes
1264.         # the corresponding None parameter. See ticket #10888.
1265.         params = self.connection.ops.modify_insert_params(sql, params)
1266. 
1267.         return sql, params
1268. 
1269.     def prepare_value(self, field, value):
1270.         """
1271.         Prepare a value to be used in a query by resolving it if it is an
1272.         expression and otherwise calling the field's get_db_prep_save().
1273.         """
1274.         if hasattr(value, 'resolve_expression'):
1275.             value = value.resolve_expression(self.query, allow_joins=False, for_save=True)
1276.             # Don't allow values containing Col expressions. They refer to
1277.             # existing columns on a row, but in the case of insert the row
1278.             # doesn't exist yet.
1279.             if value.contains_column_references:
1280.                 raise ValueError(
1281.                     'Failed to insert expression "%s" on %s. F() expressions '
1282.                     'can only be used to update, not to insert.' % (value, field)
1283.                 )
1284.             if value.contains_aggregate:
1285.                 raise FieldError(
1286.                     'Aggregate functions are not allowed in this query '
1287.                     '(%s=%r).' % (field.name, value)
1288.                 )
1289.             if value.contains_over_clause:
1290.                 raise FieldError(
1291.                     'Window expressions are not allowed in this query (%s=%r).'
1292.                     % (field.name, value)
1293.                 )
1294.         else:
1295.             value = field.get_db_prep_save(value, connection=self.connection)
1296.         return value
1297. 
1298.     def pre_save_val(self, field, obj):
1299.         """
1300.         Get the given field's value off the given obj. pre_save() is used for
1301.         things like auto_now on DateTimeField. Skip it if this is a raw query.
1302.         """
1303.         if self.query.raw:
1304.             return getattr(obj, field.attname)
1305.         return field.pre_save(obj, add=True)
1306. 
1307.     def assemble_as_sql(self, fields, value_rows):
1308.         """
1309.         Take a sequence of N fields and a sequence of M rows of values, and
1310.         generate placeholder SQL and parameters for each field and value.
1311.         Return a pair containing:
1312.          * a sequence of M rows of N SQL placeholder strings, and
1313.          * a sequence of M rows of corresponding parameter values.
1314. 
1315.         Each placeholder string may contain any number of '%s' interpolation
1316.         strings, and each parameter row will contain exactly as many params
1317.         as the total number of '%s's in the corresponding placeholder row.
1318.         """
1319.         if not value_rows:
1320.             return [], []
1321. 
1322.         # list of (sql, [params]) tuples for each object to be saved
1323.         # Shape: [n_objs][n_fields][2]
1324.         rows_of_fields_as_sql = (
1325.             (self.field_as_sql(field, v) for field, v in zip(fields, row))
1326.             for row in value_rows
1327.         )
1328. 
1329.         # tuple like ([sqls], [[params]s]) for each object to be saved
1330.         # Shape: [n_objs][2][n_fields]
1331.         sql_and_param_pair_rows = (zip(*row) for row in rows_of_fields_as_sql)
1332. 
1333.         # Extract separate lists for placeholders and params.
1334.         # Each of these has shape [n_objs][n_fields]
1335.         placeholder_rows, param_rows = zip(*sql_and_param_pair_rows)
1336. 
1337.         # Params for each field are still lists, and need to be flattened.
1338.         param_rows = [[p for ps in row for p in ps] for row in param_rows]
1339. 
1340.         return placeholder_rows, param_rows
1341. 
1342.     def as_sql(self):
1343.         # We don't need quote_name_unless_alias() here, since these are all
1344.         # going to be column names (so we can avoid the extra overhead).
1345.         qn = self.connection.ops.quote_name
1346.         opts = self.query.get_meta()
1347.         insert_statement = self.connection.ops.insert_statement(ignore_conflicts=self.query.ignore_conflicts)
1348.         result = ['%s %s' % (insert_statement, qn(opts.db_table))]
1349.         fields = self.query.fields or [opts.pk]
1350.         result.append('(%s)' % ', '.join(qn(f.column) for f in fields))
1351. 
1352.         if self.query.fields:
1353.             value_rows = [
1354.                 [self.prepare_value(field, self.pre_save_val(field, obj)) for field in fields]
1355.                 for obj in self.query.objs
1356.             ]
1357.         else:
1358.             # An empty object.
1359.             value_rows = [[self.connection.ops.pk_default_value()] for _ in self.query.objs]
1360.             fields = [None]
1361. 
1362.         # Currently the backends just accept values when generating bulk
1363.         # queries and generate their own placeholders. Doing that isn't
1364.         # necessary and it should be possible to use placeholders and
1365.         # expressions in bulk inserts too.
1366.         can_bulk = (not self.returning_fields and self.connection.features.has_bulk_insert)
1367. 
1368.         placeholder_rows, param_rows = self.assemble_as_sql(fields, value_rows)
1369. 
1370.         ignore_conflicts_suffix_sql = self.connection.ops.ignore_conflicts_suffix_sql(
1371.             ignore_conflicts=self.query.ignore_conflicts
1372.         )
1373.         if self.returning_fields and self.connection.features.can_return_columns_from_insert:
1374.             if self.connection.features.can_return_rows_from_bulk_insert:
1375.                 result.append(self.connection.ops.bulk_insert_sql(fields, placeholder_rows))
1376.                 params = param_rows
1377.             else:
1378.                 result.append("VALUES (%s)" % ", ".join(placeholder_rows[0]))
1379.                 params = [param_rows[0]]
1380.             if ignore_conflicts_suffix_sql:
1381.                 result.append(ignore_conflicts_suffix_sql)
1382.             # Skip empty r_sql to allow subclasses to customize behavior for
1383.             # 3rd party backends. Refs #19096.
1384.             r_sql, self.returning_params = self.connection.ops.return_insert_columns(self.returning_fields)
1385.             if r_sql:
1386.                 result.append(r_sql)
1387.                 params += [self.returning_params]
1388.             return [(" ".join(result), tuple(chain.from_iterable(params)))]
1389. 
1390.         if can_bulk:
1391.             result.append(self.connection.ops.bulk_insert_sql(fields, placeholder_rows))
1392.             if ignore_conflicts_suffix_sql:
1393.                 result.append(ignore_conflicts_suffix_sql)
1394.             return [(" ".join(result), tuple(p for ps in param_rows for p in ps))]
1395.         else:
1396.             if ignore_conflicts_suffix_sql:
1397.                 result.append(ignore_conflicts_suffix_sql)
1398.             return [
1399.                 (" ".join(result + ["VALUES (%s)" % ", ".join(p)]), vals)
1400.                 for p, vals in zip(placeholder_rows, param_rows)
1401.             ]
1402. 
1403.     def execute_sql(self, returning_fields=None):
1404.         assert not (
1405.             returning_fields and len(self.query.objs) != 1 and
1406.             not self.connection.features.can_return_rows_from_bulk_insert
1407.         )
1408.         self.returning_fields = returning_fields
1409.         with self.connection.cursor() as cursor:
1410.             for sql, params in self.as_sql():
1411.                 cursor.execute(sql, params)
1412.             if not self.returning_fields:
1413.                 return []
1414.             if self.connection.features.can_return_rows_from_bulk_insert and len(self.query.objs) > 1:
1415.                 return self.connection.ops.fetch_returned_insert_rows(cursor)
1416.             if self.connection.features.can_return_columns_from_insert:
1417.                 assert len(self.query.objs) == 1
1418.                 return [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
1419.             return [(self.connection.ops.last_insert_id(
1420.                 cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
1421.             ),)]
1422. 
1423. 
1424. class SQLDeleteCompiler(SQLCompiler):
1425.     @cached_property
1426.     def single_alias(self):
1427.         # Ensure base table is in aliases.
1428.         self.query.get_initial_alias()
1429.         return sum(self.query.alias_refcount[t] > 0 for t in self.query.alias_map) == 1
1430. 
1431.     def _as_sql(self, query):
1432.         result = [
1433.             'DELETE FROM %s' % self.quote_name_unless_alias(query.base_table)
1434.         ]
1435.         where, params = self.compile(query.where)
1436.         if where:
1437.             result.append('WHERE %s' % where)
1438.         return ' '.join(result), tuple(params)
1439. 
1440.     def as_sql(self):
1441.         """
1442.         Create the SQL for this query. Return the SQL string and list of
1443.         parameters.
1444.         """
1445.         if self.single_alias:
1446.             return self._as_sql(self.query)
1447.         innerq = self.query.clone()
1448.         innerq.__class__ = Query
1449.         innerq.clear_select_clause()
1450.         pk = self.query.model._meta.pk
1451.         innerq.select = [
1452.             pk.get_col(self.query.get_initial_alias())
1453.         ]
1454.         outerq = Query(self.query.model)
1455.         outerq.where = self.query.where_class()
1456.         if not self.connection.features.update_can_self_select:
1457.             # Force the materialization of the inner query to allow reference
1458.             # to the target table on MySQL.
1459.             sql, params = innerq.get_compiler(connection=self.connection).as_sql()
1460.             innerq = RawSQL('SELECT * FROM (%s) subquery' % sql, params)
1461.         outerq.add_q(Q(pk__in=innerq))
1462.         return self._as_sql(outerq)
1463. 
1464. 
1465. class SQLUpdateCompiler(SQLCompiler):
1466.     def as_sql(self):
1467.         """
1468.         Create the SQL for this query. Return the SQL string and list of
1469.         parameters.
1470.         """
1471.         self.pre_sql_setup()
1472.         if not self.query.values:
1473.             return '', ()
1474.         qn = self.quote_name_unless_alias
1475.         values, update_params = [], []
1476.         for field, model, val in self.query.values:
1477.             if hasattr(val, 'resolve_expression'):
1478.                 val = val.resolve_expression(self.query, allow_joins=False, for_save=True)
1479.                 if val.contains_aggregate:
1480.                     raise FieldError(
1481.                         'Aggregate functions are not allowed in this query '
1482.                         '(%s=%r).' % (field.name, val)
1483.                     )
1484.                 if val.contains_over_clause:
1485.                     raise FieldError(
1486.                         'Window expressions are not allowed in this query '
1487.                         '(%s=%r).' % (field.name, val)
1488.                     )
1489.             elif hasattr(val, 'prepare_database_save'):
1490.                 if field.remote_field:
1491.                     val = field.get_db_prep_save(
1492.                         val.prepare_database_save(field),
1493.                         connection=self.connection,
1494.                     )
1495.                 else:
1496.                     raise TypeError(
1497.                         "Tried to update field %s with a model instance, %r. "
1498.                         "Use a value compatible with %s."
1499.                         % (field, val, field.__class__.__name__)
1500.                     )

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-22 16:51:23,095 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="The user requested the full content of the file `django/db/models/sql/compiler.py`. This context block represents the entire file content provided, from line 1 to 1500, which directly answers the user's query.", relative_path='django/db/models/sql/compiler.py', start_line=1, end_line=1500)]
2025-12-22 16:51:23,106 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file `django/db/models/sql/compiler.py`.
2025-12-22 16:51:23,106 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-22 16:51:23,106 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-22 16:51:23,107 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 0 existing contexts
2025-12-22 16:51:23,107 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 1 total contexts (removed 0 duplicates)
2025-12-22 16:51:23,108 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Database converters (from_db_value) not called for returning_fields on insert

Description: Description
	
Making a subclass of BigAutoField, I've found that, unlike all other query pathways, on insert the returned integer is not passed through any database converters defined for the field - including the from_db_value hook.
This means that a field which would normally use a wrapper class has instead a plain integer.
Take this field:
class MyAutoField(models.BigAutoField):
	def from_db_value(self, value, expression, connection):
		if value is None:
			return None
		return MyIntWrapper(value)
	def get_prep_value(self, value):
		if value is None:
			return None
		return int(value)
And a model that uses it:
class AutoModel(models.Model):
	id = MyAutoField(primary_key=True)
Queried instances have the wrapper class for id:
>>> am = AutoModel.objects.first()
>>> am.id
<MyIntWrapper: 1>
But on creation, the returned integer is directly set as an attribute on the class:
>>> am2 = AutoModel.objects.create()
>>> am2.id
2
This also affects bulk_create on backends that support fetching the primary key value:
>>> ams = [AutoModel()]
>>> AutoModel.objects.bulk_create(ams)
[<AutoModel: AutoModel object (2)>]
>>> ams[0].id
2

Patch information:
diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py
index f02199d97c..bc06ac3cc4 100644
--- a/django/db/models/sql/compiler.py
+++ b/django/db/models/sql/compiler.py
@@ -1411,14 +1411,30 @@ class SQLInsertCompiler(SQLCompiler):
                 cursor.execute(sql, params)
             if not self.returning_fields:
                 return []
+            # Fetch rows/columns returned by the INSERT.
             if self.connection.features.can_return_rows_from_bulk_insert and len(self.query.objs) > 1:
-                return self.connection.ops.fetch_returned_insert_rows(cursor)
-            if self.connection.features.can_return_columns_from_insert:
+                rows = self.connection.ops.fetch_returned_insert_rows(cursor)
+            elif self.connection.features.can_return_columns_from_insert:
                 assert len(self.query.objs) == 1
-                return [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
-            return [(self.connection.ops.last_insert_id(
-                cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
-            ),)]
+                rows = [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
+            else:
+                rows = [(self.connection.ops.last_insert_id(
+                    cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
+                ),)]
+            # Apply database and field converters (e.g., from_db_value) to the
+            # returned values so they match the types produced by SELECT queries.
+            if self.returning_fields:
+                # Only apply converters for the number of columns actually returned.
+                if rows:
+                    num_cols = len(rows[0])
+                else:
+                    num_cols = 0
+                fields_for_conversion = self.returning_fields[:num_cols] if num_cols else []
+                if fields_for_conversion:
+                    converters = self.get_converters(fields_for_conversion)
+                    if converters:
+                        rows = [tuple(row) for row in self.apply_converters(rows, converters)]
+            return rows
 
 
 class SQLDeleteCompiler(SQLCompiler):


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file `django/db/models/sql/compiler.py`.
Extra Requirements: 
Purpose: This file contains the core logic for SQL query compilation, including the `SQLInsertCompiler` that is being patched, and its parent `SQLCompiler` which provides the methods used in the patch. This is essential to understand the fix.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/sql/compiler.py
Line number range: 1 - 1500
Content:
1. import collections
2. import re
3. from functools import partial
4. from itertools import chain
5. 
6. from django.core.exceptions import EmptyResultSet, FieldError
7. from django.db import DatabaseError, NotSupportedError
8. from django.db.models.constants import LOOKUP_SEP
9. from django.db.models.expressions import F, OrderBy, RawSQL, Ref, Value
10. from django.db.models.functions import Cast, Random
11. from django.db.models.query_utils import Q, select_related_descend
12. from django.db.models.sql.constants import (
13.     CURSOR, GET_ITERATOR_CHUNK_SIZE, MULTI, NO_RESULTS, ORDER_DIR, SINGLE,
14. )
15. from django.db.models.sql.query import Query, get_order_dir
16. from django.db.transaction import TransactionManagementError
17. from django.utils.functional import cached_property
18. from django.utils.hashable import make_hashable
19. from django.utils.regex_helper import _lazy_re_compile
20. 
21. 
22. class SQLCompiler:
23.     # Multiline ordering SQL clause may appear from RawSQL.
24.     ordering_parts = _lazy_re_compile(
25.         r'^(.*)\s(?:ASC|DESC).*',
26.         re.MULTILINE | re.DOTALL,
27.     )
28. 
29.     def __init__(self, query, connection, using):
30.         self.query = query
31.         self.connection = connection
32.         self.using = using
33.         self.quote_cache = {'*': '*'}
34.         # The select, klass_info, and annotations are needed by QuerySet.iterator()
35.         # these are set as a side-effect of executing the query. Note that we calculate
36.         # separately a list of extra select columns needed for grammatical correctness
37.         # of the query, but these columns are not included in self.select.
38.         self.select = None
39.         self.annotation_col_map = None
40.         self.klass_info = None
41.         self._meta_ordering = None
42. 
43.     def setup_query(self):
44.         if all(self.query.alias_refcount[a] == 0 for a in self.query.alias_map):
45.             self.query.get_initial_alias()
46.         self.select, self.klass_info, self.annotation_col_map = self.get_select()
47.         self.col_count = len(self.select)
48. 
49.     def pre_sql_setup(self):
50.         """
51.         Do any necessary class setup immediately prior to producing SQL. This
52.         is for things that can't necessarily be done in __init__ because we
53.         might not have all the pieces in place at that time.
54.         """
55.         self.setup_query()
56.         order_by = self.get_order_by()
57.         self.where, self.having = self.query.where.split_having()
58.         extra_select = self.get_extra_select(order_by, self.select)
59.         self.has_extra_select = bool(extra_select)
60.         group_by = self.get_group_by(self.select + extra_select, order_by)
61.         return extra_select, order_by, group_by
62. 
63.     def get_group_by(self, select, order_by):
64.         """
65.         Return a list of 2-tuples of form (sql, params).
66. 
67.         The logic of what exactly the GROUP BY clause contains is hard
68.         to describe in other words than "if it passes the test suite,
69.         then it is correct".
70.         """
71.         # Some examples:
72.         #     SomeModel.objects.annotate(Count('somecol'))
73.         #     GROUP BY: all fields of the model
74.         #
75.         #    SomeModel.objects.values('name').annotate(Count('somecol'))
76.         #    GROUP BY: name
77.         #
78.         #    SomeModel.objects.annotate(Count('somecol')).values('name')
79.         #    GROUP BY: all cols of the model
80.         #
81.         #    SomeModel.objects.values('name', 'pk').annotate(Count('somecol')).values('pk')
82.         #    GROUP BY: name, pk
83.         #
84.         #    SomeModel.objects.values('name').annotate(Count('somecol')).values('pk')
85.         #    GROUP BY: name, pk
86.         #
87.         # In fact, the self.query.group_by is the minimal set to GROUP BY. It
88.         # can't be ever restricted to a smaller set, but additional columns in
89.         # HAVING, ORDER BY, and SELECT clauses are added to it. Unfortunately
90.         # the end result is that it is impossible to force the query to have
91.         # a chosen GROUP BY clause - you can almost do this by using the form:
92.         #     .values(*wanted_cols).annotate(AnAggregate())
93.         # but any later annotations, extra selects, values calls that
94.         # refer some column outside of the wanted_cols, order_by, or even
95.         # filter calls can alter the GROUP BY clause.
96. 
97.         # The query.group_by is either None (no GROUP BY at all), True
98.         # (group by select fields), or a list of expressions to be added
99.         # to the group by.
100.         if self.query.group_by is None:
101.             return []
102.         expressions = []
103.         if self.query.group_by is not True:
104.             # If the group by is set to a list (by .values() call most likely),
105.             # then we need to add everything in it to the GROUP BY clause.
106.             # Backwards compatibility hack for setting query.group_by. Remove
107.             # when  we have public API way of forcing the GROUP BY clause.
108.             # Converts string references to expressions.
109.             for expr in self.query.group_by:
110.                 if not hasattr(expr, 'as_sql'):
111.                     expressions.append(self.query.resolve_ref(expr))
112.                 else:
113.                     expressions.append(expr)
114.         # Note that even if the group_by is set, it is only the minimal
115.         # set to group by. So, we need to add cols in select, order_by, and
116.         # having into the select in any case.
117.         ref_sources = {
118.             expr.source for expr in expressions if isinstance(expr, Ref)
119.         }
120.         for expr, _, _ in select:
121.             # Skip members of the select clause that are already included
122.             # by reference.
123.             if expr in ref_sources:
124.                 continue
125.             cols = expr.get_group_by_cols()
126.             for col in cols:
127.                 expressions.append(col)
128.         if not self._meta_ordering:
129.             for expr, (sql, params, is_ref) in order_by:
130.                 # Skip references to the SELECT clause, as all expressions in
131.                 # the SELECT clause are already part of the GROUP BY.
132.                 if not is_ref:
133.                     expressions.extend(expr.get_group_by_cols())
134.         having_group_by = self.having.get_group_by_cols() if self.having else ()
135.         for expr in having_group_by:
136.             expressions.append(expr)
137.         result = []
138.         seen = set()
139.         expressions = self.collapse_group_by(expressions, having_group_by)
140. 
141.         for expr in expressions:
142.             sql, params = self.compile(expr)
143.             sql, params = expr.select_format(self, sql, params)
144.             params_hash = make_hashable(params)
145.             if (sql, params_hash) not in seen:
146.                 result.append((sql, params))
147.                 seen.add((sql, params_hash))
148.         return result
149. 
150.     def collapse_group_by(self, expressions, having):
151.         # If the DB can group by primary key, then group by the primary key of
152.         # query's main model. Note that for PostgreSQL the GROUP BY clause must
153.         # include the primary key of every table, but for MySQL it is enough to
154.         # have the main table's primary key.
155.         if self.connection.features.allows_group_by_pk:
156.             # Determine if the main model's primary key is in the query.
157.             pk = None
158.             for expr in expressions:
159.                 # Is this a reference to query's base table primary key? If the
160.                 # expression isn't a Col-like, then skip the expression.
161.                 if (getattr(expr, 'target', None) == self.query.model._meta.pk and
162.                         getattr(expr, 'alias', None) == self.query.base_table):
163.                     pk = expr
164.                     break
165.             # If the main model's primary key is in the query, group by that
166.             # field, HAVING expressions, and expressions associated with tables
167.             # that don't have a primary key included in the grouped columns.
168.             if pk:
169.                 pk_aliases = {
170.                     expr.alias for expr in expressions
171.                     if hasattr(expr, 'target') and expr.target.primary_key
172.                 }
173.                 expressions = [pk] + [
174.                     expr for expr in expressions
175.                     if expr in having or (
176.                         getattr(expr, 'alias', None) is not None and expr.alias not in pk_aliases
177.                     )
178.                 ]
179.         elif self.connection.features.allows_group_by_selected_pks:
180.             # Filter out all expressions associated with a table's primary key
181.             # present in the grouped columns. This is done by identifying all
182.             # tables that have their primary key included in the grouped
183.             # columns and removing non-primary key columns referring to them.
184.             # Unmanaged models are excluded because they could be representing
185.             # database views on which the optimization might not be allowed.
186.             pks = {
187.                 expr for expr in expressions
188.                 if (
189.                     hasattr(expr, 'target') and
190.                     expr.target.primary_key and
191.                     self.connection.features.allows_group_by_selected_pks_on_model(expr.target.model)
192.                 )
193.             }
194.             aliases = {expr.alias for expr in pks}
195.             expressions = [
196.                 expr for expr in expressions if expr in pks or getattr(expr, 'alias', None) not in aliases
197.             ]
198.         return expressions
199. 
200.     def get_select(self):
201.         """
202.         Return three values:
203.         - a list of 3-tuples of (expression, (sql, params), alias)
204.         - a klass_info structure,
205.         - a dictionary of annotations
206. 
207.         The (sql, params) is what the expression will produce, and alias is the
208.         "AS alias" for the column (possibly None).
209. 
210.         The klass_info structure contains the following information:
211.         - The base model of the query.
212.         - Which columns for that model are present in the query (by
213.           position of the select clause).
214.         - related_klass_infos: [f, klass_info] to descent into
215. 
216.         The annotations is a dictionary of {'attname': column position} values.
217.         """
218.         select = []
219.         klass_info = None
220.         annotations = {}
221.         select_idx = 0
222.         for alias, (sql, params) in self.query.extra_select.items():
223.             annotations[alias] = select_idx
224.             select.append((RawSQL(sql, params), alias))
225.             select_idx += 1
226.         assert not (self.query.select and self.query.default_cols)
227.         if self.query.default_cols:
228.             cols = self.get_default_columns()
229.         else:
230.             # self.query.select is a special case. These columns never go to
231.             # any model.
232.             cols = self.query.select
233.         if cols:
234.             select_list = []
235.             for col in cols:
236.                 select_list.append(select_idx)
237.                 select.append((col, None))
238.                 select_idx += 1
239.             klass_info = {
240.                 'model': self.query.model,
241.                 'select_fields': select_list,
242.             }
243.         for alias, annotation in self.query.annotation_select.items():
244.             annotations[alias] = select_idx
245.             select.append((annotation, alias))
246.             select_idx += 1
247. 
248.         if self.query.select_related:
249.             related_klass_infos = self.get_related_selections(select)
250.             klass_info['related_klass_infos'] = related_klass_infos
251. 
252.             def get_select_from_parent(klass_info):
253.                 for ki in klass_info['related_klass_infos']:
254.                     if ki['from_parent']:
255.                         ki['select_fields'] = (klass_info['select_fields'] +
256.                                                ki['select_fields'])
257.                     get_select_from_parent(ki)
258.             get_select_from_parent(klass_info)
259. 
260.         ret = []
261.         for col, alias in select:
262.             try:
263.                 sql, params = self.compile(col)
264.             except EmptyResultSet:
265.                 # Select a predicate that's always False.
266.                 sql, params = '0', ()
267.             else:
268.                 sql, params = col.select_format(self, sql, params)
269.             ret.append((col, (sql, params), alias))
270.         return ret, klass_info, annotations
271. 
272.     def get_order_by(self):
273.         """
274.         Return a list of 2-tuples of form (expr, (sql, params, is_ref)) for the
275.         ORDER BY clause.
276. 
277.         The order_by clause can alter the select clause (for example it
278.         can add aliases to clauses that do not yet have one, or it can
279.         add totally new select clauses).
280.         """
281.         if self.query.extra_order_by:
282.             ordering = self.query.extra_order_by
283.         elif not self.query.default_ordering:
284.             ordering = self.query.order_by
285.         elif self.query.order_by:
286.             ordering = self.query.order_by
287.         elif self.query.get_meta().ordering:
288.             ordering = self.query.get_meta().ordering
289.             self._meta_ordering = ordering
290.         else:
291.             ordering = []
292.         if self.query.standard_ordering:
293.             asc, desc = ORDER_DIR['ASC']
294.         else:
295.             asc, desc = ORDER_DIR['DESC']
296. 
297.         order_by = []
298.         for field in ordering:
299.             if hasattr(field, 'resolve_expression'):
300.                 if isinstance(field, Value):
301.                     # output_field must be resolved for constants.
302.                     field = Cast(field, field.output_field)
303.                 if not isinstance(field, OrderBy):
304.                     field = field.asc()
305.                 if not self.query.standard_ordering:
306.                     field = field.copy()
307.                     field.reverse_ordering()
308.                 order_by.append((field, False))
309.                 continue
310.             if field == '?':  # random
311.                 order_by.append((OrderBy(Random()), False))
312.                 continue
313. 
314.             col, order = get_order_dir(field, asc)
315.             descending = order == 'DESC'
316. 
317.             if col in self.query.annotation_select:
318.                 # Reference to expression in SELECT clause
319.                 order_by.append((
320.                     OrderBy(Ref(col, self.query.annotation_select[col]), descending=descending),
321.                     True))
322.                 continue
323.             if col in self.query.annotations:
324.                 # References to an expression which is masked out of the SELECT
325.                 # clause.
326.                 if self.query.combinator and self.select:
327.                     # Don't use the resolved annotation because other
328.                     # combinated queries might define it differently.
329.                     expr = F(col)
330.                 else:
331.                     expr = self.query.annotations[col]
332.                     if isinstance(expr, Value):
333.                         # output_field must be resolved for constants.
334.                         expr = Cast(expr, expr.output_field)
335.                 order_by.append((OrderBy(expr, descending=descending), False))
336.                 continue
337. 
338.             if '.' in field:
339.                 # This came in through an extra(order_by=...) addition. Pass it
340.                 # on verbatim.
341.                 table, col = col.split('.', 1)
342.                 order_by.append((
343.                     OrderBy(
344.                         RawSQL('%s.%s' % (self.quote_name_unless_alias(table), col), []),
345.                         descending=descending
346.                     ), False))
347.                 continue
348. 
349.             if not self.query.extra or col not in self.query.extra:
350.                 # 'col' is of the form 'field' or 'field1__field2' or
351.                 # '-field1__field2__field', etc.
352.                 order_by.extend(self.find_ordering_name(
353.                     field, self.query.get_meta(), default_order=asc))
354.             else:
355.                 if col not in self.query.extra_select:
356.                     order_by.append((
357.                         OrderBy(RawSQL(*self.query.extra[col]), descending=descending),
358.                         False))
359.                 else:
360.                     order_by.append((
361.                         OrderBy(Ref(col, RawSQL(*self.query.extra[col])), descending=descending),
362.                         True))
363.         result = []
364.         seen = set()
365. 
366.         for expr, is_ref in order_by:
367.             resolved = expr.resolve_expression(self.query, allow_joins=True, reuse=None)
368.             if self.query.combinator and self.select:
369.                 src = resolved.get_source_expressions()[0]
370.                 expr_src = expr.get_source_expressions()[0]
371.                 # Relabel order by columns to raw numbers if this is a combined
372.                 # query; necessary since the columns can't be referenced by the
373.                 # fully qualified name and the simple column names may collide.
374.                 for idx, (sel_expr, _, col_alias) in enumerate(self.select):
375.                     if is_ref and col_alias == src.refs:
376.                         src = src.source
377.                     elif col_alias and not (
378.                         isinstance(expr_src, F) and col_alias == expr_src.name
379.                     ):
380.                         continue
381.                     if src == sel_expr:
382.                         resolved.set_source_expressions([RawSQL('%d' % (idx + 1), ())])
383.                         break
384.                 else:
385.                     if col_alias:
386.                         raise DatabaseError('ORDER BY term does not match any column in the result set.')
387.                     # Add column used in ORDER BY clause to the selected
388.                     # columns and to each combined query.
389.                     order_by_idx = len(self.query.select) + 1
390.                     col_name = f'__orderbycol{order_by_idx}'
391.                     for q in self.query.combined_queries:
392.                         q.add_annotation(expr_src, col_name)
393.                     self.query.add_select_col(resolved, col_name)
394.                     resolved.set_source_expressions([RawSQL(f'{order_by_idx}', ())])
395.             sql, params = self.compile(resolved)
396.             # Don't add the same column twice, but the order direction is
397.             # not taken into account so we strip it. When this entire method
398.             # is refactored into expressions, then we can check each part as we
399.             # generate it.
400.             without_ordering = self.ordering_parts.search(sql)[1]
401.             params_hash = make_hashable(params)
402.             if (without_ordering, params_hash) in seen:
403.                 continue
404.             seen.add((without_ordering, params_hash))
405.             result.append((resolved, (sql, params, is_ref)))
406.         return result
407. 
408.     def get_extra_select(self, order_by, select):
409.         extra_select = []
410.         if self.query.distinct and not self.query.distinct_fields:
411.             select_sql = [t[1] for t in select]
412.             for expr, (sql, params, is_ref) in order_by:
413.                 without_ordering = self.ordering_parts.search(sql)[1]
414.                 if not is_ref and (without_ordering, params) not in select_sql:
415.                     extra_select.append((expr, (without_ordering, params), None))
416.         return extra_select
417. 
418.     def quote_name_unless_alias(self, name):
419.         """
420.         A wrapper around connection.ops.quote_name that doesn't quote aliases
421.         for table names. This avoids problems with some SQL dialects that treat
422.         quoted strings specially (e.g. PostgreSQL).
423.         """
424.         if name in self.quote_cache:
425.             return self.quote_cache[name]
426.         if ((name in self.query.alias_map and name not in self.query.table_map) or
427.                 name in self.query.extra_select or (
428.                     self.query.external_aliases.get(name) and name not in self.query.table_map)):
429.             self.quote_cache[name] = name
430.             return name
431.         r = self.connection.ops.quote_name(name)
432.         self.quote_cache[name] = r
433.         return r
434. 
435.     def compile(self, node):
436.         vendor_impl = getattr(node, 'as_' + self.connection.vendor, None)
437.         if vendor_impl:
438.             sql, params = vendor_impl(self, self.connection)
439.         else:
440.             sql, params = node.as_sql(self, self.connection)
441.         return sql, params
442. 
443.     def get_combinator_sql(self, combinator, all):
444.         features = self.connection.features
445.         compilers = [
446.             query.get_compiler(self.using, self.connection)
447.             for query in self.query.combined_queries if not query.is_empty()
448.         ]
449.         if not features.supports_slicing_ordering_in_compound:
450.             for query, compiler in zip(self.query.combined_queries, compilers):
451.                 if query.low_mark or query.high_mark:
452.                     raise DatabaseError('LIMIT/OFFSET not allowed in subqueries of compound statements.')
453.                 if compiler.get_order_by():
454.                     raise DatabaseError('ORDER BY not allowed in subqueries of compound statements.')
455.         parts = ()
456.         for compiler in compilers:
457.             try:
458.                 # If the columns list is limited, then all combined queries
459.                 # must have the same columns list. Set the selects defined on
460.                 # the query on all combined queries, if not already set.
461.                 if not compiler.query.values_select and self.query.values_select:
462.                     compiler.query = compiler.query.clone()
463.                     compiler.query.set_values((
464.                         *self.query.extra_select,
465.                         *self.query.values_select,
466.                         *self.query.annotation_select,
467.                     ))
468.                 part_sql, part_args = compiler.as_sql()
469.                 if compiler.query.combinator:
470.                     # Wrap in a subquery if wrapping in parentheses isn't
471.                     # supported.
472.                     if not features.supports_parentheses_in_compound:
473.                         part_sql = 'SELECT * FROM ({})'.format(part_sql)
474.                     # Add parentheses when combining with compound query if not
475.                     # already added for all compound queries.
476.                     elif not features.supports_slicing_ordering_in_compound:
477.                         part_sql = '({})'.format(part_sql)
478.                 parts += ((part_sql, part_args),)
479.             except EmptyResultSet:
480.                 # Omit the empty queryset with UNION and with DIFFERENCE if the
481.                 # first queryset is nonempty.
482.                 if combinator == 'union' or (combinator == 'difference' and parts):
483.                     continue
484.                 raise
485.         if not parts:
486.             raise EmptyResultSet
487.         combinator_sql = self.connection.ops.set_operators[combinator]
488.         if all and combinator == 'union':
489.             combinator_sql += ' ALL'
490.         braces = '({})' if features.supports_slicing_ordering_in_compound else '{}'
491.         sql_parts, args_parts = zip(*((braces.format(sql), args) for sql, args in parts))
492.         result = [' {} '.format(combinator_sql).join(sql_parts)]
493.         params = []
494.         for part in args_parts:
495.             params.extend(part)
496.         return result, params
497. 
498.     def as_sql(self, with_limits=True, with_col_aliases=False):
499.         """
500.         Create the SQL for this query. Return the SQL string and list of
501.         parameters.
502. 
503.         If 'with_limits' is False, any limit/offset information is not included
504.         in the query.
505.         """
506.         refcounts_before = self.query.alias_refcount.copy()
507.         try:
508.             extra_select, order_by, group_by = self.pre_sql_setup()
509.             for_update_part = None
510.             # Is a LIMIT/OFFSET clause needed?
511.             with_limit_offset = with_limits and (self.query.high_mark is not None or self.query.low_mark)
512.             combinator = self.query.combinator
513.             features = self.connection.features
514.             if combinator:
515.                 if not getattr(features, 'supports_select_{}'.format(combinator)):
516.                     raise NotSupportedError('{} is not supported on this database backend.'.format(combinator))
517.                 result, params = self.get_combinator_sql(combinator, self.query.combinator_all)
518.             else:
519.                 distinct_fields, distinct_params = self.get_distinct()
520.                 # This must come after 'select', 'ordering', and 'distinct'
521.                 # (see docstring of get_from_clause() for details).
522.                 from_, f_params = self.get_from_clause()
523.                 where, w_params = self.compile(self.where) if self.where is not None else ("", [])
524.                 having, h_params = self.compile(self.having) if self.having is not None else ("", [])
525.                 result = ['SELECT']
526.                 params = []
527. 
528.                 if self.query.distinct:
529.                     distinct_result, distinct_params = self.connection.ops.distinct_sql(
530.                         distinct_fields,
531.                         distinct_params,
532.                     )
533.                     result += distinct_result
534.                     params += distinct_params
535. 
536.                 out_cols = []
537.                 col_idx = 1
538.                 for _, (s_sql, s_params), alias in self.select + extra_select:
539.                     if alias:
540.                         s_sql = '%s AS %s' % (s_sql, self.connection.ops.quote_name(alias))
541.                     elif with_col_aliases:
542.                         s_sql = '%s AS %s' % (s_sql, 'Col%d' % col_idx)
543.                         col_idx += 1
544.                     params.extend(s_params)
545.                     out_cols.append(s_sql)
546. 
547.                 result += [', '.join(out_cols), 'FROM', *from_]
548.                 params.extend(f_params)
549. 
550.                 if self.query.select_for_update and self.connection.features.has_select_for_update:
551.                     if self.connection.get_autocommit():
552.                         raise TransactionManagementError('select_for_update cannot be used outside of a transaction.')
553. 
554.                     if with_limit_offset and not self.connection.features.supports_select_for_update_with_limit:
555.                         raise NotSupportedError(
556.                             'LIMIT/OFFSET is not supported with '
557.                             'select_for_update on this database backend.'
558.                         )
559.                     nowait = self.query.select_for_update_nowait
560.                     skip_locked = self.query.select_for_update_skip_locked
561.                     of = self.query.select_for_update_of
562.                     no_key = self.query.select_for_no_key_update
563.                     # If it's a NOWAIT/SKIP LOCKED/OF/NO KEY query but the
564.                     # backend doesn't support it, raise NotSupportedError to
565.                     # prevent a possible deadlock.
566.                     if nowait and not self.connection.features.has_select_for_update_nowait:
567.                         raise NotSupportedError('NOWAIT is not supported on this database backend.')
568.                     elif skip_locked and not self.connection.features.has_select_for_update_skip_locked:
569.                         raise NotSupportedError('SKIP LOCKED is not supported on this database backend.')
570.                     elif of and not self.connection.features.has_select_for_update_of:
571.                         raise NotSupportedError('FOR UPDATE OF is not supported on this database backend.')
572.                     elif no_key and not self.connection.features.has_select_for_no_key_update:
573.                         raise NotSupportedError(
574.                             'FOR NO KEY UPDATE is not supported on this '
575.                             'database backend.'
576.                         )
577.                     for_update_part = self.connection.ops.for_update_sql(
578.                         nowait=nowait,
579.                         skip_locked=skip_locked,
580.                         of=self.get_select_for_update_of_arguments(),
581.                         no_key=no_key,
582.                     )
583. 
584.                 if for_update_part and self.connection.features.for_update_after_from:
585.                     result.append(for_update_part)
586. 
587.                 if where:
588.                     result.append('WHERE %s' % where)
589.                     params.extend(w_params)
590. 
591.                 grouping = []
592.                 for g_sql, g_params in group_by:
593.                     grouping.append(g_sql)
594.                     params.extend(g_params)
595.                 if grouping:
596.                     if distinct_fields:
597.                         raise NotImplementedError('annotate() + distinct(fields) is not implemented.')
598.                     order_by = order_by or self.connection.ops.force_no_ordering()
599.                     result.append('GROUP BY %s' % ', '.join(grouping))
600.                     if self._meta_ordering:
601.                         order_by = None
602.                 if having:
603.                     result.append('HAVING %s' % having)
604.                     params.extend(h_params)
605. 
606.             if self.query.explain_query:
607.                 result.insert(0, self.connection.ops.explain_query_prefix(
608.                     self.query.explain_format,
609.                     **self.query.explain_options
610.                 ))
611. 
612.             if order_by:
613.                 ordering = []
614.                 for _, (o_sql, o_params, _) in order_by:
615.                     ordering.append(o_sql)
616.                     params.extend(o_params)
617.                 result.append('ORDER BY %s' % ', '.join(ordering))
618. 
619.             if with_limit_offset:
620.                 result.append(self.connection.ops.limit_offset_sql(self.query.low_mark, self.query.high_mark))
621. 
622.             if for_update_part and not self.connection.features.for_update_after_from:
623.                 result.append(for_update_part)
624. 
625.             if self.query.subquery and extra_select:
626.                 # If the query is used as a subquery, the extra selects would
627.                 # result in more columns than the left-hand side expression is
628.                 # expecting. This can happen when a subquery uses a combination
629.                 # of order_by() and distinct(), forcing the ordering expressions
630.                 # to be selected as well. Wrap the query in another subquery
631.                 # to exclude extraneous selects.
632.                 sub_selects = []
633.                 sub_params = []
634.                 for index, (select, _, alias) in enumerate(self.select, start=1):
635.                     if not alias and with_col_aliases:
636.                         alias = 'col%d' % index
637.                     if alias:
638.                         sub_selects.append("%s.%s" % (
639.                             self.connection.ops.quote_name('subquery'),
640.                             self.connection.ops.quote_name(alias),
641.                         ))
642.                     else:
643.                         select_clone = select.relabeled_clone({select.alias: 'subquery'})
644.                         subselect, subparams = select_clone.as_sql(self, self.connection)
645.                         sub_selects.append(subselect)
646.                         sub_params.extend(subparams)
647.                 return 'SELECT %s FROM (%s) subquery' % (
648.                     ', '.join(sub_selects),
649.                     ' '.join(result),
650.                 ), tuple(sub_params + params)
651. 
652.             return ' '.join(result), tuple(params)
653.         finally:
654.             # Finally do cleanup - get rid of the joins we created above.
655.             self.query.reset_refcounts(refcounts_before)
656. 
657.     def get_default_columns(self, start_alias=None, opts=None, from_parent=None):
658.         """
659.         Compute the default columns for selecting every field in the base
660.         model. Will sometimes be called to pull in related models (e.g. via
661.         select_related), in which case "opts" and "start_alias" will be given
662.         to provide a starting point for the traversal.
663. 
664.         Return a list of strings, quoted appropriately for use in SQL
665.         directly, as well as a set of aliases used in the select statement (if
666.         'as_pairs' is True, return a list of (alias, col_name) pairs instead
667.         of strings as the first component and None as the second component).
668.         """
669.         result = []
670.         if opts is None:
671.             opts = self.query.get_meta()
672.         only_load = self.deferred_to_columns()
673.         start_alias = start_alias or self.query.get_initial_alias()
674.         # The 'seen_models' is used to optimize checking the needed parent
675.         # alias for a given field. This also includes None -> start_alias to
676.         # be used by local fields.
677.         seen_models = {None: start_alias}
678. 
679.         for field in opts.concrete_fields:
680.             model = field.model._meta.concrete_model
681.             # A proxy model will have a different model and concrete_model. We
682.             # will assign None if the field belongs to this model.
683.             if model == opts.model:
684.                 model = None
685.             if from_parent and model is not None and issubclass(
686.                     from_parent._meta.concrete_model, model._meta.concrete_model):
687.                 # Avoid loading data for already loaded parents.
688.                 # We end up here in the case select_related() resolution
689.                 # proceeds from parent model to child model. In that case the
690.                 # parent model data is already present in the SELECT clause,
691.                 # and we want to avoid reloading the same data again.
692.                 continue
693.             if field.model in only_load and field.attname not in only_load[field.model]:
694.                 continue
695.             alias = self.query.join_parent_model(opts, model, start_alias,
696.                                                  seen_models)
697.             column = field.get_col(alias)
698.             result.append(column)
699.         return result
700. 
701.     def get_distinct(self):
702.         """
703.         Return a quoted list of fields to use in DISTINCT ON part of the query.
704. 
705.         This method can alter the tables in the query, and thus it must be
706.         called before get_from_clause().
707.         """
708.         result = []
709.         params = []
710.         opts = self.query.get_meta()
711. 
712.         for name in self.query.distinct_fields:
713.             parts = name.split(LOOKUP_SEP)
714.             _, targets, alias, joins, path, _, transform_function = self._setup_joins(parts, opts, None)
715.             targets, alias, _ = self.query.trim_joins(targets, joins, path)
716.             for target in targets:
717.                 if name in self.query.annotation_select:
718.                     result.append(name)
719.                 else:
720.                     r, p = self.compile(transform_function(target, alias))
721.                     result.append(r)
722.                     params.append(p)
723.         return result, params
724. 
725.     def find_ordering_name(self, name, opts, alias=None, default_order='ASC',
726.                            already_seen=None):
727.         """
728.         Return the table alias (the name might be ambiguous, the alias will
729.         not be) and column name for ordering by the given 'name' parameter.
730.         The 'name' is of the form 'field1__field2__...__fieldN'.
731.         """
732.         name, order = get_order_dir(name, default_order)
733.         descending = order == 'DESC'
734.         pieces = name.split(LOOKUP_SEP)
735.         field, targets, alias, joins, path, opts, transform_function = self._setup_joins(pieces, opts, alias)
736. 
737.         # If we get to this point and the field is a relation to another model,
738.         # append the default ordering for that model unless it is the pk
739.         # shortcut or the attribute name of the field that is specified.
740.         if (
741.             field.is_relation and
742.             opts.ordering and
743.             getattr(field, 'attname', None) != pieces[-1] and
744.             name != 'pk'
745.         ):
746.             # Firstly, avoid infinite loops.
747.             already_seen = already_seen or set()
748.             join_tuple = tuple(getattr(self.query.alias_map[j], 'join_cols', None) for j in joins)
749.             if join_tuple in already_seen:
750.                 raise FieldError('Infinite loop caused by ordering.')
751.             already_seen.add(join_tuple)
752. 
753.             results = []
754.             for item in opts.ordering:
755.                 if hasattr(item, 'resolve_expression') and not isinstance(item, OrderBy):
756.                     item = item.desc() if descending else item.asc()
757.                 if isinstance(item, OrderBy):
758.                     results.append((item, False))
759.                     continue
760.                 results.extend(self.find_ordering_name(item, opts, alias,
761.                                                        order, already_seen))
762.             return results
763.         targets, alias, _ = self.query.trim_joins(targets, joins, path)
764.         return [(OrderBy(transform_function(t, alias), descending=descending), False) for t in targets]
765. 
766.     def _setup_joins(self, pieces, opts, alias):
767.         """
768.         Helper method for get_order_by() and get_distinct().
769. 
770.         get_ordering() and get_distinct() must produce same target columns on
771.         same input, as the prefixes of get_ordering() and get_distinct() must
772.         match. Executing SQL where this is not true is an error.
773.         """
774.         alias = alias or self.query.get_initial_alias()
775.         field, targets, opts, joins, path, transform_function = self.query.setup_joins(pieces, opts, alias)
776.         alias = joins[-1]
777.         return field, targets, alias, joins, path, opts, transform_function
778. 
779.     def get_from_clause(self):
780.         """
781.         Return a list of strings that are joined together to go after the
782.         "FROM" part of the query, as well as a list any extra parameters that
783.         need to be included. Subclasses, can override this to create a
784.         from-clause via a "select".
785. 
786.         This should only be called after any SQL construction methods that
787.         might change the tables that are needed. This means the select columns,
788.         ordering, and distinct must be done first.
789.         """
790.         result = []
791.         params = []
792.         for alias in tuple(self.query.alias_map):
793.             if not self.query.alias_refcount[alias]:
794.                 continue
795.             try:
796.                 from_clause = self.query.alias_map[alias]
797.             except KeyError:
798.                 # Extra tables can end up in self.tables, but not in the
799.                 # alias_map if they aren't in a join. That's OK. We skip them.
800.                 continue
801.             clause_sql, clause_params = self.compile(from_clause)
802.             result.append(clause_sql)
803.             params.extend(clause_params)
804.         for t in self.query.extra_tables:
805.             alias, _ = self.query.table_alias(t)
806.             # Only add the alias if it's not already present (the table_alias()
807.             # call increments the refcount, so an alias refcount of one means
808.             # this is the only reference).
809.             if alias not in self.query.alias_map or self.query.alias_refcount[alias] == 1:
810.                 result.append(', %s' % self.quote_name_unless_alias(alias))
811.         return result, params
812. 
813.     def get_related_selections(self, select, opts=None, root_alias=None, cur_depth=1,
814.                                requested=None, restricted=None):
815.         """
816.         Fill in the information needed for a select_related query. The current
817.         depth is measured as the number of connections away from the root model
818.         (for example, cur_depth=1 means we are looking at models with direct
819.         connections to the root model).
820.         """
821.         def _get_field_choices():
822.             direct_choices = (f.name for f in opts.fields if f.is_relation)
823.             reverse_choices = (
824.                 f.field.related_query_name()
825.                 for f in opts.related_objects if f.field.unique
826.             )
827.             return chain(direct_choices, reverse_choices, self.query._filtered_relations)
828. 
829.         related_klass_infos = []
830.         if not restricted and cur_depth > self.query.max_depth:
831.             # We've recursed far enough; bail out.
832.             return related_klass_infos
833. 
834.         if not opts:
835.             opts = self.query.get_meta()
836.             root_alias = self.query.get_initial_alias()
837.         only_load = self.query.get_loaded_field_names()
838. 
839.         # Setup for the case when only particular related fields should be
840.         # included in the related selection.
841.         fields_found = set()
842.         if requested is None:
843.             restricted = isinstance(self.query.select_related, dict)
844.             if restricted:
845.                 requested = self.query.select_related
846. 
847.         def get_related_klass_infos(klass_info, related_klass_infos):
848.             klass_info['related_klass_infos'] = related_klass_infos
849. 
850.         for f in opts.fields:
851.             field_model = f.model._meta.concrete_model
852.             fields_found.add(f.name)
853. 
854.             if restricted:
855.                 next = requested.get(f.name, {})
856.                 if not f.is_relation:
857.                     # If a non-related field is used like a relation,
858.                     # or if a single non-relational field is given.
859.                     if next or f.name in requested:
860.                         raise FieldError(
861.                             "Non-relational field given in select_related: '%s'. "
862.                             "Choices are: %s" % (
863.                                 f.name,
864.                                 ", ".join(_get_field_choices()) or '(none)',
865.                             )
866.                         )
867.             else:
868.                 next = False
869. 
870.             if not select_related_descend(f, restricted, requested,
871.                                           only_load.get(field_model)):
872.                 continue
873.             klass_info = {
874.                 'model': f.remote_field.model,
875.                 'field': f,
876.                 'reverse': False,
877.                 'local_setter': f.set_cached_value,
878.                 'remote_setter': f.remote_field.set_cached_value if f.unique else lambda x, y: None,
879.                 'from_parent': False,
880.             }
881.             related_klass_infos.append(klass_info)
882.             select_fields = []
883.             _, _, _, joins, _, _ = self.query.setup_joins(
884.                 [f.name], opts, root_alias)
885.             alias = joins[-1]
886.             columns = self.get_default_columns(start_alias=alias, opts=f.remote_field.model._meta)
887.             for col in columns:
888.                 select_fields.append(len(select))
889.                 select.append((col, None))
890.             klass_info['select_fields'] = select_fields
891.             next_klass_infos = self.get_related_selections(
892.                 select, f.remote_field.model._meta, alias, cur_depth + 1, next, restricted)
893.             get_related_klass_infos(klass_info, next_klass_infos)
894. 
895.         if restricted:
896.             related_fields = [
897.                 (o.field, o.related_model)
898.                 for o in opts.related_objects
899.                 if o.field.unique and not o.many_to_many
900.             ]
901.             for f, model in related_fields:
902.                 if not select_related_descend(f, restricted, requested,
903.                                               only_load.get(model), reverse=True):
904.                     continue
905. 
906.                 related_field_name = f.related_query_name()
907.                 fields_found.add(related_field_name)
908. 
909.                 join_info = self.query.setup_joins([related_field_name], opts, root_alias)
910.                 alias = join_info.joins[-1]
911.                 from_parent = issubclass(model, opts.model) and model is not opts.model
912.                 klass_info = {
913.                     'model': model,
914.                     'field': f,
915.                     'reverse': True,
916.                     'local_setter': f.remote_field.set_cached_value,
917.                     'remote_setter': f.set_cached_value,
918.                     'from_parent': from_parent,
919.                 }
920.                 related_klass_infos.append(klass_info)
921.                 select_fields = []
922.                 columns = self.get_default_columns(
923.                     start_alias=alias, opts=model._meta, from_parent=opts.model)
924.                 for col in columns:
925.                     select_fields.append(len(select))
926.                     select.append((col, None))
927.                 klass_info['select_fields'] = select_fields
928.                 next = requested.get(f.related_query_name(), {})
929.                 next_klass_infos = self.get_related_selections(
930.                     select, model._meta, alias, cur_depth + 1,
931.                     next, restricted)
932.                 get_related_klass_infos(klass_info, next_klass_infos)
933. 
934.             def local_setter(obj, from_obj):
935.                 # Set a reverse fk object when relation is non-empty.
936.                 if from_obj:
937.                     f.remote_field.set_cached_value(from_obj, obj)
938. 
939.             def remote_setter(name, obj, from_obj):
940.                 setattr(from_obj, name, obj)
941. 
942.             for name in list(requested):
943.                 # Filtered relations work only on the topmost level.
944.                 if cur_depth > 1:
945.                     break
946.                 if name in self.query._filtered_relations:
947.                     fields_found.add(name)
948.                     f, _, join_opts, joins, _, _ = self.query.setup_joins([name], opts, root_alias)
949.                     model = join_opts.model
950.                     alias = joins[-1]
951.                     from_parent = issubclass(model, opts.model) and model is not opts.model
952.                     klass_info = {
953.                         'model': model,
954.                         'field': f,
955.                         'reverse': True,
956.                         'local_setter': local_setter,
957.                         'remote_setter': partial(remote_setter, name),
958.                         'from_parent': from_parent,
959.                     }
960.                     related_klass_infos.append(klass_info)
961.                     select_fields = []
962.                     columns = self.get_default_columns(
963.                         start_alias=alias, opts=model._meta,
964.                         from_parent=opts.model,
965.                     )
966.                     for col in columns:
967.                         select_fields.append(len(select))
968.                         select.append((col, None))
969.                     klass_info['select_fields'] = select_fields
970.                     next_requested = requested.get(name, {})
971.                     next_klass_infos = self.get_related_selections(
972.                         select, opts=model._meta, root_alias=alias,
973.                         cur_depth=cur_depth + 1, requested=next_requested,
974.                         restricted=restricted,
975.                     )
976.                     get_related_klass_infos(klass_info, next_klass_infos)
977.             fields_not_found = set(requested).difference(fields_found)
978.             if fields_not_found:
979.                 invalid_fields = ("'%s'" % s for s in fields_not_found)
980.                 raise FieldError(
981.                     'Invalid field name(s) given in select_related: %s. '
982.                     'Choices are: %s' % (
983.                         ', '.join(invalid_fields),
984.                         ', '.join(_get_field_choices()) or '(none)',
985.                     )
986.                 )
987.         return related_klass_infos
988. 
989.     def get_select_for_update_of_arguments(self):
990.         """
991.         Return a quoted list of arguments for the SELECT FOR UPDATE OF part of
992.         the query.
993.         """
994.         def _get_parent_klass_info(klass_info):
995.             concrete_model = klass_info['model']._meta.concrete_model
996.             for parent_model, parent_link in concrete_model._meta.parents.items():
997.                 parent_list = parent_model._meta.get_parent_list()
998.                 yield {
999.                     'model': parent_model,
1000.                     'field': parent_link,
1001.                     'reverse': False,
1002.                     'select_fields': [
1003.                         select_index
1004.                         for select_index in klass_info['select_fields']
1005.                         # Selected columns from a model or its parents.
1006.                         if (
1007.                             self.select[select_index][0].target.model == parent_model or
1008.                             self.select[select_index][0].target.model in parent_list
1009.                         )
1010.                     ],
1011.                 }
1012. 
1013.         def _get_first_selected_col_from_model(klass_info):
1014.             """
1015.             Find the first selected column from a model. If it doesn't exist,
1016.             don't lock a model.
1017. 
1018.             select_fields is filled recursively, so it also contains fields
1019.             from the parent models.
1020.             """
1021.             concrete_model = klass_info['model']._meta.concrete_model
1022.             for select_index in klass_info['select_fields']:
1023.                 if self.select[select_index][0].target.model == concrete_model:
1024.                     return self.select[select_index][0]
1025. 
1026.         def _get_field_choices():
1027.             """Yield all allowed field paths in breadth-first search order."""
1028.             queue = collections.deque([(None, self.klass_info)])
1029.             while queue:
1030.                 parent_path, klass_info = queue.popleft()
1031.                 if parent_path is None:
1032.                     path = []
1033.                     yield 'self'
1034.                 else:
1035.                     field = klass_info['field']
1036.                     if klass_info['reverse']:
1037.                         field = field.remote_field
1038.                     path = parent_path + [field.name]
1039.                     yield LOOKUP_SEP.join(path)
1040.                 queue.extend(
1041.                     (path, klass_info)
1042.                     for klass_info in _get_parent_klass_info(klass_info)
1043.                 )
1044.                 queue.extend(
1045.                     (path, klass_info)
1046.                     for klass_info in klass_info.get('related_klass_infos', [])
1047.                 )
1048.         result = []
1049.         invalid_names = []
1050.         for name in self.query.select_for_update_of:
1051.             klass_info = self.klass_info
1052.             if name == 'self':
1053.                 col = _get_first_selected_col_from_model(klass_info)
1054.             else:
1055.                 for part in name.split(LOOKUP_SEP):
1056.                     klass_infos = (
1057.                         *klass_info.get('related_klass_infos', []),
1058.                         *_get_parent_klass_info(klass_info),
1059.                     )
1060.                     for related_klass_info in klass_infos:
1061.                         field = related_klass_info['field']
1062.                         if related_klass_info['reverse']:
1063.                             field = field.remote_field
1064.                         if field.name == part:
1065.                             klass_info = related_klass_info
1066.                             break
1067.                     else:
1068.                         klass_info = None
1069.                         break
1070.                 if klass_info is None:
1071.                     invalid_names.append(name)
1072.                     continue
1073.                 col = _get_first_selected_col_from_model(klass_info)
1074.             if col is not None:
1075.                 if self.connection.features.select_for_update_of_column:
1076.                     result.append(self.compile(col)[0])
1077.                 else:
1078.                     result.append(self.quote_name_unless_alias(col.alias))
1079.         if invalid_names:
1080.             raise FieldError(
1081.                 'Invalid field name(s) given in select_for_update(of=(...)): %s. '
1082.                 'Only relational fields followed in the query are allowed. '
1083.                 'Choices are: %s.' % (
1084.                     ', '.join(invalid_names),
1085.                     ', '.join(_get_field_choices()),
1086.                 )
1087.             )
1088.         return result
1089. 
1090.     def deferred_to_columns(self):
1091.         """
1092.         Convert the self.deferred_loading data structure to mapping of table
1093.         names to sets of column names which are to be loaded. Return the
1094.         dictionary.
1095.         """
1096.         columns = {}
1097.         self.query.deferred_to_data(columns, self.query.get_loaded_field_names_cb)
1098.         return columns
1099. 
1100.     def get_converters(self, expressions):
1101.         converters = {}
1102.         for i, expression in enumerate(expressions):
1103.             if expression:
1104.                 backend_converters = self.connection.ops.get_db_converters(expression)
1105.                 field_converters = expression.get_db_converters(self.connection)
1106.                 if backend_converters or field_converters:
1107.                     converters[i] = (backend_converters + field_converters, expression)
1108.         return converters
1109. 
1110.     def apply_converters(self, rows, converters):
1111.         connection = self.connection
1112.         converters = list(converters.items())
1113.         for row in map(list, rows):
1114.             for pos, (convs, expression) in converters:
1115.                 value = row[pos]
1116.                 for converter in convs:
1117.                     value = converter(value, expression, connection)
1118.                 row[pos] = value
1119.             yield row
1120. 
1121.     def results_iter(self, results=None, tuple_expected=False, chunked_fetch=False,
1122.                      chunk_size=GET_ITERATOR_CHUNK_SIZE):
1123.         """Return an iterator over the results from executing this query."""
1124.         if results is None:
1125.             results = self.execute_sql(MULTI, chunked_fetch=chunked_fetch, chunk_size=chunk_size)
1126.         fields = [s[0] for s in self.select[0:self.col_count]]
1127.         converters = self.get_converters(fields)
1128.         rows = chain.from_iterable(results)
1129.         if converters:
1130.             rows = self.apply_converters(rows, converters)
1131.             if tuple_expected:
1132.                 rows = map(tuple, rows)
1133.         return rows
1134. 
1135.     def has_results(self):
1136.         """
1137.         Backends (e.g. NoSQL) can override this in order to use optimized
1138.         versions of "query has any results."
1139.         """
1140.         return bool(self.execute_sql(SINGLE))
1141. 
1142.     def execute_sql(self, result_type=MULTI, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
1143.         """
1144.         Run the query against the database and return the result(s). The
1145.         return value is a single data item if result_type is SINGLE, or an
1146.         iterator over the results if the result_type is MULTI.
1147. 
1148.         result_type is either MULTI (use fetchmany() to retrieve all rows),
1149.         SINGLE (only retrieve a single row), or None. In this last case, the
1150.         cursor is returned if any query is executed, since it's used by
1151.         subclasses such as InsertQuery). It's possible, however, that no query
1152.         is needed, as the filters describe an empty set. In that case, None is
1153.         returned, to avoid any unnecessary database interaction.
1154.         """
1155.         result_type = result_type or NO_RESULTS
1156.         try:
1157.             sql, params = self.as_sql()
1158.             if not sql:
1159.                 raise EmptyResultSet
1160.         except EmptyResultSet:
1161.             if result_type == MULTI:
1162.                 return iter([])
1163.             else:
1164.                 return
1165.         if chunked_fetch:
1166.             cursor = self.connection.chunked_cursor()
1167.         else:
1168.             cursor = self.connection.cursor()
1169.         try:
1170.             cursor.execute(sql, params)
1171.         except Exception:
1172.             # Might fail for server-side cursors (e.g. connection closed)
1173.             cursor.close()
1174.             raise
1175. 
1176.         if result_type == CURSOR:
1177.             # Give the caller the cursor to process and close.
1178.             return cursor
1179.         if result_type == SINGLE:
1180.             try:
1181.                 val = cursor.fetchone()
1182.                 if val:
1183.                     return val[0:self.col_count]
1184.                 return val
1185.             finally:
1186.                 # done with the cursor
1187.                 cursor.close()
1188.         if result_type == NO_RESULTS:
1189.             cursor.close()
1190.             return
1191. 
1192.         result = cursor_iter(
1193.             cursor, self.connection.features.empty_fetchmany_value,
1194.             self.col_count if self.has_extra_select else None,
1195.             chunk_size,
1196.         )
1197.         if not chunked_fetch or not self.connection.features.can_use_chunked_reads:
1198.             try:
1199.                 # If we are using non-chunked reads, we return the same data
1200.                 # structure as normally, but ensure it is all read into memory
1201.                 # before going any further. Use chunked_fetch if requested,
1202.                 # unless the database doesn't support it.
1203.                 return list(result)
1204.             finally:
1205.                 # done with the cursor
1206.                 cursor.close()
1207.         return result
1208. 
1209.     def as_subquery_condition(self, alias, columns, compiler):
1210.         qn = compiler.quote_name_unless_alias
1211.         qn2 = self.connection.ops.quote_name
1212. 
1213.         for index, select_col in enumerate(self.query.select):
1214.             lhs_sql, lhs_params = self.compile(select_col)
1215.             rhs = '%s.%s' % (qn(alias), qn2(columns[index]))
1216.             self.query.where.add(
1217.                 RawSQL('%s = %s' % (lhs_sql, rhs), lhs_params), 'AND')
1218. 
1219.         sql, params = self.as_sql()
1220.         return 'EXISTS (%s)' % sql, params
1221. 
1222.     def explain_query(self):
1223.         result = list(self.execute_sql())
1224.         # Some backends return 1 item tuples with strings, and others return
1225.         # tuples with integers and strings. Flatten them out into strings.
1226.         for row in result[0]:
1227.             if not isinstance(row, str):
1228.                 yield ' '.join(str(c) for c in row)
1229.             else:
1230.                 yield row
1231. 
1232. 
1233. class SQLInsertCompiler(SQLCompiler):
1234.     returning_fields = None
1235.     returning_params = tuple()
1236. 
1237.     def field_as_sql(self, field, val):
1238.         """
1239.         Take a field and a value intended to be saved on that field, and
1240.         return placeholder SQL and accompanying params. Check for raw values,
1241.         expressions, and fields with get_placeholder() defined in that order.
1242. 
1243.         When field is None, consider the value raw and use it as the
1244.         placeholder, with no corresponding parameters returned.
1245.         """
1246.         if field is None:
1247.             # A field value of None means the value is raw.
1248.             sql, params = val, []
1249.         elif hasattr(val, 'as_sql'):
1250.             # This is an expression, let's compile it.
1251.             sql, params = self.compile(val)
1252.         elif hasattr(field, 'get_placeholder'):
1253.             # Some fields (e.g. geo fields) need special munging before
1254.             # they can be inserted.
1255.             sql, params = field.get_placeholder(val, self, self.connection), [val]
1256.         else:
1257.             # Return the common case for the placeholder
1258.             sql, params = '%s', [val]
1259. 
1260.         # The following hook is only used by Oracle Spatial, which sometimes
1261.         # needs to yield 'NULL' and [] as its placeholder and params instead
1262.         # of '%s' and [None]. The 'NULL' placeholder is produced earlier by
1263.         # OracleOperations.get_geom_placeholder(). The following line removes
1264.         # the corresponding None parameter. See ticket #10888.
1265.         params = self.connection.ops.modify_insert_params(sql, params)
1266. 
1267.         return sql, params
1268. 
1269.     def prepare_value(self, field, value):
1270.         """
1271.         Prepare a value to be used in a query by resolving it if it is an
1272.         expression and otherwise calling the field's get_db_prep_save().
1273.         """
1274.         if hasattr(value, 'resolve_expression'):
1275.             value = value.resolve_expression(self.query, allow_joins=False, for_save=True)
1276.             # Don't allow values containing Col expressions. They refer to
1277.             # existing columns on a row, but in the case of insert the row
1278.             # doesn't exist yet.
1279.             if value.contains_column_references:
1280.                 raise ValueError(
1281.                     'Failed to insert expression "%s" on %s. F() expressions '
1282.                     'can only be used to update, not to insert.' % (value, field)
1283.                 )
1284.             if value.contains_aggregate:
1285.                 raise FieldError(
1286.                     'Aggregate functions are not allowed in this query '
1287.                     '(%s=%r).' % (field.name, value)
1288.                 )
1289.             if value.contains_over_clause:
1290.                 raise FieldError(
1291.                     'Window expressions are not allowed in this query (%s=%r).'
1292.                     % (field.name, value)
1293.                 )
1294.         else:
1295.             value = field.get_db_prep_save(value, connection=self.connection)
1296.         return value
1297. 
1298.     def pre_save_val(self, field, obj):
1299.         """
1300.         Get the given field's value off the given obj. pre_save() is used for
1301.         things like auto_now on DateTimeField. Skip it if this is a raw query.
1302.         """
1303.         if self.query.raw:
1304.             return getattr(obj, field.attname)
1305.         return field.pre_save(obj, add=True)
1306. 
1307.     def assemble_as_sql(self, fields, value_rows):
1308.         """
1309.         Take a sequence of N fields and a sequence of M rows of values, and
1310.         generate placeholder SQL and parameters for each field and value.
1311.         Return a pair containing:
1312.          * a sequence of M rows of N SQL placeholder strings, and
1313.          * a sequence of M rows of corresponding parameter values.
1314. 
1315.         Each placeholder string may contain any number of '%s' interpolation
1316.         strings, and each parameter row will contain exactly as many params
1317.         as the total number of '%s's in the corresponding placeholder row.
1318.         """
1319.         if not value_rows:
1320.             return [], []
1321. 
1322.         # list of (sql, [params]) tuples for each object to be saved
1323.         # Shape: [n_objs][n_fields][2]
1324.         rows_of_fields_as_sql = (
1325.             (self.field_as_sql(field, v) for field, v in zip(fields, row))
1326.             for row in value_rows
1327.         )
1328. 
1329.         # tuple like ([sqls], [[params]s]) for each object to be saved
1330.         # Shape: [n_objs][2][n_fields]
1331.         sql_and_param_pair_rows = (zip(*row) for row in rows_of_fields_as_sql)
1332. 
1333.         # Extract separate lists for placeholders and params.
1334.         # Each of these has shape [n_objs][n_fields]
1335.         placeholder_rows, param_rows = zip(*sql_and_param_pair_rows)
1336. 
1337.         # Params for each field are still lists, and need to be flattened.
1338.         param_rows = [[p for ps in row for p in ps] for row in param_rows]
1339. 
1340.         return placeholder_rows, param_rows
1341. 
1342.     def as_sql(self):
1343.         # We don't need quote_name_unless_alias() here, since these are all
1344.         # going to be column names (so we can avoid the extra overhead).
1345.         qn = self.connection.ops.quote_name
1346.         opts = self.query.get_meta()
1347.         insert_statement = self.connection.ops.insert_statement(ignore_conflicts=self.query.ignore_conflicts)
1348.         result = ['%s %s' % (insert_statement, qn(opts.db_table))]
1349.         fields = self.query.fields or [opts.pk]
1350.         result.append('(%s)' % ', '.join(qn(f.column) for f in fields))
1351. 
1352.         if self.query.fields:
1353.             value_rows = [
1354.                 [self.prepare_value(field, self.pre_save_val(field, obj)) for field in fields]
1355.                 for obj in self.query.objs
1356.             ]
1357.         else:
1358.             # An empty object.
1359.             value_rows = [[self.connection.ops.pk_default_value()] for _ in self.query.objs]
1360.             fields = [None]
1361. 
1362.         # Currently the backends just accept values when generating bulk
1363.         # queries and generate their own placeholders. Doing that isn't
1364.         # necessary and it should be possible to use placeholders and
1365.         # expressions in bulk inserts too.
1366.         can_bulk = (not self.returning_fields and self.connection.features.has_bulk_insert)
1367. 
1368.         placeholder_rows, param_rows = self.assemble_as_sql(fields, value_rows)
1369. 
1370.         ignore_conflicts_suffix_sql = self.connection.ops.ignore_conflicts_suffix_sql(
1371.             ignore_conflicts=self.query.ignore_conflicts
1372.         )
1373.         if self.returning_fields and self.connection.features.can_return_columns_from_insert:
1374.             if self.connection.features.can_return_rows_from_bulk_insert:
1375.                 result.append(self.connection.ops.bulk_insert_sql(fields, placeholder_rows))
1376.                 params = param_rows
1377.             else:
1378.                 result.append("VALUES (%s)" % ", ".join(placeholder_rows[0]))
1379.                 params = [param_rows[0]]
1380.             if ignore_conflicts_suffix_sql:
1381.                 result.append(ignore_conflicts_suffix_sql)
1382.             # Skip empty r_sql to allow subclasses to customize behavior for
1383.             # 3rd party backends. Refs #19096.
1384.             r_sql, self.returning_params = self.connection.ops.return_insert_columns(self.returning_fields)
1385.             if r_sql:
1386.                 result.append(r_sql)
1387.                 params += [self.returning_params]
1388.             return [(" ".join(result), tuple(chain.from_iterable(params)))]
1389. 
1390.         if can_bulk:
1391.             result.append(self.connection.ops.bulk_insert_sql(fields, placeholder_rows))
1392.             if ignore_conflicts_suffix_sql:
1393.                 result.append(ignore_conflicts_suffix_sql)
1394.             return [(" ".join(result), tuple(p for ps in param_rows for p in ps))]
1395.         else:
1396.             if ignore_conflicts_suffix_sql:
1397.                 result.append(ignore_conflicts_suffix_sql)
1398.             return [
1399.                 (" ".join(result + ["VALUES (%s)" % ", ".join(p)]), vals)
1400.                 for p, vals in zip(placeholder_rows, param_rows)
1401.             ]
1402. 
1403.     def execute_sql(self, returning_fields=None):
1404.         assert not (
1405.             returning_fields and len(self.query.objs) != 1 and
1406.             not self.connection.features.can_return_rows_from_bulk_insert
1407.         )
1408.         self.returning_fields = returning_fields
1409.         with self.connection.cursor() as cursor:
1410.             for sql, params in self.as_sql():
1411.                 cursor.execute(sql, params)
1412.             if not self.returning_fields:
1413.                 return []
1414.             if self.connection.features.can_return_rows_from_bulk_insert and len(self.query.objs) > 1:
1415.                 return self.connection.ops.fetch_returned_insert_rows(cursor)
1416.             if self.connection.features.can_return_columns_from_insert:
1417.                 assert len(self.query.objs) == 1
1418.                 return [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
1419.             return [(self.connection.ops.last_insert_id(
1420.                 cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
1421.             ),)]
1422. 
1423. 
1424. class SQLDeleteCompiler(SQLCompiler):
1425.     @cached_property
1426.     def single_alias(self):
1427.         # Ensure base table is in aliases.
1428.         self.query.get_initial_alias()
1429.         return sum(self.query.alias_refcount[t] > 0 for t in self.query.alias_map) == 1
1430. 
1431.     def _as_sql(self, query):
1432.         result = [
1433.             'DELETE FROM %s' % self.quote_name_unless_alias(query.base_table)
1434.         ]
1435.         where, params = self.compile(query.where)
1436.         if where:
1437.             result.append('WHERE %s' % where)
1438.         return ' '.join(result), tuple(params)
1439. 
1440.     def as_sql(self):
1441.         """
1442.         Create the SQL for this query. Return the SQL string and list of
1443.         parameters.
1444.         """
1445.         if self.single_alias:
1446.             return self._as_sql(self.query)
1447.         innerq = self.query.clone()
1448.         innerq.__class__ = Query
1449.         innerq.clear_select_clause()
1450.         pk = self.query.model._meta.pk
1451.         innerq.select = [
1452.             pk.get_col(self.query.get_initial_alias())
1453.         ]
1454.         outerq = Query(self.query.model)
1455.         outerq.where = self.query.where_class()
1456.         if not self.connection.features.update_can_self_select:
1457.             # Force the materialization of the inner query to allow reference
1458.             # to the target table on MySQL.
1459.             sql, params = innerq.get_compiler(connection=self.connection).as_sql()
1460.             innerq = RawSQL('SELECT * FROM (%s) subquery' % sql, params)
1461.         outerq.add_q(Q(pk__in=innerq))
1462.         return self._as_sql(outerq)
1463. 
1464. 
1465. class SQLUpdateCompiler(SQLCompiler):
1466.     def as_sql(self):
1467.         """
1468.         Create the SQL for this query. Return the SQL string and list of
1469.         parameters.
1470.         """
1471.         self.pre_sql_setup()
1472.         if not self.query.values:
1473.             return '', ()
1474.         qn = self.quote_name_unless_alias
1475.         values, update_params = [], []
1476.         for field, model, val in self.query.values:
1477.             if hasattr(val, 'resolve_expression'):
1478.                 val = val.resolve_expression(self.query, allow_joins=False, for_save=True)
1479.                 if val.contains_aggregate:
1480.                     raise FieldError(
1481.                         'Aggregate functions are not allowed in this query '
1482.                         '(%s=%r).' % (field.name, val)
1483.                     )
1484.                 if val.contains_over_clause:
1485.                     raise FieldError(
1486.                         'Window expressions are not allowed in this query '
1487.                         '(%s=%r).' % (field.name, val)
1488.                     )
1489.             elif hasattr(val, 'prepare_database_save'):
1490.                 if field.remote_field:
1491.                     val = field.get_db_prep_save(
1492.                         val.prepare_database_save(field),
1493.                         connection=self.connection,
1494.                     )
1495.                 else:
1496.                     raise TypeError(
1497.                         "Tried to update field %s with a model instance, %r. "
1498.                         "Use a value compatible with %s."
1499.                         % (field, val, field.__class__.__name__)
1500.                     )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-22 16:52:26,281 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The user's issue is about the `from_db_value` converter on a field not being called. The provided patch in `SQLInsertCompiler` adds a call to `get_converters`, which is responsible for collecting field converters. To fully understand how the patch works and why it is correct, it is essential to inspect the implementation of the `Field` class, specifically the `get_db_converters` and `from_db_value` methods, which are defined in `django/db/models/fields/__init__.py`. This file also contains the definition for `BigAutoField`, which is mentioned in the issue description." query='Please provide the full content of the file `django/db/models/fields/__init__.py`.' extra_requirements='' purpose='I need to examine the base Field class implementation to understand how `from_db_value` is registered as a converter via `get_db_converters`.'
2025-12-22 16:52:26,283 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
2025-12-22 16:52:26,283 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-22 16:52:26,284 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-22 16:52:26,285 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-22 16:52:26,285 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
Purpose: I need to examine the base Field class implementation to understand how `from_db_value` is registered as a converter via `get_db_converters`.
2025-12-22 16:52:29,943 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the file `django/db/models/fields/__init__.py`. This will allow you to examine the base `Field` class and understand its implementation details, including the registration of `from_db_value` as a converter.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2114, 'candidates_token_count': 80, 'total_token_count': 2416, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2114}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 80}], 'thoughts_token_count': 222, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.16681034564971925, 'model_name': 'gemini-2.5-pro'} id='run--14c4f0cc-29d8-45bb-ae31-18fecb07d37d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/models/fields/__init__.py'}, 'id': 'a1441a64-a5d3-4821-b52f-62ce063eb7df', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2114, 'output_tokens': 80, 'total_tokens': 2416, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 222}}
2025-12-22 16:52:35,186 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the remaining content of the file `django/db/models/fields/__init__.py`. Now I will search for the `get_db_converters` method within the `Field` class to understand its implementation and how it relates to `from_db_value`.' additional_kwargs={'function_call': {'name': 'read_code_with_relative_path', 'arguments': '{"start_line": 501.0, "relative_path": "django/db/models/fields/__init__.py", "end_line": 2000.0}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9347, 'candidates_token_count': 90, 'total_token_count': 9779, 'cached_content_token_count': 1827, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9347}], 'cache_tokens_details': [{'modality': 1, 'token_count': 1827}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 90}], 'thoughts_token_count': 342}, 'finish_reason': 'STOP', 'avg_logprobs': -0.5633343166775173, 'model_name': 'gemini-2.5-pro'} id='run--87f2b0ad-c4cc-446c-a928-48709ab90721-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'start_line': 501.0, 'relative_path': 'django/db/models/fields/__init__.py', 'end_line': 2000.0}, 'id': '1b06c779-3ac4-46c0-b26e-0801f89b051b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9347, 'output_tokens': 90, 'total_tokens': 9779, 'input_token_details': {'cache_read': 1827}, 'output_token_details': {'reasoning': 342}}
2025-12-22 16:52:40,004 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have finished retrieving the file content and will now analyze it. I will search for the `get_db_converters` and `from_db_value` methods within the `Field` class to understand their implementation and how they are connected.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "def from_db_value(self, value, expression, connection):", "relative_path": "django/db/models/fields/__init__.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 31402, 'candidates_token_count': 146, 'total_token_count': 31807, 'cached_content_token_count': 9627, 'prompt_tokens_details': [{'modality': 1, 'token_count': 31402}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9627}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 146}], 'thoughts_token_count': 259}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21657839213332084, 'model_name': 'gemini-2.5-pro'} id='run--77f47748-e103-4751-bc8a-73885e5891c5-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'def get_db_converters(self, connection):', 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': '7909b37c-2673-4cb3-aa62-55f7f9aadbf0', 'type': 'tool_call'}, {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'def from_db_value(self, value, expression, connection):', 'relative_path': 'django/db/models/fields/__init__.py'}, 'id': '90ee0aae-eff5-4223-bd88-74fee82e1df3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 31402, 'output_tokens': 146, 'total_tokens': 31807, 'input_token_details': {'cache_read': 9627}, 'output_token_details': {'reasoning': 259}}
2025-12-22 16:52:46,698 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have analyzed the `django/db/models/fields/__init__.py` file to understand how `from_db_value` is registered. My search revealed that the `get_db_converters` method in the base `Field` class is responsible for this. It checks for the existence of a `from_db_value` method on the field instance and, if present, returns it as a converter. I also found that `from_db_value` is not defined in the base `Field` class, which suggests it is intended to be implemented by subclasses. To confirm this, I will now examine the `JSONField` class to see if it provides an implementation of `from_db_value`.' additional_kwargs={'function_call': {'name': 'find_ast_node_with_text_in_file_with_relative_path', 'arguments': '{"text": "class JSONField", "relative_path": "django/db/models/fields/json.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 41489, 'candidates_token_count': 186, 'total_token_count': 41965, 'cached_content_token_count': 9643, 'prompt_tokens_details': [{'modality': 1, 'token_count': 41489}], 'cache_tokens_details': [{'modality': 1, 'token_count': 9643}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 186}], 'thoughts_token_count': 290}, 'finish_reason': 'STOP', 'avg_logprobs': -0.22078462826308384, 'model_name': 'gemini-2.5-pro'} id='run--f66f1441-bfd1-44a9-ac0e-1948dce90a60-0' tool_calls=[{'name': 'find_ast_node_with_text_in_file_with_relative_path', 'args': {'text': 'class JSONField', 'relative_path': 'django/db/models/fields/json.py'}, 'id': 'dbf40093-585d-41df-994d-f8327d7049ac', 'type': 'tool_call'}] usage_metadata={'input_tokens': 41489, 'output_tokens': 186, 'total_tokens': 41965, 'input_token_details': {'cache_read': 9643}, 'output_token_details': {'reasoning': 290}}
2025-12-22 16:52:53,913 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have completed the investigation into how `from_db_value` is registered as a converter.\n\nFirst, I examined the `django/db/models/fields/__init__.py` file, which contains the base `Field` class. The `get_db_converters` method in this class checks if the field instance has a `from_db_value` method. If it does, `get_db_converters` returns a list containing that method, effectively registering it as a data converter.\n\nNext, I confirmed that the base `Field` class itself does not implement `from_db_value`, meaning subclasses are responsible for providing their own implementation if they require custom data conversion.\n\nFinally, I inspected the `JSONField` class in `django/db/models/fields/json.py` and found that it does indeed provide its own `from_db_value` method. This method is responsible for decoding a JSON string from the database into a Python object. This confirms the design pattern: the base class provides the registration mechanism, and subclasses provide the specific conversion logic.' additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 42712, 'candidates_token_count': 227, 'total_token_count': 43346, 'cached_content_token_count': 40472, 'prompt_tokens_details': [{'modality': 1, 'token_count': 42712}], 'cache_tokens_details': [{'modality': 1, 'token_count': 40472}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 227}], 'thoughts_token_count': 407}, 'finish_reason': 'STOP', 'avg_logprobs': -0.21544401866223845, 'model_name': 'gemini-2.5-pro'} id='run--5539e041-af4b-49b3-9938-aa2627411048-0' usage_metadata={'input_tokens': 42712, 'output_tokens': 227, 'total_tokens': 43346, 'input_token_details': {'cache_read': 40472}, 'output_token_details': {'reasoning': 407}}
2025-12-22 16:52:53,916 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/models/fields/__init__.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to examine the base Field class implementation to understand how `from_db_value` is registered as a converter via `get_db_converters`.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/models/fields/__init__.py
Line number range: 1 - 500
Content:
1. import collections.abc
2. import copy
3. import datetime
4. import decimal
5. import operator
6. import uuid
7. import warnings
8. from base64 import b64decode, b64encode
9. from functools import partialmethod, total_ordering
10. 
11. from django import forms
12. from django.apps import apps
13. from django.conf import settings
14. from django.core import checks, exceptions, validators
15. from django.db import connection, connections, router
16. from django.db.models.constants import LOOKUP_SEP
17. from django.db.models.query_utils import DeferredAttribute, RegisterLookupMixin
18. from django.utils import timezone
19. from django.utils.datastructures import DictWrapper
20. from django.utils.dateparse import (
21.     parse_date, parse_datetime, parse_duration, parse_time,
22. )
23. from django.utils.duration import duration_microseconds, duration_string
24. from django.utils.functional import Promise, cached_property
25. from django.utils.ipv6 import clean_ipv6_address
26. from django.utils.itercompat import is_iterable
27. from django.utils.text import capfirst
28. from django.utils.translation import gettext_lazy as _
29. 
30. __all__ = [
31.     'AutoField', 'BLANK_CHOICE_DASH', 'BigAutoField', 'BigIntegerField',
32.     'BinaryField', 'BooleanField', 'CharField', 'CommaSeparatedIntegerField',
33.     'DateField', 'DateTimeField', 'DecimalField', 'DurationField',
34.     'EmailField', 'Empty', 'Field', 'FilePathField', 'FloatField',
35.     'GenericIPAddressField', 'IPAddressField', 'IntegerField', 'NOT_PROVIDED',
36.     'NullBooleanField', 'PositiveBigIntegerField', 'PositiveIntegerField',
37.     'PositiveSmallIntegerField', 'SlugField', 'SmallAutoField',
38.     'SmallIntegerField', 'TextField', 'TimeField', 'URLField', 'UUIDField',
39. ]
40. 
41. 
42. class Empty:
43.     pass
44. 
45. 
46. class NOT_PROVIDED:
47.     pass
48. 
49. 
50. # The values to use for "blank" in SelectFields. Will be appended to the start
51. # of most "choices" lists.
52. BLANK_CHOICE_DASH = [("", "---------")]
53. 
54. 
55. def _load_field(app_label, model_name, field_name):
56.     return apps.get_model(app_label, model_name)._meta.get_field(field_name)
57. 
58. 
59. # A guide to Field parameters:
60. #
61. #   * name:      The name of the field specified in the model.
62. #   * attname:   The attribute to use on the model object. This is the same as
63. #                "name", except in the case of ForeignKeys, where "_id" is
64. #                appended.
65. #   * db_column: The db_column specified in the model (or None).
66. #   * column:    The database column for this field. This is the same as
67. #                "attname", except if db_column is specified.
68. #
69. # Code that introspects values, or does other dynamic things, should use
70. # attname. For example, this gets the primary key value of object "obj":
71. #
72. #     getattr(obj, opts.pk.attname)
73. 
74. def _empty(of_cls):
75.     new = Empty()
76.     new.__class__ = of_cls
77.     return new
78. 
79. 
80. def return_None():
81.     return None
82. 
83. 
84. @total_ordering
85. class Field(RegisterLookupMixin):
86.     """Base class for all field types"""
87. 
88.     # Designates whether empty strings fundamentally are allowed at the
89.     # database level.
90.     empty_strings_allowed = True
91.     empty_values = list(validators.EMPTY_VALUES)
92. 
93.     # These track each time a Field instance is created. Used to retain order.
94.     # The auto_creation_counter is used for fields that Django implicitly
95.     # creates, creation_counter is used for all user-specified fields.
96.     creation_counter = 0
97.     auto_creation_counter = -1
98.     default_validators = []  # Default set of validators
99.     default_error_messages = {
100.         'invalid_choice': _('Value %(value)r is not a valid choice.'),
101.         'null': _('This field cannot be null.'),
102.         'blank': _('This field cannot be blank.'),
103.         'unique': _('%(model_name)s with this %(field_label)s '
104.                     'already exists.'),
105.         # Translators: The 'lookup_type' is one of 'date', 'year' or 'month'.
106.         # Eg: "Title must be unique for pub_date year"
107.         'unique_for_date': _("%(field_label)s must be unique for "
108.                              "%(date_field_label)s %(lookup_type)s."),
109.     }
110.     system_check_deprecated_details = None
111.     system_check_removed_details = None
112. 
113.     # Field flags
114.     hidden = False
115. 
116.     many_to_many = None
117.     many_to_one = None
118.     one_to_many = None
119.     one_to_one = None
120.     related_model = None
121. 
122.     descriptor_class = DeferredAttribute
123. 
124.     # Generic field type description, usually overridden by subclasses
125.     def _description(self):
126.         return _('Field of type: %(field_type)s') % {
127.             'field_type': self.__class__.__name__
128.         }
129.     description = property(_description)
130. 
131.     def __init__(self, verbose_name=None, name=None, primary_key=False,
132.                  max_length=None, unique=False, blank=False, null=False,
133.                  db_index=False, rel=None, default=NOT_PROVIDED, editable=True,
134.                  serialize=True, unique_for_date=None, unique_for_month=None,
135.                  unique_for_year=None, choices=None, help_text='', db_column=None,
136.                  db_tablespace=None, auto_created=False, validators=(),
137.                  error_messages=None):
138.         self.name = name
139.         self.verbose_name = verbose_name  # May be set by set_attributes_from_name
140.         self._verbose_name = verbose_name  # Store original for deconstruction
141.         self.primary_key = primary_key
142.         self.max_length, self._unique = max_length, unique
143.         self.blank, self.null = blank, null
144.         self.remote_field = rel
145.         self.is_relation = self.remote_field is not None
146.         self.default = default
147.         self.editable = editable
148.         self.serialize = serialize
149.         self.unique_for_date = unique_for_date
150.         self.unique_for_month = unique_for_month
151.         self.unique_for_year = unique_for_year
152.         if isinstance(choices, collections.abc.Iterator):
153.             choices = list(choices)
154.         self.choices = choices
155.         self.help_text = help_text
156.         self.db_index = db_index
157.         self.db_column = db_column
158.         self._db_tablespace = db_tablespace
159.         self.auto_created = auto_created
160. 
161.         # Adjust the appropriate creation counter, and save our local copy.
162.         if auto_created:
163.             self.creation_counter = Field.auto_creation_counter
164.             Field.auto_creation_counter -= 1
165.         else:
166.             self.creation_counter = Field.creation_counter
167.             Field.creation_counter += 1
168. 
169.         self._validators = list(validators)  # Store for deconstruction later
170. 
171.         messages = {}
172.         for c in reversed(self.__class__.__mro__):
173.             messages.update(getattr(c, 'default_error_messages', {}))
174.         messages.update(error_messages or {})
175.         self._error_messages = error_messages  # Store for deconstruction later
176.         self.error_messages = messages
177. 
178.     def __str__(self):
179.         """
180.         Return "app_label.model_label.field_name" for fields attached to
181.         models.
182.         """
183.         if not hasattr(self, 'model'):
184.             return super().__str__()
185.         model = self.model
186.         return '%s.%s' % (model._meta.label, self.name)
187. 
188.     def __repr__(self):
189.         """Display the module, class, and name of the field."""
190.         path = '%s.%s' % (self.__class__.__module__, self.__class__.__qualname__)
191.         name = getattr(self, 'name', None)
192.         if name is not None:
193.             return '<%s: %s>' % (path, name)
194.         return '<%s>' % path
195. 
196.     def check(self, **kwargs):
197.         return [
198.             *self._check_field_name(),
199.             *self._check_choices(),
200.             *self._check_db_index(),
201.             *self._check_null_allowed_for_primary_keys(),
202.             *self._check_backend_specific_checks(**kwargs),
203.             *self._check_validators(),
204.             *self._check_deprecation_details(),
205.         ]
206. 
207.     def _check_field_name(self):
208.         """
209.         Check if field name is valid, i.e. 1) does not end with an
210.         underscore, 2) does not contain "__" and 3) is not "pk".
211.         """
212.         if self.name.endswith('_'):
213.             return [
214.                 checks.Error(
215.                     'Field names must not end with an underscore.',
216.                     obj=self,
217.                     id='fields.E001',
218.                 )
219.             ]
220.         elif LOOKUP_SEP in self.name:
221.             return [
222.                 checks.Error(
223.                     'Field names must not contain "%s".' % LOOKUP_SEP,
224.                     obj=self,
225.                     id='fields.E002',
226.                 )
227.             ]
228.         elif self.name == 'pk':
229.             return [
230.                 checks.Error(
231.                     "'pk' is a reserved word that cannot be used as a field name.",
232.                     obj=self,
233.                     id='fields.E003',
234.                 )
235.             ]
236.         else:
237.             return []
238. 
239.     @classmethod
240.     def _choices_is_value(cls, value):
241.         return isinstance(value, (str, Promise)) or not is_iterable(value)
242. 
243.     def _check_choices(self):
244.         if not self.choices:
245.             return []
246. 
247.         if not is_iterable(self.choices) or isinstance(self.choices, str):
248.             return [
249.                 checks.Error(
250.                     "'choices' must be an iterable (e.g., a list or tuple).",
251.                     obj=self,
252.                     id='fields.E004',
253.                 )
254.             ]
255. 
256.         choice_max_length = 0
257.         # Expect [group_name, [value, display]]
258.         for choices_group in self.choices:
259.             try:
260.                 group_name, group_choices = choices_group
261.             except (TypeError, ValueError):
262.                 # Containing non-pairs
263.                 break
264.             try:
265.                 if not all(
266.                     self._choices_is_value(value) and self._choices_is_value(human_name)
267.                     for value, human_name in group_choices
268.                 ):
269.                     break
270.                 if self.max_length is not None and group_choices:
271.                     choice_max_length = max([
272.                         choice_max_length,
273.                         *(len(value) for value, _ in group_choices if isinstance(value, str)),
274.                     ])
275.             except (TypeError, ValueError):
276.                 # No groups, choices in the form [value, display]
277.                 value, human_name = group_name, group_choices
278.                 if not self._choices_is_value(value) or not self._choices_is_value(human_name):
279.                     break
280.                 if self.max_length is not None and isinstance(value, str):
281.                     choice_max_length = max(choice_max_length, len(value))
282. 
283.             # Special case: choices=['ab']
284.             if isinstance(choices_group, str):
285.                 break
286.         else:
287.             if self.max_length is not None and choice_max_length > self.max_length:
288.                 return [
289.                     checks.Error(
290.                         "'max_length' is too small to fit the longest value "
291.                         "in 'choices' (%d characters)." % choice_max_length,
292.                         obj=self,
293.                         id='fields.E009',
294.                     ),
295.                 ]
296.             return []
297. 
298.         return [
299.             checks.Error(
300.                 "'choices' must be an iterable containing "
301.                 "(actual value, human readable name) tuples.",
302.                 obj=self,
303.                 id='fields.E005',
304.             )
305.         ]
306. 
307.     def _check_db_index(self):
308.         if self.db_index not in (None, True, False):
309.             return [
310.                 checks.Error(
311.                     "'db_index' must be None, True or False.",
312.                     obj=self,
313.                     id='fields.E006',
314.                 )
315.             ]
316.         else:
317.             return []
318. 
319.     def _check_null_allowed_for_primary_keys(self):
320.         if (self.primary_key and self.null and
321.                 not connection.features.interprets_empty_strings_as_nulls):
322.             # We cannot reliably check this for backends like Oracle which
323.             # consider NULL and '' to be equal (and thus set up
324.             # character-based fields a little differently).
325.             return [
326.                 checks.Error(
327.                     'Primary keys must not have null=True.',
328.                     hint=('Set null=False on the field, or '
329.                           'remove primary_key=True argument.'),
330.                     obj=self,
331.                     id='fields.E007',
332.                 )
333.             ]
334.         else:
335.             return []
336. 
337.     def _check_backend_specific_checks(self, databases=None, **kwargs):
338.         if databases is None:
339.             return []
340.         app_label = self.model._meta.app_label
341.         errors = []
342.         for alias in databases:
343.             if router.allow_migrate(alias, app_label, model_name=self.model._meta.model_name):
344.                 errors.extend(connections[alias].validation.check_field(self, **kwargs))
345.         return errors
346. 
347.     def _check_validators(self):
348.         errors = []
349.         for i, validator in enumerate(self.validators):
350.             if not callable(validator):
351.                 errors.append(
352.                     checks.Error(
353.                         "All 'validators' must be callable.",
354.                         hint=(
355.                             "validators[{i}] ({repr}) isn't a function or "
356.                             "instance of a validator class.".format(
357.                                 i=i, repr=repr(validator),
358.                             )
359.                         ),
360.                         obj=self,
361.                         id='fields.E008',
362.                     )
363.                 )
364.         return errors
365. 
366.     def _check_deprecation_details(self):
367.         if self.system_check_removed_details is not None:
368.             return [
369.                 checks.Error(
370.                     self.system_check_removed_details.get(
371.                         'msg',
372.                         '%s has been removed except for support in historical '
373.                         'migrations.' % self.__class__.__name__
374.                     ),
375.                     hint=self.system_check_removed_details.get('hint'),
376.                     obj=self,
377.                     id=self.system_check_removed_details.get('id', 'fields.EXXX'),
378.                 )
379.             ]
380.         elif self.system_check_deprecated_details is not None:
381.             return [
382.                 checks.Warning(
383.                     self.system_check_deprecated_details.get(
384.                         'msg',
385.                         '%s has been deprecated.' % self.__class__.__name__
386.                     ),
387.                     hint=self.system_check_deprecated_details.get('hint'),
388.                     obj=self,
389.                     id=self.system_check_deprecated_details.get('id', 'fields.WXXX'),
390.                 )
391.             ]
392.         return []
393. 
394.     def get_col(self, alias, output_field=None):
395.         if output_field is None:
396.             output_field = self
397.         if alias != self.model._meta.db_table or output_field != self:
398.             from django.db.models.expressions import Col
399.             return Col(alias, self, output_field)
400.         else:
401.             return self.cached_col
402. 
403.     @cached_property
404.     def cached_col(self):
405.         from django.db.models.expressions import Col
406.         return Col(self.model._meta.db_table, self)
407. 
408.     def select_format(self, compiler, sql, params):
409.         """
410.         Custom format for select clauses. For example, GIS columns need to be
411.         selected as AsText(table.col) on MySQL as the table.col data can't be
412.         used by Django.
413.         """
414.         return sql, params
415. 
416.     def deconstruct(self):
417.         """
418.         Return enough information to recreate the field as a 4-tuple:
419. 
420.          * The name of the field on the model, if contribute_to_class() has
421.            been run.
422.          * The import path of the field, including the class:e.g.
423.            django.db.models.IntegerField This should be the most portable
424.            version, so less specific may be better.
425.          * A list of positional arguments.
426.          * A dict of keyword arguments.
427. 
428.         Note that the positional or keyword arguments must contain values of
429.         the following types (including inner values of collection types):
430. 
431.          * None, bool, str, int, float, complex, set, frozenset, list, tuple,
432.            dict
433.          * UUID
434.          * datetime.datetime (naive), datetime.date
435.          * top-level classes, top-level functions - will be referenced by their
436.            full import path
437.          * Storage instances - these have their own deconstruct() method
438. 
439.         This is because the values here must be serialized into a text format
440.         (possibly new Python code, possibly JSON) and these are the only types
441.         with encoding handlers defined.
442. 
443.         There's no need to return the exact way the field was instantiated this
444.         time, just ensure that the resulting field is the same - prefer keyword
445.         arguments over positional ones, and omit parameters with their default
446.         values.
447.         """
448.         # Short-form way of fetching all the default parameters
449.         keywords = {}
450.         possibles = {
451.             "verbose_name": None,
452.             "primary_key": False,
453.             "max_length": None,
454.             "unique": False,
455.             "blank": False,
456.             "null": False,
457.             "db_index": False,
458.             "default": NOT_PROVIDED,
459.             "editable": True,
460.             "serialize": True,
461.             "unique_for_date": None,
462.             "unique_for_month": None,
463.             "unique_for_year": None,
464.             "choices": None,
465.             "help_text": '',
466.             "db_column": None,
467.             "db_tablespace": None,
468.             "auto_created": False,
469.             "validators": [],
470.             "error_messages": None,
471.         }
472.         attr_overrides = {
473.             "unique": "_unique",
474.             "error_messages": "_error_messages",
475.             "validators": "_validators",
476.             "verbose_name": "_verbose_name",
477.             "db_tablespace": "_db_tablespace",
478.         }
479.         equals_comparison = {"choices", "validators"}
480.         for name, default in possibles.items():
481.             value = getattr(self, attr_overrides.get(name, name))
482.             # Unroll anything iterable for choices into a concrete list
483.             if name == "choices" and isinstance(value, collections.abc.Iterable):
484.                 value = list(value)
485.             # Do correct kind of comparison
486.             if name in equals_comparison:
487.                 if value != default:
488.                     keywords[name] = value
489.             else:
490.                 if value is not default:
491.                     keywords[name] = value
492.         # Work out path - we shorten it for known Django core fields
493.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
494.         if path.startswith("django.db.models.fields.related"):
495.             path = path.replace("django.db.models.fields.related", "django.db.models")
496.         elif path.startswith("django.db.models.fields.files"):
497.             path = path.replace("django.db.models.fields.files", "django.db.models")
498.         elif path.startswith('django.db.models.fields.json'):
499.             path = path.replace('django.db.models.fields.json', 'django.db.models')
500.         elif path.startswith("django.db.models.fields.proxy"):


File: django/db/models/fields/__init__.py
Line number range: 84 - 952
Content:
@total_ordering
class Field(RegisterLookupMixin):
    """Base class for all field types"""

    # Designates whether empty strings fundamentally are allowed at the
    # database level.
    empty_strings_allowed = True
    empty_values = list(validators.EMPTY_VALUES)

    # These track each time a Field instance is created. Used to retain order.
    # The auto_creation_counter is used for fields that Django implicitly
    # creates, creation_counter is used for all user-specified fields.
    creation_counter = 0
    auto_creation_counter = -1
    default_validators = []  # Default set of validators
    default_error_messages = {
        'invalid_choice': _('Value %(value)r is not a valid choice.'),
        'null': _('This field cannot be null.'),
        'blank': _('This field cannot be blank.'),
        'unique': _('%(model_name)s with this %(field_label)s '
                    'already exists.'),
        # Translators: The 'lookup_type' is one of 'date', 'year' or 'month'.
        # Eg: "Title must be unique for pub_date year"
        'unique_for_date': _("%(field_label)s must be unique for "
                             "%(date_field_label)s %(lookup_type)s."),
    }
    system_check_deprecated_details = None
    system_check_removed_details = None

    # Field flags
    hidden = False

    many_to_many = None
    many_to_one = None
    one_to_many = None
    one_to_one = None
    related_model = None

    descriptor_class = DeferredAttribute

    # Generic field type description, usually overridden by subclasses
    def _description(self):
        return _('Field of type: %(field_type)s') % {
            'field_type': self.__class__.__name__
        }
    description = property(_description)

    def __init__(self, verbose_name=None, name=None, primary_key=False,
                 max_length=None, unique=False, blank=False, null=False,
                 db_index=False, rel=None, default=NOT_PROVIDED, editable=True,
                 serialize=True, unique_for_date=None, unique_for_month=None,
                 unique_for_year=None, choices=None, help_text='', db_column=None,
                 db_tablespace=None, auto_created=False, validators=(),
                 error_messages=None):
        self.name = name
        self.verbose_name = verbose_name  # May be set by set_attributes_from_name
        self._verbose_name = verbose_name  # Store original for deconstruction
        self.primary_key = primary_key
        self.max_length, self._unique = max_length, unique
        self.blank, self.null = blank, null
        self.remote_field = rel
        self.is_relation = self.remote_field is not None
        self.default = default
        self.editable = editable
        self.serialize = serialize
        self.unique_for_date = unique_for_date
        self.unique_for_month = unique_for_month
        self.unique_for_year = unique_for_year
        if isinstance(choices, collections.abc.Iterator):
            choices = list(choices)
        self.choices = choices
        self.help_text = help_text
        self.db_index = db_index
        self.db_column = db_column
        self._db_tablespace = db_tablespace
        self.auto_created = auto_created

        # Adjust the appropriate creation counter, and save our local copy.
        if auto_created:
            self.creation_counter = Field.auto_creation_counter
            Field.auto_creation_counter -= 1
        else:
            self.creation_counter = Field.creation_counter
            Field.creation_counter += 1

        self._validators = list(validators)  # Store for deconstruction later

        messages = {}
        for c in reversed(self.__class__.__mro__):
            messages.update(getattr(c, 'default_error_messages', {}))
        messages.update(error_messages or {})
        self._error_messages = error_messages  # Store for deconstruction later
        self.error_messages = messages

    def __str__(self):
        """
        Return "app_label.model_label.field_name" for fields attached to
        models.
        """
        if not hasattr(self, 'model'):
            return super().__str__()
        model = self.model
        return '%s.%s' % (model._meta.label, self.name)

    def __repr__(self):
        """Display the module, class, and name of the field."""
        path = '%s.%s' % (self.__class__.__module__, self.__class__.__qualname__)
        name = getattr(self, 'name', None)
        if name is not None:
            return '<%s: %s>' % (path, name)
        return '<%s>' % path

    def check(self, **kwargs):
        return [
            *self._check_field_name(),
            *self._check_choices(),
            *self._check_db_index(),
            *self._check_null_allowed_for_primary_keys(),
            *self._check_backend_specific_checks(**kwargs),
            *self._check_validators(),
            *self._check_deprecation_details(),
        ]

    def _check_field_name(self):
        """
        Check if field name is valid, i.e. 1) does not end with an
        underscore, 2) does not contain "__" and 3) is not "pk".
        """
        if self.name.endswith('_'):
            return [
                checks.Error(
                    'Field names must not end with an underscore.',
                    obj=self,
                    id='fields.E001',
                )
            ]
        elif LOOKUP_SEP in self.name:
            return [
                checks.Error(
                    'Field names must not contain "%s".' % LOOKUP_SEP,
                    obj=self,
                    id='fields.E002',
                )
            ]
        elif self.name == 'pk':
            return [
                checks.Error(
                    "'pk' is a reserved word that cannot be used as a field name.",
                    obj=self,
                    id='fields.E003',
                )
            ]
        else:
            return []

    @classmethod
    def _choices_is_value(cls, value):
        return isinstance(value, (str, Promise)) or not is_iterable(value)

    def _check_choices(self):
        if not self.choices:
            return []

        if not is_iterable(self.choices) or isinstance(self.choices, str):
            return [
                checks.Error(
                    "'choices' must be an iterable (e.g., a list or tuple).",
                    obj=self,
                    id='fields.E004',
                )
            ]

        choice_max_length = 0
        # Expect [group_name, [value, display]]
        for choices_group in self.choices:
            try:
                group_name, group_choices = choices_group
            except (TypeError, ValueError):
                # Containing non-pairs
                break
            try:
                if not all(
                    self._choices_is_value(value) and self._choices_is_value(human_name)
                    for value, human_name in group_choices
                ):
                    break
                if self.max_length is not None and group_choices:
                    choice_max_length = max([
                        choice_max_length,
                        *(len(value) for value, _ in group_choices if isinstance(value, str)),
                    ])
            except (TypeError, ValueError):
                # No groups, choices in the form [value, display]
                value, human_name = group_name, group_choices
                if not self._choices_is_value(value) or not self._choices_is_value(human_name):
                    break
                if self.max_length is not None and isinstance(value, str):
                    choice_max_length = max(choice_max_length, len(value))

            # Special case: choices=['ab']
            if isinstance(choices_group, str):
                break
        else:
            if self.max_length is not None and choice_max_length > self.max_length:
                return [
                    checks.Error(
                        "'max_length' is too small to fit the longest value "
                        "in 'choices' (%d characters)." % choice_max_length,
                        obj=self,
                        id='fields.E009',
                    ),
                ]
            return []

        return [
            checks.Error(
                "'choices' must be an iterable containing "
                "(actual value, human readable name) tuples.",
                obj=self,
                id='fields.E005',
            )
        ]

    def _check_db_index(self):
        if self.db_index not in (None, True, False):
            return [
                checks.Error(
                    "'db_index' must be None, True or False.",
                    obj=self,
                    id='fields.E006',
                )
            ]
        else:
            return []

    def _check_null_allowed_for_primary_keys(self):
        if (self.primary_key and self.null and
                not connection.features.interprets_empty_strings_as_nulls):
            # We cannot reliably check this for backends like Oracle which
            # consider NULL and '' to be equal (and thus set up
            # character-based fields a little differently).
            return [
                checks.Error(
                    'Primary keys must not have null=True.',
                    hint=('Set null=False on the field, or '
                          'remove primary_key=True argument.'),
                    obj=self,
                    id='fields.E007',
                )
            ]
        else:
            return []

    def _check_backend_specific_checks(self, databases=None, **kwargs):
        if databases is None:
            return []
        app_label = self.model._meta.app_label
        errors = []
        for alias in databases:
            if router.allow_migrate(alias, app_label, model_name=self.model._meta.model_name):
                errors.extend(connections[alias].validation.check_field(self, **kwargs))
        return errors

    def _check_validators(self):
        errors = []
        for i, validator in enumerate(self.validators):
            if not callable(validator):
                errors.append(
                    checks.Error(
                        "All 'validators' must be callable.",
                        hint=(
                            "validators[{i}] ({repr}) isn't a function or "
                            "instance of a validator class.".format(
                                i=i, repr=repr(validator),
                            )
                        ),
                        obj=self,
                        id='fields.E008',
                    )
                )
        return errors

    def _check_deprecation_details(self):
        if self.system_check_removed_details is not None:
            return [
                checks.Error(
                    self.system_check_removed_details.get(
                        'msg',
                        '%s has been removed except for support in historical '
                        'migrations.' % self.__class__.__name__
                    ),
                    hint=self.system_check_removed_details.get('hint'),
                    obj=self,
                    id=self.system_check_removed_details.get('id', 'fields.EXXX'),
                )
            ]
        elif self.system_check_deprecated_details is not None:
            return [
                checks.Warning(
                    self.system_check_deprecated_details.get(
                        'msg',
                        '%s has been deprecated.' % self.__class__.__name__
                    ),
                    hint=self.system_check_deprecated_details.get('hint'),
                    obj=self,
                    id=self.system_check_deprecated_details.get('id', 'fields.WXXX'),
                )
            ]
        return []

    def get_col(self, alias, output_field=None):
        if output_field is None:
            output_field = self
        if alias != self.model._meta.db_table or output_field != self:
            from django.db.models.expressions import Col
            return Col(alias, self, output_field)
        else:
            return self.cached_col

    @cached_property
    def cached_col(self):
        from django.db.models.expressions import Col
        return Col(self.model._meta.db_table, self)

    def select_format(self, compiler, sql, params):
        """
        Custom format for select clauses. For example, GIS columns need to be
        selected as AsText(table.col) on MySQL as the table.col data can't be
        used by Django.
        """
        return sql, params

    def deconstruct(self):
        """
        Return enough information to recreate the field as a 4-tuple:

         * The name of the field on the model, if contribute_to_class() has
           been run.
         * The import path of the field, including the class:e.g.
           django.db.models.IntegerField This should be the most portable
           version, so less specific may be better.
         * A list of positional arguments.
         * A dict of keyword arguments.

        Note that the positional or keyword arguments must contain values of
        the following types (including inner values of collection types):

         * None, bool, str, int, float, complex, set, frozenset, list, tuple,
           dict
         * UUID
         * datetime.datetime (naive), datetime.date
         * top-level classes, top-level functions - will be referenced by their
           full import path
         * Storage instances - these have their own deconstruct() method

        This is because the values here must be serialized into a text format
        (possibly new Python code, possibly JSON) and these are the only types
        with encoding handlers defined.

        There's no need to return the exact way the field was instantiated this
        time, just ensure that the resulting field is the same - prefer keyword
        arguments over positional ones, and omit parameters with their default
        values.
        """
        # Short-form way of fetching all the default parameters
        keywords = {}
        possibles = {
            "verbose_name": None,
            "primary_key": False,
            "max_length": None,
            "unique": False,
            "blank": False,
            "null": False,
            "db_index": False,
            "default": NOT_PROVIDED,
            "editable": True,
            "serialize": True,
            "unique_for_date": None,
            "unique_for_month": None,
            "unique_for_year": None,
            "choices": None,
            "help_text": '',
            "db_column": None,
            "db_tablespace": None,
            "auto_created": False,
            "validators": [],
            "error_messages": None,
        }
        attr_overrides = {
            "unique": "_unique",
            "error_messages": "_error_messages",
            "validators": "_validators",
            "verbose_name": "_verbose_name",
            "db_tablespace": "_db_tablespace",
        }
        equals_comparison = {"choices", "validators"}
        for name, default in possibles.items():
            value = getattr(self, attr_overrides.get(name, name))
            # Unroll anything iterable for choices into a concrete list
            if name == "choices" and isinstance(value, collections.abc.Iterable):
                value = list(value)
            # Do correct kind of comparison
            if name in equals_comparison:
                if value != default:
                    keywords[name] = value
            else:
                if value is not default:
                    keywords[name] = value
        # Work out path - we shorten it for known Django core fields
        path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
        if path.startswith("django.db.models.fields.related"):
            path = path.replace("django.db.models.fields.related", "django.db.models")
        elif path.startswith("django.db.models.fields.files"):
            path = path.replace("django.db.models.fields.files", "django.db.models")
        elif path.startswith('django.db.models.fields.json'):
            path = path.replace('django.db.models.fields.json', 'django.db.models')
        elif path.startswith("django.db.models.fields.proxy"):
            path = path.replace("django.db.models.fields.proxy", "django.db.models")
        elif path.startswith("django.db.models.fields"):
            path = path.replace("django.db.models.fields", "django.db.models")
        # Return basic info - other fields should override this.
        return (self.name, path, [], keywords)

    def clone(self):
        """
        Uses deconstruct() to clone a new copy of this Field.
        Will not preserve any class attachments/attribute names.
        """
        name, path, args, kwargs = self.deconstruct()
        return self.__class__(*args, **kwargs)

    def __eq__(self, other):
        # Needed for @total_ordering
        if isinstance(other, Field):
            return (
                self.creation_counter == other.creation_counter and
                getattr(self, 'model', None) == getattr(other, 'model', None)
            )
        return NotImplemented

    def __lt__(self, other):
        # This is needed because bisect does not take a comparison function.
        # Order by creation_counter first for backward compatibility.
        if isinstance(other, Field):
            if (
                self.creation_counter != other.creation_counter or
                not hasattr(self, 'model') and not hasattr(other, 'model')
            ):
                return self.creation_counter < other.creation_counter
            elif hasattr(self, 'model') != hasattr(other, 'model'):
                return not hasattr(self, 'model')  # Order no-model fields first
            else:
                # creation_counter's are equal, compare only models.
                return (
                    (self.model._meta.app_label, self.model._meta.model_name) <
                    (other.model._meta.app_label, other.model._meta.model_name)
                )
        return NotImplemented

    def __hash__(self):
        return hash((
            self.creation_counter,
            self.model._meta.app_label if hasattr(self, 'model') else None,
            self.model._meta.model_name if hasattr(self, 'model') else None,
        ))

    def __deepcopy__(self, memodict):
        # We don't have to deepcopy very much here, since most things are not
        # intended to be altered after initial creation.
        obj = copy.copy(self)
        if self.remote_field:
            obj.remote_field = copy.copy(self.remote_field)
            if hasattr(self.remote_field, 'field') and self.remote_field.field is self:
                obj.remote_field.field = obj
        memodict[id(self)] = obj
        return obj

    def __copy__(self):
        # We need to avoid hitting __reduce__, so define this
        # slightly weird copy construct.
        obj = Empty()
        obj.__class__ = self.__class__
        obj.__dict__ = self.__dict__.copy()
        return obj

    def __reduce__(self):
        """
        Pickling should return the model._meta.fields instance of the field,
        not a new copy of that field. So, use the app registry to load the
        model and then the field back.
        """
        if not hasattr(self, 'model'):
            # Fields are sometimes used without attaching them to models (for
            # example in aggregation). In this case give back a plain field
            # instance. The code below will create a new empty instance of
            # class self.__class__, then update its dict with self.__dict__
            # values - so, this is very close to normal pickle.
            state = self.__dict__.copy()
            # The _get_default cached_property can't be pickled due to lambda
            # usage.
            state.pop('_get_default', None)
            return _empty, (self.__class__,), state
        return _load_field, (self.model._meta.app_label, self.model._meta.object_name,
                             self.name)

    def get_pk_value_on_save(self, instance):
        """
        Hook to generate new PK values on save. This method is called when
        saving instances with no primary key value set. If this method returns
        something else than None, then the returned value is used when saving
        the new instance.
        """
        if self.default:
            return self.get_default()
        return None

    def to_python(self, value):
        """
        Convert the input value into the expected Python data type, raising
        django.core.exceptions.ValidationError if the data can't be converted.
        Return the converted value. Subclasses should override this.
        """
        return value

    @cached_property
    def validators(self):
        """
        Some validators can't be created at field initialization time.
        This method provides a way to delay their creation until required.
        """
        return [*self.default_validators, *self._validators]

    def run_validators(self, value):
        if value in self.empty_values:
            return

        errors = []
        for v in self.validators:
            try:
                v(value)
            except exceptions.ValidationError as e:
                if hasattr(e, 'code') and e.code in self.error_messages:
                    e.message = self.error_messages[e.code]
                errors.extend(e.error_list)

        if errors:
            raise exceptions.ValidationError(errors)

    def validate(self, value, model_instance):
        """
        Validate value and raise ValidationError if necessary. Subclasses
        should override this to provide validation logic.
        """
        if not self.editable:
            # Skip validation for non-editable fields.
            return

        if self.choices is not None and value not in self.empty_values:
            for option_key, option_value in self.choices:
                if isinstance(option_value, (list, tuple)):
                    # This is an optgroup, so look inside the group for
                    # options.
                    for optgroup_key, optgroup_value in option_value:
                        if value == optgroup_key:
                            return
                elif value == option_key:
                    return
            raise exceptions.ValidationError(
                self.error_messages['invalid_choice'],
                code='invalid_choice',
                params={'value': value},
            )

        if value is None and not self.null:
            raise exceptions.ValidationError(self.error_messages['null'], code='null')

        if not self.blank and value in self.empty_values:
            raise exceptions.ValidationError(self.error_messages['blank'], code='blank')

    def clean(self, value, model_instance):
        """
        Convert the value's type and run validation. Validation errors
        from to_python() and validate() are propagated. Return the correct
        value if no error is raised.
        """
        value = self.to_python(value)
        self.validate(value, model_instance)
        self.run_validators(value)
        return value

    def db_type_parameters(self, connection):
        return DictWrapper(self.__dict__, connection.ops.quote_name, 'qn_')

    def db_check(self, connection):
        """
        Return the database column check constraint for this field, for the
        provided connection. Works the same way as db_type() for the case that
        get_internal_type() does not map to a preexisting model field.
        """
        data = self.db_type_parameters(connection)
        try:
            return connection.data_type_check_constraints[self.get_internal_type()] % data
        except KeyError:
            return None

    def db_type(self, connection):
        """
        Return the database column data type for this field, for the provided
        connection.
        """
        # The default implementation of this method looks at the
        # backend-specific data_types dictionary, looking up the field by its
        # "internal type".
        #
        # A Field class can implement the get_internal_type() method to specify
        # which *preexisting* Django Field class it's most similar to -- i.e.,
        # a custom field might be represented by a TEXT column type, which is
        # the same as the TextField Django field type, which means the custom
        # field's get_internal_type() returns 'TextField'.
        #
        # But the limitation of the get_internal_type() / data_types approach
        # is that it cannot handle database column types that aren't already
        # mapped to one of the built-in Django field types. In this case, you
        # can implement db_type() instead of get_internal_type() to specify
        # exactly which wacky database column type you want to use.
        data = self.db_type_parameters(connection)
        try:
            return connection.data_types[self.get_internal_type()] % data
        except KeyError:
            return None

    def rel_db_type(self, connection):
        """
        Return the data type that a related field pointing to this field should
        use. For example, this method is called by ForeignKey and OneToOneField
        to determine its data type.
        """
        return self.db_type(connection)

    def cast_db_type(self, connection):
        """Return the data type to use in the Cast() function."""
        db_type = connection.ops.cast_data_types.get(self.get_internal_type())
        if db_type:
            return db_type % self.db_type_parameters(connection)
        return self.db_type(connection)

    def db_parameters(self, connection):
        """
        Extension of db_type(), providing a range of different return values
        (type, checks). This will look at db_type(), allowing custom model
        fields to override it.
        """
        type_string = self.db_type(connection)
        check_string = self.db_check(connection)
        return {
            "type": type_string,
            "check": check_string,
        }

    def db_type_suffix(self, connection):
        return connection.data_types_suffix.get(self.get_internal_type())

    def get_db_converters(self, connection):
        if hasattr(self, 'from_db_value'):
            return [self.from_db_value]
        return []

    @property
    def unique(self):
        return self._unique or self.primary_key

    @property
    def db_tablespace(self):
        return self._db_tablespace or settings.DEFAULT_INDEX_TABLESPACE

    @property
    def db_returning(self):
        """
        Private API intended only to be used by Django itself. Currently only
        the PostgreSQL backend supports returning multiple fields on a model.
        """
        return False

    def set_attributes_from_name(self, name):
        self.name = self.name or name
        self.attname, self.column = self.get_attname_column()
        self.concrete = self.column is not None
        if self.verbose_name is None and self.name:
            self.verbose_name = self.name.replace('_', ' ')

    def contribute_to_class(self, cls, name, private_only=False):
        """
        Register the field with the model class it belongs to.

        If private_only is True, create a separate instance of this field
        for every subclass of cls, even if cls is not an abstract model.
        """
        self.set_attributes_from_name(name)
        self.model = cls
        cls._meta.add_field(self, private=private_only)
        if self.column:
            # Don't override classmethods with the descriptor. This means that
            # if you have a classmethod and a field with the same name, then
            # such fields can't be deferred (we don't have a check for this).
            if not getattr(cls, self.attname, None):
                setattr(cls, self.attname, self.descriptor_class(self))
        if self.choices is not None:
            # Don't override a get_FOO_display() method defined explicitly on
            # this class, but don't check methods derived from inheritance, to
            # allow overriding inherited choices. For more complex inheritance
            # structures users should override contribute_to_class().
            if 'get_%s_display' % self.name not in cls.__dict__:
                setattr(
                    cls,
                    'get_%s_display' % self.name,
                    partialmethod(cls._get_FIELD_display, field=self),
                )

    def get_filter_kwargs_for_object(self, obj):
        """
        Return a dict that when passed as kwargs to self.model.filter(), would
        yield all instances having the same value for this field as obj has.
        """
        return {self.name: getattr(obj, self.attname)}

    def get_attname(self):
        return self.name

    def get_attname_column(self):
        attname = self.get_attname()
        column = self.db_column or attname
        return attname, column

    def get_internal_type(self):
        return self.__class__.__name__

    def pre_save(self, model_instance, add):
        """Return field's value just before saving."""
        return getattr(model_instance, self.attname)

    def get_prep_value(self, value):
        """Perform preliminary non-db specific value checks and conversions."""
        if isinstance(value, Promise):
            value = value._proxy____cast()
        return value

    def get_db_prep_value(self, value, connection, prepared=False):
        """
        Return field's value prepared for interacting with the database backend.

        Used by the default implementations of get_db_prep_save().
        """
        if not prepared:
            value = self.get_prep_value(value)
        return value

    def get_db_prep_save(self, value, connection):
        """Return field's value prepared for saving into a database."""
        return self.get_db_prep_value(value, connection=connection, prepared=False)

    def has_default(self):
        """Return a boolean of whether this field has a default value."""
        return self.default is not NOT_PROVIDED

    def get_default(self):
        """Return the default value for this field."""
        return self._get_default()

    @cached_property
    def _get_default(self):
        if self.has_default():
            if callable(self.default):
                return self.default
            return lambda: self.default

        if not self.empty_strings_allowed or self.null and not connection.features.interprets_empty_strings_as_nulls:
            return return_None
        return str  # return empty string

    def get_choices(self, include_blank=True, blank_choice=BLANK_CHOICE_DASH, limit_choices_to=None, ordering=()):
        """
        Return choices with a default blank choices included, for use
        as <select> choices for this field.
        """
        if self.choices is not None:
            choices = list(self.choices)
            if include_blank:
                blank_defined = any(choice in ('', None) for choice, _ in self.flatchoices)
                if not blank_defined:
                    choices = blank_choice + choices
            return choices
        rel_model = self.remote_field.model
        limit_choices_to = limit_choices_to or self.get_limit_choices_to()
        choice_func = operator.attrgetter(
            self.remote_field.get_related_field().attname
            if hasattr(self.remote_field, 'get_related_field')
            else 'pk'
        )
        qs = rel_model._default_manager.complex_filter(limit_choices_to)
        if ordering:
            qs = qs.order_by(*ordering)
        return (blank_choice if include_blank else []) + [
            (choice_func(x), str(x)) for x in qs
        ]

    def value_to_string(self, obj):
        """
        Return a string value of this field from the passed obj.
        This is used by the serialization framework.
        """
        return str(self.value_from_object(obj))

    def _get_flatchoices(self):
        """Flattened version of choices tuple."""
        if self.choices is None:
            return []
        flat = []
        for choice, value in self.choices:
            if isinstance(value, (list, tuple)):
                flat.extend(value)
            else:
                flat.append((choice, value))
        return flat
    flatchoices = property(_get_flatchoices)

    def save_form_data(self, instance, data):
        setattr(instance, self.name, data)

    def formfield(self, form_class=None, choices_form_class=None, **kwargs):
        """Return a django.forms.Field instance for this field."""
        defaults = {
            'required': not self.blank,
            'label': capfirst(self.verbose_name),
            'help_text': self.help_text,
        }
        if self.has_default():
            if callable(self.default):
                defaults['initial'] = self.default
                defaults['show_hidden_initial'] = True
            else:
                defaults['initial'] = self.get_default()
        if self.choices is not None:
            # Fields with choices get special treatment.
            include_blank = (self.blank or
                             not (self.has_default() or 'initial' in kwargs))
            defaults['choices'] = self.get_choices(include_blank=include_blank)
            defaults['coerce'] = self.to_python
            if self.null:
                defaults['empty_value'] = None
            if choices_form_class is not None:
                form_class = choices_form_class
            else:
                form_class = forms.TypedChoiceField
            # Many of the subclass-specific formfield arguments (min_value,
            # max_value) don't apply for choice fields, so be sure to only pass
            # the values that TypedChoiceField will understand.
            for k in list(kwargs):
                if k not in ('coerce', 'empty_value', 'choices', 'required',
                             'widget', 'label', 'initial', 'help_text',
                             'error_messages', 'show_hidden_initial', 'disabled'):
                    del kwargs[k]
        defaults.update(kwargs)
        if form_class is None:
            form_class = forms.CharField
        return form_class(**defaults)

    def value_from_object(self, obj):
        """Return the value of this field in the given model instance."""
        return getattr(obj, self.attname)


File: django/db/models/fields/__init__.py
Line number range: 501 - 2000
Content:
501.             path = path.replace("django.db.models.fields.proxy", "django.db.models")
502.         elif path.startswith("django.db.models.fields"):
503.             path = path.replace("django.db.models.fields", "django.db.models")
504.         # Return basic info - other fields should override this.
505.         return (self.name, path, [], keywords)
506. 
507.     def clone(self):
508.         """
509.         Uses deconstruct() to clone a new copy of this Field.
510.         Will not preserve any class attachments/attribute names.
511.         """
512.         name, path, args, kwargs = self.deconstruct()
513.         return self.__class__(*args, **kwargs)
514. 
515.     def __eq__(self, other):
516.         # Needed for @total_ordering
517.         if isinstance(other, Field):
518.             return (
519.                 self.creation_counter == other.creation_counter and
520.                 getattr(self, 'model', None) == getattr(other, 'model', None)
521.             )
522.         return NotImplemented
523. 
524.     def __lt__(self, other):
525.         # This is needed because bisect does not take a comparison function.
526.         # Order by creation_counter first for backward compatibility.
527.         if isinstance(other, Field):
528.             if (
529.                 self.creation_counter != other.creation_counter or
530.                 not hasattr(self, 'model') and not hasattr(other, 'model')
531.             ):
532.                 return self.creation_counter < other.creation_counter
533.             elif hasattr(self, 'model') != hasattr(other, 'model'):
534.                 return not hasattr(self, 'model')  # Order no-model fields first
535.             else:
536.                 # creation_counter's are equal, compare only models.
537.                 return (
538.                     (self.model._meta.app_label, self.model._meta.model_name) <
539.                     (other.model._meta.app_label, other.model._meta.model_name)
540.                 )
541.         return NotImplemented
542. 
543.     def __hash__(self):
544.         return hash((
545.             self.creation_counter,
546.             self.model._meta.app_label if hasattr(self, 'model') else None,
547.             self.model._meta.model_name if hasattr(self, 'model') else None,
548.         ))
549. 
550.     def __deepcopy__(self, memodict):
551.         # We don't have to deepcopy very much here, since most things are not
552.         # intended to be altered after initial creation.
553.         obj = copy.copy(self)
554.         if self.remote_field:
555.             obj.remote_field = copy.copy(self.remote_field)
556.             if hasattr(self.remote_field, 'field') and self.remote_field.field is self:
557.                 obj.remote_field.field = obj
558.         memodict[id(self)] = obj
559.         return obj
560. 
561.     def __copy__(self):
562.         # We need to avoid hitting __reduce__, so define this
563.         # slightly weird copy construct.
564.         obj = Empty()
565.         obj.__class__ = self.__class__
566.         obj.__dict__ = self.__dict__.copy()
567.         return obj
568. 
569.     def __reduce__(self):
570.         """
571.         Pickling should return the model._meta.fields instance of the field,
572.         not a new copy of that field. So, use the app registry to load the
573.         model and then the field back.
574.         """
575.         if not hasattr(self, 'model'):
576.             # Fields are sometimes used without attaching them to models (for
577.             # example in aggregation). In this case give back a plain field
578.             # instance. The code below will create a new empty instance of
579.             # class self.__class__, then update its dict with self.__dict__
580.             # values - so, this is very close to normal pickle.
581.             state = self.__dict__.copy()
582.             # The _get_default cached_property can't be pickled due to lambda
583.             # usage.
584.             state.pop('_get_default', None)
585.             return _empty, (self.__class__,), state
586.         return _load_field, (self.model._meta.app_label, self.model._meta.object_name,
587.                              self.name)
588. 
589.     def get_pk_value_on_save(self, instance):
590.         """
591.         Hook to generate new PK values on save. This method is called when
592.         saving instances with no primary key value set. If this method returns
593.         something else than None, then the returned value is used when saving
594.         the new instance.
595.         """
596.         if self.default:
597.             return self.get_default()
598.         return None
599. 
600.     def to_python(self, value):
601.         """
602.         Convert the input value into the expected Python data type, raising
603.         django.core.exceptions.ValidationError if the data can't be converted.
604.         Return the converted value. Subclasses should override this.
605.         """
606.         return value
607. 
608.     @cached_property
609.     def validators(self):
610.         """
611.         Some validators can't be created at field initialization time.
612.         This method provides a way to delay their creation until required.
613.         """
614.         return [*self.default_validators, *self._validators]
615. 
616.     def run_validators(self, value):
617.         if value in self.empty_values:
618.             return
619. 
620.         errors = []
621.         for v in self.validators:
622.             try:
623.                 v(value)
624.             except exceptions.ValidationError as e:
625.                 if hasattr(e, 'code') and e.code in self.error_messages:
626.                     e.message = self.error_messages[e.code]
627.                 errors.extend(e.error_list)
628. 
629.         if errors:
630.             raise exceptions.ValidationError(errors)
631. 
632.     def validate(self, value, model_instance):
633.         """
634.         Validate value and raise ValidationError if necessary. Subclasses
635.         should override this to provide validation logic.
636.         """
637.         if not self.editable:
638.             # Skip validation for non-editable fields.
639.             return
640. 
641.         if self.choices is not None and value not in self.empty_values:
642.             for option_key, option_value in self.choices:
643.                 if isinstance(option_value, (list, tuple)):
644.                     # This is an optgroup, so look inside the group for
645.                     # options.
646.                     for optgroup_key, optgroup_value in option_value:
647.                         if value == optgroup_key:
648.                             return
649.                 elif value == option_key:
650.                     return
651.             raise exceptions.ValidationError(
652.                 self.error_messages['invalid_choice'],
653.                 code='invalid_choice',
654.                 params={'value': value},
655.             )
656. 
657.         if value is None and not self.null:
658.             raise exceptions.ValidationError(self.error_messages['null'], code='null')
659. 
660.         if not self.blank and value in self.empty_values:
661.             raise exceptions.ValidationError(self.error_messages['blank'], code='blank')
662. 
663.     def clean(self, value, model_instance):
664.         """
665.         Convert the value's type and run validation. Validation errors
666.         from to_python() and validate() are propagated. Return the correct
667.         value if no error is raised.
668.         """
669.         value = self.to_python(value)
670.         self.validate(value, model_instance)
671.         self.run_validators(value)
672.         return value
673. 
674.     def db_type_parameters(self, connection):
675.         return DictWrapper(self.__dict__, connection.ops.quote_name, 'qn_')
676. 
677.     def db_check(self, connection):
678.         """
679.         Return the database column check constraint for this field, for the
680.         provided connection. Works the same way as db_type() for the case that
681.         get_internal_type() does not map to a preexisting model field.
682.         """
683.         data = self.db_type_parameters(connection)
684.         try:
685.             return connection.data_type_check_constraints[self.get_internal_type()] % data
686.         except KeyError:
687.             return None
688. 
689.     def db_type(self, connection):
690.         """
691.         Return the database column data type for this field, for the provided
692.         connection.
693.         """
694.         # The default implementation of this method looks at the
695.         # backend-specific data_types dictionary, looking up the field by its
696.         # "internal type".
697.         #
698.         # A Field class can implement the get_internal_type() method to specify
699.         # which *preexisting* Django Field class it's most similar to -- i.e.,
700.         # a custom field might be represented by a TEXT column type, which is
701.         # the same as the TextField Django field type, which means the custom
702.         # field's get_internal_type() returns 'TextField'.
703.         #
704.         # But the limitation of the get_internal_type() / data_types approach
705.         # is that it cannot handle database column types that aren't already
706.         # mapped to one of the built-in Django field types. In this case, you
707.         # can implement db_type() instead of get_internal_type() to specify
708.         # exactly which wacky database column type you want to use.
709.         data = self.db_type_parameters(connection)
710.         try:
711.             return connection.data_types[self.get_internal_type()] % data
712.         except KeyError:
713.             return None
714. 
715.     def rel_db_type(self, connection):
716.         """
717.         Return the data type that a related field pointing to this field should
718.         use. For example, this method is called by ForeignKey and OneToOneField
719.         to determine its data type.
720.         """
721.         return self.db_type(connection)
722. 
723.     def cast_db_type(self, connection):
724.         """Return the data type to use in the Cast() function."""
725.         db_type = connection.ops.cast_data_types.get(self.get_internal_type())
726.         if db_type:
727.             return db_type % self.db_type_parameters(connection)
728.         return self.db_type(connection)
729. 
730.     def db_parameters(self, connection):
731.         """
732.         Extension of db_type(), providing a range of different return values
733.         (type, checks). This will look at db_type(), allowing custom model
734.         fields to override it.
735.         """
736.         type_string = self.db_type(connection)
737.         check_string = self.db_check(connection)
738.         return {
739.             "type": type_string,
740.             "check": check_string,
741.         }
742. 
743.     def db_type_suffix(self, connection):
744.         return connection.data_types_suffix.get(self.get_internal_type())
745. 
746.     def get_db_converters(self, connection):
747.         if hasattr(self, 'from_db_value'):
748.             return [self.from_db_value]
749.         return []
750. 
751.     @property
752.     def unique(self):
753.         return self._unique or self.primary_key
754. 
755.     @property
756.     def db_tablespace(self):
757.         return self._db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
758. 
759.     @property
760.     def db_returning(self):
761.         """
762.         Private API intended only to be used by Django itself. Currently only
763.         the PostgreSQL backend supports returning multiple fields on a model.
764.         """
765.         return False
766. 
767.     def set_attributes_from_name(self, name):
768.         self.name = self.name or name
769.         self.attname, self.column = self.get_attname_column()
770.         self.concrete = self.column is not None
771.         if self.verbose_name is None and self.name:
772.             self.verbose_name = self.name.replace('_', ' ')
773. 
774.     def contribute_to_class(self, cls, name, private_only=False):
775.         """
776.         Register the field with the model class it belongs to.
777. 
778.         If private_only is True, create a separate instance of this field
779.         for every subclass of cls, even if cls is not an abstract model.
780.         """
781.         self.set_attributes_from_name(name)
782.         self.model = cls
783.         cls._meta.add_field(self, private=private_only)
784.         if self.column:
785.             # Don't override classmethods with the descriptor. This means that
786.             # if you have a classmethod and a field with the same name, then
787.             # such fields can't be deferred (we don't have a check for this).
788.             if not getattr(cls, self.attname, None):
789.                 setattr(cls, self.attname, self.descriptor_class(self))
790.         if self.choices is not None:
791.             # Don't override a get_FOO_display() method defined explicitly on
792.             # this class, but don't check methods derived from inheritance, to
793.             # allow overriding inherited choices. For more complex inheritance
794.             # structures users should override contribute_to_class().
795.             if 'get_%s_display' % self.name not in cls.__dict__:
796.                 setattr(
797.                     cls,
798.                     'get_%s_display' % self.name,
799.                     partialmethod(cls._get_FIELD_display, field=self),
800.                 )
801. 
802.     def get_filter_kwargs_for_object(self, obj):
803.         """
804.         Return a dict that when passed as kwargs to self.model.filter(), would
805.         yield all instances having the same value for this field as obj has.
806.         """
807.         return {self.name: getattr(obj, self.attname)}
808. 
809.     def get_attname(self):
810.         return self.name
811. 
812.     def get_attname_column(self):
813.         attname = self.get_attname()
814.         column = self.db_column or attname
815.         return attname, column
816. 
817.     def get_internal_type(self):
818.         return self.__class__.__name__
819. 
820.     def pre_save(self, model_instance, add):
821.         """Return field's value just before saving."""
822.         return getattr(model_instance, self.attname)
823. 
824.     def get_prep_value(self, value):
825.         """Perform preliminary non-db specific value checks and conversions."""
826.         if isinstance(value, Promise):
827.             value = value._proxy____cast()
828.         return value
829. 
830.     def get_db_prep_value(self, value, connection, prepared=False):
831.         """
832.         Return field's value prepared for interacting with the database backend.
833. 
834.         Used by the default implementations of get_db_prep_save().
835.         """
836.         if not prepared:
837.             value = self.get_prep_value(value)
838.         return value
839. 
840.     def get_db_prep_save(self, value, connection):
841.         """Return field's value prepared for saving into a database."""
842.         return self.get_db_prep_value(value, connection=connection, prepared=False)
843. 
844.     def has_default(self):
845.         """Return a boolean of whether this field has a default value."""
846.         return self.default is not NOT_PROVIDED
847. 
848.     def get_default(self):
849.         """Return the default value for this field."""
850.         return self._get_default()
851. 
852.     @cached_property
853.     def _get_default(self):
854.         if self.has_default():
855.             if callable(self.default):
856.                 return self.default
857.             return lambda: self.default
858. 
859.         if not self.empty_strings_allowed or self.null and not connection.features.interprets_empty_strings_as_nulls:
860.             return return_None
861.         return str  # return empty string
862. 
863.     def get_choices(self, include_blank=True, blank_choice=BLANK_CHOICE_DASH, limit_choices_to=None, ordering=()):
864.         """
865.         Return choices with a default blank choices included, for use
866.         as <select> choices for this field.
867.         """
868.         if self.choices is not None:
869.             choices = list(self.choices)
870.             if include_blank:
871.                 blank_defined = any(choice in ('', None) for choice, _ in self.flatchoices)
872.                 if not blank_defined:
873.                     choices = blank_choice + choices
874.             return choices
875.         rel_model = self.remote_field.model
876.         limit_choices_to = limit_choices_to or self.get_limit_choices_to()
877.         choice_func = operator.attrgetter(
878.             self.remote_field.get_related_field().attname
879.             if hasattr(self.remote_field, 'get_related_field')
880.             else 'pk'
881.         )
882.         qs = rel_model._default_manager.complex_filter(limit_choices_to)
883.         if ordering:
884.             qs = qs.order_by(*ordering)
885.         return (blank_choice if include_blank else []) + [
886.             (choice_func(x), str(x)) for x in qs
887.         ]
888. 
889.     def value_to_string(self, obj):
890.         """
891.         Return a string value of this field from the passed obj.
892.         This is used by the serialization framework.
893.         """
894.         return str(self.value_from_object(obj))
895. 
896.     def _get_flatchoices(self):
897.         """Flattened version of choices tuple."""
898.         if self.choices is None:
899.             return []
900.         flat = []
901.         for choice, value in self.choices:
902.             if isinstance(value, (list, tuple)):
903.                 flat.extend(value)
904.             else:
905.                 flat.append((choice, value))
906.         return flat
907.     flatchoices = property(_get_flatchoices)
908. 
909.     def save_form_data(self, instance, data):
910.         setattr(instance, self.name, data)
911. 
912.     def formfield(self, form_class=None, choices_form_class=None, **kwargs):
913.         """Return a django.forms.Field instance for this field."""
914.         defaults = {
915.             'required': not self.blank,
916.             'label': capfirst(self.verbose_name),
917.             'help_text': self.help_text,
918.         }
919.         if self.has_default():
920.             if callable(self.default):
921.                 defaults['initial'] = self.default
922.                 defaults['show_hidden_initial'] = True
923.             else:
924.                 defaults['initial'] = self.get_default()
925.         if self.choices is not None:
926.             # Fields with choices get special treatment.
927.             include_blank = (self.blank or
928.                              not (self.has_default() or 'initial' in kwargs))
929.             defaults['choices'] = self.get_choices(include_blank=include_blank)
930.             defaults['coerce'] = self.to_python
931.             if self.null:
932.                 defaults['empty_value'] = None
933.             if choices_form_class is not None:
934.                 form_class = choices_form_class
935.             else:
936.                 form_class = forms.TypedChoiceField
937.             # Many of the subclass-specific formfield arguments (min_value,
938.             # max_value) don't apply for choice fields, so be sure to only pass
939.             # the values that TypedChoiceField will understand.
940.             for k in list(kwargs):
941.                 if k not in ('coerce', 'empty_value', 'choices', 'required',
942.                              'widget', 'label', 'initial', 'help_text',
943.                              'error_messages', 'show_hidden_initial', 'disabled'):
944.                     del kwargs[k]
945.         defaults.update(kwargs)
946.         if form_class is None:
947.             form_class = forms.CharField
948.         return form_class(**defaults)
949. 
950.     def value_from_object(self, obj):
951.         """Return the value of this field in the given model instance."""
952.         return getattr(obj, self.attname)
953. 
954. 
955. class BooleanField(Field):
956.     empty_strings_allowed = False
957.     default_error_messages = {
958.         'invalid': _('“%(value)s” value must be either True or False.'),
959.         'invalid_nullable': _('“%(value)s” value must be either True, False, or None.'),
960.     }
961.     description = _("Boolean (Either True or False)")
962. 
963.     def get_internal_type(self):
964.         return "BooleanField"
965. 
966.     def to_python(self, value):
967.         if self.null and value in self.empty_values:
968.             return None
969.         if value in (True, False):
970.             # 1/0 are equal to True/False. bool() converts former to latter.
971.             return bool(value)
972.         if value in ('t', 'True', '1'):
973.             return True
974.         if value in ('f', 'False', '0'):
975.             return False
976.         raise exceptions.ValidationError(
977.             self.error_messages['invalid_nullable' if self.null else 'invalid'],
978.             code='invalid',
979.             params={'value': value},
980.         )
981. 
982.     def get_prep_value(self, value):
983.         value = super().get_prep_value(value)
984.         if value is None:
985.             return None
986.         return self.to_python(value)
987. 
988.     def formfield(self, **kwargs):
989.         if self.choices is not None:
990.             include_blank = not (self.has_default() or 'initial' in kwargs)
991.             defaults = {'choices': self.get_choices(include_blank=include_blank)}
992.         else:
993.             form_class = forms.NullBooleanField if self.null else forms.BooleanField
994.             # In HTML checkboxes, 'required' means "must be checked" which is
995.             # different from the choices case ("must select some value").
996.             # required=False allows unchecked checkboxes.
997.             defaults = {'form_class': form_class, 'required': False}
998.         return super().formfield(**{**defaults, **kwargs})
999. 
1000. 
1001. class CharField(Field):
1002.     description = _("String (up to %(max_length)s)")
1003. 
1004.     def __init__(self, *args, db_collation=None, **kwargs):
1005.         super().__init__(*args, **kwargs)
1006.         self.db_collation = db_collation
1007.         self.validators.append(validators.MaxLengthValidator(self.max_length))
1008. 
1009.     def check(self, **kwargs):
1010.         databases = kwargs.get('databases') or []
1011.         return [
1012.             *super().check(**kwargs),
1013.             *self._check_db_collation(databases),
1014.             *self._check_max_length_attribute(**kwargs),
1015.         ]
1016. 
1017.     def _check_max_length_attribute(self, **kwargs):
1018.         if self.max_length is None:
1019.             return [
1020.                 checks.Error(
1021.                     "CharFields must define a 'max_length' attribute.",
1022.                     obj=self,
1023.                     id='fields.E120',
1024.                 )
1025.             ]
1026.         elif (not isinstance(self.max_length, int) or isinstance(self.max_length, bool) or
1027.                 self.max_length <= 0):
1028.             return [
1029.                 checks.Error(
1030.                     "'max_length' must be a positive integer.",
1031.                     obj=self,
1032.                     id='fields.E121',
1033.                 )
1034.             ]
1035.         else:
1036.             return []
1037. 
1038.     def _check_db_collation(self, databases):
1039.         errors = []
1040.         for db in databases:
1041.             if not router.allow_migrate_model(db, self.model):
1042.                 continue
1043.             connection = connections[db]
1044.             if not (
1045.                 self.db_collation is None or
1046.                 'supports_collation_on_charfield' in self.model._meta.required_db_features or
1047.                 connection.features.supports_collation_on_charfield
1048.             ):
1049.                 errors.append(
1050.                     checks.Error(
1051.                         '%s does not support a database collation on '
1052.                         'CharFields.' % connection.display_name,
1053.                         obj=self,
1054.                         id='fields.E190',
1055.                     ),
1056.                 )
1057.         return errors
1058. 
1059.     def cast_db_type(self, connection):
1060.         if self.max_length is None:
1061.             return connection.ops.cast_char_field_without_max_length
1062.         return super().cast_db_type(connection)
1063. 
1064.     def get_internal_type(self):
1065.         return "CharField"
1066. 
1067.     def to_python(self, value):
1068.         if isinstance(value, str) or value is None:
1069.             return value
1070.         return str(value)
1071. 
1072.     def get_prep_value(self, value):
1073.         value = super().get_prep_value(value)
1074.         return self.to_python(value)
1075. 
1076.     def formfield(self, **kwargs):
1077.         # Passing max_length to forms.CharField means that the value's length
1078.         # will be validated twice. This is considered acceptable since we want
1079.         # the value in the form field (to pass into widget for example).
1080.         defaults = {'max_length': self.max_length}
1081.         # TODO: Handle multiple backends with different feature flags.
1082.         if self.null and not connection.features.interprets_empty_strings_as_nulls:
1083.             defaults['empty_value'] = None
1084.         defaults.update(kwargs)
1085.         return super().formfield(**defaults)
1086. 
1087.     def deconstruct(self):
1088.         name, path, args, kwargs = super().deconstruct()
1089.         if self.db_collation:
1090.             kwargs['db_collation'] = self.db_collation
1091.         return name, path, args, kwargs
1092. 
1093. 
1094. class CommaSeparatedIntegerField(CharField):
1095.     default_validators = [validators.validate_comma_separated_integer_list]
1096.     description = _("Comma-separated integers")
1097.     system_check_removed_details = {
1098.         'msg': (
1099.             'CommaSeparatedIntegerField is removed except for support in '
1100.             'historical migrations.'
1101.         ),
1102.         'hint': (
1103.             'Use CharField(validators=[validate_comma_separated_integer_list]) '
1104.             'instead.'
1105.         ),
1106.         'id': 'fields.E901',
1107.     }
1108. 
1109. 
1110. class DateTimeCheckMixin:
1111. 
1112.     def check(self, **kwargs):
1113.         return [
1114.             *super().check(**kwargs),
1115.             *self._check_mutually_exclusive_options(),
1116.             *self._check_fix_default_value(),
1117.         ]
1118. 
1119.     def _check_mutually_exclusive_options(self):
1120.         # auto_now, auto_now_add, and default are mutually exclusive
1121.         # options. The use of more than one of these options together
1122.         # will trigger an Error
1123.         mutually_exclusive_options = [self.auto_now_add, self.auto_now, self.has_default()]
1124.         enabled_options = [option not in (None, False) for option in mutually_exclusive_options].count(True)
1125.         if enabled_options > 1:
1126.             return [
1127.                 checks.Error(
1128.                     "The options auto_now, auto_now_add, and default "
1129.                     "are mutually exclusive. Only one of these options "
1130.                     "may be present.",
1131.                     obj=self,
1132.                     id='fields.E160',
1133.                 )
1134.             ]
1135.         else:
1136.             return []
1137. 
1138.     def _check_fix_default_value(self):
1139.         return []
1140. 
1141. 
1142. class DateField(DateTimeCheckMixin, Field):
1143.     empty_strings_allowed = False
1144.     default_error_messages = {
1145.         'invalid': _('“%(value)s” value has an invalid date format. It must be '
1146.                      'in YYYY-MM-DD format.'),
1147.         'invalid_date': _('“%(value)s” value has the correct format (YYYY-MM-DD) '
1148.                           'but it is an invalid date.'),
1149.     }
1150.     description = _("Date (without time)")
1151. 
1152.     def __init__(self, verbose_name=None, name=None, auto_now=False,
1153.                  auto_now_add=False, **kwargs):
1154.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
1155.         if auto_now or auto_now_add:
1156.             kwargs['editable'] = False
1157.             kwargs['blank'] = True
1158.         super().__init__(verbose_name, name, **kwargs)
1159. 
1160.     def _check_fix_default_value(self):
1161.         """
1162.         Warn that using an actual date or datetime value is probably wrong;
1163.         it's only evaluated on server startup.
1164.         """
1165.         if not self.has_default():
1166.             return []
1167. 
1168.         now = timezone.now()
1169.         if not timezone.is_naive(now):
1170.             now = timezone.make_naive(now, timezone.utc)
1171.         value = self.default
1172.         if isinstance(value, datetime.datetime):
1173.             if not timezone.is_naive(value):
1174.                 value = timezone.make_naive(value, timezone.utc)
1175.             value = value.date()
1176.         elif isinstance(value, datetime.date):
1177.             # Nothing to do, as dates don't have tz information
1178.             pass
1179.         else:
1180.             # No explicit date / datetime value -- no checks necessary
1181.             return []
1182.         offset = datetime.timedelta(days=1)
1183.         lower = (now - offset).date()
1184.         upper = (now + offset).date()
1185.         if lower <= value <= upper:
1186.             return [
1187.                 checks.Warning(
1188.                     'Fixed default value provided.',
1189.                     hint='It seems you set a fixed date / time / datetime '
1190.                          'value as default for this field. This may not be '
1191.                          'what you want. If you want to have the current date '
1192.                          'as default, use `django.utils.timezone.now`',
1193.                     obj=self,
1194.                     id='fields.W161',
1195.                 )
1196.             ]
1197. 
1198.         return []
1199. 
1200.     def deconstruct(self):
1201.         name, path, args, kwargs = super().deconstruct()
1202.         if self.auto_now:
1203.             kwargs['auto_now'] = True
1204.         if self.auto_now_add:
1205.             kwargs['auto_now_add'] = True
1206.         if self.auto_now or self.auto_now_add:
1207.             del kwargs['editable']
1208.             del kwargs['blank']
1209.         return name, path, args, kwargs
1210. 
1211.     def get_internal_type(self):
1212.         return "DateField"
1213. 
1214.     def to_python(self, value):
1215.         if value is None:
1216.             return value
1217.         if isinstance(value, datetime.datetime):
1218.             if settings.USE_TZ and timezone.is_aware(value):
1219.                 # Convert aware datetimes to the default time zone
1220.                 # before casting them to dates (#17742).
1221.                 default_timezone = timezone.get_default_timezone()
1222.                 value = timezone.make_naive(value, default_timezone)
1223.             return value.date()
1224.         if isinstance(value, datetime.date):
1225.             return value
1226. 
1227.         try:
1228.             parsed = parse_date(value)
1229.             if parsed is not None:
1230.                 return parsed
1231.         except ValueError:
1232.             raise exceptions.ValidationError(
1233.                 self.error_messages['invalid_date'],
1234.                 code='invalid_date',
1235.                 params={'value': value},
1236.             )
1237. 
1238.         raise exceptions.ValidationError(
1239.             self.error_messages['invalid'],
1240.             code='invalid',
1241.             params={'value': value},
1242.         )
1243. 
1244.     def pre_save(self, model_instance, add):
1245.         if self.auto_now or (self.auto_now_add and add):
1246.             value = datetime.date.today()
1247.             setattr(model_instance, self.attname, value)
1248.             return value
1249.         else:
1250.             return super().pre_save(model_instance, add)
1251. 
1252.     def contribute_to_class(self, cls, name, **kwargs):
1253.         super().contribute_to_class(cls, name, **kwargs)
1254.         if not self.null:
1255.             setattr(
1256.                 cls, 'get_next_by_%s' % self.name,
1257.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=True)
1258.             )
1259.             setattr(
1260.                 cls, 'get_previous_by_%s' % self.name,
1261.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=False)
1262.             )
1263. 
1264.     def get_prep_value(self, value):
1265.         value = super().get_prep_value(value)
1266.         return self.to_python(value)
1267. 
1268.     def get_db_prep_value(self, value, connection, prepared=False):
1269.         # Casts dates into the format expected by the backend
1270.         if not prepared:
1271.             value = self.get_prep_value(value)
1272.         return connection.ops.adapt_datefield_value(value)
1273. 
1274.     def value_to_string(self, obj):
1275.         val = self.value_from_object(obj)
1276.         return '' if val is None else val.isoformat()
1277. 
1278.     def formfield(self, **kwargs):
1279.         return super().formfield(**{
1280.             'form_class': forms.DateField,
1281.             **kwargs,
1282.         })
1283. 
1284. 
1285. class DateTimeField(DateField):
1286.     empty_strings_allowed = False
1287.     default_error_messages = {
1288.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1289.                      'YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format.'),
1290.         'invalid_date': _("“%(value)s” value has the correct format "
1291.                           "(YYYY-MM-DD) but it is an invalid date."),
1292.         'invalid_datetime': _('“%(value)s” value has the correct format '
1293.                               '(YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]) '
1294.                               'but it is an invalid date/time.'),
1295.     }
1296.     description = _("Date (with time)")
1297. 
1298.     # __init__ is inherited from DateField
1299. 
1300.     def _check_fix_default_value(self):
1301.         """
1302.         Warn that using an actual date or datetime value is probably wrong;
1303.         it's only evaluated on server startup.
1304.         """
1305.         if not self.has_default():
1306.             return []
1307. 
1308.         now = timezone.now()
1309.         if not timezone.is_naive(now):
1310.             now = timezone.make_naive(now, timezone.utc)
1311.         value = self.default
1312.         if isinstance(value, datetime.datetime):
1313.             second_offset = datetime.timedelta(seconds=10)
1314.             lower = now - second_offset
1315.             upper = now + second_offset
1316.             if timezone.is_aware(value):
1317.                 value = timezone.make_naive(value, timezone.utc)
1318.         elif isinstance(value, datetime.date):
1319.             second_offset = datetime.timedelta(seconds=10)
1320.             lower = now - second_offset
1321.             lower = datetime.datetime(lower.year, lower.month, lower.day)
1322.             upper = now + second_offset
1323.             upper = datetime.datetime(upper.year, upper.month, upper.day)
1324.             value = datetime.datetime(value.year, value.month, value.day)
1325.         else:
1326.             # No explicit date / datetime value -- no checks necessary
1327.             return []
1328.         if lower <= value <= upper:
1329.             return [
1330.                 checks.Warning(
1331.                     'Fixed default value provided.',
1332.                     hint='It seems you set a fixed date / time / datetime '
1333.                          'value as default for this field. This may not be '
1334.                          'what you want. If you want to have the current date '
1335.                          'as default, use `django.utils.timezone.now`',
1336.                     obj=self,
1337.                     id='fields.W161',
1338.                 )
1339.             ]
1340. 
1341.         return []
1342. 
1343.     def get_internal_type(self):
1344.         return "DateTimeField"
1345. 
1346.     def to_python(self, value):
1347.         if value is None:
1348.             return value
1349.         if isinstance(value, datetime.datetime):
1350.             return value
1351.         if isinstance(value, datetime.date):
1352.             value = datetime.datetime(value.year, value.month, value.day)
1353.             if settings.USE_TZ:
1354.                 # For backwards compatibility, interpret naive datetimes in
1355.                 # local time. This won't work during DST change, but we can't
1356.                 # do much about it, so we let the exceptions percolate up the
1357.                 # call stack.
1358.                 warnings.warn("DateTimeField %s.%s received a naive datetime "
1359.                               "(%s) while time zone support is active." %
1360.                               (self.model.__name__, self.name, value),
1361.                               RuntimeWarning)
1362.                 default_timezone = timezone.get_default_timezone()
1363.                 value = timezone.make_aware(value, default_timezone)
1364.             return value
1365. 
1366.         try:
1367.             parsed = parse_datetime(value)
1368.             if parsed is not None:
1369.                 return parsed
1370.         except ValueError:
1371.             raise exceptions.ValidationError(
1372.                 self.error_messages['invalid_datetime'],
1373.                 code='invalid_datetime',
1374.                 params={'value': value},
1375.             )
1376. 
1377.         try:
1378.             parsed = parse_date(value)
1379.             if parsed is not None:
1380.                 return datetime.datetime(parsed.year, parsed.month, parsed.day)
1381.         except ValueError:
1382.             raise exceptions.ValidationError(
1383.                 self.error_messages['invalid_date'],
1384.                 code='invalid_date',
1385.                 params={'value': value},
1386.             )
1387. 
1388.         raise exceptions.ValidationError(
1389.             self.error_messages['invalid'],
1390.             code='invalid',
1391.             params={'value': value},
1392.         )
1393. 
1394.     def pre_save(self, model_instance, add):
1395.         if self.auto_now or (self.auto_now_add and add):
1396.             value = timezone.now()
1397.             setattr(model_instance, self.attname, value)
1398.             return value
1399.         else:
1400.             return super().pre_save(model_instance, add)
1401. 
1402.     # contribute_to_class is inherited from DateField, it registers
1403.     # get_next_by_FOO and get_prev_by_FOO
1404. 
1405.     def get_prep_value(self, value):
1406.         value = super().get_prep_value(value)
1407.         value = self.to_python(value)
1408.         if value is not None and settings.USE_TZ and timezone.is_naive(value):
1409.             # For backwards compatibility, interpret naive datetimes in local
1410.             # time. This won't work during DST change, but we can't do much
1411.             # about it, so we let the exceptions percolate up the call stack.
1412.             try:
1413.                 name = '%s.%s' % (self.model.__name__, self.name)
1414.             except AttributeError:
1415.                 name = '(unbound)'
1416.             warnings.warn("DateTimeField %s received a naive datetime (%s)"
1417.                           " while time zone support is active." %
1418.                           (name, value),
1419.                           RuntimeWarning)
1420.             default_timezone = timezone.get_default_timezone()
1421.             value = timezone.make_aware(value, default_timezone)
1422.         return value
1423. 
1424.     def get_db_prep_value(self, value, connection, prepared=False):
1425.         # Casts datetimes into the format expected by the backend
1426.         if not prepared:
1427.             value = self.get_prep_value(value)
1428.         return connection.ops.adapt_datetimefield_value(value)
1429. 
1430.     def value_to_string(self, obj):
1431.         val = self.value_from_object(obj)
1432.         return '' if val is None else val.isoformat()
1433. 
1434.     def formfield(self, **kwargs):
1435.         return super().formfield(**{
1436.             'form_class': forms.DateTimeField,
1437.             **kwargs,
1438.         })
1439. 
1440. 
1441. class DecimalField(Field):
1442.     empty_strings_allowed = False
1443.     default_error_messages = {
1444.         'invalid': _('“%(value)s” value must be a decimal number.'),
1445.     }
1446.     description = _("Decimal number")
1447. 
1448.     def __init__(self, verbose_name=None, name=None, max_digits=None,
1449.                  decimal_places=None, **kwargs):
1450.         self.max_digits, self.decimal_places = max_digits, decimal_places
1451.         super().__init__(verbose_name, name, **kwargs)
1452. 
1453.     def check(self, **kwargs):
1454.         errors = super().check(**kwargs)
1455. 
1456.         digits_errors = [
1457.             *self._check_decimal_places(),
1458.             *self._check_max_digits(),
1459.         ]
1460.         if not digits_errors:
1461.             errors.extend(self._check_decimal_places_and_max_digits(**kwargs))
1462.         else:
1463.             errors.extend(digits_errors)
1464.         return errors
1465. 
1466.     def _check_decimal_places(self):
1467.         try:
1468.             decimal_places = int(self.decimal_places)
1469.             if decimal_places < 0:
1470.                 raise ValueError()
1471.         except TypeError:
1472.             return [
1473.                 checks.Error(
1474.                     "DecimalFields must define a 'decimal_places' attribute.",
1475.                     obj=self,
1476.                     id='fields.E130',
1477.                 )
1478.             ]
1479.         except ValueError:
1480.             return [
1481.                 checks.Error(
1482.                     "'decimal_places' must be a non-negative integer.",
1483.                     obj=self,
1484.                     id='fields.E131',
1485.                 )
1486.             ]
1487.         else:
1488.             return []
1489. 
1490.     def _check_max_digits(self):
1491.         try:
1492.             max_digits = int(self.max_digits)
1493.             if max_digits <= 0:
1494.                 raise ValueError()
1495.         except TypeError:
1496.             return [
1497.                 checks.Error(
1498.                     "DecimalFields must define a 'max_digits' attribute.",
1499.                     obj=self,
1500.                     id='fields.E132',
1501.                 )
1502.             ]
1503.         except ValueError:
1504.             return [
1505.                 checks.Error(
1506.                     "'max_digits' must be a positive integer.",
1507.                     obj=self,
1508.                     id='fields.E133',
1509.                 )
1510.             ]
1511.         else:
1512.             return []
1513. 
1514.     def _check_decimal_places_and_max_digits(self, **kwargs):
1515.         if int(self.decimal_places) > int(self.max_digits):
1516.             return [
1517.                 checks.Error(
1518.                     "'max_digits' must be greater or equal to 'decimal_places'.",
1519.                     obj=self,
1520.                     id='fields.E134',
1521.                 )
1522.             ]
1523.         return []
1524. 
1525.     @cached_property
1526.     def validators(self):
1527.         return super().validators + [
1528.             validators.DecimalValidator(self.max_digits, self.decimal_places)
1529.         ]
1530. 
1531.     @cached_property
1532.     def context(self):
1533.         return decimal.Context(prec=self.max_digits)
1534. 
1535.     def deconstruct(self):
1536.         name, path, args, kwargs = super().deconstruct()
1537.         if self.max_digits is not None:
1538.             kwargs['max_digits'] = self.max_digits
1539.         if self.decimal_places is not None:
1540.             kwargs['decimal_places'] = self.decimal_places
1541.         return name, path, args, kwargs
1542. 
1543.     def get_internal_type(self):
1544.         return "DecimalField"
1545. 
1546.     def to_python(self, value):
1547.         if value is None:
1548.             return value
1549.         if isinstance(value, float):
1550.             return self.context.create_decimal_from_float(value)
1551.         try:
1552.             return decimal.Decimal(value)
1553.         except (decimal.InvalidOperation, TypeError, ValueError):
1554.             raise exceptions.ValidationError(
1555.                 self.error_messages['invalid'],
1556.                 code='invalid',
1557.                 params={'value': value},
1558.             )
1559. 
1560.     def get_db_prep_save(self, value, connection):
1561.         return connection.ops.adapt_decimalfield_value(self.to_python(value), self.max_digits, self.decimal_places)
1562. 
1563.     def get_prep_value(self, value):
1564.         value = super().get_prep_value(value)
1565.         return self.to_python(value)
1566. 
1567.     def formfield(self, **kwargs):
1568.         return super().formfield(**{
1569.             'max_digits': self.max_digits,
1570.             'decimal_places': self.decimal_places,
1571.             'form_class': forms.DecimalField,
1572.             **kwargs,
1573.         })
1574. 
1575. 
1576. class DurationField(Field):
1577.     """
1578.     Store timedelta objects.
1579. 
1580.     Use interval on PostgreSQL, INTERVAL DAY TO SECOND on Oracle, and bigint
1581.     of microseconds on other databases.
1582.     """
1583.     empty_strings_allowed = False
1584.     default_error_messages = {
1585.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1586.                      '[DD] [[HH:]MM:]ss[.uuuuuu] format.')
1587.     }
1588.     description = _("Duration")
1589. 
1590.     def get_internal_type(self):
1591.         return "DurationField"
1592. 
1593.     def to_python(self, value):
1594.         if value is None:
1595.             return value
1596.         if isinstance(value, datetime.timedelta):
1597.             return value
1598.         try:
1599.             parsed = parse_duration(value)
1600.         except ValueError:
1601.             pass
1602.         else:
1603.             if parsed is not None:
1604.                 return parsed
1605. 
1606.         raise exceptions.ValidationError(
1607.             self.error_messages['invalid'],
1608.             code='invalid',
1609.             params={'value': value},
1610.         )
1611. 
1612.     def get_db_prep_value(self, value, connection, prepared=False):
1613.         if connection.features.has_native_duration_field:
1614.             return value
1615.         if value is None:
1616.             return None
1617.         return duration_microseconds(value)
1618. 
1619.     def get_db_converters(self, connection):
1620.         converters = []
1621.         if not connection.features.has_native_duration_field:
1622.             converters.append(connection.ops.convert_durationfield_value)
1623.         return converters + super().get_db_converters(connection)
1624. 
1625.     def value_to_string(self, obj):
1626.         val = self.value_from_object(obj)
1627.         return '' if val is None else duration_string(val)
1628. 
1629.     def formfield(self, **kwargs):
1630.         return super().formfield(**{
1631.             'form_class': forms.DurationField,
1632.             **kwargs,
1633.         })
1634. 
1635. 
1636. class EmailField(CharField):
1637.     default_validators = [validators.validate_email]
1638.     description = _("Email address")
1639. 
1640.     def __init__(self, *args, **kwargs):
1641.         # max_length=254 to be compliant with RFCs 3696 and 5321
1642.         kwargs.setdefault('max_length', 254)
1643.         super().__init__(*args, **kwargs)
1644. 
1645.     def deconstruct(self):
1646.         name, path, args, kwargs = super().deconstruct()
1647.         # We do not exclude max_length if it matches default as we want to change
1648.         # the default in future.
1649.         return name, path, args, kwargs
1650. 
1651.     def formfield(self, **kwargs):
1652.         # As with CharField, this will cause email validation to be performed
1653.         # twice.
1654.         return super().formfield(**{
1655.             'form_class': forms.EmailField,
1656.             **kwargs,
1657.         })
1658. 
1659. 
1660. class FilePathField(Field):
1661.     description = _("File path")
1662. 
1663.     def __init__(self, verbose_name=None, name=None, path='', match=None,
1664.                  recursive=False, allow_files=True, allow_folders=False, **kwargs):
1665.         self.path, self.match, self.recursive = path, match, recursive
1666.         self.allow_files, self.allow_folders = allow_files, allow_folders
1667.         kwargs.setdefault('max_length', 100)
1668.         super().__init__(verbose_name, name, **kwargs)
1669. 
1670.     def check(self, **kwargs):
1671.         return [
1672.             *super().check(**kwargs),
1673.             *self._check_allowing_files_or_folders(**kwargs),
1674.         ]
1675. 
1676.     def _check_allowing_files_or_folders(self, **kwargs):
1677.         if not self.allow_files and not self.allow_folders:
1678.             return [
1679.                 checks.Error(
1680.                     "FilePathFields must have either 'allow_files' or 'allow_folders' set to True.",
1681.                     obj=self,
1682.                     id='fields.E140',
1683.                 )
1684.             ]
1685.         return []
1686. 
1687.     def deconstruct(self):
1688.         name, path, args, kwargs = super().deconstruct()
1689.         if self.path != '':
1690.             kwargs['path'] = self.path
1691.         if self.match is not None:
1692.             kwargs['match'] = self.match
1693.         if self.recursive is not False:
1694.             kwargs['recursive'] = self.recursive
1695.         if self.allow_files is not True:
1696.             kwargs['allow_files'] = self.allow_files
1697.         if self.allow_folders is not False:
1698.             kwargs['allow_folders'] = self.allow_folders
1699.         if kwargs.get("max_length") == 100:
1700.             del kwargs["max_length"]
1701.         return name, path, args, kwargs
1702. 
1703.     def get_prep_value(self, value):
1704.         value = super().get_prep_value(value)
1705.         if value is None:
1706.             return None
1707.         return str(value)
1708. 
1709.     def formfield(self, **kwargs):
1710.         return super().formfield(**{
1711.             'path': self.path() if callable(self.path) else self.path,
1712.             'match': self.match,
1713.             'recursive': self.recursive,
1714.             'form_class': forms.FilePathField,
1715.             'allow_files': self.allow_files,
1716.             'allow_folders': self.allow_folders,
1717.             **kwargs,
1718.         })
1719. 
1720.     def get_internal_type(self):
1721.         return "FilePathField"
1722. 
1723. 
1724. class FloatField(Field):
1725.     empty_strings_allowed = False
1726.     default_error_messages = {
1727.         'invalid': _('“%(value)s” value must be a float.'),
1728.     }
1729.     description = _("Floating point number")
1730. 
1731.     def get_prep_value(self, value):
1732.         value = super().get_prep_value(value)
1733.         if value is None:
1734.             return None
1735.         try:
1736.             return float(value)
1737.         except (TypeError, ValueError) as e:
1738.             raise e.__class__(
1739.                 "Field '%s' expected a number but got %r." % (self.name, value),
1740.             ) from e
1741. 
1742.     def get_internal_type(self):
1743.         return "FloatField"
1744. 
1745.     def to_python(self, value):
1746.         if value is None:
1747.             return value
1748.         try:
1749.             return float(value)
1750.         except (TypeError, ValueError):
1751.             raise exceptions.ValidationError(
1752.                 self.error_messages['invalid'],
1753.                 code='invalid',
1754.                 params={'value': value},
1755.             )
1756. 
1757.     def formfield(self, **kwargs):
1758.         return super().formfield(**{
1759.             'form_class': forms.FloatField,
1760.             **kwargs,
1761.         })
1762. 
1763. 
1764. class IntegerField(Field):
1765.     empty_strings_allowed = False
1766.     default_error_messages = {
1767.         'invalid': _('“%(value)s” value must be an integer.'),
1768.     }
1769.     description = _("Integer")
1770. 
1771.     def check(self, **kwargs):
1772.         return [
1773.             *super().check(**kwargs),
1774.             *self._check_max_length_warning(),
1775.         ]
1776. 
1777.     def _check_max_length_warning(self):
1778.         if self.max_length is not None:
1779.             return [
1780.                 checks.Warning(
1781.                     "'max_length' is ignored when used with %s." % self.__class__.__name__,
1782.                     hint="Remove 'max_length' from field",
1783.                     obj=self,
1784.                     id='fields.W122',
1785.                 )
1786.             ]
1787.         return []
1788. 
1789.     @cached_property
1790.     def validators(self):
1791.         # These validators can't be added at field initialization time since
1792.         # they're based on values retrieved from `connection`.
1793.         validators_ = super().validators
1794.         internal_type = self.get_internal_type()
1795.         min_value, max_value = connection.ops.integer_field_range(internal_type)
1796.         if min_value is not None and not any(
1797.             (
1798.                 isinstance(validator, validators.MinValueValidator) and (
1799.                     validator.limit_value()
1800.                     if callable(validator.limit_value)
1801.                     else validator.limit_value
1802.                 ) >= min_value
1803.             ) for validator in validators_
1804.         ):
1805.             validators_.append(validators.MinValueValidator(min_value))
1806.         if max_value is not None and not any(
1807.             (
1808.                 isinstance(validator, validators.MaxValueValidator) and (
1809.                     validator.limit_value()
1810.                     if callable(validator.limit_value)
1811.                     else validator.limit_value
1812.                 ) <= max_value
1813.             ) for validator in validators_
1814.         ):
1815.             validators_.append(validators.MaxValueValidator(max_value))
1816.         return validators_
1817. 
1818.     def get_prep_value(self, value):
1819.         value = super().get_prep_value(value)
1820.         if value is None:
1821.             return None
1822.         try:
1823.             return int(value)
1824.         except (TypeError, ValueError) as e:
1825.             raise e.__class__(
1826.                 "Field '%s' expected a number but got %r." % (self.name, value),
1827.             ) from e
1828. 
1829.     def get_internal_type(self):
1830.         return "IntegerField"
1831. 
1832.     def to_python(self, value):
1833.         if value is None:
1834.             return value
1835.         try:
1836.             return int(value)
1837.         except (TypeError, ValueError):
1838.             raise exceptions.ValidationError(
1839.                 self.error_messages['invalid'],
1840.                 code='invalid',
1841.                 params={'value': value},
1842.             )
1843. 
1844.     def formfield(self, **kwargs):
1845.         return super().formfield(**{
1846.             'form_class': forms.IntegerField,
1847.             **kwargs,
1848.         })
1849. 
1850. 
1851. class BigIntegerField(IntegerField):
1852.     description = _("Big (8 byte) integer")
1853.     MAX_BIGINT = 9223372036854775807
1854. 
1855.     def get_internal_type(self):
1856.         return "BigIntegerField"
1857. 
1858.     def formfield(self, **kwargs):
1859.         return super().formfield(**{
1860.             'min_value': -BigIntegerField.MAX_BIGINT - 1,
1861.             'max_value': BigIntegerField.MAX_BIGINT,
1862.             **kwargs,
1863.         })
1864. 
1865. 
1866. class SmallIntegerField(IntegerField):
1867.     description = _('Small integer')
1868. 
1869.     def get_internal_type(self):
1870.         return 'SmallIntegerField'
1871. 
1872. 
1873. class IPAddressField(Field):
1874.     empty_strings_allowed = False
1875.     description = _("IPv4 address")
1876.     system_check_removed_details = {
1877.         'msg': (
1878.             'IPAddressField has been removed except for support in '
1879.             'historical migrations.'
1880.         ),
1881.         'hint': 'Use GenericIPAddressField instead.',
1882.         'id': 'fields.E900',
1883.     }
1884. 
1885.     def __init__(self, *args, **kwargs):
1886.         kwargs['max_length'] = 15
1887.         super().__init__(*args, **kwargs)
1888. 
1889.     def deconstruct(self):
1890.         name, path, args, kwargs = super().deconstruct()
1891.         del kwargs['max_length']
1892.         return name, path, args, kwargs
1893. 
1894.     def get_prep_value(self, value):
1895.         value = super().get_prep_value(value)
1896.         if value is None:
1897.             return None
1898.         return str(value)
1899. 
1900.     def get_internal_type(self):
1901.         return "IPAddressField"
1902. 
1903. 
1904. class GenericIPAddressField(Field):
1905.     empty_strings_allowed = False
1906.     description = _("IP address")
1907.     default_error_messages = {}
1908. 
1909.     def __init__(self, verbose_name=None, name=None, protocol='both',
1910.                  unpack_ipv4=False, *args, **kwargs):
1911.         self.unpack_ipv4 = unpack_ipv4
1912.         self.protocol = protocol
1913.         self.default_validators, invalid_error_message = \
1914.             validators.ip_address_validators(protocol, unpack_ipv4)
1915.         self.default_error_messages['invalid'] = invalid_error_message
1916.         kwargs['max_length'] = 39
1917.         super().__init__(verbose_name, name, *args, **kwargs)
1918. 
1919.     def check(self, **kwargs):
1920.         return [
1921.             *super().check(**kwargs),
1922.             *self._check_blank_and_null_values(**kwargs),
1923.         ]
1924. 
1925.     def _check_blank_and_null_values(self, **kwargs):
1926.         if not getattr(self, 'null', False) and getattr(self, 'blank', False):
1927.             return [
1928.                 checks.Error(
1929.                     'GenericIPAddressFields cannot have blank=True if null=False, '
1930.                     'as blank values are stored as nulls.',
1931.                     obj=self,
1932.                     id='fields.E150',
1933.                 )
1934.             ]
1935.         return []
1936. 
1937.     def deconstruct(self):
1938.         name, path, args, kwargs = super().deconstruct()
1939.         if self.unpack_ipv4 is not False:
1940.             kwargs['unpack_ipv4'] = self.unpack_ipv4
1941.         if self.protocol != "both":
1942.             kwargs['protocol'] = self.protocol
1943.         if kwargs.get("max_length") == 39:
1944.             del kwargs['max_length']
1945.         return name, path, args, kwargs
1946. 
1947.     def get_internal_type(self):
1948.         return "GenericIPAddressField"
1949. 
1950.     def to_python(self, value):
1951.         if value is None:
1952.             return None
1953.         if not isinstance(value, str):
1954.             value = str(value)
1955.         value = value.strip()
1956.         if ':' in value:
1957.             return clean_ipv6_address(value, self.unpack_ipv4, self.error_messages['invalid'])
1958.         return value
1959. 
1960.     def get_db_prep_value(self, value, connection, prepared=False):
1961.         if not prepared:
1962.             value = self.get_prep_value(value)
1963.         return connection.ops.adapt_ipaddressfield_value(value)
1964. 
1965.     def get_prep_value(self, value):
1966.         value = super().get_prep_value(value)
1967.         if value is None:
1968.             return None
1969.         if value and ':' in value:
1970.             try:
1971.                 return clean_ipv6_address(value, self.unpack_ipv4)
1972.             except exceptions.ValidationError:
1973.                 pass
1974.         return str(value)
1975. 
1976.     def formfield(self, **kwargs):
1977.         return super().formfield(**{
1978.             'protocol': self.protocol,
1979.             'form_class': forms.GenericIPAddressField,
1980.             **kwargs,
1981.         })
1982. 
1983. 
1984. class NullBooleanField(BooleanField):
1985.     default_error_messages = {
1986.         'invalid': _('“%(value)s” value must be either None, True or False.'),
1987.         'invalid_nullable': _('“%(value)s” value must be either None, True or False.'),
1988.     }
1989.     description = _("Boolean (Either True, False or None)")
1990.     system_check_removed_details = {
1991.         'msg': (
1992.             'NullBooleanField is removed except for support in historical '
1993.             'migrations.'
1994.         ),
1995.         'hint': 'Use BooleanField(null=True) instead.',
1996.         'id': 'fields.E903',
1997.     }
1998. 
1999.     def __init__(self, *args, **kwargs):
2000.         kwargs['null'] = True


File: django/db/models/fields/json.py
Line number range: 16 - 121
Content:
class JSONField(CheckFieldDefaultMixin, Field):
    empty_strings_allowed = False
    description = _('A JSON object')
    default_error_messages = {
        'invalid': _('Value must be valid JSON.'),
    }
    _default_hint = ('dict', '{}')

    def __init__(
        self, verbose_name=None, name=None, encoder=None, decoder=None,
        **kwargs,
    ):
        if encoder and not callable(encoder):
            raise ValueError('The encoder parameter must be a callable object.')
        if decoder and not callable(decoder):
            raise ValueError('The decoder parameter must be a callable object.')
        self.encoder = encoder
        self.decoder = decoder
        super().__init__(verbose_name, name, **kwargs)

    def check(self, **kwargs):
        errors = super().check(**kwargs)
        databases = kwargs.get('databases') or []
        errors.extend(self._check_supported(databases))
        return errors

    def _check_supported(self, databases):
        errors = []
        for db in databases:
            if not router.allow_migrate_model(db, self.model):
                continue
            connection = connections[db]
            if (
                self.model._meta.required_db_vendor and
                self.model._meta.required_db_vendor != connection.vendor
            ):
                continue
            if not (
                'supports_json_field' in self.model._meta.required_db_features or
                connection.features.supports_json_field
            ):
                errors.append(
                    checks.Error(
                        '%s does not support JSONFields.'
                        % connection.display_name,
                        obj=self.model,
                        id='fields.E180',
                    )
                )
        return errors

    def deconstruct(self):
        name, path, args, kwargs = super().deconstruct()
        if self.encoder is not None:
            kwargs['encoder'] = self.encoder
        if self.decoder is not None:
            kwargs['decoder'] = self.decoder
        return name, path, args, kwargs

    def from_db_value(self, value, expression, connection):
        if value is None:
            return value
        # Some backends (SQLite at least) extract non-string values in their
        # SQL datatypes.
        if isinstance(expression, KeyTransform) and not isinstance(value, str):
            return value
        try:
            return json.loads(value, cls=self.decoder)
        except json.JSONDecodeError:
            return value

    def get_internal_type(self):
        return 'JSONField'

    def get_prep_value(self, value):
        if value is None:
            return value
        return json.dumps(value, cls=self.encoder)

    def get_transform(self, name):
        transform = super().get_transform(name)
        if transform:
            return transform
        return KeyTransformFactory(name)

    def validate(self, value, model_instance):
        super().validate(value, model_instance)
        try:
            json.dumps(value, cls=self.encoder)
        except TypeError:
            raise exceptions.ValidationError(
                self.error_messages['invalid'],
                code='invalid',
                params={'value': value},
            )

    def value_to_string(self, obj):
        return self.value_from_object(obj)

    def formfield(self, **kwargs):
        return super().formfield(**{
            'form_class': forms.JSONField,
            'encoder': self.encoder,
            'decoder': self.decoder,
            **kwargs,
        })

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-22 16:53:32,308 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user wants the full content of `django/db/models/fields/__init__.py`.\n   - This context is the first part of the file from lines 1-500.\n2. Extended relevance:\n   - This part of the file contains all the necessary imports and module-level definitions required to understand the Field classes defined later in the file.', relative_path='django/db/models/fields/__init__.py', start_line=1, end_line=500), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user wants the full content of `django/db/models/fields/__init__.py`.\n   - This context is the second part of the file from lines 501-2000.\n2. Extended relevance:\n   - This part of the file contains the majority of the Field class implementations, which is directly related to the user's purpose of examining the base Field class.", relative_path='django/db/models/fields/__init__.py', start_line=501, end_line=2000)]
2025-12-22 16:53:32,312 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 2 contexts to memory for query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
2025-12-22 16:53:32,312 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-22 16:53:32,312 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-22 16:53:32,313 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 2 new contexts to 1 existing contexts
2025-12-22 16:53:32,313 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 3 total contexts (removed 0 duplicates)
2025-12-22 16:53:32,314 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
django
├── .github
|   ├── FUNDING.yml
|   ├── SECURITY.md
|   └── workflows
|       ├── docs.yml
|       ├── linters.yml
|       ├── new_contributor_pr.yml
|       └── tests.yml
├── .pre-commit-config.yaml
├── .tx
├── CONTRIBUTING.rst
├── Gruntfile.js
├── README.rst
├── django
|   ├── __init__.py
|   ├── __main__.py
|   ├── apps
|   |   ├── __init__.py
|   |   ├── config.py
|   |   └── registry.py
|   ├── conf
|   |   ├── __init__.py
|   |   ├── app_template
|   |   |   └── migrations
|   |   ├── global_settings.py
|   |   ├── locale
|   |   |   ├── __init__.py
|   |   |   ├── af
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ar
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ar_DZ
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ast
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── az
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── be
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── bn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── br
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── bs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ca
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cs
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── cy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── da
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── de_CH
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── dsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── el
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_AU
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── en_GB
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eo
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_AR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_CO
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_MX
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_NI
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_PR
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── es_VE
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── et
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── eu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fa
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── fy
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ga
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gd
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── gl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── he
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hsb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── hu
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── hy
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ia
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── id
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ig
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── io
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── is
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── it
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ja
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ka
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kab
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── kk
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── km
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── kn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ko
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ky
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lb
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── lt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── lv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ml
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── mr
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── my
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nb
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ne
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── nl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── nn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── os
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pa
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── pl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── pt_BR
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ro
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ru
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sl
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sq
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sr_Latn
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sv
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── sw
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── ta
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── te
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tg
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── th
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tr
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── tt
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── udm
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uk
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── ur
|   |   |   |   └── LC_MESSAGES
|   |   |   ├── uz
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── vi
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   ├── zh_Hans
|   |   |   |   ├── LC_MESSAGES
|   |   |   |   ├── __init__.py
|   |   |   |   └── formats.py
|   |   |   └── zh_Hant
|   |   |       ├── LC_MESSAGES
|   |   |       ├── __init__.py
|   |   |       └── formats.py
|   |   ├── project_template
|   |   |   └── project_name
|   |   └── urls
|   |       ├── __init__.py
|   |       ├── i18n.py
|   |       └── static.py
|   ├── contrib
|   |   ├── __init__.py
|   |   ├── admin
|   |   |   ├── __init__.py
|   |   |   ├── actions.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── decorators.py
|   |   |   ├── exceptions.py
|   |   |   ├── filters.py
|   |   |   ├── forms.py
|   |   |   ├── helpers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── am
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_logentry_remove_auto_add.py
|   |   |   |   ├── 0003_logentry_add_action_flag_choices.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── options.py
|   |   |   ├── sites.py
|   |   |   ├── static
|   |   |   |   └── admin
|   |   |   ├── templates
|   |   |   |   ├── admin
|   |   |   |   └── registration
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   ├── admin_list.py
|   |   |   |   ├── admin_modify.py
|   |   |   |   ├── admin_urls.py
|   |   |   |   ├── base.py
|   |   |   |   └── log.py
|   |   |   ├── tests.py
|   |   |   ├── utils.py
|   |   |   ├── views
|   |   |   |   ├── __init__.py
|   |   |   |   ├── autocomplete.py
|   |   |   |   ├── decorators.py
|   |   |   |   └── main.py
|   |   |   └── widgets.py
|   |   ├── admindocs
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── templates
|   |   |   |   └── admin_doc
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── auth
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── backends.py
|   |   |   ├── base_user.py
|   |   |   ├── checks.py
|   |   |   ├── context_processors.py
|   |   |   ├── decorators.py
|   |   |   ├── forms.py
|   |   |   ├── handlers
|   |   |   |   ├── __init__.py
|   |   |   |   └── modwsgi.py
|   |   |   ├── hashers.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_permission_name_max_length.py
|   |   |   |   ├── 0003_alter_user_email_max_length.py
|   |   |   |   ├── 0004_alter_user_username_opts.py
|   |   |   |   ├── 0005_alter_user_last_login_null.py
|   |   |   |   ├── 0006_require_contenttypes_0002.py
|   |   |   |   ├── 0007_alter_validators_add_error_messages.py
|   |   |   |   ├── 0008_alter_user_username_max_length.py
|   |   |   |   ├── 0009_alter_user_last_name_max_length.py
|   |   |   |   ├── 0010_alter_group_name_max_length.py
|   |   |   |   ├── 0011_update_proxy_permissions.py
|   |   |   |   ├── 0012_alter_user_first_name_max_length.py
|   |   |   |   └── __init__.py
|   |   |   ├── mixins.py
|   |   |   ├── models.py
|   |   |   ├── password_validation.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   ├── auth
|   |   |   |   └── registration
|   |   |   ├── tokens.py
|   |   |   ├── urls.py
|   |   |   ├── validators.py
|   |   |   └── views.py
|   |   ├── contenttypes
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── fields.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_remove_content_type_name.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── views.py
|   |   ├── flatpages
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── forms.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── sitemaps.py
|   |   |   ├── templatetags
|   |   |   |   ├── __init__.py
|   |   |   |   └── flatpages.py
|   |   |   ├── urls.py
|   |   |   └── views.py
|   |   ├── gis
|   |   |   ├── __init__.py
|   |   |   ├── admin
|   |   |   |   ├── __init__.py
|   |   |   |   ├── options.py
|   |   |   |   └── widgets.py
|   |   |   ├── apps.py
|   |   |   ├── db
|   |   |   |   ├── __init__.py
|   |   |   |   ├── backends
|   |   |   |   └── models
|   |   |   ├── feeds.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── fields.py
|   |   |   |   └── widgets.py
|   |   |   ├── gdal
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── datasource.py
|   |   |   |   ├── driver.py
|   |   |   |   ├── envelope.py
|   |   |   |   ├── error.py
|   |   |   |   ├── feature.py
|   |   |   |   ├── field.py
|   |   |   |   ├── geometries.py
|   |   |   |   ├── geomtype.py
|   |   |   |   ├── layer.py
|   |   |   |   ├── libgdal.py
|   |   |   |   ├── prototypes
|   |   |   |   ├── raster
|   |   |   |   └── srs.py
|   |   |   ├── geoip2
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── resources.py
|   |   |   ├── geometry.py
|   |   |   ├── geos
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── collections.py
|   |   |   |   ├── coordseq.py
|   |   |   |   ├── error.py
|   |   |   |   ├── factory.py
|   |   |   |   ├── geometry.py
|   |   |   |   ├── io.py
|   |   |   |   ├── libgeos.py
|   |   |   |   ├── linestring.py
|   |   |   |   ├── mutable_list.py
|   |   |   |   ├── point.py
|   |   |   |   ├── polygon.py
|   |   |   |   ├── prepared.py
|   |   |   |   └── prototypes
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── measure.py
|   |   |   ├── ptr.py
|   |   |   ├── serializers
|   |   |   |   ├── __init__.py
|   |   |   |   └── geojson.py
|   |   |   ├── shortcuts.py
|   |   |   ├── sitemaps
|   |   |   |   ├── __init__.py
|   |   |   |   ├── kml.py
|   |   |   |   └── views.py
|   |   |   ├── static
|   |   |   |   └── gis
|   |   |   ├── templates
|   |   |   |   └── gis
|   |   |   ├── utils
|   |   |   |   ├── __init__.py
|   |   |   |   ├── layermapping.py
|   |   |   |   ├── ogrinfo.py
|   |   |   |   ├── ogrinspect.py
|   |   |   |   └── srs.py
|   |   |   └── views.py
|   |   ├── humanize
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── ms
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   └── templatetags
|   |   |       ├── __init__.py
|   |   |       └── humanize.py
|   |   ├── messages
|   |   |   ├── __init__.py
|   |   |   ├── api.py
|   |   |   ├── apps.py
|   |   |   ├── constants.py
|   |   |   ├── context_processors.py
|   |   |   ├── middleware.py
|   |   |   ├── storage
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cookie.py
|   |   |   |   ├── fallback.py
|   |   |   |   └── session.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   ├── postgres
|   |   |   ├── __init__.py
|   |   |   ├── aggregates
|   |   |   |   ├── __init__.py
|   |   |   |   ├── general.py
|   |   |   |   ├── mixins.py
|   |   |   |   └── statistics.py
|   |   |   ├── apps.py
|   |   |   ├── constraints.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── citext.py
|   |   |   |   ├── hstore.py
|   |   |   |   ├── jsonb.py
|   |   |   |   ├── ranges.py
|   |   |   |   └── utils.py
|   |   |   ├── forms
|   |   |   |   ├── __init__.py
|   |   |   |   ├── array.py
|   |   |   |   ├── hstore.py
|   |   |   |   └── ranges.py
|   |   |   ├── functions.py
|   |   |   ├── indexes.py
|   |   |   ├── jinja2
|   |   |   |   └── postgres
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kk
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── tg
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── uk
|   |   |   |   ├── uz
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── lookups.py
|   |   |   ├── operations.py
|   |   |   ├── search.py
|   |   |   ├── serializers.py
|   |   |   ├── signals.py
|   |   |   ├── templates
|   |   |   |   └── postgres
|   |   |   ├── utils.py
|   |   |   └── validators.py
|   |   ├── redirects
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_redirect_new_path_help_text.py
|   |   |   |   └── __init__.py
|   |   |   └── models.py
|   |   ├── sessions
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── cache.py
|   |   |   |   ├── cached_db.py
|   |   |   |   ├── db.py
|   |   |   |   ├── file.py
|   |   |   |   └── signed_cookies.py
|   |   |   ├── base_session.py
|   |   |   ├── exceptions.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   └── serializers.py
|   |   ├── sitemaps
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── templates
|   |   |   |   ├── sitemap.xml
|   |   |   |   └── sitemap_index.xml
|   |   |   └── views.py
|   |   ├── sites
|   |   |   ├── __init__.py
|   |   |   ├── admin.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── locale
|   |   |   |   ├── af
|   |   |   |   ├── ar
|   |   |   |   ├── ar_DZ
|   |   |   |   ├── ast
|   |   |   |   ├── az
|   |   |   |   ├── be
|   |   |   |   ├── bg
|   |   |   |   ├── bn
|   |   |   |   ├── br
|   |   |   |   ├── bs
|   |   |   |   ├── ca
|   |   |   |   ├── cs
|   |   |   |   ├── cy
|   |   |   |   ├── da
|   |   |   |   ├── de
|   |   |   |   ├── dsb
|   |   |   |   ├── el
|   |   |   |   ├── en
|   |   |   |   ├── en_AU
|   |   |   |   ├── en_GB
|   |   |   |   ├── eo
|   |   |   |   ├── es
|   |   |   |   ├── es_AR
|   |   |   |   ├── es_CO
|   |   |   |   ├── es_MX
|   |   |   |   ├── es_VE
|   |   |   |   ├── et
|   |   |   |   ├── eu
|   |   |   |   ├── fa
|   |   |   |   ├── fi
|   |   |   |   ├── fr
|   |   |   |   ├── fy
|   |   |   |   ├── ga
|   |   |   |   ├── gd
|   |   |   |   ├── gl
|   |   |   |   ├── he
|   |   |   |   ├── hi
|   |   |   |   ├── hr
|   |   |   |   ├── hsb
|   |   |   |   ├── hu
|   |   |   |   ├── hy
|   |   |   |   ├── ia
|   |   |   |   ├── id
|   |   |   |   ├── io
|   |   |   |   ├── is
|   |   |   |   ├── it
|   |   |   |   ├── ja
|   |   |   |   ├── ka
|   |   |   |   ├── kab
|   |   |   |   ├── kk
|   |   |   |   ├── km
|   |   |   |   ├── kn
|   |   |   |   ├── ko
|   |   |   |   ├── ky
|   |   |   |   ├── lb
|   |   |   |   ├── lt
|   |   |   |   ├── lv
|   |   |   |   ├── mk
|   |   |   |   ├── ml
|   |   |   |   ├── mn
|   |   |   |   ├── mr
|   |   |   |   ├── my
|   |   |   |   ├── nb
|   |   |   |   ├── ne
|   |   |   |   ├── nl
|   |   |   |   ├── nn
|   |   |   |   ├── os
|   |   |   |   ├── pa
|   |   |   |   ├── pl
|   |   |   |   ├── pt
|   |   |   |   ├── pt_BR
|   |   |   |   ├── ro
|   |   |   |   ├── ru
|   |   |   |   ├── sk
|   |   |   |   ├── sl
|   |   |   |   ├── sq
|   |   |   |   ├── sr
|   |   |   |   ├── sr_Latn
|   |   |   |   ├── sv
|   |   |   |   ├── sw
|   |   |   |   ├── ta
|   |   |   |   ├── te
|   |   |   |   ├── tg
|   |   |   |   ├── th
|   |   |   |   ├── tk
|   |   |   |   ├── tr
|   |   |   |   ├── tt
|   |   |   |   ├── udm
|   |   |   |   ├── uk
|   |   |   |   ├── ur
|   |   |   |   ├── uz
|   |   |   |   ├── vi
|   |   |   |   ├── zh_Hans
|   |   |   |   └── zh_Hant
|   |   |   ├── management.py
|   |   |   ├── managers.py
|   |   |   ├── middleware.py
|   |   |   ├── migrations
|   |   |   |   ├── 0001_initial.py
|   |   |   |   ├── 0002_alter_domain_unique.py
|   |   |   |   └── __init__.py
|   |   |   ├── models.py
|   |   |   ├── requests.py
|   |   |   └── shortcuts.py
|   |   ├── staticfiles
|   |   |   ├── __init__.py
|   |   |   ├── apps.py
|   |   |   ├── checks.py
|   |   |   ├── finders.py
|   |   |   ├── handlers.py
|   |   |   ├── management
|   |   |   |   ├── __init__.py
|   |   |   |   └── commands
|   |   |   ├── storage.py
|   |   |   ├── testing.py
|   |   |   ├── urls.py
|   |   |   ├── utils.py
|   |   |   └── views.py
|   |   └── syndication
|   |       ├── __init__.py
|   |       ├── apps.py
|   |       └── views.py
|   ├── core
|   |   ├── __init__.py
|   |   ├── asgi.py
|   |   ├── cache
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── db.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── memcached.py
|   |   |   └── utils.py
|   |   ├── checks
|   |   |   ├── __init__.py
|   |   |   ├── async_checks.py
|   |   |   ├── caches.py
|   |   |   ├── compatibility
|   |   |   |   ├── __init__.py
|   |   |   |   └── django_4_0.py
|   |   |   ├── database.py
|   |   |   ├── files.py
|   |   |   ├── messages.py
|   |   |   ├── model_checks.py
|   |   |   ├── registry.py
|   |   |   ├── security
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── csrf.py
|   |   |   |   └── sessions.py
|   |   |   ├── templates.py
|   |   |   ├── translation.py
|   |   |   └── urls.py
|   |   ├── exceptions.py
|   |   ├── files
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── images.py
|   |   |   ├── locks.py
|   |   |   ├── move.py
|   |   |   ├── storage.py
|   |   |   ├── temp.py
|   |   |   ├── uploadedfile.py
|   |   |   ├── uploadhandler.py
|   |   |   └── utils.py
|   |   ├── handlers
|   |   |   ├── __init__.py
|   |   |   ├── asgi.py
|   |   |   ├── base.py
|   |   |   ├── exception.py
|   |   |   └── wsgi.py
|   |   ├── mail
|   |   |   ├── __init__.py
|   |   |   ├── backends
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── console.py
|   |   |   |   ├── dummy.py
|   |   |   |   ├── filebased.py
|   |   |   |   ├── locmem.py
|   |   |   |   └── smtp.py
|   |   |   ├── message.py
|   |   |   └── utils.py
|   |   ├── management
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── color.py
|   |   |   ├── commands
|   |   |   |   ├── __init__.py
|   |   |   |   ├── check.py
|   |   |   |   ├── compilemessages.py
|   |   |   |   ├── createcachetable.py
|   |   |   |   ├── dbshell.py
|   |   |   |   ├── diffsettings.py
|   |   |   |   ├── dumpdata.py
|   |   |   |   ├── flush.py
|   |   |   |   ├── inspectdb.py
|   |   |   |   ├── loaddata.py
|   |   |   |   ├── makemessages.py
|   |   |   |   ├── makemigrations.py
|   |   |   |   ├── migrate.py
|   |   |   |   ├── runserver.py
|   |   |   |   ├── sendtestemail.py
|   |   |   |   ├── shell.py
|   |   |   |   ├── showmigrations.py
|   |   |   |   ├── sqlflush.py
|   |   |   |   ├── sqlmigrate.py
|   |   |   |   ├── sqlsequencereset.py
|   |   |   |   ├── squashmigrations.py
|   |   |   |   ├── startapp.py
|   |   |   |   ├── startproject.py
|   |   |   |   ├── test.py
|   |   |   |   └── testserver.py
|   |   |   ├── sql.py
|   |   |   ├── templates.py
|   |   |   └── utils.py
|   |   ├── paginator.py
|   |   ├── serializers
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── json.py
|   |   |   ├── jsonl.py
|   |   |   ├── python.py
|   |   |   ├── pyyaml.py
|   |   |   └── xml_serializer.py
|   |   ├── servers
|   |   |   ├── __init__.py
|   |   |   └── basehttp.py
|   |   ├── signals.py
|   |   ├── signing.py
|   |   ├── validators.py
|   |   └── wsgi.py
|   ├── db
|   |   ├── __init__.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── ddl_references.py
|   |   |   ├── dummy
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   └── features.py
|   |   |   ├── mysql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   └── validation.py
|   |   |   ├── oracle
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── functions.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   ├── schema.py
|   |   |   |   ├── utils.py
|   |   |   |   └── validation.py
|   |   |   ├── postgresql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   ├── signals.py
|   |   |   ├── sqlite3
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── client.py
|   |   |   |   ├── creation.py
|   |   |   |   ├── features.py
|   |   |   |   ├── introspection.py
|   |   |   |   ├── operations.py
|   |   |   |   └── schema.py
|   |   |   └── utils.py
|   |   ├── migrations
|   |   |   ├── __init__.py
|   |   |   ├── autodetector.py
|   |   |   ├── exceptions.py
|   |   |   ├── executor.py
|   |   |   ├── graph.py
|   |   |   ├── loader.py
|   |   |   ├── migration.py
|   |   |   ├── operations
|   |   |   |   ├── __init__.py
|   |   |   |   ├── base.py
|   |   |   |   ├── fields.py
|   |   |   |   ├── models.py
|   |   |   |   ├── special.py
|   |   |   |   └── utils.py
|   |   |   ├── optimizer.py
|   |   |   ├── questioner.py
|   |   |   ├── recorder.py
|   |   |   ├── serializer.py
|   |   |   ├── state.py
|   |   |   ├── utils.py
|   |   |   └── writer.py
|   |   ├── models
|   |   |   ├── __init__.py
|   |   |   ├── aggregates.py
|   |   |   ├── base.py
|   |   |   ├── constants.py
|   |   |   ├── constraints.py
|   |   |   ├── deletion.py
|   |   |   ├── enums.py
|   |   |   ├── expressions.py
|   |   |   ├── fields
|   |   |   |   ├── __init__.py
|   |   |   |   ├── files.py
|   |   |   |   ├── json.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── proxy.py
|   |   |   |   ├── related.py
|   |   |   |   ├── related_descriptors.py
|   |   |   |   ├── related_lookups.py
|   |   |   |   └── reverse_related.py
|   |   |   ├── functions
|   |   |   |   ├── __init__.py
|   |   |   |   ├── comparison.py
|   |   |   |   ├── datetime.py
|   |   |   |   ├── math.py
|   |   |   |   ├── mixins.py
|   |   |   |   ├── text.py
|   |   |   |   └── window.py
|   |   |   ├── indexes.py
|   |   |   ├── lookups.py
|   |   |   ├── manager.py
|   |   |   ├── options.py
|   |   |   ├── query.py
|   |   |   ├── query_utils.py
|   |   |   ├── signals.py
|   |   |   ├── sql
|   |   |   |   ├── __init__.py
|   |   |   |   ├── compiler.py
|   |   |   |   ├── constants.py
|   |   |   |   ├── datastructures.py
|   |   |   |   ├── query.py
|   |   |   |   ├── subqueries.py
|   |   |   |   └── where.py
|   |   |   └── utils.py
|   |   ├── transaction.py
|   |   └── utils.py
|   ├── dispatch
|   |   ├── __init__.py
|   |   ├── dispatcher.py
|   |   └── license.txt
|   ├── forms
|   |   ├── __init__.py
|   |   ├── boundfield.py
|   |   ├── fields.py
|   |   ├── forms.py
|   |   ├── formsets.py
|   |   ├── jinja2
|   |   |   └── django
|   |   |       └── forms
|   |   ├── models.py
|   |   ├── renderers.py
|   |   ├── templates
|   |   |   └── django
|   |   |       └── forms
|   |   ├── utils.py
|   |   └── widgets.py
|   ├── http
|   |   ├── __init__.py
|   |   ├── cookie.py
|   |   ├── multipartparser.py
|   |   ├── request.py
|   |   └── response.py
|   ├── middleware
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── clickjacking.py
|   |   ├── common.py
|   |   ├── csrf.py
|   |   ├── gzip.py
|   |   ├── http.py
|   |   ├── locale.py
|   |   └── security.py
|   ├── shortcuts.py
|   ├── template
|   |   ├── __init__.py
|   |   ├── autoreload.py
|   |   ├── backends
|   |   |   ├── __init__.py
|   |   |   ├── base.py
|   |   |   ├── django.py
|   |   |   ├── dummy.py
|   |   |   ├── jinja2.py
|   |   |   └── utils.py
|   |   ├── base.py
|   |   ├── context.py
|   |   ├── context_processors.py
|   |   ├── defaultfilters.py
|   |   ├── defaulttags.py
|   |   ├── engine.py
|   |   ├── exceptions.py
|   |   ├── library.py
|   |   ├── loader.py
|   |   ├── loader_tags.py
|   |   ├── loaders
|   |   |   ├── __init__.py
|   |   |   ├── app_directories.py
|   |   |   ├── base.py
|   |   |   ├── cached.py
|   |   |   ├── filesystem.py
|   |   |   └── locmem.py
|   |   ├── response.py
|   |   ├── smartif.py
|   |   └── utils.py
|   ├── templatetags
|   |   ├── __init__.py
|   |   ├── cache.py
|   |   ├── i18n.py
|   |   ├── l10n.py
|   |   ├── static.py
|   |   └── tz.py
|   ├── test
|   |   ├── __init__.py
|   |   ├── client.py
|   |   ├── html.py
|   |   ├── runner.py
|   |   ├── selenium.py
|   |   ├── signals.py
|   |   ├── testcases.py
|   |   └── utils.py
|   ├── urls
|   |   ├── __init__.py
|   |   ├── base.py
|   |   ├── conf.py
|   |   ├── converters.py
|   |   ├── exceptions.py
|   |   ├── resolvers.py
|   |   └── utils.py
|   ├── utils
|   |   ├── __init__.py
|   |   ├── _os.py
|   |   ├── archive.py
|   |   ├── asyncio.py
|   |   ├── autoreload.py
|   |   ├── baseconv.py
|   |   ├── cache.py
|   |   ├── connection.py
|   |   ├── crypto.py
|   |   ├── datastructures.py
|   |   ├── dateformat.py
|   |   ├── dateparse.py
|   |   ├── dates.py
|   |   ├── datetime_safe.py
|   |   ├── deconstruct.py
|   |   ├── decorators.py
|   |   ├── deprecation.py
|   |   ├── duration.py
|   |   ├── encoding.py
|   |   ├── feedgenerator.py
|   |   ├── formats.py
|   |   ├── functional.py
|   |   ├── hashable.py
|   |   ├── html.py
|   |   ├── http.py
|   |   ├── inspect.py
|   |   ├── ipv6.py
|   |   ├── itercompat.py
|   |   ├── jslex.py
|   |   ├── log.py
|   |   ├── lorem_ipsum.py
|   |   ├── module_loading.py
|   |   ├── numberformat.py
|   |   ├── regex_helper.py
|   |   ├── safestring.py
|   |   ├── termcolors.py
|   |   ├── text.py
|   |   ├── timesince.py
|   |   ├── timezone.py
|   |   ├── topological_sort.py
|   |   ├── translation
|   |   |   ├── __init__.py
|   |   |   ├── reloader.py
|   |   |   ├── template.py
|   |   |   ├── trans_null.py
|   |   |   └── trans_real.py
|   |   ├── tree.py
|   |   ├── version.py
|   |   └── xmlutils.py
|   └── views
|       ├── __init__.py
|       ├── csrf.py
|       ├── debug.py
|       ├── decorators
|       |   ├── __init__.py
|       |   ├── cache.py
|       |   ├── clickjacking.py
|       |   ├── common.py
|       |   ├── csrf.py
|       |   ├── debug.py
|       |   ├── gzip.py
|       |   ├── http.py
|       |   └── vary.py
|       ├── defaults.py
|       ├── generic
|       |   ├── __init__.py
|       |   ├── base.py
|       |   ├── dates.py
|       |   ├── detail.py
|       |   ├── edit.py
|       |   └── list.py
|       ├── i18n.py
|       ├── static.py
|       └── templates
|           ├── default_urlconf.html
|           ├── technical_404.html
|           ├── technical_500.html
|           └── technical_500.txt
├── docs
|   ├── README.rst
|   ├── _ext
|   |   └── djangodocs.py
|   ├── _theme
|   |   ├── djangodocs
|   |   |   ├── genindex.html
|   |   |   ├── layout.html
|   |   |   ├── modindex.html
|   |   |   ├── search.html
|   |   |   └── static
|   |   |       ├── console-tabs.css
|   |   |       ├── default.css
|   |   |       ├── djangodocs.css
|   |   |       ├── fontawesome
|   |   |       ├── homepage.css
|   |   |       └── reset-fonts-grids.css
|   |   └── djangodocs-epub
|   |       ├── epub-cover.html
|   |       └── static
|   |           └── epub.css
|   ├── conf.py
|   ├── contents.txt
|   ├── faq
|   |   ├── admin.txt
|   |   ├── contributing.txt
|   |   ├── general.txt
|   |   ├── help.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── models.txt
|   |   ├── troubleshooting.txt
|   |   └── usage.txt
|   ├── glossary.txt
|   ├── howto
|   |   ├── _images
|   |   ├── auth-remote-user.txt
|   |   ├── custom-file-storage.txt
|   |   ├── custom-lookups.txt
|   |   ├── custom-management-commands.txt
|   |   ├── custom-model-fields.txt
|   |   ├── custom-template-backend.txt
|   |   ├── custom-template-tags.txt
|   |   ├── deployment
|   |   |   ├── asgi
|   |   |   |   ├── daphne.txt
|   |   |   |   ├── hypercorn.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── uvicorn.txt
|   |   |   ├── checklist.txt
|   |   |   ├── index.txt
|   |   |   └── wsgi
|   |   |       ├── apache-auth.txt
|   |   |       ├── gunicorn.txt
|   |   |       ├── index.txt
|   |   |       ├── modwsgi.txt
|   |   |       └── uwsgi.txt
|   |   ├── error-reporting.txt
|   |   ├── index.txt
|   |   ├── initial-data.txt
|   |   ├── legacy-databases.txt
|   |   ├── outputting-csv.txt
|   |   ├── outputting-pdf.txt
|   |   ├── overriding-templates.txt
|   |   ├── static-files
|   |   |   ├── deployment.txt
|   |   |   └── index.txt
|   |   ├── upgrade-version.txt
|   |   ├── windows.txt
|   |   └── writing-migrations.txt
|   ├── index.txt
|   ├── internals
|   |   ├── _images
|   |   ├── contributing
|   |   |   ├── bugs-and-features.txt
|   |   |   ├── committing-code.txt
|   |   |   ├── index.txt
|   |   |   ├── localizing.txt
|   |   |   ├── new-contributors.txt
|   |   |   ├── triaging-tickets.txt
|   |   |   ├── writing-code
|   |   |   |   ├── coding-style.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── javascript.txt
|   |   |   |   ├── submitting-patches.txt
|   |   |   |   ├── unit-tests.txt
|   |   |   |   └── working-with-git.txt
|   |   |   └── writing-documentation.txt
|   |   ├── deprecation.txt
|   |   ├── git.txt
|   |   ├── howto-release-django.txt
|   |   ├── index.txt
|   |   ├── mailing-lists.txt
|   |   ├── organization.txt
|   |   ├── release-process.txt
|   |   └── security.txt
|   ├── intro
|   |   ├── _images
|   |   ├── contributing.txt
|   |   ├── index.txt
|   |   ├── install.txt
|   |   ├── overview.txt
|   |   ├── reusable-apps.txt
|   |   ├── tutorial01.txt
|   |   ├── tutorial02.txt
|   |   ├── tutorial03.txt
|   |   ├── tutorial04.txt
|   |   ├── tutorial05.txt
|   |   ├── tutorial06.txt
|   |   ├── tutorial07.txt
|   |   └── whatsnext.txt
|   ├── man
|   ├── misc
|   |   ├── api-stability.txt
|   |   ├── design-philosophies.txt
|   |   ├── distributions.txt
|   |   └── index.txt
|   ├── ref
|   |   ├── applications.txt
|   |   ├── checks.txt
|   |   ├── class-based-views
|   |   |   ├── base.txt
|   |   |   ├── flattened-index.txt
|   |   |   ├── generic-date-based.txt
|   |   |   ├── generic-display.txt
|   |   |   ├── generic-editing.txt
|   |   |   ├── index.txt
|   |   |   ├── mixins-date-based.txt
|   |   |   ├── mixins-editing.txt
|   |   |   ├── mixins-multiple-object.txt
|   |   |   ├── mixins-simple.txt
|   |   |   ├── mixins-single-object.txt
|   |   |   └── mixins.txt
|   |   ├── clickjacking.txt
|   |   ├── contrib
|   |   |   ├── admin
|   |   |   |   ├── _images
|   |   |   |   ├── actions.txt
|   |   |   |   ├── admindocs.txt
|   |   |   |   ├── index.txt
|   |   |   |   └── javascript.txt
|   |   |   ├── auth.txt
|   |   |   ├── contenttypes.txt
|   |   |   ├── flatpages.txt
|   |   |   ├── gis
|   |   |   |   ├── admin.txt
|   |   |   |   ├── commands.txt
|   |   |   |   ├── db-api.txt
|   |   |   |   ├── deployment.txt
|   |   |   |   ├── feeds.txt
|   |   |   |   ├── forms-api.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── gdal.txt
|   |   |   |   ├── geoip2.txt
|   |   |   |   ├── geoquerysets.txt
|   |   |   |   ├── geos.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── install
|   |   |   |   ├── layermapping.txt
|   |   |   |   ├── measure.txt
|   |   |   |   ├── model-api.txt
|   |   |   |   ├── ogrinspect.txt
|   |   |   |   ├── serializers.txt
|   |   |   |   ├── sitemaps.txt
|   |   |   |   ├── testing.txt
|   |   |   |   ├── tutorial.txt
|   |   |   |   └── utils.txt
|   |   |   ├── humanize.txt
|   |   |   ├── index.txt
|   |   |   ├── messages.txt
|   |   |   ├── postgres
|   |   |   |   ├── aggregates.txt
|   |   |   |   ├── constraints.txt
|   |   |   |   ├── fields.txt
|   |   |   |   ├── forms.txt
|   |   |   |   ├── functions.txt
|   |   |   |   ├── index.txt
|   |   |   |   ├── indexes.txt
|   |   |   |   ├── lookups.txt
|   |   |   |   ├── operations.txt
|   |   |   |   ├── search.txt
|   |   |   |   └── validators.txt
|   |   |   ├── redirects.txt
|   |   |   ├── sitemaps.txt
|   |   |   ├── sites.txt
|   |   |   ├── staticfiles.txt
|   |   |   └── syndication.txt
|   |   ├── csrf.txt
|   |   ├── databases.txt
|   |   ├── django-admin.txt
|   |   ├── exceptions.txt
|   |   ├── files
|   |   |   ├── file.txt
|   |   |   ├── index.txt
|   |   |   ├── storage.txt
|   |   |   └── uploads.txt
|   |   ├── forms
|   |   |   ├── api.txt
|   |   |   ├── fields.txt
|   |   |   ├── formsets.txt
|   |   |   ├── index.txt
|   |   |   ├── models.txt
|   |   |   ├── renderers.txt
|   |   |   ├── validation.txt
|   |   |   └── widgets.txt
|   |   ├── index.txt
|   |   ├── middleware.txt
|   |   ├── migration-operations.txt
|   |   ├── models
|   |   |   ├── class.txt
|   |   |   ├── conditional-expressions.txt
|   |   |   ├── constraints.txt
|   |   |   ├── database-functions.txt
|   |   |   ├── expressions.txt
|   |   |   ├── fields.txt
|   |   |   ├── index.txt
|   |   |   ├── indexes.txt
|   |   |   ├── instances.txt
|   |   |   ├── lookups.txt
|   |   |   ├── meta.txt
|   |   |   ├── options.txt
|   |   |   ├── querysets.txt
|   |   |   └── relations.txt
|   |   ├── paginator.txt
|   |   ├── request-response.txt
|   |   ├── schema-editor.txt
|   |   ├── settings.txt
|   |   ├── signals.txt
|   |   ├── template-response.txt
|   |   ├── templates
|   |   |   ├── api.txt
|   |   |   ├── builtins.txt
|   |   |   ├── index.txt
|   |   |   └── language.txt
|   |   ├── unicode.txt
|   |   ├── urlresolvers.txt
|   |   ├── urls.txt
|   |   ├── utils.txt
|   |   ├── validators.txt
|   |   └── views.txt
|   ├── releases
|   |   ├── 0.95.txt
|   |   ├── 0.96.txt
|   |   ├── 1.0-porting-guide.txt
|   |   ├── 1.0.1.txt
|   |   ├── 1.0.2.txt
|   |   ├── 1.0.txt
|   |   ├── 1.1.2.txt
|   |   ├── 1.1.3.txt
|   |   ├── 1.1.4.txt
|   |   ├── 1.1.txt
|   |   ├── 1.10.1.txt
|   |   ├── 1.10.2.txt
|   |   ├── 1.10.3.txt
|   |   ├── 1.10.4.txt
|   |   ├── 1.10.5.txt
|   |   ├── 1.10.6.txt
|   |   ├── 1.10.7.txt
|   |   ├── 1.10.8.txt
|   |   ├── 1.10.txt
|   |   ├── 1.11.1.txt
|   |   ├── 1.11.10.txt
|   |   ├── 1.11.11.txt
|   |   ├── 1.11.12.txt
|   |   ├── 1.11.13.txt
|   |   ├── 1.11.14.txt
|   |   ├── 1.11.15.txt
|   |   ├── 1.11.16.txt
|   |   ├── 1.11.17.txt
|   |   ├── 1.11.18.txt
|   |   ├── 1.11.19.txt
|   |   ├── 1.11.2.txt
|   |   ├── 1.11.20.txt
|   |   ├── 1.11.21.txt
|   |   ├── 1.11.22.txt
|   |   ├── 1.11.23.txt
|   |   ├── 1.11.24.txt
|   |   ├── 1.11.25.txt
|   |   ├── 1.11.26.txt
|   |   ├── 1.11.27.txt
|   |   ├── 1.11.28.txt
|   |   ├── 1.11.29.txt
|   |   ├── 1.11.3.txt
|   |   ├── 1.11.4.txt
|   |   ├── 1.11.5.txt
|   |   ├── 1.11.6.txt
|   |   ├── 1.11.7.txt
|   |   ├── 1.11.8.txt
|   |   ├── 1.11.9.txt
|   |   ├── 1.11.txt
|   |   ├── 1.2.1.txt
|   |   ├── 1.2.2.txt
|   |   ├── 1.2.3.txt
|   |   ├── 1.2.4.txt
|   |   ├── 1.2.5.txt
|   |   ├── 1.2.6.txt
|   |   ├── 1.2.7.txt
|   |   ├── 1.2.txt
|   |   ├── 1.3.1.txt
|   |   ├── 1.3.2.txt
|   |   ├── 1.3.3.txt
|   |   ├── 1.3.4.txt
|   |   ├── 1.3.5.txt
|   |   ├── 1.3.6.txt
|   |   ├── 1.3.7.txt
|   |   ├── 1.3.txt
|   |   ├── 1.4.1.txt
|   |   ├── 1.4.10.txt
|   |   ├── 1.4.11.txt
|   |   ├── 1.4.12.txt
|   |   ├── 1.4.13.txt
|   |   ├── 1.4.14.txt
|   |   ├── 1.4.15.txt
|   |   ├── 1.4.16.txt
|   |   ├── 1.4.17.txt
|   |   ├── 1.4.18.txt
|   |   ├── 1.4.19.txt
|   |   ├── 1.4.2.txt
|   |   ├── 1.4.20.txt
|   |   ├── 1.4.21.txt
|   |   ├── 1.4.22.txt
|   |   ├── 1.4.3.txt
|   |   ├── 1.4.4.txt
|   |   ├── 1.4.5.txt
|   |   ├── 1.4.6.txt
|   |   ├── 1.4.7.txt
|   |   ├── 1.4.8.txt
|   |   ├── 1.4.9.txt
|   |   ├── 1.4.txt
|   |   ├── 1.5.1.txt
|   |   ├── 1.5.10.txt
|   |   ├── 1.5.11.txt
|   |   ├── 1.5.12.txt
|   |   ├── 1.5.2.txt
|   |   ├── 1.5.3.txt
|   |   ├── 1.5.4.txt
|   |   ├── 1.5.5.txt
|   |   ├── 1.5.6.txt
|   |   ├── 1.5.7.txt
|   |   ├── 1.5.8.txt
|   |   ├── 1.5.9.txt
|   |   ├── 1.5.txt
|   |   ├── 1.6.1.txt
|   |   ├── 1.6.10.txt
|   |   ├── 1.6.11.txt
|   |   ├── 1.6.2.txt
|   |   ├── 1.6.3.txt
|   |   ├── 1.6.4.txt
|   |   ├── 1.6.5.txt
|   |   ├── 1.6.6.txt
|   |   ├── 1.6.7.txt
|   |   ├── 1.6.8.txt
|   |   ├── 1.6.9.txt
|   |   ├── 1.6.txt
|   |   ├── 1.7.1.txt
|   |   ├── 1.7.10.txt
|   |   ├── 1.7.11.txt
|   |   ├── 1.7.2.txt
|   |   ├── 1.7.3.txt
|   |   ├── 1.7.4.txt
|   |   ├── 1.7.5.txt
|   |   ├── 1.7.6.txt
|   |   ├── 1.7.7.txt
|   |   ├── 1.7.8.txt
|   |   ├── 1.7.9.txt
|   |   ├── 1.7.txt
|   |   ├── 1.8.1.txt
|   |   ├── 1.8.10.txt
|   |   ├── 1.8.11.txt
|   |   ├── 1.8.12.txt
|   |   ├── 1.8.13.txt
|   |   ├── 1.8.14.txt
|   |   ├── 1.8.15.txt
|   |   ├── 1.8.16.txt
|   |   ├── 1.8.17.txt
|   |   ├── 1.8.18.txt
|   |   ├── 1.8.19.txt
|   |   ├── 1.8.2.txt
|   |   ├── 1.8.3.txt
|   |   ├── 1.8.4.txt
|   |   ├── 1.8.5.txt
|   |   ├── 1.8.6.txt
|   |   ├── 1.8.7.txt
|   |   ├── 1.8.8.txt
|   |   ├── 1.8.9.txt
|   |   ├── 1.8.txt
|   |   ├── 1.9.1.txt
|   |   ├── 1.9.10.txt
|   |   ├── 1.9.11.txt
|   |   ├── 1.9.12.txt
|   |   ├── 1.9.13.txt
|   |   ├── 1.9.2.txt
|   |   ├── 1.9.3.txt
|   |   ├── 1.9.4.txt
|   |   ├── 1.9.5.txt
|   |   ├── 1.9.6.txt
|   |   ├── 1.9.7.txt
|   |   ├── 1.9.8.txt
|   |   ├── 1.9.9.txt
|   |   ├── 1.9.txt
|   |   ├── 2.0.1.txt
|   |   ├── 2.0.10.txt
|   |   ├── 2.0.11.txt
|   |   ├── 2.0.12.txt
|   |   ├── 2.0.13.txt
|   |   ├── 2.0.2.txt
|   |   ├── 2.0.3.txt
|   |   ├── 2.0.4.txt
|   |   ├── 2.0.5.txt
|   |   ├── 2.0.6.txt
|   |   ├── 2.0.7.txt
|   |   ├── 2.0.8.txt
|   |   ├── 2.0.9.txt
|   |   ├── 2.0.txt
|   |   ├── 2.1.1.txt
|   |   ├── 2.1.10.txt
|   |   ├── 2.1.11.txt
|   |   ├── 2.1.12.txt
|   |   ├── 2.1.13.txt
|   |   ├── 2.1.14.txt
|   |   ├── 2.1.15.txt
|   |   ├── 2.1.2.txt
|   |   ├── 2.1.3.txt
|   |   ├── 2.1.4.txt
|   |   ├── 2.1.5.txt
|   |   ├── 2.1.6.txt
|   |   ├── 2.1.7.txt
|   |   ├── 2.1.8.txt
|   |   ├── 2.1.9.txt
|   |   ├── 2.1.txt
|   |   ├── 2.2.1.txt
|   |   ├── 2.2.10.txt
|   |   ├── 2.2.11.txt
|   |   ├── 2.2.12.txt
|   |   ├── 2.2.13.txt
|   |   ├── 2.2.14.txt
|   |   ├── 2.2.15.txt
|   |   ├── 2.2.16.txt
|   |   ├── 2.2.17.txt
|   |   ├── 2.2.18.txt
|   |   ├── 2.2.19.txt
|   |   ├── 2.2.2.txt
|   |   ├── 2.2.20.txt
|   |   ├── 2.2.3.txt
|   |   ├── 2.2.4.txt
|   |   ├── 2.2.5.txt
|   |   ├── 2.2.6.txt
|   |   ├── 2.2.7.txt
|   |   ├── 2.2.8.txt
|   |   ├── 2.2.9.txt
|   |   ├── 2.2.txt
|   |   ├── 3.0.1.txt
|   |   ├── 3.0.10.txt
|   |   ├── 3.0.11.txt
|   |   ├── 3.0.12.txt
|   |   ├── 3.0.13.txt
|   |   ├── 3.0.14.txt
|   |   ├── 3.0.2.txt
|   |   ├── 3.0.3.txt
|   |   ├── 3.0.4.txt
|   |   ├── 3.0.5.txt
|   |   ├── 3.0.6.txt
|   |   ├── 3.0.7.txt
|   |   ├── 3.0.8.txt
|   |   ├── 3.0.9.txt
|   |   ├── 3.0.txt
|   |   ├── 3.1.1.txt
|   |   ├── 3.1.2.txt
|   |   ├── 3.1.3.txt
|   |   ├── 3.1.4.txt
|   |   ├── 3.1.5.txt
|   |   ├── 3.1.6.txt
|   |   ├── 3.1.7.txt
|   |   ├── 3.1.8.txt
|   |   ├── 3.1.txt
|   |   ├── 3.2.1.txt
|   |   ├── 3.2.txt
|   |   ├── 4.0.txt
|   |   ├── index.txt
|   |   └── security.txt
|   ├── requirements.txt
|   └── topics
|       ├── async.txt
|       ├── auth
|       |   ├── customizing.txt
|       |   ├── default.txt
|       |   ├── index.txt
|       |   └── passwords.txt
|       ├── cache.txt
|       ├── checks.txt
|       ├── class-based-views
|       |   ├── generic-display.txt
|       |   ├── generic-editing.txt
|       |   ├── index.txt
|       |   ├── intro.txt
|       |   └── mixins.txt
|       ├── conditional-view-processing.txt
|       ├── db
|       |   ├── aggregation.txt
|       |   ├── examples
|       |   |   ├── index.txt
|       |   |   ├── many_to_many.txt
|       |   |   ├── many_to_one.txt
|       |   |   └── one_to_one.txt
|       |   ├── index.txt
|       |   ├── instrumentation.txt
|       |   ├── managers.txt
|       |   ├── models.txt
|       |   ├── multi-db.txt
|       |   ├── optimization.txt
|       |   ├── queries.txt
|       |   ├── search.txt
|       |   ├── sql.txt
|       |   ├── tablespaces.txt
|       |   └── transactions.txt
|       ├── email.txt
|       ├── external-packages.txt
|       ├── files.txt
|       ├── forms
|       |   ├── formsets.txt
|       |   ├── index.txt
|       |   ├── media.txt
|       |   └── modelforms.txt
|       ├── http
|       |   ├── _images
|       |   ├── decorators.txt
|       |   ├── file-uploads.txt
|       |   ├── generic-views.txt
|       |   ├── index.txt
|       |   ├── middleware.txt
|       |   ├── sessions.txt
|       |   ├── shortcuts.txt
|       |   ├── urls.txt
|       |   └── views.txt
|       ├── i18n
|       |   ├── formatting.txt
|       |   ├── index.txt
|       |   ├── timezones.txt
|       |   └── translation.txt
|       ├── index.txt
|       ├── install.txt
|       ├── logging.txt
|       ├── migrations.txt
|       ├── pagination.txt
|       ├── performance.txt
|       ├── security.txt
|       ├── serialization.txt
|       ├── settings.txt
|       ├── signals.txt
|       ├── signing.txt
|       ├── templates.txt
|       └── testing
|           ├── _images
|           ├── advanced.txt
|           ├── index.txt
|           ├── overview.txt
|           └── tools.txt
├── extras
├── js_tests
|   ├── admin
|   |   ├── DateTimeShortcuts.test.js
|   |   ├── SelectBox.test.js
|   |   ├── SelectFilter2.test.js
|   |   ├── URLify.test.js
|   |   ├── actions.test.js
|   |   ├── core.test.js
|   |   ├── inlines.test.js
|   |   ├── jsi18n-mocks.test.js
|   |   └── navigation.test.js
|   ├── gis
|   |   └── mapwidget.test.js
|   └── tests.html
├── scripts
|   ├── manage_translations.py
|   └── rpm-install.sh
├── setup.py
└── tests
    ├── README.rst
    ├── absolute_url_overrides
    |   ├── __init__.py
    |   └── tests.py
    ├── admin_autodiscover
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_changelist
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_date_hierarchy.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_checks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_custom_urls
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_default_site
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── sites.py
    |   └── tests.py
    ├── admin_docs
    |   ├── __init__.py
    |   ├── evilfile.txt
    |   ├── models.py
    |   ├── namespace_urls.py
    |   ├── test_middleware.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_filters
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_inlines
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_templates.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_registration
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── admin_scripts
    |   ├── __init__.py
    |   ├── another_app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_raising_messages
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_raising_warning
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app_waiting_migration
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── models.py
    |   ├── app_with_import
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── broken_app
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── complex_app
    |   |   ├── __init__.py
    |   |   ├── admin
    |   |   |   ├── __init__.py
    |   |   |   └── foo.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models
    |   |       ├── __init__.py
    |   |       ├── bar.py
    |   |       └── foo.py
    |   ├── configured_dynamic_settings_manage.py
    |   ├── configured_settings_manage.py
    |   ├── custom_templates
    |   |   ├── app_template
    |   |   |   ├── __init__.py
    |   |   |   └── api.py
    |   |   └── project_template
    |   |       ├── additional_dir
    |   |       ├── project_name
    |   |       └── ticket-18091-non-ascii-template.txt
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       ├── app_command.py
    |   |       ├── base_command.py
    |   |       ├── custom_startproject.py
    |   |       ├── label_command.py
    |   |       └── noargs_command.py
    |   ├── simple_app
    |   |   ├── __init__.py
    |   |   ├── management
    |   |   |   ├── __init__.py
    |   |   |   └── commands
    |   |   └── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_utils
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── test_logentry.py
    |   ├── tests.py
    |   └── urls.py
    ├── admin_views
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── custom_has_permission_admin.py
    |   ├── customadmin.py
    |   ├── forms.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── admin
    |   |   |   ├── admin_views
    |   |   |   └── base_site.html
    |   |   └── custom_filter_template.html
    |   ├── test_actions.py
    |   ├── test_adminsite.py
    |   ├── test_autocomplete_view.py
    |   ├── test_forms.py
    |   ├── test_history_view.py
    |   ├── test_multidb.py
    |   ├── test_nav_sidebar.py
    |   ├── test_templatetags.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── admin_widgets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autocomplete_widget.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── widgetadmin.py
    ├── aggregation
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_filter_argument.py
    |   └── tests.py
    ├── aggregation_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── annotations
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── app_loading
    |   ├── __init__.py
    |   ├── eggs
    |   ├── not_installed
    |   |   ├── __init__.py
    |   |   └── models.py
    |   └── tests.py
    ├── apps
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── explicit_default_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_empty_apps
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── explicit_default_config_mismatch_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── not_apps.py
    |   ├── explicit_default_config_without_apps
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── namespace_package_base
    |   |   └── nsapp
    |   |       └── apps.py
    |   ├── namespace_package_other_base
    |   |   └── nsapp
    |   ├── no_config_app
    |   |   └── __init__.py
    |   ├── one_config_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── tests.py
    |   ├── two_configs_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   ├── two_configs_one_default_app
    |   |   ├── __init__.py
    |   |   └── apps.py
    |   └── two_default_configs_app
    |       ├── __init__.py
    |       └── apps.py
    ├── asgi
    |   ├── __init__.py
    |   ├── project
    |   |   └── static
    |   |       └── file.txt
    |   ├── tests.py
    |   └── urls.py
    ├── async
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── auth_tests
    |   ├── __init__.py
    |   ├── backend_alias.py
    |   ├── client.py
    |   ├── common-passwords-custom.txt
    |   ├── fixtures
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── custom_permissions.py
    |   |   ├── custom_user.py
    |   |   ├── invalid_models.py
    |   |   ├── is_active.py
    |   |   ├── minimal.py
    |   |   ├── no_password.py
    |   |   ├── proxy.py
    |   |   ├── uuid_pk.py
    |   |   ├── with_custom_email_field.py
    |   |   ├── with_foreign_key.py
    |   |   ├── with_integer_username.py
    |   |   ├── with_last_login_attr.py
    |   |   └── with_many_to_many.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── context_processors
    |   |   |   ├── auth_attrs_access.html
    |   |   |   ├── auth_attrs_messages.html
    |   |   |   ├── auth_attrs_no_access.html
    |   |   |   ├── auth_attrs_perm_in_perms.html
    |   |   |   ├── auth_attrs_perms.html
    |   |   |   ├── auth_attrs_test_access.html
    |   |   |   └── auth_attrs_user.html
    |   |   └── registration
    |   |       ├── html_password_reset_email.html
    |   |       ├── logged_out.html
    |   |       ├── login.html
    |   |       ├── password_change_form.html
    |   |       ├── password_reset_complete.html
    |   |       ├── password_reset_confirm.html
    |   |       ├── password_reset_done.html
    |   |       ├── password_reset_email.html
    |   |       ├── password_reset_form.html
    |   |       └── password_reset_subject.txt
    |   ├── test_admin_multidb.py
    |   ├── test_auth_backends.py
    |   ├── test_basic.py
    |   ├── test_checks.py
    |   ├── test_context_processors.py
    |   ├── test_decorators.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_hashers.py
    |   ├── test_management.py
    |   ├── test_middleware.py
    |   ├── test_migrations.py
    |   ├── test_mixins.py
    |   ├── test_models.py
    |   ├── test_remote_user.py
    |   ├── test_signals.py
    |   ├── test_templates.py
    |   ├── test_tokens.py
    |   ├── test_validators.py
    |   ├── test_views.py
    |   ├── urls.py
    |   ├── urls_admin.py
    |   └── urls_custom_user_admin.py
    ├── backends
    |   ├── __init__.py
    |   ├── base
    |   |   ├── __init__.py
    |   |   ├── app_unmigrated
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── test_base.py
    |   |   ├── test_client.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── test_schema.py
    |   ├── models.py
    |   ├── mysql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_schema.py
    |   |   └── tests.py
    |   ├── oracle
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── postgresql
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   ├── test_server_side_cursors.py
    |   |   └── tests.py
    |   ├── sqlite
    |   |   ├── __init__.py
    |   |   ├── test_creation.py
    |   |   ├── test_features.py
    |   |   ├── test_introspection.py
    |   |   ├── test_operations.py
    |   |   └── tests.py
    |   ├── test_ddl_references.py
    |   ├── test_utils.py
    |   └── tests.py
    ├── base
    |   ├── __init__.py
    |   └── models.py
    ├── bash_completion
    |   ├── __init__.py
    |   ├── management
    |   |   ├── __init__.py
    |   |   └── commands
    |   |       ├── __init__.py
    |   |       └── test_command.py
    |   └── tests.py
    ├── basic
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── builtin_server
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── bulk_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── cache
    |   ├── __init__.py
    |   ├── closeable_cache.py
    |   ├── liberal_backend.py
    |   ├── models.py
    |   └── tests.py
    ├── check_framework
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models.py
    |   ├── test_4_0_compatibility.py
    |   ├── test_async_checks.py
    |   ├── test_caches.py
    |   ├── test_database.py
    |   ├── test_files.py
    |   ├── test_model_checks.py
    |   ├── test_model_field_deprecation.py
    |   ├── test_multi_db.py
    |   ├── test_security.py
    |   ├── test_templates.py
    |   ├── test_translation.py
    |   ├── test_urls.py
    |   ├── tests.py
    |   └── urls
    |       ├── __init__.py
    |       ├── bad_class_based_error_handlers.py
    |       ├── bad_error_handlers_invalid_path.py
    |       ├── bad_function_based_error_handlers.py
    |       ├── beginning_with_slash.py
    |       ├── contains_tuple.py
    |       ├── good_class_based_error_handlers.py
    |       ├── good_function_based_error_handlers.py
    |       ├── include_contains_tuple.py
    |       ├── include_with_dollar.py
    |       ├── name_with_colon.py
    |       ├── no_warnings.py
    |       ├── no_warnings_i18n.py
    |       ├── non_unique_namespaces.py
    |       ├── path_compatibility
    |       |   ├── __init__.py
    |       |   ├── beginning_with_caret.py
    |       |   ├── contains_re_named_group.py
    |       |   └── ending_with_dollar.py
    |       ├── unique_namespaces.py
    |       └── warning_in_include.py
    ├── conditional_processing
    |   ├── __init__.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── constraints
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── contenttypes_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── operations_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_rename_foo.py
    |   |   └── __init__.py
    |   ├── test_checks.py
    |   ├── test_fields.py
    |   ├── test_management.py
    |   ├── test_models.py
    |   ├── test_operations.py
    |   ├── test_order_with_respect_to.py
    |   ├── test_views.py
    |   └── urls.py
    ├── context_processors
    |   ├── __init__.py
    |   ├── models.py
    |   ├── templates
    |   |   └── context_processors
    |   |       ├── debug.html
    |   |       └── request_attrs.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── csrf_tests
    |   ├── __init__.py
    |   ├── csrf_token_error_handler_urls.py
    |   ├── test_context_processor.py
    |   ├── tests.py
    |   └── views.py
    ├── custom_columns
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_managers
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_methods
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── custom_migration_operations
    |   ├── __init__.py
    |   ├── more_operations.py
    |   └── operations.py
    ├── custom_pk
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   └── tests.py
    ├── datatypes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── dates
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── datetimes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── db_functions
    |   ├── __init__.py
    |   ├── comparison
    |   |   ├── __init__.py
    |   |   ├── test_cast.py
    |   |   ├── test_coalesce.py
    |   |   ├── test_collate.py
    |   |   ├── test_greatest.py
    |   |   ├── test_json_object.py
    |   |   ├── test_least.py
    |   |   └── test_nullif.py
    |   ├── datetime
    |   |   ├── __init__.py
    |   |   ├── test_extract_trunc.py
    |   |   └── test_now.py
    |   ├── math
    |   |   ├── __init__.py
    |   |   ├── test_abs.py
    |   |   ├── test_acos.py
    |   |   ├── test_asin.py
    |   |   ├── test_atan.py
    |   |   ├── test_atan2.py
    |   |   ├── test_ceil.py
    |   |   ├── test_cos.py
    |   |   ├── test_cot.py
    |   |   ├── test_degrees.py
    |   |   ├── test_exp.py
    |   |   ├── test_floor.py
    |   |   ├── test_ln.py
    |   |   ├── test_log.py
    |   |   ├── test_mod.py
    |   |   ├── test_pi.py
    |   |   ├── test_power.py
    |   |   ├── test_radians.py
    |   |   ├── test_random.py
    |   |   ├── test_round.py
    |   |   ├── test_sign.py
    |   |   ├── test_sin.py
    |   |   ├── test_sqrt.py
    |   |   └── test_tan.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── text
    |   |   ├── __init__.py
    |   |   ├── test_chr.py
    |   |   ├── test_concat.py
    |   |   ├── test_left.py
    |   |   ├── test_length.py
    |   |   ├── test_lower.py
    |   |   ├── test_md5.py
    |   |   ├── test_ord.py
    |   |   ├── test_pad.py
    |   |   ├── test_repeat.py
    |   |   ├── test_replace.py
    |   |   ├── test_reverse.py
    |   |   ├── test_right.py
    |   |   ├── test_sha1.py
    |   |   ├── test_sha224.py
    |   |   ├── test_sha256.py
    |   |   ├── test_sha384.py
    |   |   ├── test_sha512.py
    |   |   ├── test_strindex.py
    |   |   ├── test_substr.py
    |   |   ├── test_trim.py
    |   |   └── test_upper.py
    |   └── window
    |       ├── __init__.py
    |       └── test_validation.py
    ├── db_typecasts
    |   ├── __init__.py
    |   └── tests.py
    ├── db_utils
    |   ├── __init__.py
    |   └── tests.py
    ├── dbshell
    |   ├── __init__.py
    |   ├── fake_client.py
    |   ├── test_mysql.py
    |   ├── test_oracle.py
    |   ├── test_postgresql.py
    |   ├── test_sqlite.py
    |   └── tests.py
    ├── decorators
    |   ├── __init__.py
    |   └── tests.py
    ├── defer
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── defer_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── delete_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── deprecation
    |   ├── __init__.py
    |   ├── test_middleware_mixin.py
    |   └── tests.py
    ├── dispatch
    |   ├── __init__.py
    |   └── tests.py
    ├── distinct_on_fields
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── empty
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_models
    |   |   └── __init__.py
    |   └── tests.py
    ├── empty_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── test_commands.py
    ├── expressions
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_queryset_values.py
    |   └── tests.py
    ├── expressions_case
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── expressions_window
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── extra_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_deconstruction
    |   ├── __init__.py
    |   └── tests.py
    ├── field_defaults
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── field_subclassing
    |   ├── __init__.py
    |   ├── fields.py
    |   └── tests.py
    ├── file_storage
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_generate_filename.py
    |   ├── tests.py
    |   └── urls.py
    ├── file_uploads
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   ├── uploadhandler.py
    |   ├── urls.py
    |   └── views.py
    ├── files
    |   ├── __init__.py
    |   └── tests.py
    ├── filtered_relation
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── fixtures
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── fixture2.xml
    |   |   ├── fixture3.xml
    |   |   ├── fixture7.xml
    |   |   └── fixture9.xml
    |   ├── models.py
    |   └── tests.py
    ├── fixtures_model_package
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models
    |   |   └── __init__.py
    |   └── tests.py
    ├── fixtures_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   |   ├── animal.xml
    |   |   ├── bad_fixture2.xml
    |   |   ├── nk-inheritance2.xml
    |   |   ├── non_natural_2.xml
    |   |   ├── pretty.xml
    |   |   └── sequence_extra_xml.xml
    |   ├── fixtures_1
    |   |   └── inner
    |   ├── fixtures_2
    |   ├── models.py
    |   └── tests.py
    ├── flatpages_tests
    |   ├── __init__.py
    |   ├── absolute_urls.py
    |   ├── no_slash_urls.py
    |   ├── settings.py
    |   ├── templates
    |   |   ├── flatpages
    |   |   |   └── default.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_csrf.py
    |   ├── test_forms.py
    |   ├── test_middleware.py
    |   ├── test_models.py
    |   ├── test_sitemaps.py
    |   ├── test_templatetags.py
    |   ├── test_views.py
    |   └── urls.py
    ├── force_insert_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── foreign_object
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   ├── customers.py
    |   |   ├── empty_join.py
    |   |   └── person.py
    |   ├── test_agnostic_order_trimjoin.py
    |   ├── test_empty_join.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── forms_tests
    |   ├── __init__.py
    |   ├── field_tests
    |   |   ├── __init__.py
    |   |   ├── filepathfield_test_dir
    |   |   |   ├── __init__.py
    |   |   |   ├── a.py
    |   |   |   ├── ab.py
    |   |   |   ├── b.py
    |   |   |   ├── c
    |   |   |   ├── h
    |   |   |   └── j
    |   |   ├── test_base.py
    |   |   ├── test_booleanfield.py
    |   |   ├── test_charfield.py
    |   |   ├── test_choicefield.py
    |   |   ├── test_combofield.py
    |   |   ├── test_datefield.py
    |   |   ├── test_datetimefield.py
    |   |   ├── test_decimalfield.py
    |   |   ├── test_durationfield.py
    |   |   ├── test_emailfield.py
    |   |   ├── test_filefield.py
    |   |   ├── test_filepathfield.py
    |   |   ├── test_floatfield.py
    |   |   ├── test_genericipaddressfield.py
    |   |   ├── test_imagefield.py
    |   |   ├── test_integerfield.py
    |   |   ├── test_jsonfield.py
    |   |   ├── test_multiplechoicefield.py
    |   |   ├── test_multivaluefield.py
    |   |   ├── test_nullbooleanfield.py
    |   |   ├── test_regexfield.py
    |   |   ├── test_slugfield.py
    |   |   ├── test_splitdatetimefield.py
    |   |   ├── test_timefield.py
    |   |   ├── test_typedchoicefield.py
    |   |   ├── test_typedmultiplechoicefield.py
    |   |   ├── test_urlfield.py
    |   |   └── test_uuidfield.py
    |   ├── jinja2
    |   |   └── forms_tests
    |   |       └── custom_widget.html
    |   ├── models.py
    |   ├── templates
    |   |   └── forms_tests
    |   |       ├── article_form.html
    |   |       └── custom_widget.html
    |   ├── tests
    |   |   ├── __init__.py
    |   |   ├── filepath_test_files
    |   |   |   ├── directory
    |   |   |   └── real-text-file.txt
    |   |   ├── test_error_messages.py
    |   |   ├── test_forms.py
    |   |   ├── test_formsets.py
    |   |   ├── test_i18n.py
    |   |   ├── test_input_formats.py
    |   |   ├── test_media.py
    |   |   ├── test_renderers.py
    |   |   ├── test_utils.py
    |   |   ├── test_validators.py
    |   |   ├── test_widgets.py
    |   |   └── tests.py
    |   ├── urls.py
    |   ├── views.py
    |   └── widget_tests
    |       ├── __init__.py
    |       ├── base.py
    |       ├── test_checkboxinput.py
    |       ├── test_checkboxselectmultiple.py
    |       ├── test_clearablefileinput.py
    |       ├── test_dateinput.py
    |       ├── test_datetimeinput.py
    |       ├── test_fileinput.py
    |       ├── test_hiddeninput.py
    |       ├── test_input.py
    |       ├── test_multiplehiddeninput.py
    |       ├── test_multiwidget.py
    |       ├── test_nullbooleanselect.py
    |       ├── test_numberinput.py
    |       ├── test_passwordinput.py
    |       ├── test_radioselect.py
    |       ├── test_select.py
    |       ├── test_selectdatewidget.py
    |       ├── test_selectmultiple.py
    |       ├── test_splitdatetimewidget.py
    |       ├── test_splithiddendatetimewidget.py
    |       ├── test_textarea.py
    |       ├── test_textinput.py
    |       ├── test_timeinput.py
    |       └── test_widget.py
    ├── from_db_value
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_inline_admin
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── generic_relations
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_forms.py
    |   └── tests.py
    ├── generic_relations_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── generic_views
    |   ├── __init__.py
    |   ├── forms.py
    |   ├── jinja2
    |   |   └── generic_views
    |   |       └── using.html
    |   ├── models.py
    |   ├── templates
    |   |   ├── generic_views
    |   |   |   ├── about.html
    |   |   |   ├── apple_detail.html
    |   |   |   ├── artist_detail.html
    |   |   |   ├── artist_form.html
    |   |   |   ├── author_confirm_delete.html
    |   |   |   ├── author_detail.html
    |   |   |   ├── author_form.html
    |   |   |   ├── author_list.html
    |   |   |   ├── author_objects.html
    |   |   |   ├── author_view.html
    |   |   |   ├── book_archive.html
    |   |   |   ├── book_archive_day.html
    |   |   |   ├── book_archive_month.html
    |   |   |   ├── book_archive_week.html
    |   |   |   ├── book_archive_year.html
    |   |   |   ├── book_detail.html
    |   |   |   ├── book_list.html
    |   |   |   ├── confirm_delete.html
    |   |   |   ├── detail.html
    |   |   |   ├── form.html
    |   |   |   ├── list.html
    |   |   |   ├── page_template.html
    |   |   |   ├── robots.txt
    |   |   |   └── using.html
    |   |   └── registration
    |   |       └── login.html
    |   ├── test_base.py
    |   ├── test_dates.py
    |   ├── test_detail.py
    |   ├── test_edit.py
    |   ├── test_list.py
    |   ├── urls.py
    |   └── views.py
    ├── get_earliest_or_latest
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_object_or_404
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── get_or_create
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── gis_tests
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── data
    |   |   ├── __init__.py
    |   |   ├── ch-city
    |   |   ├── cities
    |   |   ├── counties
    |   |   ├── gas_lines
    |   |   ├── has_nulls
    |   |   ├── interstates
    |   |   ├── invalid
    |   |   ├── rasters
    |   |   |   ├── __init__.py
    |   |   |   ├── raster.numpy.txt
    |   |   |   └── textrasters.py
    |   |   ├── test_point
    |   |   ├── test_poly
    |   |   └── test_vrt
    |   ├── distapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── gdal_tests
    |   |   ├── __init__.py
    |   |   ├── test_driver.py
    |   |   ├── test_ds.py
    |   |   ├── test_envelope.py
    |   |   ├── test_geom.py
    |   |   ├── test_raster.py
    |   |   ├── test_srs.py
    |   |   └── tests.py
    |   ├── geo3d
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── views.py
    |   ├── geoadmin
    |   |   ├── __init__.py
    |   |   ├── admin.py
    |   |   ├── models.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geoapp
    |   |   ├── __init__.py
    |   |   ├── feeds.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   ├── sitemaps.py
    |   |   ├── test_expressions.py
    |   |   ├── test_feeds.py
    |   |   ├── test_functions.py
    |   |   ├── test_indexes.py
    |   |   ├── test_regress.py
    |   |   ├── test_serializers.py
    |   |   ├── test_sitemaps.py
    |   |   ├── tests.py
    |   |   └── urls.py
    |   ├── geogapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── geos_tests
    |   |   ├── __init__.py
    |   |   ├── test_coordseq.py
    |   |   ├── test_geos.py
    |   |   ├── test_geos_mutation.py
    |   |   ├── test_io.py
    |   |   └── test_mutable_list.py
    |   ├── gis_migrations
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_create_models.py
    |   |   |   └── __init__.py
    |   |   ├── test_commands.py
    |   |   └── test_operations.py
    |   ├── inspectapp
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── layermap
    |   |   ├── __init__.py
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── models.py
    |   ├── rasterapp
    |   |   ├── __init__.py
    |   |   ├── migrations
    |   |   |   ├── 0001_setup_extensions.py
    |   |   |   ├── 0002_rastermodels.py
    |   |   |   └── __init__.py
    |   |   ├── models.py
    |   |   └── test_rasterfield.py
    |   ├── relatedapp
    |   |   ├── __init__.py
    |   |   ├── fixtures
    |   |   ├── models.py
    |   |   └── tests.py
    |   ├── test_data.py
    |   ├── test_fields.py
    |   ├── test_geoforms.py
    |   ├── test_geoip2.py
    |   ├── test_gis_tests_utils.py
    |   ├── test_measure.py
    |   ├── test_ptr.py
    |   ├── test_spatialrefsys.py
    |   ├── tests.py
    |   └── utils.py
    ├── handlers
    |   ├── __init__.py
    |   ├── templates
    |   |   └── test_handler.html
    |   ├── test_exception.py
    |   ├── tests.py
    |   ├── tests_custom_error_handlers.py
    |   ├── urls.py
    |   └── views.py
    ├── httpwrappers
    |   ├── __init__.py
    |   ├── abc.txt
    |   └── tests.py
    ├── humanize_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── i18n
    |   ├── __init__.py
    |   ├── commands
    |   |   ├── __init__.py
    |   |   ├── app_with_locale
    |   |   |   └── locale
    |   |   ├── ignore_dir
    |   |   |   └── ignored.html
    |   |   ├── javascript.js
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── es_AR
    |   |   |   ├── fr
    |   |   |   ├── hr
    |   |   |   ├── ja
    |   |   |   ├── ko
    |   |   |   ├── pt_BR
    |   |   |   ├── ru
    |   |   |   └── xxx
    |   |   ├── media_root
    |   |   |   └── media_ignored.html
    |   |   ├── someapp
    |   |   |   └── static
    |   |   ├── static
    |   |   |   ├── javascript_ignored.js
    |   |   |   └── static_ignored.html
    |   |   └── templates
    |   |       ├── empty.html
    |   |       ├── subdir
    |   |       ├── test.html
    |   |       └── xxx_ignored.html
    |   ├── contenttypes
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   └── fr
    |   |   └── tests.py
    |   ├── exclude
    |   |   ├── __init__.py
    |   |   └── canned_locale
    |   |       ├── en
    |   |       ├── fr
    |   |       └── it
    |   ├── forms.py
    |   ├── loading
    |   |   ├── en
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_AU
    |   |   |   └── LC_MESSAGES
    |   |   ├── en_CA
    |   |   |   └── LC_MESSAGES
    |   |   └── en_NZ
    |   |       └── LC_MESSAGES
    |   ├── loading_app
    |   |   ├── __init__.py
    |   |   ├── apps.py
    |   |   └── locale
    |   |       └── en
    |   ├── models.py
    |   ├── other
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       ├── de
    |   |       └── fr
    |   ├── other2
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── __init__.py
    |   |       └── de
    |   ├── patterns
    |   |   ├── __init__.py
    |   |   ├── locale
    |   |   |   ├── en
    |   |   |   ├── nl
    |   |   |   └── pt_BR
    |   |   ├── templates
    |   |   |   ├── 404.html
    |   |   |   └── dummy.html
    |   |   ├── tests.py
    |   |   └── urls
    |   |       ├── __init__.py
    |   |       ├── default.py
    |   |       ├── disabled.py
    |   |       ├── included.py
    |   |       ├── namespace.py
    |   |       ├── path_unused.py
    |   |       ├── wrong.py
    |   |       └── wrong_namespace.py
    |   ├── project_dir
    |   |   ├── __init__.py
    |   |   ├── app_no_locale
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── app_with_locale
    |   |   |   ├── __init__.py
    |   |   |   ├── locale
    |   |   |   └── models.py
    |   |   └── project_locale
    |   ├── resolution
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       └── de
    |   ├── sampleproject
    |   |   ├── locale
    |   |   |   └── fr
    |   |   ├── manage.py
    |   |   ├── sampleproject
    |   |   |   ├── __init__.py
    |   |   |   └── settings.py
    |   |   ├── templates
    |   |   |   └── percents.html
    |   |   └── update_catalogs.py
    |   ├── territorial_fallback
    |   |   ├── __init__.py
    |   |   └── locale
    |   |       ├── de
    |   |       └── de_DE
    |   ├── test_compilation.py
    |   ├── test_extraction.py
    |   ├── test_management.py
    |   ├── test_percents.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_default_unprefixed.py
    |   └── utils.py
    ├── import_error_package
    |   └── __init__.py
    ├── indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inline_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── inspectdb
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── introspection
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── invalid_models_tests
    |   ├── __init__.py
    |   ├── test_backend_specific.py
    |   ├── test_custom_fields.py
    |   ├── test_deprecated_fields.py
    |   ├── test_models.py
    |   ├── test_ordinary_fields.py
    |   └── test_relative_fields.py
    ├── known_related_objects
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── logging_tests
    |   ├── __init__.py
    |   ├── logconfig.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── urls_i18n.py
    |   └── views.py
    ├── lookup
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_decimalfield.py
    |   ├── test_lookups.py
    |   ├── test_timefield.py
    |   └── tests.py
    ├── m2m_and_m2o
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_intermediary
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_multiple
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── m2m_through_regress
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── test_multitable.py
    |   └── tests.py
    ├── m2o_recursive
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── mail
    |   ├── __init__.py
    |   ├── attachments
    |   |   ├── file.txt
    |   |   └── file_png.txt
    |   ├── custombackend.py
    |   ├── test_sendtestemail.py
    |   └── tests.py
    ├── managers_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_many
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── many_to_one_null
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── max_lengths
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── messages_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── test_api.py
    |   ├── test_cookie.py
    |   ├── test_fallback.py
    |   ├── test_middleware.py
    |   ├── test_mixins.py
    |   ├── test_session.py
    |   ├── tests.py
    |   └── urls.py
    ├── middleware
    |   ├── __init__.py
    |   ├── cond_get_urls.py
    |   ├── extra_urls.py
    |   ├── test_security.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── middleware_exceptions
    |   ├── __init__.py
    |   ├── middleware.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── migrate_signals
    |   ├── __init__.py
    |   ├── custom_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migration_test_data_persistence
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_add_book.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── migrations
    |   ├── __init__.py
    |   ├── deprecated_field_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_remove_ipaddressfield_ip.py
    |   |   └── __init__.py
    |   ├── faulty_migrations
    |   |   ├── __init__.py
    |   |   ├── file.py
    |   |   └── namespace
    |   |       └── foo
    |   ├── migrations_test_apps
    |   |   ├── __init__.py
    |   |   ├── alter_fk
    |   |   |   ├── __init__.py
    |   |   |   ├── author_app
    |   |   |   └── book_app
    |   |   ├── conflicting_app_with_dependencies
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── lookuperror_a
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_b
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── lookuperror_c
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── migrated_unapplied_app
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── mutate_state_a
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── mutate_state_b
    |   |   |   ├── __init__.py
    |   |   |   └── migrations
    |   |   ├── normal
    |   |   |   └── __init__.py
    |   |   ├── unmigrated_app
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_simple
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unmigrated_app_syncdb
    |   |   |   ├── __init__.py
    |   |   |   └── models.py
    |   |   ├── unspecified_app_with_conflict
    |   |   |   ├── __init__.py
    |   |   |   ├── migrations
    |   |   |   └── models.py
    |   |   ├── with_package_model
    |   |   |   ├── __init__.py
    |   |   |   └── models
    |   |   └── without_init_file
    |   |       ├── __init__.py
    |   |       └── migrations
    |   ├── models.py
    |   ├── related_models_app
    |   |   └── __init__.py
    |   ├── routers.py
    |   ├── test_add_many_to_many_field_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_initial.py
    |   |   └── __init__.py
    |   ├── test_auto_now_add
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_autodetector.py
    |   ├── test_base.py
    |   ├── test_commands.py
    |   ├── test_deprecated_fields.py
    |   ├── test_exceptions.py
    |   ├── test_executor.py
    |   ├── test_fake_initial_case_insensitive
    |   |   ├── fake_initial
    |   |   |   ├── 0001_initial.py
    |   |   |   └── __init__.py
    |   |   └── initial
    |   |       ├── 0001_initial.py
    |   |       └── __init__.py
    |   ├── test_graph.py
    |   ├── test_loader.py
    |   ├── test_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_atomic_operation
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_backwards_deps_1
    |   |   ├── 0001_initial.py
    |   |   └── 0002_second.py
    |   ├── test_migrations_bad_pyc
    |   |   └── __init__.py
    |   ├── test_migrations_clashing_prefix
    |   |   ├── __init__.py
    |   |   ├── a.py
    |   |   └── ab.py
    |   ├── test_migrations_conflict
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_conflict_long_name
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second_migration_with_long_name.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_custom_user
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_empty
    |   |   └── __init__.py
    |   ├── test_migrations_fake_split_initial
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_first
    |   |   ├── __init__.py
    |   |   ├── second.py
    |   |   └── thefirst.py
    |   ├── test_migrations_initial_false
    |   |   ├── 0001_not_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_namespace_package
    |   |   └── 0001_initial.py
    |   ├── test_migrations_no_ancestor
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_conflicting_second.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_changes
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_default
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_no_init
    |   ├── test_migrations_no_operations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_non_atomic
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_order
    |   |   ├── 0001.py
    |   |   └── __init__.py
    |   ├── test_migrations_plan
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   ├── 0004_fourth.py
    |   |   ├── 0005_fifth.py
    |   |   └── __init__.py
    |   ├── test_migrations_private
    |   |   ├── .util.py
    |   |   ├── 0001_initial.py
    |   |   ├── __init__.py
    |   |   ├── _util.py
    |   |   └── ~util.py
    |   ├── test_migrations_run_before
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 4_auto.py
    |   |   ├── 5_auto.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_complex_multi_apps
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_squashed_erroneous
    |   |   ├── 1_auto.py
    |   |   ├── 2_auto.py
    |   |   ├── 3_squashed_5.py
    |   |   ├── 6_auto.py
    |   |   ├── 7_auto.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_extra
    |   |   ├── 0001_initial.py
    |   |   ├── 0001_squashed_0002.py
    |   |   ├── 0002_second.py
    |   |   ├── 0003_third.py
    |   |   └── __init__.py
    |   ├── test_migrations_squashed_ref_squashed
    |   |   ├── __init__.py
    |   |   ├── app1
    |   |   |   ├── 1_auto.py
    |   |   |   ├── 2_auto.py
    |   |   |   ├── 2_squashed_3.py
    |   |   |   ├── 3_auto.py
    |   |   |   ├── 4_auto.py
    |   |   |   └── __init__.py
    |   |   └── app2
    |   |       ├── 1_auto.py
    |   |       ├── 1_squashed_2.py
    |   |       ├── 2_auto.py
    |   |       └── __init__.py
    |   ├── test_migrations_unmigdep
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_multidb.py
    |   ├── test_operations.py
    |   ├── test_optimizer.py
    |   ├── test_questioner.py
    |   ├── test_state.py
    |   └── test_writer.py
    ├── migrations2
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_migrations_2
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── test_migrations_2_first
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_second.py
    |   |   └── __init__.py
    |   └── test_migrations_2_no_deps
    |       ├── 0001_initial.py
    |       └── __init__.py
    ├── model_enums
    |   ├── __init__.py
    |   └── tests.py
    ├── model_fields
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_autofield.py
    |   ├── test_binaryfield.py
    |   ├── test_booleanfield.py
    |   ├── test_charfield.py
    |   ├── test_datetimefield.py
    |   ├── test_decimalfield.py
    |   ├── test_durationfield.py
    |   ├── test_field_flags.py
    |   ├── test_filefield.py
    |   ├── test_filepathfield.py
    |   ├── test_floatfield.py
    |   ├── test_foreignkey.py
    |   ├── test_genericipaddressfield.py
    |   ├── test_imagefield.py
    |   ├── test_integerfield.py
    |   ├── test_jsonfield.py
    |   ├── test_manytomanyfield.py
    |   ├── test_promises.py
    |   ├── test_slugfield.py
    |   ├── test_textfield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_forms
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_modelchoicefield.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── model_formsets_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_indexes
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_inheritance
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_abstract_inheritance.py
    |   └── tests.py
    ├── model_inheritance_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── model_meta
    |   ├── __init__.py
    |   ├── models.py
    |   ├── results.py
    |   └── tests.py
    ├── model_options
    |   ├── __init__.py
    |   ├── apps.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── default_related_name.py
    |   |   └── tablespaces.py
    |   ├── test_default_pk.py
    |   ├── test_default_related_name.py
    |   └── test_tablespaces.py
    ├── model_package
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── article.py
    |   |   └── publication.py
    |   └── tests.py
    ├── model_regress
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_pickle.py
    |   ├── test_state.py
    |   └── tests.py
    ├── modeladmin
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_actions.py
    |   ├── test_checks.py
    |   └── tests.py
    ├── multiple_database
    |   ├── __init__.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── routers.py
    |   └── tests.py
    ├── mutually_referential
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── nested_foreign_keys
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── no_models
    |   ├── __init__.py
    |   └── tests.py
    ├── null_fk
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_fk_ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── null_queries
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── one_to_one
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── or_lookups
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── order_with_respect_to
    |   ├── __init__.py
    |   ├── base_tests.py
    |   ├── models.py
    |   └── tests.py
    ├── ordering
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── pagination
    |   ├── __init__.py
    |   ├── custom.py
    |   ├── models.py
    |   └── tests.py
    ├── postgres_tests
    |   ├── __init__.py
    |   ├── array_default_migrations
    |   |   ├── 0001_initial.py
    |   |   ├── 0002_integerarraymodel_field_2.py
    |   |   └── __init__.py
    |   ├── array_index_migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── fields.py
    |   ├── integration_settings.py
    |   ├── migrations
    |   |   ├── 0001_setup_extensions.py
    |   |   ├── 0002_create_test_models.py
    |   |   └── __init__.py
    |   ├── models.py
    |   ├── test_aggregates.py
    |   ├── test_apps.py
    |   ├── test_array.py
    |   ├── test_bulk_update.py
    |   ├── test_citext.py
    |   ├── test_constraints.py
    |   ├── test_functions.py
    |   ├── test_hstore.py
    |   ├── test_indexes.py
    |   ├── test_integration.py
    |   ├── test_introspection.py
    |   ├── test_operations.py
    |   ├── test_ranges.py
    |   ├── test_search.py
    |   ├── test_signals.py
    |   ├── test_trigram.py
    |   └── test_unaccent.py
    ├── prefetch_related
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_prefetch_related_objects.py
    |   ├── test_uuid.py
    |   └── tests.py
    ├── project_template
    |   ├── __init__.py
    |   ├── test_settings.py
    |   ├── urls.py
    |   └── views.py
    ├── properties
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_model_inheritance
    |   ├── __init__.py
    |   ├── app1
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── app2
    |   |   ├── __init__.py
    |   |   └── models.py
    |   ├── models.py
    |   └── tests.py
    ├── proxy_models
    |   ├── __init__.py
    |   ├── admin.py
    |   ├── fixtures
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── queries
    |   ├── __init__.py
    |   ├── models.py
    |   ├── test_bulk_update.py
    |   ├── test_contains.py
    |   ├── test_db_returning.py
    |   ├── test_explain.py
    |   ├── test_iterator.py
    |   ├── test_q.py
    |   ├── test_qs_combinators.py
    |   ├── test_query.py
    |   └── tests.py
    ├── queryset_pickle
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── raw_query
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── redirects_tests
    |   ├── __init__.py
    |   ├── tests.py
    |   └── urls.py
    ├── requests
    |   ├── __init__.py
    |   ├── test_accept_header.py
    |   ├── test_data_upload_settings.py
    |   └── tests.py
    ├── requirements
    |   ├── mysql.txt
    |   ├── oracle.txt
    |   ├── postgres.txt
    |   └── py3.txt
    ├── reserved_names
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── resolve_url
    |   ├── __init__.py
    |   ├── models.py
    |   ├── tests.py
    |   └── urls.py
    ├── responses
    |   ├── __init__.py
    |   ├── test_cookie.py
    |   ├── test_fileresponse.py
    |   └── tests.py
    ├── reverse_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── runtests.py
    ├── save_delete_hooks
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── schema
    |   ├── __init__.py
    |   ├── fields.py
    |   ├── models.py
    |   ├── test_logging.py
    |   └── tests.py
    ├── select_for_update
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_onetoone
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── select_related_regress
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── serializers
    |   ├── __init__.py
    |   ├── models
    |   |   ├── __init__.py
    |   |   ├── base.py
    |   |   ├── data.py
    |   |   ├── multi_table.py
    |   |   └── natural.py
    |   ├── test_data.py
    |   ├── test_deserializedobject.py
    |   ├── test_json.py
    |   ├── test_jsonl.py
    |   ├── test_natural.py
    |   ├── test_xml.py
    |   ├── test_yaml.py
    |   └── tests.py
    ├── servers
    |   ├── __init__.py
    |   ├── another_app
    |   |   ├── __init__.py
    |   |   └── static
    |   |       └── another_app
    |   ├── fixtures
    |   ├── media
    |   |   └── example_media_file.txt
    |   ├── models.py
    |   ├── static
    |   |   └── example_static_file.txt
    |   ├── test_basehttp.py
    |   ├── test_liveserverthread.py
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── sessions_tests
    |   ├── __init__.py
    |   ├── models.py
    |   ├── no_clear_expired.py
    |   └── tests.py
    ├── settings_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── shell
    |   ├── __init__.py
    |   └── tests.py
    ├── shortcuts
    |   ├── __init__.py
    |   ├── jinja2
    |   |   └── shortcuts
    |   |       └── using.html
    |   ├── templates
    |   |   └── shortcuts
    |   |       ├── render_test.html
    |   |       └── using.html
    |   ├── tests.py
    |   ├── urls.py
    |   └── views.py
    ├── signals
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── signed_cookies_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── signing
    |   ├── __init__.py
    |   └── tests.py
    ├── sitemaps_tests
    |   ├── __init__.py
    |   ├── base.py
    |   ├── models.py
    |   ├── templates
    |   |   ├── custom_sitemap.xml
    |   |   └── custom_sitemap_index.xml
    |   ├── test_generic.py
    |   ├── test_http.py
    |   ├── test_https.py
    |   ├── test_management.py
    |   ├── test_utils.py
    |   └── urls
    |       ├── __init__.py
    |       ├── empty.py
    |       ├── http.py
    |       ├── https.py
    |       └── index_only.py
    ├── sites_framework
    |   ├── __init__.py
    |   ├── migrations
    |   |   ├── 0001_initial.py
    |   |   └── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── sites_tests
    |   ├── __init__.py
    |   └── tests.py
    ├── staticfiles_tests
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── no_label
    |   |   |   ├── __init__.py
    |   |   |   └── static
    |   |   ├── staticfiles_config.py
    |   |   └── test
    |   |       ├── __init__.py
    |   |       ├── otherdir
    |   |       └── static
    |   ├── cases.py
    |   ├── project
    |   |   ├── documents
    |   |   |   ├── absolute_root.css
    |   |   |   ├── cached
    |   |   |   ├── nested
    |   |   |   ├── styles_root.css
    |   |   |   ├── subdir
    |   |   |   ├── test
    |   |   |   └── test.txt
    |   |   ├── faulty
    |   |   |   └── faulty.css
    |   |   ├── loop
    |   |   |   ├── bar.css
    |   |   |   └── foo.css
    |   |   ├── pathlib
    |   |   |   └── pathlib.txt
    |   |   ├── prefixed
    |   |   |   └── test.txt
    |   |   └── site_media
    |   |       ├── media
    |   |       └── static
    |   ├── settings.py
    |   ├── storage.py
    |   ├── test_checks.py
    |   ├── test_finders.py
    |   ├── test_forms.py
    |   ├── test_handlers.py
    |   ├── test_liveserver.py
    |   ├── test_management.py
    |   ├── test_storage.py
    |   ├── test_templatetags.py
    |   ├── test_utils.py
    |   ├── test_views.py
    |   └── urls
    |       ├── __init__.py
    |       ├── default.py
    |       └── helper.py
    ├── str
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── string_lookup
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── swappable_models
    |   ├── __init__.py
    |   ├── models.py
    |   └── tests.py
    ├── syndication_tests
    |   ├── __init__.py
    |   ├── feeds.py
    |   ├── models.py
    |   ├── templates
    |   |   └── syndication
    |   |       ├── description.html
    |   |       ├── description_context.html
    |   |       ├── title.html
    |   |       └── title_context.html
    |   ├── tests.py
    |   └── urls.py
    ├── template_backends
    |   ├── __init__.py
    |   ├── apps
    |   |   ├── __init__.py
    |   |   ├── good
    |   |   |   ├── __init__.py
    |   |   |   └── templatetags
    |   |   └── importerror
    |   |       ├── __init__.py
    |   |       └── templatetags
    |   ├── forbidden
    |   |   └── template_backends
    |   |       └── hello.html
    |   ├── jinja2
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       ├── syntax_error.html
    |   |       ├── syntax_error2.html
    |   |       └── syntax_error_include.html
    |   ├── template_strings
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_backends
    |   |       ├── csrf.html
    |   |       ├── django_escaping.html
    |   |       ├── hello.html
    |   |       └── syntax_error.html
    |   ├── test_django.py
    |   ├── test_dummy.py
    |   ├── test_jinja2.py
    |   └── test_utils.py
    ├── template_loader
    |   ├── __init__.py
    |   ├── template_strings
    |   |   └── template_loader
    |   |       └── hello.html
    |   ├── templates
    |   |   └── template_loader
    |   |       ├── goodbye.html
    |   |       ├── hello.html
    |   |       └── request.html
    |   └── tests.py
    ├── template_tests
    |   ├── __init__.py
    |   ├── alternate_urls.py
    |   ├── annotated_tag_function.py
    |   ├── broken_tag.py
    |   ├── eggs
    |   ├── filter_tests
    |   |   ├── __init__.py
    |   |   ├── test_add.py
    |   |   ├── test_addslashes.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_capfirst.py
    |   |   ├── test_center.py
    |   |   ├── test_chaining.py
    |   |   ├── test_cut.py
    |   |   ├── test_date.py
    |   |   ├── test_default.py
    |   |   ├── test_default_if_none.py
    |   |   ├── test_dictsort.py
    |   |   ├── test_dictsortreversed.py
    |   |   ├── test_divisibleby.py
    |   |   ├── test_escape.py
    |   |   ├── test_escapejs.py
    |   |   ├── test_filesizeformat.py
    |   |   ├── test_first.py
    |   |   ├── test_floatformat.py
    |   |   ├── test_force_escape.py
    |   |   ├── test_get_digit.py
    |   |   ├── test_iriencode.py
    |   |   ├── test_join.py
    |   |   ├── test_json_script.py
    |   |   ├── test_last.py
    |   |   ├── test_length.py
    |   |   ├── test_length_is.py
    |   |   ├── test_linebreaks.py
    |   |   ├── test_linebreaksbr.py
    |   |   ├── test_linenumbers.py
    |   |   ├── test_ljust.py
    |   |   ├── test_lower.py
    |   |   ├── test_make_list.py
    |   |   ├── test_phone2numeric.py
    |   |   ├── test_pluralize.py
    |   |   ├── test_random.py
    |   |   ├── test_rjust.py
    |   |   ├── test_safe.py
    |   |   ├── test_safeseq.py
    |   |   ├── test_slice.py
    |   |   ├── test_slugify.py
    |   |   ├── test_stringformat.py
    |   |   ├── test_striptags.py
    |   |   ├── test_time.py
    |   |   ├── test_timesince.py
    |   |   ├── test_timeuntil.py
    |   |   ├── test_title.py
    |   |   ├── test_truncatechars.py
    |   |   ├── test_truncatechars_html.py
    |   |   ├── test_truncatewords.py
    |   |   ├── test_truncatewords_html.py
    |   |   ├── test_unordered_list.py
    |   |   ├── test_upper.py
    |   |   ├── test_urlencode.py
    |   |   ├── test_urlize.py
    |   |   ├── test_urlizetrunc.py
    |   |   ├── test_wordcount.py
    |   |   ├── test_wordwrap.py
    |   |   ├── test_yesno.py
    |   |   └── timezone_utils.py
    |   ├── jinja2
    |   |   └── template_tests
    |   |       └── using.html
    |   ├── other_templates
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   └── test_dirs.html
    |   ├── recursive_templates
    |   |   ├── fs
    |   |   |   ├── extend-missing.html
    |   |   |   ├── one.html
    |   |   |   ├── other-recursive.html
    |   |   |   ├── recursive.html
    |   |   |   ├── self.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── fs2
    |   |   |   └── recursive.html
    |   |   └── fs3
    |   |       └── recursive.html
    |   ├── relative_templates
    |   |   ├── dir1
    |   |   |   ├── dir2
    |   |   |   ├── looped.html
    |   |   |   ├── one.html
    |   |   |   ├── one1.html
    |   |   |   ├── one2.html
    |   |   |   ├── one3.html
    |   |   |   ├── three.html
    |   |   |   └── two.html
    |   |   ├── error_extends.html
    |   |   ├── error_include.html
    |   |   ├── one.html
    |   |   ├── one_var.html
    |   |   ├── three.html
    |   |   └── two.html
    |   ├── syntax_tests
    |   |   ├── __init__.py
    |   |   ├── i18n
    |   |   |   ├── __init__.py
    |   |   |   ├── base.py
    |   |   |   ├── test_blocktranslate.py
    |   |   |   ├── test_filters.py
    |   |   |   ├── test_get_available_languages.py
    |   |   |   ├── test_get_current_language.py
    |   |   |   ├── test_get_current_language_bidi.py
    |   |   |   ├── test_get_language_info.py
    |   |   |   ├── test_get_language_info_list.py
    |   |   |   ├── test_language.py
    |   |   |   ├── test_translate.py
    |   |   |   └── test_underscore_syntax.py
    |   |   ├── test_autoescape.py
    |   |   ├── test_basic.py
    |   |   ├── test_builtins.py
    |   |   ├── test_cache.py
    |   |   ├── test_comment.py
    |   |   ├── test_cycle.py
    |   |   ├── test_exceptions.py
    |   |   ├── test_extends.py
    |   |   ├── test_filter_syntax.py
    |   |   ├── test_filter_tag.py
    |   |   ├── test_firstof.py
    |   |   ├── test_for.py
    |   |   ├── test_if.py
    |   |   ├── test_if_changed.py
    |   |   ├── test_include.py
    |   |   ├── test_invalid_string.py
    |   |   ├── test_list_index.py
    |   |   ├── test_load.py
    |   |   ├── test_lorem.py
    |   |   ├── test_multiline.py
    |   |   ├── test_named_endblock.py
    |   |   ├── test_now.py
    |   |   ├── test_numpy.py
    |   |   ├── test_regroup.py
    |   |   ├── test_resetcycle.py
    |   |   ├── test_setup.py
    |   |   ├── test_simple_tag.py
    |   |   ├── test_spaceless.py
    |   |   ├── test_static.py
    |   |   ├── test_template_tag.py
    |   |   ├── test_url.py
    |   |   ├── test_verbatim.py
    |   |   ├── test_width_ratio.py
    |   |   └── test_with.py
    |   ├── templates
    |   |   ├── 27584_child.html
    |   |   ├── 27584_parent.html
    |   |   ├── 27956_child.html
    |   |   ├── 27956_parent.html
    |   |   ├── broken_base.html
    |   |   ├── first
    |   |   |   └── test.html
    |   |   ├── include_tpl.html
    |   |   ├── included_base.html
    |   |   ├── included_content.html
    |   |   ├── inclusion.html
    |   |   ├── inclusion_base.html
    |   |   ├── inclusion_extends1.html
    |   |   ├── inclusion_extends2.html
    |   |   ├── index.html
    |   |   ├── priority
    |   |   |   └── foo.html
    |   |   ├── recursive_include.html
    |   |   ├── response.html
    |   |   ├── second
    |   |   |   └── test.html
    |   |   ├── ssi include with spaces.html
    |   |   ├── ssi_include.html
    |   |   ├── template_tests
    |   |   |   └── using.html
    |   |   ├── test_context.html
    |   |   ├── test_context_stack.html
    |   |   ├── test_extends_error.html
    |   |   ├── test_incl_tag_use_l10n.html
    |   |   └── test_include_error.html
    |   ├── templatetags
    |   |   ├── __init__.py
    |   |   ├── bad_tag.py
    |   |   ├── custom.py
    |   |   ├── inclusion.py
    |   |   ├── subpackage
    |   |   |   ├── __init__.py
    |   |   |   └── echo.py
    |   |   ├── tag_27584.py
    |   |   └── testtags.py
    |   ├── test_autoreloader.py
    |   ├── test_base.py
    |   ├── test_callables.py
    |   ├── test_context.py
    |   ├── test_custom.py
    |   ├── test_engine.py
    |   ├── test_extends.py
    |   ├── test_extends_relative.py
    |   ├── test_library.py
    |   ├── test_loaders.py
    |   ├── test_logging.py
    |   ├── test_nodelist.py
    |   ├── test_origin.py
    |   ├── test_parser.py
    |   ├── test_response.py
    |   ├── test_smartif.py
    |   ├── tests.py
    |   ├── urls.py
    |   ├── utils.py
    |   └── views.py
    ├── templates
    |   ├── base.html
    |   ├── comments
    |   |   └── comment_notification_email.txt
    |   ├── custom_admin
    |   |   ├── add_form.html
    |   |   ├── app_index.html
    |   |   ├── change_form.html
    |   |   ├── change_list.html
    |   |   ├── delete_confirmation.html
    |   |   ├── delete_selected_confirmation.html
    |   |   ├── index.html
    |   |   ├── login.html
    |   |   ├── logout.html
    |   |   ├── object_history.html
    |   |   ├── password_change_done.html
    |   |   ├── password_change_form.html
    |   |   └── popup_response.html
    |   ├── extended.html
    |   ├── form_view.html
    |   ├── login.html
    |   └── views
    |       ├── article_archive_day.html
    |       ├── article_archive_month.html
    |       ├── article_confirm_delete.html
    |       ├── article_detail.html
    |       ├── article_form.html
    |       ├── article_list.html
    |       ├── datearticle_archive_month.html
    |       ├── urlarticle_detail.html
    |       └── urlarticle_form.html
    ├── test_client
    |   ├── __init__.py
    |   ├── auth_backends.py
    |   ├── test_conditional_content_removal.py
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---

Issue: Database converters (from_db_value) not called for returning_fields on insert

Description: Description
	
Making a subclass of BigAutoField, I've found that, unlike all other query pathways, on insert the returned integer is not passed through any database converters defined for the field - including the from_db_value hook.
This means that a field which would normally use a wrapper class has instead a plain integer.
Take this field:
class MyAutoField(models.BigAutoField):
	def from_db_value(self, value, expression, connection):
		if value is None:
			return None
		return MyIntWrapper(value)
	def get_prep_value(self, value):
		if value is None:
			return None
		return int(value)
And a model that uses it:
class AutoModel(models.Model):
	id = MyAutoField(primary_key=True)
Queried instances have the wrapper class for id:
>>> am = AutoModel.objects.first()
>>> am.id
<MyIntWrapper: 1>
But on creation, the returned integer is directly set as an attribute on the class:
>>> am2 = AutoModel.objects.create()
>>> am2.id
2
This also affects bulk_create on backends that support fetching the primary key value:
>>> ams = [AutoModel()]
>>> AutoModel.objects.bulk_create(ams)
[<AutoModel: AutoModel object (2)>]
>>> ams[0].id
2

Patch information:
diff --git a/django/db/models/sql/compiler.py b/django/db/models/sql/compiler.py
index f02199d97c..bc06ac3cc4 100644
--- a/django/db/models/sql/compiler.py
+++ b/django/db/models/sql/compiler.py
@@ -1411,14 +1411,30 @@ class SQLInsertCompiler(SQLCompiler):
                 cursor.execute(sql, params)
             if not self.returning_fields:
                 return []
+            # Fetch rows/columns returned by the INSERT.
             if self.connection.features.can_return_rows_from_bulk_insert and len(self.query.objs) > 1:
-                return self.connection.ops.fetch_returned_insert_rows(cursor)
-            if self.connection.features.can_return_columns_from_insert:
+                rows = self.connection.ops.fetch_returned_insert_rows(cursor)
+            elif self.connection.features.can_return_columns_from_insert:
                 assert len(self.query.objs) == 1
-                return [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
-            return [(self.connection.ops.last_insert_id(
-                cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
-            ),)]
+                rows = [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
+            else:
+                rows = [(self.connection.ops.last_insert_id(
+                    cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
+                ),)]
+            # Apply database and field converters (e.g., from_db_value) to the
+            # returned values so they match the types produced by SELECT queries.
+            if self.returning_fields:
+                # Only apply converters for the number of columns actually returned.
+                if rows:
+                    num_cols = len(rows[0])
+                else:
+                    num_cols = 0
+                fields_for_conversion = self.returning_fields[:num_cols] if num_cols else []
+                if fields_for_conversion:
+                    converters = self.get_converters(fields_for_conversion)
+                    if converters:
+                        rows = [tuple(row) for row in self.apply_converters(rows, converters)]
+            return rows
 
 
 class SQLDeleteCompiler(SQLCompiler):


Find all relevant source code context needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of the file `django/db/models/sql/compiler.py`.
Extra Requirements: 
Purpose: This file contains the core logic for SQL query compilation, including the `SQLInsertCompiler` that is being patched, and its parent `SQLCompiler` which provides the methods used in the patch. This is essential to understand the fix.

Previous refined query 2:
Essential Query: Please provide the full content of the file `django/db/models/fields/__init__.py`.
Extra Requirements: 
Purpose: I need to examine the base Field class implementation to understand how `from_db_value` is registered as a converter via `get_db_converters`.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: django/db/models/fields/__init__.py
Line number range: 1 - 500
Content:
1. import collections.abc
2. import copy
3. import datetime
4. import decimal
5. import operator
6. import uuid
7. import warnings
8. from base64 import b64decode, b64encode
9. from functools import partialmethod, total_ordering
10. 
11. from django import forms
12. from django.apps import apps
13. from django.conf import settings
14. from django.core import checks, exceptions, validators
15. from django.db import connection, connections, router
16. from django.db.models.constants import LOOKUP_SEP
17. from django.db.models.query_utils import DeferredAttribute, RegisterLookupMixin
18. from django.utils import timezone
19. from django.utils.datastructures import DictWrapper
20. from django.utils.dateparse import (
21.     parse_date, parse_datetime, parse_duration, parse_time,
22. )
23. from django.utils.duration import duration_microseconds, duration_string
24. from django.utils.functional import Promise, cached_property
25. from django.utils.ipv6 import clean_ipv6_address
26. from django.utils.itercompat import is_iterable
27. from django.utils.text import capfirst
28. from django.utils.translation import gettext_lazy as _
29. 
30. __all__ = [
31.     'AutoField', 'BLANK_CHOICE_DASH', 'BigAutoField', 'BigIntegerField',
32.     'BinaryField', 'BooleanField', 'CharField', 'CommaSeparatedIntegerField',
33.     'DateField', 'DateTimeField', 'DecimalField', 'DurationField',
34.     'EmailField', 'Empty', 'Field', 'FilePathField', 'FloatField',
35.     'GenericIPAddressField', 'IPAddressField', 'IntegerField', 'NOT_PROVIDED',
36.     'NullBooleanField', 'PositiveBigIntegerField', 'PositiveIntegerField',
37.     'PositiveSmallIntegerField', 'SlugField', 'SmallAutoField',
38.     'SmallIntegerField', 'TextField', 'TimeField', 'URLField', 'UUIDField',
39. ]
40. 
41. 
42. class Empty:
43.     pass
44. 
45. 
46. class NOT_PROVIDED:
47.     pass
48. 
49. 
50. # The values to use for "blank" in SelectFields. Will be appended to the start
51. # of most "choices" lists.
52. BLANK_CHOICE_DASH = [("", "---------")]
53. 
54. 
55. def _load_field(app_label, model_name, field_name):
56.     return apps.get_model(app_label, model_name)._meta.get_field(field_name)
57. 
58. 
59. # A guide to Field parameters:
60. #
61. #   * name:      The name of the field specified in the model.
62. #   * attname:   The attribute to use on the model object. This is the same as
63. #                "name", except in the case of ForeignKeys, where "_id" is
64. #                appended.
65. #   * db_column: The db_column specified in the model (or None).
66. #   * column:    The database column for this field. This is the same as
67. #                "attname", except if db_column is specified.
68. #
69. # Code that introspects values, or does other dynamic things, should use
70. # attname. For example, this gets the primary key value of object "obj":
71. #
72. #     getattr(obj, opts.pk.attname)
73. 
74. def _empty(of_cls):
75.     new = Empty()
76.     new.__class__ = of_cls
77.     return new
78. 
79. 
80. def return_None():
81.     return None
82. 
83. 
84. @total_ordering
85. class Field(RegisterLookupMixin):
86.     """Base class for all field types"""
87. 
88.     # Designates whether empty strings fundamentally are allowed at the
89.     # database level.
90.     empty_strings_allowed = True
91.     empty_values = list(validators.EMPTY_VALUES)
92. 
93.     # These track each time a Field instance is created. Used to retain order.
94.     # The auto_creation_counter is used for fields that Django implicitly
95.     # creates, creation_counter is used for all user-specified fields.
96.     creation_counter = 0
97.     auto_creation_counter = -1
98.     default_validators = []  # Default set of validators
99.     default_error_messages = {
100.         'invalid_choice': _('Value %(value)r is not a valid choice.'),
101.         'null': _('This field cannot be null.'),
102.         'blank': _('This field cannot be blank.'),
103.         'unique': _('%(model_name)s with this %(field_label)s '
104.                     'already exists.'),
105.         # Translators: The 'lookup_type' is one of 'date', 'year' or 'month'.
106.         # Eg: "Title must be unique for pub_date year"
107.         'unique_for_date': _("%(field_label)s must be unique for "
108.                              "%(date_field_label)s %(lookup_type)s."),
109.     }
110.     system_check_deprecated_details = None
111.     system_check_removed_details = None
112. 
113.     # Field flags
114.     hidden = False
115. 
116.     many_to_many = None
117.     many_to_one = None
118.     one_to_many = None
119.     one_to_one = None
120.     related_model = None
121. 
122.     descriptor_class = DeferredAttribute
123. 
124.     # Generic field type description, usually overridden by subclasses
125.     def _description(self):
126.         return _('Field of type: %(field_type)s') % {
127.             'field_type': self.__class__.__name__
128.         }
129.     description = property(_description)
130. 
131.     def __init__(self, verbose_name=None, name=None, primary_key=False,
132.                  max_length=None, unique=False, blank=False, null=False,
133.                  db_index=False, rel=None, default=NOT_PROVIDED, editable=True,
134.                  serialize=True, unique_for_date=None, unique_for_month=None,
135.                  unique_for_year=None, choices=None, help_text='', db_column=None,
136.                  db_tablespace=None, auto_created=False, validators=(),
137.                  error_messages=None):
138.         self.name = name
139.         self.verbose_name = verbose_name  # May be set by set_attributes_from_name
140.         self._verbose_name = verbose_name  # Store original for deconstruction
141.         self.primary_key = primary_key
142.         self.max_length, self._unique = max_length, unique
143.         self.blank, self.null = blank, null
144.         self.remote_field = rel
145.         self.is_relation = self.remote_field is not None
146.         self.default = default
147.         self.editable = editable
148.         self.serialize = serialize
149.         self.unique_for_date = unique_for_date
150.         self.unique_for_month = unique_for_month
151.         self.unique_for_year = unique_for_year
152.         if isinstance(choices, collections.abc.Iterator):
153.             choices = list(choices)
154.         self.choices = choices
155.         self.help_text = help_text
156.         self.db_index = db_index
157.         self.db_column = db_column
158.         self._db_tablespace = db_tablespace
159.         self.auto_created = auto_created
160. 
161.         # Adjust the appropriate creation counter, and save our local copy.
162.         if auto_created:
163.             self.creation_counter = Field.auto_creation_counter
164.             Field.auto_creation_counter -= 1
165.         else:
166.             self.creation_counter = Field.creation_counter
167.             Field.creation_counter += 1
168. 
169.         self._validators = list(validators)  # Store for deconstruction later
170. 
171.         messages = {}
172.         for c in reversed(self.__class__.__mro__):
173.             messages.update(getattr(c, 'default_error_messages', {}))
174.         messages.update(error_messages or {})
175.         self._error_messages = error_messages  # Store for deconstruction later
176.         self.error_messages = messages
177. 
178.     def __str__(self):
179.         """
180.         Return "app_label.model_label.field_name" for fields attached to
181.         models.
182.         """
183.         if not hasattr(self, 'model'):
184.             return super().__str__()
185.         model = self.model
186.         return '%s.%s' % (model._meta.label, self.name)
187. 
188.     def __repr__(self):
189.         """Display the module, class, and name of the field."""
190.         path = '%s.%s' % (self.__class__.__module__, self.__class__.__qualname__)
191.         name = getattr(self, 'name', None)
192.         if name is not None:
193.             return '<%s: %s>' % (path, name)
194.         return '<%s>' % path
195. 
196.     def check(self, **kwargs):
197.         return [
198.             *self._check_field_name(),
199.             *self._check_choices(),
200.             *self._check_db_index(),
201.             *self._check_null_allowed_for_primary_keys(),
202.             *self._check_backend_specific_checks(**kwargs),
203.             *self._check_validators(),
204.             *self._check_deprecation_details(),
205.         ]
206. 
207.     def _check_field_name(self):
208.         """
209.         Check if field name is valid, i.e. 1) does not end with an
210.         underscore, 2) does not contain "__" and 3) is not "pk".
211.         """
212.         if self.name.endswith('_'):
213.             return [
214.                 checks.Error(
215.                     'Field names must not end with an underscore.',
216.                     obj=self,
217.                     id='fields.E001',
218.                 )
219.             ]
220.         elif LOOKUP_SEP in self.name:
221.             return [
222.                 checks.Error(
223.                     'Field names must not contain "%s".' % LOOKUP_SEP,
224.                     obj=self,
225.                     id='fields.E002',
226.                 )
227.             ]
228.         elif self.name == 'pk':
229.             return [
230.                 checks.Error(
231.                     "'pk' is a reserved word that cannot be used as a field name.",
232.                     obj=self,
233.                     id='fields.E003',
234.                 )
235.             ]
236.         else:
237.             return []
238. 
239.     @classmethod
240.     def _choices_is_value(cls, value):
241.         return isinstance(value, (str, Promise)) or not is_iterable(value)
242. 
243.     def _check_choices(self):
244.         if not self.choices:
245.             return []
246. 
247.         if not is_iterable(self.choices) or isinstance(self.choices, str):
248.             return [
249.                 checks.Error(
250.                     "'choices' must be an iterable (e.g., a list or tuple).",
251.                     obj=self,
252.                     id='fields.E004',
253.                 )
254.             ]
255. 
256.         choice_max_length = 0
257.         # Expect [group_name, [value, display]]
258.         for choices_group in self.choices:
259.             try:
260.                 group_name, group_choices = choices_group
261.             except (TypeError, ValueError):
262.                 # Containing non-pairs
263.                 break
264.             try:
265.                 if not all(
266.                     self._choices_is_value(value) and self._choices_is_value(human_name)
267.                     for value, human_name in group_choices
268.                 ):
269.                     break
270.                 if self.max_length is not None and group_choices:
271.                     choice_max_length = max([
272.                         choice_max_length,
273.                         *(len(value) for value, _ in group_choices if isinstance(value, str)),
274.                     ])
275.             except (TypeError, ValueError):
276.                 # No groups, choices in the form [value, display]
277.                 value, human_name = group_name, group_choices
278.                 if not self._choices_is_value(value) or not self._choices_is_value(human_name):
279.                     break
280.                 if self.max_length is not None and isinstance(value, str):
281.                     choice_max_length = max(choice_max_length, len(value))
282. 
283.             # Special case: choices=['ab']
284.             if isinstance(choices_group, str):
285.                 break
286.         else:
287.             if self.max_length is not None and choice_max_length > self.max_length:
288.                 return [
289.                     checks.Error(
290.                         "'max_length' is too small to fit the longest value "
291.                         "in 'choices' (%d characters)." % choice_max_length,
292.                         obj=self,
293.                         id='fields.E009',
294.                     ),
295.                 ]
296.             return []
297. 
298.         return [
299.             checks.Error(
300.                 "'choices' must be an iterable containing "
301.                 "(actual value, human readable name) tuples.",
302.                 obj=self,
303.                 id='fields.E005',
304.             )
305.         ]
306. 
307.     def _check_db_index(self):
308.         if self.db_index not in (None, True, False):
309.             return [
310.                 checks.Error(
311.                     "'db_index' must be None, True or False.",
312.                     obj=self,
313.                     id='fields.E006',
314.                 )
315.             ]
316.         else:
317.             return []
318. 
319.     def _check_null_allowed_for_primary_keys(self):
320.         if (self.primary_key and self.null and
321.                 not connection.features.interprets_empty_strings_as_nulls):
322.             # We cannot reliably check this for backends like Oracle which
323.             # consider NULL and '' to be equal (and thus set up
324.             # character-based fields a little differently).
325.             return [
326.                 checks.Error(
327.                     'Primary keys must not have null=True.',
328.                     hint=('Set null=False on the field, or '
329.                           'remove primary_key=True argument.'),
330.                     obj=self,
331.                     id='fields.E007',
332.                 )
333.             ]
334.         else:
335.             return []
336. 
337.     def _check_backend_specific_checks(self, databases=None, **kwargs):
338.         if databases is None:
339.             return []
340.         app_label = self.model._meta.app_label
341.         errors = []
342.         for alias in databases:
343.             if router.allow_migrate(alias, app_label, model_name=self.model._meta.model_name):
344.                 errors.extend(connections[alias].validation.check_field(self, **kwargs))
345.         return errors
346. 
347.     def _check_validators(self):
348.         errors = []
349.         for i, validator in enumerate(self.validators):
350.             if not callable(validator):
351.                 errors.append(
352.                     checks.Error(
353.                         "All 'validators' must be callable.",
354.                         hint=(
355.                             "validators[{i}] ({repr}) isn't a function or "
356.                             "instance of a validator class.".format(
357.                                 i=i, repr=repr(validator),
358.                             )
359.                         ),
360.                         obj=self,
361.                         id='fields.E008',
362.                     )
363.                 )
364.         return errors
365. 
366.     def _check_deprecation_details(self):
367.         if self.system_check_removed_details is not None:
368.             return [
369.                 checks.Error(
370.                     self.system_check_removed_details.get(
371.                         'msg',
372.                         '%s has been removed except for support in historical '
373.                         'migrations.' % self.__class__.__name__
374.                     ),
375.                     hint=self.system_check_removed_details.get('hint'),
376.                     obj=self,
377.                     id=self.system_check_removed_details.get('id', 'fields.EXXX'),
378.                 )
379.             ]
380.         elif self.system_check_deprecated_details is not None:
381.             return [
382.                 checks.Warning(
383.                     self.system_check_deprecated_details.get(
384.                         'msg',
385.                         '%s has been deprecated.' % self.__class__.__name__
386.                     ),
387.                     hint=self.system_check_deprecated_details.get('hint'),
388.                     obj=self,
389.                     id=self.system_check_deprecated_details.get('id', 'fields.WXXX'),
390.                 )
391.             ]
392.         return []
393. 
394.     def get_col(self, alias, output_field=None):
395.         if output_field is None:
396.             output_field = self
397.         if alias != self.model._meta.db_table or output_field != self:
398.             from django.db.models.expressions import Col
399.             return Col(alias, self, output_field)
400.         else:
401.             return self.cached_col
402. 
403.     @cached_property
404.     def cached_col(self):
405.         from django.db.models.expressions import Col
406.         return Col(self.model._meta.db_table, self)
407. 
408.     def select_format(self, compiler, sql, params):
409.         """
410.         Custom format for select clauses. For example, GIS columns need to be
411.         selected as AsText(table.col) on MySQL as the table.col data can't be
412.         used by Django.
413.         """
414.         return sql, params
415. 
416.     def deconstruct(self):
417.         """
418.         Return enough information to recreate the field as a 4-tuple:
419. 
420.          * The name of the field on the model, if contribute_to_class() has
421.            been run.
422.          * The import path of the field, including the class:e.g.
423.            django.db.models.IntegerField This should be the most portable
424.            version, so less specific may be better.
425.          * A list of positional arguments.
426.          * A dict of keyword arguments.
427. 
428.         Note that the positional or keyword arguments must contain values of
429.         the following types (including inner values of collection types):
430. 
431.          * None, bool, str, int, float, complex, set, frozenset, list, tuple,
432.            dict
433.          * UUID
434.          * datetime.datetime (naive), datetime.date
435.          * top-level classes, top-level functions - will be referenced by their
436.            full import path
437.          * Storage instances - these have their own deconstruct() method
438. 
439.         This is because the values here must be serialized into a text format
440.         (possibly new Python code, possibly JSON) and these are the only types
441.         with encoding handlers defined.
442. 
443.         There's no need to return the exact way the field was instantiated this
444.         time, just ensure that the resulting field is the same - prefer keyword
445.         arguments over positional ones, and omit parameters with their default
446.         values.
447.         """
448.         # Short-form way of fetching all the default parameters
449.         keywords = {}
450.         possibles = {
451.             "verbose_name": None,
452.             "primary_key": False,
453.             "max_length": None,
454.             "unique": False,
455.             "blank": False,
456.             "null": False,
457.             "db_index": False,
458.             "default": NOT_PROVIDED,
459.             "editable": True,
460.             "serialize": True,
461.             "unique_for_date": None,
462.             "unique_for_month": None,
463.             "unique_for_year": None,
464.             "choices": None,
465.             "help_text": '',
466.             "db_column": None,
467.             "db_tablespace": None,
468.             "auto_created": False,
469.             "validators": [],
470.             "error_messages": None,
471.         }
472.         attr_overrides = {
473.             "unique": "_unique",
474.             "error_messages": "_error_messages",
475.             "validators": "_validators",
476.             "verbose_name": "_verbose_name",
477.             "db_tablespace": "_db_tablespace",
478.         }
479.         equals_comparison = {"choices", "validators"}
480.         for name, default in possibles.items():
481.             value = getattr(self, attr_overrides.get(name, name))
482.             # Unroll anything iterable for choices into a concrete list
483.             if name == "choices" and isinstance(value, collections.abc.Iterable):
484.                 value = list(value)
485.             # Do correct kind of comparison
486.             if name in equals_comparison:
487.                 if value != default:
488.                     keywords[name] = value
489.             else:
490.                 if value is not default:
491.                     keywords[name] = value
492.         # Work out path - we shorten it for known Django core fields
493.         path = "%s.%s" % (self.__class__.__module__, self.__class__.__qualname__)
494.         if path.startswith("django.db.models.fields.related"):
495.             path = path.replace("django.db.models.fields.related", "django.db.models")
496.         elif path.startswith("django.db.models.fields.files"):
497.             path = path.replace("django.db.models.fields.files", "django.db.models")
498.         elif path.startswith('django.db.models.fields.json'):
499.             path = path.replace('django.db.models.fields.json', 'django.db.models')
500.         elif path.startswith("django.db.models.fields.proxy"):


File: django/db/models/fields/__init__.py
Line number range: 501 - 2000
Content:
501.             path = path.replace("django.db.models.fields.proxy", "django.db.models")
502.         elif path.startswith("django.db.models.fields"):
503.             path = path.replace("django.db.models.fields", "django.db.models")
504.         # Return basic info - other fields should override this.
505.         return (self.name, path, [], keywords)
506. 
507.     def clone(self):
508.         """
509.         Uses deconstruct() to clone a new copy of this Field.
510.         Will not preserve any class attachments/attribute names.
511.         """
512.         name, path, args, kwargs = self.deconstruct()
513.         return self.__class__(*args, **kwargs)
514. 
515.     def __eq__(self, other):
516.         # Needed for @total_ordering
517.         if isinstance(other, Field):
518.             return (
519.                 self.creation_counter == other.creation_counter and
520.                 getattr(self, 'model', None) == getattr(other, 'model', None)
521.             )
522.         return NotImplemented
523. 
524.     def __lt__(self, other):
525.         # This is needed because bisect does not take a comparison function.
526.         # Order by creation_counter first for backward compatibility.
527.         if isinstance(other, Field):
528.             if (
529.                 self.creation_counter != other.creation_counter or
530.                 not hasattr(self, 'model') and not hasattr(other, 'model')
531.             ):
532.                 return self.creation_counter < other.creation_counter
533.             elif hasattr(self, 'model') != hasattr(other, 'model'):
534.                 return not hasattr(self, 'model')  # Order no-model fields first
535.             else:
536.                 # creation_counter's are equal, compare only models.
537.                 return (
538.                     (self.model._meta.app_label, self.model._meta.model_name) <
539.                     (other.model._meta.app_label, other.model._meta.model_name)
540.                 )
541.         return NotImplemented
542. 
543.     def __hash__(self):
544.         return hash((
545.             self.creation_counter,
546.             self.model._meta.app_label if hasattr(self, 'model') else None,
547.             self.model._meta.model_name if hasattr(self, 'model') else None,
548.         ))
549. 
550.     def __deepcopy__(self, memodict):
551.         # We don't have to deepcopy very much here, since most things are not
552.         # intended to be altered after initial creation.
553.         obj = copy.copy(self)
554.         if self.remote_field:
555.             obj.remote_field = copy.copy(self.remote_field)
556.             if hasattr(self.remote_field, 'field') and self.remote_field.field is self:
557.                 obj.remote_field.field = obj
558.         memodict[id(self)] = obj
559.         return obj
560. 
561.     def __copy__(self):
562.         # We need to avoid hitting __reduce__, so define this
563.         # slightly weird copy construct.
564.         obj = Empty()
565.         obj.__class__ = self.__class__
566.         obj.__dict__ = self.__dict__.copy()
567.         return obj
568. 
569.     def __reduce__(self):
570.         """
571.         Pickling should return the model._meta.fields instance of the field,
572.         not a new copy of that field. So, use the app registry to load the
573.         model and then the field back.
574.         """
575.         if not hasattr(self, 'model'):
576.             # Fields are sometimes used without attaching them to models (for
577.             # example in aggregation). In this case give back a plain field
578.             # instance. The code below will create a new empty instance of
579.             # class self.__class__, then update its dict with self.__dict__
580.             # values - so, this is very close to normal pickle.
581.             state = self.__dict__.copy()
582.             # The _get_default cached_property can't be pickled due to lambda
583.             # usage.
584.             state.pop('_get_default', None)
585.             return _empty, (self.__class__,), state
586.         return _load_field, (self.model._meta.app_label, self.model._meta.object_name,
587.                              self.name)
588. 
589.     def get_pk_value_on_save(self, instance):
590.         """
591.         Hook to generate new PK values on save. This method is called when
592.         saving instances with no primary key value set. If this method returns
593.         something else than None, then the returned value is used when saving
594.         the new instance.
595.         """
596.         if self.default:
597.             return self.get_default()
598.         return None
599. 
600.     def to_python(self, value):
601.         """
602.         Convert the input value into the expected Python data type, raising
603.         django.core.exceptions.ValidationError if the data can't be converted.
604.         Return the converted value. Subclasses should override this.
605.         """
606.         return value
607. 
608.     @cached_property
609.     def validators(self):
610.         """
611.         Some validators can't be created at field initialization time.
612.         This method provides a way to delay their creation until required.
613.         """
614.         return [*self.default_validators, *self._validators]
615. 
616.     def run_validators(self, value):
617.         if value in self.empty_values:
618.             return
619. 
620.         errors = []
621.         for v in self.validators:
622.             try:
623.                 v(value)
624.             except exceptions.ValidationError as e:
625.                 if hasattr(e, 'code') and e.code in self.error_messages:
626.                     e.message = self.error_messages[e.code]
627.                 errors.extend(e.error_list)
628. 
629.         if errors:
630.             raise exceptions.ValidationError(errors)
631. 
632.     def validate(self, value, model_instance):
633.         """
634.         Validate value and raise ValidationError if necessary. Subclasses
635.         should override this to provide validation logic.
636.         """
637.         if not self.editable:
638.             # Skip validation for non-editable fields.
639.             return
640. 
641.         if self.choices is not None and value not in self.empty_values:
642.             for option_key, option_value in self.choices:
643.                 if isinstance(option_value, (list, tuple)):
644.                     # This is an optgroup, so look inside the group for
645.                     # options.
646.                     for optgroup_key, optgroup_value in option_value:
647.                         if value == optgroup_key:
648.                             return
649.                 elif value == option_key:
650.                     return
651.             raise exceptions.ValidationError(
652.                 self.error_messages['invalid_choice'],
653.                 code='invalid_choice',
654.                 params={'value': value},
655.             )
656. 
657.         if value is None and not self.null:
658.             raise exceptions.ValidationError(self.error_messages['null'], code='null')
659. 
660.         if not self.blank and value in self.empty_values:
661.             raise exceptions.ValidationError(self.error_messages['blank'], code='blank')
662. 
663.     def clean(self, value, model_instance):
664.         """
665.         Convert the value's type and run validation. Validation errors
666.         from to_python() and validate() are propagated. Return the correct
667.         value if no error is raised.
668.         """
669.         value = self.to_python(value)
670.         self.validate(value, model_instance)
671.         self.run_validators(value)
672.         return value
673. 
674.     def db_type_parameters(self, connection):
675.         return DictWrapper(self.__dict__, connection.ops.quote_name, 'qn_')
676. 
677.     def db_check(self, connection):
678.         """
679.         Return the database column check constraint for this field, for the
680.         provided connection. Works the same way as db_type() for the case that
681.         get_internal_type() does not map to a preexisting model field.
682.         """
683.         data = self.db_type_parameters(connection)
684.         try:
685.             return connection.data_type_check_constraints[self.get_internal_type()] % data
686.         except KeyError:
687.             return None
688. 
689.     def db_type(self, connection):
690.         """
691.         Return the database column data type for this field, for the provided
692.         connection.
693.         """
694.         # The default implementation of this method looks at the
695.         # backend-specific data_types dictionary, looking up the field by its
696.         # "internal type".
697.         #
698.         # A Field class can implement the get_internal_type() method to specify
699.         # which *preexisting* Django Field class it's most similar to -- i.e.,
700.         # a custom field might be represented by a TEXT column type, which is
701.         # the same as the TextField Django field type, which means the custom
702.         # field's get_internal_type() returns 'TextField'.
703.         #
704.         # But the limitation of the get_internal_type() / data_types approach
705.         # is that it cannot handle database column types that aren't already
706.         # mapped to one of the built-in Django field types. In this case, you
707.         # can implement db_type() instead of get_internal_type() to specify
708.         # exactly which wacky database column type you want to use.
709.         data = self.db_type_parameters(connection)
710.         try:
711.             return connection.data_types[self.get_internal_type()] % data
712.         except KeyError:
713.             return None
714. 
715.     def rel_db_type(self, connection):
716.         """
717.         Return the data type that a related field pointing to this field should
718.         use. For example, this method is called by ForeignKey and OneToOneField
719.         to determine its data type.
720.         """
721.         return self.db_type(connection)
722. 
723.     def cast_db_type(self, connection):
724.         """Return the data type to use in the Cast() function."""
725.         db_type = connection.ops.cast_data_types.get(self.get_internal_type())
726.         if db_type:
727.             return db_type % self.db_type_parameters(connection)
728.         return self.db_type(connection)
729. 
730.     def db_parameters(self, connection):
731.         """
732.         Extension of db_type(), providing a range of different return values
733.         (type, checks). This will look at db_type(), allowing custom model
734.         fields to override it.
735.         """
736.         type_string = self.db_type(connection)
737.         check_string = self.db_check(connection)
738.         return {
739.             "type": type_string,
740.             "check": check_string,
741.         }
742. 
743.     def db_type_suffix(self, connection):
744.         return connection.data_types_suffix.get(self.get_internal_type())
745. 
746.     def get_db_converters(self, connection):
747.         if hasattr(self, 'from_db_value'):
748.             return [self.from_db_value]
749.         return []
750. 
751.     @property
752.     def unique(self):
753.         return self._unique or self.primary_key
754. 
755.     @property
756.     def db_tablespace(self):
757.         return self._db_tablespace or settings.DEFAULT_INDEX_TABLESPACE
758. 
759.     @property
760.     def db_returning(self):
761.         """
762.         Private API intended only to be used by Django itself. Currently only
763.         the PostgreSQL backend supports returning multiple fields on a model.
764.         """
765.         return False
766. 
767.     def set_attributes_from_name(self, name):
768.         self.name = self.name or name
769.         self.attname, self.column = self.get_attname_column()
770.         self.concrete = self.column is not None
771.         if self.verbose_name is None and self.name:
772.             self.verbose_name = self.name.replace('_', ' ')
773. 
774.     def contribute_to_class(self, cls, name, private_only=False):
775.         """
776.         Register the field with the model class it belongs to.
777. 
778.         If private_only is True, create a separate instance of this field
779.         for every subclass of cls, even if cls is not an abstract model.
780.         """
781.         self.set_attributes_from_name(name)
782.         self.model = cls
783.         cls._meta.add_field(self, private=private_only)
784.         if self.column:
785.             # Don't override classmethods with the descriptor. This means that
786.             # if you have a classmethod and a field with the same name, then
787.             # such fields can't be deferred (we don't have a check for this).
788.             if not getattr(cls, self.attname, None):
789.                 setattr(cls, self.attname, self.descriptor_class(self))
790.         if self.choices is not None:
791.             # Don't override a get_FOO_display() method defined explicitly on
792.             # this class, but don't check methods derived from inheritance, to
793.             # allow overriding inherited choices. For more complex inheritance
794.             # structures users should override contribute_to_class().
795.             if 'get_%s_display' % self.name not in cls.__dict__:
796.                 setattr(
797.                     cls,
798.                     'get_%s_display' % self.name,
799.                     partialmethod(cls._get_FIELD_display, field=self),
800.                 )
801. 
802.     def get_filter_kwargs_for_object(self, obj):
803.         """
804.         Return a dict that when passed as kwargs to self.model.filter(), would
805.         yield all instances having the same value for this field as obj has.
806.         """
807.         return {self.name: getattr(obj, self.attname)}
808. 
809.     def get_attname(self):
810.         return self.name
811. 
812.     def get_attname_column(self):
813.         attname = self.get_attname()
814.         column = self.db_column or attname
815.         return attname, column
816. 
817.     def get_internal_type(self):
818.         return self.__class__.__name__
819. 
820.     def pre_save(self, model_instance, add):
821.         """Return field's value just before saving."""
822.         return getattr(model_instance, self.attname)
823. 
824.     def get_prep_value(self, value):
825.         """Perform preliminary non-db specific value checks and conversions."""
826.         if isinstance(value, Promise):
827.             value = value._proxy____cast()
828.         return value
829. 
830.     def get_db_prep_value(self, value, connection, prepared=False):
831.         """
832.         Return field's value prepared for interacting with the database backend.
833. 
834.         Used by the default implementations of get_db_prep_save().
835.         """
836.         if not prepared:
837.             value = self.get_prep_value(value)
838.         return value
839. 
840.     def get_db_prep_save(self, value, connection):
841.         """Return field's value prepared for saving into a database."""
842.         return self.get_db_prep_value(value, connection=connection, prepared=False)
843. 
844.     def has_default(self):
845.         """Return a boolean of whether this field has a default value."""
846.         return self.default is not NOT_PROVIDED
847. 
848.     def get_default(self):
849.         """Return the default value for this field."""
850.         return self._get_default()
851. 
852.     @cached_property
853.     def _get_default(self):
854.         if self.has_default():
855.             if callable(self.default):
856.                 return self.default
857.             return lambda: self.default
858. 
859.         if not self.empty_strings_allowed or self.null and not connection.features.interprets_empty_strings_as_nulls:
860.             return return_None
861.         return str  # return empty string
862. 
863.     def get_choices(self, include_blank=True, blank_choice=BLANK_CHOICE_DASH, limit_choices_to=None, ordering=()):
864.         """
865.         Return choices with a default blank choices included, for use
866.         as <select> choices for this field.
867.         """
868.         if self.choices is not None:
869.             choices = list(self.choices)
870.             if include_blank:
871.                 blank_defined = any(choice in ('', None) for choice, _ in self.flatchoices)
872.                 if not blank_defined:
873.                     choices = blank_choice + choices
874.             return choices
875.         rel_model = self.remote_field.model
876.         limit_choices_to = limit_choices_to or self.get_limit_choices_to()
877.         choice_func = operator.attrgetter(
878.             self.remote_field.get_related_field().attname
879.             if hasattr(self.remote_field, 'get_related_field')
880.             else 'pk'
881.         )
882.         qs = rel_model._default_manager.complex_filter(limit_choices_to)
883.         if ordering:
884.             qs = qs.order_by(*ordering)
885.         return (blank_choice if include_blank else []) + [
886.             (choice_func(x), str(x)) for x in qs
887.         ]
888. 
889.     def value_to_string(self, obj):
890.         """
891.         Return a string value of this field from the passed obj.
892.         This is used by the serialization framework.
893.         """
894.         return str(self.value_from_object(obj))
895. 
896.     def _get_flatchoices(self):
897.         """Flattened version of choices tuple."""
898.         if self.choices is None:
899.             return []
900.         flat = []
901.         for choice, value in self.choices:
902.             if isinstance(value, (list, tuple)):
903.                 flat.extend(value)
904.             else:
905.                 flat.append((choice, value))
906.         return flat
907.     flatchoices = property(_get_flatchoices)
908. 
909.     def save_form_data(self, instance, data):
910.         setattr(instance, self.name, data)
911. 
912.     def formfield(self, form_class=None, choices_form_class=None, **kwargs):
913.         """Return a django.forms.Field instance for this field."""
914.         defaults = {
915.             'required': not self.blank,
916.             'label': capfirst(self.verbose_name),
917.             'help_text': self.help_text,
918.         }
919.         if self.has_default():
920.             if callable(self.default):
921.                 defaults['initial'] = self.default
922.                 defaults['show_hidden_initial'] = True
923.             else:
924.                 defaults['initial'] = self.get_default()
925.         if self.choices is not None:
926.             # Fields with choices get special treatment.
927.             include_blank = (self.blank or
928.                              not (self.has_default() or 'initial' in kwargs))
929.             defaults['choices'] = self.get_choices(include_blank=include_blank)
930.             defaults['coerce'] = self.to_python
931.             if self.null:
932.                 defaults['empty_value'] = None
933.             if choices_form_class is not None:
934.                 form_class = choices_form_class
935.             else:
936.                 form_class = forms.TypedChoiceField
937.             # Many of the subclass-specific formfield arguments (min_value,
938.             # max_value) don't apply for choice fields, so be sure to only pass
939.             # the values that TypedChoiceField will understand.
940.             for k in list(kwargs):
941.                 if k not in ('coerce', 'empty_value', 'choices', 'required',
942.                              'widget', 'label', 'initial', 'help_text',
943.                              'error_messages', 'show_hidden_initial', 'disabled'):
944.                     del kwargs[k]
945.         defaults.update(kwargs)
946.         if form_class is None:
947.             form_class = forms.CharField
948.         return form_class(**defaults)
949. 
950.     def value_from_object(self, obj):
951.         """Return the value of this field in the given model instance."""
952.         return getattr(obj, self.attname)
953. 
954. 
955. class BooleanField(Field):
956.     empty_strings_allowed = False
957.     default_error_messages = {
958.         'invalid': _('“%(value)s” value must be either True or False.'),
959.         'invalid_nullable': _('“%(value)s” value must be either True, False, or None.'),
960.     }
961.     description = _("Boolean (Either True or False)")
962. 
963.     def get_internal_type(self):
964.         return "BooleanField"
965. 
966.     def to_python(self, value):
967.         if self.null and value in self.empty_values:
968.             return None
969.         if value in (True, False):
970.             # 1/0 are equal to True/False. bool() converts former to latter.
971.             return bool(value)
972.         if value in ('t', 'True', '1'):
973.             return True
974.         if value in ('f', 'False', '0'):
975.             return False
976.         raise exceptions.ValidationError(
977.             self.error_messages['invalid_nullable' if self.null else 'invalid'],
978.             code='invalid',
979.             params={'value': value},
980.         )
981. 
982.     def get_prep_value(self, value):
983.         value = super().get_prep_value(value)
984.         if value is None:
985.             return None
986.         return self.to_python(value)
987. 
988.     def formfield(self, **kwargs):
989.         if self.choices is not None:
990.             include_blank = not (self.has_default() or 'initial' in kwargs)
991.             defaults = {'choices': self.get_choices(include_blank=include_blank)}
992.         else:
993.             form_class = forms.NullBooleanField if self.null else forms.BooleanField
994.             # In HTML checkboxes, 'required' means "must be checked" which is
995.             # different from the choices case ("must select some value").
996.             # required=False allows unchecked checkboxes.
997.             defaults = {'form_class': form_class, 'required': False}
998.         return super().formfield(**{**defaults, **kwargs})
999. 
1000. 
1001. class CharField(Field):
1002.     description = _("String (up to %(max_length)s)")
1003. 
1004.     def __init__(self, *args, db_collation=None, **kwargs):
1005.         super().__init__(*args, **kwargs)
1006.         self.db_collation = db_collation
1007.         self.validators.append(validators.MaxLengthValidator(self.max_length))
1008. 
1009.     def check(self, **kwargs):
1010.         databases = kwargs.get('databases') or []
1011.         return [
1012.             *super().check(**kwargs),
1013.             *self._check_db_collation(databases),
1014.             *self._check_max_length_attribute(**kwargs),
1015.         ]
1016. 
1017.     def _check_max_length_attribute(self, **kwargs):
1018.         if self.max_length is None:
1019.             return [
1020.                 checks.Error(
1021.                     "CharFields must define a 'max_length' attribute.",
1022.                     obj=self,
1023.                     id='fields.E120',
1024.                 )
1025.             ]
1026.         elif (not isinstance(self.max_length, int) or isinstance(self.max_length, bool) or
1027.                 self.max_length <= 0):
1028.             return [
1029.                 checks.Error(
1030.                     "'max_length' must be a positive integer.",
1031.                     obj=self,
1032.                     id='fields.E121',
1033.                 )
1034.             ]
1035.         else:
1036.             return []
1037. 
1038.     def _check_db_collation(self, databases):
1039.         errors = []
1040.         for db in databases:
1041.             if not router.allow_migrate_model(db, self.model):
1042.                 continue
1043.             connection = connections[db]
1044.             if not (
1045.                 self.db_collation is None or
1046.                 'supports_collation_on_charfield' in self.model._meta.required_db_features or
1047.                 connection.features.supports_collation_on_charfield
1048.             ):
1049.                 errors.append(
1050.                     checks.Error(
1051.                         '%s does not support a database collation on '
1052.                         'CharFields.' % connection.display_name,
1053.                         obj=self,
1054.                         id='fields.E190',
1055.                     ),
1056.                 )
1057.         return errors
1058. 
1059.     def cast_db_type(self, connection):
1060.         if self.max_length is None:
1061.             return connection.ops.cast_char_field_without_max_length
1062.         return super().cast_db_type(connection)
1063. 
1064.     def get_internal_type(self):
1065.         return "CharField"
1066. 
1067.     def to_python(self, value):
1068.         if isinstance(value, str) or value is None:
1069.             return value
1070.         return str(value)
1071. 
1072.     def get_prep_value(self, value):
1073.         value = super().get_prep_value(value)
1074.         return self.to_python(value)
1075. 
1076.     def formfield(self, **kwargs):
1077.         # Passing max_length to forms.CharField means that the value's length
1078.         # will be validated twice. This is considered acceptable since we want
1079.         # the value in the form field (to pass into widget for example).
1080.         defaults = {'max_length': self.max_length}
1081.         # TODO: Handle multiple backends with different feature flags.
1082.         if self.null and not connection.features.interprets_empty_strings_as_nulls:
1083.             defaults['empty_value'] = None
1084.         defaults.update(kwargs)
1085.         return super().formfield(**defaults)
1086. 
1087.     def deconstruct(self):
1088.         name, path, args, kwargs = super().deconstruct()
1089.         if self.db_collation:
1090.             kwargs['db_collation'] = self.db_collation
1091.         return name, path, args, kwargs
1092. 
1093. 
1094. class CommaSeparatedIntegerField(CharField):
1095.     default_validators = [validators.validate_comma_separated_integer_list]
1096.     description = _("Comma-separated integers")
1097.     system_check_removed_details = {
1098.         'msg': (
1099.             'CommaSeparatedIntegerField is removed except for support in '
1100.             'historical migrations.'
1101.         ),
1102.         'hint': (
1103.             'Use CharField(validators=[validate_comma_separated_integer_list]) '
1104.             'instead.'
1105.         ),
1106.         'id': 'fields.E901',
1107.     }
1108. 
1109. 
1110. class DateTimeCheckMixin:
1111. 
1112.     def check(self, **kwargs):
1113.         return [
1114.             *super().check(**kwargs),
1115.             *self._check_mutually_exclusive_options(),
1116.             *self._check_fix_default_value(),
1117.         ]
1118. 
1119.     def _check_mutually_exclusive_options(self):
1120.         # auto_now, auto_now_add, and default are mutually exclusive
1121.         # options. The use of more than one of these options together
1122.         # will trigger an Error
1123.         mutually_exclusive_options = [self.auto_now_add, self.auto_now, self.has_default()]
1124.         enabled_options = [option not in (None, False) for option in mutually_exclusive_options].count(True)
1125.         if enabled_options > 1:
1126.             return [
1127.                 checks.Error(
1128.                     "The options auto_now, auto_now_add, and default "
1129.                     "are mutually exclusive. Only one of these options "
1130.                     "may be present.",
1131.                     obj=self,
1132.                     id='fields.E160',
1133.                 )
1134.             ]
1135.         else:
1136.             return []
1137. 
1138.     def _check_fix_default_value(self):
1139.         return []
1140. 
1141. 
1142. class DateField(DateTimeCheckMixin, Field):
1143.     empty_strings_allowed = False
1144.     default_error_messages = {
1145.         'invalid': _('“%(value)s” value has an invalid date format. It must be '
1146.                      'in YYYY-MM-DD format.'),
1147.         'invalid_date': _('“%(value)s” value has the correct format (YYYY-MM-DD) '
1148.                           'but it is an invalid date.'),
1149.     }
1150.     description = _("Date (without time)")
1151. 
1152.     def __init__(self, verbose_name=None, name=None, auto_now=False,
1153.                  auto_now_add=False, **kwargs):
1154.         self.auto_now, self.auto_now_add = auto_now, auto_now_add
1155.         if auto_now or auto_now_add:
1156.             kwargs['editable'] = False
1157.             kwargs['blank'] = True
1158.         super().__init__(verbose_name, name, **kwargs)
1159. 
1160.     def _check_fix_default_value(self):
1161.         """
1162.         Warn that using an actual date or datetime value is probably wrong;
1163.         it's only evaluated on server startup.
1164.         """
1165.         if not self.has_default():
1166.             return []
1167. 
1168.         now = timezone.now()
1169.         if not timezone.is_naive(now):
1170.             now = timezone.make_naive(now, timezone.utc)
1171.         value = self.default
1172.         if isinstance(value, datetime.datetime):
1173.             if not timezone.is_naive(value):
1174.                 value = timezone.make_naive(value, timezone.utc)
1175.             value = value.date()
1176.         elif isinstance(value, datetime.date):
1177.             # Nothing to do, as dates don't have tz information
1178.             pass
1179.         else:
1180.             # No explicit date / datetime value -- no checks necessary
1181.             return []
1182.         offset = datetime.timedelta(days=1)
1183.         lower = (now - offset).date()
1184.         upper = (now + offset).date()
1185.         if lower <= value <= upper:
1186.             return [
1187.                 checks.Warning(
1188.                     'Fixed default value provided.',
1189.                     hint='It seems you set a fixed date / time / datetime '
1190.                          'value as default for this field. This may not be '
1191.                          'what you want. If you want to have the current date '
1192.                          'as default, use `django.utils.timezone.now`',
1193.                     obj=self,
1194.                     id='fields.W161',
1195.                 )
1196.             ]
1197. 
1198.         return []
1199. 
1200.     def deconstruct(self):
1201.         name, path, args, kwargs = super().deconstruct()
1202.         if self.auto_now:
1203.             kwargs['auto_now'] = True
1204.         if self.auto_now_add:
1205.             kwargs['auto_now_add'] = True
1206.         if self.auto_now or self.auto_now_add:
1207.             del kwargs['editable']
1208.             del kwargs['blank']
1209.         return name, path, args, kwargs
1210. 
1211.     def get_internal_type(self):
1212.         return "DateField"
1213. 
1214.     def to_python(self, value):
1215.         if value is None:
1216.             return value
1217.         if isinstance(value, datetime.datetime):
1218.             if settings.USE_TZ and timezone.is_aware(value):
1219.                 # Convert aware datetimes to the default time zone
1220.                 # before casting them to dates (#17742).
1221.                 default_timezone = timezone.get_default_timezone()
1222.                 value = timezone.make_naive(value, default_timezone)
1223.             return value.date()
1224.         if isinstance(value, datetime.date):
1225.             return value
1226. 
1227.         try:
1228.             parsed = parse_date(value)
1229.             if parsed is not None:
1230.                 return parsed
1231.         except ValueError:
1232.             raise exceptions.ValidationError(
1233.                 self.error_messages['invalid_date'],
1234.                 code='invalid_date',
1235.                 params={'value': value},
1236.             )
1237. 
1238.         raise exceptions.ValidationError(
1239.             self.error_messages['invalid'],
1240.             code='invalid',
1241.             params={'value': value},
1242.         )
1243. 
1244.     def pre_save(self, model_instance, add):
1245.         if self.auto_now or (self.auto_now_add and add):
1246.             value = datetime.date.today()
1247.             setattr(model_instance, self.attname, value)
1248.             return value
1249.         else:
1250.             return super().pre_save(model_instance, add)
1251. 
1252.     def contribute_to_class(self, cls, name, **kwargs):
1253.         super().contribute_to_class(cls, name, **kwargs)
1254.         if not self.null:
1255.             setattr(
1256.                 cls, 'get_next_by_%s' % self.name,
1257.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=True)
1258.             )
1259.             setattr(
1260.                 cls, 'get_previous_by_%s' % self.name,
1261.                 partialmethod(cls._get_next_or_previous_by_FIELD, field=self, is_next=False)
1262.             )
1263. 
1264.     def get_prep_value(self, value):
1265.         value = super().get_prep_value(value)
1266.         return self.to_python(value)
1267. 
1268.     def get_db_prep_value(self, value, connection, prepared=False):
1269.         # Casts dates into the format expected by the backend
1270.         if not prepared:
1271.             value = self.get_prep_value(value)
1272.         return connection.ops.adapt_datefield_value(value)
1273. 
1274.     def value_to_string(self, obj):
1275.         val = self.value_from_object(obj)
1276.         return '' if val is None else val.isoformat()
1277. 
1278.     def formfield(self, **kwargs):
1279.         return super().formfield(**{
1280.             'form_class': forms.DateField,
1281.             **kwargs,
1282.         })
1283. 
1284. 
1285. class DateTimeField(DateField):
1286.     empty_strings_allowed = False
1287.     default_error_messages = {
1288.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1289.                      'YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ] format.'),
1290.         'invalid_date': _("“%(value)s” value has the correct format "
1291.                           "(YYYY-MM-DD) but it is an invalid date."),
1292.         'invalid_datetime': _('“%(value)s” value has the correct format '
1293.                               '(YYYY-MM-DD HH:MM[:ss[.uuuuuu]][TZ]) '
1294.                               'but it is an invalid date/time.'),
1295.     }
1296.     description = _("Date (with time)")
1297. 
1298.     # __init__ is inherited from DateField
1299. 
1300.     def _check_fix_default_value(self):
1301.         """
1302.         Warn that using an actual date or datetime value is probably wrong;
1303.         it's only evaluated on server startup.
1304.         """
1305.         if not self.has_default():
1306.             return []
1307. 
1308.         now = timezone.now()
1309.         if not timezone.is_naive(now):
1310.             now = timezone.make_naive(now, timezone.utc)
1311.         value = self.default
1312.         if isinstance(value, datetime.datetime):
1313.             second_offset = datetime.timedelta(seconds=10)
1314.             lower = now - second_offset
1315.             upper = now + second_offset
1316.             if timezone.is_aware(value):
1317.                 value = timezone.make_naive(value, timezone.utc)
1318.         elif isinstance(value, datetime.date):
1319.             second_offset = datetime.timedelta(seconds=10)
1320.             lower = now - second_offset
1321.             lower = datetime.datetime(lower.year, lower.month, lower.day)
1322.             upper = now + second_offset
1323.             upper = datetime.datetime(upper.year, upper.month, upper.day)
1324.             value = datetime.datetime(value.year, value.month, value.day)
1325.         else:
1326.             # No explicit date / datetime value -- no checks necessary
1327.             return []
1328.         if lower <= value <= upper:
1329.             return [
1330.                 checks.Warning(
1331.                     'Fixed default value provided.',
1332.                     hint='It seems you set a fixed date / time / datetime '
1333.                          'value as default for this field. This may not be '
1334.                          'what you want. If you want to have the current date '
1335.                          'as default, use `django.utils.timezone.now`',
1336.                     obj=self,
1337.                     id='fields.W161',
1338.                 )
1339.             ]
1340. 
1341.         return []
1342. 
1343.     def get_internal_type(self):
1344.         return "DateTimeField"
1345. 
1346.     def to_python(self, value):
1347.         if value is None:
1348.             return value
1349.         if isinstance(value, datetime.datetime):
1350.             return value
1351.         if isinstance(value, datetime.date):
1352.             value = datetime.datetime(value.year, value.month, value.day)
1353.             if settings.USE_TZ:
1354.                 # For backwards compatibility, interpret naive datetimes in
1355.                 # local time. This won't work during DST change, but we can't
1356.                 # do much about it, so we let the exceptions percolate up the
1357.                 # call stack.
1358.                 warnings.warn("DateTimeField %s.%s received a naive datetime "
1359.                               "(%s) while time zone support is active." %
1360.                               (self.model.__name__, self.name, value),
1361.                               RuntimeWarning)
1362.                 default_timezone = timezone.get_default_timezone()
1363.                 value = timezone.make_aware(value, default_timezone)
1364.             return value
1365. 
1366.         try:
1367.             parsed = parse_datetime(value)
1368.             if parsed is not None:
1369.                 return parsed
1370.         except ValueError:
1371.             raise exceptions.ValidationError(
1372.                 self.error_messages['invalid_datetime'],
1373.                 code='invalid_datetime',
1374.                 params={'value': value},
1375.             )
1376. 
1377.         try:
1378.             parsed = parse_date(value)
1379.             if parsed is not None:
1380.                 return datetime.datetime(parsed.year, parsed.month, parsed.day)
1381.         except ValueError:
1382.             raise exceptions.ValidationError(
1383.                 self.error_messages['invalid_date'],
1384.                 code='invalid_date',
1385.                 params={'value': value},
1386.             )
1387. 
1388.         raise exceptions.ValidationError(
1389.             self.error_messages['invalid'],
1390.             code='invalid',
1391.             params={'value': value},
1392.         )
1393. 
1394.     def pre_save(self, model_instance, add):
1395.         if self.auto_now or (self.auto_now_add and add):
1396.             value = timezone.now()
1397.             setattr(model_instance, self.attname, value)
1398.             return value
1399.         else:
1400.             return super().pre_save(model_instance, add)
1401. 
1402.     # contribute_to_class is inherited from DateField, it registers
1403.     # get_next_by_FOO and get_prev_by_FOO
1404. 
1405.     def get_prep_value(self, value):
1406.         value = super().get_prep_value(value)
1407.         value = self.to_python(value)
1408.         if value is not None and settings.USE_TZ and timezone.is_naive(value):
1409.             # For backwards compatibility, interpret naive datetimes in local
1410.             # time. This won't work during DST change, but we can't do much
1411.             # about it, so we let the exceptions percolate up the call stack.
1412.             try:
1413.                 name = '%s.%s' % (self.model.__name__, self.name)
1414.             except AttributeError:
1415.                 name = '(unbound)'
1416.             warnings.warn("DateTimeField %s received a naive datetime (%s)"
1417.                           " while time zone support is active." %
1418.                           (name, value),
1419.                           RuntimeWarning)
1420.             default_timezone = timezone.get_default_timezone()
1421.             value = timezone.make_aware(value, default_timezone)
1422.         return value
1423. 
1424.     def get_db_prep_value(self, value, connection, prepared=False):
1425.         # Casts datetimes into the format expected by the backend
1426.         if not prepared:
1427.             value = self.get_prep_value(value)
1428.         return connection.ops.adapt_datetimefield_value(value)
1429. 
1430.     def value_to_string(self, obj):
1431.         val = self.value_from_object(obj)
1432.         return '' if val is None else val.isoformat()
1433. 
1434.     def formfield(self, **kwargs):
1435.         return super().formfield(**{
1436.             'form_class': forms.DateTimeField,
1437.             **kwargs,
1438.         })
1439. 
1440. 
1441. class DecimalField(Field):
1442.     empty_strings_allowed = False
1443.     default_error_messages = {
1444.         'invalid': _('“%(value)s” value must be a decimal number.'),
1445.     }
1446.     description = _("Decimal number")
1447. 
1448.     def __init__(self, verbose_name=None, name=None, max_digits=None,
1449.                  decimal_places=None, **kwargs):
1450.         self.max_digits, self.decimal_places = max_digits, decimal_places
1451.         super().__init__(verbose_name, name, **kwargs)
1452. 
1453.     def check(self, **kwargs):
1454.         errors = super().check(**kwargs)
1455. 
1456.         digits_errors = [
1457.             *self._check_decimal_places(),
1458.             *self._check_max_digits(),
1459.         ]
1460.         if not digits_errors:
1461.             errors.extend(self._check_decimal_places_and_max_digits(**kwargs))
1462.         else:
1463.             errors.extend(digits_errors)
1464.         return errors
1465. 
1466.     def _check_decimal_places(self):
1467.         try:
1468.             decimal_places = int(self.decimal_places)
1469.             if decimal_places < 0:
1470.                 raise ValueError()
1471.         except TypeError:
1472.             return [
1473.                 checks.Error(
1474.                     "DecimalFields must define a 'decimal_places' attribute.",
1475.                     obj=self,
1476.                     id='fields.E130',
1477.                 )
1478.             ]
1479.         except ValueError:
1480.             return [
1481.                 checks.Error(
1482.                     "'decimal_places' must be a non-negative integer.",
1483.                     obj=self,
1484.                     id='fields.E131',
1485.                 )
1486.             ]
1487.         else:
1488.             return []
1489. 
1490.     def _check_max_digits(self):
1491.         try:
1492.             max_digits = int(self.max_digits)
1493.             if max_digits <= 0:
1494.                 raise ValueError()
1495.         except TypeError:
1496.             return [
1497.                 checks.Error(
1498.                     "DecimalFields must define a 'max_digits' attribute.",
1499.                     obj=self,
1500.                     id='fields.E132',
1501.                 )
1502.             ]
1503.         except ValueError:
1504.             return [
1505.                 checks.Error(
1506.                     "'max_digits' must be a positive integer.",
1507.                     obj=self,
1508.                     id='fields.E133',
1509.                 )
1510.             ]
1511.         else:
1512.             return []
1513. 
1514.     def _check_decimal_places_and_max_digits(self, **kwargs):
1515.         if int(self.decimal_places) > int(self.max_digits):
1516.             return [
1517.                 checks.Error(
1518.                     "'max_digits' must be greater or equal to 'decimal_places'.",
1519.                     obj=self,
1520.                     id='fields.E134',
1521.                 )
1522.             ]
1523.         return []
1524. 
1525.     @cached_property
1526.     def validators(self):
1527.         return super().validators + [
1528.             validators.DecimalValidator(self.max_digits, self.decimal_places)
1529.         ]
1530. 
1531.     @cached_property
1532.     def context(self):
1533.         return decimal.Context(prec=self.max_digits)
1534. 
1535.     def deconstruct(self):
1536.         name, path, args, kwargs = super().deconstruct()
1537.         if self.max_digits is not None:
1538.             kwargs['max_digits'] = self.max_digits
1539.         if self.decimal_places is not None:
1540.             kwargs['decimal_places'] = self.decimal_places
1541.         return name, path, args, kwargs
1542. 
1543.     def get_internal_type(self):
1544.         return "DecimalField"
1545. 
1546.     def to_python(self, value):
1547.         if value is None:
1548.             return value
1549.         if isinstance(value, float):
1550.             return self.context.create_decimal_from_float(value)
1551.         try:
1552.             return decimal.Decimal(value)
1553.         except (decimal.InvalidOperation, TypeError, ValueError):
1554.             raise exceptions.ValidationError(
1555.                 self.error_messages['invalid'],
1556.                 code='invalid',
1557.                 params={'value': value},
1558.             )
1559. 
1560.     def get_db_prep_save(self, value, connection):
1561.         return connection.ops.adapt_decimalfield_value(self.to_python(value), self.max_digits, self.decimal_places)
1562. 
1563.     def get_prep_value(self, value):
1564.         value = super().get_prep_value(value)
1565.         return self.to_python(value)
1566. 
1567.     def formfield(self, **kwargs):
1568.         return super().formfield(**{
1569.             'max_digits': self.max_digits,
1570.             'decimal_places': self.decimal_places,
1571.             'form_class': forms.DecimalField,
1572.             **kwargs,
1573.         })
1574. 
1575. 
1576. class DurationField(Field):
1577.     """
1578.     Store timedelta objects.
1579. 
1580.     Use interval on PostgreSQL, INTERVAL DAY TO SECOND on Oracle, and bigint
1581.     of microseconds on other databases.
1582.     """
1583.     empty_strings_allowed = False
1584.     default_error_messages = {
1585.         'invalid': _('“%(value)s” value has an invalid format. It must be in '
1586.                      '[DD] [[HH:]MM:]ss[.uuuuuu] format.')
1587.     }
1588.     description = _("Duration")
1589. 
1590.     def get_internal_type(self):
1591.         return "DurationField"
1592. 
1593.     def to_python(self, value):
1594.         if value is None:
1595.             return value
1596.         if isinstance(value, datetime.timedelta):
1597.             return value
1598.         try:
1599.             parsed = parse_duration(value)
1600.         except ValueError:
1601.             pass
1602.         else:
1603.             if parsed is not None:
1604.                 return parsed
1605. 
1606.         raise exceptions.ValidationError(
1607.             self.error_messages['invalid'],
1608.             code='invalid',
1609.             params={'value': value},
1610.         )
1611. 
1612.     def get_db_prep_value(self, value, connection, prepared=False):
1613.         if connection.features.has_native_duration_field:
1614.             return value
1615.         if value is None:
1616.             return None
1617.         return duration_microseconds(value)
1618. 
1619.     def get_db_converters(self, connection):
1620.         converters = []
1621.         if not connection.features.has_native_duration_field:
1622.             converters.append(connection.ops.convert_durationfield_value)
1623.         return converters + super().get_db_converters(connection)
1624. 
1625.     def value_to_string(self, obj):
1626.         val = self.value_from_object(obj)
1627.         return '' if val is None else duration_string(val)
1628. 
1629.     def formfield(self, **kwargs):
1630.         return super().formfield(**{
1631.             'form_class': forms.DurationField,
1632.             **kwargs,
1633.         })
1634. 
1635. 
1636. class EmailField(CharField):
1637.     default_validators = [validators.validate_email]
1638.     description = _("Email address")
1639. 
1640.     def __init__(self, *args, **kwargs):
1641.         # max_length=254 to be compliant with RFCs 3696 and 5321
1642.         kwargs.setdefault('max_length', 254)
1643.         super().__init__(*args, **kwargs)
1644. 
1645.     def deconstruct(self):
1646.         name, path, args, kwargs = super().deconstruct()
1647.         # We do not exclude max_length if it matches default as we want to change
1648.         # the default in future.
1649.         return name, path, args, kwargs
1650. 
1651.     def formfield(self, **kwargs):
1652.         # As with CharField, this will cause email validation to be performed
1653.         # twice.
1654.         return super().formfield(**{
1655.             'form_class': forms.EmailField,
1656.             **kwargs,
1657.         })
1658. 
1659. 
1660. class FilePathField(Field):
1661.     description = _("File path")
1662. 
1663.     def __init__(self, verbose_name=None, name=None, path='', match=None,
1664.                  recursive=False, allow_files=True, allow_folders=False, **kwargs):
1665.         self.path, self.match, self.recursive = path, match, recursive
1666.         self.allow_files, self.allow_folders = allow_files, allow_folders
1667.         kwargs.setdefault('max_length', 100)
1668.         super().__init__(verbose_name, name, **kwargs)
1669. 
1670.     def check(self, **kwargs):
1671.         return [
1672.             *super().check(**kwargs),
1673.             *self._check_allowing_files_or_folders(**kwargs),
1674.         ]
1675. 
1676.     def _check_allowing_files_or_folders(self, **kwargs):
1677.         if not self.allow_files and not self.allow_folders:
1678.             return [
1679.                 checks.Error(
1680.                     "FilePathFields must have either 'allow_files' or 'allow_folders' set to True.",
1681.                     obj=self,
1682.                     id='fields.E140',
1683.                 )
1684.             ]
1685.         return []
1686. 
1687.     def deconstruct(self):
1688.         name, path, args, kwargs = super().deconstruct()
1689.         if self.path != '':
1690.             kwargs['path'] = self.path
1691.         if self.match is not None:
1692.             kwargs['match'] = self.match
1693.         if self.recursive is not False:
1694.             kwargs['recursive'] = self.recursive
1695.         if self.allow_files is not True:
1696.             kwargs['allow_files'] = self.allow_files
1697.         if self.allow_folders is not False:
1698.             kwargs['allow_folders'] = self.allow_folders
1699.         if kwargs.get("max_length") == 100:
1700.             del kwargs["max_length"]
1701.         return name, path, args, kwargs
1702. 
1703.     def get_prep_value(self, value):
1704.         value = super().get_prep_value(value)
1705.         if value is None:
1706.             return None
1707.         return str(value)
1708. 
1709.     def formfield(self, **kwargs):
1710.         return super().formfield(**{
1711.             'path': self.path() if callable(self.path) else self.path,
1712.             'match': self.match,
1713.             'recursive': self.recursive,
1714.             'form_class': forms.FilePathField,
1715.             'allow_files': self.allow_files,
1716.             'allow_folders': self.allow_folders,
1717.             **kwargs,
1718.         })
1719. 
1720.     def get_internal_type(self):
1721.         return "FilePathField"
1722. 
1723. 
1724. class FloatField(Field):
1725.     empty_strings_allowed = False
1726.     default_error_messages = {
1727.         'invalid': _('“%(value)s” value must be a float.'),
1728.     }
1729.     description = _("Floating point number")
1730. 
1731.     def get_prep_value(self, value):
1732.         value = super().get_prep_value(value)
1733.         if value is None:
1734.             return None
1735.         try:
1736.             return float(value)
1737.         except (TypeError, ValueError) as e:
1738.             raise e.__class__(
1739.                 "Field '%s' expected a number but got %r." % (self.name, value),
1740.             ) from e
1741. 
1742.     def get_internal_type(self):
1743.         return "FloatField"
1744. 
1745.     def to_python(self, value):
1746.         if value is None:
1747.             return value
1748.         try:
1749.             return float(value)
1750.         except (TypeError, ValueError):
1751.             raise exceptions.ValidationError(
1752.                 self.error_messages['invalid'],
1753.                 code='invalid',
1754.                 params={'value': value},
1755.             )
1756. 
1757.     def formfield(self, **kwargs):
1758.         return super().formfield(**{
1759.             'form_class': forms.FloatField,
1760.             **kwargs,
1761.         })
1762. 
1763. 
1764. class IntegerField(Field):
1765.     empty_strings_allowed = False
1766.     default_error_messages = {
1767.         'invalid': _('“%(value)s” value must be an integer.'),
1768.     }
1769.     description = _("Integer")
1770. 
1771.     def check(self, **kwargs):
1772.         return [
1773.             *super().check(**kwargs),
1774.             *self._check_max_length_warning(),
1775.         ]
1776. 
1777.     def _check_max_length_warning(self):
1778.         if self.max_length is not None:
1779.             return [
1780.                 checks.Warning(
1781.                     "'max_length' is ignored when used with %s." % self.__class__.__name__,
1782.                     hint="Remove 'max_length' from field",
1783.                     obj=self,
1784.                     id='fields.W122',
1785.                 )
1786.             ]
1787.         return []
1788. 
1789.     @cached_property
1790.     def validators(self):
1791.         # These validators can't be added at field initialization time since
1792.         # they're based on values retrieved from `connection`.
1793.         validators_ = super().validators
1794.         internal_type = self.get_internal_type()
1795.         min_value, max_value = connection.ops.integer_field_range(internal_type)
1796.         if min_value is not None and not any(
1797.             (
1798.                 isinstance(validator, validators.MinValueValidator) and (
1799.                     validator.limit_value()
1800.                     if callable(validator.limit_value)
1801.                     else validator.limit_value
1802.                 ) >= min_value
1803.             ) for validator in validators_
1804.         ):
1805.             validators_.append(validators.MinValueValidator(min_value))
1806.         if max_value is not None and not any(
1807.             (
1808.                 isinstance(validator, validators.MaxValueValidator) and (
1809.                     validator.limit_value()
1810.                     if callable(validator.limit_value)
1811.                     else validator.limit_value
1812.                 ) <= max_value
1813.             ) for validator in validators_
1814.         ):
1815.             validators_.append(validators.MaxValueValidator(max_value))
1816.         return validators_
1817. 
1818.     def get_prep_value(self, value):
1819.         value = super().get_prep_value(value)
1820.         if value is None:
1821.             return None
1822.         try:
1823.             return int(value)
1824.         except (TypeError, ValueError) as e:
1825.             raise e.__class__(
1826.                 "Field '%s' expected a number but got %r." % (self.name, value),
1827.             ) from e
1828. 
1829.     def get_internal_type(self):
1830.         return "IntegerField"
1831. 
1832.     def to_python(self, value):
1833.         if value is None:
1834.             return value
1835.         try:
1836.             return int(value)
1837.         except (TypeError, ValueError):
1838.             raise exceptions.ValidationError(
1839.                 self.error_messages['invalid'],
1840.                 code='invalid',
1841.                 params={'value': value},
1842.             )
1843. 
1844.     def formfield(self, **kwargs):
1845.         return super().formfield(**{
1846.             'form_class': forms.IntegerField,
1847.             **kwargs,
1848.         })
1849. 
1850. 
1851. class BigIntegerField(IntegerField):
1852.     description = _("Big (8 byte) integer")
1853.     MAX_BIGINT = 9223372036854775807
1854. 
1855.     def get_internal_type(self):
1856.         return "BigIntegerField"
1857. 
1858.     def formfield(self, **kwargs):
1859.         return super().formfield(**{
1860.             'min_value': -BigIntegerField.MAX_BIGINT - 1,
1861.             'max_value': BigIntegerField.MAX_BIGINT,
1862.             **kwargs,
1863.         })
1864. 
1865. 
1866. class SmallIntegerField(IntegerField):
1867.     description = _('Small integer')
1868. 
1869.     def get_internal_type(self):
1870.         return 'SmallIntegerField'
1871. 
1872. 
1873. class IPAddressField(Field):
1874.     empty_strings_allowed = False
1875.     description = _("IPv4 address")
1876.     system_check_removed_details = {
1877.         'msg': (
1878.             'IPAddressField has been removed except for support in '
1879.             'historical migrations.'
1880.         ),
1881.         'hint': 'Use GenericIPAddressField instead.',
1882.         'id': 'fields.E900',
1883.     }
1884. 
1885.     def __init__(self, *args, **kwargs):
1886.         kwargs['max_length'] = 15
1887.         super().__init__(*args, **kwargs)
1888. 
1889.     def deconstruct(self):
1890.         name, path, args, kwargs = super().deconstruct()
1891.         del kwargs['max_length']
1892.         return name, path, args, kwargs
1893. 
1894.     def get_prep_value(self, value):
1895.         value = super().get_prep_value(value)
1896.         if value is None:
1897.             return None
1898.         return str(value)
1899. 
1900.     def get_internal_type(self):
1901.         return "IPAddressField"
1902. 
1903. 
1904. class GenericIPAddressField(Field):
1905.     empty_strings_allowed = False
1906.     description = _("IP address")
1907.     default_error_messages = {}
1908. 
1909.     def __init__(self, verbose_name=None, name=None, protocol='both',
1910.                  unpack_ipv4=False, *args, **kwargs):
1911.         self.unpack_ipv4 = unpack_ipv4
1912.         self.protocol = protocol
1913.         self.default_validators, invalid_error_message = \
1914.             validators.ip_address_validators(protocol, unpack_ipv4)
1915.         self.default_error_messages['invalid'] = invalid_error_message
1916.         kwargs['max_length'] = 39
1917.         super().__init__(verbose_name, name, *args, **kwargs)
1918. 
1919.     def check(self, **kwargs):
1920.         return [
1921.             *super().check(**kwargs),
1922.             *self._check_blank_and_null_values(**kwargs),
1923.         ]
1924. 
1925.     def _check_blank_and_null_values(self, **kwargs):
1926.         if not getattr(self, 'null', False) and getattr(self, 'blank', False):
1927.             return [
1928.                 checks.Error(
1929.                     'GenericIPAddressFields cannot have blank=True if null=False, '
1930.                     'as blank values are stored as nulls.',
1931.                     obj=self,
1932.                     id='fields.E150',
1933.                 )
1934.             ]
1935.         return []
1936. 
1937.     def deconstruct(self):
1938.         name, path, args, kwargs = super().deconstruct()
1939.         if self.unpack_ipv4 is not False:
1940.             kwargs['unpack_ipv4'] = self.unpack_ipv4
1941.         if self.protocol != "both":
1942.             kwargs['protocol'] = self.protocol
1943.         if kwargs.get("max_length") == 39:
1944.             del kwargs['max_length']
1945.         return name, path, args, kwargs
1946. 
1947.     def get_internal_type(self):
1948.         return "GenericIPAddressField"
1949. 
1950.     def to_python(self, value):
1951.         if value is None:
1952.             return None
1953.         if not isinstance(value, str):
1954.             value = str(value)
1955.         value = value.strip()
1956.         if ':' in value:
1957.             return clean_ipv6_address(value, self.unpack_ipv4, self.error_messages['invalid'])
1958.         return value
1959. 
1960.     def get_db_prep_value(self, value, connection, prepared=False):
1961.         if not prepared:
1962.             value = self.get_prep_value(value)
1963.         return connection.ops.adapt_ipaddressfield_value(value)
1964. 
1965.     def get_prep_value(self, value):
1966.         value = super().get_prep_value(value)
1967.         if value is None:
1968.             return None
1969.         if value and ':' in value:
1970.             try:
1971.                 return clean_ipv6_address(value, self.unpack_ipv4)
1972.             except exceptions.ValidationError:
1973.                 pass
1974.         return str(value)
1975. 
1976.     def formfield(self, **kwargs):
1977.         return super().formfield(**{
1978.             'protocol': self.protocol,
1979.             'form_class': forms.GenericIPAddressField,
1980.             **kwargs,
1981.         })
1982. 
1983. 
1984. class NullBooleanField(BooleanField):
1985.     default_error_messages = {
1986.         'invalid': _('“%(value)s” value must be either None, True or False.'),
1987.         'invalid_nullable': _('“%(value)s” value must be either None, True or False.'),
1988.     }
1989.     description = _("Boolean (Either True, False or None)")
1990.     system_check_removed_details = {
1991.         'msg': (
1992.             'NullBooleanField is removed except for support in historical '
1993.             'migrations.'
1994.         ),
1995.         'hint': 'Use BooleanField(null=True) instead.',
1996.         'id': 'fields.E903',
1997.     }
1998. 
1999.     def __init__(self, *args, **kwargs):
2000.         kwargs['null'] = True


File: django/db/models/sql/compiler.py
Line number range: 1 - 1500
Content:
1. import collections
2. import re
3. from functools import partial
4. from itertools import chain
5. 
6. from django.core.exceptions import EmptyResultSet, FieldError
7. from django.db import DatabaseError, NotSupportedError
8. from django.db.models.constants import LOOKUP_SEP
9. from django.db.models.expressions import F, OrderBy, RawSQL, Ref, Value
10. from django.db.models.functions import Cast, Random
11. from django.db.models.query_utils import Q, select_related_descend
12. from django.db.models.sql.constants import (
13.     CURSOR, GET_ITERATOR_CHUNK_SIZE, MULTI, NO_RESULTS, ORDER_DIR, SINGLE,
14. )
15. from django.db.models.sql.query import Query, get_order_dir
16. from django.db.transaction import TransactionManagementError
17. from django.utils.functional import cached_property
18. from django.utils.hashable import make_hashable
19. from django.utils.regex_helper import _lazy_re_compile
20. 
21. 
22. class SQLCompiler:
23.     # Multiline ordering SQL clause may appear from RawSQL.
24.     ordering_parts = _lazy_re_compile(
25.         r'^(.*)\s(?:ASC|DESC).*',
26.         re.MULTILINE | re.DOTALL,
27.     )
28. 
29.     def __init__(self, query, connection, using):
30.         self.query = query
31.         self.connection = connection
32.         self.using = using
33.         self.quote_cache = {'*': '*'}
34.         # The select, klass_info, and annotations are needed by QuerySet.iterator()
35.         # these are set as a side-effect of executing the query. Note that we calculate
36.         # separately a list of extra select columns needed for grammatical correctness
37.         # of the query, but these columns are not included in self.select.
38.         self.select = None
39.         self.annotation_col_map = None
40.         self.klass_info = None
41.         self._meta_ordering = None
42. 
43.     def setup_query(self):
44.         if all(self.query.alias_refcount[a] == 0 for a in self.query.alias_map):
45.             self.query.get_initial_alias()
46.         self.select, self.klass_info, self.annotation_col_map = self.get_select()
47.         self.col_count = len(self.select)
48. 
49.     def pre_sql_setup(self):
50.         """
51.         Do any necessary class setup immediately prior to producing SQL. This
52.         is for things that can't necessarily be done in __init__ because we
53.         might not have all the pieces in place at that time.
54.         """
55.         self.setup_query()
56.         order_by = self.get_order_by()
57.         self.where, self.having = self.query.where.split_having()
58.         extra_select = self.get_extra_select(order_by, self.select)
59.         self.has_extra_select = bool(extra_select)
60.         group_by = self.get_group_by(self.select + extra_select, order_by)
61.         return extra_select, order_by, group_by
62. 
63.     def get_group_by(self, select, order_by):
64.         """
65.         Return a list of 2-tuples of form (sql, params).
66. 
67.         The logic of what exactly the GROUP BY clause contains is hard
68.         to describe in other words than "if it passes the test suite,
69.         then it is correct".
70.         """
71.         # Some examples:
72.         #     SomeModel.objects.annotate(Count('somecol'))
73.         #     GROUP BY: all fields of the model
74.         #
75.         #    SomeModel.objects.values('name').annotate(Count('somecol'))
76.         #    GROUP BY: name
77.         #
78.         #    SomeModel.objects.annotate(Count('somecol')).values('name')
79.         #    GROUP BY: all cols of the model
80.         #
81.         #    SomeModel.objects.values('name', 'pk').annotate(Count('somecol')).values('pk')
82.         #    GROUP BY: name, pk
83.         #
84.         #    SomeModel.objects.values('name').annotate(Count('somecol')).values('pk')
85.         #    GROUP BY: name, pk
86.         #
87.         # In fact, the self.query.group_by is the minimal set to GROUP BY. It
88.         # can't be ever restricted to a smaller set, but additional columns in
89.         # HAVING, ORDER BY, and SELECT clauses are added to it. Unfortunately
90.         # the end result is that it is impossible to force the query to have
91.         # a chosen GROUP BY clause - you can almost do this by using the form:
92.         #     .values(*wanted_cols).annotate(AnAggregate())
93.         # but any later annotations, extra selects, values calls that
94.         # refer some column outside of the wanted_cols, order_by, or even
95.         # filter calls can alter the GROUP BY clause.
96. 
97.         # The query.group_by is either None (no GROUP BY at all), True
98.         # (group by select fields), or a list of expressions to be added
99.         # to the group by.
100.         if self.query.group_by is None:
101.             return []
102.         expressions = []
103.         if self.query.group_by is not True:
104.             # If the group by is set to a list (by .values() call most likely),
105.             # then we need to add everything in it to the GROUP BY clause.
106.             # Backwards compatibility hack for setting query.group_by. Remove
107.             # when  we have public API way of forcing the GROUP BY clause.
108.             # Converts string references to expressions.
109.             for expr in self.query.group_by:
110.                 if not hasattr(expr, 'as_sql'):
111.                     expressions.append(self.query.resolve_ref(expr))
112.                 else:
113.                     expressions.append(expr)
114.         # Note that even if the group_by is set, it is only the minimal
115.         # set to group by. So, we need to add cols in select, order_by, and
116.         # having into the select in any case.
117.         ref_sources = {
118.             expr.source for expr in expressions if isinstance(expr, Ref)
119.         }
120.         for expr, _, _ in select:
121.             # Skip members of the select clause that are already included
122.             # by reference.
123.             if expr in ref_sources:
124.                 continue
125.             cols = expr.get_group_by_cols()
126.             for col in cols:
127.                 expressions.append(col)
128.         if not self._meta_ordering:
129.             for expr, (sql, params, is_ref) in order_by:
130.                 # Skip references to the SELECT clause, as all expressions in
131.                 # the SELECT clause are already part of the GROUP BY.
132.                 if not is_ref:
133.                     expressions.extend(expr.get_group_by_cols())
134.         having_group_by = self.having.get_group_by_cols() if self.having else ()
135.         for expr in having_group_by:
136.             expressions.append(expr)
137.         result = []
138.         seen = set()
139.         expressions = self.collapse_group_by(expressions, having_group_by)
140. 
141.         for expr in expressions:
142.             sql, params = self.compile(expr)
143.             sql, params = expr.select_format(self, sql, params)
144.             params_hash = make_hashable(params)
145.             if (sql, params_hash) not in seen:
146.                 result.append((sql, params))
147.                 seen.add((sql, params_hash))
148.         return result
149. 
150.     def collapse_group_by(self, expressions, having):
151.         # If the DB can group by primary key, then group by the primary key of
152.         # query's main model. Note that for PostgreSQL the GROUP BY clause must
153.         # include the primary key of every table, but for MySQL it is enough to
154.         # have the main table's primary key.
155.         if self.connection.features.allows_group_by_pk:
156.             # Determine if the main model's primary key is in the query.
157.             pk = None
158.             for expr in expressions:
159.                 # Is this a reference to query's base table primary key? If the
160.                 # expression isn't a Col-like, then skip the expression.
161.                 if (getattr(expr, 'target', None) == self.query.model._meta.pk and
162.                         getattr(expr, 'alias', None) == self.query.base_table):
163.                     pk = expr
164.                     break
165.             # If the main model's primary key is in the query, group by that
166.             # field, HAVING expressions, and expressions associated with tables
167.             # that don't have a primary key included in the grouped columns.
168.             if pk:
169.                 pk_aliases = {
170.                     expr.alias for expr in expressions
171.                     if hasattr(expr, 'target') and expr.target.primary_key
172.                 }
173.                 expressions = [pk] + [
174.                     expr for expr in expressions
175.                     if expr in having or (
176.                         getattr(expr, 'alias', None) is not None and expr.alias not in pk_aliases
177.                     )
178.                 ]
179.         elif self.connection.features.allows_group_by_selected_pks:
180.             # Filter out all expressions associated with a table's primary key
181.             # present in the grouped columns. This is done by identifying all
182.             # tables that have their primary key included in the grouped
183.             # columns and removing non-primary key columns referring to them.
184.             # Unmanaged models are excluded because they could be representing
185.             # database views on which the optimization might not be allowed.
186.             pks = {
187.                 expr for expr in expressions
188.                 if (
189.                     hasattr(expr, 'target') and
190.                     expr.target.primary_key and
191.                     self.connection.features.allows_group_by_selected_pks_on_model(expr.target.model)
192.                 )
193.             }
194.             aliases = {expr.alias for expr in pks}
195.             expressions = [
196.                 expr for expr in expressions if expr in pks or getattr(expr, 'alias', None) not in aliases
197.             ]
198.         return expressions
199. 
200.     def get_select(self):
201.         """
202.         Return three values:
203.         - a list of 3-tuples of (expression, (sql, params), alias)
204.         - a klass_info structure,
205.         - a dictionary of annotations
206. 
207.         The (sql, params) is what the expression will produce, and alias is the
208.         "AS alias" for the column (possibly None).
209. 
210.         The klass_info structure contains the following information:
211.         - The base model of the query.
212.         - Which columns for that model are present in the query (by
213.           position of the select clause).
214.         - related_klass_infos: [f, klass_info] to descent into
215. 
216.         The annotations is a dictionary of {'attname': column position} values.
217.         """
218.         select = []
219.         klass_info = None
220.         annotations = {}
221.         select_idx = 0
222.         for alias, (sql, params) in self.query.extra_select.items():
223.             annotations[alias] = select_idx
224.             select.append((RawSQL(sql, params), alias))
225.             select_idx += 1
226.         assert not (self.query.select and self.query.default_cols)
227.         if self.query.default_cols:
228.             cols = self.get_default_columns()
229.         else:
230.             # self.query.select is a special case. These columns never go to
231.             # any model.
232.             cols = self.query.select
233.         if cols:
234.             select_list = []
235.             for col in cols:
236.                 select_list.append(select_idx)
237.                 select.append((col, None))
238.                 select_idx += 1
239.             klass_info = {
240.                 'model': self.query.model,
241.                 'select_fields': select_list,
242.             }
243.         for alias, annotation in self.query.annotation_select.items():
244.             annotations[alias] = select_idx
245.             select.append((annotation, alias))
246.             select_idx += 1
247. 
248.         if self.query.select_related:
249.             related_klass_infos = self.get_related_selections(select)
250.             klass_info['related_klass_infos'] = related_klass_infos
251. 
252.             def get_select_from_parent(klass_info):
253.                 for ki in klass_info['related_klass_infos']:
254.                     if ki['from_parent']:
255.                         ki['select_fields'] = (klass_info['select_fields'] +
256.                                                ki['select_fields'])
257.                     get_select_from_parent(ki)
258.             get_select_from_parent(klass_info)
259. 
260.         ret = []
261.         for col, alias in select:
262.             try:
263.                 sql, params = self.compile(col)
264.             except EmptyResultSet:
265.                 # Select a predicate that's always False.
266.                 sql, params = '0', ()
267.             else:
268.                 sql, params = col.select_format(self, sql, params)
269.             ret.append((col, (sql, params), alias))
270.         return ret, klass_info, annotations
271. 
272.     def get_order_by(self):
273.         """
274.         Return a list of 2-tuples of form (expr, (sql, params, is_ref)) for the
275.         ORDER BY clause.
276. 
277.         The order_by clause can alter the select clause (for example it
278.         can add aliases to clauses that do not yet have one, or it can
279.         add totally new select clauses).
280.         """
281.         if self.query.extra_order_by:
282.             ordering = self.query.extra_order_by
283.         elif not self.query.default_ordering:
284.             ordering = self.query.order_by
285.         elif self.query.order_by:
286.             ordering = self.query.order_by
287.         elif self.query.get_meta().ordering:
288.             ordering = self.query.get_meta().ordering
289.             self._meta_ordering = ordering
290.         else:
291.             ordering = []
292.         if self.query.standard_ordering:
293.             asc, desc = ORDER_DIR['ASC']
294.         else:
295.             asc, desc = ORDER_DIR['DESC']
296. 
297.         order_by = []
298.         for field in ordering:
299.             if hasattr(field, 'resolve_expression'):
300.                 if isinstance(field, Value):
301.                     # output_field must be resolved for constants.
302.                     field = Cast(field, field.output_field)
303.                 if not isinstance(field, OrderBy):
304.                     field = field.asc()
305.                 if not self.query.standard_ordering:
306.                     field = field.copy()
307.                     field.reverse_ordering()
308.                 order_by.append((field, False))
309.                 continue
310.             if field == '?':  # random
311.                 order_by.append((OrderBy(Random()), False))
312.                 continue
313. 
314.             col, order = get_order_dir(field, asc)
315.             descending = order == 'DESC'
316. 
317.             if col in self.query.annotation_select:
318.                 # Reference to expression in SELECT clause
319.                 order_by.append((
320.                     OrderBy(Ref(col, self.query.annotation_select[col]), descending=descending),
321.                     True))
322.                 continue
323.             if col in self.query.annotations:
324.                 # References to an expression which is masked out of the SELECT
325.                 # clause.
326.                 if self.query.combinator and self.select:
327.                     # Don't use the resolved annotation because other
328.                     # combinated queries might define it differently.
329.                     expr = F(col)
330.                 else:
331.                     expr = self.query.annotations[col]
332.                     if isinstance(expr, Value):
333.                         # output_field must be resolved for constants.
334.                         expr = Cast(expr, expr.output_field)
335.                 order_by.append((OrderBy(expr, descending=descending), False))
336.                 continue
337. 
338.             if '.' in field:
339.                 # This came in through an extra(order_by=...) addition. Pass it
340.                 # on verbatim.
341.                 table, col = col.split('.', 1)
342.                 order_by.append((
343.                     OrderBy(
344.                         RawSQL('%s.%s' % (self.quote_name_unless_alias(table), col), []),
345.                         descending=descending
346.                     ), False))
347.                 continue
348. 
349.             if not self.query.extra or col not in self.query.extra:
350.                 # 'col' is of the form 'field' or 'field1__field2' or
351.                 # '-field1__field2__field', etc.
352.                 order_by.extend(self.find_ordering_name(
353.                     field, self.query.get_meta(), default_order=asc))
354.             else:
355.                 if col not in self.query.extra_select:
356.                     order_by.append((
357.                         OrderBy(RawSQL(*self.query.extra[col]), descending=descending),
358.                         False))
359.                 else:
360.                     order_by.append((
361.                         OrderBy(Ref(col, RawSQL(*self.query.extra[col])), descending=descending),
362.                         True))
363.         result = []
364.         seen = set()
365. 
366.         for expr, is_ref in order_by:
367.             resolved = expr.resolve_expression(self.query, allow_joins=True, reuse=None)
368.             if self.query.combinator and self.select:
369.                 src = resolved.get_source_expressions()[0]
370.                 expr_src = expr.get_source_expressions()[0]
371.                 # Relabel order by columns to raw numbers if this is a combined
372.                 # query; necessary since the columns can't be referenced by the
373.                 # fully qualified name and the simple column names may collide.
374.                 for idx, (sel_expr, _, col_alias) in enumerate(self.select):
375.                     if is_ref and col_alias == src.refs:
376.                         src = src.source
377.                     elif col_alias and not (
378.                         isinstance(expr_src, F) and col_alias == expr_src.name
379.                     ):
380.                         continue
381.                     if src == sel_expr:
382.                         resolved.set_source_expressions([RawSQL('%d' % (idx + 1), ())])
383.                         break
384.                 else:
385.                     if col_alias:
386.                         raise DatabaseError('ORDER BY term does not match any column in the result set.')
387.                     # Add column used in ORDER BY clause to the selected
388.                     # columns and to each combined query.
389.                     order_by_idx = len(self.query.select) + 1
390.                     col_name = f'__orderbycol{order_by_idx}'
391.                     for q in self.query.combined_queries:
392.                         q.add_annotation(expr_src, col_name)
393.                     self.query.add_select_col(resolved, col_name)
394.                     resolved.set_source_expressions([RawSQL(f'{order_by_idx}', ())])
395.             sql, params = self.compile(resolved)
396.             # Don't add the same column twice, but the order direction is
397.             # not taken into account so we strip it. When this entire method
398.             # is refactored into expressions, then we can check each part as we
399.             # generate it.
400.             without_ordering = self.ordering_parts.search(sql)[1]
401.             params_hash = make_hashable(params)
402.             if (without_ordering, params_hash) in seen:
403.                 continue
404.             seen.add((without_ordering, params_hash))
405.             result.append((resolved, (sql, params, is_ref)))
406.         return result
407. 
408.     def get_extra_select(self, order_by, select):
409.         extra_select = []
410.         if self.query.distinct and not self.query.distinct_fields:
411.             select_sql = [t[1] for t in select]
412.             for expr, (sql, params, is_ref) in order_by:
413.                 without_ordering = self.ordering_parts.search(sql)[1]
414.                 if not is_ref and (without_ordering, params) not in select_sql:
415.                     extra_select.append((expr, (without_ordering, params), None))
416.         return extra_select
417. 
418.     def quote_name_unless_alias(self, name):
419.         """
420.         A wrapper around connection.ops.quote_name that doesn't quote aliases
421.         for table names. This avoids problems with some SQL dialects that treat
422.         quoted strings specially (e.g. PostgreSQL).
423.         """
424.         if name in self.quote_cache:
425.             return self.quote_cache[name]
426.         if ((name in self.query.alias_map and name not in self.query.table_map) or
427.                 name in self.query.extra_select or (
428.                     self.query.external_aliases.get(name) and name not in self.query.table_map)):
429.             self.quote_cache[name] = name
430.             return name
431.         r = self.connection.ops.quote_name(name)
432.         self.quote_cache[name] = r
433.         return r
434. 
435.     def compile(self, node):
436.         vendor_impl = getattr(node, 'as_' + self.connection.vendor, None)
437.         if vendor_impl:
438.             sql, params = vendor_impl(self, self.connection)
439.         else:
440.             sql, params = node.as_sql(self, self.connection)
441.         return sql, params
442. 
443.     def get_combinator_sql(self, combinator, all):
444.         features = self.connection.features
445.         compilers = [
446.             query.get_compiler(self.using, self.connection)
447.             for query in self.query.combined_queries if not query.is_empty()
448.         ]
449.         if not features.supports_slicing_ordering_in_compound:
450.             for query, compiler in zip(self.query.combined_queries, compilers):
451.                 if query.low_mark or query.high_mark:
452.                     raise DatabaseError('LIMIT/OFFSET not allowed in subqueries of compound statements.')
453.                 if compiler.get_order_by():
454.                     raise DatabaseError('ORDER BY not allowed in subqueries of compound statements.')
455.         parts = ()
456.         for compiler in compilers:
457.             try:
458.                 # If the columns list is limited, then all combined queries
459.                 # must have the same columns list. Set the selects defined on
460.                 # the query on all combined queries, if not already set.
461.                 if not compiler.query.values_select and self.query.values_select:
462.                     compiler.query = compiler.query.clone()
463.                     compiler.query.set_values((
464.                         *self.query.extra_select,
465.                         *self.query.values_select,
466.                         *self.query.annotation_select,
467.                     ))
468.                 part_sql, part_args = compiler.as_sql()
469.                 if compiler.query.combinator:
470.                     # Wrap in a subquery if wrapping in parentheses isn't
471.                     # supported.
472.                     if not features.supports_parentheses_in_compound:
473.                         part_sql = 'SELECT * FROM ({})'.format(part_sql)
474.                     # Add parentheses when combining with compound query if not
475.                     # already added for all compound queries.
476.                     elif not features.supports_slicing_ordering_in_compound:
477.                         part_sql = '({})'.format(part_sql)
478.                 parts += ((part_sql, part_args),)
479.             except EmptyResultSet:
480.                 # Omit the empty queryset with UNION and with DIFFERENCE if the
481.                 # first queryset is nonempty.
482.                 if combinator == 'union' or (combinator == 'difference' and parts):
483.                     continue
484.                 raise
485.         if not parts:
486.             raise EmptyResultSet
487.         combinator_sql = self.connection.ops.set_operators[combinator]
488.         if all and combinator == 'union':
489.             combinator_sql += ' ALL'
490.         braces = '({})' if features.supports_slicing_ordering_in_compound else '{}'
491.         sql_parts, args_parts = zip(*((braces.format(sql), args) for sql, args in parts))
492.         result = [' {} '.format(combinator_sql).join(sql_parts)]
493.         params = []
494.         for part in args_parts:
495.             params.extend(part)
496.         return result, params
497. 
498.     def as_sql(self, with_limits=True, with_col_aliases=False):
499.         """
500.         Create the SQL for this query. Return the SQL string and list of
501.         parameters.
502. 
503.         If 'with_limits' is False, any limit/offset information is not included
504.         in the query.
505.         """
506.         refcounts_before = self.query.alias_refcount.copy()
507.         try:
508.             extra_select, order_by, group_by = self.pre_sql_setup()
509.             for_update_part = None
510.             # Is a LIMIT/OFFSET clause needed?
511.             with_limit_offset = with_limits and (self.query.high_mark is not None or self.query.low_mark)
512.             combinator = self.query.combinator
513.             features = self.connection.features
514.             if combinator:
515.                 if not getattr(features, 'supports_select_{}'.format(combinator)):
516.                     raise NotSupportedError('{} is not supported on this database backend.'.format(combinator))
517.                 result, params = self.get_combinator_sql(combinator, self.query.combinator_all)
518.             else:
519.                 distinct_fields, distinct_params = self.get_distinct()
520.                 # This must come after 'select', 'ordering', and 'distinct'
521.                 # (see docstring of get_from_clause() for details).
522.                 from_, f_params = self.get_from_clause()
523.                 where, w_params = self.compile(self.where) if self.where is not None else ("", [])
524.                 having, h_params = self.compile(self.having) if self.having is not None else ("", [])
525.                 result = ['SELECT']
526.                 params = []
527. 
528.                 if self.query.distinct:
529.                     distinct_result, distinct_params = self.connection.ops.distinct_sql(
530.                         distinct_fields,
531.                         distinct_params,
532.                     )
533.                     result += distinct_result
534.                     params += distinct_params
535. 
536.                 out_cols = []
537.                 col_idx = 1
538.                 for _, (s_sql, s_params), alias in self.select + extra_select:
539.                     if alias:
540.                         s_sql = '%s AS %s' % (s_sql, self.connection.ops.quote_name(alias))
541.                     elif with_col_aliases:
542.                         s_sql = '%s AS %s' % (s_sql, 'Col%d' % col_idx)
543.                         col_idx += 1
544.                     params.extend(s_params)
545.                     out_cols.append(s_sql)
546. 
547.                 result += [', '.join(out_cols), 'FROM', *from_]
548.                 params.extend(f_params)
549. 
550.                 if self.query.select_for_update and self.connection.features.has_select_for_update:
551.                     if self.connection.get_autocommit():
552.                         raise TransactionManagementError('select_for_update cannot be used outside of a transaction.')
553. 
554.                     if with_limit_offset and not self.connection.features.supports_select_for_update_with_limit:
555.                         raise NotSupportedError(
556.                             'LIMIT/OFFSET is not supported with '
557.                             'select_for_update on this database backend.'
558.                         )
559.                     nowait = self.query.select_for_update_nowait
560.                     skip_locked = self.query.select_for_update_skip_locked
561.                     of = self.query.select_for_update_of
562.                     no_key = self.query.select_for_no_key_update
563.                     # If it's a NOWAIT/SKIP LOCKED/OF/NO KEY query but the
564.                     # backend doesn't support it, raise NotSupportedError to
565.                     # prevent a possible deadlock.
566.                     if nowait and not self.connection.features.has_select_for_update_nowait:
567.                         raise NotSupportedError('NOWAIT is not supported on this database backend.')
568.                     elif skip_locked and not self.connection.features.has_select_for_update_skip_locked:
569.                         raise NotSupportedError('SKIP LOCKED is not supported on this database backend.')
570.                     elif of and not self.connection.features.has_select_for_update_of:
571.                         raise NotSupportedError('FOR UPDATE OF is not supported on this database backend.')
572.                     elif no_key and not self.connection.features.has_select_for_no_key_update:
573.                         raise NotSupportedError(
574.                             'FOR NO KEY UPDATE is not supported on this '
575.                             'database backend.'
576.                         )
577.                     for_update_part = self.connection.ops.for_update_sql(
578.                         nowait=nowait,
579.                         skip_locked=skip_locked,
580.                         of=self.get_select_for_update_of_arguments(),
581.                         no_key=no_key,
582.                     )
583. 
584.                 if for_update_part and self.connection.features.for_update_after_from:
585.                     result.append(for_update_part)
586. 
587.                 if where:
588.                     result.append('WHERE %s' % where)
589.                     params.extend(w_params)
590. 
591.                 grouping = []
592.                 for g_sql, g_params in group_by:
593.                     grouping.append(g_sql)
594.                     params.extend(g_params)
595.                 if grouping:
596.                     if distinct_fields:
597.                         raise NotImplementedError('annotate() + distinct(fields) is not implemented.')
598.                     order_by = order_by or self.connection.ops.force_no_ordering()
599.                     result.append('GROUP BY %s' % ', '.join(grouping))
600.                     if self._meta_ordering:
601.                         order_by = None
602.                 if having:
603.                     result.append('HAVING %s' % having)
604.                     params.extend(h_params)
605. 
606.             if self.query.explain_query:
607.                 result.insert(0, self.connection.ops.explain_query_prefix(
608.                     self.query.explain_format,
609.                     **self.query.explain_options
610.                 ))
611. 
612.             if order_by:
613.                 ordering = []
614.                 for _, (o_sql, o_params, _) in order_by:
615.                     ordering.append(o_sql)
616.                     params.extend(o_params)
617.                 result.append('ORDER BY %s' % ', '.join(ordering))
618. 
619.             if with_limit_offset:
620.                 result.append(self.connection.ops.limit_offset_sql(self.query.low_mark, self.query.high_mark))
621. 
622.             if for_update_part and not self.connection.features.for_update_after_from:
623.                 result.append(for_update_part)
624. 
625.             if self.query.subquery and extra_select:
626.                 # If the query is used as a subquery, the extra selects would
627.                 # result in more columns than the left-hand side expression is
628.                 # expecting. This can happen when a subquery uses a combination
629.                 # of order_by() and distinct(), forcing the ordering expressions
630.                 # to be selected as well. Wrap the query in another subquery
631.                 # to exclude extraneous selects.
632.                 sub_selects = []
633.                 sub_params = []
634.                 for index, (select, _, alias) in enumerate(self.select, start=1):
635.                     if not alias and with_col_aliases:
636.                         alias = 'col%d' % index
637.                     if alias:
638.                         sub_selects.append("%s.%s" % (
639.                             self.connection.ops.quote_name('subquery'),
640.                             self.connection.ops.quote_name(alias),
641.                         ))
642.                     else:
643.                         select_clone = select.relabeled_clone({select.alias: 'subquery'})
644.                         subselect, subparams = select_clone.as_sql(self, self.connection)
645.                         sub_selects.append(subselect)
646.                         sub_params.extend(subparams)
647.                 return 'SELECT %s FROM (%s) subquery' % (
648.                     ', '.join(sub_selects),
649.                     ' '.join(result),
650.                 ), tuple(sub_params + params)
651. 
652.             return ' '.join(result), tuple(params)
653.         finally:
654.             # Finally do cleanup - get rid of the joins we created above.
655.             self.query.reset_refcounts(refcounts_before)
656. 
657.     def get_default_columns(self, start_alias=None, opts=None, from_parent=None):
658.         """
659.         Compute the default columns for selecting every field in the base
660.         model. Will sometimes be called to pull in related models (e.g. via
661.         select_related), in which case "opts" and "start_alias" will be given
662.         to provide a starting point for the traversal.
663. 
664.         Return a list of strings, quoted appropriately for use in SQL
665.         directly, as well as a set of aliases used in the select statement (if
666.         'as_pairs' is True, return a list of (alias, col_name) pairs instead
667.         of strings as the first component and None as the second component).
668.         """
669.         result = []
670.         if opts is None:
671.             opts = self.query.get_meta()
672.         only_load = self.deferred_to_columns()
673.         start_alias = start_alias or self.query.get_initial_alias()
674.         # The 'seen_models' is used to optimize checking the needed parent
675.         # alias for a given field. This also includes None -> start_alias to
676.         # be used by local fields.
677.         seen_models = {None: start_alias}
678. 
679.         for field in opts.concrete_fields:
680.             model = field.model._meta.concrete_model
681.             # A proxy model will have a different model and concrete_model. We
682.             # will assign None if the field belongs to this model.
683.             if model == opts.model:
684.                 model = None
685.             if from_parent and model is not None and issubclass(
686.                     from_parent._meta.concrete_model, model._meta.concrete_model):
687.                 # Avoid loading data for already loaded parents.
688.                 # We end up here in the case select_related() resolution
689.                 # proceeds from parent model to child model. In that case the
690.                 # parent model data is already present in the SELECT clause,
691.                 # and we want to avoid reloading the same data again.
692.                 continue
693.             if field.model in only_load and field.attname not in only_load[field.model]:
694.                 continue
695.             alias = self.query.join_parent_model(opts, model, start_alias,
696.                                                  seen_models)
697.             column = field.get_col(alias)
698.             result.append(column)
699.         return result
700. 
701.     def get_distinct(self):
702.         """
703.         Return a quoted list of fields to use in DISTINCT ON part of the query.
704. 
705.         This method can alter the tables in the query, and thus it must be
706.         called before get_from_clause().
707.         """
708.         result = []
709.         params = []
710.         opts = self.query.get_meta()
711. 
712.         for name in self.query.distinct_fields:
713.             parts = name.split(LOOKUP_SEP)
714.             _, targets, alias, joins, path, _, transform_function = self._setup_joins(parts, opts, None)
715.             targets, alias, _ = self.query.trim_joins(targets, joins, path)
716.             for target in targets:
717.                 if name in self.query.annotation_select:
718.                     result.append(name)
719.                 else:
720.                     r, p = self.compile(transform_function(target, alias))
721.                     result.append(r)
722.                     params.append(p)
723.         return result, params
724. 
725.     def find_ordering_name(self, name, opts, alias=None, default_order='ASC',
726.                            already_seen=None):
727.         """
728.         Return the table alias (the name might be ambiguous, the alias will
729.         not be) and column name for ordering by the given 'name' parameter.
730.         The 'name' is of the form 'field1__field2__...__fieldN'.
731.         """
732.         name, order = get_order_dir(name, default_order)
733.         descending = order == 'DESC'
734.         pieces = name.split(LOOKUP_SEP)
735.         field, targets, alias, joins, path, opts, transform_function = self._setup_joins(pieces, opts, alias)
736. 
737.         # If we get to this point and the field is a relation to another model,
738.         # append the default ordering for that model unless it is the pk
739.         # shortcut or the attribute name of the field that is specified.
740.         if (
741.             field.is_relation and
742.             opts.ordering and
743.             getattr(field, 'attname', None) != pieces[-1] and
744.             name != 'pk'
745.         ):
746.             # Firstly, avoid infinite loops.
747.             already_seen = already_seen or set()
748.             join_tuple = tuple(getattr(self.query.alias_map[j], 'join_cols', None) for j in joins)
749.             if join_tuple in already_seen:
750.                 raise FieldError('Infinite loop caused by ordering.')
751.             already_seen.add(join_tuple)
752. 
753.             results = []
754.             for item in opts.ordering:
755.                 if hasattr(item, 'resolve_expression') and not isinstance(item, OrderBy):
756.                     item = item.desc() if descending else item.asc()
757.                 if isinstance(item, OrderBy):
758.                     results.append((item, False))
759.                     continue
760.                 results.extend(self.find_ordering_name(item, opts, alias,
761.                                                        order, already_seen))
762.             return results
763.         targets, alias, _ = self.query.trim_joins(targets, joins, path)
764.         return [(OrderBy(transform_function(t, alias), descending=descending), False) for t in targets]
765. 
766.     def _setup_joins(self, pieces, opts, alias):
767.         """
768.         Helper method for get_order_by() and get_distinct().
769. 
770.         get_ordering() and get_distinct() must produce same target columns on
771.         same input, as the prefixes of get_ordering() and get_distinct() must
772.         match. Executing SQL where this is not true is an error.
773.         """
774.         alias = alias or self.query.get_initial_alias()
775.         field, targets, opts, joins, path, transform_function = self.query.setup_joins(pieces, opts, alias)
776.         alias = joins[-1]
777.         return field, targets, alias, joins, path, opts, transform_function
778. 
779.     def get_from_clause(self):
780.         """
781.         Return a list of strings that are joined together to go after the
782.         "FROM" part of the query, as well as a list any extra parameters that
783.         need to be included. Subclasses, can override this to create a
784.         from-clause via a "select".
785. 
786.         This should only be called after any SQL construction methods that
787.         might change the tables that are needed. This means the select columns,
788.         ordering, and distinct must be done first.
789.         """
790.         result = []
791.         params = []
792.         for alias in tuple(self.query.alias_map):
793.             if not self.query.alias_refcount[alias]:
794.                 continue
795.             try:
796.                 from_clause = self.query.alias_map[alias]
797.             except KeyError:
798.                 # Extra tables can end up in self.tables, but not in the
799.                 # alias_map if they aren't in a join. That's OK. We skip them.
800.                 continue
801.             clause_sql, clause_params = self.compile(from_clause)
802.             result.append(clause_sql)
803.             params.extend(clause_params)
804.         for t in self.query.extra_tables:
805.             alias, _ = self.query.table_alias(t)
806.             # Only add the alias if it's not already present (the table_alias()
807.             # call increments the refcount, so an alias refcount of one means
808.             # this is the only reference).
809.             if alias not in self.query.alias_map or self.query.alias_refcount[alias] == 1:
810.                 result.append(', %s' % self.quote_name_unless_alias(alias))
811.         return result, params
812. 
813.     def get_related_selections(self, select, opts=None, root_alias=None, cur_depth=1,
814.                                requested=None, restricted=None):
815.         """
816.         Fill in the information needed for a select_related query. The current
817.         depth is measured as the number of connections away from the root model
818.         (for example, cur_depth=1 means we are looking at models with direct
819.         connections to the root model).
820.         """
821.         def _get_field_choices():
822.             direct_choices = (f.name for f in opts.fields if f.is_relation)
823.             reverse_choices = (
824.                 f.field.related_query_name()
825.                 for f in opts.related_objects if f.field.unique
826.             )
827.             return chain(direct_choices, reverse_choices, self.query._filtered_relations)
828. 
829.         related_klass_infos = []
830.         if not restricted and cur_depth > self.query.max_depth:
831.             # We've recursed far enough; bail out.
832.             return related_klass_infos
833. 
834.         if not opts:
835.             opts = self.query.get_meta()
836.             root_alias = self.query.get_initial_alias()
837.         only_load = self.query.get_loaded_field_names()
838. 
839.         # Setup for the case when only particular related fields should be
840.         # included in the related selection.
841.         fields_found = set()
842.         if requested is None:
843.             restricted = isinstance(self.query.select_related, dict)
844.             if restricted:
845.                 requested = self.query.select_related
846. 
847.         def get_related_klass_infos(klass_info, related_klass_infos):
848.             klass_info['related_klass_infos'] = related_klass_infos
849. 
850.         for f in opts.fields:
851.             field_model = f.model._meta.concrete_model
852.             fields_found.add(f.name)
853. 
854.             if restricted:
855.                 next = requested.get(f.name, {})
856.                 if not f.is_relation:
857.                     # If a non-related field is used like a relation,
858.                     # or if a single non-relational field is given.
859.                     if next or f.name in requested:
860.                         raise FieldError(
861.                             "Non-relational field given in select_related: '%s'. "
862.                             "Choices are: %s" % (
863.                                 f.name,
864.                                 ", ".join(_get_field_choices()) or '(none)',
865.                             )
866.                         )
867.             else:
868.                 next = False
869. 
870.             if not select_related_descend(f, restricted, requested,
871.                                           only_load.get(field_model)):
872.                 continue
873.             klass_info = {
874.                 'model': f.remote_field.model,
875.                 'field': f,
876.                 'reverse': False,
877.                 'local_setter': f.set_cached_value,
878.                 'remote_setter': f.remote_field.set_cached_value if f.unique else lambda x, y: None,
879.                 'from_parent': False,
880.             }
881.             related_klass_infos.append(klass_info)
882.             select_fields = []
883.             _, _, _, joins, _, _ = self.query.setup_joins(
884.                 [f.name], opts, root_alias)
885.             alias = joins[-1]
886.             columns = self.get_default_columns(start_alias=alias, opts=f.remote_field.model._meta)
887.             for col in columns:
888.                 select_fields.append(len(select))
889.                 select.append((col, None))
890.             klass_info['select_fields'] = select_fields
891.             next_klass_infos = self.get_related_selections(
892.                 select, f.remote_field.model._meta, alias, cur_depth + 1, next, restricted)
893.             get_related_klass_infos(klass_info, next_klass_infos)
894. 
895.         if restricted:
896.             related_fields = [
897.                 (o.field, o.related_model)
898.                 for o in opts.related_objects
899.                 if o.field.unique and not o.many_to_many
900.             ]
901.             for f, model in related_fields:
902.                 if not select_related_descend(f, restricted, requested,
903.                                               only_load.get(model), reverse=True):
904.                     continue
905. 
906.                 related_field_name = f.related_query_name()
907.                 fields_found.add(related_field_name)
908. 
909.                 join_info = self.query.setup_joins([related_field_name], opts, root_alias)
910.                 alias = join_info.joins[-1]
911.                 from_parent = issubclass(model, opts.model) and model is not opts.model
912.                 klass_info = {
913.                     'model': model,
914.                     'field': f,
915.                     'reverse': True,
916.                     'local_setter': f.remote_field.set_cached_value,
917.                     'remote_setter': f.set_cached_value,
918.                     'from_parent': from_parent,
919.                 }
920.                 related_klass_infos.append(klass_info)
921.                 select_fields = []
922.                 columns = self.get_default_columns(
923.                     start_alias=alias, opts=model._meta, from_parent=opts.model)
924.                 for col in columns:
925.                     select_fields.append(len(select))
926.                     select.append((col, None))
927.                 klass_info['select_fields'] = select_fields
928.                 next = requested.get(f.related_query_name(), {})
929.                 next_klass_infos = self.get_related_selections(
930.                     select, model._meta, alias, cur_depth + 1,
931.                     next, restricted)
932.                 get_related_klass_infos(klass_info, next_klass_infos)
933. 
934.             def local_setter(obj, from_obj):
935.                 # Set a reverse fk object when relation is non-empty.
936.                 if from_obj:
937.                     f.remote_field.set_cached_value(from_obj, obj)
938. 
939.             def remote_setter(name, obj, from_obj):
940.                 setattr(from_obj, name, obj)
941. 
942.             for name in list(requested):
943.                 # Filtered relations work only on the topmost level.
944.                 if cur_depth > 1:
945.                     break
946.                 if name in self.query._filtered_relations:
947.                     fields_found.add(name)
948.                     f, _, join_opts, joins, _, _ = self.query.setup_joins([name], opts, root_alias)
949.                     model = join_opts.model
950.                     alias = joins[-1]
951.                     from_parent = issubclass(model, opts.model) and model is not opts.model
952.                     klass_info = {
953.                         'model': model,
954.                         'field': f,
955.                         'reverse': True,
956.                         'local_setter': local_setter,
957.                         'remote_setter': partial(remote_setter, name),
958.                         'from_parent': from_parent,
959.                     }
960.                     related_klass_infos.append(klass_info)
961.                     select_fields = []
962.                     columns = self.get_default_columns(
963.                         start_alias=alias, opts=model._meta,
964.                         from_parent=opts.model,
965.                     )
966.                     for col in columns:
967.                         select_fields.append(len(select))
968.                         select.append((col, None))
969.                     klass_info['select_fields'] = select_fields
970.                     next_requested = requested.get(name, {})
971.                     next_klass_infos = self.get_related_selections(
972.                         select, opts=model._meta, root_alias=alias,
973.                         cur_depth=cur_depth + 1, requested=next_requested,
974.                         restricted=restricted,
975.                     )
976.                     get_related_klass_infos(klass_info, next_klass_infos)
977.             fields_not_found = set(requested).difference(fields_found)
978.             if fields_not_found:
979.                 invalid_fields = ("'%s'" % s for s in fields_not_found)
980.                 raise FieldError(
981.                     'Invalid field name(s) given in select_related: %s. '
982.                     'Choices are: %s' % (
983.                         ', '.join(invalid_fields),
984.                         ', '.join(_get_field_choices()) or '(none)',
985.                     )
986.                 )
987.         return related_klass_infos
988. 
989.     def get_select_for_update_of_arguments(self):
990.         """
991.         Return a quoted list of arguments for the SELECT FOR UPDATE OF part of
992.         the query.
993.         """
994.         def _get_parent_klass_info(klass_info):
995.             concrete_model = klass_info['model']._meta.concrete_model
996.             for parent_model, parent_link in concrete_model._meta.parents.items():
997.                 parent_list = parent_model._meta.get_parent_list()
998.                 yield {
999.                     'model': parent_model,
1000.                     'field': parent_link,
1001.                     'reverse': False,
1002.                     'select_fields': [
1003.                         select_index
1004.                         for select_index in klass_info['select_fields']
1005.                         # Selected columns from a model or its parents.
1006.                         if (
1007.                             self.select[select_index][0].target.model == parent_model or
1008.                             self.select[select_index][0].target.model in parent_list
1009.                         )
1010.                     ],
1011.                 }
1012. 
1013.         def _get_first_selected_col_from_model(klass_info):
1014.             """
1015.             Find the first selected column from a model. If it doesn't exist,
1016.             don't lock a model.
1017. 
1018.             select_fields is filled recursively, so it also contains fields
1019.             from the parent models.
1020.             """
1021.             concrete_model = klass_info['model']._meta.concrete_model
1022.             for select_index in klass_info['select_fields']:
1023.                 if self.select[select_index][0].target.model == concrete_model:
1024.                     return self.select[select_index][0]
1025. 
1026.         def _get_field_choices():
1027.             """Yield all allowed field paths in breadth-first search order."""
1028.             queue = collections.deque([(None, self.klass_info)])
1029.             while queue:
1030.                 parent_path, klass_info = queue.popleft()
1031.                 if parent_path is None:
1032.                     path = []
1033.                     yield 'self'
1034.                 else:
1035.                     field = klass_info['field']
1036.                     if klass_info['reverse']:
1037.                         field = field.remote_field
1038.                     path = parent_path + [field.name]
1039.                     yield LOOKUP_SEP.join(path)
1040.                 queue.extend(
1041.                     (path, klass_info)
1042.                     for klass_info in _get_parent_klass_info(klass_info)
1043.                 )
1044.                 queue.extend(
1045.                     (path, klass_info)
1046.                     for klass_info in klass_info.get('related_klass_infos', [])
1047.                 )
1048.         result = []
1049.         invalid_names = []
1050.         for name in self.query.select_for_update_of:
1051.             klass_info = self.klass_info
1052.             if name == 'self':
1053.                 col = _get_first_selected_col_from_model(klass_info)
1054.             else:
1055.                 for part in name.split(LOOKUP_SEP):
1056.                     klass_infos = (
1057.                         *klass_info.get('related_klass_infos', []),
1058.                         *_get_parent_klass_info(klass_info),
1059.                     )
1060.                     for related_klass_info in klass_infos:
1061.                         field = related_klass_info['field']
1062.                         if related_klass_info['reverse']:
1063.                             field = field.remote_field
1064.                         if field.name == part:
1065.                             klass_info = related_klass_info
1066.                             break
1067.                     else:
1068.                         klass_info = None
1069.                         break
1070.                 if klass_info is None:
1071.                     invalid_names.append(name)
1072.                     continue
1073.                 col = _get_first_selected_col_from_model(klass_info)
1074.             if col is not None:
1075.                 if self.connection.features.select_for_update_of_column:
1076.                     result.append(self.compile(col)[0])
1077.                 else:
1078.                     result.append(self.quote_name_unless_alias(col.alias))
1079.         if invalid_names:
1080.             raise FieldError(
1081.                 'Invalid field name(s) given in select_for_update(of=(...)): %s. '
1082.                 'Only relational fields followed in the query are allowed. '
1083.                 'Choices are: %s.' % (
1084.                     ', '.join(invalid_names),
1085.                     ', '.join(_get_field_choices()),
1086.                 )
1087.             )
1088.         return result
1089. 
1090.     def deferred_to_columns(self):
1091.         """
1092.         Convert the self.deferred_loading data structure to mapping of table
1093.         names to sets of column names which are to be loaded. Return the
1094.         dictionary.
1095.         """
1096.         columns = {}
1097.         self.query.deferred_to_data(columns, self.query.get_loaded_field_names_cb)
1098.         return columns
1099. 
1100.     def get_converters(self, expressions):
1101.         converters = {}
1102.         for i, expression in enumerate(expressions):
1103.             if expression:
1104.                 backend_converters = self.connection.ops.get_db_converters(expression)
1105.                 field_converters = expression.get_db_converters(self.connection)
1106.                 if backend_converters or field_converters:
1107.                     converters[i] = (backend_converters + field_converters, expression)
1108.         return converters
1109. 
1110.     def apply_converters(self, rows, converters):
1111.         connection = self.connection
1112.         converters = list(converters.items())
1113.         for row in map(list, rows):
1114.             for pos, (convs, expression) in converters:
1115.                 value = row[pos]
1116.                 for converter in convs:
1117.                     value = converter(value, expression, connection)
1118.                 row[pos] = value
1119.             yield row
1120. 
1121.     def results_iter(self, results=None, tuple_expected=False, chunked_fetch=False,
1122.                      chunk_size=GET_ITERATOR_CHUNK_SIZE):
1123.         """Return an iterator over the results from executing this query."""
1124.         if results is None:
1125.             results = self.execute_sql(MULTI, chunked_fetch=chunked_fetch, chunk_size=chunk_size)
1126.         fields = [s[0] for s in self.select[0:self.col_count]]
1127.         converters = self.get_converters(fields)
1128.         rows = chain.from_iterable(results)
1129.         if converters:
1130.             rows = self.apply_converters(rows, converters)
1131.             if tuple_expected:
1132.                 rows = map(tuple, rows)
1133.         return rows
1134. 
1135.     def has_results(self):
1136.         """
1137.         Backends (e.g. NoSQL) can override this in order to use optimized
1138.         versions of "query has any results."
1139.         """
1140.         return bool(self.execute_sql(SINGLE))
1141. 
1142.     def execute_sql(self, result_type=MULTI, chunked_fetch=False, chunk_size=GET_ITERATOR_CHUNK_SIZE):
1143.         """
1144.         Run the query against the database and return the result(s). The
1145.         return value is a single data item if result_type is SINGLE, or an
1146.         iterator over the results if the result_type is MULTI.
1147. 
1148.         result_type is either MULTI (use fetchmany() to retrieve all rows),
1149.         SINGLE (only retrieve a single row), or None. In this last case, the
1150.         cursor is returned if any query is executed, since it's used by
1151.         subclasses such as InsertQuery). It's possible, however, that no query
1152.         is needed, as the filters describe an empty set. In that case, None is
1153.         returned, to avoid any unnecessary database interaction.
1154.         """
1155.         result_type = result_type or NO_RESULTS
1156.         try:
1157.             sql, params = self.as_sql()
1158.             if not sql:
1159.                 raise EmptyResultSet
1160.         except EmptyResultSet:
1161.             if result_type == MULTI:
1162.                 return iter([])
1163.             else:
1164.                 return
1165.         if chunked_fetch:
1166.             cursor = self.connection.chunked_cursor()
1167.         else:
1168.             cursor = self.connection.cursor()
1169.         try:
1170.             cursor.execute(sql, params)
1171.         except Exception:
1172.             # Might fail for server-side cursors (e.g. connection closed)
1173.             cursor.close()
1174.             raise
1175. 
1176.         if result_type == CURSOR:
1177.             # Give the caller the cursor to process and close.
1178.             return cursor
1179.         if result_type == SINGLE:
1180.             try:
1181.                 val = cursor.fetchone()
1182.                 if val:
1183.                     return val[0:self.col_count]
1184.                 return val
1185.             finally:
1186.                 # done with the cursor
1187.                 cursor.close()
1188.         if result_type == NO_RESULTS:
1189.             cursor.close()
1190.             return
1191. 
1192.         result = cursor_iter(
1193.             cursor, self.connection.features.empty_fetchmany_value,
1194.             self.col_count if self.has_extra_select else None,
1195.             chunk_size,
1196.         )
1197.         if not chunked_fetch or not self.connection.features.can_use_chunked_reads:
1198.             try:
1199.                 # If we are using non-chunked reads, we return the same data
1200.                 # structure as normally, but ensure it is all read into memory
1201.                 # before going any further. Use chunked_fetch if requested,
1202.                 # unless the database doesn't support it.
1203.                 return list(result)
1204.             finally:
1205.                 # done with the cursor
1206.                 cursor.close()
1207.         return result
1208. 
1209.     def as_subquery_condition(self, alias, columns, compiler):
1210.         qn = compiler.quote_name_unless_alias
1211.         qn2 = self.connection.ops.quote_name
1212. 
1213.         for index, select_col in enumerate(self.query.select):
1214.             lhs_sql, lhs_params = self.compile(select_col)
1215.             rhs = '%s.%s' % (qn(alias), qn2(columns[index]))
1216.             self.query.where.add(
1217.                 RawSQL('%s = %s' % (lhs_sql, rhs), lhs_params), 'AND')
1218. 
1219.         sql, params = self.as_sql()
1220.         return 'EXISTS (%s)' % sql, params
1221. 
1222.     def explain_query(self):
1223.         result = list(self.execute_sql())
1224.         # Some backends return 1 item tuples with strings, and others return
1225.         # tuples with integers and strings. Flatten them out into strings.
1226.         for row in result[0]:
1227.             if not isinstance(row, str):
1228.                 yield ' '.join(str(c) for c in row)
1229.             else:
1230.                 yield row
1231. 
1232. 
1233. class SQLInsertCompiler(SQLCompiler):
1234.     returning_fields = None
1235.     returning_params = tuple()
1236. 
1237.     def field_as_sql(self, field, val):
1238.         """
1239.         Take a field and a value intended to be saved on that field, and
1240.         return placeholder SQL and accompanying params. Check for raw values,
1241.         expressions, and fields with get_placeholder() defined in that order.
1242. 
1243.         When field is None, consider the value raw and use it as the
1244.         placeholder, with no corresponding parameters returned.
1245.         """
1246.         if field is None:
1247.             # A field value of None means the value is raw.
1248.             sql, params = val, []
1249.         elif hasattr(val, 'as_sql'):
1250.             # This is an expression, let's compile it.
1251.             sql, params = self.compile(val)
1252.         elif hasattr(field, 'get_placeholder'):
1253.             # Some fields (e.g. geo fields) need special munging before
1254.             # they can be inserted.
1255.             sql, params = field.get_placeholder(val, self, self.connection), [val]
1256.         else:
1257.             # Return the common case for the placeholder
1258.             sql, params = '%s', [val]
1259. 
1260.         # The following hook is only used by Oracle Spatial, which sometimes
1261.         # needs to yield 'NULL' and [] as its placeholder and params instead
1262.         # of '%s' and [None]. The 'NULL' placeholder is produced earlier by
1263.         # OracleOperations.get_geom_placeholder(). The following line removes
1264.         # the corresponding None parameter. See ticket #10888.
1265.         params = self.connection.ops.modify_insert_params(sql, params)
1266. 
1267.         return sql, params
1268. 
1269.     def prepare_value(self, field, value):
1270.         """
1271.         Prepare a value to be used in a query by resolving it if it is an
1272.         expression and otherwise calling the field's get_db_prep_save().
1273.         """
1274.         if hasattr(value, 'resolve_expression'):
1275.             value = value.resolve_expression(self.query, allow_joins=False, for_save=True)
1276.             # Don't allow values containing Col expressions. They refer to
1277.             # existing columns on a row, but in the case of insert the row
1278.             # doesn't exist yet.
1279.             if value.contains_column_references:
1280.                 raise ValueError(
1281.                     'Failed to insert expression "%s" on %s. F() expressions '
1282.                     'can only be used to update, not to insert.' % (value, field)
1283.                 )
1284.             if value.contains_aggregate:
1285.                 raise FieldError(
1286.                     'Aggregate functions are not allowed in this query '
1287.                     '(%s=%r).' % (field.name, value)
1288.                 )
1289.             if value.contains_over_clause:
1290.                 raise FieldError(
1291.                     'Window expressions are not allowed in this query (%s=%r).'
1292.                     % (field.name, value)
1293.                 )
1294.         else:
1295.             value = field.get_db_prep_save(value, connection=self.connection)
1296.         return value
1297. 
1298.     def pre_save_val(self, field, obj):
1299.         """
1300.         Get the given field's value off the given obj. pre_save() is used for
1301.         things like auto_now on DateTimeField. Skip it if this is a raw query.
1302.         """
1303.         if self.query.raw:
1304.             return getattr(obj, field.attname)
1305.         return field.pre_save(obj, add=True)
1306. 
1307.     def assemble_as_sql(self, fields, value_rows):
1308.         """
1309.         Take a sequence of N fields and a sequence of M rows of values, and
1310.         generate placeholder SQL and parameters for each field and value.
1311.         Return a pair containing:
1312.          * a sequence of M rows of N SQL placeholder strings, and
1313.          * a sequence of M rows of corresponding parameter values.
1314. 
1315.         Each placeholder string may contain any number of '%s' interpolation
1316.         strings, and each parameter row will contain exactly as many params
1317.         as the total number of '%s's in the corresponding placeholder row.
1318.         """
1319.         if not value_rows:
1320.             return [], []
1321. 
1322.         # list of (sql, [params]) tuples for each object to be saved
1323.         # Shape: [n_objs][n_fields][2]
1324.         rows_of_fields_as_sql = (
1325.             (self.field_as_sql(field, v) for field, v in zip(fields, row))
1326.             for row in value_rows
1327.         )
1328. 
1329.         # tuple like ([sqls], [[params]s]) for each object to be saved
1330.         # Shape: [n_objs][2][n_fields]
1331.         sql_and_param_pair_rows = (zip(*row) for row in rows_of_fields_as_sql)
1332. 
1333.         # Extract separate lists for placeholders and params.
1334.         # Each of these has shape [n_objs][n_fields]
1335.         placeholder_rows, param_rows = zip(*sql_and_param_pair_rows)
1336. 
1337.         # Params for each field are still lists, and need to be flattened.
1338.         param_rows = [[p for ps in row for p in ps] for row in param_rows]
1339. 
1340.         return placeholder_rows, param_rows
1341. 
1342.     def as_sql(self):
1343.         # We don't need quote_name_unless_alias() here, since these are all
1344.         # going to be column names (so we can avoid the extra overhead).
1345.         qn = self.connection.ops.quote_name
1346.         opts = self.query.get_meta()
1347.         insert_statement = self.connection.ops.insert_statement(ignore_conflicts=self.query.ignore_conflicts)
1348.         result = ['%s %s' % (insert_statement, qn(opts.db_table))]
1349.         fields = self.query.fields or [opts.pk]
1350.         result.append('(%s)' % ', '.join(qn(f.column) for f in fields))
1351. 
1352.         if self.query.fields:
1353.             value_rows = [
1354.                 [self.prepare_value(field, self.pre_save_val(field, obj)) for field in fields]
1355.                 for obj in self.query.objs
1356.             ]
1357.         else:
1358.             # An empty object.
1359.             value_rows = [[self.connection.ops.pk_default_value()] for _ in self.query.objs]
1360.             fields = [None]
1361. 
1362.         # Currently the backends just accept values when generating bulk
1363.         # queries and generate their own placeholders. Doing that isn't
1364.         # necessary and it should be possible to use placeholders and
1365.         # expressions in bulk inserts too.
1366.         can_bulk = (not self.returning_fields and self.connection.features.has_bulk_insert)
1367. 
1368.         placeholder_rows, param_rows = self.assemble_as_sql(fields, value_rows)
1369. 
1370.         ignore_conflicts_suffix_sql = self.connection.ops.ignore_conflicts_suffix_sql(
1371.             ignore_conflicts=self.query.ignore_conflicts
1372.         )
1373.         if self.returning_fields and self.connection.features.can_return_columns_from_insert:
1374.             if self.connection.features.can_return_rows_from_bulk_insert:
1375.                 result.append(self.connection.ops.bulk_insert_sql(fields, placeholder_rows))
1376.                 params = param_rows
1377.             else:
1378.                 result.append("VALUES (%s)" % ", ".join(placeholder_rows[0]))
1379.                 params = [param_rows[0]]
1380.             if ignore_conflicts_suffix_sql:
1381.                 result.append(ignore_conflicts_suffix_sql)
1382.             # Skip empty r_sql to allow subclasses to customize behavior for
1383.             # 3rd party backends. Refs #19096.
1384.             r_sql, self.returning_params = self.connection.ops.return_insert_columns(self.returning_fields)
1385.             if r_sql:
1386.                 result.append(r_sql)
1387.                 params += [self.returning_params]
1388.             return [(" ".join(result), tuple(chain.from_iterable(params)))]
1389. 
1390.         if can_bulk:
1391.             result.append(self.connection.ops.bulk_insert_sql(fields, placeholder_rows))
1392.             if ignore_conflicts_suffix_sql:
1393.                 result.append(ignore_conflicts_suffix_sql)
1394.             return [(" ".join(result), tuple(p for ps in param_rows for p in ps))]
1395.         else:
1396.             if ignore_conflicts_suffix_sql:
1397.                 result.append(ignore_conflicts_suffix_sql)
1398.             return [
1399.                 (" ".join(result + ["VALUES (%s)" % ", ".join(p)]), vals)
1400.                 for p, vals in zip(placeholder_rows, param_rows)
1401.             ]
1402. 
1403.     def execute_sql(self, returning_fields=None):
1404.         assert not (
1405.             returning_fields and len(self.query.objs) != 1 and
1406.             not self.connection.features.can_return_rows_from_bulk_insert
1407.         )
1408.         self.returning_fields = returning_fields
1409.         with self.connection.cursor() as cursor:
1410.             for sql, params in self.as_sql():
1411.                 cursor.execute(sql, params)
1412.             if not self.returning_fields:
1413.                 return []
1414.             if self.connection.features.can_return_rows_from_bulk_insert and len(self.query.objs) > 1:
1415.                 return self.connection.ops.fetch_returned_insert_rows(cursor)
1416.             if self.connection.features.can_return_columns_from_insert:
1417.                 assert len(self.query.objs) == 1
1418.                 return [self.connection.ops.fetch_returned_insert_columns(cursor, self.returning_params)]
1419.             return [(self.connection.ops.last_insert_id(
1420.                 cursor, self.query.get_meta().db_table, self.query.get_meta().pk.column
1421.             ),)]
1422. 
1423. 
1424. class SQLDeleteCompiler(SQLCompiler):
1425.     @cached_property
1426.     def single_alias(self):
1427.         # Ensure base table is in aliases.
1428.         self.query.get_initial_alias()
1429.         return sum(self.query.alias_refcount[t] > 0 for t in self.query.alias_map) == 1
1430. 
1431.     def _as_sql(self, query):
1432.         result = [
1433.             'DELETE FROM %s' % self.quote_name_unless_alias(query.base_table)
1434.         ]
1435.         where, params = self.compile(query.where)
1436.         if where:
1437.             result.append('WHERE %s' % where)
1438.         return ' '.join(result), tuple(params)
1439. 
1440.     def as_sql(self):
1441.         """
1442.         Create the SQL for this query. Return the SQL string and list of
1443.         parameters.
1444.         """
1445.         if self.single_alias:
1446.             return self._as_sql(self.query)
1447.         innerq = self.query.clone()
1448.         innerq.__class__ = Query
1449.         innerq.clear_select_clause()
1450.         pk = self.query.model._meta.pk
1451.         innerq.select = [
1452.             pk.get_col(self.query.get_initial_alias())
1453.         ]
1454.         outerq = Query(self.query.model)
1455.         outerq.where = self.query.where_class()
1456.         if not self.connection.features.update_can_self_select:
1457.             # Force the materialization of the inner query to allow reference
1458.             # to the target table on MySQL.
1459.             sql, params = innerq.get_compiler(connection=self.connection).as_sql()
1460.             innerq = RawSQL('SELECT * FROM (%s) subquery' % sql, params)
1461.         outerq.add_q(Q(pk__in=innerq))
1462.         return self._as_sql(outerq)
1463. 
1464. 
1465. class SQLUpdateCompiler(SQLCompiler):
1466.     def as_sql(self):
1467.         """
1468.         Create the SQL for this query. Return the SQL string and list of
1469.         parameters.
1470.         """
1471.         self.pre_sql_setup()
1472.         if not self.query.values:
1473.             return '', ()
1474.         qn = self.quote_name_unless_alias
1475.         values, update_params = [], []
1476.         for field, model, val in self.query.values:
1477.             if hasattr(val, 'resolve_expression'):
1478.                 val = val.resolve_expression(self.query, allow_joins=False, for_save=True)
1479.                 if val.contains_aggregate:
1480.                     raise FieldError(
1481.                         'Aggregate functions are not allowed in this query '
1482.                         '(%s=%r).' % (field.name, val)
1483.                     )
1484.                 if val.contains_over_clause:
1485.                     raise FieldError(
1486.                         'Window expressions are not allowed in this query '
1487.                         '(%s=%r).' % (field.name, val)
1488.                     )
1489.             elif hasattr(val, 'prepare_database_save'):
1490.                 if field.remote_field:
1491.                     val = field.get_db_prep_save(
1492.                         val.prepare_database_save(field),
1493.                         connection=self.connection,
1494.                     )
1495.                 else:
1496.                     raise TypeError(
1497.                         "Tried to update field %s with a model instance, %r. "
1498.                         "Use a value compatible with %s."
1499.                         % (field, val, field.__class__.__name__)
1500.                     )

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-12-22 16:54:22,009 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The existing context from `compiler.py` and `fields/__init__.py` shows how converters are registered and where they should be applied. However, the implementation of the database operations (`connection.ops`) that fetch the data from the database is missing. I need to see the base implementation of these operations to understand their default behavior regarding type conversion and to confirm that they do not apply the field-level converters, which would justify the proposed patch.' query='Please provide the full content of the file `django/db/backends/base/operations.py`.' extra_requirements='' purpose='I need to inspect the base database operations to understand the default data handling for values returned from INSERT statements and to see what converters are applied by default.'
2025-12-22 16:54:22,010 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of the file `django/db/backends/base/operations.py`.
2025-12-22 16:54:22,010 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_retrieval_node - ERROR - Failed to retrieve from memory: Athena memory client is not configured.
2025-12-22 16:54:22,011 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-12-22 16:54:22,012 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-12-22 16:54:22,012 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of the file `django/db/backends/base/operations.py`.
Purpose: I need to inspect the base database operations to understand the default data handling for values returned from INSERT statements and to see what converters are applied by default.
2025-12-22 16:54:24,738 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content='I have retrieved the full content of the file `django/db/backends/base/operations.py` so you can inspect the base database operations, understand the default data handling for values returned from INSERT statements, and see what converters are applied by default.' additional_kwargs={'function_call': {'name': 'read_file_with_knowledge_graph_data', 'arguments': '{"relative_path": "django/db/backends/base/operations.py"}'}} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 2111, 'candidates_token_count': 77, 'total_token_count': 2281, 'prompt_tokens_details': [{'modality': 1, 'token_count': 2111}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 77}], 'thoughts_token_count': 93, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -0.04150272034979486, 'model_name': 'gemini-2.5-pro'} id='run--0db9a73d-03df-495a-b566-285f81390def-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'django/db/backends/base/operations.py'}, 'id': 'd18ad4d3-06cd-4c3b-8773-cd31bc95fdd4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2111, 'output_tokens': 77, 'total_tokens': 2281, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 93}}
2025-12-22 16:54:37,000 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_provider_node - DEBUG - content="I have retrieved the full content of `django/db/backends/base/operations.py` for you. In this file, you'll find the `BaseDatabaseOperations` class, which encapsulates backend-specific database operations. For your purpose of understanding data handling, you may want to pay special attention to the `fetch_returned_insert_columns` method, which handles data returned from `INSERT` statements, and the various `adapt_*` methods (e.g., `adapt_datetimefield_value`, `adapt_decimalfield_value`) which manage the conversion of Python types to database-specific formats." additional_kwargs={} response_metadata={'is_blocked': False, 'safety_ratings': [], 'usage_metadata': {'prompt_token_count': 9483, 'candidates_token_count': 127, 'total_token_count': 10576, 'prompt_tokens_details': [{'modality': 1, 'token_count': 9483}], 'candidates_tokens_details': [{'modality': 1, 'token_count': 127}], 'thoughts_token_count': 966, 'cached_content_token_count': 0, 'cache_tokens_details': []}, 'finish_reason': 'STOP', 'avg_logprobs': -1.1377633162370817, 'model_name': 'gemini-2.5-pro'} id='run--5b2db0b9-3c03-4fa9-9700-5967d08291aa-0' usage_metadata={'input_tokens': 9483, 'output_tokens': 127, 'total_tokens': 10576, 'input_token_details': {'cache_read': 0}, 'output_token_details': {'reasoning': 966}}
2025-12-22 16:54:37,001 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of the file `django/db/backends/base/operations.py`.
--- END QUERY ---



--- BEGIN PURPOSE ---
I need to inspect the base database operations to understand the default data handling for values returned from INSERT statements and to see what converters are applied by default.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: django/db/backends/base/operations.py
Line number range: 1 - 500
Content:
1. import datetime
2. import decimal
3. from importlib import import_module
4. 
5. import sqlparse
6. 
7. from django.conf import settings
8. from django.db import NotSupportedError, transaction
9. from django.db.backends import utils
10. from django.utils import timezone
11. from django.utils.encoding import force_str
12. 
13. 
14. class BaseDatabaseOperations:
15.     """
16.     Encapsulate backend-specific differences, such as the way a backend
17.     performs ordering or calculates the ID of a recently-inserted row.
18.     """
19.     compiler_module = "django.db.models.sql.compiler"
20. 
21.     # Integer field safe ranges by `internal_type` as documented
22.     # in docs/ref/models/fields.txt.
23.     integer_field_ranges = {
24.         'SmallIntegerField': (-32768, 32767),
25.         'IntegerField': (-2147483648, 2147483647),
26.         'BigIntegerField': (-9223372036854775808, 9223372036854775807),
27.         'PositiveBigIntegerField': (0, 9223372036854775807),
28.         'PositiveSmallIntegerField': (0, 32767),
29.         'PositiveIntegerField': (0, 2147483647),
30.         'SmallAutoField': (-32768, 32767),
31.         'AutoField': (-2147483648, 2147483647),
32.         'BigAutoField': (-9223372036854775808, 9223372036854775807),
33.     }
34.     set_operators = {
35.         'union': 'UNION',
36.         'intersection': 'INTERSECT',
37.         'difference': 'EXCEPT',
38.     }
39.     # Mapping of Field.get_internal_type() (typically the model field's class
40.     # name) to the data type to use for the Cast() function, if different from
41.     # DatabaseWrapper.data_types.
42.     cast_data_types = {}
43.     # CharField data type if the max_length argument isn't provided.
44.     cast_char_field_without_max_length = None
45. 
46.     # Start and end points for window expressions.
47.     PRECEDING = 'PRECEDING'
48.     FOLLOWING = 'FOLLOWING'
49.     UNBOUNDED_PRECEDING = 'UNBOUNDED ' + PRECEDING
50.     UNBOUNDED_FOLLOWING = 'UNBOUNDED ' + FOLLOWING
51.     CURRENT_ROW = 'CURRENT ROW'
52. 
53.     # Prefix for EXPLAIN queries, or None EXPLAIN isn't supported.
54.     explain_prefix = None
55. 
56.     def __init__(self, connection):
57.         self.connection = connection
58.         self._cache = None
59. 
60.     def autoinc_sql(self, table, column):
61.         """
62.         Return any SQL needed to support auto-incrementing primary keys, or
63.         None if no SQL is necessary.
64. 
65.         This SQL is executed when a table is created.
66.         """
67.         return None
68. 
69.     def bulk_batch_size(self, fields, objs):
70.         """
71.         Return the maximum allowed batch size for the backend. The fields
72.         are the fields going to be inserted in the batch, the objs contains
73.         all the objects to be inserted.
74.         """
75.         return len(objs)
76. 
77.     def cache_key_culling_sql(self):
78.         """
79.         Return an SQL query that retrieves the first cache key greater than the
80.         n smallest.
81. 
82.         This is used by the 'db' cache backend to determine where to start
83.         culling.
84.         """
85.         return "SELECT cache_key FROM %s ORDER BY cache_key LIMIT 1 OFFSET %%s"
86. 
87.     def unification_cast_sql(self, output_field):
88.         """
89.         Given a field instance, return the SQL that casts the result of a union
90.         to that type. The resulting string should contain a '%s' placeholder
91.         for the expression being cast.
92.         """
93.         return '%s'
94. 
95.     def date_extract_sql(self, lookup_type, field_name):
96.         """
97.         Given a lookup_type of 'year', 'month', or 'day', return the SQL that
98.         extracts a value from the given date field field_name.
99.         """
100.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a date_extract_sql() method')
101. 
102.     def date_trunc_sql(self, lookup_type, field_name, tzname=None):
103.         """
104.         Given a lookup_type of 'year', 'month', or 'day', return the SQL that
105.         truncates the given date or datetime field field_name to a date object
106.         with only the given specificity.
107. 
108.         If `tzname` is provided, the given value is truncated in a specific
109.         timezone.
110.         """
111.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a date_trunc_sql() method.')
112. 
113.     def datetime_cast_date_sql(self, field_name, tzname):
114.         """
115.         Return the SQL to cast a datetime value to date value.
116.         """
117.         raise NotImplementedError(
118.             'subclasses of BaseDatabaseOperations may require a '
119.             'datetime_cast_date_sql() method.'
120.         )
121. 
122.     def datetime_cast_time_sql(self, field_name, tzname):
123.         """
124.         Return the SQL to cast a datetime value to time value.
125.         """
126.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a datetime_cast_time_sql() method')
127. 
128.     def datetime_extract_sql(self, lookup_type, field_name, tzname):
129.         """
130.         Given a lookup_type of 'year', 'month', 'day', 'hour', 'minute', or
131.         'second', return the SQL that extracts a value from the given
132.         datetime field field_name.
133.         """
134.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a datetime_extract_sql() method')
135. 
136.     def datetime_trunc_sql(self, lookup_type, field_name, tzname):
137.         """
138.         Given a lookup_type of 'year', 'month', 'day', 'hour', 'minute', or
139.         'second', return the SQL that truncates the given datetime field
140.         field_name to a datetime object with only the given specificity.
141.         """
142.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a datetime_trunc_sql() method')
143. 
144.     def time_trunc_sql(self, lookup_type, field_name, tzname=None):
145.         """
146.         Given a lookup_type of 'hour', 'minute' or 'second', return the SQL
147.         that truncates the given time or datetime field field_name to a time
148.         object with only the given specificity.
149. 
150.         If `tzname` is provided, the given value is truncated in a specific
151.         timezone.
152.         """
153.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a time_trunc_sql() method')
154. 
155.     def time_extract_sql(self, lookup_type, field_name):
156.         """
157.         Given a lookup_type of 'hour', 'minute', or 'second', return the SQL
158.         that extracts a value from the given time field field_name.
159.         """
160.         return self.date_extract_sql(lookup_type, field_name)
161. 
162.     def deferrable_sql(self):
163.         """
164.         Return the SQL to make a constraint "initially deferred" during a
165.         CREATE TABLE statement.
166.         """
167.         return ''
168. 
169.     def distinct_sql(self, fields, params):
170.         """
171.         Return an SQL DISTINCT clause which removes duplicate rows from the
172.         result set. If any fields are given, only check the given fields for
173.         duplicates.
174.         """
175.         if fields:
176.             raise NotSupportedError('DISTINCT ON fields is not supported by this database backend')
177.         else:
178.             return ['DISTINCT'], []
179. 
180.     def fetch_returned_insert_columns(self, cursor, returning_params):
181.         """
182.         Given a cursor object that has just performed an INSERT...RETURNING
183.         statement into a table, return the newly created data.
184.         """
185.         return cursor.fetchone()
186. 
187.     def field_cast_sql(self, db_type, internal_type):
188.         """
189.         Given a column type (e.g. 'BLOB', 'VARCHAR') and an internal type
190.         (e.g. 'GenericIPAddressField'), return the SQL to cast it before using
191.         it in a WHERE statement. The resulting string should contain a '%s'
192.         placeholder for the column being searched against.
193.         """
194.         return '%s'
195. 
196.     def force_no_ordering(self):
197.         """
198.         Return a list used in the "ORDER BY" clause to force no ordering at
199.         all. Return an empty list to include nothing in the ordering.
200.         """
201.         return []
202. 
203.     def for_update_sql(self, nowait=False, skip_locked=False, of=(), no_key=False):
204.         """
205.         Return the FOR UPDATE SQL clause to lock rows for an update operation.
206.         """
207.         return 'FOR%s UPDATE%s%s%s' % (
208.             ' NO KEY' if no_key else '',
209.             ' OF %s' % ', '.join(of) if of else '',
210.             ' NOWAIT' if nowait else '',
211.             ' SKIP LOCKED' if skip_locked else '',
212.         )
213. 
214.     def _get_limit_offset_params(self, low_mark, high_mark):
215.         offset = low_mark or 0
216.         if high_mark is not None:
217.             return (high_mark - offset), offset
218.         elif offset:
219.             return self.connection.ops.no_limit_value(), offset
220.         return None, offset
221. 
222.     def limit_offset_sql(self, low_mark, high_mark):
223.         """Return LIMIT/OFFSET SQL clause."""
224.         limit, offset = self._get_limit_offset_params(low_mark, high_mark)
225.         return ' '.join(sql for sql in (
226.             ('LIMIT %d' % limit) if limit else None,
227.             ('OFFSET %d' % offset) if offset else None,
228.         ) if sql)
229. 
230.     def last_executed_query(self, cursor, sql, params):
231.         """
232.         Return a string of the query last executed by the given cursor, with
233.         placeholders replaced with actual values.
234. 
235.         `sql` is the raw query containing placeholders and `params` is the
236.         sequence of parameters. These are used by default, but this method
237.         exists for database backends to provide a better implementation
238.         according to their own quoting schemes.
239.         """
240.         # Convert params to contain string values.
241.         def to_string(s):
242.             return force_str(s, strings_only=True, errors='replace')
243.         if isinstance(params, (list, tuple)):
244.             u_params = tuple(to_string(val) for val in params)
245.         elif params is None:
246.             u_params = ()
247.         else:
248.             u_params = {to_string(k): to_string(v) for k, v in params.items()}
249. 
250.         return "QUERY = %r - PARAMS = %r" % (sql, u_params)
251. 
252.     def last_insert_id(self, cursor, table_name, pk_name):
253.         """
254.         Given a cursor object that has just performed an INSERT statement into
255.         a table that has an auto-incrementing ID, return the newly created ID.
256. 
257.         `pk_name` is the name of the primary-key column.
258.         """
259.         return cursor.lastrowid
260. 
261.     def lookup_cast(self, lookup_type, internal_type=None):
262.         """
263.         Return the string to use in a query when performing lookups
264.         ("contains", "like", etc.). It should contain a '%s' placeholder for
265.         the column being searched against.
266.         """
267.         return "%s"
268. 
269.     def max_in_list_size(self):
270.         """
271.         Return the maximum number of items that can be passed in a single 'IN'
272.         list condition, or None if the backend does not impose a limit.
273.         """
274.         return None
275. 
276.     def max_name_length(self):
277.         """
278.         Return the maximum length of table and column names, or None if there
279.         is no limit.
280.         """
281.         return None
282. 
283.     def no_limit_value(self):
284.         """
285.         Return the value to use for the LIMIT when we are wanting "LIMIT
286.         infinity". Return None if the limit clause can be omitted in this case.
287.         """
288.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a no_limit_value() method')
289. 
290.     def pk_default_value(self):
291.         """
292.         Return the value to use during an INSERT statement to specify that
293.         the field should use its default value.
294.         """
295.         return 'DEFAULT'
296. 
297.     def prepare_sql_script(self, sql):
298.         """
299.         Take an SQL script that may contain multiple lines and return a list
300.         of statements to feed to successive cursor.execute() calls.
301. 
302.         Since few databases are able to process raw SQL scripts in a single
303.         cursor.execute() call and PEP 249 doesn't talk about this use case,
304.         the default implementation is conservative.
305.         """
306.         return [
307.             sqlparse.format(statement, strip_comments=True)
308.             for statement in sqlparse.split(sql) if statement
309.         ]
310. 
311.     def process_clob(self, value):
312.         """
313.         Return the value of a CLOB column, for backends that return a locator
314.         object that requires additional processing.
315.         """
316.         return value
317. 
318.     def return_insert_columns(self, fields):
319.         """
320.         For backends that support returning columns as part of an insert query,
321.         return the SQL and params to append to the INSERT query. The returned
322.         fragment should contain a format string to hold the appropriate column.
323.         """
324.         pass
325. 
326.     def compiler(self, compiler_name):
327.         """
328.         Return the SQLCompiler class corresponding to the given name,
329.         in the namespace corresponding to the `compiler_module` attribute
330.         on this backend.
331.         """
332.         if self._cache is None:
333.             self._cache = import_module(self.compiler_module)
334.         return getattr(self._cache, compiler_name)
335. 
336.     def quote_name(self, name):
337.         """
338.         Return a quoted version of the given table, index, or column name. Do
339.         not quote the given name if it's already been quoted.
340.         """
341.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a quote_name() method')
342. 
343.     def regex_lookup(self, lookup_type):
344.         """
345.         Return the string to use in a query when performing regular expression
346.         lookups (using "regex" or "iregex"). It should contain a '%s'
347.         placeholder for the column being searched against.
348. 
349.         If the feature is not supported (or part of it is not supported), raise
350.         NotImplementedError.
351.         """
352.         raise NotImplementedError('subclasses of BaseDatabaseOperations may require a regex_lookup() method')
353. 
354.     def savepoint_create_sql(self, sid):
355.         """
356.         Return the SQL for starting a new savepoint. Only required if the
357.         "uses_savepoints" feature is True. The "sid" parameter is a string
358.         for the savepoint id.
359.         """
360.         return "SAVEPOINT %s" % self.quote_name(sid)
361. 
362.     def savepoint_commit_sql(self, sid):
363.         """
364.         Return the SQL for committing the given savepoint.
365.         """
366.         return "RELEASE SAVEPOINT %s" % self.quote_name(sid)
367. 
368.     def savepoint_rollback_sql(self, sid):
369.         """
370.         Return the SQL for rolling back the given savepoint.
371.         """
372.         return "ROLLBACK TO SAVEPOINT %s" % self.quote_name(sid)
373. 
374.     def set_time_zone_sql(self):
375.         """
376.         Return the SQL that will set the connection's time zone.
377. 
378.         Return '' if the backend doesn't support time zones.
379.         """
380.         return ''
381. 
382.     def sql_flush(self, style, tables, *, reset_sequences=False, allow_cascade=False):
383.         """
384.         Return a list of SQL statements required to remove all data from
385.         the given database tables (without actually removing the tables
386.         themselves).
387. 
388.         The `style` argument is a Style object as returned by either
389.         color_style() or no_style() in django.core.management.color.
390. 
391.         If `reset_sequences` is True, the list includes SQL statements required
392.         to reset the sequences.
393. 
394.         The `allow_cascade` argument determines whether truncation may cascade
395.         to tables with foreign keys pointing the tables being truncated.
396.         PostgreSQL requires a cascade even if these tables are empty.
397.         """
398.         raise NotImplementedError('subclasses of BaseDatabaseOperations must provide an sql_flush() method')
399. 
400.     def execute_sql_flush(self, sql_list):
401.         """Execute a list of SQL statements to flush the database."""
402.         with transaction.atomic(
403.             using=self.connection.alias,
404.             savepoint=self.connection.features.can_rollback_ddl,
405.         ):
406.             with self.connection.cursor() as cursor:
407.                 for sql in sql_list:
408.                     cursor.execute(sql)
409. 
410.     def sequence_reset_by_name_sql(self, style, sequences):
411.         """
412.         Return a list of the SQL statements required to reset sequences
413.         passed in `sequences`.
414. 
415.         The `style` argument is a Style object as returned by either
416.         color_style() or no_style() in django.core.management.color.
417.         """
418.         return []
419. 
420.     def sequence_reset_sql(self, style, model_list):
421.         """
422.         Return a list of the SQL statements required to reset sequences for
423.         the given models.
424. 
425.         The `style` argument is a Style object as returned by either
426.         color_style() or no_style() in django.core.management.color.
427.         """
428.         return []  # No sequence reset required by default.
429. 
430.     def start_transaction_sql(self):
431.         """Return the SQL statement required to start a transaction."""
432.         return "BEGIN;"
433. 
434.     def end_transaction_sql(self, success=True):
435.         """Return the SQL statement required to end a transaction."""
436.         if not success:
437.             return "ROLLBACK;"
438.         return "COMMIT;"
439. 
440.     def tablespace_sql(self, tablespace, inline=False):
441.         """
442.         Return the SQL that will be used in a query to define the tablespace.
443. 
444.         Return '' if the backend doesn't support tablespaces.
445. 
446.         If `inline` is True, append the SQL to a row; otherwise append it to
447.         the entire CREATE TABLE or CREATE INDEX statement.
448.         """
449.         return ''
450. 
451.     def prep_for_like_query(self, x):
452.         """Prepare a value for use in a LIKE query."""
453.         return str(x).replace("\\", "\\\\").replace("%", r"\%").replace("_", r"\_")
454. 
455.     # Same as prep_for_like_query(), but called for "iexact" matches, which
456.     # need not necessarily be implemented using "LIKE" in the backend.
457.     prep_for_iexact_query = prep_for_like_query
458. 
459.     def validate_autopk_value(self, value):
460.         """
461.         Certain backends do not accept some values for "serial" fields
462.         (for example zero in MySQL). Raise a ValueError if the value is
463.         invalid, otherwise return the validated value.
464.         """
465.         return value
466. 
467.     def adapt_unknown_value(self, value):
468.         """
469.         Transform a value to something compatible with the backend driver.
470. 
471.         This method only depends on the type of the value. It's designed for
472.         cases where the target type isn't known, such as .raw() SQL queries.
473.         As a consequence it may not work perfectly in all circumstances.
474.         """
475.         if isinstance(value, datetime.datetime):   # must be before date
476.             return self.adapt_datetimefield_value(value)
477.         elif isinstance(value, datetime.date):
478.             return self.adapt_datefield_value(value)
479.         elif isinstance(value, datetime.time):
480.             return self.adapt_timefield_value(value)
481.         elif isinstance(value, decimal.Decimal):
482.             return self.adapt_decimalfield_value(value)
483.         else:
484.             return value
485. 
486.     def adapt_datefield_value(self, value):
487.         """
488.         Transform a date value to an object compatible with what is expected
489.         by the backend driver for date columns.
490.         """
491.         if value is None:
492.             return None
493.         return str(value)
494. 
495.     def adapt_datetimefield_value(self, value):
496.         """
497.         Transform a datetime value to an object compatible with what is expected
498.         by the backend driver for datetime columns.
499.         """
500.         if value is None:

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-12-22 16:54:45,274 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning="1. Query requirement analysis:\n   - The user explicitly requested the full content of the file `django/db/backends/base/operations.py`.\n2. Extended relevance:\n   - The user's stated purpose is to understand default data handling for INSERT statements and default converters. This file defines the `BaseDatabaseOperations` class, which includes methods like `fetch_returned_insert_columns`, `last_insert_id`, and various `adapt_*_value` methods that are directly related to the user's goal. Therefore, the entire file content is relevant.", relative_path='django/db/backends/base/operations.py', start_line=1, end_line=500)]
2025-12-22 16:54:45,276 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Storing 1 contexts to memory for query: Please provide the full content of the file `django/db/backends/base/operations.py`.
2025-12-22 16:54:45,276 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - ERROR - Failed to store to memory: Athena memory client is not configured.
2025-12-22 16:54:45,276 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-12-22 16:54:45,277 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - Adding 1 new contexts to 3 existing contexts
2025-12-22 16:54:45,277 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 4 total contexts (removed 0 duplicates)
2025-12-22 16:54:45,277 - thread-133710586312384.prometheus_context_collector.lang_graph.nodes.context_refine_node - INFO - Reached max_refined_query_loop, not asking for more context
2025-12-22 16:54:45,278 - thread-133710586312384.prometheus_context_collector - INFO - Successfully retrieved 4 context snippets
